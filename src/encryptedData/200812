From java-user-return-37418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 04:35:32 2008
Return-Path: <java-user-return-37418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6591 invoked from network); 1 Dec 2008 04:35:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 04:35:32 -0000
Received: (qmail 4562 invoked by uid 500); 1 Dec 2008 04:35:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4526 invoked by uid 500); 1 Dec 2008 04:35:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4515 invoked by uid 99); 1 Dec 2008 04:35:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Nov 2008 20:35:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.125] (HELO smtp142.mail.mud.yahoo.com) (209.191.107.125)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 01 Dec 2008 04:34:05 +0000
Received: (qmail 13930 invoked from network); 1 Dec 2008 04:34:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=p5T6P0F4P9VffTLg5r4QvA1BSgmSahfasQ2rHWWxmdgObYWP05M/BE3ogTcQXS0lkSi6mb96vgefzPNzKhSquhTfdYrEThv5m1aZOyiWdJVlz6lTtOImld9ZILuqTjfq188Sg2ovuir5AOPYxPxJlH3+OVspkWjxUB+tFtuKf04=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp142.mail.mud.yahoo.com with SMTP; 1 Dec 2008 04:34:51 -0000
X-YMail-OSG: mKaAQxMVM1nqyymFgAeJlg1tm9M.2_cJWBRRzf7Lwnup7je5rPi7vGDTDOM7UgnLCv3vaEMSo7CmEJOOcvoEENGBIopAvqMlbnKT7XGAdd1yY612Fb85Hrri.0gWQDPRAie.X4Jk7cwR5I3nPqMBeFbbJ6VwSwAgLhfC6oWa.HmcB5sdIchqq9kl53de8w--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <111001c9536e$2673efd0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <492B92B2.9010006@teamware.com> <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com> <492C7C6E.7070501@teamware.com>
Subject: Re: Which is faster/better
Date: Mon, 1 Dec 2008 10:04:48 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I have to Tag a document based on User request. On deletion, I should do 
'marked for delete' and on document state change, i need to update the 
document.
Update internally does delete and add. I am commiting the writer and 
re-opening the reader, every minute.

Consider, In a minute, lets say User has deleted a document from the UI.
If i use IndexWriter, then it is updating the document. but it is getting 
refreshed only after a minute. If User refreshes his page, then he could see 
the deleted item again.

In order to avoid this situitation, i need to plan
 1. Delete the document using reader
 2. Add the document with new state using Writer.

I think, we can't avoid using DeleteDocument of Reader. Suggest me, if there 
is any other way.

Regards
Ganesh


----- Original Message ----- 
From: "Antony Bowesman" <adb@teamware.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, November 26, 2008 4:00 AM
Subject: Re: Which is faster/better


> Michael McCandless wrote:
>>
>> If you have nothing open already, and all you want to do is delete
>> certain documents and make a commit point, then using IndexReader vs
>> IndexWriter should show very little difference in speed.
>
> Thanks.  This use case can assume there may be nothing open.  I prefer 
> IndexWriter as delete=write is a much clearer concept that delete=read...
>
>> As of 2.4, IndexWriter now provides delete-by-Query, which I think
>> ought to meet nearly all of the cases where someone wants to
>> delete-by-docID using IndexReader.
>
> Yes, that is an excellent addition.  Up to now, our only use case for 
> delete-by-docId is to perform a dBQ and so far, we have been using your 
> suggestion from last year about how to do delete documents for ALL terms.
>
> Antony
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 08:29:58 2008
Return-Path: <java-user-return-37419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8532 invoked from network); 1 Dec 2008 08:29:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 08:29:58 -0000
Received: (qmail 77511 invoked by uid 500); 1 Dec 2008 08:30:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77480 invoked by uid 500); 1 Dec 2008 08:30:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77469 invoked by uid 99); 1 Dec 2008 08:30:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 00:30:01 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.213] (HELO smtp103.mail.mud.yahoo.com) (209.191.85.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 01 Dec 2008 08:28:31 +0000
Received: (qmail 90019 invoked from network); 1 Dec 2008 08:28:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=wq5dHuCQml5i0ov15U3LyBKEbGZNAa7ZCp1KuPY1+VvPT1SVfflRqSscjVqx9CmvuHvGmAYZe/daUKH427Dl25vL/QMfuPdVdW4mOC5r3quo3ATjOI8lR9G0QFSXzHzMYeCWvxVtx138O2L+UWXAUoSBSoX7vdLMiyPOgAqPzUU=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp103.mail.mud.yahoo.com with SMTP; 1 Dec 2008 08:28:16 -0000
X-YMail-OSG: pAawIb8VM1m5vwPTIhJR0k82abBD5PFCF9KOCnfrDeJOwut7.KI6rh3SylLWjzAOUggVpeyDEDRPRC9xki9Mrzh9h3tF.96AcwMs2pc1_Oq7hai5M2AmtWz.mGjx55DJEK0pk6rzKsgbM_SY1TpsrUlFgydhQYoiFtZmm_FgJXhDJPwe_aY_xeeFWYe.Hw--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <114d01c9538e$c24f5410$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <06f501c94ee4$9805d980$330bc30a@sv.us.sonicwall.com> <A61867D4-1B38-463C-A793-32C1A060384D@ehatchersolutions.com>
Subject: Re: Marked for deletion
Date: Mon, 1 Dec 2008 13:58:11 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I need to index voluminous data and i plan to shard it. The client may not 
know which shard db to query. Server will take care of complete shard 
management. I have done almost 50% of  development with Lucene.

In case of Solr, i think the client should be aware of which core or 
instance it want to communicate?

Regards
Ganesh

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, November 25, 2008 4:45 PM
Subject: Re: Marked for deletion


>
> On Nov 25, 2008, at 5:00 AM, Ganesh wrote:
>> My index application is a separate process and my search application  is 
>> part of web ui. When User performs delete, i want to do mark for 
>> deletion.
>>
>> I think i have no other option other than to update the document,  but 
>> index app is a separate process and it uses index writer. In  order to 
>> update, I am planning to use RMI and create a single  application which 
>> does both index and search and also exposes some  search and delete 
>> methods.
>>
>> Is there any other way to achieve this?
>
> Perhaps consider using Solr if you're going to wrap Lucene with some  sort 
> of service layer.  It already takes care of the bulk of the hard  stuff 
> that you'd end up having to deal with (warming, etc).
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 08:44:24 2008
Return-Path: <java-user-return-37420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14319 invoked from network); 1 Dec 2008 08:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 08:44:23 -0000
Received: (qmail 92384 invoked by uid 500); 1 Dec 2008 08:44:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92346 invoked by uid 500); 1 Dec 2008 08:44:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92335 invoked by uid 99); 1 Dec 2008 08:44:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 00:44:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 08:43:00 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6686C30EFC17; Mon,  1 Dec 2008 01:43:46 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (unknown [138.210.10.225])
	by ehatchersolutions.com (Postfix) with ESMTP id AB3D830EFC16
	for <java-user@lucene.apache.org>; Mon,  1 Dec 2008 01:43:45 -0700 (MST)
Message-Id: <58AB97EC-BE87-4CE4-8DFF-C659439C0B79@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <114d01c9538e$c24f5410$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Marked for deletion
X-Priority: 3
Date: Mon, 1 Dec 2008 03:43:44 -0500
References: <06f501c94ee4$9805d980$330bc30a@sv.us.sonicwall.com> <A61867D4-1B38-463C-A793-32C1A060384D@ehatchersolutions.com> <114d01c9538e$c24f5410$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Dec 1, 2008, at 3:28 AM, Ganesh wrote:
> I need to index voluminous data and i plan to shard it. The client  
> may not know which shard db to query. Server will take care of  
> complete shard management. I have done almost 50% of  development  
> with Lucene.
>
> In case of Solr, i think the client should be aware of which core or  
> instance it want to communicate?

See <http://wiki.apache.org/solr/DistributedSearch>

The example shows a shards parameter being sent from a client, yes....  
but all Solr parameters can be either specified from the client or set  
in server-side configuration. So no, a client doesn't need to be aware  
of which shards to query.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 10:13:07 2008
Return-Path: <java-user-return-37421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63170 invoked from network); 1 Dec 2008 10:13:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 10:13:07 -0000
Received: (qmail 79833 invoked by uid 500); 1 Dec 2008 10:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79789 invoked by uid 500); 1 Dec 2008 10:13:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79778 invoked by uid 99); 1 Dec 2008 10:13:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 02:13:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.2.129.75] (HELO penthesilea.sfs.uni-tuebingen.de) (134.2.129.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 10:11:40 +0000
Received: from [134.2.129.126] (ithaka.sfs.uni-tuebingen.de [134.2.129.126])
	by penthesilea.sfs.uni-tuebingen.de (Postfix) with ESMTP id EA75BC6D6
	for <java-user@lucene.apache.org>; Mon,  1 Dec 2008 11:12:23 +0100 (MET)
Message-ID: <4933B918.4060209@sfs.uni-tuebingen.de>
Date: Mon, 01 Dec 2008 11:14:48 +0100
From: Niels Ott <nott@sfs.uni-tuebingen.de>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Deleting from Index by URL field: is it safe?
References: <49305509.5000409@sfs.uni-tuebingen.de> <76df56980811281632sc11056cw5fe5f996d5e3559f@mail.gmail.com>
In-Reply-To: <76df56980811281632sc11056cw5fe5f996d5e3559f@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

German Kondolf schrieb:
> It works exactly as it does when you search of that term.
> 
> Review in your index creation, if you store it without analyzing it
> (Index.UN_TOKENIZED), it will only match that document when you have an
> exact URL.

Is that also true if I simply use the KeywordAnalyzer?

The reason why I want to do it this way is that I have a special 
Analyzer that encapsulates the "knowledge" on how to treat each field. 
In a way something like the PerFieldAnalyzerWrapper but more 
specialized. I want to use the very same Analyzer for querying as well, 
so it appears to me that it is good to have the "knowledge" about the 
treatment of fields in that single place.

> It's possible that the URL is not unique enought in your domain, there is no
> other unique identifier that you could use?

I think the URL is unique enough for my cases. The system is still a 
prototype so I can change that later, if it turns out that it doesn't do 
the job for me.

> I suggest you create a test and try it on a RAMDirectory and see exactly
> what happens and what you want!

This looks like a good idea to me. Thank you for the hint.

Best,

    Niels

-- 
Niels Ott
Computational Linguist (B.A.)
http://www.drni.de/niels/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 10:56:58 2008
Return-Path: <java-user-return-37422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76406 invoked from network); 1 Dec 2008 10:56:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 10:56:58 -0000
Received: (qmail 36620 invoked by uid 500); 1 Dec 2008 10:57:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36598 invoked by uid 500); 1 Dec 2008 10:57:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36587 invoked by uid 99); 1 Dec 2008 10:57:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 02:57:04 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 10:55:35 +0000
Received: by an-out-0708.google.com with SMTP id b2so798001ana.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 02:56:11 -0800 (PST)
Received: by 10.100.141.10 with SMTP id o10mr5625843and.41.1228128971498;
        Mon, 01 Dec 2008 02:56:11 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id c9sm5048135ana.39.2008.12.01.02.56.09
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 01 Dec 2008 02:56:10 -0800 (PST)
Message-Id: <D0AA23C8-2D0E-4DA1-888C-9BA5DE1E80DD@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: API changes in 2.4
Date: Mon, 1 Dec 2008 05:56:07 -0500
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Heads up: there are two API changes in 2.4 that might bite you on
upgrading:

   * If you are subclassing QueryParser and override addClause or
     getBooleanQuery, you need to change the argument type from Vector
     to List, else your method won't be called.  This was caused by
     LUCENE-1369, where I accidentally broke back compatibility
     (sorry!!).

   * If you use Document.getFieldables, getFields, getValues or
     getBinaryValues, these methods now return an empty list instead of
     null if there are 0 things to return.  If you have code that
     checks != null you need to change it to .size() != 0.  This was
     from LUCENE-1233

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 11:29:30 2008
Return-Path: <java-user-return-37423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86211 invoked from network); 1 Dec 2008 11:29:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 11:29:29 -0000
Received: (qmail 70209 invoked by uid 500); 1 Dec 2008 11:29:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70166 invoked by uid 500); 1 Dec 2008 11:29:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70154 invoked by uid 99); 1 Dec 2008 11:29:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 03:29:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dk1982@hotmail.it designates 65.55.34.79 as permitted sender)
Received: from [65.55.34.79] (HELO col0-omc2-s5.col0.hotmail.com) (65.55.34.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 11:28:00 +0000
Received: from COL113-W31 ([65.55.34.72]) by col0-omc2-s5.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 1 Dec 2008 03:28:47 -0800
Message-ID: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_c15044a1-5c62-4c68-85bf-3c9e7c6fff3d_"
X-Originating-IP: [88.51.233.126]
From: tiziano bernardi <dk1982@hotmail.it>
To: <java-user@lucene.apache.org>
Subject: Pdf in Lucene?
Date: Mon, 1 Dec 2008 12:28:47 +0100
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Dec 2008 11:28:47.0228 (UTC) FILETIME=[F9CB8BC0:01C953A7]
X-Virus-Checked: Checked by ClamAV on apache.org

--_c15044a1-5c62-4c68-85bf-3c9e7c6fff3d_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



Hi=2C
I want to index PDF files with lucene is possible?=20
What like?
Thanks Tiziano Bernardi
_________________________________________________________________
Fanne di tutti i colori=2C personalizza la tua Hotmail!
http://imagine-windowslive.com/Hotmail/#0=

--_c15044a1-5c62-4c68-85bf-3c9e7c6fff3d_--

From java-user-return-37424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 11:38:39 2008
Return-Path: <java-user-return-37424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90784 invoked from network); 1 Dec 2008 11:38:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 11:38:38 -0000
Received: (qmail 86042 invoked by uid 500); 1 Dec 2008 11:38:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85745 invoked by uid 500); 1 Dec 2008 11:38:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85733 invoked by uid 99); 1 Dec 2008 11:38:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 03:38:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dk1982@hotmail.it designates 65.55.34.78 as permitted sender)
Received: from [65.55.34.78] (HELO col0-omc2-s4.col0.hotmail.com) (65.55.34.78)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 11:37:00 +0000
Received: from COL113-W33 ([65.55.34.73]) by col0-omc2-s4.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 1 Dec 2008 03:37:47 -0800
Message-ID: <COL113-W33B6FF5DD69C1B0C68C8ACBE010@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_2e2efd69-0143-4546-a6fe-96a4504f837b_"
X-Originating-IP: [88.51.233.126]
From: tiziano bernardi <dk1982@hotmail.it>
To: java lucene domande <java-user@lucene.apache.org>
Subject: Pdf in Lucene?
Date: Mon, 1 Dec 2008 12:37:47 +0100
Importance: Normal
In-Reply-To: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Dec 2008 11:37:47.0052 (UTC) FILETIME=[3B8E26C0:01C953A9]
X-Virus-Checked: Checked by ClamAV on apache.org

--_2e2efd69-0143-4546-a6fe-96a4504f837b_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi=2CI want to index PDF files with lucene is possible? What like?Thanks Ti=
ziano Bernardi
_________________________________________________________________
50 nuovi schemi per giocare su CrossWire! Accetta la sfida!
http://livesearch.games.msn.com/crosswire/play_it/=

--_2e2efd69-0143-4546-a6fe-96a4504f837b_--

From java-user-return-37425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 11:39:19 2008
Return-Path: <java-user-return-37425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91238 invoked from network); 1 Dec 2008 11:39:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 11:39:19 -0000
Received: (qmail 90566 invoked by uid 500); 1 Dec 2008 11:39:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90538 invoked by uid 500); 1 Dec 2008 11:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90527 invoked by uid 99); 1 Dec 2008 11:39:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 03:39:22 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 11:37:51 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2438197fkq.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 03:38:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=cdifXL+8MRGpe5AjDCt7x1jzf/G9Hbu4GgQoUR+LmSU=;
        b=wMivWgCNMbz3EuWUTxW3yMZ8xrwCvWYtsGuDlzPtVvMIvgj9n85w/wWFdEczDjY3f7
         w/0nwnd0cU5wfZOeWW9VdKkCGUUdmylPvd5bkJKuXneSD8frtCRrds8F95t5XzV6eIs0
         cLToeas1vkNf+1E87hxtQidcYyJhrfrrX31hs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=pqtma7lcllvruQifs+pedd2XdPleFNzVulLVDe0jtHuIy7q/V0EYv/7m4uUxM+uvr3
         KH/E4784P5g4NJoSdfa+mSCeXQ0LWyWq+jQTDV6xdG1ydJXiUj3OJn48liiP4cznZcPX
         ZgcQ3xbq2ijrqIaKZnnOrC9Aj0ci8Q8UwHQp4=
Received: by 10.180.241.8 with SMTP id o8mr3910507bkh.102.1228131505389;
        Mon, 01 Dec 2008 03:38:25 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Mon, 1 Dec 2008 03:38:25 -0800 (PST)
Message-ID: <5d53d5770812010338t79dd5a17g976d26cde73e21d3@mail.gmail.com>
Date: Mon, 1 Dec 2008 07:38:25 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Hits Max # of documents?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_98188_540193.1228131505388"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_98188_540193.1228131505388
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

(I'm using Lucene.NET but the APIs are close enough)
I'd like the search to always return all documents always. I notice that it
'seems'  to return a percentage of them.

Hits myHits = searcher.search(query);

Is what I use.

Is there a way to force the searcher to give me everything?

Ian

------=_Part_98188_540193.1228131505388--

From java-user-return-37426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 11:43:49 2008
Return-Path: <java-user-return-37426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92864 invoked from network); 1 Dec 2008 11:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 11:43:49 -0000
Received: (qmail 99215 invoked by uid 500); 1 Dec 2008 11:43:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98951 invoked by uid 500); 1 Dec 2008 11:43:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98876 invoked by uid 99); 1 Dec 2008 11:43:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 03:43:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 11:42:18 +0000
Received: by qyk13 with SMTP id 13so3163712qyk.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 03:43:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=P1U+eJ2Qi+cD4TA8RdAlZ+GalXoPXHeFMyDP4Jhmeds=;
        b=FYw6vDN2Ff2PXEUkjvbnfCyQMUqsILnRCz/5Dlu+EbTQZ2X3QFeln7v550Rls1QW87
         0U+Iy/KgqUhxTB9L6vJatbaTlDC8rFw5SPlgpEmjdR8L5qNiDdIcYfhRvaJTlOB0fKRH
         WD9a49pP6dzNgn5hGU0MwMVKNu76b23WbC6sk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=P/l3kiNQOPabrM6kBzHkh8mfkrpq37d5rFu5LfPXW+9WNI6R1vdU0O2maTQK1o59Z/
         5zFiPcFM7fT3kVjHVF6+ZPVctNbUeN83C0HP8aLn4fhhIHMapNn6JDUpooVHZGkuPJkr
         F9Pt9kZCkunLpda2DTGotHuWPXuXesvTKDOpY=
Received: by 10.214.59.11 with SMTP id h11mr5856593qaa.292.1228131780160;
        Mon, 01 Dec 2008 03:43:00 -0800 (PST)
Received: by 10.214.241.8 with HTTP; Mon, 1 Dec 2008 03:43:00 -0800 (PST)
Message-ID: <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com>
Date: Mon, 1 Dec 2008 11:43:00 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Pdf in Lucene?
In-Reply-To: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Lucene only indexes text so you'll have to get the text out of the PDF
and feed it to lucene.

Google for lucene pdf, or go straight to http://www.pdfbox.org/


--
Ian.



2008/12/1 tiziano bernardi <dk1982@hotmail.it>:
>
>
> Hi,
> I want to index PDF files with lucene is possible?
> What like?
> Thanks Tiziano Bernardi
> _________________________________________________________________
> Fanne di tutti i colori, personalizza la tua Hotmail!
> http://imagine-windowslive.com/Hotmail/#0

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 11:46:09 2008
Return-Path: <java-user-return-37427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93498 invoked from network); 1 Dec 2008 11:46:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 11:46:08 -0000
Received: (qmail 7642 invoked by uid 500); 1 Dec 2008 11:46:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7594 invoked by uid 500); 1 Dec 2008 11:46:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7583 invoked by uid 99); 1 Dec 2008 11:46:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 03:46:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 11:44:39 +0000
Received: by qyk13 with SMTP id 13so3164498qyk.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 03:45:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=bM/w5dy7fsdLYZyWZoDWyG5vNTq3qvr/SPfAv7QY3dY=;
        b=UNYYFFaVtDwgCoQ4ydk9MAn60Ghcx0Sx9X8Qr4NHedHHiAEnWkt7BEbgNiKIjUuvB/
         En0wAlMYzCkuxTDPKNrJAMQrTCyAfwsSdf13dw9h1Zlh4zk8xnkzzWCJCDP3fkawSwHH
         cKFXk/DlRdj3hgVXRLS7vmQmMWrJE9wvkXTd4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=jGv7WAPeYj4UaBSjcofGuO6jqX4y+DjNc/X+kfVOVf7nDzft6nhgrYEBtnqUG2ArkO
         mt6iGxSarZMKIlJIvqQSi4Ts/hl6pgS6vJ8/Nu0fyhjlv8/9FyqWsql/O5Lh+T3CeCNi
         VMHWjEUChYoFQGPtmbzlyrHAHeddo82Po/4N4=
Received: by 10.214.184.7 with SMTP id h7mr9522297qaf.178.1228131926519;
        Mon, 01 Dec 2008 03:45:26 -0800 (PST)
Received: by 10.214.241.8 with HTTP; Mon, 1 Dec 2008 03:45:26 -0800 (PST)
Message-ID: <8c4e68610812010345u6b4fbee0p974c0505a1db705b@mail.gmail.com>
Date: Mon, 1 Dec 2008 11:45:26 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hits Max # of documents?
In-Reply-To: <5d53d5770812010338t79dd5a17g976d26cde73e21d3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5d53d5770812010338t79dd5a17g976d26cde73e21d3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>From the (java) apidocs: Class MatchAllDocsQuery ... A query that
matches all documents.

Sounds like it should do the trick.


--
Ian.


On Mon, Dec 1, 2008 at 11:38 AM, Ian Vink <ianvink@gmail.com> wrote:
> (I'm using Lucene.NET but the APIs are close enough)
> I'd like the search to always return all documents always. I notice that it
> 'seems'  to return a percentage of them.
>
> Hits myHits = searcher.search(query);
>
> Is what I use.
>
> Is there a way to force the searcher to give me everything?
>
> Ian
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 11:46:28 2008
Return-Path: <java-user-return-37428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93624 invoked from network); 1 Dec 2008 11:46:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 11:46:28 -0000
Received: (qmail 9808 invoked by uid 500); 1 Dec 2008 11:46:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9781 invoked by uid 500); 1 Dec 2008 11:46:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9770 invoked by uid 99); 1 Dec 2008 11:46:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 03:46:31 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 11:45:01 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id ADE391FC8B
	for <java-user@lucene.apache.org>; Mon,  1 Dec 2008 03:45:16 -0800 (PST)
Message-Id: <EF17CB2B-A23B-47BB-92DE-9F60142F8C7A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <5d53d5770812010338t79dd5a17g976d26cde73e21d3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Hits Max # of documents?
Date: Mon, 1 Dec 2008 06:45:15 -0500
References: <5d53d5770812010338t79dd5a17g976d26cde73e21d3@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure about .NET, but there should be a version of the search()  
method that returns a TopDocs instance.

Looks like:  TopDocs td = searcher.search(query, int)
where the int is the number of results you want back, in your case,  
Integer.MAX_VALUE


-Grant

On Dec 1, 2008, at 6:38 AM, Ian Vink wrote:

> (I'm using Lucene.NET but the APIs are close enough)
> I'd like the search to always return all documents always. I notice  
> that it
> 'seems'  to return a percentage of them.
>
> Hits myHits = searcher.search(query);
>
> Is what I use.
>
> Is there a way to force the searcher to give me everything?
>
> Ian

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 13:02:57 2008
Return-Path: <java-user-return-37429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19595 invoked from network); 1 Dec 2008 13:02:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 13:02:56 -0000
Received: (qmail 23837 invoked by uid 500); 1 Dec 2008 13:03:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23110 invoked by uid 500); 1 Dec 2008 13:03:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23099 invoked by uid 99); 1 Dec 2008 13:03:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 05:03:00 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dk1982@hotmail.it designates 65.55.34.86 as permitted sender)
Received: from [65.55.34.86] (HELO col0-omc2-s12.col0.hotmail.com) (65.55.34.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 13:01:30 +0000
Received: from COL113-W45 ([65.55.34.71]) by col0-omc2-s12.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 1 Dec 2008 05:01:55 -0800
Message-ID: <COL113-W45437A1268795288A8839CBE010@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_6dedc315-0e1d-4852-8fa7-84b338992548_"
X-Originating-IP: [88.51.233.126]
From: tiziano bernardi <dk1982@hotmail.it>
To: java lucene domande <java-user@lucene.apache.org>
Subject: RE: Pdf in Lucene?
Date: Mon, 1 Dec 2008 14:01:56 +0100
Importance: Normal
In-Reply-To: <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com>
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
 <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Dec 2008 13:01:55.0962 (UTC) FILETIME=[FCF0ADA0:01C953B4]
X-Virus-Checked: Checked by ClamAV on apache.org

--_6dedc315-0e1d-4852-8fa7-84b338992548_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


I tried to use pdfbox but gives me an error.
That the version of lucene and the pdfbox are incompatible.
I use pdf box 0.7.3 and lucene 2.1.0> Date: Mon=2C 1 Dec 2008 11:43:00 +000=
0> From: ian.lea@gmail.com> To: java-user@lucene.apache.org> Subject: Re: P=
df in Lucene?> > Hi> > > Lucene only indexes text so you'll have to get the=
 text out of the PDF> and feed it to lucene.> > Google for lucene pdf=2C or=
 go straight to http://www.pdfbox.org/> > > --> Ian.> > > > 2008/12/1 tizia=
no bernardi <dk1982@hotmail.it>:> >> >> > Hi=2C> > I want to index PDF file=
s with lucene is possible?> > What like?> > Thanks Tiziano Bernardi> > ____=
_____________________________________________________________> > Fanne di t=
utti i colori=2C personalizza la tua Hotmail!> > http://imagine-windowslive=
.com/Hotmail/#0> > --------------------------------------------------------=
-------------> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apach=
e.org> For additional commands=2C e-mail: java-user-help@lucene.apache.org>=
=20
_________________________________________________________________
50 nuovi schemi per giocare su CrossWire! Accetta la sfida!
http://livesearch.games.msn.com/crosswire/play_it/=

--_6dedc315-0e1d-4852-8fa7-84b338992548_--

From java-user-return-37430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 13:21:13 2008
Return-Path: <java-user-return-37430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24967 invoked from network); 1 Dec 2008 13:21:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 13:21:13 -0000
Received: (qmail 36057 invoked by uid 500); 1 Dec 2008 13:21:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36027 invoked by uid 500); 1 Dec 2008 13:21:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36016 invoked by uid 99); 1 Dec 2008 13:21:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 05:21:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 13:19:50 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.311.2; Mon, 1 Dec 2008 14:20:14 +0100
Subject: Re: Query time document group boosting
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <DDF845E9-13FC-4AF0-8B76-B6AE4C2C5DC1@gmail.com>
References: <1227714863.25256.38.camel@pc286>
	 <B7D0017E-C6A1-4FB8-82A4-4509806062B6@gmail.com>
	 <1227777358.25256.70.camel@pc286>
	 <DDF845E9-13FC-4AF0-8B76-B6AE4C2C5DC1@gmail.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Mon, 1 Dec 2008 13:49:43 +0100
Message-ID: <1228135783.25256.108.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2008-11-27 at 20:55 +0100, Karl Wettin wrote:
> A cosmetic remark, I would personally choose a single field for the  
> boosts and then one token per source. (groupboost:A^10 groupboost:B^1  
> groupboost:C^0.1).

Agreed. Thanks.

> If I'm not misstaken CustomScoreQuery is a non matching query, that it  
> only touch the score of something that is already matched by a  
> subquery. If these statments are true then it feels like there are  
> clock ticks to save here.

> But maybe all of these things are a bit too preemptive. Just use what  
> you have if it seems to work well enough.

I'll go forward with groupboost:<groupname> and see how that works.

Regards,
Toke


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 13:24:09 2008
Return-Path: <java-user-return-37431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27189 invoked from network); 1 Dec 2008 13:24:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 13:24:09 -0000
Received: (qmail 49667 invoked by uid 500); 1 Dec 2008 13:24:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49318 invoked by uid 500); 1 Dec 2008 13:24:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49300 invoked by uid 99); 1 Dec 2008 13:24:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 05:24:13 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 13:22:43 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id DD70C870C6
	for <java-user@lucene.apache.org>; Mon,  1 Dec 2008 05:22:59 -0800 (PST)
Message-Id: <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <COL113-W45437A1268795288A8839CBE010@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Pdf in Lucene?
Date: Mon, 1 Dec 2008 08:22:58 -0500
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl> <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com> <COL113-W45437A1268795288A8839CBE010@phx.gbl>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 1, 2008, at 8:01 AM, tiziano bernardi wrote:

>
> I tried to use pdfbox but gives me an error.
> That the version of lucene and the pdfbox are incompatible.

Lucene knows nothing about PDFBox, so I don't see how they could be  
incompatible, unless your are referring to PDFBox's Lucene Document  
creator, in which case, you should ask on the PDFBox mailing list.  I  
think, however, that it's pretty straightforward to create a Lucene  
document from PDFBox, so you shouldn't need to rely on their version.

Personally, I'd have a look at Tika (http://lucene.apache.org/tika),  
which wraps PDFBox (and other extraction libraries) and gives you back  
SAX-like events via a ContentHandler, which you can then use to create  
Lucene documents.  Else, I've been working on SOLR-284, which  
integrates Tika into Solr, see https://issues.apache.org/jira/browse/SOLR-284

-Grant

>
> I use pdf box 0.7.3 and lucene 2.1.0> Date: Mon, 1 Dec 2008 11:43:00  
> +0000> From: ian.lea@gmail.com> To: java-user@lucene.apache.org>  
> Subject: Re: Pdf in Lucene?> > Hi> > > Lucene only indexes text so  
> you'll have to get the text out of the PDF> and feed it to lucene.>  
> > Google for lucene pdf, or go straight to http://www.pdfbox.org/> >  
> > --> Ian.> > > > 2008/12/1 tiziano bernardi <dk1982@hotmail.it>:>  
> >> >> > Hi,> > I want to index PDF files with lucene is possible?> >  
> What like?> > Thanks Tiziano Bernardi> >  
> _________________________________________________________________> >  
> Fanne di tutti i colori, personalizza la tua Hotmail!> > http://imagine-windowslive.com/Hotmail/#0 
> > >  
> --------------------------------------------------------------------- 
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org>  
> For additional commands, e-mail: java-user-help@lucene.apache.org>
> _________________________________________________________________
> 50 nuovi schemi per giocare su CrossWire! Accetta la sfida!
> http://livesearch.games.msn.com/crosswire/play_it/

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 13:31:03 2008
Return-Path: <java-user-return-37432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32156 invoked from network); 1 Dec 2008 13:31:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 13:31:03 -0000
Received: (qmail 56454 invoked by uid 500); 1 Dec 2008 13:31:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56424 invoked by uid 500); 1 Dec 2008 13:31:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56413 invoked by uid 99); 1 Dec 2008 13:31:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 05:31:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.218.20 as permitted sender)
Received: from [209.85.218.20] (HELO mail-bw0-f20.google.com) (209.85.218.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 13:29:41 +0000
Received: by bwz13 with SMTP id 13so82954bwz.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 05:30:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=1UgEPGCB3DxcrrKd/Ql8RHoXeeU9ISmRtK+Gma4kaQI=;
        b=VqbMPbqKItTCQGihwr3Ri+o/FBL8VwEFy5iJwoNDyjgYQ4XfFQuaXtIVc7g4XK1AhB
         JAGgDzdtPyX0GZqarFgCJQLTTCeTznx/IzhAUCaV4PB9XrOrhOh/vaQs6AASoCPXqUlc
         TSIqTi/GxGHAVePOagB2KMq8INvDBM6QGurYQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=WsNcnpTphuBnAZgns1YAS6hPhy4+j2jQ2NkEKp3EG4yPCvLTP1lLaEN5/pcOFfEBAG
         oLE294SBgo3yvpHxBYr4KRgJN+4YGAhIfvasFPrLG8+3eXLGBMEWdri06Zqf2SLL9HBV
         iYqmQjZuBcIB7qG1JaxhMsXF+dMM7khgNguRA=
Received: by 10.181.144.11 with SMTP id w11mr3932489bkn.81.1228138227297;
        Mon, 01 Dec 2008 05:30:27 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Mon, 1 Dec 2008 05:30:27 -0800 (PST)
Message-ID: <5d53d5770812010530w76fcd44esf7bdbc5f425f0fe6@mail.gmail.com>
Date: Mon, 1 Dec 2008 09:30:27 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Newbie: MatchAllDocsQuery sample?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_100173_7037992.1228138227290"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_100173_7037992.1228138227290
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there a simple example on how to query for "contents:Hello" in all
documents using
MatchAllDocsQuery<http://incubator.apache.org/lucene.net/docs/2.1/Lucene.Net.Search.MatchAllDocsQuery.html>
 ?
I want 100% of the docs with "Hello"

Ian

------=_Part_100173_7037992.1228138227290--

From java-user-return-37433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 13:39:58 2008
Return-Path: <java-user-return-37433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36987 invoked from network); 1 Dec 2008 13:39:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 13:39:57 -0000
Received: (qmail 65256 invoked by uid 500); 1 Dec 2008 13:40:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65226 invoked by uid 500); 1 Dec 2008 13:40:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65215 invoked by uid 99); 1 Dec 2008 13:40:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 05:40:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 13:38:34 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 60BBA30EFC18; Mon,  1 Dec 2008 06:39:21 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [192.168.5.131] (174.dsl.cvillehosting.net [216.30.188.174])
	by ehatchersolutions.com (Postfix) with ESMTP id 4980130EFC16
	for <java-user@lucene.apache.org>; Mon,  1 Dec 2008 06:38:39 -0700 (MST)
Message-Id: <B3EE2F93-4E09-4CDF-8143-929C3EEECABA@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <5d53d5770812010530w76fcd44esf7bdbc5f425f0fe6@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Newbie: MatchAllDocsQuery sample?
Date: Mon, 1 Dec 2008 08:33:50 -0500
References: <5d53d5770812010530w76fcd44esf7bdbc5f425f0fe6@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Dec 1, 2008, at 8:30 AM, Ian Vink wrote:
> Is there a simple example on how to query for "contents:Hello" in all
> documents using
> MatchAllDocsQuery<http://incubator.apache.org/lucene.net/docs/2.1/Lucene.Net.Search.MatchAllDocsQuery.html 
> >
> ?
> I want 100% of the docs with "Hello"

You're looking for a TermQuery, not MatchAllDocsQuery.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 13:48:58 2008
Return-Path: <java-user-return-37434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42380 invoked from network); 1 Dec 2008 13:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 13:48:58 -0000
Received: (qmail 76008 invoked by uid 500); 1 Dec 2008 13:49:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75975 invoked by uid 500); 1 Dec 2008 13:49:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75964 invoked by uid 99); 1 Dec 2008 13:49:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 05:49:03 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 13:47:36 +0000
Received: by mu-out-0910.google.com with SMTP id i10so2363739mue.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 05:48:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SjUt+bvUuQcsDnLWakDW0RgdWJOIy5ZPmJssSDPwLi4=;
        b=HQl5KUMWb8a3WgoGaP3yQhpNUzwwlh4FrPnQTGx59I9c5AUIFNmUPr4OHP9Jt5FKIL
         NVtad0VIImkfNoCdkGW9vduoI6ml04D3N6KttIsTdT9i0VwLPZKQt1ltxtEnkB2cUjbn
         ugL5wXZs5vZb3QVY5qlJ7Gh9pMN2PpsYjWZ+M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=kWauD6fZsIfNca9N/MwV7kAIzPiNiSQ2pS39MzmDAChYNXBbUsU5IbyH2PQl4clExS
         xJXRMC7tNvnO/8P+VXVQwHCfCaoUUslSQ14K5dsXQfOkiIOZYsHvYvDcyvFwZPR9ys/s
         Sm/kgrCFazLNEsQuww2YmS8tcdCdNyj0HcvqU=
Received: by 10.181.205.15 with SMTP id h15mr3687308bkq.19.1228139302494;
        Mon, 01 Dec 2008 05:48:22 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Mon, 1 Dec 2008 05:48:22 -0800 (PST)
Message-ID: <5d53d5770812010548p2c677bfbj4e4dc23f423923b9@mail.gmail.com>
Date: Mon, 1 Dec 2008 09:48:22 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie: MatchAllDocsQuery sample?
In-Reply-To: <B3EE2F93-4E09-4CDF-8143-929C3EEECABA@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_100350_30353779.1228139302489"
References: <5d53d5770812010530w76fcd44esf7bdbc5f425f0fe6@mail.gmail.com>
	 <B3EE2F93-4E09-4CDF-8143-929C3EEECABA@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_100350_30353779.1228139302489
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

But when I search (50,000 documents) I don't get all documents with "Hello"
in them. I get a lot, but not all.
Ian

On Mon, Dec 1, 2008 at 9:33 AM, Erik Hatcher <erik@ehatchersolutions.com>wrote:

>
> On Dec 1, 2008, at 8:30 AM, Ian Vink wrote:
>
>> Is there a simple example on how to query for "contents:Hello" in all
>> documents using
>> MatchAllDocsQuery<
>> http://incubator.apache.org/lucene.net/docs/2.1/Lucene.Net.Search.MatchAllDocsQuery.html
>> >
>> ?
>> I want 100% of the docs with "Hello"
>>
>
> You're looking for a TermQuery, not MatchAllDocsQuery.
>
>        Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_100350_30353779.1228139302489--

From java-user-return-37435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 13:53:04 2008
Return-Path: <java-user-return-37435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44206 invoked from network); 1 Dec 2008 13:53:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 13:53:04 -0000
Received: (qmail 84523 invoked by uid 500); 1 Dec 2008 13:53:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84496 invoked by uid 500); 1 Dec 2008 13:53:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84485 invoked by uid 99); 1 Dec 2008 13:53:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 05:53:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 13:51:42 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2481128fkq.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 05:52:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=N6LMFmEVjtxV1auspTLHyC55Z9OvRnePvhs6DsM1AK4=;
        b=S/ve/ZafcS5Di5FFVsw3YMBBfiaklOm+D+uB8FNoWNVQRfd2B1Ih6JAYyQjmzSOy8e
         wLOQAMa+cLOztIWyeXuB/PmJ7ZfQqREqCwYIsEzvoLtyDxktm89EOhHBlnN7AJAQwPFV
         b43GUMn7LCfNfqccjoNguCQYIt5yRmAGb9AhU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=BYm4yiAK5NOSslG65jG1RshbjnUUHTuw7l4p/uNjEQtP6iqu6K3Vg8hROMJ78hFO/Z
         Np8kZ8EFwqjHsR7AyMGmzc8axUWLQ9UR7JKVFfkYmqL0yvxo1riEPFd43UfvbPbyXnZ9
         b3FXLy1ybjTFXt7ypJX0lH+4kt5HKeL4jX7Ic=
Received: by 10.180.241.8 with SMTP id o8mr3949972bkh.102.1228139548710;
        Mon, 01 Dec 2008 05:52:28 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Mon, 1 Dec 2008 05:52:28 -0800 (PST)
Message-ID: <5d53d5770812010552r3ec8f1c2o9e353548a87848f9@mail.gmail.com>
Date: Mon, 1 Dec 2008 09:52:28 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: ID field - hundreds?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_100406_10090361.1228139548708"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_100406_10090361.1228139548708
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Each document has a field "DocID" with a unique int in the index.
I want to search the documents with DocID of 1 or 2 or 5 or 8 etc (hundreds
long list)

When I specify a query like: [  contents:Hello DocID:1 DocID:2   ]
 etc it is slow.

Is there a more efficient way to limit my search to books in the set
 [1,2,3,5,8] ?

Ian

------=_Part_100406_10090361.1228139548708--

From java-user-return-37436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 14:10:33 2008
Return-Path: <java-user-return-37436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53760 invoked from network); 1 Dec 2008 14:10:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 14:10:33 -0000
Received: (qmail 7570 invoked by uid 500); 1 Dec 2008 14:10:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7527 invoked by uid 500); 1 Dec 2008 14:10:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7516 invoked by uid 99); 1 Dec 2008 14:10:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 06:10:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 14:09:10 +0000
Received: by qyk13 with SMTP id 13so3235298qyk.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 06:09:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=BZd9X9ehNBZf9TO6r5NdTGAlEuOZ5WpYK6dLITeH1+8=;
        b=Kex1JJ6Zm4zHUC1ZE2q6Ou4wXulPeqOjgRXfM6MjZckW9n+WuGgYSOgk/qt8qUhXcc
         Tpmxf2k5G8HVGYgkMVqBPZ/wE8OGUNSh66M0AMBBm399G9cVh0oMKzWbTkmj2OF47DPO
         AzKqBqD9sq2qAi4MC6qjfJsdy6JaES4hf2SEs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=xjzpGpehHXg2wZNI4UmueilI6tCa/Eduezyh+987Eth8jD/FMKdlbD/Omtp6p4+VI5
         KTpw26GzAIQBbZQfez8HRF0dLuHt6isbcsXr7HDGBqQktw8bLzdQNTBu8fw2tUCrJQMy
         pmNj7W89YwYmUak0QwAXmyuarjZScn6OqvB2A=
Received: by 10.214.26.17 with SMTP id 17mr9705308qaz.54.1228140597610;
        Mon, 01 Dec 2008 06:09:57 -0800 (PST)
Received: by 10.214.241.8 with HTTP; Mon, 1 Dec 2008 06:09:57 -0800 (PST)
Message-ID: <8c4e68610812010609p2875399x40c2f3410a10c465@mail.gmail.com>
Date: Mon, 1 Dec 2008 14:09:57 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie: MatchAllDocsQuery sample?
In-Reply-To: <5d53d5770812010548p2c677bfbj4e4dc23f423923b9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5d53d5770812010530w76fcd44esf7bdbc5f425f0fe6@mail.gmail.com>
	 <B3EE2F93-4E09-4CDF-8143-929C3EEECABA@ehatchersolutions.com>
	 <5d53d5770812010548p2c677bfbj4e4dc23f423923b9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

How are you searching?  Are you telling it to collect enough hits?

e.g. if you are using method TopDocs search(Query query, int n) are
you setting n high enough?

--
Ian.

On Mon, Dec 1, 2008 at 1:48 PM, Ian Vink <ianvink@gmail.com> wrote:
> But when I search (50,000 documents) I don't get all documents with "Hello"
> in them. I get a lot, but not all.
> Ian
>
> On Mon, Dec 1, 2008 at 9:33 AM, Erik Hatcher <erik@ehatchersolutions.com>wrote:
>
>>
>> On Dec 1, 2008, at 8:30 AM, Ian Vink wrote:
>>
>>> Is there a simple example on how to query for "contents:Hello" in all
>>> documents using
>>> MatchAllDocsQuery<
>>> http://incubator.apache.org/lucene.net/docs/2.1/Lucene.Net.Search.MatchAllDocsQuery.html
>>> >
>>> ?
>>> I want 100% of the docs with "Hello"
>>>
>>
>> You're looking for a TermQuery, not MatchAllDocsQuery.
>>
>>        Erik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 14:12:07 2008
Return-Path: <java-user-return-37437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54712 invoked from network); 1 Dec 2008 14:12:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 14:12:07 -0000
Received: (qmail 13645 invoked by uid 500); 1 Dec 2008 14:12:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13122 invoked by uid 500); 1 Dec 2008 14:12:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13111 invoked by uid 99); 1 Dec 2008 14:12:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 06:12:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 14:10:43 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1435971nfd.15
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 06:11:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=RDmtIiP+DUSj7L4sz3hCJTneQcCTsIlv1fRlCxOyEbA=;
        b=uTlH352T35oVl6lLG/HwejMD0PV4ZK0xwrmeyjkvQ0e1G8onj81/MQurC2JsH8o/HJ
         eb87D+IYyA3lrJAkoF6yzVr1yYeAiveGwEzcPpQs7w1a4CbJzJLOyep+4ZDOX0WaWgWF
         g8w4ODRJki1Zztigc9mNErwUwiwam56J9Sw+g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=nfLVFH35Jve77bnNUmA+PgKUHjdnPl/8g6sUgvU+TTcQDskp4cxRSUcEN0qgJTxs2K
         DkqpxytvTwETh/HFpMm0LS3xfYXTqW66FLXtuKLeCh0YiDixHbQCjORkflG9FeKdEYNr
         bJvZDc4NjiY7xosZIRPHxfF5WuNjgKfOEdcTw=
Received: by 10.86.100.19 with SMTP id x19mr6325073fgb.18.1228140689843;
        Mon, 01 Dec 2008 06:11:29 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Mon, 1 Dec 2008 06:11:29 -0800 (PST)
Message-ID: <359a92830812010611p4fd435b9h7b667325ff860785@mail.gmail.com>
Date: Mon, 1 Dec 2008 09:11:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie: MatchAllDocsQuery sample?
In-Reply-To: <5d53d5770812010548p2c677bfbj4e4dc23f423923b9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71922_10661929.1228140689846"
References: <5d53d5770812010530w76fcd44esf7bdbc5f425f0fe6@mail.gmail.com>
	 <B3EE2F93-4E09-4CDF-8143-929C3EEECABA@ehatchersolutions.com>
	 <5d53d5770812010548p2c677bfbj4e4dc23f423923b9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71922_10661929.1228140689846
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The usual reason for this is that you need to look at your
analyzers. What analyzers are you using during index AND
query time? The first thing I suspect here is capitalization. Are
you sure that both your index and query analyzers fold case?

Especially if you're new to Lucene, get a copy of Luke. It lets
you examine your index, try queries, see how queries are
parsed, etc. It's invaluable.

Let's see the indexing fragment and the search fragment
of code and we'll probably be able to give you better advice..

Best
Erick

On Mon, Dec 1, 2008 at 8:48 AM, Ian Vink <ianvink@gmail.com> wrote:

> But when I search (50,000 documents) I don't get all documents with "Hello"
> in them. I get a lot, but not all.
> Ian
>
> On Mon, Dec 1, 2008 at 9:33 AM, Erik Hatcher <erik@ehatchersolutions.com
> >wrote:
>
> >
> > On Dec 1, 2008, at 8:30 AM, Ian Vink wrote:
> >
> >> Is there a simple example on how to query for "contents:Hello" in all
> >> documents using
> >> MatchAllDocsQuery<
> >>
> http://incubator.apache.org/lucene.net/docs/2.1/Lucene.Net.Search.MatchAllDocsQuery.html
> >> >
> >> ?
> >> I want 100% of the docs with "Hello"
> >>
> >
> > You're looking for a TermQuery, not MatchAllDocsQuery.
> >
> >        Erik
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_71922_10661929.1228140689846--

From java-user-return-37438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 14:14:48 2008
Return-Path: <java-user-return-37438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55974 invoked from network); 1 Dec 2008 14:14:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 14:14:48 -0000
Received: (qmail 18230 invoked by uid 500); 1 Dec 2008 14:14:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18190 invoked by uid 500); 1 Dec 2008 14:14:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18179 invoked by uid 99); 1 Dec 2008 14:14:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 06:14:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 14:13:25 +0000
Received: by ug-out-1314.google.com with SMTP id c2so2839226ugf.23
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 06:14:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=vpRa1OkKpkXaqLDfaDCGPtoYb2+1BzdkE0lC9xA6qAo=;
        b=mjSySsCHx9XpzFQF1c0Sb4/807aVAxib+jaKValimCP1527Ex2+jBH5ZuZHf8QSS29
         xr+tqAVEYvDdBNQlvspZY2W/jpxAcsTIqSGTbnMn1A0KkRIIK/L5eWEonJmKpQ3sELwr
         G1N3J8YPGA7v40f+M3OYCkjzVKRbaA+N5S064=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FEzmtEdkHWwwXu1ARagvnhgummX51GGUuUDSYRyhxoG0slVBJOs5/DL8ZEV41ZK35S
         9inIrCg6TpJD5SXOV93fVA6mrOdqlNewvQiYEKNlQsXBIaKSs5P+PLppQ5/7O+7UQbLD
         j8BZnr+GqL/why/FBuu+AKQf5p0pYv34qC5Mc=
Received: by 10.86.68.2 with SMTP id q2mr6352169fga.34.1228140841798;
        Mon, 01 Dec 2008 06:14:01 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Mon, 1 Dec 2008 06:14:01 -0800 (PST)
Message-ID: <359a92830812010614o761737fbvea2b63c9d0c9a943@mail.gmail.com>
Date: Mon, 1 Dec 2008 09:14:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ID field - hundreds?
In-Reply-To: <5d53d5770812010552r3ec8f1c2o9e353548a87848f9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71972_1726259.1228140841795"
References: <5d53d5770812010552r3ec8f1c2o9e353548a87848f9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71972_1726259.1228140841795
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How are you measuring speed? See the FAQ about query
speed...

http://wiki.apache.org/jakarta-lucene/LuceneFAQ

Also be aware that the first few queries have very significant overhead.

You've really got to provide more detail to get meaningful help. How big
is your index? How do you measure response? Where are your
code examples?

Best
Erick

On Mon, Dec 1, 2008 at 8:52 AM, Ian Vink <ianvink@gmail.com> wrote:

> Each document has a field "DocID" with a unique int in the index.
> I want to search the documents with DocID of 1 or 2 or 5 or 8 etc (hundreds
> long list)
>
> When I specify a query like: [  contents:Hello DocID:1 DocID:2   ]
>  etc it is slow.
>
> Is there a more efficient way to limit my search to books in the set
>  [1,2,3,5,8] ?
>
> Ian
>

------=_Part_71972_1726259.1228140841795--

From java-user-return-37439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 14:18:18 2008
Return-Path: <java-user-return-37439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58372 invoked from network); 1 Dec 2008 14:18:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 14:18:18 -0000
Received: (qmail 29117 invoked by uid 500); 1 Dec 2008 14:18:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29091 invoked by uid 500); 1 Dec 2008 14:18:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29080 invoked by uid 99); 1 Dec 2008 14:18:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 06:18:15 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 14:16:44 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1879744fgb.27
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 06:17:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=C3qUMXu+NQFtLPstPIxBrZLHTA4i3ITeTh8o8eU3wJg=;
        b=SIIS6cJDyi8HvEIdf2d/dHxEbkGU1t1DFX8rFA/mkH9nK84zlY0+OUBBSQG5LmFIpW
         XlL/ZXe1uTMJ1olLGUUyjTL6EKepH2GbzME9j+yY5WIESFVnRwGgmp2E+zRyMyvYMTnX
         veN2yX9IAKfghSLzQnEfvHrKxc+HniNTOON9c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OZuscafJPaiq2mPvaUi+QN7k54O1s8jlgzNbGG9iQS0fv4mqq0+yVrjWHn5voBGkvn
         6SEPKvr+XLyd7v8fZfGH95bHVE6axUBm5u41tCgdoCNzoO4u5/eEvuatsIfC6U3mwSXk
         DaxlAV/a1EC3OEsO+WRlN+zPVJLlAIShdFfW0=
Received: by 10.181.226.5 with SMTP id d5mr3961195bkr.116.1228141041152;
        Mon, 01 Dec 2008 06:17:21 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Mon, 1 Dec 2008 06:17:21 -0800 (PST)
Message-ID: <5d53d5770812010617g2bf0c610oeae0f2383008c891@mail.gmail.com>
Date: Mon, 1 Dec 2008 10:17:21 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie: MatchAllDocsQuery sample?
In-Reply-To: <8c4e68610812010609p2875399x40c2f3410a10c465@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_100822_12866147.1228141041153"
References: <5d53d5770812010530w76fcd44esf7bdbc5f425f0fe6@mail.gmail.com>
	 <B3EE2F93-4E09-4CDF-8143-929C3EEECABA@ehatchersolutions.com>
	 <5d53d5770812010548p2c677bfbj4e4dc23f423923b9@mail.gmail.com>
	 <8c4e68610812010609p2875399x40c2f3410a10c465@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_100822_12866147.1228141041153
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The Lucene.NET implementation doesn't have:
TopDocs search(Query query, int n) it only has:

public virtual TopDocs
<http://www.sitefinity.com/help/developer-manual/Telerik.Search~Lucene.Net.Search.TopDocs.html>
Search(
   Query <http://www.sitefinity.com/help/developer-manual/Telerik.Search~Lucene.Net.Search.Query.html>
*query <http://www.sitefinity.com/help/developer-manual/telerik.search-lucene.net.search.searcher-search(query,filter,int32).html#>*,
   Filter <http://www.sitefinity.com/help/developer-manual/Telerik.Search~Lucene.Net.Search.Filter.html>
*filter <http://www.sitefinity.com/help/developer-manual/telerik.search-lucene.net.search.searcher-search(query,filter,int32).html#>*,
   int <http://www.sitefinity.com/help/developer-manual/telerik.search-lucene.net.search.searcher-search(query,filter,int32).html#>
*n <http://www.sitefinity.com/help/developer-manual/telerik.search-lucene.net.search.searcher-search(query,filter,int32).html#>*
)


I'm not sure what to put in for Filter?



On Mon, Dec 1, 2008 at 10:09 AM, Ian Lea <ian.lea@gmail.com> wrote:

> How are you searching?  Are you telling it to collect enough hits?
>
> e.g. if you are using method TopDocs search(Query query, int n) are
> you setting n high enough?
>
> --
> Ian.
>
> On Mon, Dec 1, 2008 at 1:48 PM, Ian Vink <ianvink@gmail.com> wrote:
> > But when I search (50,000 documents) I don't get all documents with
> "Hello"
> > in them. I get a lot, but not all.
> > Ian
> >
> > On Mon, Dec 1, 2008 at 9:33 AM, Erik Hatcher <erik@ehatchersolutions.com
> >wrote:
> >
> >>
> >> On Dec 1, 2008, at 8:30 AM, Ian Vink wrote:
> >>
> >>> Is there a simple example on how to query for "contents:Hello" in all
> >>> documents using
> >>> MatchAllDocsQuery<
> >>>
> http://incubator.apache.org/lucene.net/docs/2.1/Lucene.Net.Search.MatchAllDocsQuery.html
> >>> >
> >>> ?
> >>> I want 100% of the docs with "Hello"
> >>>
> >>
> >> You're looking for a TermQuery, not MatchAllDocsQuery.
> >>
> >>        Erik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_100822_12866147.1228141041153--

From java-user-return-37440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 14:18:44 2008
Return-Path: <java-user-return-37440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58616 invoked from network); 1 Dec 2008 14:18:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 14:18:44 -0000
Received: (qmail 34916 invoked by uid 500); 1 Dec 2008 14:18:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34893 invoked by uid 500); 1 Dec 2008 14:18:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34882 invoked by uid 99); 1 Dec 2008 14:18:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 06:18:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dk1982@hotmail.it designates 65.55.34.81 as permitted sender)
Received: from [65.55.34.81] (HELO col0-omc2-s7.col0.hotmail.com) (65.55.34.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 14:17:17 +0000
Received: from COL113-W45 ([65.55.34.72]) by col0-omc2-s7.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 1 Dec 2008 06:18:04 -0800
Message-ID: <COL113-W455B5282CF986CD2D0A97EBE010@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_067b727a-d978-4a30-b550-52072f54aa8a_"
X-Originating-IP: [88.51.233.126]
From: tiziano bernardi <dk1982@hotmail.it>
To: java lucene domande <java-user@lucene.apache.org>
Subject: RE: Pdf in Lucene?
Date: Mon, 1 Dec 2008 15:18:04 +0100
Importance: Normal
In-Reply-To: <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
 <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com>
 <COL113-W45437A1268795288A8839CBE010@phx.gbl>
 <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Dec 2008 14:18:04.0156 (UTC) FILETIME=[9FCBC3C0:01C953BF]
X-Virus-Checked: Checked by ClamAV on apache.org

--_067b727a-d978-4a30-b550-52072f54aa8a_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



this is my class=2C I use eclipse and I haven't any errors.Do not understan=
d where the problem ....
=20
=20
import java.io.File=3B
import java.io.IOException=3B

import org.apache.lucene.analysis.Analyzer=3B
import org.apache.lucene.analysis.standard.StandardAnalyzer=3B
import org.apache.lucene.document.Document=3B
import org.apache.lucene.index.IndexWriter=3B
import org.apache.lucene.index.Term=3B
import org.apache.lucene.search.Hits=3B
import org.apache.lucene.search.IndexSearcher=3B
import org.apache.lucene.search.Query=3B
import org.apache.lucene.search.TermQuery=3B
import org.apache.lucene.store.Directory=3B
import org.apache.lucene.store.RAMDirectory=3B
import org.pdfbox.searchengine.lucene.LucenePDFDocument=3B

public final class SimplePdfSearch=20
{
private static final String PDF_FILE_PATH =3D "C:\\Users\\Tiziano\\Desktop\=
\doc_di_prova\\prova.pdf"=3B
private static final String SEARCH_TERM =3D "prova"=3B

public static final void main(String[] args) throws IOException
{
Directory directory =3D null=3B

try
{
File pdfFile =3D new File(PDF_FILE_PATH)=3B
Document document =3D LucenePDFDocument.getDocument(pdfFile)=3B

directory =3D new RAMDirectory()=3B

IndexWriter indexWriter =3D null=3B

try
{
Analyzer analyzer =3D new StandardAnalyzer()=3B
indexWriter =3D new IndexWriter(directory=2C analyzer=2C true)=3B

indexWriter.addDocument(document)=3B
}
finally
{
if (indexWriter !=3D null)
{
try
{
indexWriter.close()=3B
}
catch (IOException ignore)
{
// Ignore
}

indexWriter =3D null=3B
}
}

IndexSearcher indexSearcher =3D null=3B

try
{
indexSearcher =3D new IndexSearcher(directory)=3B

Term term =3D new Term("contents"=2C SEARCH_TERM)=3B
Query query =3D new TermQuery(term)=3B

Hits hits =3D indexSearcher.search(query)=3B

System.out.println((hits.length() !=3D 0) ? "Found" : "Not Found")=3B
}
finally
{
if (indexSearcher !=3D null)
{
try
{
indexSearcher.close()=3B
}
catch (IOException ignore)
{
// Ignore
}

indexSearcher =3D null=3B
}
}
}
finally
{
if (directory !=3D null)
{
try
{
directory.close()=3B
}
catch (IOException ignore)
{
// Ignore
}

directory =3D null=3B
}
}
}
}> From: gsingers@apache.org> To: java-user@lucene.apache.org> Subject: Re:=
 Pdf in Lucene?> Date: Mon=2C 1 Dec 2008 08:22:58 -0500> > > On Dec 1=2C 20=
08=2C at 8:01 AM=2C tiziano bernardi wrote:> > >> > I tried to use pdfbox b=
ut gives me an error.> > That the version of lucene and the pdfbox are inco=
mpatible.> > Lucene knows nothing about PDFBox=2C so I don't see how they c=
ould be > incompatible=2C unless your are referring to PDFBox's Lucene Docu=
ment > creator=2C in which case=2C you should ask on the PDFBox mailing lis=
t. I > think=2C however=2C that it's pretty straightforward to create a Luc=
ene > document from PDFBox=2C so you shouldn't need to rely on their versio=
n.> > Personally=2C I'd have a look at Tika (http://lucene.apache.org/tika)=
=2C > which wraps PDFBox (and other extraction libraries) and gives you bac=
k > SAX-like events via a ContentHandler=2C which you can then use to creat=
e > Lucene documents. Else=2C I've been working on SOLR-284=2C which > inte=
grates Tika into Solr=2C see https://issues.apache.org/jira/browse/SOLR-284=
> > -Grant> > >> > I use pdf box 0.7.3 and lucene 2.1.0> Date: Mon=2C 1 Dec=
 2008 11:43:00 > > +0000> From: ian.lea@gmail.com> To: java-user@lucene.apa=
che.org> > > Subject: Re: Pdf in Lucene?> > Hi> > > Lucene only indexes tex=
t so > > you'll have to get the text out of the PDF> and feed it to lucene.=
> > > > Google for lucene pdf=2C or go straight to http://www.pdfbox.org/> =
> > > > --> Ian.> > > > 2008/12/1 tiziano bernardi <dk1982@hotmail.it>:> > =
> >> >> > Hi=2C> > I want to index PDF files with lucene is possible?> > > =
> What like?> > Thanks Tiziano Bernardi> > > > ____________________________=
_____________________________________> > > > Fanne di tutti i colori=2C per=
sonalizza la tua Hotmail!> > http://imagine-windowslive.com/Hotmail/#0 > > =
> > > > -------------------------------------------------------------------=
-- > > > To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org>=
 > > For additional commands=2C e-mail: java-user-help@lucene.apache.org>> =
> _________________________________________________________________> > 50 n=
uovi schemi per giocare su CrossWire! Accetta la sfida!> > http://livesearc=
h.games.msn.com/crosswire/play_it/> > --------------------------> Grant Ing=
ersoll> > Lucene Helpful Hints:> http://wiki.apache.org/lucene-java/BasicsO=
fPerformance> http://wiki.apache.org/lucene-java/LuceneFAQ> > > > > > > > >=
 > > > --------------------------------------------------------------------=
-> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org> For a=
dditional commands=2C e-mail: java-user-help@lucene.apache.org>=20
_________________________________________________________________
Vai oltre le parole=2C scarica il nuovo Messenger!
http://download.live.com/?mkt=3Dit-it=

--_067b727a-d978-4a30-b550-52072f54aa8a_--

From java-user-return-37441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 22:19:56 2008
Return-Path: <java-user-return-37441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82260 invoked from network); 1 Dec 2008 22:19:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 22:19:56 -0000
Received: (qmail 94743 invoked by uid 500); 1 Dec 2008 22:19:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94705 invoked by uid 500); 1 Dec 2008 22:19:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94666 invoked by uid 99); 1 Dec 2008 22:19:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 14:19:59 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 22:18:29 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 8D9BF73655
	for <java-user@lucene.apache.org>; Mon,  1 Dec 2008 14:18:45 -0800 (PST)
Message-Id: <8396568E-FD4F-47CC-A474-B51D6D54688C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20759051.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Boosting fields are searching or indexing time?
Date: Mon, 1 Dec 2008 17:18:44 -0500
References: <20759051.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Possibly, but probably not.  Index time boosting is generally done to  
say one field is more important than another field, or one document is  
more important than another document, whereas query time boosting  
generally says this term is more important than that term.

Additionally, search time boosting has much more granularity than  
index time boosting, meaning you have more bits to express the boost  
value during search than you do during indexing.

HTH,
Grant


On Nov 30, 2008, at 11:11 AM, Marc Sturlese wrote:

>
> Hey there,
> I have a simple question about boosting fields,
> I have a lucene indexer app that indexes data from a db. At indexing  
> time I
> give different boost to the fields depending on if the field is  
> title or
> content. Would it be the same to set the boost at searching time  
> instead of
> at indexing? I mean, the results of the search would be exactly the  
> same?
>
> Thanks in advance
> -- 
> View this message in context: http://www.nabble.com/Boosting-fields-are-searching-or-indexing-time--tp20759051p20759051.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 22:38:31 2008
Return-Path: <java-user-return-37442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88851 invoked from network); 1 Dec 2008 22:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 22:38:31 -0000
Received: (qmail 23364 invoked by uid 500); 1 Dec 2008 22:38:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23336 invoked by uid 500); 1 Dec 2008 22:38:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23325 invoked by uid 99); 1 Dec 2008 22:38:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 14:38:36 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.143.2.176] (HELO fork6.mail.virginia.edu) (128.143.2.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 22:37:05 +0000
Received: from localhost (localhost [127.0.0.1])
	by fork6.mail.virginia.edu (Postfix) with ESMTP id 32C481BF8F
	for <java-user@lucene.apache.org>; Mon,  1 Dec 2008 17:37:52 -0500 (EST)
Received: from fork6.mail.virginia.edu ([127.0.0.1])
 by localhost (fork6.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 07738-01 for <java-user@lucene.apache.org>;
 Mon,  1 Dec 2008 17:37:52 -0500 (EST)
Received: from [10.0.2.78] (unknown [138.210.9.13])
	by fork6.mail.virginia.edu (Postfix) with ESMTP id D521B1BEFD
	for <java-user@lucene.apache.org>; Mon,  1 Dec 2008 17:37:51 -0500 (EST)
Message-Id: <A0AE4394-F9DF-452B-8702-924B623BB43A@virginia.edu>
From: "Steven D. Majewski" <sdm7g@virginia.edu>
To: java-user@lucene.apache.org
In-Reply-To: <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Pdf in Lucene?
Date: Mon, 1 Dec 2008 17:37:50 -0500
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl> <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com> <COL113-W45437A1268795288A8839CBE010@phx.gbl> <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
X-Mailer: Apple Mail (2.929.2)
X-UVA-Virus-Scanned: by amavisd-new at fork6.mail.virginia.edu
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 1, 2008, at 8:22 AM, Grant Ingersoll wrote:

>
> On Dec 1, 2008, at 8:01 AM, tiziano bernardi wrote:
>
>>
>> I tried to use pdfbox but gives me an error.
>> That the version of lucene and the pdfbox are incompatible.
>
> Lucene knows nothing about PDFBox, so I don't see how they could be  
> incompatible, unless your are referring to PDFBox's Lucene Document  
> creator, in which case, you should ask on the PDFBox mailing list.   
> I think, however, that it's pretty straightforward to create a  
> Lucene document from PDFBox, so you shouldn't need to rely on their  
> version.
>
> Personally, I'd have a look at Tika (http://lucene.apache.org/tika),  
> which wraps PDFBox (and other extraction libraries) and gives you  
> back SAX-like events via a ContentHandler, which you can then use to  
> create Lucene documents.  Else, I've been working on SOLR-284, which  
> integrates Tika into Solr, see https://issues.apache.org/jira/browse/SOLR-284
>
> -Grant
>


And for something out-of-the-box, you might also look at XTF:

	http://www.cdlib.org/inside/projects/xtf/

which will index and display text, html, pdf (using PDFbox ) and  
several XML text formats ( tei, ead, ... )
-- or you can look at the sources to see how they use PDFbox. 

-- Steve Majewski



>>
>> I use pdf box 0.7.3 and lucene 2.1.0> Date: Mon, 1 Dec 2008  
>> 11:43:00 +0000> From: ian.lea@gmail.com> To: java-user@lucene.apache.org 
>> > Subject: Re: Pdf in Lucene?> > Hi> > > Lucene only indexes text  
>> so you'll have to get the text out of the PDF> and feed it to  
>> lucene.> > Google for lucene pdf, or go straight to http://www.pdfbox.org/ 
>> > > > --> Ian.> > > > 2008/12/1 tiziano bernardi  
>> <dk1982@hotmail.it>:> >> >> > Hi,> > I want to index PDF files with  
>> lucene is possible?> > What like?> > Thanks Tiziano Bernardi> >  
>> _________________________________________________________________>  
>> > Fanne di tutti i colori, personalizza la tua Hotmail!> > http://imagine-windowslive.com/Hotmail/#0 
>> > >  
>> ---------------------------------------------------------------------> 
>>  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org>  
>> For additional commands, e-mail: java-user-help@lucene.apache.org>
>> _________________________________________________________________
>> 50 nuovi schemi per giocare su CrossWire! Accetta la sfida!
>> http://livesearch.games.msn.com/crosswire/play_it/
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 22:40:52 2008
Return-Path: <java-user-return-37443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89419 invoked from network); 1 Dec 2008 22:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 22:40:52 -0000
Received: (qmail 26435 invoked by uid 500); 1 Dec 2008 22:40:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26402 invoked by uid 500); 1 Dec 2008 22:40:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26391 invoked by uid 99); 1 Dec 2008 22:40:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 14:40:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 22:39:26 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 2D590870ED
	for <java-user@lucene.apache.org>; Mon,  1 Dec 2008 14:40:13 -0800 (PST)
Message-Id: <81F5AE5D-760A-40C9-A4B8-2889C9E9CACD@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <COL113-W455B5282CF986CD2D0A97EBE010@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Pdf in Lucene?
Date: Mon, 1 Dec 2008 17:40:12 -0500
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl> <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com> <COL113-W45437A1268795288A8839CBE010@phx.gbl> <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org> <COL113-W455B5282CF986CD2D0A97EBE010@phx.gbl>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I certainly don't either, since you haven't said what the actual  
exception is.  If I had to guess, though, I would say it is the line
  Document document = LucenePDFDocument.getDocument

And that the Lucene library expected by PDFBox is not the same version  
of Lucene you are using.  I would suggest not relying on PDFBox to  
create your document, and instead look at the PDFBox calls that you  
need to make to then create your Document.


On Dec 1, 2008, at 9:18 AM, tiziano bernardi wrote:

>
>
> this is my class, I use eclipse and I haven't any errors.Do not  
> understand where the problem ....
>
>
> import java.io.File;
> import java.io.IOException;
>
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.RAMDirectory;
> import org.pdfbox.searchengine.lucene.LucenePDFDocument;
>
> public final class SimplePdfSearch
> {
> private static final String PDF_FILE_PATH = "C:\\Users\\Tiziano\ 
> \Desktop\\doc_di_prova\\prova.pdf";
> private static final String SEARCH_TERM = "prova";
>
> public static final void main(String[] args) throws IOException
> {
> Directory directory = null;
>
> try
> {
> File pdfFile = new File(PDF_FILE_PATH);
> Document document = LucenePDFDocument.getDocument(pdfFile);
>
> directory = new RAMDirectory();
>
> IndexWriter indexWriter = null;
>
> try
> {
> Analyzer analyzer = new StandardAnalyzer();
> indexWriter = new IndexWriter(directory, analyzer, true);
>
> indexWriter.addDocument(document);
> }
> finally
> {
> if (indexWriter != null)
> {
> try
> {
> indexWriter.close();
> }
> catch (IOException ignore)
> {
> // Ignore
> }
>
> indexWriter = null;
> }
> }
>
> IndexSearcher indexSearcher = null;
>
> try
> {
> indexSearcher = new IndexSearcher(directory);
>
> Term term = new Term("contents", SEARCH_TERM);
> Query query = new TermQuery(term);
>
> Hits hits = indexSearcher.search(query);
>
> System.out.println((hits.length() != 0) ? "Found" : "Not Found");
> }
> finally
> {
> if (indexSearcher != null)
> {
> try
> {
> indexSearcher.close();
> }
> catch (IOException ignore)
> {
> // Ignore
> }
>
> indexSearcher = null;
> }
> }
> }
> finally
> {
> if (directory != null)
> {
> try
> {
> directory.close();
> }
> catch (IOException ignore)
> {
> // Ignore
> }
>
> directory = null;
> }
> }
> }
> }> From: gsingers@apache.org> To: java-user@lucene.apache.org>  
> Subject: Re: Pdf in Lucene?> Date: Mon, 1 Dec 2008 08:22:58 -0500> >  
> > On Dec 1, 2008, at 8:01 AM, tiziano bernardi wrote:> > >> > I  
> tried to use pdfbox but gives me an error.> > That the version of  
> lucene and the pdfbox are incompatible.> > Lucene knows nothing  
> about PDFBox, so I don't see how they could be > incompatible,  
> unless your are referring to PDFBox's Lucene Document > creator, in  
> which case, you should ask on the PDFBox mailing list. I > think,  
> however, that it's pretty straightforward to create a Lucene >  
> document from PDFBox, so you shouldn't need to rely on their  
> version.> > Personally, I'd have a look at Tika (http://lucene.apache.org/tika 
> ), > which wraps PDFBox (and other extraction libraries) and gives  
> you back > SAX-like events via a ContentHandler, which you can then  
> use to create > Lucene documents. Else, I've been working on  
> SOLR-284, which > integrates Tika into Solr, see https://issues.apache.org/jira/browse/SOLR-284 
> > > -Grant> > >> > I use pdf box 0.7.3 and lucene 2.1.0> Date: Mon,  
> 1 Dec 2008 11:43:00 > > +0000> From: ian.lea@gmail.com> To: java-user@lucene.apache.org 
> > > > Subject: Re: Pdf in Lucene?> > Hi> > > Lucene only indexes  
> text so > > you'll have to get the text out of the PDF> and feed it  
> to lucene.> > > > Google for lucene pdf, or go straight to http://www.pdfbox.org/ 
> > > > > > --> Ian.> > > > 2008/12/1 tiziano bernardi <dk1982@hotmail.it 
> >:> > > >> >> > Hi,> > I want to index PDF files with lucene is  
> possible?> > > > What like?> > Thanks Tiziano Bernardi> > > >  
> _________________________________________________________________> >  
> > > Fanne di tutti i colori, personalizza la tua Hotmail!> > http://imagine-windowslive.com/Hotmail/#0 
>  > > > > > >  
> --------------------------------------------------------------------- > 
>  > > To unsubscribe, e-mail: java-user- 
> unsubscribe@lucene.apache.org> > > For additional commands, e-mail: java-user-help@lucene.apache.org 
> >> >  
> _________________________________________________________________> >  
> 50 nuovi schemi per giocare su CrossWire! Accetta la sfida!> > http://livesearch.games.msn.com/crosswire/play_it/ 
> > > --------------------------> Grant Ingersoll> > Lucene Helpful  
> Hints:> http://wiki.apache.org/lucene-java/BasicsOfPerformance> http://wiki.apache.org/lucene-java/LuceneFAQ 
> > > > > > > > > > > > >  
> --------------------------------------------------------------------- 
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org>  
> For additional commands, e-mail: java-user-help@lucene.apache.org>
> _________________________________________________________________
> Vai oltre le parole, scarica il nuovo Messenger!
> http://download.live.com/?mkt=it-it

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 01 23:17:43 2008
Return-Path: <java-user-return-37444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1443 invoked from network); 1 Dec 2008 23:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2008 23:17:43 -0000
Received: (qmail 71671 invoked by uid 500); 1 Dec 2008 23:17:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71629 invoked by uid 500); 1 Dec 2008 23:17:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71585 invoked by uid 99); 1 Dec 2008 23:17:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 15:17:47 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 23:16:19 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1037063yxj.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 15:17:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=Q3MavJ5/JgZda5lhW5Me21Jyny0iPC1PlH8FoXcCqDo=;
        b=Wa3AHQcxpgIVW7s0p7Jv31O3ezRydvpKJ3o+riFXnCKgueZnnI5HZ1Gp3Xe3BvBnVf
         iZ1omqDMIB6tqOFJEcpMBQ0Zpc/FLjeaVcqWVoDdcZdMg51NEnYI1VnG50EtupKwqExy
         NIJXQ1MQ4aeNVohoMz8VKeF6s53tYf1Aak98g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=NvCIdxIfXT1rgrcG6HuXRguHoG74rUDSyGSQuBSRAkJ6vG5sOenJ8gxemgF/VXAOTF
         yx/hz9Jb6zC/xWCNjcyDziEcm5IZGPahwhp3Ffx6rM/RNEB8II0eaArM31LwrZh39sAO
         gxih8bIsbDsUmn0aiyWk2CHPTUx+CQmL61rVI=
Received: by 10.151.79.6 with SMTP id g6mr22686223ybl.73.1228173426354;
        Mon, 01 Dec 2008 15:17:06 -0800 (PST)
Received: by 10.151.72.13 with HTTP; Mon, 1 Dec 2008 15:17:06 -0800 (PST)
Message-ID: <85d3c3b60812011517x3f0f4589ld18fe6bdea9b659f@mail.gmail.com>
Date: Mon, 1 Dec 2008 15:17:06 -0800
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: serialVersionUID issue between 2.3 and 2.4
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_88560_11859273.1228173426375"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_88560_11859273.1228173426375
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Seeing the following issue between Lucene 2.3 and 2.4. A 2.3 serialized Term
object cannot be deserialized by 2.4.  I would guess it has something to do
with a different Java compiler being used for the Lucene 2.4 build as
serialVersionUID is not defined in the Term class.  Fixing the issue is
critical for a release before the holidays.

The stacktrace below details the error.

Exception in thread "main" java.io.InvalidClassException:
org.apache.lucene.index.Term; local class incompatible: stream classdesc
serialVersionUID = 554776219862331599, local class serialVersionUID =
435090971444481257

        at
java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:546)
        at
java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1552)
        at
java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1466)
        at
java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1699)
        at
java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
        at
java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
        at
java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
        at
java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
        at
java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
        at
java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
        at
java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
        at
java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
        at
java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
        at java.util.ArrayList.readObject(ArrayList.java:591)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)

        at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

        at java.lang.reflect.Method.invoke(Method.java:585)
        at
java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:946)
        at
java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1809)
        at
java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
        at
java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
        at
java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
        at
java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
        at
java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
        at
java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)

------=_Part_88560_11859273.1228173426375--

From java-user-return-37445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 01:06:26 2008
Return-Path: <java-user-return-37445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39971 invoked from network); 2 Dec 2008 01:06:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 01:06:26 -0000
Received: (qmail 59367 invoked by uid 500); 2 Dec 2008 01:06:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59346 invoked by uid 500); 2 Dec 2008 01:06:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59335 invoked by uid 99); 2 Dec 2008 01:06:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 17:06:31 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 01:05:02 +0000
Received: by qyk13 with SMTP id 13so3788663qyk.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 17:04:47 -0800 (PST)
Received: by 10.214.9.8 with SMTP id 8mr10769482qai.3.1228179887752;
        Mon, 01 Dec 2008 17:04:47 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 5sm974449ywd.14.2008.12.01.17.04.40
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 01 Dec 2008 17:04:46 -0800 (PST)
Message-Id: <4E7EDEA6-A3C7-4381-8825-6492D059D1AD@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <111001c9536e$2673efd0$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Which is faster/better
X-Priority: 3
Date: Mon, 1 Dec 2008 20:04:38 -0500
References: <492B92B2.9010006@teamware.com> <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com> <492C7C6E.7070501@teamware.com> <111001c9536e$2673efd0$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


So in your UI, you'd like the delete to happen immediately and then  
it's OK if the updated (added) document then takes a minute to appear?

OK, I agree this (the immediacy of doing deletes via IndexReader) is a  
good reason to keep IndexReader.deleteDocument for now.

Mike

Ganesh wrote:

> I have to Tag a document based on User request. On deletion, I  
> should do 'marked for delete' and on document state change, i need  
> to update the document.
> Update internally does delete and add. I am commiting the writer and  
> re-opening the reader, every minute.
>
> Consider, In a minute, lets say User has deleted a document from the  
> UI.
> If i use IndexWriter, then it is updating the document. but it is  
> getting refreshed only after a minute. If User refreshes his page,  
> then he could see the deleted item again.
>
> In order to avoid this situitation, i need to plan
> 1. Delete the document using reader
> 2. Add the document with new state using Writer.
>
> I think, we can't avoid using DeleteDocument of Reader. Suggest me,  
> if there is any other way.
>
> Regards
> Ganesh
>
>
> ----- Original Message ----- From: "Antony Bowesman"  
> <adb@teamware.com>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, November 26, 2008 4:00 AM
> Subject: Re: Which is faster/better
>
>
>> Michael McCandless wrote:
>>>
>>> If you have nothing open already, and all you want to do is delete
>>> certain documents and make a commit point, then using IndexReader vs
>>> IndexWriter should show very little difference in speed.
>>
>> Thanks.  This use case can assume there may be nothing open.  I  
>> prefer IndexWriter as delete=write is a much clearer concept that  
>> delete=read...
>>
>>> As of 2.4, IndexWriter now provides delete-by-Query, which I think
>>> ought to meet nearly all of the cases where someone wants to
>>> delete-by-docID using IndexReader.
>>
>> Yes, that is an excellent addition.  Up to now, our only use case  
>> for delete-by-docId is to perform a dBQ and so far, we have been  
>> using your suggestion from last year about how to do delete  
>> documents for ALL terms.
>>
>> Antony
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 01:26:42 2008
Return-Path: <java-user-return-37446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45807 invoked from network); 2 Dec 2008 01:26:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 01:26:41 -0000
Received: (qmail 71430 invoked by uid 500); 2 Dec 2008 01:26:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71389 invoked by uid 500); 2 Dec 2008 01:26:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71378 invoked by uid 99); 2 Dec 2008 01:26:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 17:26:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 01:25:18 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1056865yxj.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 17:26:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KlppTlGoHYAbLplPPstFcrJLK2WYLQ39lBpGzsVfDLo=;
        b=g8P25UNUP7O/5EeI3Fp/ndvkdsKEjfYlOXQQrEluQyKrH6MggR8Y5jXwOj5QxDbPDU
         CdCel1eOUv5H02bvBgFgLkWy9I1ExRDxCNIJToD1iWQB6r4yjSYHckZr7aMTL5/ZKIvw
         tWwP9PqWfexIhD10BUWJA6C+V2OC/x+ZKmW2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=sP/BE9bRSBz0EkU2mzJ5Vfvmp+Xkn0HhXapvs+SM1NAzWl247coeG6Xcl7vPp2iAUf
         +/AbVlre75B98uVi+i/AkxjwoX5PcDPvfcpvW2YgEcHdOXMV/bDJRu8iTx9CzpYZ/dQa
         sZMDOgR2RhXme+3qDlxdKKmNgRevbzAbQ+vkM=
Received: by 10.150.197.8 with SMTP id u8mr22848717ybf.161.1228181165166;
        Mon, 01 Dec 2008 17:26:05 -0800 (PST)
Received: by 10.151.72.13 with HTTP; Mon, 1 Dec 2008 17:26:05 -0800 (PST)
Message-ID: <85d3c3b60812011726t6c05b274t1f6b98043d93b7e4@mail.gmail.com>
Date: Mon, 1 Dec 2008 17:26:05 -0800
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which is faster/better
In-Reply-To: <4E7EDEA6-A3C7-4381-8825-6492D059D1AD@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_90503_23472986.1228181165103"
References: <492B92B2.9010006@teamware.com>
	 <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com>
	 <492C7C6E.7070501@teamware.com>
	 <111001c9536e$2673efd0$330bc30a@sv.us.sonicwall.com>
	 <4E7EDEA6-A3C7-4381-8825-6492D059D1AD@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_90503_23472986.1228181165103
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It would be nice to have a pluggable solution for deleteddocs in IndexReader
that accepts a Filter, and have BitVector implement Filter.  This way I do
not have to implement IndexReader.clone.

On Mon, Dec 1, 2008 at 5:04 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> So in your UI, you'd like the delete to happen immediately and then it's OK
> if the updated (added) document then takes a minute to appear?
>
> OK, I agree this (the immediacy of doing deletes via IndexReader) is a good
> reason to keep IndexReader.deleteDocument for now.
>
> Mike
>
>
> Ganesh wrote:
>
>  I have to Tag a document based on User request. On deletion, I should do
>> 'marked for delete' and on document state change, i need to update the
>> document.
>> Update internally does delete and add. I am commiting the writer and
>> re-opening the reader, every minute.
>>
>> Consider, In a minute, lets say User has deleted a document from the UI.
>> If i use IndexWriter, then it is updating the document. but it is getting
>> refreshed only after a minute. If User refreshes his page, then he could see
>> the deleted item again.
>>
>> In order to avoid this situitation, i need to plan
>> 1. Delete the document using reader
>> 2. Add the document with new state using Writer.
>>
>> I think, we can't avoid using DeleteDocument of Reader. Suggest me, if
>> there is any other way.
>>
>> Regards
>> Ganesh
>>
>>
>> ----- Original Message ----- From: "Antony Bowesman" <adb@teamware.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Wednesday, November 26, 2008 4:00 AM
>> Subject: Re: Which is faster/better
>>
>>
>>  Michael McCandless wrote:
>>>
>>>>
>>>> If you have nothing open already, and all you want to do is delete
>>>> certain documents and make a commit point, then using IndexReader vs
>>>> IndexWriter should show very little difference in speed.
>>>>
>>>
>>> Thanks.  This use case can assume there may be nothing open.  I prefer
>>> IndexWriter as delete=write is a much clearer concept that delete=read...
>>>
>>>  As of 2.4, IndexWriter now provides delete-by-Query, which I think
>>>> ought to meet nearly all of the cases where someone wants to
>>>> delete-by-docID using IndexReader.
>>>>
>>>
>>> Yes, that is an excellent addition.  Up to now, our only use case for
>>> delete-by-docId is to perform a dBQ and so far, we have been using your
>>> suggestion from last year about how to do delete documents for ALL terms.
>>>
>>> Antony
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> Send instant messages to your online friends
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_90503_23472986.1228181165103--

From java-user-return-37447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 01:44:29 2008
Return-Path: <java-user-return-37447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54345 invoked from network); 2 Dec 2008 01:44:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 01:44:29 -0000
Received: (qmail 84634 invoked by uid 500); 2 Dec 2008 01:44:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84599 invoked by uid 500); 2 Dec 2008 01:44:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84588 invoked by uid 99); 2 Dec 2008 01:44:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 17:44:33 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 01:43:04 +0000
Received: by rn-out-0910.google.com with SMTP id j71so2731821rne.4
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 17:43:49 -0800 (PST)
Received: by 10.90.94.3 with SMTP id r3mr6299458agb.73.1228182229732;
        Mon, 01 Dec 2008 17:43:49 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 38sm5468575agd.18.2008.12.01.17.43.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 01 Dec 2008 17:43:48 -0800 (PST)
Message-Id: <9D626FCD-5660-4590-BA3D-E7D7CC3D9B8C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60812011517x3f0f4589ld18fe6bdea9b659f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: serialVersionUID issue between 2.3 and 2.4
Date: Mon, 1 Dec 2008 20:43:46 -0500
References: <85d3c3b60812011517x3f0f4589ld18fe6bdea9b659f@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Well.. if you don't set serialVersionUID yourself, then java assigns a
rather volatile one for you so that it doesn't attempt to deserialize
to an incompatible local class.

We could assign one ourselves, and then we have to remember to change
it if we ever make a big enough change to Term, to allow serialize in
one version of Lucene & deserialize in another.

Mike

Jason Rutherglen wrote:

> Seeing the following issue between Lucene 2.3 and 2.4. A 2.3  
> serialized Term
> object cannot be deserialized by 2.4.  I would guess it has  
> something to do
> with a different Java compiler being used for the Lucene 2.4 build as
> serialVersionUID is not defined in the Term class.  Fixing the issue  
> is
> critical for a release before the holidays.
>
> The stacktrace below details the error.
>
> Exception in thread "main" java.io.InvalidClassException:
> org.apache.lucene.index.Term; local class incompatible: stream  
> classdesc
> serialVersionUID = 554776219862331599, local class serialVersionUID =
> 435090971444481257
>
>        at
> java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:546)
>        at
> java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java: 
> 1552)
>        at
> java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1466)
>        at
> java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java: 
> 1699)
>        at
> java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
>        at
> java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java: 
> 1908)
>        at
> java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
>        at
> java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java: 
> 1719)
>        at
> java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
>        at
> java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java: 
> 1908)
>        at
> java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
>        at
> java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java: 
> 1719)
>        at
> java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
>        at  
> java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
>        at java.util.ArrayList.readObject(ArrayList.java:591)
>        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>        at
> sun 
> .reflect 
> .NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>
>        at
> sun 
> .reflect 
> .DelegatingMethodAccessorImpl 
> .invoke(DelegatingMethodAccessorImpl.java:25)
>
>        at java.lang.reflect.Method.invoke(Method.java:585)
>        at
> java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:946)
>        at
> java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1809)
>        at
> java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java: 
> 1719)
>        at
> java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
>        at
> java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java: 
> 1908)
>        at
> java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
>        at
> java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java: 
> 1719)
>        at
> java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
>        at  
> java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 01:55:41 2008
Return-Path: <java-user-return-37448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60181 invoked from network); 2 Dec 2008 01:55:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 01:55:40 -0000
Received: (qmail 90742 invoked by uid 500); 2 Dec 2008 01:55:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90709 invoked by uid 500); 2 Dec 2008 01:55:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90698 invoked by uid 99); 2 Dec 2008 01:55:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 17:55:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 01:54:17 +0000
Received: by gxk3 with SMTP id 3so2955900gxk.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 17:54:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=YjX626rD8FO8rvylHM1sV94hxDLHwGlBdmI+FlCBb9Y=;
        b=e7zpUTGRYD4MY6LRiJy+q8Tw3FZ7jIH9TiDj/BPRdC3EBzr4Iqx2FrwR51axbPzfuQ
         +wOikrThisVF+fIZlEncL0fCQ5GYAGssNMX3kyr5L0Ds1yXFOmSV3R1U5+4Z6l+G1LqD
         6qf4OZKY5uUUWspRymQNxM/UFStO2RWk4mBSM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=W4eLNx0SiuJDR802DdPb9mf1BELFHcnt9oQWI6XmzmgsZNtlUWuMouw/pu6K+NQIKA
         kJ52eYXwVVNYWj7f3x+BwaNsDyw+ukAQQTV77Qkiefb1rwFRFDL1rxbC8ULRtIpVe7rq
         djgsgewIy4YJLg1Bj0OunDvTYD3fjzebYOCpU=
Received: by 10.151.10.7 with SMTP id n7mr11584985ybi.131.1228182844325;
        Mon, 01 Dec 2008 17:54:04 -0800 (PST)
Received: by 10.151.72.13 with HTTP; Mon, 1 Dec 2008 17:54:04 -0800 (PST)
Message-ID: <85d3c3b60812011754o5b2a7779obce92f61508092fe@mail.gmail.com>
Date: Mon, 1 Dec 2008 17:54:04 -0800
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: serialVersionUID issue between 2.3 and 2.4
In-Reply-To: <9D626FCD-5660-4590-BA3D-E7D7CC3D9B8C@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_90690_30928947.1228182844328"
References: <85d3c3b60812011517x3f0f4589ld18fe6bdea9b659f@mail.gmail.com>
	 <9D626FCD-5660-4590-BA3D-E7D7CC3D9B8C@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_90690_30928947.1228182844328
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

> if you don't set serialVersionUID yourself, then java assigns a
rather volatile one for you

True however the Java specification defines how the serialVersionUID should
be created in the event it's not defined.  The caveat being it's not
strictly enforced and so Sun alternative compilers may decide to change how
it's created (from what I've read).  Base classes like Term and Query don't
change very often so we may want to settle on a serialVersionUID for these
top level classes.

Was a different compiler used for the 2.4 release compared to 2.3?

On Mon, Dec 1, 2008 at 5:43 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Well.. if you don't set serialVersionUID yourself, then java assigns a
> rather volatile one for you so that it doesn't attempt to deserialize
> to an incompatible local class.
>
> We could assign one ourselves, and then we have to remember to change
> it if we ever make a big enough change to Term, to allow serialize in
> one version of Lucene & deserialize in another.
>
> Mike
>
>
> Jason Rutherglen wrote:
>
>  Seeing the following issue between Lucene 2.3 and 2.4. A 2.3 serialized
>> Term
>> object cannot be deserialized by 2.4.  I would guess it has something to
>> do
>> with a different Java compiler being used for the Lucene 2.4 build as
>> serialVersionUID is not defined in the Term class.  Fixing the issue is
>> critical for a release before the holidays.
>>
>> The stacktrace below details the error.
>>
>> Exception in thread "main" java.io.InvalidClassException:
>> org.apache.lucene.index.Term; local class incompatible: stream classdesc
>> serialVersionUID = 554776219862331599, local class serialVersionUID =
>> 435090971444481257
>>
>>       at
>> java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:546)
>>       at
>> java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1552)
>>       at
>> java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1466)
>>       at
>> java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1699)
>>       at
>> java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
>>       at
>> java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
>>       at
>> java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
>>       at
>> java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
>>       at
>> java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
>>       at
>> java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
>>       at
>> java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
>>       at
>> java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
>>       at
>> java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
>>       at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
>>       at java.util.ArrayList.readObject(ArrayList.java:591)
>>       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>>       at
>>
>> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>>
>>       at
>>
>> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>>
>>       at java.lang.reflect.Method.invoke(Method.java:585)
>>       at
>> java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:946)
>>       at
>> java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1809)
>>       at
>> java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
>>       at
>> java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
>>       at
>> java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908)
>>       at
>> java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832)
>>       at
>> java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719)
>>       at
>> java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305)
>>       at java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_90690_30928947.1228182844328--

From java-user-return-37449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 02:12:24 2008
Return-Path: <java-user-return-37449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71390 invoked from network); 2 Dec 2008 02:12:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 02:12:24 -0000
Received: (qmail 8351 invoked by uid 500); 2 Dec 2008 02:12:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8310 invoked by uid 500); 2 Dec 2008 02:12:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8299 invoked by uid 99); 2 Dec 2008 02:12:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 18:12:29 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 02:11:00 +0000
Received: by an-out-0708.google.com with SMTP id b2so990284ana.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 18:11:36 -0800 (PST)
Received: by 10.100.111.5 with SMTP id j5mr6334598anc.54.1228183896190;
        Mon, 01 Dec 2008 18:11:36 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id c1sm633708ana.36.2008.12.01.18.11.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 01 Dec 2008 18:11:35 -0800 (PST)
Message-Id: <ECB90641-0CE8-4043-8F22-C0C64DC1716C@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60812011754o5b2a7779obce92f61508092fe@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: serialVersionUID issue between 2.3 and 2.4
Date: Mon, 1 Dec 2008 21:11:33 -0500
References: <85d3c3b60812011517x3f0f4589ld18fe6bdea9b659f@mail.gmail.com> <9D626FCD-5660-4590-BA3D-E7D7CC3D9B8C@mikemccandless.com> <85d3c3b60812011754o5b2a7779obce92f61508092fe@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Jason Rutherglen wrote:

>> if you don't set serialVersionUID yourself, then java assigns a
> rather volatile one for you
>
> True however the Java specification defines how the serialVersionUID  
> should
> be created in the event it's not defined.  The caveat being it's not
> strictly enforced and so Sun alternative compilers may decide to  
> change how
> it's created (from what I've read).  Base classes like Term and  
> Query don't
> change very often so we may want to settle on a serialVersionUID for  
> these
> top level classes.

Makes sense.  Besides having to remember to change the  
serialVersionUID, are
there any known downsides to setting it explicitly?

Lucene sets it for 2 sources now (RAMFile & RAMDirectory).

> Was a different compiler used for the 2.4 release compared to 2.3?

Likely, yes (two different people, Michael and Mike (me!), in  
different envs,
did the releases).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 02:18:41 2008
Return-Path: <java-user-return-37450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73960 invoked from network); 2 Dec 2008 02:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 02:18:39 -0000
Received: (qmail 12439 invoked by uid 500); 2 Dec 2008 02:18:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12401 invoked by uid 500); 2 Dec 2008 02:18:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12390 invoked by uid 99); 2 Dec 2008 02:18:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 18:18:45 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 02:17:17 +0000
Received: by gxk3 with SMTP id 3so2964006gxk.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 18:18:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=PJ1E8TfC0+MkDxecP8mPzyxCqriZpmmblDRtB0Ukex8=;
        b=hritm08AnSTeN5EhCei5D6iBJvkEtN5a8GCGy4Tn1uGPzI46t1p1vrbRaq/jZKvpG+
         MN6r/yZg6LbywZPOGwL+odtNoQNo6vqjmZXJ4fqdS41/R2dFXe8gCJhxpFmYo7X2dYci
         FtGi/B5SKPLb2l61JE6JXFCYNELjBegEskmzw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pD/0gN8liPSxvn5EaeKo0FZa6Z99P0gdJtypI1P7eSZUf7YIuv15AP6liKAK5TDCgx
         1psHbcTuOWtZzUgeDK/OGA4dVcaUR+cErTaTeZGss6ErcoJwKYktlV8jToGFacfslojE
         IwKBIQhFhaarW26b5ltqkN2PTNKK9quvc/hrE=
Received: by 10.151.43.19 with SMTP id v19mr11613275ybj.223.1228184284207;
        Mon, 01 Dec 2008 18:18:04 -0800 (PST)
Received: by 10.151.72.13 with HTTP; Mon, 1 Dec 2008 18:18:04 -0800 (PST)
Message-ID: <85d3c3b60812011818k178f3b0apc213c1ea80136713@mail.gmail.com>
Date: Mon, 1 Dec 2008 18:18:04 -0800
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: serialVersionUID issue between 2.3 and 2.4
In-Reply-To: <ECB90641-0CE8-4043-8F22-C0C64DC1716C@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_90891_15613088.1228184284198"
References: <85d3c3b60812011517x3f0f4589ld18fe6bdea9b659f@mail.gmail.com>
	 <9D626FCD-5660-4590-BA3D-E7D7CC3D9B8C@mikemccandless.com>
	 <85d3c3b60812011754o5b2a7779obce92f61508092fe@mail.gmail.com>
	 <ECB90641-0CE8-4043-8F22-C0C64DC1716C@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_90891_15613088.1228184284198
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Mike,

Can you build and release a 2.4 jar using the 2.3 build environment?

> Besides having to remember to change the serialVersionUID, are there any
known downsides to setting it explicitly?

As far as I know it's all good.

Jason

On Mon, Dec 1, 2008 at 6:11 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Jason Rutherglen wrote:
>
>  if you don't set serialVersionUID yourself, then java assigns a
>>>
>> rather volatile one for you
>>
>> True however the Java specification defines how the serialVersionUID
>> should
>> be created in the event it's not defined.  The caveat being it's not
>> strictly enforced and so Sun alternative compilers may decide to change
>> how
>> it's created (from what I've read).  Base classes like Term and Query
>> don't
>> change very often so we may want to settle on a serialVersionUID for these
>> top level classes.
>>
>
> Makes sense.  Besides having to remember to change the serialVersionUID,
> are
> there any known downsides to setting it explicitly?
>
> Lucene sets it for 2 sources now (RAMFile & RAMDirectory).
>
>  Was a different compiler used for the 2.4 release compared to 2.3?
>>
>
> Likely, yes (two different people, Michael and Mike (me!), in different
> envs,
> did the releases).
>
> Mike
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_90891_15613088.1228184284198--

From java-user-return-37451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 04:43:57 2008
Return-Path: <java-user-return-37451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99151 invoked from network); 2 Dec 2008 04:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 04:43:57 -0000
Received: (qmail 87103 invoked by uid 500); 2 Dec 2008 04:44:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87069 invoked by uid 500); 2 Dec 2008 04:44:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87058 invoked by uid 99); 2 Dec 2008 04:44:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 20:44:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 04:42:32 +0000
Received: by ik-out-1112.google.com with SMTP id c29so2314910ika.5
        for <java-user@lucene.apache.org>; Mon, 01 Dec 2008 20:43:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=igSWmStm5kdImvIiUOWEjG07RcWB/lBzKFJfdR9iN0U=;
        b=aRU5wgXsC2pKj+bndOKj9DGC6nSQC8nYQ7ljfkKsvM5ojuTT4gdfSc56cY22O9++q+
         XQupy3cfF6fo/O4s4PrWio3rUk2AOwT5Wv2i8cxmn1vb5LN1R0WWkG332UO+9b4vyBC/
         JJ7VSCJmu8HoH9Kygr78CwJhQvC08NAMmp3bY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=jP/SW/BpV4ZwaLSDpXV/yJYepa9zkhvZ+yEObcAti+o0+tjkBlmqQwZbSEvnOhp+5c
         /xibqrCaOGoCabvPN38Vup8aIWt43o9/hAEGv6UoZy7XjRUDMKqeSHxXJyNJehqe2S/c
         CTwitHmYZyIfPXePummzpXEgRaSd4Jnsb19ns=
Received: by 10.210.105.20 with SMTP id d20mr13481240ebc.142.1228192988314;
        Mon, 01 Dec 2008 20:43:08 -0800 (PST)
Received: from kodapan.lan (c150-155-70-80.bjare.net [80.70.155.150])
        by mx.google.com with ESMTPS id f6sm25185548nfh.12.2008.12.01.20.43.03
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 01 Dec 2008 20:43:05 -0800 (PST)
Message-Id: <B5D25662-63A8-44CD-8560-78A889FC1212@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60812011818k178f3b0apc213c1ea80136713@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: serialVersionUID issue between 2.3 and 2.4
Date: Tue, 2 Dec 2008 05:42:46 +0100
References: <85d3c3b60812011517x3f0f4589ld18fe6bdea9b659f@mail.gmail.com> <9D626FCD-5660-4590-BA3D-E7D7CC3D9B8C@mikemccandless.com> <85d3c3b60812011754o5b2a7779obce92f61508092fe@mail.gmail.com> <ECB90641-0CE8-4043-8F22-C0C64DC1716C@mikemccandless.com> <85d3c3b60812011818k178f3b0apc213c1ea80136713@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You could get the 2.4 code and set the serialVersionUID of the Term  
class to the UID assigned to the 2.3 Term class (554776219862331599l)  
and recompile.

As for statically setting a serialVersionUID in the class, one could  
instead set it to a final value and implement Externalizable in order  
to keep binary compatibility between class versions that contains more  
changes than what the Serializable reflection support code can handle.  
That would also save a few clock ticks. All over I think that is a  
much better solution.


     karl

2 dec 2008 kl. 03.18 skrev Jason Rutherglen:

> Hi Mike,
>
> Can you build and release a 2.4 jar using the 2.3 build environment?
>
>> Besides having to remember to change the serialVersionUID, are  
>> there any
> known downsides to setting it explicitly?
>
> As far as I know it's all good.
>
> Jason
>
> On Mon, Dec 1, 2008 at 6:11 PM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> Jason Rutherglen wrote:
>>
>> if you don't set serialVersionUID yourself, then java assigns a
>>>>
>>> rather volatile one for you
>>>
>>> True however the Java specification defines how the serialVersionUID
>>> should
>>> be created in the event it's not defined.  The caveat being it's not
>>> strictly enforced and so Sun alternative compilers may decide to  
>>> change
>>> how
>>> it's created (from what I've read).  Base classes like Term and  
>>> Query
>>> don't
>>> change very often so we may want to settle on a serialVersionUID  
>>> for these
>>> top level classes.
>>>
>>
>> Makes sense.  Besides having to remember to change the  
>> serialVersionUID,
>> are
>> there any known downsides to setting it explicitly?
>>
>> Lucene sets it for 2 sources now (RAMFile & RAMDirectory).
>>
>> Was a different compiler used for the 2.4 release compared to 2.3?
>>>
>>
>> Likely, yes (two different people, Michael and Mike (me!), in  
>> different
>> envs,
>> did the releases).
>>
>> Mike
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 06:42:17 2008
Return-Path: <java-user-return-37452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52073 invoked from network); 2 Dec 2008 06:42:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 06:42:17 -0000
Received: (qmail 60754 invoked by uid 500); 2 Dec 2008 06:42:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60719 invoked by uid 500); 2 Dec 2008 06:42:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60708 invoked by uid 99); 2 Dec 2008 06:42:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 01 Dec 2008 22:42:21 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.165] (HELO smtp116.mail.mud.yahoo.com) (209.191.84.165)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Dec 2008 06:40:50 +0000
Received: (qmail 59323 invoked from network); 2 Dec 2008 06:40:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=OGRIE4KRVDR2jTutWzWyIMigtMxzODeGmaCKYWQJ340RidpRL0AX1A5JZm68KHSZM8yIOB04EaLMhSVmPcJRboMvoACW3ir44UZSvHzYld5eSG5EhPwEhfn3RkPJl3IQ/WIV47IFk0m73ZWIPc9mLelKfSG1IBRHrERDJ2y7HFs=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp116.mail.mud.yahoo.com with SMTP; 2 Dec 2008 06:40:34 -0000
X-Yahoo-Newman-Property: ymail-3
Message-ID: <119f01c95448$e12a3cf0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <492B92B2.9010006@teamware.com> <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com> <492C7C6E.7070501@teamware.com> <111001c9536e$2673efd0$330bc30a@sv.us.sonicwall.com> <4E7EDEA6-A3C7-4381-8825-6492D059D1AD@mikemccandless.com>
Subject: Re: Which is faster/better
Date: Tue, 2 Dec 2008 12:10:31 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

>
> So in your UI, you'd like the delete to happen immediately and then  it's 
> OK if the updated (added) document then takes a minute to appear?
Yes. Whenever a document state is changed, it moves to different store 
(basically a Mail applicaiton, each mail has state of deleted, junk, 
delivered etc). Each store has separate UI. When User is viewing a store and 
updates a document. The record will be deleted, certain action will be 
performed and added with new state so that it could be viewed from different 
store. I am using only Lucene as my DB and not using any other database.

Regards
Ganesh


----- Original Message ----- 
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, December 02, 2008 6:34 AM
Subject: Re: Which is faster/better


>
> So in your UI, you'd like the delete to happen immediately and then  it's 
> OK if the updated (added) document then takes a minute to appear?
>
> OK, I agree this (the immediacy of doing deletes via IndexReader) is a 
> good reason to keep IndexReader.deleteDocument for now.
>
> Mike
>
> Ganesh wrote:
>
>> I have to Tag a document based on User request. On deletion, I  should do 
>> 'marked for delete' and on document state change, i need  to update the 
>> document.
>> Update internally does delete and add. I am commiting the writer and 
>> re-opening the reader, every minute.
>>
>> Consider, In a minute, lets say User has deleted a document from the  UI.
>> If i use IndexWriter, then it is updating the document. but it is 
>> getting refreshed only after a minute. If User refreshes his page,  then 
>> he could see the deleted item again.
>>
>> In order to avoid this situitation, i need to plan
>> 1. Delete the document using reader
>> 2. Add the document with new state using Writer.
>>
>> I think, we can't avoid using DeleteDocument of Reader. Suggest me,  if 
>> there is any other way.
>>
>> Regards
>> Ganesh
>>
>>
>> ----- Original Message ----- From: "Antony Bowesman"  <adb@teamware.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Wednesday, November 26, 2008 4:00 AM
>> Subject: Re: Which is faster/better
>>
>>
>>> Michael McCandless wrote:
>>>>
>>>> If you have nothing open already, and all you want to do is delete
>>>> certain documents and make a commit point, then using IndexReader vs
>>>> IndexWriter should show very little difference in speed.
>>>
>>> Thanks.  This use case can assume there may be nothing open.  I  prefer 
>>> IndexWriter as delete=write is a much clearer concept that 
>>> delete=read...
>>>
>>>> As of 2.4, IndexWriter now provides delete-by-Query, which I think
>>>> ought to meet nearly all of the cases where someone wants to
>>>> delete-by-docID using IndexReader.
>>>
>>> Yes, that is an excellent addition.  Up to now, our only use case  for 
>>> delete-by-docId is to perform a dBQ and so far, we have been  using your 
>>> suggestion from last year about how to do delete  documents for ALL 
>>> terms.
>>>
>>> Antony
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 08:28:24 2008
Return-Path: <java-user-return-37453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93018 invoked from network); 2 Dec 2008 08:28:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 08:28:24 -0000
Received: (qmail 57322 invoked by uid 500); 2 Dec 2008 08:28:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56467 invoked by uid 500); 2 Dec 2008 08:28:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56456 invoked by uid 99); 2 Dec 2008 08:28:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 00:28:28 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 08:26:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L7Qbh-0005Oq-RR
	for java-user@lucene.apache.org; Tue, 02 Dec 2008 00:27:45 -0800
Message-ID: <20787949.post@talk.nabble.com>
Date: Tue, 2 Dec 2008 00:27:45 -0800 (PST)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting fields are searching or indexing time?
In-Reply-To: <8396568E-FD4F-47CC-A474-B51D6D54688C@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
References: <20759051.post@talk.nabble.com> <8396568E-FD4F-47CC-A474-B51D6D54688C@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks, I clearly understood it.


Grant Ingersoll-6 wrote:
> 
> Possibly, but probably not.  Index time boosting is generally done to  
> say one field is more important than another field, or one document is  
> more important than another document, whereas query time boosting  
> generally says this term is more important than that term.
> 
> Additionally, search time boosting has much more granularity than  
> index time boosting, meaning you have more bits to express the boost  
> value during search than you do during indexing.
> 
> HTH,
> Grant
> 
> 
> On Nov 30, 2008, at 11:11 AM, Marc Sturlese wrote:
> 
>>
>> Hey there,
>> I have a simple question about boosting fields,
>> I have a lucene indexer app that indexes data from a db. At indexing  
>> time I
>> give different boost to the fields depending on if the field is  
>> title or
>> content. Would it be the same to set the boost at searching time  
>> instead of
>> at indexing? I mean, the results of the search would be exactly the  
>> same?
>>
>> Thanks in advance
>> -- 
>> View this message in context:
>> http://www.nabble.com/Boosting-fields-are-searching-or-indexing-time--tp20759051p20759051.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Boosting-fields-at-search-or-indexing-time--tp20759051p20787949.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 09:04:29 2008
Return-Path: <java-user-return-37454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3475 invoked from network); 2 Dec 2008 09:04:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 09:04:29 -0000
Received: (qmail 89406 invoked by uid 500); 2 Dec 2008 09:04:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89356 invoked by uid 500); 2 Dec 2008 09:04:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89345 invoked by uid 99); 2 Dec 2008 09:04:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 01:04:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dk1982@hotmail.it designates 65.55.34.77 as permitted sender)
Received: from [65.55.34.77] (HELO col0-omc2-s3.col0.hotmail.com) (65.55.34.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 09:03:01 +0000
Received: from COL113-W82 ([65.55.34.71]) by col0-omc2-s3.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 2 Dec 2008 01:03:27 -0800
Message-ID: <COL113-W8284C0CC1716F89F669205BE000@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_8e048aa2-1b7d-4b18-90f4-af129e8b9a79_"
X-Originating-IP: [88.51.233.126]
From: tiziano bernardi <dk1982@hotmail.it>
To: java lucene domande <java-user@lucene.apache.org>
Subject: RE: Pdf in Lucene?
Date: Tue, 2 Dec 2008 10:03:27 +0100
Importance: Normal
In-Reply-To: <81F5AE5D-760A-40C9-A4B8-2889C9E9CACD@apache.org>
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
 <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com>
 <COL113-W45437A1268795288A8839CBE010@phx.gbl>
 <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
 <COL113-W455B5282CF986CD2D0A97EBE010@phx.gbl>
 <81F5AE5D-760A-40C9-A4B8-2889C9E9CACD@apache.org>
MIME-Version: 1.0
X-OriginalArrivalTime: 02 Dec 2008 09:03:27.0418 (UTC) FILETIME=[D6CBE1A0:01C9545C]
X-Virus-Checked: Checked by ClamAV on apache.org

--_8e048aa2-1b7d-4b18-90f4-af129e8b9a79_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



This is the exception:
Exception in thread "main" java.lang.NoSuchMethodError: org.apache.lucene.d=
ocument.Document.add(Lorg/apache/lucene/document/Field=3B)V
at org.pdfbox.searchengine.lucene.LucenePDFDocument.addUnindexedField(Lucen=
ePDFDocument.java:224)
at org.pdfbox.searchengine.lucene.LucenePDFDocument.convertDocument(LuceneP=
DFDocument.java:265)
at org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(LucenePDFDo=
cument.java:377)
at SimplePdfSearch.main(SimplePdfSearch.java:30)
=20
I thank you for the time you spent
> From: gsingers@apache.org> To: java-user@lucene.apache.org> Subject: Re: =
Pdf in Lucene?> Date: Mon=2C 1 Dec 2008 17:40:12 -0500> > I certainly don't=
 either=2C since you haven't said what the actual > exception is. If I had =
to guess=2C though=2C I would say it is the line> Document document =3D Luc=
enePDFDocument.getDocument> > And that the Lucene library expected by PDFBo=
x is not the same version > of Lucene you are using. I would suggest not re=
lying on PDFBox to > create your document=2C and instead look at the PDFBox=
 calls that you > need to make to then create your Document.> > > On Dec 1=
=2C 2008=2C at 9:18 AM=2C tiziano bernardi wrote:> > >> >> > this is my cla=
ss=2C I use eclipse and I haven't any errors.Do not > > understand where th=
e problem ....> >> >> > import java.io.File=3B> > import java.io.IOExceptio=
n=3B> >> > import org.apache.lucene.analysis.Analyzer=3B> > import org.apac=
he.lucene.analysis.standard.StandardAnalyzer=3B> > import org.apache.lucene=
.document.Document=3B> > import org.apache.lucene.index.IndexWriter=3B> > i=
mport org.apache.lucene.index.Term=3B> > import org.apache.lucene.search.Hi=
ts=3B> > import org.apache.lucene.search.IndexSearcher=3B> > import org.apa=
che.lucene.search.Query=3B> > import org.apache.lucene.search.TermQuery=3B>=
 > import org.apache.lucene.store.Directory=3B> > import org.apache.lucene.=
store.RAMDirectory=3B> > import org.pdfbox.searchengine.lucene.LucenePDFDoc=
ument=3B> >> > public final class SimplePdfSearch> > {> > private static fi=
nal String PDF_FILE_PATH =3D "C:\\Users\\Tiziano\ > > \Desktop\\doc_di_prov=
a\\prova.pdf"=3B> > private static final String SEARCH_TERM =3D "prova"=3B>=
 >> > public static final void main(String[] args) throws IOException> > {>=
 > Directory directory =3D null=3B> >> > try> > {> > File pdfFile =3D new F=
ile(PDF_FILE_PATH)=3B> > Document document =3D LucenePDFDocument.getDocumen=
t(pdfFile)=3B> >> > directory =3D new RAMDirectory()=3B> >> > IndexWriter i=
ndexWriter =3D null=3B> >> > try> > {> > Analyzer analyzer =3D new Standard=
Analyzer()=3B> > indexWriter =3D new IndexWriter(directory=2C analyzer=2C t=
rue)=3B> >> > indexWriter.addDocument(document)=3B> > }> > finally> > {> > =
if (indexWriter !=3D null)> > {> > try> > {> > indexWriter.close()=3B> > }>=
 > catch (IOException ignore)> > {> > // Ignore> > }> >> > indexWriter =3D =
null=3B> > }> > }> >> > IndexSearcher indexSearcher =3D null=3B> >> > try> =
> {> > indexSearcher =3D new IndexSearcher(directory)=3B> >> > Term term =
=3D new Term("contents"=2C SEARCH_TERM)=3B> > Query query =3D new TermQuery=
(term)=3B> >> > Hits hits =3D indexSearcher.search(query)=3B> >> > System.o=
ut.println((hits.length() !=3D 0) ? "Found" : "Not Found")=3B> > }> > final=
ly> > {> > if (indexSearcher !=3D null)> > {> > try> > {> > indexSearcher.c=
lose()=3B> > }> > catch (IOException ignore)> > {> > // Ignore> > }> >> > i=
ndexSearcher =3D null=3B> > }> > }> > }> > finally> > {> > if (directory !=
=3D null)> > {> > try> > {> > directory.close()=3B> > }> > catch (IOExcepti=
on ignore)> > {> > // Ignore> > }> >> > directory =3D null=3B> > }> > }> > =
}> > }> From: gsingers@apache.org> To: java-user@lucene.apache.org> > > Sub=
ject: Re: Pdf in Lucene?> Date: Mon=2C 1 Dec 2008 08:22:58 -0500> > > > > O=
n Dec 1=2C 2008=2C at 8:01 AM=2C tiziano bernardi wrote:> > >> > I > > trie=
d to use pdfbox but gives me an error.> > That the version of > > lucene an=
d the pdfbox are incompatible.> > Lucene knows nothing > > about PDFBox=2C =
so I don't see how they could be > incompatible=2C > > unless your are refe=
rring to PDFBox's Lucene Document > creator=2C in > > which case=2C you sho=
uld ask on the PDFBox mailing list. I > think=2C > > however=2C that it's p=
retty straightforward to create a Lucene > > > document from PDFBox=2C so y=
ou shouldn't need to rely on their > > version.> > Personally=2C I'd have a=
 look at Tika (http://lucene.apache.org/tika > > )=2C > which wraps PDFBox =
(and other extraction libraries) and gives > > you back > SAX-like events v=
ia a ContentHandler=2C which you can then > > use to create > Lucene docume=
nts. Else=2C I've been working on > > SOLR-284=2C which > integrates Tika i=
nto Solr=2C see https://issues.apache.org/jira/browse/SOLR-284 > > > > -Gra=
nt> > >> > I use pdf box 0.7.3 and lucene 2.1.0> Date: Mon=2C > > 1 Dec 200=
8 11:43:00 > > +0000> From: ian.lea@gmail.com> To: java-user@lucene.apache.=
org > > > > > Subject: Re: Pdf in Lucene?> > Hi> > > Lucene only indexes > =
> text so > > you'll have to get the text out of the PDF> and feed it > > t=
o lucene.> > > > Google for lucene pdf=2C or go straight to http://www.pdfb=
ox.org/ > > > > > > > --> Ian.> > > > 2008/12/1 tiziano bernardi <dk1982@ho=
tmail.it > > >:> > > >> >> > Hi=2C> > I want to index PDF files with lucene=
 is > > possible?> > > > What like?> > Thanks Tiziano Bernardi> > > > > > _=
________________________________________________________________> > > > > >=
 Fanne di tutti i colori=2C personalizza la tua Hotmail!> > http://imagine-=
windowslive.com/Hotmail/#0 > > > > > > > > > > ----------------------------=
----------------------------------------- > > > > > To unsubscribe=2C e-mai=
l: java-user- > > unsubscribe@lucene.apache.org> > > For additional command=
s=2C e-mail: java-user-help@lucene.apache.org > > >> > > > ________________=
_________________________________________________> > > > 50 nuovi schemi pe=
r giocare su CrossWire! Accetta la sfida!> > http://livesearch.games.msn.co=
m/crosswire/play_it/ > > > > --------------------------> Grant Ingersoll> >=
 Lucene Helpful > > Hints:> http://wiki.apache.org/lucene-java/BasicsOfPerf=
ormance> http://wiki.apache.org/lucene-java/LuceneFAQ > > > > > > > > > > >=
 > > > > > ----------------------------------------------------------------=
----- > > > To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.o=
rg> > > For additional commands=2C e-mail: java-user-help@lucene.apache.org=
>> > _________________________________________________________________> > V=
ai oltre le parole=2C scarica il nuovo Messenger!> > http://download.live.c=
om/?mkt=3Dit-it> > --------------------------> Grant Ingersoll> > Lucene He=
lpful Hints:> http://wiki.apache.org/lucene-java/BasicsOfPerformance> http:=
//wiki.apache.org/lucene-java/LuceneFAQ> > > > > > > > > > > > ------------=
---------------------------------------------------------> To unsubscribe=
=2C e-mail: java-user-unsubscribe@lucene.apache.org> For additional command=
s=2C e-mail: java-user-help@lucene.apache.org>=20
_________________________________________________________________
Vai oltre le parole=2C scarica il nuovo Messenger!
http://download.live.com/?mkt=3Dit-it=

--_8e048aa2-1b7d-4b18-90f4-af129e8b9a79_--

From java-user-return-37455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 10:19:21 2008
Return-Path: <java-user-return-37455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48541 invoked from network); 2 Dec 2008 10:19:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 10:19:21 -0000
Received: (qmail 70648 invoked by uid 500); 2 Dec 2008 10:19:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70063 invoked by uid 500); 2 Dec 2008 10:19:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70051 invoked by uid 99); 2 Dec 2008 10:19:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 02:19:26 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.32] (HELO mail-qy0-f32.google.com) (209.85.221.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 10:17:57 +0000
Received: by qyk13 with SMTP id 13so830447qyk.5
        for <java-user@lucene.apache.org>; Tue, 02 Dec 2008 02:18:41 -0800 (PST)
Received: by 10.215.13.13 with SMTP id q13mr11194707qai.302.1228213121326;
        Tue, 02 Dec 2008 02:18:41 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 9sm1113441ywf.36.2008.12.02.02.18.39
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 02 Dec 2008 02:18:40 -0800 (PST)
Message-Id: <20E46CF6-6477-4010-BDD0-070846E141B0@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <85d3c3b60812011818k178f3b0apc213c1ea80136713@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: serialVersionUID issue between 2.3 and 2.4
Date: Tue, 2 Dec 2008 05:18:38 -0500
References: <85d3c3b60812011517x3f0f4589ld18fe6bdea9b659f@mail.gmail.com> <9D626FCD-5660-4590-BA3D-E7D7CC3D9B8C@mikemccandless.com> <85d3c3b60812011754o5b2a7779obce92f61508092fe@mail.gmail.com> <ECB90641-0CE8-4043-8F22-C0C64DC1716C@mikemccandless.com> <85d3c3b60812011818k178f3b0apc213c1ea80136713@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Jason Rutherglen wrote:

> Hi Mike,
>
> Can you build and release a 2.4 jar using the 2.3 build environment?

I don't think that's the right approach here.  We should, instead,  
directly fix Term.java to be serializable, if that's the goal.

(Or, as a workaround, Karl's suggestion that you build your own 2.4  
JAR that has explicitly reverted the serialVersionUID to match 2.3,  
should work well too?).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 10:22:42 2008
Return-Path: <java-user-return-37456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49169 invoked from network); 2 Dec 2008 10:22:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 10:22:41 -0000
Received: (qmail 72947 invoked by uid 500); 2 Dec 2008 10:22:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72912 invoked by uid 500); 2 Dec 2008 10:22:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72901 invoked by uid 99); 2 Dec 2008 10:22:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 02:22:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.185] (HELO rn-out-0910.google.com) (64.233.170.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 10:21:18 +0000
Received: by rn-out-0910.google.com with SMTP id j71so2857775rne.4
        for <java-user@lucene.apache.org>; Tue, 02 Dec 2008 02:22:04 -0800 (PST)
Received: by 10.150.195.21 with SMTP id s21mr12316458ybf.69.1228213323736;
        Tue, 02 Dec 2008 02:22:03 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id t26sm2771200ele.2.2008.12.02.02.22.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 02 Dec 2008 02:22:02 -0800 (PST)
Message-Id: <DB0B6406-BEC7-4300-91FE-04A3601F082E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <B5D25662-63A8-44CD-8560-78A889FC1212@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: serialVersionUID issue between 2.3 and 2.4
Date: Tue, 2 Dec 2008 05:22:00 -0500
References: <85d3c3b60812011517x3f0f4589ld18fe6bdea9b659f@mail.gmail.com> <9D626FCD-5660-4590-BA3D-E7D7CC3D9B8C@mikemccandless.com> <85d3c3b60812011754o5b2a7779obce92f61508092fe@mail.gmail.com> <ECB90641-0CE8-4043-8F22-C0C64DC1716C@mikemccandless.com> <85d3c3b60812011818k178f3b0apc213c1ea80136713@mail.gmail.com> <B5D25662-63A8-44CD-8560-78A889FC1212@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Karl Wettin wrote:

> As for statically setting a serialVersionUID in the class, one could  
> instead set it to a final value and implement Externalizable in  
> order to keep binary compatibility between class versions that  
> contains more changes than what the Serializable reflection support  
> code can handle. That would also save a few clock ticks. All over I  
> think that is a much better solution.

I like this solution -- it makes the serialization / deserialization  
explicit.

Jason can you open a Jira issue & work out a patch for this?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 13:48:23 2008
Return-Path: <java-user-return-37457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47972 invoked from network); 2 Dec 2008 13:48:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 13:48:23 -0000
Received: (qmail 48484 invoked by uid 500); 2 Dec 2008 13:48:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48440 invoked by uid 500); 2 Dec 2008 13:48:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48429 invoked by uid 99); 2 Dec 2008 13:48:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 05:48:27 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.16] (HELO relay02.pair.com) (209.68.5.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 02 Dec 2008 13:46:58 +0000
Received: (qmail 52550 invoked from network); 2 Dec 2008 13:47:42 -0000
Received: from 38.104.58.186 (HELO ?10.0.1.25?) (38.104.58.186)
  by relay02.pair.com with SMTP; 2 Dec 2008 13:47:42 -0000
X-pair-Authenticated: 38.104.58.186
Subject: # of fields, performance
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Tue, 02 Dec 2008 08:47:42 -0500
Message-Id: <1228225662.7735.2.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
  I saw this question asked before without a clear answer. Pardons if I
missed it in the archive elsewhere. 

Is there a serious degradation of performance when using high number of
fields per document? Like 100's? Is the impact more on the write than
the read?

What are the performance characteristics with a high number of fields
and is anyone using indexes this way?

thank you for any thoughts.

Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 15:44:15 2008
Return-Path: <java-user-return-37458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36886 invoked from network); 2 Dec 2008 15:44:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 15:44:14 -0000
Received: (qmail 35531 invoked by uid 500); 2 Dec 2008 15:44:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35501 invoked by uid 500); 2 Dec 2008 15:44:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35490 invoked by uid 99); 2 Dec 2008 15:44:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 07:44:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 15:42:51 +0000
Received: by gxk3 with SMTP id 3so3257881gxk.5
        for <java-user@lucene.apache.org>; Tue, 02 Dec 2008 07:42:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=n2ySoDR9gvVP8HZF7Y8Gz/DJYTHfIcn81PkqxZVUbHo=;
        b=f08yv7qSlrEA/CfA1KNTegFMi+SXA3dyENHnqONgoJLpntAqQ9pniG0029jdbXNpVk
         zZGdc0lMaMVJEk9HGjVwp7jK8nHotEK0FkiWiGjpnJ/S3nw/dweVu9hC3xIhuko56FPQ
         CKywcKzaBzS/F9pDRqAv9ECKcPNMkprY4KVo8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YGyatCfA02xIrkM0egKTPJ1ZJFuLEQCDQ6BERAdFXenyp4w9VVn+lIqm9vQaA78bKc
         3nT6/E5D8L+hOiSbnQEA7oZq7dXAf5iQyiUupmrrkUv9cWXhwNqg9OdCkkAZupCq3qBq
         rPP7GNmlGxj2JyvqVc/S1cJcnkbLY6Qwqj0zA=
Received: by 10.151.143.3 with SMTP id v3mr12782075ybn.132.1228232528603;
        Tue, 02 Dec 2008 07:42:08 -0800 (PST)
Received: by 10.151.75.8 with HTTP; Tue, 2 Dec 2008 07:42:08 -0800 (PST)
Message-ID: <85d3c3b60812020742r7620050aj808eef439ac0ddf9@mail.gmail.com>
Date: Tue, 2 Dec 2008 07:42:08 -0800
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: serialVersionUID issue between 2.3 and 2.4
In-Reply-To: <DB0B6406-BEC7-4300-91FE-04A3601F082E@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_99120_15335875.1228232528576"
References: <85d3c3b60812011517x3f0f4589ld18fe6bdea9b659f@mail.gmail.com>
	 <9D626FCD-5660-4590-BA3D-E7D7CC3D9B8C@mikemccandless.com>
	 <85d3c3b60812011754o5b2a7779obce92f61508092fe@mail.gmail.com>
	 <ECB90641-0CE8-4043-8F22-C0C64DC1716C@mikemccandless.com>
	 <85d3c3b60812011818k178f3b0apc213c1ea80136713@mail.gmail.com>
	 <B5D25662-63A8-44CD-8560-78A889FC1212@gmail.com>
	 <DB0B6406-BEC7-4300-91FE-04A3601F082E@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_99120_15335875.1228232528576
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I prefer Externalizable as well as it makes Serialization faster.  Perhaps
also for Query and it's subclasses to start?  I had code to do this for
Analyzer as well which could be useful, perhaps a different patch though.

On Tue, Dec 2, 2008 at 2:22 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Karl Wettin wrote:
>
>  As for statically setting a serialVersionUID in the class, one could
>> instead set it to a final value and implement Externalizable in order to
>> keep binary compatibility between class versions that contains more changes
>> than what the Serializable reflection support code can handle. That would
>> also save a few clock ticks. All over I think that is a much better
>> solution.
>>
>
> I like this solution -- it makes the serialization / deserialization
> explicit.
>
> Jason can you open a Jira issue & work out a patch for this?
>
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_99120_15335875.1228232528576--

From java-user-return-37459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 16:12:54 2008
Return-Path: <java-user-return-37459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43608 invoked from network); 2 Dec 2008 16:12:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 16:12:54 -0000
Received: (qmail 93025 invoked by uid 500); 2 Dec 2008 16:12:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92997 invoked by uid 500); 2 Dec 2008 16:12:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92986 invoked by uid 99); 2 Dec 2008 16:12:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 08:12:58 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ngvinny@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 16:11:28 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2255685fgb.27
        for <java-user@lucene.apache.org>; Tue, 02 Dec 2008 08:12:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=mTlCLQvU26b78NUwyET+CjbOTQ2Oja7EQwErSal/KFI=;
        b=u8GjAq1yST9xxuurqsFBN4FsEM8tiB74LAH5mx8FhIrcBDiB2A2zaf22xAVzWyJ50r
         1lzDQ383P/w9EVuJ/h+FA/C7nqPC4uWQqbvBb/aYSUzwusJn0kchTxuz38GLtGRirPjp
         84wqETng95f9yUc6cSzXUNDRp5QTvJ0oQz4gE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YSpBQLGnChXwOAsYHJPPN0W9yr+Ed9O1ycv0AnJQ5+M31l2XwR4FUQyH6vFQuJk63a
         NHi2ptSbsyf5ZhYZSBwvJm52k0+JFriBoPeRIOa8Do0DGFJbjcGjIUrt836dFmAain39
         iCkS97B6/UeVyLoxPDkCzwy9tOBU9q3I8XWx8=
Received: by 10.181.58.9 with SMTP id l9mr4301614bkk.214.1228234334635;
        Tue, 02 Dec 2008 08:12:14 -0800 (PST)
Received: by 10.181.22.13 with HTTP; Tue, 2 Dec 2008 08:12:14 -0800 (PST)
Message-ID: <5db95abe0812020812r396c4f2cy89c6e54c4b1a8bd7@mail.gmail.com>
Date: Tue, 2 Dec 2008 16:12:14 +0000
From: "Ng Vinny" <ngvinny@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: PhraseQuery and non-letter characters
In-Reply-To: <8c4e68610811281009h587f8cfdu21cb7080648fd1e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_111116_25971.1228234334634"
References: <5db95abe0811280905t5290efa4q571a4a4d9885474e@mail.gmail.com>
	 <8c4e68610811281009h587f8cfdu21cb7080648fd1e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_111116_25971.1228234334634
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Ian

Thanks for the suggestion. I was able to write the custom analyzer to return
non-letters as tokens, as well as to keep the numeric characters instead of
skipping them.
This is probably not the best solution, but at least i can have a demo
without bugs :-)

To save time for others who may have the same need, below is the code (based
on the one mentioned in
http://www.gossamer-threads.com/lists/lucene/java-user/402)


/* This class is identical to the com.lucene.analysis.LowerCaseTokenizer
 * class except that it will not trim off numbers, and will output
non-letter characters as tokens
 * this is to prevent matching, e.g. "information, technology" with
"information technology"
 */

import java.io.Reader;
import org.apache.lucene.analysis.Token;
import org.apache.lucene.analysis.Tokenizer;

public final class LowerCaseNumericNonLetterTokenizer extends Tokenizer {

    public LowerCaseNumericNonLetterTokenizer(Reader in) {
        input = in;
    }
    private int offset = 0,  bufferIndex = 0,  dataLen = 0;
    private final static int MAX_WORD_LEN = 255;
    private final static int IO_BUFFER_SIZE = 1024;
    private final char[] buffer = new char[MAX_WORD_LEN];
    private final char[] ioBuffer = new char[IO_BUFFER_SIZE];

    public final Token next() throws java.io.IOException {
        int length = 0;
        int start = offset;
        while (true) {
            final char c;

            offset++;
            if (bufferIndex >= dataLen) {
                dataLen = input.read(ioBuffer);
                bufferIndex = 0;
            }

            if (dataLen == -1) { //the end of the stream has been reached
                if (length > 0) {
                    break;
                } else {
                    return null;
                }
            } else {
                c = (char) ioBuffer[bufferIndex++];
            }

            //return the non-letters as tokens instead of skipping them
            if (!Character.isWhitespace(c) && !Character.isLetterOrDigit(c))
{
                //when c is at the end of the buffer, just return the buffer
as a Token, and reset the offset and bufferIndex so that the next iteration
will encounter the non-letter
                if (length > 0) {
                    offset--;
                    bufferIndex--;
                    break;
                } else { //when the non-letter is at the start of token,
return it as token
                    start = offset - 1;
                    buffer[length++] = c;
                    break;
                }
            }

            if (Character.isLetterOrDigit(c)) { // if it's a letter

                if (length == 0) // start of token
                {
                    start = offset - 1;
                }

                buffer[length++] = Character.toLowerCase(c);// buffer it

                if (length == MAX_WORD_LEN) // buffer overflow!
                {
                    break;
                }

            } else if (length > 0) // at non-Letter w/ chars
            {
                break; // return 'em
            }
        }

        return new Token(new String(buffer, 0, length), start, start +
length);
    }
}


On Fri, Nov 28, 2008 at 6:09 PM, Ian Lea <ian.lea@gmail.com> wrote:

> I suggest you write your own analyzer that doesn't remove non-letter
> characters at index time. There might be one out there already, but
> not that I can think of off hand.
>
> Instead of leaving the non-letters in place you might consider doing
> something with position increments.  I think that would prevent phrase
> queries from matching.
>
>
> --
> Ian.
>
>
> On Fri, Nov 28, 2008 at 5:05 PM, Ng Vinny <ngvinny@gmail.com> wrote:
> > Hi,
> >
> > I'm having an issue with PhraseQuery in which a query for the phrase
> > "information technology" has among of its matches the strings
> "information,
> > technology" and "information. Technology",  which should not be
> considered
> > as matches.
> > Both StopAnalyzer  StandardAnalyzer removes non-letter character at index
> > time.
> >
> > Any suggestions?
> >
> > Thanks.
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_111116_25971.1228234334634--

From java-user-return-37460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 17:21:51 2008
Return-Path: <java-user-return-37460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66525 invoked from network); 2 Dec 2008 17:21:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 17:21:51 -0000
Received: (qmail 16628 invoked by uid 500); 2 Dec 2008 17:21:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16297 invoked by uid 500); 2 Dec 2008 17:21:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16270 invoked by uid 99); 2 Dec 2008 17:21:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 09:21:56 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 17:20:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L7Yvy-0004Y1-7a
	for java-user@lucene.apache.org; Tue, 02 Dec 2008 09:21:14 -0800
Message-ID: <20796392.post@talk.nabble.com>
Date: Tue, 2 Dec 2008 09:21:14 -0800 (PST)
From: elguillelmo <ggarrido@lsi.uned.es>
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer vs KeywordAnalyzer in Luke
In-Reply-To: <392247.30875.qm@web59302.mail.re1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ggarrido@lsi.uned.es
References: <871114.88742.qm@web59302.mail.re1.yahoo.com> <392247.30875.qm@web59302.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Kai_testing Middleton wrote:
> 
> The nutch analyzer is NutchDocumentAnalyzer.  Does anyone know how to add
> this to the Luke classpath?  I tried this kind of thing but it didn't work
> 

I'm trying to work out the same thing, to no avail. Would anybody be able to
detail how to add Nutch's Analyzer to the Luke's classpath?

What I'm doing at the moment is:

java -classpath lukeall-0.8.1.jar:/path/to/nutchAnalyzer.jar
org.getopt.luke.Luke

Thanks,

--
guille
-- 
View this message in context: http://www.nabble.com/StandardAnalyzer-vs-KeywordAnalyzer-in-Luke-tp12044434p20796392.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 18:18:02 2008
Return-Path: <java-user-return-37461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2545 invoked from network); 2 Dec 2008 18:18:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 18:18:02 -0000
Received: (qmail 9002 invoked by uid 500); 2 Dec 2008 18:18:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8966 invoked by uid 500); 2 Dec 2008 18:18:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8955 invoked by uid 99); 2 Dec 2008 18:18:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 10:18:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 18:16:38 +0000
Received: by qw-out-2122.google.com with SMTP id 5so662442qwi.53
        for <java-user@lucene.apache.org>; Tue, 02 Dec 2008 10:17:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=kfMqCt8S48bWIww48f9qCp0nUb7IZgKj8H1RMy/SUQM=;
        b=pc0bWPXV1Odd5v5uzX0UTuLj41YN4iyV2AC4RXl04tTEA+k0O7JDV3+mIN1msda99R
         zQWJSGrawBvWkiyHk6eZyNT8hE3U/d48Nv+RodFkXW9M+qGPJQsMPhiu/r5FjVCfsblG
         /QTEkFrnekl/nM4Z69EWg9dUmz0j7vZeirv9s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=m/qjoje1PoTI24580ZzQtsVxdbhYIc2cbd80jSOP0sBahv6Q3hXTGMG0OQ2dbET5wn
         i4Wiby9oc+iISi9vy1cmTnd6El78WBP49C4UZR0Yhn55I94GEWN1xUqgjZD49SNQmd5M
         GytyJI5J/5iFvtCmNl3AreTN6tz4LLQSynnrc=
Received: by 10.142.177.5 with SMTP id z5mr4995220wfe.40.1228241844994;
        Tue, 02 Dec 2008 10:17:24 -0800 (PST)
Received: by 10.143.40.11 with HTTP; Tue, 2 Dec 2008 10:17:24 -0800 (PST)
Message-ID: <5e76f3840812021017m4c33ad7fj919a3edf466b90ba@mail.gmail.com>
Date: Tue, 2 Dec 2008 13:17:24 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Merging indexes & multicore/multithreading
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Let's say I have 8 indexes on a 4 core system and I want to merge them
(inside a single vm instance).
Is it better to do a single merge of all 8, or to in parallel threads
merge in pairs, until there is only a single index left? I guess the
question involves how multi-threaded merging is and if it will take
advantage of all cores.

thanks,

-glen

-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 18:24:27 2008
Return-Path: <java-user-return-37462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11590 invoked from network); 2 Dec 2008 18:24:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 18:24:26 -0000
Received: (qmail 31855 invoked by uid 500); 2 Dec 2008 18:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31832 invoked by uid 500); 2 Dec 2008 18:24:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31821 invoked by uid 99); 2 Dec 2008 18:24:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 10:24:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 18:23:01 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id mB2INuU23893
	for <java-user@lucene.apache.org>; Tue, 2 Dec 2008 12:23:57 -0600
Message-ID: <49357D2A.9040201@getopt.org>
Date: Tue, 02 Dec 2008 19:23:38 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer vs KeywordAnalyzer in Luke
References: <871114.88742.qm@web59302.mail.re1.yahoo.com> <392247.30875.qm@web59302.mail.re1.yahoo.com> <20796392.post@talk.nabble.com>
In-Reply-To: <20796392.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

elguillelmo wrote:
> 
> Kai_testing Middleton wrote:
>> The nutch analyzer is NutchDocumentAnalyzer.  Does anyone know how to add
>> this to the Luke classpath?  I tried this kind of thing but it didn't work
>>
> 
> I'm trying to work out the same thing, to no avail. Would anybody be able to
> detail how to add Nutch's Analyzer to the Luke's classpath?
> 
> What I'm doing at the moment is:
> 
> java -classpath lukeall-0.8.1.jar:/path/to/nutchAnalyzer.jar
> org.getopt.luke.Luke

Well ... It could be done, but not easily.

First, NutchDocumentAnalyzer is dependent on other Nutch classes (so you 
need nutch-${version}.jar) but they in turn depend on Hadoop (so you 
need hadoop-core*.jar), which in turn depends on a dozen or so other 
jars ... All of this needs to be added to classpath.

Second, this analyzer doesn't have a no-args constructor, it needs a 
Hadoop Configuration argument. Luke can handle only no-args or single 
String arg constructors. I would have to change the way Analyzers are 
instantiated in Luke so that you can pass an existing instance (e.g. one 
that you created in the scripting plugin context).

Third, NutchDocumentAnalyzer uses CommonGrams, which in turn _require_ 
the presence of a common-grams.utf8 resource on the classpath.

To summarize: unless you want to get your hands dirty with Luke 
internals it can't be done.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 18:54:54 2008
Return-Path: <java-user-return-37463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19627 invoked from network); 2 Dec 2008 18:54:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 18:54:54 -0000
Received: (qmail 85029 invoked by uid 500); 2 Dec 2008 18:54:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85003 invoked by uid 500); 2 Dec 2008 18:54:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84939 invoked by uid 99); 2 Dec 2008 18:54:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 10:54:58 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport5.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 18:53:29 +0000
X-SBRS: None
X-MID: 105296793
Received: from fmd3tj002.fda.gov ([10.160.10.77])
  by ironport5.fda.gov with ESMTP; 02 Dec 2008 13:53:14 -0500
Received: from FMD3VS012.fda.gov ([10.160.10.63]) by FMD3TJ002.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 2 Dec 2008 13:53:09 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Merging indexes & multicore/multithreading
Date: Tue, 2 Dec 2008 13:53:08 -0500
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73B33@FMD3VS012.fda.gov>
In-Reply-To: <5e76f3840812021017m4c33ad7fj919a3edf466b90ba@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Merging indexes & multicore/multithreading
Thread-Index: AclUqlb8lcp1l2tjRUOFi9pH5Ea0xQABK7Bg
References: <5e76f3840812021017m4c33ad7fj919a3edf466b90ba@mail.gmail.com>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Dec 2008 18:53:09.0200 (UTC) FILETIME=[37FB5D00:01C954AF]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
Our experience is, if the number of cores equal number of active
threads, then it performs optimal using single JVM.

Both on Windows XP and CentOS 5.2, with Lucene 2.3.2

Sincerely,
Sithu D Sudarsan

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

-----Original Message-----
From: Glen Newton [mailto:glen.newton@gmail.com]=20
Sent: Tuesday, December 02, 2008 1:17 PM
To: java-user@lucene.apache.org
Subject: Merging indexes & multicore/multithreading

Let's say I have 8 indexes on a 4 core system and I want to merge them
(inside a single vm instance).
Is it better to do a single merge of all 8, or to in parallel threads
merge in pairs, until there is only a single index left? I guess the
question involves how multi-threaded merging is and if it will take
advantage of all cores.

thanks,

-glen

--=20

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 19:06:19 2008
Return-Path: <java-user-return-37464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22508 invoked from network); 2 Dec 2008 19:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 19:06:19 -0000
Received: (qmail 6787 invoked by uid 500); 2 Dec 2008 19:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6753 invoked by uid 500); 2 Dec 2008 19:06:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6742 invoked by uid 99); 2 Dec 2008 19:06:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 11:06:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 19:04:55 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1224805ywj.5
        for <java-user@lucene.apache.org>; Tue, 02 Dec 2008 11:05:40 -0800 (PST)
Received: by 10.90.96.15 with SMTP id t15mr1305600agb.37.1228244740101;
        Tue, 02 Dec 2008 11:05:40 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 34sm6519242agc.6.2008.12.02.11.05.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 02 Dec 2008 11:05:39 -0800 (PST)
Message-Id: <1FA15019-4090-4736-8CAF-89275F5735E5@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76f3840812021017m4c33ad7fj919a3edf466b90ba@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Merging indexes & multicore/multithreading
Date: Tue, 2 Dec 2008 14:05:34 -0500
References: <5e76f3840812021017m4c33ad7fj919a3edf466b90ba@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


With ConcurrentMergeScheduler, adding all indexes at once to a single  
IndexWriter will use multiple threads to do the merging, assuming you  
have enough total segments that need merging (> 2 X mergeFactor will  
use 2 threads; > 3 X mergeFactor will use 3, etc.; CMS defaults to max  
3 merge threads at once).

I think merging is mainly IO bound, so you may only see a win using  
multiple threads if your IO system has concurrency to exploit.

Try both and post back the results :)

Mike

Glen Newton wrote:

> Let's say I have 8 indexes on a 4 core system and I want to merge them
> (inside a single vm instance).
> Is it better to do a single merge of all 8, or to in parallel threads
> merge in pairs, until there is only a single index left? I guess the
> question involves how multi-threaded merging is and if it will take
> advantage of all cores.
>
> thanks,
>
> -glen
>
> -- 
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 19:13:46 2008
Return-Path: <java-user-return-37465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23916 invoked from network); 2 Dec 2008 19:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 19:13:45 -0000
Received: (qmail 17896 invoked by uid 500); 2 Dec 2008 19:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17870 invoked by uid 500); 2 Dec 2008 19:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17859 invoked by uid 99); 2 Dec 2008 19:13:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 11:13:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 19:12:21 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3845677rvb.5
        for <java-user@lucene.apache.org>; Tue, 02 Dec 2008 11:13:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=JPPXegYMbUg4+WPlkjrK4ZmbapWZ/VvobDzGjZFKuWg=;
        b=jDL3jnO8NX3kP+3Ai/mNNdAvXUrf7HgLkGh35dNRxtXB7upXV+qyYDpOF9bx+Dh6c7
         HugcpDEe2tgD+raarumeeFPDc7ipQs+0dewNsTdzTv6NK0p05qekeXoT9ixj94iIZpi1
         duMQfQ9YodFfOAOPRvM4neagODcAfh8VE71DA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=ROrEbHss5nlHBTHvS6GusNcAez80iiT7hu5wuJmzcTvezwPk7j7LqTCeCsoRlTmHnJ
         yeAuveVFchrkKjXmedwRYHaNmlSDibzH1jaWJHKXv+90LzkrjZWL7eRnUt7lXmP0DDPX
         0sxnMoYgB9wVRDUBsTYKnmNhtp73zlK8e8NwI=
Received: by 10.141.176.13 with SMTP id d13mr5884457rvp.231.1228245188684;
        Tue, 02 Dec 2008 11:13:08 -0800 (PST)
Received: by 10.141.167.5 with HTTP; Tue, 2 Dec 2008 11:13:08 -0800 (PST)
Message-ID: <bf1404350812021113m6f7bd276gd34845dc8486cfce@mail.gmail.com>
Date: Tue, 2 Dec 2008 14:13:08 -0500
From: Ariel <isaacrc82@gmail.com>
To: "lucene user" <java-user@lucene.apache.org>
Subject: I would want to know more about the lucene implementation in C++
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36926_11276686.1228245188685"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36926_11276686.1228245188685
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everybody:
I have seen the lucene project for C++ has been abandoned, could you tell me
if there is another similar implementation of java lucene in C++ ???

------=_Part_36926_11276686.1228245188685--

From java-user-return-37466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 02 22:43:13 2008
Return-Path: <java-user-return-37466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17628 invoked from network); 2 Dec 2008 22:43:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2008 22:43:13 -0000
Received: (qmail 43043 invoked by uid 500); 2 Dec 2008 22:43:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42027 invoked by uid 500); 2 Dec 2008 22:43:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42016 invoked by uid 99); 2 Dec 2008 22:43:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 14:43:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 22:41:48 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 522B671C27E; Tue,  2 Dec 2008 14:42:05 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4E8A471C15C
	for <java-user@lucene.apache.org>; Tue,  2 Dec 2008 14:42:05 -0800 (PST)
Date: Tue, 2 Dec 2008 14:42:05 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Query time document group boosting
In-Reply-To: <DDF845E9-13FC-4AF0-8B76-B6AE4C2C5DC1@gmail.com>
Message-ID: <Pine.LNX.4.62.0812021429460.27864@radix.cryptio.net>
References: <1227714863.25256.38.camel@pc286> <B7D0017E-C6A1-4FB8-82A4-4509806062B6@gmail.com>
 <1227777358.25256.70.camel@pc286> <DDF845E9-13FC-4AF0-8B76-B6AE4C2C5DC1@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > "foo AND (
: >  groupboost_A:dummy^10 OR
: >  groupboost_B:dummy OR
: >  groupboost_C:dummy^0.1 OR
: >  ...
: >  groupboost_Z:dummy
: > )"
: > 
: > With that query, it seems that only documents matching foo will result
: > in a hit and be scored?
: 
: Someone else than me needs to answer this. I know there is no optimization of
: boolean clauses, that is why I'm saying this: it is possible that the boolean
: query weight actually will be visiting all the inner clauses even though "foo"
: was not matched, i.e. all documents in the index are visited but might not all
: be scored.

No, skipTo in the Scorer (ConjunctionScorer i believe) should ensure that 
none of the groupboost clauses will be visited for any doc that doesn't 
already match foo.

i believe the pathological case you are talking about would be something 
like this...

   (docnum_is_odd AND foo) AND (docnum_is_even AND bar)

assuming every doc matches either docnum_is_even or docnum_is_odd, but no 
doc matches both, then this query will match no documents, but every 
document will be visted by the scorer.

: A cosmetic remark, I would personally choose a single field for the boosts and
: then one token per source. (groupboost:A^10 groupboost:B^1 groupboost:C^0.1).

that's a key improvement, as it helps keep the number of unique fields 
down, even if the number of sources grows without bounds.  make sure you 
omitNorms on your groupboost field, and when buiding your various boolean 
queries, consider disabling the coord (check the docs to understand why 
that might make sense)

: > > I think you are looking for CustomScoreQuery.

not neccessarily ... CustomScoreQueries make a lot of sense when you want 
the score to be a function of the field value, but for simple "exists or 
not" fields a BooleanQuery works just as well.

(if you wanted to index a weight per source field in each doc, then a 
CustomScoreQuery would certianly make more sense)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 01:35:20 2008
Return-Path: <java-user-return-37467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7204 invoked from network); 3 Dec 2008 01:35:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 01:35:19 -0000
Received: (qmail 16762 invoked by uid 500); 3 Dec 2008 01:35:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16723 invoked by uid 500); 3 Dec 2008 01:35:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16712 invoked by uid 99); 3 Dec 2008 01:35:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 17:35:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 01:33:55 +0000
Received: by qyk13 with SMTP id 13so4518018qyk.5
        for <java-user@lucene.apache.org>; Tue, 02 Dec 2008 17:33:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=2u6DUZcyic1TVsST2sxAovB9h6B6+bpeoIYlIPX+688=;
        b=KjPetLz1XfgRkCweicPV7MkFGG1co5mlXLeh0dAT3r60lbIBhjWi3AqRH0NZYMlZ5d
         te8DW2N52KP1moJKD5Svi/hM7LSj2LbFPkzBIy43iXAFBflB3fZWhwiVFNhbb1dTSNjJ
         ir4FjfbnwouQTZQrxPlxX4TvPg6MGmSplBdxs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=Fbk+aokinG3inFpN2Lh5fAagHuScOxCnejq1tWvAottb+8VvPtAywKUfg0LFAmJl3W
         zzwr6oJ1PGnp7Ae6AsAN5+qN6Z2iNMLr0qR0UQPrhqQuZQVOwXZzJewp2aw31wfEzD70
         dHjMTPiK8OqsEKPg4dgsF+ZJx6MAfYlUdTYiM=
Received: by 10.214.241.8 with SMTP id o8mr12588268qah.360.1228268022365;
        Tue, 02 Dec 2008 17:33:42 -0800 (PST)
Received: from ?10.154.22.90? ([32.141.247.37])
        by mx.google.com with ESMTPS id 8sm3995818ywg.43.2008.12.02.17.33.39
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 02 Dec 2008 17:33:41 -0800 (PST)
Message-Id: <0860D69B-DDAD-464B-B7B1-609AEBB1FF43@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <1228225662.7735.2.camel@nuraku>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: # of fields, performance
Date: Tue, 2 Dec 2008 20:32:50 -0500
References: <1228225662.7735.2.camel@nuraku>
X-Virus-Checked: Checked by ClamAV on apache.org

There is not much impact as long as you turn off Norms for the  
majority of them.

- Mark


On Dec 2, 2008, at 8:47 AM, Darren Govoni <darren@ontrenet.com> wrote:

> Hi,
>  I saw this question asked before without a clear answer. Pardons if I
> missed it in the archive elsewhere.
>
> Is there a serious degradation of performance when using high number  
> of
> fields per document? Like 100's? Is the impact more on the write than
> the read?
>
> What are the performance characteristics with a high number of fields
> and is anyone using indexes this way?
>
> thank you for any thoughts.
>
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 06:17:03 2008
Return-Path: <java-user-return-37468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51785 invoked from network); 3 Dec 2008 06:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 06:17:00 -0000
Received: (qmail 13679 invoked by uid 500); 3 Dec 2008 06:17:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13651 invoked by uid 500); 3 Dec 2008 06:17:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13635 invoked by uid 99); 3 Dec 2008 06:17:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 22:17:02 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 06:15:34 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1705354wag.5
        for <java-user@lucene.apache.org>; Tue, 02 Dec 2008 22:16:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=nCMhUIUvKp95I7vIeuoEHTglIxypL/u9atZZi8glF70=;
        b=L/SvbMAtAyyGd/fCiUQNqio3qvr7m/Df+Dp5UUx+HKrf2JvaDpaIZgWS8JOvDRXXd1
         BIlawUX+aXBqmXealSSzDEVTpYfsucfG/s4uNm5xILB/gYT+lkhqCO0rgGi579TQSMe5
         j43B7zYqKf8WDCRf3BaGEqs2SRFBEch1jT9pk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=nc5uz32V/KFDiriCOiDzjewPK9PB6X1GdEISIXBbe/lKBs62rTmwDigZC7n6HLuN64
         0Y7tK7nb1QSg4A9RJYyik5/sxanddxzEs8H8HrkczDlNzma4Vo6Im9z+C1rQXXfrLLc1
         6OeXGeyBabMk2zzlZvQXKJ2M0Tazo6GXtVR64=
Received: by 10.115.79.8 with SMTP id g8mr7914467wal.65.1228284972361;
        Tue, 02 Dec 2008 22:16:12 -0800 (PST)
Received: by 10.114.147.5 with HTTP; Tue, 2 Dec 2008 22:16:12 -0800 (PST)
Message-ID: <6d6cf45b0812022216i29e94110q29372c575401ea60@mail.gmail.com>
Date: Tue, 2 Dec 2008 22:16:12 -0800
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing Names in Lucene -- Thomas = Tom, etc
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68083_16407416.1228284972323"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68083_16407416.1228284972323
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,  I am indexing documents with a field that contains the first and
last name of people. It is working wonderfully with a slight issue: if
Thomas is indexed for a document, I would like searches for Tom to match
that document. I am sure this is a common problem that many of you must have
addressed, but I was unable to find anything in the archives or on Google.
Thanks in advance for the guidance.


Regards,
Khawaja Shams

------=_Part_68083_16407416.1228284972323--

From java-user-return-37469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 06:33:48 2008
Return-Path: <java-user-return-37469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65228 invoked from network); 3 Dec 2008 06:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 06:33:48 -0000
Received: (qmail 25952 invoked by uid 500); 3 Dec 2008 06:33:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25922 invoked by uid 500); 3 Dec 2008 06:33:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25911 invoked by uid 99); 3 Dec 2008 06:33:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 02 Dec 2008 22:33:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 06:32:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L7lIN-00041J-Qm
	for java-user@lucene.apache.org; Tue, 02 Dec 2008 22:33:11 -0800
Message-ID: <20807546.post@talk.nabble.com>
Date: Tue, 2 Dec 2008 22:33:11 -0800 (PST)
From: Ravichandra <ravichandra.thiruveedhula@fmr.com>
To: java-user@lucene.apache.org
Subject: Problem with special charecters
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ravichandra.thiruveedhula@fmr.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi

I am having problems with searching for special charecters like %,*,+,- etc.
I am using standard analyzer. I create queries using the query constructor.

I read in the forums and tried with QueryParser.escpae and parse methods,
but the problem is if I have two fields as "ABC+S" and "ABC-S" and when i
search for "ABC+S", the order of fields is "ABC+S","ABC-S", and when we
search for "ABC-S", then also the order is "ABC+S","ABC-S". 

What I have seen is when we escape the search string and then parse it using
query parser, the generated query doesn't contain the special charecter '+',
or '-'.

Please suggest me how to deal with special charecters.

Lucene : 2.4

Thanks
Ravichandra

-----
Thanks
Ravichandra
-- 
View this message in context: http://www.nabble.com/Problem-with-special-charecters-tp20807546p20807546.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 09:18:41 2008
Return-Path: <java-user-return-37470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24423 invoked from network); 3 Dec 2008 09:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 09:18:41 -0000
Received: (qmail 48280 invoked by uid 500); 3 Dec 2008 09:18:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48241 invoked by uid 500); 3 Dec 2008 09:18:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48230 invoked by uid 99); 3 Dec 2008 09:18:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 01:18:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 09:17:17 +0000
Received: by qyk13 with SMTP id 13so4676675qyk.5
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 01:17:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=EDXB1H1gqIN6hL6Zjz1SN5ks3tybQ29SsXGToA3jVT0=;
        b=RJui+hCw2RNEwYlccT7W1jOuzcmtwYRgV4YvjBBM+D0K7akJvYfgSnhSLr33NVsqMg
         TsHTqJG8cAo4a0uxYDp1hz1lrLSOzOoa7ixSc7e9uonjuxu26x/xOQadyVVXcySdBSu4
         XKGrN/jvu1CJ17GvJ35ei/ZOmWeFGMFmt80KM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=ENrMeX3wj7ockjiy/hq6TwgQ6PH8sQ8wv3btvdyJKl8Ng53YRZ4vQlVOORWkUBO1ND
         d+MQrTGs57NDy8LEAg43vC+iv8MS1MIbJ9dJ84Eqfk9REyi4JWpuafFNpcdgdoQKaJia
         Qo7i4xFbz5SbCox2p/H4ojdBF9OjVJJQKjE3g=
Received: by 10.214.80.14 with SMTP id d14mr12965763qab.62.1228295824588;
        Wed, 03 Dec 2008 01:17:04 -0800 (PST)
Received: by 10.214.149.16 with HTTP; Wed, 3 Dec 2008 01:17:04 -0800 (PST)
Message-ID: <8c4e68610812030117s49b53ee6tf9cc1cef400133de@mail.gmail.com>
Date: Wed, 3 Dec 2008 09:17:04 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Names in Lucene -- Thomas = Tom, etc
In-Reply-To: <6d6cf45b0812022216i29e94110q29372c575401ea60@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6d6cf45b0812022216i29e94110q29372c575401ea60@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


To get from Thomas to Tom you'll need to use synonyms.  For Thom you
would have been able to use prefixes or wild cards.

If you google for lucene synonyms you'll find loads of stuff.  Also, I
believe that Solr has built in support for synonyms.


--
Ian.


On Wed, Dec 3, 2008 at 6:16 AM, Khawaja Shams <ksshams@gmail.com> wrote:
> Hello,  I am indexing documents with a field that contains the first and
> last name of people. It is working wonderfully with a slight issue: if
> Thomas is indexed for a document, I would like searches for Tom to match
> that document. I am sure this is a common problem that many of you must have
> addressed, but I was unable to find anything in the archives or on Google.
> Thanks in advance for the guidance.
>
>
> Regards,
> Khawaja Shams

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 09:31:16 2008
Return-Path: <java-user-return-37471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33079 invoked from network); 3 Dec 2008 09:31:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 09:31:15 -0000
Received: (qmail 59481 invoked by uid 500); 3 Dec 2008 09:31:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59451 invoked by uid 500); 3 Dec 2008 09:31:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59440 invoked by uid 99); 3 Dec 2008 09:31:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 01:31:21 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 09:29:50 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2848776fkq.5
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 01:30:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=6LjZSmL9SsEtFixZEsxFuvKXes1hyvFVjEXfmTJxe4I=;
        b=SZkD3F2JOBzcGSapdz+WHRnhJO7z1PGycUNtRbH3czrbJc/j6wKoRN/vOn8QmLTKoj
         p9ym/6ne/C7fjGH5Mbwp4oJr70/EOn/kfuAWEpyv3S9J23G1oRN0KL6ogBsAkj2+nBD2
         6pX1javG3yqOCaFLpgQqP5mEDBIcE7NvLIccA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=mRWIR+lslsukSIv5MYpqB3esM1ocYWlxRoAm9L8+UW1qIHQmNzCql8mbfVNNKl32Mm
         3k7N+NLbuz92p+HCOcUcHpHT2ZxwZHzkub8BG0BwDEM9QtlGOu+D+SbXw7L4xScutRFs
         P8DxhCbU+/sKfS8hT/Oe0PzGIogZvjvlRHUWA=
Received: by 10.103.40.5 with SMTP id s5mr5824210muj.4.1228296626718;
        Wed, 03 Dec 2008 01:30:26 -0800 (PST)
Received: by 10.103.245.16 with HTTP; Wed, 3 Dec 2008 01:30:26 -0800 (PST)
Message-ID: <295da8fe0812030130l2e46d4c6ye0beaa1b242626f2@mail.gmail.com>
Date: Wed, 3 Dec 2008 15:00:26 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with special charecters
In-Reply-To: <20807546.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_241_19339429.1228296626684"
References: <20807546.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_241_19339429.1228296626684
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

try manually escaping the search string, adding "\" in front of the special
characters. (you can do this easily by using string replace)
This will make sure that your query contains the special characters


Prabin
toostep.com

On Wed, Dec 3, 2008 at 12:03 PM, Ravichandra <
ravichandra.thiruveedhula@fmr.com> wrote:

>
> Hi
>
> I am having problems with searching for special charecters like %,*,+,-
> etc.
> I am using standard analyzer. I create queries using the query constructor.
>
> I read in the forums and tried with QueryParser.escpae and parse methods,
> but the problem is if I have two fields as "ABC+S" and "ABC-S" and when i
> search for "ABC+S", the order of fields is "ABC+S","ABC-S", and when we
> search for "ABC-S", then also the order is "ABC+S","ABC-S".
>
> What I have seen is when we escape the search string and then parse it
> using
> query parser, the generated query doesn't contain the special charecter
> '+',
> or '-'.
>
> Please suggest me how to deal with special charecters.
>
> Lucene : 2.4
>
> Thanks
> Ravichandra
>
> -----
> Thanks
> Ravichandra
> --
> View this message in context:
> http://www.nabble.com/Problem-with-special-charecters-tp20807546p20807546.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_241_19339429.1228296626684--

From java-user-return-37472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 09:42:49 2008
Return-Path: <java-user-return-37472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40955 invoked from network); 3 Dec 2008 09:42:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 09:42:48 -0000
Received: (qmail 73060 invoked by uid 500); 3 Dec 2008 09:42:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73034 invoked by uid 500); 3 Dec 2008 09:42:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73022 invoked by uid 99); 3 Dec 2008 09:42:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 01:42:51 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.124] (HELO smtp141.mail.mud.yahoo.com) (209.191.107.124)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Dec 2008 09:41:20 +0000
Received: (qmail 59904 invoked from network); 3 Dec 2008 09:42:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=njiTPI3RrUHuTFytQ60j4t+g4jg71dFe0wDBMDrCthfDfPouAysjSY6+nHc0OPlAZRZoa4mS10SuxKxWXxoNx6TzKblaS6x3LGwdOcqoFnKAlHAhahO0xIfljQyaLf6tN33+qLILXdxgy2immCxTyOO9D/QdR9vr08v8xGz1L8k=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp141.mail.mud.yahoo.com with SMTP; 3 Dec 2008 09:42:05 -0000
X-YMail-OSG: 6fmF45AVM1kk.mlmRY9_HmEAf0roUC5zGZmpGFHWQQ5NI8RuKqYe59Zv1epy7IlBJO9O5Bg3cefojeFWX5CwG20jxPr9QEY23KzUMQ.fpRgF8uPygespKr9ARqB6BcHuq2Ro7aQtFtGemstGMTgZCM1p9SVHfbwc0nZBv4s_IwTXdjAusDNNTy_.gkasRA--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <120201c9552b$67265590$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <6d6cf45b0812022216i29e94110q29372c575401ea60@mail.gmail.com>
Subject: Re: Indexing Names in Lucene -- Thomas = Tom, etc
Date: Wed, 3 Dec 2008 15:12:02 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

If you want to query for Tom, then you need to index the value Tom. Create 
one more field as Alias or add alias name as part of name field.

Regards
Ganesh

----- Original Message ----- 
From: "Khawaja Shams" <ksshams@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, December 03, 2008 11:46 AM
Subject: Indexing Names in Lucene -- Thomas = Tom, etc


> Hello,  I am indexing documents with a field that contains the first and
> last name of people. It is working wonderfully with a slight issue: if
> Thomas is indexed for a document, I would like searches for Tom to match
> that document. I am sure this is a common problem that many of you must 
> have
> addressed, but I was unable to find anything in the archives or on Google.
> Thanks in advance for the guidance.
>
>
> Regards,
> Khawaja Shams
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 09:48:31 2008
Return-Path: <java-user-return-37473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45333 invoked from network); 3 Dec 2008 09:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 09:48:31 -0000
Received: (qmail 83726 invoked by uid 500); 3 Dec 2008 09:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83620 invoked by uid 500); 3 Dec 2008 09:48:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83609 invoked by uid 99); 3 Dec 2008 09:48:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 01:48:36 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 09:47:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L7oKm-000330-I2
	for java-user@lucene.apache.org; Wed, 03 Dec 2008 01:47:52 -0800
Message-ID: <20809771.post@talk.nabble.com>
Date: Wed, 3 Dec 2008 01:47:52 -0800 (PST)
From: Ravichandra <ravichandra.thiruveedhula@fmr.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with special charecters
In-Reply-To: <295da8fe0812030130l2e46d4c6ye0beaa1b242626f2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ravichandra.thiruveedhula@fmr.com
References: <20807546.post@talk.nabble.com> <295da8fe0812030130l2e46d4c6ye0beaa1b242626f2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi

I tried that approach, I did used escaping using the "\", and the query has
the special charecter, but i got no results that time.

What I found out was when I use Standard Analyzer on "ABC+S", the terms
generated are "ABC" and "S" and '+' is getting lost.
When I used whitespaceAnalyzer or keywordAnalyzer (or use standardanalyzer
but don't analyze this field), it is working, but it is case sensitive.

Can anybody suggest me how to use Whitespaceanalyzer/keywordanalyzer along
with lowecase filter
or 
how to make Standardanalyzer not to generate tokens based on these special
chrecters.

Thanks
Ravichandra


prabin meitei wrote:
> 
> try manually escaping the search string, adding "\" in front of the
> special
> characters. (you can do this easily by using string replace)
> This will make sure that your query contains the special characters
> 
> 
> Prabin
> toostep.com
> 
> On Wed, Dec 3, 2008 at 12:03 PM, Ravichandra <
> ravichandra.thiruveedhula@fmr.com> wrote:
> 
>>
>> Hi
>>
>> I am having problems with searching for special charecters like %,*,+,-
>> etc.
>> I am using standard analyzer. I create queries using the query
>> constructor.
>>
>> I read in the forums and tried with QueryParser.escpae and parse methods,
>> but the problem is if I have two fields as "ABC+S" and "ABC-S" and when i
>> search for "ABC+S", the order of fields is "ABC+S","ABC-S", and when we
>> search for "ABC-S", then also the order is "ABC+S","ABC-S".
>>
>> What I have seen is when we escape the search string and then parse it
>> using
>> query parser, the generated query doesn't contain the special charecter
>> '+',
>> or '-'.
>>
>> Please suggest me how to deal with special charecters.
>>
>> Lucene : 2.4
>>
>> Thanks
>> Ravichandra
>>
>> -----
>> Thanks
>> Ravichandra
>> --
>> View this message in context:
>> http://www.nabble.com/Problem-with-special-charecters-tp20807546p20807546.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 


-----
Thanks
Ravichandra
-- 
View this message in context: http://www.nabble.com/Problem-with-special-charecters-tp20807546p20809771.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 09:58:01 2008
Return-Path: <java-user-return-37474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52939 invoked from network); 3 Dec 2008 09:58:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 09:58:01 -0000
Received: (qmail 92503 invoked by uid 500); 3 Dec 2008 09:58:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92469 invoked by uid 500); 3 Dec 2008 09:58:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92458 invoked by uid 99); 3 Dec 2008 09:58:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 01:58:06 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 09:56:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L7oTy-0003Pm-OW
	for java-user@lucene.apache.org; Wed, 03 Dec 2008 01:57:22 -0800
Message-ID: <20809887.post@talk.nabble.com>
Date: Wed, 3 Dec 2008 01:57:22 -0800 (PST)
From: Ravichandra <ravichandra.thiruveedhula@fmr.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with special charecters
In-Reply-To: <295da8fe0812030130l2e46d4c6ye0beaa1b242626f2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ravichandra.thiruveedhula@fmr.com
References: <20807546.post@talk.nabble.com> <295da8fe0812030130l2e46d4c6ye0beaa1b242626f2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi 

I tried that approach, I did used escaping using the "\", and the query has
the special charecter, but i got no results that time. 

What I found out was when I use Standard Analyzer on "ABC+S", the terms
generated are "ABC" and "S" and '+' is getting lost. 
When I used whitespaceAnalyzer or keywordAnalyzer (or use standardanalyzer
but don't analyze this field), it is working, but it is case sensitive. 

Can anybody suggest me how to use Whitespaceanalyzer/keywordanalyzer along
with lowecase filter 
or 
how to make Standardanalyzer not to generate tokens based on these special
chrecters. 

Thanks 
Ravichandra 


prabin meitei wrote:
> 
> try manually escaping the search string, adding "\" in front of the
> special
> characters. (you can do this easily by using string replace)
> This will make sure that your query contains the special characters
> 
> 
> Prabin
> toostep.com
> 
> On Wed, Dec 3, 2008 at 12:03 PM, Ravichandra <
> ravichandra.thiruveedhula@fmr.com> wrote:
> 
>>
>> Hi
>>
>> I am having problems with searching for special charecters like %,*,+,-
>> etc.
>> I am using standard analyzer. I create queries using the query
>> constructor.
>>
>> I read in the forums and tried with QueryParser.escpae and parse methods,
>> but the problem is if I have two fields as "ABC+S" and "ABC-S" and when i
>> search for "ABC+S", the order of fields is "ABC+S","ABC-S", and when we
>> search for "ABC-S", then also the order is "ABC+S","ABC-S".
>>
>> What I have seen is when we escape the search string and then parse it
>> using
>> query parser, the generated query doesn't contain the special charecter
>> '+',
>> or '-'.
>>
>> Please suggest me how to deal with special charecters.
>>
>> Lucene : 2.4
>>
>> Thanks
>> Ravichandra
>>
>> -----
>> Thanks
>> Ravichandra
>> --
>> View this message in context:
>> http://www.nabble.com/Problem-with-special-charecters-tp20807546p20807546.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 


-----
Thanks
Ravichandra
-- 
View this message in context: http://www.nabble.com/Problem-with-special-charecters-tp20807546p20809887.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 10:00:12 2008
Return-Path: <java-user-return-37475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54900 invoked from network); 3 Dec 2008 10:00:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 10:00:12 -0000
Received: (qmail 95571 invoked by uid 500); 3 Dec 2008 10:00:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94924 invoked by uid 500); 3 Dec 2008 10:00:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94913 invoked by uid 99); 3 Dec 2008 10:00:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 02:00:17 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 09:58:38 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1422614eyi.53
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 01:59:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jgSB3q7PASMI7Wh9aps27v+fQ9Vl3DUYFay+D4/WCdc=;
        b=BwNnmUbpJJl1fLg0RRN54WKdNqfrNzdk/ve8V6xpiSFjmIjSckHpFBUpjVPxLNylDH
         b5y/mH3ns2/RDdtotIxS0mfRbE5c3RedK2ugPoEwK3q91IjgnoeLv5QYzW7nF2378HCZ
         EFhu3uIUPDTgk0X03gkJLHp6rzaokCYpCgYDQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=VeyAIm43PRaWPQYBbvMY7p+tdQ2J3mtlmKijE8/gZKSGoZBkkQo7Qfdzv43JgJQ4Gt
         L06zZRFmpTPAEHaznAXbJ1oI/H4C+YrGRIN0nizGZQdRgcRsG9hOGQjqX8ZmNKO+oqrX
         ZlMBu0JcJBo8IuB1TccQbNUt2PPpdONdf/cqc=
Received: by 10.103.178.17 with SMTP id f17mr5838912mup.45.1228298354333;
        Wed, 03 Dec 2008 01:59:14 -0800 (PST)
Received: by 10.103.245.16 with HTTP; Wed, 3 Dec 2008 01:59:14 -0800 (PST)
Message-ID: <295da8fe0812030159k63a3b153sbc1d0ddc7dc6d7f1@mail.gmail.com>
Date: Wed, 3 Dec 2008 15:29:14 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with special charecters
In-Reply-To: <20809771.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_361_27452508.1228298354304"
References: <20807546.post@talk.nabble.com>
	 <295da8fe0812030130l2e46d4c6ye0beaa1b242626f2@mail.gmail.com>
	 <20809771.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_361_27452508.1228298354304
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

use your own analyzer. Write a class extending lucene analyzer.  you can
override the  tokenStream method to include whatever you want and exclude
what you don't want.

eg. of a token stream method which may work for you
 public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream result = new StopFilter(
                    new LowerCaseFilter(
                        new WhitespaceTokenizer(reader)));
        return result;
    }

Prabin
toostep.com

On Wed, Dec 3, 2008 at 3:17 PM, Ravichandra <
ravichandra.thiruveedhula@fmr.com> wrote:

>
> Hi
>
> I tried that approach, I did used escaping using the "\", and the query has
> the special charecter, but i got no results that time.
>
> What I found out was when I use Standard Analyzer on "ABC+S", the terms
> generated are "ABC" and "S" and '+' is getting lost.
> When I used whitespaceAnalyzer or keywordAnalyzer (or use standardanalyzer
> but don't analyze this field), it is working, but it is case sensitive.
>
> Can anybody suggest me how to use Whitespaceanalyzer/keywordanalyzer along
> with lowecase filter
> or
> how to make Standardanalyzer not to generate tokens based on these special
> chrecters.
>
> Thanks
> Ravichandra
>
>
> prabin meitei wrote:
> >
> > try manually escaping the search string, adding "\" in front of the
> > special
> > characters. (you can do this easily by using string replace)
> > This will make sure that your query contains the special characters
> >
> >
> > Prabin
> > toostep.com
> >
> > On Wed, Dec 3, 2008 at 12:03 PM, Ravichandra <
> > ravichandra.thiruveedhula@fmr.com> wrote:
> >
> >>
> >> Hi
> >>
> >> I am having problems with searching for special charecters like %,*,+,-
> >> etc.
> >> I am using standard analyzer. I create queries using the query
> >> constructor.
> >>
> >> I read in the forums and tried with QueryParser.escpae and parse
> methods,
> >> but the problem is if I have two fields as "ABC+S" and "ABC-S" and when
> i
> >> search for "ABC+S", the order of fields is "ABC+S","ABC-S", and when we
> >> search for "ABC-S", then also the order is "ABC+S","ABC-S".
> >>
> >> What I have seen is when we escape the search string and then parse it
> >> using
> >> query parser, the generated query doesn't contain the special charecter
> >> '+',
> >> or '-'.
> >>
> >> Please suggest me how to deal with special charecters.
> >>
> >> Lucene : 2.4
> >>
> >> Thanks
> >> Ravichandra
> >>
> >> -----
> >> Thanks
> >> Ravichandra
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Problem-with-special-charecters-tp20807546p20807546.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
>
> -----
> Thanks
> Ravichandra
> --
> View this message in context:
> http://www.nabble.com/Problem-with-special-charecters-tp20807546p20809771.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_361_27452508.1228298354304--

From java-user-return-37476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 10:00:31 2008
Return-Path: <java-user-return-37476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55259 invoked from network); 3 Dec 2008 10:00:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 10:00:31 -0000
Received: (qmail 96732 invoked by uid 500); 3 Dec 2008 10:00:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96710 invoked by uid 500); 3 Dec 2008 10:00:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96699 invoked by uid 99); 3 Dec 2008 10:00:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 02:00:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 09:59:07 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1356062yxj.5
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 01:59:53 -0800 (PST)
Received: by 10.90.103.13 with SMTP id a13mr7216242agc.8.1228298392925;
        Wed, 03 Dec 2008 01:59:52 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 7sm7369482agc.14.2008.12.03.01.59.51
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 03 Dec 2008 01:59:52 -0800 (PST)
Message-Id: <B737A3AE-DFA9-4FA6-9891-92E44E334BB8@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <0860D69B-DDAD-464B-B7B1-609AEBB1FF43@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: # of fields, performance
Date: Wed, 3 Dec 2008 04:59:48 -0500
References: <1228225662.7735.2.camel@nuraku> <0860D69B-DDAD-464B-B7B1-609AEBB1FF43@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Also, if you do some testing of this, please post back the results if  
you can.

As you've noticed, this (how Lucene performs with a great many /  
variable fields per doc) isn't a well explored area yet...

Mike

Mark Miller wrote:

> There is not much impact as long as you turn off Norms for the  
> majority of them.
>
> - Mark
>
>
> On Dec 2, 2008, at 8:47 AM, Darren Govoni <darren@ontrenet.com> wrote:
>
>> Hi,
>> I saw this question asked before without a clear answer. Pardons if I
>> missed it in the archive elsewhere.
>>
>> Is there a serious degradation of performance when using high  
>> number of
>> fields per document? Like 100's? Is the impact more on the write than
>> the read?
>>
>> What are the performance characteristics with a high number of fields
>> and is anyone using indexes this way?
>>
>> thank you for any thoughts.
>>
>> Darren
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 10:23:18 2008
Return-Path: <java-user-return-37477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73610 invoked from network); 3 Dec 2008 10:23:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 10:23:18 -0000
Received: (qmail 19299 invoked by uid 500); 3 Dec 2008 10:23:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19267 invoked by uid 500); 3 Dec 2008 10:23:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19256 invoked by uid 99); 3 Dec 2008 10:23:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 02:23:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 10:21:54 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.311.2; Wed, 3 Dec 2008 11:22:19 +0100
Subject: Re: Query time document group boosting
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <Pine.LNX.4.62.0812021429460.27864@radix.cryptio.net>
References: <1227714863.25256.38.camel@pc286>
	 <B7D0017E-C6A1-4FB8-82A4-4509806062B6@gmail.com>
	 <1227777358.25256.70.camel@pc286>
	 <DDF845E9-13FC-4AF0-8B76-B6AE4C2C5DC1@gmail.com>
	 <Pine.LNX.4.62.0812021429460.27864@radix.cryptio.net>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Wed, 3 Dec 2008 11:25:42 +0100
Message-ID: <1228299942.25256.163.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2008-12-02 at 23:42 +0100, Chris Hostetter wrote:
> : A cosmetic remark, I would personally choose a single field for the boosts and
> : then one token per source. (groupboost:A^10 groupboost:B^1 groupboost:C^0.1).
> 
> that's a key improvement, as it helps keep the number of unique fields 
> down, even if the number of sources grows without bounds.  make sure you 
> omitNorms on your groupboost field, and when buiding your various boolean 
> queries, consider disabling the coord (check the docs to understand why 
> that might make sense)

Ah yes, with norms, the score would be heavily influenced by the size of the group.
As for the number of groups, the downside to this method is clearly that all 
documents must have group status defined for each distinct set of groups.

...

Maybe this could be solved by a shared "dummy"-group that is defined for all 
documents? If we have two collections of groups: 
 * Source with the groups A-Z
 * Availability with the groups Available and Unavailable

Document 0
 * groupfield:dummy
 * groupfield:A
 * groupfield:Available
Document 1
 * groupfield:dummy
 * groupfield:Unavailable
Document 2
 * groupfield:dummy
 * groupfield:B
Document 3
 * groupfield:dummy

If we want to boost documents from Source A, we make the query
foo AND (groupfield:dummy OR groupfield:A^10)

Similary, if we want to demote documents with Availability Unavailable,
the query would be
foo AND (groupfield:dummy OR groupfield:Unavailable^0.1)

...

It would probably be cleaner to use a MatchAllDocsQuery instead of the dummy,
but I'm a bit unsure about the combined scoring. I'll have to experiment
further with this.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 10:41:35 2008
Return-Path: <java-user-return-37478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82194 invoked from network); 3 Dec 2008 10:41:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 10:41:35 -0000
Received: (qmail 38485 invoked by uid 500); 3 Dec 2008 10:41:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38444 invoked by uid 500); 3 Dec 2008 10:41:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38423 invoked by uid 99); 3 Dec 2008 10:41:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 02:41:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rundis@mac.com designates 17.148.16.97 as permitted sender)
Received: from [17.148.16.97] (HELO asmtpout022.mac.com) (17.148.16.97)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 10:40:07 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Received: from rundis.systemdesign.no ([158.112.85.114])
 by asmtp022.mac.com (Sun Java(tm) System Messaging Server 6.3-7.03 (built Aug
 7 2008; 32bit)) with ESMTPSA id <0KBA00IHJR045D60@asmtp022.mac.com> for
 java-user@lucene.apache.org; Wed, 03 Dec 2008 02:40:55 -0800 (PST)
Message-id: <22959BC5-2308-442F-878E-B24E008898A9@mac.com>
From: Magnus Rundberget <rundis@mac.com>
To: java-user@lucene.apache.org
Subject: lucene nicking my memory ?
Date: Wed, 03 Dec 2008 11:41:20 +0100
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We have an application using Tomcat, Spring etc and Lucene 2.4.0.
Our index is about 100MB (in test) and has about 20 indexed fields.

Performance is pretty good, but we are experiencing a very high usage  
of memory when searching.

Looking at JConsole during a somewhat silly scenario (but illustrates  
the problem);
(Allocated 512 MB Min heap space, max 1024)

0. Initially memory usage is about 70MB
1. Search for word "er", heap memory usage goes up by 100-150MB
1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
2. Search by word "og", heap memory usage goes up another 50-100MB
2.1 See 1.1

...and so on until it seems to reach the 512 MB limit, and then a  
garbage collection is performed
i.e garbage collection doesn't seem to occur until it "hits the roof"

We believe the scenario is similar in production, were our heap space  
is limited to 1.5 GB.


Our search is basically as follows
----------------------------------------------
1. Open an IndexSearcher
2. Build a Boolean Query searching across 4 fields (title, summary,  
content and daterangestring YYYYMMDD)
2.1 Sort on title
3. Perform search
4. Iterate over hits to build a set of custom result objects (pretty  
small, as we dont include content in these)
5. Close searcher
6. Return result objects.


We have tried various options based on entries on this mailing list;
a) Cache the IndexSearcher - Same results
b) Remove sorting - Same result
c) In point 4 only iterating over a limited amount of hits rather than  
whole collection - Same result in terms of memory usage, but obviously  
increased performance
d) Using RamDirectory vs FSDirectory - Same result only initial heap  
usage is higher using ramdirectory (in conjuction with cached  
indexsearcher)


Doing some profiling using YourKit shows a huge number of char[],  
int[] and string[], and ever increasing number of lucene related  
objects.



Reading through the mailing lists, suspicions are that our problem is  
related to ThreadLocals and memory not being released. Noticed that  
there was a related patch for this in 2.4.0, but it doesn't seem to  
help us much.

Any ideas ?

kind regards
Magnus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 11:07:17 2008
Return-Path: <java-user-return-37479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95491 invoked from network); 3 Dec 2008 11:07:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 11:07:16 -0000
Received: (qmail 75501 invoked by uid 500); 3 Dec 2008 11:07:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75473 invoked by uid 500); 3 Dec 2008 11:07:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75462 invoked by uid 99); 3 Dec 2008 11:07:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 03:07:20 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 11:05:48 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L7pYx-0006VO-LQ
	for java-user@lucene.apache.org; Wed, 03 Dec 2008 03:06:35 -0800
Message-ID: <20810912.post@talk.nabble.com>
Date: Wed, 3 Dec 2008 03:06:35 -0800 (PST)
From: Ravichandra <ravichandra.thiruveedhula@fmr.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with special charecters
In-Reply-To: <295da8fe0812030159k63a3b153sbc1d0ddc7dc6d7f1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ravichandra.thiruveedhula@fmr.com
References: <20807546.post@talk.nabble.com> <295da8fe0812030130l2e46d4c6ye0beaa1b242626f2@mail.gmail.com> <20809771.post@talk.nabble.com> <295da8fe0812030159k63a3b153sbc1d0ddc7dc6d7f1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It worked out well.
Thanks

Is there any way that we can use standardAnalyzer and tell it not generated
tokens out of this?

Thanks
Ravichandra


prabin meitei wrote:
> 
> use your own analyzer. Write a class extending lucene analyzer.  you can
> override the  tokenStream method to include whatever you want and exclude
> what you don't want.
> 
> eg. of a token stream method which may work for you
>  public TokenStream tokenStream(String fieldName, Reader reader) {
>         TokenStream result = new StopFilter(
>                     new LowerCaseFilter(
>                         new WhitespaceTokenizer(reader)));
>         return result;
>     }
> 
> Prabin
> toostep.com
> 
> On Wed, Dec 3, 2008 at 3:17 PM, Ravichandra <
> ravichandra.thiruveedhula@fmr.com> wrote:
> 
>>
>> Hi
>>
>> I tried that approach, I did used escaping using the "\", and the query
>> has
>> the special charecter, but i got no results that time.
>>
>> What I found out was when I use Standard Analyzer on "ABC+S", the terms
>> generated are "ABC" and "S" and '+' is getting lost.
>> When I used whitespaceAnalyzer or keywordAnalyzer (or use
>> standardanalyzer
>> but don't analyze this field), it is working, but it is case sensitive.
>>
>> Can anybody suggest me how to use Whitespaceanalyzer/keywordanalyzer
>> along
>> with lowecase filter
>> or
>> how to make Standardanalyzer not to generate tokens based on these
>> special
>> chrecters.
>>
>> Thanks
>> Ravichandra
>>
>>
>> prabin meitei wrote:
>> >
>> > try manually escaping the search string, adding "\" in front of the
>> > special
>> > characters. (you can do this easily by using string replace)
>> > This will make sure that your query contains the special characters
>> >
>> >
>> > Prabin
>> > toostep.com
>> >
>> > On Wed, Dec 3, 2008 at 12:03 PM, Ravichandra <
>> > ravichandra.thiruveedhula@fmr.com> wrote:
>> >
>> >>
>> >> Hi
>> >>
>> >> I am having problems with searching for special charecters like
>> %,*,+,-
>> >> etc.
>> >> I am using standard analyzer. I create queries using the query
>> >> constructor.
>> >>
>> >> I read in the forums and tried with QueryParser.escpae and parse
>> methods,
>> >> but the problem is if I have two fields as "ABC+S" and "ABC-S" and
>> when
>> i
>> >> search for "ABC+S", the order of fields is "ABC+S","ABC-S", and when
>> we
>> >> search for "ABC-S", then also the order is "ABC+S","ABC-S".
>> >>
>> >> What I have seen is when we escape the search string and then parse it
>> >> using
>> >> query parser, the generated query doesn't contain the special
>> charecter
>> >> '+',
>> >> or '-'.
>> >>
>> >> Please suggest me how to deal with special charecters.
>> >>
>> >> Lucene : 2.4
>> >>
>> >> Thanks
>> >> Ravichandra
>> >>
>> >> -----
>> >> Thanks
>> >> Ravichandra
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/Problem-with-special-charecters-tp20807546p20807546.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>>
>>
>> -----
>> Thanks
>> Ravichandra
>> --
>> View this message in context:
>> http://www.nabble.com/Problem-with-special-charecters-tp20807546p20809771.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 


-----
Thanks
Ravichandra
-- 
View this message in context: http://www.nabble.com/Problem-with-special-charecters-tp20807546p20810912.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 11:42:59 2008
Return-Path: <java-user-return-37480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10464 invoked from network); 3 Dec 2008 11:42:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 11:42:59 -0000
Received: (qmail 17152 invoked by uid 500); 3 Dec 2008 11:43:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17100 invoked by uid 500); 3 Dec 2008 11:42:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 31909 invoked by uid 99); 3 Dec 2008 10:34:21 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rundis@mac.com designates 17.148.16.87 as permitted sender)
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Message-id: <D4A35A3A-5909-4096-9491-C9D839925929@mac.com>
From: Magnus Rundberget <rundis@mac.com>
To: java-user@lucene.apache.org
Subject: lucene nicking all my memory
Date: Wed, 03 Dec 2008 11:33:54 +0100
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We have an application using Tomcat, Spring etc and Lucene 2.4.0.
Our index is about 100MB (in test) and has about 20 indexed fields.

Performance is pretty good, but we are experiencing a very high usage  
of memory when searching.

Looking at JConsole during a somewhat silly scenario (but illustrates  
the problem);
(Allocated 512 MB Min heap space, max 1024)

0. Initially memory usage is about 70MB
1. Search for word "er", heap memory usage goes up by 100-150MB
1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
2. Search by word "og", heap memory usage goes up another 50-100MB
2.1 See 1.1

...and so on until it seems to reach the 512 MB limit, and then a  
garbage collection is performed
i.e garbage collection doesn't seem to occur until it "hits the roof"

We believe the scenario is similar in production, were our heap space  
is limited to 1.5 GB.


Our search is basically as follows
----------------------------------------------
1. Open an IndexSearcher
2. Build a Boolean Query searching across 4 fields (title, summary,  
content and daterangestring YYYYMMDD)
2.1 Sort on title
3. Perform search
4. Iterate over hits to build a set of custom result objects (pretty  
small, as we dont include content in these)
5. Close searcher
6. Return result objects.


We have tried various options based on entries on this mailing list;
a) Cache the IndexSearcher - Same results
b) Remove sorting - Same result
c) In point 4 only iterating over a limited amount of hits rather than  
whole collection - Same result in terms of memory usage, but obviously  
increased performance
d) Using RamDirectory vs FSDirectory - Same result only initial heap  
usage is higher using ramdirectory (in conjuction with cached  
indexsearcher)


Doing some profiling using YourKit shows a huge number of char[],  
int[] and string[], and ever increasing number of lucene related  
objects.



Reading through the mailing lists, suspicions are that our problem is  
related to ThreadLocals and memory not being released. Noticed that  
there was a related patch for this in 2.4.0, but it doesn't seem to  
help us much.

Any ideas ?

kind regards
Magnus









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 11:48:56 2008
Return-Path: <java-user-return-37481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14309 invoked from network); 3 Dec 2008 11:48:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 11:48:56 -0000
Received: (qmail 27289 invoked by uid 500); 3 Dec 2008 11:48:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27233 invoked by uid 500); 3 Dec 2008 11:48:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27220 invoked by uid 99); 3 Dec 2008 11:48:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 03:48:58 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 11:47:27 +0000
Received: by ik-out-1112.google.com with SMTP id c29so2872698ika.5
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 03:48:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8sjIut5wjc0bO32/F++iOviq+svW0Jy7NpjunmjeqJc=;
        b=TO8UfEVNQdhBkBQh+NhFH4eEnB8j1BVqE0cFPsF0HcWRbgD52MZ6+jJE5KV4qT3N7L
         cfmlLZPKBFQqLORT/gNzjT/6VcM7cNr6OEb+PxLJGQCauQ464T0Z5caqwyX4SHzzaB7c
         l39t1p0C39RxikPFRhVyxl47wzpEOhUjdgXzo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MyTe5qqYehbFXtqyuA7d7Cc2HXvnGyGO+btbzUfHakat9jcj2dNugaJ7zul0Vdx0P3
         ibgZJT62FbFpWbU4iiEWs3ktPv2nCHrYm7ijLtx13/vzMXHDSXHR+USFkSqajYPzd0Xj
         pfdi5Q7wKTSUqq4CDWvnukCGSKsDPgQHkvFIM=
Received: by 10.103.251.3 with SMTP id d3mr5936005mus.72.1228304893372;
        Wed, 03 Dec 2008 03:48:13 -0800 (PST)
Received: by 10.103.245.16 with HTTP; Wed, 3 Dec 2008 03:48:13 -0800 (PST)
Message-ID: <295da8fe0812030348l413aa799p73d696209c599fcb@mail.gmail.com>
Date: Wed, 3 Dec 2008 17:18:13 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with special charecters
In-Reply-To: <20810912.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1481_30366618.1228304893321"
References: <20807546.post@talk.nabble.com>
	 <295da8fe0812030130l2e46d4c6ye0beaa1b242626f2@mail.gmail.com>
	 <20809771.post@talk.nabble.com>
	 <295da8fe0812030159k63a3b153sbc1d0ddc7dc6d7f1@mail.gmail.com>
	 <20810912.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1481_30366618.1228304893321
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think there is a way to do that if you are using lucene
standardAnalyzer. because standardAnalyzer is meant to tokenize by some
standard token characters. for custom analyzing it is good to use your own
analyzer.  You can probably use SimpleAnalyzer

Prabin
toostep.com

On Wed, Dec 3, 2008 at 4:36 PM, Ravichandra <
ravichandra.thiruveedhula@fmr.com> wrote:

>
> It worked out well.
> Thanks
>
> Is there any way that we can use standardAnalyzer and tell it not generated
> tokens out of this?
>
> Thanks
> Ravichandra
>
>
> prabin meitei wrote:
> >
> > use your own analyzer. Write a class extending lucene analyzer.  you can
> > override the  tokenStream method to include whatever you want and exclude
> > what you don't want.
> >
> > eg. of a token stream method which may work for you
> >  public TokenStream tokenStream(String fieldName, Reader reader) {
> >         TokenStream result = new StopFilter(
> >                     new LowerCaseFilter(
> >                         new WhitespaceTokenizer(reader)));
> >         return result;
> >     }
> >
> > Prabin
> > toostep.com
> >
> > On Wed, Dec 3, 2008 at 3:17 PM, Ravichandra <
> > ravichandra.thiruveedhula@fmr.com> wrote:
> >
> >>
> >> Hi
> >>
> >> I tried that approach, I did used escaping using the "\", and the query
> >> has
> >> the special charecter, but i got no results that time.
> >>
> >> What I found out was when I use Standard Analyzer on "ABC+S", the terms
> >> generated are "ABC" and "S" and '+' is getting lost.
> >> When I used whitespaceAnalyzer or keywordAnalyzer (or use
> >> standardanalyzer
> >> but don't analyze this field), it is working, but it is case sensitive.
> >>
> >> Can anybody suggest me how to use Whitespaceanalyzer/keywordanalyzer
> >> along
> >> with lowecase filter
> >> or
> >> how to make Standardanalyzer not to generate tokens based on these
> >> special
> >> chrecters.
> >>
> >> Thanks
> >> Ravichandra
> >>
> >>
> >> prabin meitei wrote:
> >> >
> >> > try manually escaping the search string, adding "\" in front of the
> >> > special
> >> > characters. (you can do this easily by using string replace)
> >> > This will make sure that your query contains the special characters
> >> >
> >> >
> >> > Prabin
> >> > toostep.com
> >> >
> >> > On Wed, Dec 3, 2008 at 12:03 PM, Ravichandra <
> >> > ravichandra.thiruveedhula@fmr.com> wrote:
> >> >
> >> >>
> >> >> Hi
> >> >>
> >> >> I am having problems with searching for special charecters like
> >> %,*,+,-
> >> >> etc.
> >> >> I am using standard analyzer. I create queries using the query
> >> >> constructor.
> >> >>
> >> >> I read in the forums and tried with QueryParser.escpae and parse
> >> methods,
> >> >> but the problem is if I have two fields as "ABC+S" and "ABC-S" and
> >> when
> >> i
> >> >> search for "ABC+S", the order of fields is "ABC+S","ABC-S", and when
> >> we
> >> >> search for "ABC-S", then also the order is "ABC+S","ABC-S".
> >> >>
> >> >> What I have seen is when we escape the search string and then parse
> it
> >> >> using
> >> >> query parser, the generated query doesn't contain the special
> >> charecter
> >> >> '+',
> >> >> or '-'.
> >> >>
> >> >> Please suggest me how to deal with special charecters.
> >> >>
> >> >> Lucene : 2.4
> >> >>
> >> >> Thanks
> >> >> Ravichandra
> >> >>
> >> >> -----
> >> >> Thanks
> >> >> Ravichandra
> >> >> --
> >> >> View this message in context:
> >> >>
> >>
> http://www.nabble.com/Problem-with-special-charecters-tp20807546p20807546.html
> >> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >> >>
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >>
> >>
> >> -----
> >> Thanks
> >> Ravichandra
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Problem-with-special-charecters-tp20807546p20809771.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
>
> -----
> Thanks
> Ravichandra
> --
> View this message in context:
> http://www.nabble.com/Problem-with-special-charecters-tp20807546p20810912.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1481_30366618.1228304893321--

From java-user-return-37482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 12:11:11 2008
Return-Path: <java-user-return-37482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25684 invoked from network); 3 Dec 2008 12:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 12:11:11 -0000
Received: (qmail 44439 invoked by uid 500); 3 Dec 2008 12:11:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44409 invoked by uid 500); 3 Dec 2008 12:11:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44398 invoked by uid 99); 3 Dec 2008 12:11:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 04:11:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 12:09:47 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3560862wfc.20
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 04:10:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=vIve7TFEFc/tI1rDjCS3O3gBeBqtUmTqQjJ8CzcEG1Y=;
        b=RXXyy1gboa51CDgezWk2GI0IfzztthHd35DaoV5lBjXm7o50QxFGAXIhAjdIY34Srb
         VXXevb/tBZ+wutB/n3Z4xdAaFMByLZtSfupGxa3t6xd6+3VrbEkXGsid0/u09m3yGw10
         NtexOeXpiCq2ZIDSmt2ouhzYLe7+1WJemnTTc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Tf3Xl/NoI8H5GUKwkQeXD9uJtJ3491UI0ik79M9KogQdlbJbD4jbnwU7fnirhE7S+K
         rTOA1dId5ZRvohYcePg6CtlmQqdWrelnpZU4IUn/jUVcwXGhT8N+Y0DCsRFD2OX7Nib3
         njNTb+TYjB0Tb/i4xQnhB4U7VuADd9uBd3SGk=
Received: by 10.142.84.3 with SMTP id h3mr5366640wfb.149.1228306225487;
        Wed, 03 Dec 2008 04:10:25 -0800 (PST)
Received: by 10.143.40.11 with HTTP; Wed, 3 Dec 2008 04:10:25 -0800 (PST)
Message-ID: <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com>
Date: Wed, 3 Dec 2008 07:10:25 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene nicking my memory ?
In-Reply-To: <22959BC5-2308-442F-878E-B24E008898A9@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Magnus,

Could you post the OS, version, RAM size, swapsize, Java VM version,
hardware, #cores, VM command line parameters, etc? This can be very
relevant.

Have you tried other garbage collectors and/or tuning as described in
http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?

2008/12/3 Magnus Rundberget <rundis@mac.com>:
> Hi,
>
> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
> Our index is about 100MB (in test) and has about 20 indexed fields.
>
> Performance is pretty good, but we are experiencing a very high usage of
> memory when searching.
>
> Looking at JConsole during a somewhat silly scenario (but illustrates the
> problem);
> (Allocated 512 MB Min heap space, max 1024)
>
> 0. Initially memory usage is about 70MB
> 1. Search for word "er", heap memory usage goes up by 100-150MB
> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
> 2. Search by word "og", heap memory usage goes up another 50-100MB
> 2.1 See 1.1
>
> ...and so on until it seems to reach the 512 MB limit, and then a garbage
> collection is performed
> i.e garbage collection doesn't seem to occur until it "hits the roof"
>
> We believe the scenario is similar in production, were our heap space is
> limited to 1.5 GB.
>
>
> Our search is basically as follows
> ----------------------------------------------
> 1. Open an IndexSearcher
> 2. Build a Boolean Query searching across 4 fields (title, summary, content
> and daterangestring YYYYMMDD)
> 2.1 Sort on title
> 3. Perform search
> 4. Iterate over hits to build a set of custom result objects (pretty small,
> as we dont include content in these)
> 5. Close searcher
> 6. Return result objects.

You should not close the searcher: it can be shared by all queries.
What happens when you warm Lucene with a (large) number of queries: do
things stabilize over time?

A 100MB index is (relatively) very small for Lucene (I have indexes
>100GB). What kind of response times are you getting, independent of
memory usage.

-glen

>
> We have tried various options based on entries on this mailing list;
> a) Cache the IndexSearcher - Same results
> b) Remove sorting - Same result
> c) In point 4 only iterating over a limited amount of hits rather than whole
> collection - Same result in terms of memory usage, but obviously increased
> performance
> d) Using RamDirectory vs FSDirectory - Same result only initial heap usage
> is higher using ramdirectory (in conjuction with cached indexsearcher)
>
>
> Doing some profiling using YourKit shows a huge number of char[], int[] and
> string[], and ever increasing number of lucene related objects.
>
>
>
> Reading through the mailing lists, suspicions are that our problem is
> related to ThreadLocals and memory not being released. Noticed that there
> was a related patch for this in 2.4.0, but it doesn't seem to help us much.
>
> Any ideas ?
>
> kind regards
> Magnus
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 12:20:45 2008
Return-Path: <java-user-return-37483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36441 invoked from network); 3 Dec 2008 12:20:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 12:20:43 -0000
Received: (qmail 58696 invoked by uid 500); 3 Dec 2008 12:20:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58426 invoked by uid 500); 3 Dec 2008 12:20:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58415 invoked by uid 99); 3 Dec 2008 12:20:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 04:20:48 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.219] (HELO smtp109.mail.mud.yahoo.com) (209.191.85.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 03 Dec 2008 12:19:17 +0000
Received: (qmail 63434 invoked from network); 3 Dec 2008 12:19:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=r59OkAIhCJgw7sOb8QSBmJWzf09FLWjoxs2t0MAgDW5Vd3oRfXq9ZqKWdsdlaeb4K1IEwj7FDKqo3dN3/nFoTDE5wtoCY0yVuFHFT0rODWs0TVYOYSSHEw9SjaLb5pEs8EybK/GwbekNnnDxq4RQcHF+2sGMlGB1asKGj6jRB1M=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp109.mail.mud.yahoo.com with SMTP; 3 Dec 2008 12:19:03 -0000
X-YMail-OSG: jWu1nGgVM1ldWnkg2wbxH8.O0HFscdhW1emxu8Af3qAzdY7pCtITwGNzza7dD6W0VxsAPeEoEP2g5GzhIrEYCvk63Bxkn6SG6Vn6fZEqdccqMEtwIC8Gu3aNLyVkIqtY_JQrj8IOPESKSKBIBcu.m55dwg--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <123a01c95541$5449fce0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <D4A35A3A-5909-4096-9491-C9D839925929@mac.com>
Subject: Re: lucene nicking all my memory
Date: Wed, 3 Dec 2008 17:49:00 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

You are opening and closing IndexSearcher for every search.  Try by caching 
IndexSearcher and do reopen the IndexReader, when the index gets modified.

In your code below, How did you create IndexSearcher. If it is using 
IndexReader and you need to close that too. This might be the cause of 
memory leak.

Regards
Ganesh


----- Original Message ----- 
From: "Magnus Rundberget" <rundis@mac.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, December 03, 2008 4:03 PM
Subject: lucene nicking all my memory


> Hi,
>
> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
> Our index is about 100MB (in test) and has about 20 indexed fields.
>
> Performance is pretty good, but we are experiencing a very high usage  of 
> memory when searching.
>
> Looking at JConsole during a somewhat silly scenario (but illustrates  the 
> problem);
> (Allocated 512 MB Min heap space, max 1024)
>
> 0. Initially memory usage is about 70MB
> 1. Search for word "er", heap memory usage goes up by 100-150MB
> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
> 2. Search by word "og", heap memory usage goes up another 50-100MB
> 2.1 See 1.1
>
> ...and so on until it seems to reach the 512 MB limit, and then a  garbage 
> collection is performed
> i.e garbage collection doesn't seem to occur until it "hits the roof"
>
> We believe the scenario is similar in production, were our heap space  is 
> limited to 1.5 GB.
>
>
> Our search is basically as follows
> ----------------------------------------------
> 1. Open an IndexSearcher
> 2. Build a Boolean Query searching across 4 fields (title, summary, 
> content and daterangestring YYYYMMDD)
> 2.1 Sort on title
> 3. Perform search
> 4. Iterate over hits to build a set of custom result objects (pretty 
> small, as we dont include content in these)
> 5. Close searcher
> 6. Return result objects.
>
>
> We have tried various options based on entries on this mailing list;
> a) Cache the IndexSearcher - Same results
> b) Remove sorting - Same result
> c) In point 4 only iterating over a limited amount of hits rather than 
> whole collection - Same result in terms of memory usage, but obviously 
> increased performance
> d) Using RamDirectory vs FSDirectory - Same result only initial heap 
> usage is higher using ramdirectory (in conjuction with cached 
> indexsearcher)
>
>
> Doing some profiling using YourKit shows a huge number of char[],  int[] 
> and string[], and ever increasing number of lucene related  objects.
>
>
>
> Reading through the mailing lists, suspicions are that our problem is 
> related to ThreadLocals and memory not being released. Noticed that  there 
> was a related patch for this in 2.4.0, but it doesn't seem to  help us 
> much.
>
> Any ideas ?
>
> kind regards
> Magnus
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 12:38:37 2008
Return-Path: <java-user-return-37484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50946 invoked from network); 3 Dec 2008 12:38:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 12:38:37 -0000
Received: (qmail 86821 invoked by uid 500); 3 Dec 2008 12:38:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86790 invoked by uid 500); 3 Dec 2008 12:38:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86779 invoked by uid 99); 3 Dec 2008 12:38:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 04:38:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rundis@mac.com designates 17.148.16.91 as permitted sender)
Received: from [17.148.16.91] (HELO asmtpout016.mac.com) (17.148.16.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 12:37:13 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Received: from rundis.systemdesign.no ([158.112.85.114])
 by asmtp016.mac.com (Sun Java(tm) System Messaging Server 6.3-7.03 (built Aug
 7 2008; 32bit)) with ESMTPSA id <0KBA00H1UW8RCW10@asmtp016.mac.com> for
 java-user@lucene.apache.org; Wed, 03 Dec 2008 04:34:06 -0800 (PST)
Message-id: <90C86E9C-7E3D-4324-BE45-2C92BF8BE289@mac.com>
From: Magnus Rundberget <rundis@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <123a01c95541$5449fce0$330bc30a@sv.us.sonicwall.com>
Subject: Re: lucene nicking all my memory
X-Priority: 3
Date: Wed, 03 Dec 2008 13:34:31 +0100
References: <D4A35A3A-5909-4096-9491-C9D839925929@mac.com>
 <123a01c95541$5449fce0$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Cheers,

In my scenario. I've made sure that the index does not get modified  
(so reopen shouldnt be necessary ?).

I've tried scenario with both caching and not caching indexsearcher  
(and hereby the indexreader it creates in its constructor).
When not caching Ive made sure to close the indexsearcher (and its  
close method should close the reader it contains).
Also tried with creating an reader explicit, and opening/closing it.

All awail.

Btw creation of index reader is done as follows in the scenario below;
IndexSearcher searcher = new IndexSearcher("PathTOIndexDirectory"); /

.. and closing it
searcher.close();

so I dont believe the solution is as simple as either;
1. Cache the IndexReader (tried and tested with no luck)
2. Open/close the indexReader (implicitly through IndexSearcher or  
explicitly) for each search

something else is fishy :-)

regards
Magnus







On 3. des.. 2008, at 13.19, Ganesh wrote:

> You are opening and closing IndexSearcher for every search.  Try by  
> caching IndexSearcher and do reopen the IndexReader, when the index  
> gets modified.
>
> In your code below, How did you create IndexSearcher. If it is using  
> IndexReader and you need to close that too. This might be the cause  
> of memory leak.
>
> Regards
> Ganesh
>
>
> ----- Original Message ----- From: "Magnus Rundberget"  
> <rundis@mac.com>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, December 03, 2008 4:03 PM
> Subject: lucene nicking all my memory
>
>
>> Hi,
>>
>> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
>> Our index is about 100MB (in test) and has about 20 indexed fields.
>>
>> Performance is pretty good, but we are experiencing a very high  
>> usage  of memory when searching.
>>
>> Looking at JConsole during a somewhat silly scenario (but  
>> illustrates  the problem);
>> (Allocated 512 MB Min heap space, max 1024)
>>
>> 0. Initially memory usage is about 70MB
>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
>> 2. Search by word "og", heap memory usage goes up another 50-100MB
>> 2.1 See 1.1
>>
>> ...and so on until it seems to reach the 512 MB limit, and then a   
>> garbage collection is performed
>> i.e garbage collection doesn't seem to occur until it "hits the roof"
>>
>> We believe the scenario is similar in production, were our heap  
>> space  is limited to 1.5 GB.
>>
>>
>> Our search is basically as follows
>> ----------------------------------------------
>> 1. Open an IndexSearcher
>> 2. Build a Boolean Query searching across 4 fields (title, summary,  
>> content and daterangestring YYYYMMDD)
>> 2.1 Sort on title
>> 3. Perform search
>> 4. Iterate over hits to build a set of custom result objects  
>> (pretty small, as we dont include content in these)
>> 5. Close searcher
>> 6. Return result objects.
>>
>>
>> We have tried various options based on entries on this mailing list;
>> a) Cache the IndexSearcher - Same results
>> b) Remove sorting - Same result
>> c) In point 4 only iterating over a limited amount of hits rather  
>> than whole collection - Same result in terms of memory usage, but  
>> obviously increased performance
>> d) Using RamDirectory vs FSDirectory - Same result only initial  
>> heap usage is higher using ramdirectory (in conjuction with cached  
>> indexsearcher)
>>
>>
>> Doing some profiling using YourKit shows a huge number of char[],   
>> int[] and string[], and ever increasing number of lucene related   
>> objects.
>>
>>
>>
>> Reading through the mailing lists, suspicions are that our problem  
>> is related to ThreadLocals and memory not being released. Noticed  
>> that  there was a related patch for this in 2.4.0, but it doesn't  
>> seem to  help us much.
>>
>> Any ideas ?
>>
>> kind regards
>> Magnus
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 12:55:31 2008
Return-Path: <java-user-return-37485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59814 invoked from network); 3 Dec 2008 12:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 12:55:30 -0000
Received: (qmail 11892 invoked by uid 500); 3 Dec 2008 12:55:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11857 invoked by uid 500); 3 Dec 2008 12:55:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11846 invoked by uid 99); 3 Dec 2008 12:55:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 04:55:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rundis@mac.com designates 17.148.16.86 as permitted sender)
Received: from [17.148.16.86] (HELO asmtpout011.mac.com) (17.148.16.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 12:54:06 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Received: from rundis.systemdesign.no ([158.112.85.114])
 by asmtp011.mac.com (Sun Java(tm) System Messaging Server 6.3-7.03 (built Aug
 7 2008; 32bit)) with ESMTPSA id <0KBA00L4WX154Z20@asmtp011.mac.com> for
 java-user@lucene.apache.org; Wed, 03 Dec 2008 04:51:09 -0800 (PST)
Message-id: <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com>
From: Magnus Rundberget <rundis@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com>
Subject: Re: lucene nicking my memory ?
Date: Wed, 03 Dec 2008 13:51:34 +0100
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com>
 <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Sure,

Tried with the following
Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12 (production)
OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003  
(production)
Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in dev and  
production)


current jvm options
-Xms512m -Xmx1024M -XX:MaxPermSize=256m
... tried a few gc settings as well but nothing that has helped  
(rather slowed things down)

production hw running 2 XEON dual core processors

in production our memory reaches the 1024 limit after a while (a few  
hours) and at some point it stops responding to forced gc (using  
jconsole).

need to digg quite a bit more to figure out the exact prod settings.  
But safe to say the memory usage pattern can be recreated on different  
hardware configs, with different os's, different 1.5 jvms and  
different containers (jetty and tomcat).



cheers
Magnus



On 3. des.. 2008, at 13.10, Glen Newton wrote:

> Hi Magnus,
>
> Could you post the OS, version, RAM size, swapsize, Java VM version,
> hardware, #cores, VM command line parameters, etc? This can be very
> relevant.
>
> Have you tried other garbage collectors and/or tuning as described in
> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>
> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>> Hi,
>>
>> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
>> Our index is about 100MB (in test) and has about 20 indexed fields.
>>
>> Performance is pretty good, but we are experiencing a very high  
>> usage of
>> memory when searching.
>>
>> Looking at JConsole during a somewhat silly scenario (but  
>> illustrates the
>> problem);
>> (Allocated 512 MB Min heap space, max 1024)
>>
>> 0. Initially memory usage is about 70MB
>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
>> 2. Search by word "og", heap memory usage goes up another 50-100MB
>> 2.1 See 1.1
>>
>> ...and so on until it seems to reach the 512 MB limit, and then a  
>> garbage
>> collection is performed
>> i.e garbage collection doesn't seem to occur until it "hits the roof"
>>
>> We believe the scenario is similar in production, were our heap  
>> space is
>> limited to 1.5 GB.
>>
>>
>> Our search is basically as follows
>> ----------------------------------------------
>> 1. Open an IndexSearcher
>> 2. Build a Boolean Query searching across 4 fields (title, summary,  
>> content
>> and daterangestring YYYYMMDD)
>> 2.1 Sort on title
>> 3. Perform search
>> 4. Iterate over hits to build a set of custom result objects  
>> (pretty small,
>> as we dont include content in these)
>> 5. Close searcher
>> 6. Return result objects.
>
> You should not close the searcher: it can be shared by all queries.
> What happens when you warm Lucene with a (large) number of queries: do
> things stabilize over time?
>
> A 100MB index is (relatively) very small for Lucene (I have indexes
>> 100GB). What kind of response times are you getting, independent of
> memory usage.
>
> -glen
>
>>
>> We have tried various options based on entries on this mailing list;
>> a) Cache the IndexSearcher - Same results
>> b) Remove sorting - Same result
>> c) In point 4 only iterating over a limited amount of hits rather  
>> than whole
>> collection - Same result in terms of memory usage, but obviously  
>> increased
>> performance
>> d) Using RamDirectory vs FSDirectory - Same result only initial  
>> heap usage
>> is higher using ramdirectory (in conjuction with cached  
>> indexsearcher)
>>
>>
>> Doing some profiling using YourKit shows a huge number of char[],  
>> int[] and
>> string[], and ever increasing number of lucene related objects.
>>
>>
>>
>> Reading through the mailing lists, suspicions are that our problem is
>> related to ThreadLocals and memory not being released. Noticed that  
>> there
>> was a related patch for this in 2.4.0, but it doesn't seem to help  
>> us much.
>>
>> Any ideas ?
>>
>> kind regards
>> Magnus
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> -- 
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 13:45:54 2008
Return-Path: <java-user-return-37486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91076 invoked from network); 3 Dec 2008 13:45:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 13:45:54 -0000
Received: (qmail 74414 invoked by uid 500); 3 Dec 2008 13:45:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74390 invoked by uid 500); 3 Dec 2008 13:45:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74379 invoked by uid 99); 3 Dec 2008 13:45:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 05:45:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 13:44:29 +0000
Received: by qw-out-2122.google.com with SMTP id 5so750141qwi.53
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 05:45:06 -0800 (PST)
Received: by 10.215.39.6 with SMTP id r6mr13272488qaj.15.1228311906151;
        Wed, 03 Dec 2008 05:45:06 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm5057760ywc.47.2008.12.03.05.45.04
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 03 Dec 2008 05:45:04 -0800 (PST)
Message-Id: <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: lucene nicking my memory ?
Date: Wed, 3 Dec 2008 08:45:03 -0500
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com> <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com> <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Are you actually hitting OOME?

Or, you're watching heap usage and it bothers you that the GC is  
taking a long time (allowing too much garbage to use up heap space)  
before sweeping?

One thing to try (only for testing) might be a lower and lower -Xmx  
until you do hit OOME; then you'll know the "real" memory usage of the  
app.

Mike

Magnus Rundberget wrote:

> Sure,
>
> Tried with the following
> Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12 (production)
> OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003  
> (production)
> Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in dev and  
> production)
>
>
> current jvm options
> -Xms512m -Xmx1024M -XX:MaxPermSize=256m
> ... tried a few gc settings as well but nothing that has helped  
> (rather slowed things down)
>
> production hw running 2 XEON dual core processors
>
> in production our memory reaches the 1024 limit after a while (a few  
> hours) and at some point it stops responding to forced gc (using  
> jconsole).
>
> need to digg quite a bit more to figure out the exact prod settings.  
> But safe to say the memory usage pattern can be recreated on  
> different hardware configs, with different os's, different 1.5 jvms  
> and different containers (jetty and tomcat).
>
>
>
> cheers
> Magnus
>
>
>
> On 3. des.. 2008, at 13.10, Glen Newton wrote:
>
>> Hi Magnus,
>>
>> Could you post the OS, version, RAM size, swapsize, Java VM version,
>> hardware, #cores, VM command line parameters, etc? This can be very
>> relevant.
>>
>> Have you tried other garbage collectors and/or tuning as described in
>> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>>
>> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>>> Hi,
>>>
>>> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
>>> Our index is about 100MB (in test) and has about 20 indexed fields.
>>>
>>> Performance is pretty good, but we are experiencing a very high  
>>> usage of
>>> memory when searching.
>>>
>>> Looking at JConsole during a somewhat silly scenario (but  
>>> illustrates the
>>> problem);
>>> (Allocated 512 MB Min heap space, max 1024)
>>>
>>> 0. Initially memory usage is about 70MB
>>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
>>> 2. Search by word "og", heap memory usage goes up another 50-100MB
>>> 2.1 See 1.1
>>>
>>> ...and so on until it seems to reach the 512 MB limit, and then a  
>>> garbage
>>> collection is performed
>>> i.e garbage collection doesn't seem to occur until it "hits the  
>>> roof"
>>>
>>> We believe the scenario is similar in production, were our heap  
>>> space is
>>> limited to 1.5 GB.
>>>
>>>
>>> Our search is basically as follows
>>> ----------------------------------------------
>>> 1. Open an IndexSearcher
>>> 2. Build a Boolean Query searching across 4 fields (title,  
>>> summary, content
>>> and daterangestring YYYYMMDD)
>>> 2.1 Sort on title
>>> 3. Perform search
>>> 4. Iterate over hits to build a set of custom result objects  
>>> (pretty small,
>>> as we dont include content in these)
>>> 5. Close searcher
>>> 6. Return result objects.
>>
>> You should not close the searcher: it can be shared by all queries.
>> What happens when you warm Lucene with a (large) number of queries:  
>> do
>> things stabilize over time?
>>
>> A 100MB index is (relatively) very small for Lucene (I have indexes
>>> 100GB). What kind of response times are you getting, independent of
>> memory usage.
>>
>> -glen
>>
>>>
>>> We have tried various options based on entries on this mailing list;
>>> a) Cache the IndexSearcher - Same results
>>> b) Remove sorting - Same result
>>> c) In point 4 only iterating over a limited amount of hits rather  
>>> than whole
>>> collection - Same result in terms of memory usage, but obviously  
>>> increased
>>> performance
>>> d) Using RamDirectory vs FSDirectory - Same result only initial  
>>> heap usage
>>> is higher using ramdirectory (in conjuction with cached  
>>> indexsearcher)
>>>
>>>
>>> Doing some profiling using YourKit shows a huge number of char[],  
>>> int[] and
>>> string[], and ever increasing number of lucene related objects.
>>>
>>>
>>>
>>> Reading through the mailing lists, suspicions are that our problem  
>>> is
>>> related to ThreadLocals and memory not being released. Noticed  
>>> that there
>>> was a related patch for this in 2.4.0, but it doesn't seem to help  
>>> us much.
>>>
>>> Any ideas ?
>>>
>>> kind regards
>>> Magnus
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>>
>> -- 
>>
>> -
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 13:53:59 2008
Return-Path: <java-user-return-37487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95662 invoked from network); 3 Dec 2008 13:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 13:53:58 -0000
Received: (qmail 86640 invoked by uid 500); 3 Dec 2008 13:54:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86615 invoked by uid 500); 3 Dec 2008 13:54:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86604 invoked by uid 99); 3 Dec 2008 13:54:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 05:54:03 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 13:52:33 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 2AFE51CBEAB
	for <java-user@lucene.apache.org>; Wed,  3 Dec 2008 08:53:19 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Wed, 03 Dec 2008 08:53:19 -0500
X-Sasl-enc: btp1asJX6Ao6DiGF11ocyhEQ+usiYaiis2vse4NoBHwy 1228312398
Received: from [192.168.123.210] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 701EC23C6C
	for <java-user@lucene.apache.org>; Wed,  3 Dec 2008 08:53:18 -0500 (EST)
Message-ID: <49368F4C.9040109@boboco.ie>
Date: Wed, 03 Dec 2008 13:53:16 +0000
From: Eric Bowman <ebowman@boboco.ie>
User-Agent: Thunderbird 2.0.0.18 (X11/20081129)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene nicking my memory ?
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com> <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com> <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com> <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com>
In-Reply-To: <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com>
X-Enigmail-Version: 0.95.7
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Are you not passing -server on the command line? You need to do that.

In my experience with Sun JVM 1.6.x, the default gc strategy is really
amazingly good, as long as you pass -server.

If passing -server doesn't fix it, I would recommend enabling the
various verbose GC logs and watching what happens there, and using the
Sun tools to analyze it a bit. If you do require specific heap tuning,
the verbose gc logging will steer you in the right direction.

Good luck!

-Eric

Michael McCandless wrote:
>
> Are you actually hitting OOME?
>
> Or, you're watching heap usage and it bothers you that the GC is
> taking a long time (allowing too much garbage to use up heap space)
> before sweeping?
>
> One thing to try (only for testing) might be a lower and lower -Xmx
> until you do hit OOME; then you'll know the "real" memory usage of the
> app.
>
> Mike
>
> Magnus Rundberget wrote:
>
>> Sure,
>>
>> Tried with the following
>> Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12 (production)
>> OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003
>> (production)
>> Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in dev and
>> production)
>>
>>
>> current jvm options
>> -Xms512m -Xmx1024M -XX:MaxPermSize=256m
>> ... tried a few gc settings as well but nothing that has helped
>> (rather slowed things down)
>>
>> production hw running 2 XEON dual core processors
>>
>> in production our memory reaches the 1024 limit after a while (a few
>> hours) and at some point it stops responding to forced gc (using
>> jconsole).
>>
>> need to digg quite a bit more to figure out the exact prod settings.
>> But safe to say the memory usage pattern can be recreated on
>> different hardware configs, with different os's, different 1.5 jvms
>> and different containers (jetty and tomcat).
>>
>>
>>
>> cheers
>> Magnus
>>
>>
>>
>> On 3. des.. 2008, at 13.10, Glen Newton wrote:
>>
>>> Hi Magnus,
>>>
>>> Could you post the OS, version, RAM size, swapsize, Java VM version,
>>> hardware, #cores, VM command line parameters, etc? This can be very
>>> relevant.
>>>
>>> Have you tried other garbage collectors and/or tuning as described in
>>> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>>>
>>> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>>>> Hi,
>>>>
>>>> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
>>>> Our index is about 100MB (in test) and has about 20 indexed fields.
>>>>
>>>> Performance is pretty good, but we are experiencing a very high
>>>> usage of
>>>> memory when searching.
>>>>
>>>> Looking at JConsole during a somewhat silly scenario (but
>>>> illustrates the
>>>> problem);
>>>> (Allocated 512 MB Min heap space, max 1024)
>>>>
>>>> 0. Initially memory usage is about 70MB
>>>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>>>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
>>>> 2. Search by word "og", heap memory usage goes up another 50-100MB
>>>> 2.1 See 1.1
>>>>
>>>> ...and so on until it seems to reach the 512 MB limit, and then a
>>>> garbage
>>>> collection is performed
>>>> i.e garbage collection doesn't seem to occur until it "hits the roof"
>>>>
>>>> We believe the scenario is similar in production, were our heap
>>>> space is
>>>> limited to 1.5 GB.
>>>>
>>>>
>>>> Our search is basically as follows
>>>> ----------------------------------------------
>>>> 1. Open an IndexSearcher
>>>> 2. Build a Boolean Query searching across 4 fields (title, summary,
>>>> content
>>>> and daterangestring YYYYMMDD)
>>>> 2.1 Sort on title
>>>> 3. Perform search
>>>> 4. Iterate over hits to build a set of custom result objects
>>>> (pretty small,
>>>> as we dont include content in these)
>>>> 5. Close searcher
>>>> 6. Return result objects.
>>>
>>> You should not close the searcher: it can be shared by all queries.
>>> What happens when you warm Lucene with a (large) number of queries: do
>>> things stabilize over time?
>>>
>>> A 100MB index is (relatively) very small for Lucene (I have indexes
>>>> 100GB). What kind of response times are you getting, independent of
>>> memory usage.
>>>
>>> -glen
>>>
>>>>
>>>> We have tried various options based on entries on this mailing list;
>>>> a) Cache the IndexSearcher - Same results
>>>> b) Remove sorting - Same result
>>>> c) In point 4 only iterating over a limited amount of hits rather
>>>> than whole
>>>> collection - Same result in terms of memory usage, but obviously
>>>> increased
>>>> performance
>>>> d) Using RamDirectory vs FSDirectory - Same result only initial
>>>> heap usage
>>>> is higher using ramdirectory (in conjuction with cached indexsearcher)
>>>>
>>>>
>>>> Doing some profiling using YourKit shows a huge number of char[],
>>>> int[] and
>>>> string[], and ever increasing number of lucene related objects.
>>>>
>>>>
>>>>
>>>> Reading through the mailing lists, suspicions are that our problem is
>>>> related to ThreadLocals and memory not being released. Noticed that
>>>> there
>>>> was a related patch for this in 2.4.0, but it doesn't seem to help
>>>> us much.
>>>>
>>>> Any ideas ?
>>>>
>>>> kind regards
>>>> Magnus
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> -- 
>>>
>>> -
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Eric Bowman
Boboco Ltd
ebowman@boboco.ie
http://www.boboco.ie/ebowman/pubkey.pgp
+35318394189/+353872801532


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 14:03:03 2008
Return-Path: <java-user-return-37488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2504 invoked from network); 3 Dec 2008 14:03:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 14:03:03 -0000
Received: (qmail 98584 invoked by uid 500); 3 Dec 2008 14:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98548 invoked by uid 500); 3 Dec 2008 14:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98537 invoked by uid 99); 3 Dec 2008 14:03:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 06:03:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 14:01:37 +0000
Received: by gxk3 with SMTP id 3so3889620gxk.5
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 06:01:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=X79bAunE/7k1fl/3fVrg62q4rmK3QqDlJ56yFKIZO+E=;
        b=PX9dRoLfImRHvOQsMmEcRZN3Y+DPXBHataDcROhKip26sUlOt5L/CYSzEW8JA84Not
         QSLJL3eTaEA5U7xslv2CsI4NGV7vgFDdutbjfCGKfN/DL1SB5mMDefbfzuvgIql+Tdp/
         B4Qf1nmOeGtddgtxfcoajhyGkuk2ixQiBWr9E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=WVh2dtzg2twebhbbY4sy1RkMOnCfunjxei7UkH6zIrFgFkiFhQErIJVBXBNCQWgfAl
         PTw4Ij3rmi9Oz/mtiwH4kbI3H6GvGOFKyYGldBhZee97mAdMejtmkmfZyXmTE/Us/wf2
         l6Wm7BOiLp3dzjxZSiLE8+8ctXRoJPKVIhlCI=
Received: by 10.90.32.14 with SMTP id f14mr7277934agf.118.1228312823454;
        Wed, 03 Dec 2008 06:00:23 -0800 (PST)
Received: from ?192.168.1.103? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm7651768aga.13.2008.12.03.06.00.22
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 03 Dec 2008 06:00:22 -0800 (PST)
Message-ID: <493690F8.4060908@gmail.com>
Date: Wed, 03 Dec 2008 09:00:24 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene nicking my memory ?
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com> <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com> <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com> <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com> <49368F4C.9040109@boboco.ie>
In-Reply-To: <49368F4C.9040109@boboco.ie>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Careful here. Not only do you need to pass -server, but you need the 
ability to use it :) It will silently not work if its not there I 
believe. Oddly, the JRE doesn't seem to come with the server hotspot 
implementation. The JDK always does appear to. Probably varies by OS to 
some degree.

Some awesome options for visually watching garbage collection:

straight visualgc
the netbeans visualgc plugin
the awesome visualvm and the visualgc plugin

Eric Bowman wrote:
> Are you not passing -server on the command line? You need to do that.
>
> In my experience with Sun JVM 1.6.x, the default gc strategy is really
> amazingly good, as long as you pass -server.
>
> If passing -server doesn't fix it, I would recommend enabling the
> various verbose GC logs and watching what happens there, and using the
> Sun tools to analyze it a bit. If you do require specific heap tuning,
> the verbose gc logging will steer you in the right direction.
>
> Good luck!
>
> -Eric
>
> Michael McCandless wrote:
>   
>> Are you actually hitting OOME?
>>
>> Or, you're watching heap usage and it bothers you that the GC is
>> taking a long time (allowing too much garbage to use up heap space)
>> before sweeping?
>>
>> One thing to try (only for testing) might be a lower and lower -Xmx
>> until you do hit OOME; then you'll know the "real" memory usage of the
>> app.
>>
>> Mike
>>
>> Magnus Rundberget wrote:
>>
>>     
>>> Sure,
>>>
>>> Tried with the following
>>> Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12 (production)
>>> OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003
>>> (production)
>>> Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in dev and
>>> production)
>>>
>>>
>>> current jvm options
>>> -Xms512m -Xmx1024M -XX:MaxPermSize=256m
>>> ... tried a few gc settings as well but nothing that has helped
>>> (rather slowed things down)
>>>
>>> production hw running 2 XEON dual core processors
>>>
>>> in production our memory reaches the 1024 limit after a while (a few
>>> hours) and at some point it stops responding to forced gc (using
>>> jconsole).
>>>
>>> need to digg quite a bit more to figure out the exact prod settings.
>>> But safe to say the memory usage pattern can be recreated on
>>> different hardware configs, with different os's, different 1.5 jvms
>>> and different containers (jetty and tomcat).
>>>
>>>
>>>
>>> cheers
>>> Magnus
>>>
>>>
>>>
>>> On 3. des.. 2008, at 13.10, Glen Newton wrote:
>>>
>>>       
>>>> Hi Magnus,
>>>>
>>>> Could you post the OS, version, RAM size, swapsize, Java VM version,
>>>> hardware, #cores, VM command line parameters, etc? This can be very
>>>> relevant.
>>>>
>>>> Have you tried other garbage collectors and/or tuning as described in
>>>> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>>>>
>>>> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>>>>         
>>>>> Hi,
>>>>>
>>>>> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
>>>>> Our index is about 100MB (in test) and has about 20 indexed fields.
>>>>>
>>>>> Performance is pretty good, but we are experiencing a very high
>>>>> usage of
>>>>> memory when searching.
>>>>>
>>>>> Looking at JConsole during a somewhat silly scenario (but
>>>>> illustrates the
>>>>> problem);
>>>>> (Allocated 512 MB Min heap space, max 1024)
>>>>>
>>>>> 0. Initially memory usage is about 70MB
>>>>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>>>>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
>>>>> 2. Search by word "og", heap memory usage goes up another 50-100MB
>>>>> 2.1 See 1.1
>>>>>
>>>>> ...and so on until it seems to reach the 512 MB limit, and then a
>>>>> garbage
>>>>> collection is performed
>>>>> i.e garbage collection doesn't seem to occur until it "hits the roof"
>>>>>
>>>>> We believe the scenario is similar in production, were our heap
>>>>> space is
>>>>> limited to 1.5 GB.
>>>>>
>>>>>
>>>>> Our search is basically as follows
>>>>> ----------------------------------------------
>>>>> 1. Open an IndexSearcher
>>>>> 2. Build a Boolean Query searching across 4 fields (title, summary,
>>>>> content
>>>>> and daterangestring YYYYMMDD)
>>>>> 2.1 Sort on title
>>>>> 3. Perform search
>>>>> 4. Iterate over hits to build a set of custom result objects
>>>>> (pretty small,
>>>>> as we dont include content in these)
>>>>> 5. Close searcher
>>>>> 6. Return result objects.
>>>>>           
>>>> You should not close the searcher: it can be shared by all queries.
>>>> What happens when you warm Lucene with a (large) number of queries: do
>>>> things stabilize over time?
>>>>
>>>> A 100MB index is (relatively) very small for Lucene (I have indexes
>>>>         
>>>>> 100GB). What kind of response times are you getting, independent of
>>>>>           
>>>> memory usage.
>>>>
>>>> -glen
>>>>
>>>>         
>>>>> We have tried various options based on entries on this mailing list;
>>>>> a) Cache the IndexSearcher - Same results
>>>>> b) Remove sorting - Same result
>>>>> c) In point 4 only iterating over a limited amount of hits rather
>>>>> than whole
>>>>> collection - Same result in terms of memory usage, but obviously
>>>>> increased
>>>>> performance
>>>>> d) Using RamDirectory vs FSDirectory - Same result only initial
>>>>> heap usage
>>>>> is higher using ramdirectory (in conjuction with cached indexsearcher)
>>>>>
>>>>>
>>>>> Doing some profiling using YourKit shows a huge number of char[],
>>>>> int[] and
>>>>> string[], and ever increasing number of lucene related objects.
>>>>>
>>>>>
>>>>>
>>>>> Reading through the mailing lists, suspicions are that our problem is
>>>>> related to ThreadLocals and memory not being released. Noticed that
>>>>> there
>>>>> was a related patch for this in 2.4.0, but it doesn't seem to help
>>>>> us much.
>>>>>
>>>>> Any ideas ?
>>>>>
>>>>> kind regards
>>>>> Magnus
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>           
>>>>
>>>> -- 
>>>>
>>>> -
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>     
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 15:44:52 2008
Return-Path: <java-user-return-37489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98269 invoked from network); 3 Dec 2008 15:44:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 15:44:52 -0000
Received: (qmail 21254 invoked by uid 500); 3 Dec 2008 15:44:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21225 invoked by uid 500); 3 Dec 2008 15:44:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21214 invoked by uid 99); 3 Dec 2008 15:44:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 07:44:55 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gustavo.corral@gmail.com designates 209.85.132.248 as permitted sender)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 15:43:27 +0000
Received: by an-out-0708.google.com with SMTP id b2so1349682ana.5
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 07:44:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=6l5Sd5tACe6FarWaVXpsAbBpdENB/uonan7pqRgqN9Q=;
        b=ryQkE0p9Vh3+WfuLz/peZILpQhmw7ZACn6yCHzRC+StA10+s8FILMCcEWCRNxUftRu
         EoHFP2zcXAOoHBA6iIrloRDn97VxpE3J6+2EkBegMw0+lwOdZ4OFDZpBkGb8eEdCWqhw
         eTWKlFEmH4omRZlJ7m/l5HdXvF/X2RGHLUa1E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=l6FB15B32tGwGHhuJ1aHRuw43RR01/DDbjc2azrsQoY1/hKdunj2+Dr8s7f0cactsG
         dEYtacmwROoSidUJSbtNz82j/2+sMVhWFJx2utPTjeXXrPGAoQDx2tERjNYQXXxkqEPG
         F6NA30MRf1V0ThixSDrPJlPWuWJzt1HLEYhgI=
Received: by 10.100.6.16 with SMTP id 16mr7691321anf.108.1228319044722;
        Wed, 03 Dec 2008 07:44:04 -0800 (PST)
Received: by 10.100.135.1 with HTTP; Wed, 3 Dec 2008 07:44:04 -0800 (PST)
Message-ID: <2bfa20eb0812030744g26acdc4aw35067bb3d2a5a4e4@mail.gmail.com>
Date: Wed, 3 Dec 2008 09:44:04 -0600
From: "Gustavo Corral" <gustavo.corral@gmail.com>
To: java-user@lucene.apache.org
Subject: Termfreq
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4980_30685659.1228319044714"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4980_30685659.1228319044714
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi list,

I hope this is not a silly question, but I should ask.

I developed a IR system for XML documents with Lucene and I was checking the
explain() output for some queries, but I don't understand this part:

0.121383816 = fieldWeight(title:efecto in 1), product of:
1.0 = tf(termFreq(title:efecto)=1)
0.7768564 = idf(docFreq=4)

It suppose tf refears to the term's frequency in the document, but I know
there are more than one occurrences of this term in this document, so I
noted that termFreq stores the frequency of a term in the document, but just
for the given field, like if Lucene takes a field like a whole document. Is
this correct, and if that is the case is this a good practice for IR?

Thanks for any help or a good explanation.

------=_Part_4980_30685659.1228319044714--

From java-user-return-37490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 15:53:14 2008
Return-Path: <java-user-return-37490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1587 invoked from network); 3 Dec 2008 15:53:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 15:53:13 -0000
Received: (qmail 38932 invoked by uid 500); 3 Dec 2008 15:53:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38894 invoked by uid 500); 3 Dec 2008 15:53:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38883 invoked by uid 99); 3 Dec 2008 15:53:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 07:53:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 15:51:50 +0000
Received: by ug-out-1314.google.com with SMTP id c2so3602172ugf.23
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 07:52:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=9munWO/4jkrQQG8wCyZVC4NSbxTuX8fctSDn9zv9tyk=;
        b=C+/zKjW6oms+9KpLjDN1RPjA+BINB8Iff4H9ckN2IZ13Omy+wLAQ2BDVV7+GxCl4hp
         1WXk57CxyhqYZZSTcP9TWq/xxxGdrFfO2DHMecQEAUxuxSznRAJ2PbU5Qi53HYC1J7JI
         HW4a0L1xmgMV7apqHyaiWvp+HGPPJDoKkfwJc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Un61p9IPsk04fpkQ9Iw8pj1r4t18qcI18jnvWAHqC4g716piRTIW4T40msnxsxSTop
         TSh2TXzYjhSWdoZrgDpcCNGt/6ScNuvEk1LAqQOxHLYA8O/RtHo4ndEsrYyQSJDmptvy
         ZJNGgPCUZGkJYMBjE48zPPinXb3WS0YRWCb68=
Received: by 10.86.61.13 with SMTP id j13mr8048725fga.23.1228319555938;
        Wed, 03 Dec 2008 07:52:35 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Wed, 3 Dec 2008 07:52:35 -0800 (PST)
Message-ID: <359a92830812030752i7b9c317ar58cb7e24e4a12c64@mail.gmail.com>
Date: Wed, 3 Dec 2008 10:52:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Termfreq
In-Reply-To: <2bfa20eb0812030744g26acdc4aw35067bb3d2a5a4e4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7767_25987147.1228319555934"
References: <2bfa20eb0812030744g26acdc4aw35067bb3d2a5a4e4@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7767_25987147.1228319555934
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not much of an expert on term frequencies and scoring,
but would you really want the score calculated for a document
to be  affected by the occurrence of terms in a field you did
NOT search on?

I sure wouldn't,


Best
Erick

On Wed, Dec 3, 2008 at 10:44 AM, Gustavo Corral <gustavo.corral@gmail.com>wrote:

> Hi list,
>
> I hope this is not a silly question, but I should ask.
>
> I developed a IR system for XML documents with Lucene and I was checking
> the
> explain() output for some queries, but I don't understand this part:
>
> 0.121383816 = fieldWeight(title:efecto in 1), product of:
> 1.0 = tf(termFreq(title:efecto)=1)
> 0.7768564 = idf(docFreq=4)
>
> It suppose tf refears to the term's frequency in the document, but I know
> there are more than one occurrences of this term in this document, so I
> noted that termFreq stores the frequency of a term in the document, but
> just
> for the given field, like if Lucene takes a field like a whole document. Is
> this correct, and if that is the case is this a good practice for IR?
>
> Thanks for any help or a good explanation.
>

------=_Part_7767_25987147.1228319555934--

From java-user-return-37491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 17:59:10 2008
Return-Path: <java-user-return-37491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58016 invoked from network); 3 Dec 2008 17:59:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 17:59:10 -0000
Received: (qmail 37938 invoked by uid 500); 3 Dec 2008 17:59:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37910 invoked by uid 500); 3 Dec 2008 17:59:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37899 invoked by uid 99); 3 Dec 2008 17:59:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 09:59:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gustavo.corral@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 17:57:46 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1450488ywj.5
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 09:58:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WYR0kCYoyAe7fIKKTrNtnBiRqkKzCND+WFm3cilwVXY=;
        b=U+bxfakMaKuMrJOJL7K6Ytv3HKXpdLdVPm3D4KagC78qEMUT3AUHYR7oZNwzd9XYjM
         SfrRieMrqahsbQSew1zF+uWDygQLT1X2yMJYngRRz4rQJXX0pA9vf8c+gL9Mq107Hmb4
         6ltjgsSOAoKlOIA91v1SCpRhO2tPNf1/KD4Ls=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Y8LV4PVxy7DqWhOY61bomrhAa9sSVZ4ObFzjxNxUQM8FnR56Ysg+Fke+zRm4vh4rh0
         4BDDOhrmOz3SN9VCj1H7kssnx/dp5Q9OgC4g1nGoY7ulthY9qrj02Yf2NAFm2Trxq4cO
         oXhIIPNE+Tc1GZg9Sz3hGzHxTrE8iU2LydixA=
Received: by 10.100.31.10 with SMTP id e10mr7911506ane.12.1228327112122;
        Wed, 03 Dec 2008 09:58:32 -0800 (PST)
Received: by 10.100.135.1 with HTTP; Wed, 3 Dec 2008 09:58:31 -0800 (PST)
Message-ID: <2bfa20eb0812030958i173e6b39j9d415ed2606bce9c@mail.gmail.com>
Date: Wed, 3 Dec 2008 11:58:31 -0600
From: "Gustavo Corral" <gustavo.corral@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Termfreq
In-Reply-To: <359a92830812030752i7b9c317ar58cb7e24e4a12c64@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6500_24195065.1228327112108"
References: <2bfa20eb0812030744g26acdc4aw35067bb3d2a5a4e4@mail.gmail.com>
	 <359a92830812030752i7b9c317ar58cb7e24e4a12c64@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6500_24195065.1228327112108
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, of course it makes sense. I was just confused about the documentation
for the Similarity function.

On Wed, Dec 3, 2008 at 9:52 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> I'm not much of an expert on term frequencies and scoring,
> but would you really want the score calculated for a document
> to be  affected by the occurrence of terms in a field you did
> NOT search on?
>
> I sure wouldn't,
>
>
> Best
> Erick
>
> On Wed, Dec 3, 2008 at 10:44 AM, Gustavo Corral <gustavo.corral@gmail.com
> >wrote:
>
> > Hi list,
> >
> > I hope this is not a silly question, but I should ask.
> >
> > I developed a IR system for XML documents with Lucene and I was checking
> > the
> > explain() output for some queries, but I don't understand this part:
> >
> > 0.121383816 = fieldWeight(title:efecto in 1), product of:
> > 1.0 = tf(termFreq(title:efecto)=1)
> > 0.7768564 = idf(docFreq=4)
> >
> > It suppose tf refears to the term's frequency in the document, but I know
> > there are more than one occurrences of this term in this document, so I
> > noted that termFreq stores the frequency of a term in the document, but
> > just
> > for the given field, like if Lucene takes a field like a whole document.
> Is
> > this correct, and if that is the case is this a good practice for IR?
> >
> > Thanks for any help or a good explanation.
> >
>

------=_Part_6500_24195065.1228327112108--

From java-user-return-37492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 18:02:09 2008
Return-Path: <java-user-return-37492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60905 invoked from network); 3 Dec 2008 18:02:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 18:02:09 -0000
Received: (qmail 43031 invoked by uid 500); 3 Dec 2008 18:02:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42985 invoked by uid 500); 3 Dec 2008 18:02:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42974 invoked by uid 99); 3 Dec 2008 18:02:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 10:02:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 18:00:43 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-2022-JP"
Content-Transfer-Encoding: 7bit
Subject: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Date: Wed, 3 Dec 2008 13:01:25 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43032BE02E@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Thread-Index: AclVcSg/F2MQk0ArTi2OKC8kYHqIYQ==
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

My application died throwing NPE inside SegmentReader.getNorms().

Exception in thread "main" java.lang.NullPointerException
        at java.util.Hashtable.get(Hashtable.java:336)
        at org.apache.lucene.index.SegmentReader.getNorms(SegmentReader.java:438)
        at org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:450)
        at org.apache.lucene.search.spans.SpanWeight.scorer(SpanWeight.java:72)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:130)
        at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:111)
        at org.apache.lucene.search.Searcher.search(Searcher.java:77) 

Is there any known Lucene bug that might cause this?
I'm using Lucene 2.1.0.
--------
Basis Technology Corporation, San Francisco
T. "Kuro" Kurosaka

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 18:40:19 2008
Return-Path: <java-user-return-37493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95826 invoked from network); 3 Dec 2008 18:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 18:40:19 -0000
Received: (qmail 94741 invoked by uid 500); 3 Dec 2008 18:40:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94317 invoked by uid 500); 3 Dec 2008 18:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94306 invoked by uid 99); 3 Dec 2008 18:40:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 10:40:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 18:38:55 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-2022-JP"
Content-Transfer-Encoding: 7bit
Subject: RE: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Date: Wed, 3 Dec 2008 13:39:40 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43032BE04F@mail3.basistech.net>
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43032BE02E@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Thread-Index: AclVcSg/F2MQk0ArTi2OKC8kYHqIYQABJ/Pw
References: <E95FD77F0171D14DA1EEE0A785E92B43032BE02E@mail3.basistech.net>
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello again,
A debugging session shows that
SpanWeight.query.field is null when SpanWeight.scorer() is being executed.
API doc says getField() is to "Returns the name of the field matched by this query."
Am I right to assume that this field is set by a search mechanism within Lucene,
not by my code?

> -----Original Message-----
> From: Teruhiko Kurosaka 
> Sent: Wednesday, December 03, 2008 10:01 AM
> To: java-user@lucene.apache.org
> Subject: NPE inside org.apache.lucene.index.SegmentReader.getNorms
> 
> My application died throwing NPE inside SegmentReader.getNorms().
> 
> Exception in thread "main" java.lang.NullPointerException
>         at java.util.Hashtable.get(Hashtable.java:336)
>         at 
> org.apache.lucene.index.SegmentReader.getNorms(SegmentReader.java:438)
>         at 
> org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:450)
>         at 
> org.apache.lucene.search.spans.SpanWeight.scorer(SpanWeight.java:72)
>         at 
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:130)
>         at 
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:111)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:77) 
> 
> Is there any known Lucene bug that might cause this?
> I'm using Lucene 2.1.0.
> --------
> Basis Technology Corporation, San Francisco T. "Kuro" Kurosaka
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 18:47:54 2008
Return-Path: <java-user-return-37494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99160 invoked from network); 3 Dec 2008 18:47:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 18:47:54 -0000
Received: (qmail 5164 invoked by uid 500); 3 Dec 2008 18:47:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5133 invoked by uid 500); 3 Dec 2008 18:47:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5122 invoked by uid 99); 3 Dec 2008 18:47:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 10:47:59 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 18:46:30 +0000
Received: by qw-out-2122.google.com with SMTP id 5so815671qwi.53
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 10:47:07 -0800 (PST)
Received: by 10.215.101.1 with SMTP id d1mr13813312qam.51.1228330027174;
        Wed, 03 Dec 2008 10:47:07 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 7sm8040111qwf.57.2008.12.03.10.47.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 03 Dec 2008 10:47:06 -0800 (PST)
Message-Id: <7838F15E-7D98-4B51-8D4C-140699A6DEBD@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43032BE04F@mail3.basistech.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Date: Wed, 3 Dec 2008 13:47:04 -0500
References: <E95FD77F0171D14DA1EEE0A785E92B43032BE02E@mail3.basistech.net> <E95FD77F0171D14DA1EEE0A785E92B43032BE04F@mail3.basistech.net>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Actually I think something "outside" Lucene is probably setting that  
field.

How did you create the Query that you are searching on?

Mike

Teruhiko Kurosaka wrote:

> Hello again,
> A debugging session shows that
> SpanWeight.query.field is null when SpanWeight.scorer() is being  
> executed.
> API doc says getField() is to "Returns the name of the field matched  
> by this query."
> Am I right to assume that this field is set by a search mechanism  
> within Lucene,
> not by my code?
>
>> -----Original Message-----
>> From: Teruhiko Kurosaka
>> Sent: Wednesday, December 03, 2008 10:01 AM
>> To: java-user@lucene.apache.org
>> Subject: NPE inside org.apache.lucene.index.SegmentReader.getNorms
>>
>> My application died throwing NPE inside SegmentReader.getNorms().
>>
>> Exception in thread "main" java.lang.NullPointerException
>>        at java.util.Hashtable.get(Hashtable.java:336)
>>        at
>> org.apache.lucene.index.SegmentReader.getNorms(SegmentReader.java: 
>> 438)
>>        at
>> org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:450)
>>        at
>> org.apache.lucene.search.spans.SpanWeight.scorer(SpanWeight.java:72)
>>        at
>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:130)
>>        at
>> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:111)
>>        at org.apache.lucene.search.Searcher.search(Searcher.java:77)
>>
>> Is there any known Lucene bug that might cause this?
>> I'm using Lucene 2.1.0.
>> --------
>> Basis Technology Corporation, San Francisco T. "Kuro" Kurosaka
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 22:03:29 2008
Return-Path: <java-user-return-37495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79501 invoked from network); 3 Dec 2008 22:03:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 22:03:29 -0000
Received: (qmail 93327 invoked by uid 500); 3 Dec 2008 22:03:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93296 invoked by uid 500); 3 Dec 2008 22:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93279 invoked by uid 99); 3 Dec 2008 22:03:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 14:03:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 22:02:05 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3766537wfc.20
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 14:02:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=RnbHSr9PAjV52x2qFDnM9QgnixwUJFRRnyu+elJEgCc=;
        b=iW1mK90N4die9uJAnAHsJKEAHeNMA7iYvQvT1z5cpc2XsRscR5M8hMbz77LPRYTCZ0
         dlI9iQJNGGNAkT2lnY7tq2cHRUakThzlYm2aW+lCD7TYiBYgR/PRK9giNy3WCQrCFBM7
         nQ7syKNiJt8ilI692JkmbVx1tXFeL4ZEYIduc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hGpLY64mRFX+P0SiLjpoQZc3+uTtKLXFxwFhMLk4P3aOAS75x1pYGqzkp1r3VtqOW3
         oJMK0FbY1q+3IaNsMUvdrI4+DgrivGxX+M1VXRmr5JlZR5zjdyR4dKpcMPpvPXTHFofs
         4ccKJBYC+4z/Lyx8NWZwncqzpQmWUzvHwbLwU=
Received: by 10.114.94.12 with SMTP id r12mr8504259wab.156.1228341763663;
        Wed, 03 Dec 2008 14:02:43 -0800 (PST)
Received: by 10.114.147.5 with HTTP; Wed, 3 Dec 2008 14:02:43 -0800 (PST)
Message-ID: <6d6cf45b0812031402o64774bfkea55e29d0259988a@mail.gmail.com>
Date: Wed, 3 Dec 2008 14:02:43 -0800
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Names in Lucene -- Thomas = Tom, etc
In-Reply-To: <120201c9552b$67265590$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_77822_16853396.1228341763646"
References: <6d6cf45b0812022216i29e94110q29372c575401ea60@mail.gmail.com>
	 <120201c9552b$67265590$330bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_77822_16853396.1228341763646
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,   Yes that is pretty obvious that I would have to index Tom, but I think
you missed the point. I don't have a list of names with their nick names,
and this is pretty common: Mike being Michael, Richard being Rich or Dick,
William could be Bill or Will, etc. I thought I would check if there was a
canonical way of doing this before building my own list from common sir
names.  Thanks for your time.


Sincerely,
Khawaja Shams

On Wed, Dec 3, 2008 at 1:42 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> If you want to query for Tom, then you need to index the value Tom. Create
> one more field as Alias or add alias name as part of name field.
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Khawaja Shams" <ksshams@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Wednesday, December 03, 2008 11:46 AM
> Subject: Indexing Names in Lucene -- Thomas = Tom, etc
>
>
>
>  Hello,  I am indexing documents with a field that contains the first and
>> last name of people. It is working wonderfully with a slight issue: if
>> Thomas is indexed for a document, I would like searches for Tom to match
>> that document. I am sure this is a common problem that many of you must
>> have
>> addressed, but I was unable to find anything in the archives or on Google.
>> Thanks in advance for the guidance.
>>
>>
>> Regards,
>> Khawaja Shams
>>
>>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_77822_16853396.1228341763646--

From java-user-return-37496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 03 23:26:14 2008
Return-Path: <java-user-return-37496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13875 invoked from network); 3 Dec 2008 23:26:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2008 23:26:12 -0000
Received: (qmail 14755 invoked by uid 500); 3 Dec 2008 23:26:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14724 invoked by uid 500); 3 Dec 2008 23:26:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14704 invoked by uid 99); 3 Dec 2008 23:26:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 15:26:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 23:24:45 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Date: Wed, 3 Dec 2008 18:25:08 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43032BE0C7@mail3.basistech.net>
In-Reply-To: <7838F15E-7D98-4B51-8D4C-140699A6DEBD@mikemccandless.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Thread-Index: AclVd6kRxCAigXglQGuufP/pPEFZ+QAJhfdQ
References: <E95FD77F0171D14DA1EEE0A785E92B43032BE02E@mail3.basistech.net> <E95FD77F0171D14DA1EEE0A785E92B43032BE04F@mail3.basistech.net> <7838F15E-7D98-4B51-8D4C-140699A6DEBD@mikemccandless.com>
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,
You are right.  There was an error on my part. I think
I was, in effect, making a SpanNearQuery object of:
   new SpanNearQuery(new SpanQuery[0], 0, true);


> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
> Sent: Wednesday, December 03, 2008 10:47 AM
> To: java-user@lucene.apache.org
> Subject: Re: NPE inside org.apache.lucene.index.SegmentReader.getNorms
>=20
>=20
> Actually I think something "outside" Lucene is probably=20
> setting that field.
>=20
> How did you create the Query that you are searching on?
>=20
> Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 02:02:54 2008
Return-Path: <java-user-return-37497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97347 invoked from network); 4 Dec 2008 02:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 02:02:53 -0000
Received: (qmail 21296 invoked by uid 500); 4 Dec 2008 02:03:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20879 invoked by uid 500); 4 Dec 2008 02:02:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20868 invoked by uid 99); 4 Dec 2008 02:02:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 18:02:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 02:01:29 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1554895yxj.5
        for <java-user@lucene.apache.org>; Wed, 03 Dec 2008 18:02:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=dYSboo/NacOiEtvaReGJ2/JeGRy+KiBIgAZg6LmJdko=;
        b=f/AncioLha2HZLCIU4KJGN+pLr5yUL3zxJ9e0R5hQ+nPktsKNoo4hl2vna5QLxudUh
         CsNObuCiT4HDcXofAvQ32unJb+IjOLTo2J7PyZo7Y/WLMYc9KyRLHQSARDxv73TyxwAI
         0GwqGUg2l9SPygh7BZsLlCQX7KyxzmIbPD0zc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=IVeCLh82ET/Cd2Gi95X9DQtd9vbMOO+PLodbUSCWGKaqFe2QteJ0ROlaLP+qsl0YGV
         vqV7slhPIff5AAye2b6esKePSCyAxKzyEFAJxn/CasmJZOLH1IV/eoIDYBpRw6iGkjJx
         aA/L5wIDhCi1nKGZiFS6BTNis4mAoXnzo0xZA=
Received: by 10.90.98.13 with SMTP id v13mr7754948agb.28.1228356136520;
        Wed, 03 Dec 2008 18:02:16 -0800 (PST)
Received: from ?192.168.1.101? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 6sm8559985agd.37.2008.12.03.18.02.15
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 03 Dec 2008 18:02:15 -0800 (PST)
Message-Id: <7D686F9C-11AF-4085-B8CE-66AD37FA0FCA@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43032BE0C7@mail3.basistech.net>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Date: Wed, 3 Dec 2008 21:02:12 -0500
References: <E95FD77F0171D14DA1EEE0A785E92B43032BE02E@mail3.basistech.net> <E95FD77F0171D14DA1EEE0A785E92B43032BE04F@mail3.basistech.net> <7838F15E-7D98-4B51-8D4C-140699A6DEBD@mikemccandless.com> <E95FD77F0171D14DA1EEE0A785E92B43032BE0C7@mail3.basistech.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds familiar. This may actually be in JIRA already.

- Mark


On Dec 3, 2008, at 6:25 PM, "Teruhiko Kurosaka" <Kuro@basistech.com>  
wrote:

> Mike,
> You are right.  There was an error on my part. I think
> I was, in effect, making a SpanNearQuery object of:
>   new SpanNearQuery(new SpanQuery[0], 0, true);
>
>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: Wednesday, December 03, 2008 10:47 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: NPE inside  
>> org.apache.lucene.index.SegmentReader.getNorms
>>
>>
>> Actually I think something "outside" Lucene is probably
>> setting that field.
>>
>> How did you create the Query that you are searching on?
>>
>> Mike
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 06:27:27 2008
Return-Path: <java-user-return-37498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98337 invoked from network); 4 Dec 2008 06:27:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 06:27:27 -0000
Received: (qmail 27940 invoked by uid 500); 4 Dec 2008 06:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27907 invoked by uid 500); 4 Dec 2008 06:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27896 invoked by uid 99); 4 Dec 2008 06:27:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 03 Dec 2008 22:27:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rundis@mac.com designates 17.148.16.87 as permitted sender)
Received: from [17.148.16.87] (HELO asmtpout012.mac.com) (17.148.16.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 06:26:02 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Received: from rundis.systemdesign.no ([158.112.85.114])
 by asmtp012.mac.com (Sun Java(tm) System Messaging Server 6.3-7.03 (built Aug
 7 2008; 32bit)) with ESMTPSA id <0KBC007QD9WLMS30@asmtp012.mac.com> for
 java-user@lucene.apache.org; Wed, 03 Dec 2008 22:26:49 -0800 (PST)
Message-id: <A5F41D65-151C-4AEA-8746-408B3C545227@mac.com>
From: Magnus Rundberget <rundis@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com>
Subject: Re: lucene nicking my memory ?
Date: Thu, 04 Dec 2008 07:27:14 +0100
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com>
 <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com>
 <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com>
 <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Well...

after various tests I downgraded to lucene 1.9.1 to see if that had  
any effect... doesn't seem that way.

I have set up a JMeter test with 5 concurrent users doing a search (a  
silly search for a two letter word) every 3 seconds (with a random of  
+/- 500ms).

- With 512 MB xms/xmx memory usage settles between 400/500 after a few  
iterations, but no OOME.
At the end of the run memory settles usually between 200-300 somewhere  
(really depends), but no cleanup occurs for minutes ...unless I do a  
forced GC.

- Did the same run with 384MB and hit 2 OOME

- Did the same run with 256MB and hit 5 or 6 OOME

Tried to run tomcat with jdk 1.6 and -server option as well, but  
didn't seem to help at all either.

The finally I ran the test scenario above but with 1536MB xms/xmx...  
and guess what. It used it all pretty quickly. It used between  
1000-1400/1500 for most of the run. At the end of the run memory usage  
settled at about 750 MB ... until I did a forced gc.
This do bother me, if the solution could have been to throw more  
memory at the problem I could live with that, but it just seems to  
consume all memory it can get it hands on (:-
Is there any way to limit the memory usage in Lucene (configuration) ?

Im obviously not sure if lucene is the culprit as Im using spring  
(2.5) , hibernate (3.3) and open session in view and lots of other  
stuff etc in my app. So I guess my next step would be to create a very  
limited web app with just a servlet calling the lucene api.Then do  
some profiling on that.

cheers
Magnus









On 3. des.. 2008, at 14.45, Michael McCandless wrote:

>
> Are you actually hitting OOME?
>
> Or, you're watching heap usage and it bothers you that the GC is  
> taking a long time (allowing too much garbage to use up heap space)  
> before sweeping?
>
> One thing to try (only for testing) might be a lower and lower -Xmx  
> until you do hit OOME; then you'll know the "real" memory usage of  
> the app.
>
> Mike
>
> Magnus Rundberget wrote:
>
>> Sure,
>>
>> Tried with the following
>> Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12 (production)
>> OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003  
>> (production)
>> Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in dev  
>> and production)
>>
>>
>> current jvm options
>> -Xms512m -Xmx1024M -XX:MaxPermSize=256m
>> ... tried a few gc settings as well but nothing that has helped  
>> (rather slowed things down)
>>
>> production hw running 2 XEON dual core processors
>>
>> in production our memory reaches the 1024 limit after a while (a  
>> few hours) and at some point it stops responding to forced gc  
>> (using jconsole).
>>
>> need to digg quite a bit more to figure out the exact prod  
>> settings. But safe to say the memory usage pattern can be recreated  
>> on different hardware configs, with different os's, different 1.5  
>> jvms and different containers (jetty and tomcat).
>>
>>
>>
>> cheers
>> Magnus
>>
>>
>>
>> On 3. des.. 2008, at 13.10, Glen Newton wrote:
>>
>>> Hi Magnus,
>>>
>>> Could you post the OS, version, RAM size, swapsize, Java VM version,
>>> hardware, #cores, VM command line parameters, etc? This can be very
>>> relevant.
>>>
>>> Have you tried other garbage collectors and/or tuning as described  
>>> in
>>> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>>>
>>> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>>>> Hi,
>>>>
>>>> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
>>>> Our index is about 100MB (in test) and has about 20 indexed fields.
>>>>
>>>> Performance is pretty good, but we are experiencing a very high  
>>>> usage of
>>>> memory when searching.
>>>>
>>>> Looking at JConsole during a somewhat silly scenario (but  
>>>> illustrates the
>>>> problem);
>>>> (Allocated 512 MB Min heap space, max 1024)
>>>>
>>>> 0. Initially memory usage is about 70MB
>>>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>>>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
>>>> 2. Search by word "og", heap memory usage goes up another 50-100MB
>>>> 2.1 See 1.1
>>>>
>>>> ...and so on until it seems to reach the 512 MB limit, and then a  
>>>> garbage
>>>> collection is performed
>>>> i.e garbage collection doesn't seem to occur until it "hits the  
>>>> roof"
>>>>
>>>> We believe the scenario is similar in production, were our heap  
>>>> space is
>>>> limited to 1.5 GB.
>>>>
>>>>
>>>> Our search is basically as follows
>>>> ----------------------------------------------
>>>> 1. Open an IndexSearcher
>>>> 2. Build a Boolean Query searching across 4 fields (title,  
>>>> summary, content
>>>> and daterangestring YYYYMMDD)
>>>> 2.1 Sort on title
>>>> 3. Perform search
>>>> 4. Iterate over hits to build a set of custom result objects  
>>>> (pretty small,
>>>> as we dont include content in these)
>>>> 5. Close searcher
>>>> 6. Return result objects.
>>>
>>> You should not close the searcher: it can be shared by all queries.
>>> What happens when you warm Lucene with a (large) number of  
>>> queries: do
>>> things stabilize over time?
>>>
>>> A 100MB index is (relatively) very small for Lucene (I have indexes
>>>> 100GB). What kind of response times are you getting, independent of
>>> memory usage.
>>>
>>> -glen
>>>
>>>>
>>>> We have tried various options based on entries on this mailing  
>>>> list;
>>>> a) Cache the IndexSearcher - Same results
>>>> b) Remove sorting - Same result
>>>> c) In point 4 only iterating over a limited amount of hits rather  
>>>> than whole
>>>> collection - Same result in terms of memory usage, but obviously  
>>>> increased
>>>> performance
>>>> d) Using RamDirectory vs FSDirectory - Same result only initial  
>>>> heap usage
>>>> is higher using ramdirectory (in conjuction with cached  
>>>> indexsearcher)
>>>>
>>>>
>>>> Doing some profiling using YourKit shows a huge number of char[],  
>>>> int[] and
>>>> string[], and ever increasing number of lucene related objects.
>>>>
>>>>
>>>>
>>>> Reading through the mailing lists, suspicions are that our  
>>>> problem is
>>>> related to ThreadLocals and memory not being released. Noticed  
>>>> that there
>>>> was a related patch for this in 2.4.0, but it doesn't seem to  
>>>> help us much.
>>>>
>>>> Any ideas ?
>>>>
>>>> kind regards
>>>> Magnus
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>>
>>> -- 
>>>
>>> -
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 08:31:21 2008
Return-Path: <java-user-return-37499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42024 invoked from network); 4 Dec 2008 08:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 08:31:18 -0000
Received: (qmail 33596 invoked by uid 500); 4 Dec 2008 08:31:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33566 invoked by uid 500); 4 Dec 2008 08:31:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33555 invoked by uid 99); 4 Dec 2008 08:31:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 00:31:22 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 08:29:54 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1990177wag.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 00:30:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=+gNkENTVXivTfa0xjAr9asrzOH2sltzSdkvFwju6KP0=;
        b=Ek6LqaeWoRlK0HTTZux9pq6PFWZho3f0HEEefEyYytD4HkNUd0SusM73v8rct854qL
         /1wVLy9abZbJxLWj3Cx196z9tkTKFywdWFfOExhPjeivqoAVaspSVn9xFpcA/ZxwVPgO
         t2CBQBktOiclpdLryI7x1+73ZGUaO5rjZjdYg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=BncomKfuzB/vtEokU6V9XMtqt/y/oCkQj7KvLBcSmI5RHOlRuQzMsf3JziDQGQ+Yxc
         irBP3dpHkbJzbejDOv+4V3NC/W9Ch3KaOTaCbXe6CdMPF/dOfkW21c9Z3mh+GHLCIzgM
         20b2g3XB2lAkocEy3GHFbMqun+9oHLWCEV0A0=
Received: by 10.115.18.1 with SMTP id v1mr8819588wai.175.1228379442426;
        Thu, 04 Dec 2008 00:30:42 -0800 (PST)
Received: by 10.114.147.5 with HTTP; Thu, 4 Dec 2008 00:30:42 -0800 (PST)
Message-ID: <6d6cf45b0812040030u44a8c21boba6b60aefe4637e9@mail.gmail.com>
Date: Thu, 4 Dec 2008 00:30:42 -0800
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene nicking my memory ?
In-Reply-To: <A5F41D65-151C-4AEA-8746-408B3C545227@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1922_281301.1228379442419"
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com>
	 <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com>
	 <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com>
	 <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com>
	 <A5F41D65-151C-4AEA-8746-408B3C545227@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1922_281301.1228379442419
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Magnus,   If you get a chance, can you try setting a different xms and xmx
value. For instance, try xms384M and xmx1024M.


 The "forced" GC [request] will almost always reduce the memory footprint
simply because of the weak references that lucene leverages, but I bet
subsequent queries are not as fast and you basically need to warm up your
server after the GC (which would boost up the footprint again :) ).



Regards,
Khawaja

On Wed, Dec 3, 2008 at 10:27 PM, Magnus Rundberget <rundis@mac.com> wrote:

> Well...
>
> after various tests I downgraded to lucene 1.9.1 to see if that had any
> effect... doesn't seem that way.
>
> I have set up a JMeter test with 5 concurrent users doing a search (a silly
> search for a two letter word) every 3 seconds (with a random of +/- 500ms).
>
> - With 512 MB xms/xmx memory usage settles between 400/500 after a few
> iterations, but no OOME.
> At the end of the run memory settles usually between 200-300 somewhere
> (really depends), but no cleanup occurs for minutes ...unless I do a forced
> GC.
>
> - Did the same run with 384MB and hit 2 OOME
>
> - Did the same run with 256MB and hit 5 or 6 OOME
>
> Tried to run tomcat with jdk 1.6 and -server option as well, but didn't
> seem to help at all either.
>
> The finally I ran the test scenario above but with 1536MB xms/xmx... and
> guess what. It used it all pretty quickly. It used between 1000-1400/1500
> for most of the run. At the end of the run memory usage settled at about 750
> MB ... until I did a forced gc.
> This do bother me, if the solution could have been to throw more memory at
> the problem I could live with that, but it just seems to consume all memory
> it can get it hands on (:-
> Is there any way to limit the memory usage in Lucene (configuration) ?
>
> Im obviously not sure if lucene is the culprit as Im using spring (2.5) ,
> hibernate (3.3) and open session in view and lots of other stuff etc in my
> app. So I guess my next step would be to create a very limited web app with
> just a servlet calling the lucene api.Then do some profiling on that.
>
> cheers
> Magnus
>
>
>
>
>
>
>
>
>
>
> On 3. des.. 2008, at 14.45, Michael McCandless wrote:
>
>
>> Are you actually hitting OOME?
>>
>> Or, you're watching heap usage and it bothers you that the GC is taking a
>> long time (allowing too much garbage to use up heap space) before sweeping?
>>
>> One thing to try (only for testing) might be a lower and lower -Xmx until
>> you do hit OOME; then you'll know the "real" memory usage of the app.
>>
>> Mike
>>
>> Magnus Rundberget wrote:
>>
>>  Sure,
>>>
>>> Tried with the following
>>> Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12 (production)
>>> OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003 (production)
>>> Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in dev and
>>> production)
>>>
>>>
>>> current jvm options
>>> -Xms512m -Xmx1024M -XX:MaxPermSize=256m
>>> ... tried a few gc settings as well but nothing that has helped (rather
>>> slowed things down)
>>>
>>> production hw running 2 XEON dual core processors
>>>
>>> in production our memory reaches the 1024 limit after a while (a few
>>> hours) and at some point it stops responding to forced gc (using jconsole).
>>>
>>> need to digg quite a bit more to figure out the exact prod settings. But
>>> safe to say the memory usage pattern can be recreated on different hardware
>>> configs, with different os's, different 1.5 jvms and different containers
>>> (jetty and tomcat).
>>>
>>>
>>>
>>> cheers
>>> Magnus
>>>
>>>
>>>
>>> On 3. des.. 2008, at 13.10, Glen Newton wrote:
>>>
>>>  Hi Magnus,
>>>>
>>>> Could you post the OS, version, RAM size, swapsize, Java VM version,
>>>> hardware, #cores, VM command line parameters, etc? This can be very
>>>> relevant.
>>>>
>>>> Have you tried other garbage collectors and/or tuning as described in
>>>> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>>>>
>>>> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>>>>
>>>>> Hi,
>>>>>
>>>>> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
>>>>> Our index is about 100MB (in test) and has about 20 indexed fields.
>>>>>
>>>>> Performance is pretty good, but we are experiencing a very high usage
>>>>> of
>>>>> memory when searching.
>>>>>
>>>>> Looking at JConsole during a somewhat silly scenario (but illustrates
>>>>> the
>>>>> problem);
>>>>> (Allocated 512 MB Min heap space, max 1024)
>>>>>
>>>>> 0. Initially memory usage is about 70MB
>>>>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>>>>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
>>>>> 2. Search by word "og", heap memory usage goes up another 50-100MB
>>>>> 2.1 See 1.1
>>>>>
>>>>> ...and so on until it seems to reach the 512 MB limit, and then a
>>>>> garbage
>>>>> collection is performed
>>>>> i.e garbage collection doesn't seem to occur until it "hits the roof"
>>>>>
>>>>> We believe the scenario is similar in production, were our heap space
>>>>> is
>>>>> limited to 1.5 GB.
>>>>>
>>>>>
>>>>> Our search is basically as follows
>>>>> ----------------------------------------------
>>>>> 1. Open an IndexSearcher
>>>>> 2. Build a Boolean Query searching across 4 fields (title, summary,
>>>>> content
>>>>> and daterangestring YYYYMMDD)
>>>>> 2.1 Sort on title
>>>>> 3. Perform search
>>>>> 4. Iterate over hits to build a set of custom result objects (pretty
>>>>> small,
>>>>> as we dont include content in these)
>>>>> 5. Close searcher
>>>>> 6. Return result objects.
>>>>>
>>>>
>>>> You should not close the searcher: it can be shared by all queries.
>>>> What happens when you warm Lucene with a (large) number of queries: do
>>>> things stabilize over time?
>>>>
>>>> A 100MB index is (relatively) very small for Lucene (I have indexes
>>>>
>>>>> 100GB). What kind of response times are you getting, independent of
>>>>>
>>>> memory usage.
>>>>
>>>> -glen
>>>>
>>>>
>>>>> We have tried various options based on entries on this mailing list;
>>>>> a) Cache the IndexSearcher - Same results
>>>>> b) Remove sorting - Same result
>>>>> c) In point 4 only iterating over a limited amount of hits rather than
>>>>> whole
>>>>> collection - Same result in terms of memory usage, but obviously
>>>>> increased
>>>>> performance
>>>>> d) Using RamDirectory vs FSDirectory - Same result only initial heap
>>>>> usage
>>>>> is higher using ramdirectory (in conjuction with cached indexsearcher)
>>>>>
>>>>>
>>>>> Doing some profiling using YourKit shows a huge number of char[], int[]
>>>>> and
>>>>> string[], and ever increasing number of lucene related objects.
>>>>>
>>>>>
>>>>>
>>>>> Reading through the mailing lists, suspicions are that our problem is
>>>>> related to ThreadLocals and memory not being released. Noticed that
>>>>> there
>>>>> was a related patch for this in 2.4.0, but it doesn't seem to help us
>>>>> much.
>>>>>
>>>>> Any ideas ?
>>>>>
>>>>> kind regards
>>>>> Magnus
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>>
>>>> -
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1922_281301.1228379442419--

From java-user-return-37500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 08:48:20 2008
Return-Path: <java-user-return-37500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48518 invoked from network); 4 Dec 2008 08:48:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 08:48:20 -0000
Received: (qmail 62036 invoked by uid 500); 4 Dec 2008 08:48:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62010 invoked by uid 500); 4 Dec 2008 08:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61999 invoked by uid 99); 4 Dec 2008 08:48:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 00:48:24 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 08:46:55 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4810791rvb.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 00:47:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=2kK/idODSO6anf6Wt5rbsJAsgvo2D8bH/yYLmNxRxFU=;
        b=IqyOXSnuWbPcjsvhiiFWbXWXt6RYVibeUEonSSENiB7SxSEWn0LqvfFf69jm8mRm8r
         qxHi0+btsHTahO624nCv/HorczvR3bR+WTytWO66xKp4F3ifgYqpo8W9mzyY/fAWX6Gy
         LxhFn9csl3m+rqm/BRnPtnL3wYJuHnHXDV/E0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=i0QsVX9+6m1voIRDJE53RxZw/InCOI7buoWYtUH8fmt/8Pv4/NVHVTlDH+hV7WNyZP
         4XD5/KxVMmWYZmbSIjMrQk45m8gD08M9tA+62eAjhftjP3MQlFEc8jFLGPMbVuNUyBue
         eKcM8ftLWjDTYQA41xnZUL8WeSPKRM5o7KLxo=
Received: by 10.114.60.19 with SMTP id i19mr8843129waa.62.1228380451819;
        Thu, 04 Dec 2008 00:47:31 -0800 (PST)
Received: by 10.114.147.5 with HTTP; Thu, 4 Dec 2008 00:47:31 -0800 (PST)
Message-ID: <6d6cf45b0812040047n2ab3f793ua39b4acb0e7042d5@mail.gmail.com>
Date: Thu, 4 Dec 2008 00:47:31 -0800
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene nicking my memory ?
In-Reply-To: <6d6cf45b0812040030u44a8c21boba6b60aefe4637e9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1964_2185548.1228380451820"
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com>
	 <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com>
	 <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com>
	 <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com>
	 <A5F41D65-151C-4AEA-8746-408B3C545227@mac.com>
	 <6d6cf45b0812040030u44a8c21boba6b60aefe4637e9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1964_2185548.1228380451820
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Magnus,     Please feel free to ignore my last email; I see that you had
this setup earlier.  As far as using up all the memory it can get its hands
on, this is actually a good thing. This allows Lucene and other java
applications to keep more things in cache when more memory is available.
Also, if you throw more memory at the program, the GC will try to spend
little effort in cleaning up until it is necessary. By setting xmx to 1536M,
you are effectively telling the jvm that you have this much memory available
for the java program.  Therefore, there is no reason for the GC to waste any
more resources when the program is taking 1300M of ram. I think you should
not worry until you start throwing OOMEs even after you have allocated the
1536M.


Is the program still responsive even after it hits the "peak" memory
utilization? You said that the gc request was not being honored, but it is
unclear if the queries are returning at that point.  Lastly, I highly
recommend against ever making the gc requests.



Regards,
Khawaja Shams

On Thu, Dec 4, 2008 at 12:30 AM, Khawaja Shams <ksshams@gmail.com> wrote:

> Magnus,   If you get a chance, can you try setting a different xms and xmx
> value. For instance, try xms384M and xmx1024M.
>
>
>  The "forced" GC [request] will almost always reduce the memory footprint
> simply because of the weak references that lucene leverages, but I bet
> subsequent queries are not as fast and you basically need to warm up your
> server after the GC (which would boost up the footprint again :) ).
>
>
>
> Regards,
> Khawaja
>
>
> On Wed, Dec 3, 2008 at 10:27 PM, Magnus Rundberget <rundis@mac.com> wrote:
>
>> Well...
>>
>> after various tests I downgraded to lucene 1.9.1 to see if that had any
>> effect... doesn't seem that way.
>>
>> I have set up a JMeter test with 5 concurrent users doing a search (a
>> silly search for a two letter word) every 3 seconds (with a random of +/-
>> 500ms).
>>
>> - With 512 MB xms/xmx memory usage settles between 400/500 after a few
>> iterations, but no OOME.
>> At the end of the run memory settles usually between 200-300 somewhere
>> (really depends), but no cleanup occurs for minutes ...unless I do a forced
>> GC.
>>
>> - Did the same run with 384MB and hit 2 OOME
>>
>> - Did the same run with 256MB and hit 5 or 6 OOME
>>
>> Tried to run tomcat with jdk 1.6 and -server option as well, but didn't
>> seem to help at all either.
>>
>> The finally I ran the test scenario above but with 1536MB xms/xmx... and
>> guess what. It used it all pretty quickly. It used between 1000-1400/1500
>> for most of the run. At the end of the run memory usage settled at about 750
>> MB ... until I did a forced gc.
>> This do bother me, if the solution could have been to throw more memory at
>> the problem I could live with that, but it just seems to consume all memory
>> it can get it hands on (:-
>> Is there any way to limit the memory usage in Lucene (configuration) ?
>>
>> Im obviously not sure if lucene is the culprit as Im using spring (2.5) ,
>> hibernate (3.3) and open session in view and lots of other stuff etc in my
>> app. So I guess my next step would be to create a very limited web app with
>> just a servlet calling the lucene api.Then do some profiling on that.
>>
>> cheers
>> Magnus
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> On 3. des.. 2008, at 14.45, Michael McCandless wrote:
>>
>>
>>> Are you actually hitting OOME?
>>>
>>> Or, you're watching heap usage and it bothers you that the GC is taking a
>>> long time (allowing too much garbage to use up heap space) before sweeping?
>>>
>>> One thing to try (only for testing) might be a lower and lower -Xmx until
>>> you do hit OOME; then you'll know the "real" memory usage of the app.
>>>
>>> Mike
>>>
>>> Magnus Rundberget wrote:
>>>
>>>  Sure,
>>>>
>>>> Tried with the following
>>>> Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12 (production)
>>>> OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003
>>>> (production)
>>>> Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in dev and
>>>> production)
>>>>
>>>>
>>>> current jvm options
>>>> -Xms512m -Xmx1024M -XX:MaxPermSize=256m
>>>> ... tried a few gc settings as well but nothing that has helped (rather
>>>> slowed things down)
>>>>
>>>> production hw running 2 XEON dual core processors
>>>>
>>>> in production our memory reaches the 1024 limit after a while (a few
>>>> hours) and at some point it stops responding to forced gc (using jconsole).
>>>>
>>>> need to digg quite a bit more to figure out the exact prod settings. But
>>>> safe to say the memory usage pattern can be recreated on different hardware
>>>> configs, with different os's, different 1.5 jvms and different containers
>>>> (jetty and tomcat).
>>>>
>>>>
>>>>
>>>> cheers
>>>> Magnus
>>>>
>>>>
>>>>
>>>> On 3. des.. 2008, at 13.10, Glen Newton wrote:
>>>>
>>>>  Hi Magnus,
>>>>>
>>>>> Could you post the OS, version, RAM size, swapsize, Java VM version,
>>>>> hardware, #cores, VM command line parameters, etc? This can be very
>>>>> relevant.
>>>>>
>>>>> Have you tried other garbage collectors and/or tuning as described in
>>>>> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>>>>>
>>>>> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
>>>>>> Our index is about 100MB (in test) and has about 20 indexed fields.
>>>>>>
>>>>>> Performance is pretty good, but we are experiencing a very high usage
>>>>>> of
>>>>>> memory when searching.
>>>>>>
>>>>>> Looking at JConsole during a somewhat silly scenario (but illustrates
>>>>>> the
>>>>>> problem);
>>>>>> (Allocated 512 MB Min heap space, max 1024)
>>>>>>
>>>>>> 0. Initially memory usage is about 70MB
>>>>>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>>>>>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
>>>>>> 2. Search by word "og", heap memory usage goes up another 50-100MB
>>>>>> 2.1 See 1.1
>>>>>>
>>>>>> ...and so on until it seems to reach the 512 MB limit, and then a
>>>>>> garbage
>>>>>> collection is performed
>>>>>> i.e garbage collection doesn't seem to occur until it "hits the roof"
>>>>>>
>>>>>> We believe the scenario is similar in production, were our heap space
>>>>>> is
>>>>>> limited to 1.5 GB.
>>>>>>
>>>>>>
>>>>>> Our search is basically as follows
>>>>>> ----------------------------------------------
>>>>>> 1. Open an IndexSearcher
>>>>>> 2. Build a Boolean Query searching across 4 fields (title, summary,
>>>>>> content
>>>>>> and daterangestring YYYYMMDD)
>>>>>> 2.1 Sort on title
>>>>>> 3. Perform search
>>>>>> 4. Iterate over hits to build a set of custom result objects (pretty
>>>>>> small,
>>>>>> as we dont include content in these)
>>>>>> 5. Close searcher
>>>>>> 6. Return result objects.
>>>>>>
>>>>>
>>>>> You should not close the searcher: it can be shared by all queries.
>>>>> What happens when you warm Lucene with a (large) number of queries: do
>>>>> things stabilize over time?
>>>>>
>>>>> A 100MB index is (relatively) very small for Lucene (I have indexes
>>>>>
>>>>>> 100GB). What kind of response times are you getting, independent of
>>>>>>
>>>>> memory usage.
>>>>>
>>>>> -glen
>>>>>
>>>>>
>>>>>> We have tried various options based on entries on this mailing list;
>>>>>> a) Cache the IndexSearcher - Same results
>>>>>> b) Remove sorting - Same result
>>>>>> c) In point 4 only iterating over a limited amount of hits rather than
>>>>>> whole
>>>>>> collection - Same result in terms of memory usage, but obviously
>>>>>> increased
>>>>>> performance
>>>>>> d) Using RamDirectory vs FSDirectory - Same result only initial heap
>>>>>> usage
>>>>>> is higher using ramdirectory (in conjuction with cached indexsearcher)
>>>>>>
>>>>>>
>>>>>> Doing some profiling using YourKit shows a huge number of char[],
>>>>>> int[] and
>>>>>> string[], and ever increasing number of lucene related objects.
>>>>>>
>>>>>>
>>>>>>
>>>>>> Reading through the mailing lists, suspicions are that our problem is
>>>>>> related to ThreadLocals and memory not being released. Noticed that
>>>>>> there
>>>>>> was a related patch for this in 2.4.0, but it doesn't seem to help us
>>>>>> much.
>>>>>>
>>>>>> Any ideas ?
>>>>>>
>>>>>> kind regards
>>>>>> Magnus
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> --
>>>>>
>>>>> -
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_1964_2185548.1228380451820--

From java-user-return-37501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 09:19:14 2008
Return-Path: <java-user-return-37501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62845 invoked from network); 4 Dec 2008 09:19:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 09:19:14 -0000
Received: (qmail 3976 invoked by uid 500); 4 Dec 2008 09:19:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3938 invoked by uid 500); 4 Dec 2008 09:19:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3927 invoked by uid 99); 4 Dec 2008 09:19:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 01:19:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rundis@mac.com designates 17.148.16.92 as permitted sender)
Received: from [17.148.16.92] (HELO asmtpout017.mac.com) (17.148.16.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 09:17:48 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Received: from rundis.systemdesign.no ([158.112.85.114])
 by asmtp017.mac.com (Sun Java(tm) System Messaging Server 6.3-7.03 (built Aug
 7 2008; 32bit)) with ESMTPSA id <0KBC00AM9HOL9210@asmtp017.mac.com> for
 java-user@lucene.apache.org; Thu, 04 Dec 2008 01:14:51 -0800 (PST)
Message-id: <B9C0EF37-430D-48DA-8519-888103653028@mac.com>
From: Magnus Rundberget <rundis@mac.com>
To: java-user@lucene.apache.org
In-reply-to: <6d6cf45b0812040047n2ab3f793ua39b4acb0e7042d5@mail.gmail.com>
Subject: Re: lucene nicking my memory ?
Date: Thu, 04 Dec 2008 10:15:14 +0100
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com>
 <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com>
 <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com>
 <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com>
 <A5F41D65-151C-4AEA-8746-408B3C545227@mac.com>
 <6d6cf45b0812040030u44a8c21boba6b60aefe4637e9@mail.gmail.com>
 <6d6cf45b0812040047n2ab3f793ua39b4acb0e7042d5@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

hmmm,


Well in production (1024M heap), it seems that after a while (some  
hundred user queries) the memory starts reaching the max threshold and  
when it does at some point it becomes unresponsive.
Id rather it was slightly less performant (cleaning up memory more  
frequently) than freezing up when there are "many" (not really that  
many users..) concurrently doing searches when the memory threshold is  
reached.

In dev Im not able to recreate this behavior, but by reducing  
available memory to say 384M things like OOME starts to show up when  
running a number of concurrent users.

... as mentioned earlier though it might not just be lucene it could  
be that in combination with lack of db connections or other things  
that actually cause the freeze up in production. I just still think  
its suspicious to grab all available resources and deal with the  
problem (with gc) when max available resources are reached.

I'd love to be able to tell lucene, hey you have 300Mb for your  
cache... deal with it as best as you can.
Somewhat similar to DB connections when you configure a pool of  
connections and this is what the application has available, not create  
db connections until db server starts hicking up and then release a few.

Anyways I guess we have a lot of tuning potential in the way we index  
(and what) and how we search as well.

magnus




On 4. des.. 2008, at 09.47, Khawaja Shams wrote:

> Magnus,     Please feel free to ignore my last email; I see that you  
> had
> this setup earlier.  As far as using up all the memory it can get  
> its hands
> on, this is actually a good thing. This allows Lucene and other java
> applications to keep more things in cache when more memory is  
> available.
> Also, if you throw more memory at the program, the GC will try to  
> spend
> little effort in cleaning up until it is necessary. By setting xmx  
> to 1536M,
> you are effectively telling the jvm that you have this much memory  
> available
> for the java program.  Therefore, there is no reason for the GC to  
> waste any
> more resources when the program is taking 1300M of ram. I think you  
> should
> not worry until you start throwing OOMEs even after you have  
> allocated the
> 1536M.
>
>
> Is the program still responsive even after it hits the "peak" memory
> utilization? You said that the gc request was not being honored, but  
> it is
> unclear if the queries are returning at that point.  Lastly, I highly
> recommend against ever making the gc requests.
>
>
>
> Regards,
> Khawaja Shams
>
> On Thu, Dec 4, 2008 at 12:30 AM, Khawaja Shams <ksshams@gmail.com>  
> wrote:
>
>> Magnus,   If you get a chance, can you try setting a different xms  
>> and xmx
>> value. For instance, try xms384M and xmx1024M.
>>
>>
>> The "forced" GC [request] will almost always reduce the memory  
>> footprint
>> simply because of the weak references that lucene leverages, but I  
>> bet
>> subsequent queries are not as fast and you basically need to warm  
>> up your
>> server after the GC (which would boost up the footprint again :) ).
>>
>>
>>
>> Regards,
>> Khawaja
>>
>>
>> On Wed, Dec 3, 2008 at 10:27 PM, Magnus Rundberget <rundis@mac.com>  
>> wrote:
>>
>>> Well...
>>>
>>> after various tests I downgraded to lucene 1.9.1 to see if that  
>>> had any
>>> effect... doesn't seem that way.
>>>
>>> I have set up a JMeter test with 5 concurrent users doing a search  
>>> (a
>>> silly search for a two letter word) every 3 seconds (with a random  
>>> of +/-
>>> 500ms).
>>>
>>> - With 512 MB xms/xmx memory usage settles between 400/500 after a  
>>> few
>>> iterations, but no OOME.
>>> At the end of the run memory settles usually between 200-300  
>>> somewhere
>>> (really depends), but no cleanup occurs for minutes ...unless I do  
>>> a forced
>>> GC.
>>>
>>> - Did the same run with 384MB and hit 2 OOME
>>>
>>> - Did the same run with 256MB and hit 5 or 6 OOME
>>>
>>> Tried to run tomcat with jdk 1.6 and -server option as well, but  
>>> didn't
>>> seem to help at all either.
>>>
>>> The finally I ran the test scenario above but with 1536MB xms/ 
>>> xmx... and
>>> guess what. It used it all pretty quickly. It used between  
>>> 1000-1400/1500
>>> for most of the run. At the end of the run memory usage settled at  
>>> about 750
>>> MB ... until I did a forced gc.
>>> This do bother me, if the solution could have been to throw more  
>>> memory at
>>> the problem I could live with that, but it just seems to consume  
>>> all memory
>>> it can get it hands on (:-
>>> Is there any way to limit the memory usage in Lucene  
>>> (configuration) ?
>>>
>>> Im obviously not sure if lucene is the culprit as Im using spring  
>>> (2.5) ,
>>> hibernate (3.3) and open session in view and lots of other stuff  
>>> etc in my
>>> app. So I guess my next step would be to create a very limited web  
>>> app with
>>> just a servlet calling the lucene api.Then do some profiling on  
>>> that.
>>>
>>> cheers
>>> Magnus
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> On 3. des.. 2008, at 14.45, Michael McCandless wrote:
>>>
>>>
>>>> Are you actually hitting OOME?
>>>>
>>>> Or, you're watching heap usage and it bothers you that the GC is  
>>>> taking a
>>>> long time (allowing too much garbage to use up heap space) before  
>>>> sweeping?
>>>>
>>>> One thing to try (only for testing) might be a lower and lower - 
>>>> Xmx until
>>>> you do hit OOME; then you'll know the "real" memory usage of the  
>>>> app.
>>>>
>>>> Mike
>>>>
>>>> Magnus Rundberget wrote:
>>>>
>>>> Sure,
>>>>>
>>>>> Tried with the following
>>>>> Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12 (production)
>>>>> OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003
>>>>> (production)
>>>>> Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in dev  
>>>>> and
>>>>> production)
>>>>>
>>>>>
>>>>> current jvm options
>>>>> -Xms512m -Xmx1024M -XX:MaxPermSize=256m
>>>>> ... tried a few gc settings as well but nothing that has helped  
>>>>> (rather
>>>>> slowed things down)
>>>>>
>>>>> production hw running 2 XEON dual core processors
>>>>>
>>>>> in production our memory reaches the 1024 limit after a while (a  
>>>>> few
>>>>> hours) and at some point it stops responding to forced gc (using  
>>>>> jconsole).
>>>>>
>>>>> need to digg quite a bit more to figure out the exact prod  
>>>>> settings. But
>>>>> safe to say the memory usage pattern can be recreated on  
>>>>> different hardware
>>>>> configs, with different os's, different 1.5 jvms and different  
>>>>> containers
>>>>> (jetty and tomcat).
>>>>>
>>>>>
>>>>>
>>>>> cheers
>>>>> Magnus
>>>>>
>>>>>
>>>>>
>>>>> On 3. des.. 2008, at 13.10, Glen Newton wrote:
>>>>>
>>>>> Hi Magnus,
>>>>>>
>>>>>> Could you post the OS, version, RAM size, swapsize, Java VM  
>>>>>> version,
>>>>>> hardware, #cores, VM command line parameters, etc? This can be  
>>>>>> very
>>>>>> relevant.
>>>>>>
>>>>>> Have you tried other garbage collectors and/or tuning as  
>>>>>> described in
>>>>>> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>>>>>>
>>>>>> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>>>>>>
>>>>>>> Hi,
>>>>>>>
>>>>>>> We have an application using Tomcat, Spring etc and Lucene  
>>>>>>> 2.4.0.
>>>>>>> Our index is about 100MB (in test) and has about 20 indexed  
>>>>>>> fields.
>>>>>>>
>>>>>>> Performance is pretty good, but we are experiencing a very  
>>>>>>> high usage
>>>>>>> of
>>>>>>> memory when searching.
>>>>>>>
>>>>>>> Looking at JConsole during a somewhat silly scenario (but  
>>>>>>> illustrates
>>>>>>> the
>>>>>>> problem);
>>>>>>> (Allocated 512 MB Min heap space, max 1024)
>>>>>>>
>>>>>>> 0. Initially memory usage is about 70MB
>>>>>>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>>>>>>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no  
>>>>>>> gc)
>>>>>>> 2. Search by word "og", heap memory usage goes up another  
>>>>>>> 50-100MB
>>>>>>> 2.1 See 1.1
>>>>>>>
>>>>>>> ...and so on until it seems to reach the 512 MB limit, and  
>>>>>>> then a
>>>>>>> garbage
>>>>>>> collection is performed
>>>>>>> i.e garbage collection doesn't seem to occur until it "hits  
>>>>>>> the roof"
>>>>>>>
>>>>>>> We believe the scenario is similar in production, were our  
>>>>>>> heap space
>>>>>>> is
>>>>>>> limited to 1.5 GB.
>>>>>>>
>>>>>>>
>>>>>>> Our search is basically as follows
>>>>>>> ----------------------------------------------
>>>>>>> 1. Open an IndexSearcher
>>>>>>> 2. Build a Boolean Query searching across 4 fields (title,  
>>>>>>> summary,
>>>>>>> content
>>>>>>> and daterangestring YYYYMMDD)
>>>>>>> 2.1 Sort on title
>>>>>>> 3. Perform search
>>>>>>> 4. Iterate over hits to build a set of custom result objects  
>>>>>>> (pretty
>>>>>>> small,
>>>>>>> as we dont include content in these)
>>>>>>> 5. Close searcher
>>>>>>> 6. Return result objects.
>>>>>>>
>>>>>>
>>>>>> You should not close the searcher: it can be shared by all  
>>>>>> queries.
>>>>>> What happens when you warm Lucene with a (large) number of  
>>>>>> queries: do
>>>>>> things stabilize over time?
>>>>>>
>>>>>> A 100MB index is (relatively) very small for Lucene (I have  
>>>>>> indexes
>>>>>>
>>>>>>> 100GB). What kind of response times are you getting,  
>>>>>>> independent of
>>>>>>>
>>>>>> memory usage.
>>>>>>
>>>>>> -glen
>>>>>>
>>>>>>
>>>>>>> We have tried various options based on entries on this mailing  
>>>>>>> list;
>>>>>>> a) Cache the IndexSearcher - Same results
>>>>>>> b) Remove sorting - Same result
>>>>>>> c) In point 4 only iterating over a limited amount of hits  
>>>>>>> rather than
>>>>>>> whole
>>>>>>> collection - Same result in terms of memory usage, but obviously
>>>>>>> increased
>>>>>>> performance
>>>>>>> d) Using RamDirectory vs FSDirectory - Same result only  
>>>>>>> initial heap
>>>>>>> usage
>>>>>>> is higher using ramdirectory (in conjuction with cached  
>>>>>>> indexsearcher)
>>>>>>>
>>>>>>>
>>>>>>> Doing some profiling using YourKit shows a huge number of  
>>>>>>> char[],
>>>>>>> int[] and
>>>>>>> string[], and ever increasing number of lucene related objects.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Reading through the mailing lists, suspicions are that our  
>>>>>>> problem is
>>>>>>> related to ThreadLocals and memory not being released. Noticed  
>>>>>>> that
>>>>>>> there
>>>>>>> was a related patch for this in 2.4.0, but it doesn't seem to  
>>>>>>> help us
>>>>>>> much.
>>>>>>>
>>>>>>> Any ideas ?
>>>>>>>
>>>>>>> kind regards
>>>>>>> Magnus
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>>
>>>>>> -
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 09:50:16 2008
Return-Path: <java-user-return-37502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80851 invoked from network); 4 Dec 2008 09:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 09:50:16 -0000
Received: (qmail 44745 invoked by uid 500); 4 Dec 2008 09:50:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44704 invoked by uid 500); 4 Dec 2008 09:50:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44693 invoked by uid 99); 4 Dec 2008 09:50:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 01:50:21 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 09:48:50 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2871805fgb.27
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 01:49:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=RANGcv3yHBnHQY3ggcyEh1wwReBUeeoYQ5rJ0JWLd6A=;
        b=ep2faMsEZQbutVx8iQ+8ysaK6xemGg4xkUBWvLMB7K3NzsM2JKZF+VIpBMwceBE9Iz
         doroTemIPVgQEgaymBScl/YXxNYIkBrISwzMw/P68m7OOBxNw/TBf3WZHoQYjHqwQOli
         Xc5+zak75HSIGXYkC4+ShFY5PBDp09ghFz3pI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wAXtIof6laFXaR2wgQSVYy0kl/DqC2DaX6re1r/E5MtW02R7V2zN9p1JEg2KermA9z
         dtpfLk8bYaj4WEEUVy5NR2u5Mg/LR4rbDiheiZpnd3arzzA0eon48GFNRVexI5SHAe+z
         7m6kjoKi5mpbJ01SAtEHLPGQbdyIYc1I2ANPM=
Received: by 10.223.109.84 with SMTP id i20mr91433fap.42.1228384166893;
        Thu, 04 Dec 2008 01:49:26 -0800 (PST)
Received: by 10.223.109.20 with HTTP; Thu, 4 Dec 2008 01:49:26 -0800 (PST)
Message-ID: <5816fbdd0812040149x6702c556tf3d6c97e93d1d272@mail.gmail.com>
Date: Thu, 4 Dec 2008 15:19:26 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Pdf in Lucene?
In-Reply-To: <COL113-W8284C0CC1716F89F669205BE000@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3581_15093439.1228384166900"
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
	 <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com>
	 <COL113-W45437A1268795288A8839CBE010@phx.gbl>
	 <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
	 <COL113-W455B5282CF986CD2D0A97EBE010@phx.gbl>
	 <81F5AE5D-760A-40C9-A4B8-2889C9E9CACD@apache.org>
	 <COL113-W8284C0CC1716F89F669205BE000@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3581_15093439.1228384166900
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

In my case I used PDFBox, just to extract the text from PDF document and
then I created the Lucene document giving the extracted text. (I didn't use
the PDFBox built in Lucene search engine). So I didn't get any
incompatibility problems.

This blog post shows the way.
http://kalanir.blogspot.com/2008/08/indexing-pdf-documents-with-lucene.html

It worked perfect for me.

Thanks.

On Tue, Dec 2, 2008 at 2:33 PM, tiziano bernardi <dk1982@hotmail.it> wrote:

>
>
> This is the exception:
> Exception in thread "main" java.lang.NoSuchMethodError:
> org.apache.lucene.document.Document.add(Lorg/apache/lucene/document/Field;)V
> at
> org.pdfbox.searchengine.lucene.LucenePDFDocument.addUnindexedField(LucenePDFDocument.java:224)
> at
> org.pdfbox.searchengine.lucene.LucenePDFDocument.convertDocument(LucenePDFDocument.java:265)
> at
> org.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(LucenePDFDocument.java:377)
> at SimplePdfSearch.main(SimplePdfSearch.java:30)
>
> I thank you for the time you spent
> > From: gsingers@apache.org> To: java-user@lucene.apache.org> Subject: Re:
> Pdf in Lucene?> Date: Mon, 1 Dec 2008 17:40:12 -0500> > I certainly don't
> either, since you haven't said what the actual > exception is. If I had to
> guess, though, I would say it is the line> Document document =
> LucenePDFDocument.getDocument> > And that the Lucene library expected by
> PDFBox is not the same version > of Lucene you are using. I would suggest
> not relying on PDFBox to > create your document, and instead look at the
> PDFBox calls that you > need to make to then create your Document.> > > On
> Dec 1, 2008, at 9:18 AM, tiziano bernardi wrote:> > >> >> > this is my
> class, I use eclipse and I haven't any errors.Do not > > understand where
> the problem ....> >> >> > import java.io.File;> > import
> java.io.IOException;> >> > import org.apache.lucene.analysis.Analyzer;> >
> import org.apache.lucene.analysis.standard.StandardAnalyzer;> > import
> org.apache.lucene.document.Document;> > import
> org.apache.lucene.index.IndexWriter;> > import
> org.apache.lucene.index.Term;> > import org.apache.lucene.search.Hits;> >
> import org.apache.lucene.search.IndexSearcher;> > import
> org.apache.lucene.search.Query;> > import
> org.apache.lucene.search.TermQuery;> > import
> org.apache.lucene.store.Directory;> > import
> org.apache.lucene.store.RAMDirectory;> > import
> org.pdfbox.searchengine.lucene.LucenePDFDocument;> >> > public final class
> SimplePdfSearch> > {> > private static final String PDF_FILE_PATH =
> "C:\\Users\\Tiziano\ > > \Desktop\\doc_di_prova\\prova.pdf";> > private
> static final String SEARCH_TERM = "prova";> >> > public static final void
> main(String[] args) throws IOException> > {> > Directory directory = null;>
> >> > try> > {> > File pdfFile = new File(PDF_FILE_PATH);> > Document
> document = LucenePDFDocument.getDocument(pdfFile);> >> > directory = new
> RAMDirectory();> >> > IndexWriter indexWriter = null;> >> > try> > {> >
> Analyzer analyzer = new StandardAnalyzer();> > indexWriter = new
> IndexWriter(directory, analyzer, true);> >> >
> indexWriter.addDocument(document);> > }> > finally> > {> > if (indexWriter
> != null)> > {> > try> > {> > indexWriter.close();> > }> > catch (IOException
> ignore)> > {> > // Ignore> > }> >> > indexWriter = null;> > }> > }> >> >
> IndexSearcher indexSearcher = null;> >> > try> > {> > indexSearcher = new
> IndexSearcher(directory);> >> > Term term = new Term("contents",
> SEARCH_TERM);> > Query query = new TermQuery(term);> >> > Hits hits =
> indexSearcher.search(query);> >> > System.out.println((hits.length() != 0) ?
> "Found" : "Not Found");> > }> > finally> > {> > if (indexSearcher != null)>
> > {> > try> > {> > indexSearcher.close();> > }> > catch (IOException
> ignore)> > {> > // Ignore> > }> >> > indexSearcher = null;> > }> > }> > }> >
> finally> > {> > if (directory != null)> > {> > try> > {> >
> directory.close();> > }> > catch (IOException ignore)> > {> > // Ignore> >
> }> >> > directory = null;> > }> > }> > }> > }> From: gsingers@apache.org>
> To: java-user@lucene.apache.org> > > Subject: Re: Pdf in Lucene?> Date:
> Mon, 1 Dec 2008 08:22:58 -0500> > > > > On Dec 1, 2008, at 8:01 AM, tiziano
> bernardi wrote:> > >> > I > > tried to use pdfbox but gives me an error.> >
> That the version of > > lucene and the pdfbox are incompatible.> > Lucene
> knows nothing > > about PDFBox, so I don't see how they could be >
> incompatible, > > unless your are referring to PDFBox's Lucene Document >
> creator, in > > which case, you should ask on the PDFBox mailing list. I >
> think, > > however, that it's pretty straightforward to create a Lucene > >
> > document from PDFBox, so you shouldn't need to rely on their > > version.>
> > Personally, I'd have a look at Tika (http://lucene.apache.org/tika > >
> ), > which wraps PDFBox (and other extraction libraries) and gives > > you
> back > SAX-like events via a ContentHandler, which you can then > > use to
> create > Lucene documents. Else, I've been working on > > SOLR-284, which >
> integrates Tika into Solr, see
> https://issues.apache.org/jira/browse/SOLR-284 > > > > -Grant> > >> > I
> use pdf box 0.7.3 and lucene 2.1.0> Date: Mon, > > 1 Dec 2008 11:43:00 > >
> +0000> From: ian.lea@gmail.com> To: java-user@lucene.apache.org > > > > >
> Subject: Re: Pdf in Lucene?> > Hi> > > Lucene only indexes > > text so > >
> you'll have to get the text out of the PDF> and feed it > > to lucene.> > >
> > Google for lucene pdf, or go straight to http://www.pdfbox.org/ > > > >
> > > > --> Ian.> > > > 2008/12/1 tiziano bernardi <dk1982@hotmail.it > >
> >:> > > >> >> > Hi,> > I want to index PDF files with lucene is > >
> possible?> > > > What like?> > Thanks Tiziano Bernardi> > > > > >
> _________________________________________________________________> > > > > >
> Fanne di tutti i colori, personalizza la tua Hotmail!> >
> http://imagine-windowslive.com/Hotmail/#0 > > > > > > > > > >
> --------------------------------------------------------------------- > > >
> > > To unsubscribe, e-mail: java-user- > > unsubscribe@lucene.apache.org>
> > > For additional commands, e-mail: java-user-help@lucene.apache.org > >
> >> > > > _________________________________________________________________>
> > > > 50 nuovi schemi per giocare su CrossWire! Accetta la sfida!> >
> http://livesearch.games.msn.com/crosswire/play_it/ > > > >
> --------------------------> Grant Ingersoll> > Lucene Helpful > > Hints:>
> http://wiki.apache.org/lucene-java/BasicsOfPerformance>
> http://wiki.apache.org/lucene-java/LuceneFAQ > > > > > > > > > > > > > > >
> > --------------------------------------------------------------------- > >
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> > > For
> additional commands, e-mail: java-user-help@lucene.apache.org>> >
> _________________________________________________________________> > Vai
> oltre le parole, scarica il nuovo Messenger!> >
> http://download.live.com/?mkt=it-it> > --------------------------> Grant
> Ingersoll> > Lucene Helpful Hints:>
> http://wiki.apache.org/lucene-java/BasicsOfPerformance>
> http://wiki.apache.org/lucene-java/LuceneFAQ> > > > > > > > > > > >
> ---------------------------------------------------------------------> To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org> For
> additional commands, e-mail: java-user-help@lucene.apache.org>
> _________________________________________________________________
> Vai oltre le parole, scarica il nuovo Messenger!
> http://download.live.com/?mkt=it-it
>



-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_3581_15093439.1228384166900--

From java-user-return-37503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 10:33:46 2008
Return-Path: <java-user-return-37503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5265 invoked from network); 4 Dec 2008 10:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 10:33:46 -0000
Received: (qmail 14428 invoked by uid 500); 4 Dec 2008 10:33:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14391 invoked by uid 500); 4 Dec 2008 10:33:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14380 invoked by uid 99); 4 Dec 2008 10:33:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 02:33:47 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 10:32:16 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id C03881CD1A0
	for <java-user@lucene.apache.org>; Thu,  4 Dec 2008 05:33:03 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Thu, 04 Dec 2008 05:33:03 -0500
X-Sasl-enc: p5GW4H8kxXoqcfJSABwazlCsEvxvPD6ipbPMNTebTI78 1228386783
Received: from [192.168.123.210] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id F09C6127F7
	for <java-user@lucene.apache.org>; Thu,  4 Dec 2008 05:33:02 -0500 (EST)
Message-ID: <4937B1DD.1080807@boboco.ie>
Date: Thu, 04 Dec 2008 10:33:01 +0000
From: Eric Bowman <ebowman@boboco.ie>
User-Agent: Thunderbird 2.0.0.18 (X11/20081129)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: lucene nicking my memory ?
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com> <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com> <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com> <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com> <A5F41D65-151C-4AEA-8746-408B3C545227@mac.com>
In-Reply-To: <A5F41D65-151C-4AEA-8746-408B3C545227@mac.com>
X-Enigmail-Version: 0.95.7
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure I really understand what the problem is here.

First of all, the VM will appear to consume most or all of the memory
you give it. You really shouldn't worry about this, and it is misleading
to look at what happens when you force a gc.

I think there are really only 2 things that matter: are you getting
OOME, and is performance suffering due to excess GC.

If you are not getting any OOME with a 1536MB heap, then that's good.

Next you want to enable verbose GC logging:

-verbose:gc -XX:+PrintGCTimeStamps -XX:+PrintGCDetails

In particular, this will help you understand if either GCs are happening
increasingly frequently, and/or taking longer. Note that there are 2
kinds of GCs: partial GCs that happen frequently, and full GCs that
happen less frequently. In particular if the full GCs start happening
more and more frequently, and/or taking longer and longer, you probably
have a leak, an OOME is just a matter of time, and you need to
investigate further. If that isn't happening, then this application just
takes more memory than you thought, but performance overall should be
good and you probably don't need to worry about it.


Magnus Rundberget wrote:
> Well...
>
> after various tests I downgraded to lucene 1.9.1 to see if that had
> any effect... doesn't seem that way.
>
> I have set up a JMeter test with 5 concurrent users doing a search (a
> silly search for a two letter word) every 3 seconds (with a random of
> +/- 500ms).
>
> - With 512 MB xms/xmx memory usage settles between 400/500 after a few
> iterations, but no OOME.
> At the end of the run memory settles usually between 200-300 somewhere
> (really depends), but no cleanup occurs for minutes ...unless I do a
> forced GC.
>
> - Did the same run with 384MB and hit 2 OOME
>
> - Did the same run with 256MB and hit 5 or 6 OOME
>
> Tried to run tomcat with jdk 1.6 and -server option as well, but
> didn't seem to help at all either.
>
> The finally I ran the test scenario above but with 1536MB xms/xmx...
> and guess what. It used it all pretty quickly. It used between
> 1000-1400/1500 for most of the run. At the end of the run memory usage
> settled at about 750 MB ... until I did a forced gc.
> This do bother me, if the solution could have been to throw more
> memory at the problem I could live with that, but it just seems to
> consume all memory it can get it hands on (:-
> Is there any way to limit the memory usage in Lucene (configuration) ?
>
> Im obviously not sure if lucene is the culprit as Im using spring
> (2.5) , hibernate (3.3) and open session in view and lots of other
> stuff etc in my app. So I guess my next step would be to create a very
> limited web app with just a servlet calling the lucene api.Then do
> some profiling on that.
>
> cheers
> Magnus
>
>
>
>
>
>
>
>
>
> On 3. des.. 2008, at 14.45, Michael McCandless wrote:
>
>>
>> Are you actually hitting OOME?
>>
>> Or, you're watching heap usage and it bothers you that the GC is
>> taking a long time (allowing too much garbage to use up heap space)
>> before sweeping?
>>
>> One thing to try (only for testing) might be a lower and lower -Xmx
>> until you do hit OOME; then you'll know the "real" memory usage of
>> the app.
>>
>> Mike
>>
>> Magnus Rundberget wrote:
>>
>>> Sure,
>>>
>>> Tried with the following
>>> Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12 (production)
>>> OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003
>>> (production)
>>> Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in dev and
>>> production)
>>>
>>>
>>> current jvm options
>>> -Xms512m -Xmx1024M -XX:MaxPermSize=256m
>>> ... tried a few gc settings as well but nothing that has helped
>>> (rather slowed things down)
>>>
>>> production hw running 2 XEON dual core processors
>>>
>>> in production our memory reaches the 1024 limit after a while (a few
>>> hours) and at some point it stops responding to forced gc (using
>>> jconsole).
>>>
>>> need to digg quite a bit more to figure out the exact prod settings.
>>> But safe to say the memory usage pattern can be recreated on
>>> different hardware configs, with different os's, different 1.5 jvms
>>> and different containers (jetty and tomcat).
>>>
>>>
>>>
>>> cheers
>>> Magnus
>>>
>>>
>>>
>>> On 3. des.. 2008, at 13.10, Glen Newton wrote:
>>>
>>>> Hi Magnus,
>>>>
>>>> Could you post the OS, version, RAM size, swapsize, Java VM version,
>>>> hardware, #cores, VM command line parameters, etc? This can be very
>>>> relevant.
>>>>
>>>> Have you tried other garbage collectors and/or tuning as described in
>>>> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>>>>
>>>> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>>>>> Hi,
>>>>>
>>>>> We have an application using Tomcat, Spring etc and Lucene 2.4.0.
>>>>> Our index is about 100MB (in test) and has about 20 indexed fields.
>>>>>
>>>>> Performance is pretty good, but we are experiencing a very high
>>>>> usage of
>>>>> memory when searching.
>>>>>
>>>>> Looking at JConsole during a somewhat silly scenario (but
>>>>> illustrates the
>>>>> problem);
>>>>> (Allocated 512 MB Min heap space, max 1024)
>>>>>
>>>>> 0. Initially memory usage is about 70MB
>>>>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>>>>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no gc)
>>>>> 2. Search by word "og", heap memory usage goes up another 50-100MB
>>>>> 2.1 See 1.1
>>>>>
>>>>> ...and so on until it seems to reach the 512 MB limit, and then a
>>>>> garbage
>>>>> collection is performed
>>>>> i.e garbage collection doesn't seem to occur until it "hits the roof"
>>>>>
>>>>> We believe the scenario is similar in production, were our heap
>>>>> space is
>>>>> limited to 1.5 GB.
>>>>>
>>>>>
>>>>> Our search is basically as follows
>>>>> ----------------------------------------------
>>>>> 1. Open an IndexSearcher
>>>>> 2. Build a Boolean Query searching across 4 fields (title,
>>>>> summary, content
>>>>> and daterangestring YYYYMMDD)
>>>>> 2.1 Sort on title
>>>>> 3. Perform search
>>>>> 4. Iterate over hits to build a set of custom result objects
>>>>> (pretty small,
>>>>> as we dont include content in these)
>>>>> 5. Close searcher
>>>>> 6. Return result objects.
>>>>
>>>> You should not close the searcher: it can be shared by all queries.
>>>> What happens when you warm Lucene with a (large) number of queries: do
>>>> things stabilize over time?
>>>>
>>>> A 100MB index is (relatively) very small for Lucene (I have indexes
>>>>> 100GB). What kind of response times are you getting, independent of
>>>> memory usage.
>>>>
>>>> -glen
>>>>
>>>>>
>>>>> We have tried various options based on entries on this mailing list;
>>>>> a) Cache the IndexSearcher - Same results
>>>>> b) Remove sorting - Same result
>>>>> c) In point 4 only iterating over a limited amount of hits rather
>>>>> than whole
>>>>> collection - Same result in terms of memory usage, but obviously
>>>>> increased
>>>>> performance
>>>>> d) Using RamDirectory vs FSDirectory - Same result only initial
>>>>> heap usage
>>>>> is higher using ramdirectory (in conjuction with cached
>>>>> indexsearcher)
>>>>>
>>>>>
>>>>> Doing some profiling using YourKit shows a huge number of char[],
>>>>> int[] and
>>>>> string[], and ever increasing number of lucene related objects.
>>>>>
>>>>>
>>>>>
>>>>> Reading through the mailing lists, suspicions are that our problem is
>>>>> related to ThreadLocals and memory not being released. Noticed
>>>>> that there
>>>>> was a related patch for this in 2.4.0, but it doesn't seem to help
>>>>> us much.
>>>>>
>>>>> Any ideas ?
>>>>>
>>>>> kind regards
>>>>> Magnus
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> -- 
>>>>
>>>> -
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Eric Bowman
Boboco Ltd
ebowman@boboco.ie
http://www.boboco.ie/ebowman/pubkey.pgp
+35318394189/+353872801532


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 11:39:26 2008
Return-Path: <java-user-return-37504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30707 invoked from network); 4 Dec 2008 11:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 11:39:26 -0000
Received: (qmail 94600 invoked by uid 500); 4 Dec 2008 11:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94554 invoked by uid 500); 4 Dec 2008 11:39:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94541 invoked by uid 99); 4 Dec 2008 11:39:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 03:39:27 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 11:37:56 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1614892ywj.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 03:38:33 -0800 (PST)
Received: by 10.151.43.13 with SMTP id v13mr27975136ybj.185.1228390713477;
        Thu, 04 Dec 2008 03:38:33 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id t26sm12036606ele.2.2008.12.04.03.38.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 04 Dec 2008 03:38:32 -0800 (PST)
Message-Id: <F782600D-D309-47C8-90C9-50846253EDBC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <B9C0EF37-430D-48DA-8519-888103653028@mac.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: lucene nicking my memory ?
Date: Thu, 4 Dec 2008 06:38:28 -0500
References: <22959BC5-2308-442F-878E-B24E008898A9@mac.com> <5e76f3840812030410obaf4379wb1a820f0fddac149@mail.gmail.com> <2C1D929E-57D3-47C9-8434-1A0085B9E5DA@mac.com> <FEC0C68A-B79A-407A-A83C-AD79F0EB4AEF@mikemccandless.com> <A5F41D65-151C-4AEA-8746-408B3C545227@mac.com> <6d6cf45b0812040030u44a8c21boba6b60aefe4637e9@mail.gmail.com> <6d6cf45b0812040047n2ab3f793ua39b4acb0e7042d5@mail.gmail.com> <B9C0EF37-430D-48DA-8519-888103653028@mac.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


It's important to understand that the JRE using up all memory to the  
max you specified, and then doing GC, is entirely "normal" (if not  
desirable).

This is just how Java works: when code runs it generates garbage,  
sometimes quite a bit (eg if you make a new IndexSearcher per query),  
and then eventually GC kicks in and reclaims it.

I think you need to verify that the hangs you see in production do  
correlate to when a full GC sweep is running, and then try to  
understand why that full GC causes hangs in production but not dev,  
and try to tune the GC to have shorter pause times (or, tune the code  
to not generate so much garbage, if you can).

Once an IndexSearcher is init'd, I think ongoing searches through it  
should not generate that much additional garbage (until you close &  
discard that IndexSearcher).  If you are doing something more  
interesting, eg creating your own HitCollector which reads the  
Document or TermVectors for every hit or something, then that would  
generate alot of garbage (but also run very slowly for a large index).

Mike

Magnus Rundberget wrote:

> hmmm,
>
>
> Well in production (1024M heap), it seems that after a while (some  
> hundred user queries) the memory starts reaching the max threshold  
> and when it does at some point it becomes unresponsive.
> Id rather it was slightly less performant (cleaning up memory more  
> frequently) than freezing up when there are "many" (not really that  
> many users..) concurrently doing searches when the memory threshold  
> is reached.
>
> In dev Im not able to recreate this behavior, but by reducing  
> available memory to say 384M things like OOME starts to show up when  
> running a number of concurrent users.
>
> ... as mentioned earlier though it might not just be lucene it could  
> be that in combination with lack of db connections or other things  
> that actually cause the freeze up in production. I just still think  
> its suspicious to grab all available resources and deal with the  
> problem (with gc) when max available resources are reached.
>
> I'd love to be able to tell lucene, hey you have 300Mb for your  
> cache... deal with it as best as you can.
> Somewhat similar to DB connections when you configure a pool of  
> connections and this is what the application has available, not  
> create db connections until db server starts hicking up and then  
> release a few.
>
> Anyways I guess we have a lot of tuning potential in the way we  
> index (and what) and how we search as well.
>
> magnus
>
>
>
>
> On 4. des.. 2008, at 09.47, Khawaja Shams wrote:
>
>> Magnus,     Please feel free to ignore my last email; I see that  
>> you had
>> this setup earlier.  As far as using up all the memory it can get  
>> its hands
>> on, this is actually a good thing. This allows Lucene and other java
>> applications to keep more things in cache when more memory is  
>> available.
>> Also, if you throw more memory at the program, the GC will try to  
>> spend
>> little effort in cleaning up until it is necessary. By setting xmx  
>> to 1536M,
>> you are effectively telling the jvm that you have this much memory  
>> available
>> for the java program.  Therefore, there is no reason for the GC to  
>> waste any
>> more resources when the program is taking 1300M of ram. I think you  
>> should
>> not worry until you start throwing OOMEs even after you have  
>> allocated the
>> 1536M.
>>
>>
>> Is the program still responsive even after it hits the "peak" memory
>> utilization? You said that the gc request was not being honored,  
>> but it is
>> unclear if the queries are returning at that point.  Lastly, I highly
>> recommend against ever making the gc requests.
>>
>>
>>
>> Regards,
>> Khawaja Shams
>>
>> On Thu, Dec 4, 2008 at 12:30 AM, Khawaja Shams <ksshams@gmail.com>  
>> wrote:
>>
>>> Magnus,   If you get a chance, can you try setting a different xms  
>>> and xmx
>>> value. For instance, try xms384M and xmx1024M.
>>>
>>>
>>> The "forced" GC [request] will almost always reduce the memory  
>>> footprint
>>> simply because of the weak references that lucene leverages, but I  
>>> bet
>>> subsequent queries are not as fast and you basically need to warm  
>>> up your
>>> server after the GC (which would boost up the footprint again :) ).
>>>
>>>
>>>
>>> Regards,
>>> Khawaja
>>>
>>>
>>> On Wed, Dec 3, 2008 at 10:27 PM, Magnus Rundberget  
>>> <rundis@mac.com> wrote:
>>>
>>>> Well...
>>>>
>>>> after various tests I downgraded to lucene 1.9.1 to see if that  
>>>> had any
>>>> effect... doesn't seem that way.
>>>>
>>>> I have set up a JMeter test with 5 concurrent users doing a  
>>>> search (a
>>>> silly search for a two letter word) every 3 seconds (with a  
>>>> random of +/-
>>>> 500ms).
>>>>
>>>> - With 512 MB xms/xmx memory usage settles between 400/500 after  
>>>> a few
>>>> iterations, but no OOME.
>>>> At the end of the run memory settles usually between 200-300  
>>>> somewhere
>>>> (really depends), but no cleanup occurs for minutes ...unless I  
>>>> do a forced
>>>> GC.
>>>>
>>>> - Did the same run with 384MB and hit 2 OOME
>>>>
>>>> - Did the same run with 256MB and hit 5 or 6 OOME
>>>>
>>>> Tried to run tomcat with jdk 1.6 and -server option as well, but  
>>>> didn't
>>>> seem to help at all either.
>>>>
>>>> The finally I ran the test scenario above but with 1536MB xms/ 
>>>> xmx... and
>>>> guess what. It used it all pretty quickly. It used between  
>>>> 1000-1400/1500
>>>> for most of the run. At the end of the run memory usage settled  
>>>> at about 750
>>>> MB ... until I did a forced gc.
>>>> This do bother me, if the solution could have been to throw more  
>>>> memory at
>>>> the problem I could live with that, but it just seems to consume  
>>>> all memory
>>>> it can get it hands on (:-
>>>> Is there any way to limit the memory usage in Lucene  
>>>> (configuration) ?
>>>>
>>>> Im obviously not sure if lucene is the culprit as Im using spring  
>>>> (2.5) ,
>>>> hibernate (3.3) and open session in view and lots of other stuff  
>>>> etc in my
>>>> app. So I guess my next step would be to create a very limited  
>>>> web app with
>>>> just a servlet calling the lucene api.Then do some profiling on  
>>>> that.
>>>>
>>>> cheers
>>>> Magnus
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> On 3. des.. 2008, at 14.45, Michael McCandless wrote:
>>>>
>>>>
>>>>> Are you actually hitting OOME?
>>>>>
>>>>> Or, you're watching heap usage and it bothers you that the GC is  
>>>>> taking a
>>>>> long time (allowing too much garbage to use up heap space)  
>>>>> before sweeping?
>>>>>
>>>>> One thing to try (only for testing) might be a lower and lower - 
>>>>> Xmx until
>>>>> you do hit OOME; then you'll know the "real" memory usage of the  
>>>>> app.
>>>>>
>>>>> Mike
>>>>>
>>>>> Magnus Rundberget wrote:
>>>>>
>>>>> Sure,
>>>>>>
>>>>>> Tried with the following
>>>>>> Java version: build 1.5.0_16-b06-284 (dev), 1.5.0_12 (production)
>>>>>> OS : Mac OS/X Leopard(dev) and Windows XP(dev), Windows 2003
>>>>>> (production)
>>>>>> Container : Jetty 6.1 and Tomcat 5.5 (latter is used both in  
>>>>>> dev and
>>>>>> production)
>>>>>>
>>>>>>
>>>>>> current jvm options
>>>>>> -Xms512m -Xmx1024M -XX:MaxPermSize=256m
>>>>>> ... tried a few gc settings as well but nothing that has helped  
>>>>>> (rather
>>>>>> slowed things down)
>>>>>>
>>>>>> production hw running 2 XEON dual core processors
>>>>>>
>>>>>> in production our memory reaches the 1024 limit after a while  
>>>>>> (a few
>>>>>> hours) and at some point it stops responding to forced gc  
>>>>>> (using jconsole).
>>>>>>
>>>>>> need to digg quite a bit more to figure out the exact prod  
>>>>>> settings. But
>>>>>> safe to say the memory usage pattern can be recreated on  
>>>>>> different hardware
>>>>>> configs, with different os's, different 1.5 jvms and different  
>>>>>> containers
>>>>>> (jetty and tomcat).
>>>>>>
>>>>>>
>>>>>>
>>>>>> cheers
>>>>>> Magnus
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 3. des.. 2008, at 13.10, Glen Newton wrote:
>>>>>>
>>>>>> Hi Magnus,
>>>>>>>
>>>>>>> Could you post the OS, version, RAM size, swapsize, Java VM  
>>>>>>> version,
>>>>>>> hardware, #cores, VM command line parameters, etc? This can be  
>>>>>>> very
>>>>>>> relevant.
>>>>>>>
>>>>>>> Have you tried other garbage collectors and/or tuning as  
>>>>>>> described in
>>>>>>> http://java.sun.com/javase/technologies/hotspot/gc/gc_tuning_6.html?
>>>>>>>
>>>>>>> 2008/12/3 Magnus Rundberget <rundis@mac.com>:
>>>>>>>
>>>>>>>> Hi,
>>>>>>>>
>>>>>>>> We have an application using Tomcat, Spring etc and Lucene  
>>>>>>>> 2.4.0.
>>>>>>>> Our index is about 100MB (in test) and has about 20 indexed  
>>>>>>>> fields.
>>>>>>>>
>>>>>>>> Performance is pretty good, but we are experiencing a very  
>>>>>>>> high usage
>>>>>>>> of
>>>>>>>> memory when searching.
>>>>>>>>
>>>>>>>> Looking at JConsole during a somewhat silly scenario (but  
>>>>>>>> illustrates
>>>>>>>> the
>>>>>>>> problem);
>>>>>>>> (Allocated 512 MB Min heap space, max 1024)
>>>>>>>>
>>>>>>>> 0. Initially memory usage is about 70MB
>>>>>>>> 1. Search for word "er", heap memory usage goes up by 100-150MB
>>>>>>>> 1.1 Wait for 30 seconds... memory usage stays the same (ie no  
>>>>>>>> gc)
>>>>>>>> 2. Search by word "og", heap memory usage goes up another  
>>>>>>>> 50-100MB
>>>>>>>> 2.1 See 1.1
>>>>>>>>
>>>>>>>> ...and so on until it seems to reach the 512 MB limit, and  
>>>>>>>> then a
>>>>>>>> garbage
>>>>>>>> collection is performed
>>>>>>>> i.e garbage collection doesn't seem to occur until it "hits  
>>>>>>>> the roof"
>>>>>>>>
>>>>>>>> We believe the scenario is similar in production, were our  
>>>>>>>> heap space
>>>>>>>> is
>>>>>>>> limited to 1.5 GB.
>>>>>>>>
>>>>>>>>
>>>>>>>> Our search is basically as follows
>>>>>>>> ----------------------------------------------
>>>>>>>> 1. Open an IndexSearcher
>>>>>>>> 2. Build a Boolean Query searching across 4 fields (title,  
>>>>>>>> summary,
>>>>>>>> content
>>>>>>>> and daterangestring YYYYMMDD)
>>>>>>>> 2.1 Sort on title
>>>>>>>> 3. Perform search
>>>>>>>> 4. Iterate over hits to build a set of custom result objects  
>>>>>>>> (pretty
>>>>>>>> small,
>>>>>>>> as we dont include content in these)
>>>>>>>> 5. Close searcher
>>>>>>>> 6. Return result objects.
>>>>>>>>
>>>>>>>
>>>>>>> You should not close the searcher: it can be shared by all  
>>>>>>> queries.
>>>>>>> What happens when you warm Lucene with a (large) number of  
>>>>>>> queries: do
>>>>>>> things stabilize over time?
>>>>>>>
>>>>>>> A 100MB index is (relatively) very small for Lucene (I have  
>>>>>>> indexes
>>>>>>>
>>>>>>>> 100GB). What kind of response times are you getting,  
>>>>>>>> independent of
>>>>>>>>
>>>>>>> memory usage.
>>>>>>>
>>>>>>> -glen
>>>>>>>
>>>>>>>
>>>>>>>> We have tried various options based on entries on this  
>>>>>>>> mailing list;
>>>>>>>> a) Cache the IndexSearcher - Same results
>>>>>>>> b) Remove sorting - Same result
>>>>>>>> c) In point 4 only iterating over a limited amount of hits  
>>>>>>>> rather than
>>>>>>>> whole
>>>>>>>> collection - Same result in terms of memory usage, but  
>>>>>>>> obviously
>>>>>>>> increased
>>>>>>>> performance
>>>>>>>> d) Using RamDirectory vs FSDirectory - Same result only  
>>>>>>>> initial heap
>>>>>>>> usage
>>>>>>>> is higher using ramdirectory (in conjuction with cached  
>>>>>>>> indexsearcher)
>>>>>>>>
>>>>>>>>
>>>>>>>> Doing some profiling using YourKit shows a huge number of  
>>>>>>>> char[],
>>>>>>>> int[] and
>>>>>>>> string[], and ever increasing number of lucene related objects.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Reading through the mailing lists, suspicions are that our  
>>>>>>>> problem is
>>>>>>>> related to ThreadLocals and memory not being released.  
>>>>>>>> Noticed that
>>>>>>>> there
>>>>>>>> was a related patch for this in 2.4.0, but it doesn't seem to  
>>>>>>>> help us
>>>>>>>> much.
>>>>>>>>
>>>>>>>> Any ideas ?
>>>>>>>>
>>>>>>>> kind regards
>>>>>>>> Magnus
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>>
>>>>>>> -
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 11:50:13 2008
Return-Path: <java-user-return-37505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34700 invoked from network); 4 Dec 2008 11:50:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 11:50:13 -0000
Received: (qmail 6232 invoked by uid 500); 4 Dec 2008 11:50:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6185 invoked by uid 500); 4 Dec 2008 11:50:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6174 invoked by uid 99); 4 Dec 2008 11:50:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 03:50:14 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 11:48:44 +0000
Received: by qyk13 with SMTP id 13so5555112qyk.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 03:49:30 -0800 (PST)
Received: by 10.214.43.11 with SMTP id q11mr14653405qaq.132.1228391370822;
        Thu, 04 Dec 2008 03:49:30 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 8sm5040502ywg.33.2008.12.04.03.49.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 04 Dec 2008 03:49:29 -0800 (PST)
Message-Id: <46BBD20F-71EF-46CA-80C5-09EBD0392773@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <7D686F9C-11AF-4085-B8CE-66AD37FA0FCA@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Date: Thu, 4 Dec 2008 06:49:27 -0500
References: <E95FD77F0171D14DA1EEE0A785E92B43032BE02E@mail3.basistech.net> <E95FD77F0171D14DA1EEE0A785E92B43032BE04F@mail3.basistech.net> <7838F15E-7D98-4B51-8D4C-140699A6DEBD@mikemccandless.com> <E95FD77F0171D14DA1EEE0A785E92B43032BE0C7@mail3.basistech.net> <7D686F9C-11AF-4085-B8CE-66AD37FA0FCA@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Mark Miller wrote:

> Sounds familiar. This may actually be in JIRA already.

Maybe this is:

     https://issues.apache.org/jira/browse/LUCENE-689

?

I just marked it as fix version 2.9.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 12:13:46 2008
Return-Path: <java-user-return-37506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41243 invoked from network); 4 Dec 2008 12:13:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 12:13:46 -0000
Received: (qmail 27889 invoked by uid 500); 4 Dec 2008 12:13:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27852 invoked by uid 500); 4 Dec 2008 12:13:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27840 invoked by uid 99); 4 Dec 2008 12:13:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 04:13:50 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 12:12:18 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 7BD57109F30
	for <java-user@lucene.apache.org>; Thu,  4 Dec 2008 04:12:35 -0800 (PST)
Message-Id: <0ACDAD24-D2F5-4CA3-9AAE-FA7293646538@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <6d6cf45b0812031402o64774bfkea55e29d0259988a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Indexing Names in Lucene -- Thomas = Tom, etc
Date: Thu, 4 Dec 2008 07:12:34 -0500
References: <6d6cf45b0812022216i29e94110q29372c575401ea60@mail.gmail.com> <120201c9552b$67265590$330bc30a@sv.us.sonicwall.com> <6d6cf45b0812031402o64774bfkea55e29d0259988a@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I believe these lists exists out on the Internet, just google for  
something like "most common first names" or "common  
nicknames" (yields: http://www.cc.kyoto-su.ac.jp/~trobb/nicklist.html  
for instance)

If you want to dig deeper, you might look into named entity  
recognition research, and also co-reference resolution research, as  
those problems often have to deal with this problem.

HTH,
Grant

On Dec 3, 2008, at 5:02 PM, Khawaja Shams wrote:

> Hi,   Yes that is pretty obvious that I would have to index Tom, but  
> I think
> you missed the point. I don't have a list of names with their nick  
> names,
> and this is pretty common: Mike being Michael, Richard being Rich or  
> Dick,
> William could be Bill or Will, etc. I thought I would check if there  
> was a
> canonical way of doing this before building my own list from common  
> sir
> names.  Thanks for your time.
>
>
> Sincerely,
> Khawaja Shams
>
> On Wed, Dec 3, 2008 at 1:42 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>
>> If you want to query for Tom, then you need to index the value Tom.  
>> Create
>> one more field as Alias or add alias name as part of name field.
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Khawaja Shams"  
>> <ksshams@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Wednesday, December 03, 2008 11:46 AM
>> Subject: Indexing Names in Lucene -- Thomas = Tom, etc
>>
>>
>>
>> Hello,  I am indexing documents with a field that contains the  
>> first and
>>> last name of people. It is working wonderfully with a slight  
>>> issue: if
>>> Thomas is indexed for a document, I would like searches for Tom to  
>>> match
>>> that document. I am sure this is a common problem that many of you  
>>> must
>>> have
>>> addressed, but I was unable to find anything in the archives or on  
>>> Google.
>>> Thanks in advance for the guidance.
>>>
>>>
>>> Regards,
>>> Khawaja Shams
>>>
>>>
>> Send instant messages to your online friends http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 12:51:48 2008
Return-Path: <java-user-return-37507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58131 invoked from network); 4 Dec 2008 12:51:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 12:51:48 -0000
Received: (qmail 75038 invoked by uid 500); 4 Dec 2008 12:51:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75004 invoked by uid 500); 4 Dec 2008 12:51:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74993 invoked by uid 99); 4 Dec 2008 12:51:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 04:51:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dk1982@hotmail.it designates 65.55.34.77 as permitted sender)
Received: from [65.55.34.77] (HELO col0-omc2-s3.col0.hotmail.com) (65.55.34.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 12:50:23 +0000
Received: from COL113-W32 ([65.55.34.73]) by col0-omc2-s3.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 4 Dec 2008 04:50:49 -0800
Message-ID: <COL113-W32CCABA46AA29E6A0A03BDBE020@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_75a2767c-a62c-46e0-8208-3d08d71bfd8b_"
X-Originating-IP: [88.51.233.126]
From: tiziano bernardi <dk1982@hotmail.it>
To: java lucene domande <java-user@lucene.apache.org>
Subject: RE: Pdf in Lucene?
Date: Thu, 4 Dec 2008 13:50:50 +0100
Importance: Normal
In-Reply-To: <5816fbdd0812040149x6702c556tf3d6c97e93d1d272@mail.gmail.com>
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
	 <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com>
 	 <COL113-W45437A1268795288A8839CBE010@phx.gbl>
 	 <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
 	 <COL113-W455B5282CF986CD2D0A97EBE010@phx.gbl>
 	 <81F5AE5D-760A-40C9-A4B8-2889C9E9CACD@apache.org>
 	 <COL113-W8284C0CC1716F89F669205BE000@phx.gbl> 
 <5816fbdd0812040149x6702c556tf3d6c97e93d1d272@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 04 Dec 2008 12:50:49.0984 (UTC) FILETIME=[EF39C000:01C9560E]
X-Virus-Checked: Checked by ClamAV on apache.org

--_75a2767c-a62c-46e0-8208-3d08d71bfd8b_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Thanks very kind ...
But I've tried that code but I do not work ...
You could send me a simple working class that uses it please?
Thanks> Date: Thu=2C 4 Dec 2008 15:19:26 +0530> From: kalanir@gmail.com> To=
: java-user@lucene.apache.org> Subject: Re: Pdf in Lucene?> > Hi=2C> > In m=
y case I used PDFBox=2C just to extract the text from PDF document and> the=
n I created the Lucene document giving the extracted text. (I didn't use> t=
he PDFBox built in Lucene search engine). So I didn't get any> incompatibil=
ity problems.> > This blog post shows the way.> http://kalanir.blogspot.com=
/2008/08/indexing-pdf-documents-with-lucene.html> > It worked perfect for m=
e.> > Thanks.
_________________________________________________________________
Ci sai fare con l'italiano? Scoprilo con Typectionary!
http://typectionary.it.msn.com/=

--_75a2767c-a62c-46e0-8208-3d08d71bfd8b_--

From java-user-return-37508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 13:00:24 2008
Return-Path: <java-user-return-37508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60640 invoked from network); 4 Dec 2008 13:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 13:00:24 -0000
Received: (qmail 95101 invoked by uid 500); 4 Dec 2008 13:00:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95067 invoked by uid 500); 4 Dec 2008 13:00:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95056 invoked by uid 99); 4 Dec 2008 13:00:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 05:00:29 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 12:59:00 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3439779fkq.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 04:59:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=Z5ml9bYW5SQAF9FU4lYey5mPqwf5qIeufGeh1VGvW8E=;
        b=r0mOQeUkWq5yXbteGiDuZ6US8seosD+3aIe1vcCIx0yvr98NNdlkkX6WwLfAcJ2w36
         BT1vaYUwK6xRfautR1kBcCIQ715ZT0JwqdWYQ1h1/taAQh8kDrY5wWNmE+YnIE2kWBe2
         UqCIXH7WsxRQXRQe/nJ5tmgD/pIBxllOG9yaw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=mStksV8oh/9jHHWc5NsBhOQS1pDgfuQsfVpWyEc583MshCZRffOs45+oREkPQJ8c9o
         Ecx+Kf0koRsJ5Vyg/y3rsID6vzICi/tTfMt2W4EKuxALGjXk7urNE/hoapqdD09Ui7Ul
         ljCArj1+zJ0+NJVDw/AAzNg9OtHPGZ20lQRHQ=
Received: by 10.223.109.84 with SMTP id i20mr280926fap.42.1228395577651;
        Thu, 04 Dec 2008 04:59:37 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Thu, 4 Dec 2008 04:59:37 -0800 (PST)
Message-ID: <5d53d5770812040459y72e3braa6de15cdc68518f@mail.gmail.com>
Date: Thu, 4 Dec 2008 08:59:37 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Design guidance - search strategy
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28870_28702522.1228395577605"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28870_28702522.1228395577605
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have documents with this simple schema in Lucene which I can not change.
docid: (int)
contents: (text)

The user is given a list of 10,000 documents in a tree which they select to
search, usually they select 5000 or so.

I only want to search those 5000 documents. I have the 'id' fields. That is
all.

I do this now:

Get the 'Hits' for all documents.
Loop through all Hits looking for any 'docid' that is in the 5000 selected
by the user
Add found docs to a collection of found documents and return that to the UI.


Is there a better way of doing this?

------=_Part_28870_28702522.1228395577605--

From java-user-return-37509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 13:37:29 2008
Return-Path: <java-user-return-37509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77333 invoked from network); 4 Dec 2008 13:37:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 13:37:29 -0000
Received: (qmail 55185 invoked by uid 500); 4 Dec 2008 13:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55151 invoked by uid 500); 4 Dec 2008 13:37:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55140 invoked by uid 99); 4 Dec 2008 13:37:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 05:37:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.90.181 as permitted sender)
Received: from [66.249.90.181] (HELO ik-out-1112.google.com) (66.249.90.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 13:36:06 +0000
Received: by ik-out-1112.google.com with SMTP id c29so3359613ika.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 05:36:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=TrApmLvExh5J1Bv4NngmZrbQgKGL5Yq44OBpc3py5p0=;
        b=JbN5xKSvfE5ybUTJ2fnPXXoBgsfrGxreb+h589IfhhlXQfT31XbYCLBGX+qmeuMUoS
         c9qA/FyzhO+2BDcYcZpHL+zROv3OmWTUgilS2zVD57toxGEZ1ZlWaVGC/NJLjBroYPWv
         ClMrGHzyYFBB4VoCiSLSOMkxGA7rrNj7TpJCc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wf0OdW0jlY8Eq3cqa/nLkorsPNQzQ171hup/vAZ4k9MGSCgq+o2TVqS7BZkrPiZMkE
         y/xyhT+kOk5iRYD17thzWFRNaqfhgqghbRYuasp8KKP5HZg4XqRPGT6ozemknSrdoOul
         1GZOMx5xUQdoNKzhb3TPSkTLR9z+mDg/ku1Dc=
Received: by 10.86.95.8 with SMTP id s8mr8604486fgb.79.1228397802851;
        Thu, 04 Dec 2008 05:36:42 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Thu, 4 Dec 2008 05:36:42 -0800 (PST)
Message-ID: <359a92830812040536t55e11e63s47bc6df9d13eb962@mail.gmail.com>
Date: Thu, 4 Dec 2008 08:36:42 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design guidance - search strategy
In-Reply-To: <5d53d5770812040459y72e3braa6de15cdc68518f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23359_30171589.1228397802834"
References: <5d53d5770812040459y72e3braa6de15cdc68518f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23359_30171589.1228397802834
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It's generally a bad idea to iterate a Hits object. In fact, Hits
is deprecated in recent versions of Lucene. The underlying
problem is that the query is re-executed every 100 responses
or so.

First suggestion, create a Filter by iterating over your
docid field and use that in your searches see
several of the Searcher.search variants.

Second suggestion, use one of the collector classes rather than
Hits, e.g. TopDoc*, TopFieldDoc*, whichever suits.


Best
Erick

On Thu, Dec 4, 2008 at 7:59 AM, Ian Vink <ianvink@gmail.com> wrote:

> I have documents with this simple schema in Lucene which I can not change.
> docid: (int)
> contents: (text)
>
> The user is given a list of 10,000 documents in a tree which they select to
> search, usually they select 5000 or so.
>
> I only want to search those 5000 documents. I have the 'id' fields. That is
> all.
>
> I do this now:
>
> Get the 'Hits' for all documents.
> Loop through all Hits looking for any 'docid' that is in the 5000 selected
> by the user
> Add found docs to a collection of found documents and return that to the
> UI.
>
>
> Is there a better way of doing this?
>

------=_Part_23359_30171589.1228397802834--

From java-user-return-37510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 13:46:30 2008
Return-Path: <java-user-return-37510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82201 invoked from network); 4 Dec 2008 13:46:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 13:46:28 -0000
Received: (qmail 65363 invoked by uid 500); 4 Dec 2008 13:46:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65049 invoked by uid 500); 4 Dec 2008 13:46:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65037 invoked by uid 99); 4 Dec 2008 13:46:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 05:46:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 13:45:03 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3457820fkq.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 05:45:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ryA/OUKhRWP1t3zZt1Xz51dLJIruw5OdBtOgDQ2xi9Y=;
        b=pJcuoRiIfpC1cizeug5Gj9nF5mz3MsLaZnX1idqQhX8r32TZYXswVATrsjzCz77/UD
         H2ddW+LQG2aEIx3i4a1LE5bGlDQ1DyXTm0d/p/wtI3If0guG9R2XofJ6SVQH7C8vlFm0
         YVkWzhBxI/6tIy20KCB2nSXtKQsa4auZfzMXA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QIXtwV3q3lqSm8QT18HemylFzEyHAvUiV/DyN4uSls+MQ1nj4UoEFxOzbVJAGSacua
         RCcTqyWCZNGZsAWzPTZFTNDTI5N4TeY1BDAuXWLElE52dy+AAoMoVqnKeesErGKNXXUf
         uNhCTWpKxwQEmaee5Pk7PDyjGtgrra9Vo7s5A=
Received: by 10.223.110.211 with SMTP id o19mr332199fap.57.1228398339990;
        Thu, 04 Dec 2008 05:45:39 -0800 (PST)
Received: by 10.223.109.20 with HTTP; Thu, 4 Dec 2008 05:45:39 -0800 (PST)
Message-ID: <5816fbdd0812040545x31b0233fjc4ccce3c329c8881@mail.gmail.com>
Date: Thu, 4 Dec 2008 19:15:39 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Pdf in Lucene?
In-Reply-To: <COL113-W32CCABA46AA29E6A0A03BDBE020@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4892_10446687.1228398339982"
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
	 <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com>
	 <COL113-W45437A1268795288A8839CBE010@phx.gbl>
	 <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
	 <COL113-W455B5282CF986CD2D0A97EBE010@phx.gbl>
	 <81F5AE5D-760A-40C9-A4B8-2889C9E9CACD@apache.org>
	 <COL113-W8284C0CC1716F89F669205BE000@phx.gbl>
	 <5816fbdd0812040149x6702c556tf3d6c97e93d1d272@mail.gmail.com>
	 <COL113-W32CCABA46AA29E6A0A03BDBE020@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4892_10446687.1228398339982
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Tiziano,

What is the error you got? I think you can get the text easily using the
code shown below.


FileInputStream fi = new FileInputStream(new File("sample.pdf"));

PDFParser parser = new PDFParser(fi);
parser.parse();
COSDocument cd = parser.getDocument();
PDFTextStripper stripper = new PDFTextStripper();
String text = stripper.getText(new PDDocument(cd));
cd.close();

After getting the value for text you can simply create the Lucene document.

Document doc = new Document();
            doc.add(new Field("id", "2", Field.Store.YES,
Field.Index.TOKENIZED));
            doc.add(new Field("content", docText,Field.Store.NO,
Field.Index.TOKENIZED));


On Thu, Dec 4, 2008 at 6:20 PM, tiziano bernardi <dk1982@hotmail.it> wrote:

>
> Thanks very kind ...
> But I've tried that code but I do not work ...
> You could send me a simple working class that uses it please?
> Thanks> Date: Thu, 4 Dec 2008 15:19:26 +0530> From: kalanir@gmail.com> To:
> java-user@lucene.apache.org> Subject: Re: Pdf in Lucene?> > Hi,> > In my
> case I used PDFBox, just to extract the text from PDF document and> then I
> created the Lucene document giving the extracted text. (I didn't use> the
> PDFBox built in Lucene search engine). So I didn't get any> incompatibility
> problems.> > This blog post shows the way.>
> http://kalanir.blogspot.com/2008/08/indexing-pdf-documents-with-lucene.html>
> > It worked perfect for me.> > Thanks.
> _________________________________________________________________
> Ci sai fare con l'italiano? Scoprilo con Typectionary!
> http://typectionary.it.msn.com/
>



-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_4892_10446687.1228398339982--

From java-user-return-37511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 13:47:51 2008
Return-Path: <java-user-return-37511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83121 invoked from network); 4 Dec 2008 13:47:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 13:47:50 -0000
Received: (qmail 67612 invoked by uid 500); 4 Dec 2008 13:47:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67581 invoked by uid 500); 4 Dec 2008 13:47:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67568 invoked by uid 99); 4 Dec 2008 13:47:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 05:47:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kalanir@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 13:46:24 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2934320fgb.27
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 05:47:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=H9uZoX//3FFtflnt5r0aqBSihzdbI820cQpzoU5s5IM=;
        b=WnUzqqlAnMVyl5O8m3AJl7g+KjTAGrgiGBMiDPbMI9lymMu6o6SbgERUW1U9ecvdI+
         0/NZvMekVIWQ9rQMWP4a3BJxhPC4rj74djvlwyqYApSVTUp5oPiol6+qV8bMu2PPAbx8
         SqxWYpXkPdL1AytE2rK/OKM2Tlhh3ANxuYiys=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YcuNJJxjCw3j8q4T9DjBGNo1V/tQ+EIWVXEeKfQq/7uKATdLRCwoLWderjjg6SEtou
         n+fzyW3cq3uWChv5PpXyrG7OfHN15gnOoVEe63QU/PN1pE90LndSa2Gc8XabCv2sDKEi
         ZJEX3qdS8yiEx9fSAkOND9w3pUv1Quxns5Z/A=
Received: by 10.223.113.3 with SMTP id y3mr332905fap.71.1228398421813;
        Thu, 04 Dec 2008 05:47:01 -0800 (PST)
Received: by 10.223.109.20 with HTTP; Thu, 4 Dec 2008 05:47:01 -0800 (PST)
Message-ID: <5816fbdd0812040547r3767cc86u1efef4c07955833c@mail.gmail.com>
Date: Thu, 4 Dec 2008 19:17:01 +0530
From: "Kalani Ruwanpathirana" <kalanir@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Pdf in Lucene?
In-Reply-To: <5816fbdd0812040545x31b0233fjc4ccce3c329c8881@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4900_18450488.1228398421803"
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
	 <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com>
	 <COL113-W45437A1268795288A8839CBE010@phx.gbl>
	 <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
	 <COL113-W455B5282CF986CD2D0A97EBE010@phx.gbl>
	 <81F5AE5D-760A-40C9-A4B8-2889C9E9CACD@apache.org>
	 <COL113-W8284C0CC1716F89F669205BE000@phx.gbl>
	 <5816fbdd0812040149x6702c556tf3d6c97e93d1d272@mail.gmail.com>
	 <COL113-W32CCABA46AA29E6A0A03BDBE020@phx.gbl>
	 <5816fbdd0812040545x31b0233fjc4ccce3c329c8881@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4900_18450488.1228398421803
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Tiziano,

What is the error you got? I think you can get the text easily using the
code shown below.


FileInputStream fi = new FileInputStream(new File("sample.pdf"));

PDFParser parser = new PDFParser(fi);
parser.parse();
COSDocument cd = parser.getDocument();
PDFTextStripper stripper = new PDFTextStripper();
String text = stripper.getText(new PDDocument(cd));
cd.close();

After getting the value for text you can simply create the Lucene document.

Document doc = new Document();
doc.add(new Field("content", text,Field.Store.NO <http://field.store.no/>,
Field.Index.TOKENIZED));
>
>
>
>
> On Thu, Dec 4, 2008 at 6:20 PM, tiziano bernardi <dk1982@hotmail.it>wrote:
>
>>
>> Thanks very kind ...
>> But I've tried that code but I do not work ...
>> You could send me a simple working class that uses it please?
>> Thanks> Date: Thu, 4 Dec 2008 15:19:26 +0530> From: kalanir@gmail.com>
>> To: java-user@lucene.apache.org> Subject: Re: Pdf in Lucene?> > Hi,> > In
>> my case I used PDFBox, just to extract the text from PDF document and> then
>> I created the Lucene document giving the extracted text. (I didn't use> the
>> PDFBox built in Lucene search engine). So I didn't get any> incompatibility
>> problems.> > This blog post shows the way.>
>> http://kalanir.blogspot.com/2008/08/indexing-pdf-documents-with-lucene.html>
>> > It worked perfect for me.> > Thanks.
>> _________________________________________________________________
>> Ci sai fare con l'italiano? Scoprilo con Typectionary!
>> http://typectionary.it.msn.com/
>>
>
>
>
> --
> Kalani Ruwanpathirana
> Department of Computer Science & Engineering
> University of Moratuwa
>



-- 
Kalani Ruwanpathirana
Department of Computer Science & Engineering
University of Moratuwa

------=_Part_4900_18450488.1228398421803--

From java-user-return-37512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 14:51:35 2008
Return-Path: <java-user-return-37512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24828 invoked from network); 4 Dec 2008 14:51:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 14:51:35 -0000
Received: (qmail 64894 invoked by uid 500); 4 Dec 2008 14:51:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64853 invoked by uid 500); 4 Dec 2008 14:51:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64842 invoked by uid 99); 4 Dec 2008 14:51:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 06:51:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dk1982@hotmail.it designates 65.55.34.82 as permitted sender)
Received: from [65.55.34.82] (HELO col0-omc2-s8.col0.hotmail.com) (65.55.34.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 14:50:07 +0000
Received: from COL113-W70 ([65.55.34.72]) by col0-omc2-s8.col0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 4 Dec 2008 06:50:34 -0800
Message-ID: <COL113-W70966CEA408AE058F44DA3BE020@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_207613b6-c3ab-42cd-ab45-0c453914934f_"
X-Originating-IP: [88.51.233.126]
From: tiziano bernardi <dk1982@hotmail.it>
To: java lucene domande <java-user@lucene.apache.org>
Subject: RE: Pdf in Lucene?
Date: Thu, 4 Dec 2008 15:50:34 +0100
Importance: Normal
In-Reply-To: <5816fbdd0812040547r3767cc86u1efef4c07955833c@mail.gmail.com>
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl>
	 <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com>
 	 <COL113-W45437A1268795288A8839CBE010@phx.gbl>
 	 <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org>
 	 <COL113-W455B5282CF986CD2D0A97EBE010@phx.gbl>
 	 <81F5AE5D-760A-40C9-A4B8-2889C9E9CACD@apache.org>
 	 <COL113-W8284C0CC1716F89F669205BE000@phx.gbl>
 	 <5816fbdd0812040149x6702c556tf3d6c97e93d1d272@mail.gmail.com>
 	 <COL113-W32CCABA46AA29E6A0A03BDBE020@phx.gbl>
 	 <5816fbdd0812040545x31b0233fjc4ccce3c329c8881@mail.gmail.com> 
 <5816fbdd0812040547r3767cc86u1efef4c07955833c@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 04 Dec 2008 14:50:34.0264 (UTC) FILETIME=[A963E180:01C9561F]
X-Virus-Checked: Checked by ClamAV on apache.org

--_207613b6-c3ab-42cd-ab45-0c453914934f_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


I entered your code inside a main.
I have imported libraries required by mistake but me.
First error:

parser.parse()=3B

Syntax error on token "parse"=2C Identifier expected after this token
Second error:
cd.close()=3B
Syntax error on token "close"=2C Identifier expected after this token
Third error:
doc.add(new Field("content"=2C text=2CField.Store.NO <http:\field.store.no>=
=2C
Field.Index.TOKENIZED))=3B
Multiple markers at this line
- Syntax error on tokens=2C delete these tokens
- Syntax error on token "add"=2C =3D expected after this token
- Syntax error on token "=2C"=2C delete this token
- Syntax error on token(s)=2C misplaced construct(s)
> Date: Thu=2C 4 Dec 2008 19:17:01 +0530> From: kalanir@gmail.com> To: java=
-user@lucene.apache.org> Subject: Re: Pdf in Lucene?> > Hi Tiziano=2C> > Wh=
at is the error you got? I think you can get the text easily using the> cod=
e shown below.> > > FileInputStream fi =3D new FileInputStream(new File("sa=
mple.pdf"))=3B> > PDFParser parser =3D new PDFParser(fi)=3B> parser.parse()=
=3B> COSDocument cd =3D parser.getDocument()=3B> PDFTextStripper stripper =
=3D new PDFTextStripper()=3B> String text =3D stripper.getText(new PDDocume=
nt(cd))=3B> cd.close()=3B> > After getting the value for text you can simpl=
y create the Lucene document.> > Document doc =3D new Document()=3B> doc.ad=
d(new Field("content"=2C text=2CField.Store.NO <http://field.store.no/>=2C>=
 Field.Index.TOKENIZED))=3B> >> >> >> >> > On Thu=2C Dec 4=2C 2008 at 6:20 =
PM=2C tiziano bernardi <dk1982@hotmail.it>wrote:> >> >>> >> Thanks very kin=
d ...> >> But I've tried that code but I do not work ...> >> You could send=
 me a simple working class that uses it please?> >> Thanks> Date: Thu=2C 4 =
Dec 2008 15:19:26 +0530> From: kalanir@gmail.com>> >> To: java-user@lucene.=
apache.org> Subject: Re: Pdf in Lucene?> > Hi=2C> > In> >> my case I used P=
DFBox=2C just to extract the text from PDF document and> then> >> I created=
 the Lucene document giving the extracted text. (I didn't use> the> >> PDFB=
ox built in Lucene search engine). So I didn't get any> incompatibility> >>=
 problems.> > This blog post shows the way.>> >> http://kalanir.blogspot.co=
m/2008/08/indexing-pdf-documents-with-lucene.html>> >> > It worked perfect =
for me.> > Thanks.> >> ____________________________________________________=
_____________> >> Ci sai fare con l'italiano? Scoprilo con Typectionary!> >=
> http://typectionary.it.msn.com/> >>> >> >> >> > --> > Kalani Ruwanpathira=
na> > Department of Computer Science & Engineering> > University of Moratuw=
a> >> > > > -- > Kalani Ruwanpathirana> Department of Computer Science & En=
gineering> University of Moratuwa
_________________________________________________________________
Fanne di tutti i colori=2C personalizza la tua Hotmail!
http://imagine-windowslive.com/Hotmail/#0=

--_207613b6-c3ab-42cd-ab45-0c453914934f_--

From java-user-return-37513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 16:34:55 2008
Return-Path: <java-user-return-37513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22822 invoked from network); 4 Dec 2008 16:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 16:34:55 -0000
Received: (qmail 68891 invoked by uid 500); 4 Dec 2008 16:35:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68850 invoked by uid 500); 4 Dec 2008 16:35:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68836 invoked by uid 99); 4 Dec 2008 16:35:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 08:35:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Dec 2008 16:33:29 +0000
Received: (qmail 47559 invoked by uid 60001); 4 Dec 2008 16:33:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Tcx1BEJ2tvAZvTdnhs8QD+APJ15A17TixrG1MVpXUzKFpQfMRlQZbOxbeL5dUQr6p197VVvGIn0NIhCPsvxEpc+sXA0sqU+Lq9DnHQvFiAF2RW8YeDFJU+nzK9ayvY7w5jUiEyFY3n+EqFb1BKHwBvXaYHT1t3Je27Lxq72w874=;
X-YMail-OSG: .GPtglYVM1nzoKoVk.WzuD7ESCXeMoZlWYeA.0q73ynHzsAV31r7yUWEk8.w5FY0PaGlMoaNJhtjWu3xbwB8CXh5LH0u3J2IHPtqiqV13wCDCjYm.8zXI7mp_Gd8QFngSxPdsjPhu2S.YwkBqZ06as_7jZpt.hI5uEFrFLc4nlIs5GaWBmpfYg3gzUA3jfYghHo8MN_CD18R38ld1bBpsk07Fg4g6tA-
Received: from [24.90.13.131] by web50303.mail.re2.yahoo.com via HTTP; Thu, 04 Dec 2008 08:33:15 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <bf1404350812021113m6f7bd276gd34845dc8486cfce@mail.gmail.com>
Date: Thu, 4 Dec 2008 08:33:15 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: I would want to know more about the lucene implementation in C++
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <829586.47027.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

There is CLucene.  It's not a part of Apache, but lives on.... SourceForge, I think.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Ariel <isaacrc82@gmail.com>
> To: lucene user <java-user@lucene.apache.org>
> Sent: Tuesday, December 2, 2008 2:13:08 PM
> Subject: I would want to know more about the lucene implementation in C++
> 
> Hi everybody:
> I have seen the lucene project for C++ has been abandoned, could you tell me
> if there is another similar implementation of java lucene in C++ ???


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 20:02:32 2008
Return-Path: <java-user-return-37514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65047 invoked from network); 4 Dec 2008 20:02:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 20:02:32 -0000
Received: (qmail 77998 invoked by uid 500); 4 Dec 2008 20:02:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77955 invoked by uid 500); 4 Dec 2008 20:02:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77944 invoked by uid 99); 4 Dec 2008 20:02:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 12:02:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 20:01:08 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Date: Thu, 4 Dec 2008 15:01:53 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43032BE171@mail3.basistech.net>
In-Reply-To: <46BBD20F-71EF-46CA-80C5-09EBD0392773@mikemccandless.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: NPE inside org.apache.lucene.index.SegmentReader.getNorms
Thread-Index: AclWBnbWQPjLy+d3RoWpWQao++WJMQARAJhQ
References: <E95FD77F0171D14DA1EEE0A785E92B43032BE02E@mail3.basistech.net> <E95FD77F0171D14DA1EEE0A785E92B43032BE04F@mail3.basistech.net> <7838F15E-7D98-4B51-8D4C-140699A6DEBD@mikemccandless.com> <E95FD77F0171D14DA1EEE0A785E92B43032BE0C7@mail3.basistech.net> <7D686F9C-11AF-4085-B8CE-66AD37FA0FCA@gmail.com> <46BBD20F-71EF-46CA-80C5-09EBD0392773@mikemccandless.com>
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

> Mark Miller wrote:
>=20
> > Sounds familiar. This may actually be in JIRA already.
>=20
> Maybe this is:
>=20
>      https://issues.apache.org/jira/browse/LUCENE-689
>=20
> ?
>=20
> I just marked it as fix version 2.9.
>=20
> Mike

Not exactly.
NPE was from SegmentReader in my case while
NPE is from SpanOrQuery in the case described in LUCENE-689...

I wouldn't worry about it.  Nobody shouldn't be giving
a zero-member array to SpanNearQuery constructor for
any useful purposes.

-kuro =20
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 20:28:50 2008
Return-Path: <java-user-return-37515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70752 invoked from network); 4 Dec 2008 20:28:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 20:28:50 -0000
Received: (qmail 32328 invoked by uid 500); 4 Dec 2008 20:28:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32297 invoked by uid 500); 4 Dec 2008 20:28:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32286 invoked by uid 99); 4 Dec 2008 20:28:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 12:28:55 -0800
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,HTML_MESSAGE,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.1.38 as permitted sender)
Received: from [64.18.1.38] (HELO psmtp.com) (64.18.1.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Dec 2008 20:27:24 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by exprod6ob117.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSTg9WqTNkc+eIH0FeEwQfGIUFWxHWLvn@postini.com; Thu, 04 Dec 2008 12:28:12 PST
Received: from D01SMTP04.Mi8.com ([172.16.1.243]) by Outbound01.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 4 Dec 2008 15:28:09 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by D01SMTP04.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 4 Dec 2008 15:28:09 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.106]) with Microsoft Exchange Server HTTP-DAV ;
 Thu,  4 Dec 2008 20:27:32 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Thu, 04 Dec 2008 12:27:30 -0800
Subject: Slow queries with lots of hits
From: Tim Sturge <tsturge@hi5.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-ID: <C55D7D32.1F06%tsturge@hi5.com>
Thread-Topic: Slow queries with lots of hits
Thread-Index: AclWTrro68dEAqioL0muJH8GNAyF4g==
Mime-version: 1.0
Content-type: multipart/alternative;
	boundary="B_3311238451_263672462"
X-OriginalArrivalTime: 04 Dec 2008 20:28:09.0673 (UTC) FILETIME=[D28E0390:01C9564E]
X-Virus-Checked: Checked by ClamAV on apache.org

--B_3311238451_263672462
Content-type: text/plain;
	charset="ISO-8859-1"
Content-transfer-encoding: quoted-printable

Hi all,

I have an interesting problem with my query traffic. Most of the queries ru=
n
in a fairly short amount of time (< 100ms) but a few take over 1000ms. Thes=
e
queries are predominantly those with a huge number of hits (>1 million hits
in a >100 million document index). The time taken (as far as I can tell) is
for lucene to sit there while it scores and sorts all these results.

However it turns out these queries really don=B9t have top results. That is,
of the million documents, there are easily 10000 which are decent results
(basically those above some threshold score). Frankly, just returning some
consistent (so paging and reload work) but
otherwise arbitrary ranking of these 10000 results would be more than good
enough.

It seems to me that a solution would be to impose some sort of pseudo-rando=
m
filter (e.g. consider only every n-th document assuming they are uniformly
distributed). I=B9m wondering if anyone else has experience with this sort of
issue and what solutions they have found to work well in practice.

Thanks,

Tim

--B_3311238451_263672462--


From java-user-return-37516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 20:40:10 2008
Return-Path: <java-user-return-37516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75773 invoked from network); 4 Dec 2008 20:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 20:40:10 -0000
Received: (qmail 62465 invoked by uid 500); 4 Dec 2008 20:40:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62431 invoked by uid 500); 4 Dec 2008 20:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62418 invoked by uid 99); 4 Dec 2008 20:40:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 12:40:15 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 20:38:46 +0000
Received: by ug-out-1314.google.com with SMTP id c2so4016700ugf.23
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 12:39:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=fegJQsJKsfSpAT18FJ6ftBgRML4bS8JoQwQ4I9QQRGU=;
        b=Ti2ctsg2+ZAhQS+RFLu+4E9q6Wu9cgydNP/AkcVUrDshtp1can93xpxY0gGxkYEvCZ
         2xv5b6V5ZwgCD1HxyzKq2OWx9pBP9GH3mhfOqbqc38oSkj/+wAL2bkkWP6sVXX36klUk
         LxG27MdS8GXeWkJmvEKphhKjIfc7x+nfqCwjE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Sq43d6AL3je1s8ynM5qZACVu5ChUkmr8eZQonVmyostsNL2HU8INoCwpzo4eRCySVY
         3hITYGsmsOrR2NJdOQDRd4s3CP551CNjDOwFMKp2Qtd6BwqteyDfxX7IdPAtzwwfpAr3
         NJfak906/6QXbC4IgTzkDvI3gcrAXD06QKLSk=
Received: by 10.86.93.19 with SMTP id q19mr84546fgb.62.1228423173244;
        Thu, 04 Dec 2008 12:39:33 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Thu, 4 Dec 2008 12:39:33 -0800 (PST)
Message-ID: <359a92830812041239i56d3d22m77e4c7370c1a45e6@mail.gmail.com>
Date: Thu, 4 Dec 2008 15:39:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Slow queries with lots of hits
In-Reply-To: <C55D7D32.1F06%tsturge@hi5.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30643_28432223.1228423173247"
References: <C55D7D32.1F06%tsturge@hi5.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30643_28432223.1228423173247
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

The problem here is how *could* a system return even the top
10,000 results without scoring them all? What if the millionth
hit resulted in the very best match in the entire corpus?

That said, sorting may well be the issue here rather than scoring.
You can use a TopDocCollector to get the top N matches (unsorted)
and then do something like use the FieldSortedHitQueue to sort
those N matches, leaving out all the rest of the matches. Note
this assumes that when you say "sorting" you mean sorting
by something other than relevance.....

Hope this helps
Erick

On Thu, Dec 4, 2008 at 3:27 PM, Tim Sturge <tsturge@hi5.com> wrote:

> Hi all,
>
> I have an interesting problem with my query traffic. Most of the queries
> run
> in a fairly short amount of time (< 100ms) but a few take over 1000ms.
> These
> queries are predominantly those with a huge number of hits (>1 million hi=
ts
> in a >100 million document index). The time taken (as far as I can tell) =
is
> for lucene to sit there while it scores and sorts all these results.
>
> However it turns out these queries really don=B9t have top results. That =
is,
> of the million documents, there are easily 10000 which are decent results
> (basically those above some threshold score). Frankly, just returning som=
e
> consistent (so paging and reload work) but
> otherwise arbitrary ranking of these 10000 results would be more than goo=
d
> enough.
>
> It seems to me that a solution would be to impose some sort of
> pseudo-random
> filter (e.g. consider only every n-th document assuming they are uniforml=
y
> distributed). I=B9m wondering if anyone else has experience with this sor=
t of
> issue and what solutions they have found to work well in practice.
>
> Thanks,
>
> Tim
>

------=_Part_30643_28432223.1228423173247--

From java-user-return-37517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 20:56:50 2008
Return-Path: <java-user-return-37517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81339 invoked from network); 4 Dec 2008 20:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 20:56:50 -0000
Received: (qmail 91231 invoked by uid 500); 4 Dec 2008 20:56:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91194 invoked by uid 500); 4 Dec 2008 20:56:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91183 invoked by uid 99); 4 Dec 2008 20:56:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 12:56:56 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.1.181 as permitted sender)
Received: from [64.18.1.181] (HELO exprod6og101.obsmtp.com) (64.18.1.181)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 04 Dec 2008 20:55:25 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by exprod6ob101.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSThDYCjrqfRgV0ckIH1AODq0+9GIjSz+@postini.com; Thu, 04 Dec 2008 12:56:13 PST
Received: from D01HOST03.Mi8.com ([172.16.1.25]) by Outbound02.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 4 Dec 2008 15:53:51 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by D01HOST03.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 4 Dec 2008 15:53:50 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.106]) with Microsoft Exchange Server HTTP-DAV ;
 Thu,  4 Dec 2008 20:52:58 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Thu, 04 Dec 2008 12:52:54 -0800
Subject: Re: Slow queries with lots of hits
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C55D8326.1F0E%tsturge@hi5.com>
Thread-Topic: Slow queries with lots of hits
Thread-Index: AclWUkdIPbHuO2/zIkKb6yvtSQEd3w==
In-Reply-To: <359a92830812041239i56d3d22m77e4c7370c1a45e6@mail.gmail.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="ISO-8859-1"
Content-transfer-encoding: quoted-printable
X-OriginalArrivalTime: 04 Dec 2008 20:53:50.0822 (UTC) FILETIME=[6926B060:01C95652]
X-Virus-Checked: Checked by ClamAV on apache.org

That makes sense. I should be more precise in that all I need is 100 of the
10000 "reasonable" results.

The concern I would have with a TopDocCollector is that this is biased
towards the top of the index which translates for me into a bias for older
documents. I'd prefer no age bias or a newer document bias. So I'll see wha=
t
I can do with a "BottomDocCollector" :-)

Tim


On 12/4/08 12:39 PM, "Erick Erickson" <erickerickson@gmail.com> wrote:

> The problem here is how *could* a system return even the top
> 10,000 results without scoring them all? What if the millionth
> hit resulted in the very best match in the entire corpus?
>=20
> That said, sorting may well be the issue here rather than scoring.
> You can use a TopDocCollector to get the top N matches (unsorted)
> and then do something like use the FieldSortedHitQueue to sort
> those N matches, leaving out all the rest of the matches. Note
> this assumes that when you say "sorting" you mean sorting
> by something other than relevance.....
>=20
> Hope this helps
> Erick
>=20
> On Thu, Dec 4, 2008 at 3:27 PM, Tim Sturge <tsturge@hi5.com> wrote:
>=20
>> Hi all,
>>=20
>> I have an interesting problem with my query traffic. Most of the queries
>> run
>> in a fairly short amount of time (< 100ms) but a few take over 1000ms.
>> These
>> queries are predominantly those with a huge number of hits (>1 million h=
its
>> in a >100 million document index). The time taken (as far as I can tell)=
 is
>> for lucene to sit there while it scores and sorts all these results.
>>=20
>> However it turns out these queries really don=B9t have top results. That i=
s,
>> of the million documents, there are easily 10000 which are decent result=
s
>> (basically those above some threshold score). Frankly, just returning so=
me
>> consistent (so paging and reload work) but
>> otherwise arbitrary ranking of these 10000 results would be more than go=
od
>> enough.
>>=20
>> It seems to me that a solution would be to impose some sort of
>> pseudo-random
>> filter (e.g. consider only every n-th document assuming they are uniform=
ly
>> distributed). I=B9m wondering if anyone else has experience with this sort=
 of
>> issue and what solutions they have found to work well in practice.
>>=20
>> Thanks,
>>=20
>> Tim
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 21:13:47 2008
Return-Path: <java-user-return-37518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86239 invoked from network); 4 Dec 2008 21:13:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 21:13:47 -0000
Received: (qmail 18426 invoked by uid 500); 4 Dec 2008 21:13:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18395 invoked by uid 500); 4 Dec 2008 21:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18384 invoked by uid 99); 4 Dec 2008 21:13:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 13:13:52 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 21:12:23 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1774582eyi.53
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 13:13:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NHk8e3g1QF19QZGkOyRl7Zc4w3e++JTkVZ0UXPdKtVc=;
        b=E2ei17Nk+4L4Xo9jF3t6xqyME+SNjIb8pOQ7b8m17HX05izIxClsNO1tyVNowe000F
         Ln+dZ+d9uyTdSqqqqWoFaeLme6Tifzy0PCj6pHHk/15fifZqLx3GJqMGueohsst7A8HD
         8N0oqkDXbo4tHOI64xIUxuS+VDefzmSwtISHo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=JrG+lNCb+ier8UWvYNohdwUY0zgatbmMmKBY1h/JDLtxpGCKVHWLhOWpU0WByRa2by
         IK9Uz5/wiB2LKMIwDqG+08kQIkrPI8vh/uz9ra5uVjNdIlM4qgH4Ag2PkmJwc4U6JL3/
         X+tZ2scIy0iwt11XOQNoqwSA8lCcZecmtJ/ZY=
Received: by 10.86.57.9 with SMTP id f9mr122771fga.32.1228425179982;
        Thu, 04 Dec 2008 13:12:59 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Thu, 4 Dec 2008 13:12:59 -0800 (PST)
Message-ID: <359a92830812041312l52d6a8bet5a3032e7dbcbb4c8@mail.gmail.com>
Date: Thu, 4 Dec 2008 16:12:59 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Slow queries with lots of hits
In-Reply-To: <C55D8326.1F0E%tsturge@hi5.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30829_4573757.1228425179984"
References: <359a92830812041239i56d3d22m77e4c7370c1a45e6@mail.gmail.com>
	 <C55D8326.1F0E%tsturge@hi5.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30829_4573757.1228425179984
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Huh? TopDocCollector isn't biased unless you suppose that you'll
have many documents scoring *exactly* the same. You collect the
top N scoring documents.

Actually, I think this is all pretty much done for you with the
Searcher.search(Query query, Filter filter, int n) method. You
can pass null for Filter.......

Best
Erick

On Thu, Dec 4, 2008 at 3:52 PM, Tim Sturge <tsturge@hi5.com> wrote:

> That makes sense. I should be more precise in that all I need is 100 of t=
he
> 10000 "reasonable" results.
>
> The concern I would have with a TopDocCollector is that this is biased
> towards the top of the index which translates for me into a bias for olde=
r
> documents. I'd prefer no age bias or a newer document bias. So I'll see
> what
> I can do with a "BottomDocCollector" :-)
>
> Tim
>
>
> On 12/4/08 12:39 PM, "Erick Erickson" <erickerickson@gmail.com> wrote:
>
> > The problem here is how *could* a system return even the top
> > 10,000 results without scoring them all? What if the millionth
> > hit resulted in the very best match in the entire corpus?
> >
> > That said, sorting may well be the issue here rather than scoring.
> > You can use a TopDocCollector to get the top N matches (unsorted)
> > and then do something like use the FieldSortedHitQueue to sort
> > those N matches, leaving out all the rest of the matches. Note
> > this assumes that when you say "sorting" you mean sorting
> > by something other than relevance.....
> >
> > Hope this helps
> > Erick
> >
> > On Thu, Dec 4, 2008 at 3:27 PM, Tim Sturge <tsturge@hi5.com> wrote:
> >
> >> Hi all,
> >>
> >> I have an interesting problem with my query traffic. Most of the queri=
es
> >> run
> >> in a fairly short amount of time (< 100ms) but a few take over 1000ms.
> >> These
> >> queries are predominantly those with a huge number of hits (>1 million
> hits
> >> in a >100 million document index). The time taken (as far as I can tel=
l)
> is
> >> for lucene to sit there while it scores and sorts all these results.
> >>
> >> However it turns out these queries really don=B9t have top results. Th=
at
> is,
> >> of the million documents, there are easily 10000 which are decent
> results
> >> (basically those above some threshold score). Frankly, just returning
> some
> >> consistent (so paging and reload work) but
> >> otherwise arbitrary ranking of these 10000 results would be more than
> good
> >> enough.
> >>
> >> It seems to me that a solution would be to impose some sort of
> >> pseudo-random
> >> filter (e.g. consider only every n-th document assuming they are
> uniformly
> >> distributed). I=B9m wondering if anyone else has experience with this =
sort
> of
> >> issue and what solutions they have found to work well in practice.
> >>
> >> Thanks,
> >>
> >> Tim
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30829_4573757.1228425179984--

From java-user-return-37519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 21:15:48 2008
Return-Path: <java-user-return-37519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86892 invoked from network); 4 Dec 2008 21:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 21:15:48 -0000
Received: (qmail 24689 invoked by uid 500); 4 Dec 2008 21:15:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24667 invoked by uid 500); 4 Dec 2008 21:15:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24656 invoked by uid 99); 4 Dec 2008 21:15:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 13:15:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 21:14:25 +0000
Received: by gxk3 with SMTP id 3so97307gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 13:14:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=bcCKMkOhVDf4gv1l0PqIwg+pMZx90Upqeg9TD4kE9MY=;
        b=kI305m+awAhUaiaIcu91Tor4Ywqok7ibvMREuI9U+kXStDi7qmWl7drcQzU9JxSLqP
         1qVDqQv4z3gYlEImgVRW2mgRLn41c1FvzjDAy5KSk2lB6JgKSESrgWffe+r9KfQgcyLz
         LTp97OnAtUsfSzDaF3EtXXXEsQJ4xt+1+LSHY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=mECkav/ExEW1gVOYQ7l/+4xMNFBXkGIOCKwA2PJ4t2AOD475MJG2aUpCLg0pq0GeD1
         qRv1I8OaFzneoOIr31XcvH2IKrlKxPRrykT5OLPaQuEu2sk5C5djky7YjDyn1w8ZWhtg
         5EJ5eKnt26oJZ+ImGMF3MW/vAolBpkVe2t/Fg=
Received: by 10.90.88.16 with SMTP id l16mr215083agb.33.1228425073414;
        Thu, 04 Dec 2008 13:11:13 -0800 (PST)
Received: by 10.90.51.19 with HTTP; Thu, 4 Dec 2008 13:11:13 -0800 (PST)
Message-ID: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
Date: Thu, 4 Dec 2008 13:11:13 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: NIOFSDirectory
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_114933_2767832.1228425073393"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_114933_2767832.1228425073393
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi guys:
    We did some profiling and benchmarking:

    The thread contention on FSDIrectory is gone, and for the set of queries
we are running, performance improved by a factor of 5 (to be conservative).

    Great job, this is awesome, a simple change and made a huge difference.

    To get NIOFSDirectory installed, I didn't find any documentation
(doesn't mean there aren't any), after reading the code, I resorted to:

  static
  {

System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
  }
   I am sure this is not the intended usage, as this is really ugly. What is
the suggested usage?

Thanks

-John

------=_Part_114933_2767832.1228425073393--

From java-user-return-37520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 21:21:37 2008
Return-Path: <java-user-return-37520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89623 invoked from network); 4 Dec 2008 21:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 21:21:37 -0000
Received: (qmail 43975 invoked by uid 500); 4 Dec 2008 21:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43835 invoked by uid 500); 4 Dec 2008 21:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43824 invoked by uid 99); 4 Dec 2008 21:21:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 13:21:42 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 21:20:13 +0000
Received: by fg-out-1718.google.com with SMTP id l27so3046779fgb.27
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 13:20:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=c/7J1f0ObUT0djLM6QOGMKlkKXEiahmZwD35R/cbz7A=;
        b=dRXzOpE/ZJayggG6D7jUgCylZak/GEBckf2rUOKbz+TAp7XrlgeMRfXVW1T4/X/Yfr
         tCM6QNKnCgzPSVMDhMZ+6G7AoHbHy/J8b9LxlxUb6T3v5/1gTOdBcyY32SYy8Wv1e+c8
         O8LIcMISdy+Wb4/UfYB6WDCBNWfzUwtaDIqxc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=CsZnM5t3nhuOH2iFilhue+qV993cn5C51PnLAtgKr7YHH7IQzXV/q9prNBIfhbHTPZ
         jV2RhRPHSG7GO/Ip+lq7AXxRAtIEgP2lGxG5mUhwjh5y9WOUVl6hcOr+b6523oV0ZDaZ
         tO5GxldFKQFrl3iRI1518oxZMZ2WYrsW2BGpU=
Received: by 10.181.193.15 with SMTP id v15mr5206056bkp.7.1228425650532;
        Thu, 04 Dec 2008 13:20:50 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Thu, 4 Dec 2008 13:20:50 -0800 (PST)
Message-ID: <5d53d5770812041320v6af64e4v30eb3936e3bd6c2e@mail.gmail.com>
Date: Thu, 4 Dec 2008 17:20:50 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design guidance - search strategy
In-Reply-To: <359a92830812040536t55e11e63s47bc6df9d13eb962@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38562_7437837.1228425650519"
References: <5d53d5770812040459y72e3braa6de15cdc68518f@mail.gmail.com>
	 <359a92830812040536t55e11e63s47bc6df9d13eb962@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38562_7437837.1228425650519
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So, let me get this straight.  :)

A Query tells Lucene what to search for. Then a Filter tells lucene what?

I think I'm missing understanding about what a Filter is for.

Ian



On Thu, Dec 4, 2008 at 9:36 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> It's generally a bad idea to iterate a Hits object. In fact, Hits
> is deprecated in recent versions of Lucene. The underlying
> problem is that the query is re-executed every 100 responses
> or so.
>
> First suggestion, create a Filter by iterating over your
> docid field and use that in your searches see
> several of the Searcher.search variants.
>
> Second suggestion, use one of the collector classes rather than
> Hits, e.g. TopDoc*, TopFieldDoc*, whichever suits.
>
>
> Best
> Erick
>
> On Thu, Dec 4, 2008 at 7:59 AM, Ian Vink <ianvink@gmail.com> wrote:
>
> > I have documents with this simple schema in Lucene which I can not
> change.
> > docid: (int)
> > contents: (text)
> >
> > The user is given a list of 10,000 documents in a tree which they select
> to
> > search, usually they select 5000 or so.
> >
> > I only want to search those 5000 documents. I have the 'id' fields. That
> is
> > all.
> >
> > I do this now:
> >
> > Get the 'Hits' for all documents.
> > Loop through all Hits looking for any 'docid' that is in the 5000
> selected
> > by the user
> > Add found docs to a collection of found documents and return that to the
> > UI.
> >
> >
> > Is there a better way of doing this?
> >
>

------=_Part_38562_7437837.1228425650519--

From java-user-return-37521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 21:26:53 2008
Return-Path: <java-user-return-37521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93017 invoked from network); 4 Dec 2008 21:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 21:26:53 -0000
Received: (qmail 55116 invoked by uid 500); 4 Dec 2008 21:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55091 invoked by uid 500); 4 Dec 2008 21:26:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55074 invoked by uid 99); 4 Dec 2008 21:26:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 13:26:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 21:25:27 +0000
Received: by rv-out-0506.google.com with SMTP id f6so5134350rvb.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 13:26:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=I4GdgUiLrd5UqpFZkuZ+8Bls7Wse9HOBPN9x2fKg3cA=;
        b=UmByjwjsp2fLQxEuy8cC/WZY+rLpeN5KjYxUBoWa6xtJa6pI2D8Omn36oBN/bsziAc
         +KzAGiWb2Z2aZzfGlz4d7e+yoPdBklENyVgzZ1ykQlpYSfCcNomhRt6OQWtuk3dWo2MD
         a+JwyEZWWslmJIX06IQ3v1g0VGoHtVg57Ijs0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=lslmixJ6XS9bB+A8/NcrVBSpwfjgzrduXkg2MiNUOyNlWYm+wEgqvM2FZ8NoHAJKke
         kkzajzMAcJqQZPfKfo/8IB6IE6vlD2onVTSq4Ml8E623hHqioF2LtC7L9GQj/eo+HOHB
         GOlNE6ZlkZL6sR4HD4QBKqx4cm/F4ROqH+ouU=
Received: by 10.141.198.9 with SMTP id a9mr7169642rvq.62.1228425975798;
        Thu, 04 Dec 2008 13:26:15 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Thu, 4 Dec 2008 13:26:15 -0800 (PST)
Message-ID: <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
Date: Thu, 4 Dec 2008 16:26:15 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: NIOFSDirectory
In-Reply-To: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
X-Google-Sender-Auth: 691f6b0b5161d189
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com> wrote:
> Hi guys:
>    We did some profiling and benchmarking:
>
>    The thread contention on FSDIrectory is gone, and for the set of queries
> we are running, performance improved by a factor of 5 (to be conservative).
>
>    Great job, this is awesome, a simple change and made a huge difference.
>
>    To get NIOFSDirectory installed, I didn't find any documentation
> (doesn't mean there aren't any), after reading the code, I resorted to:
>
>  static
>  {
>
> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
>  }
>   I am sure this is not the intended usage, as this is really ugly. What is
> the suggested usage?

Instantiate NIOFSDirectory directly and pass it to the IndexReader.open()

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 21:33:00 2008
Return-Path: <java-user-return-37522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97996 invoked from network); 4 Dec 2008 21:33:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 21:33:00 -0000
Received: (qmail 68058 invoked by uid 500); 4 Dec 2008 21:33:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68025 invoked by uid 500); 4 Dec 2008 21:33:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68014 invoked by uid 99); 4 Dec 2008 21:33:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 13:33:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 21:31:36 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1757909ywj.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 13:32:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=UexFY8c5syikwbLlZ/sp1jXB+UpiklL/FHR5n62QV6w=;
        b=dLpzgjMdws+LA9+Vn95NifqLbKwZEvMvdIZIOayEDvDUXExJroC6UeymY+NX87H55y
         rz+XUvCZRtl15HFegGxf/NfWrKnWWGCLLpo1Wn9MQ8TUr6klHF3IqzmPzhjwSXaaaIE8
         r78CX32/fwtIydjOUi06EQ7e1NxeNErFqGmAM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=VuYJNODsd3+wwttVy8GWV0Q6hWg1PX51lG6991MhIKPAP1N/uTpdFa0CBztL1aHyuu
         GXKS/KjXrbkXcGB+t+pYDIdB442QNAtd7UOa0iYKgGEJ/UWCmYeRqzl/oq0cUAY2bhNv
         TShPQRKNSdgIjqHZDqTj+z4Pag4F7rpk7cUko=
Received: by 10.142.240.9 with SMTP id n9mr3514940wfh.131.1228426333162;
        Thu, 04 Dec 2008 13:32:13 -0800 (PST)
Received: by 10.143.40.11 with HTTP; Thu, 4 Dec 2008 13:32:13 -0800 (PST)
Message-ID: <5e76f3840812041332y6420786dp80463d3733bf69ca@mail.gmail.com>
Date: Thu, 4 Dec 2008 16:32:13 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NIOFSDirectory
In-Reply-To: <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
	 <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry....what version are we talking about?  :-)

thanks,

Glen

2008/12/4 Yonik Seeley <yonik@apache.org>:
> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com> wrote:
>> Hi guys:
>>    We did some profiling and benchmarking:
>>
>>    The thread contention on FSDIrectory is gone, and for the set of queries
>> we are running, performance improved by a factor of 5 (to be conservative).
>>
>>    Great job, this is awesome, a simple change and made a huge difference.
>>
>>    To get NIOFSDirectory installed, I didn't find any documentation
>> (doesn't mean there aren't any), after reading the code, I resorted to:
>>
>>  static
>>  {
>>
>> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
>>  }
>>   I am sure this is not the intended usage, as this is really ugly. What is
>> the suggested usage?
>
> Instantiate NIOFSDirectory directly and pass it to the IndexReader.open()
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 21:58:30 2008
Return-Path: <java-user-return-37523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12704 invoked from network); 4 Dec 2008 21:58:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 21:58:30 -0000
Received: (qmail 28419 invoked by uid 500); 4 Dec 2008 21:58:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28386 invoked by uid 500); 4 Dec 2008 21:58:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28375 invoked by uid 99); 4 Dec 2008 21:58:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 13:58:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 21:57:05 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1764382ywj.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 13:57:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ya14gBIfNqZycopEh434y/5BPUhRxLtQxtLylbx6H7k=;
        b=TS3hzu45J26qbR6u8/WHNfWanUxX6IhuR9M14l0tifK2VJo6pt6iJxqyRVTmawkxJl
         Rvz6GaE5QYQFz+XSNmqx5Rzpe/fl/A6B2gNStiytVlETKMHka/xW5jXXpQ4RlZBSnoGY
         OkEkBvFLp4yJ3tMrDM8/I+6exXJHtyQRrXyq8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=DSwRKdhUn9QmhOoFdOTj8vRRYK5KHtbQ9R14Vg26fkO2gs24f9StaodmUvttwXOu2l
         cQ866+nzaRW780TGbWNxfDZTna5dJ/y4zSW3w8MtU99B9YaPnPpbCg7Cr24nUqcvxzj+
         qru0Nf7CxDQuecJN++WETgyZWNdkkpaG1e9VQ=
Received: by 10.90.97.16 with SMTP id u16mr8307591agb.52.1228427862321;
        Thu, 04 Dec 2008 13:57:42 -0800 (PST)
Received: by 10.90.51.19 with HTTP; Thu, 4 Dec 2008 13:57:42 -0800 (PST)
Message-ID: <8837fb770812041357p568a691eqe2878969ca12abde@mail.gmail.com>
Date: Thu, 4 Dec 2008 13:57:42 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NIOFSDirectory
In-Reply-To: <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_115458_17809709.1228427862308"
References: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
	 <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_115458_17809709.1228427862308
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

version 2.4, sorry for not clarifying.
Yonik, pardon my ignorance. I still don't get it. When instantiating
NIOFSDIrectory, how would I specify the path? I see only the empty
constructor.

With FSDirectory, you use the factory: getDirectory(File)

-John

On Thu, Dec 4, 2008 at 1:26 PM, Yonik Seeley <yonik@apache.org> wrote:

> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com> wrote:
> > Hi guys:
> >    We did some profiling and benchmarking:
> >
> >    The thread contention on FSDIrectory is gone, and for the set of
> queries
> > we are running, performance improved by a factor of 5 (to be
> conservative).
> >
> >    Great job, this is awesome, a simple change and made a huge
> difference.
> >
> >    To get NIOFSDirectory installed, I didn't find any documentation
> > (doesn't mean there aren't any), after reading the code, I resorted to:
> >
> >  static
> >  {
> >
> >
> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
> >  }
> >   I am sure this is not the intended usage, as this is really ugly. What
> is
> > the suggested usage?
>
> Instantiate NIOFSDirectory directly and pass it to the IndexReader.open()
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_115458_17809709.1228427862308--

From java-user-return-37524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 22:01:35 2008
Return-Path: <java-user-return-37524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14832 invoked from network); 4 Dec 2008 22:01:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 22:01:35 -0000
Received: (qmail 40138 invoked by uid 500); 4 Dec 2008 22:01:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40111 invoked by uid 500); 4 Dec 2008 22:01:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40093 invoked by uid 99); 4 Dec 2008 22:01:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 14:01:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:00:10 +0000
Received: by rv-out-0506.google.com with SMTP id f6so5149873rvb.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 14:00:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=XXErYzJU1W+dtiwwUeKX/y33couY/qfgNes1givjw9k=;
        b=EQRZ9BrHVymd1kPN5bUIcXrP8TZPzUKBLyqlKBFovsWQRtcAyReiagmT8z9hGOG+Vd
         xHAvNwP9J/hvdLXz+iazZm+nhtFIAPcF4MFa2TdlkHRup9rnNIC4RpZo6/3dE+9/tsZ8
         6r4q/2Q2+hsXz3NPtTG4cYf0DW+6g5s0v56iI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=lj2n4dFsyrCRWFmw31s6wkrjJC4kJ6l6vKs7nzzOzbFHIRJB9R6S0oscIjMsMV4ms8
         EpgXvfr2rpvIVFWlADDD7j2CEf7zKkIcFyf++v4ucoySjyx4lA5KFRq/7NWxKstXn0pg
         R/JsZCM3itxVWMKd6Wip+O0B58HM0KEBeXRPI=
Received: by 10.141.5.20 with SMTP id h20mr7157331rvi.299.1228428049199;
        Thu, 04 Dec 2008 14:00:49 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Thu, 4 Dec 2008 14:00:49 -0800 (PST)
Message-ID: <c68e39170812041400q36bb0545udf6fe0a461b0c60b@mail.gmail.com>
Date: Thu, 4 Dec 2008 17:00:49 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: NIOFSDirectory
In-Reply-To: <5e76f3840812041332y6420786dp80463d3733bf69ca@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
	 <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
	 <5e76f3840812041332y6420786dp80463d3733bf69ca@mail.gmail.com>
X-Google-Sender-Auth: 3f7519602f511d5b
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Dec 4, 2008 at 4:32 PM, Glen Newton <glen.newton@gmail.com> wrote:
> Sorry....what version are we talking about?  :-)

The current development version of Lucene allows you to directly
instantiate FSDirectory subclasses.

-Yonik


> thanks,
>
> Glen
>
> 2008/12/4 Yonik Seeley <yonik@apache.org>:
>> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com> wrote:
>>> Hi guys:
>>>    We did some profiling and benchmarking:
>>>
>>>    The thread contention on FSDIrectory is gone, and for the set of queries
>>> we are running, performance improved by a factor of 5 (to be conservative).
>>>
>>>    Great job, this is awesome, a simple change and made a huge difference.
>>>
>>>    To get NIOFSDirectory installed, I didn't find any documentation
>>> (doesn't mean there aren't any), after reading the code, I resorted to:
>>>
>>>  static
>>>  {
>>>
>>> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
>>>  }
>>>   I am sure this is not the intended usage, as this is really ugly. What is
>>> the suggested usage?
>>
>> Instantiate NIOFSDirectory directly and pass it to the IndexReader.open()
>>
>> -Yonik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 22:09:34 2008
Return-Path: <java-user-return-37525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19758 invoked from network); 4 Dec 2008 22:09:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 22:09:34 -0000
Received: (qmail 54022 invoked by uid 500); 4 Dec 2008 22:09:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53985 invoked by uid 500); 4 Dec 2008 22:09:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53974 invoked by uid 99); 4 Dec 2008 22:09:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 14:09:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.170.191 as permitted sender)
Received: from [64.233.170.191] (HELO rn-out-0910.google.com) (64.233.170.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:08:11 +0000
Received: by rn-out-0910.google.com with SMTP id j71so4299244rne.4
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 14:08:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WzZUzha09U54xerM23BWM0zWQqUoMjB0zFOpbbF+gsU=;
        b=XRtf5WbbmD6K/XkEWWHc6G9b4oUae/TFFb2NK6iDVqYw8Ub4eZzO376xfFfNwPtK4L
         ggq5yzG4QSksIJgcJBKZvoY8sFz7HQ4cJ5bAuALwPH4uoeK7Rr/lbPRTUA10vOSMrx1b
         PDZcRCRx9HLvb4O5Gq5WHLPDfudmNE9gRRTI0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=EQ34jBiXqX3nkmYMcog0NOZhZ3GcBuuSeB5FYhCf5Aw9U7yE/tv6MAsDG5VomQDogm
         BnLE+7hiqVLKvBXBaQnWY1NP3fWOuYOq9KZ4sg5D2GSMd0iBawkkHko3ghOgUklskGiF
         btYwL8cm0ypZrjqKn0r9rv0dhdXiTEBhTVkqo=
Received: by 10.90.97.16 with SMTP id u16mr3584045agb.0.1228428528582;
        Thu, 04 Dec 2008 14:08:48 -0800 (PST)
Received: by 10.90.51.19 with HTTP; Thu, 4 Dec 2008 14:08:48 -0800 (PST)
Message-ID: <8837fb770812041408x48e933bck2e5257dccd8d65df@mail.gmail.com>
Date: Thu, 4 Dec 2008 14:08:48 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NIOFSDirectory
In-Reply-To: <c68e39170812041400q36bb0545udf6fe0a461b0c60b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_115521_17222980.1228428528566"
References: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
	 <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
	 <5e76f3840812041332y6420786dp80463d3733bf69ca@mail.gmail.com>
	 <c68e39170812041400q36bb0545udf6fe0a461b0c60b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_115521_17222980.1228428528566
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That does not help. The File/path is not stored with the instance. It is in
a map FSDirectory keeps statically. Should subclasses of FSDirectory be
modifying the map?
This is not a question about how to subclass or customize FSDirectory. This
is more on how to use NIOFSDirectory class. I am hoping for a simply answer,
is what I am doing (setting the class name statically on system property)
the right way?

-John

On Thu, Dec 4, 2008 at 2:00 PM, Yonik Seeley <yonik@apache.org> wrote:

> On Thu, Dec 4, 2008 at 4:32 PM, Glen Newton <glen.newton@gmail.com> wrote:
> > Sorry....what version are we talking about?  :-)
>
> The current development version of Lucene allows you to directly
> instantiate FSDirectory subclasses.
>
> -Yonik
>
>
> > thanks,
> >
> > Glen
> >
> > 2008/12/4 Yonik Seeley <yonik@apache.org>:
> >> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com> wrote:
> >>> Hi guys:
> >>>    We did some profiling and benchmarking:
> >>>
> >>>    The thread contention on FSDIrectory is gone, and for the set of
> queries
> >>> we are running, performance improved by a factor of 5 (to be
> conservative).
> >>>
> >>>    Great job, this is awesome, a simple change and made a huge
> difference.
> >>>
> >>>    To get NIOFSDirectory installed, I didn't find any documentation
> >>> (doesn't mean there aren't any), after reading the code, I resorted to:
> >>>
> >>>  static
> >>>  {
> >>>
> >>>
> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
> >>>  }
> >>>   I am sure this is not the intended usage, as this is really ugly.
> What is
> >>> the suggested usage?
> >>
> >> Instantiate NIOFSDirectory directly and pass it to the
> IndexReader.open()
> >>
> >> -Yonik
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> >
> > --
> >
> > -
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_115521_17222980.1228428528566--

From java-user-return-37526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 22:13:06 2008
Return-Path: <java-user-return-37526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21845 invoked from network); 4 Dec 2008 22:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 22:13:05 -0000
Received: (qmail 60411 invoked by uid 500); 4 Dec 2008 22:13:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60390 invoked by uid 500); 4 Dec 2008 22:13:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60378 invoked by uid 99); 4 Dec 2008 22:13:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 14:13:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:11:41 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1785141eyi.53
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 14:12:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=na/9DonI8DkTO/ngYgqC0/q4s6CWx5XlBr0FjIz8rRw=;
        b=MJ9XHA4QY9NnJhxqG638mQHsmo/udkgXdSZ3wAQfI564EuOLTGxXAasTQ2YZkwcPSo
         Vjk45wcF9DAZkKmaufX+LiuscOLujkjimVfmu5ceD7OKVrIkh2iXbkdLBrEEnGhvEtb/
         /i2CyrdPMIqAmXmfyEijqMIPQwY9NYGhb9OMU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LAYqa2ZvYJmTr3icGdG5ruxRkjqB9DXoiOD6hPKbFysLKEfutRTLJMnqy/wvuqRlUg
         G3PEm/L8sDz6ymMD1bZAmUHMRXrDrcsIMq7jLamIfzjONykf+f5sgX7XndTT7W0NFRbK
         D/FDBK+AvNJmPTawdk09KTMpjN8DIr00xEcxw=
Received: by 10.86.70.3 with SMTP id s3mr130223fga.78.1228428738306;
        Thu, 04 Dec 2008 14:12:18 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Thu, 4 Dec 2008 14:12:18 -0800 (PST)
Message-ID: <359a92830812041412o2c6ed322mbef29210c54f53ee@mail.gmail.com>
Date: Thu, 4 Dec 2008 17:12:18 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design guidance - search strategy
In-Reply-To: <5d53d5770812041320v6af64e4v30eb3936e3bd6c2e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31267_4347624.1228428738309"
References: <5d53d5770812040459y72e3braa6de15cdc68518f@mail.gmail.com>
	 <359a92830812040536t55e11e63s47bc6df9d13eb962@mail.gmail.com>
	 <5d53d5770812041320v6af64e4v30eb3936e3bd6c2e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31267_4347624.1228428738309
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See the class in the docs or Lucene In Action for more
detail, but here's the short form.....

A Filter is a bitset where each bit's ordinal position stands
for a document. I.e. bit 1 means doc id 1, bit 519
represents document 519 etc.

When you pass a filter to one of the search routines that accepts a Filter,
the search is restricted to ONLY those documents with the corresponding
bit set in the Filter. Which sounds like just what you want, but I may be
wrong.

You construct a Filter by iterating over the terms you care about (see
TermDocs/TermEnum classes).  In a nutshell you find the terms you
care about, and for each document that contains that term, set the
bit in your filter. This is actually much faster than you might think. All
this is provided for you in the two classes above, how you use them
depends (tm). Watch that you don't run past the term you care about, I
remember having that happen in one of those classes but the details
escape my aging memory.

Hope that helps
Erick

On Thu, Dec 4, 2008 at 4:20 PM, Ian Vink <ianvink@gmail.com> wrote:

> So, let me get this straight.  :)
>
> A Query tells Lucene what to search for. Then a Filter tells lucene what?
>
> I think I'm missing understanding about what a Filter is for.
>
> Ian
>
>
>
> On Thu, Dec 4, 2008 at 9:36 AM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > It's generally a bad idea to iterate a Hits object. In fact, Hits
> > is deprecated in recent versions of Lucene. The underlying
> > problem is that the query is re-executed every 100 responses
> > or so.
> >
> > First suggestion, create a Filter by iterating over your
> > docid field and use that in your searches see
> > several of the Searcher.search variants.
> >
> > Second suggestion, use one of the collector classes rather than
> > Hits, e.g. TopDoc*, TopFieldDoc*, whichever suits.
> >
> >
> > Best
> > Erick
> >
> > On Thu, Dec 4, 2008 at 7:59 AM, Ian Vink <ianvink@gmail.com> wrote:
> >
> > > I have documents with this simple schema in Lucene which I can not
> > change.
> > > docid: (int)
> > > contents: (text)
> > >
> > > The user is given a list of 10,000 documents in a tree which they
> select
> > to
> > > search, usually they select 5000 or so.
> > >
> > > I only want to search those 5000 documents. I have the 'id' fields.
> That
> > is
> > > all.
> > >
> > > I do this now:
> > >
> > > Get the 'Hits' for all documents.
> > > Loop through all Hits looking for any 'docid' that is in the 5000
> > selected
> > > by the user
> > > Add found docs to a collection of found documents and return that to
> the
> > > UI.
> > >
> > >
> > > Is there a better way of doing this?
> > >
> >
>

------=_Part_31267_4347624.1228428738309--

From java-user-return-37527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 22:16:29 2008
Return-Path: <java-user-return-37527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24132 invoked from network); 4 Dec 2008 22:16:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 22:16:29 -0000
Received: (qmail 68649 invoked by uid 500); 4 Dec 2008 22:16:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68620 invoked by uid 500); 4 Dec 2008 22:16:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68609 invoked by uid 99); 4 Dec 2008 22:16:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 14:16:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:15:05 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1768665ywj.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 14:15:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=/0xQD4s6wbIpGKALLTK9iXpt25Rvj2o0E0gJCJig4B4=;
        b=jBUTnuTd/8hC6//Dipi8+DlaGyNBxMdymESTpwhhpGfEV4s8EO6NfLY2/jWgYxctY1
         wqGNApxILhBSQLfz6VEgCcpaWJyjGjVltXsaeiK+mVFdzW//L7iH8Ln4tsf7Bwd0W566
         CBCZ6KnAPG7c99vt1u6EgxKTFTcVPVk3OiixE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dJRn4FDCdKZ6wmpwatnLIyrep4BVCQUHqo3v/272iCYBb/X7wN6Cz6YLfsNkjS0uam
         NrqbX4nTibU1RGnCq4DznSulSKYEXFZn8a0Ube1SVAUfs/lsGh541NTaOgFJ8DYqnuZm
         IAuJMUUsuzMEfQ7nOPW7zE4Q7XPC16G5jRLrw=
Received: by 10.90.84.1 with SMTP id h1mr8313446agb.70.1228428952115;
        Thu, 04 Dec 2008 14:15:52 -0800 (PST)
Received: by 10.90.51.19 with HTTP; Thu, 4 Dec 2008 14:15:52 -0800 (PST)
Message-ID: <8837fb770812041415q400c2bf4qb2a4536078dab33a@mail.gmail.com>
Date: Thu, 4 Dec 2008 14:15:52 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Slow queries with lots of hits
In-Reply-To: <C55D8326.1F0E%tsturge@hi5.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_115617_17444146.1228428952091"
References: <359a92830812041239i56d3d22m77e4c7370c1a45e6@mail.gmail.com>
	 <C55D8326.1F0E%tsturge@hi5.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_115617_17444146.1228428952091
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Tim:
     How about implementing your own HitCollector and stop when you have
collected 100 docs with score above certain threshold?

     BTW, are there lotsa concurrent searches?

-John

On Thu, Dec 4, 2008 at 12:52 PM, Tim Sturge <tsturge@hi5.com> wrote:

> That makes sense. I should be more precise in that all I need is 100 of t=
he
> 10000 "reasonable" results.
>
> The concern I would have with a TopDocCollector is that this is biased
> towards the top of the index which translates for me into a bias for olde=
r
> documents. I'd prefer no age bias or a newer document bias. So I'll see
> what
> I can do with a "BottomDocCollector" :-)
>
> Tim
>
>
> On 12/4/08 12:39 PM, "Erick Erickson" <erickerickson@gmail.com> wrote:
>
> > The problem here is how *could* a system return even the top
> > 10,000 results without scoring them all? What if the millionth
> > hit resulted in the very best match in the entire corpus?
> >
> > That said, sorting may well be the issue here rather than scoring.
> > You can use a TopDocCollector to get the top N matches (unsorted)
> > and then do something like use the FieldSortedHitQueue to sort
> > those N matches, leaving out all the rest of the matches. Note
> > this assumes that when you say "sorting" you mean sorting
> > by something other than relevance.....
> >
> > Hope this helps
> > Erick
> >
> > On Thu, Dec 4, 2008 at 3:27 PM, Tim Sturge <tsturge@hi5.com> wrote:
> >
> >> Hi all,
> >>
> >> I have an interesting problem with my query traffic. Most of the queri=
es
> >> run
> >> in a fairly short amount of time (< 100ms) but a few take over 1000ms.
> >> These
> >> queries are predominantly those with a huge number of hits (>1 million
> hits
> >> in a >100 million document index). The time taken (as far as I can tel=
l)
> is
> >> for lucene to sit there while it scores and sorts all these results.
> >>
> >> However it turns out these queries really don=B9t have top results. Th=
at
> is,
> >> of the million documents, there are easily 10000 which are decent
> results
> >> (basically those above some threshold score). Frankly, just returning
> some
> >> consistent (so paging and reload work) but
> >> otherwise arbitrary ranking of these 10000 results would be more than
> good
> >> enough.
> >>
> >> It seems to me that a solution would be to impose some sort of
> >> pseudo-random
> >> filter (e.g. consider only every n-th document assuming they are
> uniformly
> >> distributed). I=B9m wondering if anyone else has experience with this =
sort
> of
> >> issue and what solutions they have found to work well in practice.
> >>
> >> Thanks,
> >>
> >> Tim
> >>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_115617_17444146.1228428952091--

From java-user-return-37528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 22:17:30 2008
Return-Path: <java-user-return-37528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24466 invoked from network); 4 Dec 2008 22:17:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 22:17:30 -0000
Received: (qmail 71268 invoked by uid 500); 4 Dec 2008 22:17:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71239 invoked by uid 500); 4 Dec 2008 22:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71227 invoked by uid 99); 4 Dec 2008 22:17:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 14:17:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:16:06 +0000
Received: by rv-out-0506.google.com with SMTP id f6so5156999rvb.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 14:16:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=puhY9AMREJlSkhe8CEtiEM0wrwkABjf1zFxDjxMuTRE=;
        b=tvODU/EvK3fMW7WKZCgeYnwjk40dr2jlmQab5p7EBpPnhqxSKM9A36PLARVOrHabKX
         8aYqX5NypSKV8V6chC7AsKZjH918T8zs3UZZqES2nmLB/nipSYn57fVt8AY82kZFkyP5
         YmS4KEc8/ixhdJIqERQvlk0wh/byueH22Z+Cw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=IF6ktVhEqY5gbDfh4f2toN5ISifDpcDyxlAIsgxfN0kUriuRtG5MTQgCGJkmVC3vUA
         WD2Fp60W5z+5fT9URRbToqDqDatUZywq/Bt+EsmABChxc3nfWnHPrlKuKU1QFQQcw0mV
         Qn4MMrPrzbq7FUFTA48SOWBLXUboy64jj1+UQ=
Received: by 10.140.202.21 with SMTP id z21mr7168298rvf.260.1228429004392;
        Thu, 04 Dec 2008 14:16:44 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Thu, 4 Dec 2008 14:16:44 -0800 (PST)
Message-ID: <c68e39170812041416o1b643df0qb086d122ae2184a3@mail.gmail.com>
Date: Thu, 4 Dec 2008 17:16:44 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: NIOFSDirectory
In-Reply-To: <8837fb770812041408x48e933bck2e5257dccd8d65df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
	 <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
	 <5e76f3840812041332y6420786dp80463d3733bf69ca@mail.gmail.com>
	 <c68e39170812041400q36bb0545udf6fe0a461b0c60b@mail.gmail.com>
	 <8837fb770812041408x48e933bck2e5257dccd8d65df@mail.gmail.com>
X-Google-Sender-Auth: cba547d29cccda53
X-Virus-Checked: Checked by ClamAV on apache.org

Details in the bug:
https://issues.apache.org/jira/browse/LUCENE-1451

Use this constructor to create an instance of NIODirectory:

  /** Create a new NIOFSDirectory for the named location.
   *
   * @param path the path of the directory
   * @param lockFactory the lock factory to use, or null for the default.
   * @throws IOException
   */
  public NIOFSDirectory(File path, LockFactory lockFactory) throws IOException {
    super(path, lockFactory);
  }

-Yonik


On Thu, Dec 4, 2008 at 5:08 PM, John Wang <john.wang@gmail.com> wrote:
> That does not help. The File/path is not stored with the instance. It is in
> a map FSDirectory keeps statically. Should subclasses of FSDirectory be
> modifying the map?
> This is not a question about how to subclass or customize FSDirectory. This
> is more on how to use NIOFSDirectory class. I am hoping for a simply answer,
> is what I am doing (setting the class name statically on system property)
> the right way?
>
> -John
>
> On Thu, Dec 4, 2008 at 2:00 PM, Yonik Seeley <yonik@apache.org> wrote:
>
>> On Thu, Dec 4, 2008 at 4:32 PM, Glen Newton <glen.newton@gmail.com> wrote:
>> > Sorry....what version are we talking about?  :-)
>>
>> The current development version of Lucene allows you to directly
>> instantiate FSDirectory subclasses.
>>
>> -Yonik
>>
>>
>> > thanks,
>> >
>> > Glen
>> >
>> > 2008/12/4 Yonik Seeley <yonik@apache.org>:
>> >> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com> wrote:
>> >>> Hi guys:
>> >>>    We did some profiling and benchmarking:
>> >>>
>> >>>    The thread contention on FSDIrectory is gone, and for the set of
>> queries
>> >>> we are running, performance improved by a factor of 5 (to be
>> conservative).
>> >>>
>> >>>    Great job, this is awesome, a simple change and made a huge
>> difference.
>> >>>
>> >>>    To get NIOFSDirectory installed, I didn't find any documentation
>> >>> (doesn't mean there aren't any), after reading the code, I resorted to:
>> >>>
>> >>>  static
>> >>>  {
>> >>>
>> >>>
>> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
>> >>>  }
>> >>>   I am sure this is not the intended usage, as this is really ugly.
>> What is
>> >>> the suggested usage?
>> >>
>> >> Instantiate NIOFSDirectory directly and pass it to the
>> IndexReader.open()
>> >>
>> >> -Yonik
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>> >
>> > --
>> >
>> > -
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 22:26:32 2008
Return-Path: <java-user-return-37529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27286 invoked from network); 4 Dec 2008 22:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 22:26:32 -0000
Received: (qmail 94567 invoked by uid 500); 4 Dec 2008 22:26:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94536 invoked by uid 500); 4 Dec 2008 22:26:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94519 invoked by uid 99); 4 Dec 2008 22:26:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 14:26:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:25:07 +0000
Received: from webmail.xs4all.nl (dovemail4.xs4all.nl [194.109.26.6])
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id mB4MPNbh053228
	for <java-user@lucene.apache.org>; Thu, 4 Dec 2008 23:25:23 +0100 (CET)
	(envelope-from wheijke@xs4all.nl)
Received: from 62.194.57.217
        (SquirrelMail authenticated user wheijke)
        by webmail.xs4all.nl with HTTP;
        Thu, 4 Dec 2008 23:25:23 +0100 (CET)
Message-ID: <23861.62.194.57.217.1228429523.squirrel@webmail.xs4all.nl>
Date: Thu, 4 Dec 2008 23:25:23 +0100 (CET)
Subject: Re: NIOFSDirectory
From: "Wouter Heijke" <wheijke@xs4all.nl>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.11
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

I had the same problem, only got it to work when I set the system property
the way you do... UGLY!
So if there is a solution like you ask for that use 2.4 I would be
interested to know as well.

Wouter

> That does not help. The File/path is not stored with the instance. It is
> in
> a map FSDirectory keeps statically. Should subclasses of FSDirectory be
> modifying the map?
> This is not a question about how to subclass or customize FSDirectory.
> This
> is more on how to use NIOFSDirectory class. I am hoping for a simply
> answer,
> is what I am doing (setting the class name statically on system property)
> the right way?
>
> -John
>
> On Thu, Dec 4, 2008 at 2:00 PM, Yonik Seeley <yonik@apache.org> wrote:
>
>> On Thu, Dec 4, 2008 at 4:32 PM, Glen Newton <glen.newton@gmail.com>
>> wrote:
>> > Sorry....what version are we talking about?  :-)
>>
>> The current development version of Lucene allows you to directly
>> instantiate FSDirectory subclasses.
>>
>> -Yonik
>>
>>
>> > thanks,
>> >
>> > Glen
>> >
>> > 2008/12/4 Yonik Seeley <yonik@apache.org>:
>> >> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com>
>> wrote:
>> >>> Hi guys:
>> >>>    We did some profiling and benchmarking:
>> >>>
>> >>>    The thread contention on FSDIrectory is gone, and for the set of
>> queries
>> >>> we are running, performance improved by a factor of 5 (to be
>> conservative).
>> >>>
>> >>>    Great job, this is awesome, a simple change and made a huge
>> difference.
>> >>>
>> >>>    To get NIOFSDirectory installed, I didn't find any documentation
>> >>> (doesn't mean there aren't any), after reading the code, I resorted
>> to:
>> >>>
>> >>>  static
>> >>>  {
>> >>>
>> >>>
>> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
>> >>>  }
>> >>>   I am sure this is not the intended usage, as this is really ugly.
>> What is
>> >>> the suggested usage?
>> >>
>> >> Instantiate NIOFSDirectory directly and pass it to the
>> IndexReader.open()
>> >>
>> >> -Yonik
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >
>> >
>> > --
>> >
>> > -
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 22:27:06 2008
Return-Path: <java-user-return-37530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27624 invoked from network); 4 Dec 2008 22:27:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 22:27:05 -0000
Received: (qmail 99297 invoked by uid 500); 4 Dec 2008 22:27:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99266 invoked by uid 500); 4 Dec 2008 22:27:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99255 invoked by uid 99); 4 Dec 2008 22:27:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 14:27:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:25:42 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1771002ywj.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 14:26:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=QA2dkcaRlZyk/iBG0lGq0L+BZ1j5/dNESaoPRj+w+88=;
        b=gUdqgGcD2C4ID5BecE/dhBTvuzZHy5g/ghYtQG/oI/Bbbit8bnjey5SG8TxiVEmCSH
         bNpxxhG+SD9HdWPVS4IY84zijBh5Yz9JqGsU7wzzi3FSqHP4BbWgfV/VnHheWtL8CyUh
         rYOaYwz3W6GosV42iCM+VJ3MgxvGLfHGNXhWU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=VQU6vCqBHJkWnhAddZLquj/Qovu390WNzGcQFfNmo4ZNbEXq9vkQsWdy/lApm4VleT
         jQZPVbOtx2quYtA6V1hrMVhQf5X4nvrXWV8Xs+iE5tjRbwJC8q5OGUiLUoxShIxzkcAl
         3+PO/OLoB+RYAyjBewcokuqQRcjG2khH/EWQk=
Received: by 10.90.98.12 with SMTP id v12mr8300425agb.64.1228429580603;
        Thu, 04 Dec 2008 14:26:20 -0800 (PST)
Received: by 10.90.51.19 with HTTP; Thu, 4 Dec 2008 14:26:20 -0800 (PST)
Message-ID: <8837fb770812041426l6fb871fcq8a1a8cc927875e3f@mail.gmail.com>
Date: Thu, 4 Dec 2008 14:26:20 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NIOFSDirectory
In-Reply-To: <c68e39170812041416o1b643df0qb086d122ae2184a3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_115717_20401539.1228429580597"
References: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
	 <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
	 <5e76f3840812041332y6420786dp80463d3733bf69ca@mail.gmail.com>
	 <c68e39170812041400q36bb0545udf6fe0a461b0c60b@mail.gmail.com>
	 <8837fb770812041408x48e933bck2e5257dccd8d65df@mail.gmail.com>
	 <c68e39170812041416o1b643df0qb086d122ae2184a3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_115717_20401539.1228429580597
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks!
-John

On Thu, Dec 4, 2008 at 2:16 PM, Yonik Seeley <yonik@apache.org> wrote:

> Details in the bug:
> https://issues.apache.org/jira/browse/LUCENE-1451
>
> Use this constructor to create an instance of NIODirectory:
>
>  /** Create a new NIOFSDirectory for the named location.
>   *
>   * @param path the path of the directory
>   * @param lockFactory the lock factory to use, or null for the default.
>   * @throws IOException
>   */
>  public NIOFSDirectory(File path, LockFactory lockFactory) throws
> IOException {
>    super(path, lockFactory);
>  }
>
> -Yonik
>
>
> On Thu, Dec 4, 2008 at 5:08 PM, John Wang <john.wang@gmail.com> wrote:
> > That does not help. The File/path is not stored with the instance. It is
> in
> > a map FSDirectory keeps statically. Should subclasses of FSDirectory be
> > modifying the map?
> > This is not a question about how to subclass or customize FSDirectory.
> This
> > is more on how to use NIOFSDirectory class. I am hoping for a simply
> answer,
> > is what I am doing (setting the class name statically on system property)
> > the right way?
> >
> > -John
> >
> > On Thu, Dec 4, 2008 at 2:00 PM, Yonik Seeley <yonik@apache.org> wrote:
> >
> >> On Thu, Dec 4, 2008 at 4:32 PM, Glen Newton <glen.newton@gmail.com>
> wrote:
> >> > Sorry....what version are we talking about?  :-)
> >>
> >> The current development version of Lucene allows you to directly
> >> instantiate FSDirectory subclasses.
> >>
> >> -Yonik
> >>
> >>
> >> > thanks,
> >> >
> >> > Glen
> >> >
> >> > 2008/12/4 Yonik Seeley <yonik@apache.org>:
> >> >> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com>
> wrote:
> >> >>> Hi guys:
> >> >>>    We did some profiling and benchmarking:
> >> >>>
> >> >>>    The thread contention on FSDIrectory is gone, and for the set of
> >> queries
> >> >>> we are running, performance improved by a factor of 5 (to be
> >> conservative).
> >> >>>
> >> >>>    Great job, this is awesome, a simple change and made a huge
> >> difference.
> >> >>>
> >> >>>    To get NIOFSDirectory installed, I didn't find any documentation
> >> >>> (doesn't mean there aren't any), after reading the code, I resorted
> to:
> >> >>>
> >> >>>  static
> >> >>>  {
> >> >>>
> >> >>>
> >>
> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
> >> >>>  }
> >> >>>   I am sure this is not the intended usage, as this is really ugly.
> >> What is
> >> >>> the suggested usage?
> >> >>
> >> >> Instantiate NIOFSDirectory directly and pass it to the
> >> IndexReader.open()
> >> >>
> >> >> -Yonik
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >> >
> >> >
> >> > --
> >> >
> >> > -
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_115717_20401539.1228429580597--

From java-user-return-37531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 22:44:46 2008
Return-Path: <java-user-return-37531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35660 invoked from network); 4 Dec 2008 22:44:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 22:44:45 -0000
Received: (qmail 20874 invoked by uid 500); 4 Dec 2008 22:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20611 invoked by uid 500); 4 Dec 2008 22:44:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20600 invoked by uid 99); 4 Dec 2008 22:44:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 14:44:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:43:22 +0000
Received: by wf-out-1314.google.com with SMTP id 28so4281000wfc.20
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 14:44:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=3xFfcwC+dhJuZFo/Eo2Nzwl8DxKx/dx/trWi5B8cn30=;
        b=aU9yBnqsw+K3SHn4olJna+1MYGFclXg6uXzPFdciJnAig8VeTSv1v62PgmA2wD6V+3
         tp/SMQy/711sxIN6wwH8YX6F/g7kA/mGQuOvaFAWzL/ksr/ZsofJidyEBfX+tsgCJvzw
         PIw8by9NGW+ANgEqF0p7kD4fIOTH2jSDhkYx4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=ss2ffj4GLHh9YU/aFDJipCdSJs0ptiu/2zvJmXRQbQmA3LiHATMsb55CuOLL0wgYWz
         jpXoJEihGvqvbpzQ0dGakTdvBYtH+Sy8DbhnV5cmiLKM3yLVJq7mhBZWlqN1zKc7SZrx
         +wm0L9uhflDDz8+QqwjPQG5joMvKCoguNS3wY=
Received: by 10.142.156.2 with SMTP id d2mr6116161wfe.102.1228430650649;
        Thu, 04 Dec 2008 14:44:10 -0800 (PST)
Received: by 10.143.40.11 with HTTP; Thu, 4 Dec 2008 14:44:10 -0800 (PST)
Message-ID: <5e76f3840812041444kc22c7dct94f4eed96d669b41@mail.gmail.com>
Date: Thu, 4 Dec 2008 17:44:10 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NIOFSDirectory
In-Reply-To: <8837fb770812041426l6fb871fcq8a1a8cc927875e3f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
	 <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
	 <5e76f3840812041332y6420786dp80463d3733bf69ca@mail.gmail.com>
	 <c68e39170812041400q36bb0545udf6fe0a461b0c60b@mail.gmail.com>
	 <8837fb770812041408x48e933bck2e5257dccd8d65df@mail.gmail.com>
	 <c68e39170812041416o1b643df0qb086d122ae2184a3@mail.gmail.com>
	 <8837fb770812041426l6fb871fcq8a1a8cc927875e3f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Am I missing something here?

Why not use:
 IndexWriter writer = new IndexWriter(NIOFSDirectory.getDirectory(new
File(filename), analyzer, true);

Another question: is NIOFSDirectory to be used with IndexWriter? If
no, could someone explain?

thanks,					
-glen


2008/12/4 John Wang <john.wang@gmail.com>:
> Thanks!
> -John
>
> On Thu, Dec 4, 2008 at 2:16 PM, Yonik Seeley <yonik@apache.org> wrote:
>
>> Details in the bug:
>> https://issues.apache.org/jira/browse/LUCENE-1451
>>
>> Use this constructor to create an instance of NIODirectory:
>>
>>  /** Create a new NIOFSDirectory for the named location.
>>   *
>>   * @param path the path of the directory
>>   * @param lockFactory the lock factory to use, or null for the default.
>>   * @throws IOException
>>   */
>>  public NIOFSDirectory(File path, LockFactory lockFactory) throws
>> IOException {
>>    super(path, lockFactory);
>>  }
>>
>> -Yonik
>>
>>
>> On Thu, Dec 4, 2008 at 5:08 PM, John Wang <john.wang@gmail.com> wrote:
>> > That does not help. The File/path is not stored with the instance. It is
>> in
>> > a map FSDirectory keeps statically. Should subclasses of FSDirectory be
>> > modifying the map?
>> > This is not a question about how to subclass or customize FSDirectory.
>> This
>> > is more on how to use NIOFSDirectory class. I am hoping for a simply
>> answer,
>> > is what I am doing (setting the class name statically on system property)
>> > the right way?
>> >
>> > -John
>> >
>> > On Thu, Dec 4, 2008 at 2:00 PM, Yonik Seeley <yonik@apache.org> wrote:
>> >
>> >> On Thu, Dec 4, 2008 at 4:32 PM, Glen Newton <glen.newton@gmail.com>
>> wrote:
>> >> > Sorry....what version are we talking about?  :-)
>> >>
>> >> The current development version of Lucene allows you to directly
>> >> instantiate FSDirectory subclasses.
>> >>
>> >> -Yonik
>> >>
>> >>
>> >> > thanks,
>> >> >
>> >> > Glen
>> >> >
>> >> > 2008/12/4 Yonik Seeley <yonik@apache.org>:
>> >> >> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com>
>> wrote:
>> >> >>> Hi guys:
>> >> >>>    We did some profiling and benchmarking:
>> >> >>>
>> >> >>>    The thread contention on FSDIrectory is gone, and for the set of
>> >> queries
>> >> >>> we are running, performance improved by a factor of 5 (to be
>> >> conservative).
>> >> >>>
>> >> >>>    Great job, this is awesome, a simple change and made a huge
>> >> difference.
>> >> >>>
>> >> >>>    To get NIOFSDirectory installed, I didn't find any documentation
>> >> >>> (doesn't mean there aren't any), after reading the code, I resorted
>> to:
>> >> >>>
>> >> >>>  static
>> >> >>>  {
>> >> >>>
>> >> >>>
>> >>
>> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
>> >> >>>  }
>> >> >>>   I am sure this is not the intended usage, as this is really ugly.
>> >> What is
>> >> >>> the suggested usage?
>> >> >>
>> >> >> Instantiate NIOFSDirectory directly and pass it to the
>> >> IndexReader.open()
>> >> >>
>> >> >> -Yonik
>> >> >>
>> >> >> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >> >
>> >> >
>> >> > --
>> >> >
>> >> > -
>> >> >
>> >> > ---------------------------------------------------------------------
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 22:50:27 2008
Return-Path: <java-user-return-37532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37125 invoked from network); 4 Dec 2008 22:50:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 22:50:27 -0000
Received: (qmail 31824 invoked by uid 500); 4 Dec 2008 22:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31043 invoked by uid 500); 4 Dec 2008 22:50:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31032 invoked by uid 99); 4 Dec 2008 22:50:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 14:50:31 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:49:03 +0000
Received: by rn-out-0910.google.com with SMTP id j71so4318017rne.4
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 14:49:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jYFixSCRceN8HervOP7Z+kOTQyB5ajo1mcyiKw1q1mI=;
        b=OECkat5bv6rkR8dF1WIJKlS8MFWpstKT6qp3kGsuOycTqr58RvPAu/zW+1a1d2K8bX
         y/rB95eGJjlCt1g14IR3g/01+1frItuA2PipJzcIdeMxvY6ZrjkZ/8vfpAUdwdWJ/9Kc
         JlDMOBYbMpNAVHIWFfW/hurcGVWRHZPsZ0xUM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qR+SiVG1n/OsoGSeRv1QJ4eUufF4eA1cchZ3ofKVan80PkRgcjWZQloftcnPGo7H+O
         HyrrvRXR5T0n3GQhJNdgDI0BGk0gUrPHlh//jtUnu2LphdMYNr7btiYue9ZGyLWyZKCy
         3g5VTqt9aKWlQzrPOW3MRbTm+MAgmHgAcS1z0=
Received: by 10.90.120.14 with SMTP id s14mr8328280agc.36.1228430990848;
        Thu, 04 Dec 2008 14:49:50 -0800 (PST)
Received: by 10.90.51.19 with HTTP; Thu, 4 Dec 2008 14:49:50 -0800 (PST)
Message-ID: <8837fb770812041449g388dc603p1df9840f217223be@mail.gmail.com>
Date: Thu, 4 Dec 2008 14:49:50 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NIOFSDirectory
In-Reply-To: <5e76f3840812041444kc22c7dct94f4eed96d669b41@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_115955_17760823.1228430990840"
References: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
	 <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
	 <5e76f3840812041332y6420786dp80463d3733bf69ca@mail.gmail.com>
	 <c68e39170812041400q36bb0545udf6fe0a461b0c60b@mail.gmail.com>
	 <8837fb770812041408x48e933bck2e5257dccd8d65df@mail.gmail.com>
	 <c68e39170812041416o1b643df0qb086d122ae2184a3@mail.gmail.com>
	 <8837fb770812041426l6fb871fcq8a1a8cc927875e3f@mail.gmail.com>
	 <5e76f3840812041444kc22c7dct94f4eed96d669b41@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_115955_17760823.1228430990840
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

NIOFSDirectory.getDirectory simple calls the static method on the parent
class: FSDirectory.getDirectory.
Which returns an instance of FSDirectory.

IMO: NIOFSDirectory solves concurrent read problems, generally you don't
want concurrent writes.

-John

On Thu, Dec 4, 2008 at 2:44 PM, Glen Newton <glen.newton@gmail.com> wrote:

> Am I missing something here?
>
> Why not use:
>  IndexWriter writer = new IndexWriter(NIOFSDirectory.getDirectory(new
> File(filename), analyzer, true);
>
> Another question: is NIOFSDirectory to be used with IndexWriter? If
> no, could someone explain?
>
> thanks,
> -glen
>
>
> 2008/12/4 John Wang <john.wang@gmail.com>:
> > Thanks!
> > -John
> >
> > On Thu, Dec 4, 2008 at 2:16 PM, Yonik Seeley <yonik@apache.org> wrote:
> >
> >> Details in the bug:
> >> https://issues.apache.org/jira/browse/LUCENE-1451
> >>
> >> Use this constructor to create an instance of NIODirectory:
> >>
> >>  /** Create a new NIOFSDirectory for the named location.
> >>   *
> >>   * @param path the path of the directory
> >>   * @param lockFactory the lock factory to use, or null for the default.
> >>   * @throws IOException
> >>   */
> >>  public NIOFSDirectory(File path, LockFactory lockFactory) throws
> >> IOException {
> >>    super(path, lockFactory);
> >>  }
> >>
> >> -Yonik
> >>
> >>
> >> On Thu, Dec 4, 2008 at 5:08 PM, John Wang <john.wang@gmail.com> wrote:
> >> > That does not help. The File/path is not stored with the instance. It
> is
> >> in
> >> > a map FSDirectory keeps statically. Should subclasses of FSDirectory
> be
> >> > modifying the map?
> >> > This is not a question about how to subclass or customize FSDirectory.
> >> This
> >> > is more on how to use NIOFSDirectory class. I am hoping for a simply
> >> answer,
> >> > is what I am doing (setting the class name statically on system
> property)
> >> > the right way?
> >> >
> >> > -John
> >> >
> >> > On Thu, Dec 4, 2008 at 2:00 PM, Yonik Seeley <yonik@apache.org>
> wrote:
> >> >
> >> >> On Thu, Dec 4, 2008 at 4:32 PM, Glen Newton <glen.newton@gmail.com>
> >> wrote:
> >> >> > Sorry....what version are we talking about?  :-)
> >> >>
> >> >> The current development version of Lucene allows you to directly
> >> >> instantiate FSDirectory subclasses.
> >> >>
> >> >> -Yonik
> >> >>
> >> >>
> >> >> > thanks,
> >> >> >
> >> >> > Glen
> >> >> >
> >> >> > 2008/12/4 Yonik Seeley <yonik@apache.org>:
> >> >> >> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com>
> >> wrote:
> >> >> >>> Hi guys:
> >> >> >>>    We did some profiling and benchmarking:
> >> >> >>>
> >> >> >>>    The thread contention on FSDIrectory is gone, and for the set
> of
> >> >> queries
> >> >> >>> we are running, performance improved by a factor of 5 (to be
> >> >> conservative).
> >> >> >>>
> >> >> >>>    Great job, this is awesome, a simple change and made a huge
> >> >> difference.
> >> >> >>>
> >> >> >>>    To get NIOFSDirectory installed, I didn't find any
> documentation
> >> >> >>> (doesn't mean there aren't any), after reading the code, I
> resorted
> >> to:
> >> >> >>>
> >> >> >>>  static
> >> >> >>>  {
> >> >> >>>
> >> >> >>>
> >> >>
> >>
> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
> >> >> >>>  }
> >> >> >>>   I am sure this is not the intended usage, as this is really
> ugly.
> >> >> What is
> >> >> >>> the suggested usage?
> >> >> >>
> >> >> >> Instantiate NIOFSDirectory directly and pass it to the
> >> >> IndexReader.open()
> >> >> >>
> >> >> >> -Yonik
> >> >> >>
> >> >> >>
> ---------------------------------------------------------------------
> >> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >> >>
> >> >> >>
> >> >> >
> >> >> >
> >> >> >
> >> >> > --
> >> >> >
> >> >> > -
> >> >> >
> >> >> >
> ---------------------------------------------------------------------
> >> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >> >
> >> >> >
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_115955_17760823.1228430990840--

From java-user-return-37533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 23:03:28 2008
Return-Path: <java-user-return-37533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43020 invoked from network); 4 Dec 2008 23:03:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 23:03:28 -0000
Received: (qmail 48013 invoked by uid 500); 4 Dec 2008 23:03:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47979 invoked by uid 500); 4 Dec 2008 23:03:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47968 invoked by uid 99); 4 Dec 2008 23:03:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 15:03:33 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of muralidharan@gmail.com designates 64.233.170.186 as permitted sender)
Received: from [64.233.170.186] (HELO rn-out-0910.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 23:02:04 +0000
Received: by rn-out-0910.google.com with SMTP id j71so4323261rne.4
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 15:02:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=BN6n0s2VFhgL4X8FLLCbLeVWtnzAFc5c49rk9mmh4Qk=;
        b=j8OnBWgHfNvtfb84VPoAxZV9WIAl1/HDqx94g5iK6AS8DPVdEmI6EwwZEi97YDA2qb
         Wg9S2okxPwugegCJcCIowlNmjhx/CXG/ZlzpmcAVd42UL36ewrxgRNzQ4DD567k1mLcm
         5+r4JABTH3YZ1uLzX4kmv2GabhvWdjLhOiMFk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=lmxDDcZDYYIOB/szhmckX6wrSdEBMd3aSvqGhWFg9LJKmT08TjQKVDr3kzgkAavVpL
         Pt2iakGaqL1KREsYyY1pDBGIBp/Iazrh/ue2GRWRax2AfS/bFOLre09kY7PzDxGVn+wn
         lrbDUxSFzdBaV3OHK+sKYjV4vC+3lW09AvVW8=
Received: by 10.142.44.11 with SMTP id r11mr6129133wfr.46.1228431761989;
        Thu, 04 Dec 2008 15:02:41 -0800 (PST)
Received: by 10.143.90.10 with HTTP; Thu, 4 Dec 2008 15:02:41 -0800 (PST)
Message-ID: <26fbe3a70812041502h11a039deqae66483bb56e9743@mail.gmail.com>
Date: Thu, 4 Dec 2008 15:02:41 -0800
From: "Muralidharan V" <muralidharan@gmail.com>
To: java-user@lucene.apache.org
Subject: Suggestions for drill downs
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14579_11507298.1228431761972"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14579_11507298.1228431761972
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We are evaluating lucene for a product search engine. One requirement is
that we be able to suggest the top n brands(the ones with most products in
the result set) for a given search term to further refine the search query.
The brand is stored in a separate field and searches are performed against
product description and brand.

One option is to use a custom HitCollector to keep track of the brands in
the result set but that would require reading the brand field for each doc
that matches the search term. We think this will be an order of magnitude
slower. Is there anything else that we can do?

Thanks,
Murali

------=_Part_14579_11507298.1228431761972--

From java-user-return-37534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 04 23:10:54 2008
Return-Path: <java-user-return-37534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46226 invoked from network); 4 Dec 2008 23:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2008 23:10:54 -0000
Received: (qmail 59779 invoked by uid 500); 4 Dec 2008 23:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59749 invoked by uid 500); 4 Dec 2008 23:10:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59738 invoked by uid 99); 4 Dec 2008 23:10:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 15:10:59 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 23:09:30 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1780779ywj.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 15:10:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5P3SbhtEy11Zmm3PNn79K0FMKT73rghsRffK2Kz3jNg=;
        b=D0BrVvDqB7OzyeBtM+vnb3G9RnN2kNCidrVjJSpKhnBw0As+5CrIucagcD4VLqNYJE
         Teztgqx0oPWzZ2UZiLfV3hITPeVbrhvVmT9eiMc1d8E3mVQAKZdHgTpM54NOOdh18kOY
         Vv0PsHntlfxNjiJM+XqO5cHUfExeXMIpyJkVs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=q5o2CHqm8ZrlAXk3XwE9Yq6AwF7Vvr5+PE355Eo0pINhwgqwTe3LDGpqshjbRMdbuQ
         xHRPhxwEfyyAoiB4IzDZc7PtIoqqeXK02/sivYPRmjrVwBM6igGiHCdPuOtHRkL9e8tx
         XL5YlIOYD/BuUXVtOgKOYxDq0JpZYSpLznnTg=
Received: by 10.90.102.14 with SMTP id z14mr3549125agb.45.1228432217312;
        Thu, 04 Dec 2008 15:10:17 -0800 (PST)
Received: by 10.90.51.19 with HTTP; Thu, 4 Dec 2008 15:10:17 -0800 (PST)
Message-ID: <8837fb770812041510h6c388874maccbdfa98449070e@mail.gmail.com>
Date: Thu, 4 Dec 2008 15:10:17 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suggestions for drill downs
In-Reply-To: <26fbe3a70812041502h11a039deqae66483bb56e9743@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_116130_32684624.1228432217287"
References: <26fbe3a70812041502h11a039deqae66483bb56e9743@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_116130_32684624.1228432217287
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Easiest way to do this is using the FieldCache. It constructs a StringIndex
object which gives you very fast lookup to the field value (index) given a
docid. Create a parallel count array to the lookup array for the
StringIndex. Run your HitCollector thru should be fast.
Loading FieldCache maybe expensive, but you do it only once when opening the
reader.

This is one way of implementing Faceted Search with Lucene but there are
lotsa things you can do to make this faster.

This is of course assuming your Brand field is indexed and not tokenized.

One side-benefit is that if you do this, sorting on Brand would be fast
because FieldCache would be already loaded.

Hope this helps

-John


On Thu, Dec 4, 2008 at 3:02 PM, Muralidharan V <muralidharan@gmail.com>wrote:

> We are evaluating lucene for a product search engine. One requirement is
> that we be able to suggest the top n brands(the ones with most products in
> the result set) for a given search term to further refine the search query.
> The brand is stored in a separate field and searches are performed against
> product description and brand.
>
> One option is to use a custom HitCollector to keep track of the brands in
> the result set but that would require reading the brand field for each doc
> that matches the search term. We think this will be an order of magnitude
> slower. Is there anything else that we can do?
>
> Thanks,
> Murali
>

------=_Part_116130_32684624.1228432217287--

From java-user-return-37535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 01:22:35 2008
Return-Path: <java-user-return-37535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6875 invoked from network); 5 Dec 2008 01:22:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 01:22:35 -0000
Received: (qmail 16247 invoked by uid 500); 5 Dec 2008 01:22:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16216 invoked by uid 500); 5 Dec 2008 01:22:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16205 invoked by uid 99); 5 Dec 2008 01:22:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 17:22:41 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 01:21:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L8POI-0003HE-MM
	for java-user@lucene.apache.org; Thu, 04 Dec 2008 17:21:58 -0800
Message-ID: <20846085.post@talk.nabble.com>
Date: Thu, 4 Dec 2008 17:21:58 -0800 (PST)
From: samd <sdoyle_2@yahoo.com>
To: java-user@lucene.apache.org
Subject: SnowballAnalyzer and AlphaNumeric
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdoyle_2@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Where can I get the Lucene source for the Snowball implementation.
I need to be able to search for words that are alphanumeric and this does
not work with the current snowballanalyzer.

If there is an alternative to this then that would be greatly appreciated.

Thanks.
-- 
View this message in context: http://www.nabble.com/SnowballAnalyzer-and-AlphaNumeric-tp20846085p20846085.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 01:47:38 2008
Return-Path: <java-user-return-37536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21159 invoked from network); 5 Dec 2008 01:47:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 01:47:38 -0000
Received: (qmail 33482 invoked by uid 500); 5 Dec 2008 01:47:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33454 invoked by uid 500); 5 Dec 2008 01:47:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33443 invoked by uid 99); 5 Dec 2008 01:47:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 17:47:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of muralidharan@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 01:46:14 +0000
Received: by wf-out-1314.google.com with SMTP id 28so4344779wfc.20
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 17:46:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tgA4RLErDD76uTbNplbXJI5aIVZyJLnWvx0HmmBuOLs=;
        b=HGwU1vU0OqAGxloG/b6AKrwiUyuXBKjVpEyvJYXJDuOTo2dQBp0RUeMG39R18d72wi
         M0A3rWq8CbYwguvRjVO5K83ZzeRsUnLaXL978hubJmQtYwwVtDHVq4AosmB90CyppFaG
         fBb4+eaJfFa5TAxyJZFQIMGu2tq7iKb2XINNQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=u7Mz7ZdGJI0eNxw/CZeFnF/IKD45kVyP2LnlO4zcGmw6MwHxOcaxVM1HRIA4goHF3i
         umnxQ6XxQPuLgX+syAkXIhXbJxu7gv4reHJjUtEh1Woy4+jQ+a+lPUE3NFjTAyLxYGOI
         wSrLBvhlvRzPVD5oD4UaOAunlejko9vLQqQXQ=
Received: by 10.142.173.14 with SMTP id v14mr6171179wfe.115.1228441612797;
        Thu, 04 Dec 2008 17:46:52 -0800 (PST)
Received: by 10.143.90.10 with HTTP; Thu, 4 Dec 2008 17:46:52 -0800 (PST)
Message-ID: <26fbe3a70812041746t85326e7tc19598af093a6977@mail.gmail.com>
Date: Thu, 4 Dec 2008 17:46:52 -0800
From: "Muralidharan V" <muralidharan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suggestions for drill downs
In-Reply-To: <8837fb770812041510h6c388874maccbdfa98449070e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15603_12241124.1228441612515"
References: <26fbe3a70812041502h11a039deqae66483bb56e9743@mail.gmail.com>
	 <8837fb770812041510h6c388874maccbdfa98449070e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15603_12241124.1228441612515
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

John,

     Using the FieldCache worked well. Thanks!

-Murali

On Thu, Dec 4, 2008 at 3:10 PM, John Wang <john.wang@gmail.com> wrote:

> Easiest way to do this is using the FieldCache. It constructs a StringIndex
> object which gives you very fast lookup to the field value (index) given a
> docid. Create a parallel count array to the lookup array for the
> StringIndex. Run your HitCollector thru should be fast.
> Loading FieldCache maybe expensive, but you do it only once when opening
> the
> reader.
>
> This is one way of implementing Faceted Search with Lucene but there are
> lotsa things you can do to make this faster.
>
> This is of course assuming your Brand field is indexed and not tokenized.
>
> One side-benefit is that if you do this, sorting on Brand would be fast
> because FieldCache would be already loaded.
>
> Hope this helps
>
> -John
>
>
> On Thu, Dec 4, 2008 at 3:02 PM, Muralidharan V <muralidharan@gmail.com
> >wrote:
>
> > We are evaluating lucene for a product search engine. One requirement is
> > that we be able to suggest the top n brands(the ones with most products
> in
> > the result set) for a given search term to further refine the search
> query.
> > The brand is stored in a separate field and searches are performed
> against
> > product description and brand.
> >
> > One option is to use a custom HitCollector to keep track of the brands in
> > the result set but that would require reading the brand field for each
> doc
> > that matches the search term. We think this will be an order of magnitude
> > slower. Is there anything else that we can do?
> >
> > Thanks,
> > Murali
> >
>

------=_Part_15603_12241124.1228441612515--

From java-user-return-37537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 02:03:03 2008
Return-Path: <java-user-return-37537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31576 invoked from network); 5 Dec 2008 02:03:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 02:03:03 -0000
Received: (qmail 42388 invoked by uid 500); 5 Dec 2008 02:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42352 invoked by uid 500); 5 Dec 2008 02:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42339 invoked by uid 99); 5 Dec 2008 02:03:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 18:03:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 02:01:38 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3705055fkq.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 18:02:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=+t6kIn3B6cu09nuB9J7Lad3lT+winoifX8c3vERDLXA=;
        b=pz+W4YEAw86fq9NF/u8RYhTkdQmjavxIf1V2nByYVurfEvRwAANGDuHcyydyvJAwjc
         yieZ1h2ZYbPYSSxCAmiUrOBeIob01t7vTo/lRcLskQZEmF0+PWVekoy7CHegFNnO3hs1
         H1jViu/0B+eV1X/HK0YGauM4mz/LP8zSfAizs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vwam2Im+bjql9QLRxfIrS+QphFUZlESY5aDeBJpxZr7v/0AJDIPai85fdi9+Ge05qV
         scbc/L2M3PcPcb5Mnayh4226zDZb/O8Q0dljwLCogW2vW0s3VeqAvLkXscL70d1tq2fL
         piFMLSa1SGELH/yRPE8ta10PvYhNJVb9S+pdA=
Received: by 10.180.208.5 with SMTP id f5mr5266492bkg.211.1228442535339;
        Thu, 04 Dec 2008 18:02:15 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Thu, 4 Dec 2008 18:02:15 -0800 (PST)
Message-ID: <5d53d5770812041802w26b1f1fbo1a00146471bd717d@mail.gmail.com>
Date: Thu, 4 Dec 2008 22:02:15 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design guidance - search strategy
In-Reply-To: <359a92830812041412o2c6ed322mbef29210c54f53ee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43813_21927995.1228442535306"
References: <5d53d5770812040459y72e3braa6de15cdc68518f@mail.gmail.com>
	 <359a92830812040536t55e11e63s47bc6df9d13eb962@mail.gmail.com>
	 <5d53d5770812041320v6af64e4v30eb3936e3bd6c2e@mail.gmail.com>
	 <359a92830812041412o2c6ed322mbef29210c54f53ee@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43813_21927995.1228442535306
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I bought your book :)
Thanks, I will look into it.

On Thu, Dec 4, 2008 at 6:12 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> See the class in the docs or Lucene In Action for more
> detail, but here's the short form.....
>
> A Filter is a bitset where each bit's ordinal position stands
> for a document. I.e. bit 1 means doc id 1, bit 519
> represents document 519 etc.
>
> When you pass a filter to one of the search routines that accepts a Filter,
> the search is restricted to ONLY those documents with the corresponding
> bit set in the Filter. Which sounds like just what you want, but I may be
> wrong.
>
> You construct a Filter by iterating over the terms you care about (see
> TermDocs/TermEnum classes).  In a nutshell you find the terms you
> care about, and for each document that contains that term, set the
> bit in your filter. This is actually much faster than you might think. All
> this is provided for you in the two classes above, how you use them
> depends (tm). Watch that you don't run past the term you care about, I
> remember having that happen in one of those classes but the details
> escape my aging memory.
>
> Hope that helps
> Erick
>
> On Thu, Dec 4, 2008 at 4:20 PM, Ian Vink <ianvink@gmail.com> wrote:
>
> > So, let me get this straight.  :)
> >
> > A Query tells Lucene what to search for. Then a Filter tells lucene what?
> >
> > I think I'm missing understanding about what a Filter is for.
> >
> > Ian
> >
> >
> >
> > On Thu, Dec 4, 2008 at 9:36 AM, Erick Erickson <erickerickson@gmail.com
> > >wrote:
> >
> > > It's generally a bad idea to iterate a Hits object. In fact, Hits
> > > is deprecated in recent versions of Lucene. The underlying
> > > problem is that the query is re-executed every 100 responses
> > > or so.
> > >
> > > First suggestion, create a Filter by iterating over your
> > > docid field and use that in your searches see
> > > several of the Searcher.search variants.
> > >
> > > Second suggestion, use one of the collector classes rather than
> > > Hits, e.g. TopDoc*, TopFieldDoc*, whichever suits.
> > >
> > >
> > > Best
> > > Erick
> > >
> > > On Thu, Dec 4, 2008 at 7:59 AM, Ian Vink <ianvink@gmail.com> wrote:
> > >
> > > > I have documents with this simple schema in Lucene which I can not
> > > change.
> > > > docid: (int)
> > > > contents: (text)
> > > >
> > > > The user is given a list of 10,000 documents in a tree which they
> > select
> > > to
> > > > search, usually they select 5000 or so.
> > > >
> > > > I only want to search those 5000 documents. I have the 'id' fields.
> > That
> > > is
> > > > all.
> > > >
> > > > I do this now:
> > > >
> > > > Get the 'Hits' for all documents.
> > > > Loop through all Hits looking for any 'docid' that is in the 5000
> > > selected
> > > > by the user
> > > > Add found docs to a collection of found documents and return that to
> > the
> > > > UI.
> > > >
> > > >
> > > > Is there a better way of doing this?
> > > >
> > >
> >
>

------=_Part_43813_21927995.1228442535306--

From java-user-return-37538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 02:46:22 2008
Return-Path: <java-user-return-37538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56406 invoked from network); 5 Dec 2008 02:46:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 02:46:22 -0000
Received: (qmail 92856 invoked by uid 500); 5 Dec 2008 02:46:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92821 invoked by uid 500); 5 Dec 2008 02:46:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92808 invoked by uid 99); 5 Dec 2008 02:46:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 18:46:27 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.170.187 as permitted sender)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 02:44:58 +0000
Received: by rn-out-0910.google.com with SMTP id j71so4397941rne.4
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 18:45:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=PsVNNPYnECMDUxVuRYUuDx4clszN6ajSwXYFagsto6Y=;
        b=jLyZCc+mDwmH10IhbZzSHVtedJ8fJciKms8xW1NLywWFgTlstham1oA3KsiUUTEQ26
         Jmh9CJpammSWe1VNteP5T0byNbMRO+wEbO089hrOWktcOAFvgiAfBAM610SAnbtEAK5A
         JJc4d0ovnGvqsw051lIT+uWx4DOcMXEP02xk8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=cc+OIvJShBr/XniN2HiD4ToSG1oFJdKfjJTprZN9Xo6JxzibQQzFdZ7Xy+XYHJmSyZ
         u/o6TdnVZSEoLqsTZAulwxS7icRjiiTD5vS+AgqS80MBT3rQ8E9CDl7HBGvjbo81lwkm
         83Q8xt02Tvy2SZfyUtbeTjDuTGBHOXL0D8ErA=
Received: by 10.90.91.2 with SMTP id o2mr8401907agb.121.1228445135424;
        Thu, 04 Dec 2008 18:45:35 -0800 (PST)
Received: by 10.90.51.19 with HTTP; Thu, 4 Dec 2008 18:45:35 -0800 (PST)
Message-ID: <8837fb770812041845w11d32aadya804fec16b48fb6f@mail.gmail.com>
Date: Thu, 4 Dec 2008 18:45:35 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suggestions for drill downs
In-Reply-To: <26fbe3a70812041746t85326e7tc19598af093a6977@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_118415_5673178.1228445135392"
References: <26fbe3a70812041502h11a039deqae66483bb56e9743@mail.gmail.com>
	 <8837fb770812041510h6c388874maccbdfa98449070e@mail.gmail.com>
	 <26fbe3a70812041746t85326e7tc19598af093a6977@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_118415_5673178.1228445135392
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Glad to be of help.
Understand that FieldCache lives in a map in the static memory and is keyed
by an IndexReader. So if your reader updates often there might be an issue
of cleaning the map.

This is a question for the Luceners, when you call IndexReader.reopen, how
is FieldCache updated?

-John

On Thu, Dec 4, 2008 at 5:46 PM, Muralidharan V <muralidharan@gmail.com>wrote:

> John,
>
>     Using the FieldCache worked well. Thanks!
>
> -Murali
>
> On Thu, Dec 4, 2008 at 3:10 PM, John Wang <john.wang@gmail.com> wrote:
>
> > Easiest way to do this is using the FieldCache. It constructs a
> StringIndex
> > object which gives you very fast lookup to the field value (index) given
> a
> > docid. Create a parallel count array to the lookup array for the
> > StringIndex. Run your HitCollector thru should be fast.
> > Loading FieldCache maybe expensive, but you do it only once when opening
> > the
> > reader.
> >
> > This is one way of implementing Faceted Search with Lucene but there are
> > lotsa things you can do to make this faster.
> >
> > This is of course assuming your Brand field is indexed and not tokenized.
> >
> > One side-benefit is that if you do this, sorting on Brand would be fast
> > because FieldCache would be already loaded.
> >
> > Hope this helps
> >
> > -John
> >
> >
> > On Thu, Dec 4, 2008 at 3:02 PM, Muralidharan V <muralidharan@gmail.com
> > >wrote:
> >
> > > We are evaluating lucene for a product search engine. One requirement
> is
> > > that we be able to suggest the top n brands(the ones with most products
> > in
> > > the result set) for a given search term to further refine the search
> > query.
> > > The brand is stored in a separate field and searches are performed
> > against
> > > product description and brand.
> > >
> > > One option is to use a custom HitCollector to keep track of the brands
> in
> > > the result set but that would require reading the brand field for each
> > doc
> > > that matches the search term. We think this will be an order of
> magnitude
> > > slower. Is there anything else that we can do?
> > >
> > > Thanks,
> > > Murali
> > >
> >
>

------=_Part_118415_5673178.1228445135392--

From java-user-return-37539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 02:49:26 2008
Return-Path: <java-user-return-37539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56771 invoked from network); 5 Dec 2008 02:49:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 02:49:26 -0000
Received: (qmail 95119 invoked by uid 500); 5 Dec 2008 02:49:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95078 invoked by uid 500); 5 Dec 2008 02:49:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95067 invoked by uid 99); 5 Dec 2008 02:49:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 18:49:31 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 02:47:59 +0000
Received: by fg-out-1718.google.com with SMTP id l27so3118294fgb.27
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 18:48:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ODcbnqTC1J3z3rMKSSKTCRn36l0aYC21Wtitunj7N0Q=;
        b=LWY1OPA4G+iidBY8wB1mKZuveUIdo2hkqhPmv+81hQZlePw806jpB/xy2AV3wHXalI
         QOur8lZDCAqG6TgT8I/t0KECgzX07LyxpX49SZFlVLT4s0w2gnr8SRJWG8GbhrFB95UB
         FFRsUJue2UFK7RFWrryyLo1y11idckENv3iwQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=NLvUn9239PiE1SxfzZIl1E8rEDzMhKguDwJFLb5mHj45bSeYGdCvTv4IKpYLbK1Y74
         auFxAfgbaosM/o+5VB+Maf4TNQH7e830WPjL35xzSFjRphIrz2CRyaw/BWftp84ciQ/a
         1E35L42Qdd8aBDDTqn5ywXbhYqghyLej0ll84=
Received: by 10.180.232.16 with SMTP id e16mr5272623bkh.77.1228445325856;
        Thu, 04 Dec 2008 18:48:45 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Thu, 4 Dec 2008 18:48:45 -0800 (PST)
Message-ID: <5d53d5770812041848q568dbfbao78780a74a143cffb@mail.gmail.com>
Date: Thu, 4 Dec 2008 22:48:45 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design guidance - search strategy
In-Reply-To: <5d53d5770812041802w26b1f1fbo1a00146471bd717d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44532_20832248.1228445325837"
References: <5d53d5770812040459y72e3braa6de15cdc68518f@mail.gmail.com>
	 <359a92830812040536t55e11e63s47bc6df9d13eb962@mail.gmail.com>
	 <5d53d5770812041320v6af64e4v30eb3936e3bd6c2e@mail.gmail.com>
	 <359a92830812041412o2c6ed322mbef29210c54f53ee@mail.gmail.com>
	 <5d53d5770812041802w26b1f1fbo1a00146471bd717d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44532_20832248.1228445325837
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It works.
For those using Lucene.NET here is an example of a Filter that takes a list
of IDs for books:


    public class BookFilter: Filter
    {
        private readonly List<int> bookIDs;

        public BookFilter(List<int> bookIDsToSearch)
        {
            bookIDs = bookIDsToSearch;
        }

        public override BitArray Bits(IndexReader reader)
        {
            BitArray bits = new BitArray(50000);
            int[] docs = new int[1];
            int[] freqs = new int[1];

            foreach (int bookID in bookIDs)
            {
                TermDocs termDocs = reader.TermDocs(new Term("id",
bookID.ToString()));
                int count = termDocs.Read(docs, freqs);
                if(count==1)
                    bits.Set(docs[0],true);
            }
            return bits;
        }
    }

------=_Part_44532_20832248.1228445325837--

From java-user-return-37540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 02:52:16 2008
Return-Path: <java-user-return-37540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57474 invoked from network); 5 Dec 2008 02:52:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 02:52:16 -0000
Received: (qmail 97518 invoked by uid 500); 5 Dec 2008 02:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97476 invoked by uid 500); 5 Dec 2008 02:52:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97465 invoked by uid 99); 5 Dec 2008 02:52:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 18:52:22 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 02:50:54 +0000
Received: by rv-out-0506.google.com with SMTP id f9so68118rvb.1
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 18:51:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=YII7tN/IK9hjkLucfICVaw9aAsRb4znYDYFSd/nwpYg=;
        b=P3v8EjP3N5bP9sSEUrvN19065szPtq+gfS457oySSkNnTvJIVRPT2drl/hsOpjz7K/
         e0zmZDKrWfyLbDoN6UK0YQvfhtZwTA0CsRTN0DCyb5AO9Njputm9xOI/ov5NxtwxQ8oR
         N36qE2cXaCEYzL5vc3IGCjifaQpMieRycBzYg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Fj3864Y46nzSl2nAooC3eUImfyFvaDD1gbnOFGhXzQuNGMcIcrc+i5e0kC+aHSiSRr
         96XbiwHWbfGnSZNLF5qMxWdIGGMQ9AJsXiKY3RhEDzw4xgwjCGqhJFl2vYjBZY3BD8zJ
         N2higNZWIy/jzHhpqOaB3Ehz/htqQJninRuQQ=
Received: by 10.141.175.5 with SMTP id c5mr7281400rvp.243.1228445502077;
        Thu, 04 Dec 2008 18:51:42 -0800 (PST)
Received: by 10.141.32.9 with HTTP; Thu, 4 Dec 2008 18:51:42 -0800 (PST)
Message-ID: <85d3c3b60812041851t50de0c7ap7b7d7e0503296649@mail.gmail.com>
Date: Thu, 4 Dec 2008 18:51:42 -0800
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Suggestions for drill downs
In-Reply-To: <8837fb770812041845w11d32aadya804fec16b48fb6f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13383_5687554.1228445502055"
References: <26fbe3a70812041502h11a039deqae66483bb56e9743@mail.gmail.com>
	 <8837fb770812041510h6c388874maccbdfa98449070e@mail.gmail.com>
	 <26fbe3a70812041746t85326e7tc19598af093a6977@mail.gmail.com>
	 <8837fb770812041845w11d32aadya804fec16b48fb6f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13383_5687554.1228445502055
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The field cache is completely reloaded.  LUCENE-831 solves this by merging
the field caches of the segments.  For realtime search systems, merging the
field caches is not desirable though.

On Thu, Dec 4, 2008 at 6:45 PM, John Wang <john.wang@gmail.com> wrote:

> Glad to be of help.
> Understand that FieldCache lives in a map in the static memory and is keyed
> by an IndexReader. So if your reader updates often there might be an issue
> of cleaning the map.
>
> This is a question for the Luceners, when you call IndexReader.reopen, how
> is FieldCache updated?
>
> -John
>
> On Thu, Dec 4, 2008 at 5:46 PM, Muralidharan V <muralidharan@gmail.com
> >wrote:
>
> > John,
> >
> >     Using the FieldCache worked well. Thanks!
> >
> > -Murali
> >
> > On Thu, Dec 4, 2008 at 3:10 PM, John Wang <john.wang@gmail.com> wrote:
> >
> > > Easiest way to do this is using the FieldCache. It constructs a
> > StringIndex
> > > object which gives you very fast lookup to the field value (index)
> given
> > a
> > > docid. Create a parallel count array to the lookup array for the
> > > StringIndex. Run your HitCollector thru should be fast.
> > > Loading FieldCache maybe expensive, but you do it only once when
> opening
> > > the
> > > reader.
> > >
> > > This is one way of implementing Faceted Search with Lucene but there
> are
> > > lotsa things you can do to make this faster.
> > >
> > > This is of course assuming your Brand field is indexed and not
> tokenized.
> > >
> > > One side-benefit is that if you do this, sorting on Brand would be fast
> > > because FieldCache would be already loaded.
> > >
> > > Hope this helps
> > >
> > > -John
> > >
> > >
> > > On Thu, Dec 4, 2008 at 3:02 PM, Muralidharan V <muralidharan@gmail.com
> > > >wrote:
> > >
> > > > We are evaluating lucene for a product search engine. One requirement
> > is
> > > > that we be able to suggest the top n brands(the ones with most
> products
> > > in
> > > > the result set) for a given search term to further refine the search
> > > query.
> > > > The brand is stored in a separate field and searches are performed
> > > against
> > > > product description and brand.
> > > >
> > > > One option is to use a custom HitCollector to keep track of the
> brands
> > in
> > > > the result set but that would require reading the brand field for
> each
> > > doc
> > > > that matches the search term. We think this will be an order of
> > magnitude
> > > > slower. Is there anything else that we can do?
> > > >
> > > > Thanks,
> > > > Murali
> > > >
> > >
> >
>

------=_Part_13383_5687554.1228445502055--

From java-user-return-37541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 02:59:54 2008
Return-Path: <java-user-return-37541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59713 invoked from network); 5 Dec 2008 02:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 02:59:54 -0000
Received: (qmail 1322 invoked by uid 500); 5 Dec 2008 03:00:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1287 invoked by uid 500); 5 Dec 2008 03:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1276 invoked by uid 99); 5 Dec 2008 03:00:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 19:00:00 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 02:58:31 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3721733fkq.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 18:59:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=i40Di+g84Pdv5T5N3vhCVcJRJZSnrWmDGv4AIiEOIbg=;
        b=qcFmXR/owLmNiSHUzwwFEy3gTuinhUJKdVC08Exo50kNJWzYW51z01lXxZxdktiBQ6
         di7FfdFCBEZvaQw+jrHev26zrB5fd6hBCiSDZl2rlVOhrUl0are/vj605At2WnocR4OL
         MpGwtgyqiUNC6JBWfGO7CCQsJR4kvgdB9dktE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=d0QLgaSVbCmTnFAfSybzK8ahJ5jBGDZubahM/dchtqyf1QttTCzys/0baQHvNAILWT
         fbspGPN2RvpnWjaGZdtC0lC1TGuwjSuSZv+/Lf5nbAIOHhMHX/hatLmsBJdcJB/l4VIj
         r+31W03SQoSBAZ6a2jcQxHxdeGylb2WqCpbak=
Received: by 10.180.246.2 with SMTP id t2mr5266529bkh.161.1228445958237;
        Thu, 04 Dec 2008 18:59:18 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Thu, 4 Dec 2008 18:59:18 -0800 (PST)
Message-ID: <5d53d5770812041859w61a645e8n1f90d8acec0fdf71@mail.gmail.com>
Date: Thu, 4 Dec 2008 22:59:18 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: TopDocs
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44667_7253357.1228445958202"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44667_7253357.1228445958202
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have this search which returns TopDocs
TopDocs topDocs = searcher.Search(query, bookFilter, maxDocsToFind);


How do I get the document object for the ScoreDoc?

 foreach (ScoreDoc scoreDoc in topDocs.scoreDocs)
{
??????    Document myDoc =   GetTheDocument(scoreDoc.doc); ??????
}

------=_Part_44667_7253357.1228445958202--

From java-user-return-37542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 03:02:57 2008
Return-Path: <java-user-return-37542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61040 invoked from network); 5 Dec 2008 03:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 03:02:57 -0000
Received: (qmail 4769 invoked by uid 500); 5 Dec 2008 03:02:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4743 invoked by uid 500); 5 Dec 2008 03:02:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4728 invoked by uid 99); 5 Dec 2008 03:02:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 19:02:56 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 03:01:27 +0000
Received: by gxk3 with SMTP id 3so261460gxk.5
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 19:02:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=2uO+dIKPYIj2kG9V/tWl943ZmyypLfXX6KsDkSmZVxA=;
        b=j4CHxUXuIzMBGGJUoT39DSs/QgYQfVSyCQIvUYTXPBJ1svfHSEI5wut6yRQCQS3y3b
         iAhrbujS1SETcv4h7aB3jp5ufaG6LiCvJbzK9K0J/G6SzSV8gZZnbvHJSXcb3+Ikb8sN
         h5PYeo60EOvUKG44BQUU2d7NV2SXcIEHy4Puc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Rn49ZhXFU/ZoFc/mM1Vo+RQOs/jGhX4c1jHdsRQQrTcnNAd2/wSHEJzczg4gcs8kur
         EwremabIcJ8C9SKfwchz3xyYVUhlkkpoWaJR/Uognb1XkeCs2arO26amy3RuzSmFSZV3
         YXiTVoPeU//mN4ciy403trfVgabVMGKu8Uc8c=
Received: by 10.90.30.13 with SMTP id d13mr8441506agd.43.1228446132503;
        Thu, 04 Dec 2008 19:02:12 -0800 (PST)
Received: by 10.90.51.19 with HTTP; Thu, 4 Dec 2008 19:02:11 -0800 (PST)
Message-ID: <8837fb770812041902r72166debr382e1fdc04c7eed6@mail.gmail.com>
Date: Thu, 4 Dec 2008 19:02:11 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocs
In-Reply-To: <5d53d5770812041859w61a645e8n1f90d8acec0fdf71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_118902_3391700.1228446131577"
References: <5d53d5770812041859w61a645e8n1f90d8acec0fdf71@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_118902_3391700.1228446131577
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

searcher.doc(scoreDoc.doc);

On Thu, Dec 4, 2008 at 6:59 PM, Ian Vink <ianvink@gmail.com> wrote:

> I have this search which returns TopDocs
> TopDocs topDocs = searcher.Search(query, bookFilter, maxDocsToFind);
>
>
> How do I get the document object for the ScoreDoc?
>
>  foreach (ScoreDoc scoreDoc in topDocs.scoreDocs)
> {
> ??????    Document myDoc =   GetTheDocument(scoreDoc.doc); ??????
> }
>

------=_Part_118902_3391700.1228446131577--

From java-user-return-37543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 03:18:47 2008
Return-Path: <java-user-return-37543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64560 invoked from network); 5 Dec 2008 03:18:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 03:18:46 -0000
Received: (qmail 16429 invoked by uid 500); 5 Dec 2008 03:18:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16386 invoked by uid 500); 5 Dec 2008 03:18:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16375 invoked by uid 99); 5 Dec 2008 03:18:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 19:18:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Dec 2008 03:17:20 +0000
Received: (qmail 53827 invoked by uid 60001); 5 Dec 2008 03:18:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=PDyUVB4wamx9zRg1zzDofMtCsTtAWUNjIulcsF1pXfB2fTVj1FwccBaNwj7aNEuFCPBQJajNA6I6qNcJUgd85Bq/14UjqN4aOm7zNO5eMNtPmmJp5oQ0cbPCnOYatNUHsEr2dN6RDECAK91ecDk6HpRDRodyjkwsLpHFJHubSAk=;
X-YMail-OSG: l8gY8q8VM1mkkA2CRGkWEW1jkGCVteb6oGLDJh0LFnJnkodwO3UUmHzB4yFxPntvwgGFxttS1_uxoGpU4bpsa8TPJFuQwdZ6aPmKDvEJ2lqsgXHvcb5zf0VNdlGpuvH1qctIVX49DMeEZx2uG4C9vGiEZjLmA3s8248tGOk1VAe1OKnmdCEW1.gSSb2wiEvPcNVa6Zobnf7xq_vN7gL0gM6qO05PApY-
Received: from [24.90.13.131] by web50307.mail.re2.yahoo.com via HTTP; Thu, 04 Dec 2008 19:18:06 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <C55D7D32.1F06%tsturge@hi5.com>
Date: Thu, 4 Dec 2008 19:18:06 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Slow queries with lots of hits
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <247646.52163.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Tim (and we should move this to java-dev if it gains traction),=0A=0APerhap=
s you can come up with a mechanism to perform scoring in two passes instead=
 of one:=0A- first pass is cheap and fast=0A- second pass is more expensive=
 and slower=0A=0ACurrently, there is no choice - Lucene does 2).  But perha=
ps you can come up with a generic way to do 1) ?=0A=0AOtis=0A--=0ASematext =
-- http://sematext.com/ -- Lucene - Solr - Nutch=0A=0A=0A=0A----- Original =
Message ----=0A> From: Tim Sturge <tsturge@hi5.com>=0A> To: "java-user@luce=
ne.apache.org" <java-user@lucene.apache.org>=0A> Sent: Thursday, December 4=
, 2008 3:27:30 PM=0A> Subject: Slow queries with lots of hits=0A> =0A> Hi a=
ll,=0A> =0A> I have an interesting problem with my query traffic. Most of t=
he queries run=0A> in a fairly short amount of time (< 100ms) but a few tak=
e over 1000ms. These=0A> queries are predominantly those with a huge number=
 of hits (>1 million hits=0A> in a >100 million document index). The time t=
aken (as far as I can tell) is=0A> for lucene to sit there while it scores =
and sorts all these results.=0A> =0A> However it turns out these queries re=
ally don=B9t have top results. That is,=0A> of the million documents, there=
 are easily 10000 which are decent results=0A> (basically those above some =
threshold score). Frankly, just returning some=0A> consistent (so paging an=
d reload work) but=0A> otherwise arbitrary ranking of these 10000 results w=
ould be more than good=0A> enough.=0A> =0A> It seems to me that a solution =
would be to impose some sort of pseudo-random=0A> filter (e.g. consider onl=
y every n-th document assuming they are uniformly=0A> distributed). I=B9m w=
ondering if anyone else has experience with this sort of=0A> issue and what=
 solutions they have found to work well in practice.=0A> =0A> Thanks,=0A> =
=0A> Tim=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 06:21:26 2008
Return-Path: <java-user-return-37544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36366 invoked from network); 5 Dec 2008 06:21:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 06:21:26 -0000
Received: (qmail 54784 invoked by uid 500); 5 Dec 2008 06:21:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54754 invoked by uid 500); 5 Dec 2008 06:21:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54729 invoked by uid 99); 5 Dec 2008 06:21:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:21:31 -0800
X-ASF-Spam-Status: No, hits=-0.8 required=10.0
	tests=ASF_LIST_OPS,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.208.4.197] (HELO mout.perfora.net) (74.208.4.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 06:20:01 +0000
Received: from [10.0.1.121] ([202.133.78.148])
	by mrelay.perfora.net (node=mrus0) with ESMTP (Nemesis)
	id 0MKp8S-1L8U2x0pvR-0006Qv; Fri, 05 Dec 2008 01:20:18 -0500
Subject: Cannot find gdata-server
From: Anees Haider <anees.haider@tenpearls.com>
To: java-user-help@lucene.apache.org
Cc: java-user@lucene.apache.org
Content-Type: text/plain
Date: Fri, 05 Dec 2008 11:13:53 +0500
Message-Id: <1228457633.2917.10.camel@aneespc>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.3 (2.12.3-8.el5_2.2) 
Content-Transfer-Encoding: 7bit
X-Provags-ID: V01U2FsdGVkX1/vzeKPzbC4+/jbFkvFZuW6nJa+EC2RKRjSXIe
 poaKubKapfZv9e20SX2XcCjdeZ0c2aK7T1NslMUDKXMKLPnjj0
 m3sJAAB26BGY7xVVZ8cCN9YaDT6sXfgVv1xL9EdIQ4=
X-Virus-Checked: Checked by ClamAV on apache.org

I have setup lucene, test run it and go through samples. 
Now I have been working on setting up GData server by consulting Getting
Started guide
"http://wiki.apache.org/lucene-java/GdataServer/GettingStarted". 
I have setup JDK, Ant and Tomcat as required. I have checked out the
working copy of GData from svn (at
http://svn.apache.org/repos/asf/lucene/java/trunk/) as specified in
"Getting Stated Guide". 
But I can not proceed the guide, as I can't find the path from
"gdata-server" folder onwards in checked out copy, I think all the
direct links to gdata-server portion of the source
tree are broken. I tried to find other GData Server mirrors to download
the code and binaries but couldn't succeeded.

Can you direct me to any mirror or link, where I can find GData Server
code and binaries ? I will be grateful to you.

-- 
regards,

Anees Haider
System Programmer
Ten Pearls LLC.

Contact: +92 334 381 0318
anees.haider@tenpearls.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 06:26:37 2008
Return-Path: <java-user-return-37545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38357 invoked from network); 5 Dec 2008 06:26:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 06:26:37 -0000
Received: (qmail 60691 invoked by uid 500); 5 Dec 2008 06:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60668 invoked by uid 500); 5 Dec 2008 06:26:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60655 invoked by uid 99); 5 Dec 2008 06:26:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:26:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 06:25:11 +0000
Received: by ug-out-1314.google.com with SMTP id c2so4133622ugf.23
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 22:25:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=Svt/cXs22L3R8Ywyn302UXUxYyTPvRcH6ieO+zMDXdE=;
        b=XsSibpucpvh2PhUrCYqIbO+H/VViujx1ZAUFl82heRxDPTJiPFt/diCqaEC7oQMaS5
         cBleTVMyvsYRGtK8YButg3ESHJakZasHWfZsQYCupF/iZ17/KkNGA08hQErztBBOiDj+
         Q7AIN+Q2Z/xw0XqlXtsP3zG1HIcozMHeJGvTg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=Cbyk8kuSrbt2Auk5i04zy8KmQUwPgEs1yA/srmQ0ZsvgvLw1JpOUib7XX4KwORLwqM
         CWZXZhUMlff3b1Hrd47bRcHm8hTgkISP7blzNua8l5qxQxjoxIx16Vy8WgRhWrrFbwZQ
         ZRBa1VC5nzxziN3RyIDXN0EruKLi3xHHQ/6zk=
Received: by 10.66.252.18 with SMTP id z18mr311231ugh.30.1228458348182;
        Thu, 04 Dec 2008 22:25:48 -0800 (PST)
Received: from ?192.168.1.135? (c80-217-11-210.bredband.comhem.se [80.217.11.210])
        by mx.google.com with ESMTPS id 39sm253155ugb.43.2008.12.04.22.25.46
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Dec 2008 22:25:47 -0800 (PST)
Message-Id: <8442149F-6F70-43B6-91BC-7AE77F321A42@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <C55D7D32.1F06%tsturge@hi5.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Slow queries with lots of hits
Date: Fri, 5 Dec 2008 07:25:45 +0100
References: <C55D7D32.1F06%tsturge@hi5.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Tim,

is it possible that the slow queries contains terms that are very =20
common in your index? If so you could replace those clauses with a =20
filter. This would impact the score as filters does nothing with that, =20=

but if your query contains enough other clauses that should not be a =20
problem.

That is how I've in several applications managed to solve the problem =20=

you describe.


      karl

4 dec 2008 kl. 21.27 skrev Tim Sturge:

> Hi all,
>
> I have an interesting problem with my query traffic. Most of the =20
> queries run
> in a fairly short amount of time (< 100ms) but a few take over =20
> 1000ms. These
> queries are predominantly those with a huge number of hits (>1 =20
> million hits
> in a >100 million document index). The time taken (as far as I can =20
> tell) is
> for lucene to sit there while it scores and sorts all these results.
>
> However it turns out these queries really don=92t have top results. =20=

> That is,
> of the million documents, there are easily 10000 which are decent =20
> results
> (basically those above some threshold score). Frankly, just =20
> returning some
> consistent (so paging and reload work) but
> otherwise arbitrary ranking of these 10000 results would be more =20
> than good
> enough.
>
> It seems to me that a solution would be to impose some sort of =20
> pseudo-random
> filter (e.g. consider only every n-th document assuming they are =20
> uniformly
> distributed). I=92m wondering if anyone else has experience with this =20=

> sort of
> issue and what solutions they have found to work well in practice.
>
> Thanks,
>
> Tim


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 06:31:36 2008
Return-Path: <java-user-return-37546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42020 invoked from network); 5 Dec 2008 06:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 06:31:35 -0000
Received: (qmail 69157 invoked by uid 500); 5 Dec 2008 06:31:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69114 invoked by uid 500); 5 Dec 2008 06:31:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69093 invoked by uid 99); 5 Dec 2008 06:31:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 22:31:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 06:30:04 +0000
Received: by nf-out-0910.google.com with SMTP id g16so2539050nfd.15
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 22:30:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=7t4oCsAPQXs8XwelIU116K7/Zz6JHul7GlVkHeD4QyY=;
        b=eZDV+oCr4FrpEs/TVZmOibVSSuGx4J616NGEdRGCvR1FJQEFgkbIoi6OkjGoFhNVIB
         pGdiRlTsgPwVh7lDLzbL8X/492SwxLyUksE5bgL9UdfVpJhuTzgYcJnL/2P7z+f9VK1i
         ZmDf+e9anObpeEb1n0TByVUrUpTrfyr6p8r2o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=oRJt3/BiQD1Mb51IHtecHkB6GaNrbseC170oWagmMrdN4iPeR1BHDYPJP31ffaMhta
         txOZhxCOBD3XrN4BE+6IgnuD+TJcVaxHF7wINDqLL0gLLM+r89MpWz495b2wklILiJc4
         SnsxI1G+71t/b+f1nAB4ZNoVU1lmfx5uk/uTA=
Received: by 10.210.29.11 with SMTP id c11mr4590646ebc.23.1228458648056;
        Thu, 04 Dec 2008 22:30:48 -0800 (PST)
Received: from ?192.168.1.135? (c80-217-11-210.bredband.comhem.se [80.217.11.210])
        by mx.google.com with ESMTPS id b33sm9157766ika.11.2008.12.04.22.30.46
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 04 Dec 2008 22:30:47 -0800 (PST)
Message-Id: <5A31E342-9378-4D09-B7EA-6C4DD49AB09D@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1228457633.2917.10.camel@aneespc>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Cannot find gdata-server
Date: Fri, 5 Dec 2008 07:30:45 +0100
References: <1228457633.2917.10.camel@aneespc>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Anees,

the Gdata server was phased out by 2.3. You can still get if from the  
2.2 tag in the SVN:

http://svn.apache.org/repos/asf/lucene/java/tags/lucene_2_2_0/

    karl

5 dec 2008 kl. 07.13 skrev Anees Haider:

> I have setup lucene, test run it and go through samples.
> Now I have been working on setting up GData server by consulting  
> Getting
> Started guide
> "http://wiki.apache.org/lucene-java/GdataServer/GettingStarted".
> I have setup JDK, Ant and Tomcat as required. I have checked out the
> working copy of GData from svn (at
> http://svn.apache.org/repos/asf/lucene/java/trunk/) as specified in
> "Getting Stated Guide".
> But I can not proceed the guide, as I can't find the path from
> "gdata-server" folder onwards in checked out copy, I think all the
> direct links to gdata-server portion of the source
> tree are broken. I tried to find other GData Server mirrors to  
> download
> the code and binaries but couldn't succeeded.
>
> Can you direct me to any mirror or link, where I can find GData Server
> code and binaries ? I will be grateful to you.
>
> -- 
> regards,
>
> Anees Haider
> System Programmer
> Ten Pearls LLC.
>
> Contact: +92 334 381 0318
> anees.haider@tenpearls.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 07:13:28 2008
Return-Path: <java-user-return-37547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61482 invoked from network); 5 Dec 2008 07:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 07:13:28 -0000
Received: (qmail 8696 invoked by uid 500); 5 Dec 2008 07:13:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8658 invoked by uid 500); 5 Dec 2008 07:13:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8647 invoked by uid 99); 5 Dec 2008 07:13:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 23:13:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tshivaraj@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 07:12:05 +0000
Received: by nf-out-0910.google.com with SMTP id g16so2544971nfd.15
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 23:12:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=MBamIDlVzWyU72xmI5iAEm/T1+/2mH/oOvWkOdTSSIU=;
        b=t66qgTizfewlLaUxoDZqAweF7ddtk5sVPAJ4QLSfNYkCCB8BremQB2hH3LbSzU/RxE
         IqIBSIGvdqKGn68v+3jeCK3FVEdFmjG1f7EkLu6yY0VPtGt0+5llNCfEbN+cOAgF4I8V
         OeJVUboKtMS+xTTTwt6aUhSS2JMUWX25fCyIE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=CC01npCjMTQ/62nxeIzpO9t6Cx0aqoHGFdF2juvdx50W2W6VWL84oN0Sm2C0EJbmO7
         jj9IfeTvi++BBMezt+SZtH9XSn2X99mG8X8IGGl/sDc+XU46IWeeghIUvDLxf13MloBI
         eHmprWuM2MUhDnfQPeVgj6bC5FAMGjvqkCF5o=
Received: by 10.210.45.17 with SMTP id s17mr17080978ebs.65.1228461172023;
        Thu, 04 Dec 2008 23:12:52 -0800 (PST)
Received: by 10.210.82.10 with HTTP; Thu, 4 Dec 2008 23:12:51 -0800 (PST)
Message-ID: <4950afc10812042312i1ab36d1bi9d059d991e0fb47b@mail.gmail.com>
Date: Fri, 5 Dec 2008 02:12:51 -0500
From: "Shivaraj Tenginakai" <tshivaraj@gmail.com>
To: java-user@lucene.apache.org
Subject: Sorting documents without a query
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38648_17115293.1228461172017"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38648_17115293.1228461172017
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have a usecase in which I have no search query, but still need to sort
documents. For example, items need to be sorted by price, though the user
has not yet selected any search criteria.

What would be the best way to achieve this?

Thanks and Regards,

Shivaraj

------=_Part_38648_17115293.1228461172017--

From java-user-return-37548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 07:17:04 2008
Return-Path: <java-user-return-37548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62591 invoked from network); 5 Dec 2008 07:17:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 07:17:03 -0000
Received: (qmail 11929 invoked by uid 500); 5 Dec 2008 07:17:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11487 invoked by uid 500); 5 Dec 2008 07:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11476 invoked by uid 99); 5 Dec 2008 07:17:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 04 Dec 2008 23:17:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tshivaraj@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 07:15:40 +0000
Received: by nf-out-0910.google.com with SMTP id g16so2545516nfd.15
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 23:16:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=uHZ+PNFCt6lQx0718itViP5ROlt8ycfscijQjr1zz34=;
        b=aUJrElDef42sgbsV8jqRai5H5K7ZYXA8SpCRAnHcBzu1ahJkzws+K0BVLBXmWmODRI
         eT8EHDXqgLQkIISWl2tKDBff9QQ2xCk8g7rjsbHI4aLNPRBMKTQcMoMXJ/NLhkwaqVwL
         LRC4plOE0W89XeYrOZ7OklQhXEhAzS5AZRM9Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=M0qOyYiiCXbfC6RXawDTfzplGLeuEYAY16f3W8GJ34PTCEXpSgs5oiknPRabKok+iH
         pwqabF6WrrRg/hbrHj4X/SSMqDt5aVSc4aflHVGUYwpaKRhJejFWCfMZYriAFSQ+7ECZ
         ndbb8oxqh7y0meY4OQELKG9TrCtICoFgKLCOU=
Received: by 10.210.61.19 with SMTP id j19mr17095884eba.41.1228461376765;
        Thu, 04 Dec 2008 23:16:16 -0800 (PST)
Received: by 10.210.82.10 with HTTP; Thu, 4 Dec 2008 23:16:16 -0800 (PST)
Message-ID: <4950afc10812042316h4e59a900w4ddfdb75135e8353@mail.gmail.com>
Date: Fri, 5 Dec 2008 02:16:16 -0500
From: "Shivaraj Tenginakai" <tshivaraj@gmail.com>
To: java-user@lucene.apache.org
Subject: Sorting documents without a query
In-Reply-To: <4950afc10812042312i1ab36d1bi9d059d991e0fb47b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38654_159566.1228461376757"
References: <4950afc10812042312i1ab36d1bi9d059d991e0fb47b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38654_159566.1228461376757
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have a usecase in which I have no search query, but still need to sort
documents. For example, items need to be sorted by price, though the user
has not yet selected any search criteria.

What would be the best way to achieve this?

Thanks and Regards,

Shivaraj

------=_Part_38654_159566.1228461376757--

From java-user-return-37549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 08:00:19 2008
Return-Path: <java-user-return-37549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82223 invoked from network); 5 Dec 2008 08:00:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 08:00:19 -0000
Received: (qmail 46478 invoked by uid 500); 5 Dec 2008 08:00:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46439 invoked by uid 500); 5 Dec 2008 08:00:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46428 invoked by uid 99); 5 Dec 2008 08:00:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 00:00:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 07:58:54 +0000
Received: by wf-out-1314.google.com with SMTP id 28so4450697wfc.20
        for <java-user@lucene.apache.org>; Thu, 04 Dec 2008 23:59:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=yIMTUYvdh0QSrjywAO7ozkv6qtR/M0vv946E6XcXLTQ=;
        b=bKfOng8sOA5JhZcvHuoSLTvqawkQQRJ8Fe+SztqlebfZg+Iv7KeFt1SOsD19VtKuze
         nDSqTjxmcoiMqLejwcz9nrhjqEzbBj5CQkdHddSsE5P4WS8WKdWDfxZ7wt7tRrh6koyj
         CKfiBYYVZ6yyW/KwSwLUFWI3xAgBo4+/u/nUk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=E7ofPzl1coktoaPrv+lEcGVzfTGGwL0WYOVXsqBWd0AUHIJ1xiQm9dg6EMFkO6NzNY
         UlHISjmSAW4Lsyx88HmJI+RSYOjPVPSD4j7avm5q2Dv7abQ1QYjTRMPOF88fdYwWueft
         tMoSkr93q+fE4nqN8dzj24wuekhE2PbVUxWMM=
Received: by 10.142.134.20 with SMTP id h20mr6292153wfd.178.1228463982181;
        Thu, 04 Dec 2008 23:59:42 -0800 (PST)
Received: by 10.143.40.11 with HTTP; Thu, 4 Dec 2008 23:59:42 -0800 (PST)
Message-ID: <5e76f3840812042359o2c92c55as6075284a27c99bae@mail.gmail.com>
Date: Fri, 5 Dec 2008 02:59:42 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NIOFSDirectory
In-Reply-To: <8837fb770812041449g388dc603p1df9840f217223be@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8837fb770812041311s120769edta61416d86d158463@mail.gmail.com>
	 <c68e39170812041326m6d4e29b6ud4fd3154f1f7e207@mail.gmail.com>
	 <5e76f3840812041332y6420786dp80463d3733bf69ca@mail.gmail.com>
	 <c68e39170812041400q36bb0545udf6fe0a461b0c60b@mail.gmail.com>
	 <8837fb770812041408x48e933bck2e5257dccd8d65df@mail.gmail.com>
	 <c68e39170812041416o1b643df0qb086d122ae2184a3@mail.gmail.com>
	 <8837fb770812041426l6fb871fcq8a1a8cc927875e3f@mail.gmail.com>
	 <5e76f3840812041444kc22c7dct94f4eed96d669b41@mail.gmail.com>
	 <8837fb770812041449g388dc603p1df9840f217223be@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Understood. Thanks! :-)

-glen

2008/12/4 John Wang <john.wang@gmail.com>:
> NIOFSDirectory.getDirectory simple calls the static method on the parent
> class: FSDirectory.getDirectory.
> Which returns an instance of FSDirectory.
>
> IMO: NIOFSDirectory solves concurrent read problems, generally you don't
> want concurrent writes.
>
> -John
>
> On Thu, Dec 4, 2008 at 2:44 PM, Glen Newton <glen.newton@gmail.com> wrote:
>
>> Am I missing something here?
>>
>> Why not use:
>>  IndexWriter writer = new IndexWriter(NIOFSDirectory.getDirectory(new
>> File(filename), analyzer, true);
>>
>> Another question: is NIOFSDirectory to be used with IndexWriter? If
>> no, could someone explain?
>>
>> thanks,
>> -glen
>>
>>
>> 2008/12/4 John Wang <john.wang@gmail.com>:
>> > Thanks!
>> > -John
>> >
>> > On Thu, Dec 4, 2008 at 2:16 PM, Yonik Seeley <yonik@apache.org> wrote:
>> >
>> >> Details in the bug:
>> >> https://issues.apache.org/jira/browse/LUCENE-1451
>> >>
>> >> Use this constructor to create an instance of NIODirectory:
>> >>
>> >>  /** Create a new NIOFSDirectory for the named location.
>> >>   *
>> >>   * @param path the path of the directory
>> >>   * @param lockFactory the lock factory to use, or null for the default.
>> >>   * @throws IOException
>> >>   */
>> >>  public NIOFSDirectory(File path, LockFactory lockFactory) throws
>> >> IOException {
>> >>    super(path, lockFactory);
>> >>  }
>> >>
>> >> -Yonik
>> >>
>> >>
>> >> On Thu, Dec 4, 2008 at 5:08 PM, John Wang <john.wang@gmail.com> wrote:
>> >> > That does not help. The File/path is not stored with the instance. It
>> is
>> >> in
>> >> > a map FSDirectory keeps statically. Should subclasses of FSDirectory
>> be
>> >> > modifying the map?
>> >> > This is not a question about how to subclass or customize FSDirectory.
>> >> This
>> >> > is more on how to use NIOFSDirectory class. I am hoping for a simply
>> >> answer,
>> >> > is what I am doing (setting the class name statically on system
>> property)
>> >> > the right way?
>> >> >
>> >> > -John
>> >> >
>> >> > On Thu, Dec 4, 2008 at 2:00 PM, Yonik Seeley <yonik@apache.org>
>> wrote:
>> >> >
>> >> >> On Thu, Dec 4, 2008 at 4:32 PM, Glen Newton <glen.newton@gmail.com>
>> >> wrote:
>> >> >> > Sorry....what version are we talking about?  :-)
>> >> >>
>> >> >> The current development version of Lucene allows you to directly
>> >> >> instantiate FSDirectory subclasses.
>> >> >>
>> >> >> -Yonik
>> >> >>
>> >> >>
>> >> >> > thanks,
>> >> >> >
>> >> >> > Glen
>> >> >> >
>> >> >> > 2008/12/4 Yonik Seeley <yonik@apache.org>:
>> >> >> >> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com>
>> >> wrote:
>> >> >> >>> Hi guys:
>> >> >> >>>    We did some profiling and benchmarking:
>> >> >> >>>
>> >> >> >>>    The thread contention on FSDIrectory is gone, and for the set
>> of
>> >> >> queries
>> >> >> >>> we are running, performance improved by a factor of 5 (to be
>> >> >> conservative).
>> >> >> >>>
>> >> >> >>>    Great job, this is awesome, a simple change and made a huge
>> >> >> difference.
>> >> >> >>>
>> >> >> >>>    To get NIOFSDirectory installed, I didn't find any
>> documentation
>> >> >> >>> (doesn't mean there aren't any), after reading the code, I
>> resorted
>> >> to:
>> >> >> >>>
>> >> >> >>>  static
>> >> >> >>>  {
>> >> >> >>>
>> >> >> >>>
>> >> >>
>> >>
>> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
>> >> >> >>>  }
>> >> >> >>>   I am sure this is not the intended usage, as this is really
>> ugly.
>> >> >> What is
>> >> >> >>> the suggested usage?
>> >> >> >>
>> >> >> >> Instantiate NIOFSDirectory directly and pass it to the
>> >> >> IndexReader.open()
>> >> >> >>
>> >> >> >> -Yonik
>> >> >> >>
>> >> >> >>
>> ---------------------------------------------------------------------
>> >> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >> >>
>> >> >> >>
>> >> >> >
>> >> >> >
>> >> >> >
>> >> >> > --
>> >> >> >
>> >> >> > -
>> >> >> >
>> >> >> >
>> ---------------------------------------------------------------------
>> >> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >> >
>> >> >> >
>> >> >>
>> >> >> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>>
>>
>> --
>>
>> -
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 09:36:01 2008
Return-Path: <java-user-return-37550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34482 invoked from network); 5 Dec 2008 09:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 09:36:01 -0000
Received: (qmail 69671 invoked by uid 500); 5 Dec 2008 09:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69636 invoked by uid 500); 5 Dec 2008 09:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69625 invoked by uid 99); 5 Dec 2008 09:36:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 01:36:06 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 09:34:37 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1861564yxj.5
        for <java-user@lucene.apache.org>; Fri, 05 Dec 2008 01:35:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=wOqU2IYx9soSUObQmjp38C2q4I1khesc3quEQwPSCG4=;
        b=OTQ3M+TibEhqTNa649rgBn7XP8FiExPg4XE5zB1nos9D6GmzN2fuKtGmhmvVopC3EO
         HAR69SEO8LyIdyJ9WLkMzdU4XmiGh6voU13ZmWDo96LOv9KSV/MiIQfMzY3aZp23jWAN
         esPdv/bVxcSxo+qHlZVfSkt+OGiZQbNH6R/Hs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ntGbGtLoaR/l5+88ownI+L+9cEKgqKQvy6SVzaU0JFhQNwXTshDkoRPm8j3xfgDs5W
         fymWPaMulIHkYR3FYN59LhyhG9ELT8NnBNFn6Bqnvp1mAEMltzyn60nbfnK0bjT1up0A
         Wi6E0n4nLEWpoam+LnWigRGlve7gq7VdRJkCU=
Received: by 10.90.30.2 with SMTP id d2mr8576526agd.58.1228469724631;
        Fri, 05 Dec 2008 01:35:24 -0800 (PST)
Received: by 10.90.51.19 with HTTP; Fri, 5 Dec 2008 01:35:24 -0800 (PST)
Message-ID: <8837fb770812050135l1faf55b8jbe2354cdd89511d3@mail.gmail.com>
Date: Fri, 5 Dec 2008 01:35:24 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting documents without a query
In-Reply-To: <4950afc10812042312i1ab36d1bi9d059d991e0fb47b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_122460_30326527.1228469724633"
References: <4950afc10812042312i1ab36d1bi9d059d991e0fb47b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_122460_30326527.1228469724633
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The obvious way is to use use MatchAllDocsQuery with Sort parameters on the
searcher, e.g.

searcher.search(new MatchAllDocsQuery(),sort);

If you only care about 1 sort spec (e.g. no secondary sort to break ties) it
may be faster just traversing the term table since that is already sorted.

-John

On Thu, Dec 4, 2008 at 11:12 PM, Shivaraj Tenginakai <tshivaraj@gmail.com>wrote:

> I have a usecase in which I have no search query, but still need to sort
> documents. For example, items need to be sorted by price, though the user
> has not yet selected any search criteria.
>
> What would be the best way to achieve this?
>
> Thanks and Regards,
>
> Shivaraj
>

------=_Part_122460_30326527.1228469724633--

From java-user-return-37551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 10:12:07 2008
Return-Path: <java-user-return-37551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55281 invoked from network); 5 Dec 2008 10:12:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 10:12:07 -0000
Received: (qmail 17288 invoked by uid 500); 5 Dec 2008 10:12:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16882 invoked by uid 500); 5 Dec 2008 10:12:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16871 invoked by uid 99); 5 Dec 2008 10:12:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 02:12:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 10:10:42 +0000
Received: from webmail.xs4all.nl (dovemail3.xs4all.nl [194.109.26.5])
	by smtp-vbr9.xs4all.nl (8.13.8/8.13.8) with ESMTP id mB5ABS2t017386
	for <java-user@lucene.apache.org>; Fri, 5 Dec 2008 11:11:29 +0100 (CET)
	(envelope-from wheijke@xs4all.nl)
Received: from 82.210.249.81
        (SquirrelMail authenticated user wheijke)
        by webmail.xs4all.nl with HTTP;
        Fri, 5 Dec 2008 11:11:28 +0100 (CET)
Message-ID: <11893.82.210.249.81.1228471888.squirrel@webmail.xs4all.nl>
Date: Fri, 5 Dec 2008 11:11:28 +0100 (CET)
Subject: Re: NIOFSDirectory
From: "Wouter Heijke" <wheijke@xs4all.nl>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.11
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

This is 2.9 code.
For 2.4 you're stuck with the system property.

Wouter

> Thanks!
> -John
>
> On Thu, Dec 4, 2008 at 2:16 PM, Yonik Seeley <yonik@apache.org> wrote:
>
>> Details in the bug:
>> https://issues.apache.org/jira/browse/LUCENE-1451
>>
>> Use this constructor to create an instance of NIODirectory:
>>
>>  /** Create a new NIOFSDirectory for the named location.
>>   *
>>   * @param path the path of the directory
>>   * @param lockFactory the lock factory to use, or null for the default.
>>   * @throws IOException
>>   */
>>  public NIOFSDirectory(File path, LockFactory lockFactory) throws
>> IOException {
>>    super(path, lockFactory);
>>  }
>>
>> -Yonik
>>
>>
>> On Thu, Dec 4, 2008 at 5:08 PM, John Wang <john.wang@gmail.com> wrote:
>> > That does not help. The File/path is not stored with the instance. It
>> is
>> in
>> > a map FSDirectory keeps statically. Should subclasses of FSDirectory
>> be
>> > modifying the map?
>> > This is not a question about how to subclass or customize FSDirectory.
>> This
>> > is more on how to use NIOFSDirectory class. I am hoping for a simply
>> answer,
>> > is what I am doing (setting the class name statically on system
>> property)
>> > the right way?
>> >
>> > -John
>> >
>> > On Thu, Dec 4, 2008 at 2:00 PM, Yonik Seeley <yonik@apache.org> wrote:
>> >
>> >> On Thu, Dec 4, 2008 at 4:32 PM, Glen Newton <glen.newton@gmail.com>
>> wrote:
>> >> > Sorry....what version are we talking about?  :-)
>> >>
>> >> The current development version of Lucene allows you to directly
>> >> instantiate FSDirectory subclasses.
>> >>
>> >> -Yonik
>> >>
>> >>
>> >> > thanks,
>> >> >
>> >> > Glen
>> >> >
>> >> > 2008/12/4 Yonik Seeley <yonik@apache.org>:
>> >> >> On Thu, Dec 4, 2008 at 4:11 PM, John Wang <john.wang@gmail.com>
>> wrote:
>> >> >>> Hi guys:
>> >> >>>    We did some profiling and benchmarking:
>> >> >>>
>> >> >>>    The thread contention on FSDIrectory is gone, and for the set
>> of
>> >> queries
>> >> >>> we are running, performance improved by a factor of 5 (to be
>> >> conservative).
>> >> >>>
>> >> >>>    Great job, this is awesome, a simple change and made a huge
>> >> difference.
>> >> >>>
>> >> >>>    To get NIOFSDirectory installed, I didn't find any
>> documentation
>> >> >>> (doesn't mean there aren't any), after reading the code, I
>> resorted
>> to:
>> >> >>>
>> >> >>>  static
>> >> >>>  {
>> >> >>>
>> >> >>>
>> >>
>> System.setProperty("org.apache.lucene.FSDirectory.class",NIOFSDirectory.class.getName());
>> >> >>>  }
>> >> >>>   I am sure this is not the intended usage, as this is really
>> ugly.
>> >> What is
>> >> >>> the suggested usage?
>> >> >>
>> >> >> Instantiate NIOFSDirectory directly and pass it to the
>> >> IndexReader.open()
>> >> >>
>> >> >> -Yonik
>> >> >>
>> >> >> ---------------------------------------------------------------------
>> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >
>> >> >
>> >> >
>> >> > --
>> >> >
>> >> > -
>> >> >
>> >> > ---------------------------------------------------------------------
>> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 12:29:07 2008
Return-Path: <java-user-return-37552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1806 invoked from network); 5 Dec 2008 12:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 12:29:06 -0000
Received: (qmail 2067 invoked by uid 500); 5 Dec 2008 12:29:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2020 invoked by uid 500); 5 Dec 2008 12:29:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2009 invoked by uid 99); 5 Dec 2008 12:29:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 04:29:11 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 12:27:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L8ZnG-0002G2-PV
	for java-user@lucene.apache.org; Fri, 05 Dec 2008 04:28:27 -0800
Message-ID: <20852797.post@talk.nabble.com>
Date: Fri, 5 Dec 2008 04:28:26 -0800 (PST)
From: Zender00 <danielpenning@gmx.net>
To: java-user@lucene.apache.org
Subject: Save big arrays in lucene document
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: danielpenning@gmx.net
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I have to store 2 arrays (1 int-Array, 1 String-Array (approx. length per
element: 30 chars)) with a count of 100-10.000 elements in a lucene
document.

At this time, I implode each array (split with an ';') and save the value as
a string.
This works perfectly for small array-sizes (e.g. less than 500). But for an
array with some thousand elements the adding of this document took a long
time (> 10s)
I dont need to perform a search on these two fields, I only want to store
them within the document.
I create the fields with parameters Index.NO and Store.YES

How can I improve the speed?

Kind regards, Daniel
-- 
View this message in context: http://www.nabble.com/Save-big-arrays-in-lucene-document-tp20852797p20852797.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 12:46:52 2008
Return-Path: <java-user-return-37553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8828 invoked from network); 5 Dec 2008 12:46:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 12:46:52 -0000
Received: (qmail 19325 invoked by uid 500); 5 Dec 2008 12:46:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19292 invoked by uid 500); 5 Dec 2008 12:46:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19281 invoked by uid 99); 5 Dec 2008 12:46:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 04:46:57 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,MSGID_MULTIPLE_AT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of diego.cassinera@mercadolibre.com designates 216.35.213.234 as permitted sender)
Received: from [216.35.213.234] (HELO ironport-inbound02.mercadolibre.com) (216.35.213.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 12:45:27 +0000
Received: from unknown (HELO vplssl2.mercadolibre.com) ([172.16.0.128])
  by ironport-inbound02.mercadolibre.com with ESMTP; 05 Dec 2008 07:45:14 -0500
X-IronPort-AV: i="4.33,721,1220245200"; 
   d="scan'208,217"; a="67541704:sNHT75821788"
Received: from dcassinera (unverified [190.220.33.50]) 
	by vplssl2.mercadolibre.com (SurgeMail 3.9e) with ESMTP id 5818658-1864578 
	for <java-user@lucene.apache.org>; Fri, 05 Dec 2008 07:45:14 -0500 EDT
From: "Diego Cassinera" <diego.cassinera@mercadolibre.com>
To: <java-user@lucene.apache.org>
Subject: Re Lucene analyzers
Date: Fri, 5 Dec 2008 10:46:21 -0300
Message-ID: <005a01c956df$dc505e00$94f11a00$@cassinera@mercadolibre.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_005B_01C956C6.B7032600"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AclW39sTs6mZ7XADSVWUJgss8bBW/w==
Content-Language: es-ar
X-Originating-IP: 190.220.33.50
X-Authenticated-User: diego.cassinera@mercadolibre.com 
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_005B_01C956C6.B7032600
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

In the analyzer the function 

public final TokenStream tokenStream(String fieldName, Reader reader)

Usually does  a bunch of new filters, from what I seen in most of these
filters none of the use class member variables.  Has anybody tried making
them static to avoid the creation of new objects.

 

Thanks 

Diego

 


------=_NextPart_000_005B_01C956C6.B7032600--

From java-user-return-37554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 13:37:50 2008
Return-Path: <java-user-return-37554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33480 invoked from network); 5 Dec 2008 13:37:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 13:37:50 -0000
Received: (qmail 75478 invoked by uid 500); 5 Dec 2008 13:37:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75437 invoked by uid 500); 5 Dec 2008 13:37:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75426 invoked by uid 99); 5 Dec 2008 13:37:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 05:37:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.111.239.161] (HELO caesar.sql-gmbh.de) (212.111.239.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 13:36:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by caesar.sql-gmbh.de (Postfix) with ESMTP id 2C3B78E800D
	for <java-user@lucene.apache.org>; Fri,  5 Dec 2008 14:36:43 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at sql-gmbh.de
Received: from caesar.sql-gmbh.de ([127.0.0.1])
	by localhost (caesar.sql-gmbh.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3nBpHEgjXUZn for <java-user@lucene.apache.org>;
	Fri,  5 Dec 2008 14:36:38 +0100 (CET)
Received: from [127.0.0.1] (sql100.sql [192.168.20.100])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by caesar.sql-gmbh.de (Postfix) with ESMTP id 306A38E8002
	for <java-user@lucene.apache.org>; Fri,  5 Dec 2008 14:36:37 +0100 (CET)
Message-ID: <49392FB9.40406@sql-gmbh.de>
Date: Fri, 05 Dec 2008 14:42:17 +0100
From: Gunnar Wurl <gunnar.wurl@sql-gmbh.de>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Deleting documents from index
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am trying to delete documents from an index. When using the 
IndexReader#deleteDocuments(Term) method this works fine. But when using 
the IndexWriter#deleteDocuments(Term) it is not working, although I am 
using the same term. When using the IndexWriter I tried to commit and 
optimize but a reader opened on the index afterwards still finds the 
document. Is there something special when using the 
IndexWriter#deleteDocuments(Term) method what I have to care for?

Thanks in advance

Gunnar

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 13:38:02 2008
Return-Path: <java-user-return-37555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33922 invoked from network); 5 Dec 2008 13:38:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 13:38:02 -0000
Received: (qmail 77309 invoked by uid 500); 5 Dec 2008 13:38:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77283 invoked by uid 500); 5 Dec 2008 13:38:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77272 invoked by uid 99); 5 Dec 2008 13:38:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 05:38:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 13:36:35 +0000
Received: by ug-out-1314.google.com with SMTP id c2so4242779ugf.23
        for <java-user@lucene.apache.org>; Fri, 05 Dec 2008 05:37:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5zA4dUdh5Lv6KmHPRm+piAPeIk2rQEysZ7pGGBKYE3E=;
        b=AhYL2aIvQY4S1/z/JL5iIDS2jRo+tsz6XmAGsFpi2pVLldf3mqypoQSQM+y9t1PYaw
         ZM0VWARzs49k3fLLyXX3eW+/LSkXbUqnIwehabwU+J4btihkm/THscWTFkayrM6J8Iv6
         0vBrCWqXzmh6lbEbkxyl/iM51zfFnBKpYsnEI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=WUNr2AucA1456pLXkE/DU0UAL+p7Ja9A4odlI5YpbB3OgndZmfZnGJ7oJOJdMpA7nh
         NaC5mSgnlrkuPVho1cb0Snlnwv+krbnNKOqmXrvKHV3gbXwgizBBWmkp8OH/7Q4m8SRU
         R63RQdeg7D3VZTdmOYxK+toAVDofg961buYkI=
Received: by 10.86.59.18 with SMTP id h18mr615702fga.75.1228484240434;
        Fri, 05 Dec 2008 05:37:20 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Fri, 5 Dec 2008 05:37:20 -0800 (PST)
Message-ID: <359a92830812050537s75a4c4fh85f93b87aad23ad0@mail.gmail.com>
Date: Fri, 5 Dec 2008 08:37:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design guidance - search strategy
In-Reply-To: <5d53d5770812041848q568dbfbao78780a74a143cffb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43118_18114530.1228484240431"
References: <5d53d5770812040459y72e3braa6de15cdc68518f@mail.gmail.com>
	 <359a92830812040536t55e11e63s47bc6df9d13eb962@mail.gmail.com>
	 <5d53d5770812041320v6af64e4v30eb3936e3bd6c2e@mail.gmail.com>
	 <359a92830812041412o2c6ed322mbef29210c54f53ee@mail.gmail.com>
	 <5d53d5770812041802w26b1f1fbo1a00146471bd717d@mail.gmail.com>
	 <5d53d5770812041848q568dbfbao78780a74a143cffb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43118_18114530.1228484240431
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Glad it's working, but it's not my book, that's Erik Hatcher not
Erick Erickson.....

Erik:
Do I get a commission?

On Thu, Dec 4, 2008 at 9:48 PM, Ian Vink <ianvink@gmail.com> wrote:

> It works.
> For those using Lucene.NET here is an example of a Filter that takes a list
> of IDs for books:
>
>
>    public class BookFilter: Filter
>    {
>        private readonly List<int> bookIDs;
>
>        public BookFilter(List<int> bookIDsToSearch)
>        {
>            bookIDs = bookIDsToSearch;
>        }
>
>        public override BitArray Bits(IndexReader reader)
>        {
>            BitArray bits = new BitArray(50000);
>            int[] docs = new int[1];
>            int[] freqs = new int[1];
>
>            foreach (int bookID in bookIDs)
>            {
>                TermDocs termDocs = reader.TermDocs(new Term("id",
> bookID.ToString()));
>                int count = termDocs.Read(docs, freqs);
>                if(count==1)
>                    bits.Set(docs[0],true);
>            }
>            return bits;
>        }
>    }
>

------=_Part_43118_18114530.1228484240431--

From java-user-return-37556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 13:50:40 2008
Return-Path: <java-user-return-37556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41774 invoked from network); 5 Dec 2008 13:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 13:50:39 -0000
Received: (qmail 3653 invoked by uid 500); 5 Dec 2008 13:50:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3628 invoked by uid 500); 5 Dec 2008 13:50:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3617 invoked by uid 99); 5 Dec 2008 13:50:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 05:50:45 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 13:49:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L8b4D-0005Qu-EG
	for java-user@lucene.apache.org; Fri, 05 Dec 2008 05:50:01 -0800
Message-ID: <20853980.post@talk.nabble.com>
Date: Fri, 5 Dec 2008 05:50:01 -0800 (PST)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Save big arrays in lucene document
In-Reply-To: <20852797.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <20852797.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Zender,

please take a look to
http://www.nabble.com/Lucene-vs.-Database-td19755932.html#a19757274

you shouldn't use a lucene fields to store such huge data. At least not a
lucene field in your main search index.
You can use lucene as repository, but I would advice you to use a extra
index for that.
If you want to store arrays you can use store = Store.COMPRESS in
constructor
public Field(String name, byte[] value, int offset, int length, Store store) 
with the serialized array as "value".

Best regards
  Karsten


Zender00 wrote:
> 
> Hello,
> 
> I have to store 2 arrays (1 int-Array, 1 String-Array (approx. length per
> element: 30 chars)) with a count of 100-10.000 elements in a lucene
> document.
> 

-- 
View this message in context: http://www.nabble.com/Save-big-arrays-in-lucene-document-tp20852797p20853980.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 13:58:00 2008
Return-Path: <java-user-return-37557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46252 invoked from network); 5 Dec 2008 13:58:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 13:58:00 -0000
Received: (qmail 20874 invoked by uid 500); 5 Dec 2008 13:58:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20844 invoked by uid 500); 5 Dec 2008 13:58:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20833 invoked by uid 99); 5 Dec 2008 13:58:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 05:58:05 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 13:56:37 +0000
Received: by nf-out-0910.google.com with SMTP id g16so3976nfd.15
        for <java-user@lucene.apache.org>; Fri, 05 Dec 2008 05:57:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=T5OoSW7dqWrtIwsP3iiAFt455YgFReVPSrOP1M95b1g=;
        b=kEbPi1JWd68iUll8JvCkihWiVZwGvvE4SRCayDNxiEVmVUR57gJJCGCUzEGBT9q/eW
         u9PBIxoNgKi2jbUbYD/GZE0aNndlIh4x7BMPg9kSCeABLhuEJlF2t6DTWb4FrDnRPUv9
         cDvuewacxUc95CPWsoQ1yi/B7jV1qQCsoOvNE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pAkN6G0fhZHP4o12Lsa+Yq03oEaeQZmXuM8O9R0cCSe7D6plrm972Abc8nStMWs0/l
         baeFFwfSrXtPLEpX9kCk+f2b7O+1iVqb7yL5NuO4v2svU48bG0Ez6h4o5pGQ2ecn5ajl
         pSA4cAEoCnDPZvhgBNxEEoePXZ/+UG6W8nCng=
Received: by 10.86.84.5 with SMTP id h5mr640615fgb.49.1228485444460;
        Fri, 05 Dec 2008 05:57:24 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Fri, 5 Dec 2008 05:57:24 -0800 (PST)
Message-ID: <359a92830812050557n33b2e565o8a9ddc7bd5309534@mail.gmail.com>
Date: Fri, 5 Dec 2008 08:57:24 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleting documents from index
In-Reply-To: <49392FB9.40406@sql-gmbh.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43402_14652849.1228485444432"
References: <49392FB9.40406@sql-gmbh.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43402_14652849.1228485444432
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How do you know it's failing? If you're searching could it be
that you need to re-open the underlying indexreader when
you delete using IndexWriter?

Best
Erick

On Fri, Dec 5, 2008 at 8:42 AM, Gunnar Wurl <gunnar.wurl@sql-gmbh.de> wrote:

> Hi,
>
> I am trying to delete documents from an index. When using the
> IndexReader#deleteDocuments(Term) method this works fine. But when using the
> IndexWriter#deleteDocuments(Term) it is not working, although I am using the
> same term. When using the IndexWriter I tried to commit and optimize but a
> reader opened on the index afterwards still finds the document. Is there
> something special when using the IndexWriter#deleteDocuments(Term) method
> what I have to care for?
>
> Thanks in advance
>
> Gunnar
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_43402_14652849.1228485444432--

From java-user-return-37558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 14:12:20 2008
Return-Path: <java-user-return-37558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55460 invoked from network); 5 Dec 2008 14:12:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 14:12:20 -0000
Received: (qmail 45309 invoked by uid 500); 5 Dec 2008 14:12:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45263 invoked by uid 500); 5 Dec 2008 14:12:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45231 invoked by uid 99); 5 Dec 2008 14:12:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 06:12:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.111.239.161] (HELO caesar.sql-gmbh.de) (212.111.239.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 14:10:54 +0000
Received: from localhost (localhost [127.0.0.1])
	by caesar.sql-gmbh.de (Postfix) with ESMTP id B0B608E800D
	for <java-user@lucene.apache.org>; Fri,  5 Dec 2008 15:11:41 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at sql-gmbh.de
Received: from caesar.sql-gmbh.de ([127.0.0.1])
	by localhost (caesar.sql-gmbh.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id BbVU43CaL1nx for <java-user@lucene.apache.org>;
	Fri,  5 Dec 2008 15:11:37 +0100 (CET)
Received: from [127.0.0.1] (sql100.sql [192.168.20.100])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by caesar.sql-gmbh.de (Postfix) with ESMTP id 656E68E8002
	for <java-user@lucene.apache.org>; Fri,  5 Dec 2008 15:11:35 +0100 (CET)
Message-ID: <493937EA.5040007@sql-gmbh.de>
Date: Fri, 05 Dec 2008 15:17:14 +0100
From: Gunnar Wurl <gunnar.wurl@sql-gmbh.de>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Deleting documents from index
References: <49392FB9.40406@sql-gmbh.de> <359a92830812050557n33b2e565o8a9ddc7bd5309534@mail.gmail.com>
In-Reply-To: <359a92830812050557n33b2e565o8a9ddc7bd5309534@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your answer Erick..

I just found out that my problem occured because of an user(me) error. 
Used two different workspaces and indexes.. sorry.

Erick Erickson schrieb:
> How do you know it's failing? If you're searching could it be
> that you need to re-open the underlying indexreader when
> you delete using IndexWriter?
>
> Best
> Erick
>
> On Fri, Dec 5, 2008 at 8:42 AM, Gunnar Wurl <gunnar.wurl@sql-gmbh.de> wrote:
>
>   
>> Hi,
>>
>> I am trying to delete documents from an index. When using the
>> IndexReader#deleteDocuments(Term) method this works fine. But when using the
>> IndexWriter#deleteDocuments(Term) it is not working, although I am using the
>> same term. When using the IndexWriter I tried to commit and optimize but a
>> reader opened on the index afterwards still finds the document. Is there
>> something special when using the IndexWriter#deleteDocuments(Term) method
>> what I have to care for?
>>
>> Thanks in advance
>>
>> Gunnar
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 15:17:30 2008
Return-Path: <java-user-return-37559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99428 invoked from network); 5 Dec 2008 15:17:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 15:17:30 -0000
Received: (qmail 73440 invoked by uid 500); 5 Dec 2008 15:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73055 invoked by uid 500); 5 Dec 2008 15:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73034 invoked by uid 99); 5 Dec 2008 15:17:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 07:17:35 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 15:16:05 +0000
Received: by nf-out-0910.google.com with SMTP id g16so24257nfd.15
        for <java-user@lucene.apache.org>; Fri, 05 Dec 2008 07:16:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=YcY0ny6D9SqEqi66MCAoVxaCAckrILyF8g2oQCOCdvM=;
        b=FB1ZE8AXXazx7DoYfDmWfpxHUvaNSx4Duiymhhsm05UljduYE5AOKVh8+a/DB7Fq/D
         qLi0cVTre9GQlynVIbLSVTL0aV8rnUemVWZRRzgTYmCYoFQPjduUnVSU3uCl/4BHSANO
         VfhjV9VIjP8D0LbE3Fc/frpGQywxWvH2LDUFk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=StaviSkVYQVBkAdrfstVpvl1AqNi18Pzz7Nb9dUQjoFEWZjl0ivxxfuxXdwE7SkOYX
         Kw9Quk2fAOGzvlc7hheSL6yRYqoJpmpF/4ED/+3Ug+W6bc0MqZhBF2puSLgSTum6D5pX
         QxxmPfXtW/pL/UIC3+pUQPMuOet7TxNoVg4tk=
Received: by 10.86.92.7 with SMTP id p7mr708667fgb.24.1228490212582;
        Fri, 05 Dec 2008 07:16:52 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Fri, 5 Dec 2008 07:16:52 -0800 (PST)
Message-ID: <359a92830812050716l5cb78559q4fd899b0fa9646ea@mail.gmail.com>
Date: Fri, 5 Dec 2008 10:16:52 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleting documents from index
In-Reply-To: <493937EA.5040007@sql-gmbh.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44331_2396866.1228490212578"
References: <49392FB9.40406@sql-gmbh.de>
	 <359a92830812050557n33b2e565o8a9ddc7bd5309534@mail.gmail.com>
	 <493937EA.5040007@sql-gmbh.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44331_2396866.1228490212578
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

been there, done that <G>.

On Fri, Dec 5, 2008 at 9:17 AM, Gunnar Wurl <gunnar.wurl@sql-gmbh.de> wrote:

> Thanks for your answer Erick..
>
> I just found out that my problem occured because of an user(me) error. Used
> two different workspaces and indexes.. sorry.
>
> Erick Erickson schrieb:
>
>  How do you know it's failing? If you're searching could it be
>> that you need to re-open the underlying indexreader when
>> you delete using IndexWriter?
>>
>> Best
>> Erick
>>
>> On Fri, Dec 5, 2008 at 8:42 AM, Gunnar Wurl <gunnar.wurl@sql-gmbh.de>
>> wrote:
>>
>>
>>
>>> Hi,
>>>
>>> I am trying to delete documents from an index. When using the
>>> IndexReader#deleteDocuments(Term) method this works fine. But when using
>>> the
>>> IndexWriter#deleteDocuments(Term) it is not working, although I am using
>>> the
>>> same term. When using the IndexWriter I tried to commit and optimize but
>>> a
>>> reader opened on the index afterwards still finds the document. Is there
>>> something special when using the IndexWriter#deleteDocuments(Term) method
>>> what I have to care for?
>>>
>>> Thanks in advance
>>>
>>> Gunnar
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_44331_2396866.1228490212578--

From java-user-return-37560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 15:53:05 2008
Return-Path: <java-user-return-37560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32180 invoked from network); 5 Dec 2008 15:53:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 15:53:05 -0000
Received: (qmail 47512 invoked by uid 500); 5 Dec 2008 15:53:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47473 invoked by uid 500); 5 Dec 2008 15:53:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47457 invoked by uid 99); 5 Dec 2008 15:53:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 07:53:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.12.71] (HELO mx2.syr.edu) (128.230.12.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 15:51:39 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx2.syr.edu (8.14.3/8.14.3) with ESMTP id mB5FqQSu008171
	for <java-user@lucene.apache.org>; Fri, 5 Dec 2008 10:52:26 -0500
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Fri, 5 Dec 2008 10:52:26 -0500
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Fri, 5 Dec 2008 10:52:23 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: SnowballAnalyzer and AlphaNumeric
Date: Fri, 5 Dec 2008 10:52:21 -0500
Message-ID: <9294E20AED46934EA459020706463F94011EE33D@SUEXCL-02.ad.syr.edu>
In-Reply-To: <20846085.post@talk.nabble.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: SnowballAnalyzer and AlphaNumeric
Thread-Index: AclWd/efI2SBhbYrRIuYGkxo7JGRegAd6j+Q
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 05 Dec 2008 15:52:23.0630 (UTC) FILETIME=[76C1F6E0:01C956F1]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2008-12-05_09:2008-12-05,2008-12-05,2008-12-05 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sam,

On 12/04/2008 at 8:21 PM, samd wrote:
> Where can I get the Lucene source for the Snowball implementation.
> I need to be able to search for words that are alphanumeric
> and this does not work with the current snowballanalyzer.

Lucene-java's source is available through its revision control system =
(Subversion) - details are here:

   <http://wiki.apache.org/lucene-java/HowToContribute>

Here's the URL to access the 2.4.0 version of the Lucene Snowball =
sources:

<http://svn.apache.org/repos/asf/lucene/java/tags/lucene_2_4_0/contrib/sn=
owball/>

FYI, there is also a browsable view of the Lucene-java repository here:

<http://svn.apache.org/viewvc/lucene/java/>

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 15:56:53 2008
Return-Path: <java-user-return-37561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34599 invoked from network); 5 Dec 2008 15:56:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 15:56:52 -0000
Received: (qmail 61373 invoked by uid 500); 5 Dec 2008 15:56:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61346 invoked by uid 500); 5 Dec 2008 15:56:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61335 invoked by uid 99); 5 Dec 2008 15:56:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 07:56:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Dec 2008 15:55:25 +0000
Received: (qmail 99970 invoked by uid 60001); 5 Dec 2008 15:56:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=XONs6JAw0j3+DX9yVAOz9JnZ0pWNej1q6WzVmy80QdZ3deeOQ6D/NZmn6G8H5WqEKH5tyQ1CNur2RuQUJ2b5Y3OSg2mv0poQ5MJQFLEh4nZ5FPrzQPWpdfyOaGYsySenay6mXUdBEuxskyLI7WMfpxwYPAnnRC7MSmPfN5p6wsg=;
X-YMail-OSG: MUNHw2cVM1nWYxcUt_jOkYBAJRzWd._UqoF41vOscuvzChcG5qqslR38iVYgWuiR8AI09TySooRirccYdTTIDne0qkZUEZ3ulg_jAtIJkjZm4JrbvAckCvCOQIqaq63t2Q5u8KTWI1haaSuG70Td.JCOogMT7A0NkM.d2waT3RLa4DENi4ObqdWGqA--
Received: from [167.206.188.3] by web50310.mail.re2.yahoo.com via HTTP; Fri, 05 Dec 2008 07:56:12 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <5d53d5770812040459y72e3braa6de15cdc68518f@mail.gmail.com>  <359a92830812040536t55e11e63s47bc6df9d13eb962@mail.gmail.com>  <5d53d5770812041320v6af64e4v30eb3936e3bd6c2e@mail.gmail.com>  <359a92830812041412o2c6ed322mbef29210c54f53ee@mail.gmail.com>  <5d53d5770812041802w26b1f1fbo1a00146471bd717d@mail.gmail.com>  <5d53d5770812041848q568dbfbao78780a74a143cffb@mail.gmail.com> <359a92830812050537s75a4c4fh85f93b87aad23ad0@mail.gmail.com>
Date: Fri, 5 Dec 2008 07:56:12 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Design guidance - search strategy
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <637516.99628.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, I think we'll have to start paying the commission fee! ;)


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Erick Erickson <erickerickson@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, December 5, 2008 8:37:20 AM
> Subject: Re: Design guidance - search strategy
> 
> Glad it's working, but it's not my book, that's Erik Hatcher not
> Erick Erickson.....
> 
> Erik:
> Do I get a commission?
> 
> On Thu, Dec 4, 2008 at 9:48 PM, Ian Vink wrote:
> 
> > It works.
> > For those using Lucene.NET here is an example of a Filter that takes a list
> > of IDs for books:
> >
> >
> >    public class BookFilter: Filter
> >    {
> >        private readonly ListbookIDs;
> >
> >        public BookFilter(ListbookIDsToSearch)
> >        {
> >            bookIDs = bookIDsToSearch;
> >        }
> >
> >        public override BitArray Bits(IndexReader reader)
> >        {
> >            BitArray bits = new BitArray(50000);
> >            int[] docs = new int[1];
> >            int[] freqs = new int[1];
> >
> >            foreach (int bookID in bookIDs)
> >            {
> >                TermDocs termDocs = reader.TermDocs(new Term("id",
> > bookID.ToString()));
> >                int count = termDocs.Read(docs, freqs);
> >                if(count==1)
> >                    bits.Set(docs[0],true);
> >            }
> >            return bits;
> >        }
> >    }
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 20:03:48 2008
Return-Path: <java-user-return-37562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62581 invoked from network); 5 Dec 2008 20:03:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 20:03:47 -0000
Received: (qmail 87144 invoked by uid 500); 5 Dec 2008 20:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86747 invoked by uid 500); 5 Dec 2008 20:03:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86735 invoked by uid 99); 5 Dec 2008 20:03:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 12:03:52 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.1.208 as permitted sender)
Received: from [64.18.1.208] (HELO exprod6og107.obsmtp.com) (64.18.1.208)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 05 Dec 2008 20:02:19 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by exprod6ob107.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSTmIbnROGJzm7CpsNc7yBQWYsQy01mTw@postini.com; Fri, 05 Dec 2008 12:03:08 PST
Received: from d01smtp03.Mi8.com ([172.16.1.24]) by Outbound01.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 5 Dec 2008 15:00:45 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by d01smtp03.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 5 Dec 2008 15:00:45 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.106]) with Microsoft Exchange Server HTTP-DAV ;
 Fri,  5 Dec 2008 20:00:35 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Fri, 05 Dec 2008 12:00:33 -0800
Subject: Re: Slow queries with lots of hits
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C55EC861.1FAE%tsturge@hi5.com>
Thread-Topic: Slow queries with lots of hits
Thread-Index: AclXFCGDwa5xaJfUYEGbtFjDIL8HwQ==
In-Reply-To: <247646.52163.qm@web50307.mail.re2.yahoo.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="ISO-8859-1"
Content-transfer-encoding: quoted-printable
X-OriginalArrivalTime: 05 Dec 2008 20:00:45.0574 (UTC) FILETIME=[29022A60:01C95714]
X-Virus-Checked: Checked by ClamAV on apache.org

I think we're going to cheat with this one. Two options:

1) Add a term to documents with a high enough setBoost(). Add this term to
queries that are insufficiently restrictive. This way only high scoring
documents will be considered.

2) sort the index data slightly before build time by boost (so highest boos=
t
documents have lowest doc numbers.) Then stop the HitCollector once we have
10000 matching results.

2) is likely better but 1) is easier. I think "optimize_by_boost()" (which
automatically makes high scoring documents have low doc numbers) would be
interesting but it's more than I want to consider given how complex it is
relative to the simplicity of the above.

Tim

On 12/4/08 7:18 PM, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com> wrote:

> Tim (and we should move this to java-dev if it gains traction),
>=20
> Perhaps you can come up with a mechanism to perform scoring in two passes
> instead of one:
> - first pass is cheap and fast
> - second pass is more expensive and slower
>=20
> Currently, there is no choice - Lucene does 2).  But perhaps you can come=
 up
> with a generic way to do 1) ?
>=20
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>=20
>=20
>=20
> ----- Original Message ----
>> From: Tim Sturge <tsturge@hi5.com>
>> To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
>> Sent: Thursday, December 4, 2008 3:27:30 PM
>> Subject: Slow queries with lots of hits
>>=20
>> Hi all,
>>=20
>> I have an interesting problem with my query traffic. Most of the queries=
 run
>> in a fairly short amount of time (< 100ms) but a few take over 1000ms. T=
hese
>> queries are predominantly those with a huge number of hits (>1 million h=
its
>> in a >100 million document index). The time taken (as far as I can tell)=
 is
>> for lucene to sit there while it scores and sorts all these results.
>>=20
>> However it turns out these queries really don=B9t have top results. That i=
s,
>> of the million documents, there are easily 10000 which are decent result=
s
>> (basically those above some threshold score). Frankly, just returning so=
me
>> consistent (so paging and reload work) but
>> otherwise arbitrary ranking of these 10000 results would be more than go=
od
>> enough.
>>=20
>> It seems to me that a solution would be to impose some sort of pseudo-ra=
ndom
>> filter (e.g. consider only every n-th document assuming they are uniform=
ly
>> distributed). I=B9m wondering if anyone else has experience with this sort=
 of
>> issue and what solutions they have found to work well in practice.
>>=20
>> Thanks,
>>=20
>> Tim
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 05 22:57:57 2008
Return-Path: <java-user-return-37563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60075 invoked from network); 5 Dec 2008 22:57:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2008 22:57:57 -0000
Received: (qmail 29142 invoked by uid 500); 5 Dec 2008 22:58:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28272 invoked by uid 500); 5 Dec 2008 22:58:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28261 invoked by uid 99); 5 Dec 2008 22:58:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 14:58:02 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 22:56:33 +0000
Received: by mu-out-0910.google.com with SMTP id i10so175190mue.5
        for <java-user@lucene.apache.org>; Fri, 05 Dec 2008 14:57:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=18xcp9xrYi6bCQSA44MaZBjCo5H5zF5VMvkzQdK2Yg4=;
        b=uQ6O2UkmvybCb15h5k+MzPrQ+kInBTDQiuY6pnuoVFsnDcLp2gPzsp5B78JJPqW4QW
         aDK2beRTO/MWrRq9qOysx1wVmQTwqSkuib7opW90puYKQH0OsyZx3HA0m+wB1RS8RWAQ
         UBRQ/HP7tGNb0+phKwh7f7oUXxQZA6YjjZQTM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=fuQpZNqFecnsRMOB6DdlU9+xgcJzsxE4eoVEStrenDkHsWQBostF/+o8qXg02KOR+L
         hH2wviWkEail863J3kZhsD5ZEbISvin80CED3JyjBjYlWgojc5sG6VHaKHL9yjLfxHzl
         wHCdlF3HQeOY01b1pjWYbGkWXnZtNYLuV71nY=
Received: by 10.180.204.10 with SMTP id b10mr162113bkg.201.1228517840725;
        Fri, 05 Dec 2008 14:57:20 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Fri, 5 Dec 2008 14:57:20 -0800 (PST)
Message-ID: <5d53d5770812051457q76c3c47fw820e48ad7c7520d0@mail.gmail.com>
Date: Fri, 5 Dec 2008 18:57:20 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: TopDocs - Get all docs?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61059_1910221.1228517840711"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61059_1910221.1228517840711
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there an easy way to get all the documents in the index?
Kinda like this:

TopDocs everything = ???.GetAllDocuments();

------=_Part_61059_1910221.1228517840711--

From java-user-return-37564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 06 00:32:26 2008
Return-Path: <java-user-return-37564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95066 invoked from network); 6 Dec 2008 00:32:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2008 00:32:26 -0000
Received: (qmail 5751 invoked by uid 500); 6 Dec 2008 00:32:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5724 invoked by uid 500); 6 Dec 2008 00:32:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5713 invoked by uid 99); 6 Dec 2008 00:32:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 16:32:30 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 00:31:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id A441D1FCF0
	for <java-user@lucene.apache.org>; Fri,  5 Dec 2008 16:31:46 -0800 (PST)
Message-Id: <993F56D9-DE37-4F54-BF12-44441D00120B@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <5d53d5770812051457q76c3c47fw820e48ad7c7520d0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: TopDocs - Get all docs?
Date: Fri, 5 Dec 2008 19:31:45 -0500
References: <5d53d5770812051457q76c3c47fw820e48ad7c7520d0@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

See the MatchAllDocsQuery in the search package.

-Grant

On Dec 5, 2008, at 5:57 PM, Ian Vink wrote:

> Is there an easy way to get all the documents in the index?
> Kinda like this:
>
> TopDocs everything = ???.GetAllDocuments();

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 06 07:57:52 2008
Return-Path: <java-user-return-37565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52519 invoked from network); 6 Dec 2008 07:57:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2008 07:57:52 -0000
Received: (qmail 67307 invoked by uid 500); 6 Dec 2008 07:57:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67276 invoked by uid 500); 6 Dec 2008 07:57:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67262 invoked by uid 99); 6 Dec 2008 07:57:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 05 Dec 2008 23:57:56 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gustavo.corral@gmail.com designates 209.85.132.240 as permitted sender)
Received: from [209.85.132.240] (HELO an-out-0708.google.com) (209.85.132.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 07:56:27 +0000
Received: by an-out-0708.google.com with SMTP id b2so190025ana.5
        for <java-user@lucene.apache.org>; Fri, 05 Dec 2008 23:57:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=3uKjrQgh27UNboQJ1jZoZftr05UhmAe4hJBW9Bswqvw=;
        b=abM96WjkIo88HDwjlN8TRcUH0FI2qTyHnczocN5+Yt5OpACSB8mvD6JhrzI6vZ93MU
         E0GnSwl770M1R+tt+jZA35UDUDU2FRE3P9FwZWP/xBgqgyrAnHP8RjKBTX6TlEcrCOCn
         43JE7tnHz+MyaLcs8LCu3cvXgPIABafHQCy4E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=hNvV5vy39Jgdwf89eWw6KWGiJxCOhhJBwvszA59zQ9CSFWlQ0Pgv8N+WD/dM6HR9NC
         iIY+HUynHC2oqldRbuiZIe1DDQznzIVaQ20M4auecGla1ezuejO86tJ5lXvEwfbamkDY
         m7jbn4MmlMNbY3qlncTMSBKOY6pfq3FhsFCv4=
Received: by 10.100.105.9 with SMTP id d9mr493249anc.142.1228550235212;
        Fri, 05 Dec 2008 23:57:15 -0800 (PST)
Received: by 10.100.135.1 with HTTP; Fri, 5 Dec 2008 23:57:15 -0800 (PST)
Message-ID: <2bfa20eb0812052357j48e84358g6eaf310f0a2274e8@mail.gmail.com>
Date: Sat, 6 Dec 2008 01:57:15 -0600
From: "Gustavo Corral" <gustavo.corral@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene evaluation (XML)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38195_15908736.1228550235226"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38195_15908736.1228550235226
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello all,

I want to do some kind of evaluation of my Lucene application, but the
problem is that I'm indexing XML documents with a specific DTD and I have
just a small collection. Is there a way to run a quality benchmark using the
benchmark package in Lucene with my own collection an queries? I have seen
too something about mean average precision, but I can't find any reading
about how to implement it.

My XML documents have elements like: title, body, div (for sections),
references, keywords, figures... and those are the fields I indexed in
Lucene.

------=_Part_38195_15908736.1228550235226--

From java-user-return-37566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 06 11:27:00 2008
Return-Path: <java-user-return-37566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55646 invoked from network); 6 Dec 2008 11:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2008 11:27:00 -0000
Received: (qmail 70050 invoked by uid 500); 6 Dec 2008 11:27:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70011 invoked by uid 500); 6 Dec 2008 11:27:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70000 invoked by uid 99); 6 Dec 2008 11:27:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 03:27:03 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 11:25:33 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 4246B7324A
	for <java-user@lucene.apache.org>; Sat,  6 Dec 2008 03:26:21 -0800 (PST)
Message-Id: <DED87E43-EAD6-4B84-83B6-C84421263D92@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <2bfa20eb0812052357j48e84358g6eaf310f0a2274e8@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene evaluation (XML)
Date: Sat, 6 Dec 2008 06:26:20 -0500
References: <2bfa20eb0812052357j48e84358g6eaf310f0a2274e8@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

To use the Quality Benchmarker, see http://lucene.apache.org/java/2_4_0/api/contrib-benchmark/org/apache/lucene/benchmark/quality/package-summary.html


On Dec 6, 2008, at 2:57 AM, Gustavo Corral wrote:

> Hello all,
>
> I want to do some kind of evaluation of my Lucene application, but the
> problem is that I'm indexing XML documents with a specific DTD and I  
> have
> just a small collection. Is there a way to run a quality benchmark  
> using the
> benchmark package in Lucene with my own collection an queries? I  
> have seen
> too something about mean average precision, but I can't find any  
> reading
> about how to implement it.
>
> My XML documents have elements like: title, body, div (for sections),
> references, keywords, figures... and those are the fields I indexed in
> Lucene.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 06 16:43:20 2008
Return-Path: <java-user-return-37567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19619 invoked from network); 6 Dec 2008 16:43:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2008 16:43:19 -0000
Received: (qmail 69470 invoked by uid 500); 6 Dec 2008 16:43:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69080 invoked by uid 500); 6 Dec 2008 16:43:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69069 invoked by uid 99); 6 Dec 2008 16:43:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 08:43:24 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrs.nospam@gmail.com designates 72.14.246.240 as permitted sender)
Received: from [72.14.246.240] (HELO ag-out-0708.google.com) (72.14.246.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 16:41:55 +0000
Received: by ag-out-0708.google.com with SMTP id 23so429931agd.11
        for <java-user@lucene.apache.org>; Sat, 06 Dec 2008 08:42:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4Nt9wCy6VpLKYAIIFFCLjTARb+2pnBg3vmquBBHvQss=;
        b=c7ZO50E/g8OX5CSgDMWTLqWJIAkbwCPth1yemg3V4cmLoK8tCsl0A+uqTYX+bEVV5u
         NW+guGUUOCxStgBSjsKu64kW3kpn4B3Sn28GuNx+h8EYEgCDmJ9xAj8xXjVVou2q1uUS
         Pa0qh7JYkAzt7DTIuX54Koje5h7kvPVJSz+yQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=oo8Ho8mg6wXxPLLSpD6Y4uiYCe2+yuxB4EpS8sYn1lYe0R/NzV93h3BhB3ZUJKR641
         +eimG/y2zmw7oUsQ08C67y2D6ZiDXbBmYOZ31iEg9aWUDeJvDnZ3jcmRu58BgTkWLa7o
         kpD8a4OYz7MrTEXlKoTO3bveFFL8tusPAsUoE=
Received: by 10.150.197.8 with SMTP id u8mr4143329ybf.38.1228581752670;
        Sat, 06 Dec 2008 08:42:32 -0800 (PST)
Received: by 10.151.130.9 with HTTP; Sat, 6 Dec 2008 08:42:32 -0800 (PST)
Message-ID: <bd818c7b0812060842l74efcb88xd08edc60f2a2f65f@mail.gmail.com>
Date: Sat, 6 Dec 2008 11:42:32 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41275_14876751.1228581752661"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41275_14876751.1228581752661
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We are converting a User Interface query to lucene on the back end.  It has
recently come up that users want to do some negative only queries like NOT
"jakarta apache".  What is an efficient way to do this?  We do know what
field they are specifying, ie   -field1:jakarta

On Mon, Jun 23, 2008 at 2:53 AM, Aditi Goyal <aditigupta20@gmail.com> wrote:

> Thank you Allahbaksh for taking so much pains. The link says it cannot be
> used alone.
>
> Note: The NOT operator cannot be used with just one term. For example, the
> following search will return no results:
>
> NOT "jakarta apache"
> Thanks,
> Aditi
>
>
> On Mon, Jun 23, 2008 at 1:10 PM, Allahbaksh Mohammedali Asadullah <
> Allahbaksh_Asadullah@infosys.com> wrote:
>
> > Hi Aditi,
> > You can search using NOT operator. You can go through below link for
> Query
> > details http://lucene.apache.org/java/docs/queryparsersyntax.html
> > Warm Regards,
> > Allahbaksh
> >
> > Allahbaksh Mohammedali Asadullah,
> > Software Engineering & Technology Labs,
> > Infosys Technolgies Limited, Electronics City,
> > Hosur Road, Bangalore 560 100, India.
> > *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> > Fax: +91-80-28520362 | Mobile: +91-9845505322.
> > http://setlabs/slim/
> > http://allahbaksh.blogspot.com
> >
> >
> > -----Original Message-----
> > From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> > Sent: Monday, June 23, 2008 12:06 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: lucene search options
> >
> > Thanks a lot Daniel, I will try this option. :)
> > Is there a way to search for not equal to query alone?
> >
> > On Mon, Jun 23, 2008 at 12:03 PM, Daniel Noll <daniel@nuix.com> wrote:
> >
> > > On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
> > > > I think wildcard (*) cannot be used in the beginning :(
> > >
> > > Wrong:
> > >
> > >
> > >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard(boolean)
> <
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> >
> > <
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> > >
> > >
> > > Daniel
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > **************** CAUTION - Disclaimer *****************
> > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> > solely
> > for the use of the addressee(s). If you are not the intended recipient,
> > please
> > notify the sender by e-mail and delete the original message. Further, you
> > are not
> > to copy, disclose, or distribute this e-mail or its contents to any other
> > person and
> > any such actions are unlawful. This e-mail may contain viruses. Infosys
> has
> > taken
> > every reasonable precaution to minimize this risk, but is not liable for
> > any damage
> > you may sustain as a result of any virus in this e-mail. You should carry
> > out your
> > own virus checks before opening the e-mail or attachment. Infosys
> reserves
> > the
> > right to monitor and review the content of all messages sent to or from
> > this e-mail
> > address. Messages sent to or from this e-mail address may be stored on
> the
> > Infosys e-mail system.
> > ***INFOSYS******** End of Disclaimer ********INFOSYS***
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_41275_14876751.1228581752661--

From java-user-return-37568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 06 17:20:14 2008
Return-Path: <java-user-return-37568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32397 invoked from network); 6 Dec 2008 17:20:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2008 17:20:14 -0000
Received: (qmail 98380 invoked by uid 500); 6 Dec 2008 17:20:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98351 invoked by uid 500); 6 Dec 2008 17:20:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98340 invoked by uid 99); 6 Dec 2008 17:20:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 09:20:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrs.nospam@gmail.com designates 64.233.170.185 as permitted sender)
Received: from [64.233.170.185] (HELO rn-out-0910.google.com) (64.233.170.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 17:18:50 +0000
Received: by rn-out-0910.google.com with SMTP id j71so481694rne.4
        for <java-user@lucene.apache.org>; Sat, 06 Dec 2008 09:19:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=A8golvzOuwhxKvJpxdCrjtCIYMZP9VLUZroEAuwVuS0=;
        b=xAyyhdRxVDxSHKekl0JxwNjWK/8KwD4vqGQvFNyoL7vX4xmAfgShVOJLXrnytm7Qko
         rYkiLMKIpVkIAqJriz3TfRjJ2tZGxLh/k724o3qCmo6Jc70sqX/ydG0bXpXsRQyNMqOs
         MgGowVJofU4snWKwpD1fLs0mIhMZ/nwMpBNfM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=HNa1/oFipWjVpLLRUEVFNxmoajm6SgyUa/K5jpsbhKulHzFLPFxfbvkKiH5vHWe5Oo
         Ia65ZP72q6/SlOUfQVo9EWm+a0Mm5AIkw/gXDKlkCiZvN4BgHDfE2v1nEZlej5gtucYu
         rHYrsZxEZGjsRRD+yu1yJUVftgY/gIn+hv8xM=
Received: by 10.150.197.8 with SMTP id u8mr4162053ybf.161.1228583976741;
        Sat, 06 Dec 2008 09:19:36 -0800 (PST)
Received: by 10.151.130.9 with HTTP; Sat, 6 Dec 2008 09:19:36 -0800 (PST)
Message-ID: <bd818c7b0812060919x18c4e1av3767e32948fbdbbf@mail.gmail.com>
Date: Sat, 6 Dec 2008 12:19:36 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41397_16975930.1228583976728"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_41397_16975930.1228583976728
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We are converting a User Interface query to lucene on the back end. It has
recently come up that users want to do some negative only queries like NOT
"jakarta apache". What is an efficient way to do this? We do know what field
they are specifying, ie -field1:jakarta

On Mon, Jun 23, 2008 at 2:53 AM, Aditi Goyal <aditigupta20@gmail.com> wrote:

> Thank you Allahbaksh for taking so much pains. The link says it cannot be
> used alone.
>
> Note: The NOT operator cannot be used with just one term. For example, the
> following search will return no results:
>
> NOT "jakarta apache"
> Thanks,
> Aditi
>
>
> On Mon, Jun 23, 2008 at 1:10 PM, Allahbaksh Mohammedali Asadullah <
> Allahbaksh_Asadullah@infosys.com> wrote:
>
> > Hi Aditi,
> > You can search using NOT operator. You can go through below link for
> Query
> > details http://lucene.apache.org/java/docs/queryparsersyntax.html
> > Warm Regards,
> > Allahbaksh
> >
> > Allahbaksh Mohammedali Asadullah,
> > Software Engineering & Technology Labs,
> > Infosys Technolgies Limited, Electronics City,
> > Hosur Road, Bangalore 560 100, India.
> > *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> > Fax: +91-80-28520362 | Mobile: +91-9845505322.
> > http://setlabs/slim/
> > http://allahbaksh.blogspot.com
> >
> >
> > -----Original Message-----
> > From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> > Sent: Monday, June 23, 2008 12:06 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: lucene search options
> >
> > Thanks a lot Daniel, I will try this option. :)
> > Is there a way to search for not equal to query alone?
> >
> > On Mon, Jun 23, 2008 at 12:03 PM, Daniel Noll <daniel@nuix.com> wrote:
> >
> > > On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
> > > > I think wildcard (*) cannot be used in the beginning :(
> > >
> > > Wrong:
> > >
> > >
> > >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard(boolean)
> <
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> >
> > <
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> > >
> > >
> > > Daniel
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > **************** CAUTION - Disclaimer *****************
> > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> > solely
> > for the use of the addressee(s). If you are not the intended recipient,
> > please
> > notify the sender by e-mail and delete the original message. Further, you
> > are not
> > to copy, disclose, or distribute this e-mail or its contents to any other
> > person and
> > any such actions are unlawful. This e-mail may contain viruses. Infosys
> has
> > taken
> > every reasonable precaution to minimize this risk, but is not liable for
> > any damage
> > you may sustain as a result of any virus in this e-mail. You should carry
> > out your
> > own virus checks before opening the e-mail or attachment. Infosys
> reserves
> > the
> > right to monitor and review the content of all messages sent to or from
> > this e-mail
> > address. Messages sent to or from this e-mail address may be stored on
> the
> > Infosys e-mail system.
> > ***INFOSYS******** End of Disclaimer ********INFOSYS***
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_41397_16975930.1228583976728--

From java-user-return-37569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 07 00:10:03 2008
Return-Path: <java-user-return-37569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53820 invoked from network); 7 Dec 2008 00:10:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2008 00:10:03 -0000
Received: (qmail 29281 invoked by uid 500); 7 Dec 2008 00:10:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29253 invoked by uid 500); 7 Dec 2008 00:10:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29242 invoked by uid 99); 7 Dec 2008 00:10:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 16:10:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bubblenut@gmail.com designates 64.233.170.187 as permitted sender)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 00:08:39 +0000
Received: by rn-out-0910.google.com with SMTP id j71so555871rne.4
        for <java-user@lucene.apache.org>; Sat, 06 Dec 2008 16:09:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:x-google-sender-auth;
        bh=cAQdIT77dqP1Tk7JvzjvVcLqpe4Aj7FO3xgb1uYL4hE=;
        b=dTnr+NvKHLEQ2wjAeCRt4EXy5QQHmBI06L85TD23C9wuuT4q1eI24JSnbK4TbVAK8H
         ofrwGebzLEwdCE03UQEBq8C04Bmgs2tFjDFcyJm3KeUaQMnBBL3Pmp4s2VMMT2zxuNin
         elTQJFTJB+F6Ef80d4v/N/YnQvfeV8hDKzQ6w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :x-google-sender-auth;
        b=jyvgS9+hnjvKb87fZ8MggkX900CY7aa8/DWv0N7Og8oq8glV761Q5AKquHwDM88ZAf
         pmyajVosdL2L5widPm2BGWFas14befM1sHU0A8ncgcINJTzWj0YceIxeid+TDNsclYn+
         lGxINPv3+6FFvmSKviSx7G299l6S6cRyFY20w=
Received: by 10.65.112.13 with SMTP id p13mr1331817qbm.99.1228608557695;
        Sat, 06 Dec 2008 16:09:17 -0800 (PST)
Received: by 10.65.182.19 with HTTP; Sat, 6 Dec 2008 16:09:17 -0800 (PST)
Message-ID: <32a1c320812061609u60eafed8tfd924851d7d207ab@mail.gmail.com>
Date: Sun, 7 Dec 2008 00:09:17 +0000
From: "Robert Young" <rob@roryoung.co.uk>
Sender: bubblenut@gmail.com
To: java-user@lucene.apache.org
Subject: IR Pattern Language
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34032_31376154.1228608557653"
X-Google-Sender-Auth: 76c714c18ed1abfe
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34032_31376154.1228608557653
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Does anyone know of a pattern language for text processing and information
retrieval?

Cheers
Rob

------=_Part_34032_31376154.1228608557653--

From java-user-return-37570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 07 00:22:46 2008
Return-Path: <java-user-return-37570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61061 invoked from network); 7 Dec 2008 00:22:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2008 00:22:45 -0000
Received: (qmail 36084 invoked by uid 500); 7 Dec 2008 00:22:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36054 invoked by uid 500); 7 Dec 2008 00:22:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36043 invoked by uid 99); 7 Dec 2008 00:22:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 16:22:51 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tshivaraj@gmail.com designates 66.249.90.181 as permitted sender)
Received: from [66.249.90.181] (HELO ik-out-1112.google.com) (66.249.90.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 00:21:22 +0000
Received: by ik-out-1112.google.com with SMTP id c29so468980ika.5
        for <java-user@lucene.apache.org>; Sat, 06 Dec 2008 16:21:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=tIkyyNNez1TWFosCHf6yyCf8kRFzCXMiUvgzOHHJM1I=;
        b=Ku7XXfhVPUWvDtxrpSUHxsbpRYmRIZ/tYypbAaOJCrFYKyCykMTH3yAUK94ltiGmrf
         E7cLLsf4PqFr8PouD6CPqSzm46cpoAilGN4z6M3+0QNTnOWeyHAXWskaa2q7DHIAatB0
         ceHFrGvuL7SWFHzq2Qn/WVU+xH9wI4E4bTKTk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LcZ9TDH4KX7wf9l3g4TNlqkdqO92L7vzfp1LCtW2H3UJGXXkZ+7CavzJCPMkU3E/LW
         uab5PExujZbkHiqY6WGoB6EzWMmkm7mdHwX7R61cLUxXuFSa7wN4CGKlM/VVNnAZk0gq
         bU/FMfsQ9P+8nnzcRB18aHqEzgr+uh1vri+38=
Received: by 10.210.46.4 with SMTP id t4mr1819538ebt.49.1228609319676;
        Sat, 06 Dec 2008 16:21:59 -0800 (PST)
Received: by 10.210.82.10 with HTTP; Sat, 6 Dec 2008 16:21:59 -0800 (PST)
Message-ID: <4950afc10812061621m1e2ee730y756a676b74ff2cec@mail.gmail.com>
Date: Sat, 6 Dec 2008 19:21:59 -0500
From: "Shivaraj Tenginakai" <tshivaraj@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting documents without a query
In-Reply-To: <8837fb770812050135l1faf55b8jbe2354cdd89511d3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58685_29016135.1228609319647"
References: <4950afc10812042312i1ab36d1bi9d059d991e0fb47b@mail.gmail.com>
	 <8837fb770812050135l1faf55b8jbe2354cdd89511d3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58685_29016135.1228609319647
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks John,

MatchAllDocsQuery works, however I was unable to locate an example for
traversing the term table. Could you please point me to one?

Regards,

Shivaraj



On Fri, Dec 5, 2008 at 4:35 AM, John Wang <john.wang@gmail.com> wrote:

> The obvious way is to use use MatchAllDocsQuery with Sort parameters on the
> searcher, e.g.
>
> searcher.search(new MatchAllDocsQuery(),sort);
>
> If you only care about 1 sort spec (e.g. no secondary sort to break ties)
> it
> may be faster just traversing the term table since that is already sorted.
>
> -John
>
> On Thu, Dec 4, 2008 at 11:12 PM, Shivaraj Tenginakai <tshivaraj@gmail.com
> >wrote:
>
> > I have a usecase in which I have no search query, but still need to sort
> > documents. For example, items need to be sorted by price, though the user
> > has not yet selected any search criteria.
> >
> > What would be the best way to achieve this?
> >
> > Thanks and Regards,
> >
> > Shivaraj
> >
>

------=_Part_58685_29016135.1228609319647--

From java-user-return-37571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 07 01:21:42 2008
Return-Path: <java-user-return-37571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69057 invoked from network); 7 Dec 2008 01:21:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2008 01:21:42 -0000
Received: (qmail 66308 invoked by uid 500); 7 Dec 2008 01:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66268 invoked by uid 500); 7 Dec 2008 01:21:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66257 invoked by uid 99); 7 Dec 2008 01:21:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 17:21:47 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 01:20:17 +0000
Received: by wf-out-1314.google.com with SMTP id 28so604846wfc.20
        for <java-user@lucene.apache.org>; Sat, 06 Dec 2008 17:21:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=cFPEeyUQvCOUCAbHNJkguhhwqn2Mbebu4DqHLvZbP/I=;
        b=lOTreo12TccqZba0dEkca61248rT66bVDdbdRx6QAoED2RoE4BpY4U8r0u07Zc1iNG
         UEuJMUZAKPhw8dsG0xlLjS6Fh0ELN/b7kNOOu5+xfvqS9rOsFa3GYsZuSxspfDOnSuEN
         N3WFraeAbDzW+yUXMjpsH84M/TrH+GlTCA7eg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=eTipxyBGf1wG2gBLNLqY4ae9swXhhKCwPL6hCsgLY6tMfLm4boSIhVYRbuDBZtoXQr
         bWJrHsvvk83fhe+DzCdU7uJYo09feUAO9unGWEnebkwqrQubnT+VFLji4tr5Ox3KRJbd
         tb9vgn3k27Aijrxj2svYfaBSXi9nilKSBRotA=
Received: by 10.115.91.2 with SMTP id t2mr1252319wal.224.1228612865424;
        Sat, 06 Dec 2008 17:21:05 -0800 (PST)
Received: by 10.114.147.5 with HTTP; Sat, 6 Dec 2008 17:21:05 -0800 (PST)
Message-ID: <6d6cf45b0812061721s4a6a3b64j8bc67bb5d9780e0e@mail.gmail.com>
Date: Sat, 6 Dec 2008 17:21:05 -0800
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting documents without a query
In-Reply-To: <4950afc10812061621m1e2ee730y756a676b74ff2cec@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5777_23324558.1228612865426"
References: <4950afc10812042312i1ab36d1bi9d059d991e0fb47b@mail.gmail.com>
	 <8837fb770812050135l1faf55b8jbe2354cdd89511d3@mail.gmail.com>
	 <4950afc10812061621m1e2ee730y756a676b74ff2cec@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5777_23324558.1228612865426
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Shivaraj,   I would recommend John's approach and let Lucene deal with
the sorting.


Nonetheless, you can traverse through the terms by using the following
method:
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/index/IndexReader.html#terms(org.apache.lucene.index.Term)

Basically, you should pass in a term with your price field name and an empty
string for the value. You would traverse the enumeration until you hit a
Term with a different field name. You can get the documents with the term by
using:
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/index/IndexReader.html#termDocs(org.apache.lucene.index.Term)



Hope that helps.

Khawaja

On Sat, Dec 6, 2008 at 4:21 PM, Shivaraj Tenginakai <tshivaraj@gmail.com>wrote:

> Thanks John,
>
> MatchAllDocsQuery works, however I was unable to locate an example for
> traversing the term table. Could you please point me to one?
>
> Regards,
>
> Shivaraj
>
>
>
> On Fri, Dec 5, 2008 at 4:35 AM, John Wang <john.wang@gmail.com> wrote:
>
> > The obvious way is to use use MatchAllDocsQuery with Sort parameters on
> the
> > searcher, e.g.
> >
> > searcher.search(new MatchAllDocsQuery(),sort);
> >
> > If you only care about 1 sort spec (e.g. no secondary sort to break ties)
> > it
> > may be faster just traversing the term table since that is already
> sorted.
> >
> > -John
> >
> > On Thu, Dec 4, 2008 at 11:12 PM, Shivaraj Tenginakai <
> tshivaraj@gmail.com
> > >wrote:
> >
> > > I have a usecase in which I have no search query, but still need to
> sort
> > > documents. For example, items need to be sorted by price, though the
> user
> > > has not yet selected any search criteria.
> > >
> > > What would be the best way to achieve this?
> > >
> > > Thanks and Regards,
> > >
> > > Shivaraj
> > >
> >
>

------=_Part_5777_23324558.1228612865426--

From java-user-return-37572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 07 02:34:05 2008
Return-Path: <java-user-return-37572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98844 invoked from network); 7 Dec 2008 02:34:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2008 02:34:04 -0000
Received: (qmail 88359 invoked by uid 500); 7 Dec 2008 02:34:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88323 invoked by uid 500); 7 Dec 2008 02:34:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88312 invoked by uid 99); 7 Dec 2008 02:34:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 18:34:10 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 02:32:38 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 6624287094
	for <java-user@lucene.apache.org>; Sat,  6 Dec 2008 18:33:25 -0800 (PST)
Message-Id: <5232506F-5B06-4FC7-9C61-8A7AF2B14F7C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <COL113-W70966CEA408AE058F44DA3BE020@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Pdf in Lucene?
Date: Sat, 6 Dec 2008 21:33:24 -0500
References: <COL113-W31062E878D138C1C72FB3EBE010@phx.gbl> <8c4e68610812010343n62d7380bv52a224d7fefe6a2a@mail.gmail.com> <COL113-W45437A1268795288A8839CBE010@phx.gbl> <EB20F04E-B324-45C9-A7D8-70B4A6205052@apache.org> <COL113-W455B5282CF986CD2D0A97EBE010@phx.gbl> <81F5AE5D-760A-40C9-A4B8-2889C9E9CACD@apache.org> <COL113-W8284C0CC1716F89F669205BE000@phx.gbl> <5816fbdd0812040149x6702c556tf3d6c97e93d1d272@mail.gmail.com> <COL113-W32CCABA46AA29E6A0A03BDBE020@phx.gbl> <5816fbdd0812040545x31b0233fjc4ccce3c329c8881@mail.gmail.com>  <5816fbdd0812040547r3767cc86u1efef4c07955833c@mail.gmail.com> <COL113-W70966CEA408AE058F44DA3BE020@phx.gbl>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 4, 2008, at 9:50 AM, tiziano bernardi wrote:

>
> I entered your code inside a main.
> I have imported libraries required by mistake but me.
> First error:
>
> parser.parse();
>
> Syntax error on token "parse", Identifier expected after this token
> Second error:
> cd.close();
> Syntax error on token "close", Identifier expected after this token
> Third error:
> doc.add(new Field("content", text,Field.Store.NO <http: 
> \field.store.no>,
> Field.Index.TOKENIZED));

What is the <http:\field.store.no> stuff?  Seems like you've got a lot  
of junk in your file that isn't proper Java.

>
> Multiple markers at this line
> - Syntax error on tokens, delete these tokens
> - Syntax error on token "add", = expected after this token
> - Syntax error on token ",", delete this token
> - Syntax error on token(s), misplaced construct(s)
>> Date: Thu, 4 Dec 2008 19:17:01 +0530> From: kalanir@gmail.com> To: java-user@lucene.apache.org 
>> > Subject: Re: Pdf in Lucene?> > Hi Tiziano,> > What is the error  
>> you got? I think you can get the text easily using the> code shown  
>> below.> > > FileInputStream fi = new FileInputStream(new  
>> File("sample.pdf"));> > PDFParser parser = new PDFParser(fi);>  
>> parser.parse();> COSDocument cd = parser.getDocument();>  
>> PDFTextStripper stripper = new PDFTextStripper();> String text =  
>> stripper.getText(new PDDocument(cd));> cd.close();> > After getting  
>> the value for text you can simply create the Lucene document.> >  
>> Document doc = new Document();> doc.add(new Field("content",  
>> text,Field.Store.NO <http://field.store.no/>,>  
>> Field.Index.TOKENIZED));> >> >> >> >> > On Thu, Dec 4, 2008 at 6:20  
>> PM, tiziano bernardi <dk1982@hotmail.it>wrote:> >> >>> >> Thanks  
>> very kind ...> >> But I've tried that code but I do not work ...>  
>> >> You could send me a simple working class that uses it please?>  
>> >> Thanks> Date: Thu, 4 Dec 2008 15:19:26 +0530> From: kalanir@gmail.com 
>> >> >> To: java-user@lucene.apache.org> Subject: Re: Pdf in Lucene?>  
>> > Hi,> > In> >> my case I used PDFBox, just to extract the text  
>> from PDF document and> then> >> I created the Lucene document  
>> giving the extracted text. (I didn't use> the> >> PDFBox built in  
>> Lucene search engine). So I didn't get any> incompatibility> >>  
>> problems.> > This blog post shows the way.>> >> http://kalanir.blogspot.com/2008/08/indexing-pdf-documents-with-lucene.html 
>> >> >> > It worked perfect for me.> > Thanks.> >>  
>> _________________________________________________________________>  
>> >> Ci sai fare con l'italiano? Scoprilo con Typectionary!> >> http://typectionary.it.msn.com/ 
>> > >>> >> >> >> > --> > Kalani Ruwanpathirana> > Department of  
>> Computer Science & Engineering> > University of Moratuwa> >> > > >  
>> -- > Kalani Ruwanpathirana> Department of Computer Science &  
>> Engineering> University of Moratuwa
> _________________________________________________________________
> Fanne di tutti i colori, personalizza la tua Hotmail!
> http://imagine-windowslive.com/Hotmail/#0

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 07 04:07:19 2008
Return-Path: <java-user-return-37573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10344 invoked from network); 7 Dec 2008 04:07:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2008 04:07:18 -0000
Received: (qmail 13492 invoked by uid 500); 7 Dec 2008 04:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13455 invoked by uid 500); 7 Dec 2008 04:07:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13444 invoked by uid 99); 7 Dec 2008 04:07:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 06 Dec 2008 20:07:24 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 04:05:54 +0000
Received: by yx-out-2324.google.com with SMTP id 3so269573yxj.5
        for <java-user@lucene.apache.org>; Sat, 06 Dec 2008 20:06:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KXisqzYC7wRYooKL7tcqpklfIxHEHb414u2xT4jP5dc=;
        b=hMNlAEUWYbipl4sCNDb6sw52/fE0wmxu2m1hcid5QZY6CxIWQc7LnqcWTaDw5B2Cu5
         i4JFGI2cZIhmpiUQiatmekihC2+kM+rwRcGRQ1Dsve3QV+tiiS8GaFElQ+tM4nDlj6Js
         rW6v5bCfh7uvNUHrdES1F5OHFS1ZlW5gSXJkc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=v6bsJGNZOJN2x+Dchx9Yrq+GAO7mqZ7VA0rOgGREqCZVQtxlZRa/0TjvHkh5Sk8nxd
         zFm8O0gx3fv85sExCZKet7o+j3c37MeMJZzPsCQA+pITob/BmQAnKKIYoBe6ElAn8OqS
         uCIn3/8qIP04dFYfvlm0TPFIzCXA7MCco8eWw=
Received: by 10.142.102.5 with SMTP id z5mr803298wfb.334.1228622801535;
        Sat, 06 Dec 2008 20:06:41 -0800 (PST)
Received: by 10.143.165.13 with HTTP; Sat, 6 Dec 2008 20:06:41 -0800 (PST)
Message-ID: <867513fe0812062006l474b6d27l61a15f523ebb51cb@mail.gmail.com>
Date: Sun, 7 Dec 2008 09:36:41 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <bd818c7b0812060919x18c4e1av3767e32948fbdbbf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62392_8790776.1228622801516"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
	 <bd818c7b0812060919x18c4e1av3767e32948fbdbbf@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62392_8790776.1228622801516
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

An easy way to do that would be to index a particular term with all docs
e.g. "dummyword" could be indexed for all documents as a value for a
dummyfield or an existing field.
This way lets assume you want to fetch results for -filed1:jakarta
You could search for dummyfield:"dummyword" AND NOT filed1:jakarta

This is just one of the solution, though I still would not understand if
there's a logical reason for fetching such results.:)

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Sat, Dec 6, 2008 at 10:49 PM, no spam <mrs.nospam@gmail.com> wrote:

> We are converting a User Interface query to lucene on the back end. It has
> recently come up that users want to do some negative only queries like NOT
> "jakarta apache". What is an efficient way to do this? We do know what
> field
> they are specifying, ie -field1:jakarta
>
> On Mon, Jun 23, 2008 at 2:53 AM, Aditi Goyal <aditigupta20@gmail.com>
> wrote:
>
> > Thank you Allahbaksh for taking so much pains. The link says it cannot be
> > used alone.
> >
> > Note: The NOT operator cannot be used with just one term. For example,
> the
> > following search will return no results:
> >
> > NOT "jakarta apache"
> > Thanks,
> > Aditi
> >
> >
> > On Mon, Jun 23, 2008 at 1:10 PM, Allahbaksh Mohammedali Asadullah <
> > Allahbaksh_Asadullah@infosys.com> wrote:
> >
> > > Hi Aditi,
> > > You can search using NOT operator. You can go through below link for
> > Query
> > > details http://lucene.apache.org/java/docs/queryparsersyntax.html
> > > Warm Regards,
> > > Allahbaksh
> > >
> > > Allahbaksh Mohammedali Asadullah,
> > > Software Engineering & Technology Labs,
> > > Infosys Technolgies Limited, Electronics City,
> > > Hosur Road, Bangalore 560 100, India.
> > > *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> > > Fax: +91-80-28520362 | Mobile: +91-9845505322.
> > > http://setlabs/slim/
> > > http://allahbaksh.blogspot.com
> > >
> > >
> > > -----Original Message-----
> > > From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> > > Sent: Monday, June 23, 2008 12:06 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: lucene search options
> > >
> > > Thanks a lot Daniel, I will try this option. :)
> > > Is there a way to search for not equal to query alone?
> > >
> > > On Mon, Jun 23, 2008 at 12:03 PM, Daniel Noll <daniel@nuix.com> wrote:
> > >
> > > > On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
> > > > > I think wildcard (*) cannot be used in the beginning :(
> > > >
> > > > Wrong:
> > > >
> > > >
> > > >
> > >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard(boolean)<http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29>
> > <
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> > >
> > > <
> > >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> > > >
> > > >
> > > > Daniel
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > > **************** CAUTION - Disclaimer *****************
> > > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> > > solely
> > > for the use of the addressee(s). If you are not the intended recipient,
> > > please
> > > notify the sender by e-mail and delete the original message. Further,
> you
> > > are not
> > > to copy, disclose, or distribute this e-mail or its contents to any
> other
> > > person and
> > > any such actions are unlawful. This e-mail may contain viruses. Infosys
> > has
> > > taken
> > > every reasonable precaution to minimize this risk, but is not liable
> for
> > > any damage
> > > you may sustain as a result of any virus in this e-mail. You should
> carry
> > > out your
> > > own virus checks before opening the e-mail or attachment. Infosys
> > reserves
> > > the
> > > right to monitor and review the content of all messages sent to or from
> > > this e-mail
> > > address. Messages sent to or from this e-mail address may be stored on
> > the
> > > Infosys e-mail system.
> > > ***INFOSYS******** End of Disclaimer ********INFOSYS***
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_62392_8790776.1228622801516--

From java-user-return-37574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 07 12:28:01 2008
Return-Path: <java-user-return-37574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64121 invoked from network); 7 Dec 2008 12:28:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2008 12:28:01 -0000
Received: (qmail 62885 invoked by uid 500); 7 Dec 2008 12:28:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62851 invoked by uid 500); 7 Dec 2008 12:28:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62840 invoked by uid 99); 7 Dec 2008 12:28:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 04:28:06 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 12:26:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L9IjL-000241-DN
	for java-user@lucene.apache.org; Sun, 07 Dec 2008 04:27:23 -0800
Message-ID: <20880541.post@talk.nabble.com>
Date: Sun, 7 Dec 2008 04:27:23 -0800 (PST)
From: mimounl <mimounl@hotmail.com>
To: java-user@lucene.apache.org
Subject: IndexWriter.flush performance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mimounl@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

In my application, I need to flush data each time a modification is made. So
each time an entry is added in the lucene index we call IndexWriter.flush
this way all data are secured on file system.

We noticed that this operation is more and more time consuming while the
size of the index raises.

How can I tune the index to have a duration constant for the flush operation
?

Before changing our logic for example flushing each "n" entries, I'd like to
be sure that there isn't something I miss.

I saw that the IndexWriter API changed in last version but our version is
2.3.1 that don't have for example the commit operation (and the flush method
is deprecated).

Thank you for your suggestions.
-- 
View this message in context: http://www.nabble.com/IndexWriter.flush-performance-tp20880541p20880541.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 07 13:28:01 2008
Return-Path: <java-user-return-37575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79741 invoked from network); 7 Dec 2008 13:28:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2008 13:28:01 -0000
Received: (qmail 84543 invoked by uid 500); 7 Dec 2008 13:28:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84510 invoked by uid 500); 7 Dec 2008 13:28:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84496 invoked by uid 99); 7 Dec 2008 13:28:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 05:28:07 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jokin.c@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 13:26:36 +0000
Received: by fg-out-1718.google.com with SMTP id l27so597807fgb.27
        for <java-user@lucene.apache.org>; Sun, 07 Dec 2008 05:27:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=i+mqlvq2CBRiTtmBTMzh2gfQeI+RfLgAkoZsHopBPOg=;
        b=J3PW14TrNvTc//KT2x9JiUsNxYOHRhwRNIxQvI0wnt27q/pm+XLchBmvK7GISHhsWZ
         /fVOUuU3FruPaqJ+Rcpi5hCvOBnMehnhbt/092yfW+FIPj6ETKYdqzvu9gSZAYA4BrSH
         SnzINlLUKhsBzISyJ+FGB71mpejo5XVSdkWv0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=W/Ht6Rpfpq+cdfCNCjqFkVgPXFrU4Xvkt1RlwdN0DBRl45i1Ah6PDUyd2XZB6cNis0
         cbfFPU8plK17k0HLy7vO0z6exmF5lhH1GsdnfyntG7ARyfUw2mJlAf0mTN6vj5K67ZeQ
         8TQtPShv9YnQVoHAhVYcMLl1W1dvd7QA0eQbU=
Received: by 10.86.76.16 with SMTP id y16mr1962625fga.17.1228656443351;
        Sun, 07 Dec 2008 05:27:23 -0800 (PST)
Received: by 10.86.33.20 with HTTP; Sun, 7 Dec 2008 05:27:23 -0800 (PST)
Message-ID: <93228c910812070527m7678204dt4bbb301454bb3981@mail.gmail.com>
Date: Sun, 7 Dec 2008 14:27:23 +0100
From: "Jokin Cuadrado" <jokin.c@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.flush performance
In-Reply-To: <20880541.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20880541.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Avery time you flush the index, you are writing a small index to the
disk. Theres a  defined value (mergefactor) that decides when it have
to merge all of those small index in a bigger one, so as the index
grown the merges are bigger. First  you merge 10 indexes of 1
document, then 10 indexes of 10 documents, then 10 indexes of 100
documents and so on. The flush (that becomes commit) it's a costly
operation, so  i suggest to refactor your logic so you can flush every
n documentes.  However, you can change the mergepolicy and do the
merges in background, so the flush operation exit quicky, but be aware
that the index is left working behind, so the performance will we very
bad.

On Sun, Dec 7, 2008 at 1:27 PM, mimounl <mimounl@hotmail.com> wrote:
>
> Hello,
>
> In my application, I need to flush data each time a modification is made. So
> each time an entry is added in the lucene index we call IndexWriter.flush
> this way all data are secured on file system.
>
> We noticed that this operation is more and more time consuming while the
> size of the index raises.
>
> How can I tune the index to have a duration constant for the flush operation
> ?
>
> Before changing our logic for example flushing each "n" entries, I'd like to
> be sure that there isn't something I miss.
>
> I saw that the IndexWriter API changed in last version but our version is
> 2.3.1 that don't have for example the commit operation (and the flush method
> is deprecated).
>
> Thank you for your suggestions.
> --
> View this message in context: http://www.nabble.com/IndexWriter.flush-performance-tp20880541p20880541.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 07 17:28:55 2008
Return-Path: <java-user-return-37576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54299 invoked from network); 7 Dec 2008 17:28:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2008 17:28:54 -0000
Received: (qmail 2369 invoked by uid 500); 7 Dec 2008 17:29:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2342 invoked by uid 500); 7 Dec 2008 17:29:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2331 invoked by uid 99); 7 Dec 2008 17:29:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 09:29:00 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 17:27:30 +0000
Received: by fg-out-1718.google.com with SMTP id l27so656102fgb.27
        for <java-user@lucene.apache.org>; Sun, 07 Dec 2008 09:28:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=www8AQkvtkfKbS+KXhm0P9B2uClyDY3axOk2ilSqV1I=;
        b=cPqKyir5VKaQBwfH0t9O5EGDr9oDF8FQcuLCixVB/X1m3e7Ask/iMPBQXHfADZC9v9
         D5HZGJH2KXVEBDfaXjNtJTw4TJWKNvMs3QoqQANEU9hU7GKx4G64XyXI0mWEY4Kd7eXM
         tEIPmhobuRTacO5kam4oQXyth+1YscLOeurU0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=cDpn1sK9WEtMEi5eZpiG8/RyD7D+jkzpAKVjOAQjoLO7mqm+MnYnzlJuk8AKf9sY7b
         0hE1V4VswGbLrRant3SeXZE1qJ5pK/L70XSVpey8quErPOfS3n56K+xLurklf6Yp3AEy
         O/IEiJ3iiQd6viCBht7ELraldoKwTtVrw8ipQ=
Received: by 10.86.72.15 with SMTP id u15mr2036536fga.45.1228670897080;
        Sun, 07 Dec 2008 09:28:17 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Sun, 7 Dec 2008 09:28:17 -0800 (PST)
Message-ID: <359a92830812070928v6064f4fbw73c81fc3ecba732f@mail.gmail.com>
Date: Sun, 7 Dec 2008 12:28:17 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <867513fe0812062006l474b6d27l61a15f523ebb51cb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70514_30651061.1228670897074"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
	 <bd818c7b0812060919x18c4e1av3767e32948fbdbbf@mail.gmail.com>
	 <867513fe0812062006l474b6d27l61a15f523ebb51cb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70514_30651061.1228670897074
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can also synthesize a clause that matches all documents and then
add the NOT to it. I haven't tried it, but you might be able to combine,
say,
MatchAllDocsQuery with your NOT query as part of a BooleanQuery...

Best
Erick

On Sat, Dec 6, 2008 at 11:06 PM, Anshum <anshumg@gmail.com> wrote:

> Hi,
>
> An easy way to do that would be to index a particular term with all docs
> e.g. "dummyword" could be indexed for all documents as a value for a
> dummyfield or an existing field.
> This way lets assume you want to fetch results for -filed1:jakarta
> You could search for dummyfield:"dummyword" AND NOT filed1:jakarta
>
> This is just one of the solution, though I still would not understand if
> there's a logical reason for fetching such results.:)
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Sat, Dec 6, 2008 at 10:49 PM, no spam <mrs.nospam@gmail.com> wrote:
>
> > We are converting a User Interface query to lucene on the back end. It
> has
> > recently come up that users want to do some negative only queries like
> NOT
> > "jakarta apache". What is an efficient way to do this? We do know what
> > field
> > they are specifying, ie -field1:jakarta
> >
> > On Mon, Jun 23, 2008 at 2:53 AM, Aditi Goyal <aditigupta20@gmail.com>
> > wrote:
> >
> > > Thank you Allahbaksh for taking so much pains. The link says it cannot
> be
> > > used alone.
> > >
> > > Note: The NOT operator cannot be used with just one term. For example,
> > the
> > > following search will return no results:
> > >
> > > NOT "jakarta apache"
> > > Thanks,
> > > Aditi
> > >
> > >
> > > On Mon, Jun 23, 2008 at 1:10 PM, Allahbaksh Mohammedali Asadullah <
> > > Allahbaksh_Asadullah@infosys.com> wrote:
> > >
> > > > Hi Aditi,
> > > > You can search using NOT operator. You can go through below link for
> > > Query
> > > > details http://lucene.apache.org/java/docs/queryparsersyntax.html
> > > > Warm Regards,
> > > > Allahbaksh
> > > >
> > > > Allahbaksh Mohammedali Asadullah,
> > > > Software Engineering & Technology Labs,
> > > > Infosys Technolgies Limited, Electronics City,
> > > > Hosur Road, Bangalore 560 100, India.
> > > > *Board: +91-80-28520261 | Extn: 53915 | Direct: 41173915.
> > > > Fax: +91-80-28520362 | Mobile: +91-9845505322.
> > > > http://setlabs/slim/
> > > > http://allahbaksh.blogspot.com
> > > >
> > > >
> > > > -----Original Message-----
> > > > From: Aditi Goyal [mailto:aditigupta20@gmail.com]
> > > > Sent: Monday, June 23, 2008 12:06 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: Re: lucene search options
> > > >
> > > > Thanks a lot Daniel, I will try this option. :)
> > > > Is there a way to search for not equal to query alone?
> > > >
> > > > On Mon, Jun 23, 2008 at 12:03 PM, Daniel Noll <daniel@nuix.com>
> wrote:
> > > >
> > > > > On Monday 23 June 2008 16:21:17 Aditi Goyal wrote:
> > > > > > I think wildcard (*) cannot be used in the beginning :(
> > > > >
> > > > > Wrong:
> > > > >
> > > > >
> > > > >
> > > >
> > >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard(boolean)<http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29>
> <
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> >
> > > <
> > >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> > > >
> > > > <
> > > >
> > >
> >
> http://lucene.apache.org/java/2_3_0/api/core/org/apache/lucene/queryParser/QueryParser.html#setAllowLeadingWildcard%28boolean%29
> > > > >
> > > > >
> > > > > Daniel
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > > **************** CAUTION - Disclaimer *****************
> > > > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> > > > solely
> > > > for the use of the addressee(s). If you are not the intended
> recipient,
> > > > please
> > > > notify the sender by e-mail and delete the original message. Further,
> > you
> > > > are not
> > > > to copy, disclose, or distribute this e-mail or its contents to any
> > other
> > > > person and
> > > > any such actions are unlawful. This e-mail may contain viruses.
> Infosys
> > > has
> > > > taken
> > > > every reasonable precaution to minimize this risk, but is not liable
> > for
> > > > any damage
> > > > you may sustain as a result of any virus in this e-mail. You should
> > carry
> > > > out your
> > > > own virus checks before opening the e-mail or attachment. Infosys
> > > reserves
> > > > the
> > > > right to monitor and review the content of all messages sent to or
> from
> > > > this e-mail
> > > > address. Messages sent to or from this e-mail address may be stored
> on
> > > the
> > > > Infosys e-mail system.
> > > > ***INFOSYS******** End of Disclaimer ********INFOSYS***
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> >
>

------=_Part_70514_30651061.1228670897074--

From java-user-return-37577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 07 18:27:01 2008
Return-Path: <java-user-return-37577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89914 invoked from network); 7 Dec 2008 18:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2008 18:27:00 -0000
Received: (qmail 23717 invoked by uid 500); 7 Dec 2008 18:27:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23682 invoked by uid 500); 7 Dec 2008 18:27:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23671 invoked by uid 99); 7 Dec 2008 18:27:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 10:27:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of blogathan.rao@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 18:25:37 +0000
Received: by wf-out-1314.google.com with SMTP id 28so838556wfc.20
        for <java-user@lucene.apache.org>; Sun, 07 Dec 2008 10:26:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=GWiOpMOBnK5xxDY8mC2siaRXFuxk+IHjoGw5sqiH+VQ=;
        b=OQXbeSVsLWuTHkYTOASEPS9qzberUsQQJ5tN2X67N5yu6GApSUvbcZUrJLVYo+V5BG
         F/2fO6Hcbv/UHDkOdApCnl29hMqEBL3DN1QU8xtEVAz+cphlEyuD4LgDnpr3Bhc43sHH
         uSI9+V4eA+YDb1xI/E3K9tX8afNKA/OamnUQA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=GeF7LyI9NY/jGHu9KE6HlufWU0cgnEj4lXnqLGOGEAca9Hc66IkoPWN94+u1BQ4dl7
         OzztVmqwZ6v+AhngbOetvuTNABitqi8mnApnscQeUNyp9tA6GWFo2OGjGNT1uq2pCS7o
         R2AzVl7B2gBYsHOn7hYTu+d5idXD0NVz9HgVY=
Received: by 10.142.153.7 with SMTP id a7mr1062592wfe.326.1228674385006;
        Sun, 07 Dec 2008 10:26:25 -0800 (PST)
Received: by 10.142.238.8 with HTTP; Sun, 7 Dec 2008 10:26:24 -0800 (PST)
Message-ID: <a7f27bc30812071026s2f2f5c32k8080f5d45ff3d836@mail.gmail.com>
Date: Sun, 7 Dec 2008 23:56:24 +0530
From: "Preetam Rao" <blogathan.rao@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem with PorterStemFilter
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48713_15755439.1228674385005"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48713_15755439.1228674385005
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am indexing three words in a document.
Then I run a phrase query on that document searching for two words at a time
and three words at a time.
I use PorterStemFilter for both searching and indexing. I am getting very
inconsistent results. Am I doing something incorrectly ?
The way I use PorterStemmer is by overriding tokenStream() method of
StandardAnalyzer and adding PorterStemFiler to the chain.
If I use StandardAnalyzer everything works fine. I am suspecting the way I
am creating the analyzer.
I printed position increments, offsets etc for both cases and did not see
any difference.

Below are the tests I am running and the full code.

tests:
Indexed content : "one two three"  search : "one two" no documents found
Indexed content : "one two three"  search : "one two three" no documents
found

Indexed content : "first second third"  search : "first second" one
documents found
Indexed content : "first second third"  search :"first second third" one
documents found

Indexed content : "good bad ugly"  search : "good bad" one documents found
Indexed content : "good bad ugly"  search :"good bad ugly" no documents
found


The below is the code:

import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.PorterStemFilter;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.Hits;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.queryParser.ParseException;
import java.io.Reader;
import java.io.IOException;


public class TestPorterStemmer {
    public static void main(String[] args) throws IOException,
ParseException {
        RAMDirectory index = new RAMDirectory();
        IndexWriter writer = new IndexWriter(index, getAnalyzer(), true,
IndexWriter.MaxFieldLength.UNLIMITED);
        Document doc = new Document();
        doc.add(new Field("content", "good bad ugly", Field.Store.YES,
Field.Index.ANALYZED));
        writer.addDocument(doc);
        writer.optimize();
        writer.close();
        IndexSearcher searcher = new IndexSearcher(index);
        QueryParser parser = new QueryParser("content", getAnalyzer());

        Query query = parser.parse("\"" + "good bad" + "\"");
        Hits hits = searcher.search(query);
        System.out.println("searched for " + query.toString() + " matched :
" + hits.length() + " documents ");

        query = parser.parse("\"" + "good bad ugly" + "\"");
        hits = searcher.search(query);
        System.out.println("searched for " + query.toString() + " matched :
" + hits.length() + " documents ");
    }

    public static StandardAnalyzer getAnalyzer() {
        return new StandardAnalyzer() {
            public TokenStream tokenStream(String fieldName, Reader reader)
{
                TokenStream result = super.tokenStream(fieldName, reader);
                return new PorterStemFilter(result);
            }
        };
    }
}

output:
searched for content:"good bad" matched : 1 documents
searched for content:"good bad ugli" matched : 0 documents

Any help is greatly appreciated...

Thanks
Preetam

------=_Part_48713_15755439.1228674385005--

From java-user-return-37578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 07 18:51:57 2008
Return-Path: <java-user-return-37578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99749 invoked from network); 7 Dec 2008 18:51:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2008 18:51:57 -0000
Received: (qmail 35394 invoked by uid 500); 7 Dec 2008 18:52:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35358 invoked by uid 500); 7 Dec 2008 18:52:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35347 invoked by uid 99); 7 Dec 2008 18:52:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 10:52:02 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 18:50:33 +0000
Received: by fk-out-0910.google.com with SMTP id 18so895863fkq.5
        for <java-user@lucene.apache.org>; Sun, 07 Dec 2008 10:51:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=A3Mn/dgV0A3/ottx8f4iNNC1gk2I/dtSg5CjRDEsa64=;
        b=stqi2ez5tcVVFYf5RLbrnS7Tst5nvyY49nGjcO8RKxDB1+ByM1MQzXi8rYKZl+PffG
         oGfqLvFmk41tC+BS3V2DdQNPqhG5oewPChvjqK1pSo6wZUczJyOnZY+SdsFP8WaQSE0b
         mbWGI3raP1Gd+g5zd9jo3zwI/HV8Lz8tDisrQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=thm5/TR68QbHl2qpdn8VD8GYNU2u4UvWm4I0BVVexg+7NKIqh/SUMj4eqDZFhoK81/
         N8AedB76mPhVgEV/9/oafXRzi5U8DqRV45jg4UGNqyEZ1+uY69ELJ54b6lv6V9FCL3RD
         NIjRxH4s88oSSkzf82HNtE5SzwyeNoqghdPSc=
Received: by 10.181.159.17 with SMTP id l17mr728654bko.14.1228675880242;
        Sun, 07 Dec 2008 10:51:20 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Sun, 7 Dec 2008 10:51:20 -0800 (PST)
Message-ID: <5d53d5770812071051g49fc6cau7ed2b142c88fd7e2@mail.gmail.com>
Date: Sun, 7 Dec 2008 14:51:20 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Fragment Highlighter Phrase?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85937_732766.1228675880246"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85937_732766.1228675880246
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Is there a way to get phrases counted in the list of fragments that come
back from Highlighter.GetBestFragments() in general.
It seems to only take words into account.

Ian

------=_Part_85937_732766.1228675880246--

From java-user-return-37579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 00:10:07 2008
Return-Path: <java-user-return-37579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97781 invoked from network); 8 Dec 2008 00:10:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 00:10:07 -0000
Received: (qmail 37538 invoked by uid 500); 8 Dec 2008 00:10:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37510 invoked by uid 500); 8 Dec 2008 00:10:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37499 invoked by uid 99); 8 Dec 2008 00:10:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 16:10:12 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 00:08:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L9Tdj-0002Ox-Nf
	for java-user@lucene.apache.org; Sun, 07 Dec 2008 16:06:19 -0800
Message-ID: <20887656.post@talk.nabble.com>
Date: Sun, 7 Dec 2008 16:06:19 -0800 (PST)
From: mimounl <mimounl@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.flush performance
In-Reply-To: <93228c910812070527m7678204dt4bbb301454bb3981@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mimounl@hotmail.com
References: <20880541.post@talk.nabble.com> <93228c910812070527m7678204dt4bbb301454bb3981@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Jokin Cuadrado wrote:
> 
> Avery time you flush the index, you are writing a small index to the
> disk. Theres a  defined value (mergefactor) that decides when it have
> to merge all of those small index in a bigger one, so as the index
> grown the merges are bigger.
> 
Don't you thing I have to migrate my lucene version to 1.4 because in this
version, it sounds like the writings of document in the index files are
independant from the merge operation ?
I mean, in last version, the merge is performed by default by a
ConcurrentMergeScheduler that will make the commit operation approximatly
constant whatever the size of the index. Is that true ?
-- 
View this message in context: http://www.nabble.com/IndexWriter.flush-performance-tp20880541p20887656.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 02:49:54 2008
Return-Path: <java-user-return-37580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51072 invoked from network); 8 Dec 2008 02:49:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 02:49:54 -0000
Received: (qmail 8484 invoked by uid 500); 8 Dec 2008 02:50:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8446 invoked by uid 500); 8 Dec 2008 02:50:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8428 invoked by uid 99); 8 Dec 2008 02:50:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 07 Dec 2008 18:49:59 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 02:48:29 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id CBD8873599
	for <java-user@lucene.apache.org>; Sun,  7 Dec 2008 18:49:16 -0800 (PST)
Message-Id: <51412F2B-89F1-4114-9675-AA32B7F64EC7@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <32a1c320812061609u60eafed8tfd924851d7d207ab@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IR Pattern Language
Date: Sun, 7 Dec 2008 21:49:15 -0500
References: <32a1c320812061609u60eafed8tfd924851d7d207ab@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you fill in some background on this?  I did a google for "pattern  
language for IR" and came up with a few hits, but am not sure what you  
have in mind.  What problem are you trying to solve, or are you just  
looking to fill in knowledge?

-Grant

On Dec 6, 2008, at 7:09 PM, Robert Young wrote:

> Hi,
>
> Does anyone know of a pattern language for text processing and  
> information
> retrieval?
>
> Cheers
> Rob


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 08:20:39 2008
Return-Path: <java-user-return-37581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71346 invoked from network); 8 Dec 2008 08:20:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 08:20:39 -0000
Received: (qmail 28315 invoked by uid 500); 8 Dec 2008 08:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28278 invoked by uid 500); 8 Dec 2008 08:20:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28267 invoked by uid 99); 8 Dec 2008 08:20:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 00:20:44 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bubblenut@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 08:20:30 +0000
Received: by an-out-0708.google.com with SMTP id b2so393420ana.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 00:20:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type:references
         :x-google-sender-auth;
        bh=5NENprUO6vm9Sh7TKGioytOiB8zD7CzkI/vNjiRh8Tc=;
        b=D/tHtNt4uGzzNQfR5S388Evuv5RqpYLI+36J0FeGvpmfV2xYbaBMdPS1fnWMchSp3r
         8lGKRALFnUtJtl2yh87TGeWyMrCQrGd44FNs+/9fkp+z67q1O8pVVnDxXb5wHS2tRhs7
         6oCECZdqEV/p80Z9VYwQh9EsIl33QBYBv79zQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:references:x-google-sender-auth;
        b=COoeCFxc/9Ng3kFMaClKH2c41AB4RIBJfNRS40NjliGgc0q2KCINf3bF0UAWtLEw6w
         5E0ZjGawfcb9Wj8DYgz8IEM7JWX6gycVleNOmGkJEpDnItsQYb0pzbOpkso8kg7EMwzJ
         HJvtCvqIvp0Rn7uSe5Pu+TfnqFSEjTVuACP1M=
Received: by 10.65.84.15 with SMTP id m15mr2591487qbl.54.1228724408917;
        Mon, 08 Dec 2008 00:20:08 -0800 (PST)
Received: by 10.65.182.19 with HTTP; Mon, 8 Dec 2008 00:20:08 -0800 (PST)
Message-ID: <32a1c320812080020m9fb88aw4ffbbf34bae9483c@mail.gmail.com>
Date: Mon, 8 Dec 2008 08:20:08 +0000
From: "Robert Young" <rob@roryoung.co.uk>
Sender: bubblenut@gmail.com
To: java-user@lucene.apache.org
Subject: Re: IR Pattern Language
In-Reply-To: <51412F2B-89F1-4114-9675-AA32B7F64EC7@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40685_29916135.1228724408900"
References: <32a1c320812061609u60eafed8tfd924851d7d207ab@mail.gmail.com>
	 <51412F2B-89F1-4114-9675-AA32B7F64EC7@apache.org>
X-Google-Sender-Auth: d762f1ce7a8fe153
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40685_29916135.1228724408900
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am not trying to solve a specific problem right now, I'm just looking for
a set of patterns for solving common problems in text processing and IR.
Things like token sources and filters, query parsing, index distribution.

Cheers
Rob

On Mon, Dec 8, 2008 at 2:49 AM, Grant Ingersoll <gsingers@apache.org> wrote:

> Can you fill in some background on this?  I did a google for "pattern
> language for IR" and came up with a few hits, but am not sure what you have
> in mind.  What problem are you trying to solve, or are you just looking to
> fill in knowledge?
>
> -Grant
>
>
> On Dec 6, 2008, at 7:09 PM, Robert Young wrote:
>
>  Hi,
>>
>> Does anyone know of a pattern language for text processing and information
>> retrieval?
>>
>> Cheers
>> Rob
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40685_29916135.1228724408900--

From java-user-return-37582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 08:57:24 2008
Return-Path: <java-user-return-37582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81788 invoked from network); 8 Dec 2008 08:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 08:57:24 -0000
Received: (qmail 47380 invoked by uid 500); 8 Dec 2008 08:57:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47341 invoked by uid 500); 8 Dec 2008 08:57:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47330 invoked by uid 99); 8 Dec 2008 08:57:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 00:57:30 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 08:57:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L9bvD-0002Xl-4a
	for java-user@lucene.apache.org; Mon, 08 Dec 2008 00:56:55 -0800
Message-ID: <20890720.post@talk.nabble.com>
Date: Mon, 8 Dec 2008 00:56:55 -0800 (PST)
From: buFka <sirakov@gmail.com>
To: java-user@lucene.apache.org
Subject: Improving Indexing Performance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sirakov@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

I can already index with Lucene a very large database (8.0 million entries).
For indexing and search, i'm using the follow example:

http://kalanir.blogspot.com/2008/06/indexing-database-using-apache-lucene.html

The indexing takes about 4 hours. Can I speed up this process?


-- 
View this message in context: http://www.nabble.com/Improving-Indexing-Performance-tp20890720p20890720.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 09:09:23 2008
Return-Path: <java-user-return-37583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86431 invoked from network); 8 Dec 2008 09:09:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 09:09:23 -0000
Received: (qmail 58049 invoked by uid 500); 8 Dec 2008 09:09:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57614 invoked by uid 500); 8 Dec 2008 09:09:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57603 invoked by uid 99); 8 Dec 2008 09:09:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 01:09:30 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 09:09:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L9c6p-000368-7Y
	for java-user@lucene.apache.org; Mon, 08 Dec 2008 01:08:55 -0800
Message-ID: <20890723.post@talk.nabble.com>
Date: Mon, 8 Dec 2008 01:08:55 -0800 (PST)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Improving Indexing Performance
In-Reply-To: <20890720.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <20890720.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi buFka,

take a look to
http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
e.g. your example does not set mergeFactor or RAMBufferSizeMB

I also like the last tip: "Run a Java profiler"
Because in my case, the leak of performance vanished after I switched from
jdom to saxon. 
(we are indexing xml-Files not database tables)

Best regards
  Karsten


buFka wrote:
> 
> Hi all,
> 
> I can already index with Lucene a very large database (8.0 million
> entries). For indexing and search, i'm using the follow example:
> 
> http://kalanir.blogspot.com/2008/06/indexing-database-using-apache-lucene.html
> 
> The indexing takes about 4 hours. Can I speed up this process?
> 

-- 
View this message in context: http://www.nabble.com/Improving-Indexing-Performance-tp20890720p20890723.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 09:37:12 2008
Return-Path: <java-user-return-37584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97451 invoked from network); 8 Dec 2008 09:37:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 09:37:11 -0000
Received: (qmail 80771 invoked by uid 500); 8 Dec 2008 09:37:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80730 invoked by uid 500); 8 Dec 2008 09:37:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80719 invoked by uid 99); 8 Dec 2008 09:37:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 01:37:18 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 09:37:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L9cXj-0003yA-4d
	for java-user@lucene.apache.org; Mon, 08 Dec 2008 01:36:43 -0800
Message-ID: <20891965.post@talk.nabble.com>
Date: Mon, 8 Dec 2008 01:36:43 -0800 (PST)
From: buFka <sirakov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Improving Indexing Performance
In-Reply-To: <20890723.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sirakov@gmail.com
References: <20890720.post@talk.nabble.com> <20890723.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It is interesting and i think, it will help us :)

Thanks! 

buFka
-- 
View this message in context: http://www.nabble.com/Improving-Indexing-Performance-tp20890720p20891965.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 11:25:45 2008
Return-Path: <java-user-return-37585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36640 invoked from network); 8 Dec 2008 11:25:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 11:25:44 -0000
Received: (qmail 4260 invoked by uid 500); 8 Dec 2008 11:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4226 invoked by uid 500); 8 Dec 2008 11:25:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4215 invoked by uid 99); 8 Dec 2008 11:25:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 03:25:47 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 11:24:14 +0000
Received: by an-out-0708.google.com with SMTP id b2so408927ana.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 03:24:59 -0800 (PST)
Received: by 10.100.153.6 with SMTP id a6mr1374859ane.76.1228735499570;
        Mon, 08 Dec 2008 03:24:59 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id c9sm8666235ana.19.2008.12.08.03.24.58
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 08 Dec 2008 03:24:59 -0800 (PST)
Message-Id: <3072B3CA-7CF3-4205-A032-710EE28A0625@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20887656.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IndexWriter.flush performance
Date: Mon, 8 Dec 2008 06:24:57 -0500
References: <20880541.post@talk.nabble.com> <93228c910812070527m7678204dt4bbb301454bb3981@mail.gmail.com> <20887656.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Flushing is still done "synchronously" with an addDocument call.  The  
time spent is in proportion to how large the RAM buffer is, and, how  
fast your IO system accepts writes.

So, you'll be happily adding documents, until IW decides a flush is  
needed, and then it will flush (blocking) using your current thread.

But, as you noted, previously that flush would also synchronously  
merge when needed, but with ConcurrentMergeScheduler that merging is  
now done in the background.

The new commit() method is quite a bit more costly than a flush  
because it must sync the files (ensure they are persisted to stable  
storage) before continuing.

There is a nice analogy to mountain climbing: every so often, you must  
hammer a new anchor into the rock, which is your safety in case you  
fall.  You spend alot of time finding a safe spot, and hammering  
thoroughly, so that anchor will hold you if you fall, just as Lucene's  
commit spends alot of time waiting for all the "anchors" to be on  
stable storage in case the machine crashes.  In between hammering  
anchors you can climb fairly quickly simply using hands & feet to  
"temporarily" hold on, just like Lucene writes new segment files as  
"temporary" files (in that they won't survive crash), during flush.   
So you should use commit sparingly, and, open your IndexWriter with  
autoCommit=false.

Mike

mimounl wrote:

>
>
>
> Jokin Cuadrado wrote:
>>
>> Avery time you flush the index, you are writing a small index to the
>> disk. Theres a  defined value (mergefactor) that decides when it have
>> to merge all of those small index in a bigger one, so as the index
>> grown the merges are bigger.
>>
> Don't you thing I have to migrate my lucene version to 1.4 because  
> in this
> version, it sounds like the writings of document in the index files  
> are
> independant from the merge operation ?
> I mean, in last version, the merge is performed by default by a
> ConcurrentMergeScheduler that will make the commit operation  
> approximatly
> constant whatever the size of the index. Is that true ?
> -- 
> View this message in context: http://www.nabble.com/IndexWriter.flush-performance-tp20880541p20887656.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 12:18:13 2008
Return-Path: <java-user-return-37586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47761 invoked from network); 8 Dec 2008 12:18:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 12:18:13 -0000
Received: (qmail 67929 invoked by uid 500); 8 Dec 2008 12:18:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67899 invoked by uid 500); 8 Dec 2008 12:18:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67888 invoked by uid 99); 8 Dec 2008 12:18:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 04:18:18 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 12:16:48 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mB8CHXxY012483
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 12:17:34 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12322)
    via ESMTP; Mon, 08 Dec 2008 12:17:33 +0000 (GMT)
Date: Mon, 8 Dec 2008 12:17:32 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <493D105C.2030808@scalix.com>
Subject: Open IndexReader read-only
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0207.493D105D.00D0,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="------------010300030801090400090306"
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.5

--------------010300030801090400090306
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline

Hi

Can someone guide me please?

I have inherited a Lucene application and am attempting to update the 
API from 2.0 to 2.4.
I note that the 2.4 CHANGELOG talks of opening an IndexReader with 
read-only=true to improve performance.  Does anyone know how to do this?
I have been combing my predecessor's fully working code, and cannot find 
/anywhere/ where an IndexReader is actually opened!  He seems to do this 
sort of thing instead:

First he instantiates a DelayCloseIndexSearcher object, passing it a 
Directory object. (I think he got DelayCloseIndexSearcher off the net - 
according to the Javadoc, the author was Luc Vanlerberghe??). 
He then accesses the IndexReader like so:

        IndexReader reader = *searcher.getIndexReader()*;
        TermEnum te = reader.terms();
        ...

So does that mean if you don't explicitly open an IndexReader, the 
IndexSearcher will do it for you?  Or what?

Thanks,

- Chris



--------------010300030801090400090306--

From java-user-return-37587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 12:29:02 2008
Return-Path: <java-user-return-37587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56721 invoked from network); 8 Dec 2008 12:29:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 12:29:02 -0000
Received: (qmail 79043 invoked by uid 500); 8 Dec 2008 12:29:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79017 invoked by uid 500); 8 Dec 2008 12:29:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79006 invoked by uid 99); 8 Dec 2008 12:29:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 04:29:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 12:27:36 +0000
Received: by yx-out-2324.google.com with SMTP id 3so414022yxj.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 04:28:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=oSMJ2Vh6f9AqCSkBT90YpW3vyWd0b25S+IH+MyTEbdM=;
        b=Qrn1fKTmnf42V9t08H/L0vV4pxGmidVzWQLJ4GFIsWvHEGed0t+Io1zc4/aPKcjLen
         dAZBh6/xgx4pUU+2ajgV1ruGWBM5VzAUjQ9qt6vUihPSdwMLYkUIVCx+fwpH/EQi0ZV6
         DSejFb2ru74+x3QEYabIO6PGDgtr33EDG00G8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=sJHQDxRokNpK2zlW9slTBJuyGYa4zNvx69kAsZGcWUn6aHgtyzC8a0q3DhQmqbwd8J
         Q0ponMQZLrINlDalmOsh1XJSbLTgERFQtUdx2io6034sToApATssAKLOR5u0Ttann1PU
         DA6fKn6LY3yUvbzxvSjQu504UTIc2UVMdbGI0=
Received: by 10.90.73.17 with SMTP id v17mr1178055aga.25.1228739304275;
        Mon, 08 Dec 2008 04:28:24 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 5sm13375309agc.29.2008.12.08.04.28.23
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 08 Dec 2008 04:28:23 -0800 (PST)
Message-ID: <493D12E6.4020701@gmail.com>
Date: Mon, 08 Dec 2008 07:28:22 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fragment Highlighter Phrase?
References: <5d53d5770812071051g49fc6cau7ed2b142c88fd7e2@mail.gmail.com>
In-Reply-To: <5d53d5770812071051g49fc6cau7ed2b142c88fd7e2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ian Vink wrote:
> Is there a way to get phrases counted in the list of fragments that come
> back from Highlighter.GetBestFragments() in general.
> It seems to only take words into account.
>
> Ian
>
>   
Not sure I fully understand, but have you tried the SpanScorer? It 
allows the Highlighter to work with phrase/span queries.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 12:33:48 2008
Return-Path: <java-user-return-37588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58346 invoked from network); 8 Dec 2008 12:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 12:33:48 -0000
Received: (qmail 84145 invoked by uid 500); 8 Dec 2008 12:33:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84119 invoked by uid 500); 8 Dec 2008 12:33:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84108 invoked by uid 99); 8 Dec 2008 12:33:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 04:33:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 12:33:37 +0000
Received: by gxk3 with SMTP id 3so1076132gxk.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 04:33:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=ho7x53cSiA7h/7e3qfINCRB6oFTtkp4H8YUzJygogfA=;
        b=H9szG+Y74qJTZbDdrtDaXJmhABoWD+g7H2NvdmFji/0bjpilcAKaazfWd/3H2y2oFE
         YKTueFcZQRhR2JK8AG0slLxHMlHfDx6j49WcvQK2AeTnDvHZo+P0rhAmo/1CByjD+rFx
         tluoJWP7VvHABsvkbN7FXrCjmO1wMzGMxW7P4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=lhmeNNI2BcpuwGrvbEwKcbggbnqFHjwXiSu4WgSh1hnEGRzMGWIKhLIsVaf11bmbcw
         kFwzs0tHksKtlTWrLMw5rOU5K62HFpaxj7BcO4XZFa4ub/GuoDh7D19dgK+dbor22158
         G1p9n7VX1ULeFi86D1yE2RtgZaqINPT7KGj+g=
Received: by 10.90.98.13 with SMTP id v13mr1162314agb.105.1228739596682;
        Mon, 08 Dec 2008 04:33:16 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 36sm13428480aga.10.2008.12.08.04.33.16
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 08 Dec 2008 04:33:16 -0800 (PST)
Message-ID: <493D140B.2080206@gmail.com>
Date: Mon, 08 Dec 2008 07:33:15 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Open IndexReader read-only
References: <493D105C.2030808@scalix.com>
In-Reply-To: <493D105C.2030808@scalix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Bamford wrote:
>
> So does that mean if you don't explicitly open an IndexReader, the 
> IndexSearcher will do it for you?  Or what?
>
Right. The IndexReader takes a Directory, and the IndexSearcher takes an 
IndexReader - there are sugar constructors though - An IndexSearcher 
will also accept a String file path, which will be used to create a 
Directory which is used to create an IndexReader. It will also take a 
Directory, which will be used to create an IndexReader. It will also 
just accept the IndexReader.

So you have to find how that IndexReader is being created (or where) and 
change the code so that you get to create it, and when you do, do it 
read-only. It should be easier than that roundabout info sounds.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 13:38:39 2008
Return-Path: <java-user-return-37589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84394 invoked from network); 8 Dec 2008 13:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 13:38:39 -0000
Received: (qmail 62827 invoked by uid 500); 8 Dec 2008 13:38:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62482 invoked by uid 500); 8 Dec 2008 13:38:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62471 invoked by uid 99); 8 Dec 2008 13:38:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 05:38:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 13:37:11 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mB8DbqnG024325
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 13:37:52 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12322)
    via ESMTP; Mon, 08 Dec 2008 13:37:52 +0000 (GMT)
Date: Mon, 8 Dec 2008 13:37:52 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <493D2330.3080705@scalix.com>
In-Reply-To: <493D140B.2080206@gmail.com>
References: <493D105C.2030808@scalix.com>
References: <493D140B.2080206@gmail.com>
Subject: Re: Open IndexReader read-only
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0202.493D2330.0165,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Thanks Mark.

I have identified the spot where I need to do the surgery.  However, I 
discover that IndexReader is abstract, but it seems crazy that I need to 
make a concrete class for which I have no need to add any of my own 
logic...  Is there a suitable subclass I can use?  The documented ones - 
FilterIndexReader, InstantiatedIndexReader, MultiReader, ParallelReader 
- all seem too complicated for what I need.  My only requirement is to 
open it read-only!

Am I missing something?

Mark Miller wrote:
> Chris Bamford wrote:
>>
>> So does that mean if you don't explicitly open an IndexReader, the 
>> IndexSearcher will do it for you?  Or what?
>>
> Right. The IndexReader takes a Directory, and the IndexSearcher takes 
> an IndexReader - there are sugar constructors though - An 
> IndexSearcher will also accept a String file path, which will be used 
> to create a Directory which is used to create an IndexReader. It will 
> also take a Directory, which will be used to create an IndexReader. It 
> will also just accept the IndexReader.
>
> So you have to find how that IndexReader is being created (or where) 
> and change the code so that you get to create it, and when you do, do 
> it read-only. It should be easier than that roundabout info sounds.
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Chris Bamford
Senior Development Engineer
*Scalix*
chris.bamford@scalix.com
Tel: +44 (0)1344 381814
www.scalix.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 13:53:23 2008
Return-Path: <java-user-return-37590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95382 invoked from network); 8 Dec 2008 13:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 13:53:23 -0000
Received: (qmail 84977 invoked by uid 500); 8 Dec 2008 13:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84938 invoked by uid 500); 8 Dec 2008 13:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84927 invoked by uid 99); 8 Dec 2008 13:53:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 05:53:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 13:51:58 +0000
Received: by gxk3 with SMTP id 3so1102999gxk.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 05:52:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=hwmTMc71LB6akcgyPoxYqk3w4Leec+rSSEtsY5gBVlY=;
        b=YYxQhfzPLCcA29pfb+50PYSUASa+XfvXPQMO7XhqoH6vFuobdd/blblNY8hDlYKxet
         XBg912jP6qtKPF+HPr1gy7/fi+QI243ZObkrnsQSppm+o8tmcPg+Z9pj7gB0a2mgZwlC
         f82RHlBLO1rFjl7rm0mNkrO61xO4uVG0qHucE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=IRFTW9TjQnT3gHzbZ3eWfdkVKUIFM8s92CuKNhPhT4Ujhq7hYf2LGGZZDXJ7bBfQwg
         SOtSKDTJp82lHEUCg5x4j6ETQxt9/uIrQVqz1ZUySL7i5H8vkDLx2iRmvlrMxuuu5eSQ
         2+NuUk0E09UZoSYd/LLeylOY7TTQsnNeOVpeo=
Received: by 10.90.99.3 with SMTP id w3mr1192203agb.111.1228744366509;
        Mon, 08 Dec 2008 05:52:46 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 20sm13494666agd.35.2008.12.08.05.52.45
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 08 Dec 2008 05:52:46 -0800 (PST)
Message-ID: <493D26AC.2040900@gmail.com>
Date: Mon, 08 Dec 2008 08:52:44 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Open IndexReader read-only
References: <493D105C.2030808@scalix.com> <493D2330.3080705@scalix.com>
In-Reply-To: <493D2330.3080705@scalix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Look for the static factory methods on IndexReader.

- Mark

Chris Bamford wrote:
> Thanks Mark.
>
> I have identified the spot where I need to do the surgery.  However, I 
> discover that IndexReader is abstract, but it seems crazy that I need 
> to make a concrete class for which I have no need to add any of my own 
> logic...  Is there a suitable subclass I can use?  The documented ones 
> - FilterIndexReader, InstantiatedIndexReader, MultiReader, 
> ParallelReader - all seem too complicated for what I need.  My only 
> requirement is to open it read-only!
>
> Am I missing something?
>
> Mark Miller wrote:
>> Chris Bamford wrote:
>>>
>>> So does that mean if you don't explicitly open an IndexReader, the 
>>> IndexSearcher will do it for you?  Or what?
>>>
>> Right. The IndexReader takes a Directory, and the IndexSearcher takes 
>> an IndexReader - there are sugar constructors though - An 
>> IndexSearcher will also accept a String file path, which will be used 
>> to create a Directory which is used to create an IndexReader. It will 
>> also take a Directory, which will be used to create an IndexReader. 
>> It will also just accept the IndexReader.
>>
>> So you have to find how that IndexReader is being created (or where) 
>> and change the code so that you get to create it, and when you do, do 
>> it read-only. It should be easier than that roundabout info sounds.
>>
>> - Mark
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 13:54:47 2008
Return-Path: <java-user-return-37591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96467 invoked from network); 8 Dec 2008 13:54:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 13:54:46 -0000
Received: (qmail 90636 invoked by uid 500); 8 Dec 2008 13:54:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90342 invoked by uid 500); 8 Dec 2008 13:54:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90331 invoked by uid 99); 8 Dec 2008 13:54:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 05:54:52 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 13:54:38 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1457467rvb.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 05:54:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NjIgcwDMLFde4DAkd5ouezNB3jqcJxQg08kz6tXrJVE=;
        b=BcpkXJg791CUJIamA5ghFPKiilUqcOouuDtlYuhLLfvgsOo0+aW5FmRqJBYNBmhoIZ
         G14PXJEShxFMslm82fodLhYASueB7mdC2K0K/aKp39lqfYFMGgSn8yN9mmc8ULuXljnN
         AyIAajHtndLkDQA/PWkm8O2k9sETMPNqjEWMc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=w7JaqoOoNEPPNJKRb/QD/nryE/FqlfDnkH7vb/VoFFoNhbIFJ5PZFUA2p5ba4LJj2j
         Yy0JyO0LbX87ItTJNo0obVowNannF92xEQPl515ai9Dh8aVVsslb2R9cTIr+kUg3vupE
         7zKVCD2JA6p8LPkFTIn8rTXF8LDuZlvhV5sfA=
Received: by 10.141.86.4 with SMTP id o4mr1663975rvl.172.1228744456627;
        Mon, 08 Dec 2008 05:54:16 -0800 (PST)
Received: by 10.141.204.10 with HTTP; Mon, 8 Dec 2008 05:54:16 -0800 (PST)
Message-ID: <bf1404350812080554w17b7734h61e72b1e2ea8dc9c@mail.gmail.com>
Date: Mon, 8 Dec 2008 08:54:16 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: I would want to know more about the lucene implementation in C++
In-Reply-To: <829586.47027.qm@web50303.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5611_22704822.1228744456622"
References: <bf1404350812021113m6f7bd276gd34845dc8486cfce@mail.gmail.com>
	 <829586.47027.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5611_22704822.1228744456622
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you, very much.

On Thu, Dec 4, 2008 at 11:33 AM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> There is CLucene.  It's not a part of Apache, but lives on.... SourceForge,
> I think.
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
> > From: Ariel <isaacrc82@gmail.com>
> > To: lucene user <java-user@lucene.apache.org>
> > Sent: Tuesday, December 2, 2008 2:13:08 PM
> > Subject: I would want to know more about the lucene implementation in C++
> >
> > Hi everybody:
> > I have seen the lucene project for C++ has been abandoned, could you tell
> me
> > if there is another similar implementation of java lucene in C++ ???
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5611_22704822.1228744456622--

From java-user-return-37592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 14:04:41 2008
Return-Path: <java-user-return-37592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3053 invoked from network); 8 Dec 2008 14:04:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 14:04:41 -0000
Received: (qmail 99502 invoked by uid 500); 8 Dec 2008 14:04:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99477 invoked by uid 500); 8 Dec 2008 14:04:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99466 invoked by uid 99); 8 Dec 2008 14:04:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 06:04:47 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 14:03:18 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1461785rvb.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 06:04:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=rbwgFDXCOHn0l7T4Hy9JN5VS5J/Jf0quAimw9fjzBig=;
        b=n5ceWaLXP+ElBEPAmLwAAi9dX5pLPfHys4uDea0WM9fxerQyNf1UKdUTbYDd0Osp6W
         eFrhL2Y8MmSZ0AOUHFOAIG7man7OEtvB/iJ+yev9Hl0p0sLfivPH5bst+j8RFgRSFQSm
         NmXLd+TyFWfq0fZ2jJgW3S4WrHXgd7g/5HYDg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=NgEJ6JoVVxOIXJZ0xmRawx838A5Jn4RBoKA4mDpO6ULEfbLyyOWaMuW01dfFuoCshO
         60pjmMc4r1xymFHSfTGwbVqvFSiUfemC72pMO0FYebSmxubgHYWKSWcbRRIhLhy0i7OF
         +k5U1kDh+NtdF7lgZZ3tfF/xCGyXGh7uT0vSM=
Received: by 10.140.132.3 with SMTP id f3mr1678404rvd.21.1228745047416;
        Mon, 08 Dec 2008 06:04:07 -0800 (PST)
Received: by 10.141.203.20 with HTTP; Mon, 8 Dec 2008 06:04:07 -0800 (PST)
Message-ID: <359a92830812080604q441dc24cgd4296d08ae50bb2f@mail.gmail.com>
Date: Mon, 8 Dec 2008 09:04:07 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with PorterStemFilter
In-Reply-To: <a7f27bc30812071026s2f2f5c32k8080f5d45ff3d836@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59943_15024780.1228745047404"
References: <a7f27bc30812071026s2f2f5c32k8080f5d45ff3d836@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59943_15024780.1228745047404
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

your output says you couldn't find "ugli", but you indexed "ugly". I
assume that's just a typo, and the stemmer probably makes it moot
anyway....

I don't see anything obvious in the code, but here's what I'd suggest...

1> write this out to a FSDir rather than a RAMDir, get a copy of Luke
    (google "lucene luke") and examine what's actually in your index.
2> query.toString is your friend to find out how the query is actually
     passed to the searcher.
3> You are explicitly doing phrase queries by quoting the string, but
      that should be OK.

FWIW
Erick

On Sun, Dec 7, 2008 at 1:26 PM, Preetam Rao <blogathan.rao@gmail.com> wrote:

> Hi,
>
> I am indexing three words in a document.
> Then I run a phrase query on that document searching for two words at a
> time
> and three words at a time.
> I use PorterStemFilter for both searching and indexing. I am getting very
> inconsistent results. Am I doing something incorrectly ?
> The way I use PorterStemmer is by overriding tokenStream() method of
> StandardAnalyzer and adding PorterStemFiler to the chain.
> If I use StandardAnalyzer everything works fine. I am suspecting the way I
> am creating the analyzer.
> I printed position increments, offsets etc for both cases and did not see
> any difference.
>
> Below are the tests I am running and the full code.
>
> tests:
> Indexed content : "one two three"  search : "one two" no documents found
> Indexed content : "one two three"  search : "one two three" no documents
> found
>
> Indexed content : "first second third"  search : "first second" one
> documents found
> Indexed content : "first second third"  search :"first second third" one
> documents found
>
> Indexed content : "good bad ugly"  search : "good bad" one documents found
> Indexed content : "good bad ugly"  search :"good bad ugly" no documents
> found
>
>
> The below is the code:
>
> import org.apache.lucene.store.RAMDirectory;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.analysis.TokenStream;
> import org.apache.lucene.analysis.PorterStemFilter;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.Hits;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.queryParser.ParseException;
> import java.io.Reader;
> import java.io.IOException;
>
>
> public class TestPorterStemmer {
>    public static void main(String[] args) throws IOException,
> ParseException {
>        RAMDirectory index = new RAMDirectory();
>        IndexWriter writer = new IndexWriter(index, getAnalyzer(), true,
> IndexWriter.MaxFieldLength.UNLIMITED);
>        Document doc = new Document();
>        doc.add(new Field("content", "good bad ugly", Field.Store.YES,
> Field.Index.ANALYZED));
>        writer.addDocument(doc);
>        writer.optimize();
>        writer.close();
>        IndexSearcher searcher = new IndexSearcher(index);
>        QueryParser parser = new QueryParser("content", getAnalyzer());
>
>        Query query = parser.parse("\"" + "good bad" + "\"");
>        Hits hits = searcher.search(query);
>        System.out.println("searched for " + query.toString() + " matched :
> " + hits.length() + " documents ");
>
>        query = parser.parse("\"" + "good bad ugly" + "\"");
>        hits = searcher.search(query);
>        System.out.println("searched for " + query.toString() + " matched :
> " + hits.length() + " documents ");
>    }
>
>    public static StandardAnalyzer getAnalyzer() {
>        return new StandardAnalyzer() {
>            public TokenStream tokenStream(String fieldName, Reader reader)
> {
>                TokenStream result = super.tokenStream(fieldName, reader);
>                return new PorterStemFilter(result);
>            }
>        };
>    }
> }
>
> output:
> searched for content:"good bad" matched : 1 documents
> searched for content:"good bad ugli" matched : 0 documents
>
> Any help is greatly appreciated...
>
> Thanks
> Preetam
>

------=_Part_59943_15024780.1228745047404--

From java-user-return-37593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 14:07:35 2008
Return-Path: <java-user-return-37593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5165 invoked from network); 8 Dec 2008 14:07:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 14:07:34 -0000
Received: (qmail 4565 invoked by uid 500); 8 Dec 2008 14:07:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4237 invoked by uid 500); 8 Dec 2008 14:07:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4226 invoked by uid 99); 8 Dec 2008 14:07:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 06:07:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 14:07:24 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1463176rvb.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 06:07:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Q1Wr6U/eC8loNUpd9BNZ5kdSbLd3NV/VUM0GbfU9Uw8=;
        b=GC0V/GIeazox8aZ/ON0ZuECPxjVus2e+whg07Cj7eJ/bon/yK0C1Vmh9gaESEGj+nP
         MeRqrFy+yoh6JETYuATKv4PjqcJq5IDxPwFzGWPDMi29zSCUCakEVwUUsD3l6hf7QTMC
         UXr3Ab7jihEHPxF/lmFlC5MkmWWL+kdhYkH1A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OkkK+XOve3WPsHzF+SW9fYNWdUQeC7Xbt3UvKxP6q3CnQzAc0LUEwC7l/9a5C7uKzn
         F8Ki7gAUuNidsWy1vHeTyYQ0qYFbl72xbntjKhLglxcT/j3Pvz1PXNpeynHsqdnvUl/8
         cSHTWQjCaf62UsRlLHyRdqHtSdLBZxH/LtRMM=
Received: by 10.140.201.8 with SMTP id y8mr1678150rvf.101.1228745223386;
        Mon, 08 Dec 2008 06:07:03 -0800 (PST)
Received: by 10.141.203.20 with HTTP; Mon, 8 Dec 2008 06:07:03 -0800 (PST)
Message-ID: <359a92830812080607x6c68a67excacc9a0955be3bbb@mail.gmail.com>
Date: Mon, 8 Dec 2008 09:07:03 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IR Pattern Language
In-Reply-To: <32a1c320812080020m9fb88aw4ffbbf34bae9483c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59974_22071131.1228745223372"
References: <32a1c320812061609u60eafed8tfd924851d7d207ab@mail.gmail.com>
	 <51412F2B-89F1-4114-9675-AA32B7F64EC7@apache.org>
	 <32a1c320812080020m9fb88aw4ffbbf34bae9483c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59974_22071131.1228745223372
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This still doesn't tell us why you care. Nor have you explained
what IR stands for in your usage. Nor what you want Lucene
to do in that space. It's really hard to respond to such a vague
question usefully.

Best
Erick

On Mon, Dec 8, 2008 at 3:20 AM, Robert Young <rob@roryoung.co.uk> wrote:

> I am not trying to solve a specific problem right now, I'm just looking for
> a set of patterns for solving common problems in text processing and IR.
> Things like token sources and filters, query parsing, index distribution.
>
> Cheers
> Rob
>
> On Mon, Dec 8, 2008 at 2:49 AM, Grant Ingersoll <gsingers@apache.org>
> wrote:
>
> > Can you fill in some background on this?  I did a google for "pattern
> > language for IR" and came up with a few hits, but am not sure what you
> have
> > in mind.  What problem are you trying to solve, or are you just looking
> to
> > fill in knowledge?
> >
> > -Grant
> >
> >
> > On Dec 6, 2008, at 7:09 PM, Robert Young wrote:
> >
> >  Hi,
> >>
> >> Does anyone know of a pattern language for text processing and
> information
> >> retrieval?
> >>
> >> Cheers
> >> Rob
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_59974_22071131.1228745223372--

From java-user-return-37594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 14:11:31 2008
Return-Path: <java-user-return-37594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7937 invoked from network); 8 Dec 2008 14:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 14:11:31 -0000
Received: (qmail 10789 invoked by uid 500); 8 Dec 2008 14:11:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10758 invoked by uid 500); 8 Dec 2008 14:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10747 invoked by uid 99); 8 Dec 2008 14:11:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 06:11:37 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 14:10:04 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mB8EAnjB018290
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 14:10:49 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12322)
    via ESMTP; Mon, 08 Dec 2008 14:10:48 +0000 (GMT)
Date: Mon, 8 Dec 2008 14:10:48 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <493D2AE8.9030601@scalix.com>
In-Reply-To: <493D26AC.2040900@gmail.com>
References: <493D105C.2030808@scalix.com>
References: <493D2330.3080705@scalix.com>
References: <493D26AC.2040900@gmail.com>
Subject: Re: Open IndexReader read-only
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0205.493D2AE9.0024,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="------------010404000306060306070008"
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.5

--------------010404000306060306070008
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline

Mark

 > Look for the static factory methods on IndexReader.

I take it you mean IndexReader.open (dir, true) ?
If so, how do I then pass that into DelayCloseIndexSearcher() so that I 
can continue to rely on all the existing calls like:

     IndexReader reader = contentSearcher.getIndexReader();

Put another way, how do I associate the static IndexReader with an 
IndexSearcher object so I can use getIndexReader() to get it again?

Thanks for your continued help with this  :-)

Chris

Mark Miller wrote:
> Look for the static factory methods on IndexReader.
>
> - Mark
>
> Chris Bamford wrote:
>> Thanks Mark.
>>
>> I have identified the spot where I need to do the surgery.  However, 
>> I discover that IndexReader is abstract, but it seems crazy that I 
>> need to make a concrete class for which I have no need to add any of 
>> my own logic...  Is there a suitable subclass I can use?  The 
>> documented ones - FilterIndexReader, InstantiatedIndexReader, 
>> MultiReader, ParallelReader - all seem too complicated for what I 
>> need.  My only requirement is to open it read-only!
>>
>> Am I missing something?
>>
>> Mark Miller wrote:
>>> Chris Bamford wrote:
>>>>
>>>> So does that mean if you don't explicitly open an IndexReader, the 
>>>> IndexSearcher will do it for you?  Or what?
>>>>
>>> Right. The IndexReader takes a Directory, and the IndexSearcher 
>>> takes an IndexReader - there are sugar constructors though - An 
>>> IndexSearcher will also accept a String file path, which will be 
>>> used to create a Directory which is used to create an IndexReader. 
>>> It will also take a Directory, which will be used to create an 
>>> IndexReader. It will also just accept the IndexReader.
>>>
>>> So you have to find how that IndexReader is being created (or where) 
>>> and change the code so that you get to create it, and when you do, 
>>> do it read-only. It should be easier than that roundabout info sounds.
>>>
>>> - Mark
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Chris Bamford
Senior Development Engineer
*Scalix*
chris.bamford@scalix.com
Tel: +44 (0)1344 381814
www.scalix.com

--------------010404000306060306070008--

From java-user-return-37595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 14:17:57 2008
Return-Path: <java-user-return-37595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13942 invoked from network); 8 Dec 2008 14:17:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 14:17:57 -0000
Received: (qmail 21843 invoked by uid 500); 8 Dec 2008 14:18:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21816 invoked by uid 500); 8 Dec 2008 14:18:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21805 invoked by uid 99); 8 Dec 2008 14:18:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 06:18:03 -0800
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.142 as permitted sender)
Received: from [32.97.182.142] (HELO e2.ny.us.ibm.com) (32.97.182.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 14:16:31 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e2.ny.us.ibm.com (8.13.1/8.13.1) with ESMTP id mB8EGeBN018282
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 09:16:40 -0500
Received: from d01av02.pok.ibm.com (d01av02.pok.ibm.com [9.56.224.216])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v9.1) with ESMTP id mB8EHJxC118986
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 09:17:19 -0500
Received: from d01av02.pok.ibm.com (loopback [127.0.0.1])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id mB8EGnqB032604
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 09:16:49 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av02.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id mB8EGnId032598
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 09:16:49 -0500
In-Reply-To: <5d53d5770812051457q76c3c47fw820e48ad7c7520d0@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: TopDocs - Get all docs?
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFBA2608AA.99567520-ON85257519.004E328A-85257519.004E6B04@us.ibm.com>
Date: Mon, 8 Dec 2008 09:17:17 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V85_10262008HFIGS1|October
 26, 2008) at 12/08/2008 09:17:18,
	Serialize complete at 12/08/2008 09:17:18
Content-Type: multipart/alternative; boundary="=_alternative 004E6A7485257519_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 004E6A7485257519_=
Content-Type: text/plain; charset="US-ASCII"

I have a need to get the list of all "empid"s (defined by me) in the index 
so that I can remove the ones that are "stale" by my definition; in this 
snippet I'm returning all the "empids" for later processing, but the core 
is very simple.

        public Vector getIndexIds() throws Exception {
 
                Vector vec = new Vector();
                IndexReader ireader = IndexReader.open(directoryName);
                int numdocs = ireader.numDocs();
                for (int i=0; i<numdocs; i++) {
                        Document doc = ireader.document(i);
                        Field field = doc.getField("empid");
                        if (field==null) {
                                continue;
                        }
                        String contents = field.stringValue();
                        vec.add(contents);
                }
                return vec;
        }

Donna L. Gresh
Business Analytics and Mathematical Sciences 
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com


"Ian Vink" <ianvink@gmail.com> wrote on 12/05/2008 05:57:20 PM:

> Is there an easy way to get all the documents in the index?
> Kinda like this:
> 
> TopDocs everything = ???.GetAllDocuments();

--=_alternative 004E6A7485257519_=--

From java-user-return-37596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 14:28:54 2008
Return-Path: <java-user-return-37596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19336 invoked from network); 8 Dec 2008 14:28:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 14:28:54 -0000
Received: (qmail 36440 invoked by uid 500); 8 Dec 2008 14:28:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36406 invoked by uid 500); 8 Dec 2008 14:28:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36395 invoked by uid 99); 8 Dec 2008 14:28:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 06:28:58 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 14:27:28 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1472506rvb.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 06:28:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=cy3JQEhEgVa/XVYL3rMrshKS3Iq4suSNGN9yOTBGsUE=;
        b=lNIXV8JCelm3yWdp8flkcJ+6IKc+hDKNupyNL4Xm/98+BNLoq43Z3L2RiQpWoXqhAi
         +9L9ZMT961c0j1yE3oGZ0OrlCyc167TQjUud3eT7Wb0Q7G3EiFzF9ZOcgR+CUyPo1cka
         OnQFTcQ/dsq06tOmsAZ4eH/g2OccWI84hSw44=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=d1bTr4GIiQ1znaBn9Fr4CfEcJTSQ9iX0MCo+agqzt3+Cdm6qqosdLCdzuWQ1ahx/yv
         wCQkGAEAWTt1vOpv62VnLup/E6cl7ZA7YFR/bI97cdMHLk/vvjkjJDRnq7qbUghNQNR0
         E6UgQh70eXaofhun9S7AO4wM4pKgGlvjrC9N4=
Received: by 10.141.105.18 with SMTP id h18mr1685573rvm.109.1228746496890;
        Mon, 08 Dec 2008 06:28:16 -0800 (PST)
Received: by 10.141.203.20 with HTTP; Mon, 8 Dec 2008 06:28:16 -0800 (PST)
Message-ID: <359a92830812080628h644e4a5bofd28d7860953b84e@mail.gmail.com>
Date: Mon, 8 Dec 2008 09:28:16 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocs - Get all docs?
In-Reply-To: <OFBA2608AA.99567520-ON85257519.004E328A-85257519.004E6B04@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60117_28416736.1228746496882"
References: <5d53d5770812051457q76c3c47fw820e48ad7c7520d0@mail.gmail.com>
	 <OFBA2608AA.99567520-ON85257519.004E328A-85257519.004E6B04@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60117_28416736.1228746496882
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

is empid indexed? If it is this should run *much* faster if you used
TermEnum/TermDocs to fetch all the empids......

FWIW
Erick

On Mon, Dec 8, 2008 at 9:17 AM, Donna L Gresh <gresh@us.ibm.com> wrote:

> I have a need to get the list of all "empid"s (defined by me) in the index
> so that I can remove the ones that are "stale" by my definition; in this
> snippet I'm returning all the "empids" for later processing, but the core
> is very simple.
>
>        public Vector getIndexIds() throws Exception {
>
>                Vector vec = new Vector();
>                IndexReader ireader = IndexReader.open(directoryName);
>                int numdocs = ireader.numDocs();
>                for (int i=0; i<numdocs; i++) {
>                        Document doc = ireader.document(i);
>                        Field field = doc.getField("empid");
>                        if (field==null) {
>                                continue;
>                        }
>                        String contents = field.stringValue();
>                        vec.add(contents);
>                }
>                return vec;
>        }
>
> Donna L. Gresh
> Business Analytics and Mathematical Sciences
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com
>
>
> "Ian Vink" <ianvink@gmail.com> wrote on 12/05/2008 05:57:20 PM:
>
> > Is there an easy way to get all the documents in the index?
> > Kinda like this:
> >
> > TopDocs everything = ???.GetAllDocuments();
>

------=_Part_60117_28416736.1228746496882--

From java-user-return-37597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 15:25:18 2008
Return-Path: <java-user-return-37597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36783 invoked from network); 8 Dec 2008 15:25:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 15:25:18 -0000
Received: (qmail 26346 invoked by uid 500); 8 Dec 2008 15:25:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26315 invoked by uid 500); 8 Dec 2008 15:25:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26304 invoked by uid 99); 8 Dec 2008 15:25:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 07:25:23 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mrs.nospam@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 15:25:09 +0000
Received: by gxk3 with SMTP id 3so1149931gxk.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 07:24:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5hzVf0G91r0Sjn/g4qPOSocTkVnkRDQd6d36AmUYmf0=;
        b=uzZYwgSbkzBKJs7aFELqprkiKTwpWP7FRy54BMjpa04Pj1dGgN8SoaG9lo76gapzSJ
         ryXp1cMnS+qOFy8Dk/FXmv/R7qF3UIFC4242YLtNcLiRF1HsGKl0RPk95fWlfXlnqU3x
         0yHFYWaAbCbaPd14JdTrWvSGNs9mKMdkw6/qM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=bFECMPsh8eObAbC6fkSPYcarjvMezD+6N6tGMiCHm99v/ToxCE8OuitkJWz/HYaf06
         3bkSkiAKOKq6fNqmr/iIxmtcwgHKhNRyy0505CnISPtFyyl+flYRchQh96aC+1vfy+PT
         Wmj3hhr4FszZo7YUGBS3Brt24f+GnsajKFX7c=
Received: by 10.150.57.17 with SMTP id f17mr8119533yba.151.1228749888227;
        Mon, 08 Dec 2008 07:24:48 -0800 (PST)
Received: by 10.151.133.5 with HTTP; Mon, 8 Dec 2008 07:24:48 -0800 (PST)
Message-ID: <bd818c7b0812080724r74012982p92c8eb5dbfe64e38@mail.gmail.com>
Date: Mon, 8 Dec 2008 10:24:48 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <867513fe0812062006l474b6d27l61a15f523ebb51cb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58364_27164998.1228749888230"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
	 <bd818c7b0812060919x18c4e1av3767e32948fbdbbf@mail.gmail.com>
	 <867513fe0812062006l474b6d27l61a15f523ebb51cb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58364_27164998.1228749888230
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The reason our users want to do this is because they want to search for
instances where certain negative conditions are true.  My client is the news
industry and this is metadata for things like reporter, type, etc.
 Sometimes you want -reporter:mark for example and this is the only criteria
to search against the index.

Am I thinking about this wrong?

I did try using the MatchAllDocsQuery class and it expands to something like
this:

summary:matchalldocsquery -reporter:*mark*

but I don't get any results which is not what I expect for my does not
contain query above.

On Sat, Dec 6, 2008 at 11:06 PM, Anshum <anshumg@gmail.com> wrote:

> Hi,
>
> An easy way to do that would be to index a particular term with all docs
> e.g. "dummyword" could be indexed for all documents as a value for a
> dummyfield or an existing field.
> This way lets assume you want to fetch results for -filed1:jakarta
> You could search for dummyfield:"dummyword" AND NOT filed1:jakarta
>
> This is just one of the solution, though I still would not understand if
> there's a logical reason for fetching such results.:)
>
> --

------=_Part_58364_27164998.1228749888230--

From java-user-return-37599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 15:54:59 2008
Return-Path: <java-user-return-37599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46100 invoked from network); 8 Dec 2008 15:54:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 15:54:58 -0000
Received: (qmail 65962 invoked by uid 500); 8 Dec 2008 15:54:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65897 invoked by uid 500); 8 Dec 2008 15:54:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65873 invoked by uid 99); 8 Dec 2008 15:54:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 07:54:57 -0800
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.143 as permitted sender)
Received: from [32.97.182.143] (HELO e3.ny.us.ibm.com) (32.97.182.143)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 15:54:42 +0000
Received: from d01relay02.pok.ibm.com (d01relay02.pok.ibm.com [9.56.227.234])
	by e3.ny.us.ibm.com (8.13.1/8.13.1) with ESMTP id mB8Fri2m014176
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 10:53:44 -0500
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay02.pok.ibm.com (8.13.8/8.13.8/NCO v9.1) with ESMTP id mB8FsLDr164172
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 10:54:21 -0500
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id mB8GsVHS028682
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 11:54:31 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id mB8GsV14028663
	for <java-user@lucene.apache.org>; Mon, 8 Dec 2008 11:54:31 -0500
In-Reply-To: <359a92830812080628h644e4a5bofd28d7860953b84e@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: TopDocs - Get all docs?
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF9F3B70E4.BB0693A0-ON85257519.005703DA-85257519.00574D44@us.ibm.com>
Date: Mon, 8 Dec 2008 10:54:21 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V85_10262008HFIGS1|October
 26, 2008) at 12/08/2008 10:54:21,
	Serialize complete at 12/08/2008 10:54:21
Content-Type: multipart/alternative; boundary="=_alternative 00574CC185257519_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00574CC185257519_=
Content-Type: text/plain; charset="US-ASCII"

Erick-
Thanks for the pointer; in my app the difference is between 30 
milliseconds and 45 milliseconds (and this is a once-a-day kind of thing), 
but hey it's always worth doing something the better way in case my index 
ever gets a whole lot bigger or the use case changes-- thanks.

Donna L. Gresh
Business Analytics and Mathematical Sciences 
IBM T.J. Watson Research Center
(914) 945-2472
http://www.research.ibm.com/people/g/donnagresh
gresh@us.ibm.com


"Erick Erickson" <erickerickson@gmail.com> wrote on 12/08/2008 09:28:16 
AM:

> is empid indexed? If it is this should run *much* faster if you used
> TermEnum/TermDocs to fetch all the empids......
> 
> FWIW
> Erick

--=_alternative 00574CC185257519_=--

From java-user-return-37598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 15:54:59 2008
Return-Path: <java-user-return-37598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46132 invoked from network); 8 Dec 2008 15:54:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 15:54:59 -0000
Received: (qmail 65951 invoked by uid 500); 8 Dec 2008 15:54:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65893 invoked by uid 500); 8 Dec 2008 15:54:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65872 invoked by uid 99); 8 Dec 2008 15:54:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 07:54:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 15:53:27 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1510405rvb.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 07:54:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=RPXI0h0TGc2RRAAr2IMhyUrLE6nM3bET7EDUzPio77w=;
        b=cGSj+CJMphDzasrGKG857B8dibQZxm+d7YTPC2sHI0ilqC05LjebBNk7O5NtcA+nHk
         4iCkjhKdpdwuZ2Q9Avdt26SyseEdDfjs1ktJRUe7aMBtB3jlFL9XNMC9m5w1ksVe4Dzb
         uFmBuB3i40pm5n3mTaaJFQGSwWY0yvQgvrHF8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=SiSCaEHXFCYS1FG2k5piK7uJH1eEEzxLbKjWeoqyaiM2Ku1S7QkUIu2FQy+R+BT1Jr
         4uL6xq1Cf9O2j0Iw+NhYEdNuVpx0LXxQbrdMukcNMaeh8gsuzlqy2ZIGSW9GmzbY2pzv
         OuAiivKcosguEf2j+JsMr6I89SRW+NZ6XaaAA=
Received: by 10.141.29.21 with SMTP id g21mr1722724rvj.44.1228751655978;
        Mon, 08 Dec 2008 07:54:15 -0800 (PST)
Received: by 10.141.203.20 with HTTP; Mon, 8 Dec 2008 07:54:15 -0800 (PST)
Message-ID: <359a92830812080754p886b0f9ncd9f8c5eaf51df69@mail.gmail.com>
Date: Mon, 8 Dec 2008 10:54:15 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <bd818c7b0812080724r74012982p92c8eb5dbfe64e38@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61831_29639571.1228751655977"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
	 <bd818c7b0812060919x18c4e1av3767e32948fbdbbf@mail.gmail.com>
	 <867513fe0812062006l474b6d27l61a15f523ebb51cb@mail.gmail.com>
	 <bd818c7b0812080724r74012982p92c8eb5dbfe64e38@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61831_29639571.1228751655977
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you enabled leading wildcards? They are not (or at least weren't
last I knew) enabled by default....

<<<QueryParser.setAllowLeadingWildcard( true )>>>

from


http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-4d62118417eaef0dcb87f4370583f809848ea695

Best
Erick

On Mon, Dec 8, 2008 at 10:24 AM, no spam <mrs.nospam@gmail.com> wrote:

> The reason our users want to do this is because they want to search for
> instances where certain negative conditions are true.  My client is the
> news
> industry and this is metadata for things like reporter, type, etc.
>  Sometimes you want -reporter:mark for example and this is the only
> criteria
> to search against the index.
>
> Am I thinking about this wrong?
>
> I did try using the MatchAllDocsQuery class and it expands to something
> like
> this:
>
> summary:matchalldocsquery -reporter:*mark*
>
> but I don't get any results which is not what I expect for my does not
> contain query above.
>
> On Sat, Dec 6, 2008 at 11:06 PM, Anshum <anshumg@gmail.com> wrote:
>
> > Hi,
> >
> > An easy way to do that would be to index a particular term with all docs
> > e.g. "dummyword" could be indexed for all documents as a value for a
> > dummyfield or an existing field.
> > This way lets assume you want to fetch results for -filed1:jakarta
> > You could search for dummyfield:"dummyword" AND NOT filed1:jakarta
> >
> > This is just one of the solution, though I still would not understand if
> > there's a logical reason for fetching such results.:)
> >
> > --
>

------=_Part_61831_29639571.1228751655977--

From java-user-return-37600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 15:58:19 2008
Return-Path: <java-user-return-37600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46994 invoked from network); 8 Dec 2008 15:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 15:58:19 -0000
Received: (qmail 73897 invoked by uid 500); 8 Dec 2008 15:58:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73855 invoked by uid 500); 8 Dec 2008 15:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73844 invoked by uid 99); 8 Dec 2008 15:58:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 07:58:25 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 15:56:55 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1511963rvb.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 07:57:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=qNW1X3ssfjcz4eGbPxl02K3Hz7Qe+Sc+/4IOzk8hp3o=;
        b=MArEIXewGjvOsux4zZx/0ax5Xs2JzBPQZjgR0Bgq19mOc92j8L6N3THI4DNjSCnnKL
         OmfqxSOfYo7/eD50SP+r9MKWLZgVfKThYikv/EQLBwE50Pdelfy9vqNPLbKW1FecnOiO
         O4hgPFaovrbW7AEQzvtLXvgTP8lGLvucbpdW8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=QfZI2Rm/18YwfPYBEMSavgFt28WOq8tprYAa9VaSMiMkYzUC+KuJntwadbqmVJAB01
         NwIZJBZApNiydcGDBba0rfxIYkr+FjS5+WUki0vQj2EfUL0vdYvgY3445SyXv1mQfp2u
         cp22WZ9ps8w1844nwLetQBdKBCp2Y037UtqOs=
Received: by 10.141.74.18 with SMTP id b18mr1700428rvl.48.1228751863862;
        Mon, 08 Dec 2008 07:57:43 -0800 (PST)
Received: by 10.141.203.20 with HTTP; Mon, 8 Dec 2008 07:57:43 -0800 (PST)
Message-ID: <359a92830812080757x1c43ede8y54843688b7815bb@mail.gmail.com>
Date: Mon, 8 Dec 2008 10:57:43 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TopDocs - Get all docs?
In-Reply-To: <OF9F3B70E4.BB0693A0-ON85257519.005703DA-85257519.00574D44@us.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61923_22780761.1228751863867"
References: <359a92830812080628h644e4a5bofd28d7860953b84e@mail.gmail.com>
	 <OF9F3B70E4.BB0693A0-ON85257519.005703DA-85257519.00574D44@us.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61923_22780761.1228751863867
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm a great fan of not changing working code for a "might be
better sometime in the far future if lots of things change" <G>...

Erick

On Mon, Dec 8, 2008 at 10:54 AM, Donna L Gresh <gresh@us.ibm.com> wrote:

> Erick-
> Thanks for the pointer; in my app the difference is between 30
> milliseconds and 45 milliseconds (and this is a once-a-day kind of thing),
> but hey it's always worth doing something the better way in case my index
> ever gets a whole lot bigger or the use case changes-- thanks.
>
> Donna L. Gresh
> Business Analytics and Mathematical Sciences
> IBM T.J. Watson Research Center
> (914) 945-2472
> http://www.research.ibm.com/people/g/donnagresh
> gresh@us.ibm.com
>
>
> "Erick Erickson" <erickerickson@gmail.com> wrote on 12/08/2008 09:28:16
> AM:
>
> > is empid indexed? If it is this should run *much* faster if you used
> > TermEnum/TermDocs to fetch all the empids......
> >
> > FWIW
> > Erick
>

------=_Part_61923_22780761.1228751863867--

From java-user-return-37601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 16:09:49 2008
Return-Path: <java-user-return-37601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50577 invoked from network); 8 Dec 2008 16:09:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 16:09:49 -0000
Received: (qmail 90768 invoked by uid 500); 8 Dec 2008 16:09:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90741 invoked by uid 500); 8 Dec 2008 16:09:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90730 invoked by uid 99); 8 Dec 2008 16:09:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 08:09:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 16:09:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L9iff-0004hx-TM
	for java-user@lucene.apache.org; Mon, 08 Dec 2008 08:09:19 -0800
Message-ID: <20898127.post@talk.nabble.com>
Date: Mon, 8 Dec 2008 08:09:19 -0800 (PST)
From: Dora <julien.barret@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Indexing accented characters, then searching by any form
In-Reply-To: <20696670.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: julien.barret@gmail.com
References: <15412778.post@talk.nabble.com> <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com> <AAA63AE5-2F37-4009-BBB9-F528E025C2E7@gmail.com> <15415778.post@talk.nabble.com> <368FDCE1-1B94-4B99-A48D-AE296A559CAE@gmail.com> <20682548.post@talk.nabble.com> <000001c94f1a$85246a30$8f6d3e90$@cassinera@mercadolibre.com> <20696670.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It seems that the index and search process does not work in the same way:

The "tokenStream" method is called at time of search while for indexing the
"resusableTokenStream" is called.

Overriding resusableTokenStream (like I did for tokenStream) fixed the
problem.
-- 
View this message in context: http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p20898127.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 16:17:45 2008
Return-Path: <java-user-return-37602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52364 invoked from network); 8 Dec 2008 16:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 16:17:45 -0000
Received: (qmail 2156 invoked by uid 500); 8 Dec 2008 16:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2130 invoked by uid 500); 8 Dec 2008 16:17:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2119 invoked by uid 99); 8 Dec 2008 16:17:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 08:17:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrs.nospam@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 16:16:21 +0000
Received: by yx-out-2324.google.com with SMTP id 3so457460yxj.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 08:17:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=/D2ZfAR6R22fFF2LQsP6dtWMFqRhrMDfNeF3qOar8Ms=;
        b=Sp7+BvJH/LvtVvApQu7Rz9nicVyA7AHlcryjtug5xSYbmiGPMduNJCKHhESs/n1qic
         dlc1ZcS4YWWfpVAU3feepva0ROTMKIdJpxl458FapQGLsouoqc/moH0mAnPo/dq7LJa+
         yQRfRhuIDERZBC548DK+N5o1GsvJ5rDNSiquA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=J2fvFwvm3msrEFWiZ6AL943oaPpM0aMy3D7NHmnNDfHXpmoHrzF2BZcbCtfZKv1kQe
         4Fn43LJrP3GnZKxcV1z1kwj88gpuvn6uxAYMM0uqZtQFkrTjGsRzn0SHnUAZU4zTqEVm
         gNkpOk3UghdioDj3jenfAQWmNBb+QqpNn7CKI=
Received: by 10.151.150.13 with SMTP id c13mr8251379ybo.19.1228753029304;
        Mon, 08 Dec 2008 08:17:09 -0800 (PST)
Received: by 10.151.133.5 with HTTP; Mon, 8 Dec 2008 08:17:09 -0800 (PST)
Message-ID: <bd818c7b0812080817x52ec1564xf40f1e50daa1a4dd@mail.gmail.com>
Date: Mon, 8 Dec 2008 11:17:09 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <359a92830812080754p886b0f9ncd9f8c5eaf51df69@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59019_6821408.1228753029276"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
	 <bd818c7b0812060919x18c4e1av3767e32948fbdbbf@mail.gmail.com>
	 <867513fe0812062006l474b6d27l61a15f523ebb51cb@mail.gmail.com>
	 <bd818c7b0812080724r74012982p92c8eb5dbfe64e38@mail.gmail.com>
	 <359a92830812080754p886b0f9ncd9f8c5eaf51df69@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59019_6821408.1228753029276
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes that is set.  It works if I do a query like this:

status:* -reporter:*mark*

The status field only has a few possible values.

On Mon, Dec 8, 2008 at 10:54 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> Have you enabled leading wildcards? They are not (or at least weren't
> last I knew) enabled by default....
>
> <<<QueryParser.setAllowLeadingWildcard( true )>>>
>
> from
>
>
>
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-4d62118417eaef0dcb87f4370583f809848ea695
>
> Best
> Erick
>
> On Mon, Dec 8, 2008 at 10:24 AM, no spam <mrs.nospam@gmail.com> wrote:
>
> > The reason our users want to do this is because they want to search for
> > instances where certain negative conditions are true.  My client is the
> > news
> > industry and this is metadata for things like reporter, type, etc.
> >  Sometimes you want -reporter:mark for example and this is the only
> > criteria
> > to search against the index.
> >
> > Am I thinking about this wrong?
> >
> > I did try using the MatchAllDocsQuery class and it expands to something
> > like
> > this:
> >
> > summary:matchalldocsquery -reporter:*mark*
> >
> > but I don't get any results which is not what I expect for my does not
> > contain query above.
> >
> > On Sat, Dec 6, 2008 at 11:06 PM, Anshum <anshumg@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > An easy way to do that would be to index a particular term with all
> docs
> > > e.g. "dummyword" could be indexed for all documents as a value for a
> > > dummyfield or an existing field.
> > > This way lets assume you want to fetch results for -filed1:jakarta
> > > You could search for dummyfield:"dummyword" AND NOT filed1:jakarta
> > >
> > > This is just one of the solution, though I still would not understand
> if
> > > there's a logical reason for fetching such results.:)
> > >
> > > --
> >
>

------=_Part_59019_6821408.1228753029276--

From java-user-return-37603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 16:39:36 2008
Return-Path: <java-user-return-37603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58239 invoked from network); 8 Dec 2008 16:39:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 16:39:36 -0000
Received: (qmail 46022 invoked by uid 500); 8 Dec 2008 16:39:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46001 invoked by uid 500); 8 Dec 2008 16:39:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45990 invoked by uid 99); 8 Dec 2008 16:39:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 08:39:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 16:39:27 +0000
Received: by gxk3 with SMTP id 3so1204371gxk.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 08:39:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=2gP+/Xlkcr03jc3gk7Zy14rgpaRzhPhdIFePahzOqe4=;
        b=EqImEo550xZcWFTSZwhcstrCrvzTS1TVjkRlOZzOrFKNuiQuLG3uZHhmBL37QvpbFJ
         kH39ZApu56l/M5dGiCbj9fexv6f7Es3ONbsme7coTLg5kzmM75kA65UiYXRV+pElBQJ+
         QqaEF4UNiz3xUgcNnEGYUJvdkdBuvAp6dGi/Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=dOMJCWSTTrDD+FGxFeNllT8OpP7mXRkXgpumoPH8X9PBTJ5HE9swhQwRSzyIIihD2K
         udeMWt5pjbbN2QV3V8GNvJ7tMwl5F/xAyPai1ZOZlzNWM0PV3Z4+qoxW23ULoYArSJI4
         vyzgNfhNnGIq7HSkepkn9e1Oxm6h2X1jQN59E=
Received: by 10.90.26.9 with SMTP id 9mr1292121agz.59.1228754345243;
        Mon, 08 Dec 2008 08:39:05 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 9sm13684534agc.31.2008.12.08.08.39.04
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 08 Dec 2008 08:39:04 -0800 (PST)
Message-ID: <493D4DA7.6000708@gmail.com>
Date: Mon, 08 Dec 2008 11:39:03 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Open IndexReader read-only
References: <493D105C.2030808@scalix.com> <493D2AE8.9030601@scalix.com>
In-Reply-To: <493D2AE8.9030601@scalix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Bamford wrote:
> Mark
>
> > Look for the static factory methods on IndexReader.
>
> I take it you mean IndexReader.open (dir, true) ?

Yeah.

> If so, how do I then pass that into DelayCloseIndexSearcher() so that 
> I can continue to rely on all the existing calls like:
>
>     IndexReader reader = contentSearcher.getIndexReader();
>
> Put another way, how do I associate the static IndexReader with an 
> IndexSearcher object so I can use getIndexReader() to get it again?
Find where that contentSearcher is being created. Use a different 
constructor to create the Searcher - use the one that takes an 
IndexReader. Now you control the IndexReader creation, and you can use 
the readonly constructor option when you create it. That Searcher is 
either using a constructor that takes an IndexReader, or a Directory, or 
a String. If its using a String constructor, instead, use the Directory 
factory that takes a String, make a Directory, and use it to make an 
IndexReader that you build the IndexSearcher with. If its using a 
Directory, use that directory to make the IndexReader that is used for 
you IndexSearcher.

>
> Thanks for your continued help with this  :-)
>
> Chris
>
> Mark Miller wrote:
>> Look for the static factory methods on IndexReader.
>>
>> - Mark
>>
>> Chris Bamford wrote:
>>> Thanks Mark.
>>>
>>> I have identified the spot where I need to do the surgery.  However, 
>>> I discover that IndexReader is abstract, but it seems crazy that I 
>>> need to make a concrete class for which I have no need to add any of 
>>> my own logic...  Is there a suitable subclass I can use?  The 
>>> documented ones - FilterIndexReader, InstantiatedIndexReader, 
>>> MultiReader, ParallelReader - all seem too complicated for what I 
>>> need.  My only requirement is to open it read-only!
>>>
>>> Am I missing something?
>>>
>>> Mark Miller wrote:
>>>> Chris Bamford wrote:
>>>>>
>>>>> So does that mean if you don't explicitly open an IndexReader, the 
>>>>> IndexSearcher will do it for you?  Or what?
>>>>>
>>>> Right. The IndexReader takes a Directory, and the IndexSearcher 
>>>> takes an IndexReader - there are sugar constructors though - An 
>>>> IndexSearcher will also accept a String file path, which will be 
>>>> used to create a Directory which is used to create an IndexReader. 
>>>> It will also take a Directory, which will be used to create an 
>>>> IndexReader. It will also just accept the IndexReader.
>>>>
>>>> So you have to find how that IndexReader is being created (or 
>>>> where) and change the code so that you get to create it, and when 
>>>> you do, do it read-only. It should be easier than that roundabout 
>>>> info sounds.
>>>>
>>>> - Mark
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 16:41:15 2008
Return-Path: <java-user-return-37604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59689 invoked from network); 8 Dec 2008 16:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 16:41:15 -0000
Received: (qmail 49616 invoked by uid 500); 8 Dec 2008 16:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49575 invoked by uid 500); 8 Dec 2008 16:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49548 invoked by uid 99); 8 Dec 2008 16:41:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 08:41:17 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 216.239.58.187 as permitted sender)
Received: from [216.239.58.187] (HELO gv-out-0910.google.com) (216.239.58.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 16:41:02 +0000
Received: by gv-out-0910.google.com with SMTP id p33so210452gvf.23
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 08:40:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=1PPDvWdQoiyH7SL0cBZVoQ64JDXtVt5FVjgrL6WQVkE=;
        b=wAyTu1p4Ulz+Ym1VSDj8YEEazmJMGz2EKcmJTq7BEDWiUUW0uSxrlBjUSddDlg+gt+
         FRxZtQsOGbj069KoNsAgJtTWpFi57XM5EivmMthCKaw4W5KTLMZaSw9KUTE48lVe0MKs
         pm8QYwPHgHThY58yy+Ej2Pj7gQ6hiss+5+Z9w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=DBcRQqdTdICe4eLuwsBjgCNveP7x1MMfgtDXuN166uyNbyfvb9bMYVyK8wN9AwBuEw
         JadCTdJf5vAZX7CkcKIgbasiZA75XE+JwIxWOy287kvdn+ZiNwQA/jc/9N0emfyJe43a
         Dg3K3aspKwok+iWgwFVEPCpq80agyrx2ouOOs=
Received: by 10.86.84.5 with SMTP id h5mr2758405fgb.12.1228754442152;
        Mon, 08 Dec 2008 08:40:42 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Mon, 8 Dec 2008 08:40:42 -0800 (PST)
Message-ID: <359a92830812080840s75134a1cu4dcf415c16d8591e@mail.gmail.com>
Date: Mon, 8 Dec 2008 11:40:42 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <bd818c7b0812080724r74012982p92c8eb5dbfe64e38@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85553_22685856.1228754442126"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
	 <bd818c7b0812060919x18c4e1av3767e32948fbdbbf@mail.gmail.com>
	 <867513fe0812062006l474b6d27l61a15f523ebb51cb@mail.gmail.com>
	 <bd818c7b0812080724r74012982p92c8eb5dbfe64e38@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85553_22685856.1228754442126
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That'll teach me to scan e-mail. You can't use MatchAllDocsQuery
that way.
What you're actually searching for is the word "matchalldocsquery"
in the field "summary". Which returns nothing. Then you're subtracting
any documents with reporter *mark*. That isn't what you're after at all.

If you're doing this programmatically, you want something in the
Lucene code like:

BooleanQuery bq = new BooleanQuery()
bq.add(new MatchAllDocsQuery(), BooleanClause.occur.MUST)
bq.add(<parsed *mark* query here>, BooleanClause.occur.MUST_NOT)


now pass bq to the search method. This will require some work on your
part to detect when it's appropriate and when it's not. But presumably you
have the ability to know that.

I've seen referenced (but haven't used) something like
reporter:(* TO *) -reporter:*mark*

WARNING: I've seen this referenced in, I believe, the SOLR mailing
list. I don't know how it plays in straight Lucene,and I have no idea
what the gotcha's are, nor what version of Lucene supports this syntax
efficiently. Furthermore I'm unclear what the behavior for
a document without the reporter field is......

But I do know that you can't do what your example does....

FWIW
Erick


On Mon, Dec 8, 2008 at 10:24 AM, no spam <mrs.nospam@gmail.com> wrote:

> The reason our users want to do this is because they want to search for
> instances where certain negative conditions are true.  My client is the
> news
> industry and this is metadata for things like reporter, type, etc.
>  Sometimes you want -reporter:mark for example and this is the only
> criteria
> to search against the index.
>
> Am I thinking about this wrong?
>
> I did try using the MatchAllDocsQuery class and it expands to something
> like
> this:
>
> summary:matchalldocsquery -reporter:*mark*
>
> but I don't get any results which is not what I expect for my does not
> contain query above.
>
> On Sat, Dec 6, 2008 at 11:06 PM, Anshum <anshumg@gmail.com> wrote:
>
> > Hi,
> >
> > An easy way to do that would be to index a particular term with all docs
> > e.g. "dummyword" could be indexed for all documents as a value for a
> > dummyfield or an existing field.
> > This way lets assume you want to fetch results for -filed1:jakarta
> > You could search for dummyfield:"dummyword" AND NOT filed1:jakarta
> >
> > This is just one of the solution, though I still would not understand if
> > there's a logical reason for fetching such results.:)
> >
> > --
>

------=_Part_85553_22685856.1228754442126--

From java-user-return-37605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 16:49:24 2008
Return-Path: <java-user-return-37605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63340 invoked from network); 8 Dec 2008 16:49:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 16:49:24 -0000
Received: (qmail 70082 invoked by uid 500); 8 Dec 2008 16:49:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70057 invoked by uid 500); 8 Dec 2008 16:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70046 invoked by uid 99); 8 Dec 2008 16:49:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 08:49:29 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrs.nospam@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 16:47:59 +0000
Received: by yw-out-2324.google.com with SMTP id 3so466330ywj.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 08:48:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=GuWeXpCbsibFZ0NmPW6n+QQB71j7QGpKeGb6gO/Ncus=;
        b=iFtyhM/6j6qSPND+G89aZMMeMkRVzKsAF2dDfvmkp+o93FDAz7y+pTvzscHRJQkpk4
         3iuVPhz1yPCJYwQYS0F1CB1zFSNYHHqeJdMXaKHOdq6HvNynsLrByEVKTQVWRDhYyE1n
         CYd4j4SQ+6LmWU4Pvw368gkZcYi3ByntZfZoQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FuxH9ZTIlibz16bTZe51cwdftmkBLsiZtzUS7d8airrRk+Ul37+t7FJAZM7oUNPcP0
         7sFuZxRJ9QO/fmaSs/M1euaLl+Rh2u1XDfLpKEJPtMUQfdYwznjU7KnGI3knvS3qkECG
         OUYPEAXAKeut2Mby5EO7gNmlItX00VfnIu7hQ=
Received: by 10.151.113.5 with SMTP id q5mr3647669ybm.134.1228754927649;
        Mon, 08 Dec 2008 08:48:47 -0800 (PST)
Received: by 10.151.133.5 with HTTP; Mon, 8 Dec 2008 08:48:47 -0800 (PST)
Message-ID: <bd818c7b0812080848x1dd63b43x57f6fbae86a0c43a@mail.gmail.com>
Date: Mon, 8 Dec 2008 11:48:47 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <359a92830812080840s75134a1cu4dcf415c16d8591e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59539_21244684.1228754927635"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
	 <bd818c7b0812060919x18c4e1av3767e32948fbdbbf@mail.gmail.com>
	 <867513fe0812062006l474b6d27l61a15f523ebb51cb@mail.gmail.com>
	 <bd818c7b0812080724r74012982p92c8eb5dbfe64e38@mail.gmail.com>
	 <359a92830812080840s75134a1cu4dcf415c16d8591e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59539_21244684.1228754927635
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The way I got that query was doing:

new MatchAllDocsQuery().toString().   I thought the "matchalldocsquery" part
was a bit odd but figured it might be a known keyword with lucene.

Thanks for the help!

On Mon, Dec 8, 2008 at 11:40 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> That'll teach me to scan e-mail. You can't use MatchAllDocsQuery
> that way.
> What you're actually searching for is the word "matchalldocsquery"
> in the field "summary". Which returns nothing. Then you're subtracting
> any documents with reporter *mark*. That isn't what you're after at all.
>
> If you're doing this programmatically, you want something in the
> Lucene code like:
>
> BooleanQuery bq = new BooleanQuery()
> bq.add(new MatchAllDocsQuery(), BooleanClause.occur.MUST)
> bq.add(<parsed *mark* query here>, BooleanClause.occur.MUST_NOT)
>
>
> now pass bq to the search method. This will require some work on your
> part to detect when it's appropriate and when it's not. But presumably you
> have the ability to know that.
>
> I've seen referenced (but haven't used) something like
> reporter:(* TO *) -reporter:*mark*
>
> WARNING: I've seen this referenced in, I believe, the SOLR mailing
> list. I don't know how it plays in straight Lucene,and I have no idea
> what the gotcha's are, nor what version of Lucene supports this syntax
> efficiently. Furthermore I'm unclear what the behavior for
> a document without the reporter field is......
>
> But I do know that you can't do what your example does....
>
> FWIW
> Erick
>
>
> On Mon, Dec 8, 2008 at 10:24 AM, no spam <mrs.nospam@gmail.com> wrote:
>
> > The reason our users want to do this is because they want to search for
> > instances where certain negative conditions are true.  My client is the
> > news
> > industry and this is metadata for things like reporter, type, etc.
> >  Sometimes you want -reporter:mark for example and this is the only
> > criteria
> > to search against the index.
> >
> > Am I thinking about this wrong?
> >
> > I did try using the MatchAllDocsQuery class and it expands to something
> > like
> > this:
> >
> > summary:matchalldocsquery -reporter:*mark*
> >
> > but I don't get any results which is not what I expect for my does not
> > contain query above.
> >
> > On Sat, Dec 6, 2008 at 11:06 PM, Anshum <anshumg@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > An easy way to do that would be to index a particular term with all
> docs
> > > e.g. "dummyword" could be indexed for all documents as a value for a
> > > dummyfield or an existing field.
> > > This way lets assume you want to fetch results for -filed1:jakarta
> > > You could search for dummyfield:"dummyword" AND NOT filed1:jakarta
> > >
> > > This is just one of the solution, though I still would not understand
> if
> > > there's a logical reason for fetching such results.:)
> > >
> > > --
> >
>

------=_Part_59539_21244684.1228754927635--

From java-user-return-37606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 17:43:41 2008
Return-Path: <java-user-return-37606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99183 invoked from network); 8 Dec 2008 17:43:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 17:43:41 -0000
Received: (qmail 71558 invoked by uid 500); 8 Dec 2008 17:43:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71524 invoked by uid 500); 8 Dec 2008 17:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71513 invoked by uid 99); 8 Dec 2008 17:43:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 09:43:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 17:42:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L9k8N-00010H-O9
	for java-user@lucene.apache.org; Mon, 08 Dec 2008 09:43:03 -0800
Message-ID: <20899987.post@talk.nabble.com>
Date: Mon, 8 Dec 2008 09:43:03 -0800 (PST)
From: Laurent Mimoun <mimounl@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.flush performance
In-Reply-To: <3072B3CA-7CF3-4205-A032-710EE28A0625@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mimounl@gmail.com
References: <20880541.post@talk.nabble.com> <93228c910812070527m7678204dt4bbb301454bb3981@mail.gmail.com> <20887656.post@talk.nabble.com> <3072B3CA-7CF3-4205-A032-710EE28A0625@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Michael McCandless-2 wrote:
> 
>   
> So you should use commit sparingly, and, open your IndexWriter with  
> autoCommit=false.
> 

Thank you for your respsonse.

But I would be estonished that no code is provided in lucene API to do the
job of commiting regularly modifications : do I really have to code this by
hand ?

-- 
View this message in context: http://www.nabble.com/IndexWriter.flush-performance-tp20880541p20899987.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 17:43:54 2008
Return-Path: <java-user-return-37607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99412 invoked from network); 8 Dec 2008 17:43:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 17:43:54 -0000
Received: (qmail 73219 invoked by uid 500); 8 Dec 2008 17:44:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73195 invoked by uid 500); 8 Dec 2008 17:44:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73184 invoked by uid 99); 8 Dec 2008 17:44:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 09:44:00 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 17:43:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L9k8j-00011A-EI
	for java-user@lucene.apache.org; Mon, 08 Dec 2008 09:43:25 -0800
Message-ID: <20899987.post@talk.nabble.com>
Date: Mon, 8 Dec 2008 09:43:25 -0800 (PST)
From: Laurent Mimoun <mimounl@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexWriter.flush performance
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mimounl@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org



Michael McCandless-2 wrote:
> 
>   
> So you should use commit sparingly, and, open your IndexWriter with  
> autoCommit=false.
> 

Thank you for your respsonse.

But I would be estonished that no code is provided in lucene API to do the
job of committing regularly modifications : do I really have to code this by
hand ?

-- 
View this message in context: http://www.nabble.com/IndexWriter.flush-performance-tp20880541p20899987.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 17:46:33 2008
Return-Path: <java-user-return-37608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 717 invoked from network); 8 Dec 2008 17:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 17:46:32 -0000
Received: (qmail 77373 invoked by uid 500); 8 Dec 2008 17:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77342 invoked by uid 500); 8 Dec 2008 17:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77331 invoked by uid 99); 8 Dec 2008 17:46:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 09:46:36 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 17:45:04 +0000
Received: by an-out-0708.google.com with SMTP id b2so480923ana.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 09:45:49 -0800 (PST)
Received: by 10.100.44.4 with SMTP id r4mr1609531anr.100.1228758349201;
        Mon, 08 Dec 2008 09:45:49 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id c23sm9040357ana.15.2008.12.08.09.45.47
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 08 Dec 2008 09:45:48 -0800 (PST)
Message-Id: <FD009C24-466F-4C8F-B3F9-01C2F51D3CD7@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20899987.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IndexWriter.flush performance
Date: Mon, 8 Dec 2008 12:45:46 -0500
References: <20899987.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


IndexWriter.close() does a commit.

Otherwise you will (in 3.0) need to do it by hand.

Mike

Laurent Mimoun wrote:

>
>
> Michael McCandless-2 wrote:
>>
>>
>> So you should use commit sparingly, and, open your IndexWriter with
>> autoCommit=false.
>>
>
> Thank you for your respsonse.
>
> But I would be estonished that no code is provided in lucene API to  
> do the
> job of committing regularly modifications : do I really have to code  
> this by
> hand ?
>
> -- 
> View this message in context: http://www.nabble.com/IndexWriter.flush-performance-tp20880541p20899987.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 19:06:43 2008
Return-Path: <java-user-return-37609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62113 invoked from network); 8 Dec 2008 19:06:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 19:06:43 -0000
Received: (qmail 93069 invoked by uid 500); 8 Dec 2008 19:06:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93035 invoked by uid 500); 8 Dec 2008 19:06:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93024 invoked by uid 99); 8 Dec 2008 19:06:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 11:06:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mrs.nospam@gmail.com designates 64.233.170.191 as permitted sender)
Received: from [64.233.170.191] (HELO rn-out-0910.google.com) (64.233.170.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 19:05:18 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1197600rne.4
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 11:06:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=8d2MF2hhnVGqX1GFq4vblsbVT+SGmarYnbypRIZrmb0=;
        b=DarLry7op5KEZaWLieNhaUlkpD3cBhHSKMTjsjWLcuE3hDnHJxddqjJi58S6i79aqn
         GeZXctcxy+IngASsG9YfbRhWwV/ssPUgjWcaHgBwOFtbQNWw1qdta+ZtBGPsxJy7LdeT
         F792Xc7Ugf/nqZeh5vEVo72fe2UuzulYx4Wr4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=A3kM9QMHIOkhNdiUHlLBfa2JaWw4mBC1kExBvl2GAnaUUNnTCzaTNaflWGog23QkHg
         T9NLG/fvXUCH6e8NLgSf+9dHuuX3mkcLr2N1hlnynaekoB+PatTIbb2IUCdiF7rglF9H
         E42kkhmzX3VYc8hOp3aGuK2q1mdA47bj5PHSE=
Received: by 10.150.135.2 with SMTP id i2mr6874969ybd.229.1228763165799;
        Mon, 08 Dec 2008 11:06:05 -0800 (PST)
Received: by 10.151.133.5 with HTTP; Mon, 8 Dec 2008 11:06:05 -0800 (PST)
Message-ID: <bd818c7b0812081106t332ae3bex19b88b5b5c9ccda2@mail.gmail.com>
Date: Mon, 8 Dec 2008 14:06:05 -0500
From: "no spam" <mrs.nospam@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene search options
In-Reply-To: <359a92830812080840s75134a1cu4dcf415c16d8591e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61930_18850631.1228763165773"
References: <6fc71b230806222321k16dd8574u6feab56912189900@mail.gmail.com>
	 <200806231633.11295.daniel@nuix.com>
	 <6fc71b230806222336g17e26d3dr275b25f2252c852b@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E07ECD647D8@BLRKECMBX06.ad.infosys.com>
	 <6fc71b230806230053u1de94c39qd2db576402c61eca@mail.gmail.com>
	 <bd818c7b0812060919x18c4e1av3767e32948fbdbbf@mail.gmail.com>
	 <867513fe0812062006l474b6d27l61a15f523ebb51cb@mail.gmail.com>
	 <bd818c7b0812080724r74012982p92c8eb5dbfe64e38@mail.gmail.com>
	 <359a92830812080840s75134a1cu4dcf415c16d8591e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61930_18850631.1228763165773
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes I've seen that syntax too used to search for null values.  You can do
-(reporter:* AND -reporter:[* to *]) which says all values minus docs with a
value.

Your suggestion did the trick, thanks!
On Mon, Dec 8, 2008 at 11:40 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> That'll teach me to scan e-mail. You can't use MatchAllDocsQuery
> that way.
> What you're actually searching for is the word "matchalldocsquery"
> in the field "summary". Which returns nothing. Then you're subtracting
> any documents with reporter *mark*. That isn't what you're after at all.
>
> If you're doing this programmatically, you want something in the
> Lucene code like:
>
> BooleanQuery bq = new BooleanQuery()
> bq.add(new MatchAllDocsQuery(), BooleanClause.occur.MUST)
> bq.add(<parsed *mark* query here>, BooleanClause.occur.MUST_NOT)
>
>
> now pass bq to the search method. This will require some work on your
> part to detect when it's appropriate and when it's not. But presumably you
> have the ability to know that.
>
> I've seen referenced (but haven't used) something like
> reporter:(* TO *) -reporter:*mark*
>
> WARNING: I've seen this referenced in, I believe, the SOLR mailing
> list. I don't know how it plays in straight Lucene,and I have no idea
> what the gotcha's are, nor what version of Lucene supports this syntax
> efficiently. Furthermore I'm unclear what the behavior for
> a document without the reporter field is......
>
> But I do know that you can't do what your example does....
>
> FWIW
> Erick
>
>
> On Mon, Dec 8, 2008 at 10:24 AM, no spam <mrs.nospam@gmail.com> wrote:
>
> > The reason our users want to do this is because they want to search for
> > instances where certain negative conditions are true.  My client is the
> > news
> > industry and this is metadata for things like reporter, type, etc.
> >  Sometimes you want -reporter:mark for example and this is the only
> > criteria
> > to search against the index.
> >
> > Am I thinking about this wrong?
> >
> > I did try using the MatchAllDocsQuery class and it expands to something
> > like
> > this:
> >
> > summary:matchalldocsquery -reporter:*mark*
> >
> > but I don't get any results which is not what I expect for my does not
> > contain query above.
> >
> > On Sat, Dec 6, 2008 at 11:06 PM, Anshum <anshumg@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > An easy way to do that would be to index a particular term with all
> docs
> > > e.g. "dummyword" could be indexed for all documents as a value for a
> > > dummyfield or an existing field.
> > > This way lets assume you want to fetch results for -filed1:jakarta
> > > You could search for dummyfield:"dummyword" AND NOT filed1:jakarta
> > >
> > > This is just one of the solution, though I still would not understand
> if
> > > there's a logical reason for fetching such results.:)
> > >
> > > --
> >
>

------=_Part_61930_18850631.1228763165773--

From java-user-return-37610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 08 19:27:02 2008
Return-Path: <java-user-return-37610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71674 invoked from network); 8 Dec 2008 19:27:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2008 19:27:01 -0000
Received: (qmail 23806 invoked by uid 500); 8 Dec 2008 19:27:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23777 invoked by uid 500); 8 Dec 2008 19:27:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23766 invoked by uid 99); 8 Dec 2008 19:27:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 11:27:07 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 19:26:52 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 3FD40FE1D2
	for <java-user@lucene.apache.org>; Mon,  8 Dec 2008 11:26:30 -0800 (PST)
Message-Id: <74BB95D4-89B0-4B4B-B970-C24BEE0F822A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830812080607x6c68a67excacc9a0955be3bbb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IR Pattern Language
Date: Mon, 8 Dec 2008 14:26:29 -0500
References: <32a1c320812061609u60eafed8tfd924851d7d207ab@mail.gmail.com> <51412F2B-89F1-4114-9675-AA32B7F64EC7@apache.org> <32a1c320812080020m9fb88aw4ffbbf34bae9483c@mail.gmail.com> <359a92830812080607x6c68a67excacc9a0955be3bbb@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

IR is information retrieval, which I introduced, not Rob.  I'm sure  
there are patterns that could be abstracted, I just don't know that  
anyone has formally done them, say like the Gang of Four did.


On Dec 8, 2008, at 9:07 AM, Erick Erickson wrote:

> This still doesn't tell us why you care. Nor have you explained
> what IR stands for in your usage. Nor what you want Lucene
> to do in that space. It's really hard to respond to such a vague
> question usefully.
>
> Best
> Erick
>
> On Mon, Dec 8, 2008 at 3:20 AM, Robert Young <rob@roryoung.co.uk>  
> wrote:
>
>> I am not trying to solve a specific problem right now, I'm just  
>> looking for
>> a set of patterns for solving common problems in text processing  
>> and IR.
>> Things like token sources and filters, query parsing, index  
>> distribution.
>>
>> Cheers
>> Rob
>>
>> On Mon, Dec 8, 2008 at 2:49 AM, Grant Ingersoll <gsingers@apache.org>
>> wrote:
>>
>>> Can you fill in some background on this?  I did a google for  
>>> "pattern
>>> language for IR" and came up with a few hits, but am not sure what  
>>> you
>> have
>>> in mind.  What problem are you trying to solve, or are you just  
>>> looking
>> to
>>> fill in knowledge?
>>>
>>> -Grant
>>>
>>>
>>> On Dec 6, 2008, at 7:09 PM, Robert Young wrote:
>>>
>>> Hi,
>>>>
>>>> Does anyone know of a pattern language for text processing and
>> information
>>>> retrieval?
>>>>
>>>> Cheers
>>>> Rob
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 09 06:44:57 2008
Return-Path: <java-user-return-37611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74615 invoked from network); 9 Dec 2008 06:44:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2008 06:44:56 -0000
Received: (qmail 77307 invoked by uid 500); 9 Dec 2008 06:45:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77271 invoked by uid 500); 9 Dec 2008 06:45:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77260 invoked by uid 99); 9 Dec 2008 06:45:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 22:45:02 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 06:43:32 +0000
Received: by wa-out-1112.google.com with SMTP id n4so750492wag.5
        for <java-user@lucene.apache.org>; Mon, 08 Dec 2008 22:44:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=ScURT4juw5S8dfNqUBzUow1lGI69PPGRLSmk3AQmxOA=;
        b=eK3P4tSP85CFCzzuty4qxPF1ydtZ5yBmiLQva363ah+fZad4p1KgnpX/J6pDoasRDJ
         kZsP+3oehQJT/dt2NxuvXVb9NFvKotxg5BicpJIQX+najqagKhlip5Qd0je/ag78k56E
         U6lt8x0GJs4uNNtJt+hkNsVj5098Sid2zN6u8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=tNtOYSBQoelJltqd8yp9x5d+ieI0g0Zjyd9ONB54VRbon1NHYCOkvnSgoIRxnHlaoE
         2c62DU23kjUAUxYVgq+2h8BpCqTA2idaaXDSRvvOG01AXnl092XMLeswRc90pBPx9gAh
         q9jn57q/SmOywg/jPKziUqJturr3BUGkzkDLY=
Received: by 10.114.203.20 with SMTP id a20mr2964241wag.167.1228805060934;
        Mon, 08 Dec 2008 22:44:20 -0800 (PST)
Received: by 10.114.124.14 with HTTP; Mon, 8 Dec 2008 22:44:20 -0800 (PST)
Message-ID: <652776090812082244xae92675v6df36ca3c0ea5bcd@mail.gmail.com>
Date: Mon, 8 Dec 2008 22:44:20 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to docidset)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51274_17376730.1228805060925"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51274_17376730.1228805060925
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I'm working on upgrading to Lucene 2.4.0 from 2.3.2 and was trying to
integrate the new DodIdSet changes since o.a.l.search.Filter#bits() method
is now depreciated. For our app we actually heavily rely on bits from the
Filter to do post-query filtering (I explain why below).

For example, if someone searches for product: "ipod" and then filters a
type: "nano" (e.g. mini/nano/regular) AND color: "red" (e.g.
red/yellow/blue). In our current model the results are gathered in the
following way:

1) "ipod" w/o attributes is run and the results are stored in a hitcollector
2) "ipod" results are now filtered for color="red" AND type="mini" using the
lucene Filters
3) The filtered results are returned to the user.

The reason that the attributes are filtered post-query is so that we can
return the other types and colors the user can filter by in the future.
Meaning the UI would be able to show "blue", "green", "pink", etc... if we
pre-filtered results by color and type before hand we wouldn't know what the
other filter options would be there for a broader result set.

Does anyone else have this use case? I'd imagine other folks are probably
doing similar things to accomplish this.

M

------=_Part_51274_17376730.1228805060925--

From java-user-return-37612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 09 07:36:30 2008
Return-Path: <java-user-return-37612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91154 invoked from network); 9 Dec 2008 07:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2008 07:36:30 -0000
Received: (qmail 24070 invoked by uid 500); 9 Dec 2008 07:36:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24040 invoked by uid 500); 9 Dec 2008 07:36:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24029 invoked by uid 99); 9 Dec 2008 07:36:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 23:36:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 07:36:22 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id mB97a05N071417
	for <java-user@lucene.apache.org>; Tue, 9 Dec 2008 08:36:00 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to docidset)
Date: Tue, 9 Dec 2008 08:36:00 +0100
User-Agent: KMail/1.9.10
References: <652776090812082244xae92675v6df36ca3c0ea5bcd@mail.gmail.com>
In-Reply-To: <652776090812082244xae92675v6df36ca3c0ea5bcd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200812090836.00478.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Michael,

The change from BitSet to DocIdSetIterator implies that you'll
need to choose an underlying data structure yourself.

A minimal approach would be to use DocIdBitSet around
BitSet, but there are better ways.

For your application you might consider to replace java's BitSet by
lucene's OpenBitSet. Also have a look at earlier discussions
on the subject: you might find a good use for OpenBitSetDISI and 
contrib/**/{BooleanFilter,ChainedFilter}.

Regards,
Paul Elschot


Op Tuesday 09 December 2008 07:44:20 schreef Michael Stoppelman:
> Hi all,
>
> I'm working on upgrading to Lucene 2.4.0 from 2.3.2 and was trying to
> integrate the new DodIdSet changes since o.a.l.search.Filter#bits()
> method is now depreciated. For our app we actually heavily rely on
> bits from the Filter to do post-query filtering (I explain why
> below).
>
> For example, if someone searches for product: "ipod" and then filters
> a type: "nano" (e.g. mini/nano/regular) AND color: "red" (e.g.
> red/yellow/blue). In our current model the results are gathered in
> the following way:
>
> 1) "ipod" w/o attributes is run and the results are stored in a
> hitcollector 2) "ipod" results are now filtered for color="red" AND
> type="mini" using the lucene Filters
> 3) The filtered results are returned to the user.
>
> The reason that the attributes are filtered post-query is so that we
> can return the other types and colors the user can filter by in the
> future. Meaning the UI would be able to show "blue", "green", "pink",
> etc... if we pre-filtered results by color and type before hand we
> wouldn't know what the other filter options would be there for a
> broader result set.
>
> Does anyone else have this use case? I'd imagine other folks are
> probably doing similar things to accomplish this.
>
> M



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 09 07:50:41 2008
Return-Path: <java-user-return-37613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95691 invoked from network); 9 Dec 2008 07:50:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2008 07:50:41 -0000
Received: (qmail 34363 invoked by uid 500); 9 Dec 2008 07:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34323 invoked by uid 500); 9 Dec 2008 07:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34312 invoked by uid 99); 9 Dec 2008 07:50:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 08 Dec 2008 23:50:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 07:50:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L9xMA-0000A9-FF
	for java-user@lucene.apache.org; Mon, 08 Dec 2008 23:50:10 -0800
Message-ID: <20910159.post@talk.nabble.com>
Date: Mon, 8 Dec 2008 23:50:10 -0800 (PST)
From: "Matthias W." <Matthias.Wangler@e-projecta.com>
To: java-user@lucene.apache.org
Subject: Lucene SpellChecker returns no suggetions after changing Server
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Matthias.Wangler@e-projecta.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I'm using Lucene's SpellChecker (Lucene 2.1.0) class to get suggestions.
Till now my testing server was a VMWare-Image from  http://es.cohesiveft.com
http://es.cohesiveft.com  (Ubuntu 8.10, Tomcat6, Java5).
Now I'm using a Debian Etch Server with Tomcat5.5 and Java6.

Code-Sample:
String indexName = indexLocation;
String queryString = null;
queryString = URLDecoder.decode(request.getParameter("q"), "UTF-8"); 
SpellChecker spellchecker = new
SpellChecker(FSDirectory.getDirectory(indexName));
String[] suggestions = spellchecker.suggestSimilar(queryString, 5,
IndexReader.open(indexName), "content", false);
for(int i = 0; i < suggestions.length; i++) {
	out.println(suggestions[i]);
}

This worked fine on the old server, but on my new server this returns
nothing.
The index is generated by the nutch crawler, but this shouldn't be the
problem.

I've got the lucene-spellchecker-2.1.0.jar in the WEB-INF/lib/ (If I remove
it, I get the expected errormessage.)

So I don't know why I neither get results, nor an errormessage.
-- 
View this message in context: http://www.nabble.com/Lucene-SpellChecker-returns-no-suggetions-after-changing-Server-tp20910159p20910159.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 09 09:48:22 2008
Return-Path: <java-user-return-37614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40627 invoked from network); 9 Dec 2008 09:48:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2008 09:48:22 -0000
Received: (qmail 71048 invoked by uid 500); 9 Dec 2008 09:48:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71016 invoked by uid 500); 9 Dec 2008 09:48:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71002 invoked by uid 99); 9 Dec 2008 09:48:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 01:48:27 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 09:48:12 +0000
Received: by qyk13 with SMTP id 13so1717833qyk.5
        for <java-user@lucene.apache.org>; Tue, 09 Dec 2008 01:47:49 -0800 (PST)
Received: by 10.215.15.7 with SMTP id s7mr3461270qai.347.1228816069308;
        Tue, 09 Dec 2008 01:47:49 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm2178610ywn.0.2008.12.09.01.47.47
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 09 Dec 2008 01:47:48 -0800 (PST)
Message-Id: <BE2C8AEA-F897-45FA-A4E1-F0615C00D07F@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <652776090812082244xae92675v6df36ca3c0ea5bcd@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to docidset)
Date: Tue, 9 Dec 2008 04:47:45 -0500
References: <652776090812082244xae92675v6df36ca3c0ea5bcd@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


This use case sounds alot like faceted navigation, which Solr provides.

Mike

Michael Stoppelman wrote:

> Hi all,
>
> I'm working on upgrading to Lucene 2.4.0 from 2.3.2 and was trying to
> integrate the new DodIdSet changes since o.a.l.search.Filter#bits()  
> method
> is now depreciated. For our app we actually heavily rely on bits  
> from the
> Filter to do post-query filtering (I explain why below).
>
> For example, if someone searches for product: "ipod" and then  
> filters a
> type: "nano" (e.g. mini/nano/regular) AND color: "red" (e.g.
> red/yellow/blue). In our current model the results are gathered in the
> following way:
>
> 1) "ipod" w/o attributes is run and the results are stored in a  
> hitcollector
> 2) "ipod" results are now filtered for color="red" AND type="mini"  
> using the
> lucene Filters
> 3) The filtered results are returned to the user.
>
> The reason that the attributes are filtered post-query is so that we  
> can
> return the other types and colors the user can filter by in the  
> future.
> Meaning the UI would be able to show "blue", "green", "pink", etc...  
> if we
> pre-filtered results by color and type before hand we wouldn't know  
> what the
> other filter options would be there for a broader result set.
>
> Does anyone else have this use case? I'd imagine other folks are  
> probably
> doing similar things to accomplish this.
>
> M


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 09 10:28:08 2008
Return-Path: <java-user-return-37615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59792 invoked from network); 9 Dec 2008 10:28:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2008 10:28:08 -0000
Received: (qmail 9493 invoked by uid 500); 9 Dec 2008 10:28:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9460 invoked by uid 500); 9 Dec 2008 10:28:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9449 invoked by uid 99); 9 Dec 2008 10:28:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 02:28:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of coolgeng410@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 10:26:44 +0000
Received: by yw-out-2324.google.com with SMTP id 3so619707ywj.5
        for <java-user@lucene.apache.org>; Tue, 09 Dec 2008 02:27:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=snBHBAknPbz46o9QTByIxJbwE7mmXAOOOIlBzwgqHZY=;
        b=Abv1tZdSPSQOw9v5heE8pcoMkCCrhi1iqLvY0NzVDschj8iAKxj6tLg685WB4TVlX2
         U/CjFs8RbgEO4H+wDhamqHU6pRvKUGIz6tB4jRijNVbCbQUfIQ/MK9OqMas3ZmIDCyVu
         kmU+CDLfD5sYXrQ1UHsxmPn060FRtEldByilY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=MW6ilU6LlFXqDJiKnhEZ/Q8hVaEnaKqVIHbcg7yJec033HrFKgv6sBZuICj7Y7cx7y
         5hTvAcx/yJZOJ+6K/QPxroudGuAByNvHB7djB3rrIGW8mFTPGQ7/fIUkRIGrgLVW66UX
         Q38rIT9I2atJUtJoaTwkyMAs4S69uHAPJ1VTE=
Received: by 10.150.227.9 with SMTP id z9mr8694417ybg.21.1228818452621;
        Tue, 09 Dec 2008 02:27:32 -0800 (PST)
Received: by 10.151.73.12 with HTTP; Tue, 9 Dec 2008 02:27:32 -0800 (PST)
Message-ID: <e7dd79a40812090227p56da3c2bh6fbaf0d27cc109b3@mail.gmail.com>
Date: Tue, 9 Dec 2008 18:27:32 +0800
From: "Cooper Geng" <coolgeng410@gmail.com>
To: java-user@lucene.apache.org
Subject: Chinese Analyzer evaluation
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86147_14889380.1228818452619"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86147_14889380.1228818452619
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

My application will provide Chinese search engine. I got some analyzer on
Chinese language.
Any suggestion about these:

IK_CAnalyzer
IKAnalyzer

or more?

-- 
Best Regards
Cooper Geng

------=_Part_86147_14889380.1228818452619--

From java-user-return-37616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 09 15:12:02 2008
Return-Path: <java-user-return-37616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70983 invoked from network); 9 Dec 2008 15:12:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2008 15:12:02 -0000
Received: (qmail 61720 invoked by uid 500); 9 Dec 2008 15:12:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61519 invoked by uid 500); 9 Dec 2008 15:12:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61492 invoked by uid 99); 9 Dec 2008 15:12:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 07:12:07 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 15:10:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LA4FA-0001M4-Jh
	for java-user@lucene.apache.org; Tue, 09 Dec 2008 07:11:24 -0800
Message-ID: <20916424.post@talk.nabble.com>
Date: Tue, 9 Dec 2008 07:11:24 -0800 (PST)
From: "Matthias W." <Matthias.Wangler@e-projecta.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene SpellChecker returns no suggetions after changing Server
In-Reply-To: <20910159.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Matthias.Wangler@e-projecta.com
References: <20910159.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I tested it with the lucene-spellchecker-2.4.0.jar...
Then I get the queryString as suggestion if it exists in the index. But
there's no chance to get other suggestions neither with LevensteinDistance
nor with JaroWinklerDistance. The setAccuracy() method has no effect on the
result.

I think this is because of a server misconfiguration, but I've got no idea
whats the reason for.
What can I do now?
-- 
View this message in context: http://www.nabble.com/Lucene-SpellChecker-returns-no-suggetions-after-changing-Server-tp20910159p20916424.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 09 15:14:44 2008
Return-Path: <java-user-return-37617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72472 invoked from network); 9 Dec 2008 15:14:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2008 15:14:44 -0000
Received: (qmail 69967 invoked by uid 500); 9 Dec 2008 15:14:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69930 invoked by uid 500); 9 Dec 2008 15:14:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69919 invoked by uid 99); 9 Dec 2008 15:14:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 07:14:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gshackles@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 15:14:34 +0000
Received: by an-out-0708.google.com with SMTP id b2so1583ana.5
        for <java-user@lucene.apache.org>; Tue, 09 Dec 2008 07:14:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=/SI7h/e2+/N1xCO9EiBx51yw5cThokfagB2K185s04Q=;
        b=iWnxb3zWeJ3yBDGyH+pEdNbk9ahThs9iUMPsP4Q7VPwRAx4MBmtsOJsvE0WhvSWJZP
         J8gKNRUF3RS7Tl7PfURuW8O6bDcjNPha0SfvRGmnSa6zxu0BtiqqkCajbDF8x75Zwh+K
         zdVXOw+HfQG6fQGBY9ETjIgHYNw+fJbjcaXdE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=FauSoBcyMk8rt+2V4R4NuYPsowr5dz7KH3Tibj+eatnnu2mPQIquIjdHAf5ZejLtAz
         HIKkiRPFvsadO29TU4PgMnOF6lsCaZoNA3gEslv4jXUZT3DulZ3MTA5AiQ+KIP4NNkW0
         jVVgEaS6q/Dl2MJi+CjS3VB1P5VHYkWkOvdpM=
Received: by 10.100.153.6 with SMTP id a6mr131978ane.76.1228835652029;
        Tue, 09 Dec 2008 07:14:12 -0800 (PST)
Received: by 10.100.47.1 with HTTP; Tue, 9 Dec 2008 07:14:11 -0800 (PST)
Message-ID: <b63a7e9e0812090714t56051b7dg1922d023e64dd4f5@mail.gmail.com>
Date: Tue, 9 Dec 2008 10:14:11 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Looking for a way to customize how StandardAnalyzer handles punctuation
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47805_32095200.1228835652037"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47805_32095200.1228835652037
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey everyone,

I'm running into a problem where some punctuation that I would actually want
to keep gets thrown out because they don't get tokenized.  By far the most
common case for this is ampersand, but it does happen with others as well.
My concern isn't even so much in that I need to be able to enforce that
punctuation in the search, but more that I need to know it was there when I
get the results.  I am attaching important word data to the payload of each
token, so if a "word" was just an ampersand, it disappears.  I took a quick
look at the StandardAnalyzer classes and it looks like it would be a pain to
try and modify that directly (I don't have much experience in
grammar/parsers).  A couple options come to mind, but I wanted to make sure
there wasn't a better, more elegant solution before I did something that
felt a little hacky:

1) Add a couple fields to the payload saying whether the previous/next word
is a single punctuation mark, and which it is.  Then the search can insert
the punctuation in the results.  The downside to this would be losing the
metadata that would have gone into the payload for that punctuation mark.

2) Do some sort of string replacement logic during indexing and searching to
change it into something that will get made into a token, but should not
appear naturally on its own in the text.  I usually shy away from solutions
like this, but sometimes they prove useful.

Has anyone done anything like this?  I don't want to lose most of
StandardAnalyzer's punctuation logic, but mainly I want to tokenize
punctuation if it appears by itself (surrounded by whitespace).  Thanks!

- Greg

------=_Part_47805_32095200.1228835652037--

From java-user-return-37618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 09 18:10:40 2008
Return-Path: <java-user-return-37618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51020 invoked from network); 9 Dec 2008 18:10:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2008 18:10:39 -0000
Received: (qmail 24953 invoked by uid 500); 9 Dec 2008 18:10:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24926 invoked by uid 500); 9 Dec 2008 18:10:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24915 invoked by uid 99); 9 Dec 2008 18:10:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 10:10:45 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of blogathan.rao@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 18:10:30 +0000
Received: by gxk3 with SMTP id 3so77325gxk.5
        for <java-user@lucene.apache.org>; Tue, 09 Dec 2008 10:10:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=kWijRIV3s4JGIJ+iAgHEA7kI9/mNUfVHJm6PpwOTkPg=;
        b=PjGb52apW+2Vw/KujpbNWnrtC8ZYcYF8Qw5Po59dyAyvO6HBXnduoEs7AEpsWyYoQC
         3gngjF+CzHYCiGFtvBxwLCnAECFB2J2QHLJSMk0xspzwlYXvEad3YG9OxcAY0qLb5cx9
         TpooQu98ZcnR+dlilZMErefuX4q/6bcAkC38A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rsfYbBUX1/CZLIJJBx2MIa/op+zuT1dUUGydGFw8BvOSEP9jW63ZwjTutYQuSbCIEI
         a7f1lthPUIZkGwMOM/ev0ntSRoscRHPs//PmNb8wU24qhtOQs6nVr00gJXEkuPeVlHEC
         dcZny8WudtJhDanAJeLkb/UIsnrR6jLUdOwM0=
Received: by 10.151.51.18 with SMTP id d18mr427698ybk.92.1228845736133;
        Tue, 09 Dec 2008 10:02:16 -0800 (PST)
Received: by 10.151.147.11 with HTTP; Tue, 9 Dec 2008 10:02:16 -0800 (PST)
Message-ID: <a7f27bc30812091002r33782c58oeb485fd5a6f8faa1@mail.gmail.com>
Date: Tue, 9 Dec 2008 23:32:16 +0530
From: "Preetam Rao" <blogathan.rao@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with PorterStemFilter
In-Reply-To: <359a92830812080604q441dc24cgd4296d08ae50bb2f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44294_10359120.1228845736098"
References: <a7f27bc30812071026s2f2f5c32k8080f5d45ff3d836@mail.gmail.com>
	 <359a92830812080604q441dc24cgd4296d08ae50bb2f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44294_10359120.1228845736098
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Eric. Looking at Luke output helped.

The problem was that I had overridden tokenStream() of the StandardAnalyzer
but did not override the reusableTokenStream().

The IndexWriter was using reusableTokenStream() and QueryParser
was using tokenStream() and hence the mismatch. So looks like one should be
careful to override both.

-----------
Preetam

On Mon, Dec 8, 2008 at 7:34 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> your output says you couldn't find "ugli", but you indexed "ugly". I
> assume that's just a typo, and the stemmer probably makes it moot
> anyway....
>
> I don't see anything obvious in the code, but here's what I'd suggest...
>
> 1> write this out to a FSDir rather than a RAMDir, get a copy of Luke
>    (google "lucene luke") and examine what's actually in your index.
> 2> query.toString is your friend to find out how the query is actually
>     passed to the searcher.
> 3> You are explicitly doing phrase queries by quoting the string, but
>      that should be OK.
>
> FWIW
> Erick
>
> On Sun, Dec 7, 2008 at 1:26 PM, Preetam Rao <blogathan.rao@gmail.com>
> wrote:
>
> > Hi,
> >
> > I am indexing three words in a document.
> > Then I run a phrase query on that document searching for two words at a
> > time
> > and three words at a time.
> > I use PorterStemFilter for both searching and indexing. I am getting very
> > inconsistent results. Am I doing something incorrectly ?
> > The way I use PorterStemmer is by overriding tokenStream() method of
> > StandardAnalyzer and adding PorterStemFiler to the chain.
> > If I use StandardAnalyzer everything works fine. I am suspecting the way
> I
> > am creating the analyzer.
> > I printed position increments, offsets etc for both cases and did not see
> > any difference.
> >
> > Below are the tests I am running and the full code.
> >
> > tests:
> > Indexed content : "one two three"  search : "one two" no documents found
> > Indexed content : "one two three"  search : "one two three" no documents
> > found
> >
> > Indexed content : "first second third"  search : "first second" one
> > documents found
> > Indexed content : "first second third"  search :"first second third" one
> > documents found
> >
> > Indexed content : "good bad ugly"  search : "good bad" one documents
> found
> > Indexed content : "good bad ugly"  search :"good bad ugly" no documents
> > found
> >
> >
> > The below is the code:
> >
> > import org.apache.lucene.store.RAMDirectory;
> > import org.apache.lucene.index.IndexWriter;
> > import org.apache.lucene.analysis.TokenStream;
> > import org.apache.lucene.analysis.PorterStemFilter;
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > import org.apache.lucene.document.Document;
> > import org.apache.lucene.document.Field;
> > import org.apache.lucene.search.IndexSearcher;
> > import org.apache.lucene.search.Query;
> > import org.apache.lucene.search.Hits;
> > import org.apache.lucene.queryParser.QueryParser;
> > import org.apache.lucene.queryParser.ParseException;
> > import java.io.Reader;
> > import java.io.IOException;
> >
> >
> > public class TestPorterStemmer {
> >    public static void main(String[] args) throws IOException,
> > ParseException {
> >        RAMDirectory index = new RAMDirectory();
> >        IndexWriter writer = new IndexWriter(index, getAnalyzer(), true,
> > IndexWriter.MaxFieldLength.UNLIMITED);
> >        Document doc = new Document();
> >        doc.add(new Field("content", "good bad ugly", Field.Store.YES,
> > Field.Index.ANALYZED));
> >        writer.addDocument(doc);
> >        writer.optimize();
> >        writer.close();
> >        IndexSearcher searcher = new IndexSearcher(index);
> >        QueryParser parser = new QueryParser("content", getAnalyzer());
> >
> >        Query query = parser.parse("\"" + "good bad" + "\"");
> >        Hits hits = searcher.search(query);
> >        System.out.println("searched for " + query.toString() + " matched
> :
> > " + hits.length() + " documents ");
> >
> >        query = parser.parse("\"" + "good bad ugly" + "\"");
> >        hits = searcher.search(query);
> >        System.out.println("searched for " + query.toString() + " matched
> :
> > " + hits.length() + " documents ");
> >    }
> >
> >    public static StandardAnalyzer getAnalyzer() {
> >        return new StandardAnalyzer() {
> >            public TokenStream tokenStream(String fieldName, Reader
> reader)
> > {
> >                TokenStream result = super.tokenStream(fieldName, reader);
> >                return new PorterStemFilter(result);
> >            }
> >        };
> >    }
> > }
> >
> > output:
> > searched for content:"good bad" matched : 1 documents
> > searched for content:"good bad ugli" matched : 0 documents
> >
> > Any help is greatly appreciated...
> >
> > Thanks
> > Preetam
> >
>

------=_Part_44294_10359120.1228845736098--

From java-user-return-37619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 09 20:20:34 2008
Return-Path: <java-user-return-37619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21203 invoked from network); 9 Dec 2008 20:20:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2008 20:20:31 -0000
Received: (qmail 30923 invoked by uid 500); 9 Dec 2008 20:20:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30894 invoked by uid 500); 9 Dec 2008 20:20:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30883 invoked by uid 99); 9 Dec 2008 20:20:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 12:20:36 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 20:20:21 +0000
Received: by fg-out-1718.google.com with SMTP id l27so75300fgb.27
        for <java-user@lucene.apache.org>; Tue, 09 Dec 2008 12:20:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=wX5yL4bxTV117TJsahdy5rAT8tF4rHN4J4EFr2mV4M0=;
        b=Qrp79FTTWpJ7N7dc+TBZs0ESUjvDTX+Sp8du1jEXl6F9gKqWI7XCqMrNF4ZFwQxy5O
         WrJratcMeQNfa+XAfpKP/3XSA0BLpfNKChuEt9uEjzP5tRYLOBfNcBualxnSjpwM6muG
         ZtSO5vl/hdIm3L6bxfV2hAnQovLr0IF1mq3Uk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Y5Od5WjMuXF9+6QIJ+QFudY93dBNpaGB7lbIjSMmuYZfNrJAc767x2qG7ukfy0ohu8
         4jBO49NOGPTTrZqzCiprOP39LWXLUU0g/Y5z6PlvXirGSSskO/joIKX+D/I74CJFWd3T
         1UhGnYDYYGubZ3eGTLHGyU46TDSr7ra95mSu0=
Received: by 10.86.84.5 with SMTP id h5mr229552fgb.59.1228853650286;
        Tue, 09 Dec 2008 12:14:10 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Tue, 9 Dec 2008 12:14:10 -0800 (PST)
Message-ID: <359a92830812091214t669f2f3p9ab36073f20eab97@mail.gmail.com>
Date: Tue, 9 Dec 2008 15:14:10 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with PorterStemFilter
In-Reply-To: <a7f27bc30812091002r33782c58oeb485fd5a6f8faa1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_114046_4726642.1228853650277"
References: <a7f27bc30812071026s2f2f5c32k8080f5d45ff3d836@mail.gmail.com>
	 <359a92830812080604q441dc24cgd4296d08ae50bb2f@mail.gmail.com>
	 <a7f27bc30812091002r33782c58oeb485fd5a6f8faa1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_114046_4726642.1228853650277
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for reporting back, I learned something new today...

Best
Erick


On Tue, Dec 9, 2008 at 1:02 PM, Preetam Rao <blogathan.rao@gmail.com> wrote:

> Thanks Eric. Looking at Luke output helped.
>
> The problem was that I had overridden tokenStream() of the StandardAnalyzer
> but did not override the reusableTokenStream().
>
> The IndexWriter was using reusableTokenStream() and QueryParser
> was using tokenStream() and hence the mismatch. So looks like one should be
> careful to override both.
>
> -----------
> Preetam
>
> On Mon, Dec 8, 2008 at 7:34 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > your output says you couldn't find "ugli", but you indexed "ugly". I
> > assume that's just a typo, and the stemmer probably makes it moot
> > anyway....
> >
> > I don't see anything obvious in the code, but here's what I'd suggest...
> >
> > 1> write this out to a FSDir rather than a RAMDir, get a copy of Luke
> >    (google "lucene luke") and examine what's actually in your index.
> > 2> query.toString is your friend to find out how the query is actually
> >     passed to the searcher.
> > 3> You are explicitly doing phrase queries by quoting the string, but
> >      that should be OK.
> >
> > FWIW
> > Erick
> >
> > On Sun, Dec 7, 2008 at 1:26 PM, Preetam Rao <blogathan.rao@gmail.com>
> > wrote:
> >
> > > Hi,
> > >
> > > I am indexing three words in a document.
> > > Then I run a phrase query on that document searching for two words at a
> > > time
> > > and three words at a time.
> > > I use PorterStemFilter for both searching and indexing. I am getting
> very
> > > inconsistent results. Am I doing something incorrectly ?
> > > The way I use PorterStemmer is by overriding tokenStream() method of
> > > StandardAnalyzer and adding PorterStemFiler to the chain.
> > > If I use StandardAnalyzer everything works fine. I am suspecting the
> way
> > I
> > > am creating the analyzer.
> > > I printed position increments, offsets etc for both cases and did not
> see
> > > any difference.
> > >
> > > Below are the tests I am running and the full code.
> > >
> > > tests:
> > > Indexed content : "one two three"  search : "one two" no documents
> found
> > > Indexed content : "one two three"  search : "one two three" no
> documents
> > > found
> > >
> > > Indexed content : "first second third"  search : "first second" one
> > > documents found
> > > Indexed content : "first second third"  search :"first second third"
> one
> > > documents found
> > >
> > > Indexed content : "good bad ugly"  search : "good bad" one documents
> > found
> > > Indexed content : "good bad ugly"  search :"good bad ugly" no documents
> > > found
> > >
> > >
> > > The below is the code:
> > >
> > > import org.apache.lucene.store.RAMDirectory;
> > > import org.apache.lucene.index.IndexWriter;
> > > import org.apache.lucene.analysis.TokenStream;
> > > import org.apache.lucene.analysis.PorterStemFilter;
> > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > import org.apache.lucene.document.Document;
> > > import org.apache.lucene.document.Field;
> > > import org.apache.lucene.search.IndexSearcher;
> > > import org.apache.lucene.search.Query;
> > > import org.apache.lucene.search.Hits;
> > > import org.apache.lucene.queryParser.QueryParser;
> > > import org.apache.lucene.queryParser.ParseException;
> > > import java.io.Reader;
> > > import java.io.IOException;
> > >
> > >
> > > public class TestPorterStemmer {
> > >    public static void main(String[] args) throws IOException,
> > > ParseException {
> > >        RAMDirectory index = new RAMDirectory();
> > >        IndexWriter writer = new IndexWriter(index, getAnalyzer(), true,
> > > IndexWriter.MaxFieldLength.UNLIMITED);
> > >        Document doc = new Document();
> > >        doc.add(new Field("content", "good bad ugly", Field.Store.YES,
> > > Field.Index.ANALYZED));
> > >        writer.addDocument(doc);
> > >        writer.optimize();
> > >        writer.close();
> > >        IndexSearcher searcher = new IndexSearcher(index);
> > >        QueryParser parser = new QueryParser("content", getAnalyzer());
> > >
> > >        Query query = parser.parse("\"" + "good bad" + "\"");
> > >        Hits hits = searcher.search(query);
> > >        System.out.println("searched for " + query.toString() + "
> matched
> > :
> > > " + hits.length() + " documents ");
> > >
> > >        query = parser.parse("\"" + "good bad ugly" + "\"");
> > >        hits = searcher.search(query);
> > >        System.out.println("searched for " + query.toString() + "
> matched
> > :
> > > " + hits.length() + " documents ");
> > >    }
> > >
> > >    public static StandardAnalyzer getAnalyzer() {
> > >        return new StandardAnalyzer() {
> > >            public TokenStream tokenStream(String fieldName, Reader
> > reader)
> > > {
> > >                TokenStream result = super.tokenStream(fieldName,
> reader);
> > >                return new PorterStemFilter(result);
> > >            }
> > >        };
> > >    }
> > > }
> > >
> > > output:
> > > searched for content:"good bad" matched : 1 documents
> > > searched for content:"good bad ugli" matched : 0 documents
> > >
> > > Any help is greatly appreciated...
> > >
> > > Thanks
> > > Preetam
> > >
> >
>

------=_Part_114046_4726642.1228853650277--

From java-user-return-37620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 00:05:59 2008
Return-Path: <java-user-return-37620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13226 invoked from network); 10 Dec 2008 00:05:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 00:05:59 -0000
Received: (qmail 42631 invoked by uid 500); 10 Dec 2008 00:06:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42596 invoked by uid 500); 10 Dec 2008 00:06:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42585 invoked by uid 99); 10 Dec 2008 00:06:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 16:06:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 00:04:34 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-2022-JP"
Content-Transfer-Encoding: 7bit
Subject: Has anyone written SpanFuzzyQuery?
Date: Tue, 9 Dec 2008 19:05:20 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B4303406C04@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Has anyone written SpanFuzzyQuery?
Thread-Index: AclaWv2pYfMe8oP1Qh+o1/r2CFHv4A==
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I'd like to search docs that has terms that are close to those supplied in the query
in that order in the search field.  I was thinking of combining the fuzzy query
with SpanNearQuery, but the constructor of SpanNearQuery takes an array of
SpanQuery objects.  So I would need a fuzzy query implemented as a child of
SpanQuery, I'm guessing.  Has anyone written such SpanFuzzyQuery and can share 
it ?

Background: I'd like to find "Barak Obama" with query "Barok Obamma" (similar terms,
right order) but not with "Obama Barak" (exact terms, wrong order).

--------
Basis Technology Corporation, San Francisco
T. "Kuro" Kurosaka

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 00:25:08 2008
Return-Path: <java-user-return-37621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23695 invoked from network); 10 Dec 2008 00:25:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 00:25:08 -0000
Received: (qmail 59501 invoked by uid 500); 10 Dec 2008 00:25:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59475 invoked by uid 500); 10 Dec 2008 00:25:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59464 invoked by uid 99); 10 Dec 2008 00:25:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 16:25:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 00:25:00 +0000
Received: by yx-out-2324.google.com with SMTP id 3so115858yxj.5
        for <java-user@lucene.apache.org>; Tue, 09 Dec 2008 16:24:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=CD7QErwSru7owqOdfqBRc1KLtoocUFJ7qQOVsMZuyzk=;
        b=MCxJz+FKG/IHHOa0KodpIxGA0RtK5KOOV5tkRxucdjaVAuKC6NqRzIfzM7VFYfz3z3
         wlzLD4mdHdyLUwUpiJqANJdwkP6bAPpAFGJEi8pnt1n3rtM8Bk0uWuwybZ8U4WmP7PYZ
         cJiio82zf8Mn8TeHgaTGifr+M49jh8C4jN7QM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=xIBvfMRiMZ8vO+h/Qic3EAZi8FDKohOurW3MW0iiNG3Ndfhw4A3MrykZayAqwxjbXw
         qdw0RQkz+BAnX6Q+hMJnfvUuBYFJyg5Ma+Sx3K5U8CTT+3ugdZxaCsKqFuVotJQTDFwH
         btyPbLuPtIRsbx/j/AcCHOLypS0W3ZBPgy16Y=
Received: by 10.90.35.15 with SMTP id i15mr546247agi.23.1228868678981;
        Tue, 09 Dec 2008 16:24:38 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 6sm581727agd.37.2008.12.09.16.24.38
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 09 Dec 2008 16:24:38 -0800 (PST)
Message-ID: <493F0C45.7040803@gmail.com>
Date: Tue, 09 Dec 2008 19:24:37 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Has anyone written SpanFuzzyQuery?
References: <E95FD77F0171D14DA1EEE0A785E92B4303406C04@mail3.basistech.net>
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B4303406C04@mail3.basistech.net>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

http://issues.apache.org/jira/browse/LUCENE-522

note the bugs mentioned at the bottom.

- Mark



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 01:18:24 2008
Return-Path: <java-user-return-37622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33914 invoked from network); 10 Dec 2008 01:18:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 01:18:24 -0000
Received: (qmail 5093 invoked by uid 500); 10 Dec 2008 01:18:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5054 invoked by uid 500); 10 Dec 2008 01:18:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5034 invoked by uid 99); 10 Dec 2008 01:18:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 17:18:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.wang@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 01:18:15 +0000
Received: by yx-out-2324.google.com with SMTP id 3so124612yxj.5
        for <java-user@lucene.apache.org>; Tue, 09 Dec 2008 17:17:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=phQp2h3ryobylf66kwGPGI3iSPthvnJPoV3USK4cTWw=;
        b=e1UPUm+jMfL9pm8PFqTRaELDB6IlLDeARt1r+kWSycj2mLNRuVHNRd4mXpEZzoyRlN
         e36Uxt6XBGsUjXveikOTH2SG2cLjuCFomwYQORR3Lg20oxwWZUyMU+wf4vlw0D/HzEiA
         2Aj/gZPoEALHfx/JIYYLRCFzdb9rhuqz+IXBk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ggW0DXD00KkwT3tYDWP97yWgSyNSEVVnS05gzlVxDkYQB9tcytX7k3ewFDQGZ+Tnk9
         8eiZRrCrcr1jIr/nS6r4Jhyo5cdoLAKU3zXb3qasCOrfQbQDJtu3XOrxUWLSpD5lU04m
         8420Sz34p4zeF0IkuBgwshLHKYe1Qxn5lj5T4=
Received: by 10.90.118.19 with SMTP id q19mr553377agc.108.1228871874208;
        Tue, 09 Dec 2008 17:17:54 -0800 (PST)
Received: by 10.90.25.16 with HTTP; Tue, 9 Dec 2008 17:17:53 -0800 (PST)
Message-ID: <8837fb770812091717s7e0004cr3c12815bba4a7008@mail.gmail.com>
Date: Tue, 9 Dec 2008 17:17:53 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Chinese Analyzer evaluation
In-Reply-To: <e7dd79a40812090227p56da3c2bh6fbaf0d27cc109b3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19256_28343982.1228871874145"
References: <e7dd79a40812090227p56da3c2bh6fbaf0d27cc109b3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19256_28343982.1228871874145
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Cooper:
    Where are these classes?

Thanks

-John

On Tue, Dec 9, 2008 at 2:27 AM, Cooper Geng <coolgeng410@gmail.com> wrote:

> Hi all,
>
> My application will provide Chinese search engine. I got some analyzer on
> Chinese language.
> Any suggestion about these:
>
> IK_CAnalyzer
> IKAnalyzer
>
> or more?
>
> --
> Best Regards
> Cooper Geng
>

------=_Part_19256_28343982.1228871874145--

From java-user-return-37623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 03:02:39 2008
Return-Path: <java-user-return-37623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79962 invoked from network); 10 Dec 2008 03:02:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 03:02:38 -0000
Received: (qmail 94723 invoked by uid 500); 10 Dec 2008 03:02:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94697 invoked by uid 500); 10 Dec 2008 03:02:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94686 invoked by uid 99); 10 Dec 2008 03:02:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 19:02:44 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of coolgeng410@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 03:02:29 +0000
Received: by yw-out-2324.google.com with SMTP id 3so140822ywj.5
        for <java-user@lucene.apache.org>; Tue, 09 Dec 2008 19:02:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=kmalthW/vl5umDlbncsv/FjOQQTmgII/KtBFSMTpdfU=;
        b=WGUfwP0QZieyda+aH2v63ET1hOBs7ONJOamohBPTCsTy/K4qqqLMmegiOgoTSShy9V
         QGwdTuGxcD0jaIdNJvpHmSVBVBjZFBj4VCaIay13mLdpk7nIEeILjaO2Qu1A/atz9w6o
         V5IagbEShKGwRP1Zi5mJJbu1+TVIAkFuZ5zKE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=nhKVG4/1ahxrc749CqAwuc3gYP1BFPcQ2jpH7l5gjmR2lutS3pu1qARV/9gl796zXG
         4x5nVEL9/7E/H26PHw2o8NUUP8hLjL9Wztuo7H/5NXCrP0dIFliy+Tdf0iX9bifgLCgv
         0/CT1s4TBmFL/+uB/bikPQAYIo+BVTLQ45S2Q=
Received: by 10.151.108.3 with SMTP id k3mr1166611ybm.243.1228878128998;
        Tue, 09 Dec 2008 19:02:08 -0800 (PST)
Received: by 10.151.73.12 with HTTP; Tue, 9 Dec 2008 19:02:08 -0800 (PST)
Message-ID: <e7dd79a40812091902u4748460ref908480598a9918@mail.gmail.com>
Date: Wed, 10 Dec 2008 11:02:08 +0800
From: "Cooper Geng" <coolgeng410@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Chinese Analyzer evaluation
In-Reply-To: <8837fb770812091717s7e0004cr3c12815bba4a7008@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_104326_24915226.1228878128966"
References: <e7dd79a40812090227p56da3c2bh6fbaf0d27cc109b3@mail.gmail.com>
	 <8837fb770812091717s7e0004cr3c12815bba4a7008@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_104326_24915226.1228878128966
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I found these libraries from the google engine. But I have no experience on
using these classes. Do you any suggestion on Asian languages Analyzers?
Specially for Chinese....
Thanks in advance.


On Wed, Dec 10, 2008 at 9:17 AM, John Wang <john.wang@gmail.com> wrote:

> Hi Cooper:
>    Where are these classes?
>
> Thanks
>
> -John
>
> On Tue, Dec 9, 2008 at 2:27 AM, Cooper Geng <coolgeng410@gmail.com> wrote:
>
> > Hi all,
> >
> > My application will provide Chinese search engine. I got some analyzer on
> > Chinese language.
> > Any suggestion about these:
> >
> > IK_CAnalyzer
> > IKAnalyzer
> >
> > or more?
> >
> > --
> > Best Regards
> > Cooper Geng
> >
>



-- 
Best Regards
Cooper Geng

------=_Part_104326_24915226.1228878128966--

From java-user-return-37624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 05:30:19 2008
Return-Path: <java-user-return-37624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18519 invoked from network); 10 Dec 2008 05:30:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 05:30:19 -0000
Received: (qmail 28532 invoked by uid 500); 10 Dec 2008 05:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28491 invoked by uid 500); 10 Dec 2008 05:30:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28480 invoked by uid 99); 10 Dec 2008 05:30:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 21:30:24 -0800
X-ASF-Spam-Status: No, hits=-1.8 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dipak.kesarkar@capgemini.com designates 194.11.253.100 as permitted sender)
Received: from [194.11.253.100] (HELO SPFDEFRA01.capgemini.com) (194.11.253.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 05:30:10 +0000
X-IronPort-AV: E=Sophos;i="4.33,745,1220220000"; 
   d="scan'208,217";a="80763036"
Received: from unknown (HELO ntbomexmta.corp.capgemini.com) ([10.48.144.55])
  by IRDEFRA-C650-01-D2-incoming.capgemini.com with ESMTP; 10 Dec 2008 06:29:45 +0100
Received: from BOMEX002.corp.capgemini.com ([10.48.132.153]) by ntbomexmta.corp.capgemini.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 10 Dec 2008 10:59:38 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C95A88.4B7A1E38"
Subject: Taxonomy in Lucene
Date: Wed, 10 Dec 2008 10:59:38 +0530
Message-ID: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Taxonomy in Lucene
Thread-Index: AclaiEtj3qnDnl/XT3u3GTQ/RR2nfw==
From: "Kesarkar, Dipak" <dipak.kesarkar@capgemini.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Dec 2008 05:29:38.0488 (UTC) FILETIME=[4B768380:01C95A88]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C95A88.4B7A1E38
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi=20

=20

I want to include Taxonomy feature in my search.

Does Lucene support Taxonomy? How?

If not, is there in different way to add Taxonomy feature in the Lucene
search?

=20

Regards,

Dipak

=20







This message contains information that may be privileged or confidential an=
d is the property of the Capgemini Group. It is=20
intended only for the person to whom it is addressed. If you are not the in=
tended recipient, you are not authorized to=20
read, print, retain, copy, disseminate, distribute, or use this message or =
any part thereof. If you receive this message=20
in error, please notify the sender immediately and delete all copies of thi=
s message.

------_=_NextPart_001_01C95A88.4B7A1E38--


From java-user-return-37625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 06:11:47 2008
Return-Path: <java-user-return-37625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42621 invoked from network); 10 Dec 2008 06:11:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 06:11:47 -0000
Received: (qmail 67657 invoked by uid 500); 10 Dec 2008 06:11:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67634 invoked by uid 500); 10 Dec 2008 06:11:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67623 invoked by uid 99); 10 Dec 2008 06:11:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 09 Dec 2008 22:11:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 06:11:38 +0000
Received: by wa-out-1112.google.com with SMTP id n4so145947wag.5
        for <java-user@lucene.apache.org>; Tue, 09 Dec 2008 22:11:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=IATOfPzOGG1R+0X3C0QkAJp3hf8xKjshIclnRVFAK8g=;
        b=qbUxfjXAc8AYA95D+Thrtam2sgriAXmv2gjvQkMAZd16pSHBg4UhOnYj40F+WdblCL
         r9lI78XoO4mudA9V+2jrlZ71OMwqnB4X9EFHw7O8NkmLihoMy1ZFgz1PJYd7jM96TP+v
         ctiAX7bGtFcqbphIfve5hMXsVZ00MKKPu/Y2k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=e7ePq90rurwU+u1LiZF67yztCyt+AItDahZuN8wni7ADkhdpVNq4JHhf0dlhk/Q01i
         SoLYig+ErALylVVKK3j9bc1JEUiy7KiCYsiJ1fbdQl3iMDylSNRWVS2943dDZjxhMqH7
         AuVvOpWzALLyyvK4Pe6FmCEu5CEh6Sy6uL9Zk=
Received: by 10.114.81.1 with SMTP id e1mr699205wab.212.1228889477030;
        Tue, 09 Dec 2008 22:11:17 -0800 (PST)
Received: by 10.114.124.14 with HTTP; Tue, 9 Dec 2008 22:11:16 -0800 (PST)
Message-ID: <652776090812092211v50d4c2c7y38b92e55bb41c787@mail.gmail.com>
Date: Tue, 9 Dec 2008 22:11:16 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to docidset)
In-Reply-To: <BE2C8AEA-F897-45FA-A4E1-F0615C00D07F@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61735_15237343.1228889477028"
References: <652776090812082244xae92675v6df36ca3c0ea5bcd@mail.gmail.com>
	 <BE2C8AEA-F897-45FA-A4E1-F0615C00D07F@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61735_15237343.1228889477028
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yeah looks similar to what we've implemented for ourselves (although I
haven't looked at the implementation). We've got quite a custom version of
lucene at this point. Using Solr at this point really isn't a viable option,
but thanks for pointing this out.

M

On Tue, Dec 9, 2008 at 1:47 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> This use case sounds alot like faceted navigation, which Solr provides.
>
> Mike
>
>
> Michael Stoppelman wrote:
>
>  Hi all,
>>
>> I'm working on upgrading to Lucene 2.4.0 from 2.3.2 and was trying to
>> integrate the new DodIdSet changes since o.a.l.search.Filter#bits() method
>> is now depreciated. For our app we actually heavily rely on bits from the
>> Filter to do post-query filtering (I explain why below).
>>
>> For example, if someone searches for product: "ipod" and then filters a
>> type: "nano" (e.g. mini/nano/regular) AND color: "red" (e.g.
>> red/yellow/blue). In our current model the results are gathered in the
>> following way:
>>
>> 1) "ipod" w/o attributes is run and the results are stored in a
>> hitcollector
>> 2) "ipod" results are now filtered for color="red" AND type="mini" using
>> the
>> lucene Filters
>> 3) The filtered results are returned to the user.
>>
>> The reason that the attributes are filtered post-query is so that we can
>> return the other types and colors the user can filter by in the future.
>> Meaning the UI would be able to show "blue", "green", "pink", etc... if we
>> pre-filtered results by color and type before hand we wouldn't know what
>> the
>> other filter options would be there for a broader result set.
>>
>> Does anyone else have this use case? I'd imagine other folks are probably
>> doing similar things to accomplish this.
>>
>> M
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_61735_15237343.1228889477028--

From java-user-return-37626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 08:54:40 2008
Return-Path: <java-user-return-37626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7941 invoked from network); 10 Dec 2008 08:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 08:54:40 -0000
Received: (qmail 4594 invoked by uid 500); 10 Dec 2008 08:54:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4275 invoked by uid 500); 10 Dec 2008 08:54:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4264 invoked by uid 99); 10 Dec 2008 08:54:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 00:54:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 08:54:30 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by postfix.imss70 (Postfix) with ESMTP id ECD893196A
	for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 09:54:09 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id D85D73195B
	for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 09:54:09 +0100 (CET)
Received: from bledsoe.dfki.uni-sb.de (bledsoe.dfki.uni-sb.de [134.96.184.151])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id BF61931150
	for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 09:54:09 +0100 (CET)
Message-Id: <0ED61B57-B81F-4C1E-A102-F1D6E3D50C7F@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
Content-Type: multipart/signed; boundary=Apple-Mail-6--663537425; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Taxonomy in Lucene
Date: Wed, 10 Dec 2008 09:54:08 +0100
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-6--663537425
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable

Hello Dipak,

I'm interested by an answer here if you find one.

The way we have solved this in intergeo (or... are about to) is to use =20=

query expansion, we explain that in:
   http://www.activemath.org/~paul/pubs/cross-curriculum-search.html

more hints welcome.

paul


Le 10-d=E9c.-08 =E0 06:29, Kesarkar, Dipak a =E9crit :

> I want to include Taxonomy feature in my search.
>
> Does Lucene support Taxonomy? How?
>
> If not, is there in different way to add Taxonomy feature in the =20
> Lucene
> search?
>
> Regards,
> Dipak


--Apple-Mail-6--663537425
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIFzjCCAocw
ggHwoAMCAQICEHpkMpnMryEmArSVLnJkS28wDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA3MTIxOTE0MzI0NFoXDTA4MTIxODE0MzI0
NFowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMEY+jsbvfvg6uVnITE8Pd4RONXZvqxbynLR
rgmnc5pCsv3UfvWjDZfbkX3Nb2OE4j2HSwY6Uhj2SOjh25ibMg2buR6ubgYXHvCbMngeoA2jDjvb
dloET7Q0hynIMA281OfxTbEZzIlq55/xr0v8yKX3DyOXqnokERhOtay7RaCfAgMBAAGjMDAuMB4G
A1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQUF
AAOBgQB52LXV/dsJaWBm8ScjEEn2/ecdVmKkQvggQFxsMHxCoIV70+OIoLYaJoO15NpdLuN7EPLE
/vBBjoDp2A5KdxBAO8icv4LTOD3btE2oIcCz3SUffQtNTuUvFh9Z9OLGByLNRduw6RVm947pSNBG
G+Qqd5XWQUxGci8HcsOQAOsLXjCCAz8wggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJ
BgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgG
A1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMg
RGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3
DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3
MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9
fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+
uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMB
Af8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3
dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgG
A1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcP
f6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH
2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8x
ggKPMIICiwIBATB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAo
UHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQ
emQymcyvISYCtJUucmRLbzAJBgUrDgMCGgUAoIIBbzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcB
MBwGCSqGSIb3DQEJBTEPFw0wODEyMTAwODU0MDlaMCMGCSqGSIb3DQEJBDEWBBSdHcJ3rQUwF1ag
d3VLAL6vxLwioTCBhQYJKwYBBAGCNxAEMXgwdjBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0ECEHpkMpnMryEmArSVLnJkS28wgYcGCyqGSIb3DQEJEAILMXigdjBiMQsw
CQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UE
AxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEHpkMpnMryEmArSVLnJkS28w
DQYJKoZIhvcNAQEBBQAEgYCwDTq2LxYLMnbdNYgDcecwioYnduq0K6o7G96Xt/k5qN5WJ/C31X/c
TBzGrOVB6Go3JdD85dTCmjbOjmriMYtSEG/O91O7o6+sQvK7oGERN/b+HxTecAdxyCdN/Nvguflk
HkshpfhGBDa+jnP+vLHUfZHXrY6F4HssywMA07/BWgAAAAAAAA==

--Apple-Mail-6--663537425--

From java-user-return-37627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 11:35:31 2008
Return-Path: <java-user-return-37627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72952 invoked from network); 10 Dec 2008 11:35:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 11:35:31 -0000
Received: (qmail 70012 invoked by uid 500); 10 Dec 2008 11:35:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69975 invoked by uid 500); 10 Dec 2008 11:35:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69964 invoked by uid 99); 10 Dec 2008 11:35:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 03:35:33 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 11:35:19 +0000
Received: by gxk3 with SMTP id 3so432591gxk.5
        for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 03:34:57 -0800 (PST)
Received: by 10.90.101.17 with SMTP id y17mr754001agb.48.1228908896704;
        Wed, 10 Dec 2008 03:34:56 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 5sm1073766agc.29.2008.12.10.03.34.55
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 10 Dec 2008 03:34:55 -0800 (PST)
Message-Id: <298653D8-1AFA-4442-A0A2-AE8968BB3542@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <652776090812092211v50d4c2c7y38b92e55bb41c787@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to docidset)
Date: Wed, 10 Dec 2008 06:34:53 -0500
References: <652776090812082244xae92675v6df36ca3c0ea5bcd@mail.gmail.com> <BE2C8AEA-F897-45FA-A4E1-F0615C00D07F@mikemccandless.com> <652776090812092211v50d4c2c7y38b92e55bb41c787@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


In your approach, roughly how many filters do you have cached?  It  
seems like it could be quite a few (one for each color, one for each  
type, etc)?

You might be able to modify the new (on Lucene trunk)  
FieldCacheRangeFilter to achieve this same filtering without actually  
having to materialize the full bitset for each.

Mike

Michael Stoppelman wrote:

> Yeah looks similar to what we've implemented for ourselves (although I
> haven't looked at the implementation). We've got quite a custom  
> version of
> lucene at this point. Using Solr at this point really isn't a viable  
> option,
> but thanks for pointing this out.
>
> M
>
> On Tue, Dec 9, 2008 at 1:47 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
>>
>> This use case sounds alot like faceted navigation, which Solr  
>> provides.
>>
>> Mike
>>
>>
>> Michael Stoppelman wrote:
>>
>> Hi all,
>>>
>>> I'm working on upgrading to Lucene 2.4.0 from 2.3.2 and was trying  
>>> to
>>> integrate the new DodIdSet changes since  
>>> o.a.l.search.Filter#bits() method
>>> is now depreciated. For our app we actually heavily rely on bits  
>>> from the
>>> Filter to do post-query filtering (I explain why below).
>>>
>>> For example, if someone searches for product: "ipod" and then  
>>> filters a
>>> type: "nano" (e.g. mini/nano/regular) AND color: "red" (e.g.
>>> red/yellow/blue). In our current model the results are gathered in  
>>> the
>>> following way:
>>>
>>> 1) "ipod" w/o attributes is run and the results are stored in a
>>> hitcollector
>>> 2) "ipod" results are now filtered for color="red" AND type="mini"  
>>> using
>>> the
>>> lucene Filters
>>> 3) The filtered results are returned to the user.
>>>
>>> The reason that the attributes are filtered post-query is so that  
>>> we can
>>> return the other types and colors the user can filter by in the  
>>> future.
>>> Meaning the UI would be able to show "blue", "green", "pink",  
>>> etc... if we
>>> pre-filtered results by color and type before hand we wouldn't  
>>> know what
>>> the
>>> other filter options would be there for a broader result set.
>>>
>>> Does anyone else have this use case? I'd imagine other folks are  
>>> probably
>>> doing similar things to accomplish this.
>>>
>>> M
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 13:39:36 2008
Return-Path: <java-user-return-37628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26414 invoked from network); 10 Dec 2008 13:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 13:39:35 -0000
Received: (qmail 31796 invoked by uid 500); 10 Dec 2008 13:39:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31755 invoked by uid 500); 10 Dec 2008 13:39:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31744 invoked by uid 99); 10 Dec 2008 13:39:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 05:39:41 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [134.2.3.4] (HELO mx05.uni-tuebingen.de) (134.2.3.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 13:39:25 +0000
Received: from [134.2.167.7] (vpn0757.extern.uni-tuebingen.de [134.2.167.7])
	by mx05.uni-tuebingen.de (8.13.6/8.13.6) with ESMTP id mBADd3HK005049
	for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 14:39:04 +0100
Message-ID: <493FC675.3000806@sfs.uni-tuebingen.de>
Date: Wed, 10 Dec 2008 14:39:01 +0100
From: Niels Ott <nott@sfs.uni-tuebingen.de>
User-Agent: Thunderbird 2.0.0.16 (X11/20080904)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com> <0ED61B57-B81F-4C1E-A102-F1D6E3D50C7F@activemath.org>
In-Reply-To: <0ED61B57-B81F-4C1E-A102-F1D6E3D50C7F@activemath.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiVirus: checked by AntiVir MailGate (version: 2.1.2-11; AVE: 7.9.0.43; VDF: 7.1.0.216; host: mx05)
X-Virus-Checked: Checked by ClamAV on apache.org

Paul et al,

Paul Libbrecht schrieb:
> The way we have solved this in intergeo (or... are about to) is to use 
> query expansion, we explain that in:
>   http://www.activemath.org/~paul/pubs/cross-curriculum-search.html
> 
> more hints welcome.

The Lucene in Action book provides an example solution for indexing 
synonyms using WordNet.

They core of the approach is - to my understanding - to add to equip 
synonym Tokens with the very same positions as the "original" Tokens and 
add them to the TokenStream.

Best,

    Niels

-- 
Niels Ott
Computational Linguist (B.A.)
http://www.drni.de/niels/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 15:38:46 2008
Return-Path: <java-user-return-37629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78934 invoked from network); 10 Dec 2008 15:38:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 15:38:45 -0000
Received: (qmail 7856 invoked by uid 500); 10 Dec 2008 15:38:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7826 invoked by uid 500); 10 Dec 2008 15:38:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7815 invoked by uid 99); 10 Dec 2008 15:38:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 07:38:50 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 15:38:35 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id EA17A7B312
	for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 07:38:13 -0800 (PST)
Message-Id: <228024E8-235F-427D-B471-68EE9B3AAAB4@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20910159.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene SpellChecker returns no suggetions after changing Server
Date: Wed, 10 Dec 2008 10:38:12 -0500
References: <20910159.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

So, what changed with the server?

 From the looks of your code, you're passing the same index into both  
the Spellchecker and the IndexReader.   The spelling index is separate  
from the main index.

See the example at: http://lucene.apache.org/java/2_4_0/api/contrib-spellchecker/org/apache/lucene/search/spell/SpellChecker.html

See also my Boot Camp examples at: http://www.lucenebootcamp.com/LuceneBootCamp/training/src/test/java/com/lucenebootcamp/training/basic/ContribExamplesTest.java 
   Have a look at the testSpelling code there

HTH,
Grant


On Dec 9, 2008, at 2:50 AM, Matthias W. wrote:

>
> Hi,
> I'm using Lucene's SpellChecker (Lucene 2.1.0) class to get  
> suggestions.
> Till now my testing server was a VMWare-Image from  http://es.cohesiveft.com
> http://es.cohesiveft.com  (Ubuntu 8.10, Tomcat6, Java5).
> Now I'm using a Debian Etch Server with Tomcat5.5 and Java6.
>
> Code-Sample:
> String indexName = indexLocation;
> String queryString = null;
> queryString = URLDecoder.decode(request.getParameter("q"), "UTF-8");
> SpellChecker spellchecker = new
> SpellChecker(FSDirectory.getDirectory(indexName));
> String[] suggestions = spellchecker.suggestSimilar(queryString, 5,
> IndexReader.open(indexName), "content", false);
> for(int i = 0; i < suggestions.length; i++) {
> 	out.println(suggestions[i]);
> }
>
> This worked fine on the old server, but on my new server this returns
> nothing.
> The index is generated by the nutch crawler, but this shouldn't be the
> problem.
>
> I've got the lucene-spellchecker-2.1.0.jar in the WEB-INF/lib/ (If I  
> remove
> it, I get the expected errormessage.)
>
> So I don't know why I neither get results, nor an errormessage.
> -- 
> View this message in context: http://www.nabble.com/Lucene-SpellChecker-returns-no-suggetions-after-changing-Server-tp20910159p20910159.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 15:40:29 2008
Return-Path: <java-user-return-37630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79949 invoked from network); 10 Dec 2008 15:40:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 15:40:29 -0000
Received: (qmail 14163 invoked by uid 500); 10 Dec 2008 15:40:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14137 invoked by uid 500); 10 Dec 2008 15:40:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14120 invoked by uid 99); 10 Dec 2008 15:40:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 07:40:35 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 15:40:20 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id A287A109F32
	for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 07:39:58 -0800 (PST)
Message-Id: <3969B21A-4281-4DD2-AB2B-252D6CFDDC4D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <e7dd79a40812091902u4748460ref908480598a9918@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Chinese Analyzer evaluation
Date: Wed, 10 Dec 2008 10:39:57 -0500
References: <e7dd79a40812090227p56da3c2bh6fbaf0d27cc109b3@mail.gmail.com> <8837fb770812091717s7e0004cr3c12815bba4a7008@mail.gmail.com> <e7dd79a40812091902u4748460ref908480598a9918@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Have you tried the Chinese options in the contrib/analysis JAR?  I  
can't speak to their quality, so you will need to test.


On Dec 9, 2008, at 10:02 PM, Cooper Geng wrote:

> I found these libraries from the google engine. But I have no  
> experience on
> using these classes. Do you any suggestion on Asian languages  
> Analyzers?
> Specially for Chinese....
> Thanks in advance.
>
>
> On Wed, Dec 10, 2008 at 9:17 AM, John Wang <john.wang@gmail.com>  
> wrote:
>
>> Hi Cooper:
>>   Where are these classes?
>>
>> Thanks
>>
>> -John
>>
>> On Tue, Dec 9, 2008 at 2:27 AM, Cooper Geng <coolgeng410@gmail.com>  
>> wrote:
>>
>>> Hi all,
>>>
>>> My application will provide Chinese search engine. I got some  
>>> analyzer on
>>> Chinese language.
>>> Any suggestion about these:
>>>
>>> IK_CAnalyzer
>>> IKAnalyzer
>>>
>>> or more?
>>>
>>> --
>>> Best Regards
>>> Cooper Geng
>>>
>>
>
>
>
> -- 
> Best Regards
> Cooper Geng

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 15:42:20 2008
Return-Path: <java-user-return-37631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80817 invoked from network); 10 Dec 2008 15:42:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 15:42:20 -0000
Received: (qmail 20907 invoked by uid 500); 10 Dec 2008 15:42:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20873 invoked by uid 500); 10 Dec 2008 15:42:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20862 invoked by uid 99); 10 Dec 2008 15:42:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 07:42:26 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 15:42:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LARCA-0001vW-VD
	for java-user@lucene.apache.org; Wed, 10 Dec 2008 07:41:50 -0800
Message-ID: <20937717.post@talk.nabble.com>
Date: Wed, 10 Dec 2008 07:41:50 -0800 (PST)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Dipak,

Which kind of "Taxonomy"?
Where is the difference to "faceted browsing" in your case?

best regards
  Karsten


Kesarkar, Dipak wrote:
> 
> Hi 
> 
> I want to include Taxonomy feature in my search.
> 
> Does Lucene support Taxonomy? How?
> 
> If not, is there in different way to add Taxonomy feature in the Lucene
> search?
> 
-- 
View this message in context: http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20937717.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 17:27:36 2008
Return-Path: <java-user-return-37632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25024 invoked from network); 10 Dec 2008 17:27:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 17:27:35 -0000
Received: (qmail 95912 invoked by uid 500); 10 Dec 2008 17:27:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95885 invoked by uid 500); 10 Dec 2008 17:27:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95874 invoked by uid 99); 10 Dec 2008 17:27:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 09:27:41 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jason.rutherglen@gmail.com designates 209.85.217.13 as permitted sender)
Received: from [209.85.217.13] (HELO mail-gx0-f13.google.com) (209.85.217.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 17:27:26 +0000
Received: by gxk6 with SMTP id 6so71879gxk.11
        for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 09:26:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=/jWUaYxQz3T9BiTN5EaCUBpSQFUWuVdUKGG/Ng5hOH0=;
        b=jZKPOYFnShrkj1ykVSreLaqZ/hlBglascBCUvA5WAlIfLtVvWCDvxthL3y3/t4sf9G
         TcXVdYsdyIbw5vSD8F+4IA2nFVF1ur0kug2Fo6XWU87TgpkMQvHi0/YZzVXENfm2M5c+
         /7em9+KJdTgcVBmag5vwMUxI660Zs+0BgzO1A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LoHZg7wQr1kfFLt6MvvPzvEiin3rccWp9nk9s4wxRJPVvpjqN+jmnJikyH8R8oadou
         HWAAFfPcl97LEjqjKtjVnHKu5dO2tV/uw9W7bq0XTmpt/cMgiWRMD5YuhSoRh53cWiIQ
         OuTM2UgLCIna8MxIrv0S12Cvq49eflzAP/iuA=
Received: by 10.150.11.6 with SMTP id 6mr2514432ybk.61.1228930016091;
        Wed, 10 Dec 2008 09:26:56 -0800 (PST)
Received: by 10.151.119.5 with HTTP; Wed, 10 Dec 2008 09:26:56 -0800 (PST)
Message-ID: <85d3c3b60812100926o16e466cdle2440ee1ef82e57f@mail.gmail.com>
Date: Wed, 10 Dec 2008 09:26:56 -0800
From: "Jason Rutherglen" <jason.rutherglen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to docidset)
In-Reply-To: <652776090812092211v50d4c2c7y38b92e55bb41c787@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_112575_16478199.1228930016092"
References: <652776090812082244xae92675v6df36ca3c0ea5bcd@mail.gmail.com>
	 <BE2C8AEA-F897-45FA-A4E1-F0615C00D07F@mikemccandless.com>
	 <652776090812092211v50d4c2c7y38b92e55bb41c787@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_112575_16478199.1228930016092
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi M.S.,

Do you think it would be cool to have some faceting built into Lucene at
some point?

-J

On Tue, Dec 9, 2008 at 10:11 PM, Michael Stoppelman <stopman@gmail.com>wrote:

> Yeah looks similar to what we've implemented for ourselves (although I
> haven't looked at the implementation). We've got quite a custom version of
> lucene at this point. Using Solr at this point really isn't a viable
> option,
> but thanks for pointing this out.
>
> M
>
> On Tue, Dec 9, 2008 at 1:47 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
> >
> > This use case sounds alot like faceted navigation, which Solr provides.
> >
> > Mike
> >
> >
> > Michael Stoppelman wrote:
> >
> >  Hi all,
> >>
> >> I'm working on upgrading to Lucene 2.4.0 from 2.3.2 and was trying to
> >> integrate the new DodIdSet changes since o.a.l.search.Filter#bits()
> method
> >> is now depreciated. For our app we actually heavily rely on bits from
> the
> >> Filter to do post-query filtering (I explain why below).
> >>
> >> For example, if someone searches for product: "ipod" and then filters a
> >> type: "nano" (e.g. mini/nano/regular) AND color: "red" (e.g.
> >> red/yellow/blue). In our current model the results are gathered in the
> >> following way:
> >>
> >> 1) "ipod" w/o attributes is run and the results are stored in a
> >> hitcollector
> >> 2) "ipod" results are now filtered for color="red" AND type="mini" using
> >> the
> >> lucene Filters
> >> 3) The filtered results are returned to the user.
> >>
> >> The reason that the attributes are filtered post-query is so that we can
> >> return the other types and colors the user can filter by in the future.
> >> Meaning the UI would be able to show "blue", "green", "pink", etc... if
> we
> >> pre-filtered results by color and type before hand we wouldn't know what
> >> the
> >> other filter options would be there for a broader result set.
> >>
> >> Does anyone else have this use case? I'd imagine other folks are
> probably
> >> doing similar things to accomplish this.
> >>
> >> M
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_112575_16478199.1228930016092--

From java-user-return-37633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 18:56:12 2008
Return-Path: <java-user-return-37633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74196 invoked from network); 10 Dec 2008 18:56:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 18:56:12 -0000
Received: (qmail 19361 invoked by uid 500); 10 Dec 2008 18:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19207 invoked by uid 500); 10 Dec 2008 18:56:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19194 invoked by uid 99); 10 Dec 2008 18:56:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 10:56:17 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 18:56:03 +0000
Received: by yw-out-2324.google.com with SMTP id 3so282107ywj.5
        for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 10:55:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=wdYfSE/z2qy5ZbI0JnEeXor8hPDVzrI973o8KXAvTfU=;
        b=iOqRDndJRYT5aWy9ftvIxg9rQJ1jxr1rxfU6OY9wuvRcZ3ReOAGzQ25bpk+MV+thoL
         +onFGkwaWaFOXIwa/RznfVEf2vukDi16MfMLbmsSjH4n8pyu7UyYP9fBNZ1a3mtuzOqd
         wg5rci7BO7o9EIGDfseK/xYuBc/dTM7cC2OLM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=JHGjbtocLEqKdjLPaXMoq6G0X1P6GecGUXpn6Joh6xnglywvKHFcwg4KyQQmv6rJxY
         8ZUjuQpQ5kUtcKf2+3kUyOajJTt+dqW9QkQC8h5cxK6JH30QJEc1iiwnd9OEbZj2Sb+E
         p3MkIjngKH8szzBIy4absZVf4JHStAzyqiJWA=
Received: by 10.143.14.6 with SMTP id r6mr343690wfi.135.1228935332549;
        Wed, 10 Dec 2008 10:55:32 -0800 (PST)
Received: by 10.143.5.5 with HTTP; Wed, 10 Dec 2008 10:55:32 -0800 (PST)
Message-ID: <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
Date: Wed, 10 Dec 2008 13:55:32 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <20937717.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
	 <20937717.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>From what I understand:
faceted browse is a taxonomy of depth =1

A taxonomy in general has an arbitrary depth:

Example: Biological taxonomy:

Kingdom Animalia
   Phylum Acanthocephala
      Class Archiacanthocephala
   Phylum Annelida
Kingdom Fungi
   Phylum Ascomycota
      Class Ascomycetes
         Order Acarosporales
            Family Acarosporaceae
               Genus Acarospora
                  Acarospora admissa

-glen



2008/12/10 Karsten F. <karsten-lucene@fiz-technik.de>:
>
> Hi Dipak,
>
> Which kind of "Taxonomy"?
> Where is the difference to "faceted browsing" in your case?
>
> best regards
>  Karsten
>
>
> Kesarkar, Dipak wrote:
>>
>> Hi
>>
>> I want to include Taxonomy feature in my search.
>>
>> Does Lucene support Taxonomy? How?
>>
>> If not, is there in different way to add Taxonomy feature in the Lucene
>> search?
>>
> --
> View this message in context: http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20937717.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 19:27:56 2008
Return-Path: <java-user-return-37634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86376 invoked from network); 10 Dec 2008 19:27:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 19:27:56 -0000
Received: (qmail 71497 invoked by uid 500); 10 Dec 2008 19:28:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71433 invoked by uid 500); 10 Dec 2008 19:28:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71421 invoked by uid 99); 10 Dec 2008 19:28:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 11:28:02 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.wang@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 19:27:47 +0000
Received: by yw-out-2324.google.com with SMTP id 3so289160ywj.5
        for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 11:27:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=g5JMlzJ5IvPaj4ICojMiA2OWEVfvPSPo+pTZnCsxuTM=;
        b=Ouzna+tD/aSLSSxGJmiZ413xLET9SACrB0BNzqTwyO7mbjR9PnhA7tXocZM9ucVeLt
         I0mvQMYW3ki0UR4kxeVV2ObbK9dImCyZ0b8Yq6UYfV2uSej7qOih5GBhi5JewH3e4toZ
         oEjv1zFDYFLhjJQ7JI4VrAc6IMWfzqG63qhRg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uZujxgWnXQSvigvLjuoWqwE+Qp5nAsWpS/yiC8hlcSVLW7EciyaSakHchbtt7prKK8
         1t3cACWYvL/2oHpFXQ+2rQr65FwHDkOzeH9cVWHjv0WANoO6ER/j8tSXekK/+eqnjHxr
         H0WjpApjmOSWPfIHsMKJRP3o4mk8uY0AAvvkY=
Received: by 10.90.99.5 with SMTP id w5mr1084017agb.16.1228937245337;
        Wed, 10 Dec 2008 11:27:25 -0800 (PST)
Received: by 10.90.25.16 with HTTP; Wed, 10 Dec 2008 11:27:25 -0800 (PST)
Message-ID: <8837fb770812101127q2432669ake0b9511de4684f42@mail.gmail.com>
Date: Wed, 10 Dec 2008 11:27:25 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33008_21979868.1228937245335"
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
	 <20937717.post@talk.nabble.com>
	 <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33008_21979868.1228937245335
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

www.browseengine.com
-John

On Wed, Dec 10, 2008 at 10:55 AM, Glen Newton <glen.newton@gmail.com> wrote:

> From what I understand:
> faceted browse is a taxonomy of depth =1
>
> A taxonomy in general has an arbitrary depth:
>
> Example: Biological taxonomy:
>
> Kingdom Animalia
>   Phylum Acanthocephala
>      Class Archiacanthocephala
>   Phylum Annelida
> Kingdom Fungi
>   Phylum Ascomycota
>      Class Ascomycetes
>         Order Acarosporales
>            Family Acarosporaceae
>               Genus Acarospora
>                  Acarospora admissa
>
> -glen
>
>
>
> 2008/12/10 Karsten F. <karsten-lucene@fiz-technik.de>:
> >
> > Hi Dipak,
> >
> > Which kind of "Taxonomy"?
> > Where is the difference to "faceted browsing" in your case?
> >
> > best regards
> >  Karsten
> >
> >
> > Kesarkar, Dipak wrote:
> >>
> >> Hi
> >>
> >> I want to include Taxonomy feature in my search.
> >>
> >> Does Lucene support Taxonomy? How?
> >>
> >> If not, is there in different way to add Taxonomy feature in the Lucene
> >> search?
> >>
> > --
> > View this message in context:
> http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20937717.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_33008_21979868.1228937245335--

From java-user-return-37635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 19:29:03 2008
Return-Path: <java-user-return-37635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86873 invoked from network); 10 Dec 2008 19:29:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 19:29:03 -0000
Received: (qmail 76763 invoked by uid 500); 10 Dec 2008 19:29:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76725 invoked by uid 500); 10 Dec 2008 19:29:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76714 invoked by uid 99); 10 Dec 2008 19:29:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 11:29:08 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.wang@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 19:28:53 +0000
Received: by yw-out-2324.google.com with SMTP id 3so289343ywj.5
        for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 11:28:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Az+PuLKGPb651dAlFF6j2jqlJKeGIzI1PvmABRK/lGw=;
        b=xkQJgD8WE7xAvg0Lg3IjsZr2RpsFH0seMBM3eSPvqoVMQA6qDYzDPc69N2IuWkGYKN
         jsG5rEy4RP82u0Acftx+58WciXCtq8p2bocnfrnibuF96AnUGRH3mOUdb+bCEYCef7fp
         ktodLOYmFc1rFsBjIYx/eNqCn/yI0xaoi/n28=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=f5v4eoRCSpjR6D/9TV/WooawD8VHn1LFLtzjSjW2zSCFxQoN4VJLLvBX+U45qLU/R+
         sfwIHFgUcyWV2LYkKskgI3UpUh8xAOywPhlC3IxDN11YiYTMXC4TbVzH2Ezl60wMc++A
         5ofCTD7bKRRIYHBMSGQu+NQ7kyBZclMT/ffjk=
Received: by 10.90.98.13 with SMTP id v13mr1082271agb.28.1228937302940;
        Wed, 10 Dec 2008 11:28:22 -0800 (PST)
Received: by 10.90.25.16 with HTTP; Wed, 10 Dec 2008 11:28:22 -0800 (PST)
Message-ID: <8837fb770812101128n5e1b5f6m628df7ad88c8dc0b@mail.gmail.com>
Date: Wed, 10 Dec 2008 11:28:22 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <8837fb770812101127q2432669ake0b9511de4684f42@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33052_27751971.1228937302908"
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
	 <20937717.post@talk.nabble.com>
	 <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
	 <8837fb770812101127q2432669ake0b9511de4684f42@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_33052_27751971.1228937302908
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We are doing a release shortly which contains API change.Let us know if you
need help.

-John

On Wed, Dec 10, 2008 at 11:27 AM, John Wang <john.wang@gmail.com> wrote:

> www.browseengine.com
> -John
>
>
> On Wed, Dec 10, 2008 at 10:55 AM, Glen Newton <glen.newton@gmail.com>wrote:
>
>> From what I understand:
>> faceted browse is a taxonomy of depth =1
>>
>> A taxonomy in general has an arbitrary depth:
>>
>> Example: Biological taxonomy:
>>
>> Kingdom Animalia
>>   Phylum Acanthocephala
>>      Class Archiacanthocephala
>>   Phylum Annelida
>> Kingdom Fungi
>>   Phylum Ascomycota
>>      Class Ascomycetes
>>         Order Acarosporales
>>            Family Acarosporaceae
>>               Genus Acarospora
>>                  Acarospora admissa
>>
>> -glen
>>
>>
>>
>> 2008/12/10 Karsten F. <karsten-lucene@fiz-technik.de>:
>> >
>> > Hi Dipak,
>> >
>> > Which kind of "Taxonomy"?
>> > Where is the difference to "faceted browsing" in your case?
>> >
>> > best regards
>> >  Karsten
>> >
>> >
>> > Kesarkar, Dipak wrote:
>> >>
>> >> Hi
>> >>
>> >> I want to include Taxonomy feature in my search.
>> >>
>> >> Does Lucene support Taxonomy? How?
>> >>
>> >> If not, is there in different way to add Taxonomy feature in the Lucene
>> >> search?
>> >>
>> > --
>> > View this message in context:
>> http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20937717.html
>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>>
>> --
>>
>> -
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_33052_27751971.1228937302908--

From java-user-return-37636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 20:25:09 2008
Return-Path: <java-user-return-37636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3192 invoked from network); 10 Dec 2008 20:25:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 20:25:09 -0000
Received: (qmail 50663 invoked by uid 500); 10 Dec 2008 20:25:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50629 invoked by uid 500); 10 Dec 2008 20:25:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50618 invoked by uid 99); 10 Dec 2008 20:25:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 12:25:13 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of TSturge@hi5.com designates 64.18.1.32 as permitted sender)
Received: from [64.18.1.32] (HELO psmtp.com) (64.18.1.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Dec 2008 20:24:56 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by exprod6ob114.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSUAk9YPrhkdvsxPUpfFS78palXA0j2QM@postini.com; Wed, 10 Dec 2008 12:24:35 PST
Received: from d01smtp07.Mi8.com ([172.16.1.114]) by Outbound02.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Dec 2008 15:22:12 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by d01smtp07.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Dec 2008 15:22:12 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.104]) with Microsoft Exchange Server HTTP-DAV ;
 Wed, 10 Dec 2008 20:21:54 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Wed, 10 Dec 2008 12:21:52 -0800
Subject: Re: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to
 docidset)
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C56564E0.2246%tsturge@hi5.com>
Thread-Topic: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to
 docidset)
Thread-Index: AclbBO/sXlq0Jhd23UivglkunQeo4Q==
In-Reply-To: <298653D8-1AFA-4442-A0A2-AE8968BB3542@mikemccandless.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-OriginalArrivalTime: 10 Dec 2008 20:22:12.0507 (UTC) FILETIME=[FC254EB0:01C95B04]
X-Virus-Checked: Checked by ClamAV on apache.org

Mike, Mike,

I have an implementation of FieldCacheTermsFilter (which uses field cache to
filter for a predefined set of terms) around if either of you are
interested. It is faster than materializing the filter roughly when the
filter matches more than 1% of the documents.

So it's not better for a large set of small filters (which you can
materialize on the spot) but it is better for a small set (but more than 32)
large filters. 

Let me know if you're interested and I'll send it in.

Tim

On 12/10/08 3:34 AM, "Michael McCandless" <lucene@mikemccandless.com> wrote:

> 
> In your approach, roughly how many filters do you have cached?  It
> seems like it could be quite a few (one for each color, one for each
> type, etc)?
> 
> You might be able to modify the new (on Lucene trunk)
> FieldCacheRangeFilter to achieve this same filtering without actually
> having to materialize the full bitset for each.
> 
> Mike
> 
> Michael Stoppelman wrote:
> 
>> Yeah looks similar to what we've implemented for ourselves (although I
>> haven't looked at the implementation). We've got quite a custom
>> version of
>> lucene at this point. Using Solr at this point really isn't a viable
>> option,
>> but thanks for pointing this out.
>> 
>> M
>> 
>> On Tue, Dec 9, 2008 at 1:47 AM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>> 
>>> 
>>> This use case sounds alot like faceted navigation, which Solr
>>> provides.
>>> 
>>> Mike
>>> 
>>> 
>>> Michael Stoppelman wrote:
>>> 
>>> Hi all,
>>>> 
>>>> I'm working on upgrading to Lucene 2.4.0 from 2.3.2 and was trying
>>>> to
>>>> integrate the new DodIdSet changes since
>>>> o.a.l.search.Filter#bits() method
>>>> is now depreciated. For our app we actually heavily rely on bits
>>>> from the
>>>> Filter to do post-query filtering (I explain why below).
>>>> 
>>>> For example, if someone searches for product: "ipod" and then
>>>> filters a
>>>> type: "nano" (e.g. mini/nano/regular) AND color: "red" (e.g.
>>>> red/yellow/blue). In our current model the results are gathered in
>>>> the
>>>> following way:
>>>> 
>>>> 1) "ipod" w/o attributes is run and the results are stored in a
>>>> hitcollector
>>>> 2) "ipod" results are now filtered for color="red" AND type="mini"
>>>> using
>>>> the
>>>> lucene Filters
>>>> 3) The filtered results are returned to the user.
>>>> 
>>>> The reason that the attributes are filtered post-query is so that
>>>> we can
>>>> return the other types and colors the user can filter by in the
>>>> future.
>>>> Meaning the UI would be able to show "blue", "green", "pink",
>>>> etc... if we
>>>> pre-filtered results by color and type before hand we wouldn't
>>>> know what
>>>> the
>>>> other filter options would be there for a broader result set.
>>>> 
>>>> Does anyone else have this use case? I'd imagine other folks are
>>>> probably
>>>> doing similar things to accomplish this.
>>>> 
>>>> M
>>>> 
>>> 
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> 
>>> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 20:46:56 2008
Return-Path: <java-user-return-37637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12317 invoked from network); 10 Dec 2008 20:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 20:46:55 -0000
Received: (qmail 81006 invoked by uid 500); 10 Dec 2008 20:47:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80967 invoked by uid 500); 10 Dec 2008 20:47:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80956 invoked by uid 99); 10 Dec 2008 20:47:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 12:47:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 20:46:47 +0000
Received: by ewy14 with SMTP id 14so1012148ewy.5
        for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 12:45:26 -0800 (PST)
Received: by 10.210.125.13 with SMTP id x13mr2178266ebc.144.1228941926373;
        Wed, 10 Dec 2008 12:45:26 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 6sm4817989nfv.55.2008.12.10.12.45.24
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 10 Dec 2008 12:45:24 -0800 (PST)
Message-Id: <77CE970D-217E-4DC0-93BE-F254F92B2BF6@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <C56564E0.2246%tsturge@hi5.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to docidset)
Date: Wed, 10 Dec 2008 15:45:22 -0500
References: <C56564E0.2246%tsturge@hi5.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


It'd be great to get this into Lucene.

Does FieldCacheTermsFilter let you specify a set of arbitrary terms to  
filter for, like TermsFilter in contrib/queries?  And it's space/time  
efficient once FieldCache is populated?

Mike

Tim Sturge wrote:

> Mike, Mike,
>
> I have an implementation of FieldCacheTermsFilter (which uses field  
> cache to
> filter for a predefined set of terms) around if either of you are
> interested. It is faster than materializing the filter roughly when  
> the
> filter matches more than 1% of the documents.
>
> So it's not better for a large set of small filters (which you can
> materialize on the spot) but it is better for a small set (but more  
> than 32)
> large filters.
>
> Let me know if you're interested and I'll send it in.
>
> Tim
>
> On 12/10/08 3:34 AM, "Michael McCandless"  
> <lucene@mikemccandless.com> wrote:
>
>>
>> In your approach, roughly how many filters do you have cached?  It
>> seems like it could be quite a few (one for each color, one for each
>> type, etc)?
>>
>> You might be able to modify the new (on Lucene trunk)
>> FieldCacheRangeFilter to achieve this same filtering without actually
>> having to materialize the full bitset for each.
>>
>> Mike
>>
>> Michael Stoppelman wrote:
>>
>>> Yeah looks similar to what we've implemented for ourselves  
>>> (although I
>>> haven't looked at the implementation). We've got quite a custom
>>> version of
>>> lucene at this point. Using Solr at this point really isn't a viable
>>> option,
>>> but thanks for pointing this out.
>>>
>>> M
>>>
>>> On Tue, Dec 9, 2008 at 1:47 AM, Michael McCandless <
>>> lucene@mikemccandless.com> wrote:
>>>
>>>>
>>>> This use case sounds alot like faceted navigation, which Solr
>>>> provides.
>>>>
>>>> Mike
>>>>
>>>>
>>>> Michael Stoppelman wrote:
>>>>
>>>> Hi all,
>>>>>
>>>>> I'm working on upgrading to Lucene 2.4.0 from 2.3.2 and was trying
>>>>> to
>>>>> integrate the new DodIdSet changes since
>>>>> o.a.l.search.Filter#bits() method
>>>>> is now depreciated. For our app we actually heavily rely on bits
>>>>> from the
>>>>> Filter to do post-query filtering (I explain why below).
>>>>>
>>>>> For example, if someone searches for product: "ipod" and then
>>>>> filters a
>>>>> type: "nano" (e.g. mini/nano/regular) AND color: "red" (e.g.
>>>>> red/yellow/blue). In our current model the results are gathered in
>>>>> the
>>>>> following way:
>>>>>
>>>>> 1) "ipod" w/o attributes is run and the results are stored in a
>>>>> hitcollector
>>>>> 2) "ipod" results are now filtered for color="red" AND type="mini"
>>>>> using
>>>>> the
>>>>> lucene Filters
>>>>> 3) The filtered results are returned to the user.
>>>>>
>>>>> The reason that the attributes are filtered post-query is so that
>>>>> we can
>>>>> return the other types and colors the user can filter by in the
>>>>> future.
>>>>> Meaning the UI would be able to show "blue", "green", "pink",
>>>>> etc... if we
>>>>> pre-filtered results by color and type before hand we wouldn't
>>>>> know what
>>>>> the
>>>>> other filter options would be there for a broader result set.
>>>>>
>>>>> Does anyone else have this use case? I'd imagine other folks are
>>>>> probably
>>>>> doing similar things to accomplish this.
>>>>>
>>>>> M
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 21:14:00 2008
Return-Path: <java-user-return-37638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22853 invoked from network); 10 Dec 2008 21:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 21:14:00 -0000
Received: (qmail 21745 invoked by uid 500); 10 Dec 2008 21:14:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21704 invoked by uid 500); 10 Dec 2008 21:14:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21693 invoked by uid 99); 10 Dec 2008 21:14:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 13:14:05 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of TSturge@hi5.com designates 64.18.1.187 as permitted sender)
Received: from [64.18.1.187] (HELO exprod6og104.obsmtp.com) (64.18.1.187)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Dec 2008 21:13:50 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by exprod6ob104.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSUAw+HhycmHzOlCa2cwYr9VHdqLEPcde@postini.com; Wed, 10 Dec 2008 13:13:30 PST
Received: from d01smtp07.Mi8.com ([172.16.1.114]) by Outbound01.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Dec 2008 16:13:27 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by d01smtp07.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Dec 2008 16:13:26 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.104]) with Microsoft Exchange Server HTTP-DAV ;
 Wed, 10 Dec 2008 21:13:25 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Wed, 10 Dec 2008 13:13:24 -0800
Subject: Re: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to
 docidset)
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C56570F4.2256%tsturge@hi5.com>
Thread-Topic: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to
 docidset)
Thread-Index: AclbDCLlCcN7eH8XNU2PlrQVoYXsSg==
In-Reply-To: <77CE970D-217E-4DC0-93BE-F254F92B2BF6@mikemccandless.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-OriginalArrivalTime: 10 Dec 2008 21:13:26.0944 (UTC) FILETIME=[24A72A00:01C95B0C]
X-Virus-Checked: Checked by ClamAV on apache.org

Yes (mostly). It turns those terms into an OpenBitSet on the term array.
Then it does a fastGet() in the next() and skipTo() loops to see if the term
for that document is in the set.

The issue is that fastGet() is not as fast as the two inequalities in FCRF.
I didn't directly benchmark FCTF against FCRF because I had a different
application in mind for FCTF (location boxes). However it wasn't as
efficient in that case as directly realizing the bit sets. This was mostly
because in the application I had in mind there were a lot (>100K) of terms
with relatively low frequency and queries that needed only a few hundred
terms in the set.

I tried a sorted list of terms and Arrays.binarySearch() but that is way
slower as is Set<Integer> (no surprise there). I was thinking about a custom
hash table implementation but I'm not hopeful; it increases cycle cost and
means 

So it is efficient but for a more limited set of cases than FCRF. My gut
feeling is that FCRF is a better solution for "most" range filters, whereas
FCTF is a better solution for "some" term set filters (versus creating
TermsFilter objects on the fly each time) It all depends on how common the
terms are and how large the sets of terms are. Lots of terms (or a few very
common terms) it wins. A few less common terms it loses.

I'll open a JIRA issue for it.

Tim

On 12/10/08 12:45 PM, "Michael McCandless" <lucene@mikemccandless.com>
wrote:

> 
> It'd be great to get this into Lucene.
> 
> Does FieldCacheTermsFilter let you specify a set of arbitrary terms to
> filter for, like TermsFilter in contrib/queries?  And it's space/time
> efficient once FieldCache is populated?
> 
> Mike
> 
> Tim Sturge wrote:
> 
>> Mike, Mike,
>> 
>> I have an implementation of FieldCacheTermsFilter (which uses field
>> cache to
>> filter for a predefined set of terms) around if either of you are
>> interested. It is faster than materializing the filter roughly when
>> the
>> filter matches more than 1% of the documents.
>> 
>> So it's not better for a large set of small filters (which you can
>> materialize on the spot) but it is better for a small set (but more
>> than 32)
>> large filters.
>> 
>> Let me know if you're interested and I'll send it in.
>> 
>> Tim
>> 
>> On 12/10/08 3:34 AM, "Michael McCandless"
>> <lucene@mikemccandless.com> wrote:
>> 
>>> 
>>> In your approach, roughly how many filters do you have cached?  It
>>> seems like it could be quite a few (one for each color, one for each
>>> type, etc)?
>>> 
>>> You might be able to modify the new (on Lucene trunk)
>>> FieldCacheRangeFilter to achieve this same filtering without actually
>>> having to materialize the full bitset for each.
>>> 
>>> Mike
>>> 
>>> Michael Stoppelman wrote:
>>> 
>>>> Yeah looks similar to what we've implemented for ourselves
>>>> (although I
>>>> haven't looked at the implementation). We've got quite a custom
>>>> version of
>>>> lucene at this point. Using Solr at this point really isn't a viable
>>>> option,
>>>> but thanks for pointing this out.
>>>> 
>>>> M
>>>> 
>>>> On Tue, Dec 9, 2008 at 1:47 AM, Michael McCandless <
>>>> lucene@mikemccandless.com> wrote:
>>>> 
>>>>> 
>>>>> This use case sounds alot like faceted navigation, which Solr
>>>>> provides.
>>>>> 
>>>>> Mike
>>>>> 
>>>>> 
>>>>> Michael Stoppelman wrote:
>>>>> 
>>>>> Hi all,
>>>>>> 
>>>>>> I'm working on upgrading to Lucene 2.4.0 from 2.3.2 and was trying
>>>>>> to
>>>>>> integrate the new DodIdSet changes since
>>>>>> o.a.l.search.Filter#bits() method
>>>>>> is now depreciated. For our app we actually heavily rely on bits
>>>>>> from the
>>>>>> Filter to do post-query filtering (I explain why below).
>>>>>> 
>>>>>> For example, if someone searches for product: "ipod" and then
>>>>>> filters a
>>>>>> type: "nano" (e.g. mini/nano/regular) AND color: "red" (e.g.
>>>>>> red/yellow/blue). In our current model the results are gathered in
>>>>>> the
>>>>>> following way:
>>>>>> 
>>>>>> 1) "ipod" w/o attributes is run and the results are stored in a
>>>>>> hitcollector
>>>>>> 2) "ipod" results are now filtered for color="red" AND type="mini"
>>>>>> using
>>>>>> the
>>>>>> lucene Filters
>>>>>> 3) The filtered results are returned to the user.
>>>>>> 
>>>>>> The reason that the attributes are filtered post-query is so that
>>>>>> we can
>>>>>> return the other types and colors the user can filter by in the
>>>>>> future.
>>>>>> Meaning the UI would be able to show "blue", "green", "pink",
>>>>>> etc... if we
>>>>>> pre-filtered results by color and type before hand we wouldn't
>>>>>> know what
>>>>>> the
>>>>>> other filter options would be there for a broader result set.
>>>>>> 
>>>>>> Does anyone else have this use case? I'd imagine other folks are
>>>>>> probably
>>>>>> doing similar things to accomplish this.
>>>>>> 
>>>>>> M
>>>>>> 
>>>>> 
>>>>> 
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>> 
>>>>> 
>>> 
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> 
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 21:34:36 2008
Return-Path: <java-user-return-37639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39806 invoked from network); 10 Dec 2008 21:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 21:34:36 -0000
Received: (qmail 50038 invoked by uid 500); 10 Dec 2008 21:34:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50003 invoked by uid 500); 10 Dec 2008 21:34:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49992 invoked by uid 99); 10 Dec 2008 21:34:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 13:34:42 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.1.25 as permitted sender)
Received: from [64.18.1.25] (HELO exprod6og110.obsmtp.com) (64.18.1.25)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 10 Dec 2008 21:34:20 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by exprod6ob110.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSUA1xW5dXoxNbD+crfuOkV830xLEsZa4@postini.com; Wed, 10 Dec 2008 13:34:00 PST
Received: from d01smtp03.Mi8.com ([172.16.1.24]) by Outbound02.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Dec 2008 16:33:56 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by d01smtp03.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 10 Dec 2008 16:33:56 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.104]) with Microsoft Exchange Server HTTP-DAV ;
 Wed, 10 Dec 2008 21:33:22 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Wed, 10 Dec 2008 13:33:19 -0800
Subject: Re: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to
 docidset)
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C565759F.225B%tsturge@hi5.com>
Thread-Topic: Issue upgrading from lucene 2.3.2 to 2.4 (moving from bitset to
 docidset)
Thread-Index: AclbDCLlCcN7eH8XNU2PlrQVoYXsSgAAshHw
In-Reply-To: <C56570F4.2256%tsturge@hi5.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-OriginalArrivalTime: 10 Dec 2008 21:33:56.0615 (UTC) FILETIME=[01981170:01C95B0F]
X-Virus-Checked: Checked by ClamAV on apache.org

It's LUCENE-1487. 

Tim


On 12/10/08 1:13 PM, "Tim Sturge" <tsturge@hi5.com> wrote:

> Yes (mostly). It turns those terms into an OpenBitSet on the term array.
> Then it does a fastGet() in the next() and skipTo() loops to see if the term
> for that document is in the set.
> 
> The issue is that fastGet() is not as fast as the two inequalities in FCRF.
> I didn't directly benchmark FCTF against FCRF because I had a different
> application in mind for FCTF (location boxes). However it wasn't as
> efficient in that case as directly realizing the bit sets. This was mostly
> because in the application I had in mind there were a lot (>100K) of terms
> with relatively low frequency and queries that needed only a few hundred
> terms in the set.
> 
> I tried a sorted list of terms and Arrays.binarySearch() but that is way
> slower as is Set<Integer> (no surprise there). I was thinking about a custom
> hash table implementation but I'm not hopeful; it increases cycle cost and
> means 
> 
> So it is efficient but for a more limited set of cases than FCRF. My gut
> feeling is that FCRF is a better solution for "most" range filters, whereas
> FCTF is a better solution for "some" term set filters (versus creating
> TermsFilter objects on the fly each time) It all depends on how common the
> terms are and how large the sets of terms are. Lots of terms (or a few very
> common terms) it wins. A few less common terms it loses.
> 
> I'll open a JIRA issue for it.
> 
> Tim
> 
> On 12/10/08 12:45 PM, "Michael McCandless" <lucene@mikemccandless.com>
> wrote:
> 
>> 
>> It'd be great to get this into Lucene.
>> 
>> Does FieldCacheTermsFilter let you specify a set of arbitrary terms to
>> filter for, like TermsFilter in contrib/queries?  And it's space/time
>> efficient once FieldCache is populated?
>> 
>> Mike
>> 
>> Tim Sturge wrote:
>> 
>>> Mike, Mike,
>>> 
>>> I have an implementation of FieldCacheTermsFilter (which uses field
>>> cache to
>>> filter for a predefined set of terms) around if either of you are
>>> interested. It is faster than materializing the filter roughly when
>>> the
>>> filter matches more than 1% of the documents.
>>> 
>>> So it's not better for a large set of small filters (which you can
>>> materialize on the spot) but it is better for a small set (but more
>>> than 32)
>>> large filters.
>>> 
>>> Let me know if you're interested and I'll send it in.
>>> 
>>> Tim
>>> 
>>> On 12/10/08 3:34 AM, "Michael McCandless"
>>> <lucene@mikemccandless.com> wrote:
>>> 
>>>> 
>>>> In your approach, roughly how many filters do you have cached?  It
>>>> seems like it could be quite a few (one for each color, one for each
>>>> type, etc)?
>>>> 
>>>> You might be able to modify the new (on Lucene trunk)
>>>> FieldCacheRangeFilter to achieve this same filtering without actually
>>>> having to materialize the full bitset for each.
>>>> 
>>>> Mike
>>>> 
>>>> Michael Stoppelman wrote:
>>>> 
>>>>> Yeah looks similar to what we've implemented for ourselves
>>>>> (although I
>>>>> haven't looked at the implementation). We've got quite a custom
>>>>> version of
>>>>> lucene at this point. Using Solr at this point really isn't a viable
>>>>> option,
>>>>> but thanks for pointing this out.
>>>>> 
>>>>> M
>>>>> 
>>>>> On Tue, Dec 9, 2008 at 1:47 AM, Michael McCandless <
>>>>> lucene@mikemccandless.com> wrote:
>>>>> 
>>>>>> 
>>>>>> This use case sounds alot like faceted navigation, which Solr
>>>>>> provides.
>>>>>> 
>>>>>> Mike
>>>>>> 
>>>>>> 
>>>>>> Michael Stoppelman wrote:
>>>>>> 
>>>>>> Hi all,
>>>>>>> 
>>>>>>> I'm working on upgrading to Lucene 2.4.0 from 2.3.2 and was trying
>>>>>>> to
>>>>>>> integrate the new DodIdSet changes since
>>>>>>> o.a.l.search.Filter#bits() method
>>>>>>> is now depreciated. For our app we actually heavily rely on bits
>>>>>>> from the
>>>>>>> Filter to do post-query filtering (I explain why below).
>>>>>>> 
>>>>>>> For example, if someone searches for product: "ipod" and then
>>>>>>> filters a
>>>>>>> type: "nano" (e.g. mini/nano/regular) AND color: "red" (e.g.
>>>>>>> red/yellow/blue). In our current model the results are gathered in
>>>>>>> the
>>>>>>> following way:
>>>>>>> 
>>>>>>> 1) "ipod" w/o attributes is run and the results are stored in a
>>>>>>> hitcollector
>>>>>>> 2) "ipod" results are now filtered for color="red" AND type="mini"
>>>>>>> using
>>>>>>> the
>>>>>>> lucene Filters
>>>>>>> 3) The filtered results are returned to the user.
>>>>>>> 
>>>>>>> The reason that the attributes are filtered post-query is so that
>>>>>>> we can
>>>>>>> return the other types and colors the user can filter by in the
>>>>>>> future.
>>>>>>> Meaning the UI would be able to show "blue", "green", "pink",
>>>>>>> etc... if we
>>>>>>> pre-filtered results by color and type before hand we wouldn't
>>>>>>> know what
>>>>>>> the
>>>>>>> other filter options would be there for a broader result set.
>>>>>>> 
>>>>>>> Does anyone else have this use case? I'd imagine other folks are
>>>>>>> probably
>>>>>>> doing similar things to accomplish this.
>>>>>>> 
>>>>>>> M
>>>>>>> 
>>>>>> 
>>>>>> 
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>> 
>>>>>> 
>>>> 
>>>> 
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> 
>>> 
>>> 
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> 
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 21:44:55 2008
Return-Path: <java-user-return-37640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45951 invoked from network); 10 Dec 2008 21:44:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 21:44:55 -0000
Received: (qmail 63862 invoked by uid 500); 10 Dec 2008 21:45:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63467 invoked by uid 500); 10 Dec 2008 21:45:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63456 invoked by uid 99); 10 Dec 2008 21:45:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 13:45:00 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 21:44:39 +0000
Received: by wf-out-1314.google.com with SMTP id 28so318118wfc.20
        for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 13:44:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=zp5n8q2lCD8KXZ/WKcn2y9zTMm7K2fNZJNFNoG4DR9g=;
        b=cWj+WbwX4/RPjslM9Gkg8Osx9IBiXkeU3V3wpT4+KIPJtYW0IoGc67PK0bnYFnGTul
         5mplNogFjhy1q/qhP05onucoSy9UxHkTGc9ZPN4aKhqTH+Vw4cF8ZjjkrReaclEWoxie
         pIUF8a4lyxSuTz45TVSBkdzC4ImrW5sJU8tW0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=lOr/A8kODxkVxX++FXpTyleBRAVS/TVe0dviP2c56SHGluHVB5UJryNSNgLktnK1HO
         boor8igxSoeoUS6M6X+iBZ7Sk5pkYyqMqpRUS1h6Eq18Le9aDt9VLfAICWfJ1spQr9NB
         TmLF1DbteOQOlLK942N1IuTVtC4h64B3Rkea8=
Received: by 10.142.125.9 with SMTP id x9mr404925wfc.331.1228945458731;
        Wed, 10 Dec 2008 13:44:18 -0800 (PST)
Received: by 10.143.5.5 with HTTP; Wed, 10 Dec 2008 13:44:18 -0800 (PST)
Message-ID: <5e76f3840812101344la082895s46fd9d30ed6c48c5@mail.gmail.com>
Date: Wed, 10 Dec 2008 16:44:18 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <8837fb770812101127q2432669ake0b9511de4684f42@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
	 <20937717.post@talk.nabble.com>
	 <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
	 <8837fb770812101127q2432669ake0b9511de4684f42@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think this is an Open Source project: I couldn't find any
source on the site and the only download is a jar with .class files...

-glen

2008/12/10 John Wang <john.wang@gmail.com>:
> www.browseengine.com
> -John
>
> On Wed, Dec 10, 2008 at 10:55 AM, Glen Newton <glen.newton@gmail.com> wrote:
>
>> From what I understand:
>> faceted browse is a taxonomy of depth =1
>>
>> A taxonomy in general has an arbitrary depth:
>>
>> Example: Biological taxonomy:
>>
>> Kingdom Animalia
>>   Phylum Acanthocephala
>>      Class Archiacanthocephala
>>   Phylum Annelida
>> Kingdom Fungi
>>   Phylum Ascomycota
>>      Class Ascomycetes
>>         Order Acarosporales
>>            Family Acarosporaceae
>>               Genus Acarospora
>>                  Acarospora admissa
>>
>> -glen
>>
>>
>>
>> 2008/12/10 Karsten F. <karsten-lucene@fiz-technik.de>:
>> >
>> > Hi Dipak,
>> >
>> > Which kind of "Taxonomy"?
>> > Where is the difference to "faceted browsing" in your case?
>> >
>> > best regards
>> >  Karsten
>> >
>> >
>> > Kesarkar, Dipak wrote:
>> >>
>> >> Hi
>> >>
>> >> I want to include Taxonomy feature in my search.
>> >>
>> >> Does Lucene support Taxonomy? How?
>> >>
>> >> If not, is there in different way to add Taxonomy feature in the Lucene
>> >> search?
>> >>
>> > --
>> > View this message in context:
>> http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20937717.html
>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>>
>> --
>>
>> -
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 21:52:00 2008
Return-Path: <java-user-return-37641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50220 invoked from network); 10 Dec 2008 21:52:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 21:52:00 -0000
Received: (qmail 77263 invoked by uid 500); 10 Dec 2008 21:52:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77230 invoked by uid 500); 10 Dec 2008 21:52:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77218 invoked by uid 99); 10 Dec 2008 21:52:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 13:52:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.15.82.66] (HELO dz7.dailyrazor.com) (67.15.82.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 21:51:44 +0000
Received: from c-76-100-31-215.hsd1.md.comcast.net ([76.100.31.215]:40608 helo=[192.168.169.1])
	by dz7.dailyrazor.com with esmtpa (Exim 4.69)
	(envelope-from <gary@littlebunch.com>)
	id 1LAWxm-0007gs-J5
	for java-user@lucene.apache.org; Wed, 10 Dec 2008 15:51:22 -0600
Message-ID: <4940478C.9030907@littlebunch.com>
Date: Wed, 10 Dec 2008 16:49:48 -0600
From: Gary Moore <gary@littlebunch.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>	 <20937717.post@talk.nabble.com>	 <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>	 <8837fb770812101127q2432669ake0b9511de4684f42@mail.gmail.com> <5e76f3840812101344la082895s46fd9d30ed6c48c5@mail.gmail.com>
In-Reply-To: <5e76f3840812101344la082895s46fd9d30ed6c48c5@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - dz7.dailyrazor.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - littlebunch.com
X-Virus-Checked: Checked by ClamAV on apache.org

  svn co 
https://bobo-browse.svn.sourceforge.net/svnroot/bobo-browse/trunk 
bobo-browse
-Gary
Glen Newton wrote:
> I don't think this is an Open Source project: I couldn't find any
> source on the site and the only download is a jar with .class files...
>
> -glen
>
> 2008/12/10 John Wang <john.wang@gmail.com>:
>   
>> www.browseengine.com
>> -John
>>     


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 21:52:38 2008
Return-Path: <java-user-return-37642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50648 invoked from network); 10 Dec 2008 21:52:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 21:52:38 -0000
Received: (qmail 81726 invoked by uid 500); 10 Dec 2008 21:52:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81699 invoked by uid 500); 10 Dec 2008 21:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81688 invoked by uid 99); 10 Dec 2008 21:52:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 13:52:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 21:52:29 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 0144D71C54C; Wed, 10 Dec 2008 13:52:08 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id F1A9C71C522
	for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 13:52:08 -0800 (PST)
Date: Wed, 10 Dec 2008 13:52:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Re Lucene analyzers
In-Reply-To: <005a01c956df$dc505e00$94f11a00$@cassinera@mercadolibre.com>
Message-ID: <Pine.LNX.4.62.0812101348470.10261@radix.cryptio.net>
References: <005a01c956df$dc505e00$94f11a00$@cassinera@mercadolibre.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: public final TokenStream tokenStream(String fieldName, Reader reader)
: 
: Usually does  a bunch of new filters, from what I seen in most of these
: filters none of the use class member variables.  Has anybody tried making
: them static to avoid the creation of new objects.

that wouldn't really work -- partly because then your Analyzer wouldn't be 
thread safe (so you couldn't index more then one doc in parallel) and 
partly because all those Tokenizers and TokenFilter's take the TokenStream 
as a constructor arg.

Note that anytime an Analyzer needs to do some initialization that's 
common for all TokenStreams (like building up a Stop Words Set) it does it 
once in it's own constructor, so the object construction cost in the 
tokenStream method calls is relatively cheap.

Of course: much of this is changing in 2.9/3.0 .. in ways i still don't 
fully understand, so stay tuned.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 10 22:00:57 2008
Return-Path: <java-user-return-37643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56514 invoked from network); 10 Dec 2008 22:00:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2008 22:00:57 -0000
Received: (qmail 92875 invoked by uid 500); 10 Dec 2008 22:01:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92846 invoked by uid 500); 10 Dec 2008 22:01:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92835 invoked by uid 99); 10 Dec 2008 22:01:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 14:01:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 22:00:48 +0000
Received: by yx-out-2324.google.com with SMTP id 3so323465yxj.5
        for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 14:00:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=3E5Vd5blEC1Mx6JVXFs2mEOrAe+8id9q4JOt1Pq3ay4=;
        b=fahcELI65zq5k5KAotTDyCB74pnwp/h3e2RgKbN84WLWLmtJWZsm+Is+GYwO2RUdcd
         Yt1qWCwSvmGWtK8Ypr/9CK3FBeK7sBxD3vE0vo0v8ynVPiTYj+90zDqChzxo8BBinCiJ
         bmUWiA+HbhJiur9k+fKh3rjjQigquP+40efh0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Uib7XVguRmFFcmutIm70g8MK4e8pUHNEwh04o1R3bUoOVQ1S/uLdg56K3Hj7p9yCzu
         YAapUWN8KqppJUquqz9fhqd9oq/vfY21lij07Cm05siajpFFCFTbIj0quDqm/Cq0gdSN
         pdaEiB2QfhBp5bGuyi8kaLyajFsO+8RX3NFpU=
Received: by 10.142.246.6 with SMTP id t6mr191747wfh.6.1228946426332;
        Wed, 10 Dec 2008 14:00:26 -0800 (PST)
Received: by 10.143.5.5 with HTTP; Wed, 10 Dec 2008 14:00:26 -0800 (PST)
Message-ID: <5e76f3840812101400w16cce4afy26248555111fba0e@mail.gmail.com>
Date: Wed, 10 Dec 2008 17:00:26 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <4940478C.9030907@littlebunch.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
	 <20937717.post@talk.nabble.com>
	 <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
	 <8837fb770812101127q2432669ake0b9511de4684f42@mail.gmail.com>
	 <5e76f3840812101344la082895s46fd9d30ed6c48c5@mail.gmail.com>
	 <4940478C.9030907@littlebunch.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Oops. Thanks!  :-)

2008/12/10 Gary Moore <gary@littlebunch.com>:
>  svn co https://bobo-browse.svn.sourceforge.net/svnroot/bobo-browse/trunk
> bobo-browse
> -Gary
> Glen Newton wrote:
>>
>> I don't think this is an Open Source project: I couldn't find any
>> source on the site and the only download is a jar with .class files...
>>
>> -glen
>>
>> 2008/12/10 John Wang <john.wang@gmail.com>:
>>
>>>
>>> www.browseengine.com
>>> -John
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 00:04:25 2008
Return-Path: <java-user-return-37644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93806 invoked from network); 11 Dec 2008 00:04:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 00:04:25 -0000
Received: (qmail 58874 invoked by uid 500); 11 Dec 2008 00:04:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58840 invoked by uid 500); 11 Dec 2008 00:04:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58829 invoked by uid 99); 11 Dec 2008 00:04:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 16:04:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 00:04:16 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id AF02271C50B; Wed, 10 Dec 2008 16:03:55 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id ABB9F71C1C9
	for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 16:03:55 -0800 (PST)
Date: Wed, 10 Dec 2008 16:03:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0812101553090.10261@radix.cryptio.net>
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
  <20937717.post@talk.nabble.com> <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: >From what I understand:
: faceted browse is a taxonomy of depth =1

not inherently, that's just one of the most common mental models.  The 
common approaches for dealing iwth faceted search in Lucene all work 
equally well when dealing with a taxonomy as long as your faceting code is 
*aware* of hte taxonomy and only computes the facet counts it needs to 
based on the users "current" location in the taxonomy (unless of course 
you want ll the counts for hte entire taxonomy in all cases -- in which 
case no pecial logic is needed: only your presentation layer needs to care 
about the taxonomy)

the simple faceting support provided out of the box by solr can easily be 
used for taxonomy based faceting if you encode your taxonomy breadcrumbs 
in the docs (a google search for "solr hierarchical facets" will give you 
lots off discussion on this).


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:46:32 2008
Return-Path: <java-user-return-37658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36650 invoked from network); 11 Dec 2008 17:31:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 17:31:31 -0000
Received: (qmail 95418 invoked by uid 500); 11 Dec 2008 17:31:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95394 invoked by uid 500); 11 Dec 2008 17:31:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95383 invoked by uid 99); 11 Dec 2008 17:31:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 09:31:36 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prabin.meitei@gmail.com designates 209.85.218.14 as permitted sender)
Received: from [209.85.218.14] (HELO mail-bw0-f14.google.com) (209.85.218.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 17:31:22 +0000
Received: by bwz7 with SMTP id 7so2043445bwz.5
        for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 09:31:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=qRBY+O6BuZeWEtGgBaEfCKiMIySkAOG49W1oo34oXrs=;
        b=pitfiqisdkv4HbYLDmEXlfCYPDgMnWae71KgB6pnOjAG0P35oPwRZAR6xym7+s2cUr
         jQqPGd/f10h7e+DykYSghD0ZIaxe8zsXtQNIxzq/9R5WCpOFfPsQ5mY6m/I5/KbbgSpC
         Frq5C2nzHvOCYABg6P5WVqbfK61igmG5UWFjA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=r4i/S1Aub18KMpPeshfLWo4y70wWq2GQMIltkGZF7zj1KK5jqrqzkANiA9o+HyVbT5
         YG3TZ3h6wm3unJ+SQdcwWXj3TP7zsT9vSY1YUkTqMMjIERmmIDFkl4tKQZopPleiTWNQ
         HnISbr/bkZb7iDa4BbGau5llhBh/tJu5s6244=
Received: by 10.103.92.8 with SMTP id u8mr1247825mul.12.1229016434400;
        Thu, 11 Dec 2008 09:27:14 -0800 (PST)
Received: by 10.103.245.16 with HTTP; Thu, 11 Dec 2008 09:27:14 -0800 (PST)
Message-ID: <295da8fe0812110927v83e11e4ie834a654c40d9725@mail.gmail.com>
Date: Thu, 11 Dec 2008 22:57:14 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Dynamic Score Boosting by creator
In-Reply-To: <CF83BAA719FD2C439D25CBB1C9D1D3020DBC1D06@HQ-MAIL4.ptcnet.ptc.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_125076_17305211.1229016434385"
References: <CF83BAA719FD2C439D25CBB1C9D1D3020DBC1D06@HQ-MAIL4.ptcnet.ptc.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_125076_17305211.1229016434385
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,   You can boost an individual query.
For example
Assuming your query to be a boolean query containing a term for the creator
BooleanQuery query = new BooleanQuery();
.
(any other part of your query)
.

TermQuery termQ = new TermQuery(new Term("creator", user));
termQ.setBoost(3.0f);  //boost this query by factor of 3

query.add(termQ, Occur.SHOULD);

This will make sure that any document matching creator with user will be
given more boost.


Prabin Meitei
toostep.com



On Thu, Dec 11, 2008 at 8:52 PM, Dalvi, Rajesh <rdalvi@ptc.com> wrote:

> Hello,
>
> I am indexing creator information for each document. When I query with
> given User, I want documents created by the given user should score
> higher. How can I do this?
>
> Thanks,
> Rajesh
>

------=_Part_125076_17305211.1229016434385--

From java-user-return-37654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:46:41 2008
Return-Path: <java-user-return-37654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85321 invoked from network); 11 Dec 2008 16:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 16:00:00 -0000
Received: (qmail 93818 invoked by uid 500); 11 Dec 2008 16:00:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93790 invoked by uid 500); 11 Dec 2008 16:00:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93778 invoked by uid 99); 11 Dec 2008 16:00:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 08:00:06 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.15] (HELO relay01.pair.com) (209.68.5.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Dec 2008 15:59:44 +0000
Received: (qmail 41623 invoked from network); 11 Dec 2008 15:59:21 -0000
Received: from 38.104.58.186 (HELO ?10.0.1.25?) (38.104.58.186)
  by relay01.pair.com with SMTP; 11 Dec 2008 15:59:21 -0000
X-pair-Authenticated: 38.104.58.186
Subject: How to search for "-2" in field?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Thu, 11 Dec 2008 10:59:21 -0500
Message-Id: <1229011161.7448.10.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
  This might be a dumb question, but I have a simple field like this

field: 0 -2 Word

that is indexed,tokenized and stored. I've tried various ways in Lucene
(using Luke) to search for "-2 Word" and none of them work, the query is
re-written improperly. I escaped the -2 to "\-2 Word" and it still
doesn't work. I've used all the analyzers.


What's the trick here?

Thanks,
Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:47:39 2008
Return-Path: <java-user-return-37659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37362 invoked from network); 11 Dec 2008 17:32:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 17:32:39 -0000
Received: (qmail 99954 invoked by uid 500); 11 Dec 2008 17:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99812 invoked by uid 500); 11 Dec 2008 17:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99801 invoked by uid 99); 11 Dec 2008 17:32:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 09:32:44 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 17:32:22 +0000
Received: by fk-out-0910.google.com with SMTP id 18so630092fkq.5
        for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 09:32:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=AcOTY9G8PZX5HJf8mjbolOrnk1snsMzQXIKzDTaQ+tw=;
        b=UsIyHRfFJGhoKkUZ0aXhbP7kCIlUOUtw09yhUag+Q/PW04a4B5fFwA/pVQ8eB+/hdH
         rnsTpMbbWlU4OEQabPvIfq9HebB1HbKiSonlBDoeiSqJY78xznSRlvaGSwT31oD9zko6
         LClCej0bTl7yaoUQjSOuNAl1W+dB2O/vpP+jc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Uadu7ROuY1afI9ZurpGEGhofLJHg8ZmMkUqERDaScBvCL3nvY19B0prwFFc5SWDklL
         cNYtkP57f95N6nyPkKmiLFzksabnnZg2j5FNQe5MmE0le63pRQp+EEAg3HBMvHxmLqQl
         UWnb/g+FTzquWgoH4V56sSfF6R0wB3fIImO6A=
Received: by 10.103.160.9 with SMTP id m9mr1235264muo.96.1229016720829;
        Thu, 11 Dec 2008 09:32:00 -0800 (PST)
Received: by 10.103.245.16 with HTTP; Thu, 11 Dec 2008 09:32:00 -0800 (PST)
Message-ID: <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>
Date: Thu, 11 Dec 2008 23:02:00 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search for "-2" in field?
In-Reply-To: <1229015253.7448.12.camel@nuraku>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_125216_19260793.1229016720839"
References: <1229011161.7448.10.camel@nuraku>
	 <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>
	 <1229015253.7448.12.camel@nuraku>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_125216_19260793.1229016720839
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,  While constructing the query give the query string in quotes.
eg: query = queryparser.parse("\"-2 word\"");

Prabin meitei
toostep.com

On Thu, Dec 11, 2008 at 10:37 PM, Darren Govoni <darren@ontrenet.com> wrote:

> I'm hoping to do this with a simple query string, but not sure if its
> possible. I'll try your suggestion though as a workaround.
>
> Thanks!!
>
> On Thu, 2008-12-11 at 16:48 +0000, Robert Young wrote:
> > You could do it with a TermQuery but I'm not quite sure if that's the
> answer
> > you're looking for.
> >
> > Cheers
> > Rob
> >
> > On Thu, Dec 11, 2008 at 3:59 PM, Darren Govoni <darren@ontrenet.com>
> wrote:
> >
> > > Hi,
> > >  This might be a dumb question, but I have a simple field like this
> > >
> > > field: 0 -2 Word
> > >
> > > that is indexed,tokenized and stored. I've tried various ways in Lucene
> > > (using Luke) to search for "-2 Word" and none of them work, the query
> is
> > > re-written improperly. I escaped the -2 to "\-2 Word" and it still
> > > doesn't work. I've used all the analyzers.
> > >
> > >
> > > What's the trick here?
> > >
> > > Thanks,
> > > Darren
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_125216_19260793.1229016720839--

From java-user-return-37657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:48:15 2008
Return-Path: <java-user-return-37657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27590 invoked from network); 11 Dec 2008 17:21:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 17:21:34 -0000
Received: (qmail 74884 invoked by uid 500); 11 Dec 2008 17:21:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74859 invoked by uid 500); 11 Dec 2008 17:21:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74842 invoked by uid 99); 11 Dec 2008 17:21:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 09:21:39 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 17:21:19 +0000
Received: by yw-out-2324.google.com with SMTP id 3so477332ywj.5
        for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 09:20:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=9d7khQOs/Lgqyj4+51V0tA5rEH8Larv8Ml4f/wE9Yv4=;
        b=R3bvEHH6F4d9W/ss3HX34oIWlSTmB85CnatsuTH1BpZyOyGRA7uwXA1NlQH2G1K6G3
         Q5GvutvlxlpEqJz/+b2myBYb4zr9ONExOM6rRdkikoBQi6gY38zVSTp0mXq1AgigAshw
         AaHjpqjqefXkttwxv8jSn40q7UHwnECKkH+es=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OuNSgMSoN2WmBZN7sRAwPHx2w9g1zq0uMlXQQmNfvsVG2Qul39ViCJ5l2mq4mbtsCE
         7kWywkMu52FKAw/pQ96FLBdutDDz8UBccrMO6aK8rOtffKaxd2Brlb+Ca9oeke5xIpIk
         FPKOkl19MdvmNUP3Z1W0x2Qu6VdQPCOnVlhnk=
Received: by 10.90.71.16 with SMTP id t16mr1673893aga.1.1229016057665;
        Thu, 11 Dec 2008 09:20:57 -0800 (PST)
Received: by 10.90.25.16 with HTTP; Thu, 11 Dec 2008 09:20:57 -0800 (PST)
Message-ID: <8837fb770812110920n7519423ex4bf5d89da9950417@mail.gmail.com>
Date: Thu, 11 Dec 2008 09:20:57 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <20952134.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49858_32689915.1229016057625"
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
	 <20937717.post@talk.nabble.com>
	 <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
	 <Pine.LNX.4.62.0812101553090.10261@radix.cryptio.net>
	 <20952134.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49858_32689915.1229016057625
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

We are doing lotsa internal changes for performance. Also upgrading the api
to support for features. So my suggestion is to wait for 2.0. (should
release this this month, at the latest mid jan) We can take this offline if
you want to have a deeper discussion on browse engine.

Thanks

-John

On Thu, Dec 11, 2008 at 1:23 AM, Karsten F.
<karsten-lucene@fiz-technik.de>wrote:

>
> hi glen,
>
> possible you will find this thread interesting:
>
> http://groups.google.com/group/xtf-user/browse_thread/thread/beb62f5ff9a16a3a/16044d1009511cda
> was about a taxonomy like in your example.
> Also take a look to the faceted browsing on date in
>
> http://www.marktwainproject.org/xtf/search?category=letters;style=mtp;facet-written=
>
> In solr 1.3 the faceted browsing was implemented with filter for each
> possible value.
> The implementation in xtf is quite more sophisticated (
> http://xtf.wiki.sourceforge.net/programming_Faceted_Browsing ).
> I am not familiar with current version of solr.
>
> Best regards
>  Karsten
>
>
>
> hossman wrote:
> >
> > the simple faceting support provided out of the box by solr can easily be
> > used for taxonomy based faceting if you encode your taxonomy breadcrumbs
> > in the docs (a google search for "solr hierarchical facets" will give you
> > lots off discussion on this).
> >
> >
> > -Hoss
> >
>
> --
> View this message in context:
> http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20952134.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_49858_32689915.1229016057625--

From java-user-return-37650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:48:44 2008
Return-Path: <java-user-return-37650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23628 invoked from network); 11 Dec 2008 13:48:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 13:48:43 -0000
Received: (qmail 61694 invoked by uid 500); 11 Dec 2008 13:48:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61665 invoked by uid 500); 11 Dec 2008 13:48:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61654 invoked by uid 99); 11 Dec 2008 13:48:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 05:48:49 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 13:48:28 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id EC55F15D4ED
	for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 05:48:06 -0800 (PST)
Message-Id: <7A716968-AF33-4423-8B5E-756369EDA3C9@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20953625.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Spell check of a large text
Date: Thu, 11 Dec 2008 08:48:06 -0500
References: <20953625.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I think I'm missing something here...

Spell checked in what sense?  Sounds to me like you need dictionary  
based spell checking during index, not index based spelling during  
search, right?

How about hooking up something like the Jazzy spell checker into a  
TokenFilter?  Then, as the tokens stream by, you lookup the spelling  
and then add a 1 byte payload to all words that are misspelled.

As for Highlighter, hmmm...  Not sure if there is a way to make a  
Fragmenter/Scorer that was payload aware, such that it would only  
produce fragments (and scores) for sections of the file that have  
these payloads.  Definitely pushing my area of expertise, but maybe  
one of the Highlighter experts can chime in.

HTH,
Grant

On Dec 11, 2008, at 6:18 AM, Lucene User no 1981 wrote:

>
> Hi,
>
> the problem is as follows: there is a text, ca. 30kb, it has to be
> spellchecked automatically, there is no manual intervention, no  
> suggestions
> needed. All I would like to achieve is a simple check if there are any
> problems with the spelling or not. It has to be rather fast cause  
> there are
> tons of docs a minute going thru the system. Solutions like
> SpellChecker.exists() don't really apply. Additionally, spelling  
> errors
> could be highlighted - haven't really found any reasonable way of  
> leveraging
> Highlighter for that task.
>
> Does anyone have any idea how this problem can be addressed with  
> Lucene?
>
> Regards,
> Mac
> -- 
> View this message in context: http://www.nabble.com/Spell-check-of-a-large-text-tp20953625p20953625.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:49:07 2008
Return-Path: <java-user-return-37655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7228 invoked from network); 11 Dec 2008 16:49:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 16:49:07 -0000
Received: (qmail 12925 invoked by uid 500); 11 Dec 2008 16:49:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12896 invoked by uid 500); 11 Dec 2008 16:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12885 invoked by uid 99); 11 Dec 2008 16:49:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 08:49:12 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bubblenut@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 16:48:58 +0000
Received: by yx-out-2324.google.com with SMTP id 3so466655yxj.5
        for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 08:48:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type:references
         :x-google-sender-auth;
        bh=+TpaHwdmOQa5pSBpJhGjYiKXkQX2xmQ3f7Z/pdQYMLc=;
        b=UGcdRVg4HVDG6Tv04WJkisU4koB0WFtyo+jVKihJAZXsJT9vQIi0S/vDvuFfVqoHNv
         Q0Pqqrik8TTBESYukjX+AqD+qLUb23MSUM7uwJSNvLVtU8+4wOHychmPa070Naau3115
         fuIGsEJX7kpMu+hpVyvsJDuyuhrJk6TqN7oS0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:references:x-google-sender-auth;
        b=MLN1Rr5Ck6uAI/CKta47dZTR6T984eaz9Q8yFryNf5rSmv2tWlAy1ppUo1gf6msBcI
         1aHgz4aw0ETxkv5AJ3N5hPj+A2LcjRKYQ/k+AFuJZHD3BTLwnNJA2ha2A4luUtgumjyt
         o1jv20WGkS/H1YSlIjzTHakkjKbvfhNvpKCjo=
Received: by 10.65.73.16 with SMTP id a16mr2232029qbl.89.1229014116332;
        Thu, 11 Dec 2008 08:48:36 -0800 (PST)
Received: by 10.64.143.11 with HTTP; Thu, 11 Dec 2008 08:48:36 -0800 (PST)
Message-ID: <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>
Date: Thu, 11 Dec 2008 16:48:36 +0000
From: "Robert Young" <rob@roryoung.co.uk>
Sender: bubblenut@gmail.com
To: java-user@lucene.apache.org
Subject: Re: How to search for "-2" in field?
In-Reply-To: <1229011161.7448.10.camel@nuraku>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_99552_14140270.1229014116312"
References: <1229011161.7448.10.camel@nuraku>
X-Google-Sender-Auth: f3b2bf005593d883
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_99552_14140270.1229014116312
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could do it with a TermQuery but I'm not quite sure if that's the answer
you're looking for.

Cheers
Rob

On Thu, Dec 11, 2008 at 3:59 PM, Darren Govoni <darren@ontrenet.com> wrote:

> Hi,
>  This might be a dumb question, but I have a simple field like this
>
> field: 0 -2 Word
>
> that is indexed,tokenized and stored. I've tried various ways in Lucene
> (using Luke) to search for "-2 Word" and none of them work, the query is
> re-written improperly. I escaped the -2 to "\-2 Word" and it still
> doesn't work. I've used all the analyzers.
>
>
> What's the trick here?
>
> Thanks,
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_99552_14140270.1229014116312--

From java-user-return-37656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:49:55 2008
Return-Path: <java-user-return-37656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18012 invoked from network); 11 Dec 2008 17:08:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 17:08:14 -0000
Received: (qmail 49773 invoked by uid 500); 11 Dec 2008 17:08:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49743 invoked by uid 500); 11 Dec 2008 17:08:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49732 invoked by uid 99); 11 Dec 2008 17:08:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 09:08:19 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.16] (HELO relay02.pair.com) (209.68.5.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Dec 2008 17:07:56 +0000
Received: (qmail 20208 invoked from network); 11 Dec 2008 17:07:33 -0000
Received: from 38.104.58.186 (HELO ?10.0.1.25?) (38.104.58.186)
  by relay02.pair.com with SMTP; 11 Dec 2008 17:07:33 -0000
X-pair-Authenticated: 38.104.58.186
Subject: Re: How to search for "-2" in field?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>
References: <1229011161.7448.10.camel@nuraku>
	 <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>
Content-Type: text/plain
Date: Thu, 11 Dec 2008 12:07:33 -0500
Message-Id: <1229015253.7448.12.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm hoping to do this with a simple query string, but not sure if its
possible. I'll try your suggestion though as a workaround.

Thanks!!

On Thu, 2008-12-11 at 16:48 +0000, Robert Young wrote:
> You could do it with a TermQuery but I'm not quite sure if that's the answer
> you're looking for.
> 
> Cheers
> Rob
> 
> On Thu, Dec 11, 2008 at 3:59 PM, Darren Govoni <darren@ontrenet.com> wrote:
> 
> > Hi,
> >  This might be a dumb question, but I have a simple field like this
> >
> > field: 0 -2 Word
> >
> > that is indexed,tokenized and stored. I've tried various ways in Lucene
> > (using Luke) to search for "-2 Word" and none of them work, the query is
> > re-written improperly. I escaped the -2 to "\-2 Word" and it still
> > doesn't work. I've used all the analyzers.
> >
> >
> > What's the trick here?
> >
> > Thanks,
> > Darren
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:52:29 2008
Return-Path: <java-user-return-37651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49607 invoked from network); 11 Dec 2008 14:30:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 14:30:48 -0000
Received: (qmail 34692 invoked by uid 500); 11 Dec 2008 14:30:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34663 invoked by uid 500); 11 Dec 2008 14:30:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34652 invoked by uid 99); 11 Dec 2008 14:30:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 06:30:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gshackles@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 14:30:38 +0000
Received: by yx-out-2324.google.com with SMTP id 3so430091yxj.5
        for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 06:30:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Vbl5IcypadoWNsNwjYtt4PREucvJfZH5IklzbPuHYqE=;
        b=siFBm/0GVG3vviHkxUznSmDmEpPXt6MMUJktvEDE6bJcT2+1omFzuBUNp1edcdbKuP
         GyK/kp9jt3ntmNuqQGkFOMqD8++0QVldraegEncsmPAJOr6Nyhm42WOR9W75g4ud3AMa
         G+s5msSeJKieXe7BdEgtjPaih6EW+qTx8bMnc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wKLKE3JgoM5a2xU8K1oiXGOj6U6nxf+clc2RQhXbFCuHBCgGAoZS8mhWy4Gz0+pvvr
         QzsckQNpJIeAU1VBU+kAFHpdoOPhoGFIBqsrL2ax4XqPcqcDm7yYMj49QaeALr0LJmnI
         pjsjrWTZUw3tXoNvwnc13rq40RVGyU/uju7F8=
Received: by 10.100.153.6 with SMTP id a6mr2034456ane.76.1229005817636;
        Thu, 11 Dec 2008 06:30:17 -0800 (PST)
Received: by 10.100.47.1 with HTTP; Thu, 11 Dec 2008 06:30:17 -0800 (PST)
Message-ID: <b63a7e9e0812110630j62a7ada3i3eb1d57f22127e40@mail.gmail.com>
Date: Thu, 11 Dec 2008 09:30:17 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Looking for a way to customize how StandardAnalyzer handles punctuation
In-Reply-To: <86830B7D-07A8-4BB2-8F00-08DC4EC7D4D0@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66874_16765068.1229005817626"
References: <b63a7e9e0812090714t56051b7dg1922d023e64dd4f5@mail.gmail.com>
	 <86830B7D-07A8-4BB2-8F00-08DC4EC7D4D0@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_66874_16765068.1229005817626
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I still need all the normal benefits of the StandardAnalyzer as far as
punctuation and everything else goes, with just this one special exception.
Since I was on a limited schedule I ended up just doing the method where I
escape these cases myself in a way that makes them get tokenized.  Certainly
not the best solution but it works as far as I can tell.  If hacking the
StandardAnalyzer grammar is somewhat straightforward then I will try and
looking into doing it that way since I prefer to do things the right way if
possible : )  Thanks Grant!

- Greg

On Wed, Dec 10, 2008 at 8:52 PM, Grant Ingersoll <gsingers@apache.org>wrote:

> Let's take a quick step back and see if it helps.  Why do you feel you need
> the StandardAnalyzer to solve your problem?  What else are you gaining from
> it?  Would you be better served by a WhitespaceTokenizer?
>
> That being said, hacking up the grammar isn't as bad as you might think.
>  There are actually two examples of the "grammar" in Lucene, one is the
> StdTokenizer and the other is the WikipediaTokenizer.  They are similar, but
> maybe by looking at two examples it might also help.
>
>
>
> On Dec 9, 2008, at 10:14 AM, Greg Shackles wrote:
>
>  Hey everyone,
>>
>> I'm running into a problem where some punctuation that I would actually
>> want
>> to keep gets thrown out because they don't get tokenized.  By far the most
>> common case for this is ampersand, but it does happen with others as well.
>> My concern isn't even so much in that I need to be able to enforce that
>> punctuation in the search, but more that I need to know it was there when
>> I
>> get the results.  I am attaching important word data to the payload of
>> each
>> token, so if a "word" was just an ampersand, it disappears.  I took a
>> quick
>> look at the StandardAnalyzer classes and it looks like it would be a pain
>> to
>> try and modify that directly (I don't have much experience in
>> grammar/parsers).  A couple options come to mind, but I wanted to make
>> sure
>> there wasn't a better, more elegant solution before I did something that
>> felt a little hacky:
>>
>> 1) Add a couple fields to the payload saying whether the previous/next
>> word
>> is a single punctuation mark, and which it is.  Then the search can insert
>> the punctuation in the results.  The downside to this would be losing the
>> metadata that would have gone into the payload for that punctuation mark.
>>
>> 2) Do some sort of string replacement logic during indexing and searching
>> to
>> change it into something that will get made into a token, but should not
>> appear naturally on its own in the text.  I usually shy away from
>> solutions
>> like this, but sometimes they prove useful.
>>
>> Has anyone done anything like this?  I don't want to lose most of
>> StandardAnalyzer's punctuation logic, but mainly I want to tokenize
>> punctuation if it appears by itself (surrounded by whitespace).  Thanks!
>>
>> - Greg
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_66874_16765068.1229005817626--

From java-user-return-37645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:53:18 2008
Return-Path: <java-user-return-37645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42295 invoked from network); 11 Dec 2008 01:53:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 01:53:17 -0000
Received: (qmail 53022 invoked by uid 500); 11 Dec 2008 01:53:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52944 invoked by uid 500); 11 Dec 2008 01:53:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52933 invoked by uid 99); 11 Dec 2008 01:53:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 10 Dec 2008 17:53:22 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 01:53:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 237DD5B534
	for <java-user@lucene.apache.org>; Wed, 10 Dec 2008 17:52:39 -0800 (PST)
Message-Id: <86830B7D-07A8-4BB2-8F00-08DC4EC7D4D0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <b63a7e9e0812090714t56051b7dg1922d023e64dd4f5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Looking for a way to customize how StandardAnalyzer handles punctuation
Date: Wed, 10 Dec 2008 20:52:38 -0500
References: <b63a7e9e0812090714t56051b7dg1922d023e64dd4f5@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Let's take a quick step back and see if it helps.  Why do you feel you  
need the StandardAnalyzer to solve your problem?  What else are you  
gaining from it?  Would you be better served by a WhitespaceTokenizer?

That being said, hacking up the grammar isn't as bad as you might  
think.  There are actually two examples of the "grammar" in Lucene,  
one is the StdTokenizer and the other is the WikipediaTokenizer.  They  
are similar, but maybe by looking at two examples it might also help.


On Dec 9, 2008, at 10:14 AM, Greg Shackles wrote:

> Hey everyone,
>
> I'm running into a problem where some punctuation that I would  
> actually want
> to keep gets thrown out because they don't get tokenized.  By far  
> the most
> common case for this is ampersand, but it does happen with others as  
> well.
> My concern isn't even so much in that I need to be able to enforce  
> that
> punctuation in the search, but more that I need to know it was there  
> when I
> get the results.  I am attaching important word data to the payload  
> of each
> token, so if a "word" was just an ampersand, it disappears.  I took  
> a quick
> look at the StandardAnalyzer classes and it looks like it would be a  
> pain to
> try and modify that directly (I don't have much experience in
> grammar/parsers).  A couple options come to mind, but I wanted to  
> make sure
> there wasn't a better, more elegant solution before I did something  
> that
> felt a little hacky:
>
> 1) Add a couple fields to the payload saying whether the previous/ 
> next word
> is a single punctuation mark, and which it is.  Then the search can  
> insert
> the punctuation in the results.  The downside to this would be  
> losing the
> metadata that would have gone into the payload for that punctuation  
> mark.
>
> 2) Do some sort of string replacement logic during indexing and  
> searching to
> change it into something that will get made into a token, but should  
> not
> appear naturally on its own in the text.  I usually shy away from  
> solutions
> like this, but sometimes they prove useful.
>
> Has anyone done anything like this?  I don't want to lose most of
> StandardAnalyzer's punctuation logic, but mainly I want to tokenize
> punctuation if it appears by itself (surrounded by whitespace).   
> Thanks!
>
> - Greg

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:56:11 2008
Return-Path: <java-user-return-37652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64162 invoked from network); 11 Dec 2008 15:09:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 15:09:30 -0000
Received: (qmail 92546 invoked by uid 500); 11 Dec 2008 15:09:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92523 invoked by uid 500); 11 Dec 2008 15:09:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92512 invoked by uid 99); 11 Dec 2008 15:09:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 07:09:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 15:09:21 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 2C4196AE74
	for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 00:08:59 +0900 (JST)
Message-ID: <49412D0A.60500@r.email.ne.jp>
Date: Fri, 12 Dec 2008 00:08:58 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.18 (Macintosh/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: problem on NGram+Highlighter
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I have a problem when using n-gram and highlighter.
I thought it had been solved on the ticket:

http://issues.apache.org/jira/browse/LUCENE-627

Actually, I found this problem when I was using CJKTokenizer
on Solr, though, here is lucene program to reproduce it
using NGramTokenizer(min=2,max=2) instead of CJKTokenizer:

public class TestNGramHighlighter {
public static void main(String[] args) throws Exception {
Analyzer analyzer = new NGramAnalyzer();
final String TEXT = "ABCDEFGHIJKLMNABCDEFGHIJKLMN";
final String QUERY = "GHI";
QueryParser parser = new QueryParser("f",analyzer);
Query query = parser.parse(QUERY);
QueryScorer scorer = new QueryScorer(query,"f");
Highlighter h = new Highlighter( scorer );
System.out.println( h.getBestFragment(analyzer, "f", TEXT) );
}
static class NGramAnalyzer extends Analyzer {
public TokenStream tokenStream(String field, Reader input) {
return new NGramTokenizer(input,2,2);
}
}
}

expected output is:
ABCDEF<B>GHI</B>JKLMNABCDEF<B>GHI</B>JKLMN

but the actual output is:
ABCDEF<B>GHIJKLMNABCDEFGHI</B>JKLMN

Am I missing something?

Thank you,

Koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 17:58:56 2008
Return-Path: <java-user-return-37660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57416 invoked from network); 11 Dec 2008 17:58:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 17:58:56 -0000
Received: (qmail 41865 invoked by uid 500); 11 Dec 2008 17:59:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41829 invoked by uid 500); 11 Dec 2008 17:59:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41818 invoked by uid 99); 11 Dec 2008 17:59:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 09:59:01 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.68.5.9] (HELO relay00.pair.com) (209.68.5.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 11 Dec 2008 17:58:46 +0000
Received: (qmail 30222 invoked from network); 11 Dec 2008 17:58:24 -0000
Received: from 38.104.58.186 (HELO ?10.0.1.25?) (38.104.58.186)
  by relay00.pair.com with SMTP; 11 Dec 2008 17:58:24 -0000
X-pair-Authenticated: 38.104.58.186
Subject: Re: How to search for "-2" in field?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>
References: <1229011161.7448.10.camel@nuraku>
	 <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>
	 <1229015253.7448.12.camel@nuraku>
	 <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>
Content-Type: text/plain
Date: Thu, 11 Dec 2008 12:58:24 -0500
Message-Id: <1229018304.7448.24.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm using Luke to find the right combination of quotes,\'s and
analyzers.

No combination can produce a positive result for "-2 String" for the
field 'type'. (any -<number> <String>)

type: 0 -2 Word

analyzer:
query -> rewritten = result

default field is 'type'.

WhitespaceAnalyzer:
\"-2 ConfigurationFile\"  -> type:"-2 type:ConfigurationFile" = NO
-2 ConfigurationFile -> -type:2 type:ConfigurationFile = NO
\-2 ConfigurationFile -> type:-2 type:ConfigurationFile = NO
"\-2 ConfigurationFile" -> type:"-2 ConfigurationFile" = NO (thought
this one would work).

Same results for the other analyzers more or less.

Weird.

Darren



On Thu, 2008-12-11 at 23:02 +0530, prabin meitei wrote:
> Hi,  While constructing the query give the query string in quotes.
> eg: query = queryparser.parse("\"-2 word\"");
> 
> Prabin meitei
> toostep.com
> 
> On Thu, Dec 11, 2008 at 10:37 PM, Darren Govoni <darren@ontrenet.com> wrote:
> 
> > I'm hoping to do this with a simple query string, but not sure if its
> > possible. I'll try your suggestion though as a workaround.
> >
> > Thanks!!
> >
> > On Thu, 2008-12-11 at 16:48 +0000, Robert Young wrote:
> > > You could do it with a TermQuery but I'm not quite sure if that's the
> > answer
> > > you're looking for.
> > >
> > > Cheers
> > > Rob
> > >
> > > On Thu, Dec 11, 2008 at 3:59 PM, Darren Govoni <darren@ontrenet.com>
> > wrote:
> > >
> > > > Hi,
> > > >  This might be a dumb question, but I have a simple field like this
> > > >
> > > > field: 0 -2 Word
> > > >
> > > > that is indexed,tokenized and stored. I've tried various ways in Lucene
> > > > (using Luke) to search for "-2 Word" and none of them work, the query
> > is
> > > > re-written improperly. I escaped the -2 to "\-2 Word" and it still
> > > > doesn't work. I've used all the analyzers.
> > > >
> > > >
> > > > What's the trick here?
> > > >
> > > > Thanks,
> > > > Darren
> > > >
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 18:10:14 2008
Return-Path: <java-user-return-37653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70325 invoked from network); 11 Dec 2008 15:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 15:23:34 -0000
Received: (qmail 22624 invoked by uid 500); 11 Dec 2008 15:23:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22596 invoked by uid 500); 11 Dec 2008 15:23:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22585 invoked by uid 99); 11 Dec 2008 15:23:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 07:23:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [12.11.148.84] (HELO irp2.ptc.com) (12.11.148.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 15:23:17 +0000
X-IronPort-AV: E=Sophos;i="4.33,753,1220241600"; 
   d="scan'208,217";a="29611427"
Received: from unknown (HELO hq-ex3fe3.ptcnet.ptc.com) ([132.253.201.67])
  by irp2.ptc.com with ESMTP; 11 Dec 2008 10:22:56 -0500
Received: from HQ-MAIL4.ptcnet.ptc.com ([132.253.202.96]) by hq-ex3fe3.ptcnet.ptc.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 11 Dec 2008 10:22:56 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C95BA4.3E2D06E3"
Subject: Dynamic Score Boosting by creator
Date: Thu, 11 Dec 2008 10:22:12 -0500
Message-ID: <CF83BAA719FD2C439D25CBB1C9D1D3020DBC1D06@HQ-MAIL4.ptcnet.ptc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Dynamic Score Boosting by creator
Thread-Index: AclbpD3H9pkgGrtYSV6Y1HdHMNffMw==
From: "Dalvi, Rajesh" <rdalvi@ptc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Dec 2008 15:22:56.0390 (UTC) FILETIME=[57E10A60:01C95BA4]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C95BA4.3E2D06E3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,
=20
I am indexing creator information for each document. When I query with
given User, I want documents created by the given user should score
higher. How can I do this?
=20
Thanks,
Rajesh

------_=_NextPart_001_01C95BA4.3E2D06E3--

From java-user-return-37649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 18:10:31 2008
Return-Path: <java-user-return-37649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92719 invoked from network); 11 Dec 2008 12:43:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 12:43:51 -0000
Received: (qmail 77020 invoked by uid 500); 11 Dec 2008 12:43:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76979 invoked by uid 500); 11 Dec 2008 12:43:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76968 invoked by uid 99); 11 Dec 2008 12:43:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 04:43:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 12:43:42 +0000
Received: by rn-out-0910.google.com with SMTP id k57so808880rnd.13
        for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 04:43:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=oJh+L1WzWJVXDZb77ncjrlNkfjrIESsNgOIyC56nMMQ=;
        b=b/Wx0iZnsDla/ryfXdHUd4J0XBNHiWxHMbhKKBUl7duHImGGgiM9bItqQTtFSAGvtI
         NvdWupr5op2l8768wm3WZyLIT0RtBPlGJZx0uyeAy9QQ8ILe6JDeqP6Ika+FtdCE4+23
         ZagiZRNyvnAeEqnam5AAWC//d72EdhSmrTLXM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=HIBigYomONv7xMYcxKFsTv7vLnD15XDHvQbqPHJghkVHl0C+gG5GMc8Wu1A8SbmExG
         BwSLS33+BuLfIWkEyG4ivrpvV9//JTa3BGxe1AzFPDoPbQny4zBDI2N391ymETX/JmQE
         XZ1kB+ha5pBw2mtgQhPjFUWcLvbpuyhekoe2g=
Received: by 10.90.74.7 with SMTP id w7mr1449870aga.87.1228999401364;
        Thu, 11 Dec 2008 04:43:21 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 9sm2542217agc.31.2008.12.11.04.43.20
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 11 Dec 2008 04:43:20 -0800 (PST)
Message-ID: <49410AE8.80107@gmail.com>
Date: Thu, 11 Dec 2008 07:43:20 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: GWT port of Lucene's QueryParser
References: <1EE3723B-18EA-4768-B366-3F556EF7FADF@activemath.org>
In-Reply-To: <1EE3723B-18EA-4768-B366-3F556EF7FADF@activemath.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Paul Libbrecht wrote:
>
> Hello again list,
>
> has anyone tried to port or simply run the QueryParser of Lucene to GWT?
> It would look like a very nice thing to do to provide direct rendering 
> of the query interpretation (it could be made into a whole editor 
> probably, e.g. removing or selecting parts of the query).
>
> thanks in advance
>
> paul
I dont think its worth the effort Paul (though it sounds like a fun 
thing to try, as long as JavaCC sticks to GWT compatible core classes). 
Seems a lot easier to just run the queryparser server side though and 
move the results back and forth with rpc. As a side note, Mark Harwood 
worked on a cool GWT port of Luke.

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 18:10:57 2008
Return-Path: <java-user-return-37648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91640 invoked from network); 11 Dec 2008 12:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 12:39:35 -0000
Received: (qmail 71761 invoked by uid 500); 11 Dec 2008 12:39:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71737 invoked by uid 500); 11 Dec 2008 12:39:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71726 invoked by uid 99); 11 Dec 2008 12:39:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 04:39:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 12:39:26 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by postfix.imss70 (Postfix) with ESMTP id 1618A31D99
	for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 13:39:05 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 0637231D55
	for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 13:39:04 +0100 (CET)
Received: from bledsoe.dfki.uni-sb.de (bledsoe.dfki.uni-sb.de [134.96.184.151])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 145F9310AA
	for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 13:39:04 +0100 (CET)
Message-Id: <1EE3723B-18EA-4768-B366-3F556EF7FADF@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
Content-Type: multipart/signed; boundary=Apple-Mail-82--563643160; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: GWT port of Lucene's QueryParser
Date: Thu, 11 Dec 2008 13:38:58 +0100
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-82--563643160
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit


Hello again list,

has anyone tried to port or simply run the QueryParser of Lucene to GWT?
It would look like a very nice thing to do to provide direct rendering  
of the query interpretation (it could be made into a whole editor  
probably, e.g. removing or selecting parts of the query).

thanks in advance

paul
--Apple-Mail-82--563643160
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIFzjCCAocw
ggHwoAMCAQICEHpkMpnMryEmArSVLnJkS28wDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA3MTIxOTE0MzI0NFoXDTA4MTIxODE0MzI0
NFowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMEY+jsbvfvg6uVnITE8Pd4RONXZvqxbynLR
rgmnc5pCsv3UfvWjDZfbkX3Nb2OE4j2HSwY6Uhj2SOjh25ibMg2buR6ubgYXHvCbMngeoA2jDjvb
dloET7Q0hynIMA281OfxTbEZzIlq55/xr0v8yKX3DyOXqnokERhOtay7RaCfAgMBAAGjMDAuMB4G
A1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQUF
AAOBgQB52LXV/dsJaWBm8ScjEEn2/ecdVmKkQvggQFxsMHxCoIV70+OIoLYaJoO15NpdLuN7EPLE
/vBBjoDp2A5KdxBAO8icv4LTOD3btE2oIcCz3SUffQtNTuUvFh9Z9OLGByLNRduw6RVm947pSNBG
G+Qqd5XWQUxGci8HcsOQAOsLXjCCAz8wggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJ
BgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgG
A1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMg
RGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3
DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3
MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9
fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+
uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMB
Af8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3
dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgG
A1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcP
f6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH
2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8x
ggKPMIICiwIBATB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAo
UHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQ
emQymcyvISYCtJUucmRLbzAJBgUrDgMCGgUAoIIBbzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcB
MBwGCSqGSIb3DQEJBTEPFw0wODEyMTExMjM4NTlaMCMGCSqGSIb3DQEJBDEWBBTy+F9jETjiFZNO
OQiZ9J7HYM3EgjCBhQYJKwYBBAGCNxAEMXgwdjBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0ECEHpkMpnMryEmArSVLnJkS28wgYcGCyqGSIb3DQEJEAILMXigdjBiMQsw
CQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UE
AxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEHpkMpnMryEmArSVLnJkS28w
DQYJKoZIhvcNAQEBBQAEgYAJAi4F8Z3y5nqypSgy1aYREtxGRrLcP8He51PlCzvUrOriyQnKDIof
t4xlBsrGrLHUrZQmP93kHjEb3oUoy26VRLHa3jDqzzn7tepGTsTYOckfTaa8JxiuI+EuAUi/IIAD
9OOje+mvLVroiZ47ssfLpgyJezpr0ivZlU2UiC1w2wAAAAAAAA==

--Apple-Mail-82--563643160--

From java-user-return-37646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 18:24:32 2008
Return-Path: <java-user-return-37646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7303 invoked from network); 11 Dec 2008 09:24:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 09:24:31 -0000
Received: (qmail 16550 invoked by uid 500); 11 Dec 2008 09:24:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16517 invoked by uid 500); 11 Dec 2008 09:24:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16506 invoked by uid 99); 11 Dec 2008 09:24:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 01:24:36 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 09:24:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LAhlz-0002NR-N9
	for java-user@lucene.apache.org; Thu, 11 Dec 2008 01:23:55 -0800
Message-ID: <20952134.post@talk.nabble.com>
Date: Thu, 11 Dec 2008 01:23:55 -0800 (PST)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <Pine.LNX.4.62.0812101553090.10261@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com> <20937717.post@talk.nabble.com> <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com> <Pine.LNX.4.62.0812101553090.10261@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


hi glen,

possible you will find this thread interesting:
http://groups.google.com/group/xtf-user/browse_thread/thread/beb62f5ff9a16a3a/16044d1009511cda
was about a taxonomy like in your example.
Also take a look to the faceted browsing on date in
http://www.marktwainproject.org/xtf/search?category=letters;style=mtp;facet-written=

In solr 1.3 the faceted browsing was implemented with filter for each
possible value.
The implementation in xtf is quite more sophisticated (
http://xtf.wiki.sourceforge.net/programming_Faceted_Browsing ).
I am not familiar with current version of solr.

Best regards
  Karsten



hossman wrote:
> 
> the simple faceting support provided out of the box by solr can easily be 
> used for taxonomy based faceting if you encode your taxonomy breadcrumbs 
> in the docs (a google search for "solr hierarchical facets" will give you 
> lots off discussion on this).
> 
> 
> -Hoss
> 

-- 
View this message in context: http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20952134.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 11 18:25:43 2008
Return-Path: <java-user-return-37647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61528 invoked from network); 11 Dec 2008 11:19:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2008 11:19:03 -0000
Received: (qmail 38320 invoked by uid 500); 11 Dec 2008 11:19:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38281 invoked by uid 500); 11 Dec 2008 11:19:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38270 invoked by uid 99); 11 Dec 2008 11:19:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 03:19:06 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 11:18:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LAjYt-00076V-J8
	for java-user@lucene.apache.org; Thu, 11 Dec 2008 03:18:31 -0800
Message-ID: <20953625.post@talk.nabble.com>
Date: Thu, 11 Dec 2008 03:18:31 -0800 (PST)
From: Lucene User no 1981 <Maciej@holiday-rentals.co.uk>
To: java-user@lucene.apache.org
Subject: Spell check of a large text
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Maciej@holiday-rentals.co.uk
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

the problem is as follows: there is a text, ca. 30kb, it has to be
spellchecked automatically, there is no manual intervention, no suggestions
needed. All I would like to achieve is a simple check if there are any
problems with the spelling or not. It has to be rather fast cause there are
tons of docs a minute going thru the system. Solutions like
SpellChecker.exists() don't really apply. Additionally, spelling errors
could be highlighted - haven't really found any reasonable way of leveraging
Highlighter for that task. 

Does anyone have any idea how this problem can be addressed with Lucene?

Regards,
Mac
-- 
View this message in context: http://www.nabble.com/Spell-check-of-a-large-text-tp20953625p20953625.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 01:33:58 2008
Return-Path: <java-user-return-37661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46992 invoked from network); 12 Dec 2008 01:33:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 01:33:58 -0000
Received: (qmail 68169 invoked by uid 500); 12 Dec 2008 01:34:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68144 invoked by uid 500); 12 Dec 2008 01:34:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68133 invoked by uid 99); 12 Dec 2008 01:34:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 11 Dec 2008 17:34:02 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.218.14 as permitted sender)
Received: from [209.85.218.14] (HELO mail-bw0-f14.google.com) (209.85.218.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 01:33:40 +0000
Received: by bwz7 with SMTP id 7so2446481bwz.5
        for <java-user@lucene.apache.org>; Thu, 11 Dec 2008 17:33:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=5zB5ZazMtb8YSeJ8IxlW0E6n+kCdFw+FNexXEwe0F5I=;
        b=VdqMs79DxIxr0EeST5PBUEx358KwUFOwtoPwbaCSrt4Or7glYfVWlc/M/FwsBiY+/i
         qU88afTLlL3voDsSFld7PITQxnKAMT4Xskezr3xaP0ATPsjIeNSOZ1uM4OYVn26uOrq/
         rmj3htDLczsHtRD050SCG4lQSMuOgLvj9JXnM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=VOW2wZMuv53oLDDdeYLTt3Lw+cQX+KoojJx4stZEwUFSwNUKsTRPT2xHwjgAEBuZgd
         DgXedUn4o2UEck4DvbyWsmfnK6B4GMvxp92rBxsKxp2eLaHGs69E1c2DesFIJjKoE1BS
         307ImNtJpWUR/SFhqcMzomawYYy1GD/k7LOMQ=
Received: by 10.103.222.1 with SMTP id z1mr1659254muq.100.1229045598356;
        Thu, 11 Dec 2008 17:33:18 -0800 (PST)
Received: by 10.103.245.16 with HTTP; Thu, 11 Dec 2008 17:33:18 -0800 (PST)
Message-ID: <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com>
Date: Fri, 12 Dec 2008 07:03:18 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search for "-2" in field?
In-Reply-To: <1229018304.7448.24.camel@nuraku>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_132367_11625934.1229045598343"
References: <1229011161.7448.10.camel@nuraku>
	 <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>
	 <1229015253.7448.12.camel@nuraku>
	 <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>
	 <1229018304.7448.24.camel@nuraku>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_132367_11625934.1229045598343
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

whitespace analyzer will tokenize on white space irrespective of quotes. Use
standard analyzer or keyword analyzer.
Prabin meitei
toostep.com

On Thu, Dec 11, 2008 at 11:28 PM, Darren Govoni <darren@ontrenet.com> wrote:

> I'm using Luke to find the right combination of quotes,\'s and
> analyzers.
>
> No combination can produce a positive result for "-2 String" for the
> field 'type'. (any -<number> <String>)
>
> type: 0 -2 Word
>
> analyzer:
> query -> rewritten = result
>
> default field is 'type'.
>
> WhitespaceAnalyzer:
> \"-2 ConfigurationFile\"  -> type:"-2 type:ConfigurationFile" = NO
> -2 ConfigurationFile -> -type:2 type:ConfigurationFile = NO
> \-2 ConfigurationFile -> type:-2 type:ConfigurationFile = NO
> "\-2 ConfigurationFile" -> type:"-2 ConfigurationFile" = NO (thought
> this one would work).
>
> Same results for the other analyzers more or less.
>
> Weird.
>
> Darren
>
>
>
> On Thu, 2008-12-11 at 23:02 +0530, prabin meitei wrote:
> > Hi,  While constructing the query give the query string in quotes.
> > eg: query = queryparser.parse("\"-2 word\"");
> >
> > Prabin meitei
> > toostep.com
> >
> > On Thu, Dec 11, 2008 at 10:37 PM, Darren Govoni <darren@ontrenet.com>
> wrote:
> >
> > > I'm hoping to do this with a simple query string, but not sure if its
> > > possible. I'll try your suggestion though as a workaround.
> > >
> > > Thanks!!
> > >
> > > On Thu, 2008-12-11 at 16:48 +0000, Robert Young wrote:
> > > > You could do it with a TermQuery but I'm not quite sure if that's the
> > > answer
> > > > you're looking for.
> > > >
> > > > Cheers
> > > > Rob
> > > >
> > > > On Thu, Dec 11, 2008 at 3:59 PM, Darren Govoni <darren@ontrenet.com>
> > > wrote:
> > > >
> > > > > Hi,
> > > > >  This might be a dumb question, but I have a simple field like this
> > > > >
> > > > > field: 0 -2 Word
> > > > >
> > > > > that is indexed,tokenized and stored. I've tried various ways in
> Lucene
> > > > > (using Luke) to search for "-2 Word" and none of them work, the
> query
> > > is
> > > > > re-written improperly. I escaped the -2 to "\-2 Word" and it still
> > > > > doesn't work. I've used all the analyzers.
> > > > >
> > > > >
> > > > > What's the trick here?
> > > > >
> > > > > Thanks,
> > > > > Darren
> > > > >
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_132367_11625934.1229045598343--

From java-user-return-37662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 08:34:58 2008
Return-Path: <java-user-return-37662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30076 invoked from network); 12 Dec 2008 08:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 08:34:58 -0000
Received: (qmail 43036 invoked by uid 500); 12 Dec 2008 08:35:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43006 invoked by uid 500); 12 Dec 2008 08:35:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42995 invoked by uid 99); 12 Dec 2008 08:35:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 00:35:04 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 08:34:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LB3Tg-0006e3-Px
	for java-user@lucene.apache.org; Fri, 12 Dec 2008 00:34:28 -0800
Message-ID: <20971377.post@talk.nabble.com>
Date: Fri, 12 Dec 2008 00:34:28 -0800 (PST)
From: maxmil <mail@alwayssunny.com>
To: java-user@lucene.apache.org
Subject: Beginner: Best way to index and display orginal text of pdfs in
 search results
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mail@alwayssunny.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

This is the first time i am using Lucene.

I need to index pdf's with very few fields, title, date and body (long
field) for a web based search.

The results i need to display have to show not only the documents found but
for each document a snapshot of the text where the search term has been
found. This is analogous to the way google displays search results. That is
to say

 ... some words and first instance of search Term and some more words ...
some more words second instance of search term and some more words... 

etc.

To do this i would need the original text of the document for each hit. As
far as i understand Lucene does not save the original text of the document
in the index.

I am not using a database and would prefer not to have to store the original
document text elsewhere.

One way i could do this would be to take the hits from Lucene and reopen
each pdf to extract the original text at run time however i fear that with
many results this would be very slow. 

What would you recommend me to do?

Thanks

max
-- 
View this message in context: http://www.nabble.com/Beginner%3A-Best-way-to-index-and-display-orginal-text-of-pdfs-in-search-results-tp20971377p20971377.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 09:35:15 2008
Return-Path: <java-user-return-37663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65091 invoked from network); 12 Dec 2008 09:35:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 09:35:15 -0000
Received: (qmail 12445 invoked by uid 500); 12 Dec 2008 09:35:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12406 invoked by uid 500); 12 Dec 2008 09:35:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12270 invoked by uid 99); 12 Dec 2008 09:35:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 01:35:17 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 09:35:02 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LB4Px-00009f-Hc
	for java-user@lucene.apache.org; Fri, 12 Dec 2008 01:34:41 -0800
Message-ID: <20971594.post@talk.nabble.com>
Date: Fri, 12 Dec 2008 01:34:41 -0800 (PST)
From: "Matthias W." <Matthias.Wangler@e-projecta.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene SpellChecker returns no suggetions after changing Server
In-Reply-To: <228024E8-235F-427D-B471-68EE9B3AAAB4@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Matthias.Wangler@e-projecta.com
References: <20910159.post@talk.nabble.com> <228024E8-235F-427D-B471-68EE9B3AAAB4@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, I'm passing the same index for Spellchecker and IndexReader.
I'm going to test if this is a reason for my problem.

But I still don't understand why the same code is working on the testserver.

I think this could be because of the rights from tomcat.
Is there any tutorial about the tomcat configuration for lucene with debian?
Or can anyone tell me what's really important? I also don't know why there
are two webapps folders (/var/lib/tomcat5.5/webapps and
/usr/share/tomcat5.5-webapps). I made my JSP's into
/var/lib/tomcat5.5/webapps.
I copied the files from my testserver including the WEB-INF, could this be
the reason?

The changes:
Ubuntu 8.10 -> Debian Etch
Java5  -> Java6
Tomcat6 -> Tomcat 5.5



Grant Ingersoll-6 wrote:
> 
> So, what changed with the server?
> 
>  From the looks of your code, you're passing the same index into both  
> the Spellchecker and the IndexReader.   The spelling index is separate  
> from the main index.
> 
> See the example at:
> http://lucene.apache.org/java/2_4_0/api/contrib-spellchecker/org/apache/lucene/search/spell/SpellChecker.html
> 
> See also my Boot Camp examples at:
> http://www.lucenebootcamp.com/LuceneBootCamp/training/src/test/java/com/lucenebootcamp/training/basic/ContribExamplesTest.java 
>    Have a look at the testSpelling code there
> 
> HTH,
> Grant
> 
> 
> On Dec 9, 2008, at 2:50 AM, Matthias W. wrote:
> 
>>
>> Hi,
>> I'm using Lucene's SpellChecker (Lucene 2.1.0) class to get  
>> suggestions.
>> Till now my testing server was a VMWare-Image from 
>> http://es.cohesiveft.com
>> http://es.cohesiveft.com  (Ubuntu 8.10, Tomcat6, Java5).
>> Now I'm using a Debian Etch Server with Tomcat5.5 and Java6.
>>
>> Code-Sample:
>> String indexName = indexLocation;
>> String queryString = null;
>> queryString = URLDecoder.decode(request.getParameter("q"), "UTF-8");
>> SpellChecker spellchecker = new
>> SpellChecker(FSDirectory.getDirectory(indexName));
>> String[] suggestions = spellchecker.suggestSimilar(queryString, 5,
>> IndexReader.open(indexName), "content", false);
>> for(int i = 0; i < suggestions.length; i++) {
>> 	out.println(suggestions[i]);
>> }
>>
>> This worked fine on the old server, but on my new server this returns
>> nothing.
>> The index is generated by the nutch crawler, but this shouldn't be the
>> problem.
>>
>> I've got the lucene-spellchecker-2.1.0.jar in the WEB-INF/lib/ (If I  
>> remove
>> it, I get the expected errormessage.)
>>
>> So I don't know why I neither get results, nor an errormessage.
>> -- 
>> View this message in context:
>> http://www.nabble.com/Lucene-SpellChecker-returns-no-suggetions-after-changing-Server-tp20910159p20910159.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Lucene-SpellChecker-returns-no-suggetions-after-changing-Server-tp20910159p20971594.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 09:49:51 2008
Return-Path: <java-user-return-37664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73416 invoked from network); 12 Dec 2008 09:49:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 09:49:49 -0000
Received: (qmail 31314 invoked by uid 500); 12 Dec 2008 09:49:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31277 invoked by uid 500); 12 Dec 2008 09:49:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31262 invoked by uid 99); 12 Dec 2008 09:49:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 01:49:55 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 09:49:41 +0000
Received: by qw-out-2122.google.com with SMTP id 5so291616qwi.53
        for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 01:49:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=UP6otyINQuujmXLLScxMqairTpgIWjB1OwaBE5HerMo=;
        b=MPIGMYpfPcpICdCrIch/9KRPe1Fm2YjL407cvUEni3qrvF9BOZb683il3lEdmHRnIM
         K2swa/q/+jd9YYEdMm4fFXzqjLld66GjFnHMqKbaQFiVf43RrTm0JOuxQE85d50adyGg
         IJVsTBBCz8zdqAS4JESeU4ooBpK3GKu5Whtew=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=aeER/4jEaZ+fKfosxm/R6tEHBV1iEMq/9nKvn/QiqHEc0UvRtl3S9HLw6URJk8OwBr
         tJ26y0a7Sh7AIxKmzpZNm1etm+QTyPedWRL6XHBUrISBAbL5vgZ7rzetEHgaPZlyPfEX
         kPMe4QIhi0S4ZuzJ6MHdUWWJFnLNWFedxIFNI=
Received: by 10.214.81.5 with SMTP id e5mr4866485qab.305.1229075360161;
        Fri, 12 Dec 2008 01:49:20 -0800 (PST)
Received: by 10.214.241.6 with HTTP; Fri, 12 Dec 2008 01:49:20 -0800 (PST)
Message-ID: <8c4e68610812120149r3533d3d7j4a2e8ba3162f738d@mail.gmail.com>
Date: Fri, 12 Dec 2008 09:49:20 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Beginner: Best way to index and display orginal text of pdfs in search results
In-Reply-To: <20971377.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20971377.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Lucene can store the original text of the document.  You make the
lucene fields to do what you need.  Have a look at the apidocs for
Field.Store and you'll see that you've got three choices: Yes, No or
Compress.

For your display snapshots, have a look at the lucene highlighter package.

And all newcomers to Lucene could do a lot worse than getting hold of
a copy of Lucene in Action.  Somewhat out of date but the principles
are still valid.


--
Ian.

On Fri, Dec 12, 2008 at 8:34 AM, maxmil <mail@alwayssunny.com> wrote:
>
> Hi,
>
> This is the first time i am using Lucene.
>
> I need to index pdf's with very few fields, title, date and body (long
> field) for a web based search.
>
> The results i need to display have to show not only the documents found but
> for each document a snapshot of the text where the search term has been
> found. This is analogous to the way google displays search results. That is
> to say
>
>  ... some words and first instance of search Term and some more words ...
> some more words second instance of search term and some more words...
>
> etc.
>
> To do this i would need the original text of the document for each hit. As
> far as i understand Lucene does not save the original text of the document
> in the index.
>
> I am not using a database and would prefer not to have to store the original
> document text elsewhere.
>
> One way i could do this would be to take the hits from Lucene and reopen
> each pdf to extract the original text at run time however i fear that with
> many results this would be very slow.
>
> What would you recommend me to do?
>
> Thanks
>
> max
> --
> View this message in context: http://www.nabble.com/Beginner%3A-Best-way-to-index-and-display-orginal-text-of-pdfs-in-search-results-tp20971377p20971377.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 10:37:28 2008
Return-Path: <java-user-return-37665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99336 invoked from network); 12 Dec 2008 10:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 10:37:27 -0000
Received: (qmail 87068 invoked by uid 500); 12 Dec 2008 10:37:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87032 invoked by uid 500); 12 Dec 2008 10:37:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87021 invoked by uid 99); 12 Dec 2008 10:37:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 02:37:30 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 10:37:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LB5OB-0002Lb-05
	for java-user@lucene.apache.org; Fri, 12 Dec 2008 02:36:55 -0800
Message-ID: <20973238.post@talk.nabble.com>
Date: Fri, 12 Dec 2008 02:36:55 -0800 (PST)
From: Lucene User no 1981 <Maciej@holiday-rentals.co.uk>
To: java-user@lucene.apache.org
Subject: Re: Spell check of a large text
In-Reply-To: <7A716968-AF33-4423-8B5E-756369EDA3C9@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Maciej@holiday-rentals.co.uk
References: <20953625.post@talk.nabble.com> <7A716968-AF33-4423-8B5E-756369EDA3C9@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Grant,

It's definitely dictionary based spell checker. A bit fleshing out, 
currently the document gets indexed and then it's analysed (bad words, 
repetitions etc), spell check - no corrections - would be yet another 
step in the process. It's all read-only stuff, the document content is 
not modified, it's just tagged accordingly.
That said, I kind of like your idea, I mean token filter looks like the 
good candidate. As of Lazzy, is it any different than Lucene 
SpellChecker (ngram based)? what really matters here is not the 
accuracy (decent but not exceptional - there is a manual double- check 
of tagged docs anyway), what matters most is performance and ease of 
integration. Any grammar check is absolutely immaterial.
About that payload idea, I can only work with a token in a filter. I 
could attach something and spit it out, but what would be that 
something? It would have to be searchable I assume, otherwise I could 
perform the check without filter, out of index. If it's searchable 
then, apart from querying, I could perhaps make highlighter work with 
it nicely.

Thx,
Mac


Grant Ingersoll-6 wrote:
> 
> I think I'm missing something here...
> 
> Spell checked in what sense?  Sounds to me like you need dictionary  
> based spell checking during index, not index based spelling during  
> search, right?
> 
> How about hooking up something like the Jazzy spell checker into a  
> TokenFilter?  Then, as the tokens stream by, you lookup the spelling  
> and then add a 1 byte payload to all words that are misspelled.
> 
> As for Highlighter, hmmm...  Not sure if there is a way to make a  
> Fragmenter/Scorer that was payload aware, such that it would only  
> produce fragments (and scores) for sections of the file that have  
> these payloads.  Definitely pushing my area of expertise, but maybe  
> one of the Highlighter experts can chime in.
> 
> HTH,
> Grant
> 
> On Dec 11, 2008, at 6:18 AM, Lucene User no 1981 wrote:
> 
>>
>> Hi,
>>
>> the problem is as follows: there is a text, ca. 30kb, it has to be
>> spellchecked automatically, there is no manual intervention, no  
>> suggestions
>> needed. All I would like to achieve is a simple check if there are any
>> problems with the spelling or not. It has to be rather fast cause  
>> there are
>> tons of docs a minute going thru the system. Solutions like
>> SpellChecker.exists() don't really apply. Additionally, spelling  
>> errors
>> could be highlighted - haven't really found any reasonable way of  
>> leveraging
>> Highlighter for that task.
>>
>> Does anyone have any idea how this problem can be addressed with  
>> Lucene?
>>
>> Regards,
>> Mac
>> -- 
>> View this message in context:
>> http://www.nabble.com/Spell-check-of-a-large-text-tp20953625p20953625.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> --------------------------
> Grant Ingersoll
> 
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Spell-check-of-a-large-text-tp20953625p20973238.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 10:44:22 2008
Return-Path: <java-user-return-37666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1973 invoked from network); 12 Dec 2008 10:44:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 10:44:21 -0000
Received: (qmail 95337 invoked by uid 500); 12 Dec 2008 10:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95311 invoked by uid 500); 12 Dec 2008 10:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95300 invoked by uid 99); 12 Dec 2008 10:44:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 02:44:27 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 10:44:06 +0000
Received: by yw-out-2324.google.com with SMTP id 3so626382ywj.5
        for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 02:43:45 -0800 (PST)
Received: by 10.151.105.13 with SMTP id h13mr2438726ybm.165.1229078624659;
        Fri, 12 Dec 2008 02:43:44 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id n29sm2775623elf.10.2008.12.12.02.43.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 12 Dec 2008 02:43:43 -0800 (PST)
Message-Id: <C18A1419-0ED0-43A7-8CCA-CDAC19F58B63@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <8837fb770812110920n7519423ex4bf5d89da9950417@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Taxonomy in Lucene
Date: Fri, 12 Dec 2008 05:43:41 -0500
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com> <20937717.post@talk.nabble.com> <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com> <Pine.LNX.4.62.0812101553090.10261@radix.cryptio.net> <20952134.post@talk.nabble.com> <8837fb770812110920n7519423ex4bf5d89da9950417@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


John can you describe some of these changes?  They sound cool!

Mike

John Wang wrote:

> We are doing lotsa internal changes for performance. Also upgrading  
> the api
> to support for features. So my suggestion is to wait for 2.0. (should
> release this this month, at the latest mid jan) We can take this  
> offline if
> you want to have a deeper discussion on browse engine.
>
> Thanks
>
> -John
>
> On Thu, Dec 11, 2008 at 1:23 AM, Karsten F.
> <karsten-lucene@fiz-technik.de>wrote:
>
>>
>> hi glen,
>>
>> possible you will find this thread interesting:
>>
>> http://groups.google.com/group/xtf-user/browse_thread/thread/beb62f5ff9a16a3a/16044d1009511cda
>> was about a taxonomy like in your example.
>> Also take a look to the faceted browsing on date in
>>
>> http://www.marktwainproject.org/xtf/search?category=letters;style=mtp;facet-written=
>>
>> In solr 1.3 the faceted browsing was implemented with filter for each
>> possible value.
>> The implementation in xtf is quite more sophisticated (
>> http://xtf.wiki.sourceforge.net/programming_Faceted_Browsing ).
>> I am not familiar with current version of solr.
>>
>> Best regards
>> Karsten
>>
>>
>>
>> hossman wrote:
>>>
>>> the simple faceting support provided out of the box by solr can  
>>> easily be
>>> used for taxonomy based faceting if you encode your taxonomy  
>>> breadcrumbs
>>> in the docs (a google search for "solr hierarchical facets" will  
>>> give you
>>> lots off discussion on this).
>>>
>>>
>>> -Hoss
>>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20952134.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 11:05:35 2008
Return-Path: <java-user-return-37667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9585 invoked from network); 12 Dec 2008 11:05:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 11:05:34 -0000
Received: (qmail 36573 invoked by uid 500); 12 Dec 2008 11:05:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36522 invoked by uid 500); 12 Dec 2008 11:05:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36485 invoked by uid 99); 12 Dec 2008 11:05:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 03:05:37 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 11:05:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LB5pN-0003dl-Pt
	for java-user@lucene.apache.org; Fri, 12 Dec 2008 03:05:01 -0800
Message-ID: <20973618.post@talk.nabble.com>
Date: Fri, 12 Dec 2008 03:05:01 -0800 (PST)
From: maxmil <mail@alwayssunny.com>
To: java-user@lucene.apache.org
Subject: Re: Beginner: Best way to index and display orginal text of pdfs in
 search results
In-Reply-To: <8c4e68610812120149r3533d3d7j4a2e8ba3162f738d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: mail@alwayssunny.com
References: <20971377.post@talk.nabble.com> <8c4e68610812120149r3533d3d7j4a2e8ba3162f738d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks very much. Looks like Field.Store.COMPRESS is what i want.

I'll also have a look at the search highlight stuff and getting Lucene in
Action.



Ian Lea wrote:
> 
> Hi
> 
> 
> Lucene can store the original text of the document.  You make the
> lucene fields to do what you need.  Have a look at the apidocs for
> Field.Store and you'll see that you've got three choices: Yes, No or
> Compress.
> 
> For your display snapshots, have a look at the lucene highlighter package.
> 
> And all newcomers to Lucene could do a lot worse than getting hold of
> a copy of Lucene in Action.  Somewhat out of date but the principles
> are still valid.
> 
> 
> --
> Ian.
> 
> On Fri, Dec 12, 2008 at 8:34 AM, maxmil <mail@alwayssunny.com> wrote:
>>
>> Hi,
>>
>> This is the first time i am using Lucene.
>>
>> I need to index pdf's with very few fields, title, date and body (long
>> field) for a web based search.
>>
>> The results i need to display have to show not only the documents found
>> but
>> for each document a snapshot of the text where the search term has been
>> found. This is analogous to the way google displays search results. That
>> is
>> to say
>>
>>  ... some words and first instance of search Term and some more words ...
>> some more words second instance of search term and some more words...
>>
>> etc.
>>
>> To do this i would need the original text of the document for each hit.
>> As
>> far as i understand Lucene does not save the original text of the
>> document
>> in the index.
>>
>> I am not using a database and would prefer not to have to store the
>> original
>> document text elsewhere.
>>
>> One way i could do this would be to take the hits from Lucene and reopen
>> each pdf to extract the original text at run time however i fear that
>> with
>> many results this would be very slow.
>>
>> What would you recommend me to do?
>>
>> Thanks
>>
>> max
>> --
>> View this message in context:
>> http://www.nabble.com/Beginner%3A-Best-way-to-index-and-display-orginal-text-of-pdfs-in-search-results-tp20971377p20971377.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Beginner%3A-Best-way-to-index-and-display-orginal-text-of-pdfs-in-search-results-tp20971377p20973618.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 11:48:02 2008
Return-Path: <java-user-return-37668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24004 invoked from network); 12 Dec 2008 11:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 11:48:02 -0000
Received: (qmail 4130 invoked by uid 500); 12 Dec 2008 11:48:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4109 invoked by uid 500); 12 Dec 2008 11:48:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4098 invoked by uid 99); 12 Dec 2008 11:48:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 03:48:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 11:47:48 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by postfix.imss70 (Postfix) with ESMTP id 2A07D31ECA
	for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 12:47:28 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 18E4D31B56
	for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 12:47:28 +0100 (CET)
Received: from bledsoe.dfki.uni-sb.de (bledsoe.dfki.uni-sb.de [134.96.184.151])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 13905310B4
	for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 12:47:28 +0100 (CET)
Message-Id: <149B3647-128F-4285-8EF5-D3EBB0EF1CE8@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <8c4e68610812120149r3533d3d7j4a2e8ba3162f738d@mail.gmail.com>
Content-Type: multipart/signed; boundary=Apple-Mail-4--480339160; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Beginner: Best way to index and display orginal text of pdfs in search results
Date: Fri, 12 Dec 2008 12:47:23 +0100
References: <20971377.post@talk.nabble.com> <8c4e68610812120149r3533d3d7j4a2e8ba3162f738d@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-4--480339160
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable


I also encountered these options of the Field constructor but I never =20=

found a way to be sure that the field is really not loaded in RAM and =20=

only return with Field.reader(). There seems to be no contract in the =20=

javadoc.
Moreover the reader access methods went away between 1.9 and 2.2 if I =20=

don't mistake... so I had the impression it was not wanted to store =20
"blobs" in the index.

Also, reader is not enough to do a decent job to store PDFs.
It should be a binary format (so getBinaryValue() should be used) and =20=

it should be an input-stream and not an in-memory array!

Echoes of a long frustrated user which implemented its own "mass-=20
storage" because of that.
thanks for hints and even contradictions!

paul


Le 12-d=E9c.-08 =E0 10:49, Ian Lea a =E9crit :
> Lucene can store the original text of the document.  You make the
> lucene fields to do what you need.  Have a look at the apidocs for
> Field.Store and you'll see that you've got three choices: Yes, No or
> Compress.
>
> For your display snapshots, have a look at the lucene highlighter =20
> package.
>
> And all newcomers to Lucene could do a lot worse than getting hold of
> a copy of Lucene in Action.  Somewhat out of date but the principles
> are still valid.


--Apple-Mail-4--480339160
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIFzjCCAocw
ggHwoAMCAQICEHpkMpnMryEmArSVLnJkS28wDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA3MTIxOTE0MzI0NFoXDTA4MTIxODE0MzI0
NFowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMEY+jsbvfvg6uVnITE8Pd4RONXZvqxbynLR
rgmnc5pCsv3UfvWjDZfbkX3Nb2OE4j2HSwY6Uhj2SOjh25ibMg2buR6ubgYXHvCbMngeoA2jDjvb
dloET7Q0hynIMA281OfxTbEZzIlq55/xr0v8yKX3DyOXqnokERhOtay7RaCfAgMBAAGjMDAuMB4G
A1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQUF
AAOBgQB52LXV/dsJaWBm8ScjEEn2/ecdVmKkQvggQFxsMHxCoIV70+OIoLYaJoO15NpdLuN7EPLE
/vBBjoDp2A5KdxBAO8icv4LTOD3btE2oIcCz3SUffQtNTuUvFh9Z9OLGByLNRduw6RVm947pSNBG
G+Qqd5XWQUxGci8HcsOQAOsLXjCCAz8wggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJ
BgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgG
A1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMg
RGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3
DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3
MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9
fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+
uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMB
Af8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3
dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgG
A1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcP
f6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH
2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8x
ggKPMIICiwIBATB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAo
UHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQ
emQymcyvISYCtJUucmRLbzAJBgUrDgMCGgUAoIIBbzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcB
MBwGCSqGSIb3DQEJBTEPFw0wODEyMTIxMTQ3MjNaMCMGCSqGSIb3DQEJBDEWBBTKcExWHCr+kscU
fSuvHjAd3vIk+zCBhQYJKwYBBAGCNxAEMXgwdjBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0ECEHpkMpnMryEmArSVLnJkS28wgYcGCyqGSIb3DQEJEAILMXigdjBiMQsw
CQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UE
AxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEHpkMpnMryEmArSVLnJkS28w
DQYJKoZIhvcNAQEBBQAEgYASuAaWT02cnleTe/lWTgiQ+F6uQqD+8JA9eCgmeucF9C8OgLeY7o+J
/5zHjqf54LHNuJwkFAlqXCE/spcD6I9SN4zKl1p7lDbTJiOxenNfIAOOn4HlQ1/ZoOSxM1hyKTSU
tdMX98lVx+BioTYIXESu2WTzlNi8vNgpyt2MSfxZMQAAAAAAAA==

--Apple-Mail-4--480339160--

From java-user-return-37669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 11:52:48 2008
Return-Path: <java-user-return-37669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25737 invoked from network); 12 Dec 2008 11:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 11:52:48 -0000
Received: (qmail 12848 invoked by uid 500); 12 Dec 2008 11:52:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12811 invoked by uid 500); 12 Dec 2008 11:52:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12800 invoked by uid 99); 12 Dec 2008 11:52:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 03:52:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 11:52:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LB6Z8-0005K7-SQ
	for java-user@lucene.apache.org; Fri, 12 Dec 2008 03:52:18 -0800
Message-ID: <20974217.post@talk.nabble.com>
Date: Fri, 12 Dec 2008 03:52:18 -0800 (PST)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <8837fb770812110920n7519423ex4bf5d89da9950417@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com> <20937717.post@talk.nabble.com> <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com> <Pine.LNX.4.62.0812101553090.10261@radix.cryptio.net> <20952134.post@talk.nabble.com> <8837fb770812110920n7519423ex4bf5d89da9950417@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi John,

I will take a look in the bobo-browse source code at week end.

Do you now the xtf implementation of faceted browsing:
starting point is
org.cdlib.xtf.textEngine.facet.GroupCounts#addDoc
?
(It works with millions of facet values on millions of hits)

What is the starting point in browseengine?

How is the connection between solr and browseengine ?

Thanks for mention browseengine. I really like the car demo!

Best regards 
  Karsten


John Wang wrote:
> 
> We are doing lotsa internal changes for performance. Also upgrading the
> api
> to support for features. So my suggestion is to wait for 2.0. (should
> release this this month, at the latest mid jan) We can take this offline
> if
> you want to have a deeper discussion on browse engine.
> 

-- 
View this message in context: http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20974217.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 12:45:36 2008
Return-Path: <java-user-return-37670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49751 invoked from network); 12 Dec 2008 12:45:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 12:45:36 -0000
Received: (qmail 7060 invoked by uid 500); 12 Dec 2008 12:45:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7034 invoked by uid 500); 12 Dec 2008 12:45:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7023 invoked by uid 99); 12 Dec 2008 12:45:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 04:45:41 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 12 Dec 2008 12:45:19 +0000
Received: (qmail 74251 invoked from network); 12 Dec 2008 12:44:53 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.7?) (68.48.101.76)
  by relay03.pair.com with SMTP; 12 Dec 2008 12:44:53 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: How to search for "-2" in field?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com>
References: <1229011161.7448.10.camel@nuraku>
	 <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>
	 <1229015253.7448.12.camel@nuraku>
	 <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>
	 <1229018304.7448.24.camel@nuraku>
	 <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com>
Content-Type: text/plain
Date: Fri, 12 Dec 2008 07:44:56 -0500
Message-Id: <1229085896.26037.0.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Tried them all, with quotes, without. Doesn't work. At least in Luke it
doesn't.

On Fri, 2008-12-12 at 07:03 +0530, prabin meitei wrote:
> whitespace analyzer will tokenize on white space irrespective of quotes. Use
> standard analyzer or keyword analyzer.
> Prabin meitei
> toostep.com
> 
> On Thu, Dec 11, 2008 at 11:28 PM, Darren Govoni <darren@ontrenet.com> wrote:
> 
> > I'm using Luke to find the right combination of quotes,\'s and
> > analyzers.
> >
> > No combination can produce a positive result for "-2 String" for the
> > field 'type'. (any -<number> <String>)
> >
> > type: 0 -2 Word
> >
> > analyzer:
> > query -> rewritten = result
> >
> > default field is 'type'.
> >
> > WhitespaceAnalyzer:
> > \"-2 ConfigurationFile\"  -> type:"-2 type:ConfigurationFile" = NO
> > -2 ConfigurationFile -> -type:2 type:ConfigurationFile = NO
> > \-2 ConfigurationFile -> type:-2 type:ConfigurationFile = NO
> > "\-2 ConfigurationFile" -> type:"-2 ConfigurationFile" = NO (thought
> > this one would work).
> >
> > Same results for the other analyzers more or less.
> >
> > Weird.
> >
> > Darren
> >
> >
> >
> > On Thu, 2008-12-11 at 23:02 +0530, prabin meitei wrote:
> > > Hi,  While constructing the query give the query string in quotes.
> > > eg: query = queryparser.parse("\"-2 word\"");
> > >
> > > Prabin meitei
> > > toostep.com
> > >
> > > On Thu, Dec 11, 2008 at 10:37 PM, Darren Govoni <darren@ontrenet.com>
> > wrote:
> > >
> > > > I'm hoping to do this with a simple query string, but not sure if its
> > > > possible. I'll try your suggestion though as a workaround.
> > > >
> > > > Thanks!!
> > > >
> > > > On Thu, 2008-12-11 at 16:48 +0000, Robert Young wrote:
> > > > > You could do it with a TermQuery but I'm not quite sure if that's the
> > > > answer
> > > > > you're looking for.
> > > > >
> > > > > Cheers
> > > > > Rob
> > > > >
> > > > > On Thu, Dec 11, 2008 at 3:59 PM, Darren Govoni <darren@ontrenet.com>
> > > > wrote:
> > > > >
> > > > > > Hi,
> > > > > >  This might be a dumb question, but I have a simple field like this
> > > > > >
> > > > > > field: 0 -2 Word
> > > > > >
> > > > > > that is indexed,tokenized and stored. I've tried various ways in
> > Lucene
> > > > > > (using Luke) to search for "-2 Word" and none of them work, the
> > query
> > > > is
> > > > > > re-written improperly. I escaped the -2 to "\-2 Word" and it still
> > > > > > doesn't work. I've used all the analyzers.
> > > > > >
> > > > > >
> > > > > > What's the trick here?
> > > > > >
> > > > > > Thanks,
> > > > > > Darren
> > > > > >
> > > > > >
> > > > > >
> > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > >
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 12:55:39 2008
Return-Path: <java-user-return-37671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52980 invoked from network); 12 Dec 2008 12:55:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 12:55:38 -0000
Received: (qmail 21801 invoked by uid 500); 12 Dec 2008 12:55:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21770 invoked by uid 500); 12 Dec 2008 12:55:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21759 invoked by uid 99); 12 Dec 2008 12:55:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 04:55:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.218.25 as permitted sender)
Received: from [209.85.218.25] (HELO mail-bw0-f25.google.com) (209.85.218.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 12:55:21 +0000
Received: by bwz6 with SMTP id 6so1349576bwz.5
        for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 04:54:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jq961RFCH2G6k4EX8Bs+fNyHW+VNsZR/e+2GEecsd5c=;
        b=R6NCiQviw3u3AWnlEOUsIlMwdcQJTsRp2JpCWaQ/wL3ZB3EIzkFbROYQCb5rzH3gZw
         PCHo/ZHCXvnA1XCWDdNCsD0n6qHrcDKiOsA8aHeGzsHWZdoaZCNv0ApLGSb/F4wWG5JO
         /wZu+1G/zCnbTzyAcQXWoQ2ZlA15hFrrp6CYc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=u6YwGZZ9u3LXK/7YYeWs3ghi+k6b9E4YQM6eA6x/lEMfxRTV9Fw0AHJ9xV6GZi3xsT
         wQEXhwOsJf6tkSdfd8CSAKMq/YbyyoOQVTzyiTR/KHPExMIyuw2faUSnGUW1hKPDnm/T
         dlGuJcUqMAxDDmFwUS0VnZvrwjNqD/5rbGtbA=
Received: by 10.103.131.18 with SMTP id i18mr1845996mun.74.1229086499154;
        Fri, 12 Dec 2008 04:54:59 -0800 (PST)
Received: by 10.103.245.16 with HTTP; Fri, 12 Dec 2008 04:54:59 -0800 (PST)
Message-ID: <295da8fe0812120454h291b3ba6o4aff260db0eb1933@mail.gmail.com>
Date: Fri, 12 Dec 2008 18:24:59 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search for "-2" in field?
In-Reply-To: <1229085896.26037.0.camel@nuraku>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5963_552263.1229086499133"
References: <1229011161.7448.10.camel@nuraku>
	 <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>
	 <1229015253.7448.12.camel@nuraku>
	 <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>
	 <1229018304.7448.24.camel@nuraku>
	 <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com>
	 <1229085896.26037.0.camel@nuraku>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5963_552263.1229086499133
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

one more thing, few times I have encountered that I get different results in
Luke then in my actual code. Try in your code directly using standard
analyzer and quoted query string. print your query to check if the query
formed is correct (query is formed with quoted string).

  Can you tell what is the text you are indexing?? Let me also just check at
my end.

Prabin meitei
toostep.com

On Fri, Dec 12, 2008 at 6:14 PM, Darren Govoni <darren@ontrenet.com> wrote:

> Tried them all, with quotes, without. Doesn't work. At least in Luke it
> doesn't.
>
> On Fri, 2008-12-12 at 07:03 +0530, prabin meitei wrote:
> > whitespace analyzer will tokenize on white space irrespective of quotes.
> Use
> > standard analyzer or keyword analyzer.
> > Prabin meitei
> > toostep.com
> >
> > On Thu, Dec 11, 2008 at 11:28 PM, Darren Govoni <darren@ontrenet.com>
> wrote:
> >
> > > I'm using Luke to find the right combination of quotes,\'s and
> > > analyzers.
> > >
> > > No combination can produce a positive result for "-2 String" for the
> > > field 'type'. (any -<number> <String>)
> > >
> > > type: 0 -2 Word
> > >
> > > analyzer:
> > > query -> rewritten = result
> > >
> > > default field is 'type'.
> > >
> > > WhitespaceAnalyzer:
> > > \"-2 ConfigurationFile\"  -> type:"-2 type:ConfigurationFile" = NO
> > > -2 ConfigurationFile -> -type:2 type:ConfigurationFile = NO
> > > \-2 ConfigurationFile -> type:-2 type:ConfigurationFile = NO
> > > "\-2 ConfigurationFile" -> type:"-2 ConfigurationFile" = NO (thought
> > > this one would work).
> > >
> > > Same results for the other analyzers more or less.
> > >
> > > Weird.
> > >
> > > Darren
> > >
> > >
> > >
> > > On Thu, 2008-12-11 at 23:02 +0530, prabin meitei wrote:
> > > > Hi,  While constructing the query give the query string in quotes.
> > > > eg: query = queryparser.parse("\"-2 word\"");
> > > >
> > > > Prabin meitei
> > > > toostep.com
> > > >
> > > > On Thu, Dec 11, 2008 at 10:37 PM, Darren Govoni <darren@ontrenet.com
> >
> > > wrote:
> > > >
> > > > > I'm hoping to do this with a simple query string, but not sure if
> its
> > > > > possible. I'll try your suggestion though as a workaround.
> > > > >
> > > > > Thanks!!
> > > > >
> > > > > On Thu, 2008-12-11 at 16:48 +0000, Robert Young wrote:
> > > > > > You could do it with a TermQuery but I'm not quite sure if that's
> the
> > > > > answer
> > > > > > you're looking for.
> > > > > >
> > > > > > Cheers
> > > > > > Rob
> > > > > >
> > > > > > On Thu, Dec 11, 2008 at 3:59 PM, Darren Govoni <
> darren@ontrenet.com>
> > > > > wrote:
> > > > > >
> > > > > > > Hi,
> > > > > > >  This might be a dumb question, but I have a simple field like
> this
> > > > > > >
> > > > > > > field: 0 -2 Word
> > > > > > >
> > > > > > > that is indexed,tokenized and stored. I've tried various ways
> in
> > > Lucene
> > > > > > > (using Luke) to search for "-2 Word" and none of them work, the
> > > query
> > > > > is
> > > > > > > re-written improperly. I escaped the -2 to "\-2 Word" and it
> still
> > > > > > > doesn't work. I've used all the analyzers.
> > > > > > >
> > > > > > >
> > > > > > > What's the trick here?
> > > > > > >
> > > > > > > Thanks,
> > > > > > > Darren
> > > > > > >
> > > > > > >
> > > > > > >
> > > ---------------------------------------------------------------------
> > > > > > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > > >
> > > > > > >
> > > > >
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5963_552263.1229086499133--

From java-user-return-37672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 13:04:16 2008
Return-Path: <java-user-return-37672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55338 invoked from network); 12 Dec 2008 13:04:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 13:04:16 -0000
Received: (qmail 38739 invoked by uid 500); 12 Dec 2008 13:04:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38706 invoked by uid 500); 12 Dec 2008 13:04:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38695 invoked by uid 99); 12 Dec 2008 13:04:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 05:04:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 13:03:59 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id mBCD3YxS010426
	for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 08:03:35 -0500 (EST)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <49426127.9060902@informatics.jax.org>
Date: Fri, 12 Dec 2008 08:03:35 -0500
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to search for "-2" in field?
References: <1229011161.7448.10.camel@nuraku>	 <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>	 <1229015253.7448.12.camel@nuraku>	 <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>	 <1229018304.7448.24.camel@nuraku>	 <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com> <1229085896.26037.0.camel@nuraku>
In-Reply-To: <1229085896.26037.0.camel@nuraku>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.6.353000, Antispam-Engine: 2.6.1.350677, Antispam-Data: 2008.12.12.124623
X-PerlMx-Spam: Gauge=IIIIIII, Probability=8%, Report='BODY_SIZE_4000_4999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __CANPHARM_UNSUB 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __STOCK_PHRASE_7 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Are you absolutely, 100% sure that the -2 token has actually made it 
into your index?

As a VERY basic way to check this try something like this:

import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.TermEnum;


public class IndexTerms {
   
   
    public static void main(String[] args) {
    try {
        IndexReader ir = IndexReader.open("C:/Search/index/index");

        TermEnum te = ir.terms();

        while (te.next()) {
            System.out.println(te.term().text());
        }
    }
    catch (Exception e) {;}
    }
}

Then look through the output, verifying that the tokens you are 
expecting to exist in your index, actually do.

I have a feeling that whatever analyzer you are using is dropping the 
"-" from the front of your "-2" at indexing time, and if so it can 
sometimes be pretty hard to tell via Luke.

Hope this helps,

-Matt

Darren Govoni wrote:
> Tried them all, with quotes, without. Doesn't work. At least in Luke it
> doesn't.
>
> On Fri, 2008-12-12 at 07:03 +0530, prabin meitei wrote:
>   
>> whitespace analyzer will tokenize on white space irrespective of quotes. Use
>> standard analyzer or keyword analyzer.
>> Prabin meitei
>> toostep.com
>>
>> On Thu, Dec 11, 2008 at 11:28 PM, Darren Govoni <darren@ontrenet.com> wrote:
>>
>>     
>>> I'm using Luke to find the right combination of quotes,\'s and
>>> analyzers.
>>>
>>> No combination can produce a positive result for "-2 String" for the
>>> field 'type'. (any -<number> <String>)
>>>
>>> type: 0 -2 Word
>>>
>>> analyzer:
>>> query -> rewritten = result
>>>
>>> default field is 'type'.
>>>
>>> WhitespaceAnalyzer:
>>> \"-2 ConfigurationFile\"  -> type:"-2 type:ConfigurationFile" = NO
>>> -2 ConfigurationFile -> -type:2 type:ConfigurationFile = NO
>>> \-2 ConfigurationFile -> type:-2 type:ConfigurationFile = NO
>>> "\-2 ConfigurationFile" -> type:"-2 ConfigurationFile" = NO (thought
>>> this one would work).
>>>
>>> Same results for the other analyzers more or less.
>>>
>>> Weird.
>>>
>>> Darren
>>>
>>>
>>>
>>> On Thu, 2008-12-11 at 23:02 +0530, prabin meitei wrote:
>>>       
>>>> Hi,  While constructing the query give the query string in quotes.
>>>> eg: query = queryparser.parse("\"-2 word\"");
>>>>
>>>> Prabin meitei
>>>> toostep.com
>>>>
>>>> On Thu, Dec 11, 2008 at 10:37 PM, Darren Govoni <darren@ontrenet.com>
>>>>         
>>> wrote:
>>>       
>>>>> I'm hoping to do this with a simple query string, but not sure if its
>>>>> possible. I'll try your suggestion though as a workaround.
>>>>>
>>>>> Thanks!!
>>>>>
>>>>> On Thu, 2008-12-11 at 16:48 +0000, Robert Young wrote:
>>>>>           
>>>>>> You could do it with a TermQuery but I'm not quite sure if that's the
>>>>>>             
>>>>> answer
>>>>>           
>>>>>> you're looking for.
>>>>>>
>>>>>> Cheers
>>>>>> Rob
>>>>>>
>>>>>> On Thu, Dec 11, 2008 at 3:59 PM, Darren Govoni <darren@ontrenet.com>
>>>>>>             
>>>>> wrote:
>>>>>           
>>>>>>> Hi,
>>>>>>>  This might be a dumb question, but I have a simple field like this
>>>>>>>
>>>>>>> field: 0 -2 Word
>>>>>>>
>>>>>>> that is indexed,tokenized and stored. I've tried various ways in
>>>>>>>               
>>> Lucene
>>>       
>>>>>>> (using Luke) to search for "-2 Word" and none of them work, the
>>>>>>>               
>>> query
>>>       
>>>>> is
>>>>>           
>>>>>>> re-written improperly. I escaped the -2 to "\-2 Word" and it still
>>>>>>> doesn't work. I've used all the analyzers.
>>>>>>>
>>>>>>>
>>>>>>> What's the trick here?
>>>>>>>
>>>>>>> Thanks,
>>>>>>> Darren
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>> ---------------------------------------------------------------------
>>>       
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>           
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 14:33:48 2008
Return-Path: <java-user-return-37673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18068 invoked from network); 12 Dec 2008 14:33:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 14:33:48 -0000
Received: (qmail 63015 invoked by uid 500); 12 Dec 2008 14:33:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62988 invoked by uid 500); 12 Dec 2008 14:33:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62977 invoked by uid 99); 12 Dec 2008 14:33:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 06:33:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gshackles@gmail.com designates 209.85.132.246 as permitted sender)
Received: from [209.85.132.246] (HELO an-out-0708.google.com) (209.85.132.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 14:33:39 +0000
Received: by an-out-0708.google.com with SMTP id b2so640016ana.5
        for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 06:33:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=QCvq9x+a8EZGJiz8+xlmAQckrD4ZRO1m6y/FA9RZiCM=;
        b=YtKdZDWzAUTyL1VCCB3BlGK6jOFYZ/gOxUwx+IpIMM2RQXsyVmVe2r3v+lah7Ag3vJ
         dfzX2aE/VUtMkdYROtakiilcePh0HJtQTTor+lB07EQPgOVrRu1zZW5AkzDLbkvnC9vA
         ldSALJtcJACqeSV/lAj/Tgbvj4KHIKzA+nAsE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=mX5TaYIGfW8FO7/u8xt5Elk54+LoRKJHIJKdjMZktX38Vl8+GBwSv/mJ+yk6Hsfyjq
         wX1setbFdhQbrwofKXShdNYGOdLHqNQbHysKwvaciYCj6tlDTlT3QiCqMZSaa4kQ1ewl
         GJBQn5b2P5enGpcjVLPCJeyDZ9zKXeTk0LBhI=
Received: by 10.100.124.6 with SMTP id w6mr2880721anc.80.1229092398691;
        Fri, 12 Dec 2008 06:33:18 -0800 (PST)
Received: by 10.100.47.1 with HTTP; Fri, 12 Dec 2008 06:33:18 -0800 (PST)
Message-ID: <b63a7e9e0812120633lf67a3c9r362b4ce155cbbd57@mail.gmail.com>
Date: Fri, 12 Dec 2008 09:33:18 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search for "-2" in field?
In-Reply-To: <49426127.9060902@informatics.jax.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5342_7445921.1229092398691"
References: <1229011161.7448.10.camel@nuraku>
	 <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>
	 <1229015253.7448.12.camel@nuraku>
	 <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>
	 <1229018304.7448.24.camel@nuraku>
	 <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com>
	 <1229085896.26037.0.camel@nuraku>
	 <49426127.9060902@informatics.jax.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5342_7445921.1229092398691
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I admit I only read through this thread quickly so maybe I missed something,
but it sounds like you're trying different Analyzers for searching, when
what you really need is to use the right analyzer during indexing.
Generally you want to use the same analyzer for both indexing and searching
so that you get the results you would expect.  That's where I would start in
trying to figure out the problem, since switching analyzers on the search
side probably won't help you.


Greg

------=_Part_5342_7445921.1229092398691--

From java-user-return-37674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 14:43:00 2008
Return-Path: <java-user-return-37674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28135 invoked from network); 12 Dec 2008 14:42:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 14:42:59 -0000
Received: (qmail 76397 invoked by uid 500); 12 Dec 2008 14:43:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76354 invoked by uid 500); 12 Dec 2008 14:43:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76339 invoked by uid 99); 12 Dec 2008 14:43:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 06:43:05 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.218.14 as permitted sender)
Received: from [209.85.218.14] (HELO mail-bw0-f14.google.com) (209.85.218.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 14:42:51 +0000
Received: by bwz7 with SMTP id 7so3060885bwz.5
        for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 06:42:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=/POFCGz5/SM6tmV+u0KS9zZQEdEeGQL0VJCP4NaqtBc=;
        b=GSc3tPcj/dRI9uBaHAoZPT7oF79/s5U4y5uKhVB7ZhuQHHxlwkUIKewgg2DA5eTAOK
         4Pgt6LUb0SPfEVMVKDhir+6d388OsLFxvsif79lkFYvMcS9FILvFjwttfBSHZPgsc7Su
         x1j0vHp8yms1SvXP2JOsqGolyRFsN8DNrBR6o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=X3BuKrjTkpb0ZVaEr18sUBMCaedlrIbgVJgvMjxgkypeFnlUvLgShMJzoiG0fZkbc+
         mi5uhj5iJJtLO9U0maXxXYQVk19//PrtlD5zNJ+Q3SDXF89DwnP0HyqfE2KtD0auWWLG
         W7gAFv2giKpcTLvMZ5gPkagXD8ywDfAiXCWiw=
Received: by 10.181.146.14 with SMTP id y14mr1311522bkn.70.1229092851957;
        Fri, 12 Dec 2008 06:40:51 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Fri, 12 Dec 2008 06:40:51 -0800 (PST)
Message-ID: <5d53d5770812120640o5af69a2ckaba45ab8e665e3d1@mail.gmail.com>
Date: Fri, 12 Dec 2008 10:40:51 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: How to add an Arabic and Farsi language analyzer to Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10383_26820272.1229092851945"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10383_26820272.1229092851945
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Anyone heard of one for Lucene.NET ?

Ian

------=_Part_10383_26820272.1229092851945--

From java-user-return-37675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 14:44:22 2008
Return-Path: <java-user-return-37675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28532 invoked from network); 12 Dec 2008 14:44:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 14:44:19 -0000
Received: (qmail 78626 invoked by uid 500); 12 Dec 2008 14:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78599 invoked by uid 500); 12 Dec 2008 14:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78588 invoked by uid 99); 12 Dec 2008 14:44:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 06:44:25 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=HTML_IMAGE_ONLY_04,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 14:44:10 +0000
Received: by fk-out-0910.google.com with SMTP id 18so912644fkq.5
        for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 06:43:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=wCNNeG0A+WWpjK4U/hXXsRAX7yGb2xo3VRkRn10/OKc=;
        b=lh5wO6oLbeJvqHXqk4d6tedegQSMvfUuMuFjYPui7LfkohpxS2vl7wBh08FkqesqhE
         iOlTdr2kT8xoqqamj9lV2SdpKVgt7oGkF984OPpb5TGbLZfYvj3I7PJcKnSkCGlZv9+6
         XoKhe/QzteKfunUdV7NKbaJMl++YpTdIOeIbU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=ndhx30HuO1ZVrQGqoXMWTL7nm+yarXNd4tA4DbqDbtHjS5Kp+ABdrHEeDzfMHsQCpN
         UHS4UQXx1cMx22VYTS7xa9bNQHBR1H7pvj1MH4koDTdS81525BRTMZoWuisFffAgaUCu
         61AMCZXhedWsIkb0dFEm9BA0dKMbj7gqL6k+Y=
Received: by 10.181.48.13 with SMTP id a13mr1315681bkk.43.1229093030397;
        Fri, 12 Dec 2008 06:43:50 -0800 (PST)
Received: by 10.181.9.19 with HTTP; Fri, 12 Dec 2008 06:43:49 -0800 (PST)
Message-ID: <5d53d5770812120643sd991af5nfd88c1a2f01606c@mail.gmail.com>
Date: Fri, 12 Dec 2008 10:43:49 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: .NET list?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10428_19231968.1229093030382"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10428_19231968.1229093030382
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am using java-user@lucene.apache.org  for help, but sometimes I'd like
Lucene.net specific help. Is there a mailing list for Lucene.NET on apache?

Ian

------=_Part_10428_19231968.1229093030382--

From java-user-return-37676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 14:46:49 2008
Return-Path: <java-user-return-37676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29488 invoked from network); 12 Dec 2008 14:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 14:46:49 -0000
Received: (qmail 83100 invoked by uid 500); 12 Dec 2008 14:46:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83060 invoked by uid 500); 12 Dec 2008 14:46:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83049 invoked by uid 99); 12 Dec 2008 14:46:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 06:46:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 14:46:32 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0715130EFC17; Fri, 12 Dec 2008 07:46:11 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (unknown [138.210.10.225])
	by ehatchersolutions.com (Postfix) with ESMTP id 979EC30EFC16
	for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 07:46:09 -0700 (MST)
Message-Id: <AF16DB96-C4B1-4B58-BC64-228DAD3B266A@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <5d53d5770812120643sd991af5nfd88c1a2f01606c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: .NET list?
Date: Fri, 12 Dec 2008 09:46:08 -0500
References: <5d53d5770812120643sd991af5nfd88c1a2f01606c@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Dec 12, 2008, at 9:43 AM, Ian Vink wrote:
> I am using java-user@lucene.apache.org  for help, but sometimes I'd  
> like
> Lucene.net specific help. Is there a mailing list for Lucene.NET on  
> apache?

Yes, see the mail list section here: <http://incubator.apache.org/lucene.net/ 
 >

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 15:14:56 2008
Return-Path: <java-user-return-37677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44929 invoked from network); 12 Dec 2008 15:14:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 15:14:55 -0000
Received: (qmail 23860 invoked by uid 500); 12 Dec 2008 15:15:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23830 invoked by uid 500); 12 Dec 2008 15:15:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23819 invoked by uid 99); 12 Dec 2008 15:15:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 07:15:00 -0800
X-ASF-Spam-Status: No, hits=-2.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport5.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 15:14:39 +0000
X-SBRS: None
X-MID: 106517685
Received: from fmd3tj002.fda.gov ([10.160.10.77])
  by ironport5.fda.gov with ESMTP; 12 Dec 2008 10:14:16 -0500
Received: from FMD3VS012.fda.gov ([10.160.10.61]) by FMD3TJ002.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 12 Dec 2008 09:58:16 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Beginner: Best way to index and display orginal text of pdfs in search results
Date: Fri, 12 Dec 2008 09:58:15 -0500
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73B42@FMD3VS012.fda.gov>
In-Reply-To: <20971377.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Beginner: Best way to index and display orginal text of pdfs in search results
thread-index: AclcNIRgiuTtBNzNQeuW6HZDC2LBLQANVvXw
References: <20971377.post@talk.nabble.com>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Dec 2008 14:58:16.0362 (UTC) FILETIME=[102070A0:01C95C6A]
X-Virus-Checked: Checked by ClamAV on apache.org

You can use PDFBOX.=20

http://kalanir.blogspot.com/2008/08/indexing-pdf-documents-with-lucene.h
tml=20


Sincerely,
Sithu D Sudarsan

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

-----Original Message-----
From: maxmil [mailto:mail@alwayssunny.com]=20
Sent: Friday, December 12, 2008 3:34 AM
To: java-user@lucene.apache.org
Subject: Beginner: Best way to index and display orginal text of pdfs in
search results


Hi,

This is the first time i am using Lucene.

I need to index pdf's with very few fields, title, date and body (long
field) for a web based search.

The results i need to display have to show not only the documents found
but
for each document a snapshot of the text where the search term has been
found. This is analogous to the way google displays search results. That
is
to say

 ... some words and first instance of search Term and some more words
...
some more words second instance of search term and some more words...=20

etc.

To do this i would need the original text of the document for each hit.
As
far as i understand Lucene does not save the original text of the
document
in the index.

I am not using a database and would prefer not to have to store the
original
document text elsewhere.

One way i could do this would be to take the hits from Lucene and reopen
each pdf to extract the original text at run time however i fear that
with
many results this would be very slow.=20

What would you recommend me to do?

Thanks

max
--=20
View this message in context:
http://www.nabble.com/Beginner%3A-Best-way-to-index-and-display-orginal-
text-of-pdfs-in-search-results-tp20971377p20971377.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 15:35:08 2008
Return-Path: <java-user-return-37678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60504 invoked from network); 12 Dec 2008 15:35:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 15:35:07 -0000
Received: (qmail 54285 invoked by uid 500); 12 Dec 2008 15:35:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54255 invoked by uid 500); 12 Dec 2008 15:35:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54243 invoked by uid 99); 12 Dec 2008 15:35:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 07:35:10 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 15:34:48 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1410922rne.4
        for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 07:34:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=0ALZsFKabjrK0+E2tsgNRUknLWcga3E6WMm3Wqicuqk=;
        b=Te8uCfbwnqL+iHlkGUogOM5oJBFKIwLERDbcoLMUS3pav9Is0p2TuoFxYdKxUD5YGd
         n+QQhxouwtYRcdPuh7J8PFGkKtsvNgE0bJ+ac/VBGz3HVPlnH0+DAgH4npamXgdYGITi
         rMhIb9MS03wNd8LPVUbFN/ppmjpTNEGfMbYwQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=TTJ6cUe1yi0J7hJXEWHj4nGNKt3HV4xLHI1+uChWYaVJy2l+WDHQtnxvyMY6/t65lH
         uq0hXfYxgPvuMEma2qopQv9lZuUzl/5i6f6bggdqlpjmxRuUbYwBSG2D+OIeJWGfptgT
         JdZTA9tN3bKz0C7qUmOdM5WXyfq6oipCz2QOs=
Received: by 10.90.28.12 with SMTP id b12mr910931agb.9.1229096067718;
        Fri, 12 Dec 2008 07:34:27 -0800 (PST)
Received: by 10.90.25.16 with HTTP; Fri, 12 Dec 2008 07:34:27 -0800 (PST)
Message-ID: <8837fb770812120734r3fe7525chd62959ae67b018da@mail.gmail.com>
Date: Fri, 12 Dec 2008 07:34:27 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <20974217.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7637_27546802.1229096067712"
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
	 <20937717.post@talk.nabble.com>
	 <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
	 <Pine.LNX.4.62.0812101553090.10261@radix.cryptio.net>
	 <20952134.post@talk.nabble.com>
	 <8837fb770812110920n7519423ex4bf5d89da9950417@mail.gmail.com>
	 <20974217.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7637_27546802.1229096067712
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

wiki:http://bobo-browse.wiki.sourceforge.net/

this describes the upcoming 2.0 release, which is in the ill-named
branch: BR_DEV_1_5_0
We are still doing some development work on that, feel free to check out the
branch and we will be doing a release shortly.

some features we aimed for 2.0 and also reasons for the api changes:

1) support for selection expansion: The ability to select a value in a
field, and allow the sibling facets to come back, e.g. intersect with other
fields and keep the current field not intersect with selected value. This is
rather tricky to be fast, e.g. doing 2 searches.

2) allow the framework, ability to handle derived data, e.g. build facets
from data not necc. on index. Some examples, in linkedin's case, being able
to facet on different distances of the social graph, etc.

3) Being able to handle multi valued facets, e.g. 1 docid -> into multiple
values.

4) being able to do 1) on range facets.

etc..

-John

On Fri, Dec 12, 2008 at 3:52 AM, Karsten F.
<karsten-lucene@fiz-technik.de>wrote:

>
> Hi John,
>
> I will take a look in the bobo-browse source code at week end.
>
> Do you now the xtf implementation of faceted browsing:
> starting point is
> org.cdlib.xtf.textEngine.facet.GroupCounts#addDoc
> ?
> (It works with millions of facet values on millions of hits)
>
> What is the starting point in browseengine?
>
> How is the connection between solr and browseengine ?
>
> Thanks for mention browseengine. I really like the car demo!
>
> Best regards
>  Karsten
>
>
> John Wang wrote:
> >
> > We are doing lotsa internal changes for performance. Also upgrading the
> > api
> > to support for features. So my suggestion is to wait for 2.0. (should
> > release this this month, at the latest mid jan) We can take this offline
> > if
> > you want to have a deeper discussion on browse engine.
> >
>
> --
> View this message in context:
> http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20974217.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7637_27546802.1229096067712--

From java-user-return-37679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 15:37:36 2008
Return-Path: <java-user-return-37679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64158 invoked from network); 12 Dec 2008 15:37:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 15:37:36 -0000
Received: (qmail 60981 invoked by uid 500); 12 Dec 2008 15:37:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60616 invoked by uid 500); 12 Dec 2008 15:37:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60602 invoked by uid 99); 12 Dec 2008 15:37:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 07:37:42 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 15:37:20 +0000
Received: by yw-out-2324.google.com with SMTP id 3so666307ywj.5
        for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 07:36:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=DBMtiXmaWKhwgQPYcIId2qReuHkER1rYQhNUFszLo9w=;
        b=ESbDH2cxOd2+A03Dd4+nT+cclZ53CiFa5b32mQb0tansWb0haW5BPDN4rrTEw3twNZ
         wSA9WwbcZSAFaf0u2vrSoSTPfBRMAyzA0ktGs+Wqs6q+4/8+RKeE3EoJ+G+BfE/A5m51
         O5sXs882Taeooxdr/2At/gmVuIjckl9IhNFRk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=sLeVVrYQyO1rqwrbldwGbndKXmMx6Uhp0y3jqmA8BcILGrawYSVcUyWcknpIq2TIAg
         qHlco9FR2R73SbQaB1kmW2gMq5Y1hlDPzc0hwU5IXzQEd8FlJ5R5WPB+BK+8kp7yRmY4
         HMGzsZQWsDglH+tVIeXcWmRly0++kAFVL3ni4=
Received: by 10.90.71.15 with SMTP id t15mr2257350aga.76.1229096219387;
        Fri, 12 Dec 2008 07:36:59 -0800 (PST)
Received: by 10.90.25.16 with HTTP; Fri, 12 Dec 2008 07:36:59 -0800 (PST)
Message-ID: <8837fb770812120736j1456a514n65549bb1d6a9679@mail.gmail.com>
Date: Fri, 12 Dec 2008 07:36:59 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Taxonomy in Lucene
In-Reply-To: <20974217.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7693_30525278.1229096219377"
References: <7C7C72D1EFE973489F3AF325C7C1BABC01BB7ADB@BOMEX002.corp.capgemini.com>
	 <20937717.post@talk.nabble.com>
	 <5e76f3840812101055q676fbc0ciee37bff35fe4dd94@mail.gmail.com>
	 <Pine.LNX.4.62.0812101553090.10261@radix.cryptio.net>
	 <20952134.post@talk.nabble.com>
	 <8837fb770812110920n7519423ex4bf5d89da9950417@mail.gmail.com>
	 <20974217.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7693_30525278.1229096219377
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

HI Karsten:
     I will check out xtf library.

     there is no connection between solr and browseengien other than Lucene
and java.

Thanks

-John

On Fri, Dec 12, 2008 at 3:52 AM, Karsten F.
<karsten-lucene@fiz-technik.de>wrote:

>
> Hi John,
>
> I will take a look in the bobo-browse source code at week end.
>
> Do you now the xtf implementation of faceted browsing:
> starting point is
> org.cdlib.xtf.textEngine.facet.GroupCounts#addDoc
> ?
> (It works with millions of facet values on millions of hits)
>
> What is the starting point in browseengine?
>
> How is the connection between solr and browseengine ?
>
> Thanks for mention browseengine. I really like the car demo!
>
> Best regards
>  Karsten
>
>
> John Wang wrote:
> >
> > We are doing lotsa internal changes for performance. Also upgrading the
> > api
> > to support for features. So my suggestion is to wait for 2.0. (should
> > release this this month, at the latest mid jan) We can take this offline
> > if
> > you want to have a deeper discussion on browse engine.
> >
>
> --
> View this message in context:
> http://www.nabble.com/Taxonomy-in-Lucene-tp20929487p20974217.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7693_30525278.1229096219377--

From java-user-return-37680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 17:58:08 2008
Return-Path: <java-user-return-37680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55433 invoked from network); 12 Dec 2008 17:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 17:58:08 -0000
Received: (qmail 47934 invoked by uid 500); 12 Dec 2008 17:58:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47730 invoked by uid 500); 12 Dec 2008 17:58:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47719 invoked by uid 99); 12 Dec 2008 17:58:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 09:58:14 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 17:57:52 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id ADD0E7346C
	for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 09:57:31 -0800 (PST)
Message-Id: <D20B20B8-C23C-40C0-A462-3E9CE5580838@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20973238.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Spell check of a large text
Date: Fri, 12 Dec 2008 12:57:30 -0500
References: <20953625.post@talk.nabble.com> <7A716968-AF33-4423-8B5E-756369EDA3C9@apache.org> <20973238.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 12, 2008, at 5:36 AM, Lucene User no 1981 wrote:

>
> Grant,
>
> It's definitely dictionary based spell checker. A bit fleshing out,
> currently the document gets indexed and then it's analysed (bad words,
> repetitions etc), spell check - no corrections - would be yet another
> step in the process. It's all read-only stuff, the document content is
> not modified, it's just tagged accordingly.
> That said, I kind of like your idea, I mean token filter looks like  
> the
> good candidate. As of Lazzy, is it any different than Lucene
> SpellChecker (ngram based)?

Yes, Jazzy is actually a dictionary of correctly spelled words.   
Lucene's approach (at least the index based one) is merely a  
dictionary of words that occur in your corpus, misspellings and all.   
So, if your goal is to tag words that are really, truly spelled  
incorrectly, than I'd say Jazzy or some other dictionary tool is the  
way to go.


> what really matters here is not the
> accuracy (decent but not exceptional - there is a manual double- check
> of tagged docs anyway), what matters most is performance and ease of
> integration. Any grammar check is absolutely immaterial.
> About that payload idea, I can only work with a token in a filter. I
> could attach something and spit it out, but what would be that
> something? It would have to be searchable I assume, otherwise I could
> perform the check without filter, out of index. If it's searchable
> then, apart from querying, I could perhaps make highlighter work with
> it nicely.

Payloads live on Tokens.  See the Token.setPayload() method.  It would  
then be searchable by using the BoostingTermQuery (BTQ) but you may  
need to write some other type of query.
For instance, the BTQ will allow you to say, I believe, give me all  
documents where a particular terms is misspelled and you can specify  
that term.  However, you may also want "give me all documents that  
have misspellings" and that is not something the BTQ can do.  You  
probably could hack up the MatchAllDocsQuery to do it though.  Or you  
could maybe write a QueryFilter that turns on all docs that have a  
payload present.  This is totally out there at this point, so take it  
with a grain of salt.  I think you can achieve what you want, but it  
will take some lifting.

I have no clue on the performance, but I think the indexing approach  
could be pretty fast, especially if you can perhaps test a cache of  
commonly misspelled terms, but I would test that first.

Cheers,
Grant 
  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 17:59:49 2008
Return-Path: <java-user-return-37681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56531 invoked from network); 12 Dec 2008 17:59:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 17:59:49 -0000
Received: (qmail 52302 invoked by uid 500); 12 Dec 2008 17:59:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52284 invoked by uid 500); 12 Dec 2008 17:59:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52273 invoked by uid 99); 12 Dec 2008 17:59:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 09:59:49 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 17:59:26 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id 04A0A5B534
	for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 09:59:05 -0800 (PST)
Message-Id: <7E10AF8C-C3F4-413C-8292-5E6E3F2B86D3@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <5d53d5770812120640o5af69a2ckaba45ab8e665e3d1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to add an Arabic and Farsi language analyzer to Lucene
Date: Fri, 12 Dec 2008 12:59:05 -0500
References: <5d53d5770812120640o5af69a2ckaba45ab8e665e3d1@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I just added an Arabic Analyzer to contrib/analysis.  No clue as to  
when that will percolate to .NET version.  I believe you can search  
the archives for help w/ Persian, as I recall someone offering  
something in the past.


On Dec 12, 2008, at 9:40 AM, Ian Vink wrote:

> Anyone heard of one for Lucene.NET ?
>
> Ian



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 12 20:25:59 2008
Return-Path: <java-user-return-37682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25784 invoked from network); 12 Dec 2008 20:25:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2008 20:25:59 -0000
Received: (qmail 50159 invoked by uid 500); 12 Dec 2008 20:26:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50120 invoked by uid 500); 12 Dec 2008 20:26:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50109 invoked by uid 99); 12 Dec 2008 20:26:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 12:26:05 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 20:25:44 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LBEZf-0004Dz-HN
	for java-user@lucene.apache.org; Fri, 12 Dec 2008 12:25:23 -0800
Message-ID: <20983056.post@talk.nabble.com>
Date: Fri, 12 Dec 2008 12:25:23 -0800 (PST)
From: Zender00 <danielpenning@gmx.net>
To: java-user@lucene.apache.org
Subject: Singleton and Lucene: org.apache.lucene.store.AlreadyClosed
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: danielpenning@gmx.net
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I tried to implement a singleton pattern for my already working lucene
object.
But there is a strange error when I tried to access the instance.

When my Singleton GetInstance() method is executed for the first time it
creates a new instance of my lucene object. There are some member variables
in this object like an IndexWriter and IndexReader. These objects are
created in the constructor and I can access them directly in the constructor
successfully.
GetInstance() now returns this lucene object and I have to execute some
operations on it. But the IndexWriter seems to be closed meanwhile and I got
the exception:

"org.apache.lucene.store.AlreadyClosed    Exception: this IndexWriter is
closed" when my object tries to writer some documents. 

How could this happen? Isn't it possible to use lucene with a
singleton-pattern? 

Kind regards,
D. Penning
-- 
View this message in context: http://www.nabble.com/Singleton-and-Lucene%3A-org.apache.lucene.store.AlreadyClosed-tp20983056p20983056.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 13 01:13:00 2008
Return-Path: <java-user-return-37683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69231 invoked from network); 13 Dec 2008 01:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2008 01:13:00 -0000
Received: (qmail 3072 invoked by uid 500); 13 Dec 2008 01:13:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3038 invoked by uid 500); 13 Dec 2008 01:13:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3027 invoked by uid 99); 13 Dec 2008 01:13:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 17:13:01 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 13 Dec 2008 01:12:46 +0000
Received: (qmail 55259 invoked from network); 13 Dec 2008 01:12:23 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.7?) (68.48.101.76)
  by relay03.pair.com with SMTP; 13 Dec 2008 01:12:23 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: How to search for "-2" in field?
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <49426127.9060902@informatics.jax.org>
References: <1229011161.7448.10.camel@nuraku>
	 <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>
	 <1229015253.7448.12.camel@nuraku>
	 <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>
	 <1229018304.7448.24.camel@nuraku>
	 <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com>
	 <1229085896.26037.0.camel@nuraku>  <49426127.9060902@informatics.jax.org>
Content-Type: text/plain
Date: Fri, 12 Dec 2008 20:12:28 -0500
Message-Id: <1229130748.24089.15.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Matt,
   Thanks for the thought. Yeah, I see it there in Luke, but the other
gentleman's idea that maybe Luke is producing different than code might
be a clue. It would be odd, if true, but nothing else works so I will
see if that is it. 

Darren

On Fri, 2008-12-12 at 08:03 -0500, Matthew Hall wrote:
> Are you absolutely, 100% sure that the -2 token has actually made it 
> into your index?
> 
> As a VERY basic way to check this try something like this:
> 
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.TermEnum;
> 
> 
> public class IndexTerms {
>    
>    
>     public static void main(String[] args) {
>     try {
>         IndexReader ir = IndexReader.open("C:/Search/index/index");
> 
>         TermEnum te = ir.terms();
> 
>         while (te.next()) {
>             System.out.println(te.term().text());
>         }
>     }
>     catch (Exception e) {;}
>     }
> }
> 
> Then look through the output, verifying that the tokens you are 
> expecting to exist in your index, actually do.
> 
> I have a feeling that whatever analyzer you are using is dropping the 
> "-" from the front of your "-2" at indexing time, and if so it can 
> sometimes be pretty hard to tell via Luke.
> 
> Hope this helps,
> 
> -Matt
> 
> Darren Govoni wrote:
> > Tried them all, with quotes, without. Doesn't work. At least in Luke it
> > doesn't.
> >
> > On Fri, 2008-12-12 at 07:03 +0530, prabin meitei wrote:
> >   
> >> whitespace analyzer will tokenize on white space irrespective of quotes. Use
> >> standard analyzer or keyword analyzer.
> >> Prabin meitei
> >> toostep.com
> >>
> >> On Thu, Dec 11, 2008 at 11:28 PM, Darren Govoni <darren@ontrenet.com> wrote:
> >>
> >>     
> >>> I'm using Luke to find the right combination of quotes,\'s and
> >>> analyzers.
> >>>
> >>> No combination can produce a positive result for "-2 String" for the
> >>> field 'type'. (any -<number> <String>)
> >>>
> >>> type: 0 -2 Word
> >>>
> >>> analyzer:
> >>> query -> rewritten = result
> >>>
> >>> default field is 'type'.
> >>>
> >>> WhitespaceAnalyzer:
> >>> \"-2 ConfigurationFile\"  -> type:"-2 type:ConfigurationFile" = NO
> >>> -2 ConfigurationFile -> -type:2 type:ConfigurationFile = NO
> >>> \-2 ConfigurationFile -> type:-2 type:ConfigurationFile = NO
> >>> "\-2 ConfigurationFile" -> type:"-2 ConfigurationFile" = NO (thought
> >>> this one would work).
> >>>
> >>> Same results for the other analyzers more or less.
> >>>
> >>> Weird.
> >>>
> >>> Darren
> >>>
> >>>
> >>>
> >>> On Thu, 2008-12-11 at 23:02 +0530, prabin meitei wrote:
> >>>       
> >>>> Hi,  While constructing the query give the query string in quotes.
> >>>> eg: query = queryparser.parse("\"-2 word\"");
> >>>>
> >>>> Prabin meitei
> >>>> toostep.com
> >>>>
> >>>> On Thu, Dec 11, 2008 at 10:37 PM, Darren Govoni <darren@ontrenet.com>
> >>>>         
> >>> wrote:
> >>>       
> >>>>> I'm hoping to do this with a simple query string, but not sure if its
> >>>>> possible. I'll try your suggestion though as a workaround.
> >>>>>
> >>>>> Thanks!!
> >>>>>
> >>>>> On Thu, 2008-12-11 at 16:48 +0000, Robert Young wrote:
> >>>>>           
> >>>>>> You could do it with a TermQuery but I'm not quite sure if that's the
> >>>>>>             
> >>>>> answer
> >>>>>           
> >>>>>> you're looking for.
> >>>>>>
> >>>>>> Cheers
> >>>>>> Rob
> >>>>>>
> >>>>>> On Thu, Dec 11, 2008 at 3:59 PM, Darren Govoni <darren@ontrenet.com>
> >>>>>>             
> >>>>> wrote:
> >>>>>           
> >>>>>>> Hi,
> >>>>>>>  This might be a dumb question, but I have a simple field like this
> >>>>>>>
> >>>>>>> field: 0 -2 Word
> >>>>>>>
> >>>>>>> that is indexed,tokenized and stored. I've tried various ways in
> >>>>>>>               
> >>> Lucene
> >>>       
> >>>>>>> (using Luke) to search for "-2 Word" and none of them work, the
> >>>>>>>               
> >>> query
> >>>       
> >>>>> is
> >>>>>           
> >>>>>>> re-written improperly. I escaped the -2 to "\-2 Word" and it still
> >>>>>>> doesn't work. I've used all the analyzers.
> >>>>>>>
> >>>>>>>
> >>>>>>> What's the trick here?
> >>>>>>>
> >>>>>>> Thanks,
> >>>>>>> Darren
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>               
> >>> ---------------------------------------------------------------------
> >>>       
> >>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>>>
> >>>>>>>
> >>>>>>>               
> >>>>> ---------------------------------------------------------------------
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>>
> >>>>>
> >>>>>           
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>       
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 13 05:06:10 2008
Return-Path: <java-user-return-37684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49239 invoked from network); 13 Dec 2008 05:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2008 05:06:08 -0000
Received: (qmail 6912 invoked by uid 500); 13 Dec 2008 05:06:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6875 invoked by uid 500); 13 Dec 2008 05:06:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6864 invoked by uid 99); 13 Dec 2008 05:06:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 21:06:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.102] (HELO web50704.mail.re2.yahoo.com) (206.190.38.102)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 13 Dec 2008 05:05:51 +0000
Received: (qmail 11697 invoked by uid 60001); 13 Dec 2008 05:05:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=hyaFkRDrNrOicuXuWWlXR0y6R8cFo4wvuDkEtRp5bPabq6bA9/53DRRC0bS7qXXOjS/7EC60xyzXPwf0T7MWCCO3OunDPGUEwbOw4VTsvykPIlFb87lLl8TQw2KLRPMl7ugOxQPlnzv8313Qiu6Ds3L2G5yaCym5w46DQxkGQUc=;
X-YMail-OSG: wMjmeT4VM1m2V2NKKhEgh.QFj5hSCx3z2IZ0EUh1rE52ZWlmOvJyKqVW6HuWfAGH5dV7A4l4Nz_JXPMcDGzyLEsT8axe0oUyx1mQEbSenO6c1blafP.vyvGHKItyaVuOoZPwIt1otII4P84bbX2f5ycJkn6F8EwueZTAxoCJJc6Nc.41ITi2aoz9wux5rQ--
Received: from [98.216.104.214] by web50704.mail.re2.yahoo.com via HTTP; Fri, 12 Dec 2008 21:05:29 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <1229011161.7448.10.camel@nuraku>  <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>  <1229015253.7448.12.camel@nuraku>  <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>  <1229018304.7448.24.camel@nuraku>  <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com>  <1229085896.26037.0.camel@nuraku>  <49426127.9060902@informatics.jax.org> <1229130748.24089.15.camel@nuraku>
Date: Fri, 12 Dec 2008 21:05:29 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Lucene - Authentication
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <42153.11666.qm@web50704.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi , if I have a Lucene index (or Solr) that is installed in client premises. how would you go about securing the index from being queries in unauthorized fashion. For example, from malicious users or hackers, or for that matter "internal" users trying to reengineer the system and use it for purposes other than the way licensed.

any suggestions?
as


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 13 07:15:49 2008
Return-Path: <java-user-return-37685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7552 invoked from network); 13 Dec 2008 07:15:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2008 07:15:49 -0000
Received: (qmail 63033 invoked by uid 500); 13 Dec 2008 07:15:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62999 invoked by uid 500); 13 Dec 2008 07:15:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62988 invoked by uid 99); 13 Dec 2008 07:15:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 12 Dec 2008 23:15:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 13 Dec 2008 07:15:32 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8058D71C4D5; Fri, 12 Dec 2008 23:15:12 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7CE9771C4AB
	for <java-user@lucene.apache.org>; Fri, 12 Dec 2008 23:15:12 -0800 (PST)
Date: Fri, 12 Dec 2008 23:15:12 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene - Authentication
In-Reply-To: <42153.11666.qm@web50704.mail.re2.yahoo.com>
Message-ID: <Pine.LNX.4.62.0812122314160.23646@radix.cryptio.net>
References: <1229011161.7448.10.camel@nuraku> 
 <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com> 
 <1229015253.7448.12.camel@nuraku>  <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>
  <1229018304.7448.24.camel@nuraku>  <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com>
  <1229085896.26037.0.camel@nuraku>  <49426127.9060902@informatics.jax.org>
 <1229130748.24089.15.camel@nuraku> <42153.11666.qm@web50704.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
: References: <1229011161.7448.10.camel@nuraku> 
:     <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com> 
:     <1229015253.7448.12.camel@nuraku> 
:     <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com> 
:     <1229018304.7448.24.camel@nuraku> 
:     <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com> 
:     <1229085896.26037.0.camel@nuraku>  <49426127.9060902@informatics.jax.org>
:     <1229130748.24089.15.camel@nuraku>
: Date: Fri, 12 Dec 2008 21:05:29 -0800 (PST)
: Subject: Lucene - Authentication

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 14 14:22:09 2008
Return-Path: <java-user-return-37686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75560 invoked from network); 14 Dec 2008 14:22:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2008 14:22:09 -0000
Received: (qmail 98893 invoked by uid 500); 14 Dec 2008 14:22:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98849 invoked by uid 500); 14 Dec 2008 14:22:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98838 invoked by uid 99); 14 Dec 2008 14:22:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Dec 2008 06:22:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Dec 2008 14:21:46 +0000
Received: by nf-out-0910.google.com with SMTP id g16so469826nfd.15
        for <java-user@lucene.apache.org>; Sun, 14 Dec 2008 06:21:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=HzgAZAm1PJKrfEK0YmKKEmHKF8lz1R9nxBe04VcGRFw=;
        b=j0isYQOFkRpjBQ6L/500XCRWAdkNsgu7kAf7Sf1a08yY9GrcCsT21pY6tRs/wh3mTo
         qc0MZH5jtqMpFtLKkkcAYIGS+N18WzehRC79jIbKWA9SIfhtM9D9D2DDsOUR88RZb+Zs
         kKSntfM5KJIgWCfCmp6sYXKVJFekou2PEoHtA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=Js27nCw+a5fnfzdFLNq/xIs1R+UPHtGdxkxhJ81zFZYy6eY5dcne+QxVyvM2ncAyXj
         I/R5CHLmHf8XZh+i7n4IOuWdKvYxvbzqN5AOJnbasKBjSuh1VbqLY/FxqRPBOttsI7Qw
         USCnUe4tTZdL1q8mWTVt7ls000F4mzubp4bQQ=
Received: by 10.210.51.10 with SMTP id y10mr6588517eby.27.1229264485338;
        Sun, 14 Dec 2008 06:21:25 -0800 (PST)
Received: from ?192.168.1.153? (c80-217-11-210.bredband.comhem.se [80.217.11.210])
        by mx.google.com with ESMTPS id h6sm1737649nfh.70.2008.12.14.06.21.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 14 Dec 2008 06:21:24 -0800 (PST)
Message-Id: <B4B22FB0-53CB-4767-9507-C5BB2AC50BEB@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <42153.11666.qm@web50704.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene - Authentication
Date: Sun, 14 Dec 2008 15:20:23 +0100
References: <1229011161.7448.10.camel@nuraku>  <32a1c320812110848u302dd645h4143205068fe3803@mail.gmail.com>  <1229015253.7448.12.camel@nuraku>  <295da8fe0812110932x3b31380dla64b09f1b09bec88@mail.gmail.com>  <1229018304.7448.24.camel@nuraku>  <295da8fe0812111733n529163a7r6fb51fec4db16299@mail.gmail.com>  <1229085896.26037.0.camel@nuraku>  <49426127.9060902@informatics.jax.org> <1229130748.24089.15.camel@nuraku> <42153.11666.qm@web50704.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


13 dec 2008 kl. 06.05 skrev Aaron Schon:

> Hi , if I have a Lucene index (or Solr) that is installed in client  
> premises. how would you go about securing the index from being  
> queries in unauthorized fashion. For example, from malicious users  
> or hackers, or for that matter "internal" users trying to reengineer  
> the system and use it for purposes other than the way licensed.
>
> any suggestions?

You need to tell us a bit more about your application: what it does,  
what the index contains, what parts you don't want users to access, et  
c.

Could you distribute an index that only contains the data the users  
are allowed to see? If not, why?

My guess is that it will be hard. Anyone could reconstruct the  
documents from the index files. If you came up with some encryption of  
the index then you would have to distribute the key in the source code  
and that could be extracted using a decompiler, even if you  
obusticated the code. An obfusticated index could also be broken using  
decompiler. And if you allow users to place queries and see the  
results then it's probably possible to reconstruct the raw data that  
way.


      karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 14 18:17:35 2008
Return-Path: <java-user-return-37687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69811 invoked from network); 14 Dec 2008 18:17:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2008 18:17:35 -0000
Received: (qmail 86833 invoked by uid 500); 14 Dec 2008 18:17:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86803 invoked by uid 500); 14 Dec 2008 18:17:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86792 invoked by uid 99); 14 Dec 2008 18:17:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Dec 2008 10:17:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.218.14 as permitted sender)
Received: from [209.85.218.14] (HELO mail-bw0-f14.google.com) (209.85.218.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Dec 2008 18:17:20 +0000
Received: by bwz7 with SMTP id 7so4865282bwz.5
        for <java-user@lucene.apache.org>; Sun, 14 Dec 2008 10:16:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=2cyNID+JtPClbm3QTPRjMj++S2cWsYNnybkW3gNj+qc=;
        b=Pl+E5jx6Hn+ml8zTVZAeGOQeqQChCZsuE+0MGaT+3/2ZGaGnOOHn2OYq4cxrYPIg4m
         LFxWQXJC1kHmNgkSUHS4DFYA0NcLs7x30PaE2OEusYn7RcDtQIRFEYVps9eEcv0cw8Lc
         0yNolRy2kzNMnXloCSRE9cZAZeSwX2wIs918M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=yB0WGLLCFjWNP+G5RWE8adXq/3U9tg+LmeYngiFTSjesu6g0LMSrUYsFuavPQXav74
         jQhmep+FEa2zMgkspv30Vjc/PAGXCh5xgtApAMY4KQUvu4AMatV5MCGIeFb7vuhxGwsu
         7cQaNxWSHhcDm+CSjsPE7RlDaUBY8vviq90+M=
Received: by 10.181.141.18 with SMTP id t18mr2194216bkn.203.1229278564950;
        Sun, 14 Dec 2008 10:16:04 -0800 (PST)
Received: by 10.180.210.11 with HTTP; Sun, 14 Dec 2008 10:16:04 -0800 (PST)
Message-ID: <5d53d5770812141016j730ca94n9e2b9a2c73c07ae1@mail.gmail.com>
Date: Sun, 14 Dec 2008 14:16:04 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: All Terms Unique
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29363_26281409.1229278564946"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29363_26281409.1229278564946
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have an index with these terms defined for each document:
language
author
religion

Is there a simple way to get from the index a unique list of all the authors
?

How about all the authors that also have "english" and "baha'i" set?

I'm creating the UI and need 'pickers' for these items.

Thanks!
Ian

------=_Part_29363_26281409.1229278564946--

From java-user-return-37688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 14 21:54:23 2008
Return-Path: <java-user-return-37688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41296 invoked from network); 14 Dec 2008 21:54:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2008 21:54:23 -0000
Received: (qmail 42520 invoked by uid 500); 14 Dec 2008 21:54:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42490 invoked by uid 500); 14 Dec 2008 21:54:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42478 invoked by uid 99); 14 Dec 2008 21:54:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Dec 2008 13:54:27 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Dec 2008 21:54:12 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2775903rvb.5
        for <java-user@lucene.apache.org>; Sun, 14 Dec 2008 13:53:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=1w0+tVtVh85W+JZzbr6xF6o/9FklEI5wNT14gQvGnmk=;
        b=kZBvSSVvQv0x/VlnTS8xQpWy6r1XZaLBedS9G4WwvW4aQ41oKyQ4s+r+HFmVoeTJfv
         5VpQ711f3A6lg8buG+FQX1pIJXbxvz8WBTKe4k9z5gh2+3bpggvcGFzbPLXgoxJih5Yd
         gg7cCoc3E+oCOeiCPIzutJldLHsGFKunU6oDM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FxodtfIQKfxUTKQQMhuVxWwhQSRoU+Cmo/4/SP37uQM0DYCcuuZCHZeiDmoRLeS2E/
         ijhKasm+kCTVBdDHvInK0xmCISljiY9/lHa9Pvh+PSBAST+zBAlmHQvSoChO6klhWnm6
         INLNnk66SWWmK51P0FHweo7j9ldnDy2RWBWAY=
Received: by 10.114.211.1 with SMTP id j1mr4477991wag.176.1229291630565;
        Sun, 14 Dec 2008 13:53:50 -0800 (PST)
Received: by 10.114.124.9 with HTTP; Sun, 14 Dec 2008 13:53:50 -0800 (PST)
Message-ID: <652776090812141353n5f9d86e0j7973b3322cc11d10@mail.gmail.com>
Date: Sun, 14 Dec 2008 13:53:50 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing issue
In-Reply-To: <c68e39170811291111m7f176669je783db634209d021@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_114301_24954434.1229291630562"
References: <652776090811290945o7607b0bbnd99753722c25c79e@mail.gmail.com>
	 <c68e39170811291111m7f176669je783db634209d021@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_114301_24954434.1229291630562
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Sat, Nov 29, 2008 at 11:11 AM, Yonik Seeley <yonik@apache.org> wrote:

> On Sat, Nov 29, 2008 at 12:45 PM, Michael Stoppelman <stopman@gmail.com>
> wrote:
> > Hi all,
> >
> > I've got an indexing issue I think other folks might be interested in
> > hearing about and I wanted to get feedback before I went ahead and
> > implemented a new method.
> >
> > Currently, the way we update indices is by sending individual delete/add
> > document requests to all our search boxes individually. Each box is doing
> > about 20-30qps while this is happening. The problem I'm seeing is that
> when
> > a segment from the index is merged [honestly I don't know that much about
> > segment merging] (our merge factor is set to 5) and an old highly used
> > segment of the index is lost from the disk cache; most of the search
> > requests to that box get prohibitively slow 10-80+ secs and I see pg/in +
> > pg/out stats spike sar.
>
> > I'm planning on implementing a method similar to the
> > SOLR model using the rsync method that Doug Cutting outlined a long time
> ago
> > on this list and forcing the new files into the disk cache using fadvice.
>
> FYI, if you don't actually want to use rsync, Solr has very recently
> implemented this in pure Java.
> But forcing new files into the cache means ejecting currently used
> files from the cache (for queries currently in flight).  Doesn't seem
> any way to really win here if you don't have enough memory to hold the
> critical parts of both indexes.


I found a rsync patch that has a flag that lets you tell the kernel to not
disk cache the new files being copied over (adds the --drop-caches flag).

http://lists.samba.org/archive/rsync/2007-May/017707.html


>
>
> I think Mike pointed out in a recent post that it would be nice to
> advise the kernel not to cache files being written during merging.  In
> Solr, we would want to allow the same thing when copying over new
> segment files during replication.  Unfortunately, I don't think there
> is a way to do this through Java.
>
> -Yonik
>
> > Is there another strategy here? Could I create a merge policy that forces
> > new segments into the disk cache before lucene nukes the old ones?
> >
> > Thanks,
> > M
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_114301_24954434.1229291630562--

From java-user-return-37689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 03:52:23 2008
Return-Path: <java-user-return-37689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76379 invoked from network); 15 Dec 2008 03:52:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 03:52:23 -0000
Received: (qmail 35320 invoked by uid 500); 15 Dec 2008 03:52:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35194 invoked by uid 500); 15 Dec 2008 03:52:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35183 invoked by uid 99); 15 Dec 2008 03:52:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Dec 2008 19:52:28 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zzzhc.starfire@gmail.com designates 209.85.142.187 as permitted sender)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 03:52:13 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1867861tic.11
        for <java-user@lucene.apache.org>; Sun, 14 Dec 2008 19:51:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jzWDYxlV+76uA+OJRNF5CMe0c9RiYs9xc8GereLtkO8=;
        b=PQoR/cTnJAxPjEJah8ffyEeB75sFRvAnTk0iw79f7UYq+jDH0VDx+6AhdCIVOBtBLC
         L/tEXjSm0EnwCvnzrIFBnxaplFzVEFccVMgy9SdgSzgbJxfN6L33ACgsbVOMCaN14V7R
         mzhw4wHLjUfJ8sBLwvzSEy/HmR5W65uoyembQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KULg6jbiZx+E8SMOVE5XV8y7wnCola4WpBuH4BTSYe7hBfdmn0X95gsdbdVXT6sE01
         RyZLmTAKsmv9LGsigyHIS3/Z/7QIt8tdQKcNnlS1gf3slMWOVmi40aeE27ckJ/Cq0rzu
         6sX6Iq0T3DfDwF8rJhB7rgYChsI+rERnr7E2w=
Received: by 10.110.61.18 with SMTP id j18mr9451754tia.49.1229313111188;
        Sun, 14 Dec 2008 19:51:51 -0800 (PST)
Received: by 10.110.16.7 with HTTP; Sun, 14 Dec 2008 19:51:51 -0800 (PST)
Message-ID: <4397aa520812141951t5e6337a7jc98a7f9a9e6dd6f2@mail.gmail.com>
Date: Mon, 15 Dec 2008 11:51:51 +0800
From: "=?GB2312?B?u8azyQ==?=" <zzzhc.starfire@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: All Terms Unique
In-Reply-To: <5d53d5770812141016j730ca94n9e2b9a2c73c07ae1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_98454_10071605.1229313111162"
References: <5d53d5770812141016j730ca94n9e2b9a2c73c07ae1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_98454_10071605.1229313111162
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

try indexReader.termDocs()

On Mon, Dec 15, 2008 at 2:16 AM, Ian Vink <ianvink@gmail.com> wrote:

> I have an index with these terms defined for each document:
> language
> author
> religion
>
> Is there a simple way to get from the index a unique list of all the
> authors
> ?
>
> How about all the authors that also have "english" and "baha'i" set?
>
> I'm creating the UI and need 'pickers' for these items.
>
> Thanks!
> Ian
>

------=_Part_98454_10071605.1229313111162--

From java-user-return-37690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 04:48:13 2008
Return-Path: <java-user-return-37690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88172 invoked from network); 15 Dec 2008 04:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 04:48:10 -0000
Received: (qmail 2823 invoked by uid 500); 15 Dec 2008 04:48:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2788 invoked by uid 500); 15 Dec 2008 04:48:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2776 invoked by uid 99); 15 Dec 2008 04:48:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Dec 2008 20:48:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 04:47:55 +0000
Received: by yw-out-2324.google.com with SMTP id 3so986795ywj.5
        for <java-user@lucene.apache.org>; Sun, 14 Dec 2008 20:47:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=ku3QaUZTdX0kJuSlW/yaNT7EVTXJIxZ2YX3BXyld3tk=;
        b=InILe2Ozp4VTbZ8Fpva8fC4uVgd0IReZRnyC/niwdtVJZQOSGpsmVOnnSNYpeFATcR
         5ObsXsx9yhGpsMXBpMIqnsLoMscU/aUybBDzdvVEgABIj0e2Dk1LgIRadFiN8ztssTSO
         Q82bF7bQ7st4csBgIg2/7LtoBCbRsRpN1VV3U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=vSgTjg1hbinh7AibZnheqfTrJ1fJ9Yp7uXD7mpygxJVD2qz/x5UUFr9uWftUXZiZK2
         Icw1nYqwORXtDMteAAH/zlFY57T9HmdO8znNkxrtMehTuwYjbOTUJ5LDu231CR4ayj8H
         3VR6vxXFMhCnJmU6Dzi/BdyM7VXzwQouDjFoA=
Received: by 10.100.174.13 with SMTP id w13mr4268789ane.141.1229316454843;
        Sun, 14 Dec 2008 20:47:34 -0800 (PST)
Received: by 10.101.68.17 with HTTP; Sun, 14 Dec 2008 20:47:34 -0800 (PST)
Message-ID: <847931a70812142047j345f4c0r8ec25d1059e721fa@mail.gmail.com>
Date: Sun, 14 Dec 2008 21:47:34 -0700
From: "Todd Benge" <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Subject: Payload Question
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I've been reading about payloads because I think we may be able to use
them to solve a problem we're having involving sorts.

>From the API, Payloads are set on Token classes.  During indexing,
Fields are added to Documents so I think I'm missing the connection of
how the payloads are set into the index.

Any help is appreciated.

Thanks,

Todd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 05:16:31 2008
Return-Path: <java-user-return-37691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94897 invoked from network); 15 Dec 2008 05:16:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 05:16:30 -0000
Received: (qmail 20520 invoked by uid 500); 15 Dec 2008 05:16:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20479 invoked by uid 500); 15 Dec 2008 05:16:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20468 invoked by uid 99); 15 Dec 2008 05:16:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 14 Dec 2008 21:16:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [70.158.118.30] (HELO england.pageplanet.com) (70.158.118.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 05:16:15 +0000
Received: from [192.168.1.122] (61.247.251.10) by england.pageplanet.com
 with ESMTP (Eudora Internet Mail Server 3.1.4) for 
 <java-user@lucene.apache.org>;
 Mon, 15 Dec 2008 00:15:58 -0500
Message-ID: <4945E7ED.4070002@tachyontech.net>
Date: Mon, 15 Dec 2008 10:45:25 +0530
From: Prafulla Kiran <prafulla@tachyontech.net>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene Data Structures
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Everybody,

Could someone please explain the actual data structures being used by 
Lucene for storing the postings list in the index. I see a file called 
MultileveSkipListReader and MultiLevelSkipListWriter. Is lucene using 
Multi-level skip lists behind the scenes, for maintaining the index ? I 
want to understand clearly the actual data structure being used by 
lucene for storing the index and postings list, so that I can deduce the 
complexity for reading from that datastructure and decide whether my 
application would scale as per my requirements while using Lucene. So, 
someone please give me some pointers to the data structures being used 
by Lucene .

TIA,
Prafulla

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 10:26:50 2008
Return-Path: <java-user-return-37692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53512 invoked from network); 15 Dec 2008 10:26:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 10:26:49 -0000
Received: (qmail 73340 invoked by uid 500); 15 Dec 2008 10:26:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73308 invoked by uid 500); 15 Dec 2008 10:26:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73168 invoked by uid 99); 15 Dec 2008 10:26:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 02:26:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [91.121.16.47] (HELO ns23917.ovh.net) (91.121.16.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 10:26:39 +0000
Received: (qmail 32624 invoked by uid 508); 15 Dec 2008 10:28:10 -0000
Received: from unknown (HELO ?192.168.1.44?) (88.182.17.109)
  by ns23917.ovh.net with AES256-SHA encrypted SMTP; 15 Dec 2008 10:28:10 -0000
Message-ID: <494630C5.3050004@spotter.com>
Date: Mon, 15 Dec 2008 11:26:13 +0100
From: David Causse <dcausse@spotter.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Payload Question
References: <847931a70812142047j345f4c0r8ec25d1059e721fa@mail.gmail.com>
In-Reply-To: <847931a70812142047j345f4c0r8ec25d1059e721fa@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

After adding fields, those fields are analyzed and this is the step you 
are looking for.
The payloads are stored on each Token, so you need your own Analyzer to 
do so.
just use reusableToken.setPayload(myPayLoad) somewhere, look at already 
existing analyzers.
In our case we use TokenStream and TokenFilters cause we have 
pre-analyzed Tokens.
It's very simple to use, the old api is self-explanatory, but this API 
seems in big move and methods are now deprecated and I couldn't 
understand the new API.

David.

Todd Benge a crit :
> Hi,
>
> I've been reading about payloads because I think we may be able to use
> them to solve a problem we're having involving sorts.
>
> >From the API, Payloads are set on Token classes.  During indexing,
> Fields are added to Documents so I think I'm missing the connection of
> how the payloads are set into the index.
>
> Any help is appreciated.
>
> Thanks,
>
> Todd
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 11:06:42 2008
Return-Path: <java-user-return-37693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65606 invoked from network); 15 Dec 2008 11:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 11:06:40 -0000
Received: (qmail 23855 invoked by uid 500); 15 Dec 2008 11:06:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23826 invoked by uid 500); 15 Dec 2008 11:06:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23815 invoked by uid 99); 15 Dec 2008 11:06:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 03:06:43 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 11:06:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCBH0-0002y3-Hg
	for java-user@lucene.apache.org; Mon, 15 Dec 2008 03:06:02 -0800
Message-ID: <21011945.post@talk.nabble.com>
Date: Mon, 15 Dec 2008 03:06:02 -0800 (PST)
From: Zender00 <danielpenning@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Singleton and Lucene: org.apache.lucene.store.AlreadyClosed
In-Reply-To: <20983056.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: danielpenning@gmx.net
References: <20983056.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I extend my original post:
How is it possible to use lucene in 2 diffent classes / objects, if I dont
want to use static methods/variables?
(one object read/writer, the other is read only)

Kind regards,
D. Penning

Zender00 wrote:
> 
> Hi,
> I tried to implement a singleton pattern for my already working lucene
> object.
> But there is a strange error when I tried to access the instance.
> 
> When my Singleton GetInstance() method is executed for the first time it
> creates a new instance of my lucene object. There are some member
> variables in this object like an IndexWriter and IndexReader. These
> objects are created in the constructor and I can access them directly in
> the constructor successfully.
> GetInstance() now returns this lucene object and I have to execute some
> operations on it. But the IndexWriter seems to be closed meanwhile and I
> got the exception:
> 
> "org.apache.lucene.store.AlreadyClosed    Exception: this IndexWriter is
> closed" when my object tries to writer some documents. 
> 
> How could this happen? Isn't it possible to use lucene with a
> singleton-pattern? 
> 
> Kind regards,
> D. Penning
> 

-- 
View this message in context: http://www.nabble.com/Singleton-and-Lucene%3A-org.apache.lucene.store.AlreadyClosed-tp20983056p21011945.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 12:00:27 2008
Return-Path: <java-user-return-37694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86411 invoked from network); 15 Dec 2008 12:00:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 12:00:26 -0000
Received: (qmail 99738 invoked by uid 500); 15 Dec 2008 12:00:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99702 invoked by uid 500); 15 Dec 2008 12:00:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99691 invoked by uid 99); 15 Dec 2008 12:00:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 04:00:30 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 12:00:08 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by postfix.imss70 (Postfix) with ESMTP id 1D89931A27
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 12:59:45 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 0D90F319F6
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 12:59:45 +0100 (CET)
Received: from bledsoe.dfki.uni-sb.de (bledsoe.dfki.uni-sb.de [134.96.184.151])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id E238E3115E
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 12:59:44 +0100 (CET)
Message-Id: <1C07484A-56A9-4F2E-88E5-B89C3CAAC45B@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <21011945.post@talk.nabble.com>
Content-Type: multipart/signed; boundary=Apple-Mail-38--220402038; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Singleton and Lucene: org.apache.lucene.store.AlreadyClosed
Date: Mon, 15 Dec 2008 12:59:44 +0100
References: <20983056.post@talk.nabble.com> <21011945.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-38--220402038
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable

We use singletons all the time,

Just be careful that are writer and a reader cannot be opened =20
simultaneously on the same index. Either you write or your read (and =20
delete).

paul


Le 15-d=E9c.-08 =E0 12:06, Zender00 a =E9crit :

>
> I extend my original post:
> How is it possible to use lucene in 2 diffent classes / objects, if =20=

> I dont
> want to use static methods/variables?
> (one object read/writer, the other is read only)
>
> Kind regards,
> D. Penning
>
> Zender00 wrote:
>>
>> Hi,
>> I tried to implement a singleton pattern for my already working =20
>> lucene
>> object.
>> But there is a strange error when I tried to access the instance.
>>
>> When my Singleton GetInstance() method is executed for the first =20
>> time it
>> creates a new instance of my lucene object. There are some member
>> variables in this object like an IndexWriter and IndexReader. These
>> objects are created in the constructor and I can access them =20
>> directly in
>> the constructor successfully.
>> GetInstance() now returns this lucene object and I have to execute =20=

>> some
>> operations on it. But the IndexWriter seems to be closed meanwhile =20=

>> and I
>> got the exception:
>>
>> "org.apache.lucene.store.AlreadyClosed    Exception: this =20
>> IndexWriter is
>> closed" when my object tries to writer some documents.
>>
>> How could this happen? Isn't it possible to use lucene with a
>> singleton-pattern?
>>
>> Kind regards,
>> D. Penning
>>
>
> --=20
> View this message in context: =
http://www.nabble.com/Singleton-and-Lucene%3A-org.apache.lucene.store.Alre=
adyClosed-tp20983056p21011945.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


--Apple-Mail-38--220402038
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIFzjCCAocw
ggHwoAMCAQICEHpkMpnMryEmArSVLnJkS28wDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA3MTIxOTE0MzI0NFoXDTA4MTIxODE0MzI0
NFowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMEY+jsbvfvg6uVnITE8Pd4RONXZvqxbynLR
rgmnc5pCsv3UfvWjDZfbkX3Nb2OE4j2HSwY6Uhj2SOjh25ibMg2buR6ubgYXHvCbMngeoA2jDjvb
dloET7Q0hynIMA281OfxTbEZzIlq55/xr0v8yKX3DyOXqnokERhOtay7RaCfAgMBAAGjMDAuMB4G
A1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQUF
AAOBgQB52LXV/dsJaWBm8ScjEEn2/ecdVmKkQvggQFxsMHxCoIV70+OIoLYaJoO15NpdLuN7EPLE
/vBBjoDp2A5KdxBAO8icv4LTOD3btE2oIcCz3SUffQtNTuUvFh9Z9OLGByLNRduw6RVm947pSNBG
G+Qqd5XWQUxGci8HcsOQAOsLXjCCAz8wggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJ
BgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgG
A1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMg
RGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3
DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3
MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9
fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+
uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMB
Af8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3
dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgG
A1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcP
f6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH
2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8x
ggKPMIICiwIBATB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAo
UHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQ
emQymcyvISYCtJUucmRLbzAJBgUrDgMCGgUAoIIBbzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcB
MBwGCSqGSIb3DQEJBTEPFw0wODEyMTUxMTU5NDVaMCMGCSqGSIb3DQEJBDEWBBTfiee2npkqTvRB
F69LoKUo23/l2TCBhQYJKwYBBAGCNxAEMXgwdjBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0ECEHpkMpnMryEmArSVLnJkS28wgYcGCyqGSIb3DQEJEAILMXigdjBiMQsw
CQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UE
AxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEHpkMpnMryEmArSVLnJkS28w
DQYJKoZIhvcNAQEBBQAEgYB75jcshxkrD0wdUMGcL+P927MV3HOxkfCEsuVbiTotBTLKAjE3tjTF
FNsUZx5FKBy1Rw7tg7kIlejlwggzmQi+taF+S5wTx89RzL9UhpWByANJxQ1Fse9bwALnpSc+mKoO
A+Xwjt8oKRXL3ckc3qqdL9oY4S2iVfmtTl+uacAtdwAAAAAAAA==

--Apple-Mail-38--220402038--

From java-user-return-37695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 12:10:23 2008
Return-Path: <java-user-return-37695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89192 invoked from network); 15 Dec 2008 12:10:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 12:10:22 -0000
Received: (qmail 9484 invoked by uid 500); 15 Dec 2008 12:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9452 invoked by uid 500); 15 Dec 2008 12:10:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9441 invoked by uid 99); 15 Dec 2008 12:10:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 04:10:27 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 12:10:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCCGm-0005R8-HS
	for java-user@lucene.apache.org; Mon, 15 Dec 2008 04:09:52 -0800
Message-ID: <21012798.post@talk.nabble.com>
Date: Mon, 15 Dec 2008 04:09:52 -0800 (PST)
From: Zender00 <danielpenning@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Singleton and Lucene: org.apache.lucene.store.AlreadyClosed
In-Reply-To: <1C07484A-56A9-4F2E-88E5-B89C3CAAC45B@activemath.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: danielpenning@gmx.net
References: <20983056.post@talk.nabble.com> <21011945.post@talk.nabble.com> <1C07484A-56A9-4F2E-88E5-B89C3CAAC45B@activemath.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi paul,

in my opinion it is possible to use a reader and writer simultanesously on
the same index. In my already working lucene class, I use they are both ope=
n
all the time.

But this isnt the reason for my exception. It seems that lucene cannot
handle my singleton. How did you implement your singleton with lucene? Whic=
h
lucene version?

Thanks for your reply,
D. Penning


polx wrote:
>=20
> We use singletons all the time,
>=20
> Just be careful that are writer and a reader cannot be opened =20
> simultaneously on the same index. Either you write or your read (and =20
> delete).
>=20
> paul
>=20
>=20
> Le 15-d=C3=A9c.-08 =C3=A0 12:06, Zender00 a =C3=A9crit :
>=20
>>
>> I extend my original post:
>> How is it possible to use lucene in 2 diffent classes / objects, if =20
>> I dont
>> want to use static methods/variables?
>> (one object read/writer, the other is read only)
>>
>> Kind regards,
>> D. Penning
>>
>> Zender00 wrote:
>>>
>>> Hi,
>>> I tried to implement a singleton pattern for my already working =20
>>> lucene
>>> object.
>>> But there is a strange error when I tried to access the instance.
>>>
>>> When my Singleton GetInstance() method is executed for the first =20
>>> time it
>>> creates a new instance of my lucene object. There are some member
>>> variables in this object like an IndexWriter and IndexReader. These
>>> objects are created in the constructor and I can access them =20
>>> directly in
>>> the constructor successfully.
>>> GetInstance() now returns this lucene object and I have to execute =20
>>> some
>>> operations on it. But the IndexWriter seems to be closed meanwhile =20
>>> and I
>>> got the exception:
>>>
>>> "org.apache.lucene.store.AlreadyClosed    Exception: this =20
>>> IndexWriter is
>>> closed" when my object tries to writer some documents.
>>>
>>> How could this happen? Isn't it possible to use lucene with a
>>> singleton-pattern?
>>>
>>> Kind regards,
>>> D. Penning
>>>
>>
>> --=20
>> View this message in context:
>> http://www.nabble.com/Singleton-and-Lucene%3A-org.apache.lucene.store.Al=
readyClosed-tp20983056p21011945.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> =20
>=20

--=20
View this message in context: http://www.nabble.com/Singleton-and-Lucene%3A=
-org.apache.lucene.store.AlreadyClosed-tp20983056p21012798.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 12:18:42 2008
Return-Path: <java-user-return-37696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92300 invoked from network); 15 Dec 2008 12:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 12:18:42 -0000
Received: (qmail 21358 invoked by uid 500); 15 Dec 2008 12:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21322 invoked by uid 500); 15 Dec 2008 12:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21311 invoked by uid 99); 15 Dec 2008 12:18:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 04:18:47 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 12:18:32 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by postfix.imss70 (Postfix) with ESMTP id 9773231A4E
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 13:18:10 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 5089E31A81
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 13:18:10 +0100 (CET)
Received: from bledsoe.dfki.uni-sb.de (bledsoe.dfki.uni-sb.de [134.96.184.151])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 3AC503115E
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 13:18:10 +0100 (CET)
Message-Id: <103C3669-84C1-4620-900C-13964D530606@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <21012798.post@talk.nabble.com>
Content-Type: multipart/signed; boundary=Apple-Mail-39--219296814; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Singleton and Lucene: org.apache.lucene.store.AlreadyClosed
Date: Mon, 15 Dec 2008 13:18:06 +0100
References: <20983056.post@talk.nabble.com> <21011945.post@talk.nabble.com> <1C07484A-56A9-4F2E-88E5-B89C3CAAC45B@activemath.org> <21012798.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-39--219296814
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable




Le 15-d=E9c.-08 =E0 13:09, Zender00 a =E9crit :
> in my opinion it is possible to use a reader and writer =20
> simultanesously on
> the same index. In my already working lucene class, I use they are =20
> both open
> all the time.

mmmh...

> But this isnt the reason for my exception. It seems that lucene cannot
> handle my singleton. How did you implement your singleton with =20
> lucene? Which
> lucene version?

2.3.1, source code APL and GPL at:
   http://svn.activemath.org/intergeo/Platform/SearchI2G/index/

in another project, this was used with Lucene 2.0.

paul

> polx wrote:
>>
>> We use singletons all the time,
>>
>> Just be careful that are writer and a reader cannot be opened
>> simultaneously on the same index. Either you write or your read (and
>> delete).
>>
>> paul
>>
>>
>> Le 15-d=E9c.-08 =E0 12:06, Zender00 a =E9crit :
>>
>>>
>>> I extend my original post:
>>> How is it possible to use lucene in 2 diffent classes / objects, if
>>> I dont
>>> want to use static methods/variables?
>>> (one object read/writer, the other is read only)
>>>
>>> Kind regards,
>>> D. Penning
>>>
>>> Zender00 wrote:
>>>>
>>>> Hi,
>>>> I tried to implement a singleton pattern for my already working
>>>> lucene
>>>> object.
>>>> But there is a strange error when I tried to access the instance.
>>>>
>>>> When my Singleton GetInstance() method is executed for the first
>>>> time it
>>>> creates a new instance of my lucene object. There are some member
>>>> variables in this object like an IndexWriter and IndexReader. These
>>>> objects are created in the constructor and I can access them
>>>> directly in
>>>> the constructor successfully.
>>>> GetInstance() now returns this lucene object and I have to execute
>>>> some
>>>> operations on it. But the IndexWriter seems to be closed meanwhile
>>>> and I
>>>> got the exception:
>>>>
>>>> "org.apache.lucene.store.AlreadyClosed    Exception: this
>>>> IndexWriter is
>>>> closed" when my object tries to writer some documents.
>>>>
>>>> How could this happen? Isn't it possible to use lucene with a
>>>> singleton-pattern?
>>>>
>>>> Kind regards,
>>>> D. Penning
>>>>
>>>
>>> --=20
>>> View this message in context:
>>> =
http://www.nabble.com/Singleton-and-Lucene%3A-org.apache.lucene.store.Alre=
adyClosed-tp20983056p21011945.html
>>> Sent from the Lucene - Java Users mailing list archive at =20
>>> Nabble.com.
>>>
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>>
>
> --=20
> View this message in context: =
http://www.nabble.com/Singleton-and-Lucene%3A-org.apache.lucene.store.Alre=
adyClosed-tp20983056p21012798.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


--Apple-Mail-39--219296814
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIFzjCCAocw
ggHwoAMCAQICEHpkMpnMryEmArSVLnJkS28wDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA3MTIxOTE0MzI0NFoXDTA4MTIxODE0MzI0
NFowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMEY+jsbvfvg6uVnITE8Pd4RONXZvqxbynLR
rgmnc5pCsv3UfvWjDZfbkX3Nb2OE4j2HSwY6Uhj2SOjh25ibMg2buR6ubgYXHvCbMngeoA2jDjvb
dloET7Q0hynIMA281OfxTbEZzIlq55/xr0v8yKX3DyOXqnokERhOtay7RaCfAgMBAAGjMDAuMB4G
A1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQUF
AAOBgQB52LXV/dsJaWBm8ScjEEn2/ecdVmKkQvggQFxsMHxCoIV70+OIoLYaJoO15NpdLuN7EPLE
/vBBjoDp2A5KdxBAO8icv4LTOD3btE2oIcCz3SUffQtNTuUvFh9Z9OLGByLNRduw6RVm947pSNBG
G+Qqd5XWQUxGci8HcsOQAOsLXjCCAz8wggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJ
BgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgG
A1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMg
RGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3
DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3
MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9
fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+
uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMB
Af8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3
dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgG
A1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcP
f6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH
2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8x
ggKPMIICiwIBATB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAo
UHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQ
emQymcyvISYCtJUucmRLbzAJBgUrDgMCGgUAoIIBbzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcB
MBwGCSqGSIb3DQEJBTEPFw0wODEyMTUxMjE4MDZaMCMGCSqGSIb3DQEJBDEWBBR/eh7fylg35F2N
9B1N3d65gge+5zCBhQYJKwYBBAGCNxAEMXgwdjBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0ECEHpkMpnMryEmArSVLnJkS28wgYcGCyqGSIb3DQEJEAILMXigdjBiMQsw
CQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UE
AxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEHpkMpnMryEmArSVLnJkS28w
DQYJKoZIhvcNAQEBBQAEgYC+YUmiL8camBmRBFsk2krYqBTQU1hDxnL5wBH56ypxyUkkIrk5Gn/x
X/aT4mi2hn4yIXvERP35qS8RpukFSQxe9ibLSdzfHKZpVI6EOr4pfdIIJyQCDUsBV5YKRvBKiOr2
TcN5bJoh5jF3R2Qwt6NOihW0UQesWpzXxN+qLmVfkwAAAAAAAA==

--Apple-Mail-39--219296814--

From java-user-return-37697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 13:31:18 2008
Return-Path: <java-user-return-37697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18928 invoked from network); 15 Dec 2008 13:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 13:31:18 -0000
Received: (qmail 94207 invoked by uid 500); 15 Dec 2008 13:31:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94179 invoked by uid 500); 15 Dec 2008 13:31:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94168 invoked by uid 99); 15 Dec 2008 13:31:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 05:31:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 13:31:02 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 49DE57371A
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 05:30:41 -0800 (PST)
Message-Id: <AB8937DF-282F-47F7-827C-4C39F2F323BB@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4945E7ED.4070002@tachyontech.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene Data Structures
Date: Mon, 15 Dec 2008 08:30:40 -0500
References: <4945E7ED.4070002@tachyontech.net>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/2_4_0/fileformats.html

On Dec 15, 2008, at 12:15 AM, Prafulla Kiran wrote:

> Hi Everybody,
>
> Could someone please explain the actual data structures being used  
> by Lucene for storing the postings list in the index. I see a file  
> called MultileveSkipListReader and MultiLevelSkipListWriter. Is  
> lucene using Multi-level skip lists behind the scenes, for  
> maintaining the index ? I want to understand clearly the actual data  
> structure being used by lucene for storing the index and postings  
> list, so that I can deduce the complexity for reading from that  
> datastructure and decide whether my application would scale as per  
> my requirements while using Lucene. So, someone please give me some  
> pointers to the data structures being used by Lucene .
>
> TIA,
> Prafulla
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 14:54:12 2008
Return-Path: <java-user-return-37698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60794 invoked from network); 15 Dec 2008 14:54:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 14:54:11 -0000
Received: (qmail 25881 invoked by uid 500); 15 Dec 2008 14:54:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25852 invoked by uid 500); 15 Dec 2008 14:54:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25815 invoked by uid 99); 15 Dec 2008 14:54:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 06:54:09 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 14:53:47 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCEp5-0003AM-0q
	for java-user@lucene.apache.org; Mon, 15 Dec 2008 06:53:27 -0800
Message-ID: <21015278.post@talk.nabble.com>
Date: Mon, 15 Dec 2008 06:53:27 -0800 (PST)
From: "Matthias W." <Matthias.Wangler@e-projecta.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene SpellChecker returns no suggetions after changing Server
In-Reply-To: <20910159.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Matthias.Wangler@e-projecta.com
References: <20910159.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I fixed this problem by writing an external Java class and changing completly
to Lucene-2.4.0.

The SpellChecker now returns results but it is very slow.

My index contains about 20000 words, I don't think this is too much.

How can I speed it up?

My temporary method:
public static Vector suggest(String query, String indexName, String field,
float accuracy) {
		Vector v = new Vector();
		String[] suggestions = null;
		
		try {
			SpellChecker spellchecker = new SpellChecker(new RAMDirectory()/*, new
JaroWinklerDistance()*/);			
			spellchecker.indexDictionary(new
LuceneDictionary(IndexReader.open(indexName), field));
			spellchecker.setAccuracy(accuracy);			
			suggestions = spellchecker.suggestSimilar(query, 5);
		} catch (Exception e) {}
		
		for(int i = 0; i < suggestions.length; i++) {
			v.add(suggestions[i]);
		}
		
		return v;
}



Matthias W. wrote:
> 
> Hi,
> I'm using Lucene's SpellChecker (Lucene 2.1.0) class to get suggestions.
> Till now my testing server was a VMWare-Image from 
> http://es.cohesiveft.com http://es.cohesiveft.com  (Ubuntu 8.10, Tomcat6,
> Java5).
> Now I'm using a Debian Etch Server with Tomcat5.5 and Java6.
> 
> Code-Sample:
> String indexName = indexLocation;
> String queryString = null;
> queryString = URLDecoder.decode(request.getParameter("q"), "UTF-8"); 
> SpellChecker spellchecker = new
> SpellChecker(FSDirectory.getDirectory(indexName));
> String[] suggestions = spellchecker.suggestSimilar(queryString, 5,
> IndexReader.open(indexName), "content", false);
> for(int i = 0; i < suggestions.length; i++) {
> 	out.println(suggestions[i]);
> }
> 
> This worked fine on the old server, but on my new server this returns
> nothing.
> The index is generated by the nutch crawler, but this shouldn't be the
> problem.
> 
> I've got the lucene-spellchecker-2.1.0.jar in the WEB-INF/lib/ (If I
> remove it, I get the expected errormessage.)
> 
> So I don't know why I neither get results, nor an errormessage.
> 
-- 
View this message in context: http://www.nabble.com/Lucene-SpellChecker-returns-no-suggetions-after-changing-Server-tp20910159p21015278.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 15:41:13 2008
Return-Path: <java-user-return-37699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81938 invoked from network); 15 Dec 2008 15:41:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 15:41:13 -0000
Received: (qmail 89121 invoked by uid 500); 15 Dec 2008 15:41:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89084 invoked by uid 500); 15 Dec 2008 15:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89073 invoked by uid 99); 15 Dec 2008 15:41:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 07:41:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 15:40:56 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mBFFeW8b015211
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 15:40:32 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12322)
    via ESMTP; Mon, 15 Dec 2008 15:40:32 +0000 (GMT)
Date: Mon, 15 Dec 2008 15:40:32 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <49467A70.7090004@scalix.com>
In-Reply-To: <493D4DA7.6000708@gmail.com>
References: <493D105C.2030808@scalix.com>
References: <493D2AE8.9030601@scalix.com>
References: <493D4DA7.6000708@gmail.com>
Subject: Re: Open IndexReader read-only
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0202.49467A70.0196,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Thanks Mark, worked a treat.

Mark Miller wrote:
> Chris Bamford wrote:
>> Mark
>>
>> > Look for the static factory methods on IndexReader.
>>
>> I take it you mean IndexReader.open (dir, true) ?
>
> Yeah.
>
>> If so, how do I then pass that into DelayCloseIndexSearcher() so that 
>> I can continue to rely on all the existing calls like:
>>
>> IndexReader reader = contentSearcher.getIndexReader();
>>
>> Put another way, how do I associate the static IndexReader with an 
>> IndexSearcher object so I can use getIndexReader() to get it again?
> Find where that contentSearcher is being created. Use a different 
> constructor to create the Searcher - use the one that takes an 
> IndexReader. Now you control the IndexReader creation, and you can use 
> the readonly constructor option when you create it. That Searcher is 
> either using a constructor that takes an IndexReader, or a Directory, 
> or a String. If its using a String constructor, instead, use the 
> Directory factory that takes a String, make a Directory, and use it to 
> make an IndexReader that you build the IndexSearcher with. If its 
> using a Directory, use that directory to make the IndexReader that is 
> used for you IndexSearcher.
>
>>
>> Thanks for your continued help with this :-)
>>
>> Chris
>>
>> Mark Miller wrote:
>>> Look for the static factory methods on IndexReader.
>>>
>>> - Mark
>>>
>>> Chris Bamford wrote:
>>>> Thanks Mark.
>>>>
>>>> I have identified the spot where I need to do the surgery. However, 
>>>> I discover that IndexReader is abstract, but it seems crazy that I 
>>>> need to make a concrete class for which I have no need to add any 
>>>> of my own logic... Is there a suitable subclass I can use? The 
>>>> documented ones - FilterIndexReader, InstantiatedIndexReader, 
>>>> MultiReader, ParallelReader - all seem too complicated for what I 
>>>> need. My only requirement is to open it read-only!
>>>>
>>>> Am I missing something?
>>>>
>>>> Mark Miller wrote:
>>>>> Chris Bamford wrote:
>>>>>>
>>>>>> So does that mean if you don't explicitly open an IndexReader, 
>>>>>> the IndexSearcher will do it for you? Or what?
>>>>>>
>>>>> Right. The IndexReader takes a Directory, and the IndexSearcher 
>>>>> takes an IndexReader - there are sugar constructors though - An 
>>>>> IndexSearcher will also accept a String file path, which will be 
>>>>> used to create a Directory which is used to create an IndexReader. 
>>>>> It will also take a Directory, which will be used to create an 
>>>>> IndexReader. It will also just accept the IndexReader.
>>>>>
>>>>> So you have to find how that IndexReader is being created (or 
>>>>> where) and change the code so that you get to create it, and when 
>>>>> you do, do it read-only. It should be easier than that roundabout 
>>>>> info sounds.
>>>>>
>>>>> - Mark
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


-- 
Chris Bamford
Senior Development Engineer
*Scalix*
chris.bamford@scalix.com
Tel: +44 (0)1344 381814
www.scalix.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 15:44:27 2008
Return-Path: <java-user-return-37700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84394 invoked from network); 15 Dec 2008 15:44:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 15:44:27 -0000
Received: (qmail 97181 invoked by uid 500); 15 Dec 2008 15:44:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97151 invoked by uid 500); 15 Dec 2008 15:44:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97140 invoked by uid 99); 15 Dec 2008 15:44:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 07:44:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 15:44:12 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1065760ywj.5
        for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 07:43:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SUjQuUVibVVQ7wH9fVzFeombfVfuxpGQZdGaNvx1WuU=;
        b=mwiLU6HJ5PztURMFf3UsI0ZvAWyyiOwrBJFJFfIitDOhxQnJpGSR8LHsMSZtUlcCH8
         4Fo3f5NbK8ti+x/BJvEhD4/2+mwmQRnMQD7FkBDHr1Qf6byeGm9289NfWWExTEM+FURa
         0KRdmUIyrzdo9+7bjeX+zJFmHe8k9lRKE1IjU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=kbV+xsi2VS7VJ7/lNSIKB4l07fjBvhDiRKuhzBBla/IAhHtGRbVTP7UIbQQxfnAafL
         7DxP9/78a471x5MRXBZB2VZGGaor0f0iibMoxjQJAB8JAUmmfGQsOLelF4xAsApjsFWE
         31HIfO39+PQ+4RPweondLZd3jwwi3ltSOj4uY=
Received: by 10.101.1.11 with SMTP id d11mr4572940ani.113.1229355831406;
        Mon, 15 Dec 2008 07:43:51 -0800 (PST)
Received: by 10.100.43.6 with HTTP; Mon, 15 Dec 2008 07:43:51 -0800 (PST)
Message-ID: <b63a7e9e0812150743j26ecc9dfw42eb9fb4dca32d91@mail.gmail.com>
Date: Mon, 15 Dec 2008 10:43:51 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payload Question
In-Reply-To: <847931a70812142047j345f4c0r8ec25d1059e721fa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22825_29703702.1229355831422"
References: <847931a70812142047j345f4c0r8ec25d1059e721fa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22825_29703702.1229355831422
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Todd,

If you look for a thread I started a month or two ago, there was a pretty
good discussion of payloads (it is where I initially learned about them).
In that thread should also be an explanation of the solution I ended up
using for implementing payloads, so maybe that would be helpful for you.

- Greg

On Sun, Dec 14, 2008 at 11:47 PM, Todd Benge <todd.benge@gmail.com> wrote:

> Hi,
>
> I've been reading about payloads because I think we may be able to use
> them to solve a problem we're having involving sorts.
>
> From the API, Payloads are set on Token classes.  During indexing,
> Fields are added to Documents so I think I'm missing the connection of
> how the payloads are set into the index.
>
> Any help is appreciated.
>
> Thanks,
>
> Todd
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22825_29703702.1229355831422--

From java-user-return-37701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 16:34:01 2008
Return-Path: <java-user-return-37701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3965 invoked from network); 15 Dec 2008 16:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 16:34:01 -0000
Received: (qmail 72763 invoked by uid 500); 15 Dec 2008 16:34:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72287 invoked by uid 500); 15 Dec 2008 16:34:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72276 invoked by uid 99); 15 Dec 2008 16:34:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 08:34:06 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 16:33:46 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mBFGXMCL009960
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 16:33:22 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12322)
    via ESMTP; Mon, 15 Dec 2008 16:33:22 +0000 (GMT)
Date: Mon, 15 Dec 2008 16:33:21 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <494686D1.1030601@scalix.com>
In-Reply-To: <3969B21A-4281-4DD2-AB2B-252D6CFDDC4D@apache.org>
References: <e7dd79a40812090227p56da3c2bh6fbaf0d27cc109b3@mail.gmail.com>
References: <8837fb770812091717s7e0004cr3c12815bba4a7008@mail.gmail.com>
References: <e7dd79a40812091902u4748460ref908480598a9918@mail.gmail.com>
References: <3969B21A-4281-4DD2-AB2B-252D6CFDDC4D@apache.org>
Subject: searching in 2 indexes
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0205.494686D2.0109,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="------------020700020001010800020400"
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.5

--------------020700020001010800020400
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline

Hi

I have a situation where I have two related indexes which are logically 
linked by a common field called INDEXID. All other fields differ between 
the two indexes. For any given INDEXID I would like to be able to 
retrieve the matching pair of documents, one from each index. (Logically 
this is an AND /i.e. /only return anything if there is a document with 
INDEXID /X/ in index A *and* in index B.)

Is there a nifty way to do this with a single query or must I first 
search one, then the other?
I thought perhaps MultiSearcher might do it, but now I'm not so sure ...

Thanks...

- Chris

--------------020700020001010800020400--

From java-user-return-37702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 16:47:16 2008
Return-Path: <java-user-return-37702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8706 invoked from network); 15 Dec 2008 16:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 16:47:16 -0000
Received: (qmail 89734 invoked by uid 500); 15 Dec 2008 16:47:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89703 invoked by uid 500); 15 Dec 2008 16:47:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89692 invoked by uid 99); 15 Dec 2008 16:47:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 08:47:20 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 16:47:06 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1237102fgb.27
        for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 08:46:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=s/3gQ8znXqWvTgQZ93kKqBF+Igx1Lw1U1WLgZ2sxxb0=;
        b=MrwFCPIJsX4b8bw2sX/VrIXktI85jSLrplI6kzOnMTJp8WNOiwSuMQUnae3C3EkLpi
         xOFrAT2EzVjEzE5/82pEB3G43T1+hsFJCc167llsOEGmEC4tm4SSAZst28DfUSDCSPHv
         8Y5Lsk1dH1GZC0BNZd+ypLZrMCNpSiT5tyJ4o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gjD8wexMUKZNtr5djdu60Us6zt1VaK+Ti41yeGvelAI/MeZxLBzLFcLF1STAdt60Hg
         AnFRZr8BxgLqjOClnwZhs4/kkAT43ZZBHEFL4jmUn75c7+31HTx+MUztzfDVa0tvuv3h
         JJYR6ZgfOyFh7c4fvVLw6eG4HM81D8XGnoFYM=
Received: by 10.86.68.2 with SMTP id q2mr3969409fga.68.1229359606009;
        Mon, 15 Dec 2008 08:46:46 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Mon, 15 Dec 2008 08:46:45 -0800 (PST)
Message-ID: <359a92830812150846h6a4efcb6q412244a34f20fbb3@mail.gmail.com>
Date: Mon, 15 Dec 2008 11:46:45 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching in 2 indexes
In-Reply-To: <494686D1.1030601@scalix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48974_10557473.1229359605986"
References: <3969B21A-4281-4DD2-AB2B-252D6CFDDC4D@apache.org>
	 <494686D1.1030601@scalix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48974_10557473.1229359605986
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Stop it right now <G>. You've gotta take off your DB hat and put
on your searching hat to get the most out of Lucene. So I'd
think about the following:

1> Why do you have two indexes? Why not just put all
     the data into a single index? The fields are disjoint anyway....
     Note that there is no requirement that all documents in an
     index have the same fields either, if that makes things easier....

2> Disk space is cheap. Very cheap. I know it goes against the
     grain to de-normalize your data, but think about doing just that.
     The idea is to be able to submit a single *search* where
     each document returned is complete rather than thinking in
     terms of joins etc....

3> Storing and indexing are two separate concepts. Your index (at
     least the searchable part) won't grow if you store (but don't index)
     lots of data. So if you need to pile a bunch of junk into your records
     but *not* search them, having a humongous index where most
     of it is simply stored isn't nearly as costly as you might think.

4> Some of this depends upon how much data you're talking about. If
     both indexes total 10M, there's no reason in the world to keep them
     separate. If they total 100G, that's another story. Some more
     details would be helpful.

5> I almost guarantee that if you've merely translated database tables
     into Lucene indexes on a one-for-one basis, you won't be very
     satisfied with the results........

Best
Erick

On Mon, Dec 15, 2008 at 11:33 AM, Chris Bamford <chris.bamford@scalix.com>wrote:

> Hi
>
> I have a situation where I have two related indexes which are logically
> linked by a common field called INDEXID. All other fields differ between the
> two indexes. For any given INDEXID I would like to be able to retrieve the
> matching pair of documents, one from each index. (Logically this is an AND
> /i.e. /only return anything if there is a document with INDEXID /X/ in index
> A *and* in index B.)
>
> Is there a nifty way to do this with a single query or must I first search
> one, then the other?
> I thought perhaps MultiSearcher might do it, but now I'm not so sure ...
>
> Thanks...
>
> - Chris
>

------=_Part_48974_10557473.1229359605986--

From java-user-return-37703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 17:02:51 2008
Return-Path: <java-user-return-37703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17170 invoked from network); 15 Dec 2008 17:02:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 17:02:50 -0000
Received: (qmail 8626 invoked by uid 500); 15 Dec 2008 17:02:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8600 invoked by uid 500); 15 Dec 2008 17:02:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8589 invoked by uid 99); 15 Dec 2008 17:02:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 09:02:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of todd.benge@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 17:02:41 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1084961ywj.5
        for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 09:02:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=hVWWLsAAu76JsAhetZZXPacHRVOc+hRD4eaeGu0X0Z4=;
        b=PxGozq0suz+yVIN60jYY2mTNSOozlFUI2ftCu+a3lr14XzMmWS4bpY49uZHzBFOVl/
         6ghfBzXRHJBI0xYu2iqH4F+mSbCOJGzW0wacV8kTmDqmjVPr1gY98V5/w7G39/4LqJI6
         n1p5PBZSj5avbHYghCR5NmjujlIx2qdJ19wFw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=A9xcsAmx2t9nk+OHBIVNzgEeoRS7KdPpAqvG6Qy9R/PsOdfYWuhQCiOvJ2nPrPCq/g
         50ygRkkD4TyPdzEFI6SIA6Jh3nzztmA0ml1kVBa71rKRAPA88DI5GjgfyqFH/8cjlnGJ
         O95b1c0AaHZ/flDRQucxOFeVCvdnsbdn5lcBU=
Received: by 10.100.152.19 with SMTP id z19mr4713745and.45.1229360540091;
        Mon, 15 Dec 2008 09:02:20 -0800 (PST)
Received: by 10.101.68.17 with HTTP; Mon, 15 Dec 2008 09:02:20 -0800 (PST)
Message-ID: <847931a70812150902n332be712ke5f1cf9c70f25e8e@mail.gmail.com>
Date: Mon, 15 Dec 2008 10:02:20 -0700
From: "Todd Benge" <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payload Question
In-Reply-To: <b63a7e9e0812150743j26ecc9dfw42eb9fb4dca32d91@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <847931a70812142047j345f4c0r8ec25d1059e721fa@mail.gmail.com>
	 <b63a7e9e0812150743j26ecc9dfw42eb9fb4dca32d91@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the help.  I've been reading through some of the postings
so I'll look that one up.

Appreciate it.

Todd

On Mon, Dec 15, 2008 at 8:43 AM, Greg Shackles <gshackles@gmail.com> wrote:
> Hey Todd,
>
> If you look for a thread I started a month or two ago, there was a pretty
> good discussion of payloads (it is where I initially learned about them).
> In that thread should also be an explanation of the solution I ended up
> using for implementing payloads, so maybe that would be helpful for you.
>
> - Greg
>
> On Sun, Dec 14, 2008 at 11:47 PM, Todd Benge <todd.benge@gmail.com> wrote:
>
>> Hi,
>>
>> I've been reading about payloads because I think we may be able to use
>> them to solve a problem we're having involving sorts.
>>
>> From the API, Payloads are set on Token classes.  During indexing,
>> Fields are added to Documents so I think I'm missing the connection of
>> how the payloads are set into the index.
>>
>> Any help is appreciated.
>>
>> Thanks,
>>
>> Todd
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 17:44:53 2008
Return-Path: <java-user-return-37704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45651 invoked from network); 15 Dec 2008 17:44:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 17:44:53 -0000
Received: (qmail 60387 invoked by uid 500); 15 Dec 2008 17:44:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60356 invoked by uid 500); 15 Dec 2008 17:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60345 invoked by uid 99); 15 Dec 2008 17:44:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 09:44:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 17:44:36 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mBFHi9YK002584
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 17:44:09 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12322)
    via ESMTP; Mon, 15 Dec 2008 17:44:08 +0000 (GMT)
Date: Mon, 15 Dec 2008 17:44:08 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <49469768.6030007@scalix.com>
In-Reply-To: <359a92830812150846h6a4efcb6q412244a34f20fbb3@mail.gmail.com>
References: <3969B21A-4281-4DD2-AB2B-252D6CFDDC4D@apache.org>
References: <494686D1.1030601@scalix.com>
References: <359a92830812150846h6a4efcb6q412244a34f20fbb3@mail.gmail.com>
Subject: Re: searching in 2 indexes
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0207.49469768.033B,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Hi Erick,

You raise some excellent points. First let me explain why our structure 
is the way it is ..

There is not actually a strict 1-1 relationship between entries in the 
two indexes. One represents content, the other, references.
There can only ever be 1 content item, but there can be several 
references to it (think: symlinks to a file).
So if a content item has 2 references to it, my search needs to return 2 
hits - 1 per reference with matching content.

You've really got me thinking, especially your point (1) about putting 
different shaped data into the same index. We could presumably then 
combine the content and ref indexes into one and improve performance ....?

Regarding size of indexes, it varies per user, but the largest example I 
can find is:

Ref Index: 24Mb
Content Index: 193Mb

Most users are way smaller than that, though..

One question (thinking ahead now): how to differentiate between content 
and reference hits if they are retrieved from the same index? Presumably 
I will need to try to retrieve a field which only exists in one and if 
it fails, I know it must be of the other type?

- Chris

Erick Erickson wrote:
> Stop it right now <G>. You've gotta take off your DB hat and put
> on your searching hat to get the most out of Lucene. So I'd
> think about the following:
>
> 1> Why do you have two indexes? Why not just put all
>      the data into a single index? The fields are disjoint anyway....
>      Note that there is no requirement that all documents in an
>      index have the same fields either, if that makes things easier....
>
> 2> Disk space is cheap. Very cheap. I know it goes against the
>      grain to de-normalize your data, but think about doing just that.
>      The idea is to be able to submit a single *search* where
>      each document returned is complete rather than thinking in
>      terms of joins etc....
>
> 3> Storing and indexing are two separate concepts. Your index (at
>      least the searchable part) won't grow if you store (but don't index)
>      lots of data. So if you need to pile a bunch of junk into your records
>      but *not* search them, having a humongous index where most
>      of it is simply stored isn't nearly as costly as you might think.
>
> 4> Some of this depends upon how much data you're talking about. If
>      both indexes total 10M, there's no reason in the world to keep them
>      separate. If they total 100G, that's another story. Some more
>      details would be helpful.
>
> 5> I almost guarantee that if you've merely translated database tables
>      into Lucene indexes on a one-for-one basis, you won't be very
>      satisfied with the results........
>
> Best
> Erick
>
> On Mon, Dec 15, 2008 at 11:33 AM, Chris Bamford <chris.bamford@scalix.com>wrote:
>
>   
>> Hi
>>
>> I have a situation where I have two related indexes which are logically
>> linked by a common field called INDEXID. All other fields differ between the
>> two indexes. For any given INDEXID I would like to be able to retrieve the
>> matching pair of documents, one from each index. (Logically this is an AND
>> /i.e. /only return anything if there is a document with INDEXID /X/ in index
>> A *and* in index B.)
>>
>> Is there a nifty way to do this with a single query or must I first search
>> one, then the other?
>> I thought perhaps MultiSearcher might do it, but now I'm not so sure ...
>>
>> Thanks...
>>
>> - Chris
>>
>>     


-- 
Chris Bamford
Senior Development Engineer
*Scalix*
chris.bamford@scalix.com
Tel: +44 (0)1344 381814
www.scalix.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 18:01:04 2008
Return-Path: <java-user-return-37705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54976 invoked from network); 15 Dec 2008 18:01:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 18:01:04 -0000
Received: (qmail 77146 invoked by uid 500); 15 Dec 2008 18:01:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77115 invoked by uid 500); 15 Dec 2008 18:01:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77104 invoked by uid 99); 15 Dec 2008 18:01:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 10:01:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 18:00:55 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3079930EFC17; Mon, 15 Dec 2008 11:00:34 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (unknown [138.210.10.225])
	by ehatchersolutions.com (Postfix) with ESMTP id 2BCAA30EFC16
	for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 11:00:33 -0700 (MST)
Message-Id: <BB92D863-8747-4169-B055-FCD1D1F425E3@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <49469768.6030007@scalix.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: searching in 2 indexes
Date: Mon, 15 Dec 2008 13:00:31 -0500
References: <3969B21A-4281-4DD2-AB2B-252D6CFDDC4D@apache.org> <49469768.6030007@scalix.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Dec 15, 2008, at 12:44 PM, Chris Bamford wrote:
> One question (thinking ahead now): how to differentiate between  
> content and reference hits if they are retrieved from the same  
> index? Presumably I will need to try to retrieve a field which only  
> exists in one and if it fails, I know it must be of the other type?

Simply have a type field on all documents that is assigned one of two  
string (non-tokenized) values: content and reference.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 18:12:58 2008
Return-Path: <java-user-return-37706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63984 invoked from network); 15 Dec 2008 18:12:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 18:12:57 -0000
Received: (qmail 90457 invoked by uid 500); 15 Dec 2008 18:13:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90280 invoked by uid 500); 15 Dec 2008 18:13:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90266 invoked by uid 99); 15 Dec 2008 18:13:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 10:13:02 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 18:12:40 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1257229fgb.27
        for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 10:12:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=E5mXb0Vs7c9kCqsB4ElPRGq9fJ+oW3wSS3xIJ7T4EBQ=;
        b=eiJn73j2/ZtgIjr55xMW26VM/F0mbG2/Z3YyHoq/gvQ3nimCrOpb3Y1hKM8KJzlABf
         XfxPEKWv0UEs0QIqwVFHm25kVg0UIK1tTqVRZKOXZwBC2EvP9pztNDGJcRWxM0kipIFe
         my55upuEK3+gxMbTNniLFMunGl2ktn6eFnZbE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jMjrYPGwhhTpaKQWtQesUbv+TQSpbwuJJar6gbtxT3CvjIHhIn24GSo7DfI5oh05ij
         /0l2/w4OP/43bRwzS+UrBY7ieP6iBazfzv8VQ8Q92QXxcnaYgTVcSK7y4njDd3eX4XdQ
         5blzGr5P5MemVb6xcux/rGa5viOEV2/lRg/1M=
Received: by 10.86.50.6 with SMTP id x6mr3967687fgx.71.1229364739047;
        Mon, 15 Dec 2008 10:12:19 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Mon, 15 Dec 2008 10:12:18 -0800 (PST)
Message-ID: <359a92830812151012x5ccf8861r8e56ce1021be6674@mail.gmail.com>
Date: Mon, 15 Dec 2008 13:12:18 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching in 2 indexes
In-Reply-To: <49469768.6030007@scalix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50943_28166489.1229364739042"
References: <359a92830812150846h6a4efcb6q412244a34f20fbb3@mail.gmail.com>
	 <49469768.6030007@scalix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50943_28166489.1229364739042
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is where things get exciting, when theory runs right up
against the particular problem at hand...

What if your document consisted of a content field (perhaps broken
into as many pieces as necessary) and multiple references?
Something like:

Document doc = new Document()
doc.add("content", .....)
doc.add("reference", ref1)
doc.add("reference", ref2)
writer.addDocument(doc).

Your "reference" field can still be searchable, but you have to
give some thought to the analyzers you use, depending upon
how you want to search it (or not, depending upon your
requirements).

Document.getValues("reference") will return an array of entries
corresponding
to each call to doc.add("reference", ....) in the original.

Note that when you index AND store a value, the value is "split". That
is, the data is analyzed and indexed for searching, AND stored verbatim
without any analysis..... These are orthogonal operations for all that they
can both be specified at once.


At < 200M, there's no real need to skimp for space unless you have an
index per user and want to keep many of them open at once. Which also
begs the question whether it would be better to put them all together in
one index and include  "user" field for each doc. But that's largely a
tuning question for later....

Best
Erick

On Mon, Dec 15, 2008 at 12:44 PM, Chris Bamford <chris.bamford@scalix.com>wrote:

> Hi Erick,
>
> You raise some excellent points. First let me explain why our structure is
> the way it is ..
>
> There is not actually a strict 1-1 relationship between entries in the two
> indexes. One represents content, the other, references.
> There can only ever be 1 content item, but there can be several references
> to it (think: symlinks to a file).
> So if a content item has 2 references to it, my search needs to return 2
> hits - 1 per reference with matching content.
>
> You've really got me thinking, especially your point (1) about putting
> different shaped data into the same index. We could presumably then combine
> the content and ref indexes into one and improve performance ....?
>
> Regarding size of indexes, it varies per user, but the largest example I
> can find is:
>
> Ref Index: 24Mb
> Content Index: 193Mb
>
> Most users are way smaller than that, though..
>
> One question (thinking ahead now): how to differentiate between content and
> reference hits if they are retrieved from the same index? Presumably I will
> need to try to retrieve a field which only exists in one and if it fails, I
> know it must be of the other type?
>
> - Chris
>
>
> Erick Erickson wrote:
>
>> Stop it right now <G>. You've gotta take off your DB hat and put
>> on your searching hat to get the most out of Lucene. So I'd
>> think about the following:
>>
>> 1> Why do you have two indexes? Why not just put all
>>     the data into a single index? The fields are disjoint anyway....
>>     Note that there is no requirement that all documents in an
>>     index have the same fields either, if that makes things easier....
>>
>> 2> Disk space is cheap. Very cheap. I know it goes against the
>>     grain to de-normalize your data, but think about doing just that.
>>     The idea is to be able to submit a single *search* where
>>     each document returned is complete rather than thinking in
>>     terms of joins etc....
>>
>> 3> Storing and indexing are two separate concepts. Your index (at
>>     least the searchable part) won't grow if you store (but don't index)
>>     lots of data. So if you need to pile a bunch of junk into your records
>>     but *not* search them, having a humongous index where most
>>     of it is simply stored isn't nearly as costly as you might think.
>>
>> 4> Some of this depends upon how much data you're talking about. If
>>     both indexes total 10M, there's no reason in the world to keep them
>>     separate. If they total 100G, that's another story. Some more
>>     details would be helpful.
>>
>> 5> I almost guarantee that if you've merely translated database tables
>>     into Lucene indexes on a one-for-one basis, you won't be very
>>     satisfied with the results........
>>
>> Best
>> Erick
>>
>> On Mon, Dec 15, 2008 at 11:33 AM, Chris Bamford <chris.bamford@scalix.com
>> >wrote:
>>
>>
>>
>>> Hi
>>>
>>> I have a situation where I have two related indexes which are logically
>>> linked by a common field called INDEXID. All other fields differ between
>>> the
>>> two indexes. For any given INDEXID I would like to be able to retrieve
>>> the
>>> matching pair of documents, one from each index. (Logically this is an
>>> AND
>>> /i.e. /only return anything if there is a document with INDEXID /X/ in
>>> index
>>> A *and* in index B.)
>>>
>>> Is there a nifty way to do this with a single query or must I first
>>> search
>>> one, then the other?
>>> I thought perhaps MultiSearcher might do it, but now I'm not so sure ...
>>>
>>> Thanks...
>>>
>>> - Chris
>>>
>>>
>>>
>>
>
> --
> Chris Bamford
> Senior Development Engineer
> *Scalix*
> chris.bamford@scalix.com
> Tel: +44 (0)1344 381814
> www.scalix.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_50943_28166489.1229364739042--

From java-user-return-37707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 18:29:33 2008
Return-Path: <java-user-return-37707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78398 invoked from network); 15 Dec 2008 18:29:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 18:29:32 -0000
Received: (qmail 19465 invoked by uid 500); 15 Dec 2008 18:29:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19431 invoked by uid 500); 15 Dec 2008 18:29:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19420 invoked by uid 99); 15 Dec 2008 18:29:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 10:29:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 18:29:18 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1104608yxj.5
        for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 10:28:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=VSNdxqr2DzhtwKQGS3ks8VfxefqFGw5XMPg8NOZqxkw=;
        b=vYNUzbMzrvYxSxJ8uLhtaQexRFRa1dhLPa8euUDTWSzMVrty3YBwBSjoeL4WMqjE+S
         cUwOXbD/DGJ4RZOspIXv6NyWlr4q/fXQOUy8pCbjtYfY5botImJzSf4orAsk1ICtfA4J
         Q6w0DHkLC2CqLwvOXx1nY2MVuzBfdqwnG/ZM8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=EW3ELrf33Suc4HvsXnSuJF7EMo+vdVPbVvXJ//0RWNdYPNt7tec8RlBufJFYYodKSz
         uJQxfU+sNKLKnEf+M1R9dZi7PcVuTfs8NWrgnkNpRrCqBL9qK3/P8nqwpoIKGaiMOT5h
         Z1s/eXX3AE9/VgTYAtQ7nBvFN2si/ULyx/WbU=
Received: by 10.143.4.11 with SMTP id g11mr1319434wfi.340.1229365737201;
        Mon, 15 Dec 2008 10:28:57 -0800 (PST)
Received: by 10.142.153.4 with HTTP; Mon, 15 Dec 2008 10:28:57 -0800 (PST)
Message-ID: <f071061b0812151028v58715748uec0f877cd58c348d@mail.gmail.com>
Date: Mon, 15 Dec 2008 19:28:57 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: process dies with OOM after processing 10k docs
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am having a memory issue with Lucene2.4. I am strating a process
with 128MB of ram, this process handles incoming request from others,
and indexes objects in a number of lucene indexes.

My lucene docs, all have 6 fields:
-one is small: Field.Store.YES, Field.Index.UN_TOKENIZED, Field.TermVector.YES
-rest are:  Field.Store.YES, Field.Index.UN_TOKENIZED,
Field.TermVector.NO, two of them can be quite large.

I set field.setOmitNorms(true); for all fields.
And I also set writer.setRAMBufferSizeMB(30);

I have archived around 10k lucene docs, they are evenly distritubed in
around 100 indexes. I keep a cache of max 60 indexes open, when a new
one has to be open for writing, another one is closed.
I have started the process with -XX:+HeapDumpOnOutOfMemoryError so I
get a hprof file dumped when I get an OOM.

I open the hprof file with visualvm and I can see the following:
class                                                  instances           size
FreqProxTermsWriter$PostingList         572672              20616192
String                                                  186154
      4467698
char[]                                                  184689
     30216520

In the indexes directories, there are lock files left, as the process
dies with the OOM, there are not prx files, but there are frq files (I
cannot be sure 100% about that last one but I think so, I dont have
access to the server now).

I also add each doc into a MemoryIndex, and run a number of
 memoryindex.search(lucBooleanQuery);
I dont close these MemoryIndex or anything, they just go out of scope,
I thought that would be enough to dispose of them.

Obviously something in my code is wrong, does someone see anything
suspicious here? Any idea where should I be begin looking in my code?

thanks a lot
javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 15 22:07:23 2008
Return-Path: <java-user-return-37708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14617 invoked from network); 15 Dec 2008 22:07:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2008 22:07:23 -0000
Received: (qmail 74067 invoked by uid 500); 15 Dec 2008 22:07:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74044 invoked by uid 500); 15 Dec 2008 22:07:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74033 invoked by uid 99); 15 Dec 2008 22:07:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 14:07:28 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 22:07:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCLaQ-000591-IB
	for java-user@lucene.apache.org; Mon, 15 Dec 2008 14:06:46 -0800
Message-ID: <21022920.post@talk.nabble.com>
Date: Mon, 15 Dec 2008 14:06:46 -0800 (PST)
From: Zender00 <danielpenning@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Singleton and Lucene: org.apache.lucene.store.AlreadyClosed
In-Reply-To: <103C3669-84C1-4620-900C-13964D530606@activemath.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: danielpenning@gmx.net
References: <20983056.post@talk.nabble.com> <21011945.post@talk.nabble.com> <1C07484A-56A9-4F2E-88E5-B89C3CAAC45B@activemath.org> <21012798.post@talk.nabble.com> <103C3669-84C1-4620-900C-13964D530606@activemath.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Paul,
thanks for your reply.

I compared your source code and it seems that you are using the same
mechanism for the singleton like me... I am using lucene 2.4 and get the
exception above explained.
I am wondering why because I only create an instance of my lucene object
(which itself constructs an IndexReader/IndexWriter in its constructor) and
return this instance to objects which want to execute some lucene
operations. So I only applied the singleton-pattern.
I am still wondering why these pattern results in my exception. Why could i=
t
happen, that these Streams (IndexWriter/IndexReader) close itself. In my
opinion it is completely legal to do so.

Any other suggestions?



polx wrote:
>=20
>=20
> Le 15-d=C3=A9c.-08 =C3=A0 13:09, Zender00 a =C3=A9crit :
>> in my opinion it is possible to use a reader and writer =20
>> simultanesously on
>> the same index. In my already working lucene class, I use they are =20
>> both open
>> all the time.
>=20
> mmmh...
>=20
>> But this isnt the reason for my exception. It seems that lucene cannot
>> handle my singleton. How did you implement your singleton with =20
>> lucene? Which
>> lucene version?
>=20
> 2.3.1, source code APL and GPL at:
>    http://svn.activemath.org/intergeo/Platform/SearchI2G/index/
>=20
> in another project, this was used with Lucene 2.0.
>=20
> paul
>=20
>> polx wrote:
>>>
>>> We use singletons all the time,
>>>
>>> Just be careful that are writer and a reader cannot be opened
>>> simultaneously on the same index. Either you write or your read (and
>>> delete).
>>>
>>> paul
>>>
>>>
>>> Le 15-d=C3=A9c.-08 =C3=A0 12:06, Zender00 a =C3=A9crit :
>>>
>>>>
>>>> I extend my original post:
>>>> How is it possible to use lucene in 2 diffent classes / objects, if
>>>> I dont
>>>> want to use static methods/variables?
>>>> (one object read/writer, the other is read only)
>>>>
>>>> Kind regards,
>>>> D. Penning
>>>>
>>>> Zender00 wrote:
>>>>>
>>>>> Hi,
>>>>> I tried to implement a singleton pattern for my already working
>>>>> lucene
>>>>> object.
>>>>> But there is a strange error when I tried to access the instance.
>>>>>
>>>>> When my Singleton GetInstance() method is executed for the first
>>>>> time it
>>>>> creates a new instance of my lucene object. There are some member
>>>>> variables in this object like an IndexWriter and IndexReader. These
>>>>> objects are created in the constructor and I can access them
>>>>> directly in
>>>>> the constructor successfully.
>>>>> GetInstance() now returns this lucene object and I have to execute
>>>>> some
>>>>> operations on it. But the IndexWriter seems to be closed meanwhile
>>>>> and I
>>>>> got the exception:
>>>>>
>>>>> "org.apache.lucene.store.AlreadyClosed    Exception: this
>>>>> IndexWriter is
>>>>> closed" when my object tries to writer some documents.
>>>>>
>>>>> How could this happen? Isn't it possible to use lucene with a
>>>>> singleton-pattern?
>>>>>
>>>>> Kind regards,
>>>>> D. Penning
>>>>>
>>>>
>>>> --=20
>>>> View this message in context:
>>>> http://www.nabble.com/Singleton-and-Lucene%3A-org.apache.lucene.store.=
AlreadyClosed-tp20983056p21011945.html
>>>> Sent from the Lucene - Java Users mailing list archive at =20
>>>> Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>>
>>>
>>
>> --=20
>> View this message in context:
>> http://www.nabble.com/Singleton-and-Lucene%3A-org.apache.lucene.store.Al=
readyClosed-tp20983056p21012798.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>=20
>=20
> =20
>=20

--=20
View this message in context: http://www.nabble.com/Singleton-and-Lucene%3A=
-org.apache.lucene.store.AlreadyClosed-tp20983056p21022920.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 05:13:18 2008
Return-Path: <java-user-return-37709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11912 invoked from network); 16 Dec 2008 05:13:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 05:13:18 -0000
Received: (qmail 86755 invoked by uid 500); 16 Dec 2008 05:13:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86730 invoked by uid 500); 16 Dec 2008 05:13:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86719 invoked by uid 99); 16 Dec 2008 05:13:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 21:13:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [70.158.118.30] (HELO england.pageplanet.com) (70.158.118.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 05:12:58 +0000
Received: from [192.168.1.122] (61.247.251.10) by england.pageplanet.com
 with ESMTP (Eudora Internet Mail Server 3.1.4) for 
 <java-user@lucene.apache.org>;
 Tue, 16 Dec 2008 00:12:42 -0500
Message-ID: <494738A8.3020609@tachyontech.net>
Date: Tue, 16 Dec 2008 10:42:08 +0530
From: Prafulla Kiran <prafulla@tachyontech.net>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene Data Structures
References: <4945E7ED.4070002@tachyontech.net> <AB8937DF-282F-47F7-827C-4C39F2F323BB@apache.org>
In-Reply-To: <AB8937DF-282F-47F7-827C-4C39F2F323BB@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Well, I have seen this link many times before. It doesn't really explain 
the data structures part of it. Perhaps I should have asked my question 
this way:
"What data structures are being used by Lucene to read the posting lists 
from the index ?" .
My guess is that a hash table is being used for reading the postings of 
each term, with the key being the term and the hash value being a multi 
level skip list.
Please correct me if I am wrong.

Regards,
Prafulla


Grant Ingersoll wrote:
> http://lucene.apache.org/java/2_4_0/fileformats.html
>
> On Dec 15, 2008, at 12:15 AM, Prafulla Kiran wrote:
>
>> Hi Everybody,
>>
>> Could someone please explain the actual data structures being used by 
>> Lucene for storing the postings list in the index. I see a file 
>> called MultileveSkipListReader and MultiLevelSkipListWriter. Is 
>> lucene using Multi-level skip lists behind the scenes, for 
>> maintaining the index ? I want to understand clearly the actual data 
>> structure being used by lucene for storing the index and postings 
>> list, so that I can deduce the complexity for reading from that 
>> datastructure and decide whether my application would scale as per my 
>> requirements while using Lucene. So, someone please give me some 
>> pointers to the data structures being used by Lucene .
>>
>> TIA,
>> Prafulla
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.176 / Virus Database: 270.9.18/1848 - Release Date: 12/14/2008 12:28 PM
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 05:42:15 2008
Return-Path: <java-user-return-37710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29162 invoked from network); 16 Dec 2008 05:42:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 05:42:15 -0000
Received: (qmail 8279 invoked by uid 500); 16 Dec 2008 05:42:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8238 invoked by uid 500); 16 Dec 2008 05:42:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8227 invoked by uid 99); 16 Dec 2008 05:42:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 21:42:20 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 05:42:06 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCSgj-0004Rc-C9
	for java-user@lucene.apache.org; Mon, 15 Dec 2008 21:41:45 -0800
Message-ID: <21027642.post@talk.nabble.com>
Date: Mon, 15 Dec 2008 21:41:45 -0800 (PST)
From: Shardul Bhatt <shardul.bhatt@gmail.com>
To: java-user@lucene.apache.org
Subject: Need Opinion!!
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: shardul.bhatt@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

I am facing a scenrio where I am considering using Lucene over the existing
implementation. The move to Lucene is going to require a lot of re-work so I
though I better post this and ask for an expert opinion.

Background
 There are 3 tables.
 1. University
 2. Course
 3. Subjects
 
 A university can have multiple courses.
 2 universities can offer the same course.
 A course can have multiple subjects.
 2 courses can have the same set of subjects.
 
Current implemetation.
	The current table is  
	uni_id, course_id, subject_id
	
	I usually query for the uni_id based on combinations of course_id and
subject_id. The "user" looks for a university based on subject or a course
name.
	
Proposed Implementation
	The new table would be 
	uni_id, course_name, subject_name
	
	Index(using Lucene) the table on course_name and subject_name and then look
for the uni_id using Lucene Index.
	
The size of the table is huge, test data has over 5000000 rows.

Shall I move to Lucene? Would it help improving the performance?

TIA.
Shardul.


-- 
View this message in context: http://www.nabble.com/Need-Opinion%21%21-tp21027642p21027642.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 06:05:13 2008
Return-Path: <java-user-return-37711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41350 invoked from network); 16 Dec 2008 06:05:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 06:05:13 -0000
Received: (qmail 28550 invoked by uid 500); 16 Dec 2008 06:05:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28506 invoked by uid 500); 16 Dec 2008 06:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28495 invoked by uid 99); 16 Dec 2008 06:05:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 15 Dec 2008 22:05:19 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FS_REPLICA,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 06:04:57 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1505250wag.5
        for <java-user@lucene.apache.org>; Mon, 15 Dec 2008 22:04:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=kRUNj0hPFU8ODSRxukdsMuCVRsK4FQTatN1PyplSU/M=;
        b=uwZWNGRHEYmzx2sd92NYmQq3MQkek44ukf3dyaAbT5JpR6LeHKcYHIG7wWdZokwy5b
         h7jw/QJLeD07OojI38SugOy+qDy2Aw5iSGASVBZNTCSNLufiaCJTB1jQdMsjNMlTg4S9
         ySqHZevibSx8yyz5DHDKZynjyErnyso+kqErc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=kNPchMlNJ5DwVb4K4w9nLwOjLFHJ3s7UPGBmmcagmD04jonxFQM8eRFab2KldP8Nhw
         yGMdXe98XDmVIp/KyeaThy+9vNdIjqmVUpJCeVDjGLD5qFWoP02MiVwTLhThra8DOPSF
         qbnae8k/mOmg7EGL186to6Ny9m02Jt1E2MdaI=
Received: by 10.114.195.19 with SMTP id s19mr5495224waf.123.1229407477467;
        Mon, 15 Dec 2008 22:04:37 -0800 (PST)
Received: by 10.114.124.9 with HTTP; Mon, 15 Dec 2008 22:04:37 -0800 (PST)
Message-ID: <652776090812152204g3fd47793ta77a2fb09ce30296@mail.gmail.com>
Date: Mon, 15 Dec 2008 22:04:37 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: replication question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_126761_31179758.1229407477462"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_126761_31179758.1229407477462
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've got a question from Doug's original email about replication (
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html):

"1. On the index master, periodically checkpoint the index. Every minute or
so the IndexWriter is closed and a 'cp -lr index index.DATE' command is
executed from Java, where DATE is the current date and time. This
efficiently makes a copy of the index when its in a consistent state by
constructing a tree of hard links. If Lucene re-writes any files (e.g., the
segments file) a new inode is created and the copy is unchanged."

Is closing the IndexWriter really a requirement on taking a snapshot? Or can
one take a snapshot on an index being written, I've done this in my
development environment and it seems to work fine w/o closing the
IndexWriter. Also the solr replication shell scripts don't seem to worry
about this either.

M

------=_Part_126761_31179758.1229407477462--

From java-user-return-37712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 08:37:41 2008
Return-Path: <java-user-return-37712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9863 invoked from network); 16 Dec 2008 08:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 08:37:40 -0000
Received: (qmail 47155 invoked by uid 500); 16 Dec 2008 08:37:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47125 invoked by uid 500); 16 Dec 2008 08:37:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47114 invoked by uid 99); 16 Dec 2008 08:37:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 00:37:46 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jiabaozhen@gmail.com designates 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 08:37:24 +0000
Received: by ti-out-0910.google.com with SMTP id b8so2304291tic.11
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 00:37:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=aLz8SDDIeDasljnabY1Px9EnES7LYPzfPE1CuOYaTIk=;
        b=cgu1KA8RtM2QJZdcjiG+7+CCdCEm9ot4DmkGUlXwtqTv0vdeMgMBISbmWuDavFCMHT
         1H668Zojd5AuxqiTMLppfNPZ5BENPTCyxxdTRCRFo6H1WK6kXZ2fYo8STG3RBKw17MqI
         5KxrMXrEKFej+DH3ZNAhyGvXuknHaCKs7lnLI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=F5snogVIJVoV0OYmiRCKfq+YCbYSlK5yotd1hzPWypCw1XG26hmB2ZH0UpoDgV0ODP
         FYXLJ102l0iLh9i5gCOb1hHXnI05kRsG1u7TjUOCNBLYl638lQ9/f2alr4qiydr4coq7
         RhXj3L/HloLru1cZMWSLRpOWjfdvoFXcWEvZo=
Received: by 10.110.73.19 with SMTP id v19mr11570439tia.22.1229416621541;
        Tue, 16 Dec 2008 00:37:01 -0800 (PST)
Received: by 10.110.40.2 with HTTP; Tue, 16 Dec 2008 00:37:01 -0800 (PST)
Message-ID: <54191ed60812160037v6d90f5b0xfe40c89c9c73bc54@mail.gmail.com>
Date: Tue, 16 Dec 2008 16:37:01 +0800
From: "Baozhen Jia" <jiabaozhen@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Singleton and Lucene: org.apache.lucene.store.AlreadyClosed
In-Reply-To: <21022920.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_191215_3255949.1229416621525"
References: <20983056.post@talk.nabble.com> <21011945.post@talk.nabble.com>
	 <1C07484A-56A9-4F2E-88E5-B89C3CAAC45B@activemath.org>
	 <21012798.post@talk.nabble.com>
	 <103C3669-84C1-4620-900C-13964D530606@activemath.org>
	 <21022920.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_191215_3255949.1229416621525
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

c29tZSBkb2NzIGZyb20gTHVjZW5lIDIuNC4wOgogICAqIEluZGV4UmVhZGVyIG5ldyA9IHIucmVv
cGVuKCk7CiAgICogaWYgKG5ldyAhPSByZWFkZXIpIHsKICAgKiAgIC4uLiAgICAgLy8gcmVhZGVy
IHdhcyByZW9wZW5lZAogICAqICAgcmVhZGVyLmNsb3NlKCk7CiAgICogfQogICAqIHJlYWRlciA9
IG5ldzsKCkRpZCB5b3UgZm9sbG93IHRoaXMgaW5zdHJ1Y3Rpb24/CgpJdCdzIGJhZCBpbiBjYXNl
IG9mIGNvbmN1cnJlbnQgYWNjZXNzIGluIG15IG9waW5pb24uCgpEbyBub3QgY2xvc2UgdGhlIHJl
YWRlciwgYW5kIHRyeSB0aGlzOgpvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlci5k
ZWNSZWYoKSAmCm9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkluZGV4UmVhZGVyLmluY1JlZigpCgoK
T24gVHVlLCBEZWMgMTYsIDIwMDggYXQgNjowNiBBTSwgWmVuZGVyMDAgPGRhbmllbHBlbm5pbmdA
Z214Lm5ldD4gd3JvdGU6Cgo+Cj4gSGkgUGF1bCwKPiB0aGFua3MgZm9yIHlvdXIgcmVwbHkuCj4K
PiBJIGNvbXBhcmVkIHlvdXIgc291cmNlIGNvZGUgYW5kIGl0IHNlZW1zIHRoYXQgeW91IGFyZSB1
c2luZyB0aGUgc2FtZQo+IG1lY2hhbmlzbSBmb3IgdGhlIHNpbmdsZXRvbiBsaWtlIG1lLi4uIEkg
YW0gdXNpbmcgbHVjZW5lIDIuNCBhbmQgZ2V0IHRoZQo+IGV4Y2VwdGlvbiBhYm92ZSBleHBsYWlu
ZWQuCj4gSSBhbSB3b25kZXJpbmcgd2h5IGJlY2F1c2UgSSBvbmx5IGNyZWF0ZSBhbiBpbnN0YW5j
ZSBvZiBteSBsdWNlbmUgb2JqZWN0Cj4gKHdoaWNoIGl0c2VsZiBjb25zdHJ1Y3RzIGFuIEluZGV4
UmVhZGVyL0luZGV4V3JpdGVyIGluIGl0cyBjb25zdHJ1Y3RvcikgYW5kCj4gcmV0dXJuIHRoaXMg
aW5zdGFuY2UgdG8gb2JqZWN0cyB3aGljaCB3YW50IHRvIGV4ZWN1dGUgc29tZSBsdWNlbmUKPiBv
cGVyYXRpb25zLiBTbyBJIG9ubHkgYXBwbGllZCB0aGUgc2luZ2xldG9uLXBhdHRlcm4uCj4gSSBh
bSBzdGlsbCB3b25kZXJpbmcgd2h5IHRoZXNlIHBhdHRlcm4gcmVzdWx0cyBpbiBteSBleGNlcHRp
b24uIFdoeSBjb3VsZAo+IGl0Cj4gaGFwcGVuLCB0aGF0IHRoZXNlIFN0cmVhbXMgKEluZGV4V3Jp
dGVyL0luZGV4UmVhZGVyKSBjbG9zZSBpdHNlbGYuIEluIG15Cj4gb3BpbmlvbiBpdCBpcyBjb21w
bGV0ZWx5IGxlZ2FsIHRvIGRvIHNvLgo+Cj4gQW55IG90aGVyIHN1Z2dlc3Rpb25zPwo+Cj4KPgo+
IHBvbHggd3JvdGU6Cj4gPgo+ID4KPiA+IExlIDE1LWTDqWMuLTA4IMOgIDEzOjA5LCBaZW5kZXIw
MCBhIMOpY3JpdCA6Cj4gPj4gaW4gbXkgb3BpbmlvbiBpdCBpcyBwb3NzaWJsZSB0byB1c2UgYSBy
ZWFkZXIgYW5kIHdyaXRlcgo+ID4+IHNpbXVsdGFuZXNvdXNseSBvbgo+ID4+IHRoZSBzYW1lIGlu
ZGV4LiBJbiBteSBhbHJlYWR5IHdvcmtpbmcgbHVjZW5lIGNsYXNzLCBJIHVzZSB0aGV5IGFyZQo+
ID4+IGJvdGggb3Blbgo+ID4+IGFsbCB0aGUgdGltZS4KPiA+Cj4gPiBtbW1oLi4uCj4gPgo+ID4+
IEJ1dCB0aGlzIGlzbnQgdGhlIHJlYXNvbiBmb3IgbXkgZXhjZXB0aW9uLiBJdCBzZWVtcyB0aGF0
IGx1Y2VuZSBjYW5ub3QKPiA+PiBoYW5kbGUgbXkgc2luZ2xldG9uLiBIb3cgZGlkIHlvdSBpbXBs
ZW1lbnQgeW91ciBzaW5nbGV0b24gd2l0aAo+ID4+IGx1Y2VuZT8gV2hpY2gKPiA+PiBsdWNlbmUg
dmVyc2lvbj8KPiA+Cj4gPiAyLjMuMSwgc291cmNlIGNvZGUgQVBMIGFuZCBHUEwgYXQ6Cj4gPiAg
ICBodHRwOi8vc3ZuLmFjdGl2ZW1hdGgub3JnL2ludGVyZ2VvL1BsYXRmb3JtL1NlYXJjaEkyRy9p
bmRleC8KPiA+Cj4gPiBpbiBhbm90aGVyIHByb2plY3QsIHRoaXMgd2FzIHVzZWQgd2l0aCBMdWNl
bmUgMi4wLgo+ID4KPiA+IHBhdWwKPiA+Cj4gPj4gcG9seCB3cm90ZToKPiA+Pj4KPiA+Pj4gV2Ug
dXNlIHNpbmdsZXRvbnMgYWxsIHRoZSB0aW1lLAo+ID4+Pgo+ID4+PiBKdXN0IGJlIGNhcmVmdWwg
dGhhdCBhcmUgd3JpdGVyIGFuZCBhIHJlYWRlciBjYW5ub3QgYmUgb3BlbmVkCj4gPj4+IHNpbXVs
dGFuZW91c2x5IG9uIHRoZSBzYW1lIGluZGV4LiBFaXRoZXIgeW91IHdyaXRlIG9yIHlvdXIgcmVh
ZCAoYW5kCj4gPj4+IGRlbGV0ZSkuCj4gPj4+Cj4gPj4+IHBhdWwKPiA+Pj4KPiA+Pj4KPiA+Pj4g
TGUgMTUtZMOpYy4tMDggw6AgMTI6MDYsIFplbmRlcjAwIGEgw6ljcml0IDoKPiA+Pj4KPiA+Pj4+
Cj4gPj4+PiBJIGV4dGVuZCBteSBvcmlnaW5hbCBwb3N0Ogo+ID4+Pj4gSG93IGlzIGl0IHBvc3Np
YmxlIHRvIHVzZSBsdWNlbmUgaW4gMiBkaWZmZW50IGNsYXNzZXMgLyBvYmplY3RzLCBpZgo+ID4+
Pj4gSSBkb250Cj4gPj4+PiB3YW50IHRvIHVzZSBzdGF0aWMgbWV0aG9kcy92YXJpYWJsZXM/Cj4g
Pj4+PiAob25lIG9iamVjdCByZWFkL3dyaXRlciwgdGhlIG90aGVyIGlzIHJlYWQgb25seSkKPiA+
Pj4+Cj4gPj4+PiBLaW5kIHJlZ2FyZHMsCj4gPj4+PiBELiBQZW5uaW5nCj4gPj4+Pgo+ID4+Pj4g
WmVuZGVyMDAgd3JvdGU6Cj4gPj4+Pj4KPiA+Pj4+PiBIaSwKPiA+Pj4+PiBJIHRyaWVkIHRvIGlt
cGxlbWVudCBhIHNpbmdsZXRvbiBwYXR0ZXJuIGZvciBteSBhbHJlYWR5IHdvcmtpbmcKPiA+Pj4+
PiBsdWNlbmUKPiA+Pj4+PiBvYmplY3QuCj4gPj4+Pj4gQnV0IHRoZXJlIGlzIGEgc3RyYW5nZSBl
cnJvciB3aGVuIEkgdHJpZWQgdG8gYWNjZXNzIHRoZSBpbnN0YW5jZS4KPiA+Pj4+Pgo+ID4+Pj4+
IFdoZW4gbXkgU2luZ2xldG9uIEdldEluc3RhbmNlKCkgbWV0aG9kIGlzIGV4ZWN1dGVkIGZvciB0
aGUgZmlyc3QKPiA+Pj4+PiB0aW1lIGl0Cj4gPj4+Pj4gY3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBv
ZiBteSBsdWNlbmUgb2JqZWN0LiBUaGVyZSBhcmUgc29tZSBtZW1iZXIKPiA+Pj4+PiB2YXJpYWJs
ZXMgaW4gdGhpcyBvYmplY3QgbGlrZSBhbiBJbmRleFdyaXRlciBhbmQgSW5kZXhSZWFkZXIuIFRo
ZXNlCj4gPj4+Pj4gb2JqZWN0cyBhcmUgY3JlYXRlZCBpbiB0aGUgY29uc3RydWN0b3IgYW5kIEkg
Y2FuIGFjY2VzcyB0aGVtCj4gPj4+Pj4gZGlyZWN0bHkgaW4KPiA+Pj4+PiB0aGUgY29uc3RydWN0
b3Igc3VjY2Vzc2Z1bGx5Lgo+ID4+Pj4+IEdldEluc3RhbmNlKCkgbm93IHJldHVybnMgdGhpcyBs
dWNlbmUgb2JqZWN0IGFuZCBJIGhhdmUgdG8gZXhlY3V0ZQo+ID4+Pj4+IHNvbWUKPiA+Pj4+PiBv
cGVyYXRpb25zIG9uIGl0LiBCdXQgdGhlIEluZGV4V3JpdGVyIHNlZW1zIHRvIGJlIGNsb3NlZCBt
ZWFud2hpbGUKPiA+Pj4+PiBhbmQgSQo+ID4+Pj4+IGdvdCB0aGUgZXhjZXB0aW9uOgo+ID4+Pj4+
Cj4gPj4+Pj4gIm9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkFscmVhZHlDbG9zZWQgICAgRXhjZXB0
aW9uOiB0aGlzCj4gPj4+Pj4gSW5kZXhXcml0ZXIgaXMKPiA+Pj4+PiBjbG9zZWQiIHdoZW4gbXkg
b2JqZWN0IHRyaWVzIHRvIHdyaXRlciBzb21lIGRvY3VtZW50cy4KPiA+Pj4+Pgo+ID4+Pj4+IEhv
dyBjb3VsZCB0aGlzIGhhcHBlbj8gSXNuJ3QgaXQgcG9zc2libGUgdG8gdXNlIGx1Y2VuZSB3aXRo
IGEKPiA+Pj4+PiBzaW5nbGV0b24tcGF0dGVybj8KPiA+Pj4+Pgo+ID4+Pj4+IEtpbmQgcmVnYXJk
cywKPiA+Pj4+PiBELiBQZW5uaW5nCj4gPj4+Pj4KPiA+Pj4+Cj4gPj4+PiAtLQo+ID4+Pj4gVmll
dyB0aGlzIG1lc3NhZ2UgaW4gY29udGV4dDoKPiA+Pj4+Cj4gaHR0cDovL3d3dy5uYWJibGUuY29t
L1NpbmdsZXRvbi1hbmQtTHVjZW5lJTNBLW9yZy5hcGFjaGUubHVjZW5lLnN0b3JlLkFscmVhZHlD
bG9zZWQtdHAyMDk4MzA1NnAyMTAxMTk0NS5odG1sCj4gPj4+PiBTZW50IGZyb20gdGhlIEx1Y2Vu
ZSAtIEphdmEgVXNlcnMgbWFpbGluZyBsaXN0IGFyY2hpdmUgYXQKPiA+Pj4+IE5hYmJsZS5jb20u
Cj4gPj4+Pgo+ID4+Pj4KPiA+Pj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4+Pj4gVG8gdW5zdWJzY3JpYmUs
IGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gPj4+PiBG
b3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBh
Y2hlLm9yZwo+ID4+Pj4KPiA+Pj4KPiA+Pj4KPiA+Pj4KPiA+Pj4KPiA+Pgo+ID4+IC0tCj4gPj4g
VmlldyB0aGlzIG1lc3NhZ2UgaW4gY29udGV4dDoKPiA+Pgo+IGh0dHA6Ly93d3cubmFiYmxlLmNv
bS9TaW5nbGV0b24tYW5kLUx1Y2VuZSUzQS1vcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5BbHJlYWR5
Q2xvc2VkLXRwMjA5ODMwNTZwMjEwMTI3OTguaHRtbAo+ID4+IFNlbnQgZnJvbSB0aGUgTHVjZW5l
IC0gSmF2YSBVc2VycyBtYWlsaW5nIGxpc3QgYXJjaGl2ZSBhdCBOYWJibGUuY29tLgo+ID4+Cj4g
Pj4KPiA+PiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+PiBGb3IgYWRkaXRpb25hbCBjb21t
YW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4+Cj4gPgo+
ID4KPiA+Cj4gPgo+Cj4gLS0KPiBWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0Ogo+IGh0dHA6
Ly93d3cubmFiYmxlLmNvbS9TaW5nbGV0b24tYW5kLUx1Y2VuZSUzQS1vcmcuYXBhY2hlLmx1Y2Vu
ZS5zdG9yZS5BbHJlYWR5Q2xvc2VkLXRwMjA5ODMwNTZwMjEwMjI5MjAuaHRtbAo+IFNlbnQgZnJv
bSB0aGUgTHVjZW5lIC0gSmF2YSBVc2VycyBtYWlsaW5nIGxpc3QgYXJjaGl2ZSBhdCBOYWJibGUu
Y29tLgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVz
ZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5k
cywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4KCgotLSAKSmlh
IEJhb3poZW4K
------=_Part_191215_3255949.1229416621525--

From java-user-return-37713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 10:10:17 2008
Return-Path: <java-user-return-37713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61031 invoked from network); 16 Dec 2008 10:10:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 10:10:17 -0000
Received: (qmail 45080 invoked by uid 500); 16 Dec 2008 10:10:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44569 invoked by uid 500); 16 Dec 2008 10:10:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44327 invoked by uid 99); 16 Dec 2008 10:10:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 02:10:19 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 10:10:05 +0000
Received: by qw-out-2122.google.com with SMTP id 5so576123qwi.53
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 02:09:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=QH+gzrcAQ8m2ujklDx1HFApRASiciM535MeyBPf3ULA=;
        b=AIjPrfZg0UPWjHB3jVWGCENe9QMdrMJtsDkUkdCtwI+jXw9DsUNrhX8X8/qxXWFXGC
         JRc9Fdoz21shs0hStq17OGUS1gbGlhfGAcveh4+wliE9uZuMEIkeN7pDl6A8l9KuFREi
         ygKBQQsPF0Ik6uBOe6XQPuZrnlCKLLVV0CllI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=gg6dMJnjUU55cJvxCZ5shSEkaZyPwwpOXn9vkBNIBNOrU68Pr9LmCpmrVMT33HnT2w
         +D2BjNi1sJ0IPWKAxZZgZDkYCLUC2f/Z6Kxfak1WXTcAeV/XMrrgHrxQlltbtZt4pJPt
         x+T/3mL6WG4rsbzoduY1yUx2VAv18dWkeHhXQ=
Received: by 10.214.149.8 with SMTP id w8mr9028797qad.346.1229422182652;
        Tue, 16 Dec 2008 02:09:42 -0800 (PST)
Received: by 10.214.241.6 with HTTP; Tue, 16 Dec 2008 02:09:42 -0800 (PST)
Message-ID: <8c4e68610812160209y69230cfbi93cc4381d3b1a6de@mail.gmail.com>
Date: Tue, 16 Dec 2008 10:09:42 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Singleton and Lucene: org.apache.lucene.store.AlreadyClosed
In-Reply-To: <21022920.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20983056.post@talk.nabble.com> <21011945.post@talk.nabble.com>
	 <1C07484A-56A9-4F2E-88E5-B89C3CAAC45B@activemath.org>
	 <21012798.post@talk.nabble.com>
	 <103C3669-84C1-4620-900C-13964D530606@activemath.org>
	 <21022920.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

If the reopen suggestion doesn't fix it, I suggest that you cut down
your singleton class to the absolute minimum, wrap it in a junit test
case that demonstrates the problem and post the code here.


--
Ian.


On Mon, Dec 15, 2008 at 10:06 PM, Zender00 <danielpenning@gmx.net> wrote:
>
> Hi Paul,
> thanks for your reply.
>
> I compared your source code and it seems that you are using the same
> mechanism for the singleton like me... I am using lucene 2.4 and get the
> exception above explained.
> I am wondering why because I only create an instance of my lucene object
> (which itself constructs an IndexReader/IndexWriter in its constructor) a=
nd
> return this instance to objects which want to execute some lucene
> operations. So I only applied the singleton-pattern.
> I am still wondering why these pattern results in my exception. Why could=
 it
> happen, that these Streams (IndexWriter/IndexReader) close itself. In my
> opinion it is completely legal to do so.
>
> Any other suggestions?
>
>
>
> polx wrote:
>>
>>
>> Le 15-d=E9c.-08 =E0 13:09, Zender00 a =E9crit :
>>> in my opinion it is possible to use a reader and writer
>>> simultanesously on
>>> the same index. In my already working lucene class, I use they are
>>> both open
>>> all the time.
>>
>> mmmh...
>>
>>> But this isnt the reason for my exception. It seems that lucene cannot
>>> handle my singleton. How did you implement your singleton with
>>> lucene? Which
>>> lucene version?
>>
>> 2.3.1, source code APL and GPL at:
>>    http://svn.activemath.org/intergeo/Platform/SearchI2G/index/
>>
>> in another project, this was used with Lucene 2.0.
>>
>> paul
>>
>>> polx wrote:
>>>>
>>>> We use singletons all the time,
>>>>
>>>> Just be careful that are writer and a reader cannot be opened
>>>> simultaneously on the same index. Either you write or your read (and
>>>> delete).
>>>>
>>>> paul
>>>>
>>>>
>>>> Le 15-d=E9c.-08 =E0 12:06, Zender00 a =E9crit :
>>>>
>>>>>
>>>>> I extend my original post:
>>>>> How is it possible to use lucene in 2 diffent classes / objects, if
>>>>> I dont
>>>>> want to use static methods/variables?
>>>>> (one object read/writer, the other is read only)
>>>>>
>>>>> Kind regards,
>>>>> D. Penning
>>>>>
>>>>> Zender00 wrote:
>>>>>>
>>>>>> Hi,
>>>>>> I tried to implement a singleton pattern for my already working
>>>>>> lucene
>>>>>> object.
>>>>>> But there is a strange error when I tried to access the instance.
>>>>>>
>>>>>> When my Singleton GetInstance() method is executed for the first
>>>>>> time it
>>>>>> creates a new instance of my lucene object. There are some member
>>>>>> variables in this object like an IndexWriter and IndexReader. These
>>>>>> objects are created in the constructor and I can access them
>>>>>> directly in
>>>>>> the constructor successfully.
>>>>>> GetInstance() now returns this lucene object and I have to execute
>>>>>> some
>>>>>> operations on it. But the IndexWriter seems to be closed meanwhile
>>>>>> and I
>>>>>> got the exception:
>>>>>>
>>>>>> "org.apache.lucene.store.AlreadyClosed    Exception: this
>>>>>> IndexWriter is
>>>>>> closed" when my object tries to writer some documents.
>>>>>>
>>>>>> How could this happen? Isn't it possible to use lucene with a
>>>>>> singleton-pattern?
>>>>>>
>>>>>> Kind regards,
>>>>>> D. Penning
>>>>>>
>>>>>
>>>>> --
>>>>> View this message in context:
>>>>> http://www.nabble.com/Singleton-and-Lucene%3A-org.apache.lucene.store=
.AlreadyClosed-tp20983056p21011945.html
>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>> Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>> --
>>> View this message in context:
>>> http://www.nabble.com/Singleton-and-Lucene%3A-org.apache.lucene.store.A=
lreadyClosed-tp20983056p21012798.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/Singleton-and-Lucene%=
3A-org.apache.lucene.store.AlreadyClosed-tp20983056p21022920.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 10:25:03 2008
Return-Path: <java-user-return-37714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69282 invoked from network); 16 Dec 2008 10:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 10:25:03 -0000
Received: (qmail 60690 invoked by uid 500); 16 Dec 2008 10:25:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60652 invoked by uid 500); 16 Dec 2008 10:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60641 invoked by uid 99); 16 Dec 2008 10:25:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 02:25:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 10:24:49 +0000
Received: by qyk13 with SMTP id 13so3258009qyk.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 02:24:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=8cNavAGefL96IzwR1NKpJhgnbukSQlfNCGe0JQH4zRg=;
        b=j7MQ3QShuAfJJYIwKvB2gbZY3zSBr+0SEWPko5XV1pnOikjhTLv6eKMznW5S5AWWuZ
         zY3WMumrozsidaYIA97w5kaawvhOYt8YWkt+ztMkskCi7HiP3DCt2sMyKGlmbgvl5yLe
         W48QOH3Srjx5XnboMvco1oEJ5dErUdpiZ0+3k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Oq8n1ShShNZ6gBWqXcibhuH84d29NUMHFVnwYw5hqNBEiPgBDAkNiVZa156fJO8Rd2
         w5fSMAjFCSua0f0OpzlOmQhCJx/VHQZrJp+4YTs25vol43kPTNaI5daHKucKSvktezm+
         c3bImmu4xwQjBXitycOIdYCmmewPxAkS+AKrg=
Received: by 10.215.66.1 with SMTP id t1mr9042536qak.327.1229423068566;
        Tue, 16 Dec 2008 02:24:28 -0800 (PST)
Received: by 10.214.241.6 with HTTP; Tue, 16 Dec 2008 02:24:28 -0800 (PST)
Message-ID: <8c4e68610812160224m265c5103t1484be2610df287d@mail.gmail.com>
Date: Tue, 16 Dec 2008 10:24:28 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: process dies with OOM after processing 10k docs
In-Reply-To: <f071061b0812151028v58715748uec0f877cd58c348d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0812151028v58715748uec0f877cd58c348d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Can you not just give the process some more memory?  128Mb seems very
low for what you are doing.


--
Ian.


On Mon, Dec 15, 2008 at 6:28 PM, jm <jmuguruza@gmail.com> wrote:
> Hi,
>
> I am having a memory issue with Lucene2.4. I am strating a process
> with 128MB of ram, this process handles incoming request from others,
> and indexes objects in a number of lucene indexes.
>
> My lucene docs, all have 6 fields:
> -one is small: Field.Store.YES, Field.Index.UN_TOKENIZED, Field.TermVector.YES
> -rest are:  Field.Store.YES, Field.Index.UN_TOKENIZED,
> Field.TermVector.NO, two of them can be quite large.
>
> I set field.setOmitNorms(true); for all fields.
> And I also set writer.setRAMBufferSizeMB(30);
>
> I have archived around 10k lucene docs, they are evenly distritubed in
> around 100 indexes. I keep a cache of max 60 indexes open, when a new
> one has to be open for writing, another one is closed.
> I have started the process with -XX:+HeapDumpOnOutOfMemoryError so I
> get a hprof file dumped when I get an OOM.
>
> I open the hprof file with visualvm and I can see the following:
> class                                                  instances           size
> FreqProxTermsWriter$PostingList         572672              20616192
> String                                                  186154
>      4467698
> char[]                                                  184689
>     30216520
>
> In the indexes directories, there are lock files left, as the process
> dies with the OOM, there are not prx files, but there are frq files (I
> cannot be sure 100% about that last one but I think so, I dont have
> access to the server now).
>
> I also add each doc into a MemoryIndex, and run a number of
>  memoryindex.search(lucBooleanQuery);
> I dont close these MemoryIndex or anything, they just go out of scope,
> I thought that would be enough to dispose of them.
>
> Obviously something in my code is wrong, does someone see anything
> suspicious here? Any idea where should I be begin looking in my code?
>
> thanks a lot
> javi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 10:38:08 2008
Return-Path: <java-user-return-37715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73961 invoked from network); 16 Dec 2008 10:38:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 10:38:08 -0000
Received: (qmail 72498 invoked by uid 500); 16 Dec 2008 10:38:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72470 invoked by uid 500); 16 Dec 2008 10:38:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72459 invoked by uid 99); 16 Dec 2008 10:38:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 02:38:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jmuguruza@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 10:37:57 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3677889rvb.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 02:37:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=PYuknETq/43fc582LZYeiDKDLOW5qb6FdOtAnEPWWe8=;
        b=Oe6lFUQUiKWD12274REqE+15r9dvRoljHBpdXpyDMaM+OGw7n/ufwGK9gn11oBv25T
         oZoIJjhYDxp4c3F2xt7fZbwMILxwFkmNEFKM+ooLTGaytxXIcb+L5hVWeVv/3qkwbasA
         usUaP97CGa+NCaNxJLP6rtsrgkIWI3yvtYuuo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=U2pqjURsdoETAL63b+VMFQipL0/+iUdzi9jKrXhNMg217ObP11y7pAKznIKfQvv4lg
         zRnH4WuYjncjlj3cS8/hgI49tLQrFFu+qd/6EoWGljJKzFJgwAqCJ59OTB7JwY6kZRF5
         AGl0ZSAwrA0ELvEFemCC7+JlEtASblbeLjZHA=
Received: by 10.142.158.17 with SMTP id g17mr3256333wfe.21.1229423855503;
        Tue, 16 Dec 2008 02:37:35 -0800 (PST)
Received: by 10.142.153.4 with HTTP; Tue, 16 Dec 2008 02:37:35 -0800 (PST)
Message-ID: <f071061b0812160237k7da84b76x1f483b18f79bef05@mail.gmail.com>
Date: Tue, 16 Dec 2008 11:37:35 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: process dies with OOM after processing 10k docs
In-Reply-To: <8c4e68610812160224m265c5103t1484be2610df287d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0812151028v58715748uec0f877cd58c348d@mail.gmail.com>
	 <8c4e68610812160224m265c5103t1484be2610df287d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

yes I have tested with up to 512MB, althought I dont have the hprof
dump file of those tests, they also got the OOM. I was just wondering
whether having so many instances of FreqProxTermsWriter$PostingList
around is a clear indicator of something I am not releasing or
something.

javier

On Tue, Dec 16, 2008 at 11:24 AM, Ian Lea <ian.lea@gmail.com> wrote:
> Can you not just give the process some more memory?  128Mb seems very
> low for what you are doing.
>
>
> --
> Ian.
>
>
> On Mon, Dec 15, 2008 at 6:28 PM, jm <jmuguruza@gmail.com> wrote:
>> Hi,
>>
>> I am having a memory issue with Lucene2.4. I am strating a process
>> with 128MB of ram, this process handles incoming request from others,
>> and indexes objects in a number of lucene indexes.
>>
>> My lucene docs, all have 6 fields:
>> -one is small: Field.Store.YES, Field.Index.UN_TOKENIZED, Field.TermVector.YES
>> -rest are:  Field.Store.YES, Field.Index.UN_TOKENIZED,
>> Field.TermVector.NO, two of them can be quite large.
>>
>> I set field.setOmitNorms(true); for all fields.
>> And I also set writer.setRAMBufferSizeMB(30);
>>
>> I have archived around 10k lucene docs, they are evenly distritubed in
>> around 100 indexes. I keep a cache of max 60 indexes open, when a new
>> one has to be open for writing, another one is closed.
>> I have started the process with -XX:+HeapDumpOnOutOfMemoryError so I
>> get a hprof file dumped when I get an OOM.
>>
>> I open the hprof file with visualvm and I can see the following:
>> class                                                  instances           size
>> FreqProxTermsWriter$PostingList         572672              20616192
>> String                                                  186154
>>      4467698
>> char[]                                                  184689
>>     30216520
>>
>> In the indexes directories, there are lock files left, as the process
>> dies with the OOM, there are not prx files, but there are frq files (I
>> cannot be sure 100% about that last one but I think so, I dont have
>> access to the server now).
>>
>> I also add each doc into a MemoryIndex, and run a number of
>>  memoryindex.search(lucBooleanQuery);
>> I dont close these MemoryIndex or anything, they just go out of scope,
>> I thought that would be enough to dispose of them.
>>
>> Obviously something in my code is wrong, does someone see anything
>> suspicious here? Any idea where should I be begin looking in my code?
>>
>> thanks a lot
>> javi
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 10:42:27 2008
Return-Path: <java-user-return-37716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76100 invoked from network); 16 Dec 2008 10:42:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 10:42:26 -0000
Received: (qmail 81674 invoked by uid 500); 16 Dec 2008 10:42:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81642 invoked by uid 500); 16 Dec 2008 10:42:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81630 invoked by uid 99); 16 Dec 2008 10:42:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 02:42:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oltarasenko@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 10:42:17 +0000
Received: by ey-out-2122.google.com with SMTP id 6so363701eyi.53
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 02:41:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=i54j1yE8C1Gg4JVgVuFZJE4fiG6kPG8V8aY80Iz3Q2A=;
        b=RBg8Z/t9WNCjC5i867zyuSwJTLcIhJ//CUXM/RZColgj6YNkpvPLa+x1atu87QsWFk
         qTOQfhystQwMjhLFoUmfdgz4dj4Ql529GnttAEp4KUWH28nRUa0KQSF0TZBLi+yuZARE
         mt+ORgFdkGw05ruCoKZI2e6Y+n4W63tEiCVjo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=YItrrVC+60mDvhD8s7/ffblhDMBKxE3kUfEqVx7NrKEToc6SUO9Mt64JfVUBVZHkPX
         m9Eg10/TvEUkx9Yr6+sxsW55xHzK0ETjRRvBmQcqVQrtLo/m55L3DT3pCnPQe0tetntJ
         E8DVtcn7tHZOpLOjQAQ0H7ashdmurkBl0X8D0=
Received: by 10.210.133.2 with SMTP id g2mr9045231ebd.101.1229424116355;
        Tue, 16 Dec 2008 02:41:56 -0800 (PST)
Received: by 10.210.86.14 with HTTP; Tue, 16 Dec 2008 02:41:56 -0800 (PST)
Message-ID: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
Date: Tue, 16 Dec 2008 12:41:56 +0200
From: "Oleg Oltar" <oltarasenko@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene in Action book. Problems with first example
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_243_13138644.1229424116347"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_243_13138644.1229424116347
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi!
I am starting to learn Lucene.
I am using Lucene in Action book for startup (It was recommended to me). I
tried to compile first example from that book, but my ide (I use eclipse,
shows there are some errors in my code). I am just the beginner here, and I
really need to compile at least few programs.... before I can solve problems
myself. So I decided to post here the whole code with my comments. Please
help me!!!


package org.main;


import java.io.File;

import java.io.FileReader;

import java.io.IOException;

import java.util.Date;


import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.document.Field;

import org.apache.lucene.index.IndexWriter;




public class SimpleIndexer {

 /**

 * @param args

 */

public static void main(String[] args) throws Exception{

if (args.length !=2){

throw new Exception("Usage: java" + SimpleIndexer.class.getName() + "<indexDir>
<dataDir>");

}


 File indexDir = new File(args[0]);

File dataDir = new File(args[1]);

 long start = new Date().getTime();

int numIndexed = index(indexDir, dataDir);

long end = new Date().getTime();

System.out.println("Indexing " + numIndexed +" took " + (end - start) +
"milliseconds");

}


 @SuppressWarnings("deprecation")

public static int index(File indexDir, File dataDir) throws IOException {



 if (!dataDir.exists() || !dataDir.isDirectory()){

 throw new IOException(dataDir + " doesn't exist or not a directory");



 }

 IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(), true);
// Not sure why eclipse crosses this

 writer.setUseCompoundFile(false);



 indexDirectory(writer, dataDir);

 int numIndexed = writer.docCount(); // Not sure why eclipse crosses this

 writer.optimize();

 writer.close();





 return numIndexed;

}


 private static void indexDirectory(IndexWriter writer, File dir)
throwsIOException{

File[] files = dir.listFiles();

for (int i=0; i< files.length; i++){

File f = files[i];

if(f.isDirectory()){

indexDirectory(writer, f);

 } else if(f.getName().endsWith(".txt")){

indexFile(writer, f);

}

 }

}


 private static void indexFile(IndexWriter writer, File f) throwsIOException{

if(f.isHidden() || !f.exists() || !f.canRead()){

return;

}

System.out.println("Indexing " + f.getCanonicalPath());

 Document doc = new Document();

doc.add(Field.Text("contents", new FileReader(f))); // Eclipse says: The
method Text(String, FileReader) is undefined for the type Field

 doc.add(Field.Keyword("filename", f.getCanonicalPath())); // Eclipse says:The
method Keyword(String, String) is undefined for the type Field

writer.addDocument(doc);

 }





}

Please explain me why these errors are shown, and how to fix them. Maybe,
the version of lucene used by author of the book, contained needed methods?
So may it be that the book is outdated and can't be used for learning. If
so, please recommend me something that can help me to start with lucene.

Thanks in advance,
Oleg

------=_Part_243_13138644.1229424116347--

From java-user-return-37717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 10:45:22 2008
Return-Path: <java-user-return-37717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77554 invoked from network); 16 Dec 2008 10:45:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 10:45:22 -0000
Received: (qmail 88011 invoked by uid 500); 16 Dec 2008 10:45:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87977 invoked by uid 500); 16 Dec 2008 10:45:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87966 invoked by uid 99); 16 Dec 2008 10:45:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 02:45:27 -0800
X-ASF-Spam-Status: No, hits=-0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.32.180.16] (HELO VA3EHSOBE003.bigfish.com) (216.32.180.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 10:45:05 +0000
Received: from mail10-va3-R.bigfish.com (10.7.14.249) by
 VA3EHSOBE003.bigfish.com (10.7.40.23) with Microsoft SMTP Server id
 8.1.291.1; Tue, 16 Dec 2008 10:44:42 +0000
Received: from mail10-va3 (localhost.localdomain [127.0.0.1])	by
 mail10-va3-R.bigfish.com (Postfix) with ESMTP id 2D20C19F0237	for
 <java-user@lucene.apache.org>; Tue, 16 Dec 2008 10:44:42 +0000 (UTC)
X-BigFish: VPS-61(zz62a3L14e3Maf6W936eQ1443R3117K1c30R9371Pzzzz2b06i5a6ci5bd2iz2dh54h6bh34h61h)
X-Spam-TCS-SCL: 0:0
X-FB-SS: 5,5,
Received: by mail10-va3 (MessageSwitch) id 122942427986870_7185; Tue, 16 Dec
 2008 10:44:39 +0000 (UCT)
Received: from phmag01.lawson.com (unknown [221.121.120.101])	by
 mail10-va3.bigfish.com (Postfix) with ESMTP id 42CB619A8082	for
 <java-user@lucene.apache.org>; Tue, 16 Dec 2008 10:44:38 +0000 (UTC)
In-Reply-To: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action book. Problems with first example
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OFAF6BFA0E.55D5DFAB-ON48257521.003AE52D-48257521.003B05A0@lawson.com>
From: <Joseph.Syjuco@ph.lawson.com>
Date: Tue, 16 Dec 2008 18:44:35 +0800
X-MIMETrack: Serialize by Router on PHMAG01/Server/Lawson(Release 6.5.6FP1|April 24, 2007) at
 12/16/2008 06:44:38 PM,
	Serialize complete at 12/16/2008 06:44:38 PM
Content-Type: multipart/related; boundary="=_related 003B059B48257521_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_related 003B059B48257521_=
Content-Type: multipart/alternative;
	boundary="=_alternative 003B059D48257521_="

--=_alternative 003B059D48257521_=
Content-Type: text/plain; charset="US-ASCII"

Hi, 
What were the errors?
Just a guess ... it may be possible that you are using the wrong lucene 
version - the one in the book is not the most updated one avbl today


"XP is making a bet. It is betting that it is better to do a simple thing 
today and pay a little more tomorrow to change it if it needs it, than to 
do a more complicated thing today that may never be used anyway" - Extreme 
Programming Explained, Embrace Change

Best Regards, 

Joseph F. Syjuco 
Team Lead 
M3 Alpha - e-Commerce 
__________________________________ 
Lawson PSSC, Inc. 
4th Floor, One World Square Building 
Upper McKinley Road, Taguig City 1634 
Philippines 

Work: +63 (2) 976-3600 loc 79396
Mobile: +63 (917) 855-3436
Web: http://www.lawson.com 
Email: joseph.syjuco@lawson.com 


-------------------- Internet e-Mail Disclaimer --------------------
This e-mail and any files transmitted with it are confidential and 
intended solely for the use of the individual or entity to which they are 
addressed. If you are not the intended recipient you are notified that any 
use, disclosure, copying or distribution of the information is prohibited. 
In such case, you should destroy this message and kindly notify the sender 
by reply e-mail. The views expressed in this e-mail and any attachments 
are personal and, unless stated explicitly, do not represent the views of 
Lawson Software, Inc. 



"Oleg Oltar" <oltarasenko@gmail.com> 
12/16/2008 06:41 PM
Please respond to
java-user@lucene.apache.org


To
java-user@lucene.apache.org
cc

Subject
Lucene in Action book. Problems with first example






Hi!
I am starting to learn Lucene.
I am using Lucene in Action book for startup (It was recommended to me). I
tried to compile first example from that book, but my ide (I use eclipse,
shows there are some errors in my code). I am just the beginner here, and 
I
really need to compile at least few programs.... before I can solve 
problems
myself. So I decided to post here the whole code with my comments. Please
help me!!!


package org.main;


import java.io.File;

import java.io.FileReader;

import java.io.IOException;

import java.util.Date;


import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.document.Field;

import org.apache.lucene.index.IndexWriter;




public class SimpleIndexer {

 /**

 * @param args

 */

public static void main(String[] args) throws Exception{

if (args.length !=2){

throw new Exception("Usage: java" + SimpleIndexer.class.getName() + 
"<indexDir>
<dataDir>");

}


 File indexDir = new File(args[0]);

File dataDir = new File(args[1]);

 long start = new Date().getTime();

int numIndexed = index(indexDir, dataDir);

long end = new Date().getTime();

System.out.println("Indexing " + numIndexed +" took " + (end - start) +
"milliseconds");

}


 @SuppressWarnings("deprecation")

public static int index(File indexDir, File dataDir) throws IOException {



 if (!dataDir.exists() || !dataDir.isDirectory()){

 throw new IOException(dataDir + " doesn't exist or not a directory");



 }

 IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(), 
true);
// Not sure why eclipse crosses this

 writer.setUseCompoundFile(false);



 indexDirectory(writer, dataDir);

 int numIndexed = writer.docCount(); // Not sure why eclipse crosses this

 writer.optimize();

 writer.close();





 return numIndexed;

}


 private static void indexDirectory(IndexWriter writer, File dir)
throwsIOException{

File[] files = dir.listFiles();

for (int i=0; i< files.length; i++){

File f = files[i];

if(f.isDirectory()){

indexDirectory(writer, f);

 } else if(f.getName().endsWith(".txt")){

indexFile(writer, f);

}

 }

}


 private static void indexFile(IndexWriter writer, File f) 
throwsIOException{

if(f.isHidden() || !f.exists() || !f.canRead()){

return;

}

System.out.println("Indexing " + f.getCanonicalPath());

 Document doc = new Document();

doc.add(Field.Text("contents", new FileReader(f))); // Eclipse says: The
method Text(String, FileReader) is undefined for the type Field

 doc.add(Field.Keyword("filename", f.getCanonicalPath())); // Eclipse 
says:The
method Keyword(String, String) is undefined for the type Field

writer.addDocument(doc);

 }





}

Please explain me why these errors are shown, and how to fix them. Maybe,
the version of lucene used by author of the book, contained needed 
methods?
So may it be that the book is outdated and can't be used for learning. If
so, please recommend me something that can help me to start with lucene.

Thanks in advance,
Oleg


--=_alternative 003B059D48257521_=
Content-Type: text/html; charset="US-ASCII"


<br><font size=2 face="sans-serif">Hi, </font>
<br><font size=2 face="sans-serif">What were the errors?</font>
<br><font size=2 face="sans-serif">Just a guess ... it may be possible
that you are using the wrong lucene version - the one in the book is not
the most updated one avbl today<br>
</font><font size=3><br>
</font>
<p><font size=3><i>&quot;XP is making a bet. It is betting that it is better
to do a simple thing today and pay a little more tomorrow to change it
if it needs it, than to do a more complicated thing today that may never
be used anyway&quot; - Extreme Programming Explained, Embrace Change</i><br>
<br>
Best Regards, <br>
</font><img src=cid:_1_045C1C74045C17AC003B059948257521><font size=2 face="Arial"><b><br>
Joseph F. Syjuco</b> <br>
Team Lead <br>
M3 Alpha - e-Commerce <br>
__________________________________ <br>
Lawson PSSC, Inc. <br>
4th Floor, One World Square Building <br>
Upper McKinley Road, Taguig City 1634 <br>
Philippines</font><font size=3> <br>
</font><font size=1 face="Arial"><br>
Work: +63 (2) 976-3600 loc 79396<br>
Mobile: +63 (917) 855-3436<br>
Web: </font><a href=http://www.lawson.com/><font size=1 color=blue face="Arial"><u>http://www.lawson.com</u></font></a><font size=1 face="Arial">
<br>
Email: </font><a href=mailto:joseph.syjuco@lawson.com><font size=1 color=blue face="Arial"><u>joseph.syjuco@lawson.com</u></font></a><font size=1 face="Arial">
</font><font size=3><br>
<br>
</font>
<p><font size=1 color=#a9a9a9 face="Arial"><b>-------------------- Internet
e-Mail Disclaimer --------------------</b></font>
<p><font size=1 color=#a9a9a9 face="Arial">This e-mail and any files transmitted
with it are confidential and intended solely for the use of the individual
or entity to which they are addressed. If you are not the intended recipient
you are notified that any use, disclosure, copying or distribution of the
information is prohibited. In such case, you should destroy this message
and kindly notify the sender by reply e-mail. The views expressed in this
e-mail and any attachments are personal and, unless stated explicitly,
do not represent the views of Lawson Software, Inc. </font>
<br>
<br>
<br>
<table width=100%>
<tr valign=top>
<td width=40%><font size=1 face="sans-serif"><b>&quot;Oleg Oltar&quot;
&lt;oltarasenko@gmail.com&gt;</b> </font>
<p><font size=1 face="sans-serif">12/16/2008 06:41 PM</font>
<table border>
<tr valign=top>
<td bgcolor=white>
<div align=center><font size=1 face="sans-serif">Please respond to<br>
java-user@lucene.apache.org</font></div></table>
<br>
<td width=59%>
<table width=100%>
<tr valign=top>
<td>
<div align=right><font size=1 face="sans-serif">To</font></div>
<td><font size=1 face="sans-serif">java-user@lucene.apache.org</font>
<tr valign=top>
<td>
<div align=right><font size=1 face="sans-serif">cc</font></div>
<td>
<tr valign=top>
<td>
<div align=right><font size=1 face="sans-serif">Subject</font></div>
<td><font size=1 face="sans-serif">Lucene in Action book. Problems with
first example</font></table>
<br>
<table>
<tr valign=top>
<td>
<td></table>
<br></table>
<br>
<br>
<br><font size=2><tt>Hi!<br>
I am starting to learn Lucene.<br>
I am using Lucene in Action book for startup (It was recommended to me).
I<br>
tried to compile first example from that book, but my ide (I use eclipse,<br>
shows there are some errors in my code). I am just the beginner here, and
I<br>
really need to compile at least few programs.... before I can solve problems<br>
myself. So I decided to post here the whole code with my comments. Please<br>
help me!!!<br>
<br>
<br>
package org.main;<br>
<br>
<br>
import java.io.File;<br>
<br>
import java.io.FileReader;<br>
<br>
import java.io.IOException;<br>
<br>
import java.util.Date;<br>
<br>
<br>
import org.apache.lucene.analysis.standard.StandardAnalyzer;<br>
<br>
import org.apache.lucene.document.Document;<br>
<br>
import org.apache.lucene.document.Field;<br>
<br>
import org.apache.lucene.index.IndexWriter;<br>
<br>
<br>
<br>
<br>
public class SimpleIndexer {<br>
<br>
 /**<br>
<br>
 * @param args<br>
<br>
 */<br>
<br>
public static void main(String[] args) throws Exception{<br>
<br>
if (args.length !=2){<br>
<br>
throw new Exception(&quot;Usage: java&quot; + SimpleIndexer.class.getName()
+ &quot;&lt;indexDir&gt;<br>
&lt;dataDir&gt;&quot;);<br>
<br>
}<br>
<br>
<br>
 File indexDir = new File(args[0]);<br>
<br>
File dataDir = new File(args[1]);<br>
<br>
 long start = new Date().getTime();<br>
<br>
int numIndexed = index(indexDir, dataDir);<br>
<br>
long end = new Date().getTime();<br>
<br>
System.out.println(&quot;Indexing &quot; + numIndexed +&quot; took &quot;
+ (end - start) +<br>
&quot;milliseconds&quot;);<br>
<br>
}<br>
<br>
<br>
 @SuppressWarnings(&quot;deprecation&quot;)<br>
<br>
public static int index(File indexDir, File dataDir) throws IOException
{<br>
<br>
<br>
<br>
 if (!dataDir.exists() || !dataDir.isDirectory()){<br>
<br>
 throw new IOException(dataDir + &quot; doesn't exist or not a directory&quot;);<br>
<br>
<br>
<br>
 }<br>
<br>
 IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(),
true);<br>
// Not sure why eclipse crosses this<br>
<br>
 writer.setUseCompoundFile(false);<br>
<br>
<br>
<br>
 indexDirectory(writer, dataDir);<br>
<br>
 int numIndexed = writer.docCount(); // Not sure why eclipse crosses this<br>
<br>
 writer.optimize();<br>
<br>
 writer.close();<br>
<br>
<br>
<br>
<br>
<br>
 return numIndexed;<br>
<br>
}<br>
<br>
<br>
 private static void indexDirectory(IndexWriter writer, File dir)<br>
throwsIOException{<br>
<br>
File[] files = dir.listFiles();<br>
<br>
for (int i=0; i&lt; files.length; i++){<br>
<br>
File f = files[i];<br>
<br>
if(f.isDirectory()){<br>
<br>
indexDirectory(writer, f);<br>
<br>
 } else if(f.getName().endsWith(&quot;.txt&quot;)){<br>
<br>
indexFile(writer, f);<br>
<br>
}<br>
<br>
 }<br>
<br>
}<br>
<br>
<br>
 private static void indexFile(IndexWriter writer, File f) throwsIOException{<br>
<br>
if(f.isHidden() || !f.exists() || !f.canRead()){<br>
<br>
return;<br>
<br>
}<br>
<br>
System.out.println(&quot;Indexing &quot; + f.getCanonicalPath());<br>
<br>
 Document doc = new Document();<br>
<br>
doc.add(Field.Text(&quot;contents&quot;, new FileReader(f))); // Eclipse
says: The<br>
method Text(String, FileReader) is undefined for the type Field<br>
<br>
 doc.add(Field.Keyword(&quot;filename&quot;, f.getCanonicalPath())); //
Eclipse says:The<br>
method Keyword(String, String) is undefined for the type Field<br>
<br>
writer.addDocument(doc);<br>
<br>
 }<br>
<br>
<br>
<br>
<br>
<br>
}<br>
<br>
Please explain me why these errors are shown, and how to fix them. Maybe,<br>
the version of lucene used by author of the book, contained needed methods?<br>
So may it be that the book is outdated and can't be used for learning.
If<br>
so, please recommend me something that can help me to start with lucene.<br>
<br>
Thanks in advance,<br>
Oleg<br>
</tt></font>
<br>
--=_alternative 003B059D48257521_=--

--=_related 003B059B48257521_=--

From java-user-return-37718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 10:50:01 2008
Return-Path: <java-user-return-37718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82199 invoked from network); 16 Dec 2008 10:50:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 10:50:01 -0000
Received: (qmail 94049 invoked by uid 500); 16 Dec 2008 10:50:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94016 invoked by uid 500); 16 Dec 2008 10:50:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94005 invoked by uid 99); 16 Dec 2008 10:50:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 02:50:07 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 10:49:52 +0000
Received: by qw-out-2122.google.com with SMTP id 5so578603qwi.53
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 02:49:28 -0800 (PST)
Received: by 10.215.13.12 with SMTP id q12mr9065174qai.283.1229424568400;
        Tue, 16 Dec 2008 02:49:28 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 5sm20229ywl.35.2008.12.16.02.49.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 16 Dec 2008 02:49:27 -0800 (PST)
Message-Id: <41C23ED5-2BD0-4758-8BA3-9C61E7368F1A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene in Action book. Problems with first example
Date: Tue, 16 Dec 2008 05:49:24 -0500
References: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Lucene in Action is based on the 1.4.x release of Lucene, which is  
quite old by now and unfortunately some of the APIs have since been  
removed.

We are working on the 2nd edition to fix this, but in the mean-time  
you need to migrate to the new APIs when you see the errors.

Eg, if you look in the 1.9 javadocs for Field, it will tell you what  
new API to use instead of Field.Keyword, Field.Text, etc:

   http://lucene.apache.org/java/1_9_1/api/org/apache/lucene/document/Field.html

Mike

Oleg Oltar wrote:

> Hi!
> I am starting to learn Lucene.
> I am using Lucene in Action book for startup (It was recommended to  
> me). I
> tried to compile first example from that book, but my ide (I use  
> eclipse,
> shows there are some errors in my code). I am just the beginner  
> here, and I
> really need to compile at least few programs.... before I can solve  
> problems
> myself. So I decided to post here the whole code with my comments.  
> Please
> help me!!!
>
>
> package org.main;
>
>
> import java.io.File;
>
> import java.io.FileReader;
>
> import java.io.IOException;
>
> import java.util.Date;
>
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.document.Field;
>
> import org.apache.lucene.index.IndexWriter;
>
>
>
>
> public class SimpleIndexer {
>
> /**
>
> * @param args
>
> */
>
> public static void main(String[] args) throws Exception{
>
> if (args.length !=2){
>
> throw new Exception("Usage: java" + SimpleIndexer.class.getName() +  
> "<indexDir>
> <dataDir>");
>
> }
>
>
> File indexDir = new File(args[0]);
>
> File dataDir = new File(args[1]);
>
> long start = new Date().getTime();
>
> int numIndexed = index(indexDir, dataDir);
>
> long end = new Date().getTime();
>
> System.out.println("Indexing " + numIndexed +" took " + (end -  
> start) +
> "milliseconds");
>
> }
>
>
> @SuppressWarnings("deprecation")
>
> public static int index(File indexDir, File dataDir) throws  
> IOException {
>
>
>
> if (!dataDir.exists() || !dataDir.isDirectory()){
>
> throw new IOException(dataDir + " doesn't exist or not a directory");
>
>
>
> }
>
> IndexWriter writer = new IndexWriter(indexDir, new  
> StandardAnalyzer(), true);
> // Not sure why eclipse crosses this
>
> writer.setUseCompoundFile(false);
>
>
>
> indexDirectory(writer, dataDir);
>
> int numIndexed = writer.docCount(); // Not sure why eclipse crosses  
> this
>
> writer.optimize();
>
> writer.close();
>
>
>
>
>
> return numIndexed;
>
> }
>
>
> private static void indexDirectory(IndexWriter writer, File dir)
> throwsIOException{
>
> File[] files = dir.listFiles();
>
> for (int i=0; i< files.length; i++){
>
> File f = files[i];
>
> if(f.isDirectory()){
>
> indexDirectory(writer, f);
>
> } else if(f.getName().endsWith(".txt")){
>
> indexFile(writer, f);
>
> }
>
> }
>
> }
>
>
> private static void indexFile(IndexWriter writer, File f)  
> throwsIOException{
>
> if(f.isHidden() || !f.exists() || !f.canRead()){
>
> return;
>
> }
>
> System.out.println("Indexing " + f.getCanonicalPath());
>
> Document doc = new Document();
>
> doc.add(Field.Text("contents", new FileReader(f))); // Eclipse says:  
> The
> method Text(String, FileReader) is undefined for the type Field
>
> doc.add(Field.Keyword("filename", f.getCanonicalPath())); // Eclipse  
> says:The
> method Keyword(String, String) is undefined for the type Field
>
> writer.addDocument(doc);
>
> }
>
>
>
>
>
> }
>
> Please explain me why these errors are shown, and how to fix them.  
> Maybe,
> the version of lucene used by author of the book, contained needed  
> methods?
> So may it be that the book is outdated and can't be used for  
> learning. If
> so, please recommend me something that can help me to start with  
> lucene.
>
> Thanks in advance,
> Oleg


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 10:50:16 2008
Return-Path: <java-user-return-37719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82268 invoked from network); 16 Dec 2008 10:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 10:50:16 -0000
Received: (qmail 95684 invoked by uid 500); 16 Dec 2008 10:50:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95656 invoked by uid 500); 16 Dec 2008 10:50:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95645 invoked by uid 99); 16 Dec 2008 10:50:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 02:50:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 10:50:07 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E141430EFC16; Tue, 16 Dec 2008 03:49:45 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (unknown [138.210.10.225])
	by ehatchersolutions.com (Postfix) with ESMTP id 9F89230EFC16
	for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 03:49:43 -0700 (MST)
Message-Id: <B3613FAF-0044-4E1E-90A9-DF5148AE0E3D@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene in Action book. Problems with first example
Date: Tue, 16 Dec 2008 05:49:42 -0500
References: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

The first edition of Lucene in Action was written for Lucene 1.4.   
Lots has changed since then in the API, but the fundamentals are still  
sound.  The code can be easily updated to the newer API following the  
details I posted here:

    <http://markmail.org/message/4jupw4wnjn3gv7wh>

Do note that Lucene in Action 2nd edition is in progress and available  
through Manning's early access program here: <http://manning.com/hatcher3/ 
 >, and updated code is available there (it is coded to Lucene's  
2.9/3.0 API).

	Erik

On Dec 16, 2008, at 5:41 AM, Oleg Oltar wrote:

> Hi!
> I am starting to learn Lucene.
> I am using Lucene in Action book for startup (It was recommended to  
> me). I
> tried to compile first example from that book, but my ide (I use  
> eclipse,
> shows there are some errors in my code). I am just the beginner  
> here, and I
> really need to compile at least few programs.... before I can solve  
> problems
> myself. So I decided to post here the whole code with my comments.  
> Please
> help me!!!
>
>
> package org.main;
>
>
> import java.io.File;
>
> import java.io.FileReader;
>
> import java.io.IOException;
>
> import java.util.Date;
>
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.document.Field;
>
> import org.apache.lucene.index.IndexWriter;
>
>
>
>
> public class SimpleIndexer {
>
> /**
>
> * @param args
>
> */
>
> public static void main(String[] args) throws Exception{
>
> if (args.length !=2){
>
> throw new Exception("Usage: java" + SimpleIndexer.class.getName() +  
> "<indexDir>
> <dataDir>");
>
> }
>
>
> File indexDir = new File(args[0]);
>
> File dataDir = new File(args[1]);
>
> long start = new Date().getTime();
>
> int numIndexed = index(indexDir, dataDir);
>
> long end = new Date().getTime();
>
> System.out.println("Indexing " + numIndexed +" took " + (end -  
> start) +
> "milliseconds");
>
> }
>
>
> @SuppressWarnings("deprecation")
>
> public static int index(File indexDir, File dataDir) throws  
> IOException {
>
>
>
> if (!dataDir.exists() || !dataDir.isDirectory()){
>
> throw new IOException(dataDir + " doesn't exist or not a directory");
>
>
>
> }
>
> IndexWriter writer = new IndexWriter(indexDir, new  
> StandardAnalyzer(), true);
> // Not sure why eclipse crosses this
>
> writer.setUseCompoundFile(false);
>
>
>
> indexDirectory(writer, dataDir);
>
> int numIndexed = writer.docCount(); // Not sure why eclipse crosses  
> this
>
> writer.optimize();
>
> writer.close();
>
>
>
>
>
> return numIndexed;
>
> }
>
>
> private static void indexDirectory(IndexWriter writer, File dir)
> throwsIOException{
>
> File[] files = dir.listFiles();
>
> for (int i=0; i< files.length; i++){
>
> File f = files[i];
>
> if(f.isDirectory()){
>
> indexDirectory(writer, f);
>
> } else if(f.getName().endsWith(".txt")){
>
> indexFile(writer, f);
>
> }
>
> }
>
> }
>
>
> private static void indexFile(IndexWriter writer, File f)  
> throwsIOException{
>
> if(f.isHidden() || !f.exists() || !f.canRead()){
>
> return;
>
> }
>
> System.out.println("Indexing " + f.getCanonicalPath());
>
> Document doc = new Document();
>
> doc.add(Field.Text("contents", new FileReader(f))); // Eclipse says:  
> The
> method Text(String, FileReader) is undefined for the type Field
>
> doc.add(Field.Keyword("filename", f.getCanonicalPath())); // Eclipse  
> says:The
> method Keyword(String, String) is undefined for the type Field
>
> writer.addDocument(doc);
>
> }
>
>
>
>
>
> }
>
> Please explain me why these errors are shown, and how to fix them.  
> Maybe,
> the version of lucene used by author of the book, contained needed  
> methods?
> So may it be that the book is outdated and can't be used for  
> learning. If
> so, please recommend me something that can help me to start with  
> lucene.
>
> Thanks in advance,
> Oleg


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 10:53:47 2008
Return-Path: <java-user-return-37720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83934 invoked from network); 16 Dec 2008 10:53:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 10:53:46 -0000
Received: (qmail 6769 invoked by uid 500); 16 Dec 2008 10:53:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6743 invoked by uid 500); 16 Dec 2008 10:53:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6732 invoked by uid 99); 16 Dec 2008 10:53:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 02:53:51 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oltarasenko@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 10:53:29 +0000
Received: by ewy14 with SMTP id 14so3546879ewy.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 02:53:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4ULrgDyGkjrwHdkjt+Yye0VFr4N43h6cHJSi3L39yi4=;
        b=MbyFZLazG+Np9WX3C1BLOjak4S2d8B/pm5Mqi03XhfAl96Afo08Rwvt1w3MMQjOyr/
         qguBKbJTnk57HYLf3v26nedUXhCPKys/rDAvFXH69T20MKkpysbWzGulUYlFS8GPEdv9
         jKjowjrBSzG5BWB6rL4FBk2k+L5ojxPeNmsTE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=c6UdSylK7bOKOMbpYWjOuK8MlX/9DUVfpsjJY9eBv5uTGGhKGk82jZsS9fTR5UwOjJ
         ClgKJcln2Z2XTqVevywh8qxm4ygJe5qKg+hSRcLnlFM/0mPi+tgWJR9z44QZ98sqN4xP
         jALCHuZ9cRt7A6rXoIMeBmGeJiYnnolixiLAc=
Received: by 10.210.124.8 with SMTP id w8mr5770391ebc.166.1229424787464;
        Tue, 16 Dec 2008 02:53:07 -0800 (PST)
Received: by 10.210.86.14 with HTTP; Tue, 16 Dec 2008 02:53:07 -0800 (PST)
Message-ID: <b4fc2ad80812160253k4f8f9de0ke71f5d1e7f887b28@mail.gmail.com>
Date: Tue, 16 Dec 2008 12:53:07 +0200
From: "Oleg Oltar" <oltarasenko@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action book. Problems with first example
In-Reply-To: <OFAF6BFA0E.55D5DFAB-ON48257521.003AE52D-48257521.003B05A0@lawson.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_323_4348052.1229424787459"
References: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
	 <OFAF6BFA0E.55D5DFAB-ON48257521.003AE52D-48257521.003B05A0@lawson.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_323_4348052.1229424787459
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I posted errors as comments in the provided code..
Yes seems that the version in the book is a little bit old (as the book was
created in 2005)

So is there another manual which I can use to start? (Seems that examples in
the book, are carefully chosen for starters, and quite easy to understand)


Thanks,
Oleg
On Tue, Dec 16, 2008 at 12:44 PM, <Joseph.Syjuco@ph.lawson.com> wrote:

>
> Hi,
> What were the errors?
> Just a guess ... it may be possible that you are using the wrong lucene
> version - the one in the book is not the most updated one avbl today
>
>  *"XP is making a bet. It is betting that it is better to do a simple
> thing today and pay a little more tomorrow to change it if it needs it, than
> to do a more complicated thing today that may never be used anyway" -
> Extreme Programming Explained, Embrace Change*
>
> Best Regards,
> *
> Joseph F. Syjuco*
> Team Lead
> M3 Alpha - e-Commerce
> __________________________________
> Lawson PSSC, Inc.
> 4th Floor, One World Square Building
> Upper McKinley Road, Taguig City 1634
> Philippines
>
> Work: +63 (2) 976-3600 loc 79396
> Mobile: +63 (917) 855-3436
> Web: *http://www.lawson.com* <http://www.lawson.com/>
> Email: *joseph.syjuco@lawson.com* <joseph.syjuco@lawson.com>
>
>  *-------------------- Internet e-Mail Disclaimer --------------------*
>
> This e-mail and any files transmitted with it are confidential and intended
> solely for the use of the individual or entity to which they are addressed.
> If you are not the intended recipient you are notified that any use,
> disclosure, copying or distribution of the information is prohibited. In
> such case, you should destroy this message and kindly notify the sender by
> reply e-mail. The views expressed in this e-mail and any attachments are
> personal and, unless stated explicitly, do not represent the views of Lawson
> Software, Inc.
>
>
>  *"Oleg Oltar" <oltarasenko@gmail.com>*
>
> 12/16/2008 06:41 PM
>  Please respond to
> java-user@lucene.apache.org
>
>   To
> java-user@lucene.apache.org  cc
>   Subject
> Lucene in Action book. Problems with first example
>
>
>
>
> Hi!
> I am starting to learn Lucene.
> I am using Lucene in Action book for startup (It was recommended to me). I
> tried to compile first example from that book, but my ide (I use eclipse,
> shows there are some errors in my code). I am just the beginner here, and I
> really need to compile at least few programs.... before I can solve
> problems
> myself. So I decided to post here the whole code with my comments. Please
> help me!!!
>
>
> package org.main;
>
>
> import java.io.File;
>
> import java.io.FileReader;
>
> import java.io.IOException;
>
> import java.util.Date;
>
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.document.Field;
>
> import org.apache.lucene.index.IndexWriter;
>
>
>
>
> public class SimpleIndexer {
>
> /**
>
> * @param args
>
> */
>
> public static void main(String[] args) throws Exception{
>
> if (args.length !=2){
>
> throw new Exception("Usage: java" + SimpleIndexer.class.getName() +
> "<indexDir>
> <dataDir>");
>
> }
>
>
> File indexDir = new File(args[0]);
>
> File dataDir = new File(args[1]);
>
> long start = new Date().getTime();
>
> int numIndexed = index(indexDir, dataDir);
>
> long end = new Date().getTime();
>
> System.out.println("Indexing " + numIndexed +" took " + (end - start) +
> "milliseconds");
>
> }
>
>
> @SuppressWarnings("deprecation")
>
> public static int index(File indexDir, File dataDir) throws IOException {
>
>
>
> if (!dataDir.exists() || !dataDir.isDirectory()){
>
> throw new IOException(dataDir + " doesn't exist or not a directory");
>
>
>
> }
>
> IndexWriter writer = new IndexWriter(indexDir, new StandardAnalyzer(),
> true);
> // Not sure why eclipse crosses this
>
> writer.setUseCompoundFile(false);
>
>
>
> indexDirectory(writer, dataDir);
>
> int numIndexed = writer.docCount(); // Not sure why eclipse crosses this
>
> writer.optimize();
>
> writer.close();
>
>
>
>
>
> return numIndexed;
>
> }
>
>
> private static void indexDirectory(IndexWriter writer, File dir)
> throwsIOException{
>
> File[] files = dir.listFiles();
>
> for (int i=0; i< files.length; i++){
>
> File f = files[i];
>
> if(f.isDirectory()){
>
> indexDirectory(writer, f);
>
> } else if(f.getName().endsWith(".txt")){
>
> indexFile(writer, f);
>
> }
>
> }
>
> }
>
>
> private static void indexFile(IndexWriter writer, File f)
> throwsIOException{
>
> if(f.isHidden() || !f.exists() || !f.canRead()){
>
> return;
>
> }
>
> System.out.println("Indexing " + f.getCanonicalPath());
>
> Document doc = new Document();
>
> doc.add(Field.Text("contents", new FileReader(f))); // Eclipse says: The
> method Text(String, FileReader) is undefined for the type Field
>
> doc.add(Field.Keyword("filename", f.getCanonicalPath())); // Eclipse
> says:The
> method Keyword(String, String) is undefined for the type Field
>
> writer.addDocument(doc);
>
> }
>
>
>
>
>
> }
>
> Please explain me why these errors are shown, and how to fix them. Maybe,
> the version of lucene used by author of the book, contained needed methods?
> So may it be that the book is outdated and can't be used for learning. If
> so, please recommend me something that can help me to start with lucene.
>
> Thanks in advance,
> Oleg
>
>

------=_Part_323_4348052.1229424787459--

From java-user-return-37721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 10:57:24 2008
Return-Path: <java-user-return-37721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85805 invoked from network); 16 Dec 2008 10:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 10:57:24 -0000
Received: (qmail 10617 invoked by uid 500); 16 Dec 2008 10:57:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10581 invoked by uid 500); 16 Dec 2008 10:57:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10570 invoked by uid 99); 16 Dec 2008 10:57:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 02:57:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 10:57:15 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 80BFD30EFC17; Tue, 16 Dec 2008 03:56:54 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (unknown [138.210.10.225])
	by ehatchersolutions.com (Postfix) with ESMTP id 89A8A30EFC16
	for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 03:56:52 -0700 (MST)
Message-Id: <CB1DE298-C011-48EA-9AC4-C244BCD8509C@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <b4fc2ad80812160253k4f8f9de0ke71f5d1e7f887b28@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene in Action book. Problems with first example
Date: Tue, 16 Dec 2008 05:56:51 -0500
References: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com> <OFAF6BFA0E.55D5DFAB-ON48257521.003AE52D-48257521.003B05A0@lawson.com> <b4fc2ad80812160253k4f8f9de0ke71f5d1e7f887b28@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Dec 16, 2008, at 5:53 AM, Oleg Oltar wrote:
> So is there another manual which I can use to start? (Seems that  
> examples in
> the book, are carefully chosen for starters, and quite easy to  
> understand)

The API differences are all quite minor to adjust to the latest -  
hopefully the post I pointed you to will get you over the problems, or  
the new code download.  Feel free to ask with specifics when you  
encounter issues, either here or on the Manning forum for the book.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 10:57:41 2008
Return-Path: <java-user-return-37722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85924 invoked from network); 16 Dec 2008 10:57:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 10:57:38 -0000
Received: (qmail 12227 invoked by uid 500); 16 Dec 2008 10:57:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12199 invoked by uid 500); 16 Dec 2008 10:57:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12188 invoked by uid 99); 16 Dec 2008 10:57:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 02:57:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 10:57:29 +0000
Received: by qyk13 with SMTP id 13so3268958qyk.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 02:57:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=b2eYqRBejeusxBJKPLlWfZoGQtzu6CgkgyOxCmldkn8=;
        b=om6Z9hIo1ER6xDhn7M7LszFLFeL/efUs74Bzfhfz2la3Ow8F602G4n2QkOV85drnKa
         3gmfYSQfRllS759lJuCcJ+L1j2XFmcHwp7xaZTZ3Iqbqs9a8WNYQOYmsGBBnU8I+Woqu
         hXDmQ1tgO47eLW0JRO0lCoaidmWwxjWljyNHk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=UpqtZ4gMAAYomkUeIT7J2uCjNrKg7Y1i5Ul/tA9zuPKxoaQNTOXZpc9QUkE4sHPG3g
         vWOsAecgb5iuX2e1FYIVDW1EJ5hDr3qHV/7H/AxbvFgZhMUTn1O87RhjRxZACL5V+pY0
         97bX48FfZpFypMuySm7e6BcMRypfFj2mBTIZc=
Received: by 10.215.66.6 with SMTP id t6mr9065761qak.317.1229425028722;
        Tue, 16 Dec 2008 02:57:08 -0800 (PST)
Received: by 10.214.241.6 with HTTP; Tue, 16 Dec 2008 02:57:08 -0800 (PST)
Message-ID: <8c4e68610812160257p25745c74q266e7db91a7d4d94@mail.gmail.com>
Date: Tue, 16 Dec 2008 10:57:08 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: process dies with OOM after processing 10k docs
In-Reply-To: <f071061b0812160237k7da84b76x1f483b18f79bef05@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0812151028v58715748uec0f877cd58c348d@mail.gmail.com>
	 <8c4e68610812160224m265c5103t1484be2610df287d@mail.gmail.com>
	 <f071061b0812160237k7da84b76x1f483b18f79bef05@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm no expert on lucene internals, but maybe the posting lists just
happen to be what is around when your program hits the OOM error.  It
seems more likely that you are getting OOM because of all the caches
and other stuff you are doing.  I suggest giving it more memory or
cache fewer indexes, or try it without the memory index.



--
Ian.


On Tue, Dec 16, 2008 at 10:37 AM, jm <jmuguruza@gmail.com> wrote:
> yes I have tested with up to 512MB, althought I dont have the hprof
> dump file of those tests, they also got the OOM. I was just wondering
> whether having so many instances of FreqProxTermsWriter$PostingList
> around is a clear indicator of something I am not releasing or
> something.
>
> javier
>
> On Tue, Dec 16, 2008 at 11:24 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> Can you not just give the process some more memory?  128Mb seems very
>> low for what you are doing.
>>
>>
>> --
>> Ian.
>>
>>
>> On Mon, Dec 15, 2008 at 6:28 PM, jm <jmuguruza@gmail.com> wrote:
>>> Hi,
>>>
>>> I am having a memory issue with Lucene2.4. I am strating a process
>>> with 128MB of ram, this process handles incoming request from others,
>>> and indexes objects in a number of lucene indexes.
>>>
>>> My lucene docs, all have 6 fields:
>>> -one is small: Field.Store.YES, Field.Index.UN_TOKENIZED, Field.TermVector.YES
>>> -rest are:  Field.Store.YES, Field.Index.UN_TOKENIZED,
>>> Field.TermVector.NO, two of them can be quite large.
>>>
>>> I set field.setOmitNorms(true); for all fields.
>>> And I also set writer.setRAMBufferSizeMB(30);
>>>
>>> I have archived around 10k lucene docs, they are evenly distritubed in
>>> around 100 indexes. I keep a cache of max 60 indexes open, when a new
>>> one has to be open for writing, another one is closed.
>>> I have started the process with -XX:+HeapDumpOnOutOfMemoryError so I
>>> get a hprof file dumped when I get an OOM.
>>>
>>> I open the hprof file with visualvm and I can see the following:
>>> class                                                  instances           size
>>> FreqProxTermsWriter$PostingList         572672              20616192
>>> String                                                  186154
>>>      4467698
>>> char[]                                                  184689
>>>     30216520
>>>
>>> In the indexes directories, there are lock files left, as the process
>>> dies with the OOM, there are not prx files, but there are frq files (I
>>> cannot be sure 100% about that last one but I think so, I dont have
>>> access to the server now).
>>>
>>> I also add each doc into a MemoryIndex, and run a number of
>>>  memoryindex.search(lucBooleanQuery);
>>> I dont close these MemoryIndex or anything, they just go out of scope,
>>> I thought that would be enough to dispose of them.
>>>
>>> Obviously something in my code is wrong, does someone see anything
>>> suspicious here? Any idea where should I be begin looking in my code?
>>>
>>> thanks a lot
>>> javi
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 11:06:59 2008
Return-Path: <java-user-return-37723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92491 invoked from network); 16 Dec 2008 11:06:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 11:06:59 -0000
Received: (qmail 21761 invoked by uid 500); 16 Dec 2008 11:07:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21735 invoked by uid 500); 16 Dec 2008 11:07:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21724 invoked by uid 99); 16 Dec 2008 11:07:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 03:07:02 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.12] (HELO mail-gx0-f12.google.com) (209.85.217.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 11:06:48 +0000
Received: by gxk5 with SMTP id 5so2449614gxk.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 03:06:25 -0800 (PST)
Received: by 10.150.92.10 with SMTP id p10mr14600838ybb.45.1229425585351;
        Tue, 16 Dec 2008 03:06:25 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id i27sm266989elf.14.2008.12.16.03.06.23
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 16 Dec 2008 03:06:24 -0800 (PST)
Message-Id: <5F6C9908-728D-41F7-95C3-81AAEFF8F62B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <f071061b0812160237k7da84b76x1f483b18f79bef05@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: process dies with OOM after processing 10k docs
Date: Tue, 16 Dec 2008 06:06:22 -0500
References: <f071061b0812151028v58715748uec0f877cd58c348d@mail.gmail.com> <8c4e68610812160224m265c5103t1484be2610df287d@mail.gmail.com> <f071061b0812160237k7da84b76x1f483b18f79bef05@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


That class is what's used to buffer the added docs in IndexWriter.   
The heap dump seems to indicate you've got ~55 MB worth of buffered  
docs pending.  Since you allow a 30MB RAM buffer for each writer, and  
it seems like you allow up to 60 writers to be opened at once, it  
seems like in the worst case you need to allow for at least 60*30 =  
1800 MB RAM consumption just for the writers?

Mike

jm wrote:

> yes I have tested with up to 512MB, althought I dont have the hprof
> dump file of those tests, they also got the OOM. I was just wondering
> whether having so many instances of FreqProxTermsWriter$PostingList
> around is a clear indicator of something I am not releasing or
> something.
>
> javier
>
> On Tue, Dec 16, 2008 at 11:24 AM, Ian Lea <ian.lea@gmail.com> wrote:
>> Can you not just give the process some more memory?  128Mb seems very
>> low for what you are doing.
>>
>>
>> --
>> Ian.
>>
>>
>> On Mon, Dec 15, 2008 at 6:28 PM, jm <jmuguruza@gmail.com> wrote:
>>> Hi,
>>>
>>> I am having a memory issue with Lucene2.4. I am strating a process
>>> with 128MB of ram, this process handles incoming request from  
>>> others,
>>> and indexes objects in a number of lucene indexes.
>>>
>>> My lucene docs, all have 6 fields:
>>> -one is small: Field.Store.YES, Field.Index.UN_TOKENIZED,  
>>> Field.TermVector.YES
>>> -rest are:  Field.Store.YES, Field.Index.UN_TOKENIZED,
>>> Field.TermVector.NO, two of them can be quite large.
>>>
>>> I set field.setOmitNorms(true); for all fields.
>>> And I also set writer.setRAMBufferSizeMB(30);
>>>
>>> I have archived around 10k lucene docs, they are evenly  
>>> distritubed in
>>> around 100 indexes. I keep a cache of max 60 indexes open, when a  
>>> new
>>> one has to be open for writing, another one is closed.
>>> I have started the process with -XX:+HeapDumpOnOutOfMemoryError so I
>>> get a hprof file dumped when I get an OOM.
>>>
>>> I open the hprof file with visualvm and I can see the following:
>>> class                                                   
>>> instances           size
>>> FreqProxTermsWriter$PostingList         572672              20616192
>>> String                                                  186154
>>>     4467698
>>> char[]                                                  184689
>>>    30216520
>>>
>>> In the indexes directories, there are lock files left, as the  
>>> process
>>> dies with the OOM, there are not prx files, but there are frq  
>>> files (I
>>> cannot be sure 100% about that last one but I think so, I dont have
>>> access to the server now).
>>>
>>> I also add each doc into a MemoryIndex, and run a number of
>>> memoryindex.search(lucBooleanQuery);
>>> I dont close these MemoryIndex or anything, they just go out of  
>>> scope,
>>> I thought that would be enough to dispose of them.
>>>
>>> Obviously something in my code is wrong, does someone see anything
>>> suspicious here? Any idea where should I be begin looking in my  
>>> code?
>>>
>>> thanks a lot
>>> javi
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 11:08:53 2008
Return-Path: <java-user-return-37724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93117 invoked from network); 16 Dec 2008 11:08:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 11:08:53 -0000
Received: (qmail 24277 invoked by uid 500); 16 Dec 2008 11:08:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24236 invoked by uid 500); 16 Dec 2008 11:08:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24224 invoked by uid 99); 16 Dec 2008 11:08:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 03:08:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oltarasenko@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 11:08:42 +0000
Received: by ey-out-2122.google.com with SMTP id 6so364733eyi.53
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 03:08:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=C3A4aBAoYasnr7Z+ygCS8dVvU2c1OxZa2iI7kDgO1AY=;
        b=WYvlm9aTcCCzqy7Kr8cTSrZ4jCLsOR3+X86rXFkyaGu6RAYUVrXX5NLtDWKOw8SGuQ
         jjdf6YGS+RBnYi6AdvSMdN/wZTjtGXG3xGAj8mwb/FOshrn+qFBV50IVa4TWqardsstH
         RCiXdTicX0S+mEwlXbh1CgDxI3RcbMC/o/JbA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OatTiJuvsXtaYe4UgiqRIDbJWpJV0OO24/IbQtO7qljY/3oOVFayCfiYa7MAjkkkRx
         bLZ7eynvsiihc8Iw8/eg8SQH2nBLjeYLVE/lJ2OiSlDz7Yuf931QAo/KFqyhiXOVoxJ0
         XyJEE64RB5km/FvwIdJl0KgNIduM7cGKXz4yE=
Received: by 10.210.127.13 with SMTP id z13mr9093064ebc.29.1229425702188;
        Tue, 16 Dec 2008 03:08:22 -0800 (PST)
Received: by 10.210.86.14 with HTTP; Tue, 16 Dec 2008 03:08:22 -0800 (PST)
Message-ID: <b4fc2ad80812160308k2e9c8cb8n1e7aed5b6f8a0396@mail.gmail.com>
Date: Tue, 16 Dec 2008 13:08:22 +0200
From: "Oleg Oltar" <oltarasenko@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action book. Problems with first example
In-Reply-To: <CB1DE298-C011-48EA-9AC4-C244BCD8509C@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_465_31074974.1229425702190"
References: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
	 <OFAF6BFA0E.55D5DFAB-ON48257521.003AE52D-48257521.003B05A0@lawson.com>
	 <b4fc2ad80812160253k4f8f9de0ke71f5d1e7f887b28@mail.gmail.com>
	 <CB1DE298-C011-48EA-9AC4-C244BCD8509C@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_465_31074974.1229425702190
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks!!!
I didn't expect to get such quick answers. Just let me try to fix it :)

On Tue, Dec 16, 2008 at 12:56 PM, Erik Hatcher
<erik@ehatchersolutions.com>wrote:

>
> On Dec 16, 2008, at 5:53 AM, Oleg Oltar wrote:
>
>> So is there another manual which I can use to start? (Seems that examples
>> in
>> the book, are carefully chosen for starters, and quite easy to understand)
>>
>
> The API differences are all quite minor to adjust to the latest - hopefully
> the post I pointed you to will get you over the problems, or the new code
> download.  Feel free to ask with specifics when you encounter issues, either
> here or on the Manning forum for the book.
>
>        Erik
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_465_31074974.1229425702190--

From java-user-return-37725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 11:22:06 2008
Return-Path: <java-user-return-37725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98318 invoked from network); 16 Dec 2008 11:22:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 11:22:05 -0000
Received: (qmail 37790 invoked by uid 500); 16 Dec 2008 11:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37751 invoked by uid 500); 16 Dec 2008 11:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37740 invoked by uid 99); 16 Dec 2008 11:22:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 03:22:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 11:21:49 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3695383rvb.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 03:21:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=zMC847+onEIZg6eQ9MqqnqOXB4jZxu0o1A1PYK4qUQg=;
        b=TLJcbsxin5B12q2aj5KFfO3WD0mQdd4ECvoGfecDQ7gWKxkgyDu5aOwYTnHq8jvQEn
         55t/ggu7cZxhrc+dsLLLTzLci0u50f3oZ5teYRTpz07V0Lk8QG+YCH1kDVyT9e3oY9Es
         tcl46+5Z9X4j90/JV6ggR2GMDbj7+HRC4smlw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=w1+k6Bh/KcuNmoKiROWJH0TwaUhjapmd2DCJMHjqG7DV7NhBEU/mB38dCVceJahN/Q
         gPVWBPLbh52cjhX3JR75CGtjs7Ixe9cqFA7Z6dGwVGWdTOvx9G9rcOq4dSe/WNckeJ2O
         AhM0WZalwmOSUSYMINZqMK5Ax2sqrnbaO1ASk=
Received: by 10.142.163.13 with SMTP id l13mr3272908wfe.16.1229426489305;
        Tue, 16 Dec 2008 03:21:29 -0800 (PST)
Received: by 10.142.153.4 with HTTP; Tue, 16 Dec 2008 03:21:29 -0800 (PST)
Message-ID: <f071061b0812160321ref9a20dt2aae5d942fe45d7f@mail.gmail.com>
Date: Tue, 16 Dec 2008 12:21:29 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: process dies with OOM after processing 10k docs
In-Reply-To: <5F6C9908-728D-41F7-95C3-81AAEFF8F62B@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0812151028v58715748uec0f877cd58c348d@mail.gmail.com>
	 <8c4e68610812160224m265c5103t1484be2610df287d@mail.gmail.com>
	 <f071061b0812160237k7da84b76x1f483b18f79bef05@mail.gmail.com>
	 <5F6C9908-728D-41F7-95C3-81AAEFF8F62B@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

right...I was forgetting the 30MB flush by ram is PER writer....I'll
make some tests to verify this and fix accordingly...

Thanks!!

On Tue, Dec 16, 2008 at 12:06 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> That class is what's used to buffer the added docs in IndexWriter.  The heap
> dump seems to indicate you've got ~55 MB worth of buffered docs pending.
>  Since you allow a 30MB RAM buffer for each writer, and it seems like you
> allow up to 60 writers to be opened at once, it seems like in the worst case
> you need to allow for at least 60*30 = 1800 MB RAM consumption just for the
> writers?
>
> Mike
>
> jm wrote:
>
>> yes I have tested with up to 512MB, althought I dont have the hprof
>> dump file of those tests, they also got the OOM. I was just wondering
>> whether having so many instances of FreqProxTermsWriter$PostingList
>> around is a clear indicator of something I am not releasing or
>> something.
>>
>> javier
>>
>> On Tue, Dec 16, 2008 at 11:24 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>>
>>> Can you not just give the process some more memory?  128Mb seems very
>>> low for what you are doing.
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Mon, Dec 15, 2008 at 6:28 PM, jm <jmuguruza@gmail.com> wrote:
>>>>
>>>> Hi,
>>>>
>>>> I am having a memory issue with Lucene2.4. I am strating a process
>>>> with 128MB of ram, this process handles incoming request from others,
>>>> and indexes objects in a number of lucene indexes.
>>>>
>>>> My lucene docs, all have 6 fields:
>>>> -one is small: Field.Store.YES, Field.Index.UN_TOKENIZED,
>>>> Field.TermVector.YES
>>>> -rest are:  Field.Store.YES, Field.Index.UN_TOKENIZED,
>>>> Field.TermVector.NO, two of them can be quite large.
>>>>
>>>> I set field.setOmitNorms(true); for all fields.
>>>> And I also set writer.setRAMBufferSizeMB(30);
>>>>
>>>> I have archived around 10k lucene docs, they are evenly distritubed in
>>>> around 100 indexes. I keep a cache of max 60 indexes open, when a new
>>>> one has to be open for writing, another one is closed.
>>>> I have started the process with -XX:+HeapDumpOnOutOfMemoryError so I
>>>> get a hprof file dumped when I get an OOM.
>>>>
>>>> I open the hprof file with visualvm and I can see the following:
>>>> class                                                  instances
>>>>   size
>>>> FreqProxTermsWriter$PostingList         572672              20616192
>>>> String                                                  186154
>>>>    4467698
>>>> char[]                                                  184689
>>>>   30216520
>>>>
>>>> In the indexes directories, there are lock files left, as the process
>>>> dies with the OOM, there are not prx files, but there are frq files (I
>>>> cannot be sure 100% about that last one but I think so, I dont have
>>>> access to the server now).
>>>>
>>>> I also add each doc into a MemoryIndex, and run a number of
>>>> memoryindex.search(lucBooleanQuery);
>>>> I dont close these MemoryIndex or anything, they just go out of scope,
>>>> I thought that would be enough to dispose of them.
>>>>
>>>> Obviously something in my code is wrong, does someone see anything
>>>> suspicious here? Any idea where should I be begin looking in my code?
>>>>
>>>> thanks a lot
>>>> javi
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 11:33:23 2008
Return-Path: <java-user-return-37726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2877 invoked from network); 16 Dec 2008 11:33:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 11:33:21 -0000
Received: (qmail 53070 invoked by uid 500); 16 Dec 2008 11:33:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53021 invoked by uid 500); 16 Dec 2008 11:33:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52932 invoked by uid 99); 16 Dec 2008 11:33:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 03:33:24 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 11:33:07 +0000
Received: by qyk13 with SMTP id 13so3280101qyk.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 03:32:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=yzZMZQ/PhNqXrsBXsA2dHY4gNc5XSKQFi1cmpaRduQs=;
        b=qCNMeH02+k2sPZA9mumKDpt/UCRVzYdAjtpA7eMb5UFFor+VXLg5DWEo+0mW2tKDbF
         uKf9pBvYnuk7NazU9Zv316oxHJdLO5qhLj9MNlltan9IVOEFA5pakwAkcrp0J7ZWkLSP
         CXJ5W7dlvqlbPm8PHs1HykCFNjHZbnNrtxvoc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=dwRBITZpts2v+j4feE9k6Axz2V2vh0d38ws6MtM8pnT0FqeBdcK0WhF628pNlRRlSB
         HhWAVu1KCb4S7LhbS5uQ8Z5H1PD1Z1H3QeDQdwTdJLTx09sCwMdR40v4HBPguNj5ePye
         MKKrawxJTor/1XTa7w/SM2zxnTL5olI0KIxhs=
Received: by 10.214.78.8 with SMTP id a8mr9096329qab.304.1229427166740;
        Tue, 16 Dec 2008 03:32:46 -0800 (PST)
Received: by 10.214.241.6 with HTTP; Tue, 16 Dec 2008 03:32:46 -0800 (PST)
Message-ID: <8c4e68610812160332s742a0f1cwae6a5950e5ca61c5@mail.gmail.com>
Date: Tue, 16 Dec 2008 11:32:46 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Need Opinion!!
In-Reply-To: <21027642.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <21027642.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Would using lucene help improve performance?  Probably.  Lucene is
blindingly fast and 5,000,000 docs is not huge by lucene standards.
But we don't know how fast the existing implementation is.

Should you move to lucene?  Your call, to balance the expected
performance gain over the work involved.


If you do decide to move to lucene you should, as Erick said just
yesterday, be sure to "take off your DB hat".
http://www.nabble.com/Re%3A-searching-in-2-indexes-p21017290.html


--
Ian.

On Tue, Dec 16, 2008 at 5:41 AM, Shardul Bhatt <shardul.bhatt@gmail.com> wrote:
>
> Hi All,
>
> I am facing a scenrio where I am considering using Lucene over the existing
> implementation. The move to Lucene is going to require a lot of re-work so I
> though I better post this and ask for an expert opinion.
>
> Background
>  There are 3 tables.
>  1. University
>  2. Course
>  3. Subjects
>
>  A university can have multiple courses.
>  2 universities can offer the same course.
>  A course can have multiple subjects.
>  2 courses can have the same set of subjects.
>
> Current implemetation.
>        The current table is
>        uni_id, course_id, subject_id
>
>        I usually query for the uni_id based on combinations of course_id and
> subject_id. The "user" looks for a university based on subject or a course
> name.
>
> Proposed Implementation
>        The new table would be
>        uni_id, course_name, subject_name
>
>        Index(using Lucene) the table on course_name and subject_name and then look
> for the uni_id using Lucene Index.
>
> The size of the table is huge, test data has over 5000000 rows.
>
> Shall I move to Lucene? Would it help improving the performance?
>
> TIA.
> Shardul.
>
>
> --
> View this message in context: http://www.nabble.com/Need-Opinion%21%21-tp21027642p21027642.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 11:37:14 2008
Return-Path: <java-user-return-37727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4825 invoked from network); 16 Dec 2008 11:37:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 11:37:12 -0000
Received: (qmail 57996 invoked by uid 500); 16 Dec 2008 11:37:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57955 invoked by uid 500); 16 Dec 2008 11:37:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57944 invoked by uid 99); 16 Dec 2008 11:37:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 03:37:15 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 11:36:53 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id A4C457B300
	for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 03:36:32 -0800 (PST)
Message-Id: <143CFFFD-BC47-4B1D-85F1-69A908461A0D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <21027642.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Need Opinion!!
Date: Tue, 16 Dec 2008 06:36:31 -0500
References: <21027642.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Shardul,

I just was w/ a client who pretty much had the exact same scenario and  
Lucene (actually Solr) was just fine.  In fact, I think you could have  
a prototype of this up and running in Solr (Lucene-based Search  
Server) in a day or two.  As for performance, given each record is  
likely quite small, I don't think 5M records will be that big of a deal.

Of course, every situation is different, so I'd recommend spending a  
few days w/ Solr on it, or just setup some simple indexing/search  
tests with Lucene.

-Grant

On Dec 16, 2008, at 12:41 AM, Shardul Bhatt wrote:

>
> Hi All,
>
> I am facing a scenrio where I am considering using Lucene over the  
> existing
> implementation. The move to Lucene is going to require a lot of re- 
> work so I
> though I better post this and ask for an expert opinion.
>
> Background
> There are 3 tables.
> 1. University
> 2. Course
> 3. Subjects
>
> A university can have multiple courses.
> 2 universities can offer the same course.
> A course can have multiple subjects.
> 2 courses can have the same set of subjects.
>
> Current implemetation.
> 	The current table is
> 	uni_id, course_id, subject_id
> 	
> 	I usually query for the uni_id based on combinations of course_id and
> subject_id. The "user" looks for a university based on subject or a  
> course
> name.
> 	
> Proposed Implementation
> 	The new table would be
> 	uni_id, course_name, subject_name
> 	
> 	Index(using Lucene) the table on course_name and subject_name and  
> then look
> for the uni_id using Lucene Index.
> 	
> The size of the table is huge, test data has over 5000000 rows.
>
> Shall I move to Lucene? Would it help improving the performance?
>
> TIA.
> Shardul.
>
>
> -- 
> View this message in context: http://www.nabble.com/Need-Opinion%21%21-tp21027642p21027642.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 11:58:00 2008
Return-Path: <java-user-return-37728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11396 invoked from network); 16 Dec 2008 11:57:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 11:57:57 -0000
Received: (qmail 88289 invoked by uid 500); 16 Dec 2008 11:58:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88246 invoked by uid 500); 16 Dec 2008 11:58:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88235 invoked by uid 99); 16 Dec 2008 11:58:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 03:58:02 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oltarasenko@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 11:57:47 +0000
Received: by ey-out-2122.google.com with SMTP id 6so366751eyi.53
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 03:57:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zDlsQrtJXyJNlDIhG6lmFDLm7Fzk5eKqvitxXo+mhmk=;
        b=jtjd1/VQYKJ2JmbzcK2jdJhNJjY+nHq00L4geA/5M3pCEmcBdGf0BulkngrE3EC8ti
         vFsW/vffIWFBmi+2Dc3FOgU96rOeWBwsef1CWi9lXKs5cDhMEYps4za+sbxlyLWfF4HL
         9ntRieB8YuTXQ37IcDbk2vPGiISgpJzUCZUxY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FhCRvYn37z1bpiLAv+O+d37jdrk5thxw5RwsL2zs0tBit9duKGugkQPaNQ2EgPYw3h
         bup6RFb2eBEEyiwh+qH4BpBmXOk9lmwXXcSk3fYjv24xJJ6ab3EEvm7d8dNrauEnO6MP
         bPfPCLPCbcswvmQxSXOTAdo+795sNtBxJxz4U=
Received: by 10.210.34.2 with SMTP id h2mr4468887ebh.176.1229428646834;
        Tue, 16 Dec 2008 03:57:26 -0800 (PST)
Received: by 10.210.86.14 with HTTP; Tue, 16 Dec 2008 03:57:26 -0800 (PST)
Message-ID: <b4fc2ad80812160357s21f5198ev822d2b3608f50a50@mail.gmail.com>
Date: Tue, 16 Dec 2008 13:57:26 +0200
From: "Oleg Oltar" <oltarasenko@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action book. Problems with first example
In-Reply-To: <b4fc2ad80812160308k2e9c8cb8n1e7aed5b6f8a0396@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_938_17678677.1229428646820"
References: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
	 <OFAF6BFA0E.55D5DFAB-ON48257521.003AE52D-48257521.003B05A0@lawson.com>
	 <b4fc2ad80812160253k4f8f9de0ke71f5d1e7f887b28@mail.gmail.com>
	 <CB1DE298-C011-48EA-9AC4-C244BCD8509C@ehatchersolutions.com>
	 <b4fc2ad80812160308k2e9c8cb8n1e7aed5b6f8a0396@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_938_17678677.1229428646820
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Also maybe there are some free manuals/articles that you can recommend for
starters?

On Tue, Dec 16, 2008 at 1:08 PM, Oleg Oltar <oltarasenko@gmail.com> wrote:

> Thanks!!!
> I didn't expect to get such quick answers. Just let me try to fix it :)
>
>
> On Tue, Dec 16, 2008 at 12:56 PM, Erik Hatcher <erik@ehatchersolutions.com
> > wrote:
>
>>
>> On Dec 16, 2008, at 5:53 AM, Oleg Oltar wrote:
>>
>>> So is there another manual which I can use to start? (Seems that examples
>>> in
>>> the book, are carefully chosen for starters, and quite easy to
>>> understand)
>>>
>>
>> The API differences are all quite minor to adjust to the latest -
>> hopefully the post I pointed you to will get you over the problems, or the
>> new code download.  Feel free to ask with specifics when you encounter
>> issues, either here or on the Manning forum for the book.
>>
>>        Erik
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_938_17678677.1229428646820--

From java-user-return-37729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 12:19:07 2008
Return-Path: <java-user-return-37729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16069 invoked from network); 16 Dec 2008 12:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 12:19:07 -0000
Received: (qmail 9134 invoked by uid 500); 16 Dec 2008 12:19:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9105 invoked by uid 500); 16 Dec 2008 12:19:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9094 invoked by uid 99); 16 Dec 2008 12:19:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 04:19:12 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.50] (HELO n66.bullet.mail.sp1.yahoo.com) (98.136.44.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Dec 2008 12:18:49 +0000
Received: from [69.147.65.150] by n66.bullet.mail.sp1.yahoo.com with NNFMP; 16 Dec 2008 12:18:29 -0000
Received: from [69.147.84.114] by t7.bullet.mail.sp1.yahoo.com with NNFMP; 16 Dec 2008 12:18:29 -0000
Received: from [127.0.0.1] by omp203.mail.sp1.yahoo.com with NNFMP; 16 Dec 2008 12:18:29 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 373897.2570.bm@omp203.mail.sp1.yahoo.com
Received: (qmail 49545 invoked by uid 60001); 16 Dec 2008 12:18:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=3HDhRnZ/NH03UrzsukfkRNBpbKVtUzhCVcY1u7kftZ4bmSfCmNDf7Ny4cEkxMUrO8UVmut7iR0+o9GS5mccY1yAzb3pmhOQHn+VZoY8Kz/Vbjx+4vOit0jnktHecdqY2hq46T2X/TFZ8ykbXsHP1PUs7uVrd9T8hp/EQY6XjyBI=;
X-YMail-OSG: UkChFxYVM1m4YTIj6ZJDFIR819ov9Xo3IviOZMgghSUbxmjAlCW4T_sFnlSZO1i.Hlun._x2JIOiGQmguGAlESPXVnmbWiIeFAVNeZBVhcXLM3a1oh2hDxaMGjdgKMpvmaTaNnhrNxH6P2rifL6zOc_Kupc-
Received: from [122.55.80.194] by web45307.mail.sp1.yahoo.com via HTTP; Tue, 16 Dec 2008 04:18:28 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
Date: Tue, 16 Dec 2008 04:18:28 -0800 (PST)
From: Jay Joel Malaluan <exst_jmalaluan@yahoo.com>
Subject: Inquiry on Lucene Stemming
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1973574323-1229429908=:47599"
Message-ID: <283460.47599.qm@web45307.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1973574323-1229429908=:47599
Content-Type: text/plain; charset=us-ascii

Hi,


Can anyone comment if my understanding of the stemming process in Lucene is correct. From my testing using the SnowballAnalyzer, if I passed this word "flashing" it will be trimmed to a root word "flash" and this root word ("flash") will be the one searched not the original word "flashing".

Is there an API in Lucene or third-party APIs that can do the following, I passed the word "flash" instead it will search for "flashing", "flashed", "flashes" etc.?


Regards,
Jay Malaluan


      
--0-1973574323-1229429908=:47599--


From java-user-return-37730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 12:30:07 2008
Return-Path: <java-user-return-37730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24218 invoked from network); 16 Dec 2008 12:30:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 12:30:06 -0000
Received: (qmail 22778 invoked by uid 500); 16 Dec 2008 12:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22650 invoked by uid 500); 16 Dec 2008 12:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22637 invoked by uid 99); 16 Dec 2008 12:30:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 04:30:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.smith391@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 12:29:56 +0000
Received: by ug-out-1314.google.com with SMTP id c2so227616ugf.23
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 04:29:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=xV+BmeZbKT2ZMVMCIOullJM5pcWQuSTuPB/JwFJ6Es8=;
        b=shQALINZo4knfubDdbCGqD5OfAwKc8u+l9KgAPPx1QLsoiOT0g+cAe2v0PBJ3qg/s1
         dohvkaTRriv1176J/l+UgkWkDsmM97UAXVSuMdZx1/pvWGgueGFuKAiee+DEpEXZ80BZ
         xRQUpK9k4byOibgkhEpvjY81l9KRwgN2sV6VU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=VPNx13VMvaHCixNKYyony96VtL51T/Vxv9KTfBtm7FxmhtUMi3a0m17/TkP35zy696
         IU3LuCb9q4rl6xM3UBVxVvqmAz8agh9EqHJi6IYVNfwrFRA8z7TuGQwG2SzCP+4rex6Q
         nRarHTx9UX7E3r+H8s5+tBl+Cmq1Wlb1N0Gwo=
Received: by 10.67.116.18 with SMTP id t18mr2621930ugm.52.1229430576315;
        Tue, 16 Dec 2008 04:29:36 -0800 (PST)
Received: from ?192.168.40.23? ([213.222.196.41])
        by mx.google.com with ESMTPS id s8sm588219uge.18.2008.12.16.04.29.34
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 16 Dec 2008 04:29:35 -0800 (PST)
Message-ID: <49479F30.7080602@gmail.com>
Date: Tue, 16 Dec 2008 13:29:36 +0100
From: john smith <john.smith391@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: searched terms frequency question
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Each document found in a Lucene index contains scoring information 
however it doesn't provide (in the same easy way as scoring) an 
information about a number of occurrences of searched terms in its contents.
Using Lucene API I can check each searched term against its frequecies 
in each found document but I want to be sure that there is no better way 
to get information about frequences of searched terms in (each) found 
document.

Regards
John S.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 12:34:00 2008
Return-Path: <java-user-return-37731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26024 invoked from network); 16 Dec 2008 12:33:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 12:33:58 -0000
Received: (qmail 26223 invoked by uid 500); 16 Dec 2008 12:34:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26175 invoked by uid 500); 16 Dec 2008 12:34:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26164 invoked by uid 99); 16 Dec 2008 12:34:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 04:34:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.227.122.98] (HELO mail.garambrogne.net) (82.227.122.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 12:33:42 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.garambrogne.net (Postfix) with ESMTP id 7415B38E3B3
	for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 13:39:10 +0100 (CET)
Received: from mail.garambrogne.net ([127.0.0.1])
	by localhost (localhost.localdomain [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id pIXOVTuTRA8n for <java-user@lucene.apache.org>;
	Tue, 16 Dec 2008 13:39:08 +0100 (CET)
Received: by mail.garambrogne.net (Postfix, from userid 33)
	id EB0B238E3B4; Tue, 16 Dec 2008 13:39:07 +0100 (CET)
To: java-user@lucene.apache.org
Subject: Re: Inquiry on Lucene Stemming
MIME-Version: 1.0
Date: Tue, 16 Dec 2008 13:39:07 +0100
From: mathieu <mathieu@garambrogne.net>
Organization: Garambrogne
In-Reply-To: <283460.47599.qm@web45307.mail.sp1.yahoo.com>
References: <283460.47599.qm@web45307.mail.sp1.yahoo.com>
Message-ID: <3823d717fe2b46a118150db0c943f835@localhost>
X-Sender: mathieu@garambrogne.net
User-Agent: RoundCube Webmail/0.1b
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org


you stem the search query and while indexing, so only "flash" is indexed
when "flashing" is read.
If you don't wont to hurt your index with half word, you can use a second
index, just like for spelling :
http://blog.garambrogne.net/index.php?post/2008/03/07/A-lexicon-approach-for-Lucene-index

M.

On Tue, 16 Dec 2008 04:18:28 -0800 (PST), Jay Joel Malaluan
<exst_jmalaluan@yahoo.com> wrote:
> Hi,
> 
> 
> Can anyone comment if my understanding of the stemming process in Lucene
> is correct. From my testing using the SnowballAnalyzer, if I passed this
> word "flashing" it will be trimmed to a root word "flash" and this root
> word ("flash") will be the one searched not the original word "flashing".
> 
> Is there an API in Lucene or third-party APIs that can do the following,
I
> passed the word "flash" instead it will search for "flashing", "flashed",
> "flashes" etc.?
> 
> 
> Regards,
> Jay Malaluan
> 
> 
>       


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 12:41:44 2008
Return-Path: <java-user-return-37732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27558 invoked from network); 16 Dec 2008 12:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 12:41:44 -0000
Received: (qmail 39334 invoked by uid 500); 16 Dec 2008 12:41:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39306 invoked by uid 500); 16 Dec 2008 12:41:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39295 invoked by uid 99); 16 Dec 2008 12:41:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 04:41:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.smith391@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 12:41:34 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1572499wag.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 04:41:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=aoD/fu3eJrVrLRE2LRgd2qeF2eDWn+n3ilPe7Ouyt1s=;
        b=FWlRuJtwuvdI/PUFFrmjb4I0BNuyRut3lxsxJLMfvQj7uNgfFLJgjv255qq8iihYD5
         w1uu9tgunsnCn+YuYYKZOJ2ntvbPEQduYSZbNOSvxOwn5qEz5H0moNgVrixlkTpFpCcf
         GrQ0S7YkYYXS1C10uyyYYYXZ6vycCf4p+1qKw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=RZFw7rO7CS+0WtHdgwjwsTQYYJ3EuZS52yXCvfiqO6+rItrBjF4cJxlk5128mNrSJ0
         BWRMHe2I8bMtr+ATeSAReBdDeEF5+Xv9XlZ3g4It7sZLxJf7FeMl+LYXp4EgU3vmlN5/
         RBGVDx6oPXR+7mW/cBC3W39Lti4tkb4p7n4Zk=
Received: by 10.114.39.5 with SMTP id m5mr5662475wam.214.1229431273456;
        Tue, 16 Dec 2008 04:41:13 -0800 (PST)
Received: by 10.114.58.18 with HTTP; Tue, 16 Dec 2008 04:41:13 -0800 (PST)
Message-ID: <beabf55c0812160441r226c2c62j32a976a61d39655b@mail.gmail.com>
Date: Tue, 16 Dec 2008 13:41:13 +0100
From: "john smith" <john.smith391@gmail.com>
To: java-user@lucene.apache.org
Subject: searched terms frequency question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1531_30168148.1229431273450"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1531_30168148.1229431273450
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi

Each document found in a Lucene index contains scoring information however
it doesn't provide (in the same easy way as scoring) an information about a
number of occurrences of searched terms in its contents.
Using Lucene API I can check each searched term against its frequecies in
each found document but I want to be sure that there is no better way to get
information about frequences of searched terms in (each) found document.

Regards
John S.

------=_Part_1531_30168148.1229431273450--

From java-user-return-37733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 12:56:36 2008
Return-Path: <java-user-return-37733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31962 invoked from network); 16 Dec 2008 12:56:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 12:56:36 -0000
Received: (qmail 62886 invoked by uid 500); 16 Dec 2008 12:56:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62854 invoked by uid 500); 16 Dec 2008 12:56:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62843 invoked by uid 99); 16 Dec 2008 12:56:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 04:56:41 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 12:56:20 +0000
Received: by qw-out-2122.google.com with SMTP id 5so586417qwi.53
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 04:55:58 -0800 (PST)
Received: by 10.214.115.1 with SMTP id n1mr9141375qac.374.1229432158082;
        Tue, 16 Dec 2008 04:55:58 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 8sm66963ywg.23.2008.12.16.04.55.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 16 Dec 2008 04:55:57 -0800 (PST)
Message-Id: <15A69C86-A210-40F7-8963-4ED4384D0B05@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <beabf55c0812160441r226c2c62j32a976a61d39655b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: searched terms frequency question
Date: Tue, 16 Dec 2008 07:55:54 -0500
References: <beabf55c0812160441r226c2c62j32a976a61d39655b@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


There was a similar question recently on java-user (I haven't tried to  
find it).

I think to do this efficiently it'd be best to make your own Query  
impl that tracks this information as its scoring.

Mike

john smith wrote:

> Hi
>
> Each document found in a Lucene index contains scoring information  
> however
> it doesn't provide (in the same easy way as scoring) an information  
> about a
> number of occurrences of searched terms in its contents.
> Using Lucene API I can check each searched term against its  
> frequecies in
> each found document but I want to be sure that there is no better  
> way to get
> information about frequences of searched terms in (each) found  
> document.
>
> Regards
> John S.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 13:05:35 2008
Return-Path: <java-user-return-37734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36976 invoked from network); 16 Dec 2008 13:05:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 13:05:35 -0000
Received: (qmail 85208 invoked by uid 500); 16 Dec 2008 13:05:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85182 invoked by uid 500); 16 Dec 2008 13:05:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85171 invoked by uid 99); 16 Dec 2008 13:05:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 05:05:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 13:05:19 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4D8A130EFC17; Tue, 16 Dec 2008 06:04:59 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (unknown [138.210.10.225])
	by ehatchersolutions.com (Postfix) with ESMTP id 61DF530EFC16
	for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 06:04:58 -0700 (MST)
Message-Id: <AA480131-57FF-4ABA-9430-20BAAC486E0B@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <b4fc2ad80812160357s21f5198ev822d2b3608f50a50@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene in Action book. Problems with first example
Date: Tue, 16 Dec 2008 08:04:55 -0500
References: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com> <OFAF6BFA0E.55D5DFAB-ON48257521.003AE52D-48257521.003B05A0@lawson.com> <b4fc2ad80812160253k4f8f9de0ke71f5d1e7f887b28@mail.gmail.com> <CB1DE298-C011-48EA-9AC4-C244BCD8509C@ehatchersolutions.com> <b4fc2ad80812160308k2e9c8cb8n1e7aed5b6f8a0396@mail.gmail.com> <b4fc2ad80812160357s21f5198ev822d2b3608f50a50@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Dec 16, 2008, at 6:57 AM, Oleg Oltar wrote:

> Also maybe there are some free manuals/articles that you can  
> recommend for
> starters?

There's a bunch of stuff listed here: <http://wiki.apache.org/lucene-java/Resources 
 >

Lucene has been changing so rapidly lately that I'm not aware of any  
articles that are entirely up-to-date API-wise, but again in general  
most of those API changes are pretty minor and actually well  
documented in Lucene's CHANGES.txt and deprecation warnings (upgrading  
from 1.4 to 1.9, for example, primed users with nice deprecation  
warnings with what was going to be removed).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 14:05:33 2008
Return-Path: <java-user-return-37735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73618 invoked from network); 16 Dec 2008 14:05:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 14:05:33 -0000
Received: (qmail 62871 invoked by uid 500); 16 Dec 2008 14:05:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62846 invoked by uid 500); 16 Dec 2008 14:05:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62835 invoked by uid 99); 16 Dec 2008 14:05:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 06:05:38 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 14:05:23 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1442232fgb.27
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 06:05:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=acrVcM10bpCGPxxZ1oN0stKW9s7sYn36OOy3jOmTVVg=;
        b=UBI0tjJ2mBfc3wlxRRqPic6sbW74zppU1yq9wRs0yHeTrVCOTIYvDg5aWPef8avoy9
         rZIVN+jheAU64xWnmiJB9aYkHFLVG0Iv4+LMUOsxoo3/UUDe3rm9Nu3IAPP4XunMu/KV
         hM3gpFF0RWN4cuSr1BSqHfMBzJopXl+cDUzrw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=L/LsmfktdOm1mLco+kczh7eVpf3spDpDVrZixEu5zq/c/ABYWKfXacO8U4BVx7rF3M
         JNKXf/DoDM6NC+OEwd9FnfZC/LEUeNl4PSPED305nZUtcmD2oBE2UkatZBRekFjM1/ss
         6QX0wINtOQE3F4QpbAyKFU6vKkU0z/kBB8HWg=
Received: by 10.86.57.9 with SMTP id f9mr4568903fga.48.1229436303587;
        Tue, 16 Dec 2008 06:05:03 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Tue, 16 Dec 2008 06:05:03 -0800 (PST)
Message-ID: <359a92830812160605t34bb9bf9vd6f983655ef84e57@mail.gmail.com>
Date: Tue, 16 Dec 2008 09:05:03 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Data Structures
In-Reply-To: <494738A8.3020609@tachyontech.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67049_5152477.1229436303562"
References: <4945E7ED.4070002@tachyontech.net>
	 <AB8937DF-282F-47F7-827C-4C39F2F323BB@apache.org>
	 <494738A8.3020609@tachyontech.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67049_5152477.1229436303562
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I question whether you *can* make this decision based upon the data
structure being used. I can code such that *any* data structure you care
to name will not perform well under some conditions <G>.

Not to mention the other characteristics of a search engine that get in
the way of even the very most efficient structure.

The only way I have ever gained confidence is to create a representative
dataset and measure. Which also has its perils, but....

Although I'll gladly admit that no amount of clever programming can
make up for a fundamentally flawed architecture.

But there are some pretty bright people coding all this up. You might get
more comfortable by looking at some of the success stories on the website.

But in the end, it's a "best guess" kind of thing. Perhaps you could explain
what you plan to do and folks with more experience than me might be able
to offer insights...

Best
Erick

On Tue, Dec 16, 2008 at 12:12 AM, Prafulla Kiran
<prafulla@tachyontech.net>wrote:

> Well, I have seen this link many times before. It doesn't really explain
> the data structures part of it. Perhaps I should have asked my question this
> way:
> "What data structures are being used by Lucene to read the posting lists
> from the index ?" .
> My guess is that a hash table is being used for reading the postings of
> each term, with the key being the term and the hash value being a multi
> level skip list.
> Please correct me if I am wrong.
>
> Regards,
> Prafulla
>
>
> Grant Ingersoll wrote:
>
>> http://lucene.apache.org/java/2_4_0/fileformats.html
>>
>> On Dec 15, 2008, at 12:15 AM, Prafulla Kiran wrote:
>>
>>  Hi Everybody,
>>>
>>> Could someone please explain the actual data structures being used by
>>> Lucene for storing the postings list in the index. I see a file called
>>> MultileveSkipListReader and MultiLevelSkipListWriter. Is lucene using
>>> Multi-level skip lists behind the scenes, for maintaining the index ? I want
>>> to understand clearly the actual data structure being used by lucene for
>>> storing the index and postings list, so that I can deduce the complexity for
>>> reading from that datastructure and decide whether my application would
>>> scale as per my requirements while using Lucene. So, someone please give me
>>> some pointers to the data structures being used by Lucene .
>>>
>>> TIA,
>>> Prafulla
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> --------------------------
>> Grant Ingersoll
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> ------------------------------------------------------------------------
>>
>>
>> No virus found in this incoming message.
>> Checked by AVG - http://www.avg.com Version: 8.0.176 / Virus Database:
>> 270.9.18/1848 - Release Date: 12/14/2008 12:28 PM
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_67049_5152477.1229436303562--

From java-user-return-37736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 14:14:43 2008
Return-Path: <java-user-return-37736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81408 invoked from network); 16 Dec 2008 14:14:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 14:14:43 -0000
Received: (qmail 79637 invoked by uid 500); 16 Dec 2008 14:14:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79360 invoked by uid 500); 16 Dec 2008 14:14:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79349 invoked by uid 99); 16 Dec 2008 14:14:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 06:14:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 14:14:34 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1444075fgb.27
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 06:14:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ttImwCzAfZY0FaLfHlgQfL7tSNItlAPgGamRQtjb9oY=;
        b=wIVKHt3ZzG1K9AjBDbXbvU8PwJeqyTa1nFaQCRZAcu9jJSmQWQAsLUqLmTy51r6WRf
         nzjtFOGIvY9b2GY2EkEiiyMrR2B8lHAy556yIRwD06iSZlx/2BstNkQjqpOZWU++eGud
         N85vjiEWKBeFXomPmp7qzukTgrGErIvY6AHpA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ChbrwNuNoqXmPO3qR26bbfoVynjj8IDArDqooT5AHM5dTiKWhmZZjamsQjdwV/S7hL
         m5Sx0rQq5uuq5V5515i10as7NFtAfQE+qCDyWS9VwXm6X+yaLE42WmslP3jMIYwXhuzo
         b+0q8w8C8/gRybUy9bvFsutgwK28gg5MUPAOA=
Received: by 10.86.23.18 with SMTP id 18mr2595972fgw.6.1229436853576;
        Tue, 16 Dec 2008 06:14:13 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Tue, 16 Dec 2008 06:14:13 -0800 (PST)
Message-ID: <359a92830812160614k28e98a38he252cceb9f53c3be@mail.gmail.com>
Date: Tue, 16 Dec 2008 09:14:13 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inquiry on Lucene Stemming
In-Reply-To: <283460.47599.qm@web45307.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67244_30277817.1229436853562"
References: <283460.47599.qm@web45307.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67244_30277817.1229436853562
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why do you want to do this? The reason I ask is that you're
making each clause very complex.....

For a single term, it's not very complex, but for something like
((A AND B) OR (C AND D)) NOT X

expanding A, B, C, D and X to, possibly many terms is...er...ugly.

You could think about ngrams, although I confess I've only seen
this on the lists, haven't worked with it myself.

If your goal is to be able to search exact match words (i.e. you
need to find "flash" when exactly "flash" was indexed, not "flashing")
there are better strategies....

So a bit more explanation of the problem could perhaps generate more
helpful responses.

Best
Erick

On Tue, Dec 16, 2008 at 7:18 AM, Jay Joel Malaluan <exst_jmalaluan@yahoo.com
> wrote:

> Hi,
>
>
> Can anyone comment if my understanding of the stemming process in Lucene is
> correct. From my testing using the SnowballAnalyzer, if I passed this word
> "flashing" it will be trimmed to a root word "flash" and this root word
> ("flash") will be the one searched not the original word "flashing".
>
> Is there an API in Lucene or third-party APIs that can do the following, I
> passed the word "flash" instead it will search for "flashing", "flashed",
> "flashes" etc.?
>
>
> Regards,
> Jay Malaluan
>
>
>

------=_Part_67244_30277817.1229436853562--

From java-user-return-37737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 14:45:32 2008
Return-Path: <java-user-return-37737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98593 invoked from network); 16 Dec 2008 14:45:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 14:45:32 -0000
Received: (qmail 17851 invoked by uid 500); 16 Dec 2008 14:45:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17824 invoked by uid 500); 16 Dec 2008 14:45:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17813 invoked by uid 99); 16 Dec 2008 14:45:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 06:45:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FS_REPLICA,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 14:45:16 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3785137rvb.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 06:44:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=TRZR3YmmF4zGpaxWgMZzwHkCh52OoOfX/cpbtYKSFiA=;
        b=ik2KzsaLkZyfscQmzIMvp9qmtGIgjvjq/VOUqv9AOLcZqT6MUn0o4RqInOIssom7hV
         TnDLHQqJGp4a6m4z5gzR3+59KRR9o3d8oPOEXjEdeefH5sTM33VpbyX6LE2GQmhlrOAp
         wFlNb+B8f3h5+hrqA35ma88IEv+xoAAK5kfIg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=h340NmK5IYL4g/x6Vr0iNoAon4Mv85jYtsznwHQBs/bUdL2dx2HNTZY/ILJD5cQieN
         zWshEoVuFroSRd4o0x3qn7UZBHr/L2wXKV7woHKMzGxGjW9xoS66WgYXhLY4RVzzWi3d
         cMJ5UIsI4EcaOk2H9YVjgFrAAbWYehYn/NIPI=
Received: by 10.140.208.17 with SMTP id f17mr4369763rvg.74.1229438696137;
        Tue, 16 Dec 2008 06:44:56 -0800 (PST)
Received: by 10.140.43.6 with HTTP; Tue, 16 Dec 2008 06:44:56 -0800 (PST)
Message-ID: <c68e39170812160644r1c430ddmd297587024f04b2e@mail.gmail.com>
Date: Tue, 16 Dec 2008 09:44:56 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: replication question
In-Reply-To: <652776090812152204g3fd47793ta77a2fb09ce30296@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <652776090812152204g3fd47793ta77a2fb09ce30296@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Dec 16, 2008 at 1:04 AM, Michael Stoppelman <stopman@gmail.com> wrote:
> I've got a question from Doug's original email about replication (
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html):
>
> "1. On the index master, periodically checkpoint the index. Every minute or
> so the IndexWriter is closed and a 'cp -lr index index.DATE' command is
> executed from Java, where DATE is the current date and time. This
> efficiently makes a copy of the index when its in a consistent state by
> constructing a tree of hard links. If Lucene re-writes any files (e.g., the
> segments file) a new inode is created and the copy is unchanged."
>
> Is closing the IndexWriter really a requirement on taking a snapshot? Or can
> one take a snapshot on an index being written, I've done this in my
> development environment and it seems to work fine w/o closing the
> IndexWriter.

There are subtle race conditions if you try to do this with a changing index.
At any instance in time, the index should be consistent, *but* you
can't actually make a snapshot instantaneously.

So this is doable, but it would require some complex retry logic like
IndexReader has when opening an index.

> Also the solr replication shell scripts don't seem to worry
> about this either.

Solr takes snapshots when it knows it's not updating the index (new
index changes are internally blocked when calling snapshooter).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 15:01:01 2008
Return-Path: <java-user-return-37738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7881 invoked from network); 16 Dec 2008 15:01:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 15:01:00 -0000
Received: (qmail 43278 invoked by uid 500); 16 Dec 2008 15:01:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43240 invoked by uid 500); 16 Dec 2008 15:01:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43229 invoked by uid 99); 16 Dec 2008 15:01:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 07:01:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.76.80.74] (HELO ambria.tchmachines.com) (208.76.80.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 15:00:51 +0000
Received: from [70.88.250.221] (helo=VujaDe)
	by ambria.tchmachines.com with esmtpa (Exim 4.69)
	(envelope-from <pjohnstone@dejavunet.net>)
	id 1LCbPR-0007TG-Ke
	for java-user@lucene.apache.org; Tue, 16 Dec 2008 10:00:29 -0500
From: "Patrick Johnstone" <pjohnstone@dejavunet.net>
To: <java-user@lucene.apache.org>
Subject: Order of fields returned by Document.getFields()
Date: Tue, 16 Dec 2008 10:00:25 -0500
Organization: DejaVu Networks
Message-ID: <DB201A57A2CA49D2860FDA4AF27A9F24@VujaDe>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Aclfjv7am6ns/wB2STW2HH/jrfzPZw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - ambria.tchmachines.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - dejavunet.net
X-Virus-Checked: Checked by ClamAV on apache.org


I'm using Lucene via Solr and recently upgraded from an early Summer nightly
build to the released version of Solr 1.3 (which seems to use something in
the neighborhood of Lucene 2.3).  I'm posting this here because I believe
that my issue is with Lucene, not Solr.

After the upgrade, I noticed that the order of fields being returned for
documents had changed.  Previously, the order of fields being returned was
the same as the order in which they were added to the document (which is
what's stated in the FAQ and other places I came across but not specifically
spelled out in the Javadoc).
Now, the fields always seem to come back in lexicographic order by field
name.

I believe (but am by no means sure) that this is being caused by the
following bit of code in DocFieldProcessorPerThread.java:

    // If we are writing vectors then we must visit
    // fields in sorted order so they are written in
    // sorted order.  TODO: we actually only need to
    // sort the subset of fields that have vectors
    // enabled; we could save [small amount of] CPU
    // here.
    quickSort(fields, 0, fieldCount-1);

    for(int i=0;i<fieldCount;i++)
      fields[i].consumer.processFields(fields[i].fields,
fields[i].fieldCount);

This code seems to sort the fields of the document into order before
processing them.  If this is true, then the original field order is lost and
can't ever be recovered.  (None of the fields in our index use TermVectors.)

My questions are:  Is my reading of this behavior correct?  ...and...
if so:  Is there some other way to get the original order back?

The application that I'm building took some advantage of the fact that the
fields were returned in the orignial order (becuase the order had some
meaning) and it may be difficult for me to work around this change.

Patrick Johnstone
DejaVu Networks
pjohnstone@dejavunet.net


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 15:52:35 2008
Return-Path: <java-user-return-37739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67035 invoked from network); 16 Dec 2008 15:52:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 15:52:35 -0000
Received: (qmail 75029 invoked by uid 500); 16 Dec 2008 15:52:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74934 invoked by uid 500); 16 Dec 2008 15:52:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74923 invoked by uid 99); 16 Dec 2008 15:52:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 07:52:40 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 15:52:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCcDH-00048A-8Z
	for java-user@lucene.apache.org; Tue, 16 Dec 2008 07:51:59 -0800
Message-ID: <21035723.post@talk.nabble.com>
Date: Tue, 16 Dec 2008 07:51:59 -0800 (PST)
From: Doug Leeper <dougleeper@yahoo.com>
To: java-user@lucene.apache.org
Subject: newbie question on querying on multiple attributes
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: dougleeper@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am using Hibernate as my persistence layer and have recently found
Hibernate Search and Lucene as a possible solution to my full text search. 
However, I am a little fuzzy on what exactly needs to be done in my
situation.

In a nutshell, I have a Business object that has multiple of attributes that
needs to be indexed (name, summary, products, services, etc)

I would like to provide functionality in my web app that provides a user a
single text field that would match Businesses against all the identified
attributes.

I am assuming there are more than one option...but what is the best approach
to accomplishing this scenario?

I am assuming that i need to create different terms for each indexed
attribute...correct?  If so, do I need to create a BooleanQuery for each
term?

I am sure there is an example out there...but I haven't found one or have
misunderstood what I have seen so far.  So if there is a something out
there, could someone direct me to it?

Thanks in advance,
- Doug
-- 
View this message in context: http://www.nabble.com/newbie-question-on-querying-on-multiple-attributes-tp21035723p21035723.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 15:58:14 2008
Return-Path: <java-user-return-37740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68992 invoked from network); 16 Dec 2008 15:58:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 15:58:14 -0000
Received: (qmail 88058 invoked by uid 500); 16 Dec 2008 15:58:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88036 invoked by uid 500); 16 Dec 2008 15:58:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88025 invoked by uid 99); 16 Dec 2008 15:58:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 07:58:19 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stephane.nicoll@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 15:58:05 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1842273fkq.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 07:57:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=54bRTypbKhvkVJChfLl4wTio3tjF4j8zso7vN5SEkWU=;
        b=NKXRbhuwRNkb9HS+6TIhwp5iiZCxOIFEA2HHNdvc9VadahYCjFtRTdXPJij2wWFlWC
         Cd1lSySe8zC3eezOvthIQGspnCqU9ZVnlTVwLfFwfqUpv3OFulbOzK3nave7KAddByM4
         kbxuNUN+onjf9Wb+eUiF4Zu5fahzIFC0i2aRQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=XUpcuH+G31AlhyUIHW+4mXiyQ+jKr1kQHHemxyWGVLLl3uc7xnLIJMBd52scqAtGxs
         NilOns3bveNARWOVoMDjDe/BvFZpxqAawHGflKbQ1SxI8KJaX5VLflLuE0XSQB4hyz9k
         I7fczowdsKCIkOIN4wtLZHcZKKaM3WqJzaehE=
Received: by 10.223.126.203 with SMTP id d11mr8082480fas.8.1229443064890;
        Tue, 16 Dec 2008 07:57:44 -0800 (PST)
Received: by 10.223.108.137 with HTTP; Tue, 16 Dec 2008 07:57:44 -0800 (PST)
Message-ID: <541f12ca0812160757i595ec94cx786705d846909651@mail.gmail.com>
Date: Tue, 16 Dec 2008 16:57:44 +0100
From: "Stephane Nicoll" <stephane.nicoll@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: newbie question on querying on multiple attributes
In-Reply-To: <21035723.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49508_22664983.1229443064885"
References: <21035723.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49508_22664983.1229443064885
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Consider the use of the ClassBridge in Hibernate Search. Very useful. It
basically allows you to merge multiple fields of your hibernate entity into
a single lucene field. Once this is done, you can query this single field
from lucene without the need for BooleanQuery.

HTH,
St=E9phane



On Tue, Dec 16, 2008 at 4:51 PM, Doug Leeper <dougleeper@yahoo.com> wrote:

>
> I am using Hibernate as my persistence layer and have recently found
> Hibernate Search and Lucene as a possible solution to my full text search=
.
> However, I am a little fuzzy on what exactly needs to be done in my
> situation.
>
> In a nutshell, I have a Business object that has multiple of attributes
> that
> needs to be indexed (name, summary, products, services, etc)
>
> I would like to provide functionality in my web app that provides a user =
a
> single text field that would match Businesses against all the identified
> attributes.
>
> I am assuming there are more than one option...but what is the best
> approach
> to accomplishing this scenario?
>
> I am assuming that i need to create different terms for each indexed
> attribute...correct?  If so, do I need to create a BooleanQuery for each
> term?
>
> I am sure there is an example out there...but I haven't found one or have
> misunderstood what I have seen so far.  So if there is a something out
> there, could someone direct me to it?
>
> Thanks in advance,
> - Doug
> --
> View this message in context:
> http://www.nabble.com/newbie-question-on-querying-on-multiple-attributes-=
tp21035723p21035723.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Large Systems Suck: This rule is 100% transitive. If you build one, you
suck" -- S.Yegge

------=_Part_49508_22664983.1229443064885--

From java-user-return-37741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 16:07:15 2008
Return-Path: <java-user-return-37741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71055 invoked from network); 16 Dec 2008 16:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 16:07:15 -0000
Received: (qmail 2799 invoked by uid 500); 16 Dec 2008 16:07:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2760 invoked by uid 500); 16 Dec 2008 16:07:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2749 invoked by uid 99); 16 Dec 2008 16:07:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 08:07:20 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.126.188] (HELO moutng.kundenserver.de) (212.227.126.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 16:07:05 +0000
Received: from aleppo.local (81-232-34-14-no35.tbcn.telia.com [81.232.34.14])
	by mrelayeu.kundenserver.de (node=mrelayeu2) with ESMTP (Nemesis)
	id 0MKwtQ-1LCcRY2bC2-0000sx; Tue, 16 Dec 2008 17:06:44 +0100
Date: Tue, 16 Dec 2008 17:06:43 +0100
To: java-user@lucene.apache.org
Subject: Re: newbie question on querying on multiple attributes
From: "Hardy Ferentschik" <lucene@ferentschik.de>
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <21035723.post@talk.nabble.com>
 <541f12ca0812160757i595ec94cx786705d846909651@mail.gmail.com>
Content-Transfer-Encoding: 8bit
Message-ID: <op.ul9i1hvh7ont1c@aleppo.local>
In-Reply-To: <541f12ca0812160757i595ec94cx786705d846909651@mail.gmail.com>
User-Agent: Opera Mail/9.60 (MacIntel)
X-Provags-ID: V01U2FsdGVkX18dr2AnZbqRQKLcan8VpnQnGvlEmiKj4j2YQQ6
 Eq5SKREzXcguCpbsK9pX8mPK8Er6HZFTGb4OINh3ib3Od5y0Br
 yYcusQIsmnWlpjqus1piSVlRbMwQ5Qz9Oxx4vzZd04=
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

instead of the ClassBridge you can just annotate all the properties you  
want to index with
@Field and build a BooleanQuery out of the input field. Indexing the  
properties into
separate document fields is probably more extendable in the future when  
you for example
only want to search on a subset of the properties.

I recommend you read through the online documentation of Hibernate Search  
and you can also
ask question at the Hibernate Search Forum -  
http://forum.hibernate.org/viewforum.php?f=9
which is probably a more appropriate then this mailing list.

--Hardy

On Tue, 16 Dec 2008 16:57:44 +0100, Stephane Nicoll  
<stephane.nicoll@gmail.com> wrote:

> Consider the use of the ClassBridge in Hibernate Search. Very useful. It
> basically allows you to merge multiple fields of your hibernate entity  
> into
> a single lucene field. Once this is done, you can query this single field
> from lucene without the need for BooleanQuery.
>
> HTH,
> Stphane

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 16:14:12 2008
Return-Path: <java-user-return-37742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75865 invoked from network); 16 Dec 2008 16:14:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 16:14:12 -0000
Received: (qmail 20454 invoked by uid 500); 16 Dec 2008 16:14:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20198 invoked by uid 500); 16 Dec 2008 16:14:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20185 invoked by uid 99); 16 Dec 2008 16:14:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 08:14:18 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.32.180.16] (HELO VA3EHSOBE003.bigfish.com) (216.32.180.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 16:14:03 +0000
Received: from mail182-va3-R.bigfish.com (10.7.14.242) by
 VA3EHSOBE003.bigfish.com (10.7.40.23) with Microsoft SMTP Server id
 8.1.291.1; Tue, 16 Dec 2008 16:13:40 +0000
Received: from mail182-va3 (localhost.localdomain [127.0.0.1])	by
 mail182-va3-R.bigfish.com (Postfix) with ESMTP id 716E310D840F	for
 <java-user@lucene.apache.org>; Tue, 16 Dec 2008 16:13:40 +0000 (UTC)
X-BigFish: VPS-21(zz14ffO936eQ1b0aMzzzzz2dh6bh65h)
X-Spam-TCS-SCL: 4:0
Received: by mail182-va3 (MessageSwitch) id 1229444018877432_14121; Tue, 16
 Dec 2008 16:13:38 +0000 (UCT)
Received: from phmag01.lawson.com (unknown [221.121.120.101])	by
 mail182-va3.bigfish.com (Postfix) with ESMTP id 869981620057	for
 <java-user@lucene.apache.org>; Tue, 16 Dec 2008 16:13:38 +0000 (UTC)
Importance: Normal
X-Priority: 3 (Normal)
In-Reply-To:
References:
Subject: Default and optimal use of RAMDirectory
MIME-Version: 1.0
From: <Joseph.Syjuco@ph.lawson.com>
To: java-user@lucene.apache.org
X-MIMETrack: MIME-CD by Notes Server on PHMAM01/Server/Lawson at 12/17/2008 12:13:36 AM,
	MIME-CD complete at 12/17/2008 12:13:36 AM,
	Serialize by Router on PHMAG01/Server/Lawson(Release 6.5.6FP1|April 24, 2007) at
 12/17/2008 12:13:38 AM
Date: Wed, 17 Dec 2008 00:13:36 +0800
Message-ID: <OF09F34078.31E2805C-ON48257521.005922F9-48257521.005922FA@lawson.com>
X-Mailer: Lotus Domino Web Server Release 6.5.6FP3 March 27, 2008          
Content-Type: text/plain; charset="US-ASCII"
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

First of I'd like to say I'm quite pleased to be a part of this mailing
list - its even more exciting to know that we have Otis G. and Erik H.,
authors of (at least in my opinion) the Lucene Bible - Lucene in Action,
actively answering all these inquiries =)

We're currently in the initial stages of implementing lucene as part of our
product and one problem that we need to resolve is optimizing lucene.  I've
been reading Lucene in Action book and one of the tips for optimizing
lucene indexing is by using RAMDirectory as a buffer before writing to
FSDirectory.  According to the book, this is done internally and
automatically when I use FSDirectory.  My questions are 1.) What's the
default implementation/ computation used in allocating RAMdirectory when we
implement FSDirectory and 2.) What's the optimal way of customizing
RAMDirectory usage - any tips on how to do it.

BTW, we're using Lucene 2.3.2

Thanks for all the help

Joseph



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 17:06:39 2008
Return-Path: <java-user-return-37743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90735 invoked from network); 16 Dec 2008 17:06:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 17:06:38 -0000
Received: (qmail 2796 invoked by uid 500); 16 Dec 2008 17:06:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1844 invoked by uid 500); 16 Dec 2008 17:06:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1833 invoked by uid 99); 16 Dec 2008 17:06:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 09:06:43 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 17:06:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCdMv-0008Ot-W7
	for java-user@lucene.apache.org; Tue, 16 Dec 2008 09:06:02 -0800
Message-ID: <21037262.post@talk.nabble.com>
Date: Tue, 16 Dec 2008 09:06:01 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: help: java.lang.ArrayIndexOutOfBoundsException
 ScorerDocQueue.downHeap
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Greetings all. I am having an issue that is driving me mad.

I have many indexes ranging in size from 500K docs to 40mil docs. When I do
a simple query containing multiple terms on any of the indexes, I get this:

java.lang.ArrayIndexOutOfBoundsException
	at org.apache.lucene.util.ScorerDocQueue.downHeap(ScorerDocQueue.java)
	at
org.apache.lucene.util.ScorerDocQueue.checkAdjustElsePop(ScorerDocQueue.java)
	at
org.apache.lucene.util.ScorerDocQueue.topNextAndAdjustElsePop(ScorerDocQueue.java)
	at
org.apache.lucene.search.DisjunctionSumScorer.advanceAfterCurrent(DisjunctionSumScorer.java)
	at
org.apache.lucene.search.DisjunctionSumScorer.next(DisjunctionSumScorer.java)
	at org.apache.lucene.search.BooleanScorer2.score(BooleanScorer2.java)
	at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:136)
	at org.apache.lucene.search.Searcher.search(Searcher.java:126)
	at org.apache.lucene.search.Searcher.search(Searcher.java:105)
	at LuceneIndexer.manualQuery(LuceneIndexer.java)


This is the code that does the search:

    public static String manualQuery(String index, String qstring) {
        try {
            final IndexReader ir = IndexReader.open(index);
            int len = ir.maxDoc();
            ir.close();
            final BitSet bits = new BitSet(len);
            long start = System.currentTimeMillis();
            QueryParser parser = 
                new QueryParser("note", new StandardAnalyzer(new
File("/lucenedata/stopwords.txt")));
            Query query;
            query = parser.parse(qstring);
            final IndexSearcher searcher = new IndexSearcher(index);
            searcher.search(query, new HitCollector() {
                        public void collect(int i, float v) {
                            bits.set(i);
                        }
                    });
            searcher.close();
            long stop = System.currentTimeMillis();
            return "Time: " + (stop - start) + " Count: " +
bits.cardinality();
        } catch (Exception e) {
            StringWriter sw = new StringWriter();
            PrintWriter out = new PrintWriter(sw);
            e.printStackTrace(out);
            return "error: " + e.toString() + " \n " + sw.toString();
        }
    }

Now for the real problem. I can run this with this string "phil OR john OR
bob or samuel" and it works fine. If I add a 4th term: "phil OR john OR bob
or samuel or sally" I get the error above. I can change the terms and run on
another index and it may work with 4 terms but not with 5.

I have seen the various bug reports on similar issue, but I did a checkindex
on one of my indexes and it returned 'true'. I also just upgraded to 2.4 and
it still happens.

I am desperate and on a deadline. There will be some serious karma coming to
anyone with ideas.

Thanks.


-- 
View this message in context: http://www.nabble.com/help%3A-java.lang.ArrayIndexOutOfBoundsException-ScorerDocQueue.downHeap-tp21037262p21037262.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 19:10:02 2008
Return-Path: <java-user-return-37744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1544 invoked from network); 16 Dec 2008 19:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 19:10:02 -0000
Received: (qmail 65788 invoked by uid 500); 16 Dec 2008 19:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65764 invoked by uid 500); 16 Dec 2008 19:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65753 invoked by uid 99); 16 Dec 2008 19:10:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 11:10:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oltarasenko@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 19:09:52 +0000
Received: by nf-out-0910.google.com with SMTP id g16so649484nfd.15
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 11:09:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=wYRJIEvTyEfsE7AHRvXHYLs/fbJkHsW3JcQDqc5fRCM=;
        b=PBxiWVXUuafGVAWLYuoFtDxkGT6Pq22IA9HU03NDxqC/XaoTBz9mna0YL5DY/U2lBM
         T0jNtkpvsN7HRsNd3jAteSmmdGQfAlyqCLCkKFdx4OtofqDcI9QiNmRgWpTV0YAqmQhE
         fbBqTnjblAXW1iwmwM1u+aQtNE6gYwVqn4Hfw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=W5PWsh6Uc6sL3pQJiU2AUwVQFKbAljlfNpF+z80VJweL9Hz59VRBaArdoXEi1c3KPP
         5hfvcDvVM1AyXxF3iSvFz5ecIaDKoeok6cLZ+sz2ldN43tpBTPnQiD2hwuS31tb+ELN6
         IYUK+jEdzr+WxyKA4Iyz8KKisC8FaNWw+qjOc=
Received: by 10.210.78.7 with SMTP id a7mr6369467ebb.4.1229454571894;
        Tue, 16 Dec 2008 11:09:31 -0800 (PST)
Received: by 10.210.86.14 with HTTP; Tue, 16 Dec 2008 11:09:31 -0800 (PST)
Message-ID: <b4fc2ad80812161109q32404802v7ec5c7c0e799ac64@mail.gmail.com>
Date: Tue, 16 Dec 2008 21:09:31 +0200
From: "Oleg Oltar" <oltarasenko@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action book. Problems with first example
In-Reply-To: <AA480131-57FF-4ABA-9430-20BAAC486E0B@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7643_804701.1229454571883"
References: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
	 <OFAF6BFA0E.55D5DFAB-ON48257521.003AE52D-48257521.003B05A0@lawson.com>
	 <b4fc2ad80812160253k4f8f9de0ke71f5d1e7f887b28@mail.gmail.com>
	 <CB1DE298-C011-48EA-9AC4-C244BCD8509C@ehatchersolutions.com>
	 <b4fc2ad80812160308k2e9c8cb8n1e7aed5b6f8a0396@mail.gmail.com>
	 <b4fc2ad80812160357s21f5198ev822d2b3608f50a50@mail.gmail.com>
	 <AA480131-57FF-4ABA-9430-20BAAC486E0B@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7643_804701.1229454571883
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am trying to fix my code now. I am using the
http://markmail.org/message/4jupw4wnjn3gv7wh

Replace all Field.Keyword/UnStored/Text/UnIndexed with the enumerated types,
e.g.:

- doc.add(Field.Keyword("animal", animal));
+ doc.add(new Field("animal", animal, Field.Store.YES,
Field.Index.UN_TOKENIZED));

So I replaced correspondent code with
doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
Field.Index.UN_TOKENIZED));

Can you please explain what is enumerated type.What should, I use  instead
of Field.Text or Field.UnIndexed. Is there any doc about it?


On Tue, Dec 16, 2008 at 3:04 PM, Erik Hatcher <erik@ehatchersolutions.com>wrote:

>
> On Dec 16, 2008, at 6:57 AM, Oleg Oltar wrote:
>
>  Also maybe there are some free manuals/articles that you can recommend for
>> starters?
>>
>
> There's a bunch of stuff listed here: <
> http://wiki.apache.org/lucene-java/Resources>
>
> Lucene has been changing so rapidly lately that I'm not aware of any
> articles that are entirely up-to-date API-wise, but again in general most of
> those API changes are pretty minor and actually well documented in Lucene's
> CHANGES.txt and deprecation warnings (upgrading from 1.4 to 1.9, for
> example, primed users with nice deprecation warnings with what was going to
> be removed).
>
>
>        Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7643_804701.1229454571883--

From java-user-return-37745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 20:15:09 2008
Return-Path: <java-user-return-37745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40545 invoked from network); 16 Dec 2008 20:15:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 20:15:09 -0000
Received: (qmail 1658 invoked by uid 500); 16 Dec 2008 20:15:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1621 invoked by uid 500); 16 Dec 2008 20:15:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1610 invoked by uid 99); 16 Dec 2008 20:15:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 12:15:14 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 20:14:53 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCgJM-0000Ns-LF
	for java-user@lucene.apache.org; Tue, 16 Dec 2008 12:14:32 -0800
Message-ID: <21040857.post@talk.nabble.com>
Date: Tue, 16 Dec 2008 12:14:32 -0800 (PST)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: Document.getBinaryValue returning null after upgrading to 2.4 for
 the data which was indexed using 2.3.1
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vishnudeepak@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


The data was indexed using 2.3.1 as follows

 doc.add(new Field(Fields.DETAILS, byte[] bytes,
            Field.Store.YES));

When i reindex this particular item using 2.4 and when i try to retrive it,
it works fine.

Then for the items which were indexed using 2.3.1 and not reindexed using
2.4

the following call

doc.getBinaryValue(Fields.DETAILS)

is returning null.


So, except for the documents which were reindexed using 2.4 the search is
failing.



One more thing when i didn't reindex any of the documents using 2.4 , the
search worked fine using 2.4.


Any ideas why this is happening.
-- 
View this message in context: http://www.nabble.com/Document.getBinaryValue-returning-null-after-upgrading-to-2.4-for-the-data-which-was-indexed-using-2.3.1-tp21040857p21040857.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 20:20:38 2008
Return-Path: <java-user-return-37746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50740 invoked from network); 16 Dec 2008 20:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 20:20:38 -0000
Received: (qmail 14800 invoked by uid 500); 16 Dec 2008 20:20:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14769 invoked by uid 500); 16 Dec 2008 20:20:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14757 invoked by uid 99); 16 Dec 2008 20:20:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 12:20:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 20:20:21 +0000
Received: by qyk13 with SMTP id 13so3504597qyk.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 12:20:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=kvBO8C0cZyMqMG0UhN5lRc8u7wUElnrQdTwKPFJ4Lxk=;
        b=c7rEMsZBsxqfISW8tmk7yTCRyeHz+5qHhfm7X35FIiWECWGQRxZmKB32aJEjvcAMrM
         uPoXz18uGDcYIm5dEsEUrGBXzs69h1lD87hQS04/H9rmDvSE8WrNlkLqq1Q9fLiMHGiF
         GZ8iG6gjTju/7ucqhX/sJB/u+w0WszaUMnfVY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=mURBCmV68mhvY+9Q9ohBNxUEC5q/M1OneWlfEvKNky8cpogEvhHTUyhHCxC02uVICH
         u5Y/QNtMy2O07Uyi0rEKPfe5m4IWhnIs8BlDat9E/1I1bgr/Oo6r9F/W/OBEqVJMKvRh
         lTdHP0QK0TtJzib/o+1asQJffSUxoD34lB1lQ=
Received: by 10.214.113.1 with SMTP id l1mr9978228qac.259.1229458800727;
        Tue, 16 Dec 2008 12:20:00 -0800 (PST)
Received: by 10.214.241.6 with HTTP; Tue, 16 Dec 2008 12:20:00 -0800 (PST)
Message-ID: <8c4e68610812161220x209c1622ge68934fc3970643f@mail.gmail.com>
Date: Tue, 16 Dec 2008 20:20:00 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene in Action book. Problems with first example
In-Reply-To: <b4fc2ad80812161109q32404802v7ec5c7c0e799ac64@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b4fc2ad80812160241q779af57x18440db0cd790dff@mail.gmail.com>
	 <OFAF6BFA0E.55D5DFAB-ON48257521.003AE52D-48257521.003B05A0@lawson.com>
	 <b4fc2ad80812160253k4f8f9de0ke71f5d1e7f887b28@mail.gmail.com>
	 <CB1DE298-C011-48EA-9AC4-C244BCD8509C@ehatchersolutions.com>
	 <b4fc2ad80812160308k2e9c8cb8n1e7aed5b6f8a0396@mail.gmail.com>
	 <b4fc2ad80812160357s21f5198ev822d2b3608f50a50@mail.gmail.com>
	 <AA480131-57FF-4ABA-9430-20BAAC486E0B@ehatchersolutions.com>
	 <b4fc2ad80812161109q32404802v7ec5c7c0e799ac64@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

A follow up message to the one you mention suggests that something be
added to the Lucene FAQ and it was, with a link to the 1.9 apidocs
which shows the deprecated methods and alternatives.

http://lucene.apache.org/java/1_9_1/api/


--
Ian.


On Tue, Dec 16, 2008 at 7:09 PM, Oleg Oltar <oltarasenko@gmail.com> wrote:
> I am trying to fix my code now. I am using the
> http://markmail.org/message/4jupw4wnjn3gv7wh
>
> Replace all Field.Keyword/UnStored/Text/UnIndexed with the enumerated types,
> e.g.:
>
> - doc.add(Field.Keyword("animal", animal));
> + doc.add(new Field("animal", animal, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
> So I replaced correspondent code with
> doc.add(new Field("filename", f.getCanonicalPath(), Field.Store.YES,
> Field.Index.UN_TOKENIZED));
>
> Can you please explain what is enumerated type.What should, I use  instead
> of Field.Text or Field.UnIndexed. Is there any doc about it?
>
>
> On Tue, Dec 16, 2008 at 3:04 PM, Erik Hatcher <erik@ehatchersolutions.com>wrote:
>
>>
>> On Dec 16, 2008, at 6:57 AM, Oleg Oltar wrote:
>>
>>  Also maybe there are some free manuals/articles that you can recommend for
>>> starters?
>>>
>>
>> There's a bunch of stuff listed here: <
>> http://wiki.apache.org/lucene-java/Resources>
>>
>> Lucene has been changing so rapidly lately that I'm not aware of any
>> articles that are entirely up-to-date API-wise, but again in general most of
>> those API changes are pretty minor and actually well documented in Lucene's
>> CHANGES.txt and deprecation warnings (upgrading from 1.4 to 1.9, for
>> example, primed users with nice deprecation warnings with what was going to
>> be removed).
>>
>>
>>        Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 20:33:21 2008
Return-Path: <java-user-return-37747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79883 invoked from network); 16 Dec 2008 20:33:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 20:33:21 -0000
Received: (qmail 29869 invoked by uid 500); 16 Dec 2008 20:33:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29833 invoked by uid 500); 16 Dec 2008 20:33:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29822 invoked by uid 99); 16 Dec 2008 20:33:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 12:33:25 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FS_REPLICA,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of stopman@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 20:33:11 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1673612wag.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 12:32:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zcImCweCAScOrlPv04PtgsuxYiQyTQYN1Rf88XohYhY=;
        b=QZM2ZKs5ZKaKNFT/G5zY/F/bOFEv4DbET8xV933VO14ykOksCF5W9bI6o0bvfvFEr0
         IJ4WTykvc4Jegsdeko1wCtv3feHSNr/KWobk2rfUojj1lyWfDcyDpP8NIZFGU7hl9r3V
         OsvO/LDp2ux3zkqf6LDDarrb4c9z01YV7sXyo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qFPvzUYd7Ls1Tszd278+FKqRS6hOy7PqnXHYuWxw1CaF6PnZcFnZAhN51y7wH+qE7m
         IfavA/tplJcVRoCroygftOjSXk1s+zB2Hpv1kYqSOxgNC1p3W2iPsrRO0xb9TAT+HgdP
         AA1KO6SNi5ApLSgGFnQvsH10NZfVU3lPfApV8=
Received: by 10.114.152.17 with SMTP id z17mr5984443wad.141.1229459569279;
        Tue, 16 Dec 2008 12:32:49 -0800 (PST)
Received: by 10.114.124.9 with HTTP; Tue, 16 Dec 2008 12:32:49 -0800 (PST)
Message-ID: <652776090812161232u2b730b07w5aab060e9e6ed682@mail.gmail.com>
Date: Tue, 16 Dec 2008 12:32:49 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: replication question
In-Reply-To: <c68e39170812160644r1c430ddmd297587024f04b2e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5565_25798559.1229459569275"
References: <652776090812152204g3fd47793ta77a2fb09ce30296@mail.gmail.com>
	 <c68e39170812160644r1c430ddmd297587024f04b2e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5565_25798559.1229459569275
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Yonik,

Thanks for the response.

reply inline.

On Tue, Dec 16, 2008 at 6:44 AM, Yonik Seeley <yseeley@gmail.com> wrote:

> On Tue, Dec 16, 2008 at 1:04 AM, Michael Stoppelman <stopman@gmail.com>
> wrote:
> > I've got a question from Doug's original email about replication (
> > http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html
> ):
> >
> > "1. On the index master, periodically checkpoint the index. Every minute
> or
> > so the IndexWriter is closed and a 'cp -lr index index.DATE' command is
> > executed from Java, where DATE is the current date and time. This
> > efficiently makes a copy of the index when its in a consistent state by
> > constructing a tree of hard links. If Lucene re-writes any files (e.g.,
> the
> > segments file) a new inode is created and the copy is unchanged."
> >
> > Is closing the IndexWriter really a requirement on taking a snapshot? Or
> can
> > one take a snapshot on an index being written, I've done this in my
> > development environment and it seems to work fine w/o closing the
> > IndexWriter.
>
> There are subtle race conditions if you try to do this with a changing
> index.
> At any instance in time, the index should be consistent, *but* you
> can't actually make a snapshot instantaneously.


Is the race condition in writing out the segments.gen or segments_N files?
>From my understanding index segments once closed by the IndexWriter they
aren't modified again (they might be deleted though if they're merged away).


>
> So this is doable, but it would require some complex retry logic like
> IndexReader has when opening an index.
>
> > Also the solr replication shell scripts don't seem to worry
> > about this either.
>
> Solr takes snapshots when it knows it's not updating the index (new
> index changes are internally blocked when calling snapshooter).
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5565_25798559.1229459569275--

From java-user-return-37748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 20:33:33 2008
Return-Path: <java-user-return-37748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79958 invoked from network); 16 Dec 2008 20:33:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 20:33:33 -0000
Received: (qmail 31521 invoked by uid 500); 16 Dec 2008 20:33:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31486 invoked by uid 500); 16 Dec 2008 20:33:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31475 invoked by uid 99); 16 Dec 2008 20:33:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 12:33:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 20:33:24 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id mBGKXF003862
	for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 14:33:16 -0600
Message-ID: <49481072.8040608@getopt.org>
Date: Tue, 16 Dec 2008 21:32:50 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document.getBinaryValue returning null after upgrading to 2.4
 for the data which was indexed using 2.3.1
References: <21040857.post@talk.nabble.com>
In-Reply-To: <21040857.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

rahul_k123 wrote:
> The data was indexed using 2.3.1 as follows
> 
>  doc.add(new Field(Fields.DETAILS, byte[] bytes,
>             Field.Store.YES));
> 
> When i reindex this particular item using 2.4 and when i try to retrive it,
> it works fine.
> 
> Then for the items which were indexed using 2.3.1 and not reindexed using
> 2.4
> 
> the following call
> 
> doc.getBinaryValue(Fields.DETAILS)
> 
> is returning null.

Is it returning null or byte[] with length of 0?

> So, except for the documents which were reindexed using 2.4 the search is
> failing.
> 
> 
> 
> One more thing when i didn't reindex any of the documents using 2.4 , the
> search worked fine using 2.4.
> 
> 
> Any ideas why this is happening.

No idea - but perhaps this is somehow related: 
https://issues.apache.org/jira/browse/LUCENE-1452

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 21:22:55 2008
Return-Path: <java-user-return-37749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19347 invoked from network); 16 Dec 2008 21:22:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 21:22:54 -0000
Received: (qmail 28896 invoked by uid 500); 16 Dec 2008 21:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28837 invoked by uid 500); 16 Dec 2008 21:22:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28826 invoked by uid 99); 16 Dec 2008 21:22:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 13:22:59 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=FS_REPLICA,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 21:22:43 +0000
Received: by rn-out-0910.google.com with SMTP id j71so2912086rne.4
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 13:22:21 -0800 (PST)
Received: by 10.90.26.10 with SMTP id 10mr2559161agz.95.1229462541184;
        Tue, 16 Dec 2008 13:22:21 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 7sm11331450aga.13.2008.12.16.13.22.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 16 Dec 2008 13:22:20 -0800 (PST)
Message-Id: <D1ABD228-6168-4A28-9695-1F4A1D1D79A4@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <652776090812161232u2b730b07w5aab060e9e6ed682@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: replication question
Date: Tue, 16 Dec 2008 16:22:17 -0500
References: <652776090812152204g3fd47793ta77a2fb09ce30296@mail.gmail.com> <c68e39170812160644r1c430ddmd297587024f04b2e@mail.gmail.com> <652776090812161232u2b730b07w5aab060e9e6ed682@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


It's better to use SnapshotDeletionPolicy to grab a consistent image  
of the index.  You don't need to close the IndexWriter, nor stop  
making changes through IndexWriter, and it lets you capture a given  
segments_N (and all index files it needs) and then take your time  
making a copy/backup/etc of all files in the snapshot.

There's a "green paper", excerpted from the upcoming Lucene in Action  
revision, that covers how to use SnapshotDeletionPolicy for backing up  
an index:

   http://manning.com/free/green_HotBackupsLucene.html

(Disclaimers: 1) I wrote the article, 2) The link is frustrating  
because you have to submit your email address, then get email w/ a  
link that gives you a zip file, which you then unzip and open the  
index.html... I've been meaning to post the article directly to the  
Wiki so now seems like a good time!).

Mike

Michael Stoppelman wrote:

> Hi Yonik,
>
> Thanks for the response.
>
> reply inline.
>
> On Tue, Dec 16, 2008 at 6:44 AM, Yonik Seeley <yseeley@gmail.com>  
> wrote:
>
>> On Tue, Dec 16, 2008 at 1:04 AM, Michael Stoppelman <stopman@gmail.com 
>> >
>> wrote:
>>> I've got a question from Doug's original email about replication (
>>> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html
>> ):
>>>
>>> "1. On the index master, periodically checkpoint the index. Every  
>>> minute
>> or
>>> so the IndexWriter is closed and a 'cp -lr index index.DATE'  
>>> command is
>>> executed from Java, where DATE is the current date and time. This
>>> efficiently makes a copy of the index when its in a consistent  
>>> state by
>>> constructing a tree of hard links. If Lucene re-writes any files  
>>> (e.g.,
>> the
>>> segments file) a new inode is created and the copy is unchanged."
>>>
>>> Is closing the IndexWriter really a requirement on taking a  
>>> snapshot? Or
>> can
>>> one take a snapshot on an index being written, I've done this in my
>>> development environment and it seems to work fine w/o closing the
>>> IndexWriter.
>>
>> There are subtle race conditions if you try to do this with a  
>> changing
>> index.
>> At any instance in time, the index should be consistent, *but* you
>> can't actually make a snapshot instantaneously.
>
>
> Is the race condition in writing out the segments.gen or segments_N  
> files?
> From my understanding index segments once closed by the IndexWriter  
> they
> aren't modified again (they might be deleted though if they're  
> merged away).
>
>
>>
>> So this is doable, but it would require some complex retry logic like
>> IndexReader has when opening an index.
>>
>>> Also the solr replication shell scripts don't seem to worry
>>> about this either.
>>
>> Solr takes snapshots when it knows it's not updating the index (new
>> index changes are internally blocked when calling snapshooter).
>>
>> -Yonik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 21:56:52 2008
Return-Path: <java-user-return-37750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9546 invoked from network); 16 Dec 2008 21:56:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 21:56:52 -0000
Received: (qmail 92760 invoked by uid 500); 16 Dec 2008 21:56:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92732 invoked by uid 500); 16 Dec 2008 21:56:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92721 invoked by uid 99); 16 Dec 2008 21:56:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 13:56:58 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 21:56:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LChtu-00052N-TO
	for java-user@lucene.apache.org; Tue, 16 Dec 2008 13:56:22 -0800
Message-ID: <21042590.post@talk.nabble.com>
Date: Tue, 16 Dec 2008 13:56:22 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: help: java.lang.ArrayIndexOutOfBoundsException
 ScorerDocQueue.downHeap
In-Reply-To: <21037262.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <21037262.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


OK, a little more information:

I run this query via a java stored procedure within Oracle. However, I just
ran the same query using the same code compiled in a separate class from a
CL on a different server that has the same filesystem mounted.

The queries ran fine from there.

So I am wondering if this is some kind of class reuse issue or singleton
issue within the ojvm. Is this possible?

To summarize:

- run query on mounted fs from within oracle -> 
ArrayIndexOutOfBoundsException
- run query on mounted fs from different server -> works fine
- same version of lucene, same exact code

Any suggestions would be very appreciated.


-- 
View this message in context: http://www.nabble.com/help%3A-java.lang.ArrayIndexOutOfBoundsException-ScorerDocQueue.downHeap-tp21037262p21042590.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 22:24:25 2008
Return-Path: <java-user-return-37751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94466 invoked from network); 16 Dec 2008 22:24:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 22:24:25 -0000
Received: (qmail 47113 invoked by uid 500); 16 Dec 2008 22:24:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47077 invoked by uid 500); 16 Dec 2008 22:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47064 invoked by uid 99); 16 Dec 2008 22:24:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 14:24:30 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 22:24:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCiKT-0006Md-7C
	for java-user@lucene.apache.org; Tue, 16 Dec 2008 14:23:49 -0800
Message-ID: <21043111.post@talk.nabble.com>
Date: Tue, 16 Dec 2008 14:23:49 -0800 (PST)
From: rahul_k123 <vishnudeepak@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Document.getBinaryValue returning null after upgrading to 2.4
 for the data which was indexed using 2.3.1
In-Reply-To: <49481072.8040608@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vishnudeepak@gmail.com
References: <21040857.post@talk.nabble.com> <49481072.8040608@getopt.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the response. I guess this is the problem, but not sure whether it
happens on optimize.

This is what happening exactly

the field is still present (not null) and is marked as binary, but the data
is not there - Field.getBinaryLength() returns 0.




Andrzej Bialecki wrote:
> 
> rahul_k123 wrote:
>> The data was indexed using 2.3.1 as follows
>> 
>>  doc.add(new Field(Fields.DETAILS, byte[] bytes,
>>             Field.Store.YES));
>> 
>> When i reindex this particular item using 2.4 and when i try to retrive
>> it,
>> it works fine.
>> 
>> Then for the items which were indexed using 2.3.1 and not reindexed using
>> 2.4
>> 
>> the following call
>> 
>> doc.getBinaryValue(Fields.DETAILS)
>> 
>> is returning null.
> 
> Is it returning null or byte[] with length of 0?
> 
>> So, except for the documents which were reindexed using 2.4 the search is
>> failing.
>> 
>> 
>> 
>> One more thing when i didn't reindex any of the documents using 2.4 , the
>> search worked fine using 2.4.
>> 
>> 
>> Any ideas why this is happening.
> 
> No idea - but perhaps this is somehow related: 
> https://issues.apache.org/jira/browse/LUCENE-1452
> 
> -- 
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Document.getBinaryValue-returning-null-after-upgrading-to-2.4-for-the-data-which-was-indexed-using-2.3.1-tp21040857p21043111.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 23:26:47 2008
Return-Path: <java-user-return-37752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26352 invoked from network); 16 Dec 2008 23:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 23:26:47 -0000
Received: (qmail 49226 invoked by uid 500); 16 Dec 2008 23:26:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49194 invoked by uid 500); 16 Dec 2008 23:26:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49183 invoked by uid 99); 16 Dec 2008 23:26:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 15:26:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 23:26:29 +0000
Received: from [172.20.214.3] (resortcountry.com [216.94.152.62] (may be forged))
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id mBGNQOt25220
	for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 17:26:24 -0600
Message-ID: <49483909.6000503@getopt.org>
Date: Wed, 17 Dec 2008 00:26:01 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document.getBinaryValue returning null after upgrading to 2.4
 for the data which was indexed using 2.3.1
References: <21040857.post@talk.nabble.com> <49481072.8040608@getopt.org> <21043111.post@talk.nabble.com>
In-Reply-To: <21043111.post@talk.nabble.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

rahul_k123 wrote:
> Thanks for the response. I guess this is the problem, but not sure whether it
> happens on optimize.
> 
> This is what happening exactly
> 
> the field is still present (not null) and is marked as binary, but the data
> is not there - Field.getBinaryLength() returns 0.

It may or it may not be the same bug ... I'm not sure, but the symptoms 
are the same. The bug would occur also during partial merges, which 
Lucene initiates itself in the background, even if you don't call 
IndexWriter.optimize().

Please create a JIRA issue describing the symptoms (precisely!), and the 
versions of Lucene involved.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 16 23:42:42 2008
Return-Path: <java-user-return-37753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89067 invoked from network); 16 Dec 2008 23:42:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2008 23:42:41 -0000
Received: (qmail 77471 invoked by uid 500); 16 Dec 2008 23:42:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77443 invoked by uid 500); 16 Dec 2008 23:42:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77432 invoked by uid 99); 16 Dec 2008 23:42:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 15:42:47 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.191] (HELO n73.bullet.mail.sp1.yahoo.com) (98.136.44.191)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 16 Dec 2008 23:42:25 +0000
Received: from [69.147.65.150] by n73.bullet.mail.sp1.yahoo.com with NNFMP; 16 Dec 2008 23:42:04 -0000
Received: from [69.147.84.95] by t7.bullet.mail.sp1.yahoo.com with NNFMP; 16 Dec 2008 23:42:04 -0000
Received: from [127.0.0.1] by omp205.mail.sp1.yahoo.com with NNFMP; 16 Dec 2008 23:42:04 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 468435.85016.bm@omp205.mail.sp1.yahoo.com
Received: (qmail 59945 invoked by uid 60001); 16 Dec 2008 23:42:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=SyfvEK/7zUuxsS4CVtsNKxy9FLOJpnI7MFzuDpu+SW/bidN33ZtLinI8fwIyM0lMLa98hRFE3iDa1ODYcV/zl/bV9l/SQ4U2AW7I27QYFxUWkLflMzDXR0CorI6NBbEK2Yw7Px0MPVMZBCNDhx6drFfEUei2xu/wfHEFZLBOwNE=;
X-YMail-OSG: nQOlxQIVM1lbB_FsUuCGROVbg4rNMt6FHVT4l7wlA9rjUUJGpULSxIebAudASuHmbN_zZ3eJBrvELFe9CX2d260ugiRaGzPXJE305onsqHHODCLgTpcM1iI2_oDvwyTMh8i.wnuP99sRankeZYDYl9rXmgUkrkvZ8eQvEjshV2D701Xo2AtzbMDZS4S3QA--
Received: from [122.55.80.194] by web45307.mail.sp1.yahoo.com via HTTP; Tue, 16 Dec 2008 15:42:02 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <283460.47599.qm@web45307.mail.sp1.yahoo.com> <359a92830812160614k28e98a38he252cceb9f53c3be@mail.gmail.com>
Date: Tue, 16 Dec 2008 15:42:02 -0800 (PST)
From: Jay Joel Malaluan <exst_jmalaluan@yahoo.com>
Subject: Re: Inquiry on Lucene Stemming
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2042959404-1229470922=:59207"
Message-ID: <266062.59207.qm@web45307.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2042959404-1229470922=:59207
Content-Type: text/plain; charset=us-ascii

Hi Erick,

Well some client inquiries if it's possible to expand such simple words and does Lucene have an API for this logic? Because all I read was the stemming logic for Lucene was the other way around which is, example "flashing" it will be trimmed to the root word "flash" when searched. 


Regards,
Jay Malaluan





________________________________
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, December 16, 2008 10:14:13 PM
Subject: Re: Inquiry on Lucene Stemming

Why do you want to do this? The reason I ask is that you're
making each clause very complex.....

For a single term, it's not very complex, but for something like
((A AND B) OR (C AND D)) NOT X

expanding A, B, C, D and X to, possibly many terms is...er...ugly.

You could think about ngrams, although I confess I've only seen
this on the lists, haven't worked with it myself.

If your goal is to be able to search exact match words (i.e. you
need to find "flash" when exactly "flash" was indexed, not "flashing")
there are better strategies....

So a bit more explanation of the problem could perhaps generate more
helpful responses.

Best
Erick

On Tue, Dec 16, 2008 at 7:18 AM, Jay Joel Malaluan <exst_jmalaluan@yahoo.com
> wrote:

> Hi,
>
>
> Can anyone comment if my understanding of the stemming process in Lucene is
> correct. From my testing using the SnowballAnalyzer, if I passed this word
> "flashing" it will be trimmed to a root word "flash" and this root word
> ("flash") will be the one searched not the original word "flashing".
>
> Is there an API in Lucene or third-party APIs that can do the following, I
> passed the word "flash" instead it will search for "flashing", "flashed",
> "flashes" etc.?
>
>
> Regards,
> Jay Malaluan
>
>
>



      
--0-2042959404-1229470922=:59207--


From java-user-return-37754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 00:20:04 2008
Return-Path: <java-user-return-37754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8811 invoked from network); 17 Dec 2008 00:20:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 00:20:04 -0000
Received: (qmail 16560 invoked by uid 500); 17 Dec 2008 00:20:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16518 invoked by uid 500); 17 Dec 2008 00:20:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16507 invoked by uid 99); 17 Dec 2008 00:20:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 16:20:10 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 00:19:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCk8O-0002xJ-PW
	for java-user@lucene.apache.org; Tue, 16 Dec 2008 16:19:28 -0800
Message-ID: <21044811.post@talk.nabble.com>
Date: Tue, 16 Dec 2008 16:19:28 -0800 (PST)
From: Sangrish <sidangrish@gmail.com>
To: java-user@lucene.apache.org
Subject: Cache Used by IndexReader/IndexSearcher
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sidangrish@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi All,

          I have a 50 GB index of about 40 million documents. I need to
query it
around 40,000 times(different queries) one by one. I saw that the query
times are negligible for the
first, say 25,000 queries, but it degrades later on. For example, the time
for 200 sequential queries changes from 0.009 secs to 0.06 secs. Any
possible reasons?

   I read somewhere that IndexSearcher reads in a cache when its
initialized. I could not find more on this.
Can I increase this cache size to get an elongated performance? If yes, how
do I play with it?

Thanks
Siddharth


-- 
View this message in context: http://www.nabble.com/Cache-Used-by-IndexReader-IndexSearcher-tp21044811p21044811.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 00:35:45 2008
Return-Path: <java-user-return-37755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20058 invoked from network); 17 Dec 2008 00:35:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 00:35:45 -0000
Received: (qmail 34851 invoked by uid 500); 17 Dec 2008 00:35:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34824 invoked by uid 500); 17 Dec 2008 00:35:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34813 invoked by uid 99); 17 Dec 2008 00:35:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 16:35:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 00:35:34 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1569540fgb.27
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 16:35:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=7uFWPJiJ0VvtZI+RWffwf5uqRyoLaNJip/WZxdhfMPo=;
        b=nChVW4cWZ1FBu17byZOGB9Pij9GHKLOWOEqTWXI+5A7DaxAWz6QDxN+3DhT0DTUm+R
         zlht6NoOnY+5jFlfV3P/kPTBumlT0GtBI0yZY2htbuzWfTB/zjJYjY/xgrUkN520VQKW
         xsFICIlLTWqpNNELzgB7iVZndoAwjpmyqGwow=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=flk7LAY9YI+LnMOBlQczJFEhM4Lc4w+KrIcPkiN2O5OM0vBieWQnTeztBdJUjEVCvM
         8JjWjYgdPaP+sYgmAI66Ic/fq2ppncXHzVuT/D7rY+ZaWYLRAwJywDo4lW+7WHKB5Za2
         RbPDk5nH/ugV8xUhhUYhl6grDdlVTe1KwFrJE=
Received: by 10.86.62.3 with SMTP id k3mr68060fga.47.1229474114378;
        Tue, 16 Dec 2008 16:35:14 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Tue, 16 Dec 2008 16:35:14 -0800 (PST)
Message-ID: <359a92830812161635o32103384mfcb782780940e753@mail.gmail.com>
Date: Tue, 16 Dec 2008 19:35:14 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inquiry on Lucene Stemming
In-Reply-To: <266062.59207.qm@web45307.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78639_15660517.1229474114341"
References: <283460.47599.qm@web45307.mail.sp1.yahoo.com>
	 <359a92830812160614k28e98a38he252cceb9f53c3be@mail.gmail.com>
	 <266062.59207.qm@web45307.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78639_15660517.1229474114341
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd ask the client why stemming wouldn't work <G>. I've spent faaaar too
much
time in my life doing useless things "because the client asked". Really, ask
for
the use cases where that is really required and that stemming wouldn't
cover.

But you're right that Lucene doesn't have such a facility or API. How could
it?
Stemming is easy (yeah, right). But at least it's algorithmic. Going from
one word
to all the possible variants (or even worse, all those variants the client
thinks
should be there) usually requires some kind of "expansion map". Particularly
when you want to go from, say, Steve to Stephen.

Best
Erick

On Tue, Dec 16, 2008 at 6:42 PM, Jay Joel Malaluan <exst_jmalaluan@yahoo.com
> wrote:

> Hi Erick,
>
> Well some client inquiries if it's possible to expand such simple words and
> does Lucene have an API for this logic? Because all I read was the stemming
> logic for Lucene was the other way around which is, example "flashing" it
> will be trimmed to the root word "flash" when searched.
>
>
> Regards,
> Jay Malaluan
>
>
>
>
>
> ________________________________
> From: Erick Erickson <erickerickson@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, December 16, 2008 10:14:13 PM
> Subject: Re: Inquiry on Lucene Stemming
>
> Why do you want to do this? The reason I ask is that you're
> making each clause very complex.....
>
> For a single term, it's not very complex, but for something like
> ((A AND B) OR (C AND D)) NOT X
>
> expanding A, B, C, D and X to, possibly many terms is...er...ugly.
>
> You could think about ngrams, although I confess I've only seen
> this on the lists, haven't worked with it myself.
>
> If your goal is to be able to search exact match words (i.e. you
> need to find "flash" when exactly "flash" was indexed, not "flashing")
> there are better strategies....
>
> So a bit more explanation of the problem could perhaps generate more
> helpful responses.
>
> Best
> Erick
>
> On Tue, Dec 16, 2008 at 7:18 AM, Jay Joel Malaluan <
> exst_jmalaluan@yahoo.com
> > wrote:
>
> > Hi,
> >
> >
> > Can anyone comment if my understanding of the stemming process in Lucene
> is
> > correct. From my testing using the SnowballAnalyzer, if I passed this
> word
> > "flashing" it will be trimmed to a root word "flash" and this root word
> > ("flash") will be the one searched not the original word "flashing".
> >
> > Is there an API in Lucene or third-party APIs that can do the following,
> I
> > passed the word "flash" instead it will search for "flashing", "flashed",
> > "flashes" etc.?
> >
> >
> > Regards,
> > Jay Malaluan
> >
> >
> >
>
>
>
>
>

------=_Part_78639_15660517.1229474114341--

From java-user-return-37756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 01:19:56 2008
Return-Path: <java-user-return-37756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83854 invoked from network); 17 Dec 2008 01:19:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 01:19:55 -0000
Received: (qmail 61179 invoked by uid 500); 17 Dec 2008 01:20:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61148 invoked by uid 500); 17 Dec 2008 01:20:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61137 invoked by uid 99); 17 Dec 2008 01:20:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 17:20:00 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 01:19:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCl4J-00056r-2M
	for java-user@lucene.apache.org; Tue, 16 Dec 2008 17:19:19 -0800
Message-ID: <21045385.post@talk.nabble.com>
Date: Tue, 16 Dec 2008 17:19:19 -0800 (PST)
From: Rajiv2 <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org
Subject: IDF scoring issue
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: rajiv.roopan@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello, 

I'm using the default lucene Queryparser on the search text : fleming
roofing inc., marietta ga

These items are in my index.

doc 1: fleming ga
doc 2: marietta ga
doc 3: marietta il
doc 4: marietta ok
doc 5: marietta ok
doc 6: fleming pa

The first match is always "fleming ga" even though "marietta ga" is closer
together in the search text. I'm assuming this is because of the "fleming"
has a higher idf than marietta. What should I change in the way i'm querying
or indexing to make this happen?

Also, I don't want to modify the search text by putting quotes around
"marietta ga" which forces the query parser to make a phrase query.

thanks,
Rajiv
-- 
View this message in context: http://www.nabble.com/IDF-scoring-issue-tp21045385p21045385.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 02:49:13 2008
Return-Path: <java-user-return-37757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26645 invoked from network); 17 Dec 2008 02:49:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 02:49:13 -0000
Received: (qmail 4660 invoked by uid 500); 17 Dec 2008 02:49:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4619 invoked by uid 500); 17 Dec 2008 02:49:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4608 invoked by uid 99); 17 Dec 2008 02:49:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 18:49:18 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 02:48:57 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1585207fgb.27
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 18:48:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=nVrRLXYgBxkFDEXaIbbHIn64VxY5oiX9i85wifxHdaM=;
        b=n4+PviBbfkz6ZfX7Txfj3mYMtITOmiUAJkt3W7TallnNoHNp2dtjP1arMCeWhR0mGp
         Gwz/nYcb9qBrGQKYWswAFJmDpqE8SBo2k7jO0T/QMjVJ/3HXnSbxi2nd6daVNUHReK2n
         zJ3JvrdRBFD3ICCO92OdIhuSaO9v0iUqN2Q6Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=AtVChrLTOhvOJjXFEy7EbLvbMPPEHIsX4HVahpdajVwVhZ2O3SAy7R7IKR4l9vBClH
         bNUwZslU2SY+GepAtmP+Y21tn/ZR+J4q5BcVN4Wf0PsmWLasylBwwH0Xno8o/yaI5n6y
         RJQiMm622WIb4igTYGbrc36bk+0x9zFAB1Dtc=
Received: by 10.86.23.18 with SMTP id 18mr145255fgw.6.1229482116220;
        Tue, 16 Dec 2008 18:48:36 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Tue, 16 Dec 2008 18:48:36 -0800 (PST)
Message-ID: <359a92830812161848wf8a5e49va366aed2f50b3c9a@mail.gmail.com>
Date: Tue, 16 Dec 2008 21:48:36 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IDF scoring issue
In-Reply-To: <21045385.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_79982_6690466.1229482116222"
References: <21045385.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_79982_6690466.1229482116222
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Note a couple of things:

1> how a doc scores also takes into account how many other words
     are in the field you're querying on.
2> Is "text" your default field? Because what you posted is really
     searching text:fleming <default field>:roofing <default
field>:inc......
     Not also the implicit OR between each of them. Is this really your
     intent?
3> query.explain (as i remember) is your friend to figure out how the
     weights are being calculated. If you haven't got a copy of Luke, I'd
    *strongly* advise getting one and looking at the "explain" tab...

Best
Erick

On Tue, Dec 16, 2008 at 8:19 PM, Rajiv2 <rajiv.roopan@gmail.com> wrote:

>
> Hello,
>
> I'm using the default lucene Queryparser on the search text : fleming
> roofing inc., marietta ga
>
> These items are in my index.
>
> doc 1: fleming ga
> doc 2: marietta ga
> doc 3: marietta il
> doc 4: marietta ok
> doc 5: marietta ok
> doc 6: fleming pa
>
> The first match is always "fleming ga" even though "marietta ga" is closer
> together in the search text. I'm assuming this is because of the "fleming"
> has a higher idf than marietta. What should I change in the way i'm
> querying
> or indexing to make this happen?
>
> Also, I don't want to modify the search text by putting quotes around
> "marietta ga" which forces the query parser to make a phrase query.
>
> thanks,
> Rajiv
> --
> View this message in context:
> http://www.nabble.com/IDF-scoring-issue-tp21045385p21045385.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_79982_6690466.1229482116222--

From java-user-return-37758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 03:44:20 2008
Return-Path: <java-user-return-37758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42708 invoked from network); 17 Dec 2008 03:44:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 03:44:20 -0000
Received: (qmail 48838 invoked by uid 500); 17 Dec 2008 03:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48803 invoked by uid 500); 17 Dec 2008 03:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48792 invoked by uid 99); 17 Dec 2008 03:44:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 19:44:24 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 03:44:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCnK3-0001bC-7E
	for java-user@lucene.apache.org; Tue, 16 Dec 2008 19:43:43 -0800
Message-ID: <21046615.post@talk.nabble.com>
Date: Tue, 16 Dec 2008 19:43:43 -0800 (PST)
From: Rajiv2 <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IDF scoring issue
In-Reply-To: <359a92830812161848wf8a5e49va366aed2f50b3c9a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: rajiv.roopan@gmail.com
References: <21045385.post@talk.nabble.com> <359a92830812161848wf8a5e49va366aed2f50b3c9a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


To answer your questions,
1. there are only two words in the document I'm searching -- city and state
abbrev. lowercased and analyzed by whitespaceanalyzer
2. the only field and default field is text, so the query becomes text:
fleming text:roofing txt:inc. ...etc.
   Using query operator AND instead of OR gives me no results which does not
help.
3. I've been using explain in Luke and the only difference between "fleming
ga" and "marietta ga" is the idf value is higher for "flemming" ... that's
why "fleming ga" has a higher score.

Basically i'm just trying to get the "marietta ga" doc to score higher. In
the query text the two words are closer together than "fleming" and "ga".

rajiv



Erick Erickson wrote:
> 
> Note a couple of things:
> 
> 1> how a doc scores also takes into account how many other words
>      are in the field you're querying on.
> 2> Is "text" your default field? Because what you posted is really
>      searching text:fleming <default field>:roofing <default
> field>:inc......
>      Not also the implicit OR between each of them. Is this really your
>      intent?
> 3> query.explain (as i remember) is your friend to figure out how the
>      weights are being calculated. If you haven't got a copy of Luke, I'd
>     *strongly* advise getting one and looking at the "explain" tab...
> 
> Best
> Erick
> 
> On Tue, Dec 16, 2008 at 8:19 PM, Rajiv2 <rajiv.roopan@gmail.com> wrote:
> 
>>
>> Hello,
>>
>> I'm using the default lucene Queryparser on the search text : fleming
>> roofing inc., marietta ga
>>
>> These items are in my index.
>>
>> doc 1: fleming ga
>> doc 2: marietta ga
>> doc 3: marietta il
>> doc 4: marietta ok
>> doc 5: marietta ok
>> doc 6: fleming pa
>>
>> The first match is always "fleming ga" even though "marietta ga" is
>> closer
>> together in the search text. I'm assuming this is because of the
>> "fleming"
>> has a higher idf than marietta. What should I change in the way i'm
>> querying
>> or indexing to make this happen?
>>
>> Also, I don't want to modify the search text by putting quotes around
>> "marietta ga" which forces the query parser to make a phrase query.
>>
>> thanks,
>> Rajiv
>> --
>> View this message in context:
>> http://www.nabble.com/IDF-scoring-issue-tp21045385p21045385.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/IDF-scoring-issue-tp21045385p21046615.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 05:04:55 2008
Return-Path: <java-user-return-37759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48050 invoked from network); 17 Dec 2008 05:04:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 05:04:55 -0000
Received: (qmail 3556 invoked by uid 500); 17 Dec 2008 05:05:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3524 invoked by uid 500); 17 Dec 2008 05:05:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3513 invoked by uid 99); 17 Dec 2008 05:05:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 21:05:00 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 05:04:39 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3229257wfc.20
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 21:04:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4kCpxU3HvO39u/siFLpqdcdzMyGpN/DH593II2Ai3F8=;
        b=k8rpDwjWOzFBa24yir4Ds/Mo9aIURML4pdFtL+YpXquH5V1LNAC2tXwoFYWjMkpGZ/
         wml09CGXVSnavZLOfk9MHKUrnn+eHyCmQ1CziSJ21p2ymdk8JhMBhn6eSgnPebrrvfMo
         T8ZGz2EdZjaelIq0VkcHusEGcAHCNrf++phyo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=BJ/krkgk0RhcCvfl5V/Hg3cshh3vRzoA0SXhH6+6Qap/m1O2USp6rYyf4Bw56D/wgo
         fQ8NqG1SfMpePHbgNpu4H3g8/BVb1MYjloNzy3iYL4fVcVXWs/gzKWUa5gr6EGjnDGSJ
         Rr9GlUOGTARwa2SN6ndV1kGT7ixoaJ/OxGXUs=
Received: by 10.142.230.7 with SMTP id c7mr136059wfh.97.1229490259272;
        Tue, 16 Dec 2008 21:04:19 -0800 (PST)
Received: by 10.143.165.13 with HTTP; Tue, 16 Dec 2008 21:04:19 -0800 (PST)
Message-ID: <867513fe0812162104q3fe0d025o32de2c00cc8fb329@mail.gmail.com>
Date: Wed, 17 Dec 2008 10:34:19 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IDF scoring issue
In-Reply-To: <21046615.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11999_28774832.1229490259270"
References: <21045385.post@talk.nabble.com>
	 <359a92830812161848wf8a5e49va366aed2f50b3c9a@mail.gmail.com>
	 <21046615.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11999_28774832.1229490259270
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Rajiv,
If 'm interpreting your problem correctly, I'd suggest you to try using a
phraseQuery with an appropriate slop value. Though again it depends on what
is it that you exactly are trying to fetch.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Wed, Dec 17, 2008 at 9:13 AM, Rajiv2 <rajiv.roopan@gmail.com> wrote:

>
> To answer your questions,
> 1. there are only two words in the document I'm searching -- city and state
> abbrev. lowercased and analyzed by whitespaceanalyzer
> 2. the only field and default field is text, so the query becomes text:
> fleming text:roofing txt:inc. ...etc.
>   Using query operator AND instead of OR gives me no results which does not
> help.
> 3. I've been using explain in Luke and the only difference between "fleming
> ga" and "marietta ga" is the idf value is higher for "flemming" ... that's
> why "fleming ga" has a higher score.
>
> Basically i'm just trying to get the "marietta ga" doc to score higher. In
> the query text the two words are closer together than "fleming" and "ga".
>
> rajiv
>
>
>
> Erick Erickson wrote:
> >
> > Note a couple of things:
> >
> > 1> how a doc scores also takes into account how many other words
> >      are in the field you're querying on.
> > 2> Is "text" your default field? Because what you posted is really
> >      searching text:fleming <default field>:roofing <default
> > field>:inc......
> >      Not also the implicit OR between each of them. Is this really your
> >      intent?
> > 3> query.explain (as i remember) is your friend to figure out how the
> >      weights are being calculated. If you haven't got a copy of Luke, I'd
> >     *strongly* advise getting one and looking at the "explain" tab...
> >
> > Best
> > Erick
> >
> > On Tue, Dec 16, 2008 at 8:19 PM, Rajiv2 <rajiv.roopan@gmail.com> wrote:
> >
> >>
> >> Hello,
> >>
> >> I'm using the default lucene Queryparser on the search text : fleming
> >> roofing inc., marietta ga
> >>
> >> These items are in my index.
> >>
> >> doc 1: fleming ga
> >> doc 2: marietta ga
> >> doc 3: marietta il
> >> doc 4: marietta ok
> >> doc 5: marietta ok
> >> doc 6: fleming pa
> >>
> >> The first match is always "fleming ga" even though "marietta ga" is
> >> closer
> >> together in the search text. I'm assuming this is because of the
> >> "fleming"
> >> has a higher idf than marietta. What should I change in the way i'm
> >> querying
> >> or indexing to make this happen?
> >>
> >> Also, I don't want to modify the search text by putting quotes around
> >> "marietta ga" which forces the query parser to make a phrase query.
> >>
> >> thanks,
> >> Rajiv
> >> --
> >> View this message in context:
> >> http://www.nabble.com/IDF-scoring-issue-tp21045385p21045385.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/IDF-scoring-issue-tp21045385p21046615.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11999_28774832.1229490259270--

From java-user-return-37760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 05:23:51 2008
Return-Path: <java-user-return-37760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55728 invoked from network); 17 Dec 2008 05:23:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 05:23:51 -0000
Received: (qmail 23898 invoked by uid 500); 17 Dec 2008 05:23:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23862 invoked by uid 500); 17 Dec 2008 05:23:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23850 invoked by uid 99); 17 Dec 2008 05:23:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 21:23:57 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 05:23:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCosU-0004ys-1R
	for java-user@lucene.apache.org; Tue, 16 Dec 2008 21:23:22 -0800
Message-ID: <21047428.post@talk.nabble.com>
Date: Tue, 16 Dec 2008 21:23:22 -0800 (PST)
From: Jay Malaluan <exst_jmalaluan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Unique results in BooleanQuery
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: exst_jmalaluan@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Anyone knowledgeable on how to get unique hits using the BooleanQuery?
If I have 2 queries so the when the 1st query is processed then the 2nd
query will not anymore return the same results from the 1st query. 


Regards,
Jay Malaluan 
-- 
View this message in context: http://www.nabble.com/Unique-results-in-BooleanQuery-tp21047428p21047428.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 05:37:49 2008
Return-Path: <java-user-return-37761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63105 invoked from network); 17 Dec 2008 05:37:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 05:37:48 -0000
Received: (qmail 32154 invoked by uid 500); 17 Dec 2008 05:37:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32119 invoked by uid 500); 17 Dec 2008 05:37:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32107 invoked by uid 99); 17 Dec 2008 05:37:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 21:37:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [203.89.202.182] (HELO postoffice2.aconex.com) (203.89.202.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 05:37:40 +0000
X-ASG-Debug-ID: 1229492236-68d6006c0000-H1Y1KX
X-Barracuda-URL: http://postoffice2.aconex.com:8000/cgi-bin/mark.cgi
Received: from postoffice.aconex.com (localhost [127.0.0.1])
	by postoffice2.aconex.com (Spam Firewall) with ESMTP id 9BBAF513F63
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 16:37:16 +1100 (EST)
Received: from postoffice.aconex.com (postoffice.yarra.acx [192.168.102.1]) by postoffice2.aconex.com with ESMTP id PKvVPorZAM0S2m0D for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 16:37:16 +1100 (EST)
Received: from [10.1.1.155] (123-243-122-218.static.tpgi.com.au [123.243.122.218])
	by postoffice.aconex.com (Postfix) with ESMTP id 8FB5192C2E8
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 16:37:15 +1100 (EST)
Message-ID: <4948900B.4050005@aconex.com>
Date: Wed, 17 Dec 2008 16:37:15 +1100
From: Paul Cowan <cowan@aconex.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
X-ASG-Orig-Subj: Re: Unique results in BooleanQuery
Subject: Re: Unique results in BooleanQuery
References: <21047428.post@talk.nabble.com>
In-Reply-To: <21047428.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Barracuda-Connect: postoffice.yarra.acx[192.168.102.1]
X-Barracuda-Start-Time: 1229492236
X-Barracuda-Virus-Scanned: by Aconex Staff Email Spam Firewall at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jay,

> Anyone knowledgeable on how to get unique hits using the BooleanQuery?
> If I have 2 queries so the when the 1st query is processed then the 2nd
> query will not anymore return the same results from the 1st query. 

Do you mean you want to run two separate queries -- get all the results 
from query 1 first, then get the results which match query 2 but also 
DON'T match query 1?

e.g. search for "fruit:apple", get back x records
then search for "colour:blue", get back records with 'blue' as a colour 
but WITHOUT 'apple' as a fruit?

Do the first query as normal, then create a second BooleanQuery; add one 
clause for "colour:blue", Occur.MUST, and then add the query from the 
first search as a MUST_NOT.

Query q1 = new TermQuery(new Term("fruit", "apple"));
... run query, get back all apples ...

BooleanQuery q2 = new BooleanQuery();
q2.add(new TermQuery(new Term("colour", "blue")), Occur.MUST);
q2.add(q1, Occur.MUST_NOT);
... run query q2, get back all blue things that don't have apples ...

Cheers,

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 05:59:28 2008
Return-Path: <java-user-return-37762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91668 invoked from network); 17 Dec 2008 05:59:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 05:59:26 -0000
Received: (qmail 46589 invoked by uid 500); 17 Dec 2008 05:59:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46443 invoked by uid 500); 17 Dec 2008 05:59:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46432 invoked by uid 99); 17 Dec 2008 05:59:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 21:59:32 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [64.104.129.195] (HELO ind-iport-1.cisco.com) (64.104.129.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 05:59:10 +0000
X-IronPort-AV: E=Sophos;i="4.36,235,1228089600"; 
   d="scan'208";a="36477593"
Received: from hkg-dkim-1.cisco.com ([10.75.231.161])
  by ind-iport-1.cisco.com with ESMTP; 17 Dec 2008 05:58:47 +0000
Received: from hkg-core-1.cisco.com (hkg-core-1.cisco.com [64.104.123.94])
	by hkg-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id mBH5wk1F007409
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 13:58:46 +0800
Received: from xbh-blr-411.apac.cisco.com (xbh-blr-411.cisco.com [64.104.140.150])
	by hkg-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id mBH5vBgD011769
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 05:58:46 GMT
Received: from xfe-blr-412.apac.cisco.com ([64.104.140.152]) by xbh-blr-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 17 Dec 2008 11:28:03 +0530
Received: from [10.65.73.3] ([10.65.73.3]) by xfe-blr-412.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 17 Dec 2008 11:28:02 +0530
Message-ID: <494894D2.9010901@cisco.com>
Date: Wed, 17 Dec 2008 11:27:38 +0530
From: Preetham Kajekar <preetham@cisco.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Combining results of multiple indexes
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 17 Dec 2008 05:58:03.0101 (UTC) FILETIME=[6C6210D0:01C9600C]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=694; t=1229493526; x=1230357526;
	c=relaxed/simple; s=hkgdkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=preetham@cisco.com;
	z=From:=20Preetham=20Kajekar=20<preetham@cisco.com>
	|Subject:=20Combining=20results=20of=20multiple=20indexes
	|Sender:=20;
	bh=g79LyxV1C6ptXGIShFryzyUtti+bhVz5xgP8FNJtZv4=;
	b=M17o2NyOv/q1cn6QgLFpiMV/gJCXYtr3+ZpM6cqriMeWgu9cJcXMBaAdRQ
	8k/NbW/hQj3Sexj3UU0dRhgFy+LGqOqGhmzonA7T4vJ/PPHekYmJbqT/ukRE
	k32UlgcbXoF2T5bOXiUYcuMJB86v2btdx41jkku8Ro65FT2UocHV8=;
Authentication-Results: hkg-dkim-1; header.From=preetham@cisco.com; dkim=pass (
	sig from cisco.com/hkgdkim1002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
 I am new to Lucene. I am not using it as a pure text indexer.

 I am trying to index a Java object which has about 10 fields (like id, 
time, srcIp, dstIp) - most of them being numerical values.
 In order to speed up indexing, I figured that having two separate 
indexers, each of them indexing different set of fields works great. So 
I have the first 5 fields in index1 and the remaining in index2.

 Now, I want to have boolean AND query's looking for values in both 
indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two separate 
indexes. Would using the MultiIndexReader help ? Since I am doing an 
AND, I dont expect that it would work.

Thanks,
 ~preetham

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 06:42:45 2008
Return-Path: <java-user-return-37763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68370 invoked from network); 17 Dec 2008 06:42:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 06:42:44 -0000
Received: (qmail 86272 invoked by uid 500); 17 Dec 2008 06:42:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86233 invoked by uid 500); 17 Dec 2008 06:42:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86222 invoked by uid 99); 17 Dec 2008 06:42:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 22:42:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.38] (HELO n70.bullet.mail.sp1.yahoo.com) (98.136.44.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Dec 2008 06:42:28 +0000
Received: from [69.147.65.151] by n70.bullet.mail.sp1.yahoo.com with NNFMP; 17 Dec 2008 06:42:07 -0000
Received: from [69.147.65.154] by t5.bullet.mail.sp1.yahoo.com with NNFMP; 17 Dec 2008 06:42:07 -0000
Received: from [127.0.0.1] by omp402.mail.sp1.yahoo.com with NNFMP; 17 Dec 2008 06:42:07 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 395532.87224.bm@omp402.mail.sp1.yahoo.com
Received: (qmail 89475 invoked by uid 60001); 17 Dec 2008 06:42:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=h6XamXAS0EfDy/fXRYgY5dh+MNsq+8ukubfy0vVmbcQvOfCOAOqw3JPiHObNjszMqo+fFclpAgaDxqKfyR0fbuyRluZgmNNU+yrPJQBhvKDSOBB5D9k4iLqLXOeTV5qQZgfTef7TXeYfc+SAs++zPP8NZR+kVORIfLrrMZf0z3Y=;
X-YMail-OSG: 1J1VHssVM1naiMr1gXGcAt3w2QjmnzVKOsI56ogGcCn8PyOhJHzpWRCU5DVOcRHP8TpAsWuxQFtJZ6ONHBI9G.qx7SerpLGUEYHRmD6igqgeKK_IRzfs8o6rg2jL2vkvjHwTLpTHV1GOta6uATfw9C2ZXadaGmPhX2k7ewAYo_5fx5yjpJ6K57nEjx.Bxw--
Received: from [122.55.80.194] by web45303.mail.sp1.yahoo.com via HTTP; Tue, 16 Dec 2008 22:42:06 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <21047428.post@talk.nabble.com> <4948900B.4050005@aconex.com>
Date: Tue, 16 Dec 2008 22:42:06 -0800 (PST)
From: Jay Joel Malaluan <exst_jmalaluan@yahoo.com>
Subject: Re: Unique results in BooleanQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1273749483-1229496126=:89212"
Message-ID: <196811.89212.qm@web45303.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1273749483-1229496126=:89212
Content-Type: text/plain; charset=us-ascii

Hi Paul,

But will the q1 be run on the BooleanQuery q2 or q1 is just used for filtering?  


Regards,
Jay Malaluan





________________________________
From: Paul Cowan <cowan@aconex.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 17, 2008 1:37:15 PM
Subject: Re: Unique results in BooleanQuery

Hi Jay,

> Anyone knowledgeable on how to get unique hits using the BooleanQuery?
> If I have 2 queries so the when the 1st query is processed then the 2nd
> query will not anymore return the same results from the 1st query. 

Do you mean you want to run two separate queries -- get all the results from query 1 first, then get the results which match query 2 but also DON'T match query 1?

e.g. search for "fruit:apple", get back x records
then search for "colour:blue", get back records with 'blue' as a colour but WITHOUT 'apple' as a fruit?

Do the first query as normal, then create a second BooleanQuery; add one clause for "colour:blue", Occur.MUST, and then add the query from the first search as a MUST_NOT.

Query q1 = new TermQuery(new Term("fruit", "apple"));
.... run query, get back all apples ...

BooleanQuery q2 = new BooleanQuery();
q2.add(new TermQuery(new Term("colour", "blue")), Occur.MUST);
q2.add(q1, Occur.MUST_NOT);
.... run query q2, get back all blue things that don't have apples ...

Cheers,

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-1273749483-1229496126=:89212--


From java-user-return-37764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 06:58:21 2008
Return-Path: <java-user-return-37764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20871 invoked from network); 17 Dec 2008 06:58:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 06:58:20 -0000
Received: (qmail 462 invoked by uid 500); 17 Dec 2008 06:58:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 432 invoked by uid 500); 17 Dec 2008 06:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 421 invoked by uid 99); 17 Dec 2008 06:58:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 22:58:26 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.35] (HELO n62.bullet.mail.sp1.yahoo.com) (98.136.44.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Dec 2008 06:58:03 +0000
Received: from [69.147.65.172] by n62.bullet.mail.sp1.yahoo.com with NNFMP; 17 Dec 2008 06:57:43 -0000
Received: from [69.147.84.88] by t14.bullet.mail.sp1.yahoo.com with NNFMP; 17 Dec 2008 06:57:43 -0000
Received: from [127.0.0.1] by omp204.mail.sp1.yahoo.com with NNFMP; 17 Dec 2008 06:57:43 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 259397.61928.bm@omp204.mail.sp1.yahoo.com
Received: (qmail 43864 invoked by uid 60001); 17 Dec 2008 06:57:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=g/qV5UTqUZoSf8XRrmtaFlytq1SReMqS3+eHES14h1VrkW12+OXWg6Pdf+JeH+QtZ/oVxG89pMQnPRW2VTvJiG5QSdeT33lfhzRhe1cX83bpmGlZhkmJsGuLBzVcnDEYjrvpTvfK8jeWnApMgSofstcRs1AdbAF8o7cY1BP/5tQ=;
X-YMail-OSG: QMNzh4kVM1lWsgpmmGK3M6nT27JqU0K6CYK_DladkEhSmilw4ENfCSZ015SdA1s12G85_IGWHKT0fvUnU2n4ZsRCvcwvZkhbTmwVXA5_zFqYuYLimvi3v9QFl8V8bLsdHwefkREOO7zDD1ue1S0FQuDTJrIZoGiOgzF7pWp3lEgK19t_lb98WGJNZzSCvQ--
Received: from [122.55.80.194] by web45306.mail.sp1.yahoo.com via HTTP; Tue, 16 Dec 2008 22:57:42 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <21047428.post@talk.nabble.com> <4948900B.4050005@aconex.com> <196811.89212.qm@web45303.mail.sp1.yahoo.com>
Date: Tue, 16 Dec 2008 22:57:42 -0800 (PST)
From: Jay Joel Malaluan <exst_jmalaluan@yahoo.com>
Subject: Re: Unique results in BooleanQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-182218256-1229497062=:43731"
Message-ID: <13158.43731.qm@web45306.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-182218256-1229497062=:43731
Content-Type: text/plain; charset=us-ascii

Let me expound more on the question. Will the q1 be run on the BooleanQuery q2 and append the results that are not equal to the result of the first query of q2?




________________________________
From: Jay Joel Malaluan <exst_jmalaluan@yahoo.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 17, 2008 2:42:06 PM
Subject: Re: Unique results in BooleanQuery

Hi Paul,

But will the q1 be run on the BooleanQuery q2 or q1 is just used for filtering?  


Regards,
Jay Malaluan





________________________________
From: Paul Cowan <cowan@aconex.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 17, 2008 1:37:15 PM
Subject: Re: Unique results in BooleanQuery

Hi Jay,

> Anyone knowledgeable on how to get unique hits using the BooleanQuery?
> If I have 2 queries so the when the 1st query is processed then the 2nd
> query will not anymore return the same results from the 1st query. 

Do you mean you want to run two separate queries -- get all the results from query 1 first, then get the results which match query 2 but also DON'T match query 1?

e.g. search for "fruit:apple", get back x records
then search for "colour:blue", get back records with 'blue' as a colour but WITHOUT 'apple' as a fruit?

Do the first query as normal, then create a second BooleanQuery; add one clause for "colour:blue", Occur.MUST, and then add the query from the first search as a MUST_NOT.

Query q1 = new TermQuery(new Term("fruit", "apple"));
..... run query, get back all apples ...

BooleanQuery q2 = new BooleanQuery();
q2.add(new TermQuery(new Term("colour", "blue")), Occur.MUST);
q2.add(q1, Occur.MUST_NOT);
..... run query q2, get back all blue things that don't have apples ...

Cheers,

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-182218256-1229497062=:43731--


From java-user-return-37765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 07:20:40 2008
Return-Path: <java-user-return-37765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32935 invoked from network); 17 Dec 2008 07:20:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 07:20:39 -0000
Received: (qmail 21369 invoked by uid 500); 17 Dec 2008 07:20:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21336 invoked by uid 500); 17 Dec 2008 07:20:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21325 invoked by uid 99); 17 Dec 2008 07:20:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 16 Dec 2008 23:20:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of visual.logic@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 07:20:27 +0000
Received: by an-out-0708.google.com with SMTP id b2so1439932ana.5
        for <java-user@lucene.apache.org>; Tue, 16 Dec 2008 23:20:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version:in-reply-to
         :references:content-type:message-id:content-transfer-encoding:from
         :subject:date:to:x-mailer;
        bh=BVRvI7G8paUFtVtbNjlIQ52EXfsozpvGSbwGnCBJEWQ=;
        b=rKl991EndX794rHTW5JAhOr5O8layR29b5kM66br129H60Gdo971JUWCU73Z2kftli
         t0pCgmg40x9Esd6V7gV8GDi1qhVbHdx9UlsT2iicFL8fN3wKf55PbTRwGTwoeBgEnepX
         mqJ2G9/r39+6zOjZQQ9cDqN1mw64xMqwerPY8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:content-type:message-id
         :content-transfer-encoding:from:subject:date:to:x-mailer;
        b=h/mq1c7V2gehs21+XQ8FIiZ4diibAdO8ipkNX459F19SEumz3XK5JoIbh+840MrNWl
         c8jwNuaWt7GTBtjtMiOWMsWnJYtwColShFn29Dr25M0tXfPtgtR2eNFTkE4evu10oMyL
         VSrYCX47avK8cTpzGumFlW1OGO6xUGxpVZh88=
Received: by 10.64.96.3 with SMTP id t3mr350985qbb.96.1229498406592;
        Tue, 16 Dec 2008 23:20:06 -0800 (PST)
Received: from ?192.168.1.119? (S01060014bff5122b.wp.shawcable.net [24.79.65.175])
        by mx.google.com with ESMTPS id p31sm4075742qbp.12.2008.12.16.23.20.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 16 Dec 2008 23:20:06 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <13158.43731.qm@web45306.mail.sp1.yahoo.com>
References: <21047428.post@talk.nabble.com> <4948900B.4050005@aconex.com> <196811.89212.qm@web45303.mail.sp1.yahoo.com> <13158.43731.qm@web45306.mail.sp1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6F1D5641-0A90-47EB-BE2D-75BDE0F07836@gmail.com>
Content-Transfer-Encoding: 7bit
From: "Thomas J. Buhr" <visual.logic@gmail.com>
Subject: What are the best document edit options?
Date: Wed, 17 Dec 2008 01:20:04 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Lucene,

Looking at the document object it seems like each time I want to edit  
its contents I need to do the following:

1 - fetch the document
2 - dump its contents into a temp container
3 - update field values in the temp container
4 - create a new document
5 - transfer my updated field values back into the new document
6 - add document back into the index

This seems like a long process, is it really necessary?

An index structure does seem ideal for storing and searching a large  
set of symbolic strings in my app. From here I need to render these  
string chars as visible nodes on screen, this can be done with the  
new JavaFX API .

JavaFX has a unique binding system that would also be great to use.  
Using binding I could setup two way (inverse) binding between the  
fields in a document and the rendered screen nodes. This way when  
there is a value change in the rendered node the document field  
values  would auto update and also if there is a change in the  
document field value the node would auto update.

This update senario via binding would be ideal. How can it be done?

Information about the JavaFX binding mechanism is available at this  
link:

http://java.sun.com/javafx/1/tutorials/core/dataBinding


Hope this can work,

Thom


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 10:01:09 2008
Return-Path: <java-user-return-37766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95244 invoked from network); 17 Dec 2008 10:01:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 10:01:08 -0000
Received: (qmail 76152 invoked by uid 500); 17 Dec 2008 10:01:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76111 invoked by uid 500); 17 Dec 2008 10:01:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76100 invoked by uid 99); 17 Dec 2008 10:01:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 02:01:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jokin.c@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 10:00:52 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1630824fgb.27
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 02:00:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=m1I+M0e21xC22A4tDA2xqzAhSY+qnNzjlYT2V3rK7AM=;
        b=mILefGRIQLYUPklX+oiEqRKkHJex9n3yEqgTRFkR4AZ5Qb9B10Fq78vpINar3nu8VL
         KZ/158e0d23FDPFrl60hA3uFdW0BXL0qXPvFrRLIxmYPT4pPODsNlBLgFL/sUpP3gePJ
         FampNdZJuzHiOzVEIP6PG0eLtbL8Ph8hGH3+8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=B5xmFStsyn0P3cwHqDVS+m6Yo+wOT32hFrJVShbYvZmSWgde86iPH4JM3GhBEUZdO8
         wI87jbAQdrMBhJaSkhLElAwBrpj6OsD5gX6BX059Jbj69p0ym1h4dl5FQ427RiXUoJkL
         0Lh/DMoQ7tl7JS6NXCg4UFibO0nEmaJAtkZXE=
Received: by 10.86.51.10 with SMTP id y10mr346525fgy.51.1229508030309;
        Wed, 17 Dec 2008 02:00:30 -0800 (PST)
Received: by 10.86.71.2 with HTTP; Wed, 17 Dec 2008 02:00:30 -0800 (PST)
Message-ID: <93228c910812170200g2eb8a964t6dcbe89de8a9220c@mail.gmail.com>
Date: Wed, 17 Dec 2008 11:00:30 +0100
From: "Jokin Cuadrado" <jokin.c@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inquiry on Lucene Stemming
In-Reply-To: <266062.59207.qm@web45307.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <283460.47599.qm@web45307.mail.sp1.yahoo.com>
	 <359a92830812160614k28e98a38he252cceb9f53c3be@mail.gmail.com>
	 <266062.59207.qm@web45307.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Well, you could use the queryparser wildcard searches  (flash*), but
it doesn't use stemming logic, it just returns all the words that
start with that string.

You must be aware that the queryparser rewrite the query with every
term that match the wildcard, so if your prefix is short it's easy to
get the maxclauseexception.

more info in:
http://lucene.apache.org/java/2_4_0/queryparsersyntax.html#Wildcard%20Searches

On Wed, Dec 17, 2008 at 12:42 AM, Jay Joel Malaluan
<exst_jmalaluan@yahoo.com> wrote:
> Hi Erick,
>
> Well some client inquiries if it's possible to expand such simple words and does Lucene have an API for this logic? Because all I read was the stemming logic for Lucene was the other way around which is, example "flashing" it will be trimmed to the root word "flash" when searched.
>
>
> Regards,
> Jay Malaluan
>
>
>
>
>
> ________________________________
> From: Erick Erickson <erickerickson@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, December 16, 2008 10:14:13 PM
> Subject: Re: Inquiry on Lucene Stemming
>
> Why do you want to do this? The reason I ask is that you're
> making each clause very complex.....
>
> For a single term, it's not very complex, but for something like
> ((A AND B) OR (C AND D)) NOT X
>
> expanding A, B, C, D and X to, possibly many terms is...er...ugly.
>
> You could think about ngrams, although I confess I've only seen
> this on the lists, haven't worked with it myself.
>
> If your goal is to be able to search exact match words (i.e. you
> need to find "flash" when exactly "flash" was indexed, not "flashing")
> there are better strategies....
>
> So a bit more explanation of the problem could perhaps generate more
> helpful responses.
>
> Best
> Erick
>
> On Tue, Dec 16, 2008 at 7:18 AM, Jay Joel Malaluan <exst_jmalaluan@yahoo.com
>> wrote:
>
>> Hi,
>>
>>
>> Can anyone comment if my understanding of the stemming process in Lucene is
>> correct. From my testing using the SnowballAnalyzer, if I passed this word
>> "flashing" it will be trimmed to a root word "flash" and this root word
>> ("flash") will be the one searched not the original word "flashing".
>>
>> Is there an API in Lucene or third-party APIs that can do the following, I
>> passed the word "flash" instead it will search for "flashing", "flashed",
>> "flashes" etc.?
>>
>>
>> Regards,
>> Jay Malaluan
>>
>>
>>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 10:58:53 2008
Return-Path: <java-user-return-37767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92360 invoked from network); 17 Dec 2008 10:58:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 10:58:53 -0000
Received: (qmail 34444 invoked by uid 500); 17 Dec 2008 10:58:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34410 invoked by uid 500); 17 Dec 2008 10:58:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34399 invoked by uid 99); 17 Dec 2008 10:58:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 02:58:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.107.125] (HELO smtp142.mail.mud.yahoo.com) (209.191.107.125)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 17 Dec 2008 10:58:43 +0000
Received: (qmail 98589 invoked from network); 17 Dec 2008 10:58:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=SLksJpKFohzur5G70sdWQRVnemjC5d7ujUXfyGZBYEWV2BFYjHaz1Ue0dyv21cS/fs04COYVqm8UlEbOBlWHTCZQ2wJrgGZaaP0ei3IeKG1Qlj1T0yzIFXnQnnBquWcjW/FyBhYAT2jPHl/PT9s9ntoO5oWoLAYZnKCDSeU5kws=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp142.mail.mud.yahoo.com with SMTP; 17 Dec 2008 10:58:18 -0000
X-YMail-OSG: Bba7IAIVM1nlLP5e_wy02Ltp1Gfc0_3mPuLH3hVfmOYj5p2AXjr9VD7QFfqdFt4jwUf_hw5rQ6HaDrvBFvdIvt8u3Yxes9TbVmWyYQQ8joLU1nOn3kl2eFVP.2D4WRu_xAULJmYVRwpNPYHyFZDhYFssZA--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <006901c96036$5eb4d6a0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: IndexReader delete
Date: Wed, 17 Dec 2008 16:28:00 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

When i perform a delete, i am getting the following exception

org.apache.lucene.store.LockObtainFailedException: Lock obtain timed out: 
SimpleFSLock@/<path>
	org.apache.lucene.store.Lock.obtain(Lock.java:85)
	org.apache.lucene.index.DirectoryIndexReader.acquireWriteLock(DirectoryIndexReader.java:303)
	org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java:837)

Indexing is done by separate process and search is performed from web ui. If 
the DB is locked by indexing app then the records will not be deleted using 
reader?

I want the deletion to be performed by Reader, so that it will get reflected 
in the results immediately.

Regards
Ganesh


Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 11:37:24 2008
Return-Path: <java-user-return-37768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75232 invoked from network); 17 Dec 2008 11:37:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 11:37:24 -0000
Received: (qmail 5102 invoked by uid 500); 17 Dec 2008 11:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4855 invoked by uid 500); 17 Dec 2008 11:37:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4725 invoked by uid 99); 17 Dec 2008 11:37:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 03:37:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 11:37:03 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mBHBaeb8019147
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 11:36:40 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12322)
    via ESMTP; Wed, 17 Dec 2008 11:36:40 +0000 (GMT)
Date: Wed, 17 Dec 2008 11:36:40 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <4948E448.3020803@scalix.com>
In-Reply-To: <359a92830812151012x5ccf8861r8e56ce1021be6674@mail.gmail.com>
References: <359a92830812150846h6a4efcb6q412244a34f20fbb3@mail.gmail.com>
References: <49469768.6030007@scalix.com>
References: <359a92830812151012x5ccf8861r8e56ce1021be6674@mail.gmail.com>
Subject: Returning hits by highest score
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0202.4948E448.0100,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Hi

In a search I am doing, there may be thousands of hits, of which I only 
want the 10 with the highest score. Will the following code do this for 
me, or will it simply return the first 10 it finds?

TopDocCollector collector = new TopDocCollector(10);
contentSearcher.search(q, collector);

If the latter case is true (i.e. the first 10 are returned), how can I 
get it to do what I want?

Thanks,

- Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 13:12:13 2008
Return-Path: <java-user-return-37769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72376 invoked from network); 17 Dec 2008 13:12:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 13:12:13 -0000
Received: (qmail 43284 invoked by uid 500); 17 Dec 2008 13:12:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43248 invoked by uid 500); 17 Dec 2008 13:12:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43237 invoked by uid 99); 17 Dec 2008 13:12:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 05:12:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 13:11:55 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.311.2; Wed, 17 Dec 2008 14:11:33 +0100
Subject: Re: TopDocs - Get all docs?
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <OFBA2608AA.99567520-ON85257519.004E328A-85257519.004E6B04@us.ibm.com>
References: <OFBA2608AA.99567520-ON85257519.004E328A-85257519.004E6B04@us.ibm.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Wed, 17 Dec 2008 14:16:31 +0100
Message-ID: <1229519791.25256.365.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2008-12-08 at 15:17 +0100, Donna L Gresh wrote:
>         public Vector getIndexIds() throws Exception {
>  
>                 Vector vec = new Vector();
>                 IndexReader ireader = IndexReader.open(directoryName);
>                 int numdocs = ireader.numDocs();
>                 for (int i=0; i<numdocs; i++) {
>                         Document doc = ireader.document(i);

It's probably best to perform a check for ireader.isDeleted(i) here,
unless the index never contains deleted documents.

>                         Field field = doc.getField("empid");
>                         if (field==null) {
>                                 continue;
>                         }
>                         String contents = field.stringValue();
>                         vec.add(contents);
>                 }
>                 return vec;
>         }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 13:12:43 2008
Return-Path: <java-user-return-37770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75128 invoked from network); 17 Dec 2008 13:12:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 13:12:43 -0000
Received: (qmail 48414 invoked by uid 500); 17 Dec 2008 13:12:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48384 invoked by uid 500); 17 Dec 2008 13:12:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48373 invoked by uid 99); 17 Dec 2008 13:12:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 05:12:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 13:12:34 +0000
Received: by bwz9 with SMTP id 9so1003875bwz.5
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 05:12:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=R61rGQh7IzdOom5BFGVu7Id52szBX4Q2ydZXiXdICPE=;
        b=RQT2fvbsLNltfXzNITG1pHxIA3Xht9tjPhuYXMj60UCrogmsVfG2j0ZH4/rAVQEjHE
         88CdFnsxmxjT4JWxmidPJLBQ1UcPPFbgEg1fOQIDJxEtXs7/ocYvLcHGL7t9/JJrjy/F
         tiJoP1PEXHqnG7WpZOCUFo8Yxgwl3tiPvOACo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=OyXxGtPvFHeYVTmCQ3Nfv4cnVrjJzacEw4KYQs38DdzlQSeXDbKw52FZY8sftjpqAt
         CcXmUpZdtXyQ6sEAifSXjXJZhqhwmsdwO7wy5V32ZbpOBBe1gsl00dwBxJmQmWfTbgfJ
         75EhgLmRi1yYiT6XdF3swK2b+YkVJfM5PhAjw=
Received: by 10.181.10.10 with SMTP id n10mr247104bki.72.1229519533724;
        Wed, 17 Dec 2008 05:12:13 -0800 (PST)
Received: by 10.180.210.11 with HTTP; Wed, 17 Dec 2008 05:12:13 -0800 (PST)
Message-ID: <5d53d5770812170512t50f268e2i142bc60c8cc431e@mail.gmail.com>
Date: Wed, 17 Dec 2008 08:12:13 -0500
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Persian (Farsi) Language Analyzer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5912_24166883.1229519533706"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5912_24166883.1229519533706
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have ported the Java version of the Arabic analyzer recently committed to
Lucene.Net

Is there any work been done on a Farsi Analyzer (Persian Language)

Thanks,
Ian

------=_Part_5912_24166883.1229519533706--

From java-user-return-37771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 13:26:15 2008
Return-Path: <java-user-return-37771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14942 invoked from network); 17 Dec 2008 13:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 13:26:14 -0000
Received: (qmail 63300 invoked by uid 500); 17 Dec 2008 13:26:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63265 invoked by uid 500); 17 Dec 2008 13:26:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63253 invoked by uid 99); 17 Dec 2008 13:26:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 05:26:20 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gresh@us.ibm.com designates 32.97.182.138 as permitted sender)
Received: from [32.97.182.138] (HELO e8.ny.us.ibm.com) (32.97.182.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 13:26:05 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e8.ny.us.ibm.com (8.13.1/8.13.1) with ESMTP id mBHDKhnt029802
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 08:20:43 -0500
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v9.1) with ESMTP id mBHDPilx152446
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 08:25:44 -0500
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id mBHEPs2T027804
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 09:25:54 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id mBHEPsJH027796
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 09:25:54 -0500
In-Reply-To: <1229519791.25256.365.camel@pc286>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: TopDocs - Get all docs?
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OFD1237123.AB5441C2-ON85257522.00499071-85257522.0049B23D@us.ibm.com>
Date: Wed, 17 Dec 2008 08:25:43 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Release 8.5|December 05, 2008) at
 12/17/2008 08:25:44,
	Serialize complete at 12/17/2008 08:25:44
Content-Type: multipart/alternative; boundary="=_alternative 0049B1D685257522_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0049B1D685257522_=
Content-Type: text/plain; charset="US-ASCII"

Thanks-
Yes in my use-case there are never any deleted documents when the search 
is run- (deletion takes place in a pre-processing stage)

Toke Eskildsen <te@statsbiblioteket.dk> wrote on 12/17/2008 08:16:31 AM:

> On Mon, 2008-12-08 at 15:17 +0100, Donna L Gresh wrote:
> >         public Vector getIndexIds() throws Exception {
> > 
> >                 Vector vec = new Vector();
> >                 IndexReader ireader = IndexReader.open(directoryName);
> >                 int numdocs = ireader.numDocs();
> >                 for (int i=0; i<numdocs; i++) {
> >                         Document doc = ireader.document(i);
> 
> It's probably best to perform a check for ireader.isDeleted(i) here,
> unless the index never contains deleted documents.
> 
> >                         Field field = doc.getField("empid");
> >                         if (field==null) {
> >                                 continue;
> >                         }
> >                         String contents = field.stringValue();
> >                         vec.add(contents);
> >                 }
> >                 return vec;
> >         }
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

--=_alternative 0049B1D685257522_=--

From java-user-return-37772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 13:48:24 2008
Return-Path: <java-user-return-37772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60835 invoked from network); 17 Dec 2008 13:48:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 13:48:24 -0000
Received: (qmail 87254 invoked by uid 500); 17 Dec 2008 13:48:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87042 invoked by uid 500); 17 Dec 2008 13:48:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87031 invoked by uid 99); 17 Dec 2008 13:48:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 05:48:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of torindan@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 13:48:15 +0000
Received: by fxm7 with SMTP id 7so927313fxm.5
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 05:47:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Lgu9kALNx6GxxwFL8xN/YJq2MquxTM4ZZVzWmByJmMw=;
        b=Q/Ce6nXPhXXSY+c7avaSMAVQxdbC5MbM/HzPFsyzrExtpF523BnA5jPi7DrPhnUi+O
         gc8Kguj5qjm9E4BFfmpvQgslh5ozGNMmE62qI4Wi2fVvdDNST1QqZvwqqWjHuHCvxjB7
         /B41bPIeSVu101E0nixleei3WHP7NoqQwMFSo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=EmZQ0IpOAOZO8+wz6pylgxmx+St7nSQuxkq/RFZ5GPyE5eSTJOSTagK3Kf3AtwrQmo
         +09JW9rJjwqwJ6TLLiNvyZE+xUEpsHYAD1z9hf73rLjhuLXM0EglsB5/V0O+dRS/i3hl
         t9I2ycMt0mjVRpmKjFk7LLR+dmL+k2NUA2q1U=
Received: by 10.181.55.2 with SMTP id h2mr256545bkk.52.1229521674815;
        Wed, 17 Dec 2008 05:47:54 -0800 (PST)
Received: by 10.181.205.17 with HTTP; Wed, 17 Dec 2008 05:47:54 -0800 (PST)
Message-ID: <2ffb6d060812170547p7a24f08bx242eb6815b4fd0d@mail.gmail.com>
Date: Wed, 17 Dec 2008 15:47:54 +0200
From: "=?UTF-8?Q?Danil_=C5=A2ORIN?=" <torindan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Returning hits by highest score
In-Reply-To: <4948E448.3020803@scalix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <359a92830812151012x5ccf8861r8e56ce1021be6674@mail.gmail.com>
	 <4948E448.3020803@scalix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

According to http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/TopDocCollector.html
it does.

After search, simple retrieve TopDocs and read documens you need:

List<Document> result = new ArrayList<Document>(10);
for( ScoreDoc sDoc :collector.topDocs().scoreDocs) {
    result.add(contentSearcher.doc(sDoc.doc));
}

And use result.

On Wed, Dec 17, 2008 at 13:36, Chris Bamford <chris.bamford@scalix.com> wrote:
> Hi
>
> In a search I am doing, there may be thousands of hits, of which I only want
> the 10 with the highest score. Will the following code do this for me, or
> will it simply return the first 10 it finds?
>
> TopDocCollector collector = new TopDocCollector(10);
> contentSearcher.search(q, collector);
>
> If the latter case is true (i.e. the first 10 are returned), how can I get
> it to do what I want?
>
> Thanks,
>
> - Chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 13:54:10 2008
Return-Path: <java-user-return-37773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64894 invoked from network); 17 Dec 2008 13:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 13:54:10 -0000
Received: (qmail 94954 invoked by uid 500); 17 Dec 2008 13:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94919 invoked by uid 500); 17 Dec 2008 13:54:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94908 invoked by uid 99); 17 Dec 2008 13:54:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 05:54:15 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 13:54:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 2EF313BA09
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 05:53:37 -0800 (PST)
Message-Id: <B60CB2B1-84C9-4560-BD06-F5D048C1D9FA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <21045385.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: IDF scoring issue
Date: Wed, 17 Dec 2008 08:53:36 -0500
References: <21045385.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 16, 2008, at 8:19 PM, Rajiv2 wrote:

>
> Hello,
>
> I'm using the default lucene Queryparser on the search text : fleming
> roofing inc., marietta ga
>
> Also, I don't want to modify the search text by putting quotes around
> "marietta ga" which forces the query parser to make a phrase query.

Why not?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 14:00:10 2008
Return-Path: <java-user-return-37774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73455 invoked from network); 17 Dec 2008 14:00:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 14:00:09 -0000
Received: (qmail 6790 invoked by uid 500); 17 Dec 2008 14:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6768 invoked by uid 500); 17 Dec 2008 14:00:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6757 invoked by uid 99); 17 Dec 2008 14:00:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 06:00:15 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 13:59:53 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1447032ywj.5
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 05:59:31 -0800 (PST)
Received: by 10.90.71.16 with SMTP id t16mr369505aga.1.1229522371376;
        Wed, 17 Dec 2008 05:59:31 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 32sm4457805aga.39.2008.12.17.05.59.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Dec 2008 05:59:30 -0800 (PST)
Message-Id: <1A890D4C-F46D-42BA-9611-1A415271E037@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <2ffb6d060812170547p7a24f08bx242eb6815b4fd0d@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Returning hits by highest score
Date: Wed, 17 Dec 2008 08:59:27 -0500
References: <359a92830812151012x5ccf8861r8e56ce1021be6674@mail.gmail.com> <4948E448.3020803@scalix.com> <2ffb6d060812170547p7a24f08bx242eb6815b4fd0d@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Right, it returns the best 10 documents by score (not the first 10 =20
docs it sees).

You could also simply use the search(Query, int) method too (which =20
just creates the TopDocCollector under the hood).

Mike

Danil =C5=A2ORIN wrote:

> According to =
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/TopDocCol=
lector.html
> it does.
>
> After search, simple retrieve TopDocs and read documens you need:
>
> List<Document> result =3D new ArrayList<Document>(10);
> for( ScoreDoc sDoc :collector.topDocs().scoreDocs) {
>    result.add(contentSearcher.doc(sDoc.doc));
> }
>
> And use result.
>
> On Wed, Dec 17, 2008 at 13:36, Chris Bamford =20
> <chris.bamford@scalix.com> wrote:
>> Hi
>>
>> In a search I am doing, there may be thousands of hits, of which I =20=

>> only want
>> the 10 with the highest score. Will the following code do this for =20=

>> me, or
>> will it simply return the first 10 it finds?
>>
>> TopDocCollector collector =3D new TopDocCollector(10);
>> contentSearcher.search(q, collector);
>>
>> If the latter case is true (i.e. the first 10 are returned), how =20
>> can I get
>> it to do what I want?
>>
>> Thanks,
>>
>> - Chris
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 14:06:34 2008
Return-Path: <java-user-return-37775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97651 invoked from network); 17 Dec 2008 14:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 14:06:34 -0000
Received: (qmail 27700 invoked by uid 500); 17 Dec 2008 14:06:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27674 invoked by uid 500); 17 Dec 2008 14:06:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27663 invoked by uid 99); 17 Dec 2008 14:06:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 06:06:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 14:06:24 +0000
Received: by qyk13 with SMTP id 13so3868726qyk.5
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 06:06:03 -0800 (PST)
Received: by 10.214.243.8 with SMTP id q8mr772969qah.319.1229522763212;
        Wed, 17 Dec 2008 06:06:03 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 8sm5686109ywg.3.2008.12.17.06.06.02
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Dec 2008 06:06:02 -0800 (PST)
Message-Id: <C1AD02B5-B166-4E66-A195-6291AF28069A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <OFD1237123.AB5441C2-ON85257522.00499071-85257522.0049B23D@us.ibm.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: TopDocs - Get all docs?
Date: Wed, 17 Dec 2008 09:06:00 -0500
References: <OFD1237123.AB5441C2-ON85257522.00499071-85257522.0049B23D@us.ibm.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


It might be faster to use FieldCache.DEFAULT.getStrings(reader,  
"empid"), assuming empid is indexed but is not analyzed (or always  
analyzes to one token).

Though, that then persists the resulting array in the FieldCache.

We are wanting to create "column stride fields" (LUCENE-1231) to make  
accessing a single field's value for all docs fast... but it'll be  
some time before that's in.

Mike

Donna L Gresh wrote:

> Thanks-
> Yes in my use-case there are never any deleted documents when the  
> search
> is run- (deletion takes place in a pre-processing stage)
>
> Toke Eskildsen <te@statsbiblioteket.dk> wrote on 12/17/2008 08:16:31  
> AM:
>
>> On Mon, 2008-12-08 at 15:17 +0100, Donna L Gresh wrote:
>>>        public Vector getIndexIds() throws Exception {
>>>
>>>                Vector vec = new Vector();
>>>                IndexReader ireader =  
>>> IndexReader.open(directoryName);
>>>                int numdocs = ireader.numDocs();
>>>                for (int i=0; i<numdocs; i++) {
>>>                        Document doc = ireader.document(i);
>>
>> It's probably best to perform a check for ireader.isDeleted(i) here,
>> unless the index never contains deleted documents.
>>
>>>                        Field field = doc.getField("empid");
>>>                        if (field==null) {
>>>                                continue;
>>>                        }
>>>                        String contents = field.stringValue();
>>>                        vec.add(contents);
>>>                }
>>>                return vec;
>>>        }
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 14:09:04 2008
Return-Path: <java-user-return-37776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14560 invoked from network); 17 Dec 2008 14:09:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 14:09:03 -0000
Received: (qmail 32510 invoked by uid 500); 17 Dec 2008 14:09:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32486 invoked by uid 500); 17 Dec 2008 14:09:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32475 invoked by uid 99); 17 Dec 2008 14:09:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 06:09:08 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 14:08:47 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 80BE37B31D
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 06:08:25 -0800 (PST)
Message-Id: <0CF47CCF-99F8-4D22-9C21-0F54E330DCED@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <DB201A57A2CA49D2860FDA4AF27A9F24@VujaDe>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Order of fields returned by Document.getFields()
Date: Wed, 17 Dec 2008 09:08:24 -0500
References: <DB201A57A2CA49D2860FDA4AF27A9F24@VujaDe>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 16, 2008, at 10:00 AM, Patrick Johnstone wrote:

>
> I'm using Lucene via Solr and recently upgraded from an early Summer  
> nightly
> build to the released version of Solr 1.3 (which seems to use  
> something in
> the neighborhood of Lucene 2.3).  I'm posting this here because I  
> believe
> that my issue is with Lucene, not Solr.

Do you know the version of Lucene in that version of Solr (from this  
summer).  If you open up the JAR, it should be in the Manifest.  With  
that info, I can go back and look at that revision of Lucene.  I'm  
guessing that it was at least 2.3 as well, but I'm not sure.

>
>
> After the upgrade, I noticed that the order of fields being returned  
> for
> documents had changed.  Previously, the order of fields being  
> returned was
> the same as the order in which they were added to the document  
> (which is
> what's stated in the FAQ and other places I came across but not  
> specifically
> spelled out in the Javadoc).
> Now, the fields always seem to come back in lexicographic order by  
> field
> name.

I would agree these are contradictory.  I've always understood the  
contract to be such that they would be returned in order of addition.   
Still, seems like it isn't something I would rely on.


>
>
> I believe (but am by no means sure) that this is being caused by the
> following bit of code in DocFieldProcessorPerThread.java:
>
>    // If we are writing vectors then we must visit
>    // fields in sorted order so they are written in
>    // sorted order.  TODO: we actually only need to
>    // sort the subset of fields that have vectors
>    // enabled; we could save [small amount of] CPU
>    // here.
>    quickSort(fields, 0, fieldCount-1);
>
>    for(int i=0;i<fieldCount;i++)
>      fields[i].consumer.processFields(fields[i].fields,
> fields[i].fieldCount);
>
> This code seems to sort the fields of the document into order before
> processing them.  If this is true, then the original field order is  
> lost and
> can't ever be recovered.  (None of the fields in our index use  
> TermVectors.)
>
> My questions are:  Is my reading of this behavior correct?  ...and...

I believe it is, but would be good to have Mike comment, as he wrote  
this code.


>
> if so:  Is there some other way to get the original order back?

Not sure yet.  There seems to be a need for it when writing the term  
vectors.

>
>
> The application that I'm building took some advantage of the fact  
> that the
> fields were returned in the orignial order (becuase the order had some
> meaning) and it may be difficult for me to work around this change.
>

Can you describe your use case a bit more?  Perhaps we can brainstorm  
some alternatives, just to give you options.

-Grant

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 14:11:08 2008
Return-Path: <java-user-return-37777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21999 invoked from network); 17 Dec 2008 14:11:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 14:11:08 -0000
Received: (qmail 37478 invoked by uid 500); 17 Dec 2008 14:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37446 invoked by uid 500); 17 Dec 2008 14:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37435 invoked by uid 99); 17 Dec 2008 14:11:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 06:11:13 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 14:10:53 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1674181fgb.27
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 06:10:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=dESxnMnqWuCjewVpjyohq5DPfdoKhopBzDi34XcD6fk=;
        b=HCvBqQi92rfHlkWI1JqEjQ0b/BOQ/9sy7wshNpcNd2dP8XdXMSrF449zVrKtnUaJAt
         vW8ERdb2tIHPDqdQlTIwtjXxVno2bPtHLpfQ7ZXM7XOaDAISw0h1wNkeOWyGmYxOoxcY
         I9gjsyPeTL63oVbKOpVCLoZc22nVngH5vURNY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fg4HK68T9GlfZo8sjR04NKAxpfndTMYSl+kMcJtQGwVo9zmSdpSH1og8m7FtoROjdl
         3uF7uNeSD3jZeeL1DUSO8BdToUoKuiQJP53js0scdL49BFnenW0rz++VaohtBFP6rJpi
         f8vlCMYguTiLg9z3v6PyLr9EFzLJs27D9pb70=
Received: by 10.86.62.3 with SMTP id k3mr490766fga.47.1229523031704;
        Wed, 17 Dec 2008 06:10:31 -0800 (PST)
Received: by 10.86.76.11 with HTTP; Wed, 17 Dec 2008 06:10:31 -0800 (PST)
Message-ID: <359a92830812170610n686db28eq74fff8882bd68fe9@mail.gmail.com>
Date: Wed, 17 Dec 2008 09:10:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unique results in BooleanQuery
In-Reply-To: <21047428.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4413_15952427.1229523031699"
References: <21047428.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4413_15952427.1229523031699
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could also think about a filter. Just run q1 as a regular query.
Use one of the Collector methods to create a Filter. At the end,
invert the Filter and use it as a parameter for your second query.

Best
Erick

On Wed, Dec 17, 2008 at 12:23 AM, Jay Malaluan <exst_jmalaluan@yahoo.com>wrote:

>
> Hi,
>
> Anyone knowledgeable on how to get unique hits using the BooleanQuery?
> If I have 2 queries so the when the 1st query is processed then the 2nd
> query will not anymore return the same results from the 1st query.
>
>
> Regards,
> Jay Malaluan
> --
> View this message in context:
> http://www.nabble.com/Unique-results-in-BooleanQuery-tp21047428p21047428.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4413_15952427.1229523031699--

From java-user-return-37778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 14:11:17 2008
Return-Path: <java-user-return-37778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22262 invoked from network); 17 Dec 2008 14:11:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 14:11:17 -0000
Received: (qmail 39171 invoked by uid 500); 17 Dec 2008 14:11:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39132 invoked by uid 500); 17 Dec 2008 14:11:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39121 invoked by uid 99); 17 Dec 2008 14:11:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 06:11:22 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 14:11:08 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 8DF053B9FC
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 06:10:44 -0800 (PST)
Message-Id: <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <494894D2.9010901@cisco.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Combining results of multiple indexes
Date: Wed, 17 Dec 2008 09:10:39 -0500
References: <494894D2.9010901@cisco.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:

> Hi,
> I am new to Lucene. I am not using it as a pure text indexer.
>
> I am trying to index a Java object which has about 10 fields (like  
> id, time, srcIp, dstIp) - most of them being numerical values.
> In order to speed up indexing, I figured that having two separate  
> indexers, each of them indexing different set of fields works great.  
> So I have the first 5 fields in index1 and the remaining in index2.

Can you explain this a bit more?  Are those two fields really large  
org something?  How are you obtaining them?  How are you correlating  
the documents between the two indexes?  Did you actually try a single  
index and it was too slow?

>
>
> Now, I want to have boolean AND query's looking for values in both  
> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two  
> separate indexes. Would using the MultiIndexReader help ? Since I am  
> doing an AND, I dont expect that it would work.
>
> Thanks,
> ~preetham
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 14:16:30 2008
Return-Path: <java-user-return-37779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38672 invoked from network); 17 Dec 2008 14:16:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 14:16:29 -0000
Received: (qmail 50518 invoked by uid 500); 17 Dec 2008 14:16:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50488 invoked by uid 500); 17 Dec 2008 14:16:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50477 invoked by uid 99); 17 Dec 2008 14:16:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 06:16:35 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 14:16:14 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1675272fgb.27
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 06:15:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=6OFphPW1ooeeSPHJEhIFxx7Oe938k+AbPWKR77rKoUc=;
        b=yIIQ0Jm+6Hxeu/+qflEoZIllaVCMlN/vIC4v1d+VjfkomMngMH8uzlCK5ZMS7ozqBi
         8jzXdavkNPyJPNj2gDUyo4ndtmvfRJ0RYJyvMyYSTWxdMRStWgaEUoNPQZz+kE/B3x7h
         Rea/dSOdhBiLpE2iGu166pEcK8TeayfgTsjAw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=omkzwAQAojuS5j+ATf087lnJutwDaclGI4+InhbqRdNCzjVelBy/N2lRkwvWc1SwRj
         03hB1owU05sZz+GZURQcMCHFwVkgjVcRsU4C/VY4nk/X2l5z5Yu4E7AaFRu9yeaueZPW
         T/6uERoT/BUFfSZo/PBwL152ZqzDsveu2JJ6c=
Received: by 10.86.99.9 with SMTP id w9mr495258fgb.38.1229523353319;
        Wed, 17 Dec 2008 06:15:53 -0800 (PST)
Received: by 10.86.76.11 with HTTP; Wed, 17 Dec 2008 06:15:53 -0800 (PST)
Message-ID: <359a92830812170615t7bd22b54he16b3357a6db6a62@mail.gmail.com>
Date: Wed, 17 Dec 2008 09:15:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: What are the best document edit options?
In-Reply-To: <6F1D5641-0A90-47EB-BE2D-75BDE0F07836@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4486_21148717.1229523353316"
References: <21047428.post@talk.nabble.com> <4948900B.4050005@aconex.com>
	 <196811.89212.qm@web45303.mail.sp1.yahoo.com>
	 <13158.43731.qm@web45306.mail.sp1.yahoo.com>
	 <6F1D5641-0A90-47EB-BE2D-75BDE0F07836@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4486_21148717.1229523353316
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What version of Lucene are you using? The more recent ones have
IndexWriter.updateDocument......

Best
Erick

On Wed, Dec 17, 2008 at 2:20 AM, Thomas J. Buhr <visual.logic@gmail.com>wrote:

> Hello Lucene,
>
> Looking at the document object it seems like each time I want to edit its
> contents I need to do the following:
>
> 1 - fetch the document
> 2 - dump its contents into a temp container
> 3 - update field values in the temp container
> 4 - create a new document
> 5 - transfer my updated field values back into the new document
> 6 - add document back into the index
>
> This seems like a long process, is it really necessary?
>
> An index structure does seem ideal for storing and searching a large set of
> symbolic strings in my app. From here I need to render these string chars as
> visible nodes on screen, this can be done with the new JavaFX API .
>
> JavaFX has a unique binding system that would also be great to use. Using
> binding I could setup two way (inverse) binding between the fields in a
> document and the rendered screen nodes. This way when there is a value
> change in the rendered node the document field values  would auto update and
> also if there is a change in the document field value the node would auto
> update.
>
> This update senario via binding would be ideal. How can it be done?
>
> Information about the JavaFX binding mechanism is available at this link:
>
> http://java.sun.com/javafx/1/tutorials/core/dataBinding
>
>
> Hope this can work,
>
> Thom
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4486_21148717.1229523353316--

From java-user-return-37780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 14:27:34 2008
Return-Path: <java-user-return-37780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76280 invoked from network); 17 Dec 2008 14:27:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 14:27:34 -0000
Received: (qmail 78592 invoked by uid 500); 17 Dec 2008 14:27:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78550 invoked by uid 500); 17 Dec 2008 14:27:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78539 invoked by uid 99); 17 Dec 2008 14:27:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 06:27:39 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 14:27:18 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LCxMY-0000vl-0V
	for java-user@lucene.apache.org; Wed, 17 Dec 2008 06:26:58 -0800
Message-ID: <21054127.post@talk.nabble.com>
Date: Wed, 17 Dec 2008 06:26:58 -0800 (PST)
From: Rajiv2 <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IDF scoring issue
In-Reply-To: <B60CB2B1-84C9-4560-BD06-F5D048C1D9FA@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: rajiv.roopan@gmail.com
References: <21045385.post@talk.nabble.com> <B60CB2B1-84C9-4560-BD06-F5D048C1D9FA@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Because, the search term is provided by a user, and that user would explicity
have to put quotes around "marietta ga" when I beleive the search text as it
is : fleming roofing inc., marietta ga  -- should score higher for "marietta
ga"

rajiv


Grant Ingersoll-6 wrote:
> 
> 
> On Dec 16, 2008, at 8:19 PM, Rajiv2 wrote:
> 
>>
>> Hello,
>>
>> I'm using the default lucene Queryparser on the search text : fleming
>> roofing inc., marietta ga
>>
>> Also, I don't want to modify the search text by putting quotes around
>> "marietta ga" which forces the query parser to make a phrase query.
> 
> Why not?
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/IDF-scoring-issue-tp21045385p21054127.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 14:41:15 2008
Return-Path: <java-user-return-37781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7770 invoked from network); 17 Dec 2008 14:41:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 14:41:14 -0000
Received: (qmail 96871 invoked by uid 500); 17 Dec 2008 14:41:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96834 invoked by uid 500); 17 Dec 2008 14:41:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96823 invoked by uid 99); 17 Dec 2008 14:41:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 06:41:19 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [64.104.129.195] (HELO ind-iport-1.cisco.com) (64.104.129.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 14:41:04 +0000
X-IronPort-AV: E=Sophos;i="4.36,237,1228089600"; 
   d="scan'208";a="36525662"
Received: from ind-dkim-2.cisco.com ([64.104.140.59])
  by ind-iport-1.cisco.com with ESMTP; 17 Dec 2008 14:40:39 +0000
Received: from india-core-1.cisco.com (india-core-1.cisco.com [64.104.129.221])
	by ind-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id mBHEedrY029920
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 20:10:39 +0530
Received: from xbh-blr-412.apac.cisco.com (xbh-blr-412.cisco.com [64.104.140.149])
	by india-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id mBHEec4n026451
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 14:40:38 GMT
Received: from xfe-blr-412.apac.cisco.com ([64.104.140.152]) by xbh-blr-412.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 17 Dec 2008 20:10:38 +0530
Received: from [10.65.71.73] ([10.65.71.73]) by xfe-blr-412.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 17 Dec 2008 20:10:38 +0530
Message-ID: <49490F4B.1030607@cisco.com>
Date: Wed, 17 Dec 2008 20:10:11 +0530
From: Preetham Kajekar <preetham@cisco.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
References: <494894D2.9010901@cisco.com> <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>
In-Reply-To: <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 17 Dec 2008 14:40:38.0256 (UTC) FILETIME=[6D830700:01C96055]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=2992; t=1229524839; x=1230388839;
	c=relaxed/simple; s=inddkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=preetham@cisco.com;
	z=From:=20Preetham=20Kajekar=20<preetham@cisco.com>
	|Subject:=20Re=3A=20Combining=20results=20of=20multiple=20i
	ndexes
	|Sender:=20;
	bh=AjRTX4y3DhkbrbA9w5vtKZfRn2qQmJMiEkYd0I3GSio=;
	b=iuUN3uA2x1BQqrf5kN7qx4KioX2VCi7X8BP/t5zxJXbmPYOWpS46E4rXrC
	FkxHI0QqPziy0lHrnKpEGbbKY83NnGUOQbIN5C8D2XCHNnEHi9torla71uov
	h1wSJzrBzM;
Authentication-Results: ind-dkim-2; header.From=preetham@cisco.com; dkim=pass (
	sig from cisco.com/inddkim2002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Grant,
 Thanks four response. Replies inline.

Grant Ingersoll wrote:
>
> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>
>> Hi,
>> I am new to Lucene. I am not using it as a pure text indexer.
>>
>> I am trying to index a Java object which has about 10 fields (like 
>> id, time, srcIp, dstIp) - most of them being numerical values.
>> In order to speed up indexing, I figured that having two separate 
>> indexers, each of them indexing different set of fields works great. 
>> So I have the first 5 fields in index1 and the remaining in index2.
>
> Can you explain this a bit more?  Are those two fields really large 
> org something?  How are you obtaining them?  How are you correlating 
> the documents between the two indexes?  Did you actually try a single 
> index and it was too slow?
I have a java object which has about 10 fields. However, the fields are 
not fixed. The java object is essentially a representation of Syslogs 
from network devices. So different syslogs have different fields. Each 
field has a unique id and a value (mostly numeric types, so i convert it 
to string). There are some fixed fields. So the object is a list of 
fields which is produced by a parser.
I am trying to index using two indexers in two separate threads- one for 
fixed and another for the non-fixed fields. Except for a unique id, I do 
not store the fields in Lucene - i just index them. From the index, i 
get the unique id which is all I care about. (the objects are stored 
elsewhere and can be looked up based on this unique id).
I did try using a single indexer, but things were quite slow. Getting 
high throughput is crucial and having two indexers seemed to do very 
well. (more than twice as fast)

Further, the index will never be modified and I can have just one thread 
writing to the index. If there are any other performance tips would be 
very helpful. I have already looked at the wiki link regarding 
performance and using some of them.

Thanks,
 ~preetham
>
>>
>>
>> Now, I want to have boolean AND query's looking for values in both 
>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two 
>> separate indexes. Would using the MultiIndexReader help ? Since I am 
>> doing an AND, I dont expect that it would work.
>>
>> Thanks,
>> ~preetham
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 15:00:36 2008
Return-Path: <java-user-return-37782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46833 invoked from network); 17 Dec 2008 15:00:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 15:00:35 -0000
Received: (qmail 20060 invoked by uid 500); 17 Dec 2008 15:00:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20023 invoked by uid 500); 17 Dec 2008 15:00:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20012 invoked by uid 99); 17 Dec 2008 15:00:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 07:00:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.76.80.74] (HELO ambria.tchmachines.com) (208.76.80.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 15:00:19 +0000
Received: from [70.88.250.221] (helo=VujaDe)
	by ambria.tchmachines.com with esmtpa (Exim 4.69)
	(envelope-from <pjohnstone@dejavunet.net>)
	id 1LCxsS-00066m-RX
	for java-user@lucene.apache.org; Wed, 17 Dec 2008 09:59:57 -0500
From: "Patrick Johnstone" <pjohnstone@dejavunet.net>
To: <java-user@lucene.apache.org>
References: <DB201A57A2CA49D2860FDA4AF27A9F24@VujaDe> <0CF47CCF-99F8-4D22-9C21-0F54E330DCED@apache.org>
Subject: RE: Order of fields returned by Document.getFields()
Date: Wed, 17 Dec 2008 09:59:52 -0500
Organization: DejaVu Networks
Message-ID: <6526C348CFD84830A7B48369F2714F9B@VujaDe>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <0CF47CCF-99F8-4D22-9C21-0F54E330DCED@apache.org>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AclgUQKoZsrkDWlEQmGIr1GqqGdExwAAh+Jw
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - ambria.tchmachines.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - dejavunet.net
X-Virus-Checked: Checked by ClamAV on apache.org

 

> >
> > I'm using Lucene via Solr and recently upgraded from an 
> early Summer 
> > nightly build to the released version of Solr 1.3 (which 
> seems to use 
> > something in the neighborhood of Lucene 2.3).  I'm posting 
> this here 
> > because I believe that my issue is with Lucene, not Solr.
> 
> Do you know the version of Lucene in that version of Solr 
> (from this summer).  If you open up the JAR, it should be in 
> the Manifest.  With that info, I can go back and look at that 
> revision of Lucene.  I'm guessing that it was at least 2.3 as 
> well, but I'm not sure.
> 

All of the lucene jar files from the Solr nightly are 2.3.1.


> >
> >
> > After the upgrade, I noticed that the order of fields being 
> returned 
> > for documents had changed.  Previously, the order of fields being 
> > returned was the same as the order in which they were added to the 
> > document (which is what's stated in the FAQ and other places I came 
> > across but not specifically spelled out in the Javadoc).
> > Now, the fields always seem to come back in lexicographic order by 
> > field name.
> 
> I would agree these are contradictory.  I've always understood the  
> contract to be such that they would be returned in order of 
> addition.   
> Still, seems like it isn't something I would rely on.
> 

Given no specific statement of contract in the Javadoc, I would
agree that the returned order of fields would be undefined.  But
that didn't stop me from being hopeful that the original order
would be maintained. :-)


> >
> >
> > The application that I'm building took some advantage of the fact  
> > that the
> > fields were returned in the orignial order (becuase the 
> order had some
> > meaning) and it may be difficult for me to work around this change.
> >
> 
> Can you describe your use case a bit more?  Perhaps we can 
> brainstorm  
> some alternatives, just to give you options.
> 

The documents in the index are largely free-form -- that is, I have
no a priori knowledge of what fields are in a given document.  There
are some well-defined fields that have a known type, particularly the
default field which is where most (but not all) of the searching is
done.  The best way to think of it may be that a document has chunk of
searchable text in the default field and the other fields represent
various metadata (potentially searchable) that the document creator
has defined.  In some cases, the order of the metatdata fields is
significant (e.g. more "interesting" fields are added earlier).

My first thought as an alternative would be to create a new field
(stored but not indexed) that just contained the names of the fields
in their original order.  I could probably live with the extra storage
requirements this would cause but there would be a fair amount of
repetitive data.  (The documents tend to fall into types which are
somewhat similar as a group, thus their field orders would be similar.)

Having the field order implicitly defined by the indexing process
would be more efficient but I don't have a grasp of the Lucene internals
so I don't know what forces drove the code change.


Thanks,

Patrick


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 15:07:38 2008
Return-Path: <java-user-return-37783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68715 invoked from network); 17 Dec 2008 15:07:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 15:07:37 -0000
Received: (qmail 28794 invoked by uid 500); 17 Dec 2008 15:07:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27792 invoked by uid 500); 17 Dec 2008 15:07:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27781 invoked by uid 99); 17 Dec 2008 15:07:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 07:07:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 15:07:28 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4412896rvb.5
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 07:07:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=QW1NG/qm5K8VyRQqhiW002ulstv9kY+2dIJipjzcv2U=;
        b=SxU5GzhgE0p8y3wn5Pfjf36C4L4uSpfJ2oT1j9FYTjNj/l8UqqChKbXkJCthQCmNwU
         GI3yWKKk0JVi7IwAxz35zTmH1j7kyN3ddjt4pc8Cl/3ZvnNisMJFLbE0vmpQD/PZ5rME
         j+NP+vb43cXmPvgdmSjaJ2ifXIEMNmShgqpgw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=nDavMSztzWySAH02RL85Pafino4r2SaCuS1tfIK2iaawhcZdlvs3y9HluAMBS4mlWD
         QvMAR2UWkbbQl8cfClcyGt6RF4HWxY5pNk5pkBW7vKfg+/ATeI7G6P/F5FVaPBa2bBO3
         z/x05/YMfiICdBC+ytjuYy4yDsuMHY6TDnylw=
Received: by 10.141.23.7 with SMTP id a7mr420451rvj.238.1229526426872;
        Wed, 17 Dec 2008 07:07:06 -0800 (PST)
Received: by 10.140.43.6 with HTTP; Wed, 17 Dec 2008 07:07:06 -0800 (PST)
Message-ID: <c68e39170812170707g57952697m4f193f9676681f8a@mail.gmail.com>
Date: Wed, 17 Dec 2008 10:07:06 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Order of fields returned by Document.getFields()
In-Reply-To: <DB201A57A2CA49D2860FDA4AF27A9F24@VujaDe>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <DB201A57A2CA49D2860FDA4AF27A9F24@VujaDe>
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene guarantees the order of all stored fields returned.
Solr guarantees the order of all values in a *specific* field, but not
the fields themselves.

-Yonik


On Tue, Dec 16, 2008 at 10:00 AM, Patrick Johnstone
<pjohnstone@dejavunet.net> wrote:
>
> I'm using Lucene via Solr and recently upgraded from an early Summer nightly
> build to the released version of Solr 1.3 (which seems to use something in
> the neighborhood of Lucene 2.3).  I'm posting this here because I believe
> that my issue is with Lucene, not Solr.
>
> After the upgrade, I noticed that the order of fields being returned for
> documents had changed.  Previously, the order of fields being returned was
> the same as the order in which they were added to the document (which is
> what's stated in the FAQ and other places I came across but not specifically
> spelled out in the Javadoc).
> Now, the fields always seem to come back in lexicographic order by field
> name.
>
> I believe (but am by no means sure) that this is being caused by the
> following bit of code in DocFieldProcessorPerThread.java:
>
>    // If we are writing vectors then we must visit
>    // fields in sorted order so they are written in
>    // sorted order.  TODO: we actually only need to
>    // sort the subset of fields that have vectors
>    // enabled; we could save [small amount of] CPU
>    // here.
>    quickSort(fields, 0, fieldCount-1);
>
>    for(int i=0;i<fieldCount;i++)
>      fields[i].consumer.processFields(fields[i].fields,
> fields[i].fieldCount);
>
> This code seems to sort the fields of the document into order before
> processing them.  If this is true, then the original field order is lost and
> can't ever be recovered.  (None of the fields in our index use TermVectors.)
>
> My questions are:  Is my reading of this behavior correct?  ...and...
> if so:  Is there some other way to get the original order back?
>
> The application that I'm building took some advantage of the fact that the
> fields were returned in the orignial order (becuase the order had some
> meaning) and it may be difficult for me to work around this change.
>
> Patrick Johnstone
> DejaVu Networks
> pjohnstone@dejavunet.net
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 15:14:58 2008
Return-Path: <java-user-return-37784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71262 invoked from network); 17 Dec 2008 15:14:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 15:14:58 -0000
Received: (qmail 38480 invoked by uid 500); 17 Dec 2008 15:15:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38442 invoked by uid 500); 17 Dec 2008 15:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38431 invoked by uid 99); 17 Dec 2008 15:15:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 07:15:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 15:14:41 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id mBHFEHP1004572
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 10:14:18 -0500 (EST)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <49491748.20700@informatics.jax.org>
Date: Wed, 17 Dec 2008 10:14:16 -0500
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IDF scoring issue
References: <21045385.post@talk.nabble.com> <B60CB2B1-84C9-4560-BD06-F5D048C1D9FA@apache.org> <21054127.post@talk.nabble.com>
In-Reply-To: <21054127.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.6.353000, Antispam-Engine: 2.6.1.350677, Antispam-Data: 2008.12.17.150133
X-PerlMx-Spam: Gauge=IIIIIII, Probability=8%, Report='BODY_SIZE_2000_2999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __C230066_P5 0, __CANPHARM_UNSUB 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Well, you could also do a simple test of removing IDF from the scoring 
equation and seeing if the query then reacts the way you want it to.

Simply write your own custom similarity that does this, and test out to 
see how it works.

Handily enough, I've already done this, so here's some code you can try:


Fix the package declaration to something that works for you, and then 
simply use the custom similarity at the appropriate times.

======================================================================
package org.jax.mgi.shr.searchtool;

import org.apache.lucene.search.DefaultSimilarity;

/**
 * This is our custom similarity class, which removes document frequency 
from
 * the calculation of score.
 *
 * It extends the DefaultSimilarity class, and thusly inherits most of its
 * methods from it.
 *
 * @author mhall
 *
 */

public class MGISimilarity extends DefaultSimilarity {

    /**
     * If we have any doc frequency at all in the index, normalize it to 
1 (The
     * document exists)
     *
     * Otherwise, return 0 (Does not exist)
     *
     * @param docFreq
     * This items doc frequency
     * @param numDocs
     * How many documents this item appears in.
     *
     * This API is enforced by the DefaultSimilarity class.
     *
     */

    public float idf(int docFreq, int numDocs) {
        if (docFreq > 0) {
            return 1.0f;
        } else {
            return 0.0f;
        }
    }

}

===================================================================
Rajiv2 wrote:
> Because, the search term is provided by a user, and that user would explicity
> have to put quotes around "marietta ga" when I beleive the search text as it
> is : fleming roofing inc., marietta ga  -- should score higher for "marietta
> ga"
>
> rajiv
>
>
> Grant Ingersoll-6 wrote:
>   
>> On Dec 16, 2008, at 8:19 PM, Rajiv2 wrote:
>>
>>     
>>> Hello,
>>>
>>> I'm using the default lucene Queryparser on the search text : fleming
>>> roofing inc., marietta ga
>>>
>>> Also, I don't want to modify the search text by putting quotes around
>>> "marietta ga" which forces the query parser to make a phrase query.
>>>       
>> Why not?
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   


-- 
Matthew Hall
Software Engineer
Mouse Genome Informatics
mhall@informatics.jax.org
(207) 288-6012



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 15:18:45 2008
Return-Path: <java-user-return-37785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73218 invoked from network); 17 Dec 2008 15:18:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 15:18:45 -0000
Received: (qmail 42175 invoked by uid 500); 17 Dec 2008 15:18:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42144 invoked by uid 500); 17 Dec 2008 15:18:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42133 invoked by uid 99); 17 Dec 2008 15:18:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 07:18:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 15:18:35 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mBHFID8U021518
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 15:18:13 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12322)
    via ESMTP; Wed, 17 Dec 2008 15:18:12 +0000 (GMT)
Date: Wed, 17 Dec 2008 15:18:12 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <49491834.3060205@scalix.com>
In-Reply-To: <2ffb6d060812170547p7a24f08bx242eb6815b4fd0d@mail.gmail.com>
References: <359a92830812151012x5ccf8861r8e56ce1021be6674@mail.gmail.com>
References: <4948E448.3020803@scalix.com>
References: <2ffb6d060812170547p7a24f08bx242eb6815b4fd0d@mail.gmail.com>
Subject: Re: Returning hits by highest score
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0208.49491834.02D1,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8";
	format="flowed"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Thanks Danil - I'd missed that.

Danil ORIN wrote:
> According to http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/TopDocCollector.html
> it does.
>
> After search, simple retrieve TopDocs and read documens you need:
>
> List<Document> result = new ArrayList<Document>(10);
> for( ScoreDoc sDoc :collector.topDocs().scoreDocs) {
>     result.add(contentSearcher.doc(sDoc.doc));
> }
>
> And use result.
>
> On Wed, Dec 17, 2008 at 13:36, Chris Bamford <chris.bamford@scalix.com> wrote:
>   
>> Hi
>>
>> In a search I am doing, there may be thousands of hits, of which I only want
>> the 10 with the highest score. Will the following code do this for me, or
>> will it simply return the first 10 it finds?
>>
>> TopDocCollector collector = new TopDocCollector(10);
>> contentSearcher.search(q, collector);
>>
>> If the latter case is true (i.e. the first 10 are returned), how can I get
>> it to do what I want?
>>
>> Thanks,
>>
>> - Chris
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Chris Bamford
Senior Development Engineer
*Scalix*
chris.bamford@scalix.com
Tel: +44 (0)1344 381814
www.scalix.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 15:21:34 2008
Return-Path: <java-user-return-37786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74076 invoked from network); 17 Dec 2008 15:21:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 15:21:33 -0000
Received: (qmail 45489 invoked by uid 500); 17 Dec 2008 15:21:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45302 invoked by uid 500); 17 Dec 2008 15:21:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45291 invoked by uid 99); 17 Dec 2008 15:21:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 07:21:38 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 15:21:18 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1690945fgb.27
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 07:20:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=hG+Ps5l1cbO2Q1temKVkIKupFrSpaI8d3vXRRFVdLjM=;
        b=DJrCy6Flw2vKEeNU+/9/0e2Ez8dbBF0I0HDOQJ47ktwQ3qn3pWg9qypltG665iCQjK
         h/JZ9SVZBoOzWUfh+9l7cwjeeC8p+l8Fvc/9wNckT94JrW83y1/Qp7GnI2Aa68wmSfHY
         JSI8yXf6oEUfsZBARbf6rOtBMm35GsmtgEi6I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=UksYhmYZP4C1M3NJB7A8nTW6NR6uh9Dh8Ky9G8WeQ5mb6C76FMno/XaR0Q+1vVpiEI
         Ei93IwP5l4uMkAdAixcpvwjbqtbjkJEm4gtGQNwbybF6tLbyQe8/hECsdy/HnKZR6umu
         D4mKMP9vKU3P52AijV1CsjEB4Uv05saSl6mzg=
Received: by 10.86.54.3 with SMTP id c3mr519090fga.60.1229527256632;
        Wed, 17 Dec 2008 07:20:56 -0800 (PST)
Received: by 10.86.76.11 with HTTP; Wed, 17 Dec 2008 07:20:56 -0800 (PST)
Message-ID: <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>
Date: Wed, 17 Dec 2008 10:20:56 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
In-Reply-To: <49490F4B.1030607@cisco.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5387_24798164.1229527256630"
References: <494894D2.9010901@cisco.com>
	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>
	 <49490F4B.1030607@cisco.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5387_24798164.1229527256630
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The very first question is always "are you opening a new searcher
each time you query"? But you've looked at the Wiki so I assume not.
This question is closely tied to what kind of latency you can tolerate.

A few more details, please. What's slow? Queries? Indexing?

How slow? 100ms? 100s? What are your target times and
what are you seeing?

How big is your index? 100M? 100G? What kind of VM
parameters are you specifying?

As an aside, do note that there's no requirement in Lucene that
each document have the same fields, so it's unclear why you
need two indexes, but perhaps some of the answers to the above
will help us understand.

Also, be very very careful what you measure when you measure
queries. You absolutely *have* to put some instrumentation in
the code since "slow queries" can result from things other than
searching. For instance, iterating over a Hits object for 100s of
documents....

Mostly, I'm wondering if this is an 'XY" problem. You're asking
for specific information to accomplish "X" when there might be
a much better solution "Y" we can suggest if we knew more
about your problem....

Show the code, man <G>!

Best
Erick


On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <preetham@cisco.com>wrote:

> Hi Grant,
> Thanks four response. Replies inline.
>
> Grant Ingersoll wrote:
>
>>
>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>
>>  Hi,
>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>
>>> I am trying to index a Java object which has about 10 fields (like id,
>>> time, srcIp, dstIp) - most of them being numerical values.
>>> In order to speed up indexing, I figured that having two separate
>>> indexers, each of them indexing different set of fields works great. So I
>>> have the first 5 fields in index1 and the remaining in index2.
>>>
>>
>> Can you explain this a bit more?  Are those two fields really large org
>> something?  How are you obtaining them?  How are you correlating the
>> documents between the two indexes?  Did you actually try a single index and
>> it was too slow?
>>
> I have a java object which has about 10 fields. However, the fields are not
> fixed. The java object is essentially a representation of Syslogs from
> network devices. So different syslogs have different fields. Each field has
> a unique id and a value (mostly numeric types, so i convert it to string).
> There are some fixed fields. So the object is a list of fields which is
> produced by a parser.
> I am trying to index using two indexers in two separate threads- one for
> fixed and another for the non-fixed fields. Except for a unique id, I do not
> store the fields in Lucene - i just index them. From the index, i get the
> unique id which is all I care about. (the objects are stored elsewhere and
> can be looked up based on this unique id).
> I did try using a single indexer, but things were quite slow. Getting high
> throughput is crucial and having two indexers seemed to do very well. (more
> than twice as fast)
>
> Further, the index will never be modified and I can have just one thread
> writing to the index. If there are any other performance tips would be very
> helpful. I have already looked at the wiki link regarding performance and
> using some of them.
>
> Thanks,
> ~preetham
>
>
>>
>>>
>>> Now, I want to have boolean AND query's looking for values in both
>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two separate
>>> indexes. Would using the MultiIndexReader help ? Since I am doing an AND, I
>>> dont expect that it would work.
>>>
>>> Thanks,
>>> ~preetham
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> --------------------------
>> Grant Ingersoll
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5387_24798164.1229527256630--

From java-user-return-37787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 15:32:07 2008
Return-Path: <java-user-return-37787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81107 invoked from network); 17 Dec 2008 15:32:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 15:32:07 -0000
Received: (qmail 65489 invoked by uid 500); 17 Dec 2008 15:32:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65219 invoked by uid 500); 17 Dec 2008 15:32:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65208 invoked by uid 99); 17 Dec 2008 15:32:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 07:32:12 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 15:31:51 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 4762057526
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 07:31:29 -0800 (PST)
Message-Id: <69F188D7-A450-413E-A923-1D074F0F5725@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <21054127.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: IDF scoring issue
Date: Wed, 17 Dec 2008 10:31:28 -0500
References: <21045385.post@talk.nabble.com> <B60CB2B1-84C9-4560-BD06-F5D048C1D9FA@apache.org> <21054127.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 17, 2008, at 9:26 AM, Rajiv2 wrote:

>
> Because, the search term is provided by a user, and that user would  
> explicity
> have to put quotes around "marietta ga" when I beleive the search  
> text as it
> is : fleming roofing inc., marietta ga  -- should score higher for  
> "marietta
> ga"
>

Just because the user doesn't do it, doesn't mean you can't.  Your  
stating that there is an implied ordering in their query, yet you  
don't want to take advantage of that. You can often achieve better  
results by generating phrase queries implicitly based on 2 or 3  
grams.  You might also even try generating the whole thing as a phrase  
query with a really large slop value (like 100 or more).  Thus,  
scoring will reward things when they are closer together, but you  
still get the flexibility of an AND-like query.  Downside is,  
possibly, a small performance hit, but you could test it first.  Or,  
you could add in the phrase query as an optional OR query to the  
original query, something like" fleming OR roofing OR marietta OR ga  
OR ("fleming roofing" OR "roofing marietta" OR "marietta ga".

You could also try using a more intelligent Query Parser that is tuned  
to your domain.  You could also try to factor in click-through stats  
into your results.  Probably not the answer you want to hear, but it  
is doable and useful.

Do you have any a priori knowledge about Marietta GA over Fleming, GA  
to begin with?  Have you done any broader scale relevance assessment?   
It is often the problem that "fixing" one query, results in breaking a  
whole bunch of others.  What I typically recommend is that you take  
the top 50 queries plus 10-30 random queries from your logs and do an  
assessment of the top 5/10 results for: relevant, somewhat relevant,  
not relevant and embarrassing.  The goal is to maximize relevant while  
minimizing embarrassing and not relevant.

Is this particular example an isolated case or do you feel this is  
systemic to your application?  I've said it before, but it bears  
repeating:  Just because someone typed search terms into your search  
box does not mean you have to actually do a search in order to present  
them results.  If you KNOW the Marietta result is a better result for  
this query, then make it the top result.  Solr has this feature via  
the "QueryElevationComponent" (horrible name, I know), but I call it  
Editorial Placement.  It's not that hard to implement.

Finally, I'd say I wouldn't split hairs over position too much, if the  
Marietta result is #2 and the Fleming result is #1.  Now, if you're  
telling me the Marietta result is something like #100 and Fleming is  
#1, that's a different story.  The fact is, b/c your user didn't put  
quotes, you don't actually know for a fact that the Fleming result is  
what they wanted (but I agree, it is highly likely).  The point is, I  
wouldn't quibble over anything that is in the top ten.  Lucene is  
doing what you told it to do, that is rank the results according to TF/ 
IDF, etc.  If you have other pertinent information about Marietta or  
the query then you should tell Lucene that via phrases, boosts or  
payloads or altering the Similarity.  But, like I said, be careful  
that you aren't breaking other queries.

HTH,
Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 15:33:24 2008
Return-Path: <java-user-return-37788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82199 invoked from network); 17 Dec 2008 15:33:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 15:33:24 -0000
Received: (qmail 71199 invoked by uid 500); 17 Dec 2008 15:33:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71164 invoked by uid 500); 17 Dec 2008 15:33:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71153 invoked by uid 99); 17 Dec 2008 15:33:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 07:33:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.76.80.74] (HELO ambria.tchmachines.com) (208.76.80.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 15:33:15 +0000
Received: from [70.88.250.221] (helo=VujaDe)
	by ambria.tchmachines.com with esmtpa (Exim 4.69)
	(envelope-from <pjohnstone@dejavunet.net>)
	id 1LCyOK-0002bo-Db
	for java-user@lucene.apache.org; Wed, 17 Dec 2008 10:32:52 -0500
From: "Patrick Johnstone" <pjohnstone@dejavunet.net>
To: <java-user@lucene.apache.org>
References: <DB201A57A2CA49D2860FDA4AF27A9F24@VujaDe> <c68e39170812170707g57952697m4f193f9676681f8a@mail.gmail.com>
Subject: RE: Order of fields returned by Document.getFields()
Date: Wed, 17 Dec 2008 10:32:48 -0500
Organization: DejaVu Networks
Message-ID: <5470A85DDE6146FDB7E81AC97DEF7603@VujaDe>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <c68e39170812170707g57952697m4f193f9676681f8a@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
Thread-Index: AclgWTCR7843WwG4TTmibAKd12lPzgAAnyXg
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - ambria.tchmachines.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - dejavunet.net
X-Virus-Checked: Checked by ClamAV on apache.org

 

> -----Original Message-----
> From: Yonik Seeley [mailto:yseeley@gmail.com] 
> Sent: Wednesday, December 17, 2008 10:07 AM
> To: java-user@lucene.apache.org
> Subject: Re: Order of fields returned by Document.getFields()
> 
> Lucene guarantees the order of all stored fields returned.
> Solr guarantees the order of all values in a *specific* 
> field, but not the fields themselves.
> 
> -Yonik
> 
> 

As I said in the original email, my issue is that I don't 
think Lucene is returning the fields in the original order
anymore.  Although I didn't state it explicitly, I have
verified this behavior with the most recently released
version of Lucene (2.4) without Solr being involved.

Patrick


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 15:47:56 2008
Return-Path: <java-user-return-37789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88569 invoked from network); 17 Dec 2008 15:47:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 15:47:56 -0000
Received: (qmail 96260 invoked by uid 500); 17 Dec 2008 15:48:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95757 invoked by uid 500); 17 Dec 2008 15:48:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95746 invoked by uid 99); 17 Dec 2008 15:48:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 07:48:01 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [64.104.129.195] (HELO ind-iport-1.cisco.com) (64.104.129.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 15:47:46 +0000
X-IronPort-AV: E=Sophos;i="4.36,237,1228089600"; 
   d="scan'208";a="36528734"
Received: from ind-dkim-1.cisco.com ([64.104.140.57])
  by ind-iport-1.cisco.com with ESMTP; 17 Dec 2008 15:47:23 +0000
Received: from india-core-1.cisco.com (india-core-1.cisco.com [64.104.129.221])
	by ind-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id mBHFlMjH019113
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 21:17:22 +0530
Received: from xbh-blr-411.apac.cisco.com (xbh-blr-411.cisco.com [64.104.140.150])
	by india-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id mBHFlMS1000336
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 15:47:22 GMT
Received: from xfe-blr-411.apac.cisco.com ([64.104.140.151]) by xbh-blr-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 17 Dec 2008 21:17:21 +0530
Received: from [10.65.71.73] ([10.65.71.73]) by xfe-blr-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 17 Dec 2008 21:17:21 +0530
Message-ID: <49491EED.4070403@cisco.com>
Date: Wed, 17 Dec 2008 21:16:53 +0530
From: Preetham Kajekar <preetham@cisco.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
References: <494894D2.9010901@cisco.com>	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>	 <49490F4B.1030607@cisco.com> <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>
In-Reply-To: <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 17 Dec 2008 15:47:21.0162 (UTC) FILETIME=[BF6E02A0:01C9605E]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=7657; t=1229528843; x=1230392843;
	c=relaxed/simple; s=inddkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=preetham@cisco.com;
	z=From:=20Preetham=20Kajekar=20<preetham@cisco.com>
	|Subject:=20Re=3A=20Combining=20results=20of=20multiple=20i
	ndexes
	|Sender:=20;
	bh=jwFyW/3Dmtwqklkelp3qX5h7+TUHqSDMeYaFFYW8GF8=;
	b=TItRfmX0SPVLLQSphbuZmyJybp5/J22h4M6D92+TdORkwhuXju2raAZPKp
	RRszZvtC1S3Oh6HyHoThDTaPMKCWlhCIMMGKgO79ASkK5pR6hB1lOUqSCya8
	DzkBwGPM5X;
Authentication-Results: ind-dkim-1; header.From=preetham@cisco.com; dkim=pass (
	sig from cisco.com/inddkim1002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,
 Thanks for the response. Replies inline.

Erick Erickson wrote:
> The very first question is always "are you opening a new searcher
> each time you query"? But you've looked at the Wiki so I assume not.
> This question is closely tied to what kind of latency you can tolerate.
>
> A few more details, please. What's slow? Queries? Indexing?
>   
Indexing. Again, it is not slow. It is just faster with two separate 
indexers in two threads.
> How slow? 100ms? 100s? What are your target times and
> what are you seeing?
>   
With a single indexer in a single thread, I can index about 20,000 event 
objects per second. With 2 thread and 2 indexers, it is close to 50,000. :-)
> How big is your index? 100M? 100G? What kind of VM
> parameters are you specifying?
>   
The index will have about 20mil entries. The size of the index lands up 
being about 500M.
I start the VM with 1G of heap. No other options for GC etc is used.
> As an aside, do note that there's no requirement in Lucene that
> each document have the same fields, so it's unclear why you
> need two indexes, but perhaps some of the answers to the above
> will help us understand.
>   
Like I mentioned, Lucene does the job much faster with two indexes.
> Also, be very very careful what you measure when you measure
> queries. You absolutely *have* to put some instrumentation in
> the code since "slow queries" can result from things other than
> searching. For instance, iterating over a Hits object for 100s of
> documents....
>   
The Query speeds are much faster than what I need :-) So no complains here.
> Show the code, man <G>!
>   
Code below. EvIndexer is the base class. There are two subclasses which 
implement addEvFieldsToIndexDoc() (template pattern) to add different 
fields to the index. that code is also pasted below

--Code ---

BaseClass

    public EvIndexer(String indexName) throws Exception {
        this.name = indexName;
        a = new KeywordAnalyzer();
        INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC, 
"./index/");
        FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH + 
File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
        indexWriter = new IndexWriter(directory, a, 
IndexWriter.MaxFieldLength.LIMITED);       
        //indexWriter.setUseCompoundFile(false);
        //indexWriter.setRAMBufferSizeMB(256);
       
    }
   
   
    /** Method implemented by extending classes to add data into the 
index document for the
     *  given event
     *
     * @param d
     */
    protected abstract void addEvFieldsToIndexDoc(Document d, Ev event);
   
    public void addToIndex(Ev ev) throws Exception {
        noOfEventsIndexed++;
        Document d = new Document();      
        addEvFieldsToIndexDoc(d, ev);
        indexWriter.addDocument(d);
       
        if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
            System.out.println(name + " indexed " + 
NumberFormat.getInstance().format(noOfEventsIndexed) + " Commiting them");
            commit();
        }                 
    }

DerievdClass1
    protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
        //noOfEventsIndexed++;
       
        Field id = new Field(EV_ID, Long.toString(ev.getId()), 
Field.Store.YES, Field.Index.NO);
        Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()), 
Field.Store.NO, Field.Index.NOT_ANALYZED);
        Field type = new Field(EV_TYPE, 
Integer.toString(ev.getEventTypeId()), Field.Store.NO, 
Field.Index.NOT_ANALYZED);
        Field pri = new Field(EV_PRI, Short.toString(ev.getPriority()) , 
Field.Store.NO, Field.Index.NOT_ANALYZED);
        Field time = new Field(EV_TIME, getHexString(ev.getRecvTime()) , 
Field.Store.NO, Field.Index.NOT_ANALYZED);
        d.add(id);
        d.add(src);
        d.add(type);
        d.add(pri);
        d.add(time);
        //noOfFieldsIndexed +=  4;
       
     
       
    }




Thanks for the support.
 ~preetham

> Best
> Erick
>
>
> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <preetham@cisco.com>wrote:
>
>   
>> Hi Grant,
>> Thanks four response. Replies inline.
>>
>> Grant Ingersoll wrote:
>>
>>     
>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>
>>>  Hi,
>>>       
>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>
>>>> I am trying to index a Java object which has about 10 fields (like id,
>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>> In order to speed up indexing, I figured that having two separate
>>>> indexers, each of them indexing different set of fields works great. So I
>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>
>>>>         
>>> Can you explain this a bit more?  Are those two fields really large org
>>> something?  How are you obtaining them?  How are you correlating the
>>> documents between the two indexes?  Did you actually try a single index and
>>> it was too slow?
>>>
>>>       
>> I have a java object which has about 10 fields. However, the fields are not
>> fixed. The java object is essentially a representation of Syslogs from
>> network devices. So different syslogs have different fields. Each field has
>> a unique id and a value (mostly numeric types, so i convert it to string).
>> There are some fixed fields. So the object is a list of fields which is
>> produced by a parser.
>> I am trying to index using two indexers in two separate threads- one for
>> fixed and another for the non-fixed fields. Except for a unique id, I do not
>> store the fields in Lucene - i just index them. From the index, i get the
>> unique id which is all I care about. (the objects are stored elsewhere and
>> can be looked up based on this unique id).
>> I did try using a single indexer, but things were quite slow. Getting high
>> throughput is crucial and having two indexers seemed to do very well. (more
>> than twice as fast)
>>
>> Further, the index will never be modified and I can have just one thread
>> writing to the index. If there are any other performance tips would be very
>> helpful. I have already looked at the wiki link regarding performance and
>> using some of them.
>>
>> Thanks,
>> ~preetham
>>
>>
>>     
>>>> Now, I want to have boolean AND query's looking for values in both
>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two separate
>>>> indexes. Would using the MultiIndexReader help ? Since I am doing an AND, I
>>>> dont expect that it would work.
>>>>
>>>> Thanks,
>>>> ~preetham
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>         
>>> --------------------------
>>> Grant Ingersoll
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 16:36:46 2008
Return-Path: <java-user-return-37790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5712 invoked from network); 17 Dec 2008 16:36:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 16:36:46 -0000
Received: (qmail 74378 invoked by uid 500); 17 Dec 2008 16:36:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74351 invoked by uid 500); 17 Dec 2008 16:36:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74338 invoked by uid 99); 17 Dec 2008 16:36:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 08:36:51 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 16:36:30 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1478467yxj.5
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 08:36:08 -0800 (PST)
Received: by 10.100.131.16 with SMTP id e16mr664001and.67.1229531768078;
        Wed, 17 Dec 2008 08:36:08 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id d29sm2225998and.1.2008.12.17.08.36.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Dec 2008 08:36:06 -0800 (PST)
Message-Id: <2CED1BC0-46CE-4146-AAD8-7D9E217FD3F4@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <49491EED.4070403@cisco.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Combining results of multiple indexes
Date: Wed, 17 Dec 2008 11:36:04 -0500
References: <494894D2.9010901@cisco.com>	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>	 <49490F4B.1030607@cisco.com> <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com> <49491EED.4070403@cisco.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Have you tested your indexing throughput with two threads sharing one  
IndexWriter (one index)?

Mike

Preetham Kajekar wrote:

> Hi Erick,
> Thanks for the response. Replies inline.
>
> Erick Erickson wrote:
>> The very first question is always "are you opening a new searcher
>> each time you query"? But you've looked at the Wiki so I assume not.
>> This question is closely tied to what kind of latency you can  
>> tolerate.
>>
>> A few more details, please. What's slow? Queries? Indexing?
>>
> Indexing. Again, it is not slow. It is just faster with two separate  
> indexers in two threads.
>> How slow? 100ms? 100s? What are your target times and
>> what are you seeing?
>>
> With a single indexer in a single thread, I can index about 20,000  
> event objects per second. With 2 thread and 2 indexers, it is close  
> to 50,000. :-)
>> How big is your index? 100M? 100G? What kind of VM
>> parameters are you specifying?
>>
> The index will have about 20mil entries. The size of the index lands  
> up being about 500M.
> I start the VM with 1G of heap. No other options for GC etc is used.
>> As an aside, do note that there's no requirement in Lucene that
>> each document have the same fields, so it's unclear why you
>> need two indexes, but perhaps some of the answers to the above
>> will help us understand.
>>
> Like I mentioned, Lucene does the job much faster with two indexes.
>> Also, be very very careful what you measure when you measure
>> queries. You absolutely *have* to put some instrumentation in
>> the code since "slow queries" can result from things other than
>> searching. For instance, iterating over a Hits object for 100s of
>> documents....
>>
> The Query speeds are much faster than what I need :-) So no  
> complains here.
>> Show the code, man <G>!
>>
> Code below. EvIndexer is the base class. There are two subclasses  
> which implement addEvFieldsToIndexDoc() (template pattern) to add  
> different fields to the index. that code is also pasted below
>
> --Code ---
>
> BaseClass
>
>   public EvIndexer(String indexName) throws Exception {
>       this.name = indexName;
>       a = new KeywordAnalyzer();
>       INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,  
> "./index/");
>       FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH +  
> File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
>       indexWriter = new IndexWriter(directory, a,  
> IndexWriter.MaxFieldLength.LIMITED);              // 
> indexWriter.setUseCompoundFile(false);
>       //indexWriter.setRAMBufferSizeMB(256);
>         }
>       /** Method implemented by extending classes to add data into  
> the index document for the
>    *  given event
>    *
>    * @param d
>    */
>   protected abstract void addEvFieldsToIndexDoc(Document d, Ev event);
>     public void addToIndex(Ev ev) throws Exception {
>       noOfEventsIndexed++;
>       Document d = new Document();              
> addEvFieldsToIndexDoc(d, ev);
>       indexWriter.addDocument(d);
>             if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
>           System.out.println(name + " indexed " +  
> NumberFormat.getInstance().format(noOfEventsIndexed) + " Commiting  
> them");
>           commit();
>       }                    }
>
> DerievdClass1
>   protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>       //noOfEventsIndexed++;
>             Field id = new Field(EV_ID, Long.toString(ev.getId()),  
> Field.Store.YES, Field.Index.NO);
>       Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),  
> Field.Store.NO, Field.Index.NOT_ANALYZED);
>       Field type = new Field(EV_TYPE,  
> Integer.toString(ev.getEventTypeId()), Field.Store.NO,  
> Field.Index.NOT_ANALYZED);
>       Field pri = new Field(EV_PRI,  
> Short.toString(ev.getPriority()) , Field.Store.NO,  
> Field.Index.NOT_ANALYZED);
>       Field time = new Field(EV_TIME,  
> getHexString(ev.getRecvTime()) , Field.Store.NO,  
> Field.Index.NOT_ANALYZED);
>       d.add(id);
>       d.add(src);
>       d.add(type);
>       d.add(pri);
>       d.add(time);
>       //noOfFieldsIndexed +=  4;
>                   }
>
>
>
>
> Thanks for the support.
> ~preetham
>
>> Best
>> Erick
>>
>>
>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar  
>> <preetham@cisco.com>wrote:
>>
>>
>>> Hi Grant,
>>> Thanks four response. Replies inline.
>>>
>>> Grant Ingersoll wrote:
>>>
>>>
>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>
>>>> Hi,
>>>>
>>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>>
>>>>> I am trying to index a Java object which has about 10 fields  
>>>>> (like id,
>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>> In order to speed up indexing, I figured that having two separate
>>>>> indexers, each of them indexing different set of fields works  
>>>>> great. So I
>>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>>
>>>>>
>>>> Can you explain this a bit more?  Are those two fields really  
>>>> large org
>>>> something?  How are you obtaining them?  How are you correlating  
>>>> the
>>>> documents between the two indexes?  Did you actually try a single  
>>>> index and
>>>> it was too slow?
>>>>
>>>>
>>> I have a java object which has about 10 fields. However, the  
>>> fields are not
>>> fixed. The java object is essentially a representation of Syslogs  
>>> from
>>> network devices. So different syslogs have different fields. Each  
>>> field has
>>> a unique id and a value (mostly numeric types, so i convert it to  
>>> string).
>>> There are some fixed fields. So the object is a list of fields  
>>> which is
>>> produced by a parser.
>>> I am trying to index using two indexers in two separate threads-  
>>> one for
>>> fixed and another for the non-fixed fields. Except for a unique  
>>> id, I do not
>>> store the fields in Lucene - i just index them. From the index, i  
>>> get the
>>> unique id which is all I care about. (the objects are stored  
>>> elsewhere and
>>> can be looked up based on this unique id).
>>> I did try using a single indexer, but things were quite slow.  
>>> Getting high
>>> throughput is crucial and having two indexers seemed to do very  
>>> well. (more
>>> than twice as fast)
>>>
>>> Further, the index will never be modified and I can have just one  
>>> thread
>>> writing to the index. If there are any other performance tips  
>>> would be very
>>> helpful. I have already looked at the wiki link regarding  
>>> performance and
>>> using some of them.
>>>
>>> Thanks,
>>> ~preetham
>>>
>>>
>>>
>>>>> Now, I want to have boolean AND query's looking for values in both
>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two  
>>>>> separate
>>>>> indexes. Would using the MultiIndexReader help ? Since I am  
>>>>> doing an AND, I
>>>>> dont expect that it would work.
>>>>>
>>>>> Thanks,
>>>>> ~preetham
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>> --------------------------
>>>> Grant Ingersoll
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 16:53:08 2008
Return-Path: <java-user-return-37791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19749 invoked from network); 17 Dec 2008 16:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 16:53:07 -0000
Received: (qmail 10460 invoked by uid 500); 17 Dec 2008 16:53:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10432 invoked by uid 500); 17 Dec 2008 16:53:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10421 invoked by uid 99); 17 Dec 2008 16:53:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 08:53:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of visual.logic@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 16:52:51 +0000
Received: by gxk3 with SMTP id 3so3297788gxk.12
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 08:52:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version:in-reply-to
         :references:content-type:message-id:content-transfer-encoding:from
         :subject:date:to:x-mailer;
        bh=Q7N2i1Ql4+Hb7sOVdp/Z4fcWT2Cl0OppaAVg6nLCNJQ=;
        b=G3qnNevbsug6o3pNCoq0rJPiaW1uyuhCoVAcTXBuH/V9QyNlrqbIcmxAgiKpkNVbPz
         0peAgBRY7r15SxP/7PkBY8OAaO+9cQ2M9Awn3HwmyzyJ55/IsqXU/i4N1KvnP7BxdPYA
         SDa6L3l7eHLpmrl7kLWr9tTogemi9K6nCVxOM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:content-type:message-id
         :content-transfer-encoding:from:subject:date:to:x-mailer;
        b=NYyDQ22ObA+cdklDEPlriuSw/TzxIZLVHwneufRPbSg/V1/7BLlkm1bvPysptKqK89
         A/AqlBGF5X0f4mOczmZpD5IIuaIr7JOl1XPTDSFd2mw3XCkWkwWbAghCLOlHTdY4OFpd
         PWDJT8KdEEs1PKG4A1krwJjG115Y/IX+WDdjg=
Received: by 10.65.20.20 with SMTP id x20mr760038qbi.63.1229532735140;
        Wed, 17 Dec 2008 08:52:15 -0800 (PST)
Received: from ?192.168.1.119? (S01060014bff5122b.wp.shawcable.net [24.79.65.175])
        by mx.google.com with ESMTPS id p30sm1327123qbp.37.2008.12.17.08.52.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Dec 2008 08:52:14 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <359a92830812170615t7bd22b54he16b3357a6db6a62@mail.gmail.com>
References: <21047428.post@talk.nabble.com> <4948900B.4050005@aconex.com> <196811.89212.qm@web45303.mail.sp1.yahoo.com> <13158.43731.qm@web45306.mail.sp1.yahoo.com> <6F1D5641-0A90-47EB-BE2D-75BDE0F07836@gmail.com> <359a92830812170615t7bd22b54he16b3357a6db6a62@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <08D54D58-1EA6-482A-96A0-4ABDEF17C7BA@gmail.com>
Content-Transfer-Encoding: 7bit
From: "Thomas J. Buhr" <visual.logic@gmail.com>
Subject: Re: What are the best document edit options?
Date: Wed, 17 Dec 2008 10:52:12 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Erick,

Thanks for the good news, my question was still lingering from months  
ago when I initially looked at an older Lucene.

Now I need a bit more specific info, since much in my architecture  
rests on this ability to modify document fields dynamically. Where  
can I see how IndexWriter.updateDocument works without getting into  
Lucene all over again until this important issue is resolved? Is  
there a sample of its usage for updating specific fields in a given  
document? Is the update immediate or delayed?

Thanks, Thom


On 17-Dec-08, at 8:15 AM, Erick Erickson wrote:

> What version of Lucene are you using? The more recent ones have
> IndexWriter.updateDocument......
>
> Best
> Erick
>
> On Wed, Dec 17, 2008 at 2:20 AM, Thomas J. Buhr  
> <visual.logic@gmail.com>wrote:
>
>> Hello Lucene,
>>
>> Looking at the document object it seems like each time I want to  
>> edit its
>> contents I need to do the following:
>>
>> 1 - fetch the document
>> 2 - dump its contents into a temp container
>> 3 - update field values in the temp container
>> 4 - create a new document
>> 5 - transfer my updated field values back into the new document
>> 6 - add document back into the index
>>
>> This seems like a long process, is it really necessary?
>>
>> An index structure does seem ideal for storing and searching a  
>> large set of
>> symbolic strings in my app. From here I need to render these  
>> string chars as
>> visible nodes on screen, this can be done with the new JavaFX API .
>>
>> JavaFX has a unique binding system that would also be great to  
>> use. Using
>> binding I could setup two way (inverse) binding between the fields  
>> in a
>> document and the rendered screen nodes. This way when there is a  
>> value
>> change in the rendered node the document field values  would auto  
>> update and
>> also if there is a change in the document field value the node  
>> would auto
>> update.
>>
>> This update senario via binding would be ideal. How can it be done?
>>
>> Information about the JavaFX binding mechanism is available at  
>> this link:
>>
>> http://java.sun.com/javafx/1/tutorials/core/dataBinding
>>
>>
>> Hope this can work,
>>
>> Thom
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 16:56:50 2008
Return-Path: <java-user-return-37792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28059 invoked from network); 17 Dec 2008 16:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 16:56:50 -0000
Received: (qmail 18994 invoked by uid 500); 17 Dec 2008 16:56:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18957 invoked by uid 500); 17 Dec 2008 16:56:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18946 invoked by uid 99); 17 Dec 2008 16:56:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 08:56:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 16:56:41 +0000
Received: by rv-out-0506.google.com with SMTP id f9so1619293rvb.7
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 08:56:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=3zGHhj4yXYFDZgQECx+hVuBU9plysaAfuEXB8X/Vkfo=;
        b=khxj8tyWcAOS3+Q9Xhu/PnZj8so50/hVjWdrh3MBTuQeNdeLPXyppZXLz3mJuRaqBz
         q92e9UUC5rkPazoO4VmXoHjMSoXDExgKNi6Rq6kQD9vy/peTkTUcTCh/JcMc2htvSw9p
         TPj/7jh0KR7/rFaMm1SP829p8AML9H14jSYU4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=ZAxR0XBT9yrVIcoVELTkX2pA92d9D7ps10AtkLadpwhjyXVWffTUIz4Xe6gXgIZdjB
         eb/Sv3UGLk7w22i8m3Ht57zZQFLgSnKXApmyyEpiXkqkItEltxeFm/M2ev/oUSEQT9De
         RBX426ZZWFwVDqDpJS1r8xg+2WgPNNQgShRw4=
Received: by 10.141.153.16 with SMTP id f16mr487630rvo.80.1229532980410;
        Wed, 17 Dec 2008 08:56:20 -0800 (PST)
Received: by 10.140.43.6 with HTTP; Wed, 17 Dec 2008 08:56:20 -0800 (PST)
Message-ID: <c68e39170812170856n3bb40756o9b7af42ba3ec9bd4@mail.gmail.com>
Date: Wed, 17 Dec 2008 11:56:20 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Order of fields returned by Document.getFields()
In-Reply-To: <5470A85DDE6146FDB7E81AC97DEF7603@VujaDe>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <DB201A57A2CA49D2860FDA4AF27A9F24@VujaDe>
	 <c68e39170812170707g57952697m4f193f9676681f8a@mail.gmail.com>
	 <5470A85DDE6146FDB7E81AC97DEF7603@VujaDe>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Dec 17, 2008 at 10:32 AM, Patrick Johnstone
<pjohnstone@dejavunet.net> wrote:
> As I said in the original email, my issue is that I don't
> think Lucene is returning the fields in the original order
> anymore.

Hmmm, you're right.

http://wiki.apache.org/jakarta-lucene/LuceneFAQ
states "
  What is the order of fields returned by Document.fields()?
  Fields are returned in the same order they were added to the document.
 "

Multiple values for a single field name should always be returned in
the same order,
but should we (continue to) make the guarantee about fields of
different names?  Is anyone relying on that?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 17:50:19 2008
Return-Path: <java-user-return-37793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67156 invoked from network); 17 Dec 2008 17:50:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 17:50:18 -0000
Received: (qmail 32770 invoked by uid 500); 17 Dec 2008 17:50:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32732 invoked by uid 500); 17 Dec 2008 17:50:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32721 invoked by uid 99); 17 Dec 2008 17:50:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 09:50:23 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 17:50:09 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LD0Wq-0001aj-JE
	for java-user@lucene.apache.org; Wed, 17 Dec 2008 09:49:48 -0800
Message-ID: <21057999.post@talk.nabble.com>
Date: Wed, 17 Dec 2008 09:49:48 -0800 (PST)
From: Annette Tisdale <annette@whiteoblivion.com>
To: java-user@lucene.apache.org
Subject: What is speeding up repeated searches?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: annette@whiteoblivion.com
X-Virus-Checked: Checked by ClamAV on apache.org


I've noticed in our lucene app that subsequent identical searches are faster
than the first search. So if I search for "things you know" the first
response time will be 160ms, the second will be 23ms. Then if I search for
"something else" the first response time will be 133ms and the second will
be 3ms.

We don't use FileCache, CachingWrapperFilter or QueryFilter and it's not
just the very first query which is substantially slower it's the first
attempt with each unique query.

Can anyone tell me what is happening in SearchIndexer to cause repeated
searches to be faster?

thank you,
Annette
-- 
View this message in context: http://www.nabble.com/What-is-speeding-up-repeated-searches--tp21057999p21057999.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 18:21:59 2008
Return-Path: <java-user-return-37794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31564 invoked from network); 17 Dec 2008 18:21:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 18:21:59 -0000
Received: (qmail 90319 invoked by uid 500); 17 Dec 2008 18:22:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90288 invoked by uid 500); 17 Dec 2008 18:22:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90277 invoked by uid 99); 17 Dec 2008 18:22:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 10:22:04 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 18:21:43 +0000
Received: by fg-out-1718.google.com with SMTP id l27so12263fgb.27
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 10:21:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4KpCxJ8NiSj49kxerhqYuPssTTQXcJjRJzY/OIl5C4k=;
        b=KMY/7UYCl7qRNAlTYt53KJXbKiXmuH3keDA9aoIV1ffhpWqrpxs2XMoYaLYQOVUmh1
         UMy0rqznvyhPh8WiV6V7yhXRkp4jzjU6RschAZBDf8e7GW/MZTeHNKtNhnEybtBdsZdQ
         7HPRAFsdrjYGDy4d4Zk+B2LGQukfteVb5RkCQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MdUG0SaS3gHtJ8JO4nwk27i9h+1MlsfT8pCLjB+bzLQm3NWuxv0s92lOVTlYMFBhXQ
         E9qsoyb5FH6B9F0Utg6qe9dBOhHtCrqx4n01sAEx1PLFCBik4q7CRylACcaScwu7qkBy
         f1jLDerRhf29c55DY3f6ZmNEWnCIgYfhwZK84=
Received: by 10.86.29.8 with SMTP id c8mr610133fgc.67.1229538080834;
        Wed, 17 Dec 2008 10:21:20 -0800 (PST)
Received: by 10.86.76.11 with HTTP; Wed, 17 Dec 2008 10:21:20 -0800 (PST)
Message-ID: <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com>
Date: Wed, 17 Dec 2008 13:21:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
In-Reply-To: <49491EED.4070403@cisco.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9145_21525613.1229538080821"
References: <494894D2.9010901@cisco.com>
	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>
	 <49490F4B.1030607@cisco.com>
	 <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>
	 <49491EED.4070403@cisco.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9145_21525613.1229538080821
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, maybe if I'd read the original post more carefully I'd have figured
that out,
sorry 'bout that.

I *think* I remember reading somewhere on the email lists that your indexing
speed goes up pretty linearly as the number of indexing tasks approaches
the number of CPUs. Are you, perhaps, on a dual-core machine? But do search
the mail archives because my memory may not be accurate.

You can easily combine indexes by IndexWriter.addIndexes BTW. Personally
I prefer fewer indexes if you can get away with it. But I'd only try this
after
Michael's suggestion of using multiple threads on a single underlying
writer.

You could even think about using N machines to create M fragments then
combining them all afterwards if your logs are static enough to make that
reasonable. Combining indexes may take a while though.....

Best
Erick

On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar <preetham@cisco.com>wrote:

> Hi Erick,
> Thanks for the response. Replies inline.
>
> Erick Erickson wrote:
>
>> The very first question is always "are you opening a new searcher
>> each time you query"? But you've looked at the Wiki so I assume not.
>> This question is closely tied to what kind of latency you can tolerate.
>>
>> A few more details, please. What's slow? Queries? Indexing?
>>
>>
> Indexing. Again, it is not slow. It is just faster with two separate
> indexers in two threads.
>
>> How slow? 100ms? 100s? What are your target times and
>> what are you seeing?
>>
>>
> With a single indexer in a single thread, I can index about 20,000 event
> objects per second. With 2 thread and 2 indexers, it is close to 50,000. :-)
>
>> How big is your index? 100M? 100G? What kind of VM
>> parameters are you specifying?
>>
>>
> The index will have about 20mil entries. The size of the index lands up
> being about 500M.
> I start the VM with 1G of heap. No other options for GC etc is used.
>
>> As an aside, do note that there's no requirement in Lucene that
>> each document have the same fields, so it's unclear why you
>> need two indexes, but perhaps some of the answers to the above
>> will help us understand.
>>
>>
> Like I mentioned, Lucene does the job much faster with two indexes.
>
>> Also, be very very careful what you measure when you measure
>> queries. You absolutely *have* to put some instrumentation in
>> the code since "slow queries" can result from things other than
>> searching. For instance, iterating over a Hits object for 100s of
>> documents....
>>
>>
> The Query speeds are much faster than what I need :-) So no complains here.
>
>> Show the code, man <G>!
>>
>>
> Code below. EvIndexer is the base class. There are two subclasses which
> implement addEvFieldsToIndexDoc() (template pattern) to add different fields
> to the index. that code is also pasted below
>
> --Code ---
>
> BaseClass
>
>   public EvIndexer(String indexName) throws Exception {
>       this.name = indexName;
>       a = new KeywordAnalyzer();
>       INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,
> "./index/");
>       FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH +
> File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
>       indexWriter = new IndexWriter(directory, a,
> IndexWriter.MaxFieldLength.LIMITED);
> //indexWriter.setUseCompoundFile(false);
>       //indexWriter.setRAMBufferSizeMB(256);
>         }
>       /** Method implemented by extending classes to add data into the
> index document for the
>    *  given event
>    *
>    * @param d
>    */
>   protected abstract void addEvFieldsToIndexDoc(Document d, Ev event);
>     public void addToIndex(Ev ev) throws Exception {
>       noOfEventsIndexed++;
>       Document d = new Document();             addEvFieldsToIndexDoc(d,
> ev);
>       indexWriter.addDocument(d);
>             if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
>           System.out.println(name + " indexed " +
> NumberFormat.getInstance().format(noOfEventsIndexed) + " Commiting them");
>           commit();
>       }                   }
>
> DerievdClass1
>   protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>       //noOfEventsIndexed++;
>             Field id = new Field(EV_ID, Long.toString(ev.getId()),
> Field.Store.YES, Field.Index.NO);
>       Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),
> Field.Store.NO, Field.Index.NOT_ANALYZED);
>       Field type = new Field(EV_TYPE,
> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
> Field.Index.NOT_ANALYZED);
>       Field pri = new Field(EV_PRI, Short.toString(ev.getPriority()) ,
> Field.Store.NO, Field.Index.NOT_ANALYZED);
>       Field time = new Field(EV_TIME, getHexString(ev.getRecvTime()) ,
> Field.Store.NO, Field.Index.NOT_ANALYZED);
>       d.add(id);
>       d.add(src);
>       d.add(type);
>       d.add(pri);
>       d.add(time);
>       //noOfFieldsIndexed +=  4;
>                   }
>
>
>
>
> Thanks for the support.
> ~preetham
>
>
>  Best
>> Erick
>>
>>
>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <preetham@cisco.com
>> >wrote:
>>
>>
>>
>>> Hi Grant,
>>> Thanks four response. Replies inline.
>>>
>>> Grant Ingersoll wrote:
>>>
>>>
>>>
>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>
>>>>  Hi,
>>>>
>>>>
>>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>>
>>>>> I am trying to index a Java object which has about 10 fields (like id,
>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>> In order to speed up indexing, I figured that having two separate
>>>>> indexers, each of them indexing different set of fields works great. So
>>>>> I
>>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>>
>>>>>
>>>>>
>>>> Can you explain this a bit more?  Are those two fields really large org
>>>> something?  How are you obtaining them?  How are you correlating the
>>>> documents between the two indexes?  Did you actually try a single index
>>>> and
>>>> it was too slow?
>>>>
>>>>
>>>>
>>> I have a java object which has about 10 fields. However, the fields are
>>> not
>>> fixed. The java object is essentially a representation of Syslogs from
>>> network devices. So different syslogs have different fields. Each field
>>> has
>>> a unique id and a value (mostly numeric types, so i convert it to
>>> string).
>>> There are some fixed fields. So the object is a list of fields which is
>>> produced by a parser.
>>> I am trying to index using two indexers in two separate threads- one for
>>> fixed and another for the non-fixed fields. Except for a unique id, I do
>>> not
>>> store the fields in Lucene - i just index them. From the index, i get the
>>> unique id which is all I care about. (the objects are stored elsewhere
>>> and
>>> can be looked up based on this unique id).
>>> I did try using a single indexer, but things were quite slow. Getting
>>> high
>>> throughput is crucial and having two indexers seemed to do very well.
>>> (more
>>> than twice as fast)
>>>
>>> Further, the index will never be modified and I can have just one thread
>>> writing to the index. If there are any other performance tips would be
>>> very
>>> helpful. I have already looked at the wiki link regarding performance and
>>> using some of them.
>>>
>>> Thanks,
>>> ~preetham
>>>
>>>
>>>
>>>
>>>> Now, I want to have boolean AND query's looking for values in both
>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two separate
>>>>> indexes. Would using the MultiIndexReader help ? Since I am doing an
>>>>> AND, I
>>>>> dont expect that it would work.
>>>>>
>>>>> Thanks,
>>>>> ~preetham
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>> --------------------------
>>>> Grant Ingersoll
>>>>
>>>> Lucene Helpful Hints:
>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9145_21525613.1229538080821--

From java-user-return-37795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 18:23:01 2008
Return-Path: <java-user-return-37795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32477 invoked from network); 17 Dec 2008 18:23:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 18:23:00 -0000
Received: (qmail 92723 invoked by uid 500); 17 Dec 2008 18:23:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92701 invoked by uid 500); 17 Dec 2008 18:23:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92690 invoked by uid 99); 17 Dec 2008 18:23:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 10:23:05 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 18:22:51 +0000
Received: by fg-out-1718.google.com with SMTP id l27so12545fgb.27
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 10:22:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=xd1UHIqGI2m3RkDfX/b+72zH9ScgImJP61R/+2X329I=;
        b=wNIqL91Jq2mlOzR+X6Id2t/OU+Oc3aH9N6/VWKIeJHV5MVSDRQeeR3yLOiFShDwS05
         M6qHdaxGtecVv2WFNftMxWfD9O/ILnT67xKinuZFFQE9h66pubHpReZ2x4hJoE1Ts653
         jRAr6Pa1lI4wH2C8zPtVvLBZcuYRH9H6FilwI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fshfUESzSOTwzzJtKUbw7C5d37Vlqo3ZhJvn6bjRiJrd/nGOnwI0dmRHrHAldALCgv
         fdjPO9LycSiRWzsLP6E1sNI8mTZ+ygnEOl8FRwzsCjpmBphvR+M0op8lljnKaORp13m+
         jBQ8geLowt7EgEQRUxa0bqQ5F4FUGnRSPJE34=
Received: by 10.86.3.4 with SMTP id 4mr613314fgc.44.1229538150468;
        Wed, 17 Dec 2008 10:22:30 -0800 (PST)
Received: by 10.86.76.11 with HTTP; Wed, 17 Dec 2008 10:22:30 -0800 (PST)
Message-ID: <359a92830812171022g6f63fac6j6d9f743b5bfd8219@mail.gmail.com>
Date: Wed, 17 Dec 2008 13:22:30 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: What are the best document edit options?
In-Reply-To: <08D54D58-1EA6-482A-96A0-4ABDEF17C7BA@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9180_33316043.1229538150452"
References: <21047428.post@talk.nabble.com> <4948900B.4050005@aconex.com>
	 <196811.89212.qm@web45303.mail.sp1.yahoo.com>
	 <13158.43731.qm@web45306.mail.sp1.yahoo.com>
	 <6F1D5641-0A90-47EB-BE2D-75BDE0F07836@gmail.com>
	 <359a92830812170615t7bd22b54he16b3357a6db6a62@mail.gmail.com>
	 <08D54D58-1EA6-482A-96A0-4ABDEF17C7BA@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9180_33316043.1229538150452
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'll leave those details to the experts who are up to speed <G>.

On Wed, Dec 17, 2008 at 11:52 AM, Thomas J. Buhr <visual.logic@gmail.com>wrote:

> Erick,
>
> Thanks for the good news, my question was still lingering from months ago
> when I initially looked at an older Lucene.
>
> Now I need a bit more specific info, since much in my architecture rests on
> this ability to modify document fields dynamically. Where can I see how
> IndexWriter.updateDocument works without getting into Lucene all over again
> until this important issue is resolved? Is there a sample of its usage for
> updating specific fields in a given document? Is the update immediate or
> delayed?
>
> Thanks, Thom
>
>
>
> On 17-Dec-08, at 8:15 AM, Erick Erickson wrote:
>
>  What version of Lucene are you using? The more recent ones have
>> IndexWriter.updateDocument......
>>
>> Best
>> Erick
>>
>> On Wed, Dec 17, 2008 at 2:20 AM, Thomas J. Buhr <visual.logic@gmail.com
>> >wrote:
>>
>>  Hello Lucene,
>>>
>>> Looking at the document object it seems like each time I want to edit its
>>> contents I need to do the following:
>>>
>>> 1 - fetch the document
>>> 2 - dump its contents into a temp container
>>> 3 - update field values in the temp container
>>> 4 - create a new document
>>> 5 - transfer my updated field values back into the new document
>>> 6 - add document back into the index
>>>
>>> This seems like a long process, is it really necessary?
>>>
>>> An index structure does seem ideal for storing and searching a large set
>>> of
>>> symbolic strings in my app. From here I need to render these string chars
>>> as
>>> visible nodes on screen, this can be done with the new JavaFX API .
>>>
>>> JavaFX has a unique binding system that would also be great to use. Using
>>> binding I could setup two way (inverse) binding between the fields in a
>>> document and the rendered screen nodes. This way when there is a value
>>> change in the rendered node the document field values  would auto update
>>> and
>>> also if there is a change in the document field value the node would auto
>>> update.
>>>
>>> This update senario via binding would be ideal. How can it be done?
>>>
>>> Information about the JavaFX binding mechanism is available at this link:
>>>
>>> http://java.sun.com/javafx/1/tutorials/core/dataBinding
>>>
>>>
>>> Hope this can work,
>>>
>>> Thom
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9180_33316043.1229538150452--

From java-user-return-37796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 18:23:08 2008
Return-Path: <java-user-return-37796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32540 invoked from network); 17 Dec 2008 18:23:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 18:23:08 -0000
Received: (qmail 93080 invoked by uid 500); 17 Dec 2008 18:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93053 invoked by uid 500); 17 Dec 2008 18:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93021 invoked by uid 99); 17 Dec 2008 18:23:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 10:23:07 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 18:22:45 +0000
Received: by rv-out-0506.google.com with SMTP id f6so27245rvb.5
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 10:22:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=Tmz1i+JYe9pVFESzn6WwvXJSNQT9wTvcA8f/URCk+K0=;
        b=EBpKlC9jJhsmthDIsSV8c1hVrbeLnhu63ycQsNeHSILkB6yP59qqtNGOL7twFLfPBQ
         ljxZ9ALO12eINeXlfeW1ih3sKJeaxm3eH+FCFH6NCqfBJaYKBfXO3F8gIIfuR2+32b5/
         MmcqafxNP9MwGwwCtu5s9wtYGNM5Hs+0Z5aF8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=VdxiizVlx/qPD/4l2P5YtZybI/+h4xFpWUTLiOrsTUmY+EBiG7XkC2HpCFbNBfEcSd
         3X6hiil13ktDOVMDAoGHoSV/VWNIcA+mxKtV7bIFGb028b9y+RtzLxFtJ2ZeBmuOBYYQ
         YZEXUWoSnvQyFm1Q1XkavBAVz7HnxmUmC57KI=
Received: by 10.141.76.21 with SMTP id d21mr529771rvl.34.1229538145287;
        Wed, 17 Dec 2008 10:22:25 -0800 (PST)
Received: by 10.140.43.6 with HTTP; Wed, 17 Dec 2008 10:22:25 -0800 (PST)
Message-ID: <c68e39170812171022wb58ec12r7f55fae66e2ba317@mail.gmail.com>
Date: Wed, 17 Dec 2008 13:22:25 -0500
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: What is speeding up repeated searches?
In-Reply-To: <21057999.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <21057999.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Dec 17, 2008 at 12:49 PM, Annette Tisdale
<annette@whiteoblivion.com> wrote:
> I've noticed in our lucene app that subsequent identical searches are faster
> than the first search. So if I search for "things you know" the first
> response time will be 160ms, the second will be 23ms. Then if I search for
> "something else" the first response time will be 133ms and the second will
> be 3ms.

The first search, and the first search per-field can cause some low
level structures to be cached.
There is also hotspot optimization that can make first queries slower
than later queries (but not for too long).
After that, most of that you are seeing will be due to operating
system disk cache (i.e. outside Lucene).

-Yonik


> We don't use FileCache, CachingWrapperFilter or QueryFilter and it's not
> just the very first query which is substantially slower it's the first
> attempt with each unique query.
>
> Can anyone tell me what is happening in SearchIndexer to cause repeated
> searches to be faster?
>
> thank you,
> Annette
> --
> View this message in context: http://www.nabble.com/What-is-speeding-up-repeated-searches--tp21057999p21057999.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 20:16:06 2008
Return-Path: <java-user-return-37797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95660 invoked from network); 17 Dec 2008 20:16:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 20:16:06 -0000
Received: (qmail 5628 invoked by uid 500); 17 Dec 2008 20:16:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5592 invoked by uid 500); 17 Dec 2008 20:16:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5581 invoked by uid 99); 17 Dec 2008 20:16:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 12:16:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 20:15:51 +0000
Received: by rv-out-0506.google.com with SMTP id f6so82154rvb.5
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 12:15:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=PxTQMHuMr+1n0WDWV3znyroUDiDnVvv3huiR+AkfZjU=;
        b=gtS0W0Um2ceh9130GIDa4SgGWYgv7I9jwZxIRRSmuqY9x+D7ocRub2zRSVf9TGX0YF
         z/zI28r+kTicl1EJhRZfW12q18qNJoK5My4ylMhuzzhR6Jwo886SbParcB6vFuA8lzBG
         W0FdVpE3Emcw+Lk+T3B3XSE27m047A6eiBpt8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hMLtWkyQq/kKEnX804HfUkIZmI7B0sgCu6YqnYddt7Zwy8oMYoCzpv62fQqXXfJ/9/
         xTp76rb4zwZxQMNHkViCyovF2vDiYzP0UU+4CLVp4d/DdX/fmkGz90MPMiYO3RsVeP4S
         PzPxD15Oq2WLV46PdxqS/eFlDxPY2kMtzaaVA=
Received: by 10.141.142.15 with SMTP id u15mr580778rvn.16.1229544930723;
        Wed, 17 Dec 2008 12:15:30 -0800 (PST)
Received: by 10.140.208.15 with HTTP; Wed, 17 Dec 2008 12:15:30 -0800 (PST)
Message-ID: <bf1404350812171215m4b41ff6dl46bf22890a6fd56@mail.gmail.com>
Date: Wed, 17 Dec 2008 15:15:30 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <359a92830811191428hea3608dt95cc54aa26052862@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9974_19365568.1229544930712"
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
	 <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
	 <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
	 <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>
	 <8c4e68610811191258i6ce8a777g6f7687bd7fcfd95d@mail.gmail.com>
	 <bf1404350811191322h39e808d3x5e1ae1157cf3e1ad@mail.gmail.com>
	 <359a92830811191428hea3608dt95cc54aa26052862@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9974_19365568.1229544930712
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:
This solution have a problem.
the results are sorted bye the year criteria but I need that after sort by
year criteria it sort by the scoring criteria two.
How can I do this ???

I hope you can help me.
Greetings
Ariel

On Wed, Nov 19, 2008 at 5:28 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Well, MultiSearcher is just a Searcher, so you have available
> all of the search methods on Searcher. One of which is:
>
> search
>
> public TopFieldDocs
>
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/TopFieldDocs.html>
> *search*(Query
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Query.html>
> query,
>                           Filter
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Filter.html>
> filter,
>                           int n,
>                           Sort
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Sort.html>
> sort)
>                    throws IOException
> <http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>
>
> Expert: Low-level search implementation with arbitrary sorting. Finds the
> top n hits for query, applying filter if non-null, and sorting the hits by
> the criteria in sort.
>
>
> Best
> Erick
>
>
> On Wed, Nov 19, 2008 at 4:22 PM, Ariel <isaacrc82@gmail.com> wrote:
>
> > Well, this is what I am doing:
> >
> > queryString="year:[2003 TO 2005]"
> > [CODE]
> >    Query pquery = null;
> >    Hits hits = null;
> >    Analyzer analyzer = null;
> >    analyzer = new SnowballAnalyzer("English");
> >    try {
> >        pquery = MultiFieldQueryParser.parse(new String[] {queryString,
> > queryString}, new String[] {"title", "content"}, analyzer); //analyzer
> >    } catch (ParseException e1) {
> >        e1.printStackTrace();
> >    }
> >    MultiSearcher searcher = (MultiSearcher) searcherCache.get(name);
> >
> >    try {
> >        hits = searcher.search(pquery);
> >    } catch (IOException e1) {
> >        e1.printStackTrace();
> >    }
> > [/CODE]
> >
> > I don't know the methods that include sorting. I have made the sorting by
> > the score criteria so far, I don-t know how to change it to the year
> field
> > criteria.
> > As you can see, I am using a multisearcher because I have several
> indexes.
> >
> > I hope you can help me.
> > Regards
> > Thanks in advance
> > Ariel
> >
> >
> >
> > On Wed, Nov 19, 2008 at 3:58 PM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> > > Are you using one of the search methods that includes sorting?  If
> > > not, then do.  If you are, then you need to tell us exactly what you
> > > are doing and exactly what you reckon is going wrong.
> > >
> > >
> > > --
> > > Ian.
> > >
> > >
> > > On Wed, Nov 19, 2008 at 6:23 PM, Ariel <isaacrc82@gmail.com> wrote:
> > > > it is supposed lucene make a lexicocraphic sorting but this is not
> > > hapening,
> > > > Could you tell me what I'm doing wrong ?
> > > > I hope you can help me.
> > > > Regards
> > > >
> > > > On Wed, Nov 19, 2008 at 11:56 AM, Ariel <isaacrc82@gmail.com> wrote:
> > > >
> > > >> Thanks, that was very helpful, but I have a question when I make the
> > > >> searches it does not sort the results according to the range, for
> > > example:
> > > >> year: [2003 TO 2008] in the first page 2003 documents are showed, in
> > the
> > > >> second 2005 documents, in the third page 2004 documents, I don't see
> > any
> > > >> sort criteria.
> > > >> How could I fix that problem ???
> > > >> Greetings
> > > >> Ariel
> > > >>
> > > >>
> > > >> On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com>
> wrote:
> > > >>
> > > >>> Hi - sounds like you need a range query.
> > > >>>
> > > >>>
> > > >>>
> > >
> >
> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
> > > >>>
> > > >>>
> > > >>> --
> > > >>> Ian.
> > > >>>
> > > >>>
> > > >>> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com>
> wrote:
> > > >>> > Hi everybody:
> > > >>> >
> > > >>> > I need to make search with lucene 2.3.2, taking in account the
> > dates,
> > > >>> > previously when I build the index I create a date field where I
> > > stored
> > > >>> the
> > > >>> > year in which the document was created, at the search moment I
> > would
> > > >>> like to
> > > >>> > retrieve documents that have been created before a Year or after
> a
> > > Year,
> > > >>> for
> > > >>> > example documents before 2002 year o after 2003 year.
> > > >>> > It is possible to do that with lucene ???
> > > >>> > Regards
> > > >>> > Ariel
> > > >>> >
> > > >>>
> > > >>>
> ---------------------------------------------------------------------
> > > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >>>
> > > >>>
> > > >>
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_9974_19365568.1229544930712--

From java-user-return-37798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 20:39:58 2008
Return-Path: <java-user-return-37798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7084 invoked from network); 17 Dec 2008 20:39:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 20:39:58 -0000
Received: (qmail 48048 invoked by uid 500); 17 Dec 2008 20:40:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48024 invoked by uid 500); 17 Dec 2008 20:40:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48013 invoked by uid 99); 17 Dec 2008 20:40:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 12:40:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.1.71] (HELO mx1.syr.edu) (128.230.1.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 20:39:49 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx1.syr.edu (8.14.3/8.14.3) with ESMTP id mBHKdPHR014673
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 15:39:28 -0500
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Wed, 17 Dec 2008 15:39:03 -0500
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Wed, 17 Dec 2008 15:39:03 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: What are the best document edit options?
Date: Wed, 17 Dec 2008 15:39:02 -0500
Message-ID: <9294E20AED46934EA459020706463F94011EE5CF@SUEXCL-02.ad.syr.edu>
In-Reply-To: <08D54D58-1EA6-482A-96A0-4ABDEF17C7BA@gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: What are the best document edit options?
Thread-Index: AclgZ/LITlX8De3UTROOYZHB52sYowAGJv7g
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Dec 2008 20:39:03.0210 (UTC) FILETIME=[7F7698A0:01C96087]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2008-12-17_15:2008-12-17,2008-12-17,2008-12-17 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Thomas,

On 12/17/2008 at 11:52 AM, Thomas J. Buhr wrote:
> Where can I see how IndexWriter.updateDocument works without getting
> into Lucene all over again until this important issue is resolved?
> Is there a sample of its usage for updating specific fields in a
> given document?

The updateDocument() functionality was added to IndexWriter in Lucene =
v2.1.0 under the aegis of LUCENE-565 =
<http://issues.apache.org/jira/browse/LUCENE-565>, and the discussion =
there should help, especially the design overviews (more than one there =
- look for Ning Li's 2006-12-18 comment: =
<http://issues.apache.org/jira/browse/LUCENE-565?focusedCommentId=3D12459=
506#action_12459506>).

Several of Lucene's test cases invoke updateDocument(), e.g. =
o.a.l.index.TestIndexWriterDelete.testOperationsOnDiskFull():

<http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_4_0/src/test/org/=
apache/lucene/index/TestIndexWriterDelete.java?view=3Dmarkup>

> Is the update immediate or delayed?

My reading of the way this all works is that IndexWriter buffers deletes =
and only writes them out to disk on flush, which can be triggered by a =
commit.  An IndexReader over this index will only see a single =
post-commit snapshot.  So there will be a delay: the IndexWriter must =
perform a commit, and the IndexReader must be closed and then opened =
again (or just reopen()'d, as of Lucene v2.3.0).

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 21:10:43 2008
Return-Path: <java-user-return-37799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57007 invoked from network); 17 Dec 2008 21:10:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 21:10:42 -0000
Received: (qmail 4596 invoked by uid 500); 17 Dec 2008 21:10:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4554 invoked by uid 500); 17 Dec 2008 21:10:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4543 invoked by uid 99); 17 Dec 2008 21:10:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 13:10:48 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_IMAGE_ONLY_32,HTML_MESSAGE,MISSING_MID,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.199.122.3] (HELO mainsequence.net) (65.199.122.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 21:10:26 +0000
Received: from 127.0.0.1 by mainsequence.net (MDaemon PRO v9.6.6)
	with ESMTP id md50009198857.msg
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 16:10:04 -0500
X-Spam-Processed: mainsequence.net, Wed, 17 Dec 2008 16:10:04 -0500
	(not processed: message from trusted or authenticated source)
X-Authenticated-Sender: test_account@mainsequence.net
X-MDRemoteIP: 66.104.120.34
X-Return-Path: prvs=1237fa6141=chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
Reply-To: "Chris Salem" <>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: 
Subject: lucene 2.4 sorting slowness
Date: Wed, 17 Dec 2008 21:10:02 -0000
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCRecruiter Emulation of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCRecruiter Emulation of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcr186E0CF4464149D596ED3FA610DF49D6section1-b1"
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20081217211035.4CBB3724897@athena.apache.org>

------=_pcr186E0CF4464149D596ED3FA610DF49D6section1-b1
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hello,
I have an index with ~4000000 documents and some 200 fields.  Searching without sorting takes around 300 - 500 ms, when sorting on dates (formated as 'yyyy-mm-dd') searching time takes on average 15 seconds. Here's the code that does the search:
hits = searcher.search(query, new Sort(new SortField("slast_modified", false)));
and here's how that field is being indexed:
doc.add(new Field("slast_modified", "2008-12-12", Field.Store.NO, Field.Index.NOT_ANALYZED));
Am I doing something wrong?  Is there a bug in lucene and if so is there a way to work around it so that search speed is increased to something reasonable?
Thanks
Sincerely,
Chris Salem 
Development Team 
Main Sequence Technologies, Inc.
PCRecruiter.net - PCRecruiter Support
chris@mainsequence.net
P: 440.946.5214 ext 5458 
F: 440.856.0312

This email and any files transmitted with it may contain confidential information intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the sender. Please note that any views or opinions presented in this email are solely those of the author and do not necessarily represent those of the company. Finally, the recipient should check this email and any attachments for the presence of viruses. The company accepts no liability for any damage caused by any virus transmitted by this email. Main Sequence Technologies, Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net

(The following links were included with this email:)
http://www.pcrecruiter.net/

http://www.pcrecruiter.net/support.htm

mailto:chris@mainsequence.net



(The following links were included with this email:)
http://www.pcrecruiter.net/

http://www.pcrecruiter.net/support.htm

mailto:chris@mainsequence.net



------=_pcr186E0CF4464149D596ED3FA610DF49D6section1-b1--




From java-user-return-37800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 21:46:59 2008
Return-Path: <java-user-return-37800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18607 invoked from network); 17 Dec 2008 21:46:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 21:46:59 -0000
Received: (qmail 72226 invoked by uid 500); 17 Dec 2008 21:47:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72183 invoked by uid 500); 17 Dec 2008 21:47:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72172 invoked by uid 99); 17 Dec 2008 21:47:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 13:47:04 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.191] (HELO rn-out-0910.google.com) (64.233.170.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 21:46:43 +0000
Received: by rn-out-0910.google.com with SMTP id j71so111751rne.4
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 13:46:21 -0800 (PST)
Received: by 10.100.108.2 with SMTP id g2mr965595anc.94.1229550381203;
        Wed, 17 Dec 2008 13:46:21 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id c9sm15737604ana.59.2008.12.17.13.46.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Dec 2008 13:46:20 -0800 (PST)
Message-Id: <6B7A0653-B753-4095-B6C6-70660889B656@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20081217211035.4CBB3724897@athena.apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: lucene 2.4 sorting slowness
X-Priority: 3
Date: Wed, 17 Dec 2008 16:46:18 -0500
References: <20081217211035.4CBB3724897@athena.apache.org>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Are you warming the searcher first, and then testing the sort  
performance?  (The first query is slow because it populates the  
FieldCache, internally, which is then reused for subsequent queries as  
long as you don't close that reader/searcher).

Mike

Chris Salem wrote:

> Hello,
> I have an index with ~4000000 documents and some 200 fields.   
> Searching without sorting takes around 300 - 500 ms, when sorting on  
> dates (formated as 'yyyy-mm-dd') searching time takes on average 15  
> seconds. Here's the code that does the search:
> hits = searcher.search(query, new Sort(new  
> SortField("slast_modified", false)));
> and here's how that field is being indexed:
> doc.add(new Field("slast_modified", "2008-12-12", Field.Store.NO,  
> Field.Index.NOT_ANALYZED));
> Am I doing something wrong?  Is there a bug in lucene and if so is  
> there a way to work around it so that search speed is increased to  
> something reasonable?
> Thanks
> Sincerely,
> Chris Salem
> Development Team
> Main Sequence Technologies, Inc.
> PCRecruiter.net - PCRecruiter Support
> chris@mainsequence.net
> P: 440.946.5214 ext 5458
> F: 440.856.0312
>
> This email and any files transmitted with it may contain  
> confidential information intended solely for the use of the  
> individual or entity to whom they are addressed. If you have  
> received this email in error please notify the sender. Please note  
> that any views or opinions presented in this email are solely those  
> of the author and do not necessarily represent those of the company.  
> Finally, the recipient should check this email and any attachments  
> for the presence of viruses. The company accepts no liability for  
> any damage caused by any virus transmitted by this email. Main  
> Sequence Technologies, Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net
>
> (The following links were included with this email:)
> http://www.pcrecruiter.net/
>
> http://www.pcrecruiter.net/support.htm
>
> mailto:chris@mainsequence.net
>
>
>
> (The following links were included with this email:)
> http://www.pcrecruiter.net/
>
> http://www.pcrecruiter.net/support.htm
>
> mailto:chris@mainsequence.net
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 21:49:38 2008
Return-Path: <java-user-return-37801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20216 invoked from network); 17 Dec 2008 21:49:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 21:49:38 -0000
Received: (qmail 79031 invoked by uid 500); 17 Dec 2008 21:49:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79007 invoked by uid 500); 17 Dec 2008 21:49:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78996 invoked by uid 99); 17 Dec 2008 21:49:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 13:49:44 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 21:49:29 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LD4GS-0004Eo-Nd
	for java-user@lucene.apache.org; Wed, 17 Dec 2008 13:49:08 -0800
Message-ID: <21062271.post@talk.nabble.com>
Date: Wed, 17 Dec 2008 13:49:08 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: RESOLVED: help: java.lang.ArrayIndexOutOfBoundsException
 ScorerDocQueue.downHeap
In-Reply-To: <21042590.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <21037262.post@talk.nabble.com> <21042590.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Just an FYI in case anyone runs into something similar.

Essentially I had indexes that I have been searching from a java stored
procedure in Oracle without issue for awhile. All of a sudden, I started
getting the error I alluded to above when there were more than a certain
number of terms (4,5, or more depending on the terms or index). The error
did not happen when I ran a query from a local server with the same
filesystem mounted.

In any case, all of my indexes checked out OK. I read through all the other
issues related to my issue but none of the fixes did anything.

However, setting BooleanQuery.setAllowDocsOutOfOrder(true); did in fact make
the error go away. Although I understand the idea behind the setting, I am
not sure why it made a difference in my case.

I would be interested if anyone has any theories.
-- 
View this message in context: http://www.nabble.com/help%3A-java.lang.ArrayIndexOutOfBoundsException-ScorerDocQueue.downHeap-tp21037262p21062271.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 17 21:53:24 2008
Return-Path: <java-user-return-37802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21757 invoked from network); 17 Dec 2008 21:53:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2008 21:53:24 -0000
Received: (qmail 82414 invoked by uid 500); 17 Dec 2008 21:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82380 invoked by uid 500); 17 Dec 2008 21:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82369 invoked by uid 99); 17 Dec 2008 21:53:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 13:53:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 21:53:15 +0000
Received: by fg-out-1718.google.com with SMTP id l27so58272fgb.27
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 13:52:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=kxn6OzCd0gku80PuuVOtGP746RQDYd5Sb+d0LdOoC5k=;
        b=hbWMmEpSyVzWWj8jANNyKjsDDGBmLNzX4YxeXWxlHhgIj3PTtLlBhaQrSUOYI+iggc
         rXXjvLPJN2+aZ3F3OEvKqLuMeRtPeODi3i4dnv6JSli2CtOF4xe3L2QHIPciFxc2ulqp
         4/FnKL+16l8jPXpY/Hcpk0FveTaVnvompXurk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jj+Yy1CPLSBDWHjfd7LEScNi/wQZhvL32709JJb1Pt2dXzGrr9vu3aMyrdcrIafqan
         MUcbNQm5NnIqAhGLSk2eeJ78cOnWpWvkihRXcsDpce+wVeeCTgJn4b9vFVx3AFX+t9A1
         Oo25js8JAu9/eZWA1S5cuydEwlWoe8WEeNRR0=
Received: by 10.86.4.2 with SMTP id 2mr727611fgd.4.1229550774342;
        Wed, 17 Dec 2008 13:52:54 -0800 (PST)
Received: by 10.86.76.11 with HTTP; Wed, 17 Dec 2008 13:52:54 -0800 (PST)
Message-ID: <359a92830812171352i457b006aj265f6ddbadc4a272@mail.gmail.com>
Date: Wed, 17 Dec 2008 16:52:54 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene 2.4 sorting slowness
In-Reply-To: <20081217211035.4CBB3724897@athena.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13634_28883411.1229550774335"
References: <20081217211035.4CBB3724897@athena.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13634_28883411.1229550774335
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Are you measuring only the time to execute the searcher.search line or
are you measuring the time it takes to iterate the Hits object? The reason
I ask is that something like
for (int idx = 0; idx < hits.length(); ++idx) {
    <do something with doc idx>
}

will re-execute the query every 100 documents examined or so. For
examining more than the first few documents, a HitCollector is preferred.

But Michael's question is at least as germane.

Best
Erick

On Wed, Dec 17, 2008 at 4:10 PM, Chris Salem <chris@mainsequence.net> wrote:

> Hello,
> I have an index with ~4000000 documents and some 200 fields.  Searching
> without sorting takes around 300 - 500 ms, when sorting on dates (formated
> as 'yyyy-mm-dd') searching time takes on average 15 seconds. Here's the code
> that does the search:
> hits = searcher.search(query, new Sort(new SortField("slast_modified",
> false)));
> and here's how that field is being indexed:
> doc.add(new Field("slast_modified", "2008-12-12", Field.Store.NO,
> Field.Index.NOT_ANALYZED));
> Am I doing something wrong?  Is there a bug in lucene and if so is there a
> way to work around it so that search speed is increased to something
> reasonable?
> Thanks
> Sincerely,
> Chris Salem
> Development Team
> Main Sequence Technologies, Inc.
> PCRecruiter.net - PCRecruiter Support
> chris@mainsequence.net
> P: 440.946.5214 ext 5458
> F: 440.856.0312
>
> This email and any files transmitted with it may contain confidential
> information intended solely for the use of the individual or entity to whom
> they are addressed. If you have received this email in error please notify
> the sender. Please note that any views or opinions presented in this email
> are solely those of the author and do not necessarily represent those of the
> company. Finally, the recipient should check this email and any attachments
> for the presence of viruses. The company accepts no liability for any damage
> caused by any virus transmitted by this email. Main Sequence Technologies,
> Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net
>
> (The following links were included with this email:)
> http://www.pcrecruiter.net/
>
> http://www.pcrecruiter.net/support.htm
>
> mailto:chris@mainsequence.net
>
>
>
> (The following links were included with this email:)
> http://www.pcrecruiter.net/
>
> http://www.pcrecruiter.net/support.htm
>
> mailto:chris@mainsequence.net
>
>
>

------=_Part_13634_28883411.1229550774335--

From java-user-return-37803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 03:17:11 2008
Return-Path: <java-user-return-37803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16297 invoked from network); 18 Dec 2008 03:17:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 03:17:11 -0000
Received: (qmail 26277 invoked by uid 500); 18 Dec 2008 03:17:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26243 invoked by uid 500); 18 Dec 2008 03:17:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26232 invoked by uid 99); 18 Dec 2008 03:17:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 19:17:15 -0800
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 03:17:01 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.8/8.13.8) with ESMTP id mBI3I9lB025535
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 05:18:09 +0200
Received: from mobile.teamware.com ([212.226.92.17]) by nimitz.teamw.com with ESMTP
	 id mw%7ghcu; 18 Dec 2008 05:16:00 +0200
Message-ID: <4949C076.4020903@teamware.com>
Date: Thu, 18 Dec 2008 14:16:06 +1100
From: Antony Bowesman <adb@teamware.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: Lucene User <java-user@lucene.apache.org>
Subject: addIndexesNoOptimize question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-3.0 (monkey.teamware.com [212.226.92.15]); Thu, 18 Dec 2008 05:18:09 +0200 (EET)
X-Teamware-Monkey-MailScanner-Information: Please contact the ISP for more information
X-Teamware-Monkey-MailScanner-ID: mBI3I9lB025535
X-Teamware-Monkey-MailScanner: Found to be clean
X-Teamware-Monkey-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

The javadocs state

"This requires ... and the upper bound* of those segment doc counts not exceed 
maxMergeDocs."

Can one of the gurus please explain what that means and what needs to be done to 
find out whether an index being merged fits that criteria.

Thanks
Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 03:57:24 2008
Return-Path: <java-user-return-37804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93107 invoked from network); 18 Dec 2008 03:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 03:57:24 -0000
Received: (qmail 72992 invoked by uid 500); 18 Dec 2008 03:57:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72961 invoked by uid 500); 18 Dec 2008 03:57:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72950 invoked by uid 99); 18 Dec 2008 03:57:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 19:57:29 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghendrey@decarta.com designates 66.151.148.230 as permitted sender)
Received: from [66.151.148.230] (HELO mx1.decarta.com) (66.151.148.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 03:57:14 +0000
Received: from internal.decarta.com ([10.253.0.17]) by mx1.decarta.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 17 Dec 2008 19:56:53 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C960C4.A9FCC35D"
Subject: advice on DoubleMetaphoneSearching
Date: Wed, 17 Dec 2008 19:56:52 -0800
Message-ID: <6C5C1804772DB944BA88A0DC48D338DA04BA6B9E@dct-mail.sanjose.telcontar.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: advice on DoubleMetaphoneSearching
Thread-Index: AclgxKkwAGJoJdgFTpys/pDYWj5DCg==
From: "Geoff Hendrey" <ghendrey@decarta.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Dec 2008 03:56:53.0895 (UTC) FILETIME=[AA030170:01C960C4]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C960C4.A9FCC35D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I would like to have a Phrase Query in which the Terms are matched using
the DoubleMetaphone algorithm.I found this link:
http://www.tropo.com/techno/java/lucene/metaphone.html
=20
Which describes a DoubleMetaphoneQuery, and indeed this query works
amazingly well for misspellings, but only for a single term. The
approach taken in DoubleMetaphoneQuery is to create a
DoubleMetaphoneTermEnum which uses the DoubleMetaphone algorithm in
termCompare.
=20
Would a better approach to be to make "DoubleMetaphoneTerm extends
Term", and override compareTo? The reason this might be a better
approach is that all existing queries, specifically PhraseQuery would
"automagically" pickup DoubleMetaphone.=20
=20
Can an experienced Lucen hand tell me if this approach is viable?
=20
=20
-geoff
=20


------_=_NextPart_001_01C960C4.A9FCC35D--

From java-user-return-37805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 04:51:23 2008
Return-Path: <java-user-return-37805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46769 invoked from network); 18 Dec 2008 04:51:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 04:51:23 -0000
Received: (qmail 35766 invoked by uid 500); 18 Dec 2008 04:51:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35730 invoked by uid 500); 18 Dec 2008 04:51:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35719 invoked by uid 99); 18 Dec 2008 04:51:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 20:51:28 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,HTML_NONELEMENT_40_50,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghendrey@decarta.com designates 66.151.148.231 as permitted sender)
Received: from [66.151.148.231] (HELO mx2.decarta.com) (66.151.148.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 04:51:13 +0000
Received: from internal.decarta.com ([10.253.0.17]) by mx2.decarta.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 17 Dec 2008 20:50:51 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C960CC.33DB7AD3"
Subject: double metaphone for misspellings
Date: Wed, 17 Dec 2008 20:50:50 -0800
Message-ID: <6C5C1804772DB944BA88A0DC48D338DA04BA6BBD@dct-mail.sanjose.telcontar.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: double metaphone for misspellings
Thread-Index: AclgzDMFiOf/+g8bRbmaJgDAhFWbjQ==
From: "Geoff Hendrey" <ghendrey@decarta.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Dec 2008 04:50:51.0719 (UTC) FILETIME=[33E7BD70:01C960CC]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C960CC.33DB7AD3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Apache commons codec library has double metaphone algorithm. I tried a
series of experiments around storing the double metaphone
representations of strings in the index itself, and searching using
doublemetaphone version of search terms when the field I am searching
against is stored as double metaphone. This works very well. For my test
rig, I added 4 variants of a  field to the document. The four variants
were:=20
=20
1) name-tokenized-doublemetaphone
2) name-tokenized
3)name-untokenized-doublemetaphone
4)name-untokenized
=20
=20
Here is the code where I wrote added the 4 variants to the index:
=20
    private void addProductNamesToDoc(Document poiDocument, IdentityType
id) {
        DoubleMetaphone dm =3D new DoubleMetaphone();
        dm.setMaxCodeLen(100);
        for(Object name: id.getNames().getPOIName()){ //for each name in
list of names. Name can be "SCHAAD FAMILY ALMONDS" for example
=20
if(log.isDebugEnabled())log.debug(((POINameType)name).getText());
            if(null !=3D ((POINameType)name).getText()){
                String[] splits =3D
((POINameType)name).getText().split("\\s"); //tokenize manually. (gosh,
I thought the analyser would do this)
                //add tokenized double metaphone and plain tokenized
variants of name
                for(String component:splits){
                    poiDocument.add(new
Field("name-tokenized-doublemetaphone",dm.doubleMetaphone(component),
Field.Store.YES, Field.Index.ANALYZED));
                    poiDocument.add(new
Field("name-tokenized",component, Field.Store.YES,
Field.Index.ANALYZED));                   =20
                }
                //add untokenized double metaphone and untokenized plain
                poiDocument.add(new
Field("name-untokenized-doublemetaphone",dm.doubleMetaphone(((POINameTyp
e)name).getText()), Field.Store.YES, Field.Index.ANALYZED));
                poiDocument.add(new
Field("name-untokenized",((POINameType)name).getText(), Field.Store.YES,
Field.Index.ANALYZED));
            }
        }
    }
=20
Results of testing misspelled terms with PhraseQuery show that only
name-tokenized-doublemetaphone can tolerate misspellings.So this seems
to be a nice and efficient way to allow inputs that are wildly
misspelled.
=20
Can someone explain to me exactly what Field.Store.YES and
Field.Index.ANALYZED do? Should I tune these values?
=20

Geoff Hendrey

Software Architect
deCarta
Four North Second Street, Suite 950
San Jose, CA  95113
office 408.625.3522
www.decarta.com <blocked::http://www.decarta.com>=20

=20

=20

------_=_NextPart_001_01C960CC.33DB7AD3--

From java-user-return-37806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 04:52:44 2008
Return-Path: <java-user-return-37806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47133 invoked from network); 18 Dec 2008 04:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 04:52:44 -0000
Received: (qmail 39346 invoked by uid 500); 18 Dec 2008 04:52:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39319 invoked by uid 500); 18 Dec 2008 04:52:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39308 invoked by uid 99); 18 Dec 2008 04:52:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 20:52:47 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [64.104.193.196] (HELO syd-iport-1.cisco.com) (64.104.193.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 04:52:32 +0000
Received: from ind-dkim-2.cisco.com ([64.104.140.59])
  by syd-iport-1.cisco.com with ESMTP; 18 Dec 2008 04:52:08 +0000
Received: from india-core-1.cisco.com (india-core-1.cisco.com [64.104.129.221])
	by ind-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id mBI4q89N010441
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 10:22:08 +0530
Received: from xbh-blr-411.apac.cisco.com (xbh-blr-411.cisco.com [64.104.140.150])
	by india-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id mBI4pkVi021570
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 04:52:04 GMT
Received: from xfe-blr-412.apac.cisco.com ([64.104.140.152]) by xbh-blr-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 18 Dec 2008 10:22:03 +0530
Received: from [10.65.78.248] ([10.65.78.248]) by xfe-blr-412.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 18 Dec 2008 10:22:02 +0530
Message-ID: <4949D6D6.7000402@cisco.com>
Date: Thu, 18 Dec 2008 10:21:34 +0530
From: Preetham Kajekar <preetham@cisco.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
References: <494894D2.9010901@cisco.com>	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>	 <49490F4B.1030607@cisco.com>	 <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>	 <49491EED.4070403@cisco.com> <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com>
In-Reply-To: <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Dec 2008 04:52:02.0304 (UTC) FILETIME=[5DFA2800:01C960CC]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=9794; t=1229575928; x=1230439928;
	c=relaxed/simple; s=inddkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=preetham@cisco.com;
	z=From:=20Preetham=20Kajekar=20<preetham@cisco.com>
	|Subject:=20Re=3A=20Combining=20results=20of=20multiple=20i
	ndexes
	|Sender:=20;
	bh=d5qZ9Yv8oVwqG0jsw1/gaIxRygOqZ8YeVwZezc9RaxA=;
	b=N1qb/yOhKPCooWoDhoMcYr+y5S0b2lkZhp7qt6tWakjy2GlWkNDPsYGGz7
	Ho7miHgHtv4gxNJ+61JxTY72vZeBChhWD0f9gBNISwNfEqpwNSIXP5YrcEuH
	HlemDw15ft;
Authentication-Results: ind-dkim-2; header.From=preetham@cisco.com; dkim=pass (
	sig from cisco.com/inddkim2002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick and Michael.
I will try out these suggestions and post my findings.

~preetham

Erick Erickson wrote:
> Well, maybe if I'd read the original post more carefully I'd have figured
> that out,
> sorry 'bout that.
>
> I *think* I remember reading somewhere on the email lists that your indexing
> speed goes up pretty linearly as the number of indexing tasks approaches
> the number of CPUs. Are you, perhaps, on a dual-core machine? But do search
> the mail archives because my memory may not be accurate.
>
> You can easily combine indexes by IndexWriter.addIndexes BTW. Personally
> I prefer fewer indexes if you can get away with it. But I'd only try this
> after
> Michael's suggestion of using multiple threads on a single underlying
> writer.
>
> You could even think about using N machines to create M fragments then
> combining them all afterwards if your logs are static enough to make that
> reasonable. Combining indexes may take a while though.....
>
> Best
> Erick
>
> On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar <preetham@cisco.com>wrote:
>
>   
>> Hi Erick,
>> Thanks for the response. Replies inline.
>>
>> Erick Erickson wrote:
>>
>>     
>>> The very first question is always "are you opening a new searcher
>>> each time you query"? But you've looked at the Wiki so I assume not.
>>> This question is closely tied to what kind of latency you can tolerate.
>>>
>>> A few more details, please. What's slow? Queries? Indexing?
>>>
>>>
>>>       
>> Indexing. Again, it is not slow. It is just faster with two separate
>> indexers in two threads.
>>
>>     
>>> How slow? 100ms? 100s? What are your target times and
>>> what are you seeing?
>>>
>>>
>>>       
>> With a single indexer in a single thread, I can index about 20,000 event
>> objects per second. With 2 thread and 2 indexers, it is close to 50,000. :-)
>>
>>     
>>> How big is your index? 100M? 100G? What kind of VM
>>> parameters are you specifying?
>>>
>>>
>>>       
>> The index will have about 20mil entries. The size of the index lands up
>> being about 500M.
>> I start the VM with 1G of heap. No other options for GC etc is used.
>>
>>     
>>> As an aside, do note that there's no requirement in Lucene that
>>> each document have the same fields, so it's unclear why you
>>> need two indexes, but perhaps some of the answers to the above
>>> will help us understand.
>>>
>>>
>>>       
>> Like I mentioned, Lucene does the job much faster with two indexes.
>>
>>     
>>> Also, be very very careful what you measure when you measure
>>> queries. You absolutely *have* to put some instrumentation in
>>> the code since "slow queries" can result from things other than
>>> searching. For instance, iterating over a Hits object for 100s of
>>> documents....
>>>
>>>
>>>       
>> The Query speeds are much faster than what I need :-) So no complains here.
>>
>>     
>>> Show the code, man <G>!
>>>
>>>
>>>       
>> Code below. EvIndexer is the base class. There are two subclasses which
>> implement addEvFieldsToIndexDoc() (template pattern) to add different fields
>> to the index. that code is also pasted below
>>
>> --Code ---
>>
>> BaseClass
>>
>>   public EvIndexer(String indexName) throws Exception {
>>       this.name = indexName;
>>       a = new KeywordAnalyzer();
>>       INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,
>> "./index/");
>>       FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH +
>> File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
>>       indexWriter = new IndexWriter(directory, a,
>> IndexWriter.MaxFieldLength.LIMITED);
>> //indexWriter.setUseCompoundFile(false);
>>       //indexWriter.setRAMBufferSizeMB(256);
>>         }
>>       /** Method implemented by extending classes to add data into the
>> index document for the
>>    *  given event
>>    *
>>    * @param d
>>    */
>>   protected abstract void addEvFieldsToIndexDoc(Document d, Ev event);
>>     public void addToIndex(Ev ev) throws Exception {
>>       noOfEventsIndexed++;
>>       Document d = new Document();             addEvFieldsToIndexDoc(d,
>> ev);
>>       indexWriter.addDocument(d);
>>             if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
>>           System.out.println(name + " indexed " +
>> NumberFormat.getInstance().format(noOfEventsIndexed) + " Commiting them");
>>           commit();
>>       }                   }
>>
>> DerievdClass1
>>   protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>>       //noOfEventsIndexed++;
>>             Field id = new Field(EV_ID, Long.toString(ev.getId()),
>> Field.Store.YES, Field.Index.NO);
>>       Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),
>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>       Field type = new Field(EV_TYPE,
>> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
>> Field.Index.NOT_ANALYZED);
>>       Field pri = new Field(EV_PRI, Short.toString(ev.getPriority()) ,
>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>       Field time = new Field(EV_TIME, getHexString(ev.getRecvTime()) ,
>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>       d.add(id);
>>       d.add(src);
>>       d.add(type);
>>       d.add(pri);
>>       d.add(time);
>>       //noOfFieldsIndexed +=  4;
>>                   }
>>
>>
>>
>>
>> Thanks for the support.
>> ~preetham
>>
>>
>>  Best
>>     
>>> Erick
>>>
>>>
>>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <preetham@cisco.com
>>>       
>>>> wrote:
>>>>         
>>>
>>>       
>>>> Hi Grant,
>>>> Thanks four response. Replies inline.
>>>>
>>>> Grant Ingersoll wrote:
>>>>
>>>>
>>>>
>>>>         
>>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>>
>>>>>  Hi,
>>>>>
>>>>>
>>>>>           
>>>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>>>
>>>>>> I am trying to index a Java object which has about 10 fields (like id,
>>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>>> In order to speed up indexing, I figured that having two separate
>>>>>> indexers, each of them indexing different set of fields works great. So
>>>>>> I
>>>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>> Can you explain this a bit more?  Are those two fields really large org
>>>>> something?  How are you obtaining them?  How are you correlating the
>>>>> documents between the two indexes?  Did you actually try a single index
>>>>> and
>>>>> it was too slow?
>>>>>
>>>>>
>>>>>
>>>>>           
>>>> I have a java object which has about 10 fields. However, the fields are
>>>> not
>>>> fixed. The java object is essentially a representation of Syslogs from
>>>> network devices. So different syslogs have different fields. Each field
>>>> has
>>>> a unique id and a value (mostly numeric types, so i convert it to
>>>> string).
>>>> There are some fixed fields. So the object is a list of fields which is
>>>> produced by a parser.
>>>> I am trying to index using two indexers in two separate threads- one for
>>>> fixed and another for the non-fixed fields. Except for a unique id, I do
>>>> not
>>>> store the fields in Lucene - i just index them. From the index, i get the
>>>> unique id which is all I care about. (the objects are stored elsewhere
>>>> and
>>>> can be looked up based on this unique id).
>>>> I did try using a single indexer, but things were quite slow. Getting
>>>> high
>>>> throughput is crucial and having two indexers seemed to do very well.
>>>> (more
>>>> than twice as fast)
>>>>
>>>> Further, the index will never be modified and I can have just one thread
>>>> writing to the index. If there are any other performance tips would be
>>>> very
>>>> helpful. I have already looked at the wiki link regarding performance and
>>>> using some of them.
>>>>
>>>> Thanks,
>>>> ~preetham
>>>>
>>>>
>>>>
>>>>
>>>>         
>>>>> Now, I want to have boolean AND query's looking for values in both
>>>>>           
>>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two separate
>>>>>> indexes. Would using the MultiIndexReader help ? Since I am doing an
>>>>>> AND, I
>>>>>> dont expect that it would work.
>>>>>>
>>>>>> Thanks,
>>>>>> ~preetham
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>> --------------------------
>>>>> Grant Ingersoll
>>>>>
>>>>> Lucene Helpful Hints:
>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>           
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>         
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 05:45:06 2008
Return-Path: <java-user-return-37807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25218 invoked from network); 18 Dec 2008 05:45:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 05:45:06 -0000
Received: (qmail 88928 invoked by uid 500); 18 Dec 2008 05:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88903 invoked by uid 500); 18 Dec 2008 05:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88892 invoked by uid 99); 18 Dec 2008 05:45:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 21:45:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 05:44:51 +0000
Received: from [192.168.222.60] (monolith.syd.nuix.com [192.168.222.60])
	by file1.syd.nuix.com (Postfix) with ESMTP id 852144A80BE
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 16:44:28 +1100 (EST)
Message-ID: <4949E346.8000406@nuix.com>
Date: Thu, 18 Dec 2008 16:44:38 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: double metaphone for misspellings
References: <6C5C1804772DB944BA88A0DC48D338DA04BA6BBD@dct-mail.sanjose.telcontar.com>
In-Reply-To: <6C5C1804772DB944BA88A0DC48D338DA04BA6BBD@dct-mail.sanjose.telcontar.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Geoff Hendrey wrote:
> ((POINameType)name).getText().split("\\s"); //tokenize manually. (gosh,
> I thought the analyser would do this)

The analyser does do this... but related to this, the Right Way to do it 
in your case would be to write your own analyser specifically for that 
field, and do all the metaphone magic in the analyser.

You probably want an analyser which chains onto the StandardAnalyzer and 
adds an additional token filter to do the double metaphone stuff. 
Writing a token filter isn't too hard, PorterStemFilter is a relatively 
good example of doing something similar.

So you would end up with a DoubleMetaphoneFilter, which you could then 
use with PerFieldAnalyzerWrapper to have it apply only to the fields you 
use that for.

Daniel


-- 
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 06:39:36 2008
Return-Path: <java-user-return-37808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69249 invoked from network); 18 Dec 2008 06:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 06:39:35 -0000
Received: (qmail 30697 invoked by uid 500); 18 Dec 2008 06:39:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30659 invoked by uid 500); 18 Dec 2008 06:39:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30648 invoked by uid 99); 18 Dec 2008 06:39:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 22:39:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of visual.logic@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 06:39:19 +0000
Received: by yx-out-2324.google.com with SMTP id 3so99159yxj.5
        for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 22:38:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version:in-reply-to
         :references:content-type:message-id:content-transfer-encoding:from
         :subject:date:to:x-mailer;
        bh=gmOgXg0kwknsGj9ogWB/1STPi85VypG5KnQEOMEwPZE=;
        b=gc0ViMF8OGBsFAkkG+spCvaXIj3LB7AZegvTVhrGnHJg6NfnAqO6PsPeczKVSZYDUR
         fcxFoxvA3HG71WtKGOPEPXy8DdZfGU8TmnE9SlXbs+RLf6JC4CFPhrekH7+/bZ3G9W40
         FS8IO3YQvx1j8wZbNL0i2xYmGH/9B/sfo2iro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:content-type:message-id
         :content-transfer-encoding:from:subject:date:to:x-mailer;
        b=kzIsjqSI+DIuLaAwU50aopxrJt2VrYHh4W6Xb76LZBEgimRq0KE4xfIK77Znw3RpTo
         kyaOsLdroUwD5RRyye+po9UgMU0jHpOMU26blHwtKeNVfOpnr3/HkNhiJkOuNOeTEDZ5
         /Ne4LH9UrmcyiwEkjevEcbGafrUSkBvWAQorw=
Received: by 10.64.96.3 with SMTP id t3mr1276957qbb.96.1229582337864;
        Wed, 17 Dec 2008 22:38:57 -0800 (PST)
Received: from ?192.168.1.119? (S01060014bff5122b.wp.shawcable.net [24.79.76.163])
        by mx.google.com with ESMTPS id k8sm3477186qba.25.2008.12.17.22.38.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 17 Dec 2008 22:38:57 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753.1)
In-Reply-To: <9294E20AED46934EA459020706463F94011EE5CF@SUEXCL-02.ad.syr.edu>
References: <9294E20AED46934EA459020706463F94011EE5CF@SUEXCL-02.ad.syr.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3D31E0B3-188B-4BA6-8BE1-951192AC7F8D@gmail.com>
Content-Transfer-Encoding: 7bit
From: "Thomas J. Buhr" <visual.logic@gmail.com>
Subject: Re: What are the best document edit options?
Date: Thu, 18 Dec 2008 00:38:45 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Steve,

Thanks for the helpful information, the addition of the new document  
methods makes things much better.

One more question, is there JSON support in Lucene? JSON is more fat- 
free compared to XML and would be preferred. Digester works well for  
indexing XML but something along the same lines for JSON would be  
even sweeter.

Cheers,

Thom


On 17-Dec-08, at 2:39 PM, Steven A Rowe wrote:

> Hi Thomas,
>
> On 12/17/2008 at 11:52 AM, Thomas J. Buhr wrote:
>> Where can I see how IndexWriter.updateDocument works without getting
>> into Lucene all over again until this important issue is resolved?
>> Is there a sample of its usage for updating specific fields in a
>> given document?
>
> The updateDocument() functionality was added to IndexWriter in  
> Lucene v2.1.0 under the aegis of LUCENE-565 <http:// 
> issues.apache.org/jira/browse/LUCENE-565>, and the discussion there  
> should help, especially the design overviews (more than one there -  
> look for Ning Li's 2006-12-18 comment: <http://issues.apache.org/ 
> jira/browse/LUCENE-565?focusedCommentId=12459506#action_12459506>).
>
> Several of Lucene's test cases invoke updateDocument(), e.g.  
> o.a.l.index.TestIndexWriterDelete.testOperationsOnDiskFull():
>
> <http://svn.apache.org/viewvc/lucene/java/tags/lucene_2_4_0/src/ 
> test/org/apache/lucene/index/TestIndexWriterDelete.java?view=markup>
>
>> Is the update immediate or delayed?
>
> My reading of the way this all works is that IndexWriter buffers  
> deletes and only writes them out to disk on flush, which can be  
> triggered by a commit.  An IndexReader over this index will only  
> see a single post-commit snapshot.  So there will be a delay: the  
> IndexWriter must perform a commit, and the IndexReader must be  
> closed and then opened again (or just reopen()'d, as of Lucene  
> v2.3.0).
>
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 07:15:29 2008
Return-Path: <java-user-return-37809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54852 invoked from network); 18 Dec 2008 07:15:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 07:15:28 -0000
Received: (qmail 53083 invoked by uid 500); 18 Dec 2008 07:15:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53055 invoked by uid 500); 18 Dec 2008 07:15:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53042 invoked by uid 99); 18 Dec 2008 07:15:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 23:15:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 07:15:13 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id B47BC71C5A3; Wed, 17 Dec 2008 23:14:51 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id B0D0571C5A1
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 23:14:51 -0800 (PST)
Date: Wed, 17 Dec 2008 23:14:51 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Unique results in BooleanQuery
In-Reply-To: <13158.43731.qm@web45306.mail.sp1.yahoo.com>
Message-ID: <Pine.LNX.4.62.0812172312040.19172@radix.cryptio.net>
References: <21047428.post@talk.nabble.com> <4948900B.4050005@aconex.com>
 <196811.89212.qm@web45303.mail.sp1.yahoo.com> <13158.43731.qm@web45306.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Let me expound more on the question. Will the q1 be run on the 
: BooleanQuery q2 and append the results that are not equal to the result 
: of the first query of q2?

i really have no idea what you mean by: "q1 be run on the BooleanQuery q2"

the query structure suggested will ensure that you only get results which 
match q2 and do not match q1 (per your request "then the 2nd query will 
not anymore return the same results from the 1st query")

: Do the first query as normal, then create a second BooleanQuery; add one clause for "colour:blue", Occur.MUST, and then add the query from the first search as a MUST_NOT.
: 
: Query q1 = new TermQuery(new Term("fruit", "apple"));
: ..... run query, get back all apples ...
: 
: BooleanQuery q2 = new BooleanQuery();
: q2.add(new TermQuery(new Term("colour", "blue")), Occur.MUST);
: q2.add(q1, Occur.MUST_NOT);
: ..... run query q2, get back all blue things that don't have apples ...




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 07:17:07 2008
Return-Path: <java-user-return-37810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55559 invoked from network); 18 Dec 2008 07:17:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 07:17:07 -0000
Received: (qmail 57211 invoked by uid 500); 18 Dec 2008 07:17:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57171 invoked by uid 500); 18 Dec 2008 07:17:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57160 invoked by uid 99); 18 Dec 2008 07:17:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 23:17:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of hossman_lucene@fucit.org designates 208.69.42.181 as permitted sender)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 07:16:51 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id DF08F71C5A1; Wed, 17 Dec 2008 23:16:30 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id D450871C595
	for <java-user@lucene.apache.org>; Wed, 17 Dec 2008 23:16:30 -0800 (PST)
Date: Wed, 17 Dec 2008 23:16:30 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: What are the best document edit options?
In-Reply-To: <6F1D5641-0A90-47EB-BE2D-75BDE0F07836@gmail.com>
Message-ID: <Pine.LNX.4.62.0812172315380.19172@radix.cryptio.net>
References: <21047428.post@talk.nabble.com> <4948900B.4050005@aconex.com>
 <196811.89212.qm@web45303.mail.sp1.yahoo.com> <13158.43731.qm@web45306.mail.sp1.yahoo.com>
 <6F1D5641-0A90-47EB-BE2D-75BDE0F07836@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: In-Reply-To: <13158.43731.qm@web45306.mail.sp1.yahoo.com>
: Subject: What are the best document edit options?

http://people.apache.org/~hossman/#threadhijack
Thread Hijacking on Mailing Lists

When starting a new discussion on a mailing list, please do not reply to 
an existing message, instead start a fresh email.  Even if you change the 
subject line of your email, other mail headers still track which thread 
you replied to and your question is "hidden" in that thread and gets less 
attention.   It makes following discussions in the mailing list archives 
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/Thread_hijacking



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 07:42:34 2008
Return-Path: <java-user-return-37811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89424 invoked from network); 18 Dec 2008 07:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 07:42:34 -0000
Received: (qmail 79131 invoked by uid 500); 18 Dec 2008 07:42:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79101 invoked by uid 500); 18 Dec 2008 07:42:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79090 invoked by uid 99); 18 Dec 2008 07:42:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 17 Dec 2008 23:42:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.84.166] (HELO smtp117.mail.mud.yahoo.com) (209.191.84.166)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Dec 2008 07:42:16 +0000
Received: (qmail 36706 invoked from network); 18 Dec 2008 07:41:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=k28scWmJh3TaaIkxprwfRwlZNfWHjYAyVUyt3VdCPQL751Kam5iBTxJOMvQlQSH6jfX8lu5cazPCPYP4pn+s4IQzPXEMwxoX90/3A1XmN+DbN7RpYwc7gjLZpX+yxWpaB+LdfijgjDgPDmYT1rDuQbzr6FmwO31xPeRKgHHbUI8=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp117.mail.mud.yahoo.com with SMTP; 18 Dec 2008 07:41:50 -0000
X-YMail-OSG: ayJEuOUVM1kRj5bKShWbQqzE1uZovPCkHWVCEhwkEifnuki.otb6SwUmsuwWyeLrfegmRYj782htv9SMQR.UBvkdMLqyXSCTl47SobB.XM3BOLiUS1sQb6ur0egNjQtjYNqZN0Fq.Y9KYk8.gnwJFHVZcox_Rb89bMdoalYVrRZ0HPUTIMS5Yq2uMb6W
X-Yahoo-Newman-Property: ymail-3
Message-ID: <009201c960e4$16599770$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006901c96036$5eb4d6a0$710bc30a@sv.us.sonicwall.com>
Subject: Re: IndexReader delete
Date: Thu, 18 Dec 2008 13:11:41 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Any opinion on this.

----- Original Message ----- 
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Sent: Wednesday, December 17, 2008 4:28 PM
Subject: IndexReader delete


> When i perform a delete, i am getting the following exception
>
> org.apache.lucene.store.LockObtainFailedException: Lock obtain timed out: 
> SimpleFSLock@/<path>
> org.apache.lucene.store.Lock.obtain(Lock.java:85)
> org.apache.lucene.index.DirectoryIndexReader.acquireWriteLock(DirectoryIndexReader.java:303)
> org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java:837)
>
> Indexing is done by separate process and search is performed from web ui. 
> If the DB is locked by indexing app then the records will not be deleted 
> using reader?
>
> I want the deletion to be performed by Reader, so that it will get 
> reflected in the results immediately.
>
> Regards
> Ganesh
>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 09:48:42 2008
Return-Path: <java-user-return-37812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64721 invoked from network); 18 Dec 2008 09:48:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 09:48:42 -0000
Received: (qmail 82606 invoked by uid 500); 18 Dec 2008 09:48:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81627 invoked by uid 500); 18 Dec 2008 09:48:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81615 invoked by uid 99); 18 Dec 2008 09:48:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 01:48:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 09:48:27 +0000
Received: by qw-out-2122.google.com with SMTP id 5so91119qwi.53
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 01:48:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=ghur/HAyI0sWhaq6bhyaJVUu+hG0yaxYcFH20+vwFCw=;
        b=u8/5i58v8rkBcXoRMaJFEkP7QTifOGG1Z/inXqbbu5XGweoX3okxIqm+HYVwihB3PV
         NIE8AKYAv0EcM0m8hsdRmAt5eyPd9+zdXj1mx+cVTi+ZbZzk0O1uiXhlWsLh5IWvcCXr
         rzkE4JCfUlBBx0KCM1JcNEnevksoia3AhY5Mc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=V29stKLrBOxMeFMZ3KZCcf2ACGQWBSLQLZNbOiXBacaUETv2BF5dvTPoacwDtbod7G
         8mnS4uVy9ZuF3ghV+PIWExqh4qY//KYs0dkh7ByjmLOWeFjNsOn2L85pU/FOkrMrJ9cF
         MhezjiqQD+nBjzSGxaAkbJqWTiI/FIyOCmlD8=
Received: by 10.214.241.12 with SMTP id o12mr2089170qah.360.1229593686660;
        Thu, 18 Dec 2008 01:48:06 -0800 (PST)
Received: by 10.214.241.6 with HTTP; Thu, 18 Dec 2008 01:48:06 -0800 (PST)
Message-ID: <8c4e68610812180148p7a11ecdaw483377a16b27f891@mail.gmail.com>
Date: Thu, 18 Dec 2008 09:48:06 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <bf1404350812171215m4b41ff6dl46bf22890a6fd56@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
	 <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
	 <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
	 <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>
	 <8c4e68610811191258i6ce8a777g6f7687bd7fcfd95d@mail.gmail.com>
	 <bf1404350811191322h39e808d3x5e1ae1157cf3e1ad@mail.gmail.com>
	 <359a92830811191428hea3608dt95cc54aa26052862@mail.gmail.com>
	 <bf1404350812171215m4b41ff6dl46bf22890a6fd56@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene lets you sort by multiple fields, including score.  See the
javadocs for Sort and SortField, specifically SortField.SCORE.


--
Ian.

On Wed, Dec 17, 2008 at 8:15 PM, Ariel <isaacrc82@gmail.com> wrote:
> Hi:
> This solution have a problem.
> the results are sorted bye the year criteria but I need that after sort by
> year criteria it sort by the scoring criteria two.
> How can I do this ???
>
> I hope you can help me.
> Greetings
> Ariel
>
> On Wed, Nov 19, 2008 at 5:28 PM, Erick Erickson <erickerickson@gmail.com>wrote:
>
>> Well, MultiSearcher is just a Searcher, so you have available
>> all of the search methods on Searcher. One of which is:
>>
>> search
>>
>> public TopFieldDocs
>>
>> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/TopFieldDocs.html>
>> *search*(Query
>> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Query.html>
>> query,
>>                           Filter
>> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Filter.html>
>> filter,
>>                           int n,
>>                           Sort
>> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Sort.html>
>> sort)
>>                    throws IOException
>> <http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>
>>
>> Expert: Low-level search implementation with arbitrary sorting. Finds the
>> top n hits for query, applying filter if non-null, and sorting the hits by
>> the criteria in sort.
>>
>>
>> Best
>> Erick
>>
>>
>> On Wed, Nov 19, 2008 at 4:22 PM, Ariel <isaacrc82@gmail.com> wrote:
>>
>> > Well, this is what I am doing:
>> >
>> > queryString="year:[2003 TO 2005]"
>> > [CODE]
>> >    Query pquery = null;
>> >    Hits hits = null;
>> >    Analyzer analyzer = null;
>> >    analyzer = new SnowballAnalyzer("English");
>> >    try {
>> >        pquery = MultiFieldQueryParser.parse(new String[] {queryString,
>> > queryString}, new String[] {"title", "content"}, analyzer); //analyzer
>> >    } catch (ParseException e1) {
>> >        e1.printStackTrace();
>> >    }
>> >    MultiSearcher searcher = (MultiSearcher) searcherCache.get(name);
>> >
>> >    try {
>> >        hits = searcher.search(pquery);
>> >    } catch (IOException e1) {
>> >        e1.printStackTrace();
>> >    }
>> > [/CODE]
>> >
>> > I don't know the methods that include sorting. I have made the sorting by
>> > the score criteria so far, I don-t know how to change it to the year
>> field
>> > criteria.
>> > As you can see, I am using a multisearcher because I have several
>> indexes.
>> >
>> > I hope you can help me.
>> > Regards
>> > Thanks in advance
>> > Ariel
>> >
>> >
>> >
>> > On Wed, Nov 19, 2008 at 3:58 PM, Ian Lea <ian.lea@gmail.com> wrote:
>> >
>> > > Are you using one of the search methods that includes sorting?  If
>> > > not, then do.  If you are, then you need to tell us exactly what you
>> > > are doing and exactly what you reckon is going wrong.
>> > >
>> > >
>> > > --
>> > > Ian.
>> > >
>> > >
>> > > On Wed, Nov 19, 2008 at 6:23 PM, Ariel <isaacrc82@gmail.com> wrote:
>> > > > it is supposed lucene make a lexicocraphic sorting but this is not
>> > > hapening,
>> > > > Could you tell me what I'm doing wrong ?
>> > > > I hope you can help me.
>> > > > Regards
>> > > >
>> > > > On Wed, Nov 19, 2008 at 11:56 AM, Ariel <isaacrc82@gmail.com> wrote:
>> > > >
>> > > >> Thanks, that was very helpful, but I have a question when I make the
>> > > >> searches it does not sort the results according to the range, for
>> > > example:
>> > > >> year: [2003 TO 2008] in the first page 2003 documents are showed, in
>> > the
>> > > >> second 2005 documents, in the third page 2004 documents, I don't see
>> > any
>> > > >> sort criteria.
>> > > >> How could I fix that problem ???
>> > > >> Greetings
>> > > >> Ariel
>> > > >>
>> > > >>
>> > > >> On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com>
>> wrote:
>> > > >>
>> > > >>> Hi - sounds like you need a range query.
>> > > >>>
>> > > >>>
>> > > >>>
>> > >
>> >
>> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
>> > > >>>
>> > > >>>
>> > > >>> --
>> > > >>> Ian.
>> > > >>>
>> > > >>>
>> > > >>> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com>
>> wrote:
>> > > >>> > Hi everybody:
>> > > >>> >
>> > > >>> > I need to make search with lucene 2.3.2, taking in account the
>> > dates,
>> > > >>> > previously when I build the index I create a date field where I
>> > > stored
>> > > >>> the
>> > > >>> > year in which the document was created, at the search moment I
>> > would
>> > > >>> like to
>> > > >>> > retrieve documents that have been created before a Year or after
>> a
>> > > Year,
>> > > >>> for
>> > > >>> > example documents before 2002 year o after 2003 year.
>> > > >>> > It is possible to do that with lucene ???
>> > > >>> > Regards
>> > > >>> > Ariel
>> > > >>> >
>> > > >>>
>> > > >>>
>> ---------------------------------------------------------------------
>> > > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> > > >>>
>> > > >>>
>> > > >>
>> > > >
>> > >
>> > > ---------------------------------------------------------------------
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 09:57:12 2008
Return-Path: <java-user-return-37813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78109 invoked from network); 18 Dec 2008 09:57:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 09:57:12 -0000
Received: (qmail 89267 invoked by uid 500); 18 Dec 2008 09:57:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89238 invoked by uid 500); 18 Dec 2008 09:57:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89227 invoked by uid 99); 18 Dec 2008 09:57:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 01:57:18 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 09:56:57 +0000
Received: by qw-out-2122.google.com with SMTP id 5so92265qwi.53
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 01:56:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=0T0olKC4XqpiPn11yMUvwam4paDLZ44M9ptpkggYNPM=;
        b=xwDuu72a1Wl9kIZI9PX1kUDohz0/BBHomoSdfE9lVjE4fXusj0WtGlvwj0NM83323h
         L3207vNiXALTH1XxEyIvNFP2eBOXImC0V8pl4YxaccKPAj475vWrjF8eq4x3iZoptpc5
         CTfkjjxTwx2/ilFckQ818lY4leGzMygenwSw8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=ErBYRhiX4CUsP3eZhMDWtPy2Ums4pspT4Oc5xRjXnyLUlMEDxr/ETWjQzuPlFAl31i
         0bOQqpNaW7mMzOScxBrYt2sYbF6/1w/Dh+0F02ZHWmRCAHNjFbR19JiMu5zyZcZ78684
         BcdLsJVAFx5Ua8tNmxSkTjfqLqh6/KOjrsIkk=
Received: by 10.214.184.7 with SMTP id h7mr2126628qaf.178.1229594196869;
        Thu, 18 Dec 2008 01:56:36 -0800 (PST)
Received: by 10.214.241.6 with HTTP; Thu, 18 Dec 2008 01:56:36 -0800 (PST)
Message-ID: <8c4e68610812180156k2d5825e6of92a411bf51cb5b7@mail.gmail.com>
Date: Thu, 18 Dec 2008 09:56:36 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Cache Used by IndexReader/IndexSearcher
In-Reply-To: <21044811.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <21044811.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Are all the queries broadly similar or are the later ones more
complex?  What happens if you switch the order and run the later
queries first?  Any complications like sorting?  Has your jvm got
enough memory?

There is no IndexSearcher cache that you can increase.


--
Ian.

On Wed, Dec 17, 2008 at 12:19 AM, Sangrish <sidangrish@gmail.com> wrote:
>
> Hi All,
>
>          I have a 50 GB index of about 40 million documents. I need to
> query it
> around 40,000 times(different queries) one by one. I saw that the query
> times are negligible for the
> first, say 25,000 queries, but it degrades later on. For example, the time
> for 200 sequential queries changes from 0.009 secs to 0.06 secs. Any
> possible reasons?
>
>   I read somewhere that IndexSearcher reads in a cache when its
> initialized. I could not find more on this.
> Can I increase this cache size to get an elongated performance? If yes, how
> do I play with it?
>
> Thanks
> Siddharth
>
>
> --
> View this message in context: http://www.nabble.com/Cache-Used-by-IndexReader-IndexSearcher-tp21044811p21044811.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 10:04:14 2008
Return-Path: <java-user-return-37814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86531 invoked from network); 18 Dec 2008 10:04:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 10:04:14 -0000
Received: (qmail 95937 invoked by uid 500); 18 Dec 2008 10:04:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95894 invoked by uid 500); 18 Dec 2008 10:04:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95883 invoked by uid 99); 18 Dec 2008 10:04:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 02:04:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 74.125.92.24 as permitted sender)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 10:03:59 +0000
Received: by qw-out-2122.google.com with SMTP id 5so93006qwi.53
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 02:03:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=U9/zRtJMFoSIYHWvWC6zGU19X2fH4RUZJyOlozyY6uU=;
        b=YNJeUUNe8BxYdl9e8NjzWuNse6555N9NrFGUKcNAK+lfZ9OV1/A7B2sQ/a0+QxdyOr
         DBrRAiKFq9fcB7kdQRFm9P39CrFmq7b54FDQvD+65intBMW3Ppef9vKvZlVwLcEkt8Q0
         PjJ+a1qEVmep6eLmLEv7z8R1xi7QaIkMhGDAo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=gtjFrsE2UHCF3u7rNaEoz8wIv7rrRWFI9+v4zUJzQftoti4GPlRvpXtK+iuujHcG8I
         7slx7aDLW5GR3Fmo2ZAntUAmRMYrS7NQ71fUWucuGHHVw+2rK+n65/JF32Bv1Kxz6uFU
         115xkZF+M2OeUuDs6dFKEbG86aqKVivk0ysZg=
Received: by 10.214.183.8 with SMTP id g8mr2128941qaf.198.1229594618847;
        Thu, 18 Dec 2008 02:03:38 -0800 (PST)
Received: by 10.214.241.6 with HTTP; Thu, 18 Dec 2008 02:03:38 -0800 (PST)
Message-ID: <8c4e68610812180203o5117700biaee23d0abc6ed745@mail.gmail.com>
Date: Thu, 18 Dec 2008 10:03:38 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader delete
In-Reply-To: <006901c96036$5eb4d6a0$710bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <006901c96036$5eb4d6a0$710bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Well, if the indexing is happening in a separate process then that
will have locked the index and you won't be able to delete by reader
in your search process.  I'd suggest passing the deletions to the
indexer process.  In my experience everything works smoother when all
index modifications happen in one process.


--
Ian.


On Wed, Dec 17, 2008 at 10:58 AM, Ganesh <emailgane@yahoo.co.in> wrote:
> When i perform a delete, i am getting the following exception
>
> org.apache.lucene.store.LockObtainFailedException: Lock obtain timed out:
> SimpleFSLock@/<path>
>        org.apache.lucene.store.Lock.obtain(Lock.java:85)
>
>  org.apache.lucene.index.DirectoryIndexReader.acquireWriteLock(DirectoryIndexReader.java:303)
>
>  org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java:837)
>
> Indexing is done by separate process and search is performed from web ui. If
> the DB is locked by indexing app then the records will not be deleted using
> reader?
>
> I want the deletion to be performed by Reader, so that it will get reflected
> in the results immediately.
>
> Regards
> Ganesh
>
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 10:04:27 2008
Return-Path: <java-user-return-37815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86685 invoked from network); 18 Dec 2008 10:04:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 10:04:27 -0000
Received: (qmail 97572 invoked by uid 500); 18 Dec 2008 10:04:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97543 invoked by uid 500); 18 Dec 2008 10:04:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97532 invoked by uid 99); 18 Dec 2008 10:04:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 02:04:32 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [171.71.176.117] (HELO sj-iport-6.cisco.com) (171.71.176.117)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 10:04:09 +0000
X-IronPort-AV: E=Sophos;i="4.36,242,1228089600"; 
   d="scan'208";a="215375317"
Received: from sj-dkim-4.cisco.com ([171.71.179.196])
  by sj-iport-6.cisco.com with ESMTP; 18 Dec 2008 10:03:47 +0000
Received: from india-core-1.cisco.com (india-core-1.cisco.com [64.104.129.221])
	by sj-dkim-4.cisco.com (8.12.11/8.12.11) with ESMTP id mBIA3jBk000960
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 02:03:46 -0800
Received: from xbh-blr-411.apac.cisco.com (xbh-blr-411.cisco.com [64.104.140.150])
	by india-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id mBIA3cgX018637
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 10:03:42 GMT
Received: from xfe-blr-411.apac.cisco.com ([64.104.140.151]) by xbh-blr-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 18 Dec 2008 15:33:44 +0530
Received: from [10.65.78.248] ([10.65.78.248]) by xfe-blr-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 18 Dec 2008 15:33:43 +0530
Message-ID: <494A1FE2.8010101@cisco.com>
Date: Thu, 18 Dec 2008 15:33:14 +0530
From: Preetham Kajekar <preetham@cisco.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
References: <494894D2.9010901@cisco.com>	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>	 <49490F4B.1030607@cisco.com>	 <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>	 <49491EED.4070403@cisco.com> <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com> <4949D6D6.7000402@cisco.com>
In-Reply-To: <4949D6D6.7000402@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Dec 2008 10:03:43.0414 (UTC) FILETIME=[E8B51560:01C960F7]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=10900; t=1229594626; x=1230458626;
	c=relaxed/simple; s=sjdkim4002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=preetham@cisco.com;
	z=From:=20Preetham=20Kajekar=20<preetham@cisco.com>
	|Subject:=20Re=3A=20Combining=20results=20of=20multiple=20i
	ndexes
	|Sender:=20;
	bh=+8qkGGxwwRCLuRHCF1vApBXuV/n+IP8/7gRpIFXejsY=;
	b=TVlLW8cOl81vZismGRTYHPkqb5f57EqLVFZLNiWFaDNWdvH90RfgW75bYg
	05TEdTh8He5l43EOUEd3W27nep9mPRkiBl+DjnCUCpkOFdvjCQml0PCaMsmV
	ixs86Qmjmu;
Authentication-Results: sj-dkim-4; header.From=preetham@cisco.com; dkim=pass (
	sig from cisco.com/sjdkim4002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
 I tried out a single IndexWriter used by two threads to index different 
fields. It is slower than using two separate IndexWriters. These are my 
findings

All Fields (9) using 1 IndexWriter 1 Thread - 38,000 object per sec
5 Fields       using 1 IndexWriter 1 Thread - 62,000 object per sec
All Fields (9) using 1 IndexWriter 2 Thread - 29,000 object per sec
All Fields (9) using 2 IndexWriter 2 Thread - 55,000 object per sec

So, it looks like I will have figure how to combine results of multiple 
indexes.

Thanks,
 ~preetham

Preetham Kajekar wrote:
> Thanks Erick and Michael.
> I will try out these suggestions and post my findings.
>
> ~preetham
>
> Erick Erickson wrote:
>> Well, maybe if I'd read the original post more carefully I'd have 
>> figured
>> that out,
>> sorry 'bout that.
>>
>> I *think* I remember reading somewhere on the email lists that your 
>> indexing
>> speed goes up pretty linearly as the number of indexing tasks approaches
>> the number of CPUs. Are you, perhaps, on a dual-core machine? But do 
>> search
>> the mail archives because my memory may not be accurate.
>>
>> You can easily combine indexes by IndexWriter.addIndexes BTW. Personally
>> I prefer fewer indexes if you can get away with it. But I'd only try 
>> this
>> after
>> Michael's suggestion of using multiple threads on a single underlying
>> writer.
>>
>> You could even think about using N machines to create M fragments then
>> combining them all afterwards if your logs are static enough to make 
>> that
>> reasonable. Combining indexes may take a while though.....
>>
>> Best
>> Erick
>>
>> On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar 
>> <preetham@cisco.com>wrote:
>>
>>  
>>> Hi Erick,
>>> Thanks for the response. Replies inline.
>>>
>>> Erick Erickson wrote:
>>>
>>>    
>>>> The very first question is always "are you opening a new searcher
>>>> each time you query"? But you've looked at the Wiki so I assume not.
>>>> This question is closely tied to what kind of latency you can 
>>>> tolerate.
>>>>
>>>> A few more details, please. What's slow? Queries? Indexing?
>>>>
>>>>
>>>>       
>>> Indexing. Again, it is not slow. It is just faster with two separate
>>> indexers in two threads.
>>>
>>>    
>>>> How slow? 100ms? 100s? What are your target times and
>>>> what are you seeing?
>>>>
>>>>
>>>>       
>>> With a single indexer in a single thread, I can index about 20,000 
>>> event
>>> objects per second. With 2 thread and 2 indexers, it is close to 
>>> 50,000. :-)
>>>
>>>    
>>>> How big is your index? 100M? 100G? What kind of VM
>>>> parameters are you specifying?
>>>>
>>>>
>>>>       
>>> The index will have about 20mil entries. The size of the index lands up
>>> being about 500M.
>>> I start the VM with 1G of heap. No other options for GC etc is used.
>>>
>>>    
>>>> As an aside, do note that there's no requirement in Lucene that
>>>> each document have the same fields, so it's unclear why you
>>>> need two indexes, but perhaps some of the answers to the above
>>>> will help us understand.
>>>>
>>>>
>>>>       
>>> Like I mentioned, Lucene does the job much faster with two indexes.
>>>
>>>    
>>>> Also, be very very careful what you measure when you measure
>>>> queries. You absolutely *have* to put some instrumentation in
>>>> the code since "slow queries" can result from things other than
>>>> searching. For instance, iterating over a Hits object for 100s of
>>>> documents....
>>>>
>>>>
>>>>       
>>> The Query speeds are much faster than what I need :-) So no 
>>> complains here.
>>>
>>>    
>>>> Show the code, man <G>!
>>>>
>>>>
>>>>       
>>> Code below. EvIndexer is the base class. There are two subclasses which
>>> implement addEvFieldsToIndexDoc() (template pattern) to add 
>>> different fields
>>> to the index. that code is also pasted below
>>>
>>> --Code ---
>>>
>>> BaseClass
>>>
>>>   public EvIndexer(String indexName) throws Exception {
>>>       this.name = indexName;
>>>       a = new KeywordAnalyzer();
>>>       INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,
>>> "./index/");
>>>       FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH +
>>> File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
>>>       indexWriter = new IndexWriter(directory, a,
>>> IndexWriter.MaxFieldLength.LIMITED);
>>> //indexWriter.setUseCompoundFile(false);
>>>       //indexWriter.setRAMBufferSizeMB(256);
>>>         }
>>>       /** Method implemented by extending classes to add data into the
>>> index document for the
>>>    *  given event
>>>    *
>>>    * @param d
>>>    */
>>>   protected abstract void addEvFieldsToIndexDoc(Document d, Ev event);
>>>     public void addToIndex(Ev ev) throws Exception {
>>>       noOfEventsIndexed++;
>>>       Document d = new Document();             addEvFieldsToIndexDoc(d,
>>> ev);
>>>       indexWriter.addDocument(d);
>>>             if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
>>>           System.out.println(name + " indexed " +
>>> NumberFormat.getInstance().format(noOfEventsIndexed) + " Commiting 
>>> them");
>>>           commit();
>>>       }                   }
>>>
>>> DerievdClass1
>>>   protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>>>       //noOfEventsIndexed++;
>>>             Field id = new Field(EV_ID, Long.toString(ev.getId()),
>>> Field.Store.YES, Field.Index.NO);
>>>       Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),
>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>       Field type = new Field(EV_TYPE,
>>> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
>>> Field.Index.NOT_ANALYZED);
>>>       Field pri = new Field(EV_PRI, Short.toString(ev.getPriority()) ,
>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>       Field time = new Field(EV_TIME, getHexString(ev.getRecvTime()) ,
>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>       d.add(id);
>>>       d.add(src);
>>>       d.add(type);
>>>       d.add(pri);
>>>       d.add(time);
>>>       //noOfFieldsIndexed +=  4;
>>>                   }
>>>
>>>
>>>
>>>
>>> Thanks for the support.
>>> ~preetham
>>>
>>>
>>>  Best
>>>    
>>>> Erick
>>>>
>>>>
>>>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <preetham@cisco.com
>>>>      
>>>>> wrote:
>>>>>         
>>>>
>>>>      
>>>>> Hi Grant,
>>>>> Thanks four response. Replies inline.
>>>>>
>>>>> Grant Ingersoll wrote:
>>>>>
>>>>>
>>>>>
>>>>>        
>>>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>>>
>>>>>>  Hi,
>>>>>>
>>>>>>
>>>>>>          
>>>>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>>>>
>>>>>>> I am trying to index a Java object which has about 10 fields 
>>>>>>> (like id,
>>>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>>>> In order to speed up indexing, I figured that having two separate
>>>>>>> indexers, each of them indexing different set of fields works 
>>>>>>> great. So
>>>>>>> I
>>>>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>             
>>>>>> Can you explain this a bit more?  Are those two fields really 
>>>>>> large org
>>>>>> something?  How are you obtaining them?  How are you correlating the
>>>>>> documents between the two indexes?  Did you actually try a single 
>>>>>> index
>>>>>> and
>>>>>> it was too slow?
>>>>>>
>>>>>>
>>>>>>
>>>>>>           
>>>>> I have a java object which has about 10 fields. However, the 
>>>>> fields are
>>>>> not
>>>>> fixed. The java object is essentially a representation of Syslogs 
>>>>> from
>>>>> network devices. So different syslogs have different fields. Each 
>>>>> field
>>>>> has
>>>>> a unique id and a value (mostly numeric types, so i convert it to
>>>>> string).
>>>>> There are some fixed fields. So the object is a list of fields 
>>>>> which is
>>>>> produced by a parser.
>>>>> I am trying to index using two indexers in two separate threads- 
>>>>> one for
>>>>> fixed and another for the non-fixed fields. Except for a unique 
>>>>> id, I do
>>>>> not
>>>>> store the fields in Lucene - i just index them. From the index, i 
>>>>> get the
>>>>> unique id which is all I care about. (the objects are stored 
>>>>> elsewhere
>>>>> and
>>>>> can be looked up based on this unique id).
>>>>> I did try using a single indexer, but things were quite slow. Getting
>>>>> high
>>>>> throughput is crucial and having two indexers seemed to do very well.
>>>>> (more
>>>>> than twice as fast)
>>>>>
>>>>> Further, the index will never be modified and I can have just one 
>>>>> thread
>>>>> writing to the index. If there are any other performance tips 
>>>>> would be
>>>>> very
>>>>> helpful. I have already looked at the wiki link regarding 
>>>>> performance and
>>>>> using some of them.
>>>>>
>>>>> Thanks,
>>>>> ~preetham
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>        
>>>>>> Now, I want to have boolean AND query's looking for values in both
>>>>>>          
>>>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two 
>>>>>>> separate
>>>>>>> indexes. Would using the MultiIndexReader help ? Since I am 
>>>>>>> doing an
>>>>>>> AND, I
>>>>>>> dont expect that it would work.
>>>>>>>
>>>>>>> Thanks,
>>>>>>> ~preetham
>>>>>>>
>>>>>>> --------------------------------------------------------------------- 
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>             
>>>>>> --------------------------
>>>>>> Grant Ingersoll
>>>>>>
>>>>>> Lucene Helpful Hints:
>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>           
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>         
>>>>
>>>>       
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>     
>>
>>   
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 10:31:18 2008
Return-Path: <java-user-return-37816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35398 invoked from network); 18 Dec 2008 10:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 10:31:18 -0000
Received: (qmail 23292 invoked by uid 500); 18 Dec 2008 10:31:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23260 invoked by uid 500); 18 Dec 2008 10:31:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23249 invoked by uid 99); 18 Dec 2008 10:31:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 02:31:22 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.248] (HELO an-out-0708.google.com) (209.85.132.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 10:31:02 +0000
Received: by an-out-0708.google.com with SMTP id b2so110155ana.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 02:30:40 -0800 (PST)
Received: by 10.100.126.15 with SMTP id y15mr1285513anc.123.1229596239955;
        Thu, 18 Dec 2008 02:30:39 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id c40sm4081238anc.48.2008.12.18.02.30.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 18 Dec 2008 02:30:38 -0800 (PST)
Message-Id: <1B7C9122-7283-44A7-822F-F25226F7814D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4949C076.4020903@teamware.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: addIndexesNoOptimize question
Date: Thu, 18 Dec 2008 05:30:37 -0500
References: <4949C076.4020903@teamware.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

This was an attempt on addIndexesNoOptimize's part to "respect" the  
maxMergeDocs (which prevents large segments from being merged) you had  
set on IndexWriter.

However, the check was too pedantic, and was removed as of 2.4, under  
this issue:

     https://issues.apache.org/jira/browse/LUCENE-1254

Mike

Antony Bowesman wrote:

> The javadocs state
>
> "This requires ... and the upper bound* of those segment doc counts  
> not exceed maxMergeDocs."
>
> Can one of the gurus please explain what that means and what needs  
> to be done to find out whether an index being merged fits that  
> criteria.
>
> Thanks
> Antony
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 11:30:49 2008
Return-Path: <java-user-return-37817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66610 invoked from network); 18 Dec 2008 11:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 11:30:49 -0000
Received: (qmail 9274 invoked by uid 500); 18 Dec 2008 11:30:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9232 invoked by uid 500); 18 Dec 2008 11:30:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9221 invoked by uid 99); 18 Dec 2008 11:30:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 03:30:51 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.84.226] (HELO smtp123.mail.mud.yahoo.com) (209.191.84.226)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 18 Dec 2008 11:30:27 +0000
Received: (qmail 76244 invoked from network); 18 Dec 2008 11:30:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=d+9RDKo7gg24e1RJOaWMTuYhEXudF9UuvkCPSxGPUJ2p2GZQ8ZK0UdKf8pBQ964XCGEiggEoxBDmUSDs7GMlPAMHaHuqo2UPcYQlggR3nkoAVOStN3kf2m4W72F6PsZK1oEtHLJsrWY02jzV64c78AasysMlGo8hEuxmffFdR7g=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp123.mail.mud.yahoo.com with SMTP; 18 Dec 2008 11:30:04 -0000
X-YMail-OSG: qEny1ssVM1lB.pyfdyI3G4bb3Vs2idrZitROZOAG1PWvXxMeQCbuDeQdT0Ofxknx2nI30XN5LvYypjVRpp5Rr5EMqIDTrUItA_3SuAq5hpp3JAWemQzZgmu2GW0E_mJUQ69kqN_MVrhJHTxwwlv9DdhBINSOfWQ2CzwQdaptVBkwRXRmeXVN9osnP5oD
X-Yahoo-Newman-Property: ymail-3
Message-ID: <00d701c96103$f97154c0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <006901c96036$5eb4d6a0$710bc30a@sv.us.sonicwall.com> <8c4e68610812180203o5117700biaee23d0abc6ed745@mail.gmail.com>
Subject: Re: IndexReader delete
Date: Thu, 18 Dec 2008 17:00:02 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I am planning to keep indexing and searching in a single process and expose 
the search functionality as a service.
In any case, i want the deletion to be done by reader, so that it could be 
reflected immediately in search. If it is done by writer, then i need to 
commit the changes, reopen the searcher, do warmup and perform the search 
operation. This will delay the search process.

When user deletes a record from the web ui, the record should get deleted 
and the page should get reflected immediately. I want to delete the record 
by reader and not by writer.

Regards
Ganesh


----- Original Message ----- 
From: "Ian Lea" <ian.lea@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Thursday, December 18, 2008 3:33 PM
Subject: Re: IndexReader delete


> Well, if the indexing is happening in a separate process then that
> will have locked the index and you won't be able to delete by reader
> in your search process.  I'd suggest passing the deletions to the
> indexer process.  In my experience everything works smoother when all
> index modifications happen in one process.
>
>
> --
> Ian.
>
>
> On Wed, Dec 17, 2008 at 10:58 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>> When i perform a delete, i am getting the following exception
>>
>> org.apache.lucene.store.LockObtainFailedException: Lock obtain timed out:
>> SimpleFSLock@/<path>
>>        org.apache.lucene.store.Lock.obtain(Lock.java:85)
>>
>> 
>> org.apache.lucene.index.DirectoryIndexReader.acquireWriteLock(DirectoryIndexReader.java:303)
>>
>>  org.apache.lucene.index.IndexReader.deleteDocument(IndexReader.java:837)
>>
>> Indexing is done by separate process and search is performed from web ui. 
>> If
>> the DB is locked by indexing app then the records will not be deleted 
>> using
>> reader?
>>
>> I want the deletion to be performed by Reader, so that it will get 
>> reflected
>> in the results immediately.
>>
>> Regards
>> Ganesh
>>
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 12:06:02 2008
Return-Path: <java-user-return-37818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55659 invoked from network); 18 Dec 2008 12:06:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 12:06:01 -0000
Received: (qmail 60953 invoked by uid 500); 18 Dec 2008 12:06:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60918 invoked by uid 500); 18 Dec 2008 12:06:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60906 invoked by uid 99); 18 Dec 2008 12:06:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 04:06:07 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 12:05:45 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 66BC187090
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 04:05:24 -0800 (PST)
Message-Id: <BC7F8681-4A4E-4CDC-95AA-A0D665548AD4@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <5d53d5770812170512t50f268e2i142bc60c8cc431e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Persian (Farsi) Language Analyzer
Date: Thu, 18 Dec 2008 07:05:23 -0500
References: <5d53d5770812170512t50f268e2i142bc60c8cc431e@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I don't know of any.  I'd google for "Persian Lucene" or "Farsi  
Lucene".  When I did that, I did see some researchers who did some  
experiments w/ Lucene and Persian.

On Dec 17, 2008, at 8:12 AM, Ian Vink wrote:

> I have ported the Java version of the Arabic analyzer recently  
> committed to
> Lucene.Net
>
> Is there any work been done on a Farsi Analyzer (Persian Language)
>
> Thanks,
> Ian

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 12:07:07 2008
Return-Path: <java-user-return-37819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59311 invoked from network); 18 Dec 2008 12:07:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 12:07:06 -0000
Received: (qmail 66532 invoked by uid 500); 18 Dec 2008 12:07:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66502 invoked by uid 500); 18 Dec 2008 12:07:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66491 invoked by uid 99); 18 Dec 2008 12:07:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 04:07:12 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 12:06:52 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 52D331FCA6
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 04:06:31 -0800 (PST)
Message-Id: <2B34A5AF-2850-47D9-897C-513E792E6B11@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170812170856n3bb40756o9b7af42ba3ec9bd4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Order of fields returned by Document.getFields()
Date: Thu, 18 Dec 2008 07:06:30 -0500
References: <DB201A57A2CA49D2860FDA4AF27A9F24@VujaDe> <c68e39170812170707g57952697m4f193f9676681f8a@mail.gmail.com> <5470A85DDE6146FDB7E81AC97DEF7603@VujaDe> <c68e39170812170856n3bb40756o9b7af42ba3ec9bd4@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 17, 2008, at 11:56 AM, Yonik Seeley wrote:

> On Wed, Dec 17, 2008 at 10:32 AM, Patrick Johnstone
> <pjohnstone@dejavunet.net> wrote:
>> As I said in the original email, my issue is that I don't
>> think Lucene is returning the fields in the original order
>> anymore.
>
> Hmmm, you're right.
>
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ
> states "
>  What is the order of fields returned by Document.fields()?
>  Fields are returned in the same order they were added to the  
> document.
> "
>
> Multiple values for a single field name should always be returned in
> the same order,
> but should we (continue to) make the guarantee about fields of
> different names?  Is anyone relying on that?

Patrick is.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 12:14:58 2008
Return-Path: <java-user-return-37820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95052 invoked from network); 18 Dec 2008 12:14:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 12:14:58 -0000
Received: (qmail 82333 invoked by uid 500); 18 Dec 2008 12:15:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82294 invoked by uid 500); 18 Dec 2008 12:15:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82203 invoked by uid 99); 18 Dec 2008 12:15:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 04:15:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of max@artsalliancelabs.com designates 66.92.91.130 as permitted sender)
Received: from [66.92.91.130] (HELO artsalliancelabs.com) (66.92.91.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 12:14:37 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: double metaphone for misspellings
Date: Thu, 18 Dec 2008 07:14:12 -0500
Message-ID: <E9DD5BE59E84CA4E87AE0E5E6F1B8B125B8181@sbsrv.AALabs.local>
In-Reply-To: <4949E346.8000406@nuix.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: double metaphone for misspellings
thread-index: Aclg08bkRHWn2g77R6+zyL4AqcW8cAANeALw
References: <6C5C1804772DB944BA88A0DC48D338DA04BA6BBD@dct-mail.sanjose.telcontar.com> <4949E346.8000406@nuix.com>
From: "Max Metral" <max@artsalliancelabs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Somehow I seem to have missed (and can't find) your original mail, but
it seems like you're asking about using double metaphone for place
names.  We've done this on our site (http://boston.povo.com) for street
and place names, and I can't say we've been happy with the results.
We're toying with ngrams instead, but neither is "well tuned" to the
particular types of mistakes people seem to make for place names, and I
haven't really found or figured out something that is.

-----Original Message-----
From: Daniel Noll [mailto:daniel@nuix.com]=20
Sent: Thursday, December 18, 2008 12:45 AM
To: java-user@lucene.apache.org
Subject: Re: double metaphone for misspellings

Geoff Hendrey wrote:
> ((POINameType)name).getText().split("\\s"); //tokenize manually.
(gosh,
> I thought the analyser would do this)

The analyser does do this... but related to this, the Right Way to do it

in your case would be to write your own analyser specifically for that=20
field, and do all the metaphone magic in the analyser.

You probably want an analyser which chains onto the StandardAnalyzer and

adds an additional token filter to do the double metaphone stuff.=20
Writing a token filter isn't too hard, PorterStemFilter is a relatively=20
good example of doing something similar.

So you would end up with a DoubleMetaphoneFilter, which you could then=20
use with PerFieldAnalyzerWrapper to have it apply only to the fields you

use that for.

Daniel


--=20
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 13:11:49 2008
Return-Path: <java-user-return-37821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89237 invoked from network); 18 Dec 2008 13:11:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 13:11:48 -0000
Received: (qmail 64185 invoked by uid 500); 18 Dec 2008 13:11:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64154 invoked by uid 500); 18 Dec 2008 13:11:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64143 invoked by uid 99); 18 Dec 2008 13:11:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 05:11:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 13:11:32 +0000
Received: by rv-out-0506.google.com with SMTP id f6so489749rvb.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 05:11:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=GIdcTkYZEgaIEGKo0ebEvCCgLbLJwR/IWLzFuq3Obhs=;
        b=uXgbVt6ovniZIuN/pF9rrZsSqtG/uPK6B7D49W4P916GaqX0FxV0cABNHmqXcfvTot
         OM8Ho+SLjNWbiEQ+Cx34PjQsZhZ/krbM2H/6Yy6f7S7MAyb11m5MRuc8BKCgvZWZtjW3
         wcWd3R8Io9snQaXenjjbKPPwwfgCduFy+FY9I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=eN5FhpB2+SjlDAlI8DdChf+ILNCInL/X7pXoDXv7awwJCxwMUTLDLnX3g4GIAMCfEt
         gDg0a56tObQKOP8h6RfTSz3KYCwLDcUJ6Lnrt+LYOkgu8AnHBBmlirpWAcidflRzPABU
         x9e/yaODsvF+f39P44sZ21Rqkfj9tghXtG/fQ=
Received: by 10.141.75.17 with SMTP id c17mr982697rvl.169.1229605870692;
        Thu, 18 Dec 2008 05:11:10 -0800 (PST)
Received: by 10.140.208.15 with HTTP; Thu, 18 Dec 2008 05:11:10 -0800 (PST)
Message-ID: <bf1404350812180511i6e41ed65h69d40fd5da8931c8@mail.gmail.com>
Date: Thu, 18 Dec 2008 08:11:10 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <8c4e68610812180148p7a11ecdaw483377a16b27f891@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17252_5350160.1229605870683"
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
	 <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
	 <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
	 <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>
	 <8c4e68610811191258i6ce8a777g6f7687bd7fcfd95d@mail.gmail.com>
	 <bf1404350811191322h39e808d3x5e1ae1157cf3e1ad@mail.gmail.com>
	 <359a92830811191428hea3608dt95cc54aa26052862@mail.gmail.com>
	 <bf1404350812171215m4b41ff6dl46bf22890a6fd56@mail.gmail.com>
	 <8c4e68610812180148p7a11ecdaw483377a16b27f891@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17252_5350160.1229605870683
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What I am doing is this:
<code>
            Sort sort = new Sort();
            sort.setSort("year", true);
            hits = searcher.search(pquery,sort);
</code>

How I must put my code to sort first by date an then by score ???
Greetings
Ariel


On Thu, Dec 18, 2008 at 4:48 AM, Ian Lea <ian.lea@gmail.com> wrote:

> Lucene lets you sort by multiple fields, including score.  See the
> javadocs for Sort and SortField, specifically SortField.SCORE.
>
>
> --
> Ian.
>
> On Wed, Dec 17, 2008 at 8:15 PM, Ariel <isaacrc82@gmail.com> wrote:
> > Hi:
> > This solution have a problem.
> > the results are sorted bye the year criteria but I need that after sort
> by
> > year criteria it sort by the scoring criteria two.
> > How can I do this ???
> >
> > I hope you can help me.
> > Greetings
> > Ariel
> >
> > On Wed, Nov 19, 2008 at 5:28 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
> >
> >> Well, MultiSearcher is just a Searcher, so you have available
> >> all of the search methods on Searcher. One of which is:
> >>
> >> search
> >>
> >> public TopFieldDocs
> >>
> >>
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/TopFieldDocs.html>
> >> *search*(Query
> >> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Query.html>
> >> query,
> >>                           Filter
> >> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Filter.html>
> >> filter,
> >>                           int n,
> >>                           Sort
> >> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Sort.html>
> >> sort)
> >>                    throws IOException
> >> <http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>
> >>
> >> Expert: Low-level search implementation with arbitrary sorting. Finds
> the
> >> top n hits for query, applying filter if non-null, and sorting the hits
> by
> >> the criteria in sort.
> >>
> >>
> >> Best
> >> Erick
> >>
> >>
> >> On Wed, Nov 19, 2008 at 4:22 PM, Ariel <isaacrc82@gmail.com> wrote:
> >>
> >> > Well, this is what I am doing:
> >> >
> >> > queryString="year:[2003 TO 2005]"
> >> > [CODE]
> >> >    Query pquery = null;
> >> >    Hits hits = null;
> >> >    Analyzer analyzer = null;
> >> >    analyzer = new SnowballAnalyzer("English");
> >> >    try {
> >> >        pquery = MultiFieldQueryParser.parse(new String[] {queryString,
> >> > queryString}, new String[] {"title", "content"}, analyzer); //analyzer
> >> >    } catch (ParseException e1) {
> >> >        e1.printStackTrace();
> >> >    }
> >> >    MultiSearcher searcher = (MultiSearcher) searcherCache.get(name);
> >> >
> >> >    try {
> >> >        hits = searcher.search(pquery);
> >> >    } catch (IOException e1) {
> >> >        e1.printStackTrace();
> >> >    }
> >> > [/CODE]
> >> >
> >> > I don't know the methods that include sorting. I have made the sorting
> by
> >> > the score criteria so far, I don-t know how to change it to the year
> >> field
> >> > criteria.
> >> > As you can see, I am using a multisearcher because I have several
> >> indexes.
> >> >
> >> > I hope you can help me.
> >> > Regards
> >> > Thanks in advance
> >> > Ariel
> >> >
> >> >
> >> >
> >> > On Wed, Nov 19, 2008 at 3:58 PM, Ian Lea <ian.lea@gmail.com> wrote:
> >> >
> >> > > Are you using one of the search methods that includes sorting?  If
> >> > > not, then do.  If you are, then you need to tell us exactly what you
> >> > > are doing and exactly what you reckon is going wrong.
> >> > >
> >> > >
> >> > > --
> >> > > Ian.
> >> > >
> >> > >
> >> > > On Wed, Nov 19, 2008 at 6:23 PM, Ariel <isaacrc82@gmail.com> wrote:
> >> > > > it is supposed lucene make a lexicocraphic sorting but this is not
> >> > > hapening,
> >> > > > Could you tell me what I'm doing wrong ?
> >> > > > I hope you can help me.
> >> > > > Regards
> >> > > >
> >> > > > On Wed, Nov 19, 2008 at 11:56 AM, Ariel <isaacrc82@gmail.com>
> wrote:
> >> > > >
> >> > > >> Thanks, that was very helpful, but I have a question when I make
> the
> >> > > >> searches it does not sort the results according to the range, for
> >> > > example:
> >> > > >> year: [2003 TO 2008] in the first page 2003 documents are showed,
> in
> >> > the
> >> > > >> second 2005 documents, in the third page 2004 documents, I don't
> see
> >> > any
> >> > > >> sort criteria.
> >> > > >> How could I fix that problem ???
> >> > > >> Greetings
> >> > > >> Ariel
> >> > > >>
> >> > > >>
> >> > > >> On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com>
> >> wrote:
> >> > > >>
> >> > > >>> Hi - sounds like you need a range query.
> >> > > >>>
> >> > > >>>
> >> > > >>>
> >> > >
> >> >
> >>
> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
> >> > > >>>
> >> > > >>>
> >> > > >>> --
> >> > > >>> Ian.
> >> > > >>>
> >> > > >>>
> >> > > >>> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com>
> >> wrote:
> >> > > >>> > Hi everybody:
> >> > > >>> >
> >> > > >>> > I need to make search with lucene 2.3.2, taking in account the
> >> > dates,
> >> > > >>> > previously when I build the index I create a date field where
> I
> >> > > stored
> >> > > >>> the
> >> > > >>> > year in which the document was created, at the search moment I
> >> > would
> >> > > >>> like to
> >> > > >>> > retrieve documents that have been created before a Year or
> after
> >> a
> >> > > Year,
> >> > > >>> for
> >> > > >>> > example documents before 2002 year o after 2003 year.
> >> > > >>> > It is possible to do that with lucene ???
> >> > > >>> > Regards
> >> > > >>> > Ariel
> >> > > >>> >
> >> > > >>>
> >> > > >>>
> >> ---------------------------------------------------------------------
> >> > > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > >>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >> > > >>>
> >> > > >>>
> >> > > >>
> >> > > >
> >> > >
> >> > >
> ---------------------------------------------------------------------
> >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> > >
> >> > >
> >> >
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17252_5350160.1229605870683--

From java-user-return-37822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 13:19:48 2008
Return-Path: <java-user-return-37822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4584 invoked from network); 18 Dec 2008 13:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 13:19:48 -0000
Received: (qmail 79663 invoked by uid 500); 18 Dec 2008 13:19:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79635 invoked by uid 500); 18 Dec 2008 13:19:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79624 invoked by uid 99); 18 Dec 2008 13:19:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 05:19:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 13:19:33 +0000
Received: by yw-out-2324.google.com with SMTP id 3so134736ywj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 05:19:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=booSaahCdBWwdMm52jwH0O8jri3fS1pmuUPuKQRWZNg=;
        b=MvMU+3TYiLV4PfrgwrP1oTgUcV7+B4ebERjDuWgSo/zOg2zgBGinLVwe21yj+yogXh
         vfmt6TW0lw9f5Q+k5TWkaOVdxkvGP47k8wR+pRn0/aebIQuoGOUe68KvLP139rYR+VEe
         lxwrRe0sgM3IjMhBPEQa/VcKlC9EmWY9r9cxs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=mDf3Dbb5phWByyWin0L3NU2Psemnf+ubAZI3cgy3uCAEJYRYktBFqfhBfOVUCUtclC
         5cm4TevAkvl3qnynsjOwfPwDaqIVVUXsOqjxcmk+VYZJ+Op+5YK0dBRmjnwN7nZXA0il
         329gCCu/jZ3but8FOZZwwoi7tnkR5pekDptgE=
Received: by 10.90.33.15 with SMTP id g15mr1061349agg.33.1229606350951;
        Thu, 18 Dec 2008 05:19:10 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Thu, 18 Dec 2008 05:19:10 -0800 (PST)
Message-ID: <359a92830812180519i5ed550bct8e1bbd4b37cb598@mail.gmail.com>
Date: Thu, 18 Dec 2008 08:19:10 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
In-Reply-To: <494A1FE2.8010101@cisco.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23587_25952947.1229606350890"
References: <494894D2.9010901@cisco.com>
	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>
	 <49490F4B.1030607@cisco.com>
	 <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>
	 <49491EED.4070403@cisco.com>
	 <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com>
	 <4949D6D6.7000402@cisco.com> <494A1FE2.8010101@cisco.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23587_25952947.1229606350890
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You will be stunned at how easy it is. The merging code should be
a dozen lines (and that only if you are merging 6 or so indexes)....

See IndexWriter.addIndexes or
IndexWriter.addIndexesNoOptimize

Best
Erick

On Thu, Dec 18, 2008 at 5:03 AM, Preetham Kajekar <preetham@cisco.com>wrote:

> Hi,
> I tried out a single IndexWriter used by two threads to index different
> fields. It is slower than using two separate IndexWriters. These are my
> findings
>
> All Fields (9) using 1 IndexWriter 1 Thread - 38,000 object per sec
> 5 Fields       using 1 IndexWriter 1 Thread - 62,000 object per sec
> All Fields (9) using 1 IndexWriter 2 Thread - 29,000 object per sec
> All Fields (9) using 2 IndexWriter 2 Thread - 55,000 object per sec
>
> So, it looks like I will have figure how to combine results of multiple
> indexes.
>
> Thanks,
> ~preetham
>
>
> Preetham Kajekar wrote:
>
>> Thanks Erick and Michael.
>> I will try out these suggestions and post my findings.
>>
>> ~preetham
>>
>> Erick Erickson wrote:
>>
>>> Well, maybe if I'd read the original post more carefully I'd have figured
>>> that out,
>>> sorry 'bout that.
>>>
>>> I *think* I remember reading somewhere on the email lists that your
>>> indexing
>>> speed goes up pretty linearly as the number of indexing tasks approaches
>>> the number of CPUs. Are you, perhaps, on a dual-core machine? But do
>>> search
>>> the mail archives because my memory may not be accurate.
>>>
>>> You can easily combine indexes by IndexWriter.addIndexes BTW. Personally
>>> I prefer fewer indexes if you can get away with it. But I'd only try this
>>> after
>>> Michael's suggestion of using multiple threads on a single underlying
>>> writer.
>>>
>>> You could even think about using N machines to create M fragments then
>>> combining them all afterwards if your logs are static enough to make that
>>> reasonable. Combining indexes may take a while though.....
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar <preetham@cisco.com
>>> >wrote:
>>>
>>>
>>>
>>>> Hi Erick,
>>>> Thanks for the response. Replies inline.
>>>>
>>>> Erick Erickson wrote:
>>>>
>>>>
>>>>
>>>>> The very first question is always "are you opening a new searcher
>>>>> each time you query"? But you've looked at the Wiki so I assume not.
>>>>> This question is closely tied to what kind of latency you can tolerate.
>>>>>
>>>>> A few more details, please. What's slow? Queries? Indexing?
>>>>>
>>>>>
>>>>>
>>>>>
>>>> Indexing. Again, it is not slow. It is just faster with two separate
>>>> indexers in two threads.
>>>>
>>>>
>>>>
>>>>> How slow? 100ms? 100s? What are your target times and
>>>>> what are you seeing?
>>>>>
>>>>>
>>>>>
>>>>>
>>>> With a single indexer in a single thread, I can index about 20,000 event
>>>> objects per second. With 2 thread and 2 indexers, it is close to 50,000.
>>>> :-)
>>>>
>>>>
>>>>
>>>>> How big is your index? 100M? 100G? What kind of VM
>>>>> parameters are you specifying?
>>>>>
>>>>>
>>>>>
>>>>>
>>>> The index will have about 20mil entries. The size of the index lands up
>>>> being about 500M.
>>>> I start the VM with 1G of heap. No other options for GC etc is used.
>>>>
>>>>
>>>>
>>>>> As an aside, do note that there's no requirement in Lucene that
>>>>> each document have the same fields, so it's unclear why you
>>>>> need two indexes, but perhaps some of the answers to the above
>>>>> will help us understand.
>>>>>
>>>>>
>>>>>
>>>>>
>>>> Like I mentioned, Lucene does the job much faster with two indexes.
>>>>
>>>>
>>>>
>>>>> Also, be very very careful what you measure when you measure
>>>>> queries. You absolutely *have* to put some instrumentation in
>>>>> the code since "slow queries" can result from things other than
>>>>> searching. For instance, iterating over a Hits object for 100s of
>>>>> documents....
>>>>>
>>>>>
>>>>>
>>>>>
>>>> The Query speeds are much faster than what I need :-) So no complains
>>>> here.
>>>>
>>>>
>>>>
>>>>> Show the code, man <G>!
>>>>>
>>>>>
>>>>>
>>>>>
>>>> Code below. EvIndexer is the base class. There are two subclasses which
>>>> implement addEvFieldsToIndexDoc() (template pattern) to add different
>>>> fields
>>>> to the index. that code is also pasted below
>>>>
>>>> --Code ---
>>>>
>>>> BaseClass
>>>>
>>>>  public EvIndexer(String indexName) throws Exception {
>>>>      this.name = indexName;
>>>>      a = new KeywordAnalyzer();
>>>>      INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,
>>>> "./index/");
>>>>      FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH +
>>>> File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
>>>>      indexWriter = new IndexWriter(directory, a,
>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>> //indexWriter.setUseCompoundFile(false);
>>>>      //indexWriter.setRAMBufferSizeMB(256);
>>>>        }
>>>>      /** Method implemented by extending classes to add data into the
>>>> index document for the
>>>>   *  given event
>>>>   *
>>>>   * @param d
>>>>   */
>>>>  protected abstract void addEvFieldsToIndexDoc(Document d, Ev event);
>>>>    public void addToIndex(Ev ev) throws Exception {
>>>>      noOfEventsIndexed++;
>>>>      Document d = new Document();             addEvFieldsToIndexDoc(d,
>>>> ev);
>>>>      indexWriter.addDocument(d);
>>>>            if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
>>>>          System.out.println(name + " indexed " +
>>>> NumberFormat.getInstance().format(noOfEventsIndexed) + " Commiting
>>>> them");
>>>>          commit();
>>>>      }                   }
>>>>
>>>> DerievdClass1
>>>>  protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>>>>      //noOfEventsIndexed++;
>>>>            Field id = new Field(EV_ID, Long.toString(ev.getId()),
>>>> Field.Store.YES, Field.Index.NO);
>>>>      Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),
>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>      Field type = new Field(EV_TYPE,
>>>> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
>>>> Field.Index.NOT_ANALYZED);
>>>>      Field pri = new Field(EV_PRI, Short.toString(ev.getPriority()) ,
>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>      Field time = new Field(EV_TIME, getHexString(ev.getRecvTime()) ,
>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>      d.add(id);
>>>>      d.add(src);
>>>>      d.add(type);
>>>>      d.add(pri);
>>>>      d.add(time);
>>>>      //noOfFieldsIndexed +=  4;
>>>>                  }
>>>>
>>>>
>>>>
>>>>
>>>> Thanks for the support.
>>>> ~preetham
>>>>
>>>>
>>>>  Best
>>>>
>>>>
>>>>> Erick
>>>>>
>>>>>
>>>>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <preetham@cisco.com
>>>>>
>>>>>
>>>>>> wrote:
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> Hi Grant,
>>>>>> Thanks four response. Replies inline.
>>>>>>
>>>>>> Grant Ingersoll wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>>>>
>>>>>>>  Hi,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>>>>>
>>>>>>>> I am trying to index a Java object which has about 10 fields (like
>>>>>>>> id,
>>>>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>>>>> In order to speed up indexing, I figured that having two separate
>>>>>>>> indexers, each of them indexing different set of fields works great.
>>>>>>>> So
>>>>>>>> I
>>>>>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> Can you explain this a bit more?  Are those two fields really large
>>>>>>> org
>>>>>>> something?  How are you obtaining them?  How are you correlating the
>>>>>>> documents between the two indexes?  Did you actually try a single
>>>>>>> index
>>>>>>> and
>>>>>>> it was too slow?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> I have a java object which has about 10 fields. However, the fields
>>>>>> are
>>>>>> not
>>>>>> fixed. The java object is essentially a representation of Syslogs from
>>>>>> network devices. So different syslogs have different fields. Each
>>>>>> field
>>>>>> has
>>>>>> a unique id and a value (mostly numeric types, so i convert it to
>>>>>> string).
>>>>>> There are some fixed fields. So the object is a list of fields which
>>>>>> is
>>>>>> produced by a parser.
>>>>>> I am trying to index using two indexers in two separate threads- one
>>>>>> for
>>>>>> fixed and another for the non-fixed fields. Except for a unique id, I
>>>>>> do
>>>>>> not
>>>>>> store the fields in Lucene - i just index them. From the index, i get
>>>>>> the
>>>>>> unique id which is all I care about. (the objects are stored elsewhere
>>>>>> and
>>>>>> can be looked up based on this unique id).
>>>>>> I did try using a single indexer, but things were quite slow. Getting
>>>>>> high
>>>>>> throughput is crucial and having two indexers seemed to do very well.
>>>>>> (more
>>>>>> than twice as fast)
>>>>>>
>>>>>> Further, the index will never be modified and I can have just one
>>>>>> thread
>>>>>> writing to the index. If there are any other performance tips would be
>>>>>> very
>>>>>> helpful. I have already looked at the wiki link regarding performance
>>>>>> and
>>>>>> using some of them.
>>>>>>
>>>>>> Thanks,
>>>>>> ~preetham
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Now, I want to have boolean AND query's looking for values in both
>>>>>>>
>>>>>>>
>>>>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two
>>>>>>>> separate
>>>>>>>> indexes. Would using the MultiIndexReader help ? Since I am doing an
>>>>>>>> AND, I
>>>>>>>> dont expect that it would work.
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>> ~preetham
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> --------------------------
>>>>>>> Grant Ingersoll
>>>>>>>
>>>>>>> Lucene Helpful Hints:
>>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23587_25952947.1229606350890--

From java-user-return-37823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 13:22:20 2008
Return-Path: <java-user-return-37823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41336 invoked from network); 18 Dec 2008 13:22:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 13:22:16 -0000
Received: (qmail 83357 invoked by uid 500); 18 Dec 2008 13:22:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83328 invoked by uid 500); 18 Dec 2008 13:22:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83317 invoked by uid 99); 18 Dec 2008 13:22:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 05:22:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.125.145.37] (HELO mercury.propylon.com) (194.125.145.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 13:21:58 +0000
Received: from [213.94.211.166] (helo=[192.168.213.119])
	by mercury.propylon.com with esmtp (Exim 4.50)
	id 1LDIo9-0003DJ-MK
	for java-user@lucene.apache.org; Thu, 18 Dec 2008 13:21:25 +0000
Message-ID: <494A4E3C.7060101@propylon.com>
Date: Thu, 18 Dec 2008 13:21:00 +0000
From: John Byrne <john.byrne@propylon.com>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>	 <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>	 <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>	 <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>	 <8c4e68610811191258i6ce8a777g6f7687bd7fcfd95d@mail.gmail.com>	 <bf1404350811191322h39e808d3x5e1ae1157cf3e1ad@mail.gmail.com>	 <359a92830811191428hea3608dt95cc54aa26052862@mail.gmail.com>	 <bf1404350812171215m4b41ff6dl46bf22890a6fd56@mail.gmail.com>	 <8c4e68610812180148p7a11ecdaw483377a16b27f891@mail.gmail.com> <bf1404350812180511i6e41ed65h69d40fd5da8931c8@mail.gmail.com>
In-Reply-To: <bf1404350812180511i6e41ed65h69d40fd5da8931c8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 213.94.211.166
X-SA-Exim-Mail-From: john.byrne@propylon.com
Subject: Re: How to search documents taking in account the dates ???
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on 
	mercury.propylon.com
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Thu, 03 Mar 2005 10:44:12 +0100)
X-SA-Exim-Scanned: Yes (on mercury.propylon.com)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.7 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.3

Hi,

I think this should do it...

<code>

    SortField dateSortField = new SortField("year", false);    //the 
second argument reverses the sort direction if set to true
    SortField scoreSortField= new SortField(null, SortField.SCORE, 
false);     // value of null for field, since 'score' is not really a field
    SortField[] allSortFields= new SortField[] {dateSortField, 
scoreSortField};   //add any number of SortFieldto an array
    Sort sort = new Sort(allSortFields);   //Use the Sort(SortField[] 
fields)  constructor, then use that Sort object when you search.

</code>

-John


Ariel wrote:
> What I am doing is this:
> <code>
>             Sort sort = new Sort();
>             sort.setSort("year", true);
>             hits = searcher.search(pquery,sort);
> </code>
>
> How I must put my code to sort first by date an then by score ???
> Greetings
> Ariel
>
>
> On Thu, Dec 18, 2008 at 4:48 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
>   
>> Lucene lets you sort by multiple fields, including score.  See the
>> javadocs for Sort and SortField, specifically SortField.SCORE.
>>
>>
>> --
>> Ian.
>>
>> On Wed, Dec 17, 2008 at 8:15 PM, Ariel <isaacrc82@gmail.com> wrote:
>>     
>>> Hi:
>>> This solution have a problem.
>>> the results are sorted bye the year criteria but I need that after sort
>>>       
>> by
>>     
>>> year criteria it sort by the scoring criteria two.
>>> How can I do this ???
>>>
>>> I hope you can help me.
>>> Greetings
>>> Ariel
>>>
>>> On Wed, Nov 19, 2008 at 5:28 PM, Erick Erickson <erickerickson@gmail.com
>>> wrote:
>>>
>>>       
>>>> Well, MultiSearcher is just a Searcher, so you have available
>>>> all of the search methods on Searcher. One of which is:
>>>>
>>>> search
>>>>
>>>> public TopFieldDocs
>>>>
>>>>
>>>>         
>> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/TopFieldDocs.html>
>>     
>>>> *search*(Query
>>>> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Query.html>
>>>> query,
>>>>                           Filter
>>>> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Filter.html>
>>>> filter,
>>>>                           int n,
>>>>                           Sort
>>>> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Sort.html>
>>>> sort)
>>>>                    throws IOException
>>>> <http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>
>>>>
>>>> Expert: Low-level search implementation with arbitrary sorting. Finds
>>>>         
>> the
>>     
>>>> top n hits for query, applying filter if non-null, and sorting the hits
>>>>         
>> by
>>     
>>>> the criteria in sort.
>>>>
>>>>
>>>> Best
>>>> Erick
>>>>
>>>>
>>>> On Wed, Nov 19, 2008 at 4:22 PM, Ariel <isaacrc82@gmail.com> wrote:
>>>>
>>>>         
>>>>> Well, this is what I am doing:
>>>>>
>>>>> queryString="year:[2003 TO 2005]"
>>>>> [CODE]
>>>>>    Query pquery = null;
>>>>>    Hits hits = null;
>>>>>    Analyzer analyzer = null;
>>>>>    analyzer = new SnowballAnalyzer("English");
>>>>>    try {
>>>>>        pquery = MultiFieldQueryParser.parse(new String[] {queryString,
>>>>> queryString}, new String[] {"title", "content"}, analyzer); //analyzer
>>>>>    } catch (ParseException e1) {
>>>>>        e1.printStackTrace();
>>>>>    }
>>>>>    MultiSearcher searcher = (MultiSearcher) searcherCache.get(name);
>>>>>
>>>>>    try {
>>>>>        hits = searcher.search(pquery);
>>>>>    } catch (IOException e1) {
>>>>>        e1.printStackTrace();
>>>>>    }
>>>>> [/CODE]
>>>>>
>>>>> I don't know the methods that include sorting. I have made the sorting
>>>>>           
>> by
>>     
>>>>> the score criteria so far, I don-t know how to change it to the year
>>>>>           
>>>> field
>>>>         
>>>>> criteria.
>>>>> As you can see, I am using a multisearcher because I have several
>>>>>           
>>>> indexes.
>>>>         
>>>>> I hope you can help me.
>>>>> Regards
>>>>> Thanks in advance
>>>>> Ariel
>>>>>
>>>>>
>>>>>
>>>>> On Wed, Nov 19, 2008 at 3:58 PM, Ian Lea <ian.lea@gmail.com> wrote:
>>>>>
>>>>>           
>>>>>> Are you using one of the search methods that includes sorting?  If
>>>>>> not, then do.  If you are, then you need to tell us exactly what you
>>>>>> are doing and exactly what you reckon is going wrong.
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Ian.
>>>>>>
>>>>>>
>>>>>> On Wed, Nov 19, 2008 at 6:23 PM, Ariel <isaacrc82@gmail.com> wrote:
>>>>>>             
>>>>>>> it is supposed lucene make a lexicocraphic sorting but this is not
>>>>>>>               
>>>>>> hapening,
>>>>>>             
>>>>>>> Could you tell me what I'm doing wrong ?
>>>>>>> I hope you can help me.
>>>>>>> Regards
>>>>>>>
>>>>>>> On Wed, Nov 19, 2008 at 11:56 AM, Ariel <isaacrc82@gmail.com>
>>>>>>>               
>> wrote:
>>     
>>>>>>>> Thanks, that was very helpful, but I have a question when I make
>>>>>>>>                 
>> the
>>     
>>>>>>>> searches it does not sort the results according to the range, for
>>>>>>>>                 
>>>>>> example:
>>>>>>             
>>>>>>>> year: [2003 TO 2008] in the first page 2003 documents are showed,
>>>>>>>>                 
>> in
>>     
>>>>> the
>>>>>           
>>>>>>>> second 2005 documents, in the third page 2004 documents, I don't
>>>>>>>>                 
>> see
>>     
>>>>> any
>>>>>           
>>>>>>>> sort criteria.
>>>>>>>> How could I fix that problem ???
>>>>>>>> Greetings
>>>>>>>> Ariel
>>>>>>>>
>>>>>>>>
>>>>>>>> On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com>
>>>>>>>>                 
>>>> wrote:
>>>>         
>>>>>>>>> Hi - sounds like you need a range query.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                   
>> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
>>     
>>>>>>>>> --
>>>>>>>>> Ian.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com>
>>>>>>>>>                   
>>>> wrote:
>>>>         
>>>>>>>>>> Hi everybody:
>>>>>>>>>>
>>>>>>>>>> I need to make search with lucene 2.3.2, taking in account the
>>>>>>>>>>                     
>>>>> dates,
>>>>>           
>>>>>>>>>> previously when I build the index I create a date field where
>>>>>>>>>>                     
>> I
>>     
>>>>>> stored
>>>>>>             
>>>>>>>>> the
>>>>>>>>>                   
>>>>>>>>>> year in which the document was created, at the search moment I
>>>>>>>>>>                     
>>>>> would
>>>>>           
>>>>>>>>> like to
>>>>>>>>>                   
>>>>>>>>>> retrieve documents that have been created before a Year or
>>>>>>>>>>                     
>> after
>>     
>>>> a
>>>>         
>>>>>> Year,
>>>>>>             
>>>>>>>>> for
>>>>>>>>>                   
>>>>>>>>>> example documents before 2002 year o after 2003 year.
>>>>>>>>>> It is possible to do that with lucene ???
>>>>>>>>>> Regards
>>>>>>>>>> Ariel
>>>>>>>>>>
>>>>>>>>>>                     
>>>>>>>>>                   
>>>> ---------------------------------------------------------------------
>>>>         
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>                   
>> java-user-help@lucene.apache.org
>>     
>>>>>>>>>                   
>>>>>>             
>> ---------------------------------------------------------------------
>>     
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>             
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.176 / Virus Database: 270.9.19/1854 - Release Date: 12/17/2008 7:21 PM
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 13:22:57 2008
Return-Path: <java-user-return-37824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56718 invoked from network); 18 Dec 2008 13:22:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 13:22:57 -0000
Received: (qmail 87099 invoked by uid 500); 18 Dec 2008 13:23:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87061 invoked by uid 500); 18 Dec 2008 13:23:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87048 invoked by uid 99); 18 Dec 2008 13:23:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 05:23:02 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 13:22:43 +0000
Received: by yw-out-2324.google.com with SMTP id 3so135150ywj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 05:22:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Fa4iJm8xcIYR6hup6OxLuMUHhnJ/poEPzpZ/COaUxJo=;
        b=I1LNGAZvEp1rsrj9LEXBu7deg24XAx3iXGrmsgXb6bKJKBE2aY2OlQgE0pYDz6/5fN
         z57bRxA9u+MaSI3rN8vunRMCs1/SZi4rZNRX82XZVyAlH3+IrkcX2GcaU6tt5a2ADmGw
         qNJybiiQf0J6wuDbEpOP1abLE5IPJxzxVVFw8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=DBeFDXJkUN+ql/mhaf6PB50lmlmzhxWTfMByFiOuZdKZGLpVZz7fMVzZEH6VrhHILF
         G5ubBhxnY8qujNDGxA9U80XgRWX7KGrmWP6AynpF7X1CZ0rOce1cMTGVBtXsEZLeFDep
         pG4SH8x+7wROob4/Snf8Crpqa54TU8rmOvVec=
Received: by 10.90.63.6 with SMTP id l6mr1057653aga.51.1229606542100;
        Thu, 18 Dec 2008 05:22:22 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Thu, 18 Dec 2008 05:22:21 -0800 (PST)
Message-ID: <359a92830812180522p3f7c7b00pf0082b8a7f54296@mail.gmail.com>
Date: Thu, 18 Dec 2008 08:22:21 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <bf1404350812180511i6e41ed65h69d40fd5da8931c8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23656_11901952.1229606542088"
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
	 <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
	 <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
	 <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>
	 <8c4e68610811191258i6ce8a777g6f7687bd7fcfd95d@mail.gmail.com>
	 <bf1404350811191322h39e808d3x5e1ae1157cf3e1ad@mail.gmail.com>
	 <359a92830811191428hea3608dt95cc54aa26052862@mail.gmail.com>
	 <bf1404350812171215m4b41ff6dl46bf22890a6fd56@mail.gmail.com>
	 <8c4e68610812180148p7a11ecdaw483377a16b27f891@mail.gmail.com>
	 <bf1404350812180511i6e41ed65h69d40fd5da8931c8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23656_11901952.1229606542088
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Use the setSort that takes an array of Sort objects...

On Thu, Dec 18, 2008 at 8:11 AM, Ariel <isaacrc82@gmail.com> wrote:

> What I am doing is this:
> <code>
>            Sort sort = new Sort();
>            sort.setSort("year", true);
>            hits = searcher.search(pquery,sort);
> </code>
>
> How I must put my code to sort first by date an then by score ???
> Greetings
> Ariel
>
>
> On Thu, Dec 18, 2008 at 4:48 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
> > Lucene lets you sort by multiple fields, including score.  See the
> > javadocs for Sort and SortField, specifically SortField.SCORE.
> >
> >
> > --
> > Ian.
> >
> > On Wed, Dec 17, 2008 at 8:15 PM, Ariel <isaacrc82@gmail.com> wrote:
> > > Hi:
> > > This solution have a problem.
> > > the results are sorted bye the year criteria but I need that after sort
> > by
> > > year criteria it sort by the scoring criteria two.
> > > How can I do this ???
> > >
> > > I hope you can help me.
> > > Greetings
> > > Ariel
> > >
> > > On Wed, Nov 19, 2008 at 5:28 PM, Erick Erickson <
> erickerickson@gmail.com
> > >wrote:
> > >
> > >> Well, MultiSearcher is just a Searcher, so you have available
> > >> all of the search methods on Searcher. One of which is:
> > >>
> > >> search
> > >>
> > >> public TopFieldDocs
> > >>
> > >>
> >
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/TopFieldDocs.html>
> > >> *search*(Query
> > >> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Query.html>
> > >> query,
> > >>                           Filter
> > >>
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Filter.html>
> > >> filter,
> > >>                           int n,
> > >>                           Sort
> > >> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Sort.html>
> > >> sort)
> > >>                    throws IOException
> > >> <http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>
> > >>
> > >> Expert: Low-level search implementation with arbitrary sorting. Finds
> > the
> > >> top n hits for query, applying filter if non-null, and sorting the
> hits
> > by
> > >> the criteria in sort.
> > >>
> > >>
> > >> Best
> > >> Erick
> > >>
> > >>
> > >> On Wed, Nov 19, 2008 at 4:22 PM, Ariel <isaacrc82@gmail.com> wrote:
> > >>
> > >> > Well, this is what I am doing:
> > >> >
> > >> > queryString="year:[2003 TO 2005]"
> > >> > [CODE]
> > >> >    Query pquery = null;
> > >> >    Hits hits = null;
> > >> >    Analyzer analyzer = null;
> > >> >    analyzer = new SnowballAnalyzer("English");
> > >> >    try {
> > >> >        pquery = MultiFieldQueryParser.parse(new String[]
> {queryString,
> > >> > queryString}, new String[] {"title", "content"}, analyzer);
> //analyzer
> > >> >    } catch (ParseException e1) {
> > >> >        e1.printStackTrace();
> > >> >    }
> > >> >    MultiSearcher searcher = (MultiSearcher) searcherCache.get(name);
> > >> >
> > >> >    try {
> > >> >        hits = searcher.search(pquery);
> > >> >    } catch (IOException e1) {
> > >> >        e1.printStackTrace();
> > >> >    }
> > >> > [/CODE]
> > >> >
> > >> > I don't know the methods that include sorting. I have made the
> sorting
> > by
> > >> > the score criteria so far, I don-t know how to change it to the year
> > >> field
> > >> > criteria.
> > >> > As you can see, I am using a multisearcher because I have several
> > >> indexes.
> > >> >
> > >> > I hope you can help me.
> > >> > Regards
> > >> > Thanks in advance
> > >> > Ariel
> > >> >
> > >> >
> > >> >
> > >> > On Wed, Nov 19, 2008 at 3:58 PM, Ian Lea <ian.lea@gmail.com> wrote:
> > >> >
> > >> > > Are you using one of the search methods that includes sorting?  If
> > >> > > not, then do.  If you are, then you need to tell us exactly what
> you
> > >> > > are doing and exactly what you reckon is going wrong.
> > >> > >
> > >> > >
> > >> > > --
> > >> > > Ian.
> > >> > >
> > >> > >
> > >> > > On Wed, Nov 19, 2008 at 6:23 PM, Ariel <isaacrc82@gmail.com>
> wrote:
> > >> > > > it is supposed lucene make a lexicocraphic sorting but this is
> not
> > >> > > hapening,
> > >> > > > Could you tell me what I'm doing wrong ?
> > >> > > > I hope you can help me.
> > >> > > > Regards
> > >> > > >
> > >> > > > On Wed, Nov 19, 2008 at 11:56 AM, Ariel <isaacrc82@gmail.com>
> > wrote:
> > >> > > >
> > >> > > >> Thanks, that was very helpful, but I have a question when I
> make
> > the
> > >> > > >> searches it does not sort the results according to the range,
> for
> > >> > > example:
> > >> > > >> year: [2003 TO 2008] in the first page 2003 documents are
> showed,
> > in
> > >> > the
> > >> > > >> second 2005 documents, in the third page 2004 documents, I
> don't
> > see
> > >> > any
> > >> > > >> sort criteria.
> > >> > > >> How could I fix that problem ???
> > >> > > >> Greetings
> > >> > > >> Ariel
> > >> > > >>
> > >> > > >>
> > >> > > >> On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com>
> > >> wrote:
> > >> > > >>
> > >> > > >>> Hi - sounds like you need a range query.
> > >> > > >>>
> > >> > > >>>
> > >> > > >>>
> > >> > >
> > >> >
> > >>
> >
> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
> > >> > > >>>
> > >> > > >>>
> > >> > > >>> --
> > >> > > >>> Ian.
> > >> > > >>>
> > >> > > >>>
> > >> > > >>> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com>
> > >> wrote:
> > >> > > >>> > Hi everybody:
> > >> > > >>> >
> > >> > > >>> > I need to make search with lucene 2.3.2, taking in account
> the
> > >> > dates,
> > >> > > >>> > previously when I build the index I create a date field
> where
> > I
> > >> > > stored
> > >> > > >>> the
> > >> > > >>> > year in which the document was created, at the search moment
> I
> > >> > would
> > >> > > >>> like to
> > >> > > >>> > retrieve documents that have been created before a Year or
> > after
> > >> a
> > >> > > Year,
> > >> > > >>> for
> > >> > > >>> > example documents before 2002 year o after 2003 year.
> > >> > > >>> > It is possible to do that with lucene ???
> > >> > > >>> > Regards
> > >> > > >>> > Ariel
> > >> > > >>> >
> > >> > > >>>
> > >> > > >>>
> > >> ---------------------------------------------------------------------
> > >> > > >>> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > >> > > >>> For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >> > > >>>
> > >> > > >>>
> > >> > > >>
> > >> > > >
> > >> > >
> > >> > >
> > ---------------------------------------------------------------------
> > >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >> > >
> > >> > >
> > >> >
> > >>
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_23656_11901952.1229606542088--

From java-user-return-37825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 14:26:51 2008
Return-Path: <java-user-return-37825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36418 invoked from network); 18 Dec 2008 14:26:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 14:26:51 -0000
Received: (qmail 85719 invoked by uid 500); 18 Dec 2008 14:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85698 invoked by uid 500); 18 Dec 2008 14:26:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85685 invoked by uid 99); 18 Dec 2008 14:26:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 06:26:56 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 14:26:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so522809rvb.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 06:26:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=TXY/fWAXJW1SI9iR/7oXlocCsgRw3MyQs9shyojt/Qw=;
        b=x8BKJcwMYC1vG70usv+9DVNvfreHFXW9rx/jTNCB6TtG8IpZeRmw6xCVrduFlc83UU
         oP4HgIrk2QWL0KCM0D2HC8Nic/5gNwd00zPFMM5JvvLVon19aixuk3DOlYaw0wy7RCyh
         r/ghf0thGa+rs8CPrSoX+3M4dyo2CJE2/MUZU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=AbX4UfIVH7VeRcoWip/p6GLNXN04qYexc+BT1zwdMrVbMkE4Kgp2mHk6SCI7h5GYdZ
         1RCB2u2PvQC25/CBArk+MVYhIMbg8Gxp+c5s9CzVYsCfx5mnD0YE6kSDylQokDGhT46v
         3+BzpN2SRGbOAx5X0kpMfOWy4YobaIV57bjr4=
Received: by 10.140.164.6 with SMTP id m6mr1012125rve.144.1229610376217;
        Thu, 18 Dec 2008 06:26:16 -0800 (PST)
Received: by 10.140.208.15 with HTTP; Thu, 18 Dec 2008 06:26:16 -0800 (PST)
Message-ID: <bf1404350812180626y28773332x4c86d92e80616953@mail.gmail.com>
Date: Thu, 18 Dec 2008 09:26:16 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <359a92830812180522p3f7c7b00pf0082b8a7f54296@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18061_2708239.1229610376203"
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
	 <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
	 <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>
	 <8c4e68610811191258i6ce8a777g6f7687bd7fcfd95d@mail.gmail.com>
	 <bf1404350811191322h39e808d3x5e1ae1157cf3e1ad@mail.gmail.com>
	 <359a92830811191428hea3608dt95cc54aa26052862@mail.gmail.com>
	 <bf1404350812171215m4b41ff6dl46bf22890a6fd56@mail.gmail.com>
	 <8c4e68610812180148p7a11ecdaw483377a16b27f891@mail.gmail.com>
	 <bf1404350812180511i6e41ed65h69d40fd5da8931c8@mail.gmail.com>
	 <359a92830812180522p3f7c7b00pf0082b8a7f54296@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18061_2708239.1229610376203
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you, it works very good.
Regards
Ariel

On Thu, Dec 18, 2008 at 8:22 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> Use the setSort that takes an array of Sort objects...
>
> On Thu, Dec 18, 2008 at 8:11 AM, Ariel <isaacrc82@gmail.com> wrote:
>
> > What I am doing is this:
> > <code>
> >            Sort sort = new Sort();
> >            sort.setSort("year", true);
> >            hits = searcher.search(pquery,sort);
> > </code>
> >
> > How I must put my code to sort first by date an then by score ???
> > Greetings
> > Ariel
> >
> >
> > On Thu, Dec 18, 2008 at 4:48 AM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> > > Lucene lets you sort by multiple fields, including score.  See the
> > > javadocs for Sort and SortField, specifically SortField.SCORE.
> > >
> > >
> > > --
> > > Ian.
> > >
> > > On Wed, Dec 17, 2008 at 8:15 PM, Ariel <isaacrc82@gmail.com> wrote:
> > > > Hi:
> > > > This solution have a problem.
> > > > the results are sorted bye the year criteria but I need that after
> sort
> > > by
> > > > year criteria it sort by the scoring criteria two.
> > > > How can I do this ???
> > > >
> > > > I hope you can help me.
> > > > Greetings
> > > > Ariel
> > > >
> > > > On Wed, Nov 19, 2008 at 5:28 PM, Erick Erickson <
> > erickerickson@gmail.com
> > > >wrote:
> > > >
> > > >> Well, MultiSearcher is just a Searcher, so you have available
> > > >> all of the search methods on Searcher. One of which is:
> > > >>
> > > >> search
> > > >>
> > > >> public TopFieldDocs
> > > >>
> > > >>
> > >
> >
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/TopFieldDocs.html>
> > > >> *search*(Query
> > > >>
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Query.html>
> > > >> query,
> > > >>                           Filter
> > > >>
> > <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Filter.html>
> > > >> filter,
> > > >>                           int n,
> > > >>                           Sort
> > > >>
> <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Sort.html>
> > > >> sort)
> > > >>                    throws IOException
> > > >> <http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>
> > > >>
> > > >> Expert: Low-level search implementation with arbitrary sorting.
> Finds
> > > the
> > > >> top n hits for query, applying filter if non-null, and sorting the
> > hits
> > > by
> > > >> the criteria in sort.
> > > >>
> > > >>
> > > >> Best
> > > >> Erick
> > > >>
> > > >>
> > > >> On Wed, Nov 19, 2008 at 4:22 PM, Ariel <isaacrc82@gmail.com> wrote:
> > > >>
> > > >> > Well, this is what I am doing:
> > > >> >
> > > >> > queryString="year:[2003 TO 2005]"
> > > >> > [CODE]
> > > >> >    Query pquery = null;
> > > >> >    Hits hits = null;
> > > >> >    Analyzer analyzer = null;
> > > >> >    analyzer = new SnowballAnalyzer("English");
> > > >> >    try {
> > > >> >        pquery = MultiFieldQueryParser.parse(new String[]
> > {queryString,
> > > >> > queryString}, new String[] {"title", "content"}, analyzer);
> > //analyzer
> > > >> >    } catch (ParseException e1) {
> > > >> >        e1.printStackTrace();
> > > >> >    }
> > > >> >    MultiSearcher searcher = (MultiSearcher)
> searcherCache.get(name);
> > > >> >
> > > >> >    try {
> > > >> >        hits = searcher.search(pquery);
> > > >> >    } catch (IOException e1) {
> > > >> >        e1.printStackTrace();
> > > >> >    }
> > > >> > [/CODE]
> > > >> >
> > > >> > I don't know the methods that include sorting. I have made the
> > sorting
> > > by
> > > >> > the score criteria so far, I don-t know how to change it to the
> year
> > > >> field
> > > >> > criteria.
> > > >> > As you can see, I am using a multisearcher because I have several
> > > >> indexes.
> > > >> >
> > > >> > I hope you can help me.
> > > >> > Regards
> > > >> > Thanks in advance
> > > >> > Ariel
> > > >> >
> > > >> >
> > > >> >
> > > >> > On Wed, Nov 19, 2008 at 3:58 PM, Ian Lea <ian.lea@gmail.com>
> wrote:
> > > >> >
> > > >> > > Are you using one of the search methods that includes sorting?
>  If
> > > >> > > not, then do.  If you are, then you need to tell us exactly what
> > you
> > > >> > > are doing and exactly what you reckon is going wrong.
> > > >> > >
> > > >> > >
> > > >> > > --
> > > >> > > Ian.
> > > >> > >
> > > >> > >
> > > >> > > On Wed, Nov 19, 2008 at 6:23 PM, Ariel <isaacrc82@gmail.com>
> > wrote:
> > > >> > > > it is supposed lucene make a lexicocraphic sorting but this is
> > not
> > > >> > > hapening,
> > > >> > > > Could you tell me what I'm doing wrong ?
> > > >> > > > I hope you can help me.
> > > >> > > > Regards
> > > >> > > >
> > > >> > > > On Wed, Nov 19, 2008 at 11:56 AM, Ariel <isaacrc82@gmail.com>
> > > wrote:
> > > >> > > >
> > > >> > > >> Thanks, that was very helpful, but I have a question when I
> > make
> > > the
> > > >> > > >> searches it does not sort the results according to the range,
> > for
> > > >> > > example:
> > > >> > > >> year: [2003 TO 2008] in the first page 2003 documents are
> > showed,
> > > in
> > > >> > the
> > > >> > > >> second 2005 documents, in the third page 2004 documents, I
> > don't
> > > see
> > > >> > any
> > > >> > > >> sort criteria.
> > > >> > > >> How could I fix that problem ???
> > > >> > > >> Greetings
> > > >> > > >> Ariel
> > > >> > > >>
> > > >> > > >>
> > > >> > > >> On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com
> >
> > > >> wrote:
> > > >> > > >>
> > > >> > > >>> Hi - sounds like you need a range query.
> > > >> > > >>>
> > > >> > > >>>
> > > >> > > >>>
> > > >> > >
> > > >> >
> > > >>
> > >
> >
> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
> > > >> > > >>>
> > > >> > > >>>
> > > >> > > >>> --
> > > >> > > >>> Ian.
> > > >> > > >>>
> > > >> > > >>>
> > > >> > > >>> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com
> >
> > > >> wrote:
> > > >> > > >>> > Hi everybody:
> > > >> > > >>> >
> > > >> > > >>> > I need to make search with lucene 2.3.2, taking in account
> > the
> > > >> > dates,
> > > >> > > >>> > previously when I build the index I create a date field
> > where
> > > I
> > > >> > > stored
> > > >> > > >>> the
> > > >> > > >>> > year in which the document was created, at the search
> moment
> > I
> > > >> > would
> > > >> > > >>> like to
> > > >> > > >>> > retrieve documents that have been created before a Year or
> > > after
> > > >> a
> > > >> > > Year,
> > > >> > > >>> for
> > > >> > > >>> > example documents before 2002 year o after 2003 year.
> > > >> > > >>> > It is possible to do that with lucene ???
> > > >> > > >>> > Regards
> > > >> > > >>> > Ariel
> > > >> > > >>> >
> > > >> > > >>>
> > > >> > > >>>
> > > >>
> ---------------------------------------------------------------------
> > > >> > > >>> To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > >> > > >>> For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > >> > > >>>
> > > >> > > >>>
> > > >> > > >>
> > > >> > > >
> > > >> > >
> > > >> > >
> > > ---------------------------------------------------------------------
> > > >> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > >> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > >> > >
> > > >> > >
> > > >> >
> > > >>
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

------=_Part_18061_2708239.1229610376203--

From java-user-return-37826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 15:10:29 2008
Return-Path: <java-user-return-37826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25834 invoked from network); 18 Dec 2008 15:10:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 15:10:29 -0000
Received: (qmail 62401 invoked by uid 500); 18 Dec 2008 15:10:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62187 invoked by uid 500); 18 Dec 2008 15:10:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62169 invoked by uid 99); 18 Dec 2008 15:10:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 07:10:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of GDELAVENNE@generali.fr designates 193.57.141.200 as permitted sender)
Received: from [193.57.141.200] (HELO malesherbes.generali.fr) (193.57.141.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 15:10:15 +0000
X-SBRS: None
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="4.36,243,1228086000"; 
   d="scan'208,217";a="235452879"
Received: from dsi-w196mes0.groupe.generali.fr ([10.56.1.30])
  by malesherbes-inside.groupe.generali.fr with ESMTP; 18 Dec 2008 16:09:51 +0100
Received: from EVS1.Groupe.Generali.fr ([10.6.1.16]) by DSI-W196MES0.Groupe.Generali.fr with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 18 Dec 2008 16:09:49 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C96122.AB7E31D2"
Subject: TR: How to search on all fields with one query ?
Date: Thu, 18 Dec 2008 16:09:45 +0100
Message-ID: <DB994DA6511E3246AE46C893817E32600288797C@EVS1.Groupe.Generali.fr>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to search on all fields with one query ?
Thread-Index: AclhH9zbVknRqn+rQDKipd4aq5PZdQAAKZRg
From: "DELAVENNE Guillaume" <GDELAVENNE@generali.fr>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Dec 2008 15:09:49.0464 (UTC) FILETIME=[ABB9E980:01C96122]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C96122.AB7E31D2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I'm beginner on Lucene. I'm working on a Poc Lucene project at Generali
France company.

I have 40 fields (max ten words by field) in my index of about 6
millions documents.
I need to search a word in all fields.

Must I create a field "content" with all the informations of the others
fields ?
Do you have another way ?

Many thanks,
Guillaume





------_=_NextPart_001_01C96122.AB7E31D2--

From java-user-return-37827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 15:10:41 2008
Return-Path: <java-user-return-37827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25896 invoked from network); 18 Dec 2008 15:10:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 15:10:41 -0000
Received: (qmail 63861 invoked by uid 500); 18 Dec 2008 15:10:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63835 invoked by uid 500); 18 Dec 2008 15:10:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63824 invoked by uid 99); 18 Dec 2008 15:10:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 07:10:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of GDELAVENNE@generali.fr designates 193.57.141.200 as permitted sender)
Received: from [193.57.141.200] (HELO malesherbes.generali.fr) (193.57.141.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 15:10:25 +0000
X-SBRS: None
X-ExtLoop1: 1
X-IronPort-AV: E=Sophos;i="4.36,243,1228086000"; 
   d="scan'208,217";a="235453663"
Received: from dsi-w196mes0.groupe.generali.fr ([10.56.1.30])
  by malesherbes-inside.groupe.generali.fr with ESMTP; 18 Dec 2008 16:10:05 +0100
Received: from EVS1.Groupe.Generali.fr ([10.6.1.16]) by DSI-W196MES0.Groupe.Generali.fr with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 18 Dec 2008 16:10:03 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C96122.B4D7DB1A"
Subject: FrenchAnalyzer, double metaphone and soundex
Date: Thu, 18 Dec 2008 16:10:00 +0100
Message-ID: <DB994DA6511E3246AE46C893817E32600288797E@EVS1.Groupe.Generali.fr>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FrenchAnalyzer, double metaphone and soundex
Thread-Index: AclhIrKKVCOR0P72QnKPDZrlpBg2bQ==
From: "DELAVENNE Guillaume" <GDELAVENNE@generali.fr>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Dec 2008 15:10:03.0642 (UTC) FILETIME=[B42D4DA0:01C96122]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C96122.B4D7DB1A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

In the search, the user can choose 2 method of phonetic search : double
metaphone or soundex.=20
Do you have some best practice about this ?=20
Do you know a "FrenchAnalyzer" which uses this algorithms ?

Many thanks,
Guillaume


------_=_NextPart_001_01C96122.B4D7DB1A--

From java-user-return-37828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 15:29:06 2008
Return-Path: <java-user-return-37828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34253 invoked from network); 18 Dec 2008 15:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 15:29:06 -0000
Received: (qmail 1904 invoked by uid 500); 18 Dec 2008 15:29:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1858 invoked by uid 500); 18 Dec 2008 15:29:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1847 invoked by uid 99); 18 Dec 2008 15:29:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 07:29:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 15:28:48 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by oelhorst (Postfix) with ESMTP id D0AEC31A80
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 15:29:06 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 6913731A74
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 15:29:06 +0100 (CET)
Received: from bledsoe.dfki.uni-sb.de (bledsoe.dfki.uni-sb.de [134.96.184.151])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 5A54531239
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 15:29:06 +0100 (CET)
Message-Id: <D277763E-D55D-4E6F-BD1A-02E38E705D42@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <DB994DA6511E3246AE46C893817E32600288797C@EVS1.Groupe.Generali.fr>
Content-Type: multipart/signed; boundary=Apple-Mail-19-51318759; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: TR: How to search on all fields with one query ?
Date: Thu, 18 Dec 2008 16:28:11 +0100
References: <DB994DA6511E3246AE46C893817E32600288797C@EVS1.Groupe.Generali.fr>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-19-51318759
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable



I would do query expansion:
- receive the query, parse it the way you want (e.g. use QueryParser)
- then expand your query along the various fields
If using different analyzers per field (e.g. soundex), you'll have to =20=

adjust things when coming into the term-query.

paul


Le 18-d=E9c.-08 =E0 16:09, DELAVENNE Guillaume a =E9crit :

> Hi,
>
> I'm beginner on Lucene. I'm working on a Poc Lucene project at =20
> Generali
> France company.
>
> I have 40 fields (max ten words by field) in my index of about 6
> millions documents.
> I need to search a word in all fields.
>
> Must I create a field "content" with all the informations of the =20
> others
> fields ?
> Do you have another way ?
>
> Many thanks,
> Guillaume
>
>
>
>


--Apple-Mail-19-51318759
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIFzjCCAocw
ggHwoAMCAQICEFwkG9LgbGf8Fuu/5kCXRScwDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA4MDYwMzE1MTgyOVoXDTA5MDYwMzE1MTgy
OVowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMAHqTEgekG5Iyctn3tSRSfsPoZL+vkFavzl
w/xbbiQ4vWuoCZFVNHvLcFO2rfWoFLaRbcueLsmagsJwA1uxAj4tj/neoawadD+jZ3a98BkqBhIu
4hsC1poLDyvcbUOdKga9DXQ/pk/CorFvR7OOC1INrBtbDi7ycUYaUL7ZkpBFAgMBAAGjMDAuMB4G
A1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQUF
AAOBgQAt7uUnq0yd+jIo9/zYyj+NPyCh3v8CX8MW2qalj37t1YUR82o5/1O5z0sXj7+hQmSEWH7N
BgptwNvhNoKWTYo5c8HBsAMvvv1ruSXYKlsRvPBfewHEEo2KgH73SImj2w7a8owq3t0KLVCPP7d4
RXnrXJf6nuXlsvfFFEd6aIN7VjCCAz8wggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJ
BgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgG
A1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMg
RGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3
DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3
MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9
fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+
uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMB
Af8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3
dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgG
A1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcP
f6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH
2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8x
ggKPMIICiwIBATB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAo
UHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQ
XCQb0uBsZ/wW67/mQJdFJzAJBgUrDgMCGgUAoIIBbzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcB
MBwGCSqGSIb3DQEJBTEPFw0wODEyMTgxNTI4MTFaMCMGCSqGSIb3DQEJBDEWBBSOcD6R/nObtMiF
56QUUvUNcGfWCzCBhQYJKwYBBAGCNxAEMXgwdjBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0ECEFwkG9LgbGf8Fuu/5kCXRScwgYcGCyqGSIb3DQEJEAILMXigdjBiMQsw
CQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UE
AxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEFwkG9LgbGf8Fuu/5kCXRScw
DQYJKoZIhvcNAQEBBQAEgYCqJ44Lwhj6Q9SWc0TTdgKHfPjZpRxNbliXNwJ8eExUocyNmKX8CY8A
hAXtX0N3jtB0Rdlu/Liea7f917SGP2AsnQ8NiIukjEJQFcbCUpS5cM0f6YEEbrITytdbQ+CJYEzn
Nzn0ZGMIC0YI8vHRyQoaIcHNij4u3sAS81mkpYNxzwAAAAAAAA==

--Apple-Mail-19-51318759--

From java-user-return-37829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 15:39:20 2008
Return-Path: <java-user-return-37829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38930 invoked from network); 18 Dec 2008 15:39:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 15:39:20 -0000
Received: (qmail 23882 invoked by uid 500); 18 Dec 2008 15:39:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23846 invoked by uid 500); 18 Dec 2008 15:39:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23820 invoked by uid 99); 18 Dec 2008 15:39:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 07:39:22 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 15:39:01 +0000
Received: by yx-out-2324.google.com with SMTP id 3so157637yxj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 07:38:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=fxYf7KXAud+43kUi/s4DQGqGCI3WY5OaHYps3xGe6YQ=;
        b=QC58FBglouh/RHCdCrLjK2S9Q88d5bg/Vj66oF38moq0erW0pHFBRlisW3vstGkMgY
         f2HsW6iqRnecQnfS/zwrkc1JAd9oduz8HmXyR0DgyMmaqqe87TDhpQ3uGPQrLkIJ7UCO
         VM5KnUMamsXgl1YT8z4v0CkbksrtM4BxM/Y/o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Y+ctaTEPN1GbJyogIwsTcOYsZ3RelpmFUw9Ybt2ULECiDR8LT23S6Tpchtbk2+nLS5
         tSvUMOScI7CMJ3AcOWlSn6se65x4hkZGkFkBaOu/U1riALBxfNZ1vqELAtUD/RdJm/4P
         9BrPjul9FoQIpCJ59zfjFBnnx7geGxbxk1MIU=
Received: by 10.90.33.5 with SMTP id g5mr1125694agg.97.1229614717294;
        Thu, 18 Dec 2008 07:38:37 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Thu, 18 Dec 2008 07:38:36 -0800 (PST)
Message-ID: <359a92830812180738k1c7a1ee7ve9276e7f3888d3b0@mail.gmail.com>
Date: Thu, 18 Dec 2008 10:38:36 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search on all fields with one query ?
In-Reply-To: <DB994DA6511E3246AE46C893817E32600288797C@EVS1.Groupe.Generali.fr>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26320_4581020.1229614717269"
References: <DB994DA6511E3246AE46C893817E32600288797C@EVS1.Groupe.Generali.fr>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26320_4581020.1229614717269
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A lot depends upon what you mean by "search across all fields".
For single-term queries, that's pretty straight forward, but for, say,
(a AND b) what does it mean to "search across all fields"? Should
you get a hit if a appears only in field1 and b appears only in field 2?
Or should you only get a hit when both terms appear in the same field?

The answer to your original question depends a lot on how you answer
the above.

Assuming that putting all the terms in a giant field actually would
work, that's what I'd try first. Create it indexed (but not stored). I'd
try this approach, because searching on that  would be much less
complex than fiddling with cloning the search across 40 fields. But
this may not be possible given the first paragraph above....

If you can I think you'd be surprised at how little this actually adds to
your index
size. The index you're talking about isn't very big compared to many, so
I really don't think that "saving space" is worth the complexity and the
cost in terms of getting it all to actually work.

Best
Erick

On Thu, Dec 18, 2008 at 10:09 AM, DELAVENNE Guillaume <
GDELAVENNE@generali.fr> wrote:

> Hi,
>
> I'm beginner on Lucene. I'm working on a Poc Lucene project at Generali
> France company.
>
> I have 40 fields (max ten words by field) in my index of about 6
> millions documents.
> I need to search a word in all fields.
>
> Must I create a field "content" with all the informations of the others
> fields ?
> Do you have another way ?
>
> Many thanks,
> Guillaume
>
>
>
>
>

------=_Part_26320_4581020.1229614717269--

From java-user-return-37830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 16:01:35 2008
Return-Path: <java-user-return-37830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47991 invoked from network); 18 Dec 2008 16:01:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 16:01:35 -0000
Received: (qmail 58365 invoked by uid 500); 18 Dec 2008 16:01:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58328 invoked by uid 500); 18 Dec 2008 16:01:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58317 invoked by uid 99); 18 Dec 2008 16:01:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 08:01:39 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [64.104.129.195] (HELO ind-iport-1.cisco.com) (64.104.129.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 16:01:17 +0000
X-IronPort-AV: E=Sophos;i="4.36,243,1228089600"; 
   d="scan'208";a="36701202"
Received: from ind-dkim-2.cisco.com ([64.104.140.59])
  by ind-iport-1.cisco.com with ESMTP; 18 Dec 2008 16:00:46 +0000
Received: from india-core-1.cisco.com (india-core-1.cisco.com [64.104.129.221])
	by ind-dkim-2.cisco.com (8.12.11/8.12.11) with ESMTP id mBIG0a9f011783
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 21:30:36 +0530
Received: from xbh-blr-411.apac.cisco.com (xbh-blr-411.cisco.com [64.104.140.150])
	by india-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id mBIG0K5O003831
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 16:00:34 GMT
Received: from xfe-blr-412.apac.cisco.com ([64.104.140.152]) by xbh-blr-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 18 Dec 2008 21:30:34 +0530
Received: from [10.65.78.248] ([10.65.78.248]) by xfe-blr-412.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 18 Dec 2008 21:30:33 +0530
Message-ID: <494A7384.2030003@cisco.com>
Date: Thu, 18 Dec 2008 21:30:04 +0530
From: Preetham Kajekar <preetham@cisco.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
References: <494894D2.9010901@cisco.com>	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>	 <49490F4B.1030607@cisco.com>	 <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>	 <49491EED.4070403@cisco.com>	 <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com>	 <4949D6D6.7000402@cisco.com> <494A1FE2.8010101@cisco.com> <359a92830812180519i5ed550bct8e1bbd4b37cb598@mail.gmail.com>
In-Reply-To: <359a92830812180519i5ed550bct8e1bbd4b37cb598@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Dec 2008 16:00:33.0804 (UTC) FILETIME=[C24B54C0:01C96129]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=13571; t=1229616036; x=1230480036;
	c=relaxed/simple; s=inddkim2002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=preetham@cisco.com;
	z=From:=20Preetham=20Kajekar=20<preetham@cisco.com>
	|Subject:=20Re=3A=20Combining=20results=20of=20multiple=20i
	ndexes
	|Sender:=20;
	bh=RZvS0KgGNafaG73GcN+jM0IRKww0AKxtyFuph8DluI8=;
	b=YvWzp4yRuCKqplvm8drw88m0iiV+LXsu6F2MSOHdAr7qflN7e9zm5vDiFp
	pZpbbagSh+aSCil+bAsr8RJcuaLHcDF2M1HdC1+ZSNHMXW8bw5KmBcTwVET8
	Wqn5OFcFVk;
Authentication-Results: ind-dkim-2; header.From=preetham@cisco.com; dkim=pass (
	sig from cisco.com/inddkim2002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. Yep the code is very easy. However, it take about 3 mins to 
complete merging.

Looks like I will need to have an out of band merging of indexes once 
they are closed (planning to store about 50mil entries in each index 
partition)


However, as the data is being indexed, is there any other way to combine 
results ?

I could get the results of one index, get all the hits and then apply 
this as a filter for the next index. But if there are large number of 
hits (which is likely to be the case), this would not perform too well.

Do you think the document id can be used in anyway. How is the document 
id generated ? After all, i have the two indexes operating on a common 
List of objects. Would the doc is in index1 and index2 for object N in 
the list be the same ?


Thanks,
 ~preetham

Erick Erickson wrote:
> You will be stunned at how easy it is. The merging code should be
> a dozen lines (and that only if you are merging 6 or so indexes)....
>
> See IndexWriter.addIndexes or
> IndexWriter.addIndexesNoOptimize
>
> Best
> Erick
>
> On Thu, Dec 18, 2008 at 5:03 AM, Preetham Kajekar <preetham@cisco.com>wrote:
>
>   
>> Hi,
>> I tried out a single IndexWriter used by two threads to index different
>> fields. It is slower than using two separate IndexWriters. These are my
>> findings
>>
>> All Fields (9) using 1 IndexWriter 1 Thread - 38,000 object per sec
>> 5 Fields       using 1 IndexWriter 1 Thread - 62,000 object per sec
>> All Fields (9) using 1 IndexWriter 2 Thread - 29,000 object per sec
>> All Fields (9) using 2 IndexWriter 2 Thread - 55,000 object per sec
>>
>> So, it looks like I will have figure how to combine results of multiple
>> indexes.
>>
>> Thanks,
>> ~preetham
>>
>>
>> Preetham Kajekar wrote:
>>
>>     
>>> Thanks Erick and Michael.
>>> I will try out these suggestions and post my findings.
>>>
>>> ~preetham
>>>
>>> Erick Erickson wrote:
>>>
>>>       
>>>> Well, maybe if I'd read the original post more carefully I'd have figured
>>>> that out,
>>>> sorry 'bout that.
>>>>
>>>> I *think* I remember reading somewhere on the email lists that your
>>>> indexing
>>>> speed goes up pretty linearly as the number of indexing tasks approaches
>>>> the number of CPUs. Are you, perhaps, on a dual-core machine? But do
>>>> search
>>>> the mail archives because my memory may not be accurate.
>>>>
>>>> You can easily combine indexes by IndexWriter.addIndexes BTW. Personally
>>>> I prefer fewer indexes if you can get away with it. But I'd only try this
>>>> after
>>>> Michael's suggestion of using multiple threads on a single underlying
>>>> writer.
>>>>
>>>> You could even think about using N machines to create M fragments then
>>>> combining them all afterwards if your logs are static enough to make that
>>>> reasonable. Combining indexes may take a while though.....
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar <preetham@cisco.com
>>>>         
>>>>> wrote:
>>>>>           
>>>>
>>>>         
>>>>> Hi Erick,
>>>>> Thanks for the response. Replies inline.
>>>>>
>>>>> Erick Erickson wrote:
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>>> The very first question is always "are you opening a new searcher
>>>>>> each time you query"? But you've looked at the Wiki so I assume not.
>>>>>> This question is closely tied to what kind of latency you can tolerate.
>>>>>>
>>>>>> A few more details, please. What's slow? Queries? Indexing?
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>> Indexing. Again, it is not slow. It is just faster with two separate
>>>>> indexers in two threads.
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>>> How slow? 100ms? 100s? What are your target times and
>>>>>> what are you seeing?
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>> With a single indexer in a single thread, I can index about 20,000 event
>>>>> objects per second. With 2 thread and 2 indexers, it is close to 50,000.
>>>>> :-)
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>>> How big is your index? 100M? 100G? What kind of VM
>>>>>> parameters are you specifying?
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>> The index will have about 20mil entries. The size of the index lands up
>>>>> being about 500M.
>>>>> I start the VM with 1G of heap. No other options for GC etc is used.
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>>> As an aside, do note that there's no requirement in Lucene that
>>>>>> each document have the same fields, so it's unclear why you
>>>>>> need two indexes, but perhaps some of the answers to the above
>>>>>> will help us understand.
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>> Like I mentioned, Lucene does the job much faster with two indexes.
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>>> Also, be very very careful what you measure when you measure
>>>>>> queries. You absolutely *have* to put some instrumentation in
>>>>>> the code since "slow queries" can result from things other than
>>>>>> searching. For instance, iterating over a Hits object for 100s of
>>>>>> documents....
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>> The Query speeds are much faster than what I need :-) So no complains
>>>>> here.
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>>> Show the code, man <G>!
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>> Code below. EvIndexer is the base class. There are two subclasses which
>>>>> implement addEvFieldsToIndexDoc() (template pattern) to add different
>>>>> fields
>>>>> to the index. that code is also pasted below
>>>>>
>>>>> --Code ---
>>>>>
>>>>> BaseClass
>>>>>
>>>>>  public EvIndexer(String indexName) throws Exception {
>>>>>      this.name = indexName;
>>>>>      a = new KeywordAnalyzer();
>>>>>      INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,
>>>>> "./index/");
>>>>>      FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH +
>>>>> File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
>>>>>      indexWriter = new IndexWriter(directory, a,
>>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>> //indexWriter.setUseCompoundFile(false);
>>>>>      //indexWriter.setRAMBufferSizeMB(256);
>>>>>        }
>>>>>      /** Method implemented by extending classes to add data into the
>>>>> index document for the
>>>>>   *  given event
>>>>>   *
>>>>>   * @param d
>>>>>   */
>>>>>  protected abstract void addEvFieldsToIndexDoc(Document d, Ev event);
>>>>>    public void addToIndex(Ev ev) throws Exception {
>>>>>      noOfEventsIndexed++;
>>>>>      Document d = new Document();             addEvFieldsToIndexDoc(d,
>>>>> ev);
>>>>>      indexWriter.addDocument(d);
>>>>>            if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
>>>>>          System.out.println(name + " indexed " +
>>>>> NumberFormat.getInstance().format(noOfEventsIndexed) + " Commiting
>>>>> them");
>>>>>          commit();
>>>>>      }                   }
>>>>>
>>>>> DerievdClass1
>>>>>  protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>>>>>      //noOfEventsIndexed++;
>>>>>            Field id = new Field(EV_ID, Long.toString(ev.getId()),
>>>>> Field.Store.YES, Field.Index.NO);
>>>>>      Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),
>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>      Field type = new Field(EV_TYPE,
>>>>> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
>>>>> Field.Index.NOT_ANALYZED);
>>>>>      Field pri = new Field(EV_PRI, Short.toString(ev.getPriority()) ,
>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>      Field time = new Field(EV_TIME, getHexString(ev.getRecvTime()) ,
>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>      d.add(id);
>>>>>      d.add(src);
>>>>>      d.add(type);
>>>>>      d.add(pri);
>>>>>      d.add(time);
>>>>>      //noOfFieldsIndexed +=  4;
>>>>>                  }
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> Thanks for the support.
>>>>> ~preetham
>>>>>
>>>>>
>>>>>  Best
>>>>>
>>>>>
>>>>>           
>>>>>> Erick
>>>>>>
>>>>>>
>>>>>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <preetham@cisco.com
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> wrote:
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>>
>>>>>>             
>>>>>>> Hi Grant,
>>>>>>> Thanks four response. Replies inline.
>>>>>>>
>>>>>>> Grant Ingersoll wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>>>>>
>>>>>>>>  Hi,
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                 
>>>>>>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>>>>>>
>>>>>>>>> I am trying to index a Java object which has about 10 fields (like
>>>>>>>>> id,
>>>>>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>>>>>> In order to speed up indexing, I figured that having two separate
>>>>>>>>> indexers, each of them indexing different set of fields works great.
>>>>>>>>> So
>>>>>>>>> I
>>>>>>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                   
>>>>>>>> Can you explain this a bit more?  Are those two fields really large
>>>>>>>> org
>>>>>>>> something?  How are you obtaining them?  How are you correlating the
>>>>>>>> documents between the two indexes?  Did you actually try a single
>>>>>>>> index
>>>>>>>> and
>>>>>>>> it was too slow?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                 
>>>>>>> I have a java object which has about 10 fields. However, the fields
>>>>>>> are
>>>>>>> not
>>>>>>> fixed. The java object is essentially a representation of Syslogs from
>>>>>>> network devices. So different syslogs have different fields. Each
>>>>>>> field
>>>>>>> has
>>>>>>> a unique id and a value (mostly numeric types, so i convert it to
>>>>>>> string).
>>>>>>> There are some fixed fields. So the object is a list of fields which
>>>>>>> is
>>>>>>> produced by a parser.
>>>>>>> I am trying to index using two indexers in two separate threads- one
>>>>>>> for
>>>>>>> fixed and another for the non-fixed fields. Except for a unique id, I
>>>>>>> do
>>>>>>> not
>>>>>>> store the fields in Lucene - i just index them. From the index, i get
>>>>>>> the
>>>>>>> unique id which is all I care about. (the objects are stored elsewhere
>>>>>>> and
>>>>>>> can be looked up based on this unique id).
>>>>>>> I did try using a single indexer, but things were quite slow. Getting
>>>>>>> high
>>>>>>> throughput is crucial and having two indexers seemed to do very well.
>>>>>>> (more
>>>>>>> than twice as fast)
>>>>>>>
>>>>>>> Further, the index will never be modified and I can have just one
>>>>>>> thread
>>>>>>> writing to the index. If there are any other performance tips would be
>>>>>>> very
>>>>>>> helpful. I have already looked at the wiki link regarding performance
>>>>>>> and
>>>>>>> using some of them.
>>>>>>>
>>>>>>> Thanks,
>>>>>>> ~preetham
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>>>> Now, I want to have boolean AND query's looking for values in both
>>>>>>>>
>>>>>>>>
>>>>>>>>                 
>>>>>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two
>>>>>>>>> separate
>>>>>>>>> indexes. Would using the MultiIndexReader help ? Since I am doing an
>>>>>>>>> AND, I
>>>>>>>>> dont expect that it would work.
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>> ~preetham
>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                   
>>>>>>>> --------------------------
>>>>>>>> Grant Ingersoll
>>>>>>>>
>>>>>>>> Lucene Helpful Hints:
>>>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>                 
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>>
>>>>>>             
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>           
>>>>
>>>>         
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 16:33:59 2008
Return-Path: <java-user-return-37831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59489 invoked from network); 18 Dec 2008 16:33:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 16:33:59 -0000
Received: (qmail 17573 invoked by uid 500); 18 Dec 2008 16:34:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17540 invoked by uid 500); 18 Dec 2008 16:34:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17528 invoked by uid 99); 18 Dec 2008 16:34:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 08:34:03 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MISSING_MID,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [65.199.122.3] (HELO mainsequence.net) (65.199.122.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 16:33:40 +0000
Received: from 127.0.0.1 by mainsequence.net (MDaemon PRO v9.6.6)
	with ESMTP id md50009203126.msg
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 11:33:18 -0500
X-Spam-Processed: mainsequence.net, Thu, 18 Dec 2008 11:33:18 -0500
	(not processed: message from trusted or authenticated source)
X-Authenticated-Sender: test_account@mainsequence.net
X-MDRemoteIP: 66.104.120.34
X-Return-Path: prvs=12382bf2f9=chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
Reply-To: "Chris Salem" <>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: 
Subject: Re: lucene 2.4 sorting slowness
Date: Thu, 18 Dec 2008 16:33:17 -0000
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCRecruiter Emulation of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCRecruiter Emulation of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcrB0ABC9FF13294CD2B870EC70697736BFsection1-b1"
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20081218163348.B886181601B@nike.apache.org>

------=_pcrB0ABC9FF13294CD2B870EC70697736BFsection1-b1
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

that makes it much faster (<100ms after the first run). thanks alot.
also, the index will be updated oftenly throughout the day, will keeping the indexreader open recognize updates to the index?
Sincerely,
Chris Salem 
Development Team 
Main Sequence Technologies, Inc.
PCRecruiter.net - PCRecruiter Support
chris@mainsequence.net
P: 440.946.5214 ext 5458 
F: 440.856.0312

This email and any files transmitted with it may contain confidential information intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the sender. Please note that any views or opinions presented in this email are solely those of the author and do not necessarily represent those of the company. Finally, the recipient should check this email and any attachments for the presence of viruses. The company accepts no liability for any damage caused by any virus transmitted by this email. Main Sequence Technologies, Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net




----- Original Message ----- 
To: java-user@lucene.apache.org
From: Michael McCandless <lucene@mikemccandless.com>
Sent: 12/17/2008 4:46:18 PM
Subject: Re: lucene 2.4 sorting slowness



Are you warming the searcher first, and then testing the sort 
performance? (The first query is slow because it populates the 
FieldCache, internally, which is then reused for subsequent queries as 
long as you don't close that reader/searcher).

Mike

Chris Salem wrote:

> Hello,
> I have an index with ~4000000 documents and some 200 fields. 
> Searching without sorting takes around 300 - 500 ms, when sorting on 
> dates (formated as 'yyyy-mm-dd') searching time takes on average 15 
> seconds. Here's the code that does the search:
> hits = searcher.search(query, new Sort(new 
> SortField("slast_modified", false)));
> and here's how that field is being indexed:
> doc.add(new Field("slast_modified", "2008-12-12", Field.Store.NO, 
> Field.Index.NOT_ANALYZED));
> Am I doing something wrong? Is there a bug in lucene and if so is 
> there a way to work around it so that search speed is increased to 
> something reasonable?
> Thanks
> Sincerely,
> Chris Salem
> Development Team
> Main Sequence Technologies, Inc.
> PCRecruiter.net - PCRecruiter Support
> chris@mainsequence.net
> P: 440.946.5214 ext 5458
> F: 440.856.0312
>
> This email and any files transmitted with it may contain 
> confidential information intended solely for the use of the 
> individual or entity to whom they are addressed. If you have 
> received this email in error please notify the sender. Please note 
> that any views or opinions presented in this email are solely those 
> of the author and do not necessarily represent those of the company. 
> Finally, the recipient should check this email and any attachments 
> for the presence of viruses. The company accepts no liability for 
> any damage caused by any virus transmitted by this email. Main 
> Sequence Technologies, Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net
>
> (The following links were included with this email:)
> http://www.pcrecruiter.net/
>
> http://www.pcrecruiter.net/support.htm
>
> mailto:chris@mainsequence.net
>
>
>
> (The following links were included with this email:)
> http://www.pcrecruiter.net/
>
> http://www.pcrecruiter.net/support.htm
>
> mailto:chris@mainsequence.net
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

(The following links were included with this email:)
http://www.pcrecruiter.net/

http://www.pcrecruiter.net/support.htm

mailto:chris@mainsequence.net



(The following links were included with this email:)
http://www.pcrecruiter.net/

http://www.pcrecruiter.net/support.htm

mailto:chris@mainsequence.net



------=_pcrB0ABC9FF13294CD2B870EC70697736BFsection1-b1--




From java-user-return-37832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 16:47:36 2008
Return-Path: <java-user-return-37832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69355 invoked from network); 18 Dec 2008 16:47:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 16:47:36 -0000
Received: (qmail 52687 invoked by uid 500); 18 Dec 2008 16:47:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52659 invoked by uid 500); 18 Dec 2008 16:47:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52647 invoked by uid 99); 18 Dec 2008 16:47:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 08:47:40 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [64.104.129.195] (HELO ind-iport-1.cisco.com) (64.104.129.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 16:47:19 +0000
X-IronPort-AV: E=Sophos;i="4.36,243,1228089600"; 
   d="scan'208";a="36709698"
Received: from ind-dkim-1.cisco.com ([64.104.140.57])
  by ind-iport-1.cisco.com with ESMTP; 18 Dec 2008 16:46:45 +0000
Received: from india-core-1.cisco.com (india-core-1.cisco.com [64.104.129.221])
	by ind-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id mBIGkjri011036
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 22:16:45 +0530
Received: from xbh-blr-412.apac.cisco.com (xbh-blr-412.cisco.com [64.104.140.149])
	by india-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id mBIGkgNS012862
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 16:46:44 GMT
Received: from xfe-blr-412.apac.cisco.com ([64.104.140.152]) by xbh-blr-412.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 18 Dec 2008 22:16:45 +0530
Received: from [10.65.78.248] ([10.65.78.248]) by xfe-blr-412.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 18 Dec 2008 22:16:44 +0530
Message-ID: <494A7E57.1030206@cisco.com>
Date: Thu, 18 Dec 2008 22:16:15 +0530
From: Preetham Kajekar <preetham@cisco.com>
User-Agent: Thunderbird 2.0.0.6 (Windows/20070728)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
References: <494894D2.9010901@cisco.com>	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>	 <49490F4B.1030607@cisco.com>	 <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>	 <49491EED.4070403@cisco.com>	 <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com>	 <4949D6D6.7000402@cisco.com> <494A1FE2.8010101@cisco.com> <359a92830812180519i5ed550bct8e1bbd4b37cb598@mail.gmail.com> <494A7384.2030003@cisco.com>
In-Reply-To: <494A7384.2030003@cisco.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 18 Dec 2008 16:46:44.0775 (UTC) FILETIME=[35EBF370:01C96130]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=14856; t=1229618805; x=1230482805;
	c=relaxed/simple; s=inddkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=preetham@cisco.com;
	z=From:=20Preetham=20Kajekar=20<preetham@cisco.com>
	|Subject:=20Re=3A=20Combining=20results=20of=20multiple=20i
	ndexes
	|Sender:=20;
	bh=+puR127+xoGtYcSnuLNrmTBqIsIEnEP1XoezGnDhXps=;
	b=Tby3ywCSEhp9NzY9FpA48qDRBYcQYpYGFkJHvRIbEWfl0BW1fgLA6GKvvx
	1gHBlCtPK3IaL55l55wn8VXHJ5eACed3xHKJhprMObazGOJ3zoFQ/HOVuB2j
	1fRA3GQH8V;
Authentication-Results: ind-dkim-1; header.From=preetham@cisco.com; dkim=pass (
	sig from cisco.com/inddkim1002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
 I noticed that the doc id is the same. So, if I have HitCollector, just 
collect the doc-ids of both Searchers (for the two indexes) and find the 
intersection between them, it would work. Also, get the doc is even 
where there are large number of hits is fast.

 Of course, I am using something undocumented of Lucene.

Thanks,
 ~preetham

Preetham Kajekar wrote:
> Thanks. Yep the code is very easy. However, it take about 3 mins to 
> complete merging.
>
> Looks like I will need to have an out of band merging of indexes once 
> they are closed (planning to store about 50mil entries in each index 
> partition)
>
>
> However, as the data is being indexed, is there any other way to 
> combine results ?
>
> I could get the results of one index, get all the hits and then apply 
> this as a filter for the next index. But if there are large number of 
> hits (which is likely to be the case), this would not perform too well.
>
> Do you think the document id can be used in anyway. How is the 
> document id generated ? After all, i have the two indexes operating on 
> a common List of objects. Would the doc is in index1 and index2 for 
> object N in the list be the same ?
>
>
> Thanks,
> ~preetham
>
> Erick Erickson wrote:
>> You will be stunned at how easy it is. The merging code should be
>> a dozen lines (and that only if you are merging 6 or so indexes)....
>>
>> See IndexWriter.addIndexes or
>> IndexWriter.addIndexesNoOptimize
>>
>> Best
>> Erick
>>
>> On Thu, Dec 18, 2008 at 5:03 AM, Preetham Kajekar 
>> <preetham@cisco.com>wrote:
>>
>>  
>>> Hi,
>>> I tried out a single IndexWriter used by two threads to index different
>>> fields. It is slower than using two separate IndexWriters. These are my
>>> findings
>>>
>>> All Fields (9) using 1 IndexWriter 1 Thread - 38,000 object per sec
>>> 5 Fields       using 1 IndexWriter 1 Thread - 62,000 object per sec
>>> All Fields (9) using 1 IndexWriter 2 Thread - 29,000 object per sec
>>> All Fields (9) using 2 IndexWriter 2 Thread - 55,000 object per sec
>>>
>>> So, it looks like I will have figure how to combine results of multiple
>>> indexes.
>>>
>>> Thanks,
>>> ~preetham
>>>
>>>
>>> Preetham Kajekar wrote:
>>>
>>>    
>>>> Thanks Erick and Michael.
>>>> I will try out these suggestions and post my findings.
>>>>
>>>> ~preetham
>>>>
>>>> Erick Erickson wrote:
>>>>
>>>>      
>>>>> Well, maybe if I'd read the original post more carefully I'd have 
>>>>> figured
>>>>> that out,
>>>>> sorry 'bout that.
>>>>>
>>>>> I *think* I remember reading somewhere on the email lists that your
>>>>> indexing
>>>>> speed goes up pretty linearly as the number of indexing tasks 
>>>>> approaches
>>>>> the number of CPUs. Are you, perhaps, on a dual-core machine? But do
>>>>> search
>>>>> the mail archives because my memory may not be accurate.
>>>>>
>>>>> You can easily combine indexes by IndexWriter.addIndexes BTW. 
>>>>> Personally
>>>>> I prefer fewer indexes if you can get away with it. But I'd only 
>>>>> try this
>>>>> after
>>>>> Michael's suggestion of using multiple threads on a single underlying
>>>>> writer.
>>>>>
>>>>> You could even think about using N machines to create M fragments 
>>>>> then
>>>>> combining them all afterwards if your logs are static enough to 
>>>>> make that
>>>>> reasonable. Combining indexes may take a while though.....
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar 
>>>>> <preetham@cisco.com
>>>>>        
>>>>>> wrote:
>>>>>>           
>>>>>
>>>>>        
>>>>>> Hi Erick,
>>>>>> Thanks for the response. Replies inline.
>>>>>>
>>>>>> Erick Erickson wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>          
>>>>>>> The very first question is always "are you opening a new searcher
>>>>>>> each time you query"? But you've looked at the Wiki so I assume 
>>>>>>> not.
>>>>>>> This question is closely tied to what kind of latency you can 
>>>>>>> tolerate.
>>>>>>>
>>>>>>> A few more details, please. What's slow? Queries? Indexing?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>             
>>>>>> Indexing. Again, it is not slow. It is just faster with two separate
>>>>>> indexers in two threads.
>>>>>>
>>>>>>
>>>>>>
>>>>>>          
>>>>>>> How slow? 100ms? 100s? What are your target times and
>>>>>>> what are you seeing?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>             
>>>>>> With a single indexer in a single thread, I can index about 
>>>>>> 20,000 event
>>>>>> objects per second. With 2 thread and 2 indexers, it is close to 
>>>>>> 50,000.
>>>>>> :-)
>>>>>>
>>>>>>
>>>>>>
>>>>>>          
>>>>>>> How big is your index? 100M? 100G? What kind of VM
>>>>>>> parameters are you specifying?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>             
>>>>>> The index will have about 20mil entries. The size of the index 
>>>>>> lands up
>>>>>> being about 500M.
>>>>>> I start the VM with 1G of heap. No other options for GC etc is used.
>>>>>>
>>>>>>
>>>>>>
>>>>>>          
>>>>>>> As an aside, do note that there's no requirement in Lucene that
>>>>>>> each document have the same fields, so it's unclear why you
>>>>>>> need two indexes, but perhaps some of the answers to the above
>>>>>>> will help us understand.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>             
>>>>>> Like I mentioned, Lucene does the job much faster with two indexes.
>>>>>>
>>>>>>
>>>>>>
>>>>>>          
>>>>>>> Also, be very very careful what you measure when you measure
>>>>>>> queries. You absolutely *have* to put some instrumentation in
>>>>>>> the code since "slow queries" can result from things other than
>>>>>>> searching. For instance, iterating over a Hits object for 100s of
>>>>>>> documents....
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>             
>>>>>> The Query speeds are much faster than what I need :-) So no 
>>>>>> complains
>>>>>> here.
>>>>>>
>>>>>>
>>>>>>
>>>>>>          
>>>>>>> Show the code, man <G>!
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>             
>>>>>> Code below. EvIndexer is the base class. There are two subclasses 
>>>>>> which
>>>>>> implement addEvFieldsToIndexDoc() (template pattern) to add 
>>>>>> different
>>>>>> fields
>>>>>> to the index. that code is also pasted below
>>>>>>
>>>>>> --Code ---
>>>>>>
>>>>>> BaseClass
>>>>>>
>>>>>>  public EvIndexer(String indexName) throws Exception {
>>>>>>      this.name = indexName;
>>>>>>      a = new KeywordAnalyzer();
>>>>>>      INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,
>>>>>> "./index/");
>>>>>>      FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH +
>>>>>> File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
>>>>>>      indexWriter = new IndexWriter(directory, a,
>>>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>>> //indexWriter.setUseCompoundFile(false);
>>>>>>      //indexWriter.setRAMBufferSizeMB(256);
>>>>>>        }
>>>>>>      /** Method implemented by extending classes to add data into 
>>>>>> the
>>>>>> index document for the
>>>>>>   *  given event
>>>>>>   *
>>>>>>   * @param d
>>>>>>   */
>>>>>>  protected abstract void addEvFieldsToIndexDoc(Document d, Ev 
>>>>>> event);
>>>>>>    public void addToIndex(Ev ev) throws Exception {
>>>>>>      noOfEventsIndexed++;
>>>>>>      Document d = new Document();             
>>>>>> addEvFieldsToIndexDoc(d,
>>>>>> ev);
>>>>>>      indexWriter.addDocument(d);
>>>>>>            if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
>>>>>>          System.out.println(name + " indexed " +
>>>>>> NumberFormat.getInstance().format(noOfEventsIndexed) + " Commiting
>>>>>> them");
>>>>>>          commit();
>>>>>>      }                   }
>>>>>>
>>>>>> DerievdClass1
>>>>>>  protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>>>>>>      //noOfEventsIndexed++;
>>>>>>            Field id = new Field(EV_ID, Long.toString(ev.getId()),
>>>>>> Field.Store.YES, Field.Index.NO);
>>>>>>      Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),
>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>      Field type = new Field(EV_TYPE,
>>>>>> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
>>>>>> Field.Index.NOT_ANALYZED);
>>>>>>      Field pri = new Field(EV_PRI, 
>>>>>> Short.toString(ev.getPriority()) ,
>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>      Field time = new Field(EV_TIME, 
>>>>>> getHexString(ev.getRecvTime()) ,
>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>      d.add(id);
>>>>>>      d.add(src);
>>>>>>      d.add(type);
>>>>>>      d.add(pri);
>>>>>>      d.add(time);
>>>>>>      //noOfFieldsIndexed +=  4;
>>>>>>                  }
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> Thanks for the support.
>>>>>> ~preetham
>>>>>>
>>>>>>
>>>>>>  Best
>>>>>>
>>>>>>
>>>>>>          
>>>>>>> Erick
>>>>>>>
>>>>>>>
>>>>>>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar 
>>>>>>> <preetham@cisco.com
>>>>>>>
>>>>>>>
>>>>>>>            
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>               
>>>>>>>
>>>>>>>            
>>>>>>>> Hi Grant,
>>>>>>>> Thanks four response. Replies inline.
>>>>>>>>
>>>>>>>> Grant Ingersoll wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>              
>>>>>>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>>>>>>
>>>>>>>>>  Hi,
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                
>>>>>>>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>>>>>>>
>>>>>>>>>> I am trying to index a Java object which has about 10 fields 
>>>>>>>>>> (like
>>>>>>>>>> id,
>>>>>>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>>>>>>> In order to speed up indexing, I figured that having two 
>>>>>>>>>> separate
>>>>>>>>>> indexers, each of them indexing different set of fields works 
>>>>>>>>>> great.
>>>>>>>>>> So
>>>>>>>>>> I
>>>>>>>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                   
>>>>>>>>> Can you explain this a bit more?  Are those two fields really 
>>>>>>>>> large
>>>>>>>>> org
>>>>>>>>> something?  How are you obtaining them?  How are you 
>>>>>>>>> correlating the
>>>>>>>>> documents between the two indexes?  Did you actually try a single
>>>>>>>>> index
>>>>>>>>> and
>>>>>>>>> it was too slow?
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                 
>>>>>>>> I have a java object which has about 10 fields. However, the 
>>>>>>>> fields
>>>>>>>> are
>>>>>>>> not
>>>>>>>> fixed. The java object is essentially a representation of 
>>>>>>>> Syslogs from
>>>>>>>> network devices. So different syslogs have different fields. Each
>>>>>>>> field
>>>>>>>> has
>>>>>>>> a unique id and a value (mostly numeric types, so i convert it to
>>>>>>>> string).
>>>>>>>> There are some fixed fields. So the object is a list of fields 
>>>>>>>> which
>>>>>>>> is
>>>>>>>> produced by a parser.
>>>>>>>> I am trying to index using two indexers in two separate 
>>>>>>>> threads- one
>>>>>>>> for
>>>>>>>> fixed and another for the non-fixed fields. Except for a unique 
>>>>>>>> id, I
>>>>>>>> do
>>>>>>>> not
>>>>>>>> store the fields in Lucene - i just index them. From the index, 
>>>>>>>> i get
>>>>>>>> the
>>>>>>>> unique id which is all I care about. (the objects are stored 
>>>>>>>> elsewhere
>>>>>>>> and
>>>>>>>> can be looked up based on this unique id).
>>>>>>>> I did try using a single indexer, but things were quite slow. 
>>>>>>>> Getting
>>>>>>>> high
>>>>>>>> throughput is crucial and having two indexers seemed to do very 
>>>>>>>> well.
>>>>>>>> (more
>>>>>>>> than twice as fast)
>>>>>>>>
>>>>>>>> Further, the index will never be modified and I can have just one
>>>>>>>> thread
>>>>>>>> writing to the index. If there are any other performance tips 
>>>>>>>> would be
>>>>>>>> very
>>>>>>>> helpful. I have already looked at the wiki link regarding 
>>>>>>>> performance
>>>>>>>> and
>>>>>>>> using some of them.
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>> ~preetham
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>              
>>>>>>>>> Now, I want to have boolean AND query's looking for values in 
>>>>>>>>> both
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                
>>>>>>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two
>>>>>>>>>> separate
>>>>>>>>>> indexes. Would using the MultiIndexReader help ? Since I am 
>>>>>>>>>> doing an
>>>>>>>>>> AND, I
>>>>>>>>>> dont expect that it would work.
>>>>>>>>>>
>>>>>>>>>> Thanks,
>>>>>>>>>> ~preetham
>>>>>>>>>>
>>>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: 
>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>                   
>>>>>>>>> --------------------------
>>>>>>>>> Grant Ingersoll
>>>>>>>>>
>>>>>>>>> Lucene Helpful Hints:
>>>>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>                 
>>>>>>>> --------------------------------------------------------------------- 
>>>>>>>>
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>               
>>>>>>>
>>>>>>>             
>>>>>> --------------------------------------------------------------------- 
>>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>           
>>>>>
>>>>>         
>>>>       
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>     
>>
>>   
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 16:54:55 2008
Return-Path: <java-user-return-37833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75607 invoked from network); 18 Dec 2008 16:54:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 16:54:55 -0000
Received: (qmail 69294 invoked by uid 500); 18 Dec 2008 16:55:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69035 invoked by uid 500); 18 Dec 2008 16:55:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69024 invoked by uid 99); 18 Dec 2008 16:55:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 08:55:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 16:54:39 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.8/8.13.8) with ESMTP id mBIGsIpt094596
	for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 17:54:18 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: RESOLVED: help: java.lang.ArrayIndexOutOfBoundsException ScorerDocQueue.downHeap
Date: Thu, 18 Dec 2008 17:54:17 +0100
User-Agent: KMail/1.9.10
References: <21037262.post@talk.nabble.com> <21042590.post@talk.nabble.com> <21062271.post@talk.nabble.com>
In-Reply-To: <21062271.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200812181754.18089.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Wednesday 17 December 2008 22:49:08 schreef 1world1love:
> Just an FYI in case anyone runs into something similar.
>
> Essentially I had indexes that I have been searching from a java
> stored procedure in Oracle without issue for awhile. All of a sudden,
> I started getting the error I alluded to above when there were more
> than a certain number of terms (4,5, or more depending on the terms
> or index). The error did not happen when I ran a query from a local
> server with the same filesystem mounted.

In that case the root cause of the error could be in the JVM running the 
stored procedure.

>
> In any case, all of my indexes checked out OK. I read through all the
> other issues related to my issue but none of the fixes did anything.
>
> However, setting BooleanQuery.setAllowDocsOutOfOrder(true); did in
> fact make the error go away. Although I understand the idea behind
> the setting, I am not sure why it made a difference in my case.

That option chooses another algorithm to search these queries, it
will only affect queries without required terms.
(The change in search algorithm is from BooleanScorer2 to 
BooleanScorer.)

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 16:57:06 2008
Return-Path: <java-user-return-37834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78024 invoked from network); 18 Dec 2008 16:57:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 16:57:06 -0000
Received: (qmail 76296 invoked by uid 500); 18 Dec 2008 16:57:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76272 invoked by uid 500); 18 Dec 2008 16:57:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76261 invoked by uid 99); 18 Dec 2008 16:57:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 08:57:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ghendrey@decarta.com designates 66.151.148.231 as permitted sender)
Received: from [66.151.148.231] (HELO mx2.decarta.com) (66.151.148.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 16:56:49 +0000
Received: from internal.decarta.com ([10.253.0.17]) by mx2.decarta.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 18 Dec 2008 08:56:28 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: double metaphone for misspellings
Date: Thu, 18 Dec 2008 08:56:27 -0800
Message-ID: <6C5C1804772DB944BA88A0DC48D338DA04BA6CD5@dct-mail.sanjose.telcontar.com>
In-Reply-To: <E9DD5BE59E84CA4E87AE0E5E6F1B8B125B8181@sbsrv.AALabs.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: double metaphone for misspellings
Thread-Index: Aclg08bkRHWn2g77R6+zyL4AqcW8cAANeALwAAnR62A=
From: "Geoff Hendrey" <ghendrey@decarta.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Dec 2008 16:56:28.0410 (UTC) FILETIME=[91CB95A0:01C96131]
X-Virus-Checked: Checked by ClamAV on apache.org

I would think that if the place names are English, which those in Boston
would be, then they would be reasonable candidates for soundex and
double metaphone. I am considering an approach where I store SOUNDEX,
refined SOUNDEX, doublemetaphone, and I'll look into ngram as well, and
search against each of those as separate fields, then combine the
results. I'd love to hear more about your experience.

-geoff

-----Original Message-----
From: Max Metral [mailto:max@artsalliancelabs.com]=20
Sent: Thursday, December 18, 2008 4:14 AM
To: java-user@lucene.apache.org
Subject: RE: double metaphone for misspellings

Somehow I seem to have missed (and can't find) your original mail, but
it seems like you're asking about using double metaphone for place
names.  We've done this on our site (http://boston.povo.com) for street
and place names, and I can't say we've been happy with the results.
We're toying with ngrams instead, but neither is "well tuned" to the
particular types of mistakes people seem to make for place names, and I
haven't really found or figured out something that is.

-----Original Message-----
From: Daniel Noll [mailto:daniel@nuix.com]
Sent: Thursday, December 18, 2008 12:45 AM
To: java-user@lucene.apache.org
Subject: Re: double metaphone for misspellings

Geoff Hendrey wrote:
> ((POINameType)name).getText().split("\\s"); //tokenize manually.
(gosh,
> I thought the analyser would do this)

The analyser does do this... but related to this, the Right Way to do it

in your case would be to write your own analyser specifically for that
field, and do all the metaphone magic in the analyser.

You probably want an analyser which chains onto the StandardAnalyzer and

adds an additional token filter to do the double metaphone stuff.=20
Writing a token filter isn't too hard, PorterStemFilter is a relatively
good example of doing something similar.

So you would end up with a DoubleMetaphoneFilter, which you could then
use with PerFieldAnalyzerWrapper to have it apply only to the fields you

use that for.

Daniel


--=20
Daniel Noll                            Forensic and eDiscovery Software
Senior Developer                              The world's most advanced
Nuix                                                email data analysis
http://nuix.com/                                and eDiscovery software

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 18:00:00 2008
Return-Path: <java-user-return-37835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16457 invoked from network); 18 Dec 2008 17:59:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 17:59:59 -0000
Received: (qmail 77339 invoked by uid 500); 18 Dec 2008 18:00:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77300 invoked by uid 500); 18 Dec 2008 18:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77289 invoked by uid 99); 18 Dec 2008 18:00:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 10:00:04 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 17:59:43 +0000
Received: by yw-out-2324.google.com with SMTP id 3so189074ywj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 09:59:20 -0800 (PST)
Received: by 10.151.103.1 with SMTP id f1mr3866077ybm.235.1229623160268;
        Thu, 18 Dec 2008 09:59:20 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id a68sm6437172rnc.12.2008.12.18.09.59.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 18 Dec 2008 09:59:18 -0800 (PST)
Message-Id: <71C848EA-F6F1-4ACD-BC8E-F3EAE0B52B71@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <494A1FE2.8010101@cisco.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Combining results of multiple indexes
Date: Thu, 18 Dec 2008 12:59:16 -0500
References: <494894D2.9010901@cisco.com>	 <5B9C9A9A-FFA3-409B-9114-B916D9B0C1AA@apache.org>	 <49490F4B.1030607@cisco.com>	 <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>	 <49491EED.4070403@cisco.com> <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com> <4949D6D6.7000402@cisco.com> <494A1FE2.8010101@cisco.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


These results are surprising.

I'd expect single IndexWriter with 2 threads to do better than a  
single thread, but in your test two threads are significantly worse  
than one.

Is it possible there's a bottleneck outside of Lucene in sourcing the  
documents?

How many segments are produced at the end of your indexing run?

Your use case is somewhat unusual because (I think?) you have no  
tokenized fields; I would expect the "overhead" of handling the  
document to be higher in this case, so maybe you are hitting some  
concurrency problem.

Mike

Preetham Kajekar wrote:

> Hi,
> I tried out a single IndexWriter used by two threads to index  
> different fields. It is slower than using two separate IndexWriters.  
> These are my findings
>
> All Fields (9) using 1 IndexWriter 1 Thread - 38,000 object per sec
> 5 Fields       using 1 IndexWriter 1 Thread - 62,000 object per sec
> All Fields (9) using 1 IndexWriter 2 Thread - 29,000 object per sec
> All Fields (9) using 2 IndexWriter 2 Thread - 55,000 object per sec
>
> So, it looks like I will have figure how to combine results of  
> multiple indexes.
>
> Thanks,
> ~preetham
>
> Preetham Kajekar wrote:
>> Thanks Erick and Michael.
>> I will try out these suggestions and post my findings.
>>
>> ~preetham
>>
>> Erick Erickson wrote:
>>> Well, maybe if I'd read the original post more carefully I'd have  
>>> figured
>>> that out,
>>> sorry 'bout that.
>>>
>>> I *think* I remember reading somewhere on the email lists that  
>>> your indexing
>>> speed goes up pretty linearly as the number of indexing tasks  
>>> approaches
>>> the number of CPUs. Are you, perhaps, on a dual-core machine? But  
>>> do search
>>> the mail archives because my memory may not be accurate.
>>>
>>> You can easily combine indexes by IndexWriter.addIndexes BTW.  
>>> Personally
>>> I prefer fewer indexes if you can get away with it. But I'd only  
>>> try this
>>> after
>>> Michael's suggestion of using multiple threads on a single  
>>> underlying
>>> writer.
>>>
>>> You could even think about using N machines to create M fragments  
>>> then
>>> combining them all afterwards if your logs are static enough to  
>>> make that
>>> reasonable. Combining indexes may take a while though.....
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar <preetham@cisco.com 
>>> >wrote:
>>>
>>>
>>>> Hi Erick,
>>>> Thanks for the response. Replies inline.
>>>>
>>>> Erick Erickson wrote:
>>>>
>>>>
>>>>> The very first question is always "are you opening a new searcher
>>>>> each time you query"? But you've looked at the Wiki so I assume  
>>>>> not.
>>>>> This question is closely tied to what kind of latency you can  
>>>>> tolerate.
>>>>>
>>>>> A few more details, please. What's slow? Queries? Indexing?
>>>>>
>>>>>
>>>>>
>>>> Indexing. Again, it is not slow. It is just faster with two  
>>>> separate
>>>> indexers in two threads.
>>>>
>>>>
>>>>> How slow? 100ms? 100s? What are your target times and
>>>>> what are you seeing?
>>>>>
>>>>>
>>>>>
>>>> With a single indexer in a single thread, I can index about  
>>>> 20,000 event
>>>> objects per second. With 2 thread and 2 indexers, it is close to  
>>>> 50,000. :-)
>>>>
>>>>
>>>>> How big is your index? 100M? 100G? What kind of VM
>>>>> parameters are you specifying?
>>>>>
>>>>>
>>>>>
>>>> The index will have about 20mil entries. The size of the index  
>>>> lands up
>>>> being about 500M.
>>>> I start the VM with 1G of heap. No other options for GC etc is  
>>>> used.
>>>>
>>>>
>>>>> As an aside, do note that there's no requirement in Lucene that
>>>>> each document have the same fields, so it's unclear why you
>>>>> need two indexes, but perhaps some of the answers to the above
>>>>> will help us understand.
>>>>>
>>>>>
>>>>>
>>>> Like I mentioned, Lucene does the job much faster with two indexes.
>>>>
>>>>
>>>>> Also, be very very careful what you measure when you measure
>>>>> queries. You absolutely *have* to put some instrumentation in
>>>>> the code since "slow queries" can result from things other than
>>>>> searching. For instance, iterating over a Hits object for 100s of
>>>>> documents....
>>>>>
>>>>>
>>>>>
>>>> The Query speeds are much faster than what I need :-) So no  
>>>> complains here.
>>>>
>>>>
>>>>> Show the code, man <G>!
>>>>>
>>>>>
>>>>>
>>>> Code below. EvIndexer is the base class. There are two subclasses  
>>>> which
>>>> implement addEvFieldsToIndexDoc() (template pattern) to add  
>>>> different fields
>>>> to the index. that code is also pasted below
>>>>
>>>> --Code ---
>>>>
>>>> BaseClass
>>>>
>>>>  public EvIndexer(String indexName) throws Exception {
>>>>      this.name = indexName;
>>>>      a = new KeywordAnalyzer();
>>>>      INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,
>>>> "./index/");
>>>>      FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH +
>>>> File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
>>>>      indexWriter = new IndexWriter(directory, a,
>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>> //indexWriter.setUseCompoundFile(false);
>>>>      //indexWriter.setRAMBufferSizeMB(256);
>>>>        }
>>>>      /** Method implemented by extending classes to add data into  
>>>> the
>>>> index document for the
>>>>   *  given event
>>>>   *
>>>>   * @param d
>>>>   */
>>>>  protected abstract void addEvFieldsToIndexDoc(Document d, Ev  
>>>> event);
>>>>    public void addToIndex(Ev ev) throws Exception {
>>>>      noOfEventsIndexed++;
>>>>      Document d = new Document();              
>>>> addEvFieldsToIndexDoc(d,
>>>> ev);
>>>>      indexWriter.addDocument(d);
>>>>            if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
>>>>          System.out.println(name + " indexed " +
>>>> NumberFormat.getInstance().format(noOfEventsIndexed) + "  
>>>> Commiting them");
>>>>          commit();
>>>>      }                   }
>>>>
>>>> DerievdClass1
>>>>  protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>>>>      //noOfEventsIndexed++;
>>>>            Field id = new Field(EV_ID, Long.toString(ev.getId()),
>>>> Field.Store.YES, Field.Index.NO);
>>>>      Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),
>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>      Field type = new Field(EV_TYPE,
>>>> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
>>>> Field.Index.NOT_ANALYZED);
>>>>      Field pri = new Field(EV_PRI,  
>>>> Short.toString(ev.getPriority()) ,
>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>      Field time = new Field(EV_TIME,  
>>>> getHexString(ev.getRecvTime()) ,
>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>      d.add(id);
>>>>      d.add(src);
>>>>      d.add(type);
>>>>      d.add(pri);
>>>>      d.add(time);
>>>>      //noOfFieldsIndexed +=  4;
>>>>                  }
>>>>
>>>>
>>>>
>>>>
>>>> Thanks for the support.
>>>> ~preetham
>>>>
>>>>
>>>> Best
>>>>
>>>>> Erick
>>>>>
>>>>>
>>>>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <preetham@cisco.com
>>>>>
>>>>>> wrote:
>>>>>>
>>>>>
>>>>>
>>>>>> Hi Grant,
>>>>>> Thanks four response. Replies inline.
>>>>>>
>>>>>> Grant Ingersoll wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>>>>
>>>>>>> Hi,
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>>>>>
>>>>>>>> I am trying to index a Java object which has about 10 fields  
>>>>>>>> (like id,
>>>>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>>>>> In order to speed up indexing, I figured that having two  
>>>>>>>> separate
>>>>>>>> indexers, each of them indexing different set of fields works  
>>>>>>>> great. So
>>>>>>>> I
>>>>>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> Can you explain this a bit more?  Are those two fields really  
>>>>>>> large org
>>>>>>> something?  How are you obtaining them?  How are you  
>>>>>>> correlating the
>>>>>>> documents between the two indexes?  Did you actually try a  
>>>>>>> single index
>>>>>>> and
>>>>>>> it was too slow?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> I have a java object which has about 10 fields. However, the  
>>>>>> fields are
>>>>>> not
>>>>>> fixed. The java object is essentially a representation of  
>>>>>> Syslogs from
>>>>>> network devices. So different syslogs have different fields.  
>>>>>> Each field
>>>>>> has
>>>>>> a unique id and a value (mostly numeric types, so i convert it to
>>>>>> string).
>>>>>> There are some fixed fields. So the object is a list of fields  
>>>>>> which is
>>>>>> produced by a parser.
>>>>>> I am trying to index using two indexers in two separate  
>>>>>> threads- one for
>>>>>> fixed and another for the non-fixed fields. Except for a unique  
>>>>>> id, I do
>>>>>> not
>>>>>> store the fields in Lucene - i just index them. From the index,  
>>>>>> i get the
>>>>>> unique id which is all I care about. (the objects are stored  
>>>>>> elsewhere
>>>>>> and
>>>>>> can be looked up based on this unique id).
>>>>>> I did try using a single indexer, but things were quite slow.  
>>>>>> Getting
>>>>>> high
>>>>>> throughput is crucial and having two indexers seemed to do very  
>>>>>> well.
>>>>>> (more
>>>>>> than twice as fast)
>>>>>>
>>>>>> Further, the index will never be modified and I can have just  
>>>>>> one thread
>>>>>> writing to the index. If there are any other performance tips  
>>>>>> would be
>>>>>> very
>>>>>> helpful. I have already looked at the wiki link regarding  
>>>>>> performance and
>>>>>> using some of them.
>>>>>>
>>>>>> Thanks,
>>>>>> ~preetham
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Now, I want to have boolean AND query's looking for values in  
>>>>>>> both
>>>>>>>
>>>>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in  
>>>>>>>> two separate
>>>>>>>> indexes. Would using the MultiIndexReader help ? Since I am  
>>>>>>>> doing an
>>>>>>>> AND, I
>>>>>>>> dont expect that it would work.
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>> ~preetham
>>>>>>>>
>>>>>>>> ---------------------------------------------------------------------
>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> --------------------------
>>>>>>> Grant Ingersoll
>>>>>>>
>>>>>>> Lucene Helpful Hints:
>>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user- 
>>>>>>> help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 18:42:37 2008
Return-Path: <java-user-return-37836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43178 invoked from network); 18 Dec 2008 18:42:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 18:42:37 -0000
Received: (qmail 31211 invoked by uid 500); 18 Dec 2008 18:42:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30681 invoked by uid 500); 18 Dec 2008 18:42:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30669 invoked by uid 99); 18 Dec 2008 18:42:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 10:42:41 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 18:42:20 +0000
Received: by yw-out-2324.google.com with SMTP id 3so198233ywj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 10:41:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=2hvLzOq2IBepXvpP++8OT3mBv1Rw5jkQuxtgXgYnezs=;
        b=skPlEvg7VDS+dfUWvMCLQPBiI55hXrrEVM+3bFiReFBK14Qqw7prC/H9IGzdCrSeh7
         zRdSak2jHwHJM/r6CfdDofRIw973Mf12Ql3mUL4iy7MyViKGFXhln+Yl/Wo299IaCQdD
         vzVrTaFwtPZBJz3I5RQUGYP7tRSJkNJbQXNn8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=xGC4mj4xTyLQNDGvqfho3Ni539H3j6lyu+PSPy7l5hggXPh7HG6+SXqAPnDTSN8zWF
         DlV/Y2oYIXGeSfVgPBkxVnk8FHnCbNshVlc9RvIhamfubz2RW6NBqYbUaTGd3KS3VSow
         fpBPwPtSceD2TVYFjGLIHT5tZiaZDrDjbXf6k=
Received: by 10.90.91.2 with SMTP id o2mr1116379agb.115.1229625718775;
        Thu, 18 Dec 2008 10:41:58 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Thu, 18 Dec 2008 10:41:58 -0800 (PST)
Message-ID: <359a92830812181041n3c8f44e4vad9c029b5bd261@mail.gmail.com>
Date: Thu, 18 Dec 2008 13:41:58 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
In-Reply-To: <494A7E57.1030206@cisco.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28819_21307977.1229625718766"
References: <494894D2.9010901@cisco.com> <49490F4B.1030607@cisco.com>
	 <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>
	 <49491EED.4070403@cisco.com>
	 <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com>
	 <4949D6D6.7000402@cisco.com> <494A1FE2.8010101@cisco.com>
	 <359a92830812180519i5ed550bct8e1bbd4b37cb598@mail.gmail.com>
	 <494A7384.2030003@cisco.com> <494A7E57.1030206@cisco.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28819_21307977.1229625718766
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would recommend, very strongly, that you don't rely on the doc IDs being
the same in two different indexes. Doc IDs are just incremented by one
for each doc added, but.....

optimization can change the doc ID. and is guaranteed to change at
least some of them if there are deletions from your index. If you, for
whatever reason indexed document N in one index and then skipped
it in the other, all subsequent document IDs would not match. If.....

The fact that your IDs are the same is more than undocumented, it
is coincidental.

Best
Erick

On Thu, Dec 18, 2008 at 11:46 AM, Preetham Kajekar <preetham@cisco.com>wrote:

> Hi,
> I noticed that the doc id is the same. So, if I have HitCollector, just
> collect the doc-ids of both Searchers (for the two indexes) and find the
> intersection between them, it would work. Also, get the doc is even where
> there are large number of hits is fast.
>
> Of course, I am using something undocumented of Lucene.
>
>
> Thanks,
> ~preetham
>
> Preetham Kajekar wrote:
>
>> Thanks. Yep the code is very easy. However, it take about 3 mins to
>> complete merging.
>>
>> Looks like I will need to have an out of band merging of indexes once they
>> are closed (planning to store about 50mil entries in each index partition)
>>
>>
>> However, as the data is being indexed, is there any other way to combine
>> results ?
>>
>> I could get the results of one index, get all the hits and then apply this
>> as a filter for the next index. But if there are large number of hits (which
>> is likely to be the case), this would not perform too well.
>>
>> Do you think the document id can be used in anyway. How is the document id
>> generated ? After all, i have the two indexes operating on a common List of
>> objects. Would the doc is in index1 and index2 for object N in the list be
>> the same ?
>>
>>
>> Thanks,
>> ~preetham
>>
>> Erick Erickson wrote:
>>
>>> You will be stunned at how easy it is. The merging code should be
>>> a dozen lines (and that only if you are merging 6 or so indexes)....
>>>
>>> See IndexWriter.addIndexes or
>>> IndexWriter.addIndexesNoOptimize
>>>
>>> Best
>>> Erick
>>>
>>> On Thu, Dec 18, 2008 at 5:03 AM, Preetham Kajekar <preetham@cisco.com
>>> >wrote:
>>>
>>>
>>>
>>>> Hi,
>>>> I tried out a single IndexWriter used by two threads to index different
>>>> fields. It is slower than using two separate IndexWriters. These are my
>>>> findings
>>>>
>>>> All Fields (9) using 1 IndexWriter 1 Thread - 38,000 object per sec
>>>> 5 Fields       using 1 IndexWriter 1 Thread - 62,000 object per sec
>>>> All Fields (9) using 1 IndexWriter 2 Thread - 29,000 object per sec
>>>> All Fields (9) using 2 IndexWriter 2 Thread - 55,000 object per sec
>>>>
>>>> So, it looks like I will have figure how to combine results of multiple
>>>> indexes.
>>>>
>>>> Thanks,
>>>> ~preetham
>>>>
>>>>
>>>> Preetham Kajekar wrote:
>>>>
>>>>
>>>>
>>>>> Thanks Erick and Michael.
>>>>> I will try out these suggestions and post my findings.
>>>>>
>>>>> ~preetham
>>>>>
>>>>> Erick Erickson wrote:
>>>>>
>>>>>
>>>>>
>>>>>> Well, maybe if I'd read the original post more carefully I'd have
>>>>>> figured
>>>>>> that out,
>>>>>> sorry 'bout that.
>>>>>>
>>>>>> I *think* I remember reading somewhere on the email lists that your
>>>>>> indexing
>>>>>> speed goes up pretty linearly as the number of indexing tasks
>>>>>> approaches
>>>>>> the number of CPUs. Are you, perhaps, on a dual-core machine? But do
>>>>>> search
>>>>>> the mail archives because my memory may not be accurate.
>>>>>>
>>>>>> You can easily combine indexes by IndexWriter.addIndexes BTW.
>>>>>> Personally
>>>>>> I prefer fewer indexes if you can get away with it. But I'd only try
>>>>>> this
>>>>>> after
>>>>>> Michael's suggestion of using multiple threads on a single underlying
>>>>>> writer.
>>>>>>
>>>>>> You could even think about using N machines to create M fragments then
>>>>>> combining them all afterwards if your logs are static enough to make
>>>>>> that
>>>>>> reasonable. Combining indexes may take a while though.....
>>>>>>
>>>>>> Best
>>>>>> Erick
>>>>>>
>>>>>> On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar <
>>>>>> preetham@cisco.com
>>>>>>
>>>>>>
>>>>>>> wrote:
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Hi Erick,
>>>>>>> Thanks for the response. Replies inline.
>>>>>>>
>>>>>>> Erick Erickson wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> The very first question is always "are you opening a new searcher
>>>>>>>> each time you query"? But you've looked at the Wiki so I assume not.
>>>>>>>> This question is closely tied to what kind of latency you can
>>>>>>>> tolerate.
>>>>>>>>
>>>>>>>> A few more details, please. What's slow? Queries? Indexing?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> Indexing. Again, it is not slow. It is just faster with two separate
>>>>>>> indexers in two threads.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> How slow? 100ms? 100s? What are your target times and
>>>>>>>> what are you seeing?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> With a single indexer in a single thread, I can index about 20,000
>>>>>>> event
>>>>>>> objects per second. With 2 thread and 2 indexers, it is close to
>>>>>>> 50,000.
>>>>>>> :-)
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> How big is your index? 100M? 100G? What kind of VM
>>>>>>>> parameters are you specifying?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> The index will have about 20mil entries. The size of the index lands
>>>>>>> up
>>>>>>> being about 500M.
>>>>>>> I start the VM with 1G of heap. No other options for GC etc is used.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> As an aside, do note that there's no requirement in Lucene that
>>>>>>>> each document have the same fields, so it's unclear why you
>>>>>>>> need two indexes, but perhaps some of the answers to the above
>>>>>>>> will help us understand.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> Like I mentioned, Lucene does the job much faster with two indexes.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Also, be very very careful what you measure when you measure
>>>>>>>> queries. You absolutely *have* to put some instrumentation in
>>>>>>>> the code since "slow queries" can result from things other than
>>>>>>>> searching. For instance, iterating over a Hits object for 100s of
>>>>>>>> documents....
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> The Query speeds are much faster than what I need :-) So no complains
>>>>>>> here.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Show the code, man <G>!
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> Code below. EvIndexer is the base class. There are two subclasses
>>>>>>> which
>>>>>>> implement addEvFieldsToIndexDoc() (template pattern) to add different
>>>>>>> fields
>>>>>>> to the index. that code is also pasted below
>>>>>>>
>>>>>>> --Code ---
>>>>>>>
>>>>>>> BaseClass
>>>>>>>
>>>>>>>  public EvIndexer(String indexName) throws Exception {
>>>>>>>     this.name = indexName;
>>>>>>>     a = new KeywordAnalyzer();
>>>>>>>     INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,
>>>>>>> "./index/");
>>>>>>>     FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH +
>>>>>>> File.separatorChar + indexName, NoLockFactory.getNoLockFactory());
>>>>>>>     indexWriter = new IndexWriter(directory, a,
>>>>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>>>> //indexWriter.setUseCompoundFile(false);
>>>>>>>     //indexWriter.setRAMBufferSizeMB(256);
>>>>>>>       }
>>>>>>>     /** Method implemented by extending classes to add data into the
>>>>>>> index document for the
>>>>>>>  *  given event
>>>>>>>  *
>>>>>>>  * @param d
>>>>>>>  */
>>>>>>>  protected abstract void addEvFieldsToIndexDoc(Document d, Ev event);
>>>>>>>   public void addToIndex(Ev ev) throws Exception {
>>>>>>>     noOfEventsIndexed++;
>>>>>>>     Document d = new Document();             addEvFieldsToIndexDoc(d,
>>>>>>> ev);
>>>>>>>     indexWriter.addDocument(d);
>>>>>>>           if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
>>>>>>>         System.out.println(name + " indexed " +
>>>>>>> NumberFormat.getInstance().format(noOfEventsIndexed) + " Commiting
>>>>>>> them");
>>>>>>>         commit();
>>>>>>>     }                   }
>>>>>>>
>>>>>>> DerievdClass1
>>>>>>>  protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>>>>>>>     //noOfEventsIndexed++;
>>>>>>>           Field id = new Field(EV_ID, Long.toString(ev.getId()),
>>>>>>> Field.Store.YES, Field.Index.NO);
>>>>>>>     Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),
>>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>>     Field type = new Field(EV_TYPE,
>>>>>>> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
>>>>>>> Field.Index.NOT_ANALYZED);
>>>>>>>     Field pri = new Field(EV_PRI, Short.toString(ev.getPriority()) ,
>>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>>     Field time = new Field(EV_TIME, getHexString(ev.getRecvTime()) ,
>>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>>     d.add(id);
>>>>>>>     d.add(src);
>>>>>>>     d.add(type);
>>>>>>>     d.add(pri);
>>>>>>>     d.add(time);
>>>>>>>     //noOfFieldsIndexed +=  4;
>>>>>>>                 }
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Thanks for the support.
>>>>>>> ~preetham
>>>>>>>
>>>>>>>
>>>>>>>  Best
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Erick
>>>>>>>>
>>>>>>>>
>>>>>>>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <
>>>>>>>> preetham@cisco.com
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>> Hi Grant,
>>>>>>>>> Thanks four response. Replies inline.
>>>>>>>>>
>>>>>>>>> Grant Ingersoll wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>>>>>>>
>>>>>>>>>>  Hi,
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>> I am new to Lucene. I am not using it as a pure text indexer.
>>>>>>>>>>>
>>>>>>>>>>> I am trying to index a Java object which has about 10 fields
>>>>>>>>>>> (like
>>>>>>>>>>> id,
>>>>>>>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>>>>>>>> In order to speed up indexing, I figured that having two separate
>>>>>>>>>>> indexers, each of them indexing different set of fields works
>>>>>>>>>>> great.
>>>>>>>>>>> So
>>>>>>>>>>> I
>>>>>>>>>>> have the first 5 fields in index1 and the remaining in index2.
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>> Can you explain this a bit more?  Are those two fields really
>>>>>>>>>> large
>>>>>>>>>> org
>>>>>>>>>> something?  How are you obtaining them?  How are you correlating
>>>>>>>>>> the
>>>>>>>>>> documents between the two indexes?  Did you actually try a single
>>>>>>>>>> index
>>>>>>>>>> and
>>>>>>>>>> it was too slow?
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>> I have a java object which has about 10 fields. However, the fields
>>>>>>>>> are
>>>>>>>>> not
>>>>>>>>> fixed. The java object is essentially a representation of Syslogs
>>>>>>>>> from
>>>>>>>>> network devices. So different syslogs have different fields. Each
>>>>>>>>> field
>>>>>>>>> has
>>>>>>>>> a unique id and a value (mostly numeric types, so i convert it to
>>>>>>>>> string).
>>>>>>>>> There are some fixed fields. So the object is a list of fields
>>>>>>>>> which
>>>>>>>>> is
>>>>>>>>> produced by a parser.
>>>>>>>>> I am trying to index using two indexers in two separate threads-
>>>>>>>>> one
>>>>>>>>> for
>>>>>>>>> fixed and another for the non-fixed fields. Except for a unique id,
>>>>>>>>> I
>>>>>>>>> do
>>>>>>>>> not
>>>>>>>>> store the fields in Lucene - i just index them. From the index, i
>>>>>>>>> get
>>>>>>>>> the
>>>>>>>>> unique id which is all I care about. (the objects are stored
>>>>>>>>> elsewhere
>>>>>>>>> and
>>>>>>>>> can be looked up based on this unique id).
>>>>>>>>> I did try using a single indexer, but things were quite slow.
>>>>>>>>> Getting
>>>>>>>>> high
>>>>>>>>> throughput is crucial and having two indexers seemed to do very
>>>>>>>>> well.
>>>>>>>>> (more
>>>>>>>>> than twice as fast)
>>>>>>>>>
>>>>>>>>> Further, the index will never be modified and I can have just one
>>>>>>>>> thread
>>>>>>>>> writing to the index. If there are any other performance tips would
>>>>>>>>> be
>>>>>>>>> very
>>>>>>>>> helpful. I have already looked at the wiki link regarding
>>>>>>>>> performance
>>>>>>>>> and
>>>>>>>>> using some of them.
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>> ~preetham
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> Now, I want to have boolean AND query's looking for values in both
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in two
>>>>>>>>>>> separate
>>>>>>>>>>> indexes. Would using the MultiIndexReader help ? Since I am doing
>>>>>>>>>>> an
>>>>>>>>>>> AND, I
>>>>>>>>>>> dont expect that it would work.
>>>>>>>>>>>
>>>>>>>>>>> Thanks,
>>>>>>>>>>> ~preetham
>>>>>>>>>>>
>>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>> --------------------------
>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>
>>>>>>>>>> Lucene Helpful Hints:
>>>>>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>> ---------------------------------------------------------------------
>>>>>>>>>
>>>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> ---------------------------------------------------------------------
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_28819_21307977.1229625718766--

From java-user-return-37837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 19:44:50 2008
Return-Path: <java-user-return-37837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64049 invoked from network); 18 Dec 2008 19:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 19:44:50 -0000
Received: (qmail 42064 invoked by uid 500); 18 Dec 2008 19:44:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42040 invoked by uid 500); 18 Dec 2008 19:44:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42023 invoked by uid 99); 18 Dec 2008 19:44:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 11:44:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kaykay.unique@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 19:44:34 +0000
Received: by ug-out-1314.google.com with SMTP id c2so430517ugf.23
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 11:44:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=MoYnnLvY39GmZiXo3Lwoou16OOazNdRr+Agte+oPxEM=;
        b=s8kxr4yrhjXpyytBNerVejICCviMrUZCtp//0po/KzYCko2hBYQS8v5TYuweKiaat1
         6KABIp7AFsO26hZhHmFIOKcWUThNZHAqU8XvKfIDrJeGqyFznnF9LhShvi+ydKlfb/OM
         Wl6GAWVA6rCyszQsfkb+if6C6vbkPM01YHMLk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=IongTSzQ0ew9gbwbFQ8wKZlLPFL9noM1pErjIIIwfvE8DqDaggvzjucDkIpPqkDy84
         BtSxGP0B5wX1GO4XfNn9ToVHCXb9A1fKhzUPWx7sAImOYf1P0KemLc6kMGXSQaxLx0dO
         W8f4xQNgrbomU2LmJP+KY8dT/yjig4jbnbFB8=
Received: by 10.66.220.12 with SMTP id s12mr4369744ugg.22.1229629453724;
        Thu, 18 Dec 2008 11:44:13 -0800 (PST)
Received: from ?192.168.254.172? ([64.20.188.2])
        by mx.google.com with ESMTPS id l20sm2522076uga.14.2008.12.18.11.44.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 18 Dec 2008 11:44:12 -0800 (PST)
Message-ID: <494AA80C.2020104@gmail.com>
Date: Thu, 18 Dec 2008 14:44:12 -0500
From: Kay Kay <kaykay.unique@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Approximate release date for Lucene 2.9 
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi -
  I am just curious - what is the approximate release target date that we have for Lucene 2.9 ( currently in beta in dev).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 21:58:26 2008
Return-Path: <java-user-return-37838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21432 invoked from network); 18 Dec 2008 21:58:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 21:58:25 -0000
Received: (qmail 41145 invoked by uid 500); 18 Dec 2008 21:58:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41114 invoked by uid 500); 18 Dec 2008 21:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41099 invoked by uid 99); 18 Dec 2008 21:58:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 13:58:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 21:58:10 +0000
Received: by rn-out-0910.google.com with SMTP id j71so534412rne.4
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 13:57:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=t/Vp+Nrab935c6gJ4hSk0GNWBijlR6xOAtBvIEcwsdM=;
        b=Le2z0siVK1+KBu8y6pZVk2RcQcFD75iiLXa4Sc4EEWrFpAEjQ6Em26Qh+0QT00gCuQ
         qlpuFUQ553FdXDtWzLXd4z55CcilkyqlMuKUy+6WutHouBeMruWEpuGh3ynYSVq1Ai4P
         2Y8xJutwfzmNwcwpwRyJKJsTN78+1/j2I9hTo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Saza65p03SqdNgi/8kYlfCXzDifzyY4ruaWSrXq156idDpoLy7FE7LKveNN7vbmX1f
         W7UZCutPe63RUrywZhSk9DL7tyl7CYf6wI2LNAVm4wdwJT3iH0MLbS5aVmA5+wNJTxAY
         Dt+q1ZRMW2mUJ2UbCqBCBrpypvpZOjS9hSeis=
Received: by 10.90.83.2 with SMTP id g2mr1435722agb.79.1229637470023;
        Thu, 18 Dec 2008 13:57:50 -0800 (PST)
Received: by 10.90.25.16 with HTTP; Thu, 18 Dec 2008 13:57:49 -0800 (PST)
Message-ID: <8837fb770812181357y1d4e6804x200d3dd2a74b102d@mail.gmail.com>
Date: Thu, 18 Dec 2008 13:57:49 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Field.omitTF
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30178_32302919.1229637470002"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30178_32302919.1229637470002
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:
   In lucene 2.4, when Field.omitTF() is called, payload is disabled as
well. Is this intentional? My understanding is payload is independent from
the term frequencies.

Thanks

-John

------=_Part_30178_32302919.1229637470002--

From java-user-return-37839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 22:06:22 2008
Return-Path: <java-user-return-37839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30257 invoked from network); 18 Dec 2008 22:06:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 22:06:22 -0000
Received: (qmail 56056 invoked by uid 500); 18 Dec 2008 22:06:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56029 invoked by uid 500); 18 Dec 2008 22:06:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56016 invoked by uid 99); 18 Dec 2008 22:06:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 14:06:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 22:06:06 +0000
Received: by qyk13 with SMTP id 13so687197qyk.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 14:05:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=zZCeNO1cAn3QdYFbXLYMy1x4cYrn7+dLYzQDDOKt6bY=;
        b=EpgRHyh1q+MTtDK8ORTobNPPMCwlV2r3E/ZQM3kzxA4FhEZenqkEoUdRIMoUvG6duf
         x2cD4ziix2byQ+x+sATddEmmuXbNjUMx/pVGVJBxa4ZefNBYbg2RF+DU8Sea8h0/ku7/
         Cmi1ladm/ao+0+PEwtLLcMbF2vc6HOwfwpCeg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=bBRObcS7yCec7wfO7P87/E5d3lSG1B5biiKsmCbnHVIMwOb226dM1SCWgoKjgGigcp
         XGORR3QBuQWj5Rte1XuO1Wrz8wBmMrVpD6+bqyAQ7BApn/nTMdf3VAqZ/cg5l+5lDeFo
         61OjYRTWqPeIgdiO1W8UyzbU5O4XCaIKkFgag=
Received: by 10.214.79.13 with SMTP id c13mr3251342qab.170.1229637943716;
        Thu, 18 Dec 2008 14:05:43 -0800 (PST)
Received: from ?10.149.89.112? ([32.138.8.234])
        by mx.google.com with ESMTPS id 5sm11465280qwg.45.2008.12.18.14.05.40
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 18 Dec 2008 14:05:42 -0800 (PST)
Message-Id: <595E27AC-AA89-406D-8875-9B55A1D292F1@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <8837fb770812181357y1d4e6804x200d3dd2a74b102d@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: Field.omitTF
Date: Thu, 18 Dec 2008 17:05:33 -0500
References: <8837fb770812181357y1d4e6804x200d3dd2a74b102d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Drops positions as well.

- Mark


On Dec 18, 2008, at 4:57 PM, "John Wang" <john.wang@gmail.com> wrote:

> Hi:
>   In lucene 2.4, when Field.omitTF() is called, payload is disabled as
> well. Is this intentional? My understanding is payload is  
> independent from
> the term frequencies.
>
> Thanks
>
> -John

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 22:10:45 2008
Return-Path: <java-user-return-37840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32911 invoked from network); 18 Dec 2008 22:10:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 22:10:45 -0000
Received: (qmail 64002 invoked by uid 500); 18 Dec 2008 22:10:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63973 invoked by uid 500); 18 Dec 2008 22:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63962 invoked by uid 99); 18 Dec 2008 22:10:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 14:10:50 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 22:10:30 +0000
Received: by yw-out-2324.google.com with SMTP id 3so234808ywj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 14:10:07 -0800 (PST)
Received: by 10.90.73.16 with SMTP id v16mr1441404aga.104.1229638207725;
        Thu, 18 Dec 2008 14:10:07 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 18sm15324772agb.12.2008.12.18.14.10.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 18 Dec 2008 14:10:05 -0800 (PST)
Message-Id: <FEF1ADF0-6132-440C-B41B-3DCE2831620D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <494AA80C.2020104@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Approximate release date for Lucene 2.9 
Date: Thu, 18 Dec 2008 17:10:03 -0500
References: <494AA80C.2020104@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Well... there are a couple threads on java-dev discussing this "now":

   http://www.nabble.com/2.9-3.0-plan---Java-1.5-td20972994.html
   http://www.nabble.com/2.9,-3.0-and-deprecation-td20099343.html

though they seem to have petered out.

Also we have 29 open issues for 2.9:

   https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&&pid=12310110&fixfor=12312682&resolution=-1&sorter/field=priority&sorter/order=DESC

For 2.4 it took at least a month to whittle the list down to 0.

So it's hard to say?  I'd love to see 2.9 out earlyish next year though.

Mike

Kay Kay wrote:

> Hi -
> I am just curious - what is the approximate release target date that  
> we have for Lucene 2.9 ( currently in beta in dev).
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 18 22:23:28 2008
Return-Path: <java-user-return-37841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41085 invoked from network); 18 Dec 2008 22:23:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2008 22:23:28 -0000
Received: (qmail 81577 invoked by uid 500); 18 Dec 2008 22:23:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81550 invoked by uid 500); 18 Dec 2008 22:23:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81539 invoked by uid 99); 18 Dec 2008 22:23:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 14:23:33 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of john.wang@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 22:23:12 +0000
Received: by yw-out-2324.google.com with SMTP id 3so236662ywj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 14:22:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Xmh11pYdf9r7s3Laf3RnUQhf+TrN6JQvorLFvJgv3/M=;
        b=AK2/dLaD0FyxANMzFgHZXx2Akr4YPXNCFVRFgX0WbO4zg0nhaU2cslbiHfmnXQW2gB
         2qhO+2ckPmWJUeCyK3+6KdVdULa9KHBQpqX4rYwPGIdbVFNW1UjAyGUBB7QmEVG7wRhc
         UeMVhpBwvcSQOfbB53uw4USJjODfGpWzTyjf8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hixOm0uy/W9NIy1lDThq3piV9Bhs4K/FoVJORtnisUEp7VhoUsPybEAVytemwbIujt
         YFIN/75ipf6HUC2uz6y2rCRW11gvNPVIjVYqitJ5kSpecSaebliIwz59BLHkQDrUsZNy
         cAY5w4dME61inZKpJ/PIzWBgrRxW7GjDtPMEg=
Received: by 10.90.96.15 with SMTP id t15mr1462016agb.37.1229638971954;
        Thu, 18 Dec 2008 14:22:51 -0800 (PST)
Received: by 10.90.25.16 with HTTP; Thu, 18 Dec 2008 14:22:51 -0800 (PST)
Message-ID: <8837fb770812181422j4fa5d296q4ea436f517aea4f2@mail.gmail.com>
Date: Thu, 18 Dec 2008 14:22:51 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field.omitTF
In-Reply-To: <595E27AC-AA89-406D-8875-9B55A1D292F1@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30485_22091599.1229638971946"
References: <8837fb770812181357y1d4e6804x200d3dd2a74b102d@mail.gmail.com>
	 <595E27AC-AA89-406D-8875-9B55A1D292F1@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30485_22091599.1229638971946
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Mark!I don't think it is documented (at least the ones I've read),
should this be considered as a bug or ... ?

Thanks

-John

On Thu, Dec 18, 2008 at 2:05 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Drops positions as well.
>
> - Mark
>
>
>
> On Dec 18, 2008, at 4:57 PM, "John Wang" <john.wang@gmail.com> wrote:
>
>  Hi:
>>  In lucene 2.4, when Field.omitTF() is called, payload is disabled as
>> well. Is this intentional? My understanding is payload is independent from
>> the term frequencies.
>>
>> Thanks
>>
>> -John
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_30485_22091599.1229638971946--

From java-user-return-37842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 02:14:03 2008
Return-Path: <java-user-return-37842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30721 invoked from network); 19 Dec 2008 02:14:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 02:14:03 -0000
Received: (qmail 60478 invoked by uid 500); 19 Dec 2008 02:14:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59481 invoked by uid 500); 19 Dec 2008 02:14:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59470 invoked by uid 99); 19 Dec 2008 02:14:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 18:14:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 02:13:47 +0000
Received: by yx-out-2324.google.com with SMTP id 3so259368yxj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 18:13:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=FaWtZEs+Cf08vJWpZDzGEmIm39yL5Gmbmst6gFXFvt8=;
        b=l2LPvlrNoB2pZ+eksKX6heqWV8xyFJ45TBXYH3f4Qod2skp3D5L/x6H6kzLHSoAUAJ
         Ie3Bv9TwpxVoOTQFYXTpR7q+MXGnXLu3BIHZIa8sMQFcmNtego/H6ga2nMXqHLG9toq0
         8ZaUNoPBU5aliWIHRhWkbj+HDaT4WCOsdUuSU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=KXl+imEe6Frk1Z+QkffZz2xMRtcqqiaMycyrS1OWpxU25nuKAEVmjFawWZ4S3MwxWP
         gKLSHG0df6fcF9OgYppPoUY61rA6kGAm/CZOsUMlNTVXoxrX99Wqy2hnJz6WChZ4CSTp
         43jPISTfn7mLNeXQSj1Upv2LKWeoxNTyGUZvU=
Received: by 10.90.53.4 with SMTP id b4mr1538823aga.88.1229652806872;
        Thu, 18 Dec 2008 18:13:26 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 36sm15663543agc.9.2008.12.18.18.13.25
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 18 Dec 2008 18:13:26 -0800 (PST)
Message-ID: <494B0345.5000501@gmail.com>
Date: Thu, 18 Dec 2008 21:13:25 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Field.omitTF
References: <8837fb770812181357y1d4e6804x200d3dd2a74b102d@mail.gmail.com>	 <595E27AC-AA89-406D-8875-9B55A1D292F1@gmail.com> <8837fb770812181422j4fa5d296q4ea436f517aea4f2@mail.gmail.com>
In-Reply-To: <8837fb770812181422j4fa5d296q4ea436f517aea4f2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

No, not a bug, certainly its the intended behavior (though the name is a 
bit tricky isn't it? I've actually thought about that in the past 
myself). If you check out the javadoc on Fieldable youll find:

  /** Expert:
   *
   * If set, omit term freq, positions and payloads from postings for 
this field.
   */
  void setOmitTf(boolean omitTf);

- Mark

John Wang wrote:
> Thanks Mark!I don't think it is documented (at least the ones I've read),
> should this be considered as a bug or ... ?
>
> Thanks
>
> -John
>
> On Thu, Dec 18, 2008 at 2:05 PM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> Drops positions as well.
>>
>> - Mark
>>
>>
>>
>> On Dec 18, 2008, at 4:57 PM, "John Wang" <john.wang@gmail.com> wrote:
>>
>>  Hi:
>>     
>>>  In lucene 2.4, when Field.omitTF() is called, payload is disabled as
>>> well. Is this intentional? My understanding is payload is independent from
>>> the term frequencies.
>>>
>>> Thanks
>>>
>>> -John
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 04:20:11 2008
Return-Path: <java-user-return-37843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82597 invoked from network); 19 Dec 2008 04:20:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 04:20:11 -0000
Received: (qmail 51439 invoked by uid 500); 19 Dec 2008 04:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51406 invoked by uid 500); 19 Dec 2008 04:20:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51395 invoked by uid 99); 19 Dec 2008 04:20:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 20:20:10 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 04:19:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LDWpm-0002ej-Fj
	for java-user@lucene.apache.org; Thu, 18 Dec 2008 20:19:30 -0800
Message-ID: <21085589.post@talk.nabble.com>
Date: Thu, 18 Dec 2008 20:19:30 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: optimize: went from 14488449 to 38449
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Ok. This is crazy. I have an index with 14,488,449 docs in it. Today I did a
CheckIndex on it and everything looked fine. I made a copy of the index, ran
a delete on about 1.3 million docs and then did an optimize and now my doc
count is 38449.

The index was originally built with 2.3, but I am now using 2.4.

Of course I have the original index, but what would have cause this?
-- 
View this message in context: http://www.nabble.com/optimize%3A-went-from-14488449-to-38449-tp21085589p21085589.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 04:31:01 2008
Return-Path: <java-user-return-37844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85268 invoked from network); 19 Dec 2008 04:31:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 04:31:01 -0000
Received: (qmail 58945 invoked by uid 500); 19 Dec 2008 04:31:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58917 invoked by uid 500); 19 Dec 2008 04:31:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58906 invoked by uid 99); 19 Dec 2008 04:31:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 20:31:06 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.123] (HELO smtp140.mail.mud.yahoo.com) (209.191.107.123)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Dec 2008 04:30:44 +0000
Received: (qmail 71695 invoked from network); 19 Dec 2008 04:30:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=FJqLfGIuRLuDc0Sx2hqU0wCpk6GxFW8/o4gvoxkxlUEOzh0hqbkmZeFaHpwedEjCa2crAgNU4IgA0jNWD/fEgX1XDzdMGj+SKzottaN81GRfK7D3yuV4pQsDeeN3AIO2DBfre7lavHcA6wt9VTzdx5baEhwSTzQnpYNhTFri+IU=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp140.mail.mud.yahoo.com with SMTP; 19 Dec 2008 04:30:21 -0000
X-YMail-OSG: 8UilepgVM1k._JW8WtBHfRO3yZJpLz5GFoiq2fIinlpUheWwsGMhkoK63KHgCgVXYZ9uDAb15mzQhyohTHkKBFTUmGBr95SkuN2f0mD56hocT6JmKNqLR5vpPoHLiyxj6EplCkuYGTu7L34MwagR0H1K9a2S0JsBpCoY0WTTQXLJetE7B9PBn_G7XNxniZWKyCNXWYRFnz8Vw1zVrRP2It05zHTFWY3gFIc0SSZq808-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <014201c96192$81938ce0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <494AA80C.2020104@gmail.com> <FEF1ADF0-6132-440C-B41B-3DCE2831620D@mikemccandless.com>
Subject: Re: Approximate release date for Lucene 2.9 
Date: Fri, 19 Dec 2008 10:00:17 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Does Lucene 2.9 has real time search? Any improvements in sorting? Any 
facility to store a payload per document (without updating document)?

Please highlight the important feature?

Regards
Ganesh

----- Original Message ----- 
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Friday, December 19, 2008 3:40 AM
Subject: Re: Approximate release date for Lucene 2.9


>
> Well... there are a couple threads on java-dev discussing this "now":
>
>   http://www.nabble.com/2.9-3.0-plan---Java-1.5-td20972994.html
>   http://www.nabble.com/2.9,-3.0-and-deprecation-td20099343.html
>
> though they seem to have petered out.
>
> Also we have 29 open issues for 2.9:
>
> 
> https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&&pid=12310110&fixfor=12312682&resolution=-1&sorter/field=priority&sorter/order=DESC
>
> For 2.4 it took at least a month to whittle the list down to 0.
>
> So it's hard to say?  I'd love to see 2.9 out earlyish next year though.
>
> Mike
>
> Kay Kay wrote:
>
>> Hi -
>> I am just curious - what is the approximate release target date that  we 
>> have for Lucene 2.9 ( currently in beta in dev).
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 04:41:25 2008
Return-Path: <java-user-return-37845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86658 invoked from network); 19 Dec 2008 04:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 04:41:24 -0000
Received: (qmail 65310 invoked by uid 500); 19 Dec 2008 04:41:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65276 invoked by uid 500); 19 Dec 2008 04:41:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65265 invoked by uid 99); 19 Dec 2008 04:41:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 20:41:30 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.85.15] (HELO smtp128.mail.mud.yahoo.com) (209.191.85.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Dec 2008 04:41:07 +0000
Received: (qmail 39882 invoked from network); 19 Dec 2008 04:40:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=3gw30l5z63dQ5a6D6bwqW/OFrms/VmTmEg+6c5Zo9DGf5lFmUEICTBgKVZB2Neq0TaXRRUqI9pSmr9QhP4ky+CEtUG9vp5D7+qCq1g8s5jqR/ouYd6H8c6U2Yd+z+KIL/6oqaCzhanr8rTZL3jEn/mdZ1phruys/oM7IKYP75po=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp128.mail.mud.yahoo.com with SMTP; 19 Dec 2008 04:40:44 -0000
X-YMail-OSG: 4JubrFQVM1mCXdlQG6lWOJ4jOBCi0PlsC_cFKiYHbBHWA0LPku8FoLnRSoC9.jhhpaoFKNM8UFLHUfAvP0Dk0vzuc1_OSht_BFiRT1I7j0CWUtPCTcitnGwaKSuDz5OjxChxhMG_f0ZyLdu1lvqaWYAEPl1AQZ7oh4QUGs3kS7reSB.crEFh5QNIMoS_KJEIDuBZULPIWRR_DKLOBjw9uW2CTJD8qspl
X-Yahoo-Newman-Property: ymail-3
Message-ID: <015e01c96193$f4cde1f0$710bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <21085589.post@talk.nabble.com>
Subject: Re: optimize: went from 14488449 to 38449
Date: Fri, 19 Dec 2008 10:10:42 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Optimize will remove the deletes and rearrange the document numbers.

Have you done some deletes before deleting 1.3 million docs?

Regards
Ganesh

----- Original Message ----- 
From: "1world1love" <jd_cowan@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Friday, December 19, 2008 9:49 AM
Subject: optimize: went from 14488449 to 38449


>
> Ok. This is crazy. I have an index with 14,488,449 docs in it. Today I did 
> a
> CheckIndex on it and everything looked fine. I made a copy of the index, 
> ran
> a delete on about 1.3 million docs and then did an optimize and now my doc
> count is 38449.
>
> The index was originally built with 2.3, but I am now using 2.4.
>
> Of course I have the original index, but what would have cause this?
> -- 
> View this message in context: 
> http://www.nabble.com/optimize%3A-went-from-14488449-to-38449-tp21085589p21085589.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 04:46:39 2008
Return-Path: <java-user-return-37846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87613 invoked from network); 19 Dec 2008 04:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 04:46:39 -0000
Received: (qmail 69883 invoked by uid 500); 19 Dec 2008 04:46:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69852 invoked by uid 500); 19 Dec 2008 04:46:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69841 invoked by uid 99); 19 Dec 2008 04:46:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 20:46:46 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 04:46:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LDXFU-0003W8-Fv
	for java-user@lucene.apache.org; Thu, 18 Dec 2008 20:46:04 -0800
Message-ID: <21085775.post@talk.nabble.com>
Date: Thu, 18 Dec 2008 20:46:04 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: optimize: went from 14488449 to 38449
In-Reply-To: <015e01c96193$f4cde1f0$710bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <21085589.post@talk.nabble.com> <015e01c96193$f4cde1f0$710bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Ganesh - yahoo wrote:
> 
> Optimize will remove the deletes and rearrange the document numbers.
> 
> Have you done some deletes before deleting 1.3 million docs?
> 
> 

No, that is the crazy part. I haven't done anything to this index since it
was first compiled until I did the deletes. That is why I made a copy of it
first because I had never done deletes before and wanted to be sure I didn't
mess anything up.

When I did the deletes, there were a few of the delete files in the index,
but not that many. My index went from 22GB to 77MB. 
-- 
View this message in context: http://www.nabble.com/optimize%3A-went-from-14488449-to-38449-tp21085589p21085775.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 04:58:38 2008
Return-Path: <java-user-return-37847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91835 invoked from network); 19 Dec 2008 04:58:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 04:58:38 -0000
Received: (qmail 77772 invoked by uid 500); 19 Dec 2008 04:58:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77741 invoked by uid 500); 19 Dec 2008 04:58:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77728 invoked by uid 99); 19 Dec 2008 04:58:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 20:58:43 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 04:58:22 +0000
Received: by yx-out-2324.google.com with SMTP id 3so272606yxj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 20:58:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=LhqKiNhByZ9nlGDyrrXhC8gK/qtlqD+mA/pWnSm0np4=;
        b=BBCzhqRRJ5vYcBCltgAQyeYMYLahZgBP7AV3IZ+yUi4lxI1Ka2tKjTEkSToMBIxgpZ
         CTfMkUtAKNMxhLmUxmPt8MRnZbkkkZnXA88Ywq8V4VFc7wXoVbtWsVNRT9xOkWKkjCuy
         2u/z4Xo8aV5/JUaupDNFdvklJR29FbyHjiTXg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=jPpSY2IZaZov3GMxn0G3GY8hYA4Xu8Nz0wwy4pBFcouAczp1L+gk2lIf+CSaYpyyUj
         nkJVuO1OAOTLuXsxXaU/NGkRkLB4zLFWjbaK6xFJUv5BrCWCwqfakDIMkLKHtFqDJS2q
         6tAt9k2NSynbNS/SCUyl7skpeYNVOoEE5c120=
Received: by 10.90.71.16 with SMTP id t16mr1599773aga.26.1229662681200;
        Thu, 18 Dec 2008 20:58:01 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm15780573aga.13.2008.12.18.20.58.00
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 18 Dec 2008 20:58:00 -0800 (PST)
Message-ID: <494B29D7.2030701@gmail.com>
Date: Thu, 18 Dec 2008 23:57:59 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Approximate release date for Lucene 2.9
References: <494AA80C.2020104@gmail.com> <FEF1ADF0-6132-440C-B41B-3DCE2831620D@mikemccandless.com> <014201c96192$81938ce0$710bc30a@sv.us.sonicwall.com>
In-Reply-To: <014201c96192$81938ce0$710bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Well look at the issues and see for yourself :)

Its a subjective call I think. Heres my take:

There are not going to be too many sweeping changes in the next release. 
There are tons of little bug fixes and improvements, but not a lot of 
the bullet point type stuff that you mention in your wishlist. Its a 
whole lot of little steps forward.

When it comes to sorting, there a couple possible goodies coming in the 
next release:

TrieRangeQuery has been added to contrib. Super awesome, super 
efficient, large scale sorting.

Work is ongoing to change searching semantics so that sorting is much 
faster in many cases. In fact, their may be search speed improvements 
across the board in many cases (don't quote me <g>). Sort fieldcache 
loading in the multi segment case will likely also be *blazingly* 
faster. Also, Filters and Fieldcaches may be pushed down to a single 
segment, making reopening sort fieldcaches *much* more efficient. Thats 
a nice step towards realtime.

RangeQuery, PrefixQuery and WildcardQuery will all have a constant score 
mode as well - this avoids maxclause limits and is often much faster on 
very large indexes.

Locallucene, a very cool bit of code that allows geo search, might make 
contrib for the next release.

Beyond that, there are a few more little gems, but its a lot of little 
fixes and improvements more than big features.

Column stride fields and flexible indexing will not be in the next 
release in my opinion, but a lot of progress towards flexible indexing 
has been made.

Keep in mind thats a biased view of the next release - I worked on two 
of those issues. Be sure to take it all with a healthy grain of salt.

- Mark

Ganesh wrote:
> Does Lucene 2.9 has real time search? Any improvements in sorting? Any 
> facility to store a payload per document (without updating document)?
>
> Please highlight the important feature?
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Michael McCandless" 
> <lucene@mikemccandless.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, December 19, 2008 3:40 AM
> Subject: Re: Approximate release date for Lucene 2.9
>
>
>>
>> Well... there are a couple threads on java-dev discussing this "now":
>>
>>   http://www.nabble.com/2.9-3.0-plan---Java-1.5-td20972994.html
>>   http://www.nabble.com/2.9,-3.0-and-deprecation-td20099343.html
>>
>> though they seem to have petered out.
>>
>> Also we have 29 open issues for 2.9:
>>
>>
>> https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&&pid=12310110&fixfor=12312682&resolution=-1&sorter/field=priority&sorter/order=DESC 
>>
>>
>> For 2.4 it took at least a month to whittle the list down to 0.
>>
>> So it's hard to say?  I'd love to see 2.9 out earlyish next year though.
>>
>> Mike
>>
>> Kay Kay wrote:
>>
>>> Hi -
>>> I am just curious - what is the approximate release target date 
>>> that  we have for Lucene 2.9 ( currently in beta in dev).
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> Send instant messages to your online friends 
> http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 05:33:23 2008
Return-Path: <java-user-return-37848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5926 invoked from network); 19 Dec 2008 05:33:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 05:33:23 -0000
Received: (qmail 97596 invoked by uid 500); 19 Dec 2008 05:33:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97356 invoked by uid 500); 19 Dec 2008 05:33:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97345 invoked by uid 99); 19 Dec 2008 05:33:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 21:33:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 05:33:05 +0000
Received: by yw-out-2324.google.com with SMTP id 3so277705ywj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 21:32:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=DxKXvChA56i+ilafYuRl/DuuXQWBu3GIDt/A8xb8mYU=;
        b=nnfpoXLnitl2Yqjr0W4TQGFobqh7k1O7GRu4Y5wiVLuTtr+haxXt6bA38/N1CLtlWF
         ZEfFKUgkKf9XG9P7KM/cLyiviz6E8jBJybAGj0NIDUgCxy4QWvRUslj/ylGJNGsZ1Y7W
         0kQpGDFEumfSMkNn+6Ql/Heb6v3eQxZzQL16g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=ji5Ol55DRDTONsDCnnNPd2bnJEXXiRqgzaeyZ07TSl1w0AXnDauG+GYqV8HxGqFbA5
         ldqt2/bcbmEr3jhwXqp1/9+UiOCNCIEVysc9pTE4/1za4+xlk8lHV6TdBn9O2ZC4hB9u
         Fsd/5eIm7IDeStxETHQa7HU5+FapT8ugbJDeA=
Received: by 10.90.84.17 with SMTP id h17mr1595098agb.86.1229664764653;
        Thu, 18 Dec 2008 21:32:44 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 1sm15782382agb.20.2008.12.18.21.32.43
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 18 Dec 2008 21:32:44 -0800 (PST)
Message-ID: <494B31FB.7070300@gmail.com>
Date: Fri, 19 Dec 2008 00:32:43 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Approximate release date for Lucene 2.9
References: <494AA80C.2020104@gmail.com> <FEF1ADF0-6132-440C-B41B-3DCE2831620D@mikemccandless.com> <014201c96192$81938ce0$710bc30a@sv.us.sonicwall.com> <494B29D7.2030701@gmail.com>
In-Reply-To: <494B29D7.2030701@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
>
>
> TrieRangeQuery has been added to contrib. Super awesome, super 
> efficient, large scale sorting.
>
Sorry. Its way past my bedtime. Large scale numerical range searching. 
Sorting on the brain.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 05:41:54 2008
Return-Path: <java-user-return-37849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12601 invoked from network); 19 Dec 2008 05:41:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 05:41:54 -0000
Received: (qmail 6405 invoked by uid 500); 19 Dec 2008 05:42:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6371 invoked by uid 500); 19 Dec 2008 05:41:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6359 invoked by uid 99); 19 Dec 2008 05:41:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 18 Dec 2008 21:41:59 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 05:41:40 +0000
Received: by yx-out-2324.google.com with SMTP id 3so275446yxj.5
        for <java-user@lucene.apache.org>; Thu, 18 Dec 2008 21:41:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=X1OL/A6+xNC0ePu/Ai4VGn21LcyblS0HPOHot6jJlwQ=;
        b=axhtpaPrrwqfThjOKWRSB1+aXeSCJw/FyTFBIbUSKufxpxMfmp4NI/LI54eKP1ZU5p
         6QaEP+nF5qE37gYDcxJU1FIout0BLI6/m8T6baGPbZdjXhIEkfr3Jnx/BO3KJKz78RM1
         58GJ7l+Sf+tjR583kvK4IZEHRNdlEqEKmArUs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ft18u+FwKL2TPNmuP3sPkv98DtFfeCoMYQKCVSFVLpuDIWBKzNJMgkhuweBTKlyOh5
         MwpwYWvEw0ClNdUMA+HQjJZv/DS7OHRqnHwIVWLODSv8U0dD2w913bSO10GvW+LpEjwl
         ioxSBEgEPL/K69tfM67PlqbQs52PY1/fPdpH8=
Received: by 10.90.83.2 with SMTP id g2mr1598087agb.79.1229665279627;
        Thu, 18 Dec 2008 21:41:19 -0800 (PST)
Received: by 10.90.25.16 with HTTP; Thu, 18 Dec 2008 21:41:19 -0800 (PST)
Message-ID: <8837fb770812182141j7fd2ca06qd7a0294483856348@mail.gmail.com>
Date: Thu, 18 Dec 2008 21:41:19 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field.omitTF
In-Reply-To: <494B0345.5000501@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34920_32223846.1229665279618"
References: <8837fb770812181357y1d4e6804x200d3dd2a74b102d@mail.gmail.com>
	 <595E27AC-AA89-406D-8875-9B55A1D292F1@gmail.com>
	 <8837fb770812181422j4fa5d296q4ea436f517aea4f2@mail.gmail.com>
	 <494B0345.5000501@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34920_32223846.1229665279618
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks Mark for the pointer!
-John

On Thu, Dec 18, 2008 at 6:13 PM, Mark Miller <markrmiller@gmail.com> wrote:

> No, not a bug, certainly its the intended behavior (though the name is a
> bit tricky isn't it? I've actually thought about that in the past myself).
> If you check out the javadoc on Fieldable youll find:
>
>  /** Expert:
>  *
>  * If set, omit term freq, positions and payloads from postings for this
> field.
>  */
>  void setOmitTf(boolean omitTf);
>
> - Mark
>
>
> John Wang wrote:
>
>> Thanks Mark!I don't think it is documented (at least the ones I've read),
>> should this be considered as a bug or ... ?
>>
>> Thanks
>>
>> -John
>>
>> On Thu, Dec 18, 2008 at 2:05 PM, Mark Miller <markrmiller@gmail.com>
>> wrote:
>>
>>
>>
>>> Drops positions as well.
>>>
>>> - Mark
>>>
>>>
>>>
>>> On Dec 18, 2008, at 4:57 PM, "John Wang" <john.wang@gmail.com> wrote:
>>>
>>>  Hi:
>>>
>>>
>>>>  In lucene 2.4, when Field.omitTF() is called, payload is disabled as
>>>> well. Is this intentional? My understanding is payload is independent
>>>> from
>>>> the term frequencies.
>>>>
>>>> Thanks
>>>>
>>>> -John
>>>>
>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_34920_32223846.1229665279618--

From java-user-return-37850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 10:15:36 2008
Return-Path: <java-user-return-37850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90331 invoked from network); 19 Dec 2008 10:15:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 10:15:36 -0000
Received: (qmail 66496 invoked by uid 500); 19 Dec 2008 10:15:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66472 invoked by uid 500); 19 Dec 2008 10:15:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66461 invoked by uid 99); 19 Dec 2008 10:15:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 02:15:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 10:15:21 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.8/8.13.8) with ESMTP id mBJAFSxQ004310
	for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 12:15:28 +0200
Received: from [212.226.92.115] ([212.226.92.115]) by nimitz.teamw.com with ESMTP
	 id m3+3rqqe; 19 Dec 2008 02:55:00 +0200
Message-ID: <494AF0E5.90300@teamware.com>
Date: Fri, 19 Dec 2008 11:55:01 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: addIndexesNoOptimize question
References: <4949C076.4020903@teamware.com> <1B7C9122-7283-44A7-822F-F25226F7814D@mikemccandless.com>
In-Reply-To: <1B7C9122-7283-44A7-822F-F25226F7814D@mikemccandless.com>
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-3.0 (monkey.teamware.com [212.226.92.15]); Fri, 19 Dec 2008 12:15:28 +0200 (EET)
X-Teamware-Monkey-MailScanner-Information: Please contact the ISP for more information
X-Teamware-Monkey-MailScanner-ID: mBJAFSxQ004310
X-Teamware-Monkey-MailScanner: Found to be clean
X-Teamware-Monkey-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Thanks Mike, I'm still on 2.3.1, so will upgrade soon.
Antony


Michael McCandless wrote:
> This was an attempt on addIndexesNoOptimize's part to "respect" the 
> maxMergeDocs (which prevents large segments from being merged) you had 
> set on IndexWriter.
> 
> However, the check was too pedantic, and was removed as of 2.4, under 
> this issue:
> 
>     https://issues.apache.org/jira/browse/LUCENE-1254
> 
> Mike



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 10:22:58 2008
Return-Path: <java-user-return-37851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96499 invoked from network); 19 Dec 2008 10:22:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 10:22:58 -0000
Received: (qmail 82617 invoked by uid 500); 19 Dec 2008 10:23:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82587 invoked by uid 500); 19 Dec 2008 10:23:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82542 invoked by uid 99); 19 Dec 2008 10:23:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 02:23:00 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.180.197.141] (HELO web45311.mail.sp1.yahoo.com) (68.180.197.141)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Dec 2008 10:22:38 +0000
Received: (qmail 20554 invoked by uid 60001); 19 Dec 2008 10:22:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=zJxxKrKBkvQkNxHPFqeVIEihF4vLSYG1ztMjcCUAkRjq7p0WjsOUiwZDhhJuOEe7uMB49xx+e/NUsq9r5Tg6m/zoxq0ChxEzUEWNELAbMKxAuPjzxH1SMmXa7xGTIX58EN5TOQlymsdERiuC2O5xLROknz4ZU6pUrUWiLzo0p1I=;
X-YMail-OSG: aXRmjSkVM1nWqaZC6zcPsoSxUVZDnu5uGAPmXXq.HqituO4pBrh66NqKgg0Uhb1CsL3yUwwaR7F5PMqv6CSstybAK0DoCMYv_kdW4pdPvKnAY2gfszUjgs6JOM53QlZEEe04bkk.ro.c6YY_1PLYUsWhuslYWRIUy1WuXnjHSTCjPmbxa.sr8fm0lMXW4A--
Received: from [122.55.80.194] by web45311.mail.sp1.yahoo.com via HTTP; Fri, 19 Dec 2008 02:22:13 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <21047428.post@talk.nabble.com> <4948900B.4050005@aconex.com> <196811.89212.qm@web45303.mail.sp1.yahoo.com> <13158.43731.qm@web45306.mail.sp1.yahoo.com> <Pine.LNX.4.62.0812172312040.19172@radix.cryptio.net>
Date: Fri, 19 Dec 2008 02:22:13 -0800 (PST)
From: Jay Joel Malaluan <exst_jmalaluan@yahoo.com>
Subject: Re: Unique results in BooleanQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2019337358-1229682133=:18436"
Message-ID: <16472.18436.qm@web45311.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2019337358-1229682133=:18436
Content-Type: text/plain; charset=us-ascii

Hi Chris,

I was just thinking that when the 1st query of q2 is run it will have its result. 
Then the 2nd query of q2 will run and have its own result BUT it is now filtered that no same data from the 1st query is returned. 
Results of the 1st and 2nd query have been appended.

Does the 2nd query of q2 have two process?
1. Run the query to get results.
2. For filtering


Regards,
Jay 





________________________________
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Sent: Thursday, December 18, 2008 3:14:51 PM
Subject: Re: Unique results in BooleanQuery


: Let me expound more on the question. Will the q1 be run on the 
: BooleanQuery q2 and append the results that are not equal to the result 
: of the first query of q2?

i really have no idea what you mean by: "q1 be run on the BooleanQuery q2"

the query structure suggested will ensure that you only get results which 
match q2 and do not match q1 (per your request "then the 2nd query will 
not anymore return the same results from the 1st query")

: Do the first query as normal, then create a second BooleanQuery; add one clause for "colour:blue", Occur.MUST, and then add the query from the first search as a MUST_NOT.
: 
: Query q1 = new TermQuery(new Term("fruit", "apple"));
: ..... run query, get back all apples ...
: 
: BooleanQuery q2 = new BooleanQuery();
: q2.add(new TermQuery(new Term("colour", "blue")), Occur.MUST);
: q2.add(q1, Occur.MUST_NOT);
: ..... run query q2, get back all blue things that don't have apples ...




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-2019337358-1229682133=:18436--

From java-user-return-37852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 10:34:11 2008
Return-Path: <java-user-return-37852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1034 invoked from network); 19 Dec 2008 10:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 10:34:11 -0000
Received: (qmail 5052 invoked by uid 500); 19 Dec 2008 10:34:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4636 invoked by uid 500); 19 Dec 2008 10:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4625 invoked by uid 99); 19 Dec 2008 10:34:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 02:34:15 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 10:33:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LDcfl-0007zf-OA
	for java-user@lucene.apache.org; Fri, 19 Dec 2008 02:33:33 -0800
Message-ID: <21089115.post@talk.nabble.com>
Date: Fri, 19 Dec 2008 02:33:33 -0800 (PST)
From: Jay Malaluan <exst_jmalaluan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Stemming behavior
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: exst_jmalaluan@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm using the SnowballAnalyzer for my stemming processing.
search words: love, loved, loveliness, loveless, lovely, and loving

On my index I have the word love. The behavior during searching is that it
can't correctly stem the two words loveliness, loveless to love. And the odd
thing is loveliness is stemmed to "loveli" and loveless is not stemmed at
all.

Does anyone already encountered this and have suggestions on other
Analyzers?


Regards,
Jay Malaluan
-- 
View this message in context: http://www.nabble.com/Stemming-behavior-tp21089115p21089115.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 10:39:41 2008
Return-Path: <java-user-return-37853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3311 invoked from network); 19 Dec 2008 10:39:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 10:39:41 -0000
Received: (qmail 14789 invoked by uid 500); 19 Dec 2008 10:39:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14760 invoked by uid 500); 19 Dec 2008 10:39:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14749 invoked by uid 99); 19 Dec 2008 10:39:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 02:39:45 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.12] (HELO mail-gx0-f12.google.com) (209.85.217.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 10:39:24 +0000
Received: by gxk5 with SMTP id 5so800378gxk.5
        for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 02:39:02 -0800 (PST)
Received: by 10.90.63.16 with SMTP id l16mr1693581aga.73.1229683142265;
        Fri, 19 Dec 2008 02:39:02 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 34sm16052822agc.6.2008.12.19.02.39.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 19 Dec 2008 02:39:01 -0800 (PST)
Message-Id: <C24C3D9C-F836-4EE0-B01F-7592C6803BAC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <21085775.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: optimize: went from 14488449 to 38449
Date: Fri, 19 Dec 2008 05:38:59 -0500
References: <21085589.post@talk.nabble.com> <015e01c96193$f4cde1f0$710bc30a@sv.us.sonicwall.com> <21085775.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


How did you delete the documents?  EG, by docID using IndexReader, by  
Term or Query using IndexWriter?

And when you said your previous index had 14488449 docs, was numDocs()  
or maxDoc()?

Mike

1world1love wrote:

>
>
>
> Ganesh - yahoo wrote:
>>
>> Optimize will remove the deletes and rearrange the document numbers.
>>
>> Have you done some deletes before deleting 1.3 million docs?
>>
>>
>
> No, that is the crazy part. I haven't done anything to this index  
> since it
> was first compiled until I did the deletes. That is why I made a  
> copy of it
> first because I had never done deletes before and wanted to be sure  
> I didn't
> mess anything up.
>
> When I did the deletes, there were a few of the delete files in the  
> index,
> but not that many. My index went from 22GB to 77MB.
> -- 
> View this message in context: http://www.nabble.com/optimize%3A-went-from-14488449-to-38449-tp21085589p21085775.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 11:23:18 2008
Return-Path: <java-user-return-37854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22494 invoked from network); 19 Dec 2008 11:23:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 11:23:18 -0000
Received: (qmail 90511 invoked by uid 500); 19 Dec 2008 11:23:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90461 invoked by uid 500); 19 Dec 2008 11:23:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90449 invoked by uid 99); 19 Dec 2008 11:23:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 03:23:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of christian.brennsteiner@gmail.com designates 209.85.220.14 as permitted sender)
Received: from [209.85.220.14] (HELO mail-fx0-f14.google.com) (209.85.220.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 11:23:02 +0000
Received: by fxm7 with SMTP id 7so157538fxm.5
        for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 03:22:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:content-transfer-encoding
         :content-disposition:x-google-sender-auth;
        bh=6mcOIt6q5gd7diJ+2RfWqf+7k1VLIgWr/AwDGI8HxRE=;
        b=CKzhaOY2O7lJFPrIx/d/J8VTxmR9SaFO+j44IEV+WwtR4B/HBO6pI+CC3xVAEcYUSv
         HaMB/cWhVT/X2cPYNmw0K8ji5nB407yH+mt06q+097HGd9JNPJ0LcQmYU3dI6AKdWLyX
         fwvgG3yrpX9bTrPtyDo6u/EUs5iLkKQSuw9Ok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=J+PU/N7MjwLP00TAlBoCBj8Wqou5y5OVnglUMaFgZam5fDsF9SnSxiPJqpHvQ7LVaK
         Lip0FCt6QY5SZcEktt6OqIYxpX02QL7yUjotx08mCntakBNlis75a96Fm45oRmqc+EvS
         2oeL7i/Kzdyqxncbqa4UKqupDGuP+dFDMnv+s=
Received: by 10.181.159.17 with SMTP id l17mr1048597bko.14.1229685760325;
        Fri, 19 Dec 2008 03:22:40 -0800 (PST)
Received: by 10.180.243.18 with HTTP; Fri, 19 Dec 2008 03:22:40 -0800 (PST)
Message-ID: <6ef902470812190322i55a96f59x75385aef2b406844@mail.gmail.com>
Date: Fri, 19 Dec 2008 12:22:40 +0100
From: "Christian Brennsteiner" <eingfoan@yahoo.de>
Sender: christian.brennsteiner@gmail.com
To: java-user@lucene.apache.org
Subject: lucene suiteable ? 6 mio recods / day 1k
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Google-Sender-Auth: 3433ef35fb5d130e
X-Virus-Checked: Checked by ClamAV on apache.org

hi *,

i am searching for a fulltext index capeable of the following requirements:

index everyday 3 000 000 new records with a validity of N days (e.g.
90 days expiration)
== 34,7 / s
one record is e.g. an url and can be up to 2 k big

http://example.com/somedir/some.html

lucene should use "/" as a word seperator and should e.g. eliminate all ":"

so the following "sentence" shoule be indexed:

http example.com somedir some.html when having the url
http://example.com/somedir/some.html

my main concern about this requirement is that the index should not
grow over time as it always holds
NR OF DAYS * RECORDS PER DAY  and expires the records after a given
time. in my opinione ther must be some background thread always
throwing away expired hits.

is this easilly possible with lucene?

regards chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 11:24:28 2008
Return-Path: <java-user-return-37855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22816 invoked from network); 19 Dec 2008 11:24:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 11:24:28 -0000
Received: (qmail 92448 invoked by uid 500); 19 Dec 2008 11:24:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92354 invoked by uid 500); 19 Dec 2008 11:24:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92343 invoked by uid 99); 19 Dec 2008 11:24:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 03:24:32 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.217.12] (HELO mail-gx0-f12.google.com) (209.85.217.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 11:24:10 +0000
Received: by gxk5 with SMTP id 5so809911gxk.5
        for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 03:23:49 -0800 (PST)
Received: by 10.150.92.10 with SMTP id p10mr5392090ybb.227.1229685829094;
        Fri, 19 Dec 2008 03:23:49 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id h27sm2534243elf.16.2008.12.19.03.23.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 19 Dec 2008 03:23:47 -0800 (PST)
Message-Id: <D6FE8E80-3DDF-4997-A2E7-60DC8BF56B69@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <494B29D7.2030701@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Approximate release date for Lucene 2.9
Date: Fri, 19 Dec 2008 06:23:43 -0500
References: <494AA80C.2020104@gmail.com> <FEF1ADF0-6132-440C-B41B-3DCE2831620D@mikemccandless.com> <014201c96192$81938ce0$710bc30a@sv.us.sonicwall.com> <494B29D7.2030701@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


The new extensible TokenStream API (based on AttributeSource) is also  
in 2.9.

Mike

Mark Miller wrote:

> Well look at the issues and see for yourself :)
>
> Its a subjective call I think. Heres my take:
>
> There are not going to be too many sweeping changes in the next  
> release. There are tons of little bug fixes and improvements, but  
> not a lot of the bullet point type stuff that you mention in your  
> wishlist. Its a whole lot of little steps forward.
>
> When it comes to sorting, there a couple possible goodies coming in  
> the next release:
>
> TrieRangeQuery has been added to contrib. Super awesome, super  
> efficient, large scale sorting.
>
> Work is ongoing to change searching semantics so that sorting is  
> much faster in many cases. In fact, their may be search speed  
> improvements across the board in many cases (don't quote me <g>).  
> Sort fieldcache loading in the multi segment case will likely also  
> be *blazingly* faster. Also, Filters and Fieldcaches may be pushed  
> down to a single segment, making reopening sort fieldcaches *much*  
> more efficient. Thats a nice step towards realtime.
>
> RangeQuery, PrefixQuery and WildcardQuery will all have a constant  
> score mode as well - this avoids maxclause limits and is often much  
> faster on very large indexes.
>
> Locallucene, a very cool bit of code that allows geo search, might  
> make contrib for the next release.
>
> Beyond that, there are a few more little gems, but its a lot of  
> little fixes and improvements more than big features.
>
> Column stride fields and flexible indexing will not be in the next  
> release in my opinion, but a lot of progress towards flexible  
> indexing has been made.
>
> Keep in mind thats a biased view of the next release - I worked on  
> two of those issues. Be sure to take it all with a healthy grain of  
> salt.
>
> - Mark
>
> Ganesh wrote:
>> Does Lucene 2.9 has real time search? Any improvements in sorting?  
>> Any facility to store a payload per document (without updating  
>> document)?
>>
>> Please highlight the important feature?
>>
>> Regards
>> Ganesh
>>
>> ----- Original Message ----- From: "Michael McCandless" <lucene@mikemccandless.com 
>> >
>> To: <java-user@lucene.apache.org>
>> Sent: Friday, December 19, 2008 3:40 AM
>> Subject: Re: Approximate release date for Lucene 2.9
>>
>>
>>>
>>> Well... there are a couple threads on java-dev discussing this  
>>> "now":
>>>
>>>  http://www.nabble.com/2.9-3.0-plan---Java-1.5-td20972994.html
>>>  http://www.nabble.com/2.9,-3.0-and-deprecation-td20099343.html
>>>
>>> though they seem to have petered out.
>>>
>>> Also we have 29 open issues for 2.9:
>>>
>>>
>>> https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&&pid=12310110&fixfor=12312682&resolution=-1&sorter/field=priority&sorter/order=DESC
>>>
>>> For 2.4 it took at least a month to whittle the list down to 0.
>>>
>>> So it's hard to say?  I'd love to see 2.9 out earlyish next year  
>>> though.
>>>
>>> Mike
>>>
>>> Kay Kay wrote:
>>>
>>>> Hi -
>>>> I am just curious - what is the approximate release target date  
>>>> that  we have for Lucene 2.9 ( currently in beta in dev).
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> Send instant messages to your online friends http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 13:13:51 2008
Return-Path: <java-user-return-37856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64700 invoked from network); 19 Dec 2008 13:13:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 13:13:49 -0000
Received: (qmail 16594 invoked by uid 500); 19 Dec 2008 13:13:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16084 invoked by uid 500); 19 Dec 2008 13:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16073 invoked by uid 99); 19 Dec 2008 13:13:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 05:13:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 13:13:35 +0000
Received: by yx-out-2324.google.com with SMTP id 3so312068yxj.5
        for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 05:13:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=uFgA1nnJHXfK1kyUo6Ej+S30zNq7ZHAFqH1aXjpQnVM=;
        b=Z28l078Y730bl/9nO7FdJ/SqOZRF+EnBFiSIcuHhbUtp7lunDmX6wRrPGLLtZXDDg8
         x9guTUzTgMnZH7FIM8z+mSY3IQcVsrWwhcd5fDzzX+2YMkaz7VafRKHgIslDORwRCgwI
         G9Gh2qNzfIycgrJtfRH0pLGlKHsmlFhkNIfv8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=DlLoow9KdfJUD6oHHV3YSOW8RmBihpIhN0WfwzQ2OGXad/XOy0hyKwYHcLbjc8O5mM
         7jfFw/qrVdGG2qRr0irp9IKG4CSeADRv8b5k8gsKf7UkFoXm88wZo7Ha7jKBqxtZNEIk
         G8dm6WYFMF66XogK8mFG52A3wmiid1I4m4d6g=
Received: by 10.90.102.14 with SMTP id z14mr1763429agb.44.1229692394283;
        Fri, 19 Dec 2008 05:13:14 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Fri, 19 Dec 2008 05:13:14 -0800 (PST)
Message-ID: <359a92830812190513k66d0b3c1pab9144d536d408c1@mail.gmail.com>
Date: Fri, 19 Dec 2008 08:13:14 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene suiteable ? 6 mio recods / day 1k
In-Reply-To: <6ef902470812190322i55a96f59x75385aef2b406844@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40174_18467614.1229692394265"
References: <6ef902470812190322i55a96f59x75385aef2b406844@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40174_18467614.1229692394265
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I'm reasonably sure you could make this work, although it'll
take some effort.

The 3,000,000 records/day should be pretty easy.

Parsing the URLs, if none of the supplied tokenizers do exactly what you
want, you can always make your own. Or you can pre-process the input
if that's easier. e.g. replaceAll("[/:]", " ") then just use one of the
regular
processors.

You can easily delete records. Assume one of your fields is the date
to day resolution. Your daemon could delete by term all records from
90 days ago. Take care to store the date in a convenient form.

Optimizing your index will reclaim all the space from deleted records. It
may take a while to accomplish.


Or you could create a new index every day and use one of the
MultiSearcher kinds of queries. Then you would simply delete the
appropriate index every day. How performant this solution would be
is something I don't have a good feel for, maybe someone else will
chime in.

But all in all, Lucene (or maybe SOLR) could work in this scenario. But
this is a significant amount of data and you'd have to do some testing
to see if you'd get acceptable performance.

Best
Erick


On Fri, Dec 19, 2008 at 6:22 AM, Christian Brennsteiner
<eingfoan@yahoo.de>wrote:

> hi *,
>
> i am searching for a fulltext index capeable of the following requirements:
>
> index everyday 3 000 000 new records with a validity of N days (e.g.
> 90 days expiration)
> == 34,7 / s
> one record is e.g. an url and can be up to 2 k big
>
> http://example.com/somedir/some.html
>
> lucene should use "/" as a word seperator and should e.g. eliminate all ":"
>
> so the following "sentence" shoule be indexed:
>
> http example.com somedir some.html when having the url
> http://example.com/somedir/some.html
>
> my main concern about this requirement is that the index should not
> grow over time as it always holds
> NR OF DAYS * RECORDS PER DAY  and expires the records after a given
> time. in my opinione ther must be some background thread always
> throwing away expired hits.
>
> is this easilly possible with lucene?
>
> regards chris
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_40174_18467614.1229692394265--

From java-user-return-37857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 13:14:24 2008
Return-Path: <java-user-return-37857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64877 invoked from network); 19 Dec 2008 13:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 13:14:23 -0000
Received: (qmail 18752 invoked by uid 500); 19 Dec 2008 13:14:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18726 invoked by uid 500); 19 Dec 2008 13:14:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18715 invoked by uid 99); 19 Dec 2008 13:14:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 05:14:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 13:14:08 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBJDDlm2024563
	for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 07:13:47 -0600
Received: (qmail 479 invoked by uid 0); 19 Dec 2008 07:13:47 -0600
Date: 19 Dec 2008 07:13:47 -0600
Message-ID: <20081219131347.478.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_lucene_suiteable_=3F_6_mio_recods_=2F_day_1k?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 328942297 - f1b7ed20ab00 (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=328942297&m=f1b7ed20ab00&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=328942297&m=f1b7ed20ab00&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=328942297&m=f1b7ed20ab00&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 13:14:56 2008
Return-Path: <java-user-return-37858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65108 invoked from network); 19 Dec 2008 13:14:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 13:14:56 -0000
Received: (qmail 21438 invoked by uid 500); 19 Dec 2008 13:15:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21416 invoked by uid 500); 19 Dec 2008 13:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21405 invoked by uid 99); 19 Dec 2008 13:15:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 05:15:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 13:14:40 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBJDEIAP025274
	for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 07:14:18 -0600
Received: (qmail 927 invoked by uid 0); 19 Dec 2008 07:14:18 -0600
Date: 19 Dec 2008 07:14:18 -0600
Message-ID: <20081219131418.926.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_Re:_lucene_suiteable_=3F_6_mio_recods_=2F_day_1k?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 328942404 - 77dd625364e1 (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=328942404&m=77dd625364e1&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=328942404&m=77dd625364e1&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=328942404&m=77dd625364e1&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 16:02:27 2008
Return-Path: <java-user-return-37859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68762 invoked from network); 19 Dec 2008 16:02:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 16:02:27 -0000
Received: (qmail 98979 invoked by uid 500); 19 Dec 2008 16:02:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98763 invoked by uid 500); 19 Dec 2008 16:02:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98752 invoked by uid 99); 19 Dec 2008 16:02:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 08:02:28 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 16:02:05 +0000
Received: by yw-out-2324.google.com with SMTP id 3so343488ywj.5
        for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 08:01:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=7ixMaZypVeVFE5rs1k57MNsBuWslbsCVvJ9lGjXkhPE=;
        b=jfL+qBMK1CO51zgmwK35CR1N8cgo3E6KcyrNY1vNoRyGKb6sScvt0wfZqwQxWP21LN
         op9yw3MXUtwWStcqPrIZRnNQC2QGXRHU+81rsJHOJxav03Y4cVLHyFk/IIDdwJvQy87D
         pEdXEC2dN9IZy1ZGgwuFVR12juqWdKmclm/tE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=dE8FB6xjDeDlR9bDSOm8cPpqh39sThXdJjM5I9jctMl3IetFnms6UB3Q30py+QAcgB
         PjuBQCMTsUZSHn7msS/00kuh6R8D4ESwgzC/ghQSkEXWWRfVsbnJCPOzZKt7K/C9Xcny
         dWPdcwamB9BIdg/3/dKYgXzAMrun/Lhj/6wM8=
Received: by 10.90.75.13 with SMTP id x13mr272359aga.106.1229702504819;
        Fri, 19 Dec 2008 08:01:44 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 38sm16586618aga.4.2008.12.19.08.01.43
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 19 Dec 2008 08:01:43 -0800 (PST)
Message-ID: <494BC566.9040608@gmail.com>
Date: Fri, 19 Dec 2008 11:01:42 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Approximate release date for Lucene 2.9
References: <494AA80C.2020104@gmail.com> <FEF1ADF0-6132-440C-B41B-3DCE2831620D@mikemccandless.com> <014201c96192$81938ce0$710bc30a@sv.us.sonicwall.com> <494B29D7.2030701@gmail.com> <D6FE8E80-3DDF-4997-A2E7-60DC8BF56B69@mikemccandless.com>
In-Reply-To: <D6FE8E80-3DDF-4997-A2E7-60DC8BF56B69@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Right, I was debating throwing that in myself - its great stuff, but I 
wasn't sure how much of a feature benefit it brought now. My 
understanding is that its main benefit is along the flexible indexing 
path and using multiple consumers eg its more setup for the goodness yet 
to come. My understanding is certainly less than yours though :)

- Mark

Michael McCandless wrote:
>
> The new extensible TokenStream API (based on AttributeSource) is also 
> in 2.9.
>
> Mike
>
> Mark Miller wrote:
>
>> Well look at the issues and see for yourself :)
>>
>> Its a subjective call I think. Heres my take:
>>
>> There are not going to be too many sweeping changes in the next 
>> release. There are tons of little bug fixes and improvements, but not 
>> a lot of the bullet point type stuff that you mention in your 
>> wishlist. Its a whole lot of little steps forward.
>>
>> When it comes to sorting, there a couple possible goodies coming in 
>> the next release:
>>
>> TrieRangeQuery has been added to contrib. Super awesome, super 
>> efficient, large scale sorting.
>>
>> Work is ongoing to change searching semantics so that sorting is much 
>> faster in many cases. In fact, their may be search speed improvements 
>> across the board in many cases (don't quote me <g>). Sort fieldcache 
>> loading in the multi segment case will likely also be *blazingly* 
>> faster. Also, Filters and Fieldcaches may be pushed down to a single 
>> segment, making reopening sort fieldcaches *much* more efficient. 
>> Thats a nice step towards realtime.
>>
>> RangeQuery, PrefixQuery and WildcardQuery will all have a constant 
>> score mode as well - this avoids maxclause limits and is often much 
>> faster on very large indexes.
>>
>> Locallucene, a very cool bit of code that allows geo search, might 
>> make contrib for the next release.
>>
>> Beyond that, there are a few more little gems, but its a lot of 
>> little fixes and improvements more than big features.
>>
>> Column stride fields and flexible indexing will not be in the next 
>> release in my opinion, but a lot of progress towards flexible 
>> indexing has been made.
>>
>> Keep in mind thats a biased view of the next release - I worked on 
>> two of those issues. Be sure to take it all with a healthy grain of 
>> salt.
>>
>> - Mark
>>
>> Ganesh wrote:
>>> Does Lucene 2.9 has real time search? Any improvements in sorting? 
>>> Any facility to store a payload per document (without updating 
>>> document)?
>>>
>>> Please highlight the important feature?
>>>
>>> Regards
>>> Ganesh
>>>
>>> ----- Original Message ----- From: "Michael McCandless" 
>>> <lucene@mikemccandless.com>
>>> To: <java-user@lucene.apache.org>
>>> Sent: Friday, December 19, 2008 3:40 AM
>>> Subject: Re: Approximate release date for Lucene 2.9
>>>
>>>
>>>>
>>>> Well... there are a couple threads on java-dev discussing this "now":
>>>>
>>>>  http://www.nabble.com/2.9-3.0-plan---Java-1.5-td20972994.html
>>>>  http://www.nabble.com/2.9,-3.0-and-deprecation-td20099343.html
>>>>
>>>> though they seem to have petered out.
>>>>
>>>> Also we have 29 open issues for 2.9:
>>>>
>>>>
>>>> https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&&pid=12310110&fixfor=12312682&resolution=-1&sorter/field=priority&sorter/order=DESC 
>>>>
>>>>
>>>> For 2.4 it took at least a month to whittle the list down to 0.
>>>>
>>>> So it's hard to say?  I'd love to see 2.9 out earlyish next year 
>>>> though.
>>>>
>>>> Mike
>>>>
>>>> Kay Kay wrote:
>>>>
>>>>> Hi -
>>>>> I am just curious - what is the approximate release target date 
>>>>> that  we have for Lucene 2.9 ( currently in beta in dev).
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> Send instant messages to your online friends 
>>> http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 16:07:45 2008
Return-Path: <java-user-return-37860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70517 invoked from network); 19 Dec 2008 16:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 16:07:45 -0000
Received: (qmail 3818 invoked by uid 500); 19 Dec 2008 16:07:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3788 invoked by uid 500); 19 Dec 2008 16:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3777 invoked by uid 99); 19 Dec 2008 16:07:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 08:07:50 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.12] (HELO mail-gx0-f12.google.com) (209.85.217.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 16:07:29 +0000
Received: by gxk5 with SMTP id 5so907707gxk.5
        for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 08:07:04 -0800 (PST)
Received: by 10.90.71.16 with SMTP id t16mr1850020aga.26.1229702823949;
        Fri, 19 Dec 2008 08:07:03 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 32sm8531812aga.39.2008.12.19.08.07.01
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 19 Dec 2008 08:07:02 -0800 (PST)
Message-Id: <5E6CEC4F-18F8-4DE7-8641-37432CCCEB83@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <494BC566.9040608@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Approximate release date for Lucene 2.9
Date: Fri, 19 Dec 2008 11:07:00 -0500
References: <494AA80C.2020104@gmail.com> <FEF1ADF0-6132-440C-B41B-3DCE2831620D@mikemccandless.com> <014201c96192$81938ce0$710bc30a@sv.us.sonicwall.com> <494B29D7.2030701@gmail.com> <D6FE8E80-3DDF-4997-A2E7-60DC8BF56B69@mikemccandless.com> <494BC566.9040608@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


You're right, there's not much benefit now... there will be more  
benefit when flexible indexing is available.  Though, you could set up  
an analysis chain where the producer puts something "new" onto each  
token, and somewhere downstream you pick that up and do something  
interesting with it.

Mike

Mark Miller wrote:

> Right, I was debating throwing that in myself - its great stuff, but  
> I wasn't sure how much of a feature benefit it brought now. My  
> understanding is that its main benefit is along the flexible  
> indexing path and using multiple consumers eg its more setup for the  
> goodness yet to come. My understanding is certainly less than yours  
> though :)
>
> - Mark
>
> Michael McCandless wrote:
>>
>> The new extensible TokenStream API (based on AttributeSource) is  
>> also in 2.9.
>>
>> Mike
>>
>> Mark Miller wrote:
>>
>>> Well look at the issues and see for yourself :)
>>>
>>> Its a subjective call I think. Heres my take:
>>>
>>> There are not going to be too many sweeping changes in the next  
>>> release. There are tons of little bug fixes and improvements, but  
>>> not a lot of the bullet point type stuff that you mention in your  
>>> wishlist. Its a whole lot of little steps forward.
>>>
>>> When it comes to sorting, there a couple possible goodies coming  
>>> in the next release:
>>>
>>> TrieRangeQuery has been added to contrib. Super awesome, super  
>>> efficient, large scale sorting.
>>>
>>> Work is ongoing to change searching semantics so that sorting is  
>>> much faster in many cases. In fact, their may be search speed  
>>> improvements across the board in many cases (don't quote me <g>).  
>>> Sort fieldcache loading in the multi segment case will likely also  
>>> be *blazingly* faster. Also, Filters and Fieldcaches may be pushed  
>>> down to a single segment, making reopening sort fieldcaches *much*  
>>> more efficient. Thats a nice step towards realtime.
>>>
>>> RangeQuery, PrefixQuery and WildcardQuery will all have a constant  
>>> score mode as well - this avoids maxclause limits and is often  
>>> much faster on very large indexes.
>>>
>>> Locallucene, a very cool bit of code that allows geo search, might  
>>> make contrib for the next release.
>>>
>>> Beyond that, there are a few more little gems, but its a lot of  
>>> little fixes and improvements more than big features.
>>>
>>> Column stride fields and flexible indexing will not be in the next  
>>> release in my opinion, but a lot of progress towards flexible  
>>> indexing has been made.
>>>
>>> Keep in mind thats a biased view of the next release - I worked on  
>>> two of those issues. Be sure to take it all with a healthy grain  
>>> of salt.
>>>
>>> - Mark
>>>
>>> Ganesh wrote:
>>>> Does Lucene 2.9 has real time search? Any improvements in  
>>>> sorting? Any facility to store a payload per document (without  
>>>> updating document)?
>>>>
>>>> Please highlight the important feature?
>>>>
>>>> Regards
>>>> Ganesh
>>>>
>>>> ----- Original Message ----- From: "Michael McCandless" <lucene@mikemccandless.com 
>>>> >
>>>> To: <java-user@lucene.apache.org>
>>>> Sent: Friday, December 19, 2008 3:40 AM
>>>> Subject: Re: Approximate release date for Lucene 2.9
>>>>
>>>>
>>>>>
>>>>> Well... there are a couple threads on java-dev discussing this  
>>>>> "now":
>>>>>
>>>>> http://www.nabble.com/2.9-3.0-plan---Java-1.5-td20972994.html
>>>>> http://www.nabble.com/2.9,-3.0-and-deprecation-td20099343.html
>>>>>
>>>>> though they seem to have petered out.
>>>>>
>>>>> Also we have 29 open issues for 2.9:
>>>>>
>>>>>
>>>>> https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&&pid=12310110&fixfor=12312682&resolution=-1&sorter/field=priority&sorter/order=DESC
>>>>>
>>>>> For 2.4 it took at least a month to whittle the list down to 0.
>>>>>
>>>>> So it's hard to say?  I'd love to see 2.9 out earlyish next year  
>>>>> though.
>>>>>
>>>>> Mike
>>>>>
>>>>> Kay Kay wrote:
>>>>>
>>>>>> Hi -
>>>>>> I am just curious - what is the approximate release target date  
>>>>>> that  we have for Lucene 2.9 ( currently in beta in dev).
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>> Send instant messages to your online friends http://in.messenger.yahoo.com
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 16:31:23 2008
Return-Path: <java-user-return-37861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79482 invoked from network); 19 Dec 2008 16:31:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 16:31:22 -0000
Received: (qmail 38808 invoked by uid 500); 19 Dec 2008 16:31:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38769 invoked by uid 500); 19 Dec 2008 16:31:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38758 invoked by uid 99); 19 Dec 2008 16:31:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 08:31:27 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kaykay.unique@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 16:31:05 +0000
Received: by ug-out-1314.google.com with SMTP id c2so498623ugf.23
        for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 08:30:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=RPSpaHk4QHEPRwD7fxd1sjLKnHRIql1rWhtGbjyKsj4=;
        b=FMDlsz4ugHW3tp0VfxTMcnMXuAMCh6SRaD+W10xRyrwdZ/PXyV8E0ypRutK6/txii7
         CWZ5yXM/VrDrEPRz0D95wGpv3GIAjZLCC+3koQ0AcdWwbmKGqiaI0/fWL5nFeZH0Mi20
         VExT492KGrI8I4Lu9OqS7W5Lti5e1YcwonT2M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=mDS67HifjrFm3Eb/HXOy7/X+rX/y9OgfY6iordL+BYFMjIcMq7cPoBNaIz8V/VdZsq
         fCDfgR+td3+DLKjq/t4wNVoAEmXSivCvm9AIcq56lVvRT1EKCVI1JeAq3xWSclS/2gQh
         Vnw0KQqth469RGYMW+i9/KTlK0Qkni1Tb3EUE=
Received: by 10.67.32.18 with SMTP id k18mr4881897ugj.27.1229704245722;
        Fri, 19 Dec 2008 08:30:45 -0800 (PST)
Received: from ?192.168.254.172? ([64.20.188.2])
        by mx.google.com with ESMTPS id s7sm7777889uge.17.2008.12.19.08.30.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 19 Dec 2008 08:30:45 -0800 (PST)
Message-ID: <494BCC34.1060109@gmail.com>
Date: Fri, 19 Dec 2008 11:30:44 -0500
From: Kay Kay <kaykay.unique@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Approximate release date for Lucene 2.9
References: <494AA80C.2020104@gmail.com> <FEF1ADF0-6132-440C-B41B-3DCE2831620D@mikemccandless.com>
In-Reply-To: <FEF1ADF0-6132-440C-B41B-3DCE2831620D@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mike for the links. That certainly helps us better to plan the 
dependencies.

Michael McCandless wrote:
>
> Well... there are a couple threads on java-dev discussing this "now":
>
>   http://www.nabble.com/2.9-3.0-plan---Java-1.5-td20972994.html
>   http://www.nabble.com/2.9,-3.0-and-deprecation-td20099343.html
>
> though they seem to have petered out.
>
> Also we have 29 open issues for 2.9:
>
>   
> https://issues.apache.org/jira/secure/IssueNavigator.jspa?reset=true&&pid=12310110&fixfor=12312682&resolution=-1&sorter/field=priority&sorter/order=DESC 
>
>
> For 2.4 it took at least a month to whittle the list down to 0.
>
> So it's hard to say?  I'd love to see 2.9 out earlyish next year though.
>
> Mike
>
> Kay Kay wrote:
>
>> Hi -
>> I am just curious - what is the approximate release target date that 
>> we have for Lucene 2.9 ( currently in beta in dev).
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 18:43:32 2008
Return-Path: <java-user-return-37862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44881 invoked from network); 19 Dec 2008 18:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 18:43:32 -0000
Received: (qmail 50762 invoked by uid 500); 19 Dec 2008 18:43:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50730 invoked by uid 500); 19 Dec 2008 18:43:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50717 invoked by uid 99); 19 Dec 2008 18:43:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 10:43:37 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ianvink@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 18:43:16 +0000
Received: by bwz9 with SMTP id 9so3300124bwz.5
        for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 10:42:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=ibNUExLNTJgmmmHj+dtF4bW3L4j/KPk2pHxEHQCgJPE=;
        b=Ob2Mm2xAcTCOTqxCHQuJWJ4vASB/SWeE7bVfmgjArhiNtIhPTwC8MdAFrXiob+R/Nv
         d/cx77O0jtdBApkCVA9MOYO5XFnDhSFIvvTmmi0O/Idj0njwhPQRhweXwvdaLd+4ZnTV
         62RIK4ruo/370/FqHWqbGkZ/PUOlPgI4pyFr8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=wff0LCMMjgpR/WSwF/xsxCq2vTqStIueD9TuJOaqXtxzW3/UeFgYwhjkJLBanSjAFO
         AL2IFdKT9us7Fnzvq34ElPX5X5kbcxdp9sdEUcgKzIx+hFRUz9kw6D2JrgS2G04PD9uY
         Oo70U522LxETb7xzDog8h3jgZ/NFF6Ndib1YY=
Received: by 10.181.141.18 with SMTP id t18mr201617bkn.205.1229712175205;
        Fri, 19 Dec 2008 10:42:55 -0800 (PST)
Received: by 10.180.210.11 with HTTP; Fri, 19 Dec 2008 10:42:55 -0800 (PST)
Message-ID: <5d53d5770812191042q1ab7ebb9h9b6a053e02755651@mail.gmail.com>
Date: Fri, 19 Dec 2008 13:42:55 -0500
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Showcase - What I made with Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42343_12276058.1229712175196"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42343_12276058.1229712175196
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A Freeware, OpenSource Windows PC and Web based application:

http://BahaiResearch.com

It allows people from 14 languages to investigate the religious texts of
other religions. The goal is to foster better understanding between peoples
of many religions and many languages. A many-to-many relationship.

------=_Part_42343_12276058.1229712175196--

From java-user-return-37863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 21:28:47 2008
Return-Path: <java-user-return-37863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1024 invoked from network); 19 Dec 2008 21:28:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 21:28:46 -0000
Received: (qmail 22654 invoked by uid 500); 19 Dec 2008 21:28:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21713 invoked by uid 500); 19 Dec 2008 21:28:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21697 invoked by uid 99); 19 Dec 2008 21:28:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 13:28:39 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mark.a.ferguson@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 21:28:31 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1346795rvb.5
        for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 13:28:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=W9fxXfqbVQAR8Yv1lGx/P+ovlVaa9T/WkeZ7rSJL7yM=;
        b=FIU294DthVEQfMdRbs11srCkdSbVpaDwlgKTvQrC2WA8z9t6SMfaF1EFyVd/69jqnS
         JbLDLxom11MXwmFrF0G09Gu0QqLLWFBWOhItuMmZGkJv/up0w4vs2DiyZtDfjiu/Q3lc
         5LHTGwss+enDgzmpwVNUalljKwmEsOs6MQbjM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=fbtwaNF03C6yvmb0hw7qkTrDm5I+wwciWAFK3+o72jCGVXxQmCtSVz4Ev+PdlnU1gK
         YqWJkPSKbPgld3NQUWWAMbHQNgtg6bD4q/y3CevLLsCp0fYqssxQUpKEtv5+YG9CD40n
         Im/ANJ06NnAS8GsYNEYNbp5wYtz7LQ6dPwhEs=
Received: by 10.141.5.17 with SMTP id h17mr1767611rvi.165.1229722090125;
        Fri, 19 Dec 2008 13:28:10 -0800 (PST)
Received: by 10.140.139.17 with HTTP; Fri, 19 Dec 2008 13:28:10 -0800 (PST)
Message-ID: <2dab92100812191328l66723767ja766087b34825b3c@mail.gmail.com>
Date: Fri, 19 Dec 2008 14:28:10 -0700
From: "Mark Ferguson" <mark.a.ferguson@gmail.com>
To: java-user@lucene.apache.org
Subject: Url Analyzer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35701_9603186.1229722090122"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35701_9603186.1229722090122
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I was wondering if there had been any work done out there on an analyzer for
URL strings. I'm looking for something which will match on any of the words
in the domain or path of the URL. I am considering using a PatternAnalyzer
but I wanted to ask this group to see if this was something which has been
discussed here before. Thanks very much in advance,

Mark Ferguson

------=_Part_35701_9603186.1229722090122--

From java-user-return-37864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 19 23:10:41 2008
Return-Path: <java-user-return-37864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45370 invoked from network); 19 Dec 2008 23:10:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2008 23:10:41 -0000
Received: (qmail 35871 invoked by uid 500); 19 Dec 2008 23:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35842 invoked by uid 500); 19 Dec 2008 23:10:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35831 invoked by uid 99); 19 Dec 2008 23:10:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 15:10:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.101] (HELO web50703.mail.re2.yahoo.com) (206.190.38.101)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 19 Dec 2008 23:10:25 +0000
Received: (qmail 18136 invoked by uid 60001); 19 Dec 2008 23:10:04 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=cA71JM2sv8NQRAUgrsQUUiqiIs/dZjTn302mtWwoTn/wAEUKCSDK16IIJdv3VdUYYT/WX2oMy3DH0L1JioDSXP3BcJXu082Fb3iSchJ0XQmVaXPF/wHqk/yS4OiJ4GOGKccACbGwLInOsevWaklY18pJy9V1LBEbvy1bShrpUfE=;
X-YMail-OSG: i9v1q.8VM1lLL2X8Di670O7rSjiJuU_l44Pv38pi3tSeAWsK7R7haw.w1DeclCTzmnW.g0xuJQdy5a_oZqMsuGD.sQiXwG0D7FBQD3XCOWwTBKRdkV0_LeozEslRruOmNbqYFiV57TrzgDi7c4L9r4xwu9DXvhqGKTwx4g2zUBxyWSfIr79ARjHY7aga8nPEBg_2CYi_TuweKPhac.13YVLK3LsDiJSUuk.hOEb1bg--
Received: from [98.216.104.214] by web50703.mail.re2.yahoo.com via HTTP; Fri, 19 Dec 2008 15:10:01 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <6ef902470812190322i55a96f59x75385aef2b406844@mail.gmail.com>
Date: Fri, 19 Dec 2008 15:10:01 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Re: lucene suiteable ? 6 mio recods / day 1k
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <257067.17757.qm@web50703.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Christian, =0A=0AI do not have an answer for you (hope some of the gurus on=
 this board can provide you an appropriate answer.=0AHowever, I would reque=
st you share your finding and experience on this list. =0A=0AWe are facing =
a similar situation and would appreciate if you shared your learning.=0A=0A=
Regards=0AAS=0A=0A=0A=0A----- Original Message ----=0AFrom: Christian Brenn=
steiner <eingfoan@yahoo.de>=0ATo: java-user@lucene.apache.org=0ASent: Frida=
y, December 19, 2008 6:22:40 AM=0ASubject: lucene suiteable ? 6 mio recods =
/ day 1k=0A=0Ahi *,=0A=0Ai am searching for a fulltext index capeable of th=
e following requirements:=0A=0Aindex everyday 3 000 000 new records with a =
validity of N days (e.g.=0A90 days expiration)=0A=3D=3D 34,7 / s=0Aone reco=
rd is e.g. an url and can be up to 2 k big=0A=0Ahttp://example.com/somedir/=
some.html=0A=0Alucene should use "/" as a word seperator and should e.g. el=
iminate all ":"=0A=0Aso the following "sentence" shoule be indexed:=0A=0Aht=
tp example.com somedir some.html when having the url=0Ahttp://example.com/s=
omedir/some.html=0A=0Amy main concern about this requirement is that the in=
dex should not=0Agrow over time as it always holds=0ANR OF DAYS * RECORDS P=
ER DAY=A0 and expires the records after a given=0Atime. in my opinione ther=
 must be some background thread always=0Athrowing away expired hits.=0A=0Ai=
s this easilly possible with lucene?=0A=0Aregards chris=0A=0A--------------=
-------------------------------------------------------=0ATo unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e=
-mail: java-user-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 01:11:20 2008
Return-Path: <java-user-return-37865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82301 invoked from network); 20 Dec 2008 01:11:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 01:11:20 -0000
Received: (qmail 22575 invoked by uid 500); 20 Dec 2008 01:11:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22540 invoked by uid 500); 20 Dec 2008 01:11:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22529 invoked by uid 99); 20 Dec 2008 01:11:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 17:11:12 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a13.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 01:11:03 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.g.dreamhost.com (Postfix) with ESMTP id 3C66B129B1F
	for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 17:10:42 -0800 (PST)
Message-Id: <8EE953E6-BEB2-406D-8745-9EF021892306@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <21089115.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Stemming behavior
Date: Fri, 19 Dec 2008 20:10:40 -0500
References: <21089115.post@talk.nabble.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

This is likely one of the many subtleties of the Porter stemmer.  Dr.  
Porter has chosen a particular way of doing things, but it isn't  
necessarily right for everyone.  You really have to measure the net  
benefit across all your searches, not specifically just one.  If you  
can't live with this particular case, you can implement a protected  
words approach or try some other stemmers.

If you go to the snowball site and peruse their archives you will find  
much discussion of these kinds of issues.

Sorry I can't offer more in terms of a solution.

-Grant


On Dec 19, 2008, at 5:33 AM, Jay Malaluan wrote:

>
> Hi,
>
> I'm using the SnowballAnalyzer for my stemming processing.
> search words: love, loved, loveliness, loveless, lovely, and loving
>
> On my index I have the word love. The behavior during searching is  
> that it
> can't correctly stem the two words loveliness, loveless to love. And  
> the odd
> thing is loveliness is stemmed to "loveli" and loveless is not  
> stemmed at
> all.
>
> Does anyone already encountered this and have suggestions on other
> Analyzers?
>
>
> Regards,
> Jay Malaluan
> -- 
> View this message in context: http://www.nabble.com/Stemming-behavior-tp21089115p21089115.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 02:02:09 2008
Return-Path: <java-user-return-37866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10309 invoked from network); 20 Dec 2008 02:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 02:02:08 -0000
Received: (qmail 73451 invoked by uid 500); 20 Dec 2008 02:01:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73423 invoked by uid 500); 20 Dec 2008 02:01:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73397 invoked by uid 99); 20 Dec 2008 02:01:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 18:01:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of visual.logic@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 02:01:40 +0000
Received: by yw-out-2324.google.com with SMTP id 3so423629ywj.5
        for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 18:01:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version
         :content-transfer-encoding:message-id:content-type:to:from:subject
         :date:x-mailer;
        bh=j5dfXinozGHJhInz5itLCWiPFd2MTvsCZ8RiQfvj2zA=;
        b=AnGr87BGACmE2FN2ZQrk09mlrC/qXlAMdJ/N3/UijNRmIvgfnNQVM4onc8POoufF80
         0FfmxMPyasly3CslPzg0cG7L4b7BK/PW9uaNhJIjN50wKFyscjNlRJjwgB8L38xaSUGz
         JB9p74uJ/lSKVBSLC+7jaf3SttbafE/mKMr9w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:content-transfer-encoding:message-id:content-type:to
         :from:subject:date:x-mailer;
        b=hkjj3LXnKzMEgOiHaVOZBGgOhxlh80JX6OHLPcGj0NYGOWUPLbB80sGe8lWvxzg6YN
         MtUVQTphtmiYEi2AKyHc86930uZ5mvsG1kxSNH5uY9ssHbJrDbw2qEOgwkKeA7xMLDUt
         pOrF+Gt75s3Rmn+qYPZfMu/ShB2Rq4YWhFlM8=
Received: by 10.64.7.5 with SMTP id 5mr2926325qbg.86.1229738479203;
        Fri, 19 Dec 2008 18:01:19 -0800 (PST)
Received: from ?192.168.1.119? (S01060014bff5122b.wp.shawcable.net [24.79.76.163])
        by mx.google.com with ESMTPS id 25sm7537136qbw.3.2008.12.19.18.01.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 19 Dec 2008 18:01:17 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v753.1)
Content-Transfer-Encoding: 7bit
Message-Id: <3E6CF7D7-2BDF-44D8-AA78-84C60D037211@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: "Thomas J. Buhr" <visual.logic@gmail.com>
Subject: Lucene and JSON
Date: Fri, 19 Dec 2008 20:01:15 -0600
X-Mailer: Apple Mail (2.753.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene,

Is there JSON support in Lucene? JSON is more fat-free compared to  
XML and would be preferred. Digester works well for indexing XML but  
something along the same lines for JSON would be even sweeter.

Best, Thom

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 07:25:47 2008
Return-Path: <java-user-return-37867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16340 invoked from network); 20 Dec 2008 07:25:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 07:25:46 -0000
Received: (qmail 71680 invoked by uid 500); 20 Dec 2008 07:25:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71656 invoked by uid 500); 20 Dec 2008 07:25:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71645 invoked by uid 99); 20 Dec 2008 07:25:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 23:25:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 07:25:30 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 77FA971C618; Fri, 19 Dec 2008 23:25:09 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7212C71C5FD
	for <java-user@lucene.apache.org>; Fri, 19 Dec 2008 23:25:09 -0800 (PST)
Date: Fri, 19 Dec 2008 23:25:09 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Preserving old releases
Message-ID: <Pine.LNX.4.62.0812192318370.16533@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org


a couple of refrences to "Lucene 1.2" in the last few months got me 
thinking and made me realize that 1.4.3 is the oldest release available in 
the lucene dist archive, they might still be in the jakarta dist archive. 
sure enough...

http://archive.apache.org/dist/jakarta/lucene/source/
http://archive.apache.org/dist/jakarta/lucene/binaries/

so i'm wondering what people think about copying/moving them to 
archive.apache.org/dist/lucene/java ?

alternately: leave them where they are (it was the jakarta PMC that 
released them after all) but maybe add a link along with the existing note 
about archived versions.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 07:26:19 2008
Return-Path: <java-user-return-37868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16605 invoked from network); 20 Dec 2008 07:26:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 07:26:19 -0000
Received: (qmail 73559 invoked by uid 500); 20 Dec 2008 07:26:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73537 invoked by uid 500); 20 Dec 2008 07:26:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73526 invoked by uid 99); 20 Dec 2008 07:26:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 23:26:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 07:26:04 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBK7PgOl020870
	for <java-user@lucene.apache.org>; Sat, 20 Dec 2008 01:25:43 -0600
Received: (qmail 30153 invoked by uid 0); 20 Dec 2008 01:25:42 -0600
Date: 20 Dec 2008 01:25:42 -0600
Message-ID: <20081220072542.30152.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Preserving old releases
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0083 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 329366892 - 0029c0c560fc
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=329366892&m=0029c0c560fc&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=329366892&m=0029c0c560fc&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=329366892&m=0029c0c560fc&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 07:26:50 2008
Return-Path: <java-user-return-37869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16798 invoked from network); 20 Dec 2008 07:26:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 07:26:50 -0000
Received: (qmail 75263 invoked by uid 500); 20 Dec 2008 07:26:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75230 invoked by uid 500); 20 Dec 2008 07:26:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75219 invoked by uid 99); 20 Dec 2008 07:26:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 19 Dec 2008 23:26:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 07:26:35 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBK7QFNl021237
	for <java-user@lucene.apache.org>; Sat, 20 Dec 2008 01:26:15 -0600
Received: (qmail 30958 invoked by uid 0); 20 Dec 2008 01:26:15 -0600
Date: 20 Dec 2008 01:26:15 -0600
Message-ID: <20081220072615.30957.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Preserving old releases
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0083 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 329366957 - 832d8257af9b
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=329366957&m=832d8257af9b&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=329366957&m=832d8257af9b&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=329366957&m=832d8257af9b&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 09:25:51 2008
Return-Path: <java-user-return-37870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46004 invoked from network); 20 Dec 2008 09:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 09:25:51 -0000
Received: (qmail 11245 invoked by uid 500); 20 Dec 2008 09:25:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11200 invoked by uid 500); 20 Dec 2008 09:25:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11188 invoked by uid 99); 20 Dec 2008 09:25:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 01:25:44 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 09:25:35 +0000
Received: by bwz9 with SMTP id 9so3867553bwz.5
        for <java-user@lucene.apache.org>; Sat, 20 Dec 2008 01:25:13 -0800 (PST)
Received: by 10.223.126.145 with SMTP id c17mr3519104fas.102.1229765113503;
        Sat, 20 Dec 2008 01:25:13 -0800 (PST)
Received: by 10.223.103.210 with HTTP; Sat, 20 Dec 2008 01:25:13 -0800 (PST)
Message-ID: <9ac0c6aa0812200125j6686dcdcn975bcf77056843ff@mail.gmail.com>
Date: Sat, 20 Dec 2008 04:25:13 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: Default and optimal use of RAMDirectory
In-Reply-To: <OF09F34078.31E2805C-ON48257521.005922F9-48257521.005922FA@lawson.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60950_28744869.1229765113496"
References: <OF09F34078.31E2805C-ON48257521.005922F9-48257521.005922FA@lawson.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60950_28744869.1229765113496
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Actually, things have improved since LIA1 was written a few years ago:
IndexWriter now does a good job managing the RAM buffer you assign to
it, so you should not see much benefit by doing your own buffering
with RAMDirectory (and if you somehow do, I'd like to know about
it!).

Instead you should call IndexWriter.setRAMBufferSizeMB.

Also, FSDirectory does no RAM buffering on its own.

See here for further ways to tune for indexing throughput:

http://wiki.apache.org/lucene-java/ImproveIndexingSpeed

Mike

<Joseph.Syjuco@ph.lawson.com> wrote:

>
> Hi all,
>
> First of I'd like to say I'm quite pleased to be a part of this mailing
> list - its even more exciting to know that we have Otis G. and Erik H.,
> authors of (at least in my opinion) the Lucene Bible - Lucene in Action,
> actively answering all these inquiries =)
>
> We're currently in the initial stages of implementing lucene as part of our
> product and one problem that we need to resolve is optimizing lucene.  I've
> been reading Lucene in Action book and one of the tips for optimizing
> lucene indexing is by using RAMDirectory as a buffer before writing to
> FSDirectory.  According to the book, this is done internally and
> automatically when I use FSDirectory.  My questions are 1.) What's the
> default implementation/ computation used in allocating RAMdirectory when we
> implement FSDirectory and 2.) What's the optimal way of customizing
> RAMDirectory usage - any tips on how to do it.
>
> BTW, we're using Lucene 2.3.2
>
> Thanks for all the help
>
> Joseph
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_60950_28744869.1229765113496--

From java-user-return-37871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 12:59:14 2008
Return-Path: <java-user-return-37871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33888 invoked from network); 20 Dec 2008 12:59:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 12:59:14 -0000
Received: (qmail 91094 invoked by uid 500); 20 Dec 2008 12:59:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91059 invoked by uid 500); 20 Dec 2008 12:59:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91048 invoked by uid 99); 20 Dec 2008 12:59:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 04:59:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 12:58:56 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by oelhorst (Postfix) with ESMTP id C9A2031B24
	for <java-user@lucene.apache.org>; Sat, 20 Dec 2008 12:59:24 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id B014A31A53
	for <java-user@lucene.apache.org>; Sat, 20 Dec 2008 12:59:24 +0100 (CET)
Received: from [192.168.178.47] (BAH7298.bah.pppool.de [77.135.114.152])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 76AA4310AE
	for <java-user@lucene.apache.org>; Sat, 20 Dec 2008 12:59:24 +0100 (CET)
Message-Id: <5E86B9F1-96FC-45F6-BF81-0778AB575095@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <3E6CF7D7-2BDF-44D8-AA78-84C60D037211@gmail.com>
Content-Type: multipart/signed; boundary=Apple-Mail-80-215126749; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene and JSON
Date: Sat, 20 Dec 2008 13:58:28 +0100
References: <3E6CF7D7-2BDF-44D8-AA78-84C60D037211@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-80-215126749
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable

Thom,

Lucene support binaries and arbitrary strings... this is far enough to =20=

store JSON or XML... (much independently of its size!).

E.g. we store some objects in JSON using xStream serialization (that =20
is we add a field which is stored containing the object =20
serialization... it could be XML or native serialization), it would =20
make no big difference (especially since compression is there).

paul

Le 20-d=E9c.-08 =E0 03:01, Thomas J. Buhr a =E9crit :
> Lucene,
> Is there JSON support in Lucene? JSON is more fat-free compared to =20
> XML and would be preferred. Digester works well for indexing XML but =20=

> something along the same lines for JSON would be even sweeter.
> Best, Thom


--Apple-Mail-80-215126749
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIFzjCCAocw
ggHwoAMCAQICEFwkG9LgbGf8Fuu/5kCXRScwDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA4MDYwMzE1MTgyOVoXDTA5MDYwMzE1MTgy
OVowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMAHqTEgekG5Iyctn3tSRSfsPoZL+vkFavzl
w/xbbiQ4vWuoCZFVNHvLcFO2rfWoFLaRbcueLsmagsJwA1uxAj4tj/neoawadD+jZ3a98BkqBhIu
4hsC1poLDyvcbUOdKga9DXQ/pk/CorFvR7OOC1INrBtbDi7ycUYaUL7ZkpBFAgMBAAGjMDAuMB4G
A1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQUF
AAOBgQAt7uUnq0yd+jIo9/zYyj+NPyCh3v8CX8MW2qalj37t1YUR82o5/1O5z0sXj7+hQmSEWH7N
BgptwNvhNoKWTYo5c8HBsAMvvv1ruSXYKlsRvPBfewHEEo2KgH73SImj2w7a8owq3t0KLVCPP7d4
RXnrXJf6nuXlsvfFFEd6aIN7VjCCAz8wggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJ
BgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgG
A1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMg
RGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3
DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3
MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9
fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+
uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMB
Af8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3
dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgG
A1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcP
f6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH
2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8x
ggKPMIICiwIBATB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAo
UHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQ
XCQb0uBsZ/wW67/mQJdFJzAJBgUrDgMCGgUAoIIBbzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcB
MBwGCSqGSIb3DQEJBTEPFw0wODEyMjAxMjU4MjlaMCMGCSqGSIb3DQEJBDEWBBTDwtnlN6C7PM2F
nT1CTBDf6lmvKTCBhQYJKwYBBAGCNxAEMXgwdjBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0ECEFwkG9LgbGf8Fuu/5kCXRScwgYcGCyqGSIb3DQEJEAILMXigdjBiMQsw
CQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UE
AxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEFwkG9LgbGf8Fuu/5kCXRScw
DQYJKoZIhvcNAQEBBQAEgYBbyOtE4o/hmpjXo0oT+8eWI54FfQxflAw2lJkadCiSrtOlvurD2G2G
HbxWNMGT9ISU/M0qZ+p+o23zo1F+MjVM3Ay+T/ndIVRbgFlV0URW0kTxCFAX/KzLNxrxiMMeq0YX
VjtcH9SsXxYsUCX8ha9itHsr8yz6cByS/qxQkuHW8QAAAAAAAA==

--Apple-Mail-80-215126749--

From java-user-return-37872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 14:24:37 2008
Return-Path: <java-user-return-37872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66803 invoked from network); 20 Dec 2008 14:24:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 14:24:36 -0000
Received: (qmail 20268 invoked by uid 500); 20 Dec 2008 14:24:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20239 invoked by uid 500); 20 Dec 2008 14:24:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20228 invoked by uid 99); 20 Dec 2008 14:24:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 06:24:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [70.158.118.30] (HELO england.pageplanet.com) (70.158.118.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 14:24:19 +0000
Received: from [192.168.1.122] (61.247.251.10) by england.pageplanet.com
 with ESMTP (Eudora Internet Mail Server 3.1.4) for 
 <java-user@lucene.apache.org>;
 Sat, 20 Dec 2008 09:24:11 -0500
Message-ID: <494CFFEF.50206@tachyontech.net>
Date: Sat, 20 Dec 2008 19:53:43 +0530
From: Prafulla Kiran <prafulla@tachyontech.net>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: BooleanQuery Performance Help
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Everyone,

I have an index of relatively small size (400mb) , containing roughly 
0.7 million documents. The index is actually a copy of an existing 
database table. Hence, most of my queries are of the form

" +field1:value1 +field2:value2 +field3:value3..... ~20 fields"

I have been running performance tests using this query. Strangely, I 
noticed that if I remove some specific clauses... I get a performance 
improvement of atleast 5 times. Here are the numbers and examples, so 
that I could be more precise

1) Complete Query: 90 requests per second using 10 threads
2) If I remove few specific clauses : 500 requests per second using 10 
threads
3) If I form a new query using only 2 clauses from the set of removed 
clauses -> 100 requests per second using 10 threads

Now, some of these specific clauses are such that they match around half 
of the entire document set.  Also, note that I need all the query terms 
to be present in the documents retrieved. My target is to obtain 300 
requests per second with the given query (20 clauses). It includes 2 
range queries. However, I am unable to get 300 rps unless I remove some 
of the clauses (which include these range queries) .
I have tried using filters without any significant improvement in 
performance. Also, I have more than enough RAM, so I am using the 
RAMDirectory to read the index. I have optimized my index before 
searching. All the tests have been warmed for 5 seconds ( the test 
duration is 10 seconds).

My first question is, is this kind of decrease in performance expected 
as the number of clauses shoot up ? Using a single clause out of these 
20 , I was able to get 2000 requests per second!
Could someone please guide me if there are any other ways in which I can 
obtain improvement in performance ?
Particularly, I am interested to know more about what further caching 
could be done apart from the default caching which lucene does.

Thanks In Advance,
Prafulla

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 15:03:39 2008
Return-Path: <java-user-return-37873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74827 invoked from network); 20 Dec 2008 15:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 15:03:38 -0000
Received: (qmail 32842 invoked by uid 500); 20 Dec 2008 15:03:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32809 invoked by uid 500); 20 Dec 2008 15:03:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32798 invoked by uid 99); 20 Dec 2008 15:03:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 07:03:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 15:03:23 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id mBKF32GS095858
	for <java-user@lucene.apache.org>; Sat, 20 Dec 2008 16:03:02 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery Performance Help
Date: Sat, 20 Dec 2008 16:03:06 +0100
User-Agent: KMail/1.9.10
References: <494CFFEF.50206@tachyontech.net>
In-Reply-To: <494CFFEF.50206@tachyontech.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200812201603.07009.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Saturday 20 December 2008 15:23:43 schreef Prafulla Kiran:
> Hi Everyone,
>
> I have an index of relatively small size (400mb) , containing roughly
> 0.7 million documents. The index is actually a copy of an existing
> database table. Hence, most of my queries are of the form
>
> " +field1:value1 +field2:value2 +field3:value3..... ~20 fields"
>
> I have been running performance tests using this query. Strangely, I
> noticed that if I remove some specific clauses... I get a performance
> improvement of atleast 5 times. Here are the numbers and examples, so
> that I could be more precise
>
> 1) Complete Query: 90 requests per second using 10 threads
> 2) If I remove few specific clauses : 500 requests per second using
> 10 threads
> 3) If I form a new query using only 2 clauses from the set of removed
> clauses -> 100 requests per second using 10 threads
>
> Now, some of these specific clauses are such that they match around
> half of the entire document set.  Also, note that I need all the
> query terms to be present in the documents retrieved. My target is to
> obtain 300 requests per second with the given query (20 clauses). It
> includes 2 range queries. However, I am unable to get 300 rps unless
> I remove some of the clauses (which include these range queries) .
> I have tried using filters without any significant improvement in
> performance. Also, I have more than enough RAM, so I am using the
> RAMDirectory to read the index. I have optimized my index before
> searching. All the tests have been warmed for 5 seconds ( the test
> duration is 10 seconds).
>
> My first question is, is this kind of decrease in performance
> expected as the number of clauses shoot up ? Using a single clause
> out of these 20 , I was able to get 2000 requests per second!
> Could someone please guide me if there are any other ways in which I
> can obtain improvement in performance ?

You might try and add brackets and a + around a group
of the less frequently occurring terms, like this:

+field1:frequentValue1 +field2:frequentValue2 +(+field3:inFrequentValue3 
+field4:inFrequentValue4)

This may help, and at least it should not degrade performance much.
Also, it will affect score values somewhat.

> Particularly, I am interested to know more about what further caching
> could be done apart from the default caching which lucene does.

More caching is probably not going to help.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 15:31:29 2008
Return-Path: <java-user-return-37874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78492 invoked from network); 20 Dec 2008 15:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 15:31:29 -0000
Received: (qmail 41625 invoked by uid 500); 20 Dec 2008 15:31:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41599 invoked by uid 500); 20 Dec 2008 15:31:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41588 invoked by uid 99); 20 Dec 2008 15:31:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 07:31:22 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 64.233.170.191 as permitted sender)
Received: from [64.233.170.191] (HELO rn-out-0910.google.com) (64.233.170.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 15:31:14 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1072095rne.4
        for <java-user@lucene.apache.org>; Sat, 20 Dec 2008 07:30:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=/bJvhUblTUQoqYwnbD8/NiM8MZp/+rEg+mVYqVDDGsI=;
        b=naUzGqOyrbxIlmPtloDUn+ApEWf+fS1pIvHtcD2dSXgcHjm8tnDRk+FjgPVKuYicpg
         7hjSOeODmuzlBm6TpSmXgEG39Wog9AR0UKy3o8lGAWI0Y8vGzvuIKxi9iefbvL5yAdHM
         5GM5lxXbbtoKub6cD9r7la1JlrEVliUwHzR4s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=d5bFfMaIZ/CKSjTloU6Oq/LN9gd0hd/wM4prf6zKU02748o/ttFT4ArdwFunYolAON
         NLaH+0nz9F73M+2Gay6Rs2tkEFlNN7ttNNfkWS6VL5ACGEbir+6dOqLnRNiftoMFUX0r
         pcMJTv08fNFmwY4b+k4fD6TyoHx0gjF4Spdpc=
Received: by 10.90.30.2 with SMTP id d2mr2394686agd.58.1229787053589;
        Sat, 20 Dec 2008 07:30:53 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Sat, 20 Dec 2008 07:30:53 -0800 (PST)
Message-ID: <359a92830812200730j576c2df8p4a434c71a1d173c2@mail.gmail.com>
Date: Sat, 20 Dec 2008 10:30:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery Performance Help
In-Reply-To: <494CFFEF.50206@tachyontech.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54625_6127581.1229787053579"
References: <494CFFEF.50206@tachyontech.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54625_6127581.1229787053579
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What specifically are you measuring when you time the queries? I've been
mislead by including in my measurement say, creating the response. I realize
that throughput includes assembling the response, but the solution is
different
depending upon whether it's the actual search or what you do with the
results that takes the time.

Are you doing any sorting?

Are you using a Hits object and iterating on it? This gets very inefficient.

You might post your code where you time the query. Also what do the "few
specific clauses" you remove look like? Do they have anything to do with
time?
How many unique values do the fields have that you remove to see the
improvement?

Do you start your timings *after* you've fired up a few warmup queries?

Best
Erick

On Sat, Dec 20, 2008 at 9:23 AM, Prafulla Kiran <prafulla@tachyontech.net>wrote:

> Hi Everyone,
>
> I have an index of relatively small size (400mb) , containing roughly 0.7
> million documents. The index is actually a copy of an existing database
> table. Hence, most of my queries are of the form
>
> " +field1:value1 +field2:value2 +field3:value3..... ~20 fields"
>
> I have been running performance tests using this query. Strangely, I
> noticed that if I remove some specific clauses... I get a performance
> improvement of atleast 5 times. Here are the numbers and examples, so that I
> could be more precise
>
> 1) Complete Query: 90 requests per second using 10 threads
> 2) If I remove few specific clauses : 500 requests per second using 10
> threads
> 3) If I form a new query using only 2 clauses from the set of removed
> clauses -> 100 requests per second using 10 threads
>
> Now, some of these specific clauses are such that they match around half of
> the entire document set.  Also, note that I need all the query terms to be
> present in the documents retrieved. My target is to obtain 300 requests per
> second with the given query (20 clauses). It includes 2 range queries.
> However, I am unable to get 300 rps unless I remove some of the clauses
> (which include these range queries) .
> I have tried using filters without any significant improvement in
> performance. Also, I have more than enough RAM, so I am using the
> RAMDirectory to read the index. I have optimized my index before searching.
> All the tests have been warmed for 5 seconds ( the test duration is 10
> seconds).
>
> My first question is, is this kind of decrease in performance expected as
> the number of clauses shoot up ? Using a single clause out of these 20 , I
> was able to get 2000 requests per second!
> Could someone please guide me if there are any other ways in which I can
> obtain improvement in performance ?
> Particularly, I am interested to know more about what further caching could
> be done apart from the default caching which lucene does.
>
> Thanks In Advance,
> Prafulla
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_54625_6127581.1229787053579--

From java-user-return-37875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 18:24:56 2008
Return-Path: <java-user-return-37875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52964 invoked from network); 20 Dec 2008 18:24:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 18:24:56 -0000
Received: (qmail 21569 invoked by uid 500); 20 Dec 2008 18:24:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21541 invoked by uid 500); 20 Dec 2008 18:24:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21530 invoked by uid 99); 20 Dec 2008 18:24:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 10:24:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 18:24:41 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 8C42171C5C7; Sat, 20 Dec 2008 10:24:21 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 8895C71C595
	for <java-user@lucene.apache.org>; Sat, 20 Dec 2008 10:24:21 -0800 (PST)
Date: Sat, 20 Dec 2008 10:24:21 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene SpellChecker returns no suggetions after changing Server
In-Reply-To: <21015278.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0812201022470.22283@radix.cryptio.net>
References: <20910159.post@talk.nabble.com> <21015278.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: How can I speed it up?

don't construct a new LuceneDictionary/IndexReader on every "suggest" call 
... construct them once, and reuse them for each suggestion.

: My temporary method:
: public static Vector suggest(String query, String indexName, String field,
: float accuracy) {
: 		Vector v = new Vector();
: 		String[] suggestions = null;
: 		
: 		try {
: 			SpellChecker spellchecker = new SpellChecker(new RAMDirectory()/*, new
: JaroWinklerDistance()*/);			
: 			spellchecker.indexDictionary(new
: LuceneDictionary(IndexReader.open(indexName), field));
: 			spellchecker.setAccuracy(accuracy);			
: 			suggestions = spellchecker.suggestSimilar(query, 5);
: 		} catch (Exception e) {}
: 		
: 		for(int i = 0; i < suggestions.length; i++) {
: 			v.add(suggestions[i]);
: 		}
: 		
: 		return v;
: }


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 20 19:12:59 2008
Return-Path: <java-user-return-37876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61290 invoked from network); 20 Dec 2008 19:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2008 19:12:59 -0000
Received: (qmail 45991 invoked by uid 500); 20 Dec 2008 19:12:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45968 invoked by uid 500); 20 Dec 2008 19:12:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45957 invoked by uid 99); 20 Dec 2008 19:12:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 11:12:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 20 Dec 2008 19:12:43 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 197E271C539; Sat, 20 Dec 2008 11:12:21 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 1552671C4C8
	for <java-user@lucene.apache.org>; Sat, 20 Dec 2008 11:12:21 -0800 (PST)
Date: Sat, 20 Dec 2008 11:12:21 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Inquiry on Lucene Stemming
In-Reply-To: <266062.59207.qm@web45307.mail.sp1.yahoo.com>
Message-ID: <Pine.LNX.4.62.0812201106270.22283@radix.cryptio.net>
References: <283460.47599.qm@web45307.mail.sp1.yahoo.com>
 <359a92830812160614k28e98a38he252cceb9f53c3be@mail.gmail.com>
 <266062.59207.qm@web45307.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Well some client inquiries if it's possible to expand such simple words 
: and does Lucene have an API for this logic? Because all I read was the 
: stemming logic for Lucene was the other way around which is, example 
: "flashing" it will be trimmed to the root word "flash" when searched.

there are two fundemental approaches (that i know of) to stemming: 
reduction and expansion.

reduction can either be algorithmic, or morphologically/dictionary based.  
expansion esentially has to be morphologically based.

The SnowballAnalyzer uses the Snowball stemming algorithm, which is a 
reduction approach to stemming.  if you want an expansion based appraoch, 
you have to have a dictionary.  Lucene doens't provide one of these, but 
that doens't mean you can't use one if you find one -- it's been a while 
since i looked but the only ones i've ever seen were only commercially 
avialable.

http://en.wikipedia.org/wiki/Stemming




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 03:18:15 2008
Return-Path: <java-user-return-37877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42787 invoked from network); 22 Dec 2008 03:18:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 03:18:15 -0000
Received: (qmail 92965 invoked by uid 500); 22 Dec 2008 03:18:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92736 invoked by uid 500); 22 Dec 2008 03:18:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92725 invoked by uid 99); 22 Dec 2008 03:18:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Dec 2008 19:18:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Dec 2008 03:17:54 +0000
Received: (qmail 75463 invoked by uid 60001); 22 Dec 2008 03:17:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=DMsERCXvSm85DK6ZWC6wUMWVrVq4VSJALLRHwAi4SQ5dyHlo0vGvd+lsmbicHQwUiMPHpQi8Xa50m2wIW1fERw/Nv1nH/As/McqxyK9hq0lOQLuojMiYs8wPMTRK9MzrhqELyJhyLVp8jOqeqUORQ/lEmyqyPuoy8G+y/s+/h5A=;
X-YMail-OSG: dif6YlsVM1ngsU72PqdVLPFTLoCmWPcHJSj_8f.572j1ihnb0pTfo6LF_k0_tBKfLMimkFtgMpJPmPsU3lJN63gPGtSc2l02rFftQt_6sXKbT.fGCpIjCpEvJ.fKvyO.hiIrV0mmUSbnCCSIIs8hBfOBzESKQ.0wO.aJ3pCcWKtYuSLM4VI63tmpFDnvU8RK6b.s5OQHi1dwIEkNCjRBk_0aQxd471Y-
Received: from [74.73.13.143] by web50311.mail.re2.yahoo.com via HTTP; Sun, 21 Dec 2008 19:17:32 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <283460.47599.qm@web45307.mail.sp1.yahoo.com> <359a92830812160614k28e98a38he252cceb9f53c3be@mail.gmail.com> <266062.59207.qm@web45307.mail.sp1.yahoo.com> <Pine.LNX.4.62.0812201106270.22283@radix.cryptio.net>
Date: Sun, 21 Dec 2008 19:17:32 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Inquiry on Lucene Stemming
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <796861.75328.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

If Hoss is referring to synonym expansion, allow me to point out that freely downloadable code from Lucene in Action (first edition) has code for that, if you'd like to have a look, OP.

Otis 
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Chris Hostetter <hossman_lucene@fucit.org>
> To: java-user@lucene.apache.org
> Sent: Saturday, December 20, 2008 2:12:21 PM
> Subject: Re: Inquiry on Lucene Stemming
> 
> 
> : Well some client inquiries if it's possible to expand such simple words 
> : and does Lucene have an API for this logic? Because all I read was the 
> : stemming logic for Lucene was the other way around which is, example 
> : "flashing" it will be trimmed to the root word "flash" when searched.
> 
> there are two fundemental approaches (that i know of) to stemming: 
> reduction and expansion.
> 
> reduction can either be algorithmic, or morphologically/dictionary based.  
> expansion esentially has to be morphologically based.
> 
> The SnowballAnalyzer uses the Snowball stemming algorithm, which is a 
> reduction approach to stemming.  if you want an expansion based appraoch, 
> you have to have a dictionary.  Lucene doens't provide one of these, but 
> that doens't mean you can't use one if you find one -- it's been a while 
> since i looked but the only ones i've ever seen were only commercially 
> avialable.
> 
> http://en.wikipedia.org/wiki/Stemming
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 03:18:47 2008
Return-Path: <java-user-return-37878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42821 invoked from network); 22 Dec 2008 03:18:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 03:18:47 -0000
Received: (qmail 94979 invoked by uid 500); 22 Dec 2008 03:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94943 invoked by uid 500); 22 Dec 2008 03:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94932 invoked by uid 99); 22 Dec 2008 03:18:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Dec 2008 19:18:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 03:18:30 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBM3I8VA019398
	for <java-user@lucene.apache.org>; Sun, 21 Dec 2008 21:18:08 -0600
Received: (qmail 30995 invoked by uid 0); 21 Dec 2008 21:18:08 -0600
Date: 21 Dec 2008 21:18:08 -0600
Message-ID: <20081222031808.30994.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Inquiry on Lucene Stemming
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 329983771 - 2333c69e4e91
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=329983771&m=2333c69e4e91&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=329983771&m=2333c69e4e91&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=329983771&m=2333c69e4e91&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 03:19:25 2008
Return-Path: <java-user-return-37879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42937 invoked from network); 22 Dec 2008 03:19:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 03:19:25 -0000
Received: (qmail 97560 invoked by uid 500); 22 Dec 2008 03:19:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97191 invoked by uid 500); 22 Dec 2008 03:19:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97179 invoked by uid 99); 22 Dec 2008 03:19:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Dec 2008 19:19:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 03:19:09 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBM3Ildi019682
	for <java-user@lucene.apache.org>; Sun, 21 Dec 2008 21:18:47 -0600
Received: (qmail 31522 invoked by uid 0); 21 Dec 2008 21:18:47 -0600
Date: 21 Dec 2008 21:18:47 -0600
Message-ID: <20081222031847.31521.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Inquiry on Lucene Stemming
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 329983871 - 37d192170278
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=329983871&m=37d192170278&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=329983871&m=37d192170278&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=329983871&m=37d192170278&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 03:23:34 2008
Return-Path: <java-user-return-37880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45089 invoked from network); 22 Dec 2008 03:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 03:23:34 -0000
Received: (qmail 3952 invoked by uid 500); 22 Dec 2008 03:23:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3914 invoked by uid 500); 22 Dec 2008 03:23:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3903 invoked by uid 99); 22 Dec 2008 03:23:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Dec 2008 19:23:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Dec 2008 03:23:17 +0000
Received: (qmail 47699 invoked by uid 60001); 22 Dec 2008 03:22:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=lZl7MT6XemwGE3Wim2QMKxLhRrtcLE3EOK5xuVllkQBuwgGLvvHUwvtIUyxxMvRpyRqigV7EdY+SEydw4vxU9ORbdt1qMil7J1VOQoQq81mOIdGF5i2UinVO+ptKd1uIwn1e9xqY93YegSq/7N6gV+yRI77l4bJ6wL1HE041Cs0=;
X-YMail-OSG: MS8Mbc4VM1kV509yIM_ONp23cVqQbZFXgWwMez9Sz573ixqC4xQQpQ1wdE.AOmGWLPT3cVd6pnUOw1xFvhEMFTGmbGzCfpvyaF8rF3B5wEoRf4PWVOCTN.nJoxjU9otHWk861xNzphan0hBmy6dcPOqL0oLGfvSammDPrmr0h.47DEWJWA9mNvWs1HUz2SqAdTNanNztmRnOvGBkQhWeovpPlLhx_cbkC03zues-
Received: from [74.73.13.143] by web50306.mail.re2.yahoo.com via HTTP; Sun, 21 Dec 2008 19:22:54 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <OF09F34078.31E2805C-ON48257521.005922F9-48257521.005922FA@lawson.com> <9ac0c6aa0812200125j6686dcdcn975bcf77056843ff@mail.gmail.com>
Date: Sun, 21 Dec 2008 19:22:54 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Default and optimal use of RAMDirectory
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <82105.45212.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Let me add to that that I clearly recall having a hard time getting the tests for that particular section of LIA1 to clearly and consistently show that using the RAMDirectory buffering approach instead of vanilla IndexWriter yields faster indexing.  Even back then IndexWriter buffered indexed data in memory, though today's IndexWriter is much, much better at it.


Otis --
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Michael McCandless <lucene@mikemccandless.com>
> To: java-user@lucene.apache.org
> Sent: Saturday, December 20, 2008 4:25:13 AM
> Subject: Re: Default and optimal use of RAMDirectory
> 
> Actually, things have improved since LIA1 was written a few years ago:
> IndexWriter now does a good job managing the RAM buffer you assign to
> it, so you should not see much benefit by doing your own buffering
> with RAMDirectory (and if you somehow do, I'd like to know about
> it!).
> 
> Instead you should call IndexWriter.setRAMBufferSizeMB.
> 
> Also, FSDirectory does no RAM buffering on its own.
> 
> See here for further ways to tune for indexing throughput:
> 
> http://wiki.apache.org/lucene-java/ImproveIndexingSpeed
> 
> Mike
> 
> wrote:
> 
> >
> > Hi all,
> >
> > First of I'd like to say I'm quite pleased to be a part of this mailing
> > list - its even more exciting to know that we have Otis G. and Erik H.,
> > authors of (at least in my opinion) the Lucene Bible - Lucene in Action,
> > actively answering all these inquiries =)
> >
> > We're currently in the initial stages of implementing lucene as part of our
> > product and one problem that we need to resolve is optimizing lucene.  I've
> > been reading Lucene in Action book and one of the tips for optimizing
> > lucene indexing is by using RAMDirectory as a buffer before writing to
> > FSDirectory.  According to the book, this is done internally and
> > automatically when I use FSDirectory.  My questions are 1.) What's the
> > default implementation/ computation used in allocating RAMdirectory when we
> > implement FSDirectory and 2.) What's the optimal way of customizing
> > RAMDirectory usage - any tips on how to do it.
> >
> > BTW, we're using Lucene 2.3.2
> >
> > Thanks for all the help
> >
> > Joseph
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 03:32:02 2008
Return-Path: <java-user-return-37881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51711 invoked from network); 22 Dec 2008 03:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 03:32:02 -0000
Received: (qmail 12026 invoked by uid 500); 22 Dec 2008 03:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11997 invoked by uid 500); 22 Dec 2008 03:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11986 invoked by uid 99); 22 Dec 2008 03:31:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Dec 2008 19:31:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [70.158.118.30] (HELO england.pageplanet.com) (70.158.118.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 03:31:43 +0000
Received: from [192.168.1.122] (61.247.251.10) by england.pageplanet.com
 with ESMTP (Eudora Internet Mail Server 3.1.4) for 
 <java-user@lucene.apache.org>;
 Sun, 21 Dec 2008 22:31:22 -0500
Message-ID: <494F0A00.3090103@tachyontech.net>
Date: Mon, 22 Dec 2008 09:01:12 +0530
From: Prafulla Kiran <prafulla@tachyontech.net>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery Performance Help
References: <494CFFEF.50206@tachyontech.net> <359a92830812200730j576c2df8p4a434c71a1d173c2@mail.gmail.com>
In-Reply-To: <359a92830812200730j576c2df8p4a434c71a1d173c2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Here's the code which I am using to time the query:

long startTime = System.currentTimeMillis();
TopDocCollector collector = new TopDocCollector(10);
is.search(query,collector);
ScoreDoc[] hits = collector.topDocs().scoreDocs;
long endTime = System.currentTimeMillis();

Most of the clauses which I removed, had very few unique terms: say 2 or 3.
I have started taking the timings after I've fired the warmup queries.
Also, I am not doing any kind of sorting or iterating through the hits 
object.

Regards,
Prafulla

Erick Erickson wrote:
> What specifically are you measuring when you time the queries? I've been
> mislead by including in my measurement say, creating the response. I realize
> that throughput includes assembling the response, but the solution is
> different
> depending upon whether it's the actual search or what you do with the
> results that takes the time.
>
> Are you doing any sorting?
>
> Are you using a Hits object and iterating on it? This gets very inefficient.
>
> You might post your code where you time the query. Also what do the "few
> specific clauses" you remove look like? Do they have anything to do with
> time?
> How many unique values do the fields have that you remove to see the
> improvement?
>
> Do you start your timings *after* you've fired up a few warmup queries?
>
> Best
> Erick
>
> On Sat, Dec 20, 2008 at 9:23 AM, Prafulla Kiran <prafulla@tachyontech.net>wrote:
>
>   
>> Hi Everyone,
>>
>> I have an index of relatively small size (400mb) , containing roughly 0.7
>> million documents. The index is actually a copy of an existing database
>> table. Hence, most of my queries are of the form
>>
>> " +field1:value1 +field2:value2 +field3:value3..... ~20 fields"
>>
>> I have been running performance tests using this query. Strangely, I
>> noticed that if I remove some specific clauses... I get a performance
>> improvement of atleast 5 times. Here are the numbers and examples, so that I
>> could be more precise
>>
>> 1) Complete Query: 90 requests per second using 10 threads
>> 2) If I remove few specific clauses : 500 requests per second using 10
>> threads
>> 3) If I form a new query using only 2 clauses from the set of removed
>> clauses -> 100 requests per second using 10 threads
>>
>> Now, some of these specific clauses are such that they match around half of
>> the entire document set.  Also, note that I need all the query terms to be
>> present in the documents retrieved. My target is to obtain 300 requests per
>> second with the given query (20 clauses). It includes 2 range queries.
>> However, I am unable to get 300 rps unless I remove some of the clauses
>> (which include these range queries) .
>> I have tried using filters without any significant improvement in
>> performance. Also, I have more than enough RAM, so I am using the
>> RAMDirectory to read the index. I have optimized my index before searching.
>> All the tests have been warmed for 5 seconds ( the test duration is 10
>> seconds).
>>
>> My first question is, is this kind of decrease in performance expected as
>> the number of clauses shoot up ? Using a single clause out of these 20 , I
>> was able to get 2000 requests per second!
>> Could someone please guide me if there are any other ways in which I can
>> obtain improvement in performance ?
>> Particularly, I am interested to know more about what further caching could
>> be done apart from the default caching which lucene does.
>>
>> Thanks In Advance,
>> Prafulla
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.176 / Virus Database: 270.9.19/1857 - Release Date: 12/19/2008 10:09 AM
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 03:33:59 2008
Return-Path: <java-user-return-37882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52967 invoked from network); 22 Dec 2008 03:33:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 03:33:59 -0000
Received: (qmail 14968 invoked by uid 500); 22 Dec 2008 03:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14930 invoked by uid 500); 22 Dec 2008 03:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14917 invoked by uid 99); 22 Dec 2008 03:33:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Dec 2008 19:33:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Dec 2008 03:33:43 +0000
Received: (qmail 87303 invoked by uid 60001); 22 Dec 2008 03:33:22 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=v2cR+JEhUQKXLMbNKXd4d/v9Uqn+HKLYXqep+VgRwSUIw7YKgOFxTe7Mt947JH2O92bbQpVlxroPPV0u2NlDHBEGxnQ/q8FPn21SYkxbcObLO3oI484gwUQkNQ4cUgFFXEMHM/J3JFsFs0/jt1IQxlzjxBnNotoLuTh4U0O/EHI=;
X-YMail-OSG: TE9DHU4VM1mqmOA8MkfGjyYpheTtovIItCalBGHkp27UdSMdMN_y3zb9hU4Q471qYdiISYi2CDac9uP0AiWZYxLWo8j7VBqyd.KwNOMeqBGWoeg1nM6g0jRp2IbrsgG8rAfeCWmIwPzEHyA1rXNw11iB19e5l5MRP8olVCU9E7.XjgjkmAZnblL58qPv9UuscNdGZy7ss0Afkw5x.KmP14BNF8G0.eA-
Received: from [74.73.13.143] by web50311.mail.re2.yahoo.com via HTTP; Sun, 21 Dec 2008 19:33:21 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <2dab92100812191328l66723767ja766087b34825b3c@mail.gmail.com>
Date: Sun, 21 Dec 2008 19:33:21 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Url Analyzer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <14941.86673.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mark,

This is simple enough that it should be easy to put together.  If you search the ML archives you'll see that one of the common "tricks" is to "flip" host name parts (e.g. com.sematext.www).  The details of this have been discussed before, so have a look.


Otis --
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Mark Ferguson <mark.a.ferguson@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, December 19, 2008 4:28:10 PM
> Subject: Url Analyzer
> 
> Hello,
> 
> I was wondering if there had been any work done out there on an analyzer for
> URL strings. I'm looking for something which will match on any of the words
> in the domain or path of the URL. I am considering using a PatternAnalyzer
> but I wanted to ask this group to see if this was something which has been
> discussed here before. Thanks very much in advance,
> 
> Mark Ferguson


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 03:42:13 2008
Return-Path: <java-user-return-37883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56222 invoked from network); 22 Dec 2008 03:42:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 03:42:13 -0000
Received: (qmail 19043 invoked by uid 500); 22 Dec 2008 03:42:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19007 invoked by uid 500); 22 Dec 2008 03:42:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18995 invoked by uid 99); 22 Dec 2008 03:42:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Dec 2008 19:42:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Dec 2008 03:41:58 +0000
Received: (qmail 82294 invoked by uid 60001); 22 Dec 2008 03:41:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=spnlLYsLNXXTYGlVZ9LF7dieb4bhm2Y56TZhEcE/JD7BtsD7KWleYekTgV4WToVHdcKfA4k+3OIN1gViv9NAznK+BItJCqDt8+LCVV2XBtBSz12ER7zMNXBLGMMwPbU8GZMbevSIOuWo2OOmYIM9G+vgMyu6+RH5rReKEK6en4s=;
X-YMail-OSG: TIOpdmcVM1lCGvsYSVDqgaTDsfcUzR86uUY0FQeu8qIEexvUlOqOSFDA0Ha15M9npEYFOsByFbZJjdqkI7F4X20INGTMbS0WJAM65KhDFX4lg7h92fIlvxucYH6rJv9Pv8oHZaqBw3jTdcTYR9qf0Jem7po.f3XJHHFdVWrndSCmxQCkTWzl2qYYQzw3tVLPay0e8LEQdJo72f8mx7Gow0WiLzupdzkJKQqmXE4-
Received: from [74.73.13.143] by web50303.mail.re2.yahoo.com via HTTP; Sun, 21 Dec 2008 19:41:36 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <6ef902470812190322i55a96f59x75385aef2b406844@mail.gmail.com>
Date: Sun, 21 Dec 2008 19:41:36 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene suiteable ? 6 mio recods / day 1k
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <90603.82187.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Christian,

You can certainly purge old documents on a daily basis in order to keep the corpus from growing, but note that 3M*90=270M 2K docs may be a bit too much for a single index unless you really have lots of RAM or you don't need queries to be quick.  In other words, you may have to spread this over multiple indices/machines.


Otis --
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Christian Brennsteiner <eingfoan@yahoo.de>
> To: java-user@lucene.apache.org
> Sent: Friday, December 19, 2008 6:22:40 AM
> Subject: lucene suiteable ? 6 mio recods / day 1k
> 
> hi *,
> 
> i am searching for a fulltext index capeable of the following requirements:
> 
> index everyday 3 000 000 new records with a validity of N days (e.g.
> 90 days expiration)
> == 34,7 / s
> one record is e.g. an url and can be up to 2 k big
> 
> http://example.com/somedir/some.html
> 
> lucene should use "/" as a word seperator and should e.g. eliminate all ":"
> 
> so the following "sentence" shoule be indexed:
> 
> http example.com somedir some.html when having the url
> http://example.com/somedir/some.html
> 
> my main concern about this requirement is that the index should not
> grow over time as it always holds
> NR OF DAYS * RECORDS PER DAY  and expires the records after a given
> time. in my opinione ther must be some background thread always
> throwing away expired hits.
> 
> is this easilly possible with lucene?
> 
> regards chris
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 07:55:39 2008
Return-Path: <java-user-return-37884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10785 invoked from network); 22 Dec 2008 07:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 07:55:39 -0000
Received: (qmail 74583 invoked by uid 500); 22 Dec 2008 07:55:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74557 invoked by uid 500); 22 Dec 2008 07:55:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74546 invoked by uid 99); 22 Dec 2008 07:55:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Dec 2008 23:55:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of christian.brennsteiner@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 07:55:23 +0000
Received: by bwz9 with SMTP id 9so5277754bwz.5
        for <java-user@lucene.apache.org>; Sun, 21 Dec 2008 23:55:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=WCG7wHGmaEQ3OEkc+EApI8qdz7Btx15DxY2c7y3FHpY=;
        b=SePtQRUkLtUYRpYLv9SliuaHkmIfCAlSMCy6M+5qiVPeaz3OpPhGEl9s7aHtbGgoqe
         oSNz458SfQVoapQYc1VQVdpxqgwQliotwLh5r6dKGTZQ3aat7sPwY54i5zh6xn4UAFuN
         eto6PPBeCWkSGMkHEQpuxamAr9+tPwC4pDpxE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=ps+wu9f1S0wa21B9jyrkIAPP69G7zHjiXU3OYyciK6ThiCuVwIkfUmAfwSG/N8Q4TS
         2xnQNWffXy2pHOkqrcdbKsBdKzgfM4W0/XOFX94EvvUUldGY7/wUVzLz+uKhJDrhS76P
         SLv9mJrtxtje8gSc6/GxybqChgITUE+CNvvik=
Received: by 10.181.139.10 with SMTP id r10mr2227773bkn.64.1229932501827;
        Sun, 21 Dec 2008 23:55:01 -0800 (PST)
Received: by 10.180.243.18 with HTTP; Sun, 21 Dec 2008 23:55:01 -0800 (PST)
Message-ID: <6ef902470812212355nb7db238wd2df4af635ac1eaa@mail.gmail.com>
Date: Mon, 22 Dec 2008 08:55:01 +0100
From: "Christian Brennsteiner" <christian@brennsteiner.at>
Sender: christian.brennsteiner@gmail.com
To: java-user@lucene.apache.org
Subject: Re: lucene suiteable ? 6 mio recods / day 1k
In-Reply-To: <90603.82187.qm@web50303.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <6ef902470812190322i55a96f59x75385aef2b406844@mail.gmail.com>
	 <90603.82187.qm@web50303.mail.re2.yahoo.com>
X-Google-Sender-Auth: cfa088e7874f4692
X-Virus-Checked: Checked by ClamAV on apache.org

hi otis,

i think that out of 2 k 80 % can be stemmed and many of the words are
duplicates so they would not need full space.
can you give me an idea what in your opinion would mean  "don't need
queries to be quick" ...
i have no idea in what timeframe it could be handeled if it is not
completely in RAM.

regards chris



On Mon, Dec 22, 2008 at 4:41 AM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> Christian
>
> You can certainly purge old documents on a daily basis in order to keep the corpus from growing, but note that 3M*90=270M 2K docs may be a bit too much for a single index unless you really have lots of RAM or you don't need queries to be quick.  In other words, you may have to spread this over multiple indices/machines.
>
>
> Otis --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
>> From: Christian Brennsteiner <eingfoan@yahoo.de>
>> To: java-user@lucene.apache.org
>> Sent: Friday, December 19, 2008 6:22:40 AM
>> Subject: lucene suiteable ? 6 mio recods / day 1k
>>
>> hi *,
>>
>> i am searching for a fulltext index capeable of the following requirements:
>>
>> index everyday 3 000 000 new records with a validity of N days (e.g.
>> 90 days expiration)
>> == 34,7 / s
>> one record is e.g. an url and can be up to 2 k big
>>
>> http://example.com/somedir/some.html
>>
>> lucene should use "/" as a word seperator and should e.g. eliminate all ":"
>>
>> so the following "sentence" shoule be indexed:
>>
>> http example.com somedir some.html when having the url
>> http://example.com/somedir/some.html
>>
>> my main concern about this requirement is that the index should not
>> grow over time as it always holds
>> NR OF DAYS * RECORDS PER DAY  and expires the records after a given
>> time. in my opinione ther must be some background thread always
>> throwing away expired hits.
>>
>> is this easilly possible with lucene?
>>
>> regards chris
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
---------------
Christian Brennsteiner
Linzergasse 21 / 14
5020 Salzburg
Austria / Europe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 07:56:15 2008
Return-Path: <java-user-return-37885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11097 invoked from network); 22 Dec 2008 07:56:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 07:56:15 -0000
Received: (qmail 76485 invoked by uid 500); 22 Dec 2008 07:56:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76291 invoked by uid 500); 22 Dec 2008 07:56:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76280 invoked by uid 99); 22 Dec 2008 07:56:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Dec 2008 23:56:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 07:56:00 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBM7tck8011416
	for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 01:55:38 -0600
Received: (qmail 19271 invoked by uid 0); 22 Dec 2008 01:55:38 -0600
Date: 22 Dec 2008 01:55:38 -0600
Message-ID: <20081222075538.19270.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_lucene_suiteable_=3F_6_mio_recods_=2F_day_1k?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 330035930 - 58cb4cb9ef1e (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=330035930&m=58cb4cb9ef1e&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=330035930&m=58cb4cb9ef1e&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=330035930&m=58cb4cb9ef1e&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 07:56:47 2008
Return-Path: <java-user-return-37886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11265 invoked from network); 22 Dec 2008 07:56:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 07:56:47 -0000
Received: (qmail 78365 invoked by uid 500); 22 Dec 2008 07:56:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77987 invoked by uid 500); 22 Dec 2008 07:56:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77969 invoked by uid 99); 22 Dec 2008 07:56:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 21 Dec 2008 23:56:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 07:56:31 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBM7uAKL002506
	for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 01:56:10 -0600
Received: (qmail 19634 invoked by uid 0); 22 Dec 2008 01:56:10 -0600
Date: 22 Dec 2008 01:56:10 -0600
Message-ID: <20081222075610.19633.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_Re:_lucene_suiteable_=3F_6_mio_recods_=2F_day_1k?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.06
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 330036054 - c7f816827bc1
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=330036054&m=c7f816827bc1&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=330036054&m=c7f816827bc1&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=330036054&m=c7f816827bc1&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 11:00:14 2008
Return-Path: <java-user-return-37887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2574 invoked from network); 22 Dec 2008 11:00:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 11:00:14 -0000
Received: (qmail 38485 invoked by uid 500); 22 Dec 2008 11:00:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38452 invoked by uid 500); 22 Dec 2008 11:00:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38441 invoked by uid 99); 22 Dec 2008 11:00:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 03:00:06 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 10:59:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LEiVe-0004Yb-LE
	for java-user@lucene.apache.org; Mon, 22 Dec 2008 02:59:38 -0800
Message-ID: <21125964.post@talk.nabble.com>
Date: Mon, 22 Dec 2008 02:59:38 -0800 (PST)
From: "Matthias W." <Matthias.Wangler@e-projecta.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene SpellChecker returns no suggetions after changing Server
In-Reply-To: <Pine.LNX.4.62.0812201022470.22283@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: Matthias.Wangler@e-projecta.com
References: <20910159.post@talk.nabble.com> <21015278.post@talk.nabble.com> <Pine.LNX.4.62.0812201022470.22283@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your answer.
I already found the reason for the bad performance.

hossman wrote:
> 
> don't construct a new LuceneDictionary/IndexReader on every "suggest" call 
> ... construct them once, and reuse them for each suggestion.
> 
This was the first thing I did, but the effect was not that big...

The reason was the usage of the RAMDirectory. Now I'm usig
FSDirectory.getDirectory("/dictionary") instead of new RAMDirectory() and it
works fine.
-- 
View this message in context: http://www.nabble.com/Lucene-SpellChecker-returns-no-suggetions-after-changing-Server-tp20910159p21125964.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 13:12:07 2008
Return-Path: <java-user-return-37888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55871 invoked from network); 22 Dec 2008 13:12:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 13:12:07 -0000
Received: (qmail 63480 invoked by uid 500); 22 Dec 2008 13:11:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63426 invoked by uid 500); 22 Dec 2008 13:11:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63408 invoked by uid 99); 22 Dec 2008 13:11:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 05:11:59 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of amar.sannaik@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 13:11:48 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2431670rvb.5
        for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 05:11:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=xBqp4lp3NJNf0PJ7V6bGyuwklW4z3eetoqaTxbSpuXY=;
        b=MrmzHuQJLvNMwC+fQbqD9VPCoeoFWw08cmSn6BEgWFMTaPNL/T9pLGA4AHgn5EcqpW
         HCPo9ihLx6ODigzjh4AFVCbgDHO2diJsUbIRc8k98dnpWKlRKOjCW/dZZ61D/Dr6RzQe
         4a2KHtDQz32pBRJNeaEImVNEreQx+0I9Cwrd4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=FpDxt5T1f95mtmbRy4ZUFMXLRe+JIDvDBtFXRu53Qrh7BSQpyQEX0MxGxGZDEzTHck
         o2HirpnO8dF0IYLKTeWbmTA3StmbQi9foky0yvIxNHax+9uzaM7miBWp/hrHCIQvh4Mg
         P2c9YJP/5mwqFkHPpz3kQpLpG7HKygX8Amr1I=
Received: by 10.114.171.1 with SMTP id t1mr3994161wae.74.1229951486896;
        Mon, 22 Dec 2008 05:11:26 -0800 (PST)
Received: by 10.114.155.4 with HTTP; Mon, 22 Dec 2008 05:11:26 -0800 (PST)
Message-ID: <dcac67550812220511j1e353eabs5a536fcb3e06a7d1@mail.gmail.com>
Date: Mon, 22 Dec 2008 18:41:26 +0530
From: amar.sannaik@gmail.com
To: java-user@lucene.apache.org
Subject: Lucene search problem
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52913_13831308.1229951486894"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_52913_13831308.1229951486894
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have problem with lucene search, I am quite new to this. Can some body
help or just push me to who can please.

Problem what I am facing we need search for object whose attribute "chain"
contaning null, but lucene does not help indexing the null values..

how can I achieve this, or please guide me the alternative way of doing
this.

Thanks in advance.
-Amar

------=_Part_52913_13831308.1229951486894--

From java-user-return-37889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 13:55:27 2008
Return-Path: <java-user-return-37889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79168 invoked from network); 22 Dec 2008 13:55:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 13:55:27 -0000
Received: (qmail 30163 invoked by uid 500); 22 Dec 2008 13:55:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30130 invoked by uid 500); 22 Dec 2008 13:55:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30119 invoked by uid 99); 22 Dec 2008 13:55:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 05:55:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 13:55:08 +0000
Received: by yx-out-2324.google.com with SMTP id 3so648151yxj.5
        for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 05:54:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=uVDxcLkiL9q7c8GecP4ZYG2hFtDu62HSDwo+2rxV9tw=;
        b=w+H1Y/7nT+MLYR6dDAEA3w9nI4dhf1qRWB0vvBmwKEkyKQe1o++J8xhd8wrjCl9RPY
         aYMk+xr0XFmqplZfeXLJvXBu69c3VQfMDMC22aO3j5tqrrwlHzDRlhIAEPEGZxDFofls
         rvjqxRywZT/E1PsNSsdYxacRGay8y5AxnrlS8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dr8kuzwxxu1XSKY58QZVFKiDKpBOFG5Jbhk5iKY6gdyScvCsRb1Buop45hYdy6Swk/
         D4QKi7XLGDMDYf3Oj0hlKOanMLypBPtXXnw7dIsTGPLFczUodS4w5iT6OCadCIMXXMk9
         ixtNkeTpk41sqBSHKtdjAlFt6udl5+nzc82vA=
Received: by 10.90.98.13 with SMTP id v13mr3212602agb.105.1229954086902;
        Mon, 22 Dec 2008 05:54:46 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Mon, 22 Dec 2008 05:54:46 -0800 (PST)
Message-ID: <359a92830812220554m79e2e5s9636949c405375ba@mail.gmail.com>
Date: Mon, 22 Dec 2008 08:54:46 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery Performance Help
In-Reply-To: <494F0A00.3090103@tachyontech.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70043_25513824.1229954086889"
References: <494CFFEF.50206@tachyontech.net>
	 <359a92830812200730j576c2df8p4a434c71a1d173c2@mail.gmail.com>
	 <494F0A00.3090103@tachyontech.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70043_25513824.1229954086889
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, you haven't run afoul of the usual suspects, that's pretty
clean timing code. I'm afraid I'll have to defer to the people who
know the internals of Lucene.....

Best
Erick

On Sun, Dec 21, 2008 at 10:31 PM, Prafulla Kiran
<prafulla@tachyontech.net>wrote:

> Hi,
>
> Here's the code which I am using to time the query:
>
> long startTime = System.currentTimeMillis();
> TopDocCollector collector = new TopDocCollector(10);
> is.search(query,collector);
> ScoreDoc[] hits = collector.topDocs().scoreDocs;
> long endTime = System.currentTimeMillis();
>
> Most of the clauses which I removed, had very few unique terms: say 2 or 3.
> I have started taking the timings after I've fired the warmup queries.
> Also, I am not doing any kind of sorting or iterating through the hits
> object.
>
> Regards,
> Prafulla
>
> Erick Erickson wrote:
>
>> What specifically are you measuring when you time the queries? I've been
>> mislead by including in my measurement say, creating the response. I
>> realize
>> that throughput includes assembling the response, but the solution is
>> different
>> depending upon whether it's the actual search or what you do with the
>> results that takes the time.
>>
>> Are you doing any sorting?
>>
>> Are you using a Hits object and iterating on it? This gets very
>> inefficient.
>>
>> You might post your code where you time the query. Also what do the "few
>> specific clauses" you remove look like? Do they have anything to do with
>> time?
>> How many unique values do the fields have that you remove to see the
>> improvement?
>>
>> Do you start your timings *after* you've fired up a few warmup queries?
>>
>> Best
>> Erick
>>
>> On Sat, Dec 20, 2008 at 9:23 AM, Prafulla Kiran <prafulla@tachyontech.net
>> >wrote:
>>
>>
>>
>>> Hi Everyone,
>>>
>>> I have an index of relatively small size (400mb) , containing roughly 0.7
>>> million documents. The index is actually a copy of an existing database
>>> table. Hence, most of my queries are of the form
>>>
>>> " +field1:value1 +field2:value2 +field3:value3..... ~20 fields"
>>>
>>> I have been running performance tests using this query. Strangely, I
>>> noticed that if I remove some specific clauses... I get a performance
>>> improvement of atleast 5 times. Here are the numbers and examples, so
>>> that I
>>> could be more precise
>>>
>>> 1) Complete Query: 90 requests per second using 10 threads
>>> 2) If I remove few specific clauses : 500 requests per second using 10
>>> threads
>>> 3) If I form a new query using only 2 clauses from the set of removed
>>> clauses -> 100 requests per second using 10 threads
>>>
>>> Now, some of these specific clauses are such that they match around half
>>> of
>>> the entire document set.  Also, note that I need all the query terms to
>>> be
>>> present in the documents retrieved. My target is to obtain 300 requests
>>> per
>>> second with the given query (20 clauses). It includes 2 range queries.
>>> However, I am unable to get 300 rps unless I remove some of the clauses
>>> (which include these range queries) .
>>> I have tried using filters without any significant improvement in
>>> performance. Also, I have more than enough RAM, so I am using the
>>> RAMDirectory to read the index. I have optimized my index before
>>> searching.
>>> All the tests have been warmed for 5 seconds ( the test duration is 10
>>> seconds).
>>>
>>> My first question is, is this kind of decrease in performance expected as
>>> the number of clauses shoot up ? Using a single clause out of these 20 ,
>>> I
>>> was able to get 2000 requests per second!
>>> Could someone please guide me if there are any other ways in which I can
>>> obtain improvement in performance ?
>>> Particularly, I am interested to know more about what further caching
>>> could
>>> be done apart from the default caching which lucene does.
>>>
>>> Thanks In Advance,
>>> Prafulla
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>  ------------------------------------------------------------------------
>>
>>
>> No virus found in this incoming message.
>> Checked by AVG - http://www.avg.com Version: 8.0.176 / Virus Database:
>> 270.9.19/1857 - Release Date: 12/19/2008 10:09 AM
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_70043_25513824.1229954086889--

From java-user-return-37890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 13:58:55 2008
Return-Path: <java-user-return-37890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81272 invoked from network); 22 Dec 2008 13:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 13:58:55 -0000
Received: (qmail 36279 invoked by uid 500); 22 Dec 2008 13:58:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36227 invoked by uid 500); 22 Dec 2008 13:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36216 invoked by uid 99); 22 Dec 2008 13:58:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 05:58:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 13:58:42 +0000
Received: by yx-out-2324.google.com with SMTP id 3so648545yxj.5
        for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 05:58:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=UH1WOcWkPklEDVPJvLLMfLqWtAQDZ/RJqvoMS5OzlQA=;
        b=xxD2APbMZVEkl3DtSO4GmfHoVsAYJSUyPJj0phuM7Zu1Mf1V9rMa0Ho/eVxOWyZ02/
         eBzm+xpEQZJLP7MvsILlr5zVsHp7h5o+XrccoZovWjvLvBst56rDbYpJyqcUf53/kvRd
         +8Wh4X7y+LfIlR7fJ/HnSOBi1Q+G5T+wPVqsQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Pqg22rdvuDui0xM7zdBVy7F/JxS/BN5eKLy8iHYuAC/jPrTfjf8RETlMdC0GLCehtR
         2H+xieYiaSCIqiNA+CLeWMIelqB0IeLgNs0lQPmmjZPq9sXPxaDiGLF9V0Pyu+vRp+M2
         fM60VeZV5LNbknIFUWA/XAWyOrE2fe38i806w=
Received: by 10.90.120.14 with SMTP id s14mr3226888agc.36.1229954301140;
        Mon, 22 Dec 2008 05:58:21 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Mon, 22 Dec 2008 05:58:21 -0800 (PST)
Message-ID: <359a92830812220558u48cb90eci9b731ee7b79e691@mail.gmail.com>
Date: Mon, 22 Dec 2008 08:58:21 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search problem
In-Reply-To: <dcac67550812220511j1e353eabs5a536fcb3e06a7d1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70115_14810351.1229954301129"
References: <dcac67550812220511j1e353eabs5a536fcb3e06a7d1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70115_14810351.1229954301129
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try searching the mailing list archives for a fuller discussion, but
the short answer is usually to index an unique value for your
"null" entries, then search on that, something totally
outrageous like, say AAABBBCCCDDDEEEFFF.

Alternatively, you could create, at startup time, a
Filter of all the docs that *do* contain terms for the
field in question, flip the bits and use the Filter in your
searches. (Hint: see TermDocs/TermEnum)

Best
Erick

On Mon, Dec 22, 2008 at 8:11 AM, <amar.sannaik@gmail.com> wrote:

> Hi,
>
> I have problem with lucene search, I am quite new to this. Can some body
> help or just push me to who can please.
>
> Problem what I am facing we need search for object whose attribute "chain"
> contaning null, but lucene does not help indexing the null values..
>
> how can I achieve this, or please guide me the alternative way of doing
> this.
>
> Thanks in advance.
> -Amar
>

------=_Part_70115_14810351.1229954301129--

From java-user-return-37891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 18:07:42 2008
Return-Path: <java-user-return-37891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93302 invoked from network); 22 Dec 2008 18:07:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 18:07:42 -0000
Received: (qmail 69153 invoked by uid 500); 22 Dec 2008 18:07:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69119 invoked by uid 500); 22 Dec 2008 18:07:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69107 invoked by uid 99); 22 Dec 2008 18:07:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 10:07:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ryantxu@gmail.com designates 209.85.200.175 as permitted sender)
Received: from [209.85.200.175] (HELO wf-out-1314.google.com) (209.85.200.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 18:07:26 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2118667wfc.20
        for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 10:07:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=CM0nmwB2LMWc58rLVPi3uxLubBLUHVMmblmAwB/q0q4=;
        b=wgcLdGguHa1Yooz0INF2ohNFUqb+ZUhILCXp5It0KqnPFRXHPQAY9/Aqh0nS6n5f3y
         aDnx7aO18HV86mAlctSdeeVNLE2qHvBNlB9DTjsTcvcdBFOKuVaPPzhvwMP0x+RfsCXi
         kE+d2EfIeO9JBJIlGH08IH26XPohNpjBHZ2fw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=Bjr1aempvW5x638NovTT6i4z0/6/eJ9YEz8mxGUq7AwiFsZFpqgKna3Pze9fJZ0psa
         zun3yGdplxM7wQ6+PTxbE7Ni2QQjTMDn43k8J1wiFeD2zcUnwNu6nABdZNxgJW29Weow
         7E0qgZxkeeSJaPtEAE8UuTtvxj2Ov25nbqNsE=
Received: by 10.142.78.8 with SMTP id a8mr2780136wfb.348.1229969226692;
        Mon, 22 Dec 2008 10:07:06 -0800 (PST)
Received: from ?192.168.0.3? (c-98-210-72-19.hsd1.ca.comcast.net [98.210.72.19])
        by mx.google.com with ESMTPS id 22sm15293523wfg.30.2008.12.22.10.07.04
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 22 Dec 2008 10:07:05 -0800 (PST)
Message-Id: <213833A6-C5EC-46C2-9009-A7E34539218F@gmail.com>
From: Ryan McKinley <ryantxu@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.62.0812192318370.16533@radix.cryptio.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Preserving old releases
Date: Mon, 22 Dec 2008 10:07:02 -0800
References: <Pine.LNX.4.62.0812192318370.16533@radix.cryptio.net>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

I think a link is probably enough...

its funny to have "lucene-current.xxx" listed on:
http://archive.apache.org/dist/jakarta/lucene/



On Dec 19, 2008, at 11:25 PM, Chris Hostetter wrote:

>
> a couple of refrences to "Lucene 1.2" in the last few months got me  
> thinking and made me realize that 1.4.3 is the oldest release  
> available in the lucene dist archive, they might still be in the  
> jakarta dist archive. sure enough...
>
> http://archive.apache.org/dist/jakarta/lucene/source/
> http://archive.apache.org/dist/jakarta/lucene/binaries/
>
> so i'm wondering what people think about copying/moving them to  
> archive.apache.org/dist/lucene/java ?
>
> alternately: leave them where they are (it was the jakarta PMC that  
> released them after all) but maybe add a link along with the  
> existing note about archived versions.
>
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 18:13:06 2008
Return-Path: <java-user-return-37892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97351 invoked from network); 22 Dec 2008 18:13:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 18:13:06 -0000
Received: (qmail 76226 invoked by uid 500); 22 Dec 2008 18:12:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75752 invoked by uid 500); 22 Dec 2008 18:12:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75740 invoked by uid 99); 22 Dec 2008 18:12:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 10:12:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Dec 2008 18:12:46 +0000
Received: (qmail 20623 invoked by uid 60001); 22 Dec 2008 18:12:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Yx2hJcooJmNWWVhzWx3nU+VWCXCNu8XHzc7AqvUeVeE51OpzBy2biKjqTA+cIL729UbEYGfbwsm2fMTqphhMCx2FxJoCr0e44Z52SmwNuVYHtRewXEjiiqnsNm36e/KR/R4QqoRcwvW1kQlV3ZVUK7UYlhl4pyvs7BtCakjidBc=;
X-YMail-OSG: HKRiPU8VM1mjcLufrIWMPPIgUiMeyKVACr1aO3zB3FOJEnX_QXorwMMpCGWr7Jf1pkFPMVjyZ2rbJ9WcVnv4shNpopCMC1HxcYKyUu.xBKF.Tm_sr0J.546zcpgJGVHuRukL8WncXm2_7u.syWfUHa7kiOk1Z2s8BLibpU1FJREKN68BUD.Xisk3QmMNDBpGW.Z5tDg9.wYEtDuT.d0ji0gV0n.oDigs9LJHtq4-
Received: from [167.206.188.3] by web50311.mail.re2.yahoo.com via HTTP; Mon, 22 Dec 2008 10:12:25 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <6ef902470812190322i55a96f59x75385aef2b406844@mail.gmail.com>  <90603.82187.qm@web50303.mail.re2.yahoo.com> <6ef902470812212355nb7db238wd2df4af635ac1eaa@mail.gmail.com>
Date: Mon, 22 Dec 2008 10:12:25 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene suiteable ? 6 mio recods / day 1k
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <778537.20203.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Christian,

Typically for public facing applications the desire is to have search results be sub-second.  For some applications waiting even a minute or more is OK.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Christian Brennsteiner <christian@brennsteiner.at>
> To: java-user@lucene.apache.org
> Sent: Monday, December 22, 2008 2:55:01 AM
> Subject: Re: lucene suiteable ? 6 mio recods / day 1k
> 
> hi otis,
> 
> i think that out of 2 k 80 % can be stemmed and many of the words are
> duplicates so they would not need full space.
> can you give me an idea what in your opinion would mean  "don't need
> queries to be quick" ...
> i have no idea in what timeframe it could be handeled if it is not
> completely in RAM.
> 
> regards chris
> 
> 
> 
> On Mon, Dec 22, 2008 at 4:41 AM, Otis Gospodnetic
> wrote:
> > Christian
> >
> > You can certainly purge old documents on a daily basis in order to keep the 
> corpus from growing, but note that 3M*90=270M 2K docs may be a bit too much for 
> a single index unless you really have lots of RAM or you don't need queries to 
> be quick.  In other words, you may have to spread this over multiple 
> indices/machines.
> >
> >
> > Otis --
> > Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
> >
> >
> >
> > ----- Original Message ----
> >> From: Christian Brennsteiner 
> >> To: java-user@lucene.apache.org
> >> Sent: Friday, December 19, 2008 6:22:40 AM
> >> Subject: lucene suiteable ? 6 mio recods / day 1k
> >>
> >> hi *,
> >>
> >> i am searching for a fulltext index capeable of the following requirements:
> >>
> >> index everyday 3 000 000 new records with a validity of N days (e.g.
> >> 90 days expiration)
> >> == 34,7 / s
> >> one record is e.g. an url and can be up to 2 k big
> >>
> >> http://example.com/somedir/some.html
> >>
> >> lucene should use "/" as a word seperator and should e.g. eliminate all ":"
> >>
> >> so the following "sentence" shoule be indexed:
> >>
> >> http example.com somedir some.html when having the url
> >> http://example.com/somedir/some.html
> >>
> >> my main concern about this requirement is that the index should not
> >> grow over time as it always holds
> >> NR OF DAYS * RECORDS PER DAY  and expires the records after a given
> >> time. in my opinione ther must be some background thread always
> >> throwing away expired hits.
> >>
> >> is this easilly possible with lucene?
> >>
> >> regards chris
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> 
> -- 
> ---------------
> Christian Brennsteiner
> Linzergasse 21 / 14
> 5020 Salzburg
> Austria / Europe
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 18:34:48 2008
Return-Path: <java-user-return-37893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15414 invoked from network); 22 Dec 2008 18:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 18:34:48 -0000
Received: (qmail 4852 invoked by uid 500); 22 Dec 2008 18:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4822 invoked by uid 500); 22 Dec 2008 18:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4811 invoked by uid 99); 22 Dec 2008 18:34:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 10:34:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.163] (HELO web50711.mail.re2.yahoo.com) (206.190.38.163)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Dec 2008 18:34:33 +0000
Received: (qmail 86770 invoked by uid 60001); 22 Dec 2008 18:34:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=NPovMRyzrTOClq+PTyxtu0b5vxD+oEAQ8j07ibX7mqscK7MjCSMXw9XnYLVvnUM2GPrJrkaP+JsUA/rzg3+8V27wmqwRbMKbVGKViIebotzqZrU3KeHKvmUocq8N0qm3RZtlo0zhpN7sh/qxUXItcoptUAce04DSGbd6hWjDMnM=;
X-YMail-OSG: 2cICyI8VM1nAhrukpuFynOOuDSOvKesQ1LSb_B4mAo8XrgmVa7xlld940h2ay_m8wTeALAGz22cNXxC5811DjhDZBryLLuoF7rht_FQDtifX0.YyIcvkjqC28WoYR3U4PtXbwYdDI4Cmc1JzamDSPMahTt.07RiFrCwf7rhaE8e88o_45BmgL89zveEWrw2lAFl_H1hmuJE5aaqyRd498t3oVfiOQGwE
Received: from [98.216.104.214] by web50711.mail.re2.yahoo.com via HTTP; Mon, 22 Dec 2008 10:34:11 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <dcac67550812220511j1e353eabs5a536fcb3e06a7d1@mail.gmail.com> <359a92830812220558u48cb90eci9b731ee7b79e691@mail.gmail.com>
Date: Mon, 22 Dec 2008 10:34:11 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Re: Lucene search problem
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <50984.86344.qm@web50711.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I would second Erick's recommendation - create an arbitrary representation for NULL such as "NULL" (if you are certain the term "NULL" does not occur in actual docs. Alternatively, use "NULLNULNULLNULL" or something to that effect.



----- Original Message ----
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, December 22, 2008 8:58:21 AM
Subject: Re: Lucene search problem

Try searching the mailing list archives for a fuller discussion, but
the short answer is usually to index an unique value for your
"null" entries, then search on that, something totally
outrageous like, say AAABBBCCCDDDEEEFFF.

Alternatively, you could create, at startup time, a
Filter of all the docs that *do* contain terms for the
field in question, flip the bits and use the Filter in your
searches. (Hint: see TermDocs/TermEnum)

Best
Erick

On Mon, Dec 22, 2008 at 8:11 AM, <amar.sannaik@gmail.com> wrote:

> Hi,
>
> I have problem with lucene search, I am quite new to this. Can some body
> help or just push me to who can please.
>
> Problem what I am facing we need search for object whose attribute "chain"
> contaning null, but lucene does not help indexing the null values..
>
> how can I achieve this, or please guide me the alternative way of doing
> this.
>
> Thanks in advance.
> -Amar
>



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 21:05:16 2008
Return-Path: <java-user-return-37894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55469 invoked from network); 22 Dec 2008 21:05:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 21:05:16 -0000
Received: (qmail 84356 invoked by uid 500); 22 Dec 2008 21:05:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84113 invoked by uid 500); 22 Dec 2008 21:05:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84102 invoked by uid 99); 22 Dec 2008 21:05:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 13:05:08 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 21:05:00 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LErx9-0005ba-Iy
	for java-user@lucene.apache.org; Mon, 22 Dec 2008 13:04:39 -0800
Message-ID: <21134951.post@talk.nabble.com>
Date: Mon, 22 Dec 2008 13:04:39 -0800 (PST)
From: 1world1love <jd_cowan@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: optimize: went from 14488449 to 38449
In-Reply-To: <C24C3D9C-F836-4EE0-B01F-7592C6803BAC@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jd_cowan@yahoo.com
References: <21085589.post@talk.nabble.com> <015e01c96193$f4cde1f0$710bc30a@sv.us.sonicwall.com> <21085775.post@talk.nabble.com> <C24C3D9C-F836-4EE0-B01F-7592C6803BAC@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Michael McCandless-2 wrote:
> 
> 
> How did you delete the documents?  EG, by docID using IndexReader, by  
> Term or Query using IndexWriter?
> 
> And when you said your previous index had 14488449 docs, was numDocs()  
> or maxDoc()?
> 
> 

I deleted by docid. I got the number by numdocs.

Just to followup, I think that this was caused by some filesystem issues. My
sysadmin said there were numerous nfs errors in the log.

Also, after this happened, I ran a checkindex and got a weird EOF exception.

Since then, I made another copy and did a checksum on all of the files and
then did the optimize and it worked fine.
-- 
View this message in context: http://www.nabble.com/optimize%3A-went-from-14488449-to-38449-tp21085589p21134951.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 21:08:05 2008
Return-Path: <java-user-return-37895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56206 invoked from network); 22 Dec 2008 21:08:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 21:08:04 -0000
Received: (qmail 87063 invoked by uid 500); 22 Dec 2008 21:07:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87034 invoked by uid 500); 22 Dec 2008 21:07:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87023 invoked by uid 99); 22 Dec 2008 21:07:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 13:07:58 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 21:07:50 +0000
Received: by an-out-0708.google.com with SMTP id b2so689428ana.5
        for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 13:07:28 -0800 (PST)
Received: by 10.100.8.17 with SMTP id 17mr4109818anh.85.1229980048481;
        Mon, 22 Dec 2008 13:07:28 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id c40sm19744274anc.28.2008.12.22.13.07.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 22 Dec 2008 13:07:27 -0800 (PST)
Message-Id: <83F1F97B-34E5-4BE4-A664-F3565C9D5A47@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <21134951.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: optimize: went from 14488449 to 38449
Date: Mon, 22 Dec 2008 16:07:25 -0500
References: <21085589.post@talk.nabble.com> <015e01c96193$f4cde1f0$710bc30a@sv.us.sonicwall.com> <21085775.post@talk.nabble.com> <C24C3D9C-F836-4EE0-B01F-7592C6803BAC@mikemccandless.com> <21134951.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


OK.  Thanks for bringing closure here.

Mike

1world1love wrote:

>
>
>
> Michael McCandless-2 wrote:
>>
>>
>> How did you delete the documents?  EG, by docID using IndexReader, by
>> Term or Query using IndexWriter?
>>
>> And when you said your previous index had 14488449 docs, was  
>> numDocs()
>> or maxDoc()?
>>
>>
>
> I deleted by docid. I got the number by numdocs.
>
> Just to followup, I think that this was caused by some filesystem  
> issues. My
> sysadmin said there were numerous nfs errors in the log.
>
> Also, after this happened, I ran a checkindex and got a weird EOF  
> exception.
>
> Since then, I made another copy and did a checksum on all of the  
> files and
> then did the optimize and it worked fine.
> -- 
> View this message in context: http://www.nabble.com/optimize%3A-went-from-14488449-to-38449-tp21085589p21134951.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 21:49:03 2008
Return-Path: <java-user-return-37896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76990 invoked from network); 22 Dec 2008 21:49:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 21:49:03 -0000
Received: (qmail 31195 invoked by uid 500); 22 Dec 2008 21:48:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31089 invoked by uid 500); 22 Dec 2008 21:48:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31078 invoked by uid 99); 22 Dec 2008 21:48:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 13:48:56 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MISSING_MID,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [65.199.122.3] (HELO mainsequence.net) (65.199.122.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 21:48:47 +0000
Received: from 127.0.0.1 by mainsequence.net (MDaemon PRO v9.6.6)
	with ESMTP id md50009224019.msg
	for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 16:48:22 -0500
X-Spam-Processed: mainsequence.net, Mon, 22 Dec 2008 16:48:22 -0500
	(not processed: message from trusted or authenticated source)
X-Authenticated-Sender: test_account@mainsequence.net
X-MDRemoteIP: 66.104.120.34
X-Return-Path: prvs=1242ee7c8d=chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
Reply-To: "Chris Salem" <>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: 
Subject: lucene explanation
Date: Mon, 22 Dec 2008 21:48:17 -0000
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCRecruiter Emulation of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCRecruiter Emulation of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcrFA7C9CCDE9094C748DC7789358C030DFsection1-b1"
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20081222214855.0CEBB816024@nike.apache.org>

------=_pcrFA7C9CCDE9094C748DC7789358C030DFsection1-b1
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hello,
I'm wondering what the best way to accomplish this is.
When a user enters text to search on it customarily searches 3 fields, resume_text, profile_text, and summary_text, so a standard query would be something like:
(resume_text:(query) OR profile_text:(query) OR summary_text:(query))
For each hit (up to 50) I'd like to find out which part of the query matched with the document.  Right now I use the Explanation object, here's the code:
int len = hits.length();
if(len > 50) len = 50;
for(int i=0; i<len; i++){
Explanation ex = searcher.explain(Query.parse("resume_text:(query)"), hits.id(i));
if(ex.isMatch()) ...
ex = searcher.explain(Query.parse("profile_text:(query)"), hits.id(i));
if(ex.isMatch()) ...
ex = searcher.explain(Query.parse("summary_text:(query)"), hits.id(i));
if(ex.isMatch()) ...
}
This works fine with regular queries, but if someone does a query with a wildcard search times increase to more than 30 seconds.  Is there a better way to do this?
Thanks
Sincerely,
Chris Salem 

------=_pcrFA7C9CCDE9094C748DC7789358C030DFsection1-b1--




From java-user-return-37897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 22:01:26 2008
Return-Path: <java-user-return-37897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82550 invoked from network); 22 Dec 2008 22:01:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 22:01:26 -0000
Received: (qmail 45240 invoked by uid 500); 22 Dec 2008 22:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45202 invoked by uid 500); 22 Dec 2008 22:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45190 invoked by uid 99); 22 Dec 2008 22:01:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 14:01:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 22:01:13 +0000
Received: by yx-out-2324.google.com with SMTP id 3so717907yxj.5
        for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 14:00:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=stie15Mu+7xg87vSHfTcWYEKKKmn6WIjUHR2DbRCe7I=;
        b=P2UhKiJDev9rxoJIYApHE5ZodfmIHw16wsVaP2W3p+cmfpuGIofOD7y16TSaiV8DjP
         qI+OyuhZdZVole9d5Y3NaKq4hkKKykVfRekabGuZenCwl1FplN66uR7RRTo0eKBb2orl
         qsGz8iPyDITOlLeA1EQ1zfsHLFY8xBQeBt9w8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=f0viTAqpj5YA2bFJgC54tplD/PvfLX65maMBb1xVCVdkk5c52HrpwBxFU1CoVTUL5o
         r0vUcKjuMACOL2Cqo8Kpd8MYPepMjS6bfssnYoQmFbHPCcBaCPd9LgLtj10xiDPDyvi9
         rdW7QYgbiZdoJsPfvrootpTOBlYmK0QIlmEnY=
Received: by 10.90.100.20 with SMTP id x20mr3498200agb.47.1229983251376;
        Mon, 22 Dec 2008 14:00:51 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Mon, 22 Dec 2008 14:00:51 -0800 (PST)
Message-ID: <359a92830812221400n20493764m7c3cbf005247e3cc@mail.gmail.com>
Date: Mon, 22 Dec 2008 17:00:51 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene explanation
In-Reply-To: <20081222214855.0CEBB816024@nike.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76624_9048455.1229983251363"
References: <20081222214855.0CEBB816024@nike.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_76624_9048455.1229983251363
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Warning! I'm really reaching on this....


But it seems you could use TermDocs/TermEnum to
good effect here. Basically, you should be able, for a
given term, use the above to determine whether
doc N had a hit in one of your fields pretty efficiently.
There's even a WildcardTermEnum that will iterate
over wildcards.

Filters are surprisingly fast to construct, so you could
use the above to construct a filter on each term for
each field. Then determining whether the doc is a hit
for a particular field is just a matter of seeing if
that bit is on in the relevant filter.

Either one should be waaaay under 30 seconds,
although I don't know how big your index is
or how encompassing your wildcard searches
are...

FWIW
Erick

On Mon, Dec 22, 2008 at 4:48 PM, Chris Salem <chris@mainsequence.net> wrote:

> Hello,
> I'm wondering what the best way to accomplish this is.
> When a user enters text to search on it customarily searches 3 fields,
> resume_text, profile_text, and summary_text, so a standard query would be
> something like:
> (resume_text:(query) OR profile_text:(query) OR summary_text:(query))
> For each hit (up to 50) I'd like to find out which part of the query
> matched with the document.  Right now I use the Explanation object, here's
> the code:
> int len = hits.length();
> if(len > 50) len = 50;
> for(int i=0; i<len; i++){
> Explanation ex = searcher.explain(Query.parse("resume_text:(query)"),
> hits.id(i));
> if(ex.isMatch()) ...
> ex = searcher.explain(Query.parse("profile_text:(query)"), hits.id(i));
> if(ex.isMatch()) ...
> ex = searcher.explain(Query.parse("summary_text:(query)"), hits.id(i));
> if(ex.isMatch()) ...
> }
> This works fine with regular queries, but if someone does a query with a
> wildcard search times increase to more than 30 seconds.  Is there a better
> way to do this?
> Thanks
> Sincerely,
> Chris Salem
>

------=_Part_76624_9048455.1229983251363--

From java-user-return-37898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 22:13:37 2008
Return-Path: <java-user-return-37898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89917 invoked from network); 22 Dec 2008 22:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 22:13:37 -0000
Received: (qmail 58721 invoked by uid 500); 22 Dec 2008 22:13:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58687 invoked by uid 500); 22 Dec 2008 22:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58676 invoked by uid 99); 22 Dec 2008 22:13:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 14:13:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of andre.rubin@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 22:13:21 +0000
Received: by bwz9 with SMTP id 9so6303401bwz.5
        for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 14:13:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=3NBfZ06PIFmkKyj92ShU2HBqTAul4uLdEGpAjljPvCs=;
        b=UrxXCzwIyTzi2M+17FBc2/oygKqj9nU7GYWGWER5vEcrUvMZVdgtLcpFq4xhW79Jc/
         PRdMX9VVSz/P3LK8Oglt+7wfmbL1CpQtME6EJfh5QGjlmea4iYBcLSsX+CtjluYsqxXE
         c7P38+M29ls3zvdE70KCdTu0eUDN5Eesgfalc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=iQcbUPfFm9eiR5ZmwHRtJUPq5K+mTRZs9e/6BLTpcsR53Mn2A4WjhoJraVl9uSPcZe
         112zv+tNR10LuAebErfofcJ0kdqiQCgvUZYYJRQGKAGO5gH79IChObIXmbqzSngzsSJ4
         77W8gqca9K73gy9O8uphd00F4sv+7p/emdKks=
Received: by 10.181.51.14 with SMTP id d14mr2477473bkk.63.1229983981084;
        Mon, 22 Dec 2008 14:13:01 -0800 (PST)
Received: by 10.181.210.11 with HTTP; Mon, 22 Dec 2008 14:13:01 -0800 (PST)
Message-ID: <efd1bd310812221413g3b4bb0d9p143a8cd0daad3b38@mail.gmail.com>
Date: Mon, 22 Dec 2008 14:13:01 -0800
From: "Andre Rubin" <andre.rubin@gmail.com>
To: java-user@lucene.apache.org
Subject: Field sorting when same doc has multiple values for a field
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Has anyone been through this issue?

I have documents that have one or more values for the same field. For example:

doc1 = new Document();
doc1.add(new Field("Letter"), "A", ...);
doc1.add(new Field("Letter"), "C", ...);
// doc1.add(other fields);
//write to index

Now I add another document:
doc2 = new Document();
doc2.add(new Field("Letter"), "B", ...);
//...
//write to index

Now, when I query, sorting by "Letter" field, doc2 will return before
doc1. I think it is sorting by the last value added to the field
(therefore, B precedes C), but I cannot make any assumptions on the
order that I add the fields to my documents.

Is there a way to handle the sorting within a document as well,
instead of only among different documents? I wanted doc1 to be sorted
as if its "Letter" was "A" (lexicographic order).

Thanks,


Andre

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 22:23:41 2008
Return-Path: <java-user-return-37899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97262 invoked from network); 22 Dec 2008 22:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 22:23:41 -0000
Received: (qmail 69223 invoked by uid 500); 22 Dec 2008 22:23:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68850 invoked by uid 500); 22 Dec 2008 22:23:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68839 invoked by uid 99); 22 Dec 2008 22:23:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 14:23:34 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [98.136.44.40] (HELO n60.bullet.mail.sp1.yahoo.com) (98.136.44.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 22 Dec 2008 22:23:24 +0000
Received: from [216.252.122.218] by n60.bullet.mail.sp1.yahoo.com with NNFMP; 22 Dec 2008 22:23:03 -0000
Received: from [67.195.9.81] by t3.bullet.sp1.yahoo.com with NNFMP; 22 Dec 2008 22:23:03 -0000
Received: from [67.195.9.99] by t1.bullet.mail.gq1.yahoo.com with NNFMP; 22 Dec 2008 22:23:03 -0000
Received: from [127.0.0.1] by omp103.mail.gq1.yahoo.com with NNFMP; 22 Dec 2008 22:23:03 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 452657.24745.bm@omp103.mail.gq1.yahoo.com
Received: (qmail 70138 invoked by uid 60001); 22 Dec 2008 22:23:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=ymail.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=cCRCA0fepNeNX/B84XYEhOBOteraHew5PCNgSXZSqIR8tIVapYgdDmAmHrCqVGleFNLEGIIvQo6qF2AvDcOd0GufH7m03/sF0nAuS2m6y2NwhydvvZpvX2zFV1kCu9PttujdwbZXfDM2jSvpgYF3xFVllYxvFI04Jz9zGvDGBqo=;
X-YMail-OSG: _WYQLRkVM1mDVvHyJCsliVwiZXoqNkAC7a7S2lP9n1QJQOdHC8M4xaX8CP0ZHpmpIYmLM1iDjw11y2yfrKr2C4kSDULwoG4kUmPs5_8R0tlU.D5KCDjYfG.mIQZY3zSlCHJvOhQBwiOtmgUsrvp5RUMz3pZ_
Received: from [80.195.188.27] by web112205.mail.gq1.yahoo.com via HTTP; Mon, 22 Dec 2008 14:23:03 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Mon, 22 Dec 2008 14:23:03 -0800 (PST)
From: Utan Bisaya <lebiram@ymail.com>
Reply-To: lebiram@ymail.com
Subject: Optimize and Out Of Memory Errors
To: Lucene Mailing-List <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1625268699-1229984583=:69393"
Message-ID: <355058.69393.qm@web112205.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1625268699-1229984583=:69393
Content-Type: text/plain; charset=us-ascii

Recently, our lucene index version was upgraded to 2.3.1 and the index had to be rebuilt for several weeks which made the entire index a total of 20 GB or so. 

After the the rebuild, a weekly sunday task was executed for optimization.

During that time, the optimization failed several times complaining about OOM errors but then after a couple of tries, it completes.

So the entire index is now 1 segment that is 20 GB.

The problem is that any subsequent searches on that index fails with OOM errors at Lucene's reading of bytes.

Our environment:
jvm Xmx1600 (This is the max we could set the box since it's windows)
8G Memory available on box
4G CPU (8 core) but only 12.5% is used. (Not sure if this would impact it)
Harddisk available is 120GB

mergeFactor, and other lucene config is set at default.

We
 checked this 20GB using luke and it has 400,000,000 documents in it. It was able to count the docs however when we do the search in Luke it fails giving us OOM errors.

We also did the check index and the tool fails at the 20GB segment but succeeds on the others.

We've managed to rollback to a previously unoptimized index copy (about 20GB or so) and the searches were find now. This unoptimized index is made up of several 8GB segments and a few smaller segments.

However there is a big possibility that the optimization error could happen again... 

Does anybody have insights on why this is happening?




      


      
--0-1625268699-1229984583=:69393--


From java-user-return-37900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 22:35:27 2008
Return-Path: <java-user-return-37900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99536 invoked from network); 22 Dec 2008 22:35:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 22:35:26 -0000
Received: (qmail 75195 invoked by uid 500); 22 Dec 2008 22:35:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75150 invoked by uid 500); 22 Dec 2008 22:35:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75139 invoked by uid 99); 22 Dec 2008 22:35:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 14:35:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kaykay.unique@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 22:35:10 +0000
Received: by ug-out-1314.google.com with SMTP id c2so673910ugf.23
        for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 14:34:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=M/hwkzGKljHDX2kPHao52CEsiUVte8C2Enym3mR0mvU=;
        b=A4b0zK60JYZxYmBArtZI6aoXOqCxXVKASAWQ+Vj6Bof0BYbEqCuGNEM+SqDdFymUPb
         Z6roRYhOXUFwD6Hn9dTc7HEEP5mzP7OgnwzSPEtdw6WFajHATwkYMT8sVFXw9OKeh4rk
         7wRqIOvCXsMi0HM1D25Yz3GI8wG9d2oT3LdGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=I/60nvjWnXA2plc3OvQHEamLihOU+eRaFPCdIQ8YmkeaRWEQUyx6LTQdTRG0rrW+SE
         hX/74oCFBFtqUHTT2bfgOXPPhUSLHskyU5aUd+N9IsbrHU2h/oTk8YhUJ47ZnKiWb2/p
         Orruup3Ra756UnJxhEYAm/ryaQTG/sPDGFa6Q=
Received: by 10.67.10.18 with SMTP id n18mr6476267ugi.45.1229985289744;
        Mon, 22 Dec 2008 14:34:49 -0800 (PST)
Received: from ?192.168.254.172? ([64.20.188.2])
        by mx.google.com with ESMTPS id k27sm7827193ugd.45.2008.12.22.14.34.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 22 Dec 2008 14:34:49 -0800 (PST)
Message-ID: <4950160A.9050809@gmail.com>
Date: Mon, 22 Dec 2008 17:34:50 -0500
From: Kay Kay <kaykay.unique@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Multiple IndexReaders from the same Index Directory - issues with
 Locks / performance 
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

For one of our projects - we were planning to have the system of 
multiple individual Lucene readers (just read-only instances and no 
writes whatsoever ) in different physical machines having their 
IndexReader-s warmed up from the same directory for the indices and 
working on the same. 

I was reading about locks (implemented as files) that Lucene uses 
internally. I am just curious if using multiple readers would be a 
feasible option here, all sharing the same index directory (across NFS / 
similar network mounted storage ) in terms of locking etc.

Would there be a performance hit ( ignoring the NFS related performance 
of course)  that would hinder multiple readers to serve query search 
simultaneously from the same set of index files.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 22 23:20:17 2008
Return-Path: <java-user-return-37901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8670 invoked from network); 22 Dec 2008 23:20:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2008 23:20:17 -0000
Received: (qmail 239 invoked by uid 500); 22 Dec 2008 23:20:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 200 invoked by uid 500); 22 Dec 2008 23:20:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 189 invoked by uid 99); 22 Dec 2008 23:20:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 15:20:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 23:20:02 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1668271rne.4
        for <java-user@lucene.apache.org>; Mon, 22 Dec 2008 15:19:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=a72i1lhMk58iKzZ+AHoeV8A18nTUpF2F0n7QbzInq/Y=;
        b=uIKvvZ7GemfZ0QRvz45d7OzWSjr/gKxYaGoBEPVf3DsOv7099d6KKx060BIMiEcx4S
         s8Cat78+xQLqe9PBx7izVB2lJRPY7HzMAZTho4cc8SXigD59mCXsmxcbDLAFR3+mBkx7
         YT8cf04kOWcozwH4LyjoiHQPjrpNZ/CWwNtJs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uaFkcUBy6NTDL8H/+cSI5WwkOelnYmjQbXDqMA9LSb0/QwDwHmlMDtwOIrgEfjf1z7
         kEWiYrRXdMKr0WljaGSmzsEFOkL3XxPn4raEQgEl6aIeQoTq6+KHgGx+P2a5xDPxq22m
         w0Rkcja09B0FKfKw795XMhc8sFmf10ggX6rB8=
Received: by 10.90.106.1 with SMTP id e1mr3541580agc.8.1229987981701;
        Mon, 22 Dec 2008 15:19:41 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Mon, 22 Dec 2008 15:19:41 -0800 (PST)
Message-ID: <359a92830812221519ib76c6ceref04b0b4e336f181@mail.gmail.com>
Date: Mon, 22 Dec 2008 18:19:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Field sorting when same doc has multiple values for a field
In-Reply-To: <efd1bd310812221413g3b4bb0d9p143a8cd0daad3b38@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_77217_6867367.1229987981213"
References: <efd1bd310812221413g3b4bb0d9p143a8cd0daad3b38@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_77217_6867367.1229987981213
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You're off in undefined territory. From the docs for the Sort
class:

<<<...Documents must contain a single term in such a field,
and the value of the term should indicate the document's
relative position in a given sort order. The field must be indexed,
but should not be tokenized, ...>

Whatever is actually going on under the covers, you can't
count on it anyway....

I'd create a "sort_letter" field that *only* got the single
value you want to sort on (as above) and sort on that....

Best
Erick



On Mon, Dec 22, 2008 at 5:13 PM, Andre Rubin <andre.rubin@gmail.com> wrote:

> Hi all,
>
> Has anyone been through this issue?
>
> I have documents that have one or more values for the same field. For
> example:
>
> doc1 = new Document();
> doc1.add(new Field("Letter"), "A", ...);
> doc1.add(new Field("Letter"), "C", ...);
> // doc1.add(other fields);
> //write to index
>
> Now I add another document:
> doc2 = new Document();
> doc2.add(new Field("Letter"), "B", ...);
> //...
> //write to index
>
> Now, when I query, sorting by "Letter" field, doc2 will return before
> doc1. I think it is sorting by the last value added to the field
> (therefore, B precedes C), but I cannot make any assumptions on the
> order that I add the fields to my documents.
>
> Is there a way to handle the sorting within a document as well,
> instead of only among different documents? I wanted doc1 to be sorted
> as if its "Letter" was "A" (lexicographic order).
>
> Thanks,
>
>
> Andre
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_77217_6867367.1229987981213--

From java-user-return-37902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 07:46:07 2008
Return-Path: <java-user-return-37902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6785 invoked from network); 23 Dec 2008 07:46:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 07:46:07 -0000
Received: (qmail 87544 invoked by uid 500); 23 Dec 2008 07:45:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87508 invoked by uid 500); 23 Dec 2008 07:45:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87496 invoked by uid 99); 23 Dec 2008 07:45:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 23:45:58 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [64.104.129.195] (HELO ind-iport-1.cisco.com) (64.104.129.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 07:45:47 +0000
X-IronPort-AV: E=Sophos;i="4.36,269,1228089600"; 
   d="scan'208";a="37181595"
Received: from ind-dkim-1.cisco.com ([64.104.140.57])
  by ind-iport-1.cisco.com with ESMTP; 23 Dec 2008 07:45:22 +0000
Received: from india-core-1.cisco.com (india-core-1.cisco.com [64.104.129.221])
	by ind-dkim-1.cisco.com (8.12.11/8.12.11) with ESMTP id mBN7jMCZ015296
	for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 13:15:22 +0530
Received: from xbh-blr-411.apac.cisco.com (xbh-blr-411.cisco.com [64.104.140.150])
	by india-core-1.cisco.com (8.13.8/8.13.8) with ESMTP id mBN7itxM026377
	for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 07:45:17 GMT
Received: from xmb-blr-413.apac.cisco.com ([64.104.140.142]) by xbh-blr-411.apac.cisco.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 23 Dec 2008 13:15:12 +0530
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Combining results of multiple indexes
Date: Tue, 23 Dec 2008 13:14:42 +0530
Message-ID: <AAC329F11B438F43BBA91F50013A69B6067B3794@xmb-blr-413.apac.cisco.com>
In-Reply-To: <359a92830812181041n3c8f44e4vad9c029b5bd261@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Combining results of multiple indexes
Thread-Index: AclhQHLRz29fx97MTdKpCkeq0CMaBQDkK5LQ
References: <494894D2.9010901@cisco.com> <49490F4B.1030607@cisco.com> <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com> <49491EED.4070403@cisco.com> <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com> <4949D6D6.7000402@cisco.com> <494A1FE2.8010101@cisco.com> <359a92830812180519i5ed550bct8e1bbd4b37cb598@mail.gmail.com> <494A7384.2030003@cisco.com> <494A7E57.1030206@cisco.com> <359a92830812181041n3c8f44e4vad9c029b5bd261@mail.gmail.com>
From: "Preetham Kajekar (preetham)" <preetham@cisco.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 23 Dec 2008 07:45:12.0546 (UTC) FILETIME=[631C0420:01C964D2]
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; l=16929; t=1230018322; x=1230882322;
	c=relaxed/simple; s=inddkim1002;
	h=Content-Type:From:Subject:Content-Transfer-Encoding:MIME-Version;
	d=cisco.com; i=preetham@cisco.com;
	z=From:=20=22Preetham=20Kajekar=20(preetham)=22=20<preetham@
	cisco.com>
	|Subject:=20RE=3A=20Combining=20results=20of=20multiple=20i
	ndexes
	|Sender:=20;
	bh=oiGwUrAFDB5YIOL5b7beoj77uWXGTzHXydXvbzplU6g=;
	b=CmQMcKUX2UK0FY7OTvUWUOmqFibTM24LYdYKJ85THp4iVBSUOI1i0ObqqZ
	LPpuHOc7wO2jJBLku+EWVndPASylnRIEvQ71Se4KKc5tZ5Vk1OCBZgQEaPbP
	t6pbz08Ptr;
Authentication-Results: ind-dkim-1; header.From=preetham@cisco.com; dkim=pass (
	sig from cisco.com/inddkim1002 verified; ); 
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,
 Thanks for the heads up. I understand that I am using an implementation
detail rather than a feature.=20

 Looks like having a single index is the best option. Hence, any
optimizations (to improve indexing speed) you would suggest given that

a) once a doc is added to an index, it will not get modified/deleted
b) all the fields added are keywords (mostly numbers) - no analysis is
required.=20
c) indexing speed is more important than querying speed.=20
d) every document is the same - there is no boost or relevancy required.

e) Query results should be sorted in the order they were indexed.=20


Thanks,
 ~preetham

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Friday, December 19, 2008 12:12 AM
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes

I would recommend, very strongly, that you don't rely on the doc IDs
being
the same in two different indexes. Doc IDs are just incremented by one
for each doc added, but.....

optimization can change the doc ID. and is guaranteed to change at
least some of them if there are deletions from your index. If you, for
whatever reason indexed document N in one index and then skipped
it in the other, all subsequent document IDs would not match. If.....

The fact that your IDs are the same is more than undocumented, it
is coincidental.

Best
Erick

On Thu, Dec 18, 2008 at 11:46 AM, Preetham Kajekar
<preetham@cisco.com>wrote:

> Hi,
> I noticed that the doc id is the same. So, if I have HitCollector,
just
> collect the doc-ids of both Searchers (for the two indexes) and find
the
> intersection between them, it would work. Also, get the doc is even
where
> there are large number of hits is fast.
>
> Of course, I am using something undocumented of Lucene.
>
>
> Thanks,
> ~preetham
>
> Preetham Kajekar wrote:
>
>> Thanks. Yep the code is very easy. However, it take about 3 mins to
>> complete merging.
>>
>> Looks like I will need to have an out of band merging of indexes once
they
>> are closed (planning to store about 50mil entries in each index
partition)
>>
>>
>> However, as the data is being indexed, is there any other way to
combine
>> results ?
>>
>> I could get the results of one index, get all the hits and then apply
this
>> as a filter for the next index. But if there are large number of hits
(which
>> is likely to be the case), this would not perform too well.
>>
>> Do you think the document id can be used in anyway. How is the
document id
>> generated ? After all, i have the two indexes operating on a common
List of
>> objects. Would the doc is in index1 and index2 for object N in the
list be
>> the same ?
>>
>>
>> Thanks,
>> ~preetham
>>
>> Erick Erickson wrote:
>>
>>> You will be stunned at how easy it is. The merging code should be
>>> a dozen lines (and that only if you are merging 6 or so indexes)....
>>>
>>> See IndexWriter.addIndexes or
>>> IndexWriter.addIndexesNoOptimize
>>>
>>> Best
>>> Erick
>>>
>>> On Thu, Dec 18, 2008 at 5:03 AM, Preetham Kajekar
<preetham@cisco.com
>>> >wrote:
>>>
>>>
>>>
>>>> Hi,
>>>> I tried out a single IndexWriter used by two threads to index
different
>>>> fields. It is slower than using two separate IndexWriters. These
are my
>>>> findings
>>>>
>>>> All Fields (9) using 1 IndexWriter 1 Thread - 38,000 object per sec
>>>> 5 Fields       using 1 IndexWriter 1 Thread - 62,000 object per sec
>>>> All Fields (9) using 1 IndexWriter 2 Thread - 29,000 object per sec
>>>> All Fields (9) using 2 IndexWriter 2 Thread - 55,000 object per sec
>>>>
>>>> So, it looks like I will have figure how to combine results of
multiple
>>>> indexes.
>>>>
>>>> Thanks,
>>>> ~preetham
>>>>
>>>>
>>>> Preetham Kajekar wrote:
>>>>
>>>>
>>>>
>>>>> Thanks Erick and Michael.
>>>>> I will try out these suggestions and post my findings.
>>>>>
>>>>> ~preetham
>>>>>
>>>>> Erick Erickson wrote:
>>>>>
>>>>>
>>>>>
>>>>>> Well, maybe if I'd read the original post more carefully I'd have
>>>>>> figured
>>>>>> that out,
>>>>>> sorry 'bout that.
>>>>>>
>>>>>> I *think* I remember reading somewhere on the email lists that
your
>>>>>> indexing
>>>>>> speed goes up pretty linearly as the number of indexing tasks
>>>>>> approaches
>>>>>> the number of CPUs. Are you, perhaps, on a dual-core machine? But
do
>>>>>> search
>>>>>> the mail archives because my memory may not be accurate.
>>>>>>
>>>>>> You can easily combine indexes by IndexWriter.addIndexes BTW.
>>>>>> Personally
>>>>>> I prefer fewer indexes if you can get away with it. But I'd only
try
>>>>>> this
>>>>>> after
>>>>>> Michael's suggestion of using multiple threads on a single
underlying
>>>>>> writer.
>>>>>>
>>>>>> You could even think about using N machines to create M fragments
then
>>>>>> combining them all afterwards if your logs are static enough to
make
>>>>>> that
>>>>>> reasonable. Combining indexes may take a while though.....
>>>>>>
>>>>>> Best
>>>>>> Erick
>>>>>>
>>>>>> On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar <
>>>>>> preetham@cisco.com
>>>>>>
>>>>>>
>>>>>>> wrote:
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Hi Erick,
>>>>>>> Thanks for the response. Replies inline.
>>>>>>>
>>>>>>> Erick Erickson wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> The very first question is always "are you opening a new
searcher
>>>>>>>> each time you query"? But you've looked at the Wiki so I assume
not.
>>>>>>>> This question is closely tied to what kind of latency you can
>>>>>>>> tolerate.
>>>>>>>>
>>>>>>>> A few more details, please. What's slow? Queries? Indexing?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> Indexing. Again, it is not slow. It is just faster with two
separate
>>>>>>> indexers in two threads.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> How slow? 100ms? 100s? What are your target times and
>>>>>>>> what are you seeing?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> With a single indexer in a single thread, I can index about
20,000
>>>>>>> event
>>>>>>> objects per second. With 2 thread and 2 indexers, it is close to
>>>>>>> 50,000.
>>>>>>> :-)
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> How big is your index? 100M? 100G? What kind of VM
>>>>>>>> parameters are you specifying?
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> The index will have about 20mil entries. The size of the index
lands
>>>>>>> up
>>>>>>> being about 500M.
>>>>>>> I start the VM with 1G of heap. No other options for GC etc is
used.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> As an aside, do note that there's no requirement in Lucene that
>>>>>>>> each document have the same fields, so it's unclear why you
>>>>>>>> need two indexes, but perhaps some of the answers to the above
>>>>>>>> will help us understand.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> Like I mentioned, Lucene does the job much faster with two
indexes.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Also, be very very careful what you measure when you measure
>>>>>>>> queries. You absolutely *have* to put some instrumentation in
>>>>>>>> the code since "slow queries" can result from things other than
>>>>>>>> searching. For instance, iterating over a Hits object for 100s
of
>>>>>>>> documents....
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> The Query speeds are much faster than what I need :-) So no
complains
>>>>>>> here.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Show the code, man <G>!
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>> Code below. EvIndexer is the base class. There are two
subclasses
>>>>>>> which
>>>>>>> implement addEvFieldsToIndexDoc() (template pattern) to add
different
>>>>>>> fields
>>>>>>> to the index. that code is also pasted below
>>>>>>>
>>>>>>> --Code ---
>>>>>>>
>>>>>>> BaseClass
>>>>>>>
>>>>>>>  public EvIndexer(String indexName) throws Exception {
>>>>>>>     this.name =3D indexName;
>>>>>>>     a =3D new KeywordAnalyzer();
>>>>>>>     INDEX_PATH =3D =
System.getProperty(StoreManager.PROP_DB_DB_LOC,
>>>>>>> "./index/");
>>>>>>>     FSDirectory directory =3D =
FSDirectory.getDirectory(INDEX_PATH
+
>>>>>>> File.separatorChar + indexName,
NoLockFactory.getNoLockFactory());
>>>>>>>     indexWriter =3D new IndexWriter(directory, a,
>>>>>>> IndexWriter.MaxFieldLength.LIMITED);
>>>>>>> //indexWriter.setUseCompoundFile(false);
>>>>>>>     //indexWriter.setRAMBufferSizeMB(256);
>>>>>>>       }
>>>>>>>     /** Method implemented by extending classes to add data into
the
>>>>>>> index document for the
>>>>>>>  *  given event
>>>>>>>  *
>>>>>>>  * @param d
>>>>>>>  */
>>>>>>>  protected abstract void addEvFieldsToIndexDoc(Document d, Ev
event);
>>>>>>>   public void addToIndex(Ev ev) throws Exception {
>>>>>>>     noOfEventsIndexed++;
>>>>>>>     Document d =3D new Document();
addEvFieldsToIndexDoc(d,
>>>>>>> ev);
>>>>>>>     indexWriter.addDocument(d);
>>>>>>>           if ((noOfEventsIndexed % COMMIT_INTERVAL) =3D=3D 0) {
>>>>>>>         System.out.println(name + " indexed " +
>>>>>>> NumberFormat.getInstance().format(noOfEventsIndexed) + "
Commiting
>>>>>>> them");
>>>>>>>         commit();
>>>>>>>     }                   }
>>>>>>>
>>>>>>> DerievdClass1
>>>>>>>  protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
>>>>>>>     //noOfEventsIndexed++;
>>>>>>>           Field id =3D new Field(EV_ID, =
Long.toString(ev.getId()),
>>>>>>> Field.Store.YES, Field.Index.NO);
>>>>>>>     Field src =3D new Field(EV_SRC, =
Long.toString(ev.getSrcId()),
>>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>>     Field type =3D new Field(EV_TYPE,
>>>>>>> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
>>>>>>> Field.Index.NOT_ANALYZED);
>>>>>>>     Field pri =3D new Field(EV_PRI,
Short.toString(ev.getPriority()) ,
>>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>>     Field time =3D new Field(EV_TIME,
getHexString(ev.getRecvTime()) ,
>>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
>>>>>>>     d.add(id);
>>>>>>>     d.add(src);
>>>>>>>     d.add(type);
>>>>>>>     d.add(pri);
>>>>>>>     d.add(time);
>>>>>>>     //noOfFieldsIndexed +=3D  4;
>>>>>>>                 }
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Thanks for the support.
>>>>>>> ~preetham
>>>>>>>
>>>>>>>
>>>>>>>  Best
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> Erick
>>>>>>>>
>>>>>>>>
>>>>>>>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <
>>>>>>>> preetham@cisco.com
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>> Hi Grant,
>>>>>>>>> Thanks four response. Replies inline.
>>>>>>>>>
>>>>>>>>> Grant Ingersoll wrote:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
>>>>>>>>>>
>>>>>>>>>>  Hi,
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>> I am new to Lucene. I am not using it as a pure text
indexer.
>>>>>>>>>>>
>>>>>>>>>>> I am trying to index a Java object which has about 10 fields
>>>>>>>>>>> (like
>>>>>>>>>>> id,
>>>>>>>>>>> time, srcIp, dstIp) - most of them being numerical values.
>>>>>>>>>>> In order to speed up indexing, I figured that having two
separate
>>>>>>>>>>> indexers, each of them indexing different set of fields
works
>>>>>>>>>>> great.
>>>>>>>>>>> So
>>>>>>>>>>> I
>>>>>>>>>>> have the first 5 fields in index1 and the remaining in
index2.
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>> Can you explain this a bit more?  Are those two fields really
>>>>>>>>>> large
>>>>>>>>>> org
>>>>>>>>>> something?  How are you obtaining them?  How are you
correlating
>>>>>>>>>> the
>>>>>>>>>> documents between the two indexes?  Did you actually try a
single
>>>>>>>>>> index
>>>>>>>>>> and
>>>>>>>>>> it was too slow?
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>> I have a java object which has about 10 fields. However, the
fields
>>>>>>>>> are
>>>>>>>>> not
>>>>>>>>> fixed. The java object is essentially a representation of
Syslogs
>>>>>>>>> from
>>>>>>>>> network devices. So different syslogs have different fields.
Each
>>>>>>>>> field
>>>>>>>>> has
>>>>>>>>> a unique id and a value (mostly numeric types, so i convert it
to
>>>>>>>>> string).
>>>>>>>>> There are some fixed fields. So the object is a list of fields
>>>>>>>>> which
>>>>>>>>> is
>>>>>>>>> produced by a parser.
>>>>>>>>> I am trying to index using two indexers in two separate
threads-
>>>>>>>>> one
>>>>>>>>> for
>>>>>>>>> fixed and another for the non-fixed fields. Except for a
unique id,
>>>>>>>>> I
>>>>>>>>> do
>>>>>>>>> not
>>>>>>>>> store the fields in Lucene - i just index them. From the
index, i
>>>>>>>>> get
>>>>>>>>> the
>>>>>>>>> unique id which is all I care about. (the objects are stored
>>>>>>>>> elsewhere
>>>>>>>>> and
>>>>>>>>> can be looked up based on this unique id).
>>>>>>>>> I did try using a single indexer, but things were quite slow.
>>>>>>>>> Getting
>>>>>>>>> high
>>>>>>>>> throughput is crucial and having two indexers seemed to do
very
>>>>>>>>> well.
>>>>>>>>> (more
>>>>>>>>> than twice as fast)
>>>>>>>>>
>>>>>>>>> Further, the index will never be modified and I can have just
one
>>>>>>>>> thread
>>>>>>>>> writing to the index. If there are any other performance tips
would
>>>>>>>>> be
>>>>>>>>> very
>>>>>>>>> helpful. I have already looked at the wiki link regarding
>>>>>>>>> performance
>>>>>>>>> and
>>>>>>>>> using some of them.
>>>>>>>>>
>>>>>>>>> Thanks,
>>>>>>>>> ~preetham
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>> Now, I want to have boolean AND query's looking for values in
both
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>> indexes. Like f1=3D1234 AND f7=3DABCD.f1 and f7 and present =
in
two
>>>>>>>>>>> separate
>>>>>>>>>>> indexes. Would using the MultiIndexReader help ? Since I am
doing
>>>>>>>>>>> an
>>>>>>>>>>> AND, I
>>>>>>>>>>> dont expect that it would work.
>>>>>>>>>>>
>>>>>>>>>>> Thanks,
>>>>>>>>>>> ~preetham
>>>>>>>>>>>
>>>>>>>>>>>
---------------------------------------------------------------------
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>> To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
>>>>>>>>>>> For additional commands, e-mail:
>>>>>>>>>>> java-user-help@lucene.apache.org
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>>>
>>>>>>>>>> --------------------------
>>>>>>>>>> Grant Ingersoll
>>>>>>>>>>
>>>>>>>>>> Lucene Helpful Hints:
>>>>>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>>>>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
---------------------------------------------------------------------
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
>>>>>>>>>> For additional commands, e-mail:
java-user-help@lucene.apache.org
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>
---------------------------------------------------------------------
>>>>>>>>>
>>>>>>>>> To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
>>>>>>>>> For additional commands, e-mail:
java-user-help@lucene.apache.org
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
---------------------------------------------------------------------
>>>>>>>
>>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>>> For additional commands, e-mail:
java-user-help@lucene.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>
---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 07:46:42 2008
Return-Path: <java-user-return-37903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7098 invoked from network); 23 Dec 2008 07:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 07:46:41 -0000
Received: (qmail 89699 invoked by uid 500); 23 Dec 2008 07:46:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89429 invoked by uid 500); 23 Dec 2008 07:46:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89418 invoked by uid 99); 23 Dec 2008 07:46:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 23:46:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 07:46:26 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBN7k3YU013746
	for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 01:46:03 -0600
Received: (qmail 9498 invoked by uid 0); 23 Dec 2008 01:46:03 -0600
Date: 23 Dec 2008 01:46:03 -0600
Message-ID: <20081223074603.9497.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: RE: Combining results of multiple indexes
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.37
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 330461085 - 475ce88d24b2
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=330461085&m=475ce88d24b2&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=330461085&m=475ce88d24b2&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=330461085&m=475ce88d24b2&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 07:47:15 2008
Return-Path: <java-user-return-37904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7423 invoked from network); 23 Dec 2008 07:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 07:47:14 -0000
Received: (qmail 91342 invoked by uid 500); 23 Dec 2008 07:47:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91316 invoked by uid 500); 23 Dec 2008 07:47:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91301 invoked by uid 99); 23 Dec 2008 07:47:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 22 Dec 2008 23:47:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 07:46:59 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBN7ka0B014015
	for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 01:46:36 -0600
Received: (qmail 9853 invoked by uid 0); 23 Dec 2008 01:46:36 -0600
Date: 23 Dec 2008 01:46:36 -0600
Message-ID: <20081223074636.9852.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: RE: Combining results of multiple indexes
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.37
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 330461196 - 72c136453b73
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=330461196&m=72c136453b73&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=330461196&m=72c136453b73&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=330461196&m=72c136453b73&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 08:37:21 2008
Return-Path: <java-user-return-37905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23364 invoked from network); 23 Dec 2008 08:37:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 08:37:21 -0000
Received: (qmail 18378 invoked by uid 500); 23 Dec 2008 08:37:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18348 invoked by uid 500); 23 Dec 2008 08:37:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18337 invoked by uid 99); 23 Dec 2008 08:37:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 00:37:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of amar.sannaik@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 08:37:06 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1290746wag.5
        for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 00:36:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=oISYqGVRGwWWrKemIrXPbZXiuaqpttZ58GAvI7nDvlM=;
        b=xUmeGr4q0HPq4UAIVlA4yKRfOCUGWMXJAXx0Xz1M2NixCfP+z2SQPRSUmFL9JyP79X
         /kcCIujf8YSNr8UJHYQxuFXF4gkm+964A5xT1ShwcU2ecy9I81EhIrHlHFQmme1Jcm6d
         ahbNxPAahudGoPy/kfVcxKb7rU80Bu2tbef3M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=JYpaIF7DTi1sPGh8cjvlIHaybGmPepCDyUqJedhio/Qjo/vqkqOuxdIQfVm75WHYok
         yDBhV/K8FW8yvumKM30j1wfaYn7BZjY3l9r3DWMhLBJY9GwdWYz14hCMu29uD55eabx5
         /SgtBi2iISAk5Wq5TzbxF534vntZ4xcKPZ12w=
Received: by 10.114.36.4 with SMTP id j4mr4625014waj.119.1230021404962;
        Tue, 23 Dec 2008 00:36:44 -0800 (PST)
Received: by 10.114.155.4 with HTTP; Tue, 23 Dec 2008 00:36:44 -0800 (PST)
Message-ID: <dcac67550812230036k2e4df811w4055f4b9931463fc@mail.gmail.com>
Date: Tue, 23 Dec 2008 14:06:44 +0530
From: amar.sannaik@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene search problem
In-Reply-To: <50984.86344.qm@web50711.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62738_1261871.1230021404956"
References: <dcac67550812220511j1e353eabs5a536fcb3e06a7d1@mail.gmail.com>
	 <359a92830812220558u48cb90eci9b731ee7b79e691@mail.gmail.com>
	 <50984.86344.qm@web50711.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62738_1261871.1230021404956
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Aaron Schon/EricK,

That really make sense to me but it really seems easy if is the string
object. See the object structure I have it below hopefully that gives you
some idea

class Recipe {
@DocumentId
Integer id;
@IndexedEmbedded
Chain chain;
//gettter and setter
}

class Chain {
@DocumentId
Integer id;
@Field(index = Index.TOKENIZED, name="chainName")
String name;
//getter and setter
}

I am creating index on the recipe object. and for some recipe.m_chain would
be null. So can you tell me how do I assign the value "NULLNULNULLNULL" for
object chain in recipe.

I also was thinking if #FieldBridge help me this way. My plan was to have
default value where chain is null as you mentioned. but it does not seems to
work for null values.

Please suggest

Thanks in advance.
-Amar

On Tue, Dec 23, 2008 at 12:04 AM, Aaron Schon <aaron_schon@yahoo.com> wrote:

> I would second Erick's recommendation - create an arbitrary representation
> for NULL such as "NULL" (if you are certain the term "NULL" does not occur
> in actual docs. Alternatively, use "NULLNULNULLNULL" or something to that
> effect.
>
>
>
> ----- Original Message ----
> From: Erick Erickson <erickerickson@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, December 22, 2008 8:58:21 AM
> Subject: Re: Lucene search problem
>
> Try searching the mailing list archives for a fuller discussion, but
> the short answer is usually to index an unique value for your
> "null" entries, then search on that, something totally
> outrageous like, say AAABBBCCCDDDEEEFFF.
>
> Alternatively, you could create, at startup time, a
> Filter of all the docs that *do* contain terms for the
> field in question, flip the bits and use the Filter in your
> searches. (Hint: see TermDocs/TermEnum)
>
> Best
> Erick
>
> On Mon, Dec 22, 2008 at 8:11 AM, <amar.sannaik@gmail.com> wrote:
>
> > Hi,
> >
> > I have problem with lucene search, I am quite new to this. Can some body
> > help or just push me to who can please.
> >
> > Problem what I am facing we need search for object whose attribute
> "chain"
> > contaning null, but lucene does not help indexing the null values..
> >
> > how can I achieve this, or please guide me the alternative way of doing
> > this.
> >
> > Thanks in advance.
> > -Amar
> >
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Amar Sannaik | Programmer | ATHARVA LIBSON Software Pvt Ltd.,
# 9886476270, amarsannaik@atharvalibson.com

------=_Part_62738_1261871.1230021404956--

From java-user-return-37906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 10:24:54 2008
Return-Path: <java-user-return-37906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78184 invoked from network); 23 Dec 2008 10:24:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 10:24:54 -0000
Received: (qmail 14812 invoked by uid 500); 23 Dec 2008 10:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14785 invoked by uid 500); 23 Dec 2008 10:24:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14761 invoked by uid 99); 23 Dec 2008 10:24:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 02:24:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 10:24:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LF4R0-0008MA-Eg
	for java-user@lucene.apache.org; Tue, 23 Dec 2008 02:24:18 -0800
Message-ID: <21142252.post@talk.nabble.com>
Date: Tue, 23 Dec 2008 02:24:18 -0800 (PST)
From: csantos <claudia.cm.santos@gmail.com>
To: java-user@lucene.apache.org
Subject: QueryWrapperFilter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: claudia.cm.santos@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I need to filter a FullTextSearch against a query, that means, i search a
term in a indexed entity "A", A contains a embedded Index "B", entity B has
a m:1 bidirectional relationship with entity "C", the foreign Key in "B" is
"c_id".  My filter condition would be like "filter the fulltext search for
entries where the c_id equals some value", where value is given.

I thought of using the QueryWrapperFilter. But the JavaDoc says for the
TermQuery: "A Query that matches documents containing a term.". My problem
is that the field I want to use do not appear on the Lucene Index. Which is
the best approach?

thanks in advanced
-- 
View this message in context: http://www.nabble.com/QueryWrapperFilter-tp21142252p21142252.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 11:07:04 2008
Return-Path: <java-user-return-37907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93803 invoked from network); 23 Dec 2008 11:07:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 11:07:03 -0000
Received: (qmail 40764 invoked by uid 500); 23 Dec 2008 11:06:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40723 invoked by uid 500); 23 Dec 2008 11:06:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40712 invoked by uid 99); 23 Dec 2008 11:06:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 03:06:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 11:06:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1LF55m-0001FA-3K
	for java-user@lucene.apache.org; Tue, 23 Dec 2008 03:06:26 -0800
Message-ID: <21142273.post@talk.nabble.com>
Date: Tue, 23 Dec 2008 03:06:26 -0800 (PST)
From: Tomer Gabel <tomer@tomergabel.com>
To: java-user@lucene.apache.org
Subject: Re: Multiple IndexReaders from the same Index Directory - issues
 with Locks / performance
In-Reply-To: <4950160A.9050809@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tomer@tomergabel.com
References: <4950160A.9050809@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ultimately it depends on your specific usage patterns. Generally speaking, if
you have IndexReaders (and do not use their delete functionality) you don't
need locking at all; you can use a no-op lock factory, in which case you'll
pretty much only be constrained by your storage subsystem.


Kay Kay-3 wrote:
> 
> For one of our projects - we were planning to have the system of 
> multiple individual Lucene readers (just read-only instances and no 
> writes whatsoever ) in different physical machines having their 
> IndexReader-s warmed up from the same directory for the indices and 
> working on the same. 
> 
> I was reading about locks (implemented as files) that Lucene uses 
> internally. I am just curious if using multiple readers would be a 
> feasible option here, all sharing the same index directory (across NFS / 
> similar network mounted storage ) in terms of locking etc.
> 
> Would there be a performance hit ( ignoring the NFS related performance 
> of course)  that would hinder multiple readers to serve query search 
> simultaneously from the same set of index files.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


-----
--

http://www.tomergabel.com Tomer Gabel 


-- 
View this message in context: http://www.nabble.com/Multiple-IndexReaders-from-the-same-Index-Directory---issues-with-Locks---performance-tp21136262p21142273.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 14:04:19 2008
Return-Path: <java-user-return-37908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56091 invoked from network); 23 Dec 2008 14:04:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 14:04:19 -0000
Received: (qmail 5846 invoked by uid 500); 23 Dec 2008 14:04:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5815 invoked by uid 500); 23 Dec 2008 14:04:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5804 invoked by uid 99); 23 Dec 2008 14:04:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 06:04:11 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 14:04:01 +0000
Received: by yx-out-2324.google.com with SMTP id 3so794713yxj.5
        for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 06:03:39 -0800 (PST)
Received: by 10.90.120.19 with SMTP id s19mr3869723agc.29.1230041019799;
        Tue, 23 Dec 2008 06:03:39 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id 38sm25980217agd.18.2008.12.23.06.03.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 23 Dec 2008 06:03:38 -0800 (PST)
Message-Id: <F5F7ED82-CEB0-4374-8F40-D8769F7812C5@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <21142273.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Multiple IndexReaders from the same Index Directory - issues with Locks / performance
Date: Tue, 23 Dec 2008 09:03:35 -0500
References: <4950160A.9050809@gmail.com> <21142273.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Locking is completely unused from IndexReader unless you do deletes or  
change norms, so sharing a remote mounted index is just fine (except  
for performance concerns).

If you're using 2.4, you should open your readers with readOnly=true.

Mike

Tomer Gabel wrote:

>
> Ultimately it depends on your specific usage patterns. Generally  
> speaking, if
> you have IndexReaders (and do not use their delete functionality)  
> you don't
> need locking at all; you can use a no-op lock factory, in which case  
> you'll
> pretty much only be constrained by your storage subsystem.
>
>
> Kay Kay-3 wrote:
>>
>> For one of our projects - we were planning to have the system of
>> multiple individual Lucene readers (just read-only instances and no
>> writes whatsoever ) in different physical machines having their
>> IndexReader-s warmed up from the same directory for the indices and
>> working on the same.
>>
>> I was reading about locks (implemented as files) that Lucene uses
>> internally. I am just curious if using multiple readers would be a
>> feasible option here, all sharing the same index directory (across  
>> NFS /
>> similar network mounted storage ) in terms of locking etc.
>>
>> Would there be a performance hit ( ignoring the NFS related  
>> performance
>> of course)  that would hinder multiple readers to serve query search
>> simultaneously from the same set of index files.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> -----
> --
>
> http://www.tomergabel.com Tomer Gabel
>
>
> -- 
> View this message in context: http://www.nabble.com/Multiple-IndexReaders-from-the-same-Index-Directory---issues-with-Locks---performance-tp21136262p21142273.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 14:09:07 2008
Return-Path: <java-user-return-37909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58269 invoked from network); 23 Dec 2008 14:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 14:09:07 -0000
Received: (qmail 13701 invoked by uid 500); 23 Dec 2008 14:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13673 invoked by uid 500); 23 Dec 2008 14:08:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13662 invoked by uid 99); 23 Dec 2008 14:08:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 06:08:59 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 14:08:51 +0000
Received: by an-out-0708.google.com with SMTP id b2so770589ana.5
        for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 06:08:29 -0800 (PST)
Received: by 10.100.178.2 with SMTP id a2mr4551838anf.114.1230041309352;
        Tue, 23 Dec 2008 06:08:29 -0800 (PST)
Received: from ?10.17.4.4? (pool-173-48-164-75.bstnma.fios.verizon.net [173.48.164.75])
        by mx.google.com with ESMTPS id b14sm13427590ana.12.2008.12.23.06.08.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 23 Dec 2008 06:08:28 -0800 (PST)
Cc: Utan Bisaya <lebiram@ymail.com>
Message-Id: <13D027DC-BBF9-40E9-A10C-D946821AE59A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <355058.69393.qm@web112205.mail.gq1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Optimize and Out Of Memory Errors
Date: Tue, 23 Dec 2008 09:08:26 -0500
References: <355058.69393.qm@web112205.mail.gq1.yahoo.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


How many indexed fields do you have, overall, in the index?

If you have a very large number of fields that are "sparse" (meaning  
any given document would only have a small subset of the fields), then  
norms could explain what you are seeing.

Norms are not stored sparsely, so when segments get merged the "holes"  
get filled (occupy bytes on disk and in RAM) and consume more  
resources.  Turning off norms on sparse fields would resolve it, but  
you must rebuild the entire index since if even a single doc in the  
index has norms enabled for a given field, it "spreads".

Mike

Utan Bisaya wrote:

> Recently, our lucene index version was upgraded to 2.3.1 and the  
> index had to be rebuilt for several weeks which made the entire  
> index a total of 20 GB or so.
>
> After the the rebuild, a weekly sunday task was executed for  
> optimization.
>
> During that time, the optimization failed several times complaining  
> about OOM errors but then after a couple of tries, it completes.
>
> So the entire index is now 1 segment that is 20 GB.
>
> The problem is that any subsequent searches on that index fails with  
> OOM errors at Lucene's reading of bytes.
>
> Our environment:
> jvm Xmx1600 (This is the max we could set the box since it's windows)
> 8G Memory available on box
> 4G CPU (8 core) but only 12.5% is used. (Not sure if this would  
> impact it)
> Harddisk available is 120GB
>
> mergeFactor, and other lucene config is set at default.
>
> We
> checked this 20GB using luke and it has 400,000,000 documents in it.  
> It was able to count the docs however when we do the search in Luke  
> it fails giving us OOM errors.
>
> We also did the check index and the tool fails at the 20GB segment  
> but succeeds on the others.
>
> We've managed to rollback to a previously unoptimized index copy  
> (about 20GB or so) and the searches were find now. This unoptimized  
> index is made up of several 8GB segments and a few smaller segments.
>
> However there is a big possibility that the optimization error could  
> happen again...
>
> Does anybody have insights on why this is happening?
>
>
>
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 14:30:10 2008
Return-Path: <java-user-return-37910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69807 invoked from network); 23 Dec 2008 14:30:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 14:30:10 -0000
Received: (qmail 37069 invoked by uid 500); 23 Dec 2008 14:30:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37035 invoked by uid 500); 23 Dec 2008 14:30:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37021 invoked by uid 99); 23 Dec 2008 14:30:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 06:30:01 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 14:29:53 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1825500rne.4
        for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 06:29:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=f9E/73oO/BzErvetOepuPrVJww+/J/5smJrvKjoApDI=;
        b=mprezd7Njy56uozGK8B2pQ5/WT7jI7jXuMFZVhwenhmqJYBkShsIJG58zPjfysVHkm
         xfv2VVrTLWLEw8+hVEp8EbI+PT8WhCRNz0AlYCkkulrcq9DqcIA+2iPkRfTK1U/wn9D9
         068zEl+rJYkrfIf0kn4/J54dtsqCf5FilDf14=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=PfKZ6isUuDDaNDlikGciNgIjnP7kHBtM7wh3yGSJuc5jFlrihUqTJPoYUO4/xN611b
         NrosD645dUCkYPdheJYmQIH33wwZVrUWmyrP9Btihv5nQ4X4Rrf4cs43xnz5NrUEy+28
         9C7ey+eiEH2xkrQwHPxNn2I3Dmp+ZDYKJ2XRI=
Received: by 10.90.30.2 with SMTP id d2mr3862784agd.58.1230042571060;
        Tue, 23 Dec 2008 06:29:31 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Tue, 23 Dec 2008 06:29:30 -0800 (PST)
Message-ID: <359a92830812230629n7e55afc0v9e73b6340bfb27b2@mail.gmail.com>
Date: Tue, 23 Dec 2008 09:29:30 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Combining results of multiple indexes
In-Reply-To: <AAC329F11B438F43BBA91F50013A69B6067B3794@xmb-blr-413.apac.cisco.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83168_25464200.1230042571037"
References: <494894D2.9010901@cisco.com> <49491EED.4070403@cisco.com>
	 <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com>
	 <4949D6D6.7000402@cisco.com> <494A1FE2.8010101@cisco.com>
	 <359a92830812180519i5ed550bct8e1bbd4b37cb598@mail.gmail.com>
	 <494A7384.2030003@cisco.com> <494A7E57.1030206@cisco.com>
	 <359a92830812181041n3c8f44e4vad9c029b5bd261@mail.gmail.com>
	 <AAC329F11B438F43BBA91F50013A69B6067B3794@xmb-blr-413.apac.cisco.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_83168_25464200.1230042571037
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You're kind of in uncharted territory. I've been watching this list for
quite a while and you're the first person I remember who's said
"indexing speed is more important than querying speed" <G>.

Mostly I'll leave responses to folks who understand the guts of
indexing, except to say that for point (e) you can always use
a Sort object in your queries that insures this. And that merging
indexes occurs in order. That is, if you merge index1, index2
and index3, the following holds true, just based upon the
position of the index in the merge array.
max(id in index 1) < min (id in indedx2)
max(id in index 2) < min(id in index 3)

Best
Erick

On Tue, Dec 23, 2008 at 2:44 AM, Preetham Kajekar (preetham) <
preetham@cisco.com> wrote:

> Hi Erick,
>  Thanks for the heads up. I understand that I am using an implementation
> detail rather than a feature.
>
>  Looks like having a single index is the best option. Hence, any
> optimizations (to improve indexing speed) you would suggest given that
>
> a) once a doc is added to an index, it will not get modified/deleted
> b) all the fields added are keywords (mostly numbers) - no analysis is
> required.
> c) indexing speed is more important than querying speed.
> d) every document is the same - there is no boost or relevancy required.
>
> e) Query results should be sorted in the order they were indexed.
>
>
> Thanks,
>  ~preetham
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, December 19, 2008 12:12 AM
> To: java-user@lucene.apache.org
> Subject: Re: Combining results of multiple indexes
>
> I would recommend, very strongly, that you don't rely on the doc IDs
> being
> the same in two different indexes. Doc IDs are just incremented by one
> for each doc added, but.....
>
> optimization can change the doc ID. and is guaranteed to change at
> least some of them if there are deletions from your index. If you, for
> whatever reason indexed document N in one index and then skipped
> it in the other, all subsequent document IDs would not match. If.....
>
> The fact that your IDs are the same is more than undocumented, it
> is coincidental.
>
> Best
> Erick
>
> On Thu, Dec 18, 2008 at 11:46 AM, Preetham Kajekar
> <preetham@cisco.com>wrote:
>
> > Hi,
> > I noticed that the doc id is the same. So, if I have HitCollector,
> just
> > collect the doc-ids of both Searchers (for the two indexes) and find
> the
> > intersection between them, it would work. Also, get the doc is even
> where
> > there are large number of hits is fast.
> >
> > Of course, I am using something undocumented of Lucene.
> >
> >
> > Thanks,
> > ~preetham
> >
> > Preetham Kajekar wrote:
> >
> >> Thanks. Yep the code is very easy. However, it take about 3 mins to
> >> complete merging.
> >>
> >> Looks like I will need to have an out of band merging of indexes once
> they
> >> are closed (planning to store about 50mil entries in each index
> partition)
> >>
> >>
> >> However, as the data is being indexed, is there any other way to
> combine
> >> results ?
> >>
> >> I could get the results of one index, get all the hits and then apply
> this
> >> as a filter for the next index. But if there are large number of hits
> (which
> >> is likely to be the case), this would not perform too well.
> >>
> >> Do you think the document id can be used in anyway. How is the
> document id
> >> generated ? After all, i have the two indexes operating on a common
> List of
> >> objects. Would the doc is in index1 and index2 for object N in the
> list be
> >> the same ?
> >>
> >>
> >> Thanks,
> >> ~preetham
> >>
> >> Erick Erickson wrote:
> >>
> >>> You will be stunned at how easy it is. The merging code should be
> >>> a dozen lines (and that only if you are merging 6 or so indexes)....
> >>>
> >>> See IndexWriter.addIndexes or
> >>> IndexWriter.addIndexesNoOptimize
> >>>
> >>> Best
> >>> Erick
> >>>
> >>> On Thu, Dec 18, 2008 at 5:03 AM, Preetham Kajekar
> <preetham@cisco.com
> >>> >wrote:
> >>>
> >>>
> >>>
> >>>> Hi,
> >>>> I tried out a single IndexWriter used by two threads to index
> different
> >>>> fields. It is slower than using two separate IndexWriters. These
> are my
> >>>> findings
> >>>>
> >>>> All Fields (9) using 1 IndexWriter 1 Thread - 38,000 object per sec
> >>>> 5 Fields       using 1 IndexWriter 1 Thread - 62,000 object per sec
> >>>> All Fields (9) using 1 IndexWriter 2 Thread - 29,000 object per sec
> >>>> All Fields (9) using 2 IndexWriter 2 Thread - 55,000 object per sec
> >>>>
> >>>> So, it looks like I will have figure how to combine results of
> multiple
> >>>> indexes.
> >>>>
> >>>> Thanks,
> >>>> ~preetham
> >>>>
> >>>>
> >>>> Preetham Kajekar wrote:
> >>>>
> >>>>
> >>>>
> >>>>> Thanks Erick and Michael.
> >>>>> I will try out these suggestions and post my findings.
> >>>>>
> >>>>> ~preetham
> >>>>>
> >>>>> Erick Erickson wrote:
> >>>>>
> >>>>>
> >>>>>
> >>>>>> Well, maybe if I'd read the original post more carefully I'd have
> >>>>>> figured
> >>>>>> that out,
> >>>>>> sorry 'bout that.
> >>>>>>
> >>>>>> I *think* I remember reading somewhere on the email lists that
> your
> >>>>>> indexing
> >>>>>> speed goes up pretty linearly as the number of indexing tasks
> >>>>>> approaches
> >>>>>> the number of CPUs. Are you, perhaps, on a dual-core machine? But
> do
> >>>>>> search
> >>>>>> the mail archives because my memory may not be accurate.
> >>>>>>
> >>>>>> You can easily combine indexes by IndexWriter.addIndexes BTW.
> >>>>>> Personally
> >>>>>> I prefer fewer indexes if you can get away with it. But I'd only
> try
> >>>>>> this
> >>>>>> after
> >>>>>> Michael's suggestion of using multiple threads on a single
> underlying
> >>>>>> writer.
> >>>>>>
> >>>>>> You could even think about using N machines to create M fragments
> then
> >>>>>> combining them all afterwards if your logs are static enough to
> make
> >>>>>> that
> >>>>>> reasonable. Combining indexes may take a while though.....
> >>>>>>
> >>>>>> Best
> >>>>>> Erick
> >>>>>>
> >>>>>> On Wed, Dec 17, 2008 at 10:46 AM, Preetham Kajekar <
> >>>>>> preetham@cisco.com
> >>>>>>
> >>>>>>
> >>>>>>> wrote:
> >>>>>>>
> >>>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>> Hi Erick,
> >>>>>>> Thanks for the response. Replies inline.
> >>>>>>>
> >>>>>>> Erick Erickson wrote:
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>> The very first question is always "are you opening a new
> searcher
> >>>>>>>> each time you query"? But you've looked at the Wiki so I assume
> not.
> >>>>>>>> This question is closely tied to what kind of latency you can
> >>>>>>>> tolerate.
> >>>>>>>>
> >>>>>>>> A few more details, please. What's slow? Queries? Indexing?
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>> Indexing. Again, it is not slow. It is just faster with two
> separate
> >>>>>>> indexers in two threads.
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>> How slow? 100ms? 100s? What are your target times and
> >>>>>>>> what are you seeing?
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>> With a single indexer in a single thread, I can index about
> 20,000
> >>>>>>> event
> >>>>>>> objects per second. With 2 thread and 2 indexers, it is close to
> >>>>>>> 50,000.
> >>>>>>> :-)
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>> How big is your index? 100M? 100G? What kind of VM
> >>>>>>>> parameters are you specifying?
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>> The index will have about 20mil entries. The size of the index
> lands
> >>>>>>> up
> >>>>>>> being about 500M.
> >>>>>>> I start the VM with 1G of heap. No other options for GC etc is
> used.
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>> As an aside, do note that there's no requirement in Lucene that
> >>>>>>>> each document have the same fields, so it's unclear why you
> >>>>>>>> need two indexes, but perhaps some of the answers to the above
> >>>>>>>> will help us understand.
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>> Like I mentioned, Lucene does the job much faster with two
> indexes.
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>> Also, be very very careful what you measure when you measure
> >>>>>>>> queries. You absolutely *have* to put some instrumentation in
> >>>>>>>> the code since "slow queries" can result from things other than
> >>>>>>>> searching. For instance, iterating over a Hits object for 100s
> of
> >>>>>>>> documents....
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>> The Query speeds are much faster than what I need :-) So no
> complains
> >>>>>>> here.
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>> Show the code, man <G>!
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>> Code below. EvIndexer is the base class. There are two
> subclasses
> >>>>>>> which
> >>>>>>> implement addEvFieldsToIndexDoc() (template pattern) to add
> different
> >>>>>>> fields
> >>>>>>> to the index. that code is also pasted below
> >>>>>>>
> >>>>>>> --Code ---
> >>>>>>>
> >>>>>>> BaseClass
> >>>>>>>
> >>>>>>>  public EvIndexer(String indexName) throws Exception {
> >>>>>>>     this.name = indexName;
> >>>>>>>     a = new KeywordAnalyzer();
> >>>>>>>     INDEX_PATH = System.getProperty(StoreManager.PROP_DB_DB_LOC,
> >>>>>>> "./index/");
> >>>>>>>     FSDirectory directory = FSDirectory.getDirectory(INDEX_PATH
> +
> >>>>>>> File.separatorChar + indexName,
> NoLockFactory.getNoLockFactory());
> >>>>>>>     indexWriter = new IndexWriter(directory, a,
> >>>>>>> IndexWriter.MaxFieldLength.LIMITED);
> >>>>>>> //indexWriter.setUseCompoundFile(false);
> >>>>>>>     //indexWriter.setRAMBufferSizeMB(256);
> >>>>>>>       }
> >>>>>>>     /** Method implemented by extending classes to add data into
> the
> >>>>>>> index document for the
> >>>>>>>  *  given event
> >>>>>>>  *
> >>>>>>>  * @param d
> >>>>>>>  */
> >>>>>>>  protected abstract void addEvFieldsToIndexDoc(Document d, Ev
> event);
> >>>>>>>   public void addToIndex(Ev ev) throws Exception {
> >>>>>>>     noOfEventsIndexed++;
> >>>>>>>     Document d = new Document();
> addEvFieldsToIndexDoc(d,
> >>>>>>> ev);
> >>>>>>>     indexWriter.addDocument(d);
> >>>>>>>           if ((noOfEventsIndexed % COMMIT_INTERVAL) == 0) {
> >>>>>>>         System.out.println(name + " indexed " +
> >>>>>>> NumberFormat.getInstance().format(noOfEventsIndexed) + "
> Commiting
> >>>>>>> them");
> >>>>>>>         commit();
> >>>>>>>     }                   }
> >>>>>>>
> >>>>>>> DerievdClass1
> >>>>>>>  protected void addEvFieldsToIndexDoc(Document d, Ev ev) {
> >>>>>>>     //noOfEventsIndexed++;
> >>>>>>>           Field id = new Field(EV_ID, Long.toString(ev.getId()),
> >>>>>>> Field.Store.YES, Field.Index.NO);
> >>>>>>>     Field src = new Field(EV_SRC, Long.toString(ev.getSrcId()),
> >>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
> >>>>>>>     Field type = new Field(EV_TYPE,
> >>>>>>> Integer.toString(ev.getEventTypeId()), Field.Store.NO,
> >>>>>>> Field.Index.NOT_ANALYZED);
> >>>>>>>     Field pri = new Field(EV_PRI,
> Short.toString(ev.getPriority()) ,
> >>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
> >>>>>>>     Field time = new Field(EV_TIME,
> getHexString(ev.getRecvTime()) ,
> >>>>>>> Field.Store.NO, Field.Index.NOT_ANALYZED);
> >>>>>>>     d.add(id);
> >>>>>>>     d.add(src);
> >>>>>>>     d.add(type);
> >>>>>>>     d.add(pri);
> >>>>>>>     d.add(time);
> >>>>>>>     //noOfFieldsIndexed +=  4;
> >>>>>>>                 }
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>> Thanks for the support.
> >>>>>>> ~preetham
> >>>>>>>
> >>>>>>>
> >>>>>>>  Best
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>> Erick
> >>>>>>>>
> >>>>>>>>
> >>>>>>>> On Wed, Dec 17, 2008 at 9:40 AM, Preetham Kajekar <
> >>>>>>>> preetham@cisco.com
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>> wrote:
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>> Hi Grant,
> >>>>>>>>> Thanks four response. Replies inline.
> >>>>>>>>>
> >>>>>>>>> Grant Ingersoll wrote:
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>> On Dec 17, 2008, at 12:57 AM, Preetham Kajekar wrote:
> >>>>>>>>>>
> >>>>>>>>>>  Hi,
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>> I am new to Lucene. I am not using it as a pure text
> indexer.
> >>>>>>>>>>>
> >>>>>>>>>>> I am trying to index a Java object which has about 10 fields
> >>>>>>>>>>> (like
> >>>>>>>>>>> id,
> >>>>>>>>>>> time, srcIp, dstIp) - most of them being numerical values.
> >>>>>>>>>>> In order to speed up indexing, I figured that having two
> separate
> >>>>>>>>>>> indexers, each of them indexing different set of fields
> works
> >>>>>>>>>>> great.
> >>>>>>>>>>> So
> >>>>>>>>>>> I
> >>>>>>>>>>> have the first 5 fields in index1 and the remaining in
> index2.
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>> Can you explain this a bit more?  Are those two fields really
> >>>>>>>>>> large
> >>>>>>>>>> org
> >>>>>>>>>> something?  How are you obtaining them?  How are you
> correlating
> >>>>>>>>>> the
> >>>>>>>>>> documents between the two indexes?  Did you actually try a
> single
> >>>>>>>>>> index
> >>>>>>>>>> and
> >>>>>>>>>> it was too slow?
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>> I have a java object which has about 10 fields. However, the
> fields
> >>>>>>>>> are
> >>>>>>>>> not
> >>>>>>>>> fixed. The java object is essentially a representation of
> Syslogs
> >>>>>>>>> from
> >>>>>>>>> network devices. So different syslogs have different fields.
> Each
> >>>>>>>>> field
> >>>>>>>>> has
> >>>>>>>>> a unique id and a value (mostly numeric types, so i convert it
> to
> >>>>>>>>> string).
> >>>>>>>>> There are some fixed fields. So the object is a list of fields
> >>>>>>>>> which
> >>>>>>>>> is
> >>>>>>>>> produced by a parser.
> >>>>>>>>> I am trying to index using two indexers in two separate
> threads-
> >>>>>>>>> one
> >>>>>>>>> for
> >>>>>>>>> fixed and another for the non-fixed fields. Except for a
> unique id,
> >>>>>>>>> I
> >>>>>>>>> do
> >>>>>>>>> not
> >>>>>>>>> store the fields in Lucene - i just index them. From the
> index, i
> >>>>>>>>> get
> >>>>>>>>> the
> >>>>>>>>> unique id which is all I care about. (the objects are stored
> >>>>>>>>> elsewhere
> >>>>>>>>> and
> >>>>>>>>> can be looked up based on this unique id).
> >>>>>>>>> I did try using a single indexer, but things were quite slow.
> >>>>>>>>> Getting
> >>>>>>>>> high
> >>>>>>>>> throughput is crucial and having two indexers seemed to do
> very
> >>>>>>>>> well.
> >>>>>>>>> (more
> >>>>>>>>> than twice as fast)
> >>>>>>>>>
> >>>>>>>>> Further, the index will never be modified and I can have just
> one
> >>>>>>>>> thread
> >>>>>>>>> writing to the index. If there are any other performance tips
> would
> >>>>>>>>> be
> >>>>>>>>> very
> >>>>>>>>> helpful. I have already looked at the wiki link regarding
> >>>>>>>>> performance
> >>>>>>>>> and
> >>>>>>>>> using some of them.
> >>>>>>>>>
> >>>>>>>>> Thanks,
> >>>>>>>>> ~preetham
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>> Now, I want to have boolean AND query's looking for values in
> both
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>> indexes. Like f1=1234 AND f7=ABCD.f1 and f7 and present in
> two
> >>>>>>>>>>> separate
> >>>>>>>>>>> indexes. Would using the MultiIndexReader help ? Since I am
> doing
> >>>>>>>>>>> an
> >>>>>>>>>>> AND, I
> >>>>>>>>>>> dont expect that it would work.
> >>>>>>>>>>>
> >>>>>>>>>>> Thanks,
> >>>>>>>>>>> ~preetham
> >>>>>>>>>>>
> >>>>>>>>>>>
> ---------------------------------------------------------------------
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >>>>>>>>>>> For additional commands, e-mail:
> >>>>>>>>>>> java-user-help@lucene.apache.org
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>>>
> >>>>>>>>>> --------------------------
> >>>>>>>>>> Grant Ingersoll
> >>>>>>>>>>
> >>>>>>>>>> Lucene Helpful Hints:
> >>>>>>>>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> >>>>>>>>>> http://wiki.apache.org/lucene-java/LuceneFAQ
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> ---------------------------------------------------------------------
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >>>>>>>>>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>>
> >>>>>>>>>
> ---------------------------------------------------------------------
> >>>>>>>>>
> >>>>>>>>> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >>>>>>>>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>>
> >>>>>>>
> ---------------------------------------------------------------------
> >>>>>>>
> >>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>>>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>
> >>>>>
> >>>>
> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>>
> >>>
> >>>
> >>>
> >>
> >>
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_83168_25464200.1230042571037--

From java-user-return-37911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 14:36:22 2008
Return-Path: <java-user-return-37911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71000 invoked from network); 23 Dec 2008 14:36:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 14:36:21 -0000
Received: (qmail 45558 invoked by uid 500); 23 Dec 2008 14:36:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45207 invoked by uid 500); 23 Dec 2008 14:36:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45196 invoked by uid 99); 23 Dec 2008 14:36:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 06:36:08 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 14:36:00 +0000
Received: by yx-out-2324.google.com with SMTP id 3so798780yxj.5
        for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 06:35:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=G/xeYWstBqHpend48FDzZXqEV8HdjMrQtUxYfsGrC6U=;
        b=SRx8aZ2LTib4CZ4gsvtdXI9FX6DA20ofKxciuqyxLkxNjTZdbPIfg3CYzvboL51Q6U
         UPLxASgaXzwUExl6baeVgWeYXsYq34dDOwmBQ59cjtbtkh+f79qcULDnwvKJbPxRUdep
         Wtc88Ga2dx1ySWIFW187JowXXKbNyKXsNNAYg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=sQkCW2HpxzReF/HqRG9g45czSdiAtYGn837DHYPfMTu+fGSB3C5s5qd4EGSSmFtDmA
         jeTWI1y5h3Gq4eU+/r9lORHHXZduRlkhVLj2EAtaTOnO176VCi4G45o6+ucNTgcqme2w
         Hi1Yabq6ND5ZiMGO0rUCuJEZ9IBs0kaeJ0bgc=
Received: by 10.90.100.17 with SMTP id x17mr3876083agb.57.1230042939575;
        Tue, 23 Dec 2008 06:35:39 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Tue, 23 Dec 2008 06:35:39 -0800 (PST)
Message-ID: <359a92830812230635x6b1ea9bdi855bf4c7bc3e3c50@mail.gmail.com>
Date: Tue, 23 Dec 2008 09:35:39 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene search problem
In-Reply-To: <dcac67550812230036k2e4df811w4055f4b9931463fc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83327_32571187.1230042939562"
References: <dcac67550812220511j1e353eabs5a536fcb3e06a7d1@mail.gmail.com>
	 <359a92830812220558u48cb90eci9b731ee7b79e691@mail.gmail.com>
	 <50984.86344.qm@web50711.mail.re2.yahoo.com>
	 <dcac67550812230036k2e4df811w4055f4b9931463fc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_83327_32571187.1230042939562
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How do you intend to index these? Lucene will not
index objects for you. You have to break the object
down into a series of fields. At that point you can
substitute whatever you want.

Best
Erick

On Tue, Dec 23, 2008 at 3:36 AM, <amar.sannaik@gmail.com> wrote:

> Hi Aaron Schon/EricK,
>
> That really make sense to me but it really seems easy if is the string
> object. See the object structure I have it below hopefully that gives you
> some idea
>
> class Recipe {
> @DocumentId
> Integer id;
> @IndexedEmbedded
> Chain chain;
> //gettter and setter
> }
>
> class Chain {
> @DocumentId
> Integer id;
> @Field(index = Index.TOKENIZED, name="chainName")
> String name;
> //getter and setter
> }
>
> I am creating index on the recipe object. and for some recipe.m_chain would
> be null. So can you tell me how do I assign the value "NULLNULNULLNULL" for
> object chain in recipe.
>
> I also was thinking if #FieldBridge help me this way. My plan was to have
> default value where chain is null as you mentioned. but it does not seems
> to
> work for null values.
>
> Please suggest
>
> Thanks in advance.
> -Amar
>
> On Tue, Dec 23, 2008 at 12:04 AM, Aaron Schon <aaron_schon@yahoo.com>
> wrote:
>
> > I would second Erick's recommendation - create an arbitrary
> representation
> > for NULL such as "NULL" (if you are certain the term "NULL" does not
> occur
> > in actual docs. Alternatively, use "NULLNULNULLNULL" or something to that
> > effect.
> >
> >
> >
> > ----- Original Message ----
> > From: Erick Erickson <erickerickson@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Monday, December 22, 2008 8:58:21 AM
> > Subject: Re: Lucene search problem
> >
> > Try searching the mailing list archives for a fuller discussion, but
> > the short answer is usually to index an unique value for your
> > "null" entries, then search on that, something totally
> > outrageous like, say AAABBBCCCDDDEEEFFF.
> >
> > Alternatively, you could create, at startup time, a
> > Filter of all the docs that *do* contain terms for the
> > field in question, flip the bits and use the Filter in your
> > searches. (Hint: see TermDocs/TermEnum)
> >
> > Best
> > Erick
> >
> > On Mon, Dec 22, 2008 at 8:11 AM, <amar.sannaik@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > I have problem with lucene search, I am quite new to this. Can some
> body
> > > help or just push me to who can please.
> > >
> > > Problem what I am facing we need search for object whose attribute
> > "chain"
> > > contaning null, but lucene does not help indexing the null values..
> > >
> > > how can I achieve this, or please guide me the alternative way of doing
> > > this.
> > >
> > > Thanks in advance.
> > > -Amar
> > >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Amar Sannaik | Programmer | ATHARVA LIBSON Software Pvt Ltd.,
> # 9886476270, amarsannaik@atharvalibson.com
>

------=_Part_83327_32571187.1230042939562--

From java-user-return-37912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 14:39:45 2008
Return-Path: <java-user-return-37912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74275 invoked from network); 23 Dec 2008 14:39:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 14:39:44 -0000
Received: (qmail 54669 invoked by uid 500); 23 Dec 2008 14:39:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54635 invoked by uid 500); 23 Dec 2008 14:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54624 invoked by uid 99); 23 Dec 2008 14:39:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 06:39:37 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 64.233.170.187 as permitted sender)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 14:39:28 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1828115rne.4
        for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 06:39:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JgPC1ZSGcLP/FzCmZlg8HC8ejOtCgEe+znCOLe+yKqA=;
        b=hRghSnkysodRHNcPwDQXPartHLE52IwMUzJGh+IFjfwM7shU2iKE1clZNrQgn3bE80
         +QwsYZeLCu/0MLeE/5CiBb/ok4+JQwjEPLne7L1ILi2QamRt4duUgehYwz8fuA97Oksb
         CaWKG6mUBO3a9hvIiY7nQTIEJhjVA8wZKu7m8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uBLdMhGqpHheIYbaUOQqqyefDrvj3TNe+KRWcwH77ufikMJWOFtirA0l1aY+P2RW5I
         gSlKYPQp5dUL4uFlT3VrALTpBT8fcOK5/bmoBFZ19+GydvjWnGv9GpCQKLPBVm7uebN9
         uug3x2ewCXOVVOJmQ+SKO3gNDrlKhaBM/wwRc=
Received: by 10.90.25.11 with SMTP id 11mr3894524agy.10.1230043147264;
        Tue, 23 Dec 2008 06:39:07 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Tue, 23 Dec 2008 06:39:07 -0800 (PST)
Message-ID: <359a92830812230639u4828e80bn1caeeb952b309f2b@mail.gmail.com>
Date: Tue, 23 Dec 2008 09:39:07 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryWrapperFilter
In-Reply-To: <21142252.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83398_31259617.1230043147257"
References: <21142252.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_83398_31259617.1230043147257
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My first bit of advice would be to step back and take a deep
breath and "take off your DB hat". Lucene is a *text* search
application, not an RDBMS.

The usual solution is to flatten your data representation when
you index so you can use simpler searches. Others have
posted that it's hard to use Lucene to express relationships
satisfactorily.

Best
Erick

On Tue, Dec 23, 2008 at 5:24 AM, csantos <claudia.cm.santos@gmail.com>wrote:

>
> Hello,
>
> I need to filter a FullTextSearch against a query, that means, i search a
> term in a indexed entity "A", A contains a embedded Index "B", entity B has
> a m:1 bidirectional relationship with entity "C", the foreign Key in "B" is
> "c_id".  My filter condition would be like "filter the fulltext search for
> entries where the c_id equals some value", where value is given.
>
> I thought of using the QueryWrapperFilter. But the JavaDoc says for the
> TermQuery: "A Query that matches documents containing a term.". My problem
> is that the field I want to use do not appear on the Lucene Index. Which is
> the best approach?
>
> thanks in advanced
> --
> View this message in context:
> http://www.nabble.com/QueryWrapperFilter-tp21142252p21142252.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_83398_31259617.1230043147257--

From java-user-return-37913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 14:43:05 2008
Return-Path: <java-user-return-37913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75414 invoked from network); 23 Dec 2008 14:43:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 14:43:04 -0000
Received: (qmail 58806 invoked by uid 500); 23 Dec 2008 14:42:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58765 invoked by uid 500); 23 Dec 2008 14:42:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58754 invoked by uid 99); 23 Dec 2008 14:42:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 06:42:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.214] (HELO web26003.mail.ukl.yahoo.com) (217.12.10.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Dec 2008 14:42:49 +0000
Received: (qmail 88725 invoked by uid 60001); 23 Dec 2008 14:42:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=17gJrMUFsb1vmE/i+h2ksAXRlP0UxMPHH8AEaRoqvyeaqtASOwt62ffPS0rsi0rnYXakuaubBMdWnM39+gi9wooANmwSsz3j6l7zvEDz38yrm5/VL4zomOrptxJa8Gqj0OSutBBmg7LjjGor88g4Cl2xS45VQ42ii1twZhmBiu8=;
X-YMail-OSG: IE19nO8VM1kqCrOSlsk0s0hpeO2xb9bxEkB57flAvxaq5QTFpPiHg5QbagtrRGAjGrn.1mgjgGd5cXSWqPiDIWFjY8UsBzEYiyTaHUPwUPiMHzoyYcn..uaD_fR8F_r10LyIIydFMgc5jM1snWUs11EksrGQsCzfZsslX6l1SfK0H7kf9fGmKq2nfLgD3yylYR0Qm7NyW5R_f1oiRcyY1cMOx9MCobmjGc4RJ8P37Q--
Received: from [193.36.230.96] by web26003.mail.ukl.yahoo.com via HTTP; Tue, 23 Dec 2008 14:42:25 GMT
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <355058.69393.qm@web112205.mail.gq1.yahoo.com> <13D027DC-BBF9-40E9-A10C-D946821AE59A@mikemccandless.com>
Date: Tue, 23 Dec 2008 14:42:25 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Optimize and Out Of Memory Errors
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <734386.88697.qm@web26003.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I've had reports of OOM exceptions during optimize on a couple of large dep=
loyments recently (based on Lucene 2.4.0)=0AI've given the usual advice of =
turning off norms, providing plenty of RAM and also suggested setting Index=
Writer.setTermIndexInterval().=0A=0AI don't have access to these deployment=
 environments and have tried hard to reproduce the circumstances that lead =
to this. For the record, I've experimented with huge indexes with hundreds =
of fields, several "unique value" fields e.g. primary keys, "fixed-vocab" f=
ields with limited values e.g. male/female and fields with "power-curve" di=
stributions e.g. plain text.=0AI've wound my index up to 22GB with several =
commit sessions involving deletions, full optimises and partial optimises a=
long the way. Still no error.=0A=0AHowever, the errors that have been repor=
ted to me from 2 different environments with large indexes make me think th=
ere is still something to be uncovered here...=0A=0A=0A=0A=0A----- Original=
 Message ----=0AFrom: Michael McCandless <lucene@mikemccandless.com>=0ATo: =
java-user@lucene.apache.org=0ACc: Utan Bisaya <lebiram@ymail.com>=0ASent: T=
uesday, 23 December, 2008 14:08:26=0ASubject: Re: Optimize and Out Of Memor=
y Errors=0A=0A=0AHow many indexed fields do you have, overall, in the index=
?=0A=0AIf you have a very large number of fields that are "sparse" (meaning=
 any given document would only have a small subset of the fields), then nor=
ms could explain what you are seeing.=0A=0ANorms are not stored sparsely, s=
o when segments get merged the "holes" get filled (occupy bytes on disk and=
 in RAM) and consume more resources.  Turning off norms on sparse fields wo=
uld resolve it, but you must rebuild the entire index since if even a singl=
e doc in the index has norms enabled for a given field, it "spreads".=0A=0A=
Mike=0A=0AUtan Bisaya wrote:=0A=0A> Recently, our lucene index version was =
upgraded to 2.3.1 and the index had to be rebuilt for several weeks which m=
ade the entire index a total of 20 GB or so.=0A> =0A> After the the rebuild=
, a weekly sunday task was executed for optimization.=0A> =0A> During that =
time, the optimization failed several times complaining about OOM errors bu=
t then after a couple of tries, it completes.=0A> =0A> So the entire index =
is now 1 segment that is 20 GB.=0A> =0A> The problem is that any subsequent=
 searches on that index fails with OOM errors at Lucene's reading of bytes.=
=0A> =0A> Our environment:=0A> jvm Xmx1600 (This is the max we could set th=
e box since it's windows)=0A> 8G Memory available on box=0A> 4G CPU (8 core=
) but only 12.5% is used. (Not sure if this would impact it)=0A> Harddisk a=
vailable is 120GB=0A> =0A> mergeFactor, and other lucene config is set at d=
efault.=0A> =0A> We=0A> checked this 20GB using luke and it has 400,000,000=
 documents in it. It was able to count the docs however when we do the sear=
ch in Luke it fails giving us OOM errors.=0A> =0A> We also did the check in=
dex and the tool fails at the 20GB segment but succeeds on the others.=0A> =
=0A> We've managed to rollback to a previously unoptimized index copy (abou=
t 20GB or so) and the searches were find now. This unoptimized index is mad=
e up of several 8GB segments and a few smaller segments.=0A> =0A> However t=
here is a big possibility that the optimization error could happen again...=
=0A> =0A> Does anybody have insights on why this is happening?=0A> =0A> =0A=
> =0A> =0A> =0A> =0A> =0A=0A=0A--------------------------------------------=
-------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@l=
ucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.a=
pache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 15:58:50 2008
Return-Path: <java-user-return-37914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98219 invoked from network); 23 Dec 2008 15:58:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 15:58:50 -0000
Received: (qmail 41332 invoked by uid 500); 23 Dec 2008 15:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41304 invoked by uid 500); 23 Dec 2008 15:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41293 invoked by uid 99); 23 Dec 2008 15:58:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 07:58:42 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MISSING_MID,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [65.199.122.3] (HELO mainsequence.net) (65.199.122.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 15:58:32 +0000
Received: from 127.0.0.1 by mainsequence.net (MDaemon PRO v9.6.6)
	with ESMTP id md50009227562.msg
	for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 10:58:09 -0500
X-Spam-Processed: mainsequence.net, Tue, 23 Dec 2008 10:58:09 -0500
	(not processed: message from trusted or authenticated source)
X-Authenticated-Sender: test_account@mainsequence.net
X-MDRemoteIP: 66.104.120.34
X-Return-Path: prvs=1243615341=chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
Reply-To: "Chris Salem" <>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: 
Subject: Re: lucene explanation
Date: Tue, 23 Dec 2008 15:58:07 -0000
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCRecruiter Emulation of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCRecruiter Emulation of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcrCA0DEC022E094710AC0273FEEA106C2Csection1-b1"
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20081223155840.73A6681601B@nike.apache.org>

------=_pcrCA0DEC022E094710AC0273FEEA106C2Csection1-b1
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

That worked perfectly.
Thanks alot!
Sincerely,
Chris Salem 


----- Original Message ----- 
To: java-user@lucene.apache.org
From: Erick Erickson <erickerickson@gmail.com>
Sent: 12/22/2008 5:00:51 PM
Subject: Re: lucene explanation


Warning! I'm really reaching on this....


But it seems you could use TermDocs/TermEnum to
good effect here. Basically, you should be able, for a
given term, use the above to determine whether
doc N had a hit in one of your fields pretty efficiently.
There's even a WildcardTermEnum that will iterate
over wildcards.

Filters are surprisingly fast to construct, so you could
use the above to construct a filter on each term for
each field. Then determining whether the doc is a hit
for a particular field is just a matter of seeing if
that bit is on in the relevant filter.

Either one should be waaaay under 30 seconds,
although I don't know how big your index is
or how encompassing your wildcard searches
are...

FWIW
Erick

On Mon, Dec 22, 2008 at 4:48 PM, Chris Salem <chris@mainsequence.net> wrote:

> Hello,
> I'm wondering what the best way to accomplish this is.
> When a user enters text to search on it customarily searches 3 fields,
> resume_text, profile_text, and summary_text, so a standard query would be
> something like:
> (resume_text:(query) OR profile_text:(query) OR summary_text:(query))
> For each hit (up to 50) I'd like to find out which part of the query
> matched with the document. Right now I use the Explanation object, here's
> the code:
> int len = hits.length();
> if(len > 50) len = 50;
> for(int i=0; i<len; i++){
> Explanation ex = searcher.explain(Query.parse("resume_text:(query)"),
> hits.id(i));
> if(ex.isMatch()) ...
> ex = searcher.explain(Query.parse("profile_text:(query)"), hits.id(i));
> if(ex.isMatch()) ...
> ex = searcher.explain(Query.parse("summary_text:(query)"), hits.id(i));
> if(ex.isMatch()) ...
> }
> This works fine with regular queries, but if someone does a query with a
> wildcard search times increase to more than 30 seconds. Is there a better
> way to do this?
> Thanks
> Sincerely,
> Chris Salem
>

------=_pcrCA0DEC022E094710AC0273FEEA106C2Csection1-b1--




From java-user-return-37915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 17:03:47 2008
Return-Path: <java-user-return-37915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16610 invoked from network); 23 Dec 2008 17:03:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 17:03:47 -0000
Received: (qmail 24171 invoked by uid 500); 23 Dec 2008 17:03:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23888 invoked by uid 500); 23 Dec 2008 17:03:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23877 invoked by uid 99); 23 Dec 2008 17:03:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 09:03:39 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [98.136.44.189] (HELO n64.bullet.mail.sp1.yahoo.com) (98.136.44.189)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Dec 2008 17:03:29 +0000
Received: from [69.147.84.144] by n64.bullet.mail.sp1.yahoo.com with NNFMP; 23 Dec 2008 17:03:08 -0000
Received: from [67.195.9.82] by t6.bullet.mail.sp1.yahoo.com with NNFMP; 23 Dec 2008 17:03:08 -0000
Received: from [67.195.9.100] by t2.bullet.mail.gq1.yahoo.com with NNFMP; 23 Dec 2008 17:03:08 -0000
Received: from [127.0.0.1] by omp104.mail.gq1.yahoo.com with NNFMP; 23 Dec 2008 17:03:08 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 130510.74463.bm@omp104.mail.gq1.yahoo.com
Received: (qmail 19940 invoked by uid 60001); 23 Dec 2008 17:03:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=ymail.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=22tKf6jHcv3zb3wXFsU7Cm5j6sPQ6JoXEjU9pNMJiuofuUukwhriJDMaINtJd4Dfi49u7VXQzwhxacKJ9zlSGW+ZOfG9A/Kbv+AZT8zIDi+6T6WIlbGNxbFkmGoNR4aEKYtE5c68en+kt60wIzZeEykKm9BfGc6T0YhpBx5a6Bw=;
X-YMail-OSG: u5Hu40AVM1kwxpcTaicbxDfIJmkimX_SiEYt9IyuHoSZNe0vY_WQFBmex_c_CQrwLb1Q_aUeynKuA1E575fWeNBDxsHlC_FMKKKKyUllKKX19DtM4XcNZuowdIuV8lxCf6giC7iV2S5ysmkl6zTqbl_8Pgh4eb6D9_JlPPuJv6lHeWhtu7XeQBb3H0gOITAZm2LLytdMAw--
Received: from [217.205.40.94] by web112206.mail.gq1.yahoo.com via HTTP; Tue, 23 Dec 2008 09:03:07 PST
X-Mailer: YahooMailRC/1156.77 YahooMailWebService/0.7.260.1
References: <355058.69393.qm@web112205.mail.gq1.yahoo.com> <13D027DC-BBF9-40E9-A10C-D946821AE59A@mikemccandless.com> <734386.88697.qm@web26003.mail.ukl.yahoo.com>
Date: Tue, 23 Dec 2008 09:03:07 -0800 (PST)
From: Lebiram <lebiram@ymail.com>
Subject: Re: Optimize and Out Of Memory Errors
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-15096327-1230051787=:19219"
Message-ID: <739457.19219.qm@web112206.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-15096327-1230051787=:19219
Content-Type: text/plain; charset=us-ascii

Hi All, 

Thanks for the replies, 

I've just managed to reproduced the error on my test machine.

What we did was, generate about 100,000,000 documents with about 7 fields in it, with terms from 1 to 10.

After the index of about 20GB, we did an optimize and it was able to make 1 big index of the size 17GB...

Now, when we do a normal search, it just fails. 

Here is the stack trace:

2008-12-23 16:56:05,388 [main] INFO  LuceneTesterMain  - Max Memory:1598226432
2008-12-23 16:56:05,388 [main] INFO  LuceneTesterMain  - Available Memory:854133192
2008-12-23 16:56:05,388 [main] ERROR LuceneTesterMain  - Seaching failed.
java.lang.OutOfMemoryError
    at java.io.RandomAccessFile.readBytes(Native Method)
    at java.io.RandomAccessFile.read(RandomAccessFile.java:315)
    at org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:550)
    at org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131)
    at org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240)
    at org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131)
    at org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:87)
    at org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:834)
    at org.apache.lucene.index.MultiSegmentReader.norms(MultiSegmentReader.java:335)
    at org.apache.lucene.search.TermQuery$TermWeight.scorer(TermQuery.java:69)
    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:143)
    at org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:113)
    at org.apache.lucene.search.Searcher.search(Searcher.java:132)


The search code is quite simple in fact. 

2008-12-23 16:56:05,076 [main] INFO  LuceneTesterMain  - query.toString()=+content:test

and the code to search.

Filter filter = new RangeFilter("timestamp", DateTools.dateToString(start, DateTools.Resolution.SECOND),
                                         DateTools.dateToString(end, DateTools.Resolution.SECOND), true, true);
Searcher = new IndexSearcher(FSDirectory.getDirectory(IndexName));
TopDocs hits = Searcher.search(query, filter, 1000);

I really have no idea why this is breaking.

Also, what are norms and 
how do I turn off norms and where is it set? 

This is code on adding documents:

Document doc = new Document();
                    doc.add(new Field("id", String.valueOf(i), Field.Store.YES, Field.Index.UN_TOKENIZED));

                    doc.add(new Field("timestamp", DateTools.dateToString(new Date(), DateTools.Resolution.SECOND), Field.Store.YES, Field.Index.UN_TOKENIZED));
                    doc.add(new Field("content", LuceneTesterMain.StaticString, Field.Store.NO, Field.Index.TOKENIZED));
                    doc.add(new Field("field2", "sender" + i, Field.Store.NO, Field.Index.TOKENIZED));
                    doc.add(new Field("field3", LuceneTesterMain.StaticString, Field.Store.NO, Field.Index.TOKENIZED));

                    doc.add(new Field("field4", "group" + i, Field.Store.NO, Field.Index.TOKENIZED));
                    doc.add(new Field("field5", "groupId" + i, Field.Store.YES, Field.Index.UN_TOKENIZED));


                    writer.addDocument(doc);





________________________________
From: mark harwood <markharw00d@yahoo.co.uk>
To: java-user@lucene.apache.org
Sent: Tuesday, December 23, 2008 2:42:25 PM
Subject: Re: Optimize and Out Of Memory Errors

I've had reports of OOM exceptions during optimize on a couple of large deployments recently (based on Lucene 2.4.0)
I've given the usual advice of turning off norms, providing plenty of RAM and also suggested setting IndexWriter.setTermIndexInterval().

I don't have access to these deployment environments and have tried hard to reproduce the circumstances that lead to this. For the record, I've experimented with huge indexes with hundreds of fields, several "unique value" fields e.g. primary keys, "fixed-vocab" fields with limited values e.g. male/female and fields with "power-curve" distributions e.g. plain text.
I've wound my index up to 22GB with several commit sessions involving deletions, full optimises and partial optimises along the way. Still no error.

However, the errors that have been reported to me from 2 different environments with large indexes make me think there is still something to be uncovered here...




----- Original Message ----
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Cc: Utan Bisaya <lebiram@ymail.com>
Sent: Tuesday, 23 December, 2008 14:08:26
Subject: Re: Optimize and Out Of Memory Errors


How many indexed fields do you have, overall, in the index?

If you have a very large number of fields that are "sparse" (meaning any given document would only have a small subset of the fields), then norms could explain what you are seeing.

Norms are not stored sparsely, so when segments get merged the "holes" get filled (occupy bytes on disk and in RAM) and consume more resources.  Turning off norms on sparse fields would resolve it, but you must rebuild the entire index since if even a single doc in the index has norms enabled for a given field, it "spreads".

Mike

Utan Bisaya wrote:

> Recently, our lucene index version was upgraded to 2.3.1 and the index had to be rebuilt for several weeks which made the entire index a total of 20 GB or so.
> 
> After the the rebuild, a weekly sunday task was executed for optimization.
> 
> During that time, the optimization failed several times complaining about OOM errors but then after a couple of tries, it completes.
> 
> So the entire index is now 1 segment that is 20 GB.
> 
> The problem is that any subsequent searches on that index fails with OOM errors at Lucene's reading of bytes.
> 
> Our environment:
> jvm Xmx1600 (This is the max we could set the box since it's windows)
> 8G Memory available on box
> 4G CPU (8 core) but only 12.5% is used. (Not sure if this would impact it)
> Harddisk available is 120GB
> 
> mergeFactor, and other lucene config is set at default.
> 
> We
> checked this 20GB using luke and it has 400,000,000 documents in it. It was able to count the docs however when we do the search in Luke it fails giving us OOM errors.
> 
> We also did the check index and the tool fails at the 20GB segment but succeeds on the others.
> 
> We've managed to rollback to a previously unoptimized index copy (about 20GB or so) and the searches were find now. This unoptimized index is made up of several 8GB segments and a few smaller segments.
> 
> However there is a big possibility that the optimization error could happen again...
> 
> Does anybody have insights on why this is happening?
> 
> 
> 
> 
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-15096327-1230051787=:19219--


From java-user-return-37916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 17:08:34 2008
Return-Path: <java-user-return-37916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17290 invoked from network); 23 Dec 2008 17:08:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 17:08:34 -0000
Received: (qmail 27988 invoked by uid 500); 23 Dec 2008 17:08:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27950 invoked by uid 500); 23 Dec 2008 17:08:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27939 invoked by uid 99); 23 Dec 2008 17:08:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 09:08:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 23 Dec 2008 17:08:16 +0000
Received: (qmail 36857 invoked by uid 60001); 23 Dec 2008 17:07:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=d2D8om/6ax/35jpLgbeipMESYeXEW44BWY0LTuRJwN73VSEXSHb1bqjjoUfDr0NBTPJTe/gE33Yv4xNN+iibdmdr5K/S2TD4aY5rIXpJjpw2z1eM1b5G5dj+wl2/JBYDkAO0C78dHpHZnrQCC1dwHKQmwR5wtYLqE9gLa6CX++M=;
X-YMail-OSG: msnPmFoVM1nfxkxcgsmal.dQ4TjBMSfEvtWgsbxSxMlu0Cw55523Ua1tEqAzrbq3AhNyVrxP8DNnbIm42g4b_IO6I6p08DmpP1yFg2A1gZuP_GFNhJq0GZoNLqar6vMRRWN_5NDTIqcppMlQ0LlziKELxf5QkAPX7uh1fDDc_t0pBU2KB83anQm0XM0E1av9Yl01ljqog_vRLFQ_Xeuipzqvspaj7DMaUc2kAg0gjg--
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Tue, 23 Dec 2008 17:07:54 GMT
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <355058.69393.qm@web112205.mail.gq1.yahoo.com> <13D027DC-BBF9-40E9-A10C-D946821AE59A@mikemccandless.com> <734386.88697.qm@web26003.mail.ukl.yahoo.com> <739457.19219.qm@web112206.mail.gq1.yahoo.com>
Date: Tue, 23 Dec 2008 17:07:54 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Optimize and Out Of Memory Errors
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <686669.36516.qm@web26005.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>how do I turn off norms and where is it set? =0A=0A                    do=
c.add(new Field("field2", "sender" + i, Field.Store.NO, Field.Index.ANALYZE=
D_NO_NORMS));=0A=0A=0A=0A=0A=0A----- Original Message ----=0AFrom: Lebiram =
<lebiram@ymail.com>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, 23 D=
ecember, 2008 17:03:07=0ASubject: Re: Optimize and Out Of Memory Errors=0A=
=0AHi All, =0A=0AThanks for the replies, =0A=0AI've just managed to reprodu=
ced the error on my test machine.=0A=0AWhat we did was, generate about 100,=
000,000 documents with about 7 fields in it, with terms from 1 to 10.=0A=0A=
After the index of about 20GB, we did an optimize and it was able to make 1=
 big index of the size 17GB...=0A=0ANow, when we do a normal search, it jus=
t fails. =0A=0AHere is the stack trace:=0A=0A2008-12-23 16:56:05,388 [main]=
 INFO  LuceneTesterMain  - Max Memory:1598226432=0A2008-12-23 16:56:05,388 =
[main] INFO  LuceneTesterMain  - Available Memory:854133192=0A2008-12-23 16=
:56:05,388 [main] ERROR LuceneTesterMain  - Seaching failed.=0Ajava.lang.Ou=
tOfMemoryError=0A    at java.io.RandomAccessFile.readBytes(Native Method)=
=0A    at java.io.RandomAccessFile.read(RandomAccessFile.java:315)=0A    at=
 org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.=
java:550)=0A    at org.apache.lucene.store.BufferedIndexInput.readBytes(Buf=
feredIndexInput.java:131)=0A    at org.apache.lucene.index.CompoundFileRead=
er$CSIndexInput.readInternal(CompoundFileReader.java:240)=0A    at org.apac=
he.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131)=
=0A    at org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedInde=
xInput.java:87)=0A    at org.apache.lucene.index.SegmentReader.norms(Segmen=
tReader.java:834)=0A    at org.apache.lucene.index.MultiSegmentReader.norms=
(MultiSegmentReader.java:335)=0A    at org.apache.lucene.search.TermQuery$T=
ermWeight.scorer(TermQuery.java:69)=0A    at org.apache.lucene.search.Index=
Searcher.search(IndexSearcher.java:143)=0A    at org.apache.lucene.search.I=
ndexSearcher.search(IndexSearcher.java:113)=0A    at org.apache.lucene.sear=
ch.Searcher.search(Searcher.java:132)=0A=0A=0AThe search code is quite simp=
le in fact. =0A=0A2008-12-23 16:56:05,076 [main] INFO  LuceneTesterMain  - =
query.toString()=3D+content:test=0A=0Aand the code to search.=0A=0AFilter f=
ilter =3D new RangeFilter("timestamp", DateTools.dateToString(start, DateTo=
ols.Resolution.SECOND),=0A                                         DateTool=
s.dateToString(end, DateTools.Resolution.SECOND), true, true);=0ASearcher =
=3D new IndexSearcher(FSDirectory.getDirectory(IndexName));=0ATopDocs hits =
=3D Searcher.search(query, filter, 1000);=0A=0AI really have no idea why th=
is is breaking.=0A=0AAlso, what are norms and =0Ahow do I turn off norms an=
d where is it set? =0A=0AThis is code on adding documents:=0A=0ADocument do=
c =3D new Document();=0A                    doc.add(new Field("id", String.=
valueOf(i), Field.Store.YES, Field.Index.UN_TOKENIZED));=0A=0A             =
       doc.add(new Field("timestamp", DateTools.dateToString(new Date(), Da=
teTools.Resolution.SECOND), Field.Store.YES, Field.Index.UN_TOKENIZED));=0A=
                    doc.add(new Field("content", LuceneTesterMain.StaticStr=
ing, Field.Store.NO, Field.Index.TOKENIZED));=0A                    doc.add=
(new Field("field2", "sender" + i, Field.Store.NO, Field.Index.TOKENIZED));=
=0A                    doc.add(new Field("field3", LuceneTesterMain.StaticS=
tring, Field.Store.NO, Field.Index.TOKENIZED));=0A=0A                    do=
c.add(new Field("field4", "group" + i, Field.Store.NO, Field.Index.TOKENIZE=
D));=0A                    doc.add(new Field("field5", "groupId" + i, Field=
.Store.YES, Field.Index.UN_TOKENIZED));=0A=0A=0A                    writer.=
addDocument(doc);=0A=0A=0A=0A=0A=0A________________________________=0AFrom:=
 mark harwood <markharw00d@yahoo.co.uk>=0ATo: java-user@lucene.apache.org=
=0ASent: Tuesday, December 23, 2008 2:42:25 PM=0ASubject: Re: Optimize and =
Out Of Memory Errors=0A=0AI've had reports of OOM exceptions during optimiz=
e on a couple of large deployments recently (based on Lucene 2.4.0)=0AI've =
given the usual advice of turning off norms, providing plenty of RAM and al=
so suggested setting IndexWriter.setTermIndexInterval().=0A=0AI don't have =
access to these deployment environments and have tried hard to reproduce th=
e circumstances that lead to this. For the record, I've experimented with h=
uge indexes with hundreds of fields, several "unique value" fields e.g. pri=
mary keys, "fixed-vocab" fields with limited values e.g. male/female and fi=
elds with "power-curve" distributions e.g. plain text.=0AI've wound my inde=
x up to 22GB with several commit sessions involving deletions, full optimis=
es and partial optimises along the way. Still no error.=0A=0AHowever, the e=
rrors that have been reported to me from 2 different environments with larg=
e indexes make me think there is still something to be uncovered here...=0A=
=0A=0A=0A=0A----- Original Message ----=0AFrom: Michael McCandless <lucene@=
mikemccandless.com>=0ATo: java-user@lucene.apache.org=0ACc: Utan Bisaya <le=
biram@ymail.com>=0ASent: Tuesday, 23 December, 2008 14:08:26=0ASubject: Re:=
 Optimize and Out Of Memory Errors=0A=0A=0AHow many indexed fields do you h=
ave, overall, in the index?=0A=0AIf you have a very large number of fields =
that are "sparse" (meaning any given document would only have a small subse=
t of the fields), then norms could explain what you are seeing.=0A=0ANorms =
are not stored sparsely, so when segments get merged the "holes" get filled=
 (occupy bytes on disk and in RAM) and consume more resources.  Turning off=
 norms on sparse fields would resolve it, but you must rebuild the entire i=
ndex since if even a single doc in the index has norms enabled for a given =
field, it "spreads".=0A=0AMike=0A=0AUtan Bisaya wrote:=0A=0A> Recently, our=
 lucene index version was upgraded to 2.3.1 and the index had to be rebuilt=
 for several weeks which made the entire index a total of 20 GB or so.=0A> =
=0A> After the the rebuild, a weekly sunday task was executed for optimizat=
ion.=0A> =0A> During that time, the optimization failed several times compl=
aining about OOM errors but then after a couple of tries, it completes.=0A>=
 =0A> So the entire index is now 1 segment that is 20 GB.=0A> =0A> The prob=
lem is that any subsequent searches on that index fails with OOM errors at =
Lucene's reading of bytes.=0A> =0A> Our environment:=0A> jvm Xmx1600 (This =
is the max we could set the box since it's windows)=0A> 8G Memory available=
 on box=0A> 4G CPU (8 core) but only 12.5% is used. (Not sure if this would=
 impact it)=0A> Harddisk available is 120GB=0A> =0A> mergeFactor, and other=
 lucene config is set at default.=0A> =0A> We=0A> checked this 20GB using l=
uke and it has 400,000,000 documents in it. It was able to count the docs h=
owever when we do the search in Luke it fails giving us OOM errors.=0A> =0A=
> We also did the check index and the tool fails at the 20GB segment but su=
cceeds on the others.=0A> =0A> We've managed to rollback to a previously un=
optimized index copy (about 20GB or so) and the searches were find now. Thi=
s unoptimized index is made up of several 8GB segments and a few smaller se=
gments.=0A> =0A> However there is a big possibility that the optimization e=
rror could happen again...=0A> =0A> Does anybody have insights on why this =
is happening?=0A> =0A> =0A> =0A> =0A> =0A> =0A> =0A=0A=0A------------------=
---------------------------------------------------=0ATo unsubscribe, e-mai=
l: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mai=
l: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A-------------------------=
--------------------------------------------=0ATo unsubscribe, e-mail: java=
-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java=
-user-help@lucene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 17:18:52 2008
Return-Path: <java-user-return-37917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19866 invoked from network); 23 Dec 2008 17:18:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 17:18:52 -0000
Received: (qmail 36637 invoked by uid 500); 23 Dec 2008 17:18:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36597 invoked by uid 500); 23 Dec 2008 17:18:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36586 invoked by uid 99); 23 Dec 2008 17:18:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 09:18:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 17:18:36 +0000
Received: by yw-out-2324.google.com with SMTP id 3so829875ywj.5
        for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 09:18:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=TIxctDMu5mM/QyXnLbpwgKDvmPh0EqLQCM/UKaHMV5U=;
        b=iY2k4EPTVbn7ktKU1Mj+sHVB6aE4J92v6LBDt2ApZilRUSxoVRLb/8I6uUuTmz9mhk
         6lfycjJ3J10s0tkwJRg9SHdJKN0w3Syx0T9emxGg7X+xsZv3aogV1xp4ihkqE9YCybCg
         LQBQZz6SNIBqt3US2pHqu25Q4wb8VcediT5bY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=KXnN2SWqAWxJodj2EP6c7L4an0tRAIxcDrMkqgB7svQH/IZPZhRtqTbt3ppdlmKMXR
         tpXYSPANPssGkDANO/JjaITio/1qnHXmwbi07nn+/s99jJ7zsr3bhq2u9gxdtWVf6Qfm
         icOauFFX0fhrZMHDaGZ6FgsoXaS64dV0eH67Y=
Received: by 10.90.120.14 with SMTP id s14mr3999301agc.20.1230052695530;
        Tue, 23 Dec 2008 09:18:15 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 20sm26373158agd.35.2008.12.23.09.18.14
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 23 Dec 2008 09:18:15 -0800 (PST)
Message-ID: <49511D56.7030006@gmail.com>
Date: Tue, 23 Dec 2008 12:18:14 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Optimize and Out Of Memory Errors
References: <355058.69393.qm@web112205.mail.gq1.yahoo.com> <13D027DC-BBF9-40E9-A10C-D946821AE59A@mikemccandless.com> <734386.88697.qm@web26003.mail.ukl.yahoo.com> <739457.19219.qm@web112206.mail.gq1.yahoo.com>
In-Reply-To: <739457.19219.qm@web112206.mail.gq1.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Lebiram wrote:
> Also, what are norms 
Norms are a byte value per field stored in the index that is factored 
into the score. Its used for length normalization (shorter documents = 
more important) and index time boosting. If you want either of those, 
you need norms. When norms are loaded up into an IndexReader, its loaded 
into a byte[maxdoc] array for each field - so even if one document out 
of 400 million has a field, its still going to load byte[maxdoc] for 
that field (so a lot of wasted RAM).  Did you say you had 400 million 
docs and 7 fields? Google says that would be:


    **400 million x 7 byte = 2 670.28809 megabytes**

On top of your other RAM usage.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 23 17:26:07 2008
Return-Path: <java-user-return-37918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21898 invoked from network); 23 Dec 2008 17:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2008 17:26:06 -0000
Received: (qmail 48568 invoked by uid 500); 23 Dec 2008 17:26:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48526 invoked by uid 500); 23 Dec 2008 17:25:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48515 invoked by uid 99); 23 Dec 2008 17:25:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 09:25:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 17:25:52 +0000
Received: by yx-out-2324.google.com with SMTP id 3so828273yxj.5
        for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 09:25:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=kiDN2kr31PI4aCpZn6IlqaAJ+knB8k4LxGYe27eMeVg=;
        b=TOR5QKfdeUXoop9ZFMX8viKLwfxk8atUysEIH4mdXgLaBLL99rJjCY8fuZ36QnSXQi
         V3fsiA6Apu7p3dqWvE8KfgqbHKZC3KygBCXtPe2MWMkdgopNNHDNXIFaWTjguT9b6MpU
         12qCrCt4AMXSfu/S26JegNi9+nagebIlL2I58=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=eatrF1jIqq3abpzz/LmeE4ElwvSFs9DrVBY8wMuzJbSGWyOmXdQyk8g8X2S5RO6FIY
         VeoT8I/mzidFlvA51QAyX31iWkPwq0IH33EZ/k/7ijnSI3+eZO14W5Grjy8b0t/cXrnC
         4XohvZvTFOA2xeOry86jWy30W/CKLyIrL9vx4=
Received: by 10.90.86.10 with SMTP id j10mr3286079agb.30.1230053131162;
        Tue, 23 Dec 2008 09:25:31 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 38sm26298297aga.4.2008.12.23.09.25.30
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 23 Dec 2008 09:25:30 -0800 (PST)
Message-ID: <49511F0A.1040909@gmail.com>
Date: Tue, 23 Dec 2008 12:25:30 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Optimize and Out Of Memory Errors
References: <355058.69393.qm@web112205.mail.gq1.yahoo.com> <13D027DC-BBF9-40E9-A10C-D946821AE59A@mikemccandless.com> <734386.88697.qm@web26003.mail.ukl.yahoo.com> <739457.19219.qm@web112206.mail.gq1.yahoo.com> <49511D56.7030006@gmail.com>
In-Reply-To: <49511D56.7030006@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> Lebiram wrote:
>> Also, what are norms 
> Norms are a byte value per field stored in the index that is factored 
> into the score. Its used for length normalization (shorter documents = 
> more important) and index time boosting. If you want either of those, 
> you need norms. When norms are loaded up into an IndexReader, its 
> loaded into a byte[maxdoc] array for each field - so even if one 
> document out of 400 million has a field, its still going to load 
> byte[maxdoc] for that field (so a lot of wasted RAM).  Did you say you 
> had 400 million docs and 7 fields? Google says that would be:
>
>
>    **400 million x 7 byte = 2 670.28809 megabytes**
>
> On top of your other RAM usage.
Just to avoid confusion, that should really read a byte per document per 
field. If I remember right, it gives 255 boost possibilities, limited to 
25 with length normalization.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 06:04:01 2008
Return-Path: <java-user-return-37919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84582 invoked from network); 24 Dec 2008 06:04:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 06:04:01 -0000
Received: (qmail 19338 invoked by uid 500); 24 Dec 2008 06:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19299 invoked by uid 500); 24 Dec 2008 06:03:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19288 invoked by uid 99); 24 Dec 2008 06:03:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 22:03:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of amar.sannaik@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 06:03:46 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3496763rvb.5
        for <java-user@lucene.apache.org>; Tue, 23 Dec 2008 22:03:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NCtdSZ553WfBiTbE+ZzYgid9VZHXInq7EQIAcyNHdzA=;
        b=VriMddQVyR98HQL26nVne38kDdRC0xDG2JhGpAQAhAE1VkQsmhPTOBWEFiky/0Kzqe
         M3myZouZrL3IZodI8bqOSVKdgHIh9fUSPo7fzvwOFsCwHuvL2nDnxxE5lwPewqft5Ndy
         KOgClUG3G2oW9CPik0RI8a6lOkAYAXsf8JErM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=akeQCOApFBCaLt1R7reGWm0I+2IS0gnvjVOketkbo4wEFzT9HEu3A3SkS8LVV9Favz
         Mj2RRODgSUZi2Gxi3+NSXgrFnKltb6Le/hovlDz8TriJ6XVab6ysJRlH7SZyOvIT4Z3o
         jRuow/kxHqAw9CKA3szf5sf/XrbT/qBiuTxtQ=
Received: by 10.115.14.1 with SMTP id r1mr5298940wai.27.1230098605849;
        Tue, 23 Dec 2008 22:03:25 -0800 (PST)
Received: by 10.114.155.4 with HTTP; Tue, 23 Dec 2008 22:03:25 -0800 (PST)
Message-ID: <dcac67550812232203n4bb64206u753d75a94e216dc@mail.gmail.com>
Date: Wed, 24 Dec 2008 11:33:25 +0530
From: amar.sannaik@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene search problem
In-Reply-To: <359a92830812230635x6b1ea9bdi855bf4c7bc3e3c50@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74617_18882893.1230098605846"
References: <dcac67550812220511j1e353eabs5a536fcb3e06a7d1@mail.gmail.com>
	 <359a92830812220558u48cb90eci9b731ee7b79e691@mail.gmail.com>
	 <50984.86344.qm@web50711.mail.re2.yahoo.com>
	 <dcac67550812230036k2e4df811w4055f4b9931463fc@mail.gmail.com>
	 <359a92830812230635x6b1ea9bdi855bf4c7bc3e3c50@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74617_18882893.1230098605846
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi Erick,

I agree lucene do not index the object. in the following example I have
quoted fields are indexed as chain.chainName.
I am able to retrieve recipe objects using FullTextQuery as
"chain.chainName:something' ... question is in somecase chain itself is
null.
I can be able to achieve required as below:

class Recipe {
  @DocumentId
  Integer id;
  @IndexedEmbedded
  Chain chain = new Chain();
  //gettter and setter
}

 class Chain {
  @DocumentId
  Integer id;
  @Field(index = Index.TOKENIZED, name="chainName")
  String name = "NULLNULNUL";
  //getter and setter
 }

so this means to always there is will be chain along with Recipe object with
has default name to "NULLNULNUL" and that wil be indexed..
We dont want to do that, Recipe is our persistence object and we hate to do
that.

-Amar

On Tue, Dec 23, 2008 at 8:05 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> How do you intend to index these? Lucene will not
> index objects for you. You have to break the object
> down into a series of fields. At that point you can
> substitute whatever you want.
>
> Best
> Erick
>
> On Tue, Dec 23, 2008 at 3:36 AM, <amar.sannaik@gmail.com> wrote:
>
> > Hi Aaron Schon/EricK,
> >
> > That really make sense to me but it really seems easy if is the string
> > object. See the object structure I have it below hopefully that gives you
> > some idea
> >
> > class Recipe {
> > @DocumentId
> > Integer id;
> > @IndexedEmbedded
> > Chain chain;
> > //gettter and setter
> > }
> >
> > class Chain {
> > @DocumentId
> > Integer id;
> > @Field(index = Index.TOKENIZED, name="chainName")
> > String name;
> > //getter and setter
> > }
> >
> > I am creating index on the recipe object. and for some recipe.m_chain
> would
> > be null. So can you tell me how do I assign the value "NULLNULNULLNULL"
> for
> > object chain in recipe.
> >
> > I also was thinking if #FieldBridge help me this way. My plan was to have
> > default value where chain is null as you mentioned. but it does not seems
> > to
> > work for null values.
> >
> > Please suggest
> >
> > Thanks in advance.
> > -Amar
> >
> > On Tue, Dec 23, 2008 at 12:04 AM, Aaron Schon <aaron_schon@yahoo.com>
> > wrote:
> >
> > > I would second Erick's recommendation - create an arbitrary
> > representation
> > > for NULL such as "NULL" (if you are certain the term "NULL" does not
> > occur
> > > in actual docs. Alternatively, use "NULLNULNULLNULL" or something to
> that
> > > effect.
> > >
> > >
> > >
> > > ----- Original Message ----
> > > From: Erick Erickson <erickerickson@gmail.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Monday, December 22, 2008 8:58:21 AM
> > > Subject: Re: Lucene search problem
> > >
> > > Try searching the mailing list archives for a fuller discussion, but
> > > the short answer is usually to index an unique value for your
> > > "null" entries, then search on that, something totally
> > > outrageous like, say AAABBBCCCDDDEEEFFF.
> > >
> > > Alternatively, you could create, at startup time, a
> > > Filter of all the docs that *do* contain terms for the
> > > field in question, flip the bits and use the Filter in your
> > > searches. (Hint: see TermDocs/TermEnum)
> > >
> > > Best
> > > Erick
> > >
> > > On Mon, Dec 22, 2008 at 8:11 AM, <amar.sannaik@gmail.com> wrote:
> > >
> > > > Hi,
> > > >
> > > > I have problem with lucene search, I am quite new to this. Can some
> > body
> > > > help or just push me to who can please.
> > > >
> > > > Problem what I am facing we need search for object whose attribute
> > > "chain"
> > > > contaning null, but lucene does not help indexing the null values..
> > > >
> > > > how can I achieve this, or please guide me the alternative way of
> doing
> > > > this.
> > > >
> > > > Thanks in advance.
> > > > -Amar
> > > >
> > >
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Amar Sannaik | Programmer | ATHARVA LIBSON Software Pvt Ltd.,
> > # 9886476270, amarsannaik@atharvalibson.com
> >
>



-- 
Amar Sannaik | Programmer | ATHARVA LIBSON Software Pvt Ltd.,
# 9886476270, amarsannaik@atharvalibson.com

------=_Part_74617_18882893.1230098605846--

From java-user-return-37920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 06:04:38 2008
Return-Path: <java-user-return-37920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84911 invoked from network); 24 Dec 2008 06:04:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 06:04:37 -0000
Received: (qmail 21014 invoked by uid 500); 24 Dec 2008 06:04:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20982 invoked by uid 500); 24 Dec 2008 06:04:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20971 invoked by uid 99); 24 Dec 2008 06:04:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 22:04:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 06:04:23 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBO640Bs005958
	for <java-user@lucene.apache.org>; Wed, 24 Dec 2008 00:04:00 -0600
Received: (qmail 11786 invoked by uid 0); 24 Dec 2008 00:04:00 -0600
Date: 24 Dec 2008 00:04:00 -0600
Message-ID: <20081224060400.11785.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Lucene search problem
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 330880046 - 80e94b0ef8db
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=330880046&m=80e94b0ef8db&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=330880046&m=80e94b0ef8db&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=330880046&m=80e94b0ef8db&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 06:05:10 2008
Return-Path: <java-user-return-37921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86288 invoked from network); 24 Dec 2008 06:05:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 06:05:10 -0000
Received: (qmail 23437 invoked by uid 500); 24 Dec 2008 06:05:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23409 invoked by uid 500); 24 Dec 2008 06:05:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23398 invoked by uid 99); 24 Dec 2008 06:05:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 23 Dec 2008 22:05:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 06:04:55 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBO64Yof003243
	for <java-user@lucene.apache.org>; Wed, 24 Dec 2008 00:04:34 -0600
Received: (qmail 12204 invoked by uid 0); 24 Dec 2008 00:04:34 -0600
Date: 24 Dec 2008 00:04:34 -0600
Message-ID: <20081224060434.12203.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Lucene search problem
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 330880127 - ddb97434a072
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=330880127&m=ddb97434a072&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=330880127&m=ddb97434a072&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=330880127&m=ddb97434a072&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 09:01:11 2008
Return-Path: <java-user-return-37922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60060 invoked from network); 24 Dec 2008 09:01:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 09:01:11 -0000
Received: (qmail 33055 invoked by uid 500); 24 Dec 2008 09:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33025 invoked by uid 500); 24 Dec 2008 09:01:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33013 invoked by uid 99); 24 Dec 2008 09:01:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 01:01:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 09:00:56 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D367F71C582; Wed, 24 Dec 2008 01:00:35 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id CF15771C522
	for <java-user@lucene.apache.org>; Wed, 24 Dec 2008 01:00:35 -0800 (PST)
Date: Wed, 24 Dec 2008 01:00:35 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Combining results of multiple indexes
In-Reply-To: <AAC329F11B438F43BBA91F50013A69B6067B3794@xmb-blr-413.apac.cisco.com>
Message-ID: <Pine.LNX.4.62.0812240052540.29682@radix.cryptio.net>
References: <494894D2.9010901@cisco.com> <49490F4B.1030607@cisco.com>
 <359a92830812170720m8fc2d0bw4ad837bd6a4f051e@mail.gmail.com>
 <49491EED.4070403@cisco.com> <359a92830812171021o183713c9h5b0914539660383a@mail.gmail.com>
 <4949D6D6.7000402@cisco.com> <494A1FE2.8010101@cisco.com>
 <359a92830812180519i5ed550bct8e1bbd4b37cb598@mail.gmail.com>
 <494A7384.2030003@cisco.com> <494A7E57.1030206@cisco.com>
 <359a92830812181041n3c8f44e4vad9c029b5bd261@mail.gmail.com>
 <AAC329F11B438F43BBA91F50013A69B6067B3794@xmb-blr-413.apac.cisco.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: a) once a doc is added to an index, it will not get modified/deleted
: b) all the fields added are keywords (mostly numbers) - no analysis is
: required. 
: c) indexing speed is more important than querying speed. 
: d) every document is the same - there is no boost or relevancy required.
: 
: e) Query results should be sorted in the order they were indexed. 

given those statements, it really doesn't sound like Lucene (or any 
inverted index structure) is useful to you at all.  if you really have an 
unbounded prefrence for indexing speed vs query speed you should use a 
data structure where "add" is a constant time operation, even if that 
means querying is done via a linear scan of every doc -- which actually 
aids you by automatically returning everything the order they were added.

have you considered just using delimited files and something like perl for 
finding every record where the specified columns match your input 
criteria?

or if you ar a *little* concerned about query performance: using Hadoop 
map/reduce to scan multiple text files spread across many boxes.


(Disclaimer: haven't been following the whole thread, but did spot check 
the first message to see that hte query types are all simple field 
equality tests combined in a boolean epxression.)

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 09:13:57 2008
Return-Path: <java-user-return-37923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62549 invoked from network); 24 Dec 2008 09:13:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 09:13:57 -0000
Received: (qmail 42596 invoked by uid 500); 24 Dec 2008 09:13:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42562 invoked by uid 500); 24 Dec 2008 09:13:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42551 invoked by uid 99); 24 Dec 2008 09:13:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 01:13:51 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of amar.sannaik@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 09:13:42 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1570012wag.5
        for <java-user@lucene.apache.org>; Wed, 24 Dec 2008 01:13:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Af6hC9acLv9IhFUv1ry78EfW3KkROWe22cX5xCr1IoA=;
        b=sJWfYszAcKV8gSsrH3ktEvJuhsxSg96ShIaGdMbFzxf2HKyHdGxHYvROjnru+ztSNl
         gx3Jhw/yG0DZep4gSSDfK0cYe4FHkkUf+ukIb5hv2GD2p8ULZNb09Hq2E1PuJ08dQmig
         vMhzB8Wpcb9Rd2IgvIkj/xrfN7JZV2XWG8QPc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pBcetvcEJp6/8te2r8HOkSX3/iDCjsD5d6fZ73lZHLOE+n84VtjWfD/gMnxlPJp0wk
         MOBkavGTnQuKXpOf9VaqVRFZZd8I1D3Z99eQzPO8kkYsntL3rqkUsNRj3/euGC9ASkHl
         YF23nFGORNZSi8VnmkSqOtVS57AVY94iZCjPY=
Received: by 10.114.194.1 with SMTP id r1mr5381452waf.149.1230110000902;
        Wed, 24 Dec 2008 01:13:20 -0800 (PST)
Received: by 10.114.155.4 with HTTP; Wed, 24 Dec 2008 01:13:20 -0800 (PST)
Message-ID: <dcac67550812240113s6b184913h66b31925acbe7c6f@mail.gmail.com>
Date: Wed, 24 Dec 2008 14:43:20 +0530
From: amar.sannaik@gmail.com
To: java-user@lucene.apache.org
Subject: Fwd: Lucene search problem
In-Reply-To: <dcac67550812232203n4bb64206u753d75a94e216dc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76558_21440538.1230110000901"
References: <dcac67550812220511j1e353eabs5a536fcb3e06a7d1@mail.gmail.com>
	 <359a92830812220558u48cb90eci9b731ee7b79e691@mail.gmail.com>
	 <50984.86344.qm@web50711.mail.re2.yahoo.com>
	 <dcac67550812230036k2e4df811w4055f4b9931463fc@mail.gmail.com>
	 <359a92830812230635x6b1ea9bdi855bf4c7bc3e3c50@mail.gmail.com>
	 <dcac67550812232203n4bb64206u753d75a94e216dc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_76558_21440538.1230110000901
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Erick,

ah I got the problem solved :). here is how I changed my recipe object to be

class Recipe {
@DocumentId
Integer id;
@Field(index = Index.TOKENIZED, name="chainName")
@FieldBridge(impl= ChainFieldBridge.class)
Chain chain;
}

Here what I am trying to do is, save object to be as index field and there
is bridge to cross and bridge take care of how it should be indexed.

here is code snippet from my bridge

public void set(String pName, Object pValue, Document pDocument, Store
pStore,
            Index pIndex, Float pArg5) {
        Field lField = null;
        if(null == pValue) {
            lField = new Field(pName,"nullnull",pStore, pIndex);
            pDocument.add(lField);
        } else {
            Chain lChain = (Chain)pValue;
            lField = new Field(pName,lChain.getName(),pStore, pIndex);
            pDocument.add(lField);
        }
    }

so here, where chain object is null I am saving the value to be "nullnull".
The query I would use to retrieve what is null looks like
"chainName:nulllnull".

This solve everything I was looking for.

Thanks,
-Amar
---------- Forwarded message ----------
From: <amar.sannaik@gmail.com>
Date: Wed, Dec 24, 2008 at 11:33 AM
Subject: Re: Lucene search problem
To: java-user@lucene.apache.org


hi Erick,

I agree lucene do not index the object. in the following example I have
quoted fields are indexed as chain.chainName.
I am able to retrieve recipe objects using FullTextQuery as
"chain.chainName:something' ... question is in somecase chain itself is
null.
I can be able to achieve required as below:

class Recipe {
  @DocumentId
  Integer id;
  @IndexedEmbedded
  Chain chain = new Chain();
  //gettter and setter
}

 class Chain {
  @DocumentId
  Integer id;
  @Field(index = Index.TOKENIZED, name="chainName")
  String name = "NULLNULNUL";
  //getter and setter
 }

so this means to always there is will be chain along with Recipe object with
has default name to "NULLNULNUL" and that wil be indexed..
We dont want to do that, Recipe is our persistence object and we hate to do
that.

-Amar


On Tue, Dec 23, 2008 at 8:05 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> How do you intend to index these? Lucene will not
> index objects for you. You have to break the object
> down into a series of fields. At that point you can
> substitute whatever you want.
>
> Best
> Erick
>
> On Tue, Dec 23, 2008 at 3:36 AM, <amar.sannaik@gmail.com> wrote:
>
> > Hi Aaron Schon/EricK,
> >
> > That really make sense to me but it really seems easy if is the string
> > object. See the object structure I have it below hopefully that gives you
> > some idea
> >
> > class Recipe {
> > @DocumentId
> > Integer id;
> > @IndexedEmbedded
> > Chain chain;
> > //gettter and setter
> > }
> >
> > class Chain {
> > @DocumentId
> > Integer id;
> > @Field(index = Index.TOKENIZED, name="chainName")
> > String name;
> > //getter and setter
> > }
> >
> > I am creating index on the recipe object. and for some recipe.m_chain
> would
> > be null. So can you tell me how do I assign the value "NULLNULNULLNULL"
> for
> > object chain in recipe.
> >
> > I also was thinking if #FieldBridge help me this way. My plan was to have
> > default value where chain is null as you mentioned. but it does not seems
> > to
> > work for null values.
> >
> > Please suggest
> >
> > Thanks in advance.
> > -Amar
> >
> > On Tue, Dec 23, 2008 at 12:04 AM, Aaron Schon <aaron_schon@yahoo.com>
> > wrote:
> >
> > > I would second Erick's recommendation - create an arbitrary
> > representation
> > > for NULL such as "NULL" (if you are certain the term "NULL" does not
> > occur
> > > in actual docs. Alternatively, use "NULLNULNULLNULL" or something to
> that
> > > effect.
> > >
> > >
> > >
> > > ----- Original Message ----
> > > From: Erick Erickson <erickerickson@gmail.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Monday, December 22, 2008 8:58:21 AM
> > > Subject: Re: Lucene search problem
> > >
> > > Try searching the mailing list archives for a fuller discussion, but
> > > the short answer is usually to index an unique value for your
> > > "null" entries, then search on that, something totally
> > > outrageous like, say AAABBBCCCDDDEEEFFF.
> > >
> > > Alternatively, you could create, at startup time, a
> > > Filter of all the docs that *do* contain terms for the
> > > field in question, flip the bits and use the Filter in your
> > > searches. (Hint: see TermDocs/TermEnum)
> > >
> > > Best
> > > Erick
> > >
> > > On Mon, Dec 22, 2008 at 8:11 AM, <amar.sannaik@gmail.com> wrote:
> > >
> > > > Hi,
> > > >
> > > > I have problem with lucene search, I am quite new to this. Can some
> > body
> > > > help or just push me to who can please.
> > > >
> > > > Problem what I am facing we need search for object whose attribute
> > > "chain"
> > > > contaning null, but lucene does not help indexing the null values..
> > > >
> > > > how can I achieve this, or please guide me the alternative way of
> doing
> > > > this.
> > > >
> > > > Thanks in advance.
> > > > -Amar
> > > >
> > >
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Amar Sannaik | Programmer | ATHARVA LIBSON Software Pvt Ltd.,
> > # 9886476270, amarsannaik@atharvalibson.com
> >
>



-- 
Amar Sannaik | Programmer | ATHARVA LIBSON Software Pvt Ltd.,
# 9886476270, amarsannaik@atharvalibson.com



-- 
Amar Sannaik | Senior Engineer

------=_Part_76558_21440538.1230110000901--

From java-user-return-37924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 10:08:13 2008
Return-Path: <java-user-return-37924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90300 invoked from network); 24 Dec 2008 10:08:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 10:08:12 -0000
Received: (qmail 75241 invoked by uid 500); 24 Dec 2008 10:08:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75205 invoked by uid 500); 24 Dec 2008 10:08:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75193 invoked by uid 99); 24 Dec 2008 10:08:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 02:08:04 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [62.73.241.54] (HELO pebbles.fastcom.no) (62.73.241.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 10:07:54 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by pebbles.fastcom.no (Postfix) with ESMTP id A2A288EC9
	for <java-user@lucene.apache.org>; Wed, 24 Dec 2008 11:07:23 +0100 (NFT)
Date: Wed, 24 Dec 2008 11:07:27 +0100
To: java-user@lucene.apache.org
Subject: Re: Fwd: Lucene search problem
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <dcac67550812220511j1e353eabs5a536fcb3e06a7d1@mail.gmail.com>
 <359a92830812220558u48cb90eci9b731ee7b79e691@mail.gmail.com>
 <50984.86344.qm@web50711.mail.re2.yahoo.com>
 <dcac67550812230036k2e4df811w4055f4b9931463fc@mail.gmail.com>
 <359a92830812230635x6b1ea9bdi855bf4c7bc3e3c50@mail.gmail.com>
 <dcac67550812232203n4bb64206u753d75a94e216dc@mail.gmail.com>
 <dcac67550812240113s6b184913h66b31925acbe7c6f@mail.gmail.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.umnvqpj5oftp72@melkor>
In-Reply-To: <dcac67550812240113s6b184913h66b31925acbe7c6f@mail.gmail.com>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Amar,
the reason why people got confused from your questions is that you are  
using Hibernate Search (which is built on top of Lucene and Hibernate) to  
persist objects from your DB to lucene. So, you should really ask such  
questions on the hibernate mailing list since the indexing logic has  
nothing at all to do with Lucene (since you are using annotations).
If you were to use Lucene directly, you would read values from you DB  
(possibly into you Entity Bean), then transform values into fields and  
index with IndexWriter. This is where Erick mentions that you could just  
do something like
if(recipe.getChain == null) {
  //add field with value = "NULLNULLNULL"
}else{
  ...
  // add value that we get from the chain object.
}


cheers,
  Aleks

On Wed, 24 Dec 2008 10:13:20 +0100, <amar.sannaik@gmail.com> wrote:

> Hello Erick,
>
> ah I got the problem solved :). here is how I changed my recipe object  
> to be
>
> class Recipe {
> @DocumentId
> Integer id;
> @Field(index = Index.TOKENIZED, name="chainName")
> @FieldBridge(impl= ChainFieldBridge.class)
> Chain chain;
> }
>
> Here what I am trying to do is, save object to be as index field and  
> there
> is bridge to cross and bridge take care of how it should be indexed.
>
> here is code snippet from my bridge
>
> public void set(String pName, Object pValue, Document pDocument, Store
> pStore,
>             Index pIndex, Float pArg5) {
>         Field lField = null;
>         if(null == pValue) {
>             lField = new Field(pName,"nullnull",pStore, pIndex);
>             pDocument.add(lField);
>         } else {
>             Chain lChain = (Chain)pValue;
>             lField = new Field(pName,lChain.getName(),pStore, pIndex);
>             pDocument.add(lField);
>         }
>     }
>
> so here, where chain object is null I am saving the value to be  
> "nullnull".
> The query I would use to retrieve what is null looks like
> "chainName:nulllnull".
>
> This solve everything I was looking for.
>
> Thanks,
> -Amar
> ---------- Forwarded message ----------
> From: <amar.sannaik@gmail.com>
> Date: Wed, Dec 24, 2008 at 11:33 AM
> Subject: Re: Lucene search problem
> To: java-user@lucene.apache.org
>
>
> hi Erick,
>
> I agree lucene do not index the object. in the following example I have
> quoted fields are indexed as chain.chainName.
> I am able to retrieve recipe objects using FullTextQuery as
> "chain.chainName:something' ... question is in somecase chain itself is
> null.
> I can be able to achieve required as below:
>
> class Recipe {
>   @DocumentId
>   Integer id;
>   @IndexedEmbedded
>   Chain chain = new Chain();
>   //gettter and setter
> }
>
>  class Chain {
>   @DocumentId
>   Integer id;
>   @Field(index = Index.TOKENIZED, name="chainName")
>   String name = "NULLNULNUL";
>   //getter and setter
>  }
>
> so this means to always there is will be chain along with Recipe object  
> with
> has default name to "NULLNULNUL" and that wil be indexed..
> We dont want to do that, Recipe is our persistence object and we hate to  
> do
> that.
>
> -Amar
>
>
> On Tue, Dec 23, 2008 at 8:05 PM, Erick Erickson  
> <erickerickson@gmail.com>wrote:
>
>> How do you intend to index these? Lucene will not
>> index objects for you. You have to break the object
>> down into a series of fields. At that point you can
>> substitute whatever you want.
>>
>> Best
>> Erick
>>
>> On Tue, Dec 23, 2008 at 3:36 AM, <amar.sannaik@gmail.com> wrote:
>>
>> > Hi Aaron Schon/EricK,
>> >
>> > That really make sense to me but it really seems easy if is the string
>> > object. See the object structure I have it below hopefully that gives  
>> you
>> > some idea
>> >
>> > class Recipe {
>> > @DocumentId
>> > Integer id;
>> > @IndexedEmbedded
>> > Chain chain;
>> > //gettter and setter
>> > }
>> >
>> > class Chain {
>> > @DocumentId
>> > Integer id;
>> > @Field(index = Index.TOKENIZED, name="chainName")
>> > String name;
>> > //getter and setter
>> > }
>> >
>> > I am creating index on the recipe object. and for some recipe.m_chain
>> would
>> > be null. So can you tell me how do I assign the value  
>> "NULLNULNULLNULL"
>> for
>> > object chain in recipe.
>> >
>> > I also was thinking if #FieldBridge help me this way. My plan was to  
>> have
>> > default value where chain is null as you mentioned. but it does not  
>> seems
>> > to
>> > work for null values.
>> >
>> > Please suggest
>> >
>> > Thanks in advance.
>> > -Amar
>> >
>> > On Tue, Dec 23, 2008 at 12:04 AM, Aaron Schon <aaron_schon@yahoo.com>
>> > wrote:
>> >
>> > > I would second Erick's recommendation - create an arbitrary
>> > representation
>> > > for NULL such as "NULL" (if you are certain the term "NULL" does not
>> > occur
>> > > in actual docs. Alternatively, use "NULLNULNULLNULL" or something to
>> that
>> > > effect.
>> > >
>> > >
>> > >
>> > > ----- Original Message ----
>> > > From: Erick Erickson <erickerickson@gmail.com>
>> > > To: java-user@lucene.apache.org
>> > > Sent: Monday, December 22, 2008 8:58:21 AM
>> > > Subject: Re: Lucene search problem
>> > >
>> > > Try searching the mailing list archives for a fuller discussion, but
>> > > the short answer is usually to index an unique value for your
>> > > "null" entries, then search on that, something totally
>> > > outrageous like, say AAABBBCCCDDDEEEFFF.
>> > >
>> > > Alternatively, you could create, at startup time, a
>> > > Filter of all the docs that *do* contain terms for the
>> > > field in question, flip the bits and use the Filter in your
>> > > searches. (Hint: see TermDocs/TermEnum)
>> > >
>> > > Best
>> > > Erick
>> > >
>> > > On Mon, Dec 22, 2008 at 8:11 AM, <amar.sannaik@gmail.com> wrote:
>> > >
>> > > > Hi,
>> > > >
>> > > > I have problem with lucene search, I am quite new to this. Can  
>> some
>> > body
>> > > > help or just push me to who can please.
>> > > >
>> > > > Problem what I am facing we need search for object whose attribute
>> > > "chain"
>> > > > contaning null, but lucene does not help indexing the null  
>> values..
>> > > >
>> > > > how can I achieve this, or please guide me the alternative way of
>> doing
>> > > > this.
>> > > >
>> > > > Thanks in advance.
>> > > > -Amar
>> > > >
>> > >
>> > >
>> > >
>> > >
>> > >
>> > >  
>> ---------------------------------------------------------------------
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> >
>> > --
>> > Amar Sannaik | Programmer | ATHARVA LIBSON Software Pvt Ltd.,
>> > # 9886476270, amarsannaik@atharvalibson.com
>> >
>>
>
>
>



-- 
Aleksander M. Stensby
Senior software developer
Integrasco A/S
www.integrasco.no

Please consider the environment before printing all or any of this e-mail

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 10:20:52 2008
Return-Path: <java-user-return-37925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98148 invoked from network); 24 Dec 2008 10:20:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 10:20:52 -0000
Received: (qmail 90595 invoked by uid 500); 24 Dec 2008 10:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90567 invoked by uid 500); 24 Dec 2008 10:20:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90556 invoked by uid 99); 24 Dec 2008 10:20:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 02:20:44 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of amar.sannaik@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 10:20:34 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3592488rvb.5
        for <java-user@lucene.apache.org>; Wed, 24 Dec 2008 02:20:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Rp6+e4+bjvS1DOccQ/CLWlc6zHimRyBx++RaMVe7r7c=;
        b=MCnLGseJ2Vg6oyGYaBL/q9QnfTFQlJVqgPK1NeMdT38ANlofGZJB7QenIr1AeipL1+
         /+APSF7DU8d9QNGa5v4GfEA6t/Up+OUGErceDgYWy5+VX93ZfOQ7UXxaJVlplKDTvw/N
         1KkMKkU3R4+1KqBi3FvydgljTw7EV9p3JAHT8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=xNIMj4yhPp1WuIyFTrxgg6tEsseZ+g8O6BGS5Blr2hlrgxUYYDfNBQqV/krFY+tutP
         Z3gLM+kDAWhT9g5Qf8HhkXBtmOg8r7KioU6S54pNOvpr88w7Qy2n4Livb5rTaZCfekb5
         AOyoiqLzTIFIofurgW0eQrEXKuB1o7xr1YN1s=
Received: by 10.114.72.1 with SMTP id u1mr5420334waa.39.1230114011761;
        Wed, 24 Dec 2008 02:20:11 -0800 (PST)
Received: by 10.114.155.4 with HTTP; Wed, 24 Dec 2008 02:20:11 -0800 (PST)
Message-ID: <dcac67550812240220o38547c4ftfbec924260bc7177@mail.gmail.com>
Date: Wed, 24 Dec 2008 15:50:11 +0530
From: amar.sannaik@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Fwd: Lucene search problem
In-Reply-To: <op.umnvqpj5oftp72@melkor>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76913_22367698.1230114011761"
References: <dcac67550812220511j1e353eabs5a536fcb3e06a7d1@mail.gmail.com>
	 <359a92830812220558u48cb90eci9b731ee7b79e691@mail.gmail.com>
	 <50984.86344.qm@web50711.mail.re2.yahoo.com>
	 <dcac67550812230036k2e4df811w4055f4b9931463fc@mail.gmail.com>
	 <359a92830812230635x6b1ea9bdi855bf4c7bc3e3c50@mail.gmail.com>
	 <dcac67550812232203n4bb64206u753d75a94e216dc@mail.gmail.com>
	 <dcac67550812240113s6b184913h66b31925acbe7c6f@mail.gmail.com>
	 <op.umnvqpj5oftp72@melkor>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_76913_22367698.1230114011761
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Aleks

Yep, sorry think I was at wrong window :) .. I really have got things solved
now.

Thanks
-Amar

On Wed, Dec 24, 2008 at 3:37 PM, Aleksander M. Stensby <
aleksander.stensby@integrasco.no> wrote:

> Hello Amar,
> the reason why people got confused from your questions is that you are
> using Hibernate Search (which is built on top of Lucene and Hibernate) to
> persist objects from your DB to lucene. So, you should really ask such
> questions on the hibernate mailing list since the indexing logic has nothing
> at all to do with Lucene (since you are using annotations).
> If you were to use Lucene directly, you would read values from you DB
> (possibly into you Entity Bean), then transform values into fields and index
> with IndexWriter. This is where Erick mentions that you could just do
> something like
> if(recipe.getChain == null) {
>  //add field with value = "NULLNULLNULL"
> }else{
>  ...
>  // add value that we get from the chain object.
> }
>
>
> cheers,
>  Aleks
>
>
> On Wed, 24 Dec 2008 10:13:20 +0100, <amar.sannaik@gmail.com> wrote:
>
>  Hello Erick,
>>
>> ah I got the problem solved :). here is how I changed my recipe object to
>> be
>>
>> class Recipe {
>> @DocumentId
>> Integer id;
>> @Field(index = Index.TOKENIZED, name="chainName")
>> @FieldBridge(impl= ChainFieldBridge.class)
>> Chain chain;
>> }
>>
>> Here what I am trying to do is, save object to be as index field and there
>> is bridge to cross and bridge take care of how it should be indexed.
>>
>> here is code snippet from my bridge
>>
>> public void set(String pName, Object pValue, Document pDocument, Store
>> pStore,
>>            Index pIndex, Float pArg5) {
>>        Field lField = null;
>>        if(null == pValue) {
>>            lField = new Field(pName,"nullnull",pStore, pIndex);
>>            pDocument.add(lField);
>>        } else {
>>            Chain lChain = (Chain)pValue;
>>            lField = new Field(pName,lChain.getName(),pStore, pIndex);
>>            pDocument.add(lField);
>>        }
>>    }
>>
>> so here, where chain object is null I am saving the value to be
>> "nullnull".
>> The query I would use to retrieve what is null looks like
>> "chainName:nulllnull".
>>
>> This solve everything I was looking for.
>>
>> Thanks,
>> -Amar
>> ---------- Forwarded message ----------
>> From: <amar.sannaik@gmail.com>
>> Date: Wed, Dec 24, 2008 at 11:33 AM
>> Subject: Re: Lucene search problem
>> To: java-user@lucene.apache.org
>>
>>
>> hi Erick,
>>
>> I agree lucene do not index the object. in the following example I have
>> quoted fields are indexed as chain.chainName.
>> I am able to retrieve recipe objects using FullTextQuery as
>> "chain.chainName:something' ... question is in somecase chain itself is
>> null.
>> I can be able to achieve required as below:
>>
>> class Recipe {
>>  @DocumentId
>>  Integer id;
>>  @IndexedEmbedded
>>  Chain chain = new Chain();
>>  //gettter and setter
>> }
>>
>>  class Chain {
>>  @DocumentId
>>  Integer id;
>>  @Field(index = Index.TOKENIZED, name="chainName")
>>  String name = "NULLNULNUL";
>>  //getter and setter
>>  }
>>
>> so this means to always there is will be chain along with Recipe object
>> with
>> has default name to "NULLNULNUL" and that wil be indexed..
>> We dont want to do that, Recipe is our persistence object and we hate to
>> do
>> that.
>>
>> -Amar
>>
>>
>> On Tue, Dec 23, 2008 at 8:05 PM, Erick Erickson <erickerickson@gmail.com
>> >wrote:
>>
>>  How do you intend to index these? Lucene will not
>>> index objects for you. You have to break the object
>>> down into a series of fields. At that point you can
>>> substitute whatever you want.
>>>
>>> Best
>>> Erick
>>>
>>> On Tue, Dec 23, 2008 at 3:36 AM, <amar.sannaik@gmail.com> wrote:
>>>
>>> > Hi Aaron Schon/EricK,
>>> >
>>> > That really make sense to me but it really seems easy if is the string
>>> > object. See the object structure I have it below hopefully that gives
>>> you
>>> > some idea
>>> >
>>> > class Recipe {
>>> > @DocumentId
>>> > Integer id;
>>> > @IndexedEmbedded
>>> > Chain chain;
>>> > //gettter and setter
>>> > }
>>> >
>>> > class Chain {
>>> > @DocumentId
>>> > Integer id;
>>> > @Field(index = Index.TOKENIZED, name="chainName")
>>> > String name;
>>> > //getter and setter
>>> > }
>>> >
>>> > I am creating index on the recipe object. and for some recipe.m_chain
>>> would
>>> > be null. So can you tell me how do I assign the value "NULLNULNULLNULL"
>>> for
>>> > object chain in recipe.
>>> >
>>> > I also was thinking if #FieldBridge help me this way. My plan was to
>>> have
>>> > default value where chain is null as you mentioned. but it does not
>>> seems
>>> > to
>>> > work for null values.
>>> >
>>> > Please suggest
>>> >
>>> > Thanks in advance.
>>> > -Amar
>>> >
>>> > On Tue, Dec 23, 2008 at 12:04 AM, Aaron Schon <aaron_schon@yahoo.com>
>>> > wrote:
>>> >
>>> > > I would second Erick's recommendation - create an arbitrary
>>> > representation
>>> > > for NULL such as "NULL" (if you are certain the term "NULL" does not
>>> > occur
>>> > > in actual docs. Alternatively, use "NULLNULNULLNULL" or something to
>>> that
>>> > > effect.
>>> > >
>>> > >
>>> > >
>>> > > ----- Original Message ----
>>> > > From: Erick Erickson <erickerickson@gmail.com>
>>> > > To: java-user@lucene.apache.org
>>> > > Sent: Monday, December 22, 2008 8:58:21 AM
>>> > > Subject: Re: Lucene search problem
>>> > >
>>> > > Try searching the mailing list archives for a fuller discussion, but
>>> > > the short answer is usually to index an unique value for your
>>> > > "null" entries, then search on that, something totally
>>> > > outrageous like, say AAABBBCCCDDDEEEFFF.
>>> > >
>>> > > Alternatively, you could create, at startup time, a
>>> > > Filter of all the docs that *do* contain terms for the
>>> > > field in question, flip the bits and use the Filter in your
>>> > > searches. (Hint: see TermDocs/TermEnum)
>>> > >
>>> > > Best
>>> > > Erick
>>> > >
>>> > > On Mon, Dec 22, 2008 at 8:11 AM, <amar.sannaik@gmail.com> wrote:
>>> > >
>>> > > > Hi,
>>> > > >
>>> > > > I have problem with lucene search, I am quite new to this. Can some
>>> > body
>>> > > > help or just push me to who can please.
>>> > > >
>>> > > > Problem what I am facing we need search for object whose attribute
>>> > > "chain"
>>> > > > contaning null, but lucene does not help indexing the null values..
>>> > > >
>>> > > > how can I achieve this, or please guide me the alternative way of
>>> doing
>>> > > > this.
>>> > > >
>>> > > > Thanks in advance.
>>> > > > -Amar
>>> > > >
>>> > >
>>> > >
>>> > >
>>> > >
>>> > >
>>> > > ---------------------------------------------------------------------
>>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> > >
>>> > >
>>> >
>>> >
>>> > --
>>> > Amar Sannaik | Programmer | ATHARVA LIBSON Software Pvt Ltd.,
>>> > # 9886476270, amarsannaik@atharvalibson.com
>>> >
>>>
>>>
>>
>>
>>
>
>
> --
> Aleksander M. Stensby
> Senior software developer
> Integrasco A/S
> www.integrasco.no
>
> Please consider the environment before printing all or any of this e-mail
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_76913_22367698.1230114011761--

From java-user-return-37926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 13:20:10 2008
Return-Path: <java-user-return-37926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56794 invoked from network); 24 Dec 2008 13:20:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 13:20:10 -0000
Received: (qmail 3038 invoked by uid 500); 24 Dec 2008 13:20:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3013 invoked by uid 500); 24 Dec 2008 13:20:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3000 invoked by uid 99); 24 Dec 2008 13:20:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 05:20:02 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [98.136.44.188] (HELO n55.bullet.mail.sp1.yahoo.com) (98.136.44.188)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Dec 2008 13:19:52 +0000
Received: from [216.252.122.218] by n55.bullet.mail.sp1.yahoo.com with NNFMP; 24 Dec 2008 13:19:31 -0000
Received: from [67.195.9.83] by t3.bullet.sp1.yahoo.com with NNFMP; 24 Dec 2008 13:19:31 -0000
Received: from [67.195.9.106] by t3.bullet.mail.gq1.yahoo.com with NNFMP; 24 Dec 2008 13:19:31 -0000
Received: from [127.0.0.1] by omp110.mail.gq1.yahoo.com with NNFMP; 24 Dec 2008 13:19:31 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 135059.71770.bm@omp110.mail.gq1.yahoo.com
Received: (qmail 98934 invoked by uid 60001); 24 Dec 2008 13:19:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=ymail.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=W/SujR41e0X1us4iermAcB3A7h5qyGh1eWg9+0yYnIFq3oYgzwUMnfV7RF2NCtblYKK1SQsGbyYkJ4/Mj02UpMY3aQ6BLcedjJwcW4qkIDeg5M4tL+89SZPRelGWipmekLnSOMYOEZxi1LcNwUL104OR7cvRapQUdSvRXCuJGcs=;
X-YMail-OSG: N_zWIqsVM1kL5V3VxttU0MAbCq3_6EN9oW0xI2YBO4LmNuCXjeJPejbRRlg.BA_pDBVDMO4x5gxoPgZxN6aEFh6w..IH1nFp2uwkvDUz94jh0_6k6scBB8GwEWOK.WaiJOr_sCB7LUL2dK743irJ_u1MlfW5HVmVHwdWdajyvx_jNoG4qgywmXj9HUTKDhZkXWc7U4NI7s82nFe4AFEgrUryWWMgZELmWtv9
Received: from [217.205.40.94] by web112210.mail.gq1.yahoo.com via HTTP; Wed, 24 Dec 2008 05:19:30 PST
X-Mailer: YahooMailRC/1156.77 YahooMailWebService/0.7.260.1
References: <355058.69393.qm@web112205.mail.gq1.yahoo.com> <13D027DC-BBF9-40E9-A10C-D946821AE59A@mikemccandless.com> <734386.88697.qm@web26003.mail.ukl.yahoo.com> <739457.19219.qm@web112206.mail.gq1.yahoo.com> <49511D56.7030006@gmail.com> <49511F0A.1040909@gmail.com>
Date: Wed, 24 Dec 2008 05:19:30 -0800 (PST)
From: Lebiram <lebiram@ymail.com>
Subject: Re: Optimize and Out Of Memory Errors
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1880084652-1230124770=:98805"
Message-ID: <962651.98805.qm@web112210.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1880084652-1230124770=:98805
Content-Type: text/plain; charset=us-ascii

Is there away to not factor in norms data in scoring somehow?

I'm just stumped as to how Luke is able to do a seach (with limit) on the docs but in my code it just dies with OutOfMemory errors.
How does Luke not allocate these norms?




________________________________
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, December 23, 2008 5:25:30 PM
Subject: Re: Optimize and Out Of Memory Errors

Mark Miller wrote:
> Lebiram wrote:
>> Also, what are norms 
> Norms are a byte value per field stored in the index that is factored into the score. Its used for length normalization (shorter documents = more important) and index time boosting. If you want either of those, you need norms. When norms are loaded up into an IndexReader, its loaded into a byte[maxdoc] array for each field - so even if one document out of 400 million has a field, its still going to load byte[maxdoc] for that field (so a lot of wasted RAM).  Did you say you had 400 million docs and 7 fields? Google says that would be:
> 
> 
>    **400 million x 7 byte = 2 670.28809 megabytes**
> 
> On top of your other RAM usage.
Just to avoid confusion, that should really read a byte per document per field. If I remember right, it gives 255 boost possibilities, limited to 25 with length normalization.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-1880084652-1230124770=:98805--


From java-user-return-37927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 13:35:50 2008
Return-Path: <java-user-return-37927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64737 invoked from network); 24 Dec 2008 13:35:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 13:35:50 -0000
Received: (qmail 17747 invoked by uid 500); 24 Dec 2008 13:35:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17706 invoked by uid 500); 24 Dec 2008 13:35:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17695 invoked by uid 99); 24 Dec 2008 13:35:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 05:35:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 13:35:35 +0000
Received: by bwz9 with SMTP id 9so8373898bwz.5
        for <java-user@lucene.apache.org>; Wed, 24 Dec 2008 05:35:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=E5LJ//MZY9rTLu9pLJboagd81C1YvL94ti7m2N41IjE=;
        b=hdT5FCHxRU18ogdl7YuhtkJOU/jnLQ0FkeZq38lRBy+gMeemwvW35kp3aiM6nmSIOm
         Zr1Fv4VNVv5GZ7rUY3VTQtyKh66ECYytSFlgkfjshNzgwGf7hUiz3wF1lsDXc0anvEjZ
         XQB8isxDRVB6xBeWn3/6oQC+VzZbFOlUynK/k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=selL74rDPxsKa+xWWqreDZ3GH505+0RKXHIVNmKllMrF9b3n3dCmCw2eD2iMrugKeK
         WaD2Ws3qzrT2/uFZfeXIWFjNTWSCFbmn2nPz+nQty8qnBLdhZS4Sgme9I1DpldECbFGQ
         Z3mz74N46C/8CTtFx3m6rCQeSXQtpnF7EAimM=
Received: by 10.181.215.9 with SMTP id s9mr3142999bkq.212.1230125715087;
        Wed, 24 Dec 2008 05:35:15 -0800 (PST)
Received: by 10.180.210.11 with HTTP; Wed, 24 Dec 2008 05:35:15 -0800 (PST)
Message-ID: <5d53d5770812240535v545e40f4ya0476bafb446a1d8@mail.gmail.com>
Date: Wed, 24 Dec 2008 09:35:15 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Get DocID after Document insert?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11674_12722946.1230125715076"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11674_12722946.1230125715076
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am building up an index with documents that are hierarchical in their
relationship to each other. After I insert a Document into the index, how do
I know its document ID? I need that to pass to the next document as the
"ParentID"
Ian

------=_Part_11674_12722946.1230125715076--

From java-user-return-37928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 14:00:20 2008
Return-Path: <java-user-return-37928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77134 invoked from network); 24 Dec 2008 14:00:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 14:00:20 -0000
Received: (qmail 33344 invoked by uid 500); 24 Dec 2008 14:00:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33311 invoked by uid 500); 24 Dec 2008 14:00:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33300 invoked by uid 99); 24 Dec 2008 14:00:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 06:00:12 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 14:00:04 +0000
Received: by yx-out-2324.google.com with SMTP id 3so943957yxj.5
        for <java-user@lucene.apache.org>; Wed, 24 Dec 2008 05:59:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ZmKXscLbnWEXZDXYwOHbQHwDamF9NJ6xoWTRHEMlXxA=;
        b=f3XmBiDxXzH0DALxqVh+4AHRtbDh0e/UI5OXl6p/BBt5gvyXOx8gBASI5QPABZRK4I
         V7OHDjPHO3uLY1CxA+dru8LHcIb5BdTcSJb9d+fdJt6+cagVLBgKKPuiZHxCQxb+PWlq
         0v8p6Ned2IItfSe8pzrTTvwu7iyonzhvIxzh0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=BelWrKRbL0wBSqWYWFQdNm1Zj6vxeFobc0IVU/yJniTebny9u2b6zeKuFiWuuaOmTP
         aeNktfENSde5ACo13iJwa9vuOLroEtgwEfja8f3tTXCgvDoUH8qf3PFB5u6k1JLxG1bP
         0eA6BWHH3LNy2CtV15k11p6bAJ5/HeSBGNGUk=
Received: by 10.90.49.8 with SMTP id w8mr4471198agw.85.1230127183591;
        Wed, 24 Dec 2008 05:59:43 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Wed, 24 Dec 2008 05:59:43 -0800 (PST)
Message-ID: <359a92830812240559r23cdf723ufa3c6642f622724e@mail.gmail.com>
Date: Wed, 24 Dec 2008 08:59:43 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get DocID after Document insert?
In-Reply-To: <5d53d5770812240535v545e40f4ya0476bafb446a1d8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95023_29734697.1230127183580"
References: <5d53d5770812240535v545e40f4ya0476bafb446a1d8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95023_29734697.1230127183580
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You're really, really playing with fire here. Your document IDs may
change, and in fact *will* change if you delete a document and
then optimize. Say you index 100 docs, delete number 50 and
optimize. Documents that originally had IDs 51-100 will now have
IDs 50-99 and your hierarchy will be messed up.

And saying "I'll never delete and then optimize" is just asking for
trouble <G>...

So just make your own ID that don't change and use *that* to
maintain your hierarchy. You can get at these pretty efficiently with
TermDocs/TermEnum and could, say at startup, read your unique
IDs into a map along with their current Lucene ID if you really care
that much about speed. This could just be a simple counter and
you could find the maximum one currently in your index when you
needed to add more documents to the index using the methods
I mentioned.

Best
Erick

On Wed, Dec 24, 2008 at 8:35 AM, Ian Vink <ianvink@gmail.com> wrote:

> I am building up an index with documents that are hierarchical in their
> relationship to each other. After I insert a Document into the index, how
> do
> I know its document ID? I need that to pass to the next document as the
> "ParentID"
> Ian
>

------=_Part_95023_29734697.1230127183580--

From java-user-return-37929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 14:21:10 2008
Return-Path: <java-user-return-37929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86905 invoked from network); 24 Dec 2008 14:21:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 14:21:10 -0000
Received: (qmail 46865 invoked by uid 500); 24 Dec 2008 14:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46814 invoked by uid 500); 24 Dec 2008 14:20:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46801 invoked by uid 99); 24 Dec 2008 14:20:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 06:20:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 14:20:45 +0000
Received: by rn-out-0910.google.com with SMTP id j71so2158262rne.4
        for <java-user@lucene.apache.org>; Wed, 24 Dec 2008 06:20:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=8/DzDTnjnYcwAitVg3npbHQnSOpJhWOqtvqjyykqaY8=;
        b=dLj+Z+s2gdghvSXKFZeBjsQum8bqbzPzxeayCFkwVW7LyIbMbhL7xN4OBtLKDtnVaF
         7uGJU8c3flGV9z/m9of9d78eMuIYp8pnxpO+TIYBddwXKkIn5IYv1ixhOkKmymyASgni
         NLFp+BXU5UHH5Cx5x5XLWUaSyQriIxHV//rvc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Wir0m3vyez/ygy263HHUsBveoSDWDQHTBdQzYYEw0kkkuexrY5Mu1UPlj4IpLCmpKp
         lsKrECT/RWhoGp4yPuC5m6t7/JBAd7hCiN4HpdWqLwO8D6TDORc2TiTD9DqHSmxl4WZH
         E6wjEZRdEqbtLCnkmV5v5CsKSHTy+NPZXPiOE=
Received: by 10.90.120.19 with SMTP id s19mr4498609agc.17.1230128424783;
        Wed, 24 Dec 2008 06:20:24 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 6sm28092241agd.37.2008.12.24.06.20.23
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 24 Dec 2008 06:20:24 -0800 (PST)
Message-ID: <49524527.40400@gmail.com>
Date: Wed, 24 Dec 2008 09:20:23 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Optimize and Out Of Memory Errors
References: <355058.69393.qm@web112205.mail.gq1.yahoo.com> <13D027DC-BBF9-40E9-A10C-D946821AE59A@mikemccandless.com> <734386.88697.qm@web26003.mail.ukl.yahoo.com> <739457.19219.qm@web112206.mail.gq1.yahoo.com> <49511D56.7030006@gmail.com> <49511F0A.1040909@gmail.com> <962651.98805.qm@web112210.mail.gq1.yahoo.com>
In-Reply-To: <962651.98805.qm@web112210.mail.gq1.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

We don't know those norms are "the" problem. Luke is loading norms if 
its searching that index. But what else is Luke doing? What else is your 
App doing? I suspect your app requires more RAM than Luke? How much RAM 
do you have and much are you allocating to the JVM?

The norms are not necessarily the problem you have to solve - but it 
would appear they are taking up over 2 gig of memory. Unless you have 
some to spare (and it sounds like you may not), it could be a good idea 
to turn them off for particular fields.

- Mark

Lebiram wrote:
> Is there away to not factor in norms data in scoring somehow?
>
> I'm just stumped as to how Luke is able to do a seach (with limit) on the docs but in my code it just dies with OutOfMemory errors.
> How does Luke not allocate these norms?
>
>
>
>
> ________________________________
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, December 23, 2008 5:25:30 PM
> Subject: Re: Optimize and Out Of Memory Errors
>
> Mark Miller wrote:
>   
>> Lebiram wrote:
>>     
>>> Also, what are norms 
>>>       
>> Norms are a byte value per field stored in the index that is factored into the score. Its used for length normalization (shorter documents = more important) and index time boosting. If you want either of those, you need norms. When norms are loaded up into an IndexReader, its loaded into a byte[maxdoc] array for each field - so even if one document out of 400 million has a field, its still going to load byte[maxdoc] for that field (so a lot of wasted RAM).  Did you say you had 400 million docs and 7 fields? Google says that would be:
>>
>>
>>    **400 million x 7 byte = 2 670.28809 megabytes**
>>
>> On top of your other RAM usage.
>>     
> Just to avoid confusion, that should really read a byte per document per field. If I remember right, it gives 255 boost possibilities, limited to 25 with length normalization.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>       
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 14:43:53 2008
Return-Path: <java-user-return-37930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92167 invoked from network); 24 Dec 2008 14:43:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 14:43:53 -0000
Received: (qmail 64218 invoked by uid 500); 24 Dec 2008 14:43:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64182 invoked by uid 500); 24 Dec 2008 14:43:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64170 invoked by uid 99); 24 Dec 2008 14:43:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 06:43:46 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.136.44.36] (HELO n71.bullet.mail.sp1.yahoo.com) (98.136.44.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 24 Dec 2008 14:43:34 +0000
Received: from [216.252.122.217] by n71.bullet.mail.sp1.yahoo.com with NNFMP; 24 Dec 2008 14:43:12 -0000
Received: from [67.195.9.83] by t2.bullet.sp1.yahoo.com with NNFMP; 24 Dec 2008 14:43:12 -0000
Received: from [67.195.9.98] by t3.bullet.mail.gq1.yahoo.com with NNFMP; 24 Dec 2008 14:43:12 -0000
Received: from [127.0.0.1] by omp102.mail.gq1.yahoo.com with NNFMP; 24 Dec 2008 14:43:12 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 507359.55344.bm@omp102.mail.gq1.yahoo.com
Received: (qmail 63224 invoked by uid 60001); 24 Dec 2008 14:43:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=ymail.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Cl+he9t8UXX/fvjrlLmdL3A6/1LT6QO7VV0g6JOoI61ns3H/+80Do671JFEdATidkgywSGxhgwGwMp/5g4WXfkUOOpTuIR0vFeCDrvoL4uhYGFCPxbi1LCisN4LJChdogsdifiwDaDXonQKeLpeGp/DP3LjCnNs8ONl1EylqR/s=;
X-YMail-OSG: PeFlUsoVM1lkH1bCvd7E1xY.93JQzRq6B__vj6O7Q5XL4FcyiD011Oy5X3YIyTurGgSUiaeejhPZQ2yWFG2KRe.GrHBa3jR7ZVjdQY78NtnBqUFIksZO4PhCkkwc3PvUclCcjgryx0KKyoM_3X.XlYVk94MgjD2_Xqym9Kq5zqLTAHCFlZS2U6cpcyp.BzYUvYtFf5eacX76nzBTEs.oBusH1EWko6y0Yrug
Received: from [217.205.40.94] by web112207.mail.gq1.yahoo.com via HTTP; Wed, 24 Dec 2008 06:43:12 PST
X-Mailer: YahooMailRC/1156.77 YahooMailWebService/0.7.260.1
References: <355058.69393.qm@web112205.mail.gq1.yahoo.com> <13D027DC-BBF9-40E9-A10C-D946821AE59A@mikemccandless.com> <734386.88697.qm@web26003.mail.ukl.yahoo.com> <739457.19219.qm@web112206.mail.gq1.yahoo.com> <49511D56.7030006@gmail.com> <49511F0A.1040909@gmail.com> <962651.98805.qm@web112210.mail.gq1.yahoo.com> <49524527.40400@gmail.com>
Date: Wed, 24 Dec 2008 06:43:12 -0800 (PST)
From: Lebiram <lebiram@ymail.com>
Subject: Re: Optimize and Out Of Memory Errors
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1199044308-1230129792=:61808"
Message-ID: <420034.61808.qm@web112207.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1199044308-1230129792=:61808
Content-Type: text/plain; charset=us-ascii


Hello Mark, 

As of the moment the index could not be rebuilt to remove norms.

Right now, I'm trying to figure out what luke is doing by going through source code.

Using whatever settings I find, create a very small app just to do a bit of search.
This small app has 1600 mb heapspace while luke just has 256 max for heap space.

On reading the same big 1 segment index with 166 million docs, 
luke fails during checkIndex when it checks the norms, but searching is okay as long as I limit it to say a few thousand documents.
However it's not the same for my app, been trying to limit it It still reads way too much data.

I'm wondering if this has anything to do with Similarity and Scoring. 
I was wondering if you could lead me to some settings or any clever tweaks. 

This problem will haunt me this christmas. :O




________________________________
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 24, 2008 2:20:23 PM
Subject: Re: Optimize and Out Of Memory Errors

We don't know those norms are "the" problem. Luke is loading norms if its searching that index. But what else is Luke doing? What else is your App doing? I suspect your app requires more RAM than Luke? How much RAM do you have and much are you allocating to the JVM?

The norms are not necessarily the problem you have to solve - but it would appear they are taking up over 2 gig of memory. Unless you have some to spare (and it sounds like you may not), it could be a good idea to turn them off for particular fields.

- Mark

Lebiram wrote:
> Is there away to not factor in norms data in scoring somehow?
> 
> I'm just stumped as to how Luke is able to do a seach (with limit) on the docs but in my code it just dies with OutOfMemory errors.
> How does Luke not allocate these norms?
> 
> 
> 
> 
> ________________________________
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, December 23, 2008 5:25:30 PM
> Subject: Re: Optimize and Out Of Memory Errors
> 
> Mark Miller wrote:
>  
>> Lebiram wrote:
>>    
>>> Also, what are norms      
>> Norms are a byte value per field stored in the index that is factored into the score. Its used for length normalization (shorter documents = more important) and index time boosting. If you want either of those, you need norms. When norms are loaded up into an IndexReader, its loaded into a byte[maxdoc] array for each field - so even if one document out of 400 million has a field, its still going to load byte[maxdoc] for that field (so a lot of wasted RAM).  Did you say you had 400 million docs and 7 fields? Google says that would be:
>> 
>> 
>>    **400 million x 7 byte = 2 670.28809 megabytes**
>> 
>> On top of your other RAM usage.
>>    
> Just to avoid confusion, that should really read a byte per document per field. If I remember right, it gives 255 boost possibilities, limited to 25 with length normalization.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
>        


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-1199044308-1230129792=:61808--


From java-user-return-37931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 24 16:04:33 2008
Return-Path: <java-user-return-37931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5806 invoked from network); 24 Dec 2008 16:04:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2008 16:04:33 -0000
Received: (qmail 6581 invoked by uid 500); 24 Dec 2008 16:04:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6541 invoked by uid 500); 24 Dec 2008 16:04:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6530 invoked by uid 99); 24 Dec 2008 16:04:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 08:04:25 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kenwudi@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 24 Dec 2008 16:04:09 +0000
Received: by rv-out-0506.google.com with SMTP id f6so3736199rvb.5
        for <java-user@lucene.apache.org>; Wed, 24 Dec 2008 08:03:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:reply-to
         :to:subject:in-reply-to:mime-version:content-type:references;
        bh=aHXC1AZRFg/lE3664RFZgzLR0AsVpesD9DwuQOrpRuY=;
        b=SD92Y03imaR5Hzi+EPweYdVdfYsRHVui9pELGttNXFW8yd/3DA3bxGVgwdISaa8oLn
         6EgxUTMqc2cLfOSY4a/xfoUEX2VdJpyMgkw48mPapBh+OrTn/761I7neAiJwYxrByocq
         GMB5d5U1h/1iBnqJaCDAWjRCWN78bPd6aLf4g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:reply-to:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=aAO/qRTlDSD7oLw0vuAw0cCTf5AfA9ZUt9Aoc0BOAU1LJp6r54AceV2HaPg85oxRRC
         KAKOQkzrCM9/s6g0TIbp/sSE1hv6nxqmiisWMuabQwNxlSwEV71WPli5MCpLNVEGJR8n
         stmadddGG/d62fKyE5Cd8E9JX6Nu06VpxVUJk=
Received: by 10.141.29.18 with SMTP id g18mr4330343rvj.149.1230134625531;
        Wed, 24 Dec 2008 08:03:45 -0800 (PST)
Received: by 10.140.194.18 with HTTP; Wed, 24 Dec 2008 08:03:45 -0800 (PST)
Message-ID: <1e3745680812240803q6ae1a5cl421a77fa830fe0f1@mail.gmail.com>
Date: Thu, 25 Dec 2008 00:03:45 +0800
From: KenWu <kenwudi@gmail.com>
Reply-To: kenwudi@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Get DocID after Document insert?
In-Reply-To: <359a92830812240559r23cdf723ufa3c6642f622724e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58333_29173044.1230134625523"
References: <5d53d5770812240535v545e40f4ya0476bafb446a1d8@mail.gmail.com>
	 <359a92830812240559r23cdf723ufa3c6642f622724e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58333_29173044.1230134625523
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hehe, it is xmas, time to play fire.

    Merry Christmas to Lucene!!


On Wed, Dec 24, 2008 at 9:59 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> You're really, really playing with fire here. Your document IDs may
> change, and in fact *will* change if you delete a document and
> then optimize. Say you index 100 docs, delete number 50 and
> optimize. Documents that originally had IDs 51-100 will now have
> IDs 50-99 and your hierarchy will be messed up.
>
> And saying "I'll never delete and then optimize" is just asking for
> trouble <G>...
>
> So just make your own ID that don't change and use *that* to
> maintain your hierarchy. You can get at these pretty efficiently with
> TermDocs/TermEnum and could, say at startup, read your unique
> IDs into a map along with their current Lucene ID if you really care
> that much about speed. This could just be a simple counter and
> you could find the maximum one currently in your index when you
> needed to add more documents to the index using the methods
> I mentioned.
>
> Best
> Erick
>
> On Wed, Dec 24, 2008 at 8:35 AM, Ian Vink <ianvink@gmail.com> wrote:
>
> > I am building up an index with documents that are hierarchical in their
> > relationship to each other. After I insert a Document into the index, how
> > do
> > I know its document ID? I need that to pass to the next document as the
> > "ParentID"
> > Ian
> >
>



-- 
www.5dinfo.net

------=_Part_58333_29173044.1230134625523--

From java-user-return-37932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 25 09:41:19 2008
Return-Path: <java-user-return-37932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26587 invoked from network); 25 Dec 2008 09:41:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2008 09:41:19 -0000
Received: (qmail 48935 invoked by uid 500); 25 Dec 2008 09:41:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48898 invoked by uid 500); 25 Dec 2008 09:41:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48887 invoked by uid 99); 25 Dec 2008 09:41:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 01:41:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shahid.faiz@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 09:41:03 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4079019rvb.5
        for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 01:40:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=msvaoTvUyv7O5utF4fVeh/q326xeTawbTJPsVO5xoos=;
        b=PAOiQHvA9UZE8Xwc9c2/V1vvgYS3Yd+BCQnBqB71MPiVIp/WDtffGIu7z4Cql/H13p
         qfLB7Ha1aSWLUtw3sk57ciygzi7EcL2BIJ5DkkVpPbhlI1oC5Kko/ztvDQgV/lc5WekL
         NoUDG8XHBg0D1FoKCHeA9Tq1XXwONCcfwOJ4g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=QcoRZ9SjUQBYVNT57N/piD1FMlvoIoP0wuHSn2Ud0D+JoA2/VAvJg7OeYkTZ2SFO2M
         Imw5BivmzoCP1VycZeZPYlzEs0NCJNUUBbALTuBZqjud86svcJVoURL4CRh9vYsv1UzE
         lEnLgQiGd8+o9raJh0c8o+/W5XnEJ6quPM2Uc=
Received: by 10.141.162.5 with SMTP id p5mr4701381rvo.193.1230198042276;
        Thu, 25 Dec 2008 01:40:42 -0800 (PST)
Received: by 10.141.203.3 with HTTP; Thu, 25 Dec 2008 01:40:42 -0800 (PST)
Message-ID: <177095940812250140s741ecd1ag6bab50a0ea225118@mail.gmail.com>
Date: Thu, 25 Dec 2008 14:40:42 +0500
From: "Shahid Faiz" <shahid.faiz@gmail.com>
To: java-user@lucene.apache.org
Subject: TermsVector
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31504_7294118.1230198042266"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31504_7294118.1230198042266
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am new to lucene. I am trying to build term clusters based on the results
returned by a query. Is there any way I can get terms of resulted documents
and their scores?

Thanks,
shahid

------=_Part_31504_7294118.1230198042266--

From java-user-return-37933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 25 09:41:53 2008
Return-Path: <java-user-return-37933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26872 invoked from network); 25 Dec 2008 09:41:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2008 09:41:52 -0000
Received: (qmail 52421 invoked by uid 500); 25 Dec 2008 09:41:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52383 invoked by uid 500); 25 Dec 2008 09:41:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52372 invoked by uid 99); 25 Dec 2008 09:41:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 01:41:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 09:41:38 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBP9fGLq029666
	for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 03:41:16 -0600
Received: (qmail 9582 invoked by uid 0); 25 Dec 2008 03:41:16 -0600
Date: 25 Dec 2008 03:41:16 -0600
Message-ID: <20081225094116.9581.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: TermsVector
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 331254009 - d746b4a69d7d
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=331254009&m=d746b4a69d7d&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=331254009&m=d746b4a69d7d&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=331254009&m=d746b4a69d7d&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 25 09:42:24 2008
Return-Path: <java-user-return-37934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27205 invoked from network); 25 Dec 2008 09:42:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2008 09:42:24 -0000
Received: (qmail 54327 invoked by uid 500); 25 Dec 2008 09:42:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54109 invoked by uid 500); 25 Dec 2008 09:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54098 invoked by uid 99); 25 Dec 2008 09:42:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 01:42:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 09:42:09 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBP9fmK1029970
	for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 03:41:48 -0600
Received: (qmail 9829 invoked by uid 0); 25 Dec 2008 03:41:48 -0600
Date: 25 Dec 2008 03:41:48 -0600
Message-ID: <20081225094148.9828.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: TermsVector
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 331254093 - c81cb4c6fc7a
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=331254093&m=c81cb4c6fc7a&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=331254093&m=c81cb4c6fc7a&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=331254093&m=c81cb4c6fc7a&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 25 13:21:04 2008
Return-Path: <java-user-return-37935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16694 invoked from network); 25 Dec 2008 13:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2008 13:21:04 -0000
Received: (qmail 3327 invoked by uid 500); 25 Dec 2008 13:20:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2758 invoked by uid 500); 25 Dec 2008 13:20:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2747 invoked by uid 99); 25 Dec 2008 13:20:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 05:20:56 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of itsadok@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 13:20:49 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3386367wfc.20
        for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 05:20:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=wG0KhiQvgFsZkd4B1QhemC2+H72sjWd7hzMD/ADUBNQ=;
        b=DDeo1eSedZsIRrOWwnLDSqfqG7wdwL8v4+DyCqhzTN/DcKBHHkSP6MWAQn//vskGc/
         m/odiz2sZ+VQfI+xUJiNNY9dJQ2eYSjypuViCNA3VXcWvjvwe/7H8+KxfgVSa71AjRZJ
         iIY2V5b3watob+2YoqKQxf5yE3fb+ekmevoYI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=thQUtJb+cIBwEpA0hmM75HAXT/QVHrd2o6S+EhVqsyQv0IAn/s4QfaeCy1yf6GNdz8
         sHfQ+IYZZO+6Fvvo5dSqrhJjstXv86RbN5wCFRptq916GqfcL5MWCDeQkBj/9+xc2Nyb
         100AE9z/aKqK5IoMspoK2G3q3iVfNUG+05tDI=
Received: by 10.142.69.11 with SMTP id r11mr4014894wfa.73.1230211227973;
        Thu, 25 Dec 2008 05:20:27 -0800 (PST)
Received: by 10.143.114.7 with HTTP; Thu, 25 Dec 2008 05:20:27 -0800 (PST)
Message-ID: <b4615b180812250520j24a49f82wc89092f56f59a3f9@mail.gmail.com>
Date: Thu, 25 Dec 2008 15:20:27 +0200
From: "Israel Tsadok" <itsadok@gmail.com>
To: java-user@lucene.apache.org
Subject: Any way to ignore repeated terms in TF calculation?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_86485_14861129.1230211227961"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_86485_14861129.1230211227961
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

A recurring problem I have with Lucene results is when a document contains
the same word over and over again. If for some reason I have a document
containing "badger badger badger badger badger badger badger badger", it
would appear high on the search results for "badger", even though it's
usually a useless document.
What I would like to do is ignore repeating words when counting the term
frequency. At first, I thought I could achieve this by indexing with a
TokenFilter that would skip repeated tokens, but then a search for e.g.
"Rochelle Rochelle" would return no results.

What I would like is to index all 8 "badger"s, but have the frequency of
"badger" saved as 1. Is that even possible?

Digging around in Lucene code, I found term frequency calculations
in FreqProxTermsWriterPerField.addTerm() - is that where I need to look?

Any help would be appreciated.
Israel

------=_Part_86485_14861129.1230211227961--

From java-user-return-37936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 25 18:13:40 2008
Return-Path: <java-user-return-37936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15992 invoked from network); 25 Dec 2008 18:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2008 18:13:39 -0000
Received: (qmail 80764 invoked by uid 500); 25 Dec 2008 18:13:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80732 invoked by uid 500); 25 Dec 2008 18:13:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80721 invoked by uid 99); 25 Dec 2008 18:13:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 10:13:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 18:13:24 +0000
Received: by bwz9 with SMTP id 9so9425750bwz.5
        for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 10:13:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=y0W/QP2jP5tDNyYmXo77LGIdD7vaIX830lgTkN9r92k=;
        b=Q0xDIryvyKdncyl3gY49OIvpItdutph4jyT6XCnneLDsRNWPhjd/56efew9Bkl1f1g
         nREVJX9PN8N/fEjgJ4gepGBOk1PK2woPkOLKRQOLiXR0gx86nqnV74J+W0Y5x/xWcQif
         Es3z6XdyNm6QvidOyrgxDob9eahTqi90D63M4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=MklrF6OEnjWB1CxblWfkz+7MR7X5mvQ9pVI5bVm05Z7uPhwGzwKGASq8NZA5BIwLYy
         Gef5wysVKvM7IVNzfMeIWHuG6tHGTcutseiWJa/ie+5IOB3Kh9c0TBpGTAXUxO4IFd9l
         d9LRz1SWBeJFsK/QCY/U8XRSVy+sEPoooC+k8=
Received: by 10.181.37.6 with SMTP id p6mr2680222bkj.197.1230228783960;
        Thu, 25 Dec 2008 10:13:03 -0800 (PST)
Received: by 10.180.210.11 with HTTP; Thu, 25 Dec 2008 10:13:03 -0800 (PST)
Message-ID: <5d53d5770812251013j71ccbf67jfccc9c51208d483b@mail.gmail.com>
Date: Thu, 25 Dec 2008 14:13:03 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Fast string access - Best Practise?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22367_30697846.1230228783950"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22367_30697846.1230228783950
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Which of these is the better practice:
myTitle = luceneDocment.GetField("title").StringValue();

or

myTitle = luceneDocment.Get("title");

Thanks in advance.
Ian

------=_Part_22367_30697846.1230228783950--

From java-user-return-37937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 25 18:14:49 2008
Return-Path: <java-user-return-37937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16551 invoked from network); 25 Dec 2008 18:14:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2008 18:14:49 -0000
Received: (qmail 82537 invoked by uid 500); 25 Dec 2008 18:14:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82508 invoked by uid 500); 25 Dec 2008 18:14:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82495 invoked by uid 99); 25 Dec 2008 18:14:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 10:14:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ianvink@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 18:14:33 +0000
Received: by bwz9 with SMTP id 9so9426493bwz.5
        for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 10:14:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=S0K65z4Jimw6aQXQ+jijKqxozhQK4vjAqanlw7WbGig=;
        b=OrU/knNcnOWV1g0Gi7VKAaeQKobYbkMT+Xc3jXP9h9df4tC5NYvs7mZOSKY4EuVXhk
         w1yHcD+XRbLBaH2OKBqDwXVjdyUacVV2QTzJE/T53vXDCGZvAY4MTpWhFeNOP0JnVyzZ
         ZBcBNbNY5xa6jFyhoYEuSweAnZmCCcv2Als8Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=iVEIquOkv6Du91kvAq1feZzjys1bZq6BlFtUZuVFuBrLo3vK3lJ1ZcGljIq/11Qh6K
         5WEO1srEePLnI/TD1h4hs1uFZV95liMYstCkY9WWp5pHCX9prkSM2tZ7DW9ppmGT6NFk
         zROgTv81Bv126ZAHmCa35ZHmyQh5xfSvZkdWM=
Received: by 10.181.51.14 with SMTP id d14mr3644492bkk.63.1230228853071;
        Thu, 25 Dec 2008 10:14:13 -0800 (PST)
Received: by 10.180.210.11 with HTTP; Thu, 25 Dec 2008 10:14:12 -0800 (PST)
Message-ID: <5d53d5770812251014q146ef879qe943db6b42ad9758@mail.gmail.com>
Date: Thu, 25 Dec 2008 14:14:12 -0400
From: "Ian Vink" <ianvink@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get DocID after Document insert?
In-Reply-To: <359a92830812240559r23cdf723ufa3c6642f622724e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22372_18766519.1230228853059"
References: <5d53d5770812240535v545e40f4ya0476bafb446a1d8@mail.gmail.com>
	 <359a92830812240559r23cdf723ufa3c6642f622724e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22372_18766519.1230228853059
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ahhh.
You just saved me a gazillion hours of work.....

Check out my Lucene enabled
service-to-the-world-hope-we-all-get-along-better site.

http://BahaiResearch.com

Thanks!
Ian

On Wed, Dec 24, 2008 at 9:59 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> You're really, really playing with fire here. Your document IDs may
> change, and in fact *will* change if you delete a document and
> then optimize. Say you index 100 docs, delete number 50 and
> optimize. Documents that originally had IDs 51-100 will now have
> IDs 50-99 and your hierarchy will be messed up.
>
> And saying "I'll never delete and then optimize" is just asking for
> trouble <G>...
>
> So just make your own ID that don't change and use *that* to
> maintain your hierarchy. You can get at these pretty efficiently with
> TermDocs/TermEnum and could, say at startup, read your unique
> IDs into a map along with their current Lucene ID if you really care
> that much about speed. This could just be a simple counter and
> you could find the maximum one currently in your index when you
> needed to add more documents to the index using the methods
> I mentioned.
>
> Best
> Erick
>
> On Wed, Dec 24, 2008 at 8:35 AM, Ian Vink <ianvink@gmail.com> wrote:
>
> > I am building up an index with documents that are hierarchical in their
> > relationship to each other. After I insert a Document into the index, how
> > do
> > I know its document ID? I need that to pass to the next document as the
> > "ParentID"
> > Ian
> >
>

------=_Part_22372_18766519.1230228853059--

From java-user-return-37938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 25 21:16:59 2008
Return-Path: <java-user-return-37938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66343 invoked from network); 25 Dec 2008 21:16:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2008 21:16:58 -0000
Received: (qmail 36338 invoked by uid 500); 25 Dec 2008 21:16:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36307 invoked by uid 500); 25 Dec 2008 21:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36296 invoked by uid 99); 25 Dec 2008 21:16:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 13:16:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 21:16:43 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by oelhorst (Postfix) with ESMTP id 6897B3199F
	for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 21:17:36 +0100 (CET)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 50A3B3198C
	for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 21:17:36 +0100 (CET)
Received: from [192.168.178.47] (BAH3c7a.bah.pppool.de [77.135.60.122])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 07C37310AC
	for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 21:17:35 +0100 (CET)
Message-Id: <D3E5DC41-FB7C-4FA0-BE2F-163A802AA31E@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <b4615b180812250520j24a49f82wc89092f56f59a3f9@mail.gmail.com>
Content-Type: multipart/signed; boundary=Apple-Mail-71-676991291; micalg=sha1; protocol="application/pkcs7-signature"
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Any way to ignore repeated terms in TF calculation?
Date: Thu, 25 Dec 2008 22:16:13 +0100
References: <b4615b180812250520j24a49f82wc89092f56f59a3f9@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-71-676991291
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: quoted-printable

Shouldn't your analyzer also convert "Rochelle Rochelle" to "Rochelle" ?

paul


Le 25-d=E9c.-08 =E0 14:20, Israel Tsadok a =E9crit :

> A recurring problem I have with Lucene results is when a document =20
> contains
> the same word over and over again. If for some reason I have a =20
> document
> containing "badger badger badger badger badger badger badger =20
> badger", it
> would appear high on the search results for "badger", even though it's
> usually a useless document.
> What I would like to do is ignore repeating words when counting the =20=

> term
> frequency. At first, I thought I could achieve this by indexing with a
> TokenFilter that would skip repeated tokens, but then a search for =20
> e.g.
> "Rochelle Rochelle" would return no results.
>
> What I would like is to index all 8 "badger"s, but have the =20
> frequency of
> "badger" saved as 1. Is that even possible?
>
> Digging around in Lucene code, I found term frequency calculations
> in FreqProxTermsWriterPerField.addTerm() - is that where I need to =20
> look?
>
> Any help would be appreciated.
> Israel


--Apple-Mail-71-676991291
Content-Disposition: attachment;
	filename=smime.p7s
Content-Type: application/pkcs7-signature;
	name=smime.p7s
Content-Transfer-Encoding: base64

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIFzjCCAocw
ggHwoAMCAQICEFwkG9LgbGf8Fuu/5kCXRScwDQYJKoZIhvcNAQEFBQAwYjELMAkGA1UEBhMCWkEx
JTAjBgNVBAoTHFRoYXd0ZSBDb25zdWx0aW5nIChQdHkpIEx0ZC4xLDAqBgNVBAMTI1RoYXd0ZSBQ
ZXJzb25hbCBGcmVlbWFpbCBJc3N1aW5nIENBMB4XDTA4MDYwMzE1MTgyOVoXDTA5MDYwMzE1MTgy
OVowcDEaMBgGA1UEBBMRTGliYnJlY2h0IEdvdXJkZXQxDTALBgNVBCoTBFBhdWwxHzAdBgNVBAMT
FlBhdWwgTGliYnJlY2h0IEdvdXJkZXQxIjAgBgkqhkiG9w0BCQEWE3BhdWxAYWN0aXZlbWF0aC5v
cmcwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMAHqTEgekG5Iyctn3tSRSfsPoZL+vkFavzl
w/xbbiQ4vWuoCZFVNHvLcFO2rfWoFLaRbcueLsmagsJwA1uxAj4tj/neoawadD+jZ3a98BkqBhIu
4hsC1poLDyvcbUOdKga9DXQ/pk/CorFvR7OOC1INrBtbDi7ycUYaUL7ZkpBFAgMBAAGjMDAuMB4G
A1UdEQQXMBWBE3BhdWxAYWN0aXZlbWF0aC5vcmcwDAYDVR0TAQH/BAIwADANBgkqhkiG9w0BAQUF
AAOBgQAt7uUnq0yd+jIo9/zYyj+NPyCh3v8CX8MW2qalj37t1YUR82o5/1O5z0sXj7+hQmSEWH7N
BgptwNvhNoKWTYo5c8HBsAMvvv1ruSXYKlsRvPBfewHEEo2KgH73SImj2w7a8owq3t0KLVCPP7d4
RXnrXJf6nuXlsvfFFEd6aIN7VjCCAz8wggKooAMCAQICAQ0wDQYJKoZIhvcNAQEFBQAwgdExCzAJ
BgNVBAYTAlpBMRUwEwYDVQQIEwxXZXN0ZXJuIENhcGUxEjAQBgNVBAcTCUNhcGUgVG93bjEaMBgG
A1UEChMRVGhhd3RlIENvbnN1bHRpbmcxKDAmBgNVBAsTH0NlcnRpZmljYXRpb24gU2VydmljZXMg
RGl2aXNpb24xJDAiBgNVBAMTG1RoYXd0ZSBQZXJzb25hbCBGcmVlbWFpbCBDQTErMCkGCSqGSIb3
DQEJARYccGVyc29uYWwtZnJlZW1haWxAdGhhd3RlLmNvbTAeFw0wMzA3MTcwMDAwMDBaFw0xMzA3
MTYyMzU5NTlaMGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAoUHR5
KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQTCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAxKY8VXNV+065yplaHmjAdQRwnd/p/6Me7L3N9VvyGna9
fww6YfK/Uc4B1OVQCjDXAmNaLIkVcI7dyfArhVqqP3FWy688Cwfn8R+RNiQqE88r1fOCdz0Dviv+
uxg+B79AgAJk16emu59l0cUqVIUPSAR/p7bRPGEEQB5kGXJgt/sCAwEAAaOBlDCBkTASBgNVHRMB
Af8ECDAGAQH/AgEAMEMGA1UdHwQ8MDowOKA2oDSGMmh0dHA6Ly9jcmwudGhhd3RlLmNvbS9UaGF3
dGVQZXJzb25hbEZyZWVtYWlsQ0EuY3JsMAsGA1UdDwQEAwIBBjApBgNVHREEIjAgpB4wHDEaMBgG
A1UEAxMRUHJpdmF0ZUxhYmVsMi0xMzgwDQYJKoZIhvcNAQEFBQADgYEASIzRUIPqCy7MDaNmrGcP
f6+svsIXoUOWlJ1/TCG4+DYfqi2fNi/A9BxQIJNwPP2t4WFiw9k6GX6EsZkbAMUaC4J0niVQlGLH
2ydxVyWN3amcOY6MIE9lX5Xa9/eH1sYITq726jTlEBpbNU1341YheILcIRk13iSx0x1G/11fZU8x
ggKPMIICiwIBATB2MGIxCzAJBgNVBAYTAlpBMSUwIwYDVQQKExxUaGF3dGUgQ29uc3VsdGluZyAo
UHR5KSBMdGQuMSwwKgYDVQQDEyNUaGF3dGUgUGVyc29uYWwgRnJlZW1haWwgSXNzdWluZyBDQQIQ
XCQb0uBsZ/wW67/mQJdFJzAJBgUrDgMCGgUAoIIBbzAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcB
MBwGCSqGSIb3DQEJBTEPFw0wODEyMjUyMTE2MTRaMCMGCSqGSIb3DQEJBDEWBBTPlYS3OYRCvUG9
Tr+n9QeTrS6IKjCBhQYJKwYBBAGCNxAEMXgwdjBiMQswCQYDVQQGEwJaQTElMCMGA1UEChMcVGhh
d3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UEAxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVt
YWlsIElzc3VpbmcgQ0ECEFwkG9LgbGf8Fuu/5kCXRScwgYcGCyqGSIb3DQEJEAILMXigdjBiMQsw
CQYDVQQGEwJaQTElMCMGA1UEChMcVGhhd3RlIENvbnN1bHRpbmcgKFB0eSkgTHRkLjEsMCoGA1UE
AxMjVGhhd3RlIFBlcnNvbmFsIEZyZWVtYWlsIElzc3VpbmcgQ0ECEFwkG9LgbGf8Fuu/5kCXRScw
DQYJKoZIhvcNAQEBBQAEgYARkOAtaUYdyF6dnqNq/Ky+qvMqnhsB+liud3Li0DX/T04OnjTgzMIk
rYnMxZqoWGrUskonGXbzkHgie1BReNcyO6ia+LRmiNNlvk3sAAWf8I57aUjU+R1WrboklqGQuPcV
R7zXmZr5s7GbmDJ9uZ0QKQSXKXg0AFR+kuigulbwjgAAAAAAAA==

--Apple-Mail-71-676991291--

From java-user-return-37939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 26 05:46:41 2008
Return-Path: <java-user-return-37939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82244 invoked from network); 26 Dec 2008 05:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2008 05:46:41 -0000
Received: (qmail 35443 invoked by uid 500); 26 Dec 2008 05:46:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35412 invoked by uid 500); 26 Dec 2008 05:46:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35401 invoked by uid 99); 26 Dec 2008 05:46:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 21:46:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vikasbucha@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 05:46:27 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3592762wfc.20
        for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 21:46:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=p6Z0BZxXcP3EXhRVWl7jf0Ez8KVlWM3NdV4XKw1gqS4=;
        b=fennrYoORCKd7ifkr3xZBi1taMj5d8N9sYUPJ+nRBPB9Y6uT0ZR2GPZOZVoboVgCsb
         COnl5U9LvoIECBhy7wdzEnFi967WqVrRRgR1AFhA3VmUUSN+4WwW3UWM1CzWXEZnORZZ
         +0IpNP+F7cq7DTc8alcv/EO5ln4ueJAzK6HHE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=rFocIvQRvzTxZ3XyjW1FJWLpseRfKEi0vQ+mX3Hvl0W+B2tCK5U6oTY91VlX5LU1Ao
         O/gtnmUPuYMUQuGiwAYBinJypB0RdntExsF/9xgAYT/A575yrEU1FG169E8VKx/qxDHD
         xbRnXzISTUNiMcPkjSFFQDOkbZh3XWC9RcyKQ=
Received: by 10.142.141.21 with SMTP id o21mr854882wfd.150.1230270367108;
        Thu, 25 Dec 2008 21:46:07 -0800 (PST)
Received: by 10.142.188.14 with HTTP; Thu, 25 Dec 2008 21:46:07 -0800 (PST)
Message-ID: <4e6922900812252146n12d9df4ag1e83f4c137096e90@mail.gmail.com>
Date: Fri, 26 Dec 2008 11:16:07 +0530
From: "vikas bucha" <vikasbucha@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem with sorted results.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_100621_2588299.1230270367099"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_100621_2588299.1230270367099
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Merry Christmas and a Happy New Year to you all.

I have an index with few fields. Title, Description, Author etc.
For a search query "business development", the equivalent lucene query I
build is:

*(TITLE: business^9.00 OR AUTHOR: business^3.00 OR
DESCRIPTION:business^1.00) AND (TITLE: development^9.00 OR AUTHOR:
development^3.00 OR DESCRIPTION:development^1.00)
*
The expected result is to get all documents having both *business* and *
development* in the *TITLE* on top, followed by any one in TITLE and the
other in AUTHOR(if available) followed by both in AUTHOR and so on..., till
we get all docs having all the terms appearing anywhere in the document. But
the results are completely different from the expectation.

Please reply if you'd require any other information.

This might be a trivial issue for the pros. I have pulled my hair at it for
a while.
Any help with what's wrong here would be highly appreciated.

Thanks
Vikash.
-- 
If there's no way out, then let's make one.

------=_Part_100621_2588299.1230270367099--

From java-user-return-37940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 26 05:58:58 2008
Return-Path: <java-user-return-37940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86459 invoked from network); 26 Dec 2008 05:58:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2008 05:58:58 -0000
Received: (qmail 45242 invoked by uid 500); 26 Dec 2008 05:58:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45205 invoked by uid 500); 26 Dec 2008 05:58:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45194 invoked by uid 99); 26 Dec 2008 05:58:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 25 Dec 2008 21:58:51 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 05:58:41 +0000
Received: by rv-out-0506.google.com with SMTP id f6so4415425rvb.5
        for <java-user@lucene.apache.org>; Thu, 25 Dec 2008 21:58:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=IaAVGfqCEmhIkKLeNGJFvgjtoym/0N49ptPwQNHCyhs=;
        b=rgUAa5a1riwQoIRYoynhWnhfL5ABFU8BQhE2GenDcpy8KoxxYNUb7UegfsjyuMownx
         g0svijhwaveWeZg0zskdMmfq4dP2k+fQMMbh/Wmnl/ijztFuRebgBy09BFOpEArUZrJI
         BZaTU4msaMxS2zAjPUFXMeiUGnefuZsTZPJlA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LITo85/aW4VlX8/Gc70y6wLM+BzuiNyHW0EvF85fPcRQgjZVIQE20KShQiR3D5NFNc
         XO54cbrRoO6NhS5x296aPkpI8+gU2qOo6OLhxwnzul1bgBidPfktkteVPGZcqfQafV4z
         7trLRuEG0Fp/7V74cuvwrlXn9Q5QPiEKgx4Vc=
Received: by 10.141.62.15 with SMTP id p15mr5121335rvk.92.1230271101592;
        Thu, 25 Dec 2008 21:58:21 -0800 (PST)
Received: by 10.140.203.12 with HTTP; Thu, 25 Dec 2008 21:58:21 -0800 (PST)
Message-ID: <295da8fe0812252158l4e530aa7wd2b276a3654999c1@mail.gmail.com>
Date: Fri, 26 Dec 2008 11:28:21 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with sorted results.
In-Reply-To: <4e6922900812252146n12d9df4ag1e83f4c137096e90@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93773_7062710.1230271101565"
References: <4e6922900812252146n12d9df4ag1e83f4c137096e90@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93773_7062710.1230271101565
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

try to construct a query like :
 BooleanQuery mainquery = new BooleanQuery();
 BooleanQuery query1 = new BooleanQuery();
 BooleanQuery query2 = new BooleanQuery();
 BooleanQuery query3 = new BooleanQuery();

queryParser = new QueryParser("title", new StandardAnalyzer());
query1 = queryParser.parse("business development");
query1.setBoost(3.0);
mainquery.add(query1, Occur.SHOULD);

queryParser = new QueryParser("Author", new StandardAnalyzer());
query2 = queryParser.parse("business development");
query2.setBoost(2.0);
mainquery.add(query2, Occur.SHOULD);

queryParser = new QueryParser("Description", new StandardAnalyzer());
query3 = queryParser.parse("business development");
mainquery.add(query3, Occur.SHOULD);

use mainquery for your searching

Prabin
toostep.com

On Fri, Dec 26, 2008 at 11:16 AM, vikas bucha <vikasbucha@gmail.com> wrote:

> Hi,
>
> Merry Christmas and a Happy New Year to you all.
>
> I have an index with few fields. Title, Description, Author etc.
> For a search query "business development", the equivalent lucene query I
> build is:
>
> *(TITLE: business^9.00 OR AUTHOR: business^3.00 OR
> DESCRIPTION:business^1.00) AND (TITLE: development^9.00 OR AUTHOR:
> development^3.00 OR DESCRIPTION:development^1.00)
> *
> The expected result is to get all documents having both *business* and *
> development* in the *TITLE* on top, followed by any one in TITLE and the
> other in AUTHOR(if available) followed by both in AUTHOR and so on..., till
> we get all docs having all the terms appearing anywhere in the document.
> But
> the results are completely different from the expectation.
>
> Please reply if you'd require any other information.
>
> This might be a trivial issue for the pros. I have pulled my hair at it for
> a while.
> Any help with what's wrong here would be highly appreciated.
>
> Thanks
> Vikash.
> --
> If there's no way out, then let's make one.
>

------=_Part_93773_7062710.1230271101565--

From java-user-return-37941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 26 19:02:08 2008
Return-Path: <java-user-return-37941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51363 invoked from network); 26 Dec 2008 19:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2008 19:02:08 -0000
Received: (qmail 58749 invoked by uid 500); 26 Dec 2008 19:02:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58707 invoked by uid 500); 26 Dec 2008 19:02:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58696 invoked by uid 99); 26 Dec 2008 19:02:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 11:02:00 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 19:01:52 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1169378yxj.5
        for <java-user@lucene.apache.org>; Fri, 26 Dec 2008 11:01:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ik18WMhxTXNu2nNZFKKDMoNkNh/NPnwGgrf8+D28pq8=;
        b=Tsjg+T8hNaKS6P5Xy/dbkZwn+8tRc3qSgdhabYKrN8FpIR1F0PHpUhMsIsPNHtvAgh
         EZVaqG8QtWBPNVMdAdbFsXltqTSmPeuJ7DSY0POaXfpGRQEpWd47w2WhRIOtyqt7TM+d
         O5jEgMEiQRBFiJ+bX0OWjNZWcgepxDPelWLNU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YHv6LPueFfV4+UbaH8xVrotkD1uKYNMKaMpOaDY/NqIzpEupTUBDCj84xFeLLivOxk
         vMGjfqvRQD0gW6VE1TqUwjmpAAdm67MUScRPOEouJz9aIycJFIGWq254Y+B50a9HL7kh
         3bCR4wjG3dYrzrFXz25JlgB7R9SvL7czGNBew=
Received: by 10.90.49.8 with SMTP id w8mr5443449agw.85.1230318091403;
        Fri, 26 Dec 2008 11:01:31 -0800 (PST)
Received: by 10.90.34.18 with HTTP; Fri, 26 Dec 2008 11:01:31 -0800 (PST)
Message-ID: <359a92830812261101w4c6da36br3743f533e8832bf7@mail.gmail.com>
Date: Fri, 26 Dec 2008 14:01:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with sorted results.
In-Reply-To: <4e6922900812252146n12d9df4ag1e83f4c137096e90@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_109869_24363306.1230318091398"
References: <4e6922900812252146n12d9df4ag1e83f4c137096e90@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_109869_24363306.1230318091398
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Several points:

1> Prabin's suggestion is, I think, equivalent to something like:
title:(business AND author)^9.0 OR
author:(business AND author)^3.0
OR description:(business AND author)^1.0.
Either way may give you results more in line with what
you expect. (note, the syntax here is suspect, but you get the idea)
I'm not sure what the boosting in your original clause
really does, but it seems suspect... but then I'm no
scoring expert.

2> If you haven't already, get a copy of Luke and
run a few of these scenarios through the "explain" function.
That'll show you a lot about how the queries are scored. And
Query.explain is your friend too.

3> Boosts are a modifier of the score, so expecting the
result sets to be simply predictable will probably surprise you.
Boosting will *tend* to sort things the way you want, but
a document whose description score is 10000 and title score is
1 will still sort above other title scores (numbers pulled out of thin
air). That said, since your title and author fields will very probably
be shorter than description, they'll tend to sort first anyway
I suspect.

Best
Erick

On Fri, Dec 26, 2008 at 12:46 AM, vikas bucha <vikasbucha@gmail.com> wrote:

> Hi,
>
> Merry Christmas and a Happy New Year to you all.
>
> I have an index with few fields. Title, Description, Author etc.
> For a search query "business development", the equivalent lucene query I
> build is:
>
> *(TITLE: business^9.00 OR AUTHOR: business^3.00 OR
> DESCRIPTION:business^1.00) AND (TITLE: development^9.00 OR AUTHOR:
> development^3.00 OR DESCRIPTION:development^1.00)
> *
> The expected result is to get all documents having both *business* and *
> development* in the *TITLE* on top, followed by any one in TITLE and the
> other in AUTHOR(if available) followed by both in AUTHOR and so on..., till
> we get all docs having all the terms appearing anywhere in the document.
> But
> the results are completely different from the expectation.
>
> Please reply if you'd require any other information.
>
> This might be a trivial issue for the pros. I have pulled my hair at it for
> a while.
> Any help with what's wrong here would be highly appreciated.
>
> Thanks
> Vikash.
> --
> If there's no way out, then let's make one.
>

------=_Part_109869_24363306.1230318091398--

From java-user-return-37942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 26 19:02:46 2008
Return-Path: <java-user-return-37942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51464 invoked from network); 26 Dec 2008 19:02:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2008 19:02:46 -0000
Received: (qmail 61259 invoked by uid 500); 26 Dec 2008 19:02:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60449 invoked by uid 500); 26 Dec 2008 19:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60438 invoked by uid 99); 26 Dec 2008 19:02:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 11:02:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 19:02:29 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBQJ2783013436
	for <java-user@lucene.apache.org>; Fri, 26 Dec 2008 13:02:07 -0600
Received: (qmail 19843 invoked by uid 0); 26 Dec 2008 13:02:07 -0600
Date: 26 Dec 2008 13:02:07 -0600
Message-ID: <20081226190207.19842.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Problem with sorted results.
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.06
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 331646731 - bcecaa1385fc
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=331646731&m=bcecaa1385fc&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=331646731&m=bcecaa1385fc&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=331646731&m=bcecaa1385fc&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 26 19:03:19 2008
Return-Path: <java-user-return-37943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51558 invoked from network); 26 Dec 2008 19:03:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2008 19:03:19 -0000
Received: (qmail 62183 invoked by uid 500); 26 Dec 2008 19:03:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62143 invoked by uid 500); 26 Dec 2008 19:03:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62132 invoked by uid 99); 26 Dec 2008 19:03:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 11:03:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 19:03:04 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBQJ2gRX014030
	for <java-user@lucene.apache.org>; Fri, 26 Dec 2008 13:02:42 -0600
Received: (qmail 20112 invoked by uid 0); 26 Dec 2008 13:02:42 -0600
Date: 26 Dec 2008 13:02:42 -0600
Message-ID: <20081226190242.20111.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Problem with sorted results.
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.06
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 331646877 - 4e33fb324e91
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=331646877&m=4e33fb324e91&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=331646877&m=4e33fb324e91&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=331646877&m=4e33fb324e91&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 26 20:19:46 2008
Return-Path: <java-user-return-37944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63766 invoked from network); 26 Dec 2008 20:19:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2008 20:19:45 -0000
Received: (qmail 16223 invoked by uid 500); 26 Dec 2008 20:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16187 invoked by uid 500); 26 Dec 2008 20:19:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16176 invoked by uid 99); 26 Dec 2008 20:19:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 12:19:38 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aminmc@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 20:19:30 +0000
Received: by ey-out-2122.google.com with SMTP id 25so352085eya.53
        for <java-user@lucene.apache.org>; Fri, 26 Dec 2008 12:19:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:mime-version:subject:date:x-mailer;
        bh=9nRQEDBf8sfvJ915XtY9L95OMVEy1zxss8c17p/4a0o=;
        b=LNBFB03lmVFybp9wvAYi/fYIe+Ck897B6HbgyCdVoJZeB7KFdMkuscX8civ0jdwIPu
         pBkeUyP0W7yGqc/e89ZkPgLm8fHvmUmJnyg3RCKsixzerPLOGydP3W/F7tgRHlS9I8hA
         Ru0uK+n7X1foBrSNS48s+xkLkqHd5SSHKrsxQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:mime-version:subject:date:x-mailer;
        b=qn+r23hrOVpHlGVKjweJt3isop2RzcefV7UdC/dHHT6sSoCREEdGY8YWi9+XRvz/yW
         MYMlT1+AI5rQgQYtC2PCv3v8UYLwif1+RPHUSRfQU6ZrqwBOdtRTQiaaOU2BsqusXx5L
         2ENnw5hBHSTl/iS5vuD1hvmA4/87AMLmM6txw=
Received: by 10.210.36.8 with SMTP id j8mr13005188ebj.99.1230322748498;
        Fri, 26 Dec 2008 12:19:08 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id m5sm16657140gve.27.2008.12.26.12.19.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Dec 2008 12:19:07 -0800 (PST)
Message-Id: <2E93DCB9-1072-4EB8-90BD-7AA036C8858D@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-6-759955859
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Field Not Present In Document
Date: Fri, 26 Dec 2008 20:19:02 +0000
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-6-759955859
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi

I have the following situation:

Document document = new Document();
		String body ="This is a body of document";
		Field field = new Field("body", body, Field.Store.YES,  
Field.Index.ANALYZED);
		document.add(field);
		
		String id ="1234";
		Field idField = new Field("id", id, Field.Store.YES,  
Field.Index.ANALYZED);
		document.add(idField);
		rtfIndexer.add(document);
		System.out.println(document.getFields());
		


When I print the fields of the document I get the following:


stored/uncompressed,indexed,tokenized<body:This is a body of  
document>, stored/uncompressed,indexed,tokenized<id:1234>]


The RtfIndexer looks like this:

	public void add(Document document) {
		IndexWriter rtfIndexWriter =  
IndexWriterFactory.createIndexWriter(rtfDirectory, analyzer);
		try {
			rtfIndexWriter.addDocument(document);
			LOGGER.debug("Added Document:" + document + " to index");
			commitAndOptimise(rtfIndexWriter);
		} catch (CorruptIndexException e) {
			throw new IllegalStateException(e);
		} catch (IOException e) {
			throw new IllegalStateException(e);
		}
	}

	private void commitAndOptimise(IndexWriter rtfIndexWriter) throws  
CorruptIndexException,IOException {
		LOGGER.debug("Committing document and closing index writer");
		rtfIndexWriter.optimize();
		rtfIndexWriter.commit();
		rtfIndexWriter.close();
	}



However I load the Document using the below code:

		Directory directory = ((RtfIndexer)rtfIndexer).getDirectory();
		IndexReader indexReader = IndexReader.open(directory);
		Document documentFromIndex = indexReader.document(1);
		System.out.println(documentFromIndex.getFields());

I get:

[stored/uncompressed,indexed,tokenized<body:This is a body of document>]


It seems as though id field is not being stored in the Index...I can't  
understand why not as I can have added it to the document,


I would be grateful if anyone could help!


Cheers
Amin

P.S. Merry Christmas!


--Apple-Mail-6-759955859--

From java-user-return-37945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 26 20:30:27 2008
Return-Path: <java-user-return-37945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65186 invoked from network); 26 Dec 2008 20:30:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2008 20:30:27 -0000
Received: (qmail 23333 invoked by uid 500); 26 Dec 2008 20:30:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23299 invoked by uid 500); 26 Dec 2008 20:30:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23288 invoked by uid 99); 26 Dec 2008 20:30:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 12:30:21 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 20:30:11 +0000
Received: by ewy14 with SMTP id 14so4040342ewy.5
        for <java-user@lucene.apache.org>; Fri, 26 Dec 2008 12:29:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:mime-version:subject:date:references:x-mailer;
        bh=nHALHk3fe+2aZJM2fTrJjNjUnGq1DrSONspn1TSScAE=;
        b=bOJB9ZLZ6N4LDvAXXcAYDaoERBBBz1Zjw3s350s39y2JGDfiByQhCD1Xb1Pd6Zhh9e
         UY8C39nWb75w8apdUxi6Tohr8AWCBMi/MPI143IPfLlbmwCLbh/o8A/cTfyjwkoPRSJs
         wpVBZUijen19xYiZUjllhUnQhgtZOKVCOFd2Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:mime-version:subject:date
         :references:x-mailer;
        b=X5Le5jbjY8Ugu3GMF7tKopzV+9S5GqIbHv4MK7dj6j2eBKN+UG5Ox/JTeD7cQ9mBPj
         YiQ+sA6KQVzNFCK0lXRBF4IrTf+MHvFMKKiOUlIw0dLgydW8ZTnoMEcXJUJ/R63QTWYP
         OoSrceauya99xVFbvmjRXyxLV6cffKDMjaiTE=
Received: by 10.210.56.9 with SMTP id e9mr1077177eba.135.1230323390691;
        Fri, 26 Dec 2008 12:29:50 -0800 (PST)
Received: from Unknown-00-1e-c2-bd-cb-f7.home (host81-151-183-31.range81-151.btcentralplus.com [81.151.183.31])
        by mx.google.com with ESMTPS id i6sm14293589gve.26.2008.12.26.12.29.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Dec 2008 12:29:49 -0800 (PST)
Message-Id: <663C5B7A-7E24-48D4-81A6-887735C1FBF0@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=Apple-Mail-7-760598829
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Fwd: Field Not Present In Document
Date: Fri, 26 Dec 2008 20:29:45 +0000
References: <2E93DCB9-1072-4EB8-90BD-7AA036C8858D@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-7-760598829
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit



Begin forwarded message:

> From: Amin Mohammed-Coleman <aminmc@gmail.com>
> Date: 26 December 2008 20:19:02 GMT
> To: java-user@lucene.apache.org
> Subject: Field Not Present In Document
>
> Hi
>
> I have the following situation:
>
> Document document = new Document();
> 		String body ="This is a body of document";
> 		Field field = new Field("body", body, Field.Store.YES,  
> Field.Index.ANALYZED);
> 		document.add(field);
> 		
> 		String id ="1234";
> 		Field idField = new Field("id", id, Field.Store.YES,  
> Field.Index.ANALYZED);
> 		document.add(idField);
> 		rtfIndexer.add(document);
> 		System.out.println(document.getFields());
> 		
>
>
> When I print the fields of the document I get the following:
>
>
> stored/uncompressed,indexed,tokenized<body:This is a body of  
> document>, stored/uncompressed,indexed,tokenized<id:1234>]
>
>
> The RtfIndexer looks like this:
>
> 	public void add(Document document) {
> 		IndexWriter rtfIndexWriter =  
> IndexWriterFactory.createIndexWriter(rtfDirectory, analyzer);
> 		try {
> 			rtfIndexWriter.addDocument(document);
> 			LOGGER.debug("Added Document:" + document + " to index");
> 			commitAndOptimise(rtfIndexWriter);
> 		} catch (CorruptIndexException e) {
> 			throw new IllegalStateException(e);
> 		} catch (IOException e) {
> 			throw new IllegalStateException(e);
> 		}
> 	}
>
> 	private void commitAndOptimise(IndexWriter rtfIndexWriter) throws  
> CorruptIndexException,IOException {
> 		LOGGER.debug("Committing document and closing index writer");
> 		rtfIndexWriter.optimize();
> 		rtfIndexWriter.commit();
> 		rtfIndexWriter.close();
> 	}
>
>
>
> However I load the Document using the below code:
>
> 		Directory directory = ((RtfIndexer)rtfIndexer).getDirectory();
> 		IndexReader indexReader = IndexReader.open(directory);
> 		Document documentFromIndex = indexReader.document(1);
> 		System.out.println(documentFromIndex.getFields());
>
> I get:
>
> [stored/uncompressed,indexed,tokenized<body:This is a body of  
> document>]
>
>
> It seems as though id field is not being stored in the Index...I  
> can't understand why not as I can have added it to the document,
>
>
> I would be grateful if anyone could help!
>
>
> Cheers
> Amin
>
> P.S. Merry Christmas!
>


--Apple-Mail-7-760598829--

From java-user-return-37946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 27 00:38:42 2008
Return-Path: <java-user-return-37946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29717 invoked from network); 27 Dec 2008 00:38:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2008 00:38:42 -0000
Received: (qmail 56587 invoked by uid 500); 27 Dec 2008 00:38:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56552 invoked by uid 500); 27 Dec 2008 00:38:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56541 invoked by uid 99); 27 Dec 2008 00:38:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 16:38:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Dec 2008 00:38:25 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1225502nfd.15
        for <java-user@lucene.apache.org>; Fri, 26 Dec 2008 16:38:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=NhODrBpdP7cYWKtvqaW5TiN0hPPXCwbo5PtvBn/pn+s=;
        b=nOag9m/f+OMeIsalwwWRvZvu0YrjH4QSUFnnpdayOHCSBxyWD3dt0fgatN+19cIAQD
         52oiv+mww8uZei65y9VUm1N9MAJDTiqSCyMX9/V2iVDyWmll5AAzaUgnK+O8Q2qOD2a5
         1/HVSSmcIe90bDDoGEdLU5YX8pZqMYo7JkqME=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=hEFT4oEbTpZ4lTO8D+zUtJ244MY135JYPWyoU5GmQfSdB8zfPBZ5JOGIdGYLI4QDNq
         Qy66Kq6oIVd1Go9bsfjINC0Jd0d39kMurXzsCYhLcb73kcbdtEiJlR6DoUAv0BTL+SkT
         tImLjeA4c1AI5ukn53cY6MYotmuEnTXh9ZygE=
Received: by 10.210.54.19 with SMTP id c19mr13234843eba.191.1230338285091;
        Fri, 26 Dec 2008 16:38:05 -0800 (PST)
Received: from c-2ce6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se (c-2ce6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se [85.227.230.44])
        by mx.google.com with ESMTPS id f3sm27054427nfh.74.2008.12.26.16.38.04
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Dec 2008 16:38:04 -0800 (PST)
Message-Id: <F5B9450D-0F97-4F3D-B207-E670DF6155F0@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <b4615b180812250520j24a49f82wc89092f56f59a3f9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Any way to ignore repeated terms in TF calculation?
Date: Sat, 27 Dec 2008 01:38:03 +0100
References: <b4615b180812250520j24a49f82wc89092f56f59a3f9@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Israel,

you can solve your problem at search time by passing a custom  
Similarity class that looks something like this:

>   private Similarity similarity = new DefaultSimilarity() {
>     public float tf(float v) {
>       return 1f;
>     }
>     public float tf(int i) {
>       return 1f;
>     }
>   };


See javadocs for details.

   karl

25 dec 2008 kl. 14.20 skrev Israel Tsadok:

> A recurring problem I have with Lucene results is when a document  
> contains
> the same word over and over again. If for some reason I have a  
> document
> containing "badger badger badger badger badger badger badger  
> badger", it
> would appear high on the search results for "badger", even though it's
> usually a useless document.
> What I would like to do is ignore repeating words when counting the  
> term
> frequency. At first, I thought I could achieve this by indexing with a
> TokenFilter that would skip repeated tokens, but then a search for  
> e.g.
> "Rochelle Rochelle" would return no results.
>
> What I would like is to index all 8 "badger"s, but have the  
> frequency of
> "badger" saved as 1. Is that even possible?
>
> Digging around in Lucene code, I found term frequency calculations
> in FreqProxTermsWriterPerField.addTerm() - is that where I need to  
> look?
>
> Any help would be appreciated.
> Israel


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 27 01:23:08 2008
Return-Path: <java-user-return-37947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35292 invoked from network); 27 Dec 2008 01:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2008 01:23:07 -0000
Received: (qmail 75484 invoked by uid 500); 27 Dec 2008 01:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75452 invoked by uid 500); 27 Dec 2008 01:22:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75441 invoked by uid 99); 27 Dec 2008 01:22:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 17:22:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Dec 2008 01:22:50 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1226594nfd.15
        for <java-user@lucene.apache.org>; Fri, 26 Dec 2008 17:22:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=P+JReMYMwGfyTgWrivLB941SIvMVVbjBLVEccnQxsBw=;
        b=TnYst/xvMAZ2K3OVXLDRpeXN3QxfPb2saJdBw+bxbM/5Wurr0JLK91TV6LSXVl/duG
         gXmLlBQJ1iE1SZVE93BY15BK5Z8PELPFNOdQZ5rQacwQd/9O9HmCqM0/++H3O3YIQZ83
         cmLkT4MsQG2RlS6jonF9VWaSaqxR0VVi/hnN0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=M7LMw6eOLP6crDg4WmMjAazGh58xNM1JHGSmbO/RKp0cmGq9YCCto9tAeziNwkeF1i
         xFp1A/IQSczX1XqubWLUmzCQP2d/yBIBu7ZCJ6rd9K2Em2HEn/zppAQQLqwi3eSqey0q
         3hoUskLQlznTdWzCrepiFaYECnW8IWiwSK6DE=
Received: by 10.210.45.17 with SMTP id s17mr13303794ebs.69.1230340949853;
        Fri, 26 Dec 2008 17:22:29 -0800 (PST)
Received: from c-2ce6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se (c-2ce6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se [85.227.230.44])
        by mx.google.com with ESMTPS id k10sm25317030nfh.56.2008.12.26.17.22.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 26 Dec 2008 17:22:29 -0800 (PST)
Message-Id: <BEC11C35-3A7D-4A47-A4C0-3D55650AD4C7@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Payloads
Date: Sat, 27 Dec 2008 02:22:28 +0100
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I would very much like to hear how people use payloads.

Personally I use them for weight only. And I use them a lot, almost in =20=

all applications. I factor the weight of synonyms, stems, =20
dediacritization and what not. I create huge indices that contains =20
lots tokens at the same position but with different weights. I might =20
for instance create the stream "(1)mot=F6rhead^1", "(0)motorhead^0.7" =20=

and I'll do this at both index and query time, i.e. I use the payload =20=

weight to calculate both payload weight used by the BoostingTermQuery =20=

scorer AND to set the boost in the query at the same time.

In order to handle this I use an interface that looks something like =20
this:

public interface PayloadWeightHandler {
   public void setWeight(Token token, float weight);
   public float getWeight(Token token);
}

In order to use this I had to patch pretty much any filter I use and =20
pass down a weight factor, something like:

TokenStream ts =3D analyzer.tokenStream(f, new StringReader("mot=F6rhead =
=20
ace of spaces"));
ts =3D new SynonymTokenFilter(ts, synonyms, 0.7f);
ts =3D new StemmerFilter(ts, 0.7f);
ts =3D new ASCIIFoldingFilter(ts, 0.5f);

All these filters would, if applicable, create new synonym tokens with =20=

slightly less weight than the input rather than replace token content:

"(1)m=F6torhead^1", "(0)motorhead^0.5", "(1)ace^1", "(1)of^1", =20
"(1)spades^1", "(1)spad^0.7"

I usually use 4 byte floats while creating the stream and then convert =20=

it to 8 bit floats in a final filter before adding it to the document.

Is anyone else doing something similar? It would be nice to normalize =20=

this and perhaps come up with a reusable API for this. It would also =20
be cool if all the existing filters could be rewritten to handle this =20=

stuff.

I find it to be extemely useful when creating indices with rather =20
niched content such as song titles, names of people, street addresses, =20=

et c. For the last year or so I've done several (3) commercial =20
implementations where I try to extend the index with incorrect typed =20
queries but unique enough that it does not interfere with the quality =20=

of the results. It has been very successful, people get great =20
responses in great time even though they enter an "incorrect" query.

On a side note, in these implementaions I've completely replaced =20
phrase queries using shingles. ShingleMatrixQuery has some built in =20
goodies for calculating weight. Combined with SSD I see awesome =20
results with very short response time even in fairly large indices =20
(10M-100M documents). I'm talking about 100ms-500ms for rather complex =20=

queries under heavy load.


       karl=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 27 02:42:25 2008
Return-Path: <java-user-return-37948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68200 invoked from network); 27 Dec 2008 02:42:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2008 02:42:25 -0000
Received: (qmail 2192 invoked by uid 500); 27 Dec 2008 02:42:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2155 invoked by uid 500); 27 Dec 2008 02:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2144 invoked by uid 99); 27 Dec 2008 02:42:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 26 Dec 2008 18:42:17 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Dec 2008 02:42:08 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 20C657B311
	for <java-user@lucene.apache.org>; Fri, 26 Dec 2008 18:41:46 -0800 (PST)
Message-Id: <3CB8C1C2-C62A-4750-8073-E06863722A25@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <177095940812250140s741ecd1ag6bab50a0ea225118@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: TermsVector
Date: Fri, 26 Dec 2008 21:41:44 -0500
References: <177095940812250140s741ecd1ag6bab50a0ea225118@mail.gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the Field.TermVector options to the Field constructor.   
You will need to add this attribute at index time, then during search,  
you can use IndexReader.getTermFreqVector (or it's variants).

-Grant

On Dec 25, 2008, at 4:40 AM, Shahid Faiz wrote:

> Hi,
>
> I am new to lucene. I am trying to build term clusters based on the  
> results
> returned by a query. Is there any way I can get terms of resulted  
> documents
> and their scores?
>
> Thanks,
> shahid

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 27 17:38:07 2008
Return-Path: <java-user-return-37949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25519 invoked from network); 27 Dec 2008 17:38:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2008 17:38:06 -0000
Received: (qmail 8606 invoked by uid 500); 27 Dec 2008 17:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8575 invoked by uid 500); 27 Dec 2008 17:37:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8564 invoked by uid 99); 27 Dec 2008 17:37:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Dec 2008 09:37:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Dec 2008 17:37:48 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 24846109F30
	for <java-user@lucene.apache.org>; Sat, 27 Dec 2008 09:37:26 -0800 (PST)
Message-Id: <504AB48F-0962-4650-92C8-3FC977C8F213@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <BEC11C35-3A7D-4A47-A4C0-3D55650AD4C7@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Payloads
Date: Sat, 27 Dec 2008 12:37:24 -0500
References: <BEC11C35-3A7D-4A47-A4C0-3D55650AD4C7@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Very cool stuff Karl.  Would love to see some TREC-style evaluations =20
for the ShingleMatrixQuery stuff just to see some comparisons.  Also, =20=

you might have a look at the new TokenStream stuff that is in 2.9 and =20=

is a start on it's way towards Flexible Indexing.  I think this may =20
actually allow you to have more strongly typed payloads which means =20
you won't have to decode (well, kind of, Lucene will do the decoding =20
for you).  Only problem is they aren't yet supported on the search =20
side.  In other words, your wish for a reusable API is being worked on.

Have a look at Michael Busch's ApacheCon NO (I think it's up on the AC =20=

website)

-Grant

On Dec 26, 2008, at 8:22 PM, Karl Wettin wrote:

> I would very much like to hear how people use payloads.
>
> Personally I use them for weight only. And I use them a lot, almost =20=

> in all applications. I factor the weight of synonyms, stems, =20
> dediacritization and what not. I create huge indices that contains =20
> lots tokens at the same position but with different weights. I might =20=

> for instance create the stream "(1)mot=F6rhead^1", "(0)motorhead^0.7" =20=

> and I'll do this at both index and query time, i.e. I use the =20
> payload weight to calculate both payload weight used by the =20
> BoostingTermQuery scorer AND to set the boost in the query at the =20
> same time.
>
> In order to handle this I use an interface that looks something like =20=

> this:
>
> public interface PayloadWeightHandler {
>  public void setWeight(Token token, float weight);
>  public float getWeight(Token token);
> }
>
> In order to use this I had to patch pretty much any filter I use and =20=

> pass down a weight factor, something like:
>
> TokenStream ts =3D analyzer.tokenStream(f, new StringReader("mot=F6rhead=
 =20
> ace of spaces"));
> ts =3D new SynonymTokenFilter(ts, synonyms, 0.7f);
> ts =3D new StemmerFilter(ts, 0.7f);
> ts =3D new ASCIIFoldingFilter(ts, 0.5f);
>
> All these filters would, if applicable, create new synonym tokens =20
> with slightly less weight than the input rather than replace token =20
> content:
>
> "(1)m=F6torhead^1", "(0)motorhead^0.5", "(1)ace^1", "(1)of^1", =20
> "(1)spades^1", "(1)spad^0.7"
>
> I usually use 4 byte floats while creating the stream and then =20
> convert it to 8 bit floats in a final filter before adding it to the =20=

> document.
>
> Is anyone else doing something similar? It would be nice to =20
> normalize this and perhaps come up with a reusable API for this. It =20=

> would also be cool if all the existing filters could be rewritten to =20=

> handle this stuff.
>
> I find it to be extemely useful when creating indices with rather =20
> niched content such as song titles, names of people, street =20
> addresses, et c. For the last year or so I've done several (3) =20
> commercial implementations where I try to extend the index with =20
> incorrect typed queries but unique enough that it does not interfere =20=

> with the quality of the results. It has been very successful, people =20=

> get great responses in great time even though they enter an =20
> "incorrect" query.
>
> On a side note, in these implementaions I've completely replaced =20
> phrase queries using shingles. ShingleMatrixQuery has some built in =20=

> goodies for calculating weight. Combined with SSD I see awesome =20
> results with very short response time even in fairly large indices =20
> (10M-100M documents). I'm talking about 100ms-500ms for rather =20
> complex queries under heavy load.
>
>
>      karl
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 27 17:38:39 2008
Return-Path: <java-user-return-37950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25786 invoked from network); 27 Dec 2008 17:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2008 17:38:39 -0000
Received: (qmail 10249 invoked by uid 500); 27 Dec 2008 17:38:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10219 invoked by uid 500); 27 Dec 2008 17:38:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10208 invoked by uid 99); 27 Dec 2008 17:38:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Dec 2008 09:38:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Dec 2008 17:38:24 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBRHc3Rt002094
	for <java-user@lucene.apache.org>; Sat, 27 Dec 2008 11:38:03 -0600
Received: (qmail 20446 invoked by uid 0); 27 Dec 2008 11:38:02 -0600
Date: 27 Dec 2008 11:38:02 -0600
Message-ID: <20081227173802.20445.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Payloads
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 331889465 - b0f70dbefc3d
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=331889465&m=b0f70dbefc3d&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=331889465&m=b0f70dbefc3d&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=331889465&m=b0f70dbefc3d&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 27 17:39:12 2008
Return-Path: <java-user-return-37951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26047 invoked from network); 27 Dec 2008 17:39:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2008 17:39:12 -0000
Received: (qmail 11958 invoked by uid 500); 27 Dec 2008 17:39:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11927 invoked by uid 500); 27 Dec 2008 17:39:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11916 invoked by uid 99); 27 Dec 2008 17:39:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Dec 2008 09:39:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Dec 2008 17:38:56 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBRHcYT7029063
	for <java-user@lucene.apache.org>; Sat, 27 Dec 2008 11:38:34 -0600
Received: (qmail 20760 invoked by uid 0); 27 Dec 2008 11:38:34 -0600
Date: 27 Dec 2008 11:38:34 -0600
Message-ID: <20081227173834.20759.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Payloads
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 331889562 - eaa591454225
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=331889562&m=eaa591454225&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=331889562&m=eaa591454225&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=331889562&m=eaa591454225&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 27 21:16:47 2008
Return-Path: <java-user-return-37952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78408 invoked from network); 27 Dec 2008 21:16:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2008 21:16:46 -0000
Received: (qmail 47601 invoked by uid 500); 27 Dec 2008 21:16:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47569 invoked by uid 500); 27 Dec 2008 21:16:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47558 invoked by uid 99); 27 Dec 2008 21:16:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 27 Dec 2008 13:16:38 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.136.44.41] (HELO n69.bullet.mail.sp1.yahoo.com) (98.136.44.41)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 27 Dec 2008 21:16:26 +0000
Received: from [216.252.122.217] by n69.bullet.mail.sp1.yahoo.com with NNFMP; 27 Dec 2008 21:16:02 -0000
Received: from [67.195.9.83] by t2.bullet.sp1.yahoo.com with NNFMP; 27 Dec 2008 21:16:02 -0000
Received: from [67.195.9.108] by t3.bullet.mail.gq1.yahoo.com with NNFMP; 27 Dec 2008 21:16:02 -0000
Received: from [127.0.0.1] by omp112.mail.gq1.yahoo.com with NNFMP; 27 Dec 2008 21:16:02 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 613636.22484.bm@omp112.mail.gq1.yahoo.com
Received: (qmail 6913 invoked by uid 60001); 27 Dec 2008 21:16:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=ymail.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=0m+xatmz8L7AifDsRD8OcQvrtR2HDSyJf4TuN5pvVKdomC1C4VUyr2kXykluRSx00NbgKyjpRZFtrN8EmxnxLK0xvsvJgF1oZ2+RyS/H2UH9RJiEL4gD8WGaG8ckO533Egwf1Hjs+iRIOfgj3LVvFaRH50V01HPPzBEePeEZDPw=;
X-YMail-OSG: CKdlB_cVM1nhqJE8oh3QBr2V_TFAWhZXLokFOqzJUleTfgVqA9AOz9iGDu6kxEWdTWZ_SjxREYxPJ6qaiKxIUHuENbwtVpYoQNQBnyav53k6GsjFRohL9WA6hG60Qpl0xCjja8qDL5H4FJ0DeQRt4qk.4qD_1YjUWeTuORVU88GcKpMiarQghu0EeoJMbA--
Received: from [80.195.188.27] by web112212.mail.gq1.yahoo.com via HTTP; Sat, 27 Dec 2008 13:16:02 PST
X-Mailer: YahooMailRC/1156.77 YahooMailWebService/0.7.260.1
References: <355058.69393.qm@web112205.mail.gq1.yahoo.com> <13D027DC-BBF9-40E9-A10C-D946821AE59A@mikemccandless.com> <734386.88697.qm@web26003.mail.ukl.yahoo.com> <739457.19219.qm@web112206.mail.gq1.yahoo.com> <49511D56.7030006@gmail.com> <49511F0A.1040909@gmail.com> <962651.98805.qm@web112210.mail.gq1.yahoo.com> <49524527.40400@gmail.com> <420034.61808.qm@web112207.mail.gq1.yahoo.com>
Date: Sat, 27 Dec 2008 13:16:02 -0800 (PST)
From: Lebiram <lebiram@ymail.com>
Subject: Re: Optimize and Out Of Memory Errors
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-531003509-1230412562=:6758"
Message-ID: <531792.6758.qm@web112212.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-531003509-1230412562=:6758
Content-Type: text/plain; charset=us-ascii

Hello, 

As an update to this problem:

It seems Luke is also failing on a segment with so much documents in it (norms enabled). 
I was probably too tired to notice that the hits i was getting was coming from a very small segment not the big segment.

So I was back at square one; For testing I created a file without norms in it and luke did not throw any exception. 

Knowing that, I proceeded to investigate any other ways to avoid the norms problem without having to regenerate the new index with norms disabled.

So far, in my local testing the following query code does not seem to fail.
The main thing being ConstantScoreQuery. 
Using this query, processing of norms does not seem to be invoked.
I'll still have to check more on this in detail..

Filter dateFilter = new RangeFilter("timestamp", DateTools.dateToString(start, DateTools.Resolution.SECOND),
                         DateTools.dateToString(end, DateTools.Resolution.SECOND), true, true);
ConstantScoreQuery dateQuery = new ConstantScoreQuery(dateFilter);
        
BooleanQuery.setMaxClauseCount(1024); 
BooleanQuery query = new BooleanQuery();        
query.add(dateQuery, BooleanClause.Occur.MUST);
        
Analyzer analyzer = new StandardAnalyzer();

QueryParser parser;
        if (!isEmpty(content)) {
            try {
                parser = new QueryParser("content", analyzer);                
                ConstantScoreQuery contentQuery = new ConstantScoreQuery(new QueryWrapperFilter(parser.parse(content)));                
                query.add(contentQuery, BooleanClause.Occur.MUST);                
            } catch (ParseException pe) {
                log.error("content could not be parsed.");
            }
        }




________________________________
From: Lebiram <lebiram@ymail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 24, 2008 2:43:12 PM
Subject: Re: Optimize and Out Of Memory Errors


Hello Mark, 

As of the moment the index could not be rebuilt to remove norms.

Right now, I'm trying to figure out what luke is doing by going through source code.

Using whatever settings I find, create a very small app just to do a bit of search.
This small app has 1600 mb heapspace while luke just has 256 max for heap space.

On reading the same big 1 segment index with 166 million docs, 
luke fails during checkIndex when it checks the norms, but searching is okay as long as I limit it to say a few thousand documents.
However it's not the same for my app, been trying to limit it It still reads way too much data.

I'm wondering if this has anything to do with Similarity and Scoring. 
I was wondering if you could lead me to some settings or any clever tweaks. 

This problem will haunt me this christmas. :O




________________________________
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 24, 2008 2:20:23 PM
Subject: Re: Optimize and Out Of Memory Errors

We don't know those norms are "the" problem. Luke is loading norms if its searching that index. But what else is Luke doing? What else is your App doing? I suspect your app requires more RAM than Luke? How much RAM do you have and much are you allocating to the JVM?

The norms are not necessarily the problem you have to solve - but it would appear they are taking up over 2 gig of memory. Unless you have some to spare (and it sounds like you may not), it could be a good idea to turn them off for particular fields.

- Mark

Lebiram wrote:
> Is there away to not factor in norms data in scoring somehow?
> 
> I'm just stumped as to how Luke is able to do a seach (with limit) on the docs but in my code it just dies with OutOfMemory errors.
> How does Luke not allocate these norms?
> 
> 
> 
> 
> ________________________________
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, December 23, 2008 5:25:30 PM
> Subject: Re: Optimize and Out Of Memory Errors
> 
> Mark Miller wrote:
>  
>> Lebiram wrote:
>>    
>>> Also, what are norms      
>> Norms are a byte value per field stored in the index that is factored into the score. Its used for length normalization (shorter documents = more important) and index time boosting. If you want either of those, you need norms. When norms are loaded up into an IndexReader, its loaded into a byte[maxdoc] array for each field - so even if one document out of 400 million has a field, its still going to load byte[maxdoc] for that field (so a lot of wasted RAM).  Did you say you had 400 million docs and 7 fields? Google says that would be:
>> 
>> 
>>    **400 million x 7 byte = 2 670.28809 megabytes**
>> 
>> On top of your other RAM usage.
>>    
> Just to avoid confusion, that should really read a byte per document per field. If I remember right, it gives 255 boost possibilities, limited to 25 with length normalization.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
>        


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-531003509-1230412562=:6758--


From java-user-return-37953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 28 19:50:47 2008
Return-Path: <java-user-return-37953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67286 invoked from network); 28 Dec 2008 19:50:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2008 19:50:47 -0000
Received: (qmail 19744 invoked by uid 500); 28 Dec 2008 19:50:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19701 invoked by uid 500); 28 Dec 2008 19:50:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19689 invoked by uid 99); 28 Dec 2008 19:50:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Dec 2008 11:50:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Dec 2008 19:50:30 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id BF0207FA8
	for <java-user@lucene.apache.org>; Sun, 28 Dec 2008 11:50:08 -0800 (PST)
Message-Id: <81148B83-B4B7-4A91-B4E8-8AF290E25C83@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <2E93DCB9-1072-4EB8-90BD-7AA036C8858D@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Field Not Present In Document
Date: Sun, 28 Dec 2008 14:50:07 -0500
References: <2E93DCB9-1072-4EB8-90BD-7AA036C8858D@gmail.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

How do you know that document in question has an id of 1, as in when  
you do:  Document documentFromIndex = indexReader.document(1)

I would fire up Luke (http://www.getopt.org/luke) against your index  
and see what is inside of it.


On Dec 26, 2008, at 3:19 PM, Amin Mohammed-Coleman wrote:

> Hi
>
> I have the following situation:
>
> Document document = new Document();
> 		String body ="This is a body of document";
> 		Field field = new Field("body", body, Field.Store.YES,  
> Field.Index.ANALYZED);
> 		document.add(field);
> 		
> 		String id ="1234";
> 		Field idField = new Field("id", id, Field.Store.YES,  
> Field.Index.ANALYZED);
> 		document.add(idField);
> 		rtfIndexer.add(document);
> 		System.out.println(document.getFields());
> 		
>
>
> When I print the fields of the document I get the following:
>
>
> stored/uncompressed,indexed,tokenized<body:This is a body of  
> document>, stored/uncompressed,indexed,tokenized<id:1234>]
>
>
> The RtfIndexer looks like this:
>
> 	public void add(Document document) {
> 		IndexWriter rtfIndexWriter =  
> IndexWriterFactory.createIndexWriter(rtfDirectory, analyzer);
> 		try {
> 			rtfIndexWriter.addDocument(document);
> 			LOGGER.debug("Added Document:" + document + " to index");
> 			commitAndOptimise(rtfIndexWriter);
> 		} catch (CorruptIndexException e) {
> 			throw new IllegalStateException(e);
> 		} catch (IOException e) {
> 			throw new IllegalStateException(e);
> 		}
> 	}
>
> 	private void commitAndOptimise(IndexWriter rtfIndexWriter) throws  
> CorruptIndexException,IOException {
> 		LOGGER.debug("Committing document and closing index writer");
> 		rtfIndexWriter.optimize();
> 		rtfIndexWriter.commit();
> 		rtfIndexWriter.close();
> 	}
>
>
>
> However I load the Document using the below code:
>
> 		Directory directory = ((RtfIndexer)rtfIndexer).getDirectory();
> 		IndexReader indexReader = IndexReader.open(directory);
> 		Document documentFromIndex = indexReader.document(1);
> 		System.out.println(documentFromIndex.getFields());
>
> I get:
>
> [stored/uncompressed,indexed,tokenized<body:This is a body of  
> document>]
>
>
> It seems as though id field is not being stored in the Index...I  
> can't understand why not as I can have added it to the document,
>
>
> I would be grateful if anyone could help!
>
>
> Cheers
> Amin
>
> P.S. Merry Christmas!
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 28 19:51:21 2008
Return-Path: <java-user-return-37954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67484 invoked from network); 28 Dec 2008 19:51:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2008 19:51:20 -0000
Received: (qmail 22088 invoked by uid 500); 28 Dec 2008 19:51:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22061 invoked by uid 500); 28 Dec 2008 19:51:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22050 invoked by uid 99); 28 Dec 2008 19:51:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Dec 2008 11:51:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Dec 2008 19:51:06 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBSJoitM004458
	for <java-user@lucene.apache.org>; Sun, 28 Dec 2008 13:50:44 -0600
Received: (qmail 28010 invoked by uid 0); 28 Dec 2008 13:50:44 -0600
Date: 28 Dec 2008 13:50:44 -0600
Message-ID: <20081228195044.28009.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Field Not Present In Document
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.17
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 332175146 - 1c9a8f4f2eab
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=332175146&m=1c9a8f4f2eab&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=332175146&m=1c9a8f4f2eab&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=332175146&m=1c9a8f4f2eab&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 28 19:51:54 2008
Return-Path: <java-user-return-37955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67580 invoked from network); 28 Dec 2008 19:51:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2008 19:51:54 -0000
Received: (qmail 24759 invoked by uid 500); 28 Dec 2008 19:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23768 invoked by uid 500); 28 Dec 2008 19:51:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23750 invoked by uid 99); 28 Dec 2008 19:51:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Dec 2008 11:51:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Dec 2008 19:51:38 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBSJpGRc004869
	for <java-user@lucene.apache.org>; Sun, 28 Dec 2008 13:51:16 -0600
Received: (qmail 28458 invoked by uid 0); 28 Dec 2008 13:51:16 -0600
Date: 28 Dec 2008 13:51:16 -0600
Message-ID: <20081228195116.28457.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Field Not Present In Document
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.17
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 332175250 - 1b57e44d0901
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=332175250&m=1b57e44d0901&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=332175250&m=1b57e44d0901&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=332175250&m=1b57e44d0901&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 28 20:35:43 2008
Return-Path: <java-user-return-37956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73139 invoked from network); 28 Dec 2008 20:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2008 20:35:41 -0000
Received: (qmail 38512 invoked by uid 500); 28 Dec 2008 20:35:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38486 invoked by uid 500); 28 Dec 2008 20:35:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 31218 invoked by uid 99); 28 Dec 2008 20:21:16 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vcomandur@gmail.com designates 209.85.198.228 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=2Etk9DnUX1+hueIxDtYXOiku6sYch4DRR6bS5nPcezQ=;
        b=mWpjqJ5R+n7WwItA7VEYsvts0MhfzkutJrMJF1vPHuvmlPUVgSv4USz2EUO1M74WCk
         Vfx2do8UweTI4VHhyrcPaBV06elUroJ/MAZj/SLNSHOhwHGeaRIEev9nxPCGTWwJmABl
         1N2VuFSNqNMfwHmFCg5lBzaLIhfKiV8RSgXI4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=LH+zsf4E1r+Jp99uBEXQwZr4QsaIujVN4XE7RcmdY+joCogvCynWn1mqgZsj5q5/KJ
         QoFgLmAoZkmfFowFCBPx2/DMqENLfqwjvMCpj1d747YmnD/wnjIwouqArvZYzGBgXgus
         4bo3nbLPKZXzjSLg+g0F41/wVDMeqoV8r+tZw=
Message-ID: <a59386fa0812281220q22cdaa12i157d4ff5e7959e2f@mail.gmail.com>
Date: Mon, 29 Dec 2008 01:50:47 +0530
From: "Vasudevan Comandur" <vcomandur@gmail.com>
To: java-user@lucene.apache.org
Subject: Proximity Search between phrases
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93538_2880346.1230495647358"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93538_2880346.1230495647358
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

    I am new to using Lucene Indexing Server and to query syntax as well. I
went through the documentation about using proximity searches between 2
words.

    But I would like to use proximity searches between two phrases. How do I
construct the Query for Lucene to fetch the relevant documents.?

    For Ex. The query is "Economic Meltdown in Asian Countries" and the two
phrases are "Economic Meltdown" and "Asian Countries". I would like to
    use proximity search between the two phrases.

   How can I construct the Lucene query for proximity search between two
phrases.

   I appreciate your help on this.

Regards
 Vasu

------=_Part_93538_2880346.1230495647358--

From java-user-return-37957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 28 21:03:22 2008
Return-Path: <java-user-return-37957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76937 invoked from network); 28 Dec 2008 21:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2008 21:03:22 -0000
Received: (qmail 50558 invoked by uid 500); 28 Dec 2008 21:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50525 invoked by uid 500); 28 Dec 2008 21:03:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50514 invoked by uid 99); 28 Dec 2008 21:03:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Dec 2008 13:03:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.250] (HELO web50709.mail.re2.yahoo.com) (206.190.38.250)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 28 Dec 2008 21:03:06 +0000
Received: (qmail 54877 invoked by uid 60001); 28 Dec 2008 21:02:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=4pmjd/KiNax8fsLxnZqURo90YuPlIhJ0SoTggiSgIkIHHhkWJseiKzFzV2MZd6I4P6nI3w0p+I7f3yk7TCQ7eXfZVdcCU1p5lcwkuRgc3tDH87+cQPce3a5Oq5pBkHhImwEEiOza879q2UgnvTpcJs0Rv6x72LF06zJcrWD+WpE=;
X-YMail-OSG: vCdVs7UVM1lu0U3tkxk5sTMWcaVXEA3WgH2oAcScs5RycNO_OGoHlTNBHp1PU6jFrawJPRIlzaCiS0t0LPGS_vqfuwzhMLvM1InsW652.sahfmNwurMd82Wy8daMGc2N1VW4GFwr0q.ic4eMFAYYlSfj9Wm1Svb8bOU.5BLzRz4fi2UxsVUTPyWML.pRySMTdIwT12emWFTb32bn28.kwH6foMZ_Y8tE
Received: from [98.216.104.214] by web50709.mail.re2.yahoo.com via HTTP; Sun, 28 Dec 2008 13:02:45 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <a59386fa0812281220q22cdaa12i157d4ff5e7959e2f@mail.gmail.com>
Date: Sun, 28 Dec 2008 13:02:45 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Re: Proximity Search between phrases
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <152335.54733.qm@web50709.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Take a look at SpanQuery and SpanNearQuery.


----- Original Message ----
From: Vasudevan Comandur <vcomandur@gmail.com>
To: java-user@lucene.apache.org
Sent: Sunday, December 28, 2008 3:20:47 PM
Subject: Proximity Search between phrases

Hello,

    I am new to using Lucene Indexing Server and to query syntax as well. I
went through the documentation about using proximity searches between 2
words.

    But I would like to use proximity searches between two phrases. How do I
construct the Query for Lucene to fetch the relevant documents.?

    For Ex. The query is "Economic Meltdown in Asian Countries" and the two
phrases are "Economic Meltdown" and "Asian Countries". I would like to
    use proximity search between the two phrases.

   How can I construct the Lucene query for proximity search between two
phrases.

   I appreciate your help on this.

Regards
Vasu



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 28 21:20:18 2008
Return-Path: <java-user-return-37958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78696 invoked from network); 28 Dec 2008 21:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2008 21:20:18 -0000
Received: (qmail 55370 invoked by uid 500); 28 Dec 2008 21:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55329 invoked by uid 500); 28 Dec 2008 21:20:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55317 invoked by uid 99); 28 Dec 2008 21:20:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Dec 2008 13:20:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of vcomandur@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 28 Dec 2008 21:20:03 +0000
Received: by wf-out-1314.google.com with SMTP id 28so4394438wfc.20
        for <java-user@lucene.apache.org>; Sun, 28 Dec 2008 13:19:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=htbAsRWAk2CCrb1OLNMfTPuxxqgxdSCwbnBB/hHMub8=;
        b=d9bVnpiZMfz+yFgNLjR3LDI7UYP77GUx2WHiMMgsgGBb2JRdrO786WtigYJYOj6cui
         0RQkqeUmVBhu6GXt7bgAmaSZ/996ikY3JSX4XOlYCLdM2jf3/2gbiGFNbqSN2PUZMi9/
         F3zvP/Syu61HqGLyaYaDrcexduVZjbckfWHfk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=IT0YZCTTTyWuBc29Dzy3FJaO9gOqsDetdLMjTIgPHsZVJO+WRNIrlhJ7o2aOKcRPNg
         LiIqRbjPBVA3CLAljfuKZk+mMjzcms2xl1kcle4Wgb7GrQ8doHBjkk1CjmLo1fVyZCFa
         wyWEeyEAXa7mIHgZcibSZ7j2AXBUoeXocULug=
Received: by 10.143.8.10 with SMTP id l10mr5384933wfi.175.1230499182430;
        Sun, 28 Dec 2008 13:19:42 -0800 (PST)
Received: by 10.143.59.10 with HTTP; Sun, 28 Dec 2008 13:19:42 -0800 (PST)
Message-ID: <a59386fa0812281319i72b9a78es1cf8323933231cd0@mail.gmail.com>
Date: Mon, 29 Dec 2008 02:49:42 +0530
From: "Vasudevan Comandur" <vcomandur@gmail.com>
To: java-user@lucene.apache.org
Subject: Proximity Search between phrases
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93727_31513880.1230499182413"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93727_31513880.1230499182413
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

    I am new to using Lucene Indexing Server and to query syntax as well. I
went through the documentation about using proximity searches between 2
words.

    But I would like to use proximity searches between two phrases. How do I
construct the Query for Lucene to fetch the relevant documents.?

    For Ex. The query is "Economic Meltdown in Asian Countries" and the two
phrases are "Economic Meltdown" and "Asian Countries". I would like to
    use proximity search between the two phrases.

   How can I construct the Lucene query for proximity search between two
phrases.

   I appreciate your help on this.

Regards
 Vasu

------=_Part_93727_31513880.1230499182413--

From java-user-return-37959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 08:57:45 2008
Return-Path: <java-user-return-37959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87570 invoked from network); 29 Dec 2008 08:57:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 08:57:45 -0000
Received: (qmail 21715 invoked by uid 500); 29 Dec 2008 08:57:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21679 invoked by uid 500); 29 Dec 2008 08:57:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21662 invoked by uid 99); 29 Dec 2008 08:57:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 00:57:37 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [67.195.8.204] (HELO web110304.mail.gq1.yahoo.com) (67.195.8.204)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Dec 2008 08:57:28 +0000
Received: (qmail 24330 invoked by uid 60001); 29 Dec 2008 08:57:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=PdasH3XVUL+K6I50z397lgxDNEfV0X4oyLAaeuA/mNlweiz9HKIgIu3uH+E9MsWqwT+yI5N8XYnIhXzl2b+S2kMzsHp3lu1aoe68I0K+71v+YOclqHVomlIpaA9iu3k55h/bE8KYBC7wj9rgGNTTKUqQS4jOnnPXREWjeqZO0JM=;
X-YMail-OSG: cTqh3ZYVM1k8kjR2plBbpr7sKuVSfyEA.1tF22aqQ7svrJg4L1Hde8oDURgeVN8wMhNo5tSVIjbc.CSg_mpN4G.mR.YILLjjzwdMKQQ4.7ZC72xIEZxrQsPpi062S8NDytDafTP_.rsMQ4ndtMQl_GN7edL6fUh5roWeO8yxNdHs39e9B3cHj1UUkRJrpHfovURw6BFk5K8JaEH6dKcbuwQu8.qFfL3rMeMBWHbI1sX8QvJm6g--
Received: from [116.197.178.83] by web110304.mail.gq1.yahoo.com via HTTP; Mon, 29 Dec 2008 00:57:05 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Mon, 29 Dec 2008 00:57:05 -0800 (PST)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Reply-To: techcool.kumar@yahoo.com
Subject: Re: Proximity Search between phrases
To: java-user@lucene.apache.org
In-Reply-To: <a59386fa0812281319i72b9a78es1cf8323933231cd0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <649032.24251.qm@web110304.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You could you phrase queries also like "Economic Meltdown" AND "Asian Countries". but these phrases may be too distant from one another to be relevant for your searching purposes. 
To get better result wrt position(distance between phrases), you can use SpanNearQuery.

Let me know if you need more help.

regards,
RB


--- On Sun, 12/28/08, Vasudevan Comandur <vcomandur@gmail.com> wrote:

> From: Vasudevan Comandur <vcomandur@gmail.com>
> Subject: Proximity Search between phrases
> To: java-user@lucene.apache.org
> Date: Sunday, December 28, 2008, 4:19 PM
> Hello,
> 
>     I am new to using Lucene Indexing Server and to query
> syntax as well. I
> went through the documentation about using proximity
> searches between 2
> words.
> 
>     But I would like to use proximity searches between two
> phrases. How do I
> construct the Query for Lucene to fetch the relevant
> documents.?
> 
>     For Ex. The query is "Economic Meltdown in Asian
> Countries" and the two
> phrases are "Economic Meltdown" and "Asian
> Countries". I would like to
>     use proximity search between the two phrases.
> 
>    How can I construct the Lucene query for proximity
> search between two
> phrases.
> 
>    I appreciate your help on this.
> 
> Regards
>  Vasu


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 08:58:28 2008
Return-Path: <java-user-return-37960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87856 invoked from network); 29 Dec 2008 08:58:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 08:58:27 -0000
Received: (qmail 26260 invoked by uid 500); 29 Dec 2008 08:58:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25968 invoked by uid 500); 29 Dec 2008 08:58:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25957 invoked by uid 99); 29 Dec 2008 08:58:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 00:58:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 08:58:11 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBT8vmMN011219
	for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 02:57:49 -0600
Received: (qmail 4361 invoked by uid 0); 29 Dec 2008 02:57:48 -0600
Date: 29 Dec 2008 02:57:48 -0600
Message-ID: <20081229085748.4360.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Proximity Search between phrases
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 332346633 - d751746eb87f
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=332346633&m=d751746eb87f&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=332346633&m=d751746eb87f&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=332346633&m=d751746eb87f&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 08:59:00 2008
Return-Path: <java-user-return-37961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88074 invoked from network); 29 Dec 2008 08:59:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 08:59:00 -0000
Received: (qmail 27916 invoked by uid 500); 29 Dec 2008 08:58:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27885 invoked by uid 500); 29 Dec 2008 08:58:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27874 invoked by uid 99); 29 Dec 2008 08:58:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 00:58:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 08:58:44 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBT8wNbm011408
	for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 02:58:23 -0600
Received: (qmail 4911 invoked by uid 0); 29 Dec 2008 02:58:23 -0600
Date: 29 Dec 2008 02:58:23 -0600
Message-ID: <20081229085823.4910.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Proximity Search between phrases
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 332346797 - 1cc64efe0d41
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=332346797&m=1cc64efe0d41&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=332346797&m=1cc64efe0d41&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=332346797&m=1cc64efe0d41&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 09:55:51 2008
Return-Path: <java-user-return-37962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16117 invoked from network); 29 Dec 2008 09:55:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 09:55:51 -0000
Received: (qmail 61534 invoked by uid 500); 29 Dec 2008 09:55:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61500 invoked by uid 500); 29 Dec 2008 09:55:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61489 invoked by uid 99); 29 Dec 2008 09:55:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 01:55:43 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.198.236 as permitted sender)
Received: from [209.85.198.236] (HELO rv-out-0506.google.com) (209.85.198.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 09:55:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so5894300rvb.5
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 01:55:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=Rl+dmApxqThN6zVK9SaiCns2OSsf8dQO5k6H5HQTWiU=;
        b=uXzBpvvpmugdfVFOQH+u3Z1CUjnJlEyEtN/fNRa4dAq0gtzHCPlinWDeOGm56sPj8Y
         eIOruUw0TYaaMrHePsV2FnRQ80HMMuQT6nZQfhPsccaX3fvUCY+EGPBuT4qmZBMiR+LF
         klO/krSek/NiA+P4Fe4XSZl5nRikMlPthLbyQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=I7Si4KPtpViQT6iZTwi+4nX33HcCSc2yxl7T3GGUCshNCc79wIu5RACKPVCP9T+S/Q
         YgyoIU18Mk2TsBRffdtGp/idYioGhpZgXq+7LEDiDZEJ4H0IISjBs7NAA63YE3HvmQDF
         AmMtuRt2K206nPQegT4JgH/gT/WFkEtEascZQ=
Received: by 10.140.170.21 with SMTP id s21mr6650109rve.205.1230544514782;
        Mon, 29 Dec 2008 01:55:14 -0800 (PST)
Received: by 10.140.127.7 with HTTP; Mon, 29 Dec 2008 01:55:14 -0800 (PST)
Message-ID: <6e3ae6310812290155n1fa218c0na314757f28dae3fe@mail.gmail.com>
Date: Mon, 29 Dec 2008 01:55:14 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: duplication checking while indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_102075_10130915.1230544514772"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_102075_10130915.1230544514772
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am wondering whether there is an easy way to avoid duplication while
indexing, just using the index being created, without creating other data
structures.
In some cases, the incoming document list can have duplicates. For example,
when creating spell checking indexes for phrases. Each phrase is one
document. So I want to check whether the phrase is already indexed or not.

To do so, I can either create a hash map for all the indexed phrases. But
the hash map would consume a lot of memory.
A possible alternative is to search existing index. But remember the index
is being created, and not all contents are flushed to disk yet.

Is it possible to query the not-yet-closed index?

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

------=_Part_102075_10130915.1230544514772--

From java-user-return-37963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 12:20:10 2008
Return-Path: <java-user-return-37963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71615 invoked from network); 29 Dec 2008 12:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 12:20:09 -0000
Received: (qmail 56076 invoked by uid 500); 29 Dec 2008 12:20:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56045 invoked by uid 500); 29 Dec 2008 12:19:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56034 invoked by uid 99); 29 Dec 2008 12:19:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 04:19:59 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of girish@neevtech.com does not designate 209.85.142.187 as permitted sender)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 12:19:47 +0000
Received: by ti-out-0910.google.com with SMTP id b8so3979148tic.11
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 04:19:23 -0800 (PST)
Received: by 10.110.40.8 with SMTP id n8mr622552tin.0.1230553162758;
        Mon, 29 Dec 2008 04:19:22 -0800 (PST)
Received: from ?192.168.1.212? ([122.166.31.66])
        by mx.google.com with ESMTPS id i6sm10126001tid.16.2008.12.29.04.19.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Dec 2008 04:19:19 -0800 (PST)
Message-ID: <4958C03B.6000200@neevtech.com>
Date: Mon, 29 Dec 2008 17:49:07 +0530
From: Girish Naik <girish@neevtech.com>
Reply-To: girish@neevtech.com
Organization: Neev Information Technologies Private Limited
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1b3pre) Gecko/20081204 Thunderbird/3.0b1 ThunderBrowse/3.2.2.1
MIME-Version: 1.0
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: Help in Arabic Analysers with Lucene on Windows
Content-Type: multipart/mixed;
 boundary="------------080003070100030402040809"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------080003070100030402040809
Content-Type: multipart/alternative;
 boundary="------------020108040202030002080004"


--------------020108040202030002080004
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,
     I am having a hard time in indexing the Arabic content and 
searching the same via Lucene. I have also used a Arabic Analyzer from 
the Lucene package but had no luck. I have also used a snowball jar but 
it doesn't contain an Arabic stemmer. So i had put the Lucene Arabic 
Stemmer in snowball jar (with modifications :-X ) but still have not got 
any luck so far.

     Moreover when i dont use any stemmers/ analyzer the search works 
perfectly on a Linux systems, but with Windows system the search does 
not work at all =-O

If anybody has any kind of solution or ideas, then please send it 
across. I will be very happy to implement and test them.

Thanks in Advance.

-- 

------------------------------------------------------------------------

Regards,

Please do not print this email unless it is absolutely necessary.
*Girish Naik*
Development Lead

*Neev Information Technologies Pvt Ltd* <http://www.neevtech.com>
Bangalore, Karnataka India

Mozilla Store <http://www.spreadfirefox.com/node&id=182416&t=260> 
*Mobile:* 91 09740091638
*Email:* girish.naik@gmail.com <mailto:girish.naik@gmail.com>
*IM:* girish.naik (Skype)
*http://www.linkedin.com/in/girishnaik*

Mozilla Store <http://www.spreadfirefox.com/node&id=182416&t=262> 	Join 
Neev Information Technologies Private Limited Group in LinkedIn 
<http://www.linkedin.com/e/gis/68693/571D4D044006>

Fools rush in where angels fear to tread

See who we know in common <http://www.linkedin.com/e/wwk/4759877/> 	Want 
a signature like this? <http://www.linkedin.com/e/sig/4759877/>


------------------------------------------------------------------------
The information contained in this electronic message and any attachments 
to this message are intended for the exclusive use of the addressee(s) 
and may contain proprietary, confidential or privileged information. If 
you are not the intended recipient, you should not disseminate, 
distribute or copy this e-mail. Please notify the sender immediately and 
destroy all copies of this message and any attachments.
*WARNING:* Computer viruses can be transmitted via email. The recipient 
should check this email and any attachments for the presence of viruses. 
The company accepts no liability for any damage caused by any virus 
transmitted by this email.
------------------------------------------------------------------------

--------------020108040202030002080004
Content-Type: multipart/related;
 boundary="------------070901060903070000040200"


--------------070901060903070000040200
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>

<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000">
Hi,<br>
&nbsp;&nbsp;&nbsp; I am having a hard time in indexing the Arabic content and
searching the same via Lucene. I have also used a Arabic Analyzer from
the Lucene package but had no luck. I have also used a snowball jar but
it doesn't contain an Arabic stemmer. So i had put the Lucene Arabic
Stemmer in snowball jar (with modifications&nbsp;<span class="moz-smiley-s16"><span>
:-X </span></span> ) but still have not got any luck so far.<br>
<br>
&nbsp;&nbsp;&nbsp; Moreover when i dont use any stemmers/ analyzer the search works
perfectly on a Linux systems, but with Windows system the search does
not work at all <span class="moz-smiley-s8"><span> =-O </span></span><br>
<br>
If anybody has any kind of solution or ideas, then please send it
across. I will be very happy to implement and test them.<br>
<br>
Thanks in Advance.<br>
<br>
<div class="moz-signature">-- <br>
<br>
<hr>
<br>
Regards,
<br>
<br>
<table border="0" cellpadding="0" cellspacing="0" width="600">
  <tbody>
    <tr>
      <td
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: rgb(0, 0, 119);"
 colspan="2" align="center"><marquee>Please do not print this email
unless it is absolutely necessary.</marquee></td>
    </tr>
    <tr>
      <td colspan="2"
 style="border-top: 1px solid rgb(204, 204, 204); padding: 10px;">
      <table
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 11px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;"
 border="0" cellpadding="0" cellspacing="0" width="100%">
        <tbody>
          <tr style="line-height: 15px;" valign="top">
            <td width="40%"> <b style="font-size: 14px;">Girish Naik</b><br>
            <span style="font-size: 12px;">Development Lead</span><br>
            <br>
            <a target="nw" href="http://www.neevtech.com"><b>Neev
Information Technologies Pvt Ltd</b></a><br>
Bangalore, Karnataka India<br>
            <br>
            <a href="http://www.spreadfirefox.com/node&amp;id=182416&amp;t=260"><img
 alt="Mozilla Store" title="Mozilla Store"
 src="cid:part1.01010401.01090005@neevtech.com" border="0"></a> </td>
            <td style="padding-left: 10px;" nowrap="nowrap" width="40%">
            <b style="color: rgb(153, 153, 153);">Mobile:</b> 91
09740091638<br>
            <b style="color: rgb(153, 153, 153);">Email:</b> <a
 target="nw" href="mailto:girish.naik@gmail.com"
 style="text-decoration: none; color: rgb(0, 0, 0);">girish.naik@gmail.com</a><br>
            <b style="color: rgb(153, 153, 153);">IM:</b> girish.naik
(Skype)<br>
            <div style="margin-top: 5px;"> <b><a target="nw"
 href="http://www.linkedin.com/in/girishnaik">http://www.linkedin.com/in/girishnaik</a></b>
            </div>
            <br>
            <a href="http://www.spreadfirefox.com/node&amp;id=182416&amp;t=262"><img
 alt="Mozilla Store" title="Mozilla Store"
 src="cid:part2.06080206.06090507@neevtech.com" border="0"></a> </td>
            <td style="padding: 0pt 15px;" width="20%"> <a target="nw"
 href="http://www.linkedin.com/e/gis/68693/571D4D044006"><img
 src="cid:part3.06000305.08050708@neevtech.com"
 alt=" Join Neev Information Technologies Private Limited Group in LinkedIn"
 border="0"></a><br>
            <br>
Fools rush in where angels fear to tread </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;">
      <td
 style="border-top: 1px solid rgb(204, 204, 204); padding-top: 2px; color: rgb(153, 153, 153);"><a
 target="nw" href="http://www.linkedin.com/e/wwk/4759877/">See who we
know in common</a></td>
      <td
 style="border-top: 1px solid rgb(204, 204, 204); padding-top: 2px;"
 align="right"><a target="nw"
 href="http://www.linkedin.com/e/sig/4759877/">Want a signature like
this?</a></td>
    </tr>
  </tbody>
</table>
<br>
<hr>
The information contained in this electronic message and any
attachments to this message are intended for the exclusive use of the
addressee(s) and may contain proprietary, confidential or privileged
information. If you are not the intended recipient, you should not
disseminate, distribute or copy this e-mail. Please notify the sender
immediately and destroy all copies of this message and any attachments.<br>
<b>WARNING:</b> Computer viruses can be transmitted via email. The
recipient should check this email and any attachments for the presence
of viruses. The company accepts no liability for any damage caused by
any virus transmitted by this email.
<hr></div>
</body>
</html>

--------------070901060903070000040200
Content-Type: image/png;
 name="banner-5b.png"
Content-Transfer-Encoding: base64
Content-ID: <part1.01010401.01090005@neevtech.com>
Content-Disposition: attachment;
 filename="banner-5b.png"

iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAYAAABzyUiPAAAAGXRFWHRTb2Z0d2FyZQBBZG9i
ZSBJbWFnZVJlYWR5ccllPAAACPBJREFUeNrsV31sVWcZ/53Pe+53P2hpaQtspayUlfE1Vkqy
DbMAjYnMDcaWkelgTM0SyeZiDMb5kaAxGjONyeIYmwEUUHEiITKCHwxGBwPnVqrF8t1yKbS9
7f0+93z6vO+5t71lTiHb/jGem/ac9z3ved7n4/c8z++V634yCLrcaFk5/n/d/JUYHWE3QWbO
e3pBGIoi/E8Z6LoOHNviz6IkQxDEj1W+aYbx8qmUyxwIWZaxo8f95K1ybLj0R+YholIUc2Qg
GRbVZCTz3juBGSspfP6jXOtnuagPAS8cTkLUQgQV38dqyuN3cNdBLp18slmA9An5zic5aK8V
0B834Se0L7ktiHjGxJbOIaxZWI3pZSreuZTC4QspaKEoJFm6SaS5HG08nwSBj9n10AwRjmXj
kfosgmUBKD7v/Ue9LBL/8zPjYJOLSpB4GAQOgSlEPxQU4dC/lY0LBhUNKRp2R4WAubUKpkaA
HScH0TxZQ5Y2zOh5vD9goLkqiGTWoLEB1+dCdCwCrM1liaIIUVY+kIbs3cyIhXQuj3PDedxZ
40c8ayKWtAnhFciSCrZlwMrnYDgiJFW95VQeCw79mB8cdzxwJQ50INsSdlMazyq3cU+VDp/o
oC9hQXdkQoNS9AQZI/GaAh5tr864jsOdJNC7xqgL28wXUhXImi5iaeBdSyVDXHT3JxDLiEib
zNEC0paI4zEHj7QCBo1TpoBqxcXS6YAmCbgct7CvJwvVH4Ks+ccdQAY8OANoq9NowILhIKB6
7wbTJioCEv/b/NmZeP29YRzuy0IJiNwRDteNbJEkLse2TG4Lk81RSnf2rsLnwAcDQymT9JJw
sJ8CIKljtk9AYGGMXStpAVT+nKG69PuuEbTW+RAk5XaeiuNMXILiD3MnLpvmYFalgPNDJvaT
ka11IXxhfpgl7IQofvdgDBvbyriMaj/w07dGYNkCrhFSknkRed0zfDjjwrRFPL3Aj+ukdDrv
YFlzFHrewq9OJ6BFKJiKJ5shua1Oxs6TQzjUM4olTZVYMy/K9WWOeHR+OTrPJXCBkDmcl5Cg
fRZVu7h3mkj7OvhzbwY62fmtB8pImkI26MgYDk+2194Z5bY8szjMg8P8sO1kHG/06hD8EV5P
JyCQec8uQPNHx008d4+Cty+muAGPLZw05ohNy2qxbudFDCZFPNMWwbJGHwaSJqY1hSglfTh6
IcO/+d6hAQxkHPx45RRcTeRx9FIOJ/Yk8LvHyuGTRcRzJkZpXUVQprsLVXWRNlxyjgQ/Rf1q
ysJrJ+LUdBxYFNjP3FWJ7ad6kU7nKHgKR4A+4tA3IpbOjCJHyh/sTaPzioEsITrrKuRA4B9D
BvZ0ZaCGK7G8UcUXF2pcv0q/gEVT/di0P4ZUPoyasIzbKn3oHdQxrz6ISyMGOmYFyclJdJ5P
YubkAL60pApbT5xDhjJJlFUUEcdD75TUq61d3v3IBR3b383w58/98hJWbbuCfkrpORSZoGST
81R8bf8AHtx+Fc++kUZTlYYcRXDj3hjOpSR8delkXCHnfnnfILJyOVIIcFnd1/JIUjp0X7e5
c8i/GNFdnBm2oVNTPhUzsbcnj80dNdj86SlkkPddbUTBCDWdeM6h9UBAcvHcgQRO9BtYPbcS
u9Y2YH6NjD4y3na9mp23BCQtGQlTxuNzfPjFX0ex4pWLeGpvgpAPrGwtx6/fG+VrO352Fp+n
IL/4dhadMRFhHwWnKYJNy+uxam4FXzO7pog8d8xncmmhLBS6sftY1xIkdA2LuEzQryX+cb/q
1bc9XSlIwXIcu+b36h2lZV1UxfP3TcKBnjS+/cc4RDUAUREREQ1SWsFgxib64uCuyTI5kJ4p
PRTZwYJaGUfOes1rw8IAXjwyjFcplda3VWFjewSM8SR0qtXUzekfXlqh0vscvn7gOqcpq1o0
fOP+SlxLXcMVQnix/sYpE1Y0CgirAg5R2g4ZGgWBUJZ0qbEIPGjsGsiKkEMatnTJaKn0Ssqn
XjqPqRV+nrKzq0R09luQCL0o6fzeSmccgW21nnMiPsbVvPmoJtEYaG9Q0T5dQyKje/M+KqbU
5WZF83x8ecTEd5ZX0z2P/aeHcHe9iqMbJnFjv38fkyFi3aIKNJa5CFKjCBGdaYwC0wKevJqg
gEmaw9eZBE8fNRHTUwczCeFZ6tBZSsGcAQqGi4dbw3hibhB6Nkf10zOI1dk3L3jyWqjTG4aO
i0M5PmaocmwTYUFHfVhA94A+BpKGMLPF5AwkaXqVbcntIRzrM9CfEfD8vWXYcHcYjqmT8+wx
nwl0lHPXz1Hxm7NB7qTOteP86wd/GcKj88rwwzcTFAkfvrIk5M3/6To6ZkfREFW4ErNrNOz+
WxJJMoxtdON1jGpjO/G+m7nYWtYF26d7qGaoS+pESzQRD7wSQ1oqJ1T78ewCB2HJxJrWwPi3
F7PYuG+I1kRxfH2E7PGc89C2GNlRTp3ez9c0lClc7gsHh/HbJ6bwNW/RvuteH4UUquCd9puL
Xay4XcQusqujOcTTtm/UxJNsTaAMq5stbH3f8By4rlXBnnOec1rKLVLMIJSZ6B52uDBGTxgq
WiYRKknpY5fpQyqkG+b7aE7gSm05pUP0BbG4gaLHaYEHnSSBoS/lcKWjqtewElTzopqAlmqZ
K8XQxBzUEJVIdh5/HxbQ0aRxKnTsEkVFEjGVvu8eJH0UzTupMK5JXLE+6KBtCid82H1aL5QM
jdDmYvUMtsbE7i4daVfDU/NULK4TcPqqTvpmkXZobgEFgFD5h39mcCVLtvoCZK/M5a+7k/Qm
+aepbh/oJSpDVI+lM9v/4aYcXu0yPQeubXaoDqkTiPA4CS4h0iUkWSByy8ZFsitwfihxnvXv
iDSXwb93J5wauCxOUnmQvXeit57xS2/s8TeWXkVCO4Hs8iOiy2Uwnlp8z/WwCzKkQrWyC0fG
Atfj+9AaJpsRdmbHxPO0zfVgcpmMIg81qXTt6BF5ExHogXa3PiSp7A872Bbu4lgpHZ/7AJ8f
986EudKm9Z/WO7dwdvhv+golJ1j3Bj3Y841+YPNSiYxSuyH8S4ABAL4/ROxP2qcQAAAAAElF
TkSuQmCC
--------------070901060903070000040200
Content-Type: image/png;
 name="banner-2c.png"
Content-Transfer-Encoding: base64
Content-ID: <part2.06080206.06090507@neevtech.com>
Content-Disposition: attachment;
 filename="banner-2c.png"

iVBORw0KGgoAAAANSUhEUgAAALQAAAA8CAYAAADPLpCHAAAAGXRFWHRTb2Z0d2FyZQBBZG9i
ZSBJbWFnZVJlYWR5ccllPAAAQSxJREFUeNrsfQeYXFeV5nmhUldVV3VWbIWWZEmWE8LI2MYJ
MAY8YIMNDMkmD2OCbcLusoAJw3w7RDMDs4DBxJkhmJxNcMAR2zgrWalbaknd6lSdKr337p5z
bnjvVVW37cGzO/Mtz1+51dVVL/733P/8J1zr3nvvhUW2Ar5ejq8hfB1r8fdZfO2Cv2x/2f4f
bVu3bo397j7O53/nuu7WVCoJvu+bNy38j7YgCKBaqy303e34Krd4/5gaII0bHeCBBfa1H18T
Ld4v4WvPXx7rX7YnCuitxUI79HR18C8C/yMwO44T+5Bl2+AJfF/4EAgBgV+FWrWyWVgpEGIO
hD8BltOJ386A7/lQrx4A4T0MpWoWUXoGFNMJyLg2WPUy7l3QiAH8DQILj4b7K9c8HlAuvi8C
2t8R/GsVfKsP6l5uoXN/GF+tRttRfA23eL+mvtNq26MGT+M2oQbbX7b/IoCGtrYMAoyQJAyo
fbTMFr5n48u3HHACBBuCGpENfnknBOVvI+hXQSL3MgRfXhpfK49gx4GQ8EGk1uPf10Kn5UKv
yMJw2YajdQsyGR/6EZ95/IyjBomFg8Sm2UCUoT5/B0DlG/LE0q8FN7kBnEQODs/b8EgpCSUF
3zQiPxlUTvB90XQ9jqiDiy/aUpFxSQMnixNK2vLw+zYk6W+CrhaRjrOQ7wfqk+E+6T7U695C
t+4BNes0bgvRt7Ka1VptuxS9e6Kz3V8A3WIT09PTkEmvVU+cwAVsgYUIGMyISrbKBGo2rMEs
BLU7wap8D0TiaWipX4wYb8cv9/B3eFwg6MFGKw4psG0HclCH4xDEIxUXxqsWjFWJzjiQdfEY
Cg8CZqA++0Pw524AJ30quLm34D568K8OHJh1YO+My2B2LCs0t3YaeCTgVo/BKgMJPN0UnsN8
5N20I6DD/z7M1cfgqHsZDBQd6EoFEtQIXKJX8mQIwGrHeP6RQ9L0QUMPrxuIip1MAzx+RwV4
nrfVY/pmgf6ythdR+mbxXCUHT61Wx13HBycbFtzPIgPqvidJ3xbzhxaijwvNdv85LTRZoISD
VphuZuTmM3+mJ4B/J0vqWvKhCwQn1H4vP5A8D593jh+NwM9a+HADfAACn3aA1s5JxGnLErTO
S3AyGK85MDbvwRi+tyxVxwHzCIjqz8Gv3MNg9pJXgF9NI4Wpw+EqwIOlNPgi/rA1gPUh9E/9
PoFZgzgVDEEuIZ9VzrsNhLMCxpD67J8tQpvro8WuS2BFZikCLVhuDHj0J8az+kg6leIZK7xh
Pv5K9ympeVrsnmq/hA2Hep/um0BjYUMAMeTTWIqNpPhGz6Zcrmy1bEudjy8HJe7Jq3tbAx8p
HI06YclroSPgd+r1enh8+snnJHigRW+x4IvFwYnP0/N8eJL+0EL0bTF/aCH6OKwGVWgIFlE5
RK1WhZNP3CIvIGJlANAqiCnwqo/gcylCIr0eLzshQUO0IDgEbuYC3Hs33yi6aEE30UPeG3g4
CFwETgrSyQSC3uZd6gdEVufg6DiUZ2Zayy6FApRK8n7M4IDZaQ9AMYGgsxKxz2krXA0sA2Da
6Hfaep0DkK/9EgG7FypiAET2HIWG5TAuJC9flcVBRoPK8vkckdWHllIBUoORZ67AkwDSANWg
5VnN5/cI1IECvgauseR6f/g7/U0aggbgEtVb4IGRL0PA9dVsQsZGPjOcRfH+oxmRp+PV8HwD
NalIMNP9t20JZHomFj4ji30ZGlT0t9D2Cb8OdcQGfcBxXDmYEcP6XGmslMtlNSujwUumwHXl
86lUKnx+ElPCDFAWGKo13qcQgZmnyErUJkb4HISbAmt6BKzaPOInicYN5/e2riduodsyGXUP
6VHgtF95DG8Ggtjdwj/JGjPHrA7g3VslP4t/850z8eQ85MAVmJicgtnZObPPjo4OvDgLjh0e
hlwuC50dRQa2cGy23NXyrAZzSxOEYBb6b3l/Vqz3HoNZvw3K6V4D6u50EKMS0EAt8uIuKNR+
AK5zCIT9Uhjzz4NKrROKyYDZRHcigCx+rg1pT0W4kLV8frA82xirql1kK8oDFkCadG6ZKDCY
QwtM++E3yeILuU+ympalwGdArS5bhLMlGPsaB7XVMGP5wlKWXs0mlvyMpDR4bUQZ9T55/3JA
0bkFwsaB4SjwB7z/Bhal/mbxuBR8jACSCGKiZzZ+PpFOmQFBipmczell87Xb6jcI2LLhgBEM
cNuW1Modwll/6giIMy8Da343TuO7wdn3R7D33ozUthA6LZf/cnFAp9Jpvqh6+X4JYL47gzgM
tkS8LASzvxfmy7txAGyAkakToDQ7aMCrwGyewOTkpL7bFv5NkK+VzaC1RhBV6jbS62rTTBHT
EfeW4dkDGbOPojUvXK8C014XuAkJ6BLuh6xyI5j5mpBipGoPIuXZBgf8/wEV6CTK3rQVkwL5
NDInvKkBDhQHZyXDo/lBKpDpBxz5G59x5MFb+F2hvkP3c/ruW+Vsc9qzGI5ktT2/xsDSDz4I
fDUWbAXqkO9FjtTaWisrri22tvo0uxiss9/jhQwBHXbGkxs9b1sOqui18XgkK+7wJbNlVjOP
lg0sZVm1I80zMJ5L0LCfGI/RM18gr9Xm+yeHq1i1Faypn4F129fBmhgG0bkcqpUSZJ4sh86m
LAlm5LB88zKvwAtBKoEgCOw8WlQEbuIMts6TUx0wPLUxvBcKvLNWGnKiIqKApE2B0irPzwl8
xY7b3d0DY2PHhP781+6bjv2dfr98a7vZR84OxLLqQTgMKxHUaebKdd+C2bqF/DgObGH1wnTq
MpjF6Qu9WUhHxstUzWYrXQvkzcwmJICqSJnSdiOPjnPamHdoKQseKAvM8JIWujo8BLvefCl0
Pu/F0HH62dKi0cTAYJaOpZCiJU/78rnLB2tFznUxDs18mUCnAGST/0LTP5EO/BpdXhCjvo6k
GUwtQNpx2gf+oo8j1DAikNOgC5iX1/AcnYZjC0XL/IXPjxzngJz4gGcPKUZpp1vTr8CoT5Dv
YiA7D/0MvHPeImfa0X0x6/x4gGaFY/2KO0HM/15aYR7UvQRzPKE5POmQ4w6NnYKOQzpqiSNg
HDGfO2OZlMtuP5wgMMbAH90IzLcPVeELd03Byo40vGflbbA0OQPnFffBjnIfvHXPC3G/EBsY
ZKlBgdpCsJJ0x1banwjvbbIDalY6dFsUBakQsBXo6d9dqeaHUUEUpO2gGdQxw2gZ9UPIpxEe
yJLWrnJwENz2IvjTU5Ir0ycIOCDVE6FsrsUWVBjt3zhj0cG0AJgXwrrctxcOOnz8ggeOlGEl
ZaAZw5KgjNCbZuYexAYw02H9HZA+A1lkx5HXra0znx8PCgS1sMzt1LOXsRMRh9tL5sHdehHU
j26H1P0/hWoqvSBwF7TQU1NToWKh+TFU0RG8j50+4spknYdGe9D8pyOXFVrVVy95GP5t8y5Y
kxpHMITy0sVTr8TPhBa2FTbO6E+JL9wFcF7fCJyfegx6XCmybcqMoCWVg+E7D80sCOqeNAmD
D0DBQ65sS668y79kQatBQNbbjOfAkgz6APgMamxtXNanQxyJiHhmyylXCwqMChEBoKNlDDmV
ohOVPf4kKDzzHIMXxyJt3zGcmgGllBMDzkburD/bgnTYlr2wdRRyRrCM5ffNIyBA2o5gPszU
YeFJIHRcmadAk6QY+6wQTRYa1PANlGPIgOagnc3vWYH8K983fM9bsw2ciz6KD/094G5+Loh0
M4deFNBdXV2GHzOwk+eBV/5VCHIE9KGRtej81Q2Yo/Tgga2fb44CeG0MzC+t/xE8977XxcDY
eN81NXl16geQt2toIV0zKGig/GxiHQNbHy8K6kzwIHR5t0LBvouvsBScBnPJLVDEGxQFrt7a
k8SVA6YoSZyTl2fqMI+Hsu7+FUze+DMoH9oDhWecA22rB2D0e18HBy3suk9d3/zAFd+VNyS8
LLbMQ3uhho5w6Y6b4ozFWOS6+t1tyYkbZwV5HCv05ejhB3HnUFvE0JAG8qy0BVZ0w4qwX0H0
g9SOoDVV0O8zJ3bsCMWQg46oDf0eBFaMczsRDm0pKBtHkJ1g7XQ77DSzBCzk4GDqRpY+0w7+
Be8CGEHHsDTCYLbqpScG6Ew6KcFsIhUSyH59AqqiAGPTiZZgziDvvGnLF1ruk8D8yeGz4LK+
e+E3J321EdQxx4/29emBXxrLHN3evfxWfr33wIUwl1oGdxwWrPtrUKe8tJiZ3QaTxTMg6XYg
FxyAMlpAAmujFEEAJzATPUmlBGRsedOnPv3fYPTr/ww9l1zGYK4dPgTD//gxeR34XhOY2dpZ
DYCTFrw+jLPGVz4PReTM47/+CVQPHYC5Rx+E0p03Q3L5avBnpmD9p76keHKgHqQd5s20oDia
V4PRrK3YOUWBLEArCZIqiAjYbFuqKGzrbVvRG0sRFGG+Zaw7aB1cqTBaHmYrK2IBIJJoE/gf
7SnqEPJgC0DZ58DQqkaJUh+LBqCz505IfPWNzKHrz347BBvOAnv3reAgBYFCHwN8cacwNRiX
fuoyuERgPjZ/IdRCzmzAvKZtEn646V8XjeQQmDW4/23zDfC+Hc/G73Y0fY4AT9vvp9Yyd261
fXz1z+DiHa8EL5WH8aADbtk/B2evkaC2ggLS/BzM5Jei5y4dlxp6H+QkkiWOhcjo94TUrUm/
rv3gOgbzqvd/HFKXvtXQjSWvuAx2vP4lkOlf3UxZDu6HYG4WahPj0H7aWUZHpm3+wB6oDR9A
636AwUybhxya+LQ3XYK2TScZjmtp58uKP1TbOF/KYpkBEyg1Ij7R6fe1RQwgjPowteHp3GYL
7ft1cOgeRQNBSu6zYoKEiJyb1cKCi9hAoXiD7STUNdlmkLHDSQMyUIPAD0KtW0CEs+NA3HMH
TqF9YE0ekt9dc6r8ueoU8FefwlKe+40rHjewInLtN8LS9D0wXwsdpJkgAfPll4JX3/DvAnN0
+5fRk+BVvQ/yv8nR+1XwXDhybApOajvI7xPFMNqx7S26LwL1/vkOOHNDDzxnjQMDBWHObzDV
D/lcIaZJS0uN7q3LtoOTngzVGn0UHn35+TDwyeug9vQLIBrQJGBPfe1aKKClzW46WYafZ0qw
75qr2OK67e2QWrkGafx+WPbGK6HjuS/ipx/MlvjvtBFlKd1xM3Sc/2Lofv5F4JUmoV6agp6X
vkY5ZnGgEKSqw4MIfhwMh+VD7X3pqxlh9Fniy9OP3If7kVNvxxnnKEC5UJ+ahOmH7+NjsEx4
+jng5PIc5Br+yud4xkmtWA3dL3kVLH/D2+S0bicZsMPXXcszSO+ll0HXBRfjwJuEw/TeXbfi
d1ZB1/NejINzEHwvfDZ9L3st2LkcnzMNEg+dkHQmA4lkxkiIerDxAKGosfCNVXfH9ktFI9fN
Fp0H5YH7mWrQ+zAzDkFPP+cEyQQ5GYRxHvolf/+RzObFZbuRis0jywtWyOyZKpLx+pI/G8y0
kWqht59PHIcU4lskoJjtg0MXwOv67mEn8PE2OvY5D78ebtt9jPNGxro92LYiKVL5IqyaGYJq
kINk10rwVbi6ppKWaKxWfMcAnax3FakBgW1u6wvQaAexPJA0fn3J699hKAY5RvSQ6cEufcM7
ILV8JYJ3BkoP3gv7P3Q1Ptw8gug8cPIFdgIJsHOPPgDjv/oRrH3vR3EAFDhqFujUXA5m2DGd
lv6jzw99+sNy4kQAMqAjctrQpz7MA4YAWzz9LLbzczgr0HdmH3mAFRVmy8j9+6/+IHQ85wXs
D+ROOwPE9AyMfO3zsPyNb4+p2nPbH+R97n/0auh+3otwHyUcjN/gmYWuYfrOW8xn6T06L6Jl
q97/90pHtwzXbqRAjc4hDUz6z77piyA2nQtiyQbwu1bjrIF0pX+LNNp2AmwEdK3mgZtwQIeg
6H7Vjz+fdXF4bLAloFmyW1o4hKNfymwB/hwrtwbz+V2DPPU/2S1KI4gP640oxgm5o096nzef
cD2cfN8VDOrb0GeYZZ1a3q9UfVbsnaqjX5Awdq8a4ZEVBDjpzxQImBkcgsRr/xYI420uOYuW
Ujri/hlNkTW0nIe/8o9w3Je+B4XTzjY5DvlnIFDm5uDoVz+HQD63pcRGlrPzjPOUyhdKdEb+
I8qigE4zwtqOf4KRb3/F/F0YJcXiwVJSAPM9AfOH9vIsQwDue9llbFF5ICF/pxmCZ4SLXwnt
55wPD56zhQFpOYlYvIOsOr2fPf5kJi/plf2w5kOfxkHyETNAei99LeS3PQvqI0dh6BMfgGM3
fB2WveEKSC5dYWgShcabfNzItcaEwK0XgbX/HrB33ATuuW8B0bcewZ6SwKePk/Um7s4DwGYH
krIxGfgqXO4uJNnl1h1hfkWUo1Q+Heq1lU8ZmOV8PwdW9zGo9MzhTNAmp6z0PDz72AEQYz1o
IrJPepfEyf96+yU66GLOl4I7rqghiLMmryOa30FgJutM+Em159huEA0hMNuijlRDydiKDlCw
YW7HA1AZOsCaMgVKCs9EGrL5JLZs9JMcPQKZVxqHZEeP+V556EBL7VrrrjqsDiqHgtCV3XwK
5I5/GniTY2x1ia+TRdRKHh2z64KLGHC0kQNKYF7+lndB3yWvkcEqtLJdSHH2XXM1W96uF7+M
geEpcELk+LRjrZfTLKJD2734fRoQXqndUCq/XmFDsLxahvmdjzZbR0s6mzrcTWDWdCJUhFQE
dN2ZIH7+95BKFyBA8JoAEzu/OFgzBXCCUDK1546B9didINY/0zB6d0HJTifz1KoI6o0t1Yw/
B8zVTQfgzT96Fzw4MhD70/nr74K3nX4D9O/vfdKg7k4YXTrmteyeaQO6pEIinuNBXLoj4UPC
QmohKP8aZ6LpWUjt2gGJMy5AMIf8sHrXb+EhBK5JkkIAE2jo1Y7/zhy3hafc3KlnQnnHQ+DP
TnM00C12x5OmCoWYltwoyVlWND8kiFGQXrS2h7/8WTj0pWth4CPXGmeU+DVxWjfXLtMLbvwx
n1PfJa82Q4XAQc4nfY4GBVlSd9mKmK4cnYa080rXZykRXaeXeziDdzz7+Xh6dcn50RB0Xfxy
6FHWmLUdW8QDMpycBVKq43wNrXVboSM4eB+kRvexkhGks8ZBNsNdZkvJ89GpBdUZ5fR1ccKe
u6BkFxXqvQchcE8Se0uWAfPjKRCLgfm9R86CG299L7zp6T+Cj17wv9ky3zu1BB47shauvfXV
cONjp8FPLnv3kwb1h469uslATMzVoLfdhmI2xUGDqFxX8aUOS5aXlI6Kn4EUe6n3wJTnMMgp
QYm3bRcwtZi48Wcwv+NB6H/XNXD021/HqXgVrPvEdfJRCcpxgHimhSWBaysAu4WOWPg6iMhw
llKEgwi9kXiXDz9R6ORpnrnsu68BF30EAncVAU20hLbxG3/CVrcdKZCtkBI0WmCQEcv80uVs
hSnQE82t8HB2ofdpPzmkHI2UiSgHZUXaHBq3kVYIE5jRGjdxaOK6Rg+PJD9REprgdForFmm0
S0eRM5/CSgZRDZOQpZw/ywnkQNAVTW14L1dtleBXltt+QpJd5VtgZ++AS889mZWErWu6oS2V
gI8cPGdRgJFOfMWRN8feu9tuZ8DSdvLAQ/C5Oy6BbPdBOHvdPfDGZ30HTuqT2vcHfvVWpiTR
jQYQqSPkANK/46Fpl0PqbAVzDBoxMlOD+WQW2rJpDnlLEFtNwZWelA8dKZUfve1cmPvdTyFd
m2LLTWDnKhZ85U9/Lkt2NA0TDdDAkPKXzXkNgsPJpDBMwcj3vhnKXOqBlhVN0cpD1DoTSAKT
fxHXtCU9F9D38tdBauVqGP3u1xl4ZI2XvfGdkN14ojRYh+Szy/SvaQ7OqH3S8XNPx2kanWSy
5My/VYorKzG4b/05iOdZGScQHPmm47qxkjzKtaa86rpXjUUstaWWGngQglnoJCibnUHv4o9A
MHDqAmF9O5auRhw96B1ghzGMPrbY2ttCq5tKpljqmd3/Gxg9vB8++JLNcN/+MejKpzhSRwBr
FREk0N04vqoJdG+5+W/436SMXPGdDxpw6+0ZK2VZH1ER4tfR7Z+OnAZ3+Nv4uFfvfT4fQx//
XSOv55804NasXAqPDk/DDJV8pQqQcmegy9kF66ybYZX/ff65PFWG5W0+9CbrDNplGR+Oa/dh
4DWv4Qc5/56/hu60gJxT5xwOelEFzfivfxxyb7SKZK1Kd94U4b4SpEe/+nk48OGr4Qg6jdFc
DNKjNfAC7dgFKs9aBGGAgjRYLoqIO6TEnWlAEfUguZAASY6bTlgjS02fISeQdORA5t0pIE7C
CIKVvmOjI0UDkCwwXe/R736NaQn9HFGApoETjbrrMUafn9l+v5TiwIlZcJLqypVyLN8kpnA0
5Xeb6YqdQO0Ixv8owhzzBgncUBaxCIfOW4fCnOikA51t8+C31WBo71ehb/Wb4EsX98J9Rzw4
OGbBJw6eafRkrSmTY9Zqm1HVGtoKw3wHOmRluGXPqWyhaXvn874C1917kZIN26C/YR8nrWhH
S1xW2XEZPv51I1vx39I6f/Y1T4Obb/02LM0cge6lKcgmumFJdpwjnT4lKlHuROJUmLGLIBLH
I6WQd4escYruRnsXO1ePXf162Hf1a9nBI5WAqMLhL1/LQCH+rHVd2va++01w4i/uxgfdwQlJ
1UP7WFEgYBHwyGFLLZeDm/ZHFjE6MOjv7pIVaJ2FNnyxqFyogNg89ZJDtuMNFxttmxQWsoxk
+fJbTmEaRKC08wVY8rLLGUQE5seueh0PwNUf+LiKzAnIbNzCPJks/fRdt7CGTvyZ+P+EOkfS
o4lile64RQWDpmD2t7+GTLEHZ4J16hT9WLg7KtlpDZqpkwhiTqjkw0QpbE6S0mmk0ew+iOSd
69wRnslsK56w1QLQMsuu90icgaCV7k5X4ODEQ3Ds2BgfZ+tSVxD1IJmMQEx6MVEMsspaZSDQ
37P3aCz0TZZ5eqYTXvz0n7MVfsaqB9lSE7Bve8/L5HSJHL1cF/D7/SfD5ZFqnUkvDQfrRfjQ
8wo6eKLC5PLv3/rb0+CRHTdAefr70N1HQ2EAsrkBmMGfkHwG1IIpSKaLkHF6oQY97Mx4eHMo
BZj4skvVNIio7he8lPdHWjJpwLF7gSBlmkG8OFeAFVd9kK3wo694HvNWcvoIzAQcCs5Uhw9C
cnm/Ce8WTj+XU0hpvzQ4yLoS8Hpe8iqwrWalVrNsoXkk7eO0M3hQEW1pI+pD79tUdeJyQGXj
Z78Jez74Dj4vehHACfwExPWfvh4SxU4DDopqLrn8b2HmntvBQU5O+1uLDicFaug7dI4mLoGD
xC0UEfDAciVJdqRnW8KJ5XAnkwlIUHVJQ5KULIpoDJJpZUdHDmVCEueUmEiocgIpecq21eAW
YcZpRAJsjBSKI0eOwFknXd9kXSdn5+HYaA1mxSsgn5fNPSjF8+e7KjA2W4UliQmO1jVKZm/+
4SjceeLnQl49vZVpBgH48tO+z7w5ul393f9paMjfbfsyXOhVmyKC33xZX1Oq6vYxAWcd1wW/
vPMnsK53CyTXrILuDILWSbIE5+n88QjLquMNIvlO528QqIlmaIstpsdg7Jc/gmCmZCzp4Kc+
xGDd+OUfGPpbPbgXSnfdxhaOpnCyetnNJ+LD71IP0Q55sbKW2rqSZaXPWm1ZBqPluNKy6bRN
xWvrM9NQnxyDzMq14M1OwwPnP40t6wk3/B5ZVZEtFlGMhOsqelGCI9/+CltX+hydF9GRzMaT
OEInZMKIzIMmXf7wQXy7jgN2reG3Wt2g803gDDV1x81y3ziQaMYiZzLBTm4AtXJZ1iRqNSeR
gHSmzejbpkpFaCssiyNsLdmpRCWtJ+vBELXUQgSRXBJb0azAnOuOVoGVrq7OJjCTFl1zc8il
6zAx+CsNaE7x9NBj/fI9Fdhf72gpmZGljW5ndT4CN8JpMlPuLmkJNajP/MR3TWoobX+1fBeI
wdUxC92qaoX+t7nbEvf/6UvQseRiEDi9CyuDHDrN6b+O8GCyHr9UGR2UORyuujlS0UDvHD9P
VlsghaApW9fc0c2kLLvGYov0yjVsBTmCB7p/ieTEnD3WQB2JmshAjKq1VAGUwApk8YylE41k
QGHi9pvg0LUfZRBtvO4G6RDioCJnkPYVqNIwW7WY4Aeez8PyN13F9EQfn6dpOichC2R18YHl
oOO7fCUDRhbPusaRJY5K6oqUKs/huknLcpryoskxJD1aW2kqKRNWqKuE1TO2yeG3lf01dklJ
gBDNIBQtypZ0PoolB2MQhE5mk1PoOnYMyBT+phwOvfV3TcHMzH1GHDx7TQjA919yMvT09Oi/
cZK+lvj0dmFqgq2z5sAk02352E/5FQXzlWd9SwZYIluHW2k1aGR1U30/LLVugrWd+yGZyLCq
QSFuelGmnQYxpYoubRPsAB5f9GFVNoClWXwPncJ2x0eLHXD+hq0eptD5urHEnAZZDexY8ax8
jLYpfo1VdQthFAWSrpgDckgep1gRTQ5S+8AH1UE05dAQW/WJG3/KvJwox5LXvT1S1CfMuWqw
aJ1XRhZluJ4lMxGKgzxQhTwOAURm3HkLJVMb9UUGPBRNoHpCnlkEZ9gxwO3WudqGPVsRKU+f
sbDjYXGVPmqp4giTSgryXNlYWFoK9FsDutC134A5CmTOdWhPsOJR2v9lsEd2moFDNIP460uP
x7/95B/g4AdOhdU4dRMdabTQpCvffNo/cQClEex6I336cjj8hDToO//wbhgc/BiUJ78BfcvS
kEvfCXnbYwWjLx3AiozHP+n3NTmPc51X5dABJJ6HloleNjWz4TYjpKuKFp64BbH/LJVbLMI8
YwalJas9LJKxbKcZzNqmBRpYlnkEuuLaAF4pHwQWepCkP2teT1M9OWkQaXegzycQjaCOZMk1
DE6T4ad0XZ7S2cLaJm1VqJfm80KlrBKYRBQ+pMgE1qIVNSb7zxJGe2dDwMcMjGU3UiWISCRV
NTfSujafd9B0LLdZ6zvQEszRbf3BERC/ez1UrrqDd0fT/7rENNz3938Do3+6MRKgoX1UmneA
QP340lvBOuH78LmhM+C328+G9vwES3Zv67/9cUPfmnJ0FPOwrL8DehC0Kztlon/BqUPZHob5
+gC04YDxcNSPV8MbL0PadEPrJkejDflFgovtfJayHBHv49f4bCRe7EiQTwZQwvo70TqHGWRQ
wTxANXXbls4JdiOUJX7QZW+6kh1K4txFlQPSmPzvcJW2rJIJIlIhO5M6zMwRHovBRymj0ul0
zHFlmrUdHt30AZGQo88HQg9tyYm1pSWDoPvesKVvSEwSraoGVAGxZhfWIrWIYemYvWCBfROg
g2AEZmBhMK/YMwjp4UnuP+XvvxucNdtEHu/HzitfA4XkH6HQGX63N5+G3Uda99cgwAp8XQHD
cIXO1CMcDK5+XKtM0crnbNsMS7s9GN7tQaZtFqz2NLSnKjBd3QsTtSNQTm2EdMPsoIE9WZdJ
/ey8MPfycCBYDHS2HlaY6qj5LFtLiDd5ocAGOY0JdMq6nndR6MgFqjJEV2FAJPGdHTKfgwIc
URPSwZHlT4FqcRBqu1zOj8AnrkyKRCzvItaizVZqhxsfeCooYwCKFjBAH8GyfT4O/c2BMKdC
Jv4EqpJFSmPGmeYooMyupmswd5f2R1UpFGSpuzJ32060tNCtQa0LIiS4KSeEMghpFspu2hLL
7dZFAZYS3kVDkbLbKNm1tx9aFEyJYzM4RZehnfKJfnQVBKe9Eep3fRmySQrI4FRedODYYXmQ
juzjts57Utv6zDQcrXdGaEzYh4PALL3rAQTmWkglApP3TE4hWY8eVfxKgZRItT5aZ+plR70q
5JvceDIi3EeTaASEwCZdlzz+ue0PQfqG1ZxApFsOWA02hKdyoaZznlYtWURLA8cSKnQeWn0r
ytnVw6KQO2nBWrkgmZByqhP5dmO9ROScjWKgSq9kEETyW26GpfItOJHfkg6bZYdtCCTrsGV/
DL0vW+nCAcRUh0C1LCAwyyqY5jTReLWNuiex+yyjiJRSQFr9zMMPQHbjlgU6tIDJ74hSqBji
/CBYHMwTY5AanUHHyYZO+iwCGB76Ev5UCkkhBbPkUBQzXL0x+e/ImFtse6zcbsA80JtHHITl
WVRJk7JKkEsdgTWZIp6FxzJcTWhpSBgge5HLpH+nXaoAkXPl0Bc+ySClRPaoBtu4LXvDOxhU
5KjJ6F1HJPXTZSvNhawqdxpM4EHIUDIjV1IPfdu5qQvPvRHZDiTYZvE4VC2jc48BBpVO/CAM
fPgzzdZOxHmypiR8HPIVAkslQsnEIebFIB3CaCkUHVs6a7pPhh/zBVpwMb7OsAFNSHcCCHtv
SE5uq3sURgK5Th5nPnJ6WS41ref8MLhiCnjDEi1TJBDLG2rLLJ5XdGAKRFmCKKNAPYcWOSdc
EKUqpGfq1DrUtNYcnak85RaadGjahqfmYV2HCxX3LBjyDkEP4nFJ4gEu5qXtUNmFkYqjUkVt
RTkCdhClVVc3gAIrVhiCXvnmq2Hi9t9DvVTiCGEfRdoaNgo5Vw4NwobPfA2t8/0MZgmyOF+2
lNUF4/xFQBbonkeWCYFzyICmdNdXplY5YPj9caQ2NIA2Xf8DrpbhqOwbL+YcZLLSXPYFsltr
EOvmFMi+H06YP0zzDwGEDCRRD6I0PDtwl1g70oxG1v5ZHPanbDs7oqr4cSBHZjJpoVsZRxsa
q29NugDIpjU6+Yl09ChVCQJPZfHZCvjx/Xj1ajOg3baDTwhY01tWsKXOjJYgMy2gkpcA55NC
YKNHFuPQutr7qdioTwcFctrTqrVU2yHjDDqJTm6vUA6yDOaKJ5DXy3xn+l0DnHKfyVel7kjF
VHOJfRGdL7LOZKnp33Ht0+IbTpaRQuEyerhKhrajqoNlq2C1ZdJEVbBLd7wyKaTz96EjnG/j
UHJyaT8DTWYGCmYj3A6r0MFaNyVF6Z5xVFlDU7MMx58j5SvjDIKKqulxYfP56soXNhCfvh46
z38hW2YdGqf9yaBQB6z98LV8XTTIAtuK9Anx42F5NROx0xvILDwdGImWh1E1TehhhlY6pjfj
+1Q4XLrz65Fay1Bn5lkBZ0DHglhOtectkuC/2Db39HUwt7oIfT/fjkCWHJYtc8NWrZPW/NRS
DtoIzEQ7TIdRfwaWpvbigCJyfAmU7FPZCFAEcGVBsExndOwUnpHtmTrBXJLkJ5fpRuiJh1aE
EufjTovcdK4HgcNV+dCU7B7gVKnr7tIrVyNYXmSy33TtHdXdUYiZZ7DvfR2Ofu2fuRbRas/L
mW/FOlh55fvALhb1cFDFRvFpnUBNlplzb0442TipHOKO1BDS7GGpKdrt6OaKdYpo0qCkc9Pe
AgVrCMycYYdg1BUw0jFUEiRxbj8OZvptZsf9YM3MQ2VoP7StWQ+JU8JsOXLuaHBQKdjW394P
k7ffzAOQsg4pTYDUGzefi1V4U0Yjl3QNH2hyJCWwfcm3TVNMfFbVFoB2U6NPCFSkKMwev8w4
ielHWjuSg8dmnnJAv/L0VfCVWw7A6NQMrGwvQJstpxpqtfvA3AWwNikt7ymdNU48og5KB2Zk
S7BiIpwm6W/kNAYqEGCKOEXr3jdELWTKqGBFo+vRizgzjQBEN54AT6HpaN1dSYWKdcqlrrtb
84H/xaFmAnPh2S+A3LpNkOhbwoAY+8G3YO973gzHffE7PNVX8POU90GOIOWQlBCMLgKBrBfV
KlKJlczeO8BheTqfxhpCVmDwmpZc+mpO+q+XpDXWiVOzj9zP/6aEpOM+Lcu8pu76Aw/KWMJy
ROkRKkBz9PrPw9Rvf8qBH2M4cOagmkm72MHnQ7o55YDsuvJ1JjdGUzTKe9lw7fXQtvH4mANO
19P1vBe1DhNCLO9fBhlVT0Q7qnDknFsWt86rpWVpe+goA5lPbDQO2sDKNOjQaFXr+acEzL2J
aRidlic+rUT8WrAaJgsvhWHvXVASKqPNDaAzLUFM/Jg6IVG/unnPhum6zc5hxvGZEwot5Ecc
HC3LEYCGr/sMDH7yg/DwJefxtBwNETbmHKf7B9h6SydR3isKiFCSEk3vBDTivARmKpNKrFgO
y9/xfmi/4MWcn9xzyaug+yWvVk7pHyR3RgAQ2Mhi0kMmIO6+8vWseJi03KG9eH7nMngI4HQO
OhDDswAOPM4pEdJZo8IAConTINt3zZUcrKFU0bXoXGoHkikMyKpy3afPKD2+bEMw+Jm/4wJb
ml363/NR6Lv8Ckid+iyYx8G/852v4arzbX8c5AxDqpShyhq6N+RQd3HhrRx4w9d91oCZek7r
2SxaDMGyqR+2MxYQapFEQ+aqDU4h1RGuWIGztjfLeRsLWWYCcjta5PFzNylAS35kWjLVKkqa
LMH4jAQ0tQJ7KrbRejscvxSBcv8ROFYiounClPNiSNWyIDJJU71NQRJKRqoiiMmzp3YFc568
+vZEAJmELXsnE9Ww4qyrsQkiWUbtoOichqiHTdMjT40qvEwl/1x3N13kB9fxnAtVo3OLi1N1
UhI9dLJqD5+7GTovfiV4h6X/ktl0IsuAM3f/gQtsyYLqwgCiCtoiawtHD1jXEFLl+ZKXv45n
GbKS0RpCOV5DzTa/7Sw+P8qao31t+MxXweUWBFJ7diypQARGsgzCqR+/Xz88zL1LqHJ8w+f/
lZUN4s89SE+G/+EDfK61qXE8rzwDk+8jXj9Z49ymE/lcKFCkW0Bo2Y/U70RHF58TZSLqRjSt
tWvpHhIN8b16PPRNdYTbZz8FE9YLGdTdzhi/6N96I6BPnboSqr0FyN67B3KPHl4UgFQEEM2D
fqq2rlwSNvam2fGYd1JwqFpEC53nNrrD5QRMVSXN2D6FjuCcBDMFUkjZIMuddELLrOU6fngN
PjiBZ/NXf8IPmyxsq7RHXfTamJdLD4+mcF2lQX/veemrYM01n2JJk7XrzcczmNmyLFsJDg4Y
qkcs6KR9tIKJpSs5Z4MGDjmF1EZh2RveyVbWJG3d+GOe1gnMWnKjgUkUiSwjzwqqRtAkS1EP
ZzUoaL/p5SvimRC8tk0QFh+o8RAoWjb2S5krveyd74vIvvJeDnzoE3w8Kg8zszuClmYACpRw
Lw78r3jamfw5ehm6x8lQRZPV15SCoCQ6KxIVkE6hH7fQVEc4lF4GO+GtsK7WC/P2neit9qER
DJfqIHDPF0+GR55zJpxy489gx+oXQbf1B+gbuUPlf1Q46KJvzLM2dLHK8fDskidfe9hi27iy
BtNzZZiv1qEjK5d86GhzcbrBG0b9GlSXeAppB7xOi+CWuOtTHlttU+ndYJmN/i7CGjxyoKjK
mt4ja0EZdTKnIzDWgW44OTb+TLEpfYGmU6ElBh40lpHRqLsS7XP566+EzCnblDLgcJQv2klf
nyt59bOUO41Tdzy8HsDkb35qaggXI5w03dM16CDL/M6H4dBnPsKDh+jM2K9/yrOL0OFt7STr
BugRp5TeI95M15A/7iSV3O/LTkm2MAqHrs7RPkT7ttOVIqKvwTEVMDqdlQZkG4KeZpvcllOa
dG6O96hmlrpahQDuEU2h1QJMmme6XUWNBOxNvghs74KQF9tJWFbfjxb6EMzNHwdtzijcc+op
kD56D/T4kzAnUkw1slYVyvp+lsbMcKHSKXppDTlWgdK3FwYnl8GFnXvg9umwCpkigpRjTdoz
bdR05qcHEGSpo6xyjB05CBODc9CO1vZp+RIEhSxHjLupP13C5vVR2Pq4WmeO9oh2jWWO5ytY
JlWUwEzTJKVgxv0Q43awSkBOIHFHS0lV2kJyrwursVmiZSwiWSVyAlMnPb3pnkz9/hf8UJPL
Vqnu/wErI/VSKXbKBLPGGkIhIj3hIKwhJPmRMwiV80s8nI3EZ7/JfJf6bRCg+fSDkGroQRio
HGRL5bzQDEN0o4mWWmEeieThEOfB3ENPgnfqjt+ZYlxdYMsqB/J5025NNFtoHcCKLqzERsGx
W8t2tLSDrxKz9YI8w0lq/7UBOkZ/C+f97LVw39Ougruf+Xewe8NLYMPuH8CSw3ejNS+DNf0I
WCuoZ0A3rGuXst3Zm1ZF+0E3JBq1w4Mj0/Ctoyc0ubBnnxh+79d7T4CPXKj3gXy9JlcG8P1A
UGP2fKoOqbTkxjStphZpH6bB3Kqbj7aAZKGjYVntUhOcq8gNpcwlVYyxH/wL5zEQFRAm57nI
jltmwxa2sPQQdQ9kAjRZxvHf/hgKf3WpeSC89sz8NEuC9H0q62KJz5JcnY4XTWOlJCGuIfzu
6pgWrdeD8WZKYQ2hAjP7Ir/4Pg+o/quvYY6rS7qGPnUNvvehWONJDmEEOptQVZ3gAYh/02AW
1Kw+kw577yGoqEpGyoZn87lEe5FYOgGKjOhOuSoE6d5R0Fe49dkgN4TX7zW2E5bRVGH+Rnn5
tBSfAXSqrRMcz2IA08uxrNjqUj3Dt8C4nYds6QhTi51dsqqkvuQUeKz3OBiqTcEzfnQ5r6U8
c8JScFcgRyrN6uoSgAUi8pQ1d9G5W9USEMJ0zc9nUrD94QfM9xZqu0s5GlTyk0y4smWrP4Uj
tbgodREqLK0BrC1zEIlllW7/HTuDU3fcBO0nbAWb8iXUZ0jbjWrUBI7xX/2Q+e3Rr3zW1N1R
dK8PP8slWKoVgayrs7h/B/WWG/+XL0Pxr2U00g4cHCjfMArJIfT+V131QTiKzpfO3yBFg9QU
QxU3nhSrIey79DV8Ff7sjKkhJO5K5z3yna/B+C9uMI6pdjhJnqNjkoSme9cRhaF9hQOItF+5
DAUxYCq/IkAf+PC7YeXVHwCre4lUn373K9bnabBQfePMI/czx6ft0VecD8d/+0YDTqJRdJ+8
7VMwe++dfB0kRe58kyzFC1TbsmhWoaYcYAWxhEZa3o7WdXG1ZLekZznkEPFT81VIjm2HdLGP
F+LxFOYJzNN2D0z3nQM7X/kg+B0rWRZj4DtZ/GwSDjztbdA/921wOqWqkROVplKpJgevswjL
8nLIFpAfUMUEAc7zalDs6IAptSaLm8mCV56L7YNKflx0Cu1EVuYgc5KMLB54PFCH/DAetNj9
gXeyE6U3slxU5pTbslVVXFisSZPGHO06RFNweeeDTXV35MnLKKJeNEiYAAs5gATq0h9v5pa9
9LOy/VFWKDrPv5Cjh3R+ugqb8jeoxRdH+dBRJaWCznngE1+CAx9974I1hAQSsubUSox6eOjz
JhlSiNU4UAo8WKSDBvyZ/KlnxJKHwtC0YAUk/4zTYfk73se6OZ0TObjUJ4/uAzm0lELAGNh0
Ih+PZiRdi6kjrlSES+/TuQ5ffy3fgxVvfgcHmtioPeOMRR5ehFqhUashFogPUE2hGBoagjPP
eCZsn2uDoVkbnvmbt8OxgQthtrsfJosbYMKPR/w6xv8Ete7NvJ5JlJa4CP+B2k/AmvoiGqHT
IdV5LtSrEljV6jDMze0Gz0LrLY7wz72lZeDWHoLe1C1oU46Dafd8sOZl297D5dZriC/Dh9yT
l8uEFfJZ6O3tg85iO47OJE+pvj+HNysVW4asyTo38Gb5PT/Mqou0i7Ubuua3svJRHj7zxz8Y
D52aNeZP3MqKhHR6PNmXgtNFfa7hI8s0eftNLNt1PR857NI+yG44JZw9kMpM33Vz03UQaFMr
Bwxt8qcnEFz/2lRDyHkfqmplKtJsnYIz7ThIZYNy1Vyccjp8P56nYck8FJ2Zx+xDrcFC+yzd
fRs339FN4anFQs+Fl0Cq2GX2XZuclF1PG/K8R77xRbbS1HVKD/JEsSidPJwdE8ViS8oRFsqG
GZA3/u426O/vl4Cem5uDk47fCHtnXdg+n4fl+34O3SN/gszUQfjjsz4G06leyXWsCrR7aH2r
JSgX1hvrrRfnIWvt1SuwbvKdYI8/CkenQo7as7cTB8kE+IUV4JQO8c/HSpfCRvgM/3u0ejbs
t86C3vYUrMjMQmcST7UybWaHQ+Ucv78ub0E6neIGfd2FNnBTWaRwqablxprSyNFCzeIY0bSG
+m1wDq+y7AbQkfxa3TTRjgBa0xOdnilXlvJDJ0xxSc6iiKxTKLPKPPNwhOrxpleK0rV4Lq15
Tn0p1AMkbh5Ot76JjMlzs9Wxw2R6UEtVmMLc6GpcKnHJtsNeHTwwfc+ElaUsF0mmF0HMGaPg
BlEOW4T+Bc2mlEtB555MZSKFsXIQcy+7QOrJ4QJGeG0J1/SHbnT6zPcb/R/bCtdwVNdQx/P/
0wM7oB0tu6uz7KhqIo2s2p33YHjtC2HjHz8rp1KkILkccqbKYfATaj3AzHIlgkvr3F4dhTX7
74TR/qfDnJeA3J7l0JmeBmetpB7+xDzkpu6C5NqnkQ9PQjLUrQ7o7rsb2rwc7A3+O/LfHlin
Ja+2IrR32FDwJmG0hhMdWvmlOYDOQhd4eCdpJqbkJOLOrqpyblIuWljm4bILj0460Id0fFun
BwmnlcfYsLIVAa8B1KF8pfpRkGbLUUdO2pAdlCwR4Voi0qeNQKiXiHOU6uDJLkAK1LI6xGpq
a6CLWun7so+FmTtAJTiHC++AlPuiqaCCwxZ6rIiwZEsndwaq9MqKN4bRFjFQOdCsgmhLKZob
x8j7EoTLxkXKvnzTBnehRY9EvEd2dOEi22qp+dcrVQbz1q1bpRhLoKAbnBNlyCbbIHPgVuid
eBS2H3cp94WrBvOxhS2jG1nlNrcOXlVa0yDXAzu2vYu7fW5KfAzagp3QdnQCshkPRtMBRxvl
Ngzz9kYY9v877vcEyOjyI68KgZuC/Ujys8kuqHtTkNbiRrIAdBRKOEomqJw7wZqt0UwXATVJ
d5TgX0g6RqtOOFZDYgDErXMEvNDQmkuVUavFUF2V1yytr2PLejuyboGwwmwI1R1JNKwSJWzZ
C04qBTL5ntdEV/WNptRQLxhh6JSscNG1fmHXf5m/TNZQU6Yg2uDFiuRn+DXmoHR8bpmg2tVG
pUYRWTUg4HZcvjp/aEoH5X4aIvw7fzvajDJmLGIn1BrUETA3gl1TGB3QMYEVWmCTnTKc5pfX
Z6A6OwWjncfD2JrnNgHZEvFliMlC02cm+rdCNVlkgNfsNvCtLOyevwo6nDkY8K+BXOYw1Du7
uXk6BWzm/RzsCt7Ii2W60fTahFy7W9OZjV1JqNR82Fdrh+40FbniTIIet8dLHvt8gwnINTVt
pezWdIMam1O/5zN669xzw43QDc1D9YMWEcelFX+W36H1suu81qHj2MY0MS0hCS7S700uqeyr
XAqfLaFcStqTVtoKgcG1fghkR68Ho1eXtSzTi0J3IOKHG1iKl4fhYF3faDUm6YnIss40cMh4
0EqugSq3sixjqfUDEdGZSi1mrimW/qmLYy0rbA5jBoCQLc0arSos0CO6Fd0w2nMDHdG/12r1
OKBJx+W1qPGE1rTV4PDAenik++NwtH0TF246DRp1E2DwM8Sp9d8cDgbUof3w/TCE9KWjsgnK
xRzcX7uWgzRCJMz0IxapiaQ85v42H4acDBTwxpCFreE93TWbggyCuSsloDdDltaDsXmZ1H98
Ua6jEqvEQbA/NpOE0bLF+1yB3+lOoyNYrXJDFPOQleW1AJpArf8tROgcgW9F8hzCZjL8OZXb
ISVstXAm41I1FiR64UhrF4gwZdVYX732WnSGiHUikt+l92xXmIWAdG4yxCxz6A/oz9CimdHl
56yQi5jck+gMFbXwTdq9rZavc+ywmpbkX191GI1aYxOgsWP3s9G5joMbmgBt6AetmlkVsbvC
XFROeQgOJOqrV62EFStXohNYZofPFwuPJEffpAagE8iPrT6XlY/uwT9AGakMWW76HHHXhfbZ
+P7hWoaLWzcV6tCRFLB/VvLge8eTcNdYikFKFpj2mXSsWDRQh7dd4t2uz1376bu3H0vC9ukk
jE+WwgmTHoDnhdkMDecRs9aUERaEU6deX9DG4wvbMb059OLvnHOs6vXADlvM0kDTTiEvFq/B
bI4VX9ReBkws04GJl4DTJV9OdL3uMKFHX4bW2xlAOLOQhfPNZ+JRU8mkrLBlgVrdqpWTFgW1
wxUuSLM8nx1FESmbarK6EIatGzcaPH68DLeJBsUw49XjgE4lk+yQTFZkjR0dZHVHEja1+9Br
TxqgtXppULcCKOnTdbw44uNeIs/8WHql4UBYbKMKk13TLre/LaRkq4GuVMBVKBxdRyNDfZzB
l2DfXPSNdXYijg1d5KqsD5txUHRnpCpz/5gNu4fHYKbumIqSXY/tbZCrwuXZorV63NtYNK+4
TTeaG/VECjd9IS0rtyoQziIRSnID61F3Pl7bB2EASNfURTuCRiVIHjSqr7KlgKwrPwjMOsHI
EiJsmGgGp6WafaoK+KhUqbhxWFNoxSmHbUX6eETBbssqd+E3lamZPiRc4hUYBcRS5wctFlLS
eRzM7zmPw49TDjqhoVqeM9bWeePQk6hCW64A65cUoKsgYKzqsZU8NOc0gTj6eytrOyfSzMdn
O457QglI0f1QCVUdfx/Ie5BkyYuAKXvREb1gOVBVcpNDk3KsliFuesgJBWqqjtuJFnOsjAPZ
L+OAcZCmUAmZx+K8SZeMTYdxR6QR9AbUDc1lTDGnohw8G5P+TPVxIrqCqwdG+LN1QoZy9Gw7
Lr1FWyI03HNLcWeZK2zFNXQA1Wg8iFEI7VA7anaQEcEgRm/CaKFjqCn9tJUzK9UZp+n+RFuG
8YpdjivP3VWOpioS4IFLRkI7n7bVZNmjhbBRutHk/LOO7LswE7icsXYIrWEbXmQqjQ8X+WUx
RUs5+LAk43AXIgIS8VdyhMYqNoyUrZgOHQUmAZq067GezVDt6uc1uBuphQ6ztxoM9P4JnT6s
a5eAqNRkpGoJWtneVM3UzWnuR1lzjnr40bWlQ6UDYE22DsWEB3unfBjfOw7+UrwuHLDZNnkO
gweHYdXK5SZwEl3Fia0jedSsR+vpMZLW2DAlmrVDjD7sx9QUDYhGZzMgcOHDtl3bcPLowKHJ
WGrNlmrbJdcID3QLhYh1Nz3lQPW1Y+AFYY6GORdNpyBcYYoUJC+IUwXdHEeDk5axDzzWoDX4
zIqxDXWANAsFdhAmKkV9lMhAbVqIk7XqCMWLVM7QMWq1Kq+HGEsfXZOahzw6bOOUipnqhC4n
YIDopRTIgmUytLCPZ6ahlWkLRhGjw9UMg5soQBTYLOnN7YNydgXMZXse1yJHwUyDZACBTG27
WOSbBdgzm4Z1uTqfAwFt92P74Nj4BExOTEBHZyfr6RvXrYVsPi8foureE69GIflOwL6DD3DK
4aaCb/JHiC7MUDK/tSJWNycFDF+uq+eHdZ4xj11YkZJ7EbPSmqbIdI74NG0yxUzdnmsstu3Y
oeWLOG5m1Sx+OXKgBKJp4UwjZeKzkwn0QYSnhtE/Vk8iKolUYZqzFbR1NsEo8MPmjBqkQRAL
NMlnYKn1VaClX6KDJI2W1xTfmuLc6EKgwvgiOjHJALrNqvIoo26oyUQbKwfaMgWR4i25Jogw
jf/abDmN9yLQR3EK3z6bxam8wVqnCnBk0wuhml/VBORoIpSWBDMVWddIRVup6TnYN1WFkp2C
MbsHqm4HAhp4He7HdjwKlUoVOopFfult39AwUG4KLXZUaG+HtowUsZctWwrtORnC37l7D4yM
yPUP1+dqESulghvKMocxB1/JWaqzkaP12GbqYal1q3Wur9Ru/bBW0Wi0gWnKQrvVoBZKU52b
n4Vdj+ziGadd5TZw8g9eG1UXUUHGcQPLIdfeqXRwX62dmDC8mR54vTYPO3ftiTtdQbO01L+8
B/LtekEjGX3ce+AIWz/GSFsbrFjSLWcidnrjmjBLdpRCgBczMzsHh45OsIGg7/WvWIrXEcSi
ewu1SqPBtW9Q9icfWLUs4oh7vN92fNZWZD979h1iHFBiEuhcjlXLurlq9qiX4e6cxKEHh0c5
4LJ2dT8kkm5E47RUAjjA/gODMD0zCyW8ydQUPXrjF9o02JxcF+eJkPJBUci2+VGoTo5ANpt9
QvtpKh1pLp98UhudF6UA0LELqgLbU7VtvV15HDQdLEMdGStJKx7ZypV43gnNFASa0swczx6c
p9DXxwrS2v4+bgZuooKRCOHIeInvJ2WO0YDr7u7W96IpAhQFdvS4cjCUG7//hO8BWV8q9iCr
V1ERuNnZWZjA66Bj0TUkldRJ5+0plYbAS9dCfsjRoyNQROA1HlvfY2rZHO1yS0uIpKiXNA7I
vYOHceaVA5BmXcrXof3SNUWvUQcEj+B19nT3cJTQALq3M8sjim4knVCjVWgFyDIeoMVJW0/g
vol/J0j/ozcB/zk36888X+vPvAfWn3FvrP9b91gDmk3v6MQcm2x6ZR/nRiCAxZ8JPuu/GHDg
/6Pztf6Dj2X9BwA59vv/EWAAHJMxEGwfmvMAAAAASUVORK5CYII=
--------------070901060903070000040200
Content-Type: image/gif;
 name="neev_logo.gif"
Content-Transfer-Encoding: base64
Content-ID: <part3.06000305.08050708@neevtech.com>
Content-Disposition: attachment;
 filename="neev_logo.gif"

R0lGODlhogBLAPcAADQpZtkcEtk0K9kjGtra2uSKhuDf4N+ysJeWlefn52RciMzLy/3z8tbW
2fK7udcVDHpymePj497T09za5Kyovurq6vX19dkrIuTMyyIVWdHO3eOnouJoYed9eSUZW7Ov
xtrMy/Grp/7+/tpCO/vu7d7e3uzs7NuVkaOet4qDpOHV1HNtlNzc3F5VhOSDfh0RVe3s8ZiS
suqRjdbW1fG/vOJWT6+svt1KQ91qZUQ5cby8u6yrqqmlu7ayxeTk5Ojo6IV+osbC1VJIe7m2
xsC9yrW0s/Lf3sXFxNs4ML26xpiTrNLS0dtiXPHOzGpiju+Nhzovaubk7uHZ2MPBzc7L2xoN
Uuvi4eq7uuNiW/X1+JCKqqait/Hx9ei1s6Wjo0tCd+He3qaiu7m1yqynweexruzT0vGblry5
y91dWOKUj/Xr6vbb2MrI0P76+t94c87NzuyinvLEweyalvjT0uO0seJvaeufm/bW1Prj4trZ
3ObPz/Ll5eLDwp6asNHQ1erp7+ra2erEwuDe6OG+u9nX4ufm7S4iYCATV9QMAykdXsjH0Cwg
X9bT4G5mj/T09/CRjM7N0/r6/NjX2ePY1+fn6OXj7aikt+fe3v/8/N5QSfn4+uLh6ePi5e/q
6uq4tuCblsvJ1crH2c3L1JaQr+GfnRYJT95xa5+atunLycHAv+W5tufl5fnf3p6dnMfGzuiW
k6KhoOXl5d7e3d3d3d/Z2cvL0SMXWqempicbXSoeX/j4+Pz8/O/v7/n5+fPz8/39/fLy8vDw
8Pv7+/b29vHx8e7u7vr6+vf39/PIxfz8/f39/vr6++Lc29vb2/vp6Orp6dPT0/j3+vb19/38
/fHw8ObZ2Pb2+N/X1j4zbvfPzt/d5+Hh4eHh4NDPz8jIyPv6+/rMza+uru9+erKwsfTz9+jk
4+vr61dOf97e4Onp6erq6f729uLKyfv5+fPy8tXU2NTU1Pz7/LazwLm4uH94nfHx8qqoqNsw
J5yWtOzs7uro5/KzsMfE1vDY1yYaXP///yH5BAAAAAAALAAAAACiAEsAAAj/AP8JHEiwoMGD
CBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTI7MUisKSZaU/ywiKsEYIxYpz
X760gIBCUCSLwgp9SOFEyBchLVZoCcIr3sVkXAjxAHJTyDkF9PBpcJRsoQgulVqKLSQCIlix
LmEw7JEDCra32AAICSKi7LJQCgD4s+XBA18PuABA0LZLYrwJQKAk8svYli1/hnLEqNRV4jQY
Y84ZSuSYsV9chr6EgaEsoQhQhuCqzjGhbEMRENyqxrYIRV2FPHL97WsLwIdhxv4AsZXBg7/j
yI97OJQLHznXDQuNSnTIePLrHjIAiFEPekMuYaAc/yp+/bqtQ9jCcEnIBVv1vvAPATkmzDtC
QlCKw89+CJQjXb8kRMEi1h3Xmw3PaPDFCwWWh5wtpQDBRYAMaXAOgw46eF4LjFDIECEtHPJY
huWd14g2HhKUzClV4HJdBl8YAExhC51CHnK4VNGCJAkQI4yABCbXWxKgQPECieV5UEoMjqR4
ECOLHOIikuUdAoAr8dhnUCgASEllebi8AAUj9RkkiF/mefCBOb0sJE2I2FWxBQsRBEPjQQM2
mAE2o5xTxXG4+JUBX1Neh8ugUwzjJEHaAJBBocllRx6k/uSIDSHGaDkQI11SqhxjlTr4AjYT
ZFpQNCu0eN0hK8RiwaIEaf9gSAbJhQmFKLMkYIGmAuUZqSGzVurBCy/wZcsL1TmYIxAJ6KIp
DEK8QCkux4roGLJglqLAH6YaBEMOqtZ6LIPLYetgKUJQsox9/JRS3p5+FPMjQiLEgCGOERJg
gAnGKORrpIRmcEgLStiQhDxKLNggcodA0QAxdxKkxZGGDtoICkMkYUkK2NwLKIRh+GiQJvT8
aaiUK/RhiQ08pJADg55GmM+8A/2xIKSOhZGOLgn9cWGttPbAgg++wDrQvycnskUtzcxSggHb
+AGBx8gtR0QFzhZEyCK01iqmDX6wIIsB3JTAhhMm4yhmA68WREV2kIb5hSXdsOB02a4AUYUt
cRf/N4QvESszhrvXvaDALEUjdIZjtVahwDsl7Mxrr0EaKmYSBLBgQAIm8BIML5Q4kWzhlviw
a0FAUIxjw0Q0vc0PnQdTjA8r3IhcKSik0wt01gBRCqWHnDNF0xHAzgsvxVCCwniGVtEIJ8d4
N4EhXjIMABH8HhQNBOEq9wIKdPJCM0JIP/hCD8SbYEEvwuwiTC9UGLJwmEqUADFBleRwiHlV
iGG3D8UAzi7cpwtO5GBEgHrBF/KQOIEQgnovgoI8miGLWPACOO0Thi7qMbWFFQcU4iNINPQG
qWFpIQHD0JI2jASpF+QAFLk6nb8qlxznvWMWEeBFL5zkiy8gEFBV0MIs/+RFEDEMqnEKaMAs
fBCMbglEBLuIQdcelIEpmKBNAhlD2pRzCHo0owQ9cuI/oEiF/BiqFPiIRQoJEgQRXUdHebhf
QbRYnhdAoBn76tdCyuePYYFvG1fUkjJa8MPjZAACksieQJRBD9UhpwoxYAEgd3eQ6dVRCZw4
HRe4hzND2KAZdRLjQDQhOsvtqB4Rg8HPkkOrIbCpII5AG84WYYOhNXCGHvRAD2JotBUUso9O
kMQrBQIDBThyL7bgAS8RkoUcNChMjciDnf4RBfHgDBtEiFz0EqIF21XKSpAY5kDwQTV/VCEF
pkvRBNzIynNAI3JZ2yMNDQkAeeQxIfSYYnKSWP8BLP6DEF/YHysBMAQDiPMg5ygkjBLZL0Ic
kZVfeMc2iJgQFPQFOy8YAgq9wwjxeA0bfgihQISBj+71MQNC5IZI5enBHMhjG7yIWEEgsLBK
8dOfRHCUeQCQAh6E4QNADapQP+BM8xgCEpILRTltkQMeiOEMQYiqVKXKj1DQtKZV4EEEbvmP
SHRQSOfDmmu+VT0DXSmGkyNI+cLUAldEQI4HAUKGFCAJrA3EBoEy1F6Ms5++XjRJttDoMJIx
hmNWzTGITSxia5pAIU6TIETIhT5zBAF0JE4EVKBadlagrys6hI8vaAEbiGa0f2ihprjgJ88E
0oe/YsevsHXQcuSx1WH/xMCkyhmUYnfLODCxiqGwPIdAkZOBRbCBiJFIVQk9IA86AaO0BeGj
Lc7hCleVNga/9Add7SoQMRTrS+Ct2vneygV6DDe84MVFhITpz4FI8ZlVQEECovcHzpjnC5KA
Z1rVOk9/DKwWupocdsGk2oGEwZvoRVIGLLGNYMDACYxNsLJesIJ3cJcgm4DCD9maB2D04gPS
KpwSmgFTmeJyVQp4AyXWiJABl2e7q/2HJVxbNdjaGLYZ6IMBePEHBUg4SRnKwAoaILmCiGAF
592LPyChPgWUdS+LgARaH8LHQygAEhtNiItrVWCBTAFNyTlEU5MwhDKb+cxoRnMP/LDjYWig
/wc2sMQW5kznOtu5zpagh/wsN+IiFyQUNM6RfCeQi2dSuLN6/Gx/raxiFh9ky/usa4w7qk//
5mAKs4DaNjbN6U572tOxgJgIemGCCHz61KdGwZ5XhQJZ9PMgzdyw4dABYkq9IAnOha5Bqnzl
LLf4l6ltwIU3IdwXLWII26hAMIgRjGY7+9nQfjYwAPSPXViA2dHOdrRttDDiJOGeB0HBMW2R
CEhAIMlihpyfFb0wRq9YwNmF8UCk4YRjeiC+bzXGAPfNb2vA4Bj8DrhrRPCLgPeCF44IuMLd
BwEEuxASBqCotxah0BUAAL5bIPFK2Y1iLDvaIJAGVJcFMorRAdEJ0v808UDEoBQUnIEKgpBG
QqyxCSrwYwyjWIEN9rsJ/TWvwm9V+RinRikEF1fKAY4IrxsNbwfJeyCymux5xKBIgwjDT9jC
xjkgkAIi/ISYPNACPc6RA/++AF3c4lW9TK6crA6tbQjRgGEDXQUINADcEOG1x5tuqJH/QxNw
KlxEPz6QIORVUIc4RCnCMIxdlOXBpUh8BsizHBQ0ESFD0KnXclALbU6OHEJ4cpIymmuJLP3d
Wo63pOdI40q9QAhToCRBqICNSuPCSowwgS9+JIIg7K1KULABV/+xjDB06VyjyEPEE30QZdgA
t14TAiQ8b/pF95rwBAm5TYUdY4FoIvRJahj/PUA4jSxMIAbHL08p+oBDkZKjEVskbi6AoAFy
/OIbheiBEyQLpip8gQ0sEAvDZxCFMCue8kinQAAwNT5UZn1Ml3pOt3puU2gaAhk5gBMXB2w6
EjaktSkAEGLm0RtfcA5CAAWGwBca8gIUoC9ssl/RUDIHeHuGgGm6omvkY317B4F9x30GoQyn
wHYA0xmo9QIAwAZ4FEgD8QtGVGnKIYStZz5a0DQCKHQFoQG91Tz08A770l5554Co92sReGEE
0Qsp8F0Sthz+8ElgBHcDIQw2gIY/5g8Cg0h0UgyihBBcIEvv4gFDQCdwpXQ46GuPBmx+NxAi
4Agp8IHZFWSHMDdN/+MDImNkvcAD4rGIGbIcUKAFMyBJJhBPDCECH1AF86Mj6rZNExEGxKFY
oQVg2DcQWmAtitUCPHgQInAMH9ACYWI7uLCLVXMIL7AIjTA8S8QLdzhGukAECrAIyFIgU8KL
feSLuNACNpA53GAOigIRUQAAe5NYGQBJGseAEPEB2AAF5FiOhtAIOYgQp1CO7AgFjTCLB/EL
x4AOKNAItUcsGfACVVAFxPICGZADEEABDaA5sRAMskeLuhALNvEyxOKLk4csDZkD9KAEYVMC
EWACx2CDBUFSudCOAPAFNMiGEvEH/HAGH2ADKGkDFEAEBCCIBBgEQ3CSKWkDRMACYmgQv/+g
C8FgAPLQB1TRAgoAlAqwAkDQB0MgCRQUAekADMUoE71ADBFABFuQAivQAjihE0OZAiiQBJLA
AiXwOgapkd4iBnCWkhSAOVt4EbsADAkQAW75lj7QiWklDLwQC2/5lrFgh14hDBZQDD+wDZIA
CbXABrUACe/wRQZgAD6QDsEAcPv1RLswDLyQDtvQAJCgCERABIrwBvAgNlCzmBdUJhMhArpg
Aj5wl275A4BzEaNmAcDwmq9JDMDQeAuRk74Am7HpCwDXEL8gDMcADMVgDumQAMRJnOlgDsXg
C7ogmg8hAr4JnMJJnLEQC8ZpAslJH49Zm8fgC7IZm8BgAU0JEQT/p3C/8AuPOZ4BV57i6T69
oAvDYAHwOQy6wD7mWREE9z7H8J7waQHySZ/Z+RoFx2/l+Z8ogRF1caC3wREHOqAJWqARYQz7
aQG+MKG3GZvYdjzHUwwaagIc2qEmYA7mUAEVoA7PUKLpkA4/UJzFuQrT6QMuepqo6Zabxg3c
kJg2agAlkKMlMAuzwAI+6qPNEKTNQABESgCSYKSSkKRJOgMNMANO+qQzAA9SCg1UWqVLcKVY
2g1auqVa+gbd8AZg+gYLMKZkWqZH8AbUwBAW8AMpmgCxAKOmdqOyIAs9ygJBiqRQGqXwAA1X
yqVfCqZl6g2CKqhHUKiGmgqImqipoAM6/7CojKoD8xCpkiqpRVCplloE45CpmRoOnBoOO7AD
nvqpO2APpEqqt3Cqt+AFqqqqsNCqrtoKsNAKsjqrsooArWCrCJCrurqrrWAA9akQrRmhwiqs
FFqsxnqsyJqsyrqszNqszoqb0Bqt0jqt1EoMnvOa4JlWtkkM3Nqt3tqt2tZsGDqu5Fqu5nqu
6Jqu6rqu7HquGvqu8Bqv8jqvHpZWUGQMvZCv+rqv/Nqv/vqvABuw+6oLBFuwBnuwCJuwCruw
DNuwDruw+kagDjqxFFuxFnuxGJuxGruxHNuxHksReGAGTzCyj4AHBdEGITCyT/AId3AQeFAA
HOACrHAQzmAG4v+AB3jwCI/AAAYxB09gBm0ADuKwD+1gEJgwBx3AATLgDC5rsySQEHggB3XQ
AXOAEG2ADG7AAa/wtAbBCo8gDjxbEKygsk8AB5hgEOuwDzhQByEQtg1BA/fwAAMQAANAA8bw
qwyQCQGwtwMABxE7ECQgAHT7ABewBo5HEKhwAQHgADRwAQPACsKQIiEwtw4gBw/ABGrAnP9w
B3sbAA8wAiTwqwIRBwLwAGtwtwZBAjdAtwFwAXFwuAOBCQ7Atw9QB6FbEA5wAaaLugPhAHO7
t0jAAMwpAh3QuQHQAe2gkaxgB5kwACPQAWUQQBTCADUwAJlwAiegB9I7ECHwADdgBzX/gAhp
QA3tAB1NILhXALcD0A+84IkhoLg3YAoBwAFWQAzdsg5P8AA1UABI8ABd4A7jgwz9G70ZWRDv
ewGvoLcdYJDQsQ5oML8FMAAPgAq0ORBwGwAE7CE0MAAD4AJpsAFhNBB3gAQB4AIFEAA3UAbX
yBC78AqXm5gJMCMCsQ418ABpQDbb0CN3csJYEAtucLnVIMMCcb4BcAVXcA8DoAcC6CHvy8H3
EABMMAnpYIoMUAcPIAOXwAHiWw5sKMAPgAGQKFNP4Lyr4AZQzAyR+A8kgAR9qwI3MACDUAGO
dsF64ANC/A80EAD3AAZQEwEXdgdPTAZgIACZwA7m4IkJ8Qsy//AAaHANgFTA/0C9AYADgzAI
l7C9AiEDAVADKlAA9+ACUuBZQyy4BVAAF3ABGBABz8W9F3API0C3TCABvsYAWPAABTAJHPAA
LsAMK+XFqfxYAyEHATAC14ADUEwLryYQzoDEJ0ALn+ACehB0FvzE7LANcJXHF0AGfKAHJmC/
A9EGViwApMAHfMAMNdgQi9zI5ywQ1Du3iIAIr7Cc0PEEKEwLYFAGl5Bs8dQEbMy3FxDNqywQ
kzsCGzC3sTzLtXzLubzLVefLdSJTdjDM12DFOCAFP2CKyzwAJ3AAWMABqBBqd3LBGGDNIc3B
71wDw7BDBOEMNyC3pNAJx7nCC5HOUv8wXwTRziPgBm4QCMRAbQJBzzcgBeVgBTCtQ65xvgNQ
BzjguHqwDQH9D++LBBiwugfNYrRsyyqw0LMgTg4NzAIR0SMgARQ9Cb7mDIL7CRvguV1QAasp
EBdczdfMwThgChtQDBYQMSKwB5nwAAEAB3YdngRB0zY9EDSsyxJwDWAQw3eiyTUgASfwvWrg
0/9AxKpAB0icyk89uQKgAj9c1a5x1Qqty8zA1f37yzIFB8Ms1g9Q0WUtuM2MBYhwBT9wxyJN
0hbcunwgAcwQl/6EB3bQBYFQwzcACDI904xc08dw0zUQAAVAkObAhidcA7RgCg+ABXugC3dC
xF1g2QOA2Uz/fAECcA1pcLmybNW5XABScN6j7U9eHM1e/Q+aPAK0UAdQfA2tHQCkYAB1gAie
kEM089a27dZ6rAIW+QOX59aCawSB8ABIcACizBCCndwDIcluAAIS0AnyPBCMzQ4/7AJWYNSj
HABkwN0AzcQDsNmfQN6+tg4u8ABuwAd7vQEGxd4kfAAgAAhOQRBwMABIwA7GbAqJzWLrsLpp
gAF77QkT9d9PPNLXjNsgUA3r4yHZILhkcAWfOwjrbNzqLOHsXL0D0Mp2ILr/kA2tKwASTAZ+
vM9UTgZMrcomLgASYMZMoAK+hgn7QLiOOwCosA3iFAdsfMqgWxBTfuJz+wqbw2Jt/3DCrSzB
/S1xDkDNAY7HHAzoaiC6NPzliosFUqDKVKjjSU0Lgz3DHIAESHAPSGAHUf7NHSAAAnABdVAN
BnBhZXADF6AKqjACSFDiA7EPI3ADEmDKpmDfjka999DqBcAMgJRo2ZAJAoAEhLwHFfwPmMC/
AnAPTFAGBrAzBIEHI1DtmYAEV5DkAxEHtM7kdyLAzi4ANwDt4+MJuO7KV6CYT70QvVABm8Pl
TzQMCfA0EdAj47MLwRABUGMAESBx//ALwOCW1umW8y4MJrANTGQOOfxxxvDwNirNA7ELUMnv
hwwdGi/wOJrsBdEL5pCYNbqABBEPvLANGD9SKz8LEG8OptE4RhaQADf6A614EMIQDOlQDFz4
D71QDMW5lHh9DCZQnCZQ3CIwDCH6mhVgjSmylumgPsRQAT7vHb9gAeaA9Iic9VtPnHJpiKVZ
nM/tJLvgCxVQnGwdMVkvoiJ59sMJ9ohsDMTQpumQxp9oDPO5KL/QC8fw9xlOEL9gDH9/DCpd
ELvQnsLwPr0gU845n7ug94dPEIlf+LxriJX/95MvEIOvC5oPu5jv94CvuVBEsKA/RhpU+JuP
+p5/DIH/sbAf+7I/+7Rf+7Z/+7if+7q/+xcREAA7
--------------070901060903070000040200--

--------------020108040202030002080004--


--------------080003070100030402040809
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------080003070100030402040809--

From java-user-return-37964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 12:47:16 2008
Return-Path: <java-user-return-37964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80269 invoked from network); 29 Dec 2008 12:47:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 12:47:15 -0000
Received: (qmail 74943 invoked by uid 500); 29 Dec 2008 12:47:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74908 invoked by uid 500); 29 Dec 2008 12:47:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74892 invoked by uid 99); 29 Dec 2008 12:47:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 04:47:07 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 12:46:56 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 4AF04FE224
	for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 04:46:32 -0800 (PST)
Message-Id: <43EFED66-F704-4DC3-A038-C6173E5DB1F5@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4958C03B.6000200@neevtech.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-192-992004619
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Help in Arabic Analysers with Lucene on Windows
Date: Mon, 29 Dec 2008 07:46:31 -0500
References: <4958C03B.6000200@neevtech.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-192-992004619
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

Hi Girish,

Can you provide some sample code and info about what isn't working?   
All you have said so far is that the Arabic Analyzer doesn't work for  
you, but you have said nothing about how you are actually using it.   
Are you getting exceptions?  Do the tokens not look right?  Are no  
results coming back?  Have you looked at your index in Luke?

I'm going to take a wild stab in the dark and guess that you are not  
reading in the input in the right encoding.

-Grant

On Dec 29, 2008, at 7:19 AM, Girish Naik wrote:

> Hi,
>     I am having a hard time in indexing the Arabic content and  
> searching the same via Lucene. I have also used a Arabic Analyzer  
> from the Lucene package but had no luck. I have also used a snowball  
> jar but it doesn't contain an Arabic stemmer. So i had put the  
> Lucene Arabic Stemmer in snowball jar (with modifications  :-X ) but  
> still have not got any luck so far.
>
>     Moreover when i dont use any stemmers/ analyzer the search works  
> perfectly on a Linux systems, but with Windows system the search  
> does not work at all =-O
>
> If anybody has any kind of solution or ideas, then please send it  
> across. I will be very happy to implement and test them.
>
> Thanks in Advance.
>
> -- 
>
>
> Regards,
>
> Please do not print this email unless it is absolutely necessary.
> Girish Naik
> Development Lead
>
> Neev Information Technologies Pvt Ltd
> Bangalore, Karnataka India
>
> <banner-5b.png>	Mobile: 91 09740091638
> Email: girish.naik@gmail.com
> IM: girish.naik (Skype)
> http://www.linkedin.com/in/girishnaik
>
> <banner-2c.png>	<neev_logo.gif>
>
> Fools rush in where angels fear to tread
> See who we know in common	Want a signature like this?
> The information contained in this electronic message and any  
> attachments to this message are intended for the exclusive use of  
> the addressee(s) and may contain proprietary, confidential or  
> privileged information. If you are not the intended recipient, you  
> should not disseminate, distribute or copy this e-mail. Please  
> notify the sender immediately and destroy all copies of this message  
> and any attachments.
> WARNING: Computer viruses can be transmitted via email. The  
> recipient should check this email and any attachments for the  
> presence of viruses. The company accepts no liability for any damage  
> caused by any virus transmitted by this email.
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











--Apple-Mail-192-992004619--

From java-user-return-37965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 13:20:17 2008
Return-Path: <java-user-return-37965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90333 invoked from network); 29 Dec 2008 13:20:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 13:20:16 -0000
Received: (qmail 91046 invoked by uid 500); 29 Dec 2008 13:20:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91017 invoked by uid 500); 29 Dec 2008 13:20:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91006 invoked by uid 99); 29 Dec 2008 13:20:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 05:20:06 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of girish@neevtech.com does not designate 209.85.142.184 as permitted sender)
Received: from [209.85.142.184] (HELO ti-out-0910.google.com) (209.85.142.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 13:19:56 +0000
Received: by ti-out-0910.google.com with SMTP id b8so3994816tic.11
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 05:19:32 -0800 (PST)
Received: by 10.110.86.3 with SMTP id j3mr10000241tib.4.1230556772365;
        Mon, 29 Dec 2008 05:19:32 -0800 (PST)
Received: from ?10.0.0.2? ([122.167.79.62])
        by mx.google.com with ESMTPS id 2sm11788218tif.19.2008.12.29.05.19.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Dec 2008 05:19:31 -0800 (PST)
Message-ID: <4958CE52.2060005@neevtech.com>
Date: Mon, 29 Dec 2008 18:49:14 +0530
From: Girish Naik <girish@neevtech.com>
Reply-To: girish@neevtech.com
Organization: Neev Information Technologies Private Limited
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1b3pre) Gecko/20081204 Thunderbird/3.0b1 ThunderBrowse/3.2.2.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Help in Arabic Analysers with Lucene on Windows
References: <4958C03B.6000200@neevtech.com> <43EFED66-F704-4DC3-A038-C6173E5DB1F5@apache.org>
In-Reply-To: <43EFED66-F704-4DC3-A038-C6173E5DB1F5@apache.org>
Content-Type: multipart/mixed;
 boundary="------------060501010403090408050509"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------060501010403090408050509
Content-Type: multipart/alternative;
 boundary="------------080703010506070408090700"


--------------080703010506070408090700
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Sorry for that,

Here is how the Analyzer is Selected:

  public static Analyzer getAnalyzerInstance(String localeKey) {
     Analyzer analyzer = null;
     if (localeKey == null || localeKey.trim().equals("")) {
         localeKey = AppContext.getSetting("defaultLocale");
         System.out.println("<><><>><><><><><Locale key taken as Default ");
     } else {
         // localeKey may be a csv of locales, in which case picj the first
         // one.
         localeKey = StringUtils.split(localeKey, ",")[0].trim();
         System.out.println("<><><>><><><><><Locale key is trimmed");
     }
     System.out.println("<><><>><><><><><Locale is " + localeKey);
     String name = (String) _analyzerMap.get(localeKey);
     System.out.println("<><><>><><><><><Name from Locale is " + name);
     if (name == null) {
         analyzer = new StandardAnalyzer();
     } else {
         // if (name.equalsIgnoreCase("Arabic")) {
         // analyzer = new ArabicAnalyzer();
         // } else {
         analyzer = new SnowballAnalyzer(name);
         // }
     }
     return analyzer;
     }



While Indexing some are analyzed and some are not...

  document.add(new Field(FIELD_DOCUMENT_CREATED_ON, LocaleUtils
             .convert8859_6ToUTF8(com.aurigalogic.activesite.field.Field
                 .indexableDate(avsDoc.getCreatedOn())),
             Field.Store.YES, Field.Index.NOT_ANALYZED));
...
document.add(new Field(FIELD_CONTENT_TYPE, LocaleUtils
             .convert8859_6ToUTF8(version.getDocument()
                 .getContentDescriptor().getName()),
             Field.Store.YES, Field.Index.ANALYZED));

Currently the method /LocaleUtils.convert8859_6ToUTF8/ does nothing but 
returns the parameter as is.

While seraching the Query parser  etc.  are created like

Analyzer analyzer = AnalyzerSelector.getAnalyzerInstance(locale);
...
QueryParser qparser = new QueryParser(Constants.FIELD_BODY, analyzer);
...



So while posting the form with a Arabic word does not fetch the results. 
An English word does work though!!

I would be more that helpful if anything else is required.



------------------------------------------------------------------------

Regards,

Please do not print this email unless it is absolutely necessary.
*Girish Naik*
Development Lead

*Neev Information Technologies Pvt Ltd* <http://www.neevtech.com>
Bangalore, Karnataka India

Mozilla Store <http://www.spreadfirefox.com/node&id=182416&t=260> 
*Mobile:* 91 09740091638
*Email:* girish.naik@gmail.com <mailto:girish.naik@gmail.com>
*IM:* girish.naik (Skype)
*http://www.linkedin.com/in/girishnaik*

Mozilla Store <http://www.spreadfirefox.com/node&id=182416&t=262> 	Join 
Neev Information Technologies Private Limited Group in LinkedIn 
<http://www.linkedin.com/e/gis/68693/571D4D044006>

Fools rush in where angels fear to tread

See who we know in common <http://www.linkedin.com/e/wwk/4759877/> 	Want 
a signature like this? <http://www.linkedin.com/e/sig/4759877/>


------------------------------------------------------------------------
The information contained in this electronic message and any attachments 
to this message are intended for the exclusive use of the addressee(s) 
and may contain proprietary, confidential or privileged information. If 
you are not the intended recipient, you should not disseminate, 
distribute or copy this e-mail. Please notify the sender immediately and 
destroy all copies of this message and any attachments.
*WARNING:* Computer viruses can be transmitted via email. The recipient 
should check this email and any attachments for the presence of viruses. 
The company accepts no liability for any damage caused by any virus 
transmitted by this email.
------------------------------------------------------------------------

On 12/29/2008 6:16 PM, Grant Ingersoll wrote:
> Hi Girish,
>
> Can you provide some sample code and info about what isn't working?  
> All you have said so far is that the Arabic Analyzer doesn't work for 
> you, but you have said nothing about how you are actually using it.  
> Are you getting exceptions?  Do the tokens not look right?  Are no 
> results coming back?  Have you looked at your index in Luke?
>
> I'm going to take a wild stab in the dark and guess that you are not 
> reading in the input in the right encoding.
>
> -Grant
>
> On Dec 29, 2008, at 7:19 AM, Girish Naik wrote:
>
>> Hi,
>>     I am having a hard time in indexing the Arabic content and 
>> searching the same via Lucene. I have also used a Arabic Analyzer 
>> from the Lucene package but had no luck. I have also used a snowball 
>> jar but it doesn't contain an Arabic stemmer. So i had put the Lucene 
>> Arabic Stemmer in snowball jar (with modifications  :-X ) but still 
>> have not got any luck so far.
>>
>>     Moreover when i dont use any stemmers/ analyzer the search works 
>> perfectly on a Linux systems, but with Windows system the search does 
>> not work at all =-O
>>
>> If anybody has any kind of solution or ideas, then please send it 
>> across. I will be very happy to implement and test them.
>>
>> Thanks in Advance.
>>
>> -- 
>>
>>
>> Regards,
>>
>> Please do not print this email unless it is absolutely necessary.
>> Girish Naik
>> Development Lead
>>
>> Neev Information Technologies Pvt Ltd
>> Bangalore, Karnataka India
>>
>> <banner-5b.png>    Mobile: 91 09740091638
>> Email: girish.naik@gmail.com
>> IM: girish.naik (Skype)
>> http://www.linkedin.com/in/girishnaik
>>
>> <banner-2c.png> <neev_logo.gif>
>>
>> Fools rush in where angels fear to tread
>> See who we know in common    Want a signature like this?
>> The information contained in this electronic message and any 
>> attachments to this message are intended for the exclusive use of the 
>> addressee(s) and may contain proprietary, confidential or privileged 
>> information. If you are not the intended recipient, you should not 
>> disseminate, distribute or copy this e-mail. Please notify the sender 
>> immediately and destroy all copies of this message and any attachments.
>> WARNING: Computer viruses can be transmitted via email. The recipient 
>> should check this email and any attachments for the presence of 
>> viruses. The company accepts no liability for any damage caused by 
>> any virus transmitted by this email.
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>

--------------080703010506070408090700
Content-Type: multipart/related;
 boundary="------------000906000207070804010401"


--------------000906000207070804010401
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="Content-Type">
</head>
<body bgcolor="#ffffff" text="#000000">
Sorry for that,<br>
<br>
Here is how the Analyzer is Selected:<br>
<pre>&nbsp;public static Analyzer getAnalyzerInstance(String localeKey) {
&nbsp;&nbsp;&nbsp; Analyzer analyzer = null;
&nbsp;&nbsp;&nbsp; if (localeKey == null || localeKey.trim().equals("")) {
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; localeKey = AppContext.getSetting("defaultLocale");
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println("&lt;&gt;&lt;&gt;&lt;&gt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;Locale key taken as Default ");
&nbsp;&nbsp;&nbsp; } else {
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // localeKey may be a csv of locales, in which case picj the first
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // one.
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; localeKey = StringUtils.split(localeKey, ",")[0].trim();
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; System.out.println("&lt;&gt;&lt;&gt;&lt;&gt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;Locale key is trimmed");
&nbsp;&nbsp;&nbsp; }
    System.out.println("&lt;&gt;&lt;&gt;&lt;&gt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;Locale is " + localeKey);
&nbsp;&nbsp;&nbsp; String name = (String) _analyzerMap.get(localeKey);
&nbsp;&nbsp;&nbsp; System.out.println("&lt;&gt;&lt;&gt;&lt;&gt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;Name from Locale is " + name);
&nbsp;&nbsp;&nbsp; if (name == null) {
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; analyzer = new StandardAnalyzer();
&nbsp;&nbsp;&nbsp; } else {
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // if (name.equalsIgnoreCase("Arabic")) {
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // analyzer = new ArabicAnalyzer();
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // } else {
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; analyzer = new SnowballAnalyzer(name);
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // }
&nbsp;&nbsp;&nbsp; }
&nbsp;&nbsp;&nbsp; return analyzer;
&nbsp;&nbsp;&nbsp; }


</pre>
While Indexing some are analyzed and some are not...<br>
<pre>&nbsp;document.add(new Field(FIELD_DOCUMENT_CREATED_ON, LocaleUtils
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .convert8859_6ToUTF8(com.aurigalogic.activesite.field.Field
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .indexableDate(avsDoc.getCreatedOn())),
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Field.Store.YES, Field.Index.NOT_ANALYZED));
... 
document.add(new Field(FIELD_CONTENT_TYPE, LocaleUtils
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .convert8859_6ToUTF8(version.getDocument()
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; .getContentDescriptor().getName()),
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Field.Store.YES, Field.Index.ANALYZED));</pre>
Currently the method <i>LocaleUtils.convert8859_6ToUTF8</i>
does nothing but returns the parameter as is.<br>
<br>
While seraching the Query parser&nbsp; etc.&nbsp; are created like <br>
<pre>Analyzer analyzer = AnalyzerSelector.getAnalyzerInstance(locale);
...
QueryParser qparser = new QueryParser(Constants.FIELD_BODY, analyzer);
...


</pre>
So while posting the form with a Arabic word does not fetch the
results. An English word does work though!! <br>
<br>
I would be more that helpful if anything else is required.<br>
<br>
<br>
<br>
<div class="moz-signature">
<hr><br>
Regards,
<br>
<br>
<table border="0" cellpadding="0" cellspacing="0" width="600">
  <tbody>
    <tr>
      <td
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: rgb(0, 0, 119);"
 colspan="2" align="center"><marquee>Please do not print this email
unless it is absolutely necessary.</marquee></td>
    </tr>
    <tr>
      <td colspan="2"
 style="border-top: 1px solid rgb(204, 204, 204); padding: 10px;">
      <table
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 11px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;"
 border="0" cellpadding="0" cellspacing="0" width="100%">
        <tbody>
          <tr style="line-height: 15px;" valign="top">
            <td width="40%"> <b style="font-size: 14px;">Girish Naik</b><br>
            <span style="font-size: 12px;">Development Lead</span><br>
            <br>
            <a target="nw" href="http://www.neevtech.com"><b>Neev
Information Technologies Pvt Ltd</b></a><br>
Bangalore, Karnataka India<br>
            <br>
            <a href="http://www.spreadfirefox.com/node&amp;id=182416&amp;t=260"><img
 alt="Mozilla Store" title="Mozilla Store"
 src="cid:part1.03070504.06030908@neevtech.com" border="0"></a> </td>
            <td style="padding-left: 10px;" nowrap="nowrap" width="40%">
            <b style="color: rgb(153, 153, 153);">Mobile:</b> 91
09740091638<br>
            <b style="color: rgb(153, 153, 153);">Email:</b> <a
 target="nw" href="mailto:girish.naik@gmail.com"
 style="text-decoration: none; color: rgb(0, 0, 0);">girish.naik@gmail.com</a><br>
            <b style="color: rgb(153, 153, 153);">IM:</b> girish.naik
(Skype)<br>
            <div style="margin-top: 5px;"> <b><a target="nw"
 href="http://www.linkedin.com/in/girishnaik">http://www.linkedin.com/in/girishnaik</a></b>
            </div>
            <br>
            <a href="http://www.spreadfirefox.com/node&amp;id=182416&amp;t=262"><img
 alt="Mozilla Store" title="Mozilla Store"
 src="cid:part2.03040004.01000003@neevtech.com" border="0"></a> </td>
            <td style="padding: 0pt 15px;" width="20%"> <a target="nw"
 href="http://www.linkedin.com/e/gis/68693/571D4D044006"><img
 src="cid:part3.03040101.04020406@neevtech.com"
 alt=" Join Neev Information Technologies Private Limited Group in LinkedIn"
 border="0"></a><br>
            <br>
Fools rush in where angels fear to tread </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;">
      <td
 style="border-top: 1px solid rgb(204, 204, 204); padding-top: 2px; color: rgb(153, 153, 153);"><a
 target="nw" href="http://www.linkedin.com/e/wwk/4759877/">See who we
know in common</a></td>
      <td
 style="border-top: 1px solid rgb(204, 204, 204); padding-top: 2px;"
 align="right"><a target="nw"
 href="http://www.linkedin.com/e/sig/4759877/">Want a signature like
this?</a></td>
    </tr>
  </tbody>
</table>
<br>
<hr>
The information contained in this electronic message and any
attachments to this message are intended for the exclusive use of the
addressee(s) and may contain proprietary, confidential or privileged
information. If you are not the intended recipient, you should not
disseminate, distribute or copy this e-mail. Please notify the sender
immediately and destroy all copies of this message and any attachments.<br>
<b>WARNING:</b> Computer viruses can be transmitted via email. The
recipient should check this email and any attachments for the presence
of viruses. The company accepts no liability for any damage caused by
any virus transmitted by this email.
<hr></div>
<br>
On 12/29/2008 6:16 PM, Grant Ingersoll wrote:
<blockquote cite="mid:43EFED66-F704-4DC3-A038-C6173E5DB1F5@apache.org"
 type="cite">Hi Girish,
  <br>
  <br>
Can you provide some sample code and info about what isn't working?&nbsp;
All you have said so far is that the Arabic Analyzer doesn't work for
you, but you have said nothing about how you are actually using it.&nbsp;
Are you getting exceptions?&nbsp; Do the tokens not look right?&nbsp; Are no
results coming back?&nbsp; Have you looked at your index in Luke?
  <br>
  <br>
I'm going to take a wild stab in the dark and guess that you are not
reading in the input in the right encoding.
  <br>
  <br>
-Grant
  <br>
  <br>
On Dec 29, 2008, at 7:19 AM, Girish Naik wrote:
  <br>
  <br>
  <blockquote type="cite">Hi,
    <br>
&nbsp;&nbsp;&nbsp; I am having a hard time in indexing the Arabic content and
searching the same via Lucene. I have also used a Arabic Analyzer from
the Lucene package but had no luck. I have also used a snowball jar but
it doesn't contain an Arabic stemmer. So i had put the Lucene Arabic
Stemmer in snowball jar (with modifications&nbsp; :-X ) but still have not
got any luck so far.
    <br>
    <br>
&nbsp;&nbsp;&nbsp; Moreover when i dont use any stemmers/ analyzer the search works
perfectly on a Linux systems, but with Windows system the search does
not work at all =-O
    <br>
    <br>
If anybody has any kind of solution or ideas, then please send it
across. I will be very happy to implement and test them.
    <br>
    <br>
Thanks in Advance.
    <br>
    <br>
--&nbsp;<br>
    <br>
    <br>
Regards,
    <br>
    <br>
Please do not print this email unless it is absolutely necessary.
    <br>
Girish Naik
    <br>
Development Lead
    <br>
    <br>
Neev Information Technologies Pvt Ltd
    <br>
Bangalore, Karnataka India
    <br>
    <br>
&lt;banner-5b.png&gt;&nbsp;&nbsp;&nbsp; Mobile: 91 09740091638
    <br>
Email: <a class="moz-txt-link-abbreviated" href="mailto:girish.naik@gmail.com">girish.naik@gmail.com</a>
    <br>
IM: girish.naik (Skype)
    <br>
<a class="moz-txt-link-freetext" href="http://www.linkedin.com/in/girishnaik">http://www.linkedin.com/in/girishnaik</a>
    <br>
    <br>
&lt;banner-2c.png&gt;&nbsp;&nbsp;&nbsp; &lt;neev_logo.gif&gt;
    <br>
    <br>
Fools rush in where angels fear to tread
    <br>
See who we know in common&nbsp;&nbsp;&nbsp; Want a signature like this?
    <br>
The information contained in this electronic message and any
attachments to this message are intended for the exclusive use of the
addressee(s) and may contain proprietary, confidential or privileged
information. If you are not the intended recipient, you should not
disseminate, distribute or copy this e-mail. Please notify the sender
immediately and destroy all copies of this message and any attachments.
    <br>
WARNING: Computer viruses can be transmitted via email. The recipient
should check this email and any attachments for the presence of
viruses. The company accepts no liability for any damage caused by any
virus transmitted by this email.
    <br>
---------------------------------------------------------------------
    <br>
To unsubscribe, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a>
    <br>
For additional commands, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a>
    <br>
  </blockquote>
  <br>
--------------------------
  <br>
Grant Ingersoll
  <br>
  <br>
Lucene Helpful Hints:
  <br>
<a class="moz-txt-link-freetext" href="http://wiki.apache.org/lucene-java/BasicsOfPerformance">http://wiki.apache.org/lucene-java/BasicsOfPerformance</a>
  <br>
<a class="moz-txt-link-freetext" href="http://wiki.apache.org/lucene-java/LuceneFAQ">http://wiki.apache.org/lucene-java/LuceneFAQ</a>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
</blockquote>
</body>
</html>

--------------000906000207070804010401
Content-Type: image/png;
 name="banner-5b.png"
Content-Transfer-Encoding: base64
Content-ID: <part1.03070504.06030908@neevtech.com>
Content-Disposition: attachment;
 filename="banner-5b.png"

iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAYAAABzyUiPAAAAGXRFWHRTb2Z0d2FyZQBBZG9i
ZSBJbWFnZVJlYWR5ccllPAAACPBJREFUeNrsV31sVWcZ/53Pe+53P2hpaQtspayUlfE1Vkqy
DbMAjYnMDcaWkelgTM0SyeZiDMb5kaAxGjONyeIYmwEUUHEiITKCHwxGBwPnVqrF8t1yKbS9
7f0+93z6vO+5t71lTiHb/jGem/ac9z3ved7n4/c8z++V634yCLrcaFk5/n/d/JUYHWE3QWbO
e3pBGIoi/E8Z6LoOHNviz6IkQxDEj1W+aYbx8qmUyxwIWZaxo8f95K1ybLj0R+YholIUc2Qg
GRbVZCTz3juBGSspfP6jXOtnuagPAS8cTkLUQgQV38dqyuN3cNdBLp18slmA9An5zic5aK8V
0B834Se0L7ktiHjGxJbOIaxZWI3pZSreuZTC4QspaKEoJFm6SaS5HG08nwSBj9n10AwRjmXj
kfosgmUBKD7v/Ue9LBL/8zPjYJOLSpB4GAQOgSlEPxQU4dC/lY0LBhUNKRp2R4WAubUKpkaA
HScH0TxZQ5Y2zOh5vD9goLkqiGTWoLEB1+dCdCwCrM1liaIIUVY+kIbs3cyIhXQuj3PDedxZ
40c8ayKWtAnhFciSCrZlwMrnYDgiJFW95VQeCw79mB8cdzxwJQ50INsSdlMazyq3cU+VDp/o
oC9hQXdkQoNS9AQZI/GaAh5tr864jsOdJNC7xqgL28wXUhXImi5iaeBdSyVDXHT3JxDLiEib
zNEC0paI4zEHj7QCBo1TpoBqxcXS6YAmCbgct7CvJwvVH4Ks+ccdQAY8OANoq9NowILhIKB6
7wbTJioCEv/b/NmZeP29YRzuy0IJiNwRDteNbJEkLse2TG4Lk81RSnf2rsLnwAcDQymT9JJw
sJ8CIKljtk9AYGGMXStpAVT+nKG69PuuEbTW+RAk5XaeiuNMXILiD3MnLpvmYFalgPNDJvaT
ka11IXxhfpgl7IQofvdgDBvbyriMaj/w07dGYNkCrhFSknkRed0zfDjjwrRFPL3Aj+ukdDrv
YFlzFHrewq9OJ6BFKJiKJ5shua1Oxs6TQzjUM4olTZVYMy/K9WWOeHR+OTrPJXCBkDmcl5Cg
fRZVu7h3mkj7OvhzbwY62fmtB8pImkI26MgYDk+2194Z5bY8szjMg8P8sO1kHG/06hD8EV5P
JyCQec8uQPNHx008d4+Cty+muAGPLZw05ohNy2qxbudFDCZFPNMWwbJGHwaSJqY1hSglfTh6
IcO/+d6hAQxkHPx45RRcTeRx9FIOJ/Yk8LvHyuGTRcRzJkZpXUVQprsLVXWRNlxyjgQ/Rf1q
ysJrJ+LUdBxYFNjP3FWJ7ad6kU7nKHgKR4A+4tA3IpbOjCJHyh/sTaPzioEsITrrKuRA4B9D
BvZ0ZaCGK7G8UcUXF2pcv0q/gEVT/di0P4ZUPoyasIzbKn3oHdQxrz6ISyMGOmYFyclJdJ5P
YubkAL60pApbT5xDhjJJlFUUEcdD75TUq61d3v3IBR3b383w58/98hJWbbuCfkrpORSZoGST
81R8bf8AHtx+Fc++kUZTlYYcRXDj3hjOpSR8delkXCHnfnnfILJyOVIIcFnd1/JIUjp0X7e5
c8i/GNFdnBm2oVNTPhUzsbcnj80dNdj86SlkkPddbUTBCDWdeM6h9UBAcvHcgQRO9BtYPbcS
u9Y2YH6NjD4y3na9mp23BCQtGQlTxuNzfPjFX0ex4pWLeGpvgpAPrGwtx6/fG+VrO352Fp+n
IL/4dhadMRFhHwWnKYJNy+uxam4FXzO7pog8d8xncmmhLBS6sftY1xIkdA2LuEzQryX+cb/q
1bc9XSlIwXIcu+b36h2lZV1UxfP3TcKBnjS+/cc4RDUAUREREQ1SWsFgxib64uCuyTI5kJ4p
PRTZwYJaGUfOes1rw8IAXjwyjFcplda3VWFjewSM8SR0qtXUzekfXlqh0vscvn7gOqcpq1o0
fOP+SlxLXcMVQnix/sYpE1Y0CgirAg5R2g4ZGgWBUJZ0qbEIPGjsGsiKkEMatnTJaKn0Ssqn
XjqPqRV+nrKzq0R09luQCL0o6fzeSmccgW21nnMiPsbVvPmoJtEYaG9Q0T5dQyKje/M+KqbU
5WZF83x8ecTEd5ZX0z2P/aeHcHe9iqMbJnFjv38fkyFi3aIKNJa5CFKjCBGdaYwC0wKevJqg
gEmaw9eZBE8fNRHTUwczCeFZ6tBZSsGcAQqGi4dbw3hibhB6Nkf10zOI1dk3L3jyWqjTG4aO
i0M5PmaocmwTYUFHfVhA94A+BpKGMLPF5AwkaXqVbcntIRzrM9CfEfD8vWXYcHcYjqmT8+wx
nwl0lHPXz1Hxm7NB7qTOteP86wd/GcKj88rwwzcTFAkfvrIk5M3/6To6ZkfREFW4ErNrNOz+
WxJJMoxtdON1jGpjO/G+m7nYWtYF26d7qGaoS+pESzQRD7wSQ1oqJ1T78ewCB2HJxJrWwPi3
F7PYuG+I1kRxfH2E7PGc89C2GNlRTp3ez9c0lClc7gsHh/HbJ6bwNW/RvuteH4UUquCd9puL
Xay4XcQusqujOcTTtm/UxJNsTaAMq5stbH3f8By4rlXBnnOec1rKLVLMIJSZ6B52uDBGTxgq
WiYRKknpY5fpQyqkG+b7aE7gSm05pUP0BbG4gaLHaYEHnSSBoS/lcKWjqtewElTzopqAlmqZ
K8XQxBzUEJVIdh5/HxbQ0aRxKnTsEkVFEjGVvu8eJH0UzTupMK5JXLE+6KBtCid82H1aL5QM
jdDmYvUMtsbE7i4daVfDU/NULK4TcPqqTvpmkXZobgEFgFD5h39mcCVLtvoCZK/M5a+7k/Qm
+aepbh/oJSpDVI+lM9v/4aYcXu0yPQeubXaoDqkTiPA4CS4h0iUkWSByy8ZFsitwfihxnvXv
iDSXwb93J5wauCxOUnmQvXeit57xS2/s8TeWXkVCO4Hs8iOiy2Uwnlp8z/WwCzKkQrWyC0fG
Atfj+9AaJpsRdmbHxPO0zfVgcpmMIg81qXTt6BF5ExHogXa3PiSp7A872Bbu4lgpHZ/7AJ8f
986EudKm9Z/WO7dwdvhv+golJ1j3Bj3Y841+YPNSiYxSuyH8S4ABAL4/ROxP2qcQAAAAAElF
TkSuQmCC
--------------000906000207070804010401
Content-Type: image/png;
 name="banner-2c.png"
Content-Transfer-Encoding: base64
Content-ID: <part2.03040004.01000003@neevtech.com>
Content-Disposition: attachment;
 filename="banner-2c.png"

iVBORw0KGgoAAAANSUhEUgAAALQAAAA8CAYAAADPLpCHAAAAGXRFWHRTb2Z0d2FyZQBBZG9i
ZSBJbWFnZVJlYWR5ccllPAAAQSxJREFUeNrsfQeYXFeV5nmhUldVV3VWbIWWZEmWE8LI2MYJ
MAY8YIMNDMkmD2OCbcLusoAJw3w7RDMDs4DBxJkhmJxNcMAR2zgrWalbaknd6lSdKr337p5z
bnjvVVW37cGzO/Mtz1+51dVVL/733P/8J1zr3nvvhUW2Ar5ejq8hfB1r8fdZfO2Cv2x/2f4f
bVu3bo397j7O53/nuu7WVCoJvu+bNy38j7YgCKBaqy303e34Krd4/5gaII0bHeCBBfa1H18T
Ld4v4WvPXx7rX7YnCuitxUI79HR18C8C/yMwO44T+5Bl2+AJfF/4EAgBgV+FWrWyWVgpEGIO
hD8BltOJ386A7/lQrx4A4T0MpWoWUXoGFNMJyLg2WPUy7l3QiAH8DQILj4b7K9c8HlAuvi8C
2t8R/GsVfKsP6l5uoXN/GF+tRttRfA23eL+mvtNq26MGT+M2oQbbX7b/IoCGtrYMAoyQJAyo
fbTMFr5n48u3HHACBBuCGpENfnknBOVvI+hXQSL3MgRfXhpfK49gx4GQ8EGk1uPf10Kn5UKv
yMJw2YajdQsyGR/6EZ95/IyjBomFg8Sm2UCUoT5/B0DlG/LE0q8FN7kBnEQODs/b8EgpCSUF
3zQiPxlUTvB90XQ9jqiDiy/aUpFxSQMnixNK2vLw+zYk6W+CrhaRjrOQ7wfqk+E+6T7U695C
t+4BNes0bgvRt7Ka1VptuxS9e6Kz3V8A3WIT09PTkEmvVU+cwAVsgYUIGMyISrbKBGo2rMEs
BLU7wap8D0TiaWipX4wYb8cv9/B3eFwg6MFGKw4psG0HclCH4xDEIxUXxqsWjFWJzjiQdfEY
Cg8CZqA++0Pw524AJ30quLm34D568K8OHJh1YO+My2B2LCs0t3YaeCTgVo/BKgMJPN0UnsN8
5N20I6DD/z7M1cfgqHsZDBQd6EoFEtQIXKJX8mQIwGrHeP6RQ9L0QUMPrxuIip1MAzx+RwV4
nrfVY/pmgf6ythdR+mbxXCUHT61Wx13HBycbFtzPIgPqvidJ3xbzhxaijwvNdv85LTRZoISD
VphuZuTmM3+mJ4B/J0vqWvKhCwQn1H4vP5A8D593jh+NwM9a+HADfAACn3aA1s5JxGnLErTO
S3AyGK85MDbvwRi+tyxVxwHzCIjqz8Gv3MNg9pJXgF9NI4Wpw+EqwIOlNPgi/rA1gPUh9E/9
PoFZgzgVDEEuIZ9VzrsNhLMCxpD67J8tQpvro8WuS2BFZikCLVhuDHj0J8az+kg6leIZK7xh
Pv5K9ympeVrsnmq/hA2Hep/um0BjYUMAMeTTWIqNpPhGz6Zcrmy1bEudjy8HJe7Jq3tbAx8p
HI06YclroSPgd+r1enh8+snnJHigRW+x4IvFwYnP0/N8eJL+0EL0bTF/aCH6OKwGVWgIFlE5
RK1WhZNP3CIvIGJlANAqiCnwqo/gcylCIr0eLzshQUO0IDgEbuYC3Hs33yi6aEE30UPeG3g4
CFwETgrSyQSC3uZd6gdEVufg6DiUZ2Zayy6FApRK8n7M4IDZaQ9AMYGgsxKxz2krXA0sA2Da
6Hfaep0DkK/9EgG7FypiAET2HIWG5TAuJC9flcVBRoPK8vkckdWHllIBUoORZ67AkwDSANWg
5VnN5/cI1IECvgauseR6f/g7/U0aggbgEtVb4IGRL0PA9dVsQsZGPjOcRfH+oxmRp+PV8HwD
NalIMNP9t20JZHomFj4ji30ZGlT0t9D2Cb8OdcQGfcBxXDmYEcP6XGmslMtlNSujwUumwHXl
86lUKnx+ElPCDFAWGKo13qcQgZmnyErUJkb4HISbAmt6BKzaPOInicYN5/e2riduodsyGXUP
6VHgtF95DG8Ggtjdwj/JGjPHrA7g3VslP4t/850z8eQ85MAVmJicgtnZObPPjo4OvDgLjh0e
hlwuC50dRQa2cGy23NXyrAZzSxOEYBb6b3l/Vqz3HoNZvw3K6V4D6u50EKMS0EAt8uIuKNR+
AK5zCIT9Uhjzz4NKrROKyYDZRHcigCx+rg1pT0W4kLV8frA82xirql1kK8oDFkCadG6ZKDCY
QwtM++E3yeILuU+ympalwGdArS5bhLMlGPsaB7XVMGP5wlKWXs0mlvyMpDR4bUQZ9T55/3JA
0bkFwsaB4SjwB7z/Bhal/mbxuBR8jACSCGKiZzZ+PpFOmQFBipmczell87Xb6jcI2LLhgBEM
cNuW1Modwll/6giIMy8Da343TuO7wdn3R7D33ozUthA6LZf/cnFAp9Jpvqh6+X4JYL47gzgM
tkS8LASzvxfmy7txAGyAkakToDQ7aMCrwGyewOTkpL7bFv5NkK+VzaC1RhBV6jbS62rTTBHT
EfeW4dkDGbOPojUvXK8C014XuAkJ6BLuh6xyI5j5mpBipGoPIuXZBgf8/wEV6CTK3rQVkwL5
NDInvKkBDhQHZyXDo/lBKpDpBxz5G59x5MFb+F2hvkP3c/ruW+Vsc9qzGI5ktT2/xsDSDz4I
fDUWbAXqkO9FjtTaWisrri22tvo0uxiss9/jhQwBHXbGkxs9b1sOqui18XgkK+7wJbNlVjOP
lg0sZVm1I80zMJ5L0LCfGI/RM18gr9Xm+yeHq1i1Faypn4F129fBmhgG0bkcqpUSZJ4sh86m
LAlm5LB88zKvwAtBKoEgCOw8WlQEbuIMts6TUx0wPLUxvBcKvLNWGnKiIqKApE2B0irPzwl8
xY7b3d0DY2PHhP781+6bjv2dfr98a7vZR84OxLLqQTgMKxHUaebKdd+C2bqF/DgObGH1wnTq
MpjF6Qu9WUhHxstUzWYrXQvkzcwmJICqSJnSdiOPjnPamHdoKQseKAvM8JIWujo8BLvefCl0
Pu/F0HH62dKi0cTAYJaOpZCiJU/78rnLB2tFznUxDs18mUCnAGST/0LTP5EO/BpdXhCjvo6k
GUwtQNpx2gf+oo8j1DAikNOgC5iX1/AcnYZjC0XL/IXPjxzngJz4gGcPKUZpp1vTr8CoT5Dv
YiA7D/0MvHPeImfa0X0x6/x4gGaFY/2KO0HM/15aYR7UvQRzPKE5POmQ4w6NnYKOQzpqiSNg
HDGfO2OZlMtuP5wgMMbAH90IzLcPVeELd03Byo40vGflbbA0OQPnFffBjnIfvHXPC3G/EBsY
ZKlBgdpCsJJ0x1banwjvbbIDalY6dFsUBakQsBXo6d9dqeaHUUEUpO2gGdQxw2gZ9UPIpxEe
yJLWrnJwENz2IvjTU5Ir0ycIOCDVE6FsrsUWVBjt3zhj0cG0AJgXwrrctxcOOnz8ggeOlGEl
ZaAZw5KgjNCbZuYexAYw02H9HZA+A1lkx5HXra0znx8PCgS1sMzt1LOXsRMRh9tL5sHdehHU
j26H1P0/hWoqvSBwF7TQU1NToWKh+TFU0RG8j50+4spknYdGe9D8pyOXFVrVVy95GP5t8y5Y
kxpHMITy0sVTr8TPhBa2FTbO6E+JL9wFcF7fCJyfegx6XCmybcqMoCWVg+E7D80sCOqeNAmD
D0DBQ65sS668y79kQatBQNbbjOfAkgz6APgMamxtXNanQxyJiHhmyylXCwqMChEBoKNlDDmV
ohOVPf4kKDzzHIMXxyJt3zGcmgGllBMDzkburD/bgnTYlr2wdRRyRrCM5ffNIyBA2o5gPszU
YeFJIHRcmadAk6QY+6wQTRYa1PANlGPIgOagnc3vWYH8K983fM9bsw2ciz6KD/094G5+Loh0
M4deFNBdXV2GHzOwk+eBV/5VCHIE9KGRtej81Q2Yo/Tgga2fb44CeG0MzC+t/xE8977XxcDY
eN81NXl16geQt2toIV0zKGig/GxiHQNbHy8K6kzwIHR5t0LBvouvsBScBnPJLVDEGxQFrt7a
k8SVA6YoSZyTl2fqMI+Hsu7+FUze+DMoH9oDhWecA22rB2D0e18HBy3suk9d3/zAFd+VNyS8
LLbMQ3uhho5w6Y6b4ozFWOS6+t1tyYkbZwV5HCv05ejhB3HnUFvE0JAG8qy0BVZ0w4qwX0H0
g9SOoDVV0O8zJ3bsCMWQg46oDf0eBFaMczsRDm0pKBtHkJ1g7XQ77DSzBCzk4GDqRpY+0w7+
Be8CGEHHsDTCYLbqpScG6Ew6KcFsIhUSyH59AqqiAGPTiZZgziDvvGnLF1ruk8D8yeGz4LK+
e+E3J321EdQxx4/29emBXxrLHN3evfxWfr33wIUwl1oGdxwWrPtrUKe8tJiZ3QaTxTMg6XYg
FxyAMlpAAmujFEEAJzATPUmlBGRsedOnPv3fYPTr/ww9l1zGYK4dPgTD//gxeR34XhOY2dpZ
DYCTFrw+jLPGVz4PReTM47/+CVQPHYC5Rx+E0p03Q3L5avBnpmD9p76keHKgHqQd5s20oDia
V4PRrK3YOUWBLEArCZIqiAjYbFuqKGzrbVvRG0sRFGG+Zaw7aB1cqTBaHmYrK2IBIJJoE/gf
7SnqEPJgC0DZ58DQqkaJUh+LBqCz505IfPWNzKHrz347BBvOAnv3reAgBYFCHwN8cacwNRiX
fuoyuERgPjZ/IdRCzmzAvKZtEn646V8XjeQQmDW4/23zDfC+Hc/G73Y0fY4AT9vvp9Yyd261
fXz1z+DiHa8EL5WH8aADbtk/B2evkaC2ggLS/BzM5Jei5y4dlxp6H+QkkiWOhcjo94TUrUm/
rv3gOgbzqvd/HFKXvtXQjSWvuAx2vP4lkOlf3UxZDu6HYG4WahPj0H7aWUZHpm3+wB6oDR9A
636AwUybhxya+LQ3XYK2TScZjmtp58uKP1TbOF/KYpkBEyg1Ij7R6fe1RQwgjPowteHp3GYL
7ft1cOgeRQNBSu6zYoKEiJyb1cKCi9hAoXiD7STUNdlmkLHDSQMyUIPAD0KtW0CEs+NA3HMH
TqF9YE0ekt9dc6r8ueoU8FefwlKe+40rHjewInLtN8LS9D0wXwsdpJkgAfPll4JX3/DvAnN0
+5fRk+BVvQ/yv8nR+1XwXDhybApOajvI7xPFMNqx7S26LwL1/vkOOHNDDzxnjQMDBWHObzDV
D/lcIaZJS0uN7q3LtoOTngzVGn0UHn35+TDwyeug9vQLIBrQJGBPfe1aKKClzW46WYafZ0qw
75qr2OK67e2QWrkGafx+WPbGK6HjuS/ipx/MlvjvtBFlKd1xM3Sc/2Lofv5F4JUmoV6agp6X
vkY5ZnGgEKSqw4MIfhwMh+VD7X3pqxlh9Fniy9OP3If7kVNvxxnnKEC5UJ+ahOmH7+NjsEx4
+jng5PIc5Br+yud4xkmtWA3dL3kVLH/D2+S0bicZsMPXXcszSO+ll0HXBRfjwJuEw/TeXbfi
d1ZB1/NejINzEHwvfDZ9L3st2LkcnzMNEg+dkHQmA4lkxkiIerDxAKGosfCNVXfH9ktFI9fN
Fp0H5YH7mWrQ+zAzDkFPP+cEyQQ5GYRxHvolf/+RzObFZbuRis0jywtWyOyZKpLx+pI/G8y0
kWqht59PHIcU4lskoJjtg0MXwOv67mEn8PE2OvY5D78ebtt9jPNGxro92LYiKVL5IqyaGYJq
kINk10rwVbi6ppKWaKxWfMcAnax3FakBgW1u6wvQaAexPJA0fn3J699hKAY5RvSQ6cEufcM7
ILV8JYJ3BkoP3gv7P3Q1Ptw8gug8cPIFdgIJsHOPPgDjv/oRrH3vR3EAFDhqFujUXA5m2DGd
lv6jzw99+sNy4kQAMqAjctrQpz7MA4YAWzz9LLbzczgr0HdmH3mAFRVmy8j9+6/+IHQ85wXs
D+ROOwPE9AyMfO3zsPyNb4+p2nPbH+R97n/0auh+3otwHyUcjN/gmYWuYfrOW8xn6T06L6Jl
q97/90pHtwzXbqRAjc4hDUz6z77piyA2nQtiyQbwu1bjrIF0pX+LNNp2AmwEdK3mgZtwQIeg
6H7Vjz+fdXF4bLAloFmyW1o4hKNfymwB/hwrtwbz+V2DPPU/2S1KI4gP640oxgm5o096nzef
cD2cfN8VDOrb0GeYZZ1a3q9UfVbsnaqjX5Awdq8a4ZEVBDjpzxQImBkcgsRr/xYI420uOYuW
Ujri/hlNkTW0nIe/8o9w3Je+B4XTzjY5DvlnIFDm5uDoVz+HQD63pcRGlrPzjPOUyhdKdEb+
I8qigE4zwtqOf4KRb3/F/F0YJcXiwVJSAPM9AfOH9vIsQwDue9llbFF5ICF/pxmCZ4SLXwnt
55wPD56zhQFpOYlYvIOsOr2fPf5kJi/plf2w5kOfxkHyETNAei99LeS3PQvqI0dh6BMfgGM3
fB2WveEKSC5dYWgShcabfNzItcaEwK0XgbX/HrB33ATuuW8B0bcewZ6SwKePk/Um7s4DwGYH
krIxGfgqXO4uJNnl1h1hfkWUo1Q+Heq1lU8ZmOV8PwdW9zGo9MzhTNAmp6z0PDz72AEQYz1o
IrJPepfEyf96+yU66GLOl4I7rqghiLMmryOa30FgJutM+Em159huEA0hMNuijlRDydiKDlCw
YW7HA1AZOsCaMgVKCs9EGrL5JLZs9JMcPQKZVxqHZEeP+V556EBL7VrrrjqsDiqHgtCV3XwK
5I5/GniTY2x1ia+TRdRKHh2z64KLGHC0kQNKYF7+lndB3yWvkcEqtLJdSHH2XXM1W96uF7+M
geEpcELk+LRjrZfTLKJD2734fRoQXqndUCq/XmFDsLxahvmdjzZbR0s6mzrcTWDWdCJUhFQE
dN2ZIH7+95BKFyBA8JoAEzu/OFgzBXCCUDK1546B9didINY/0zB6d0HJTifz1KoI6o0t1Yw/
B8zVTQfgzT96Fzw4MhD70/nr74K3nX4D9O/vfdKg7k4YXTrmteyeaQO6pEIinuNBXLoj4UPC
QmohKP8aZ6LpWUjt2gGJMy5AMIf8sHrXb+EhBK5JkkIAE2jo1Y7/zhy3hafc3KlnQnnHQ+DP
TnM00C12x5OmCoWYltwoyVlWND8kiFGQXrS2h7/8WTj0pWth4CPXGmeU+DVxWjfXLtMLbvwx
n1PfJa82Q4XAQc4nfY4GBVlSd9mKmK4cnYa080rXZykRXaeXeziDdzz7+Xh6dcn50RB0Xfxy
6FHWmLUdW8QDMpycBVKq43wNrXVboSM4eB+kRvexkhGks8ZBNsNdZkvJ89GpBdUZ5fR1ccKe
u6BkFxXqvQchcE8Se0uWAfPjKRCLgfm9R86CG299L7zp6T+Cj17wv9ky3zu1BB47shauvfXV
cONjp8FPLnv3kwb1h469uslATMzVoLfdhmI2xUGDqFxX8aUOS5aXlI6Kn4EUe6n3wJTnMMgp
QYm3bRcwtZi48Wcwv+NB6H/XNXD021/HqXgVrPvEdfJRCcpxgHimhSWBaysAu4WOWPg6iMhw
llKEgwi9kXiXDz9R6ORpnrnsu68BF30EAncVAU20hLbxG3/CVrcdKZCtkBI0WmCQEcv80uVs
hSnQE82t8HB2ofdpPzmkHI2UiSgHZUXaHBq3kVYIE5jRGjdxaOK6Rg+PJD9REprgdForFmm0
S0eRM5/CSgZRDZOQpZw/ywnkQNAVTW14L1dtleBXltt+QpJd5VtgZ++AS889mZWErWu6oS2V
gI8cPGdRgJFOfMWRN8feu9tuZ8DSdvLAQ/C5Oy6BbPdBOHvdPfDGZ30HTuqT2vcHfvVWpiTR
jQYQqSPkANK/46Fpl0PqbAVzDBoxMlOD+WQW2rJpDnlLEFtNwZWelA8dKZUfve1cmPvdTyFd
m2LLTWDnKhZ85U9/Lkt2NA0TDdDAkPKXzXkNgsPJpDBMwcj3vhnKXOqBlhVN0cpD1DoTSAKT
fxHXtCU9F9D38tdBauVqGP3u1xl4ZI2XvfGdkN14ojRYh+Szy/SvaQ7OqH3S8XNPx2kanWSy
5My/VYorKzG4b/05iOdZGScQHPmm47qxkjzKtaa86rpXjUUstaWWGngQglnoJCibnUHv4o9A
MHDqAmF9O5auRhw96B1ghzGMPrbY2ttCq5tKpljqmd3/Gxg9vB8++JLNcN/+MejKpzhSRwBr
FREk0N04vqoJdG+5+W/436SMXPGdDxpw6+0ZK2VZH1ER4tfR7Z+OnAZ3+Nv4uFfvfT4fQx//
XSOv55804NasXAqPDk/DDJV8pQqQcmegy9kF66ybYZX/ff65PFWG5W0+9CbrDNplGR+Oa/dh
4DWv4Qc5/56/hu60gJxT5xwOelEFzfivfxxyb7SKZK1Kd94U4b4SpEe/+nk48OGr4Qg6jdFc
DNKjNfAC7dgFKs9aBGGAgjRYLoqIO6TEnWlAEfUguZAASY6bTlgjS02fISeQdORA5t0pIE7C
CIKVvmOjI0UDkCwwXe/R736NaQn9HFGApoETjbrrMUafn9l+v5TiwIlZcJLqypVyLN8kpnA0
5Xeb6YqdQO0Ixv8owhzzBgncUBaxCIfOW4fCnOikA51t8+C31WBo71ehb/Wb4EsX98J9Rzw4
OGbBJw6eafRkrSmTY9Zqm1HVGtoKw3wHOmRluGXPqWyhaXvn874C1917kZIN26C/YR8nrWhH
S1xW2XEZPv51I1vx39I6f/Y1T4Obb/02LM0cge6lKcgmumFJdpwjnT4lKlHuROJUmLGLIBLH
I6WQd4escYruRnsXO1ePXf162Hf1a9nBI5WAqMLhL1/LQCH+rHVd2va++01w4i/uxgfdwQlJ
1UP7WFEgYBHwyGFLLZeDm/ZHFjE6MOjv7pIVaJ2FNnyxqFyogNg89ZJDtuMNFxttmxQWsoxk
+fJbTmEaRKC08wVY8rLLGUQE5seueh0PwNUf+LiKzAnIbNzCPJks/fRdt7CGTvyZ+P+EOkfS
o4lile64RQWDpmD2t7+GTLEHZ4J16hT9WLg7KtlpDZqpkwhiTqjkw0QpbE6S0mmk0ew+iOSd
69wRnslsK56w1QLQMsuu90icgaCV7k5X4ODEQ3Ds2BgfZ+tSVxD1IJmMQEx6MVEMsspaZSDQ
37P3aCz0TZZ5eqYTXvz0n7MVfsaqB9lSE7Bve8/L5HSJHL1cF/D7/SfD5ZFqnUkvDQfrRfjQ
8wo6eKLC5PLv3/rb0+CRHTdAefr70N1HQ2EAsrkBmMGfkHwG1IIpSKaLkHF6oQY97Mx4eHMo
BZj4skvVNIio7he8lPdHWjJpwLF7gSBlmkG8OFeAFVd9kK3wo694HvNWcvoIzAQcCs5Uhw9C
cnm/Ce8WTj+XU0hpvzQ4yLoS8Hpe8iqwrWalVrNsoXkk7eO0M3hQEW1pI+pD79tUdeJyQGXj
Z78Jez74Dj4vehHACfwExPWfvh4SxU4DDopqLrn8b2HmntvBQU5O+1uLDicFaug7dI4mLoGD
xC0UEfDAciVJdqRnW8KJ5XAnkwlIUHVJQ5KULIpoDJJpZUdHDmVCEueUmEiocgIpecq21eAW
YcZpRAJsjBSKI0eOwFknXd9kXSdn5+HYaA1mxSsgn5fNPSjF8+e7KjA2W4UliQmO1jVKZm/+
4SjceeLnQl49vZVpBgH48tO+z7w5ul393f9paMjfbfsyXOhVmyKC33xZX1Oq6vYxAWcd1wW/
vPMnsK53CyTXrILuDILWSbIE5+n88QjLquMNIvlO528QqIlmaIstpsdg7Jc/gmCmZCzp4Kc+
xGDd+OUfGPpbPbgXSnfdxhaOpnCyetnNJ+LD71IP0Q55sbKW2rqSZaXPWm1ZBqPluNKy6bRN
xWvrM9NQnxyDzMq14M1OwwPnP40t6wk3/B5ZVZEtFlGMhOsqelGCI9/+CltX+hydF9GRzMaT
OEInZMKIzIMmXf7wQXy7jgN2reG3Wt2g803gDDV1x81y3ziQaMYiZzLBTm4AtXJZ1iRqNSeR
gHSmzejbpkpFaCssiyNsLdmpRCWtJ+vBELXUQgSRXBJb0azAnOuOVoGVrq7OJjCTFl1zc8il
6zAx+CsNaE7x9NBj/fI9Fdhf72gpmZGljW5ndT4CN8JpMlPuLmkJNajP/MR3TWoobX+1fBeI
wdUxC92qaoX+t7nbEvf/6UvQseRiEDi9CyuDHDrN6b+O8GCyHr9UGR2UORyuujlS0UDvHD9P
VlsghaApW9fc0c2kLLvGYov0yjVsBTmCB7p/ieTEnD3WQB2JmshAjKq1VAGUwApk8YylE41k
QGHi9pvg0LUfZRBtvO4G6RDioCJnkPYVqNIwW7WY4Aeez8PyN13F9EQfn6dpOichC2R18YHl
oOO7fCUDRhbPusaRJY5K6oqUKs/huknLcpryoskxJD1aW2kqKRNWqKuE1TO2yeG3lf01dklJ
gBDNIBQtypZ0PoolB2MQhE5mk1PoOnYMyBT+phwOvfV3TcHMzH1GHDx7TQjA919yMvT09Oi/
cZK+lvj0dmFqgq2z5sAk02352E/5FQXzlWd9SwZYIluHW2k1aGR1U30/LLVugrWd+yGZyLCq
QSFuelGmnQYxpYoubRPsAB5f9GFVNoClWXwPncJ2x0eLHXD+hq0eptD5urHEnAZZDexY8ax8
jLYpfo1VdQthFAWSrpgDckgep1gRTQ5S+8AH1UE05dAQW/WJG3/KvJwox5LXvT1S1CfMuWqw
aJ1XRhZluJ4lMxGKgzxQhTwOAURm3HkLJVMb9UUGPBRNoHpCnlkEZ9gxwO3WudqGPVsRKU+f
sbDjYXGVPmqp4giTSgryXNlYWFoK9FsDutC134A5CmTOdWhPsOJR2v9lsEd2moFDNIP460uP
x7/95B/g4AdOhdU4dRMdabTQpCvffNo/cQClEex6I336cjj8hDToO//wbhgc/BiUJ78BfcvS
kEvfCXnbYwWjLx3AiozHP+n3NTmPc51X5dABJJ6HloleNjWz4TYjpKuKFp64BbH/LJVbLMI8
YwalJas9LJKxbKcZzNqmBRpYlnkEuuLaAF4pHwQWepCkP2teT1M9OWkQaXegzycQjaCOZMk1
DE6T4ad0XZ7S2cLaJm1VqJfm80KlrBKYRBQ+pMgE1qIVNSb7zxJGe2dDwMcMjGU3UiWISCRV
NTfSujafd9B0LLdZ6zvQEszRbf3BERC/ez1UrrqDd0fT/7rENNz3938Do3+6MRKgoX1UmneA
QP340lvBOuH78LmhM+C328+G9vwES3Zv67/9cUPfmnJ0FPOwrL8DehC0Kztlon/BqUPZHob5
+gC04YDxcNSPV8MbL0PadEPrJkejDflFgovtfJayHBHv49f4bCRe7EiQTwZQwvo70TqHGWRQ
wTxANXXbls4JdiOUJX7QZW+6kh1K4txFlQPSmPzvcJW2rJIJIlIhO5M6zMwRHovBRymj0ul0
zHFlmrUdHt30AZGQo88HQg9tyYm1pSWDoPvesKVvSEwSraoGVAGxZhfWIrWIYemYvWCBfROg
g2AEZmBhMK/YMwjp4UnuP+XvvxucNdtEHu/HzitfA4XkH6HQGX63N5+G3Uda99cgwAp8XQHD
cIXO1CMcDK5+XKtM0crnbNsMS7s9GN7tQaZtFqz2NLSnKjBd3QsTtSNQTm2EdMPsoIE9WZdJ
/ey8MPfycCBYDHS2HlaY6qj5LFtLiDd5ocAGOY0JdMq6nndR6MgFqjJEV2FAJPGdHTKfgwIc
URPSwZHlT4FqcRBqu1zOj8AnrkyKRCzvItaizVZqhxsfeCooYwCKFjBAH8GyfT4O/c2BMKdC
Jv4EqpJFSmPGmeYooMyupmswd5f2R1UpFGSpuzJ32060tNCtQa0LIiS4KSeEMghpFspu2hLL
7dZFAZYS3kVDkbLbKNm1tx9aFEyJYzM4RZehnfKJfnQVBKe9Eep3fRmySQrI4FRedODYYXmQ
juzjts57Utv6zDQcrXdGaEzYh4PALL3rAQTmWkglApP3TE4hWY8eVfxKgZRItT5aZ+plR70q
5JvceDIi3EeTaASEwCZdlzz+ue0PQfqG1ZxApFsOWA02hKdyoaZznlYtWURLA8cSKnQeWn0r
ytnVw6KQO2nBWrkgmZByqhP5dmO9ROScjWKgSq9kEETyW26GpfItOJHfkg6bZYdtCCTrsGV/
DL0vW+nCAcRUh0C1LCAwyyqY5jTReLWNuiex+yyjiJRSQFr9zMMPQHbjlgU6tIDJ74hSqBji
/CBYHMwTY5AanUHHyYZO+iwCGB76Ev5UCkkhBbPkUBQzXL0x+e/ImFtse6zcbsA80JtHHITl
WVRJk7JKkEsdgTWZIp6FxzJcTWhpSBgge5HLpH+nXaoAkXPl0Bc+ySClRPaoBtu4LXvDOxhU
5KjJ6F1HJPXTZSvNhawqdxpM4EHIUDIjV1IPfdu5qQvPvRHZDiTYZvE4VC2jc48BBpVO/CAM
fPgzzdZOxHmypiR8HPIVAkslQsnEIebFIB3CaCkUHVs6a7pPhh/zBVpwMb7OsAFNSHcCCHtv
SE5uq3sURgK5Th5nPnJ6WS41ref8MLhiCnjDEi1TJBDLG2rLLJ5XdGAKRFmCKKNAPYcWOSdc
EKUqpGfq1DrUtNYcnak85RaadGjahqfmYV2HCxX3LBjyDkEP4nFJ4gEu5qXtUNmFkYqjUkVt
RTkCdhClVVc3gAIrVhiCXvnmq2Hi9t9DvVTiCGEfRdoaNgo5Vw4NwobPfA2t8/0MZgmyOF+2
lNUF4/xFQBbonkeWCYFzyICmdNdXplY5YPj9caQ2NIA2Xf8DrpbhqOwbL+YcZLLSXPYFsltr
EOvmFMi+H06YP0zzDwGEDCRRD6I0PDtwl1g70oxG1v5ZHPanbDs7oqr4cSBHZjJpoVsZRxsa
q29NugDIpjU6+Yl09ChVCQJPZfHZCvjx/Xj1ajOg3baDTwhY01tWsKXOjJYgMy2gkpcA55NC
YKNHFuPQutr7qdioTwcFctrTqrVU2yHjDDqJTm6vUA6yDOaKJ5DXy3xn+l0DnHKfyVel7kjF
VHOJfRGdL7LOZKnp33Ht0+IbTpaRQuEyerhKhrajqoNlq2C1ZdJEVbBLd7wyKaTz96EjnG/j
UHJyaT8DTWYGCmYj3A6r0MFaNyVF6Z5xVFlDU7MMx58j5SvjDIKKqulxYfP56soXNhCfvh46
z38hW2YdGqf9yaBQB6z98LV8XTTIAtuK9Anx42F5NROx0xvILDwdGImWh1E1TehhhlY6pjfj
+1Q4XLrz65Fay1Bn5lkBZ0DHglhOtectkuC/2Db39HUwt7oIfT/fjkCWHJYtc8NWrZPW/NRS
DtoIzEQ7TIdRfwaWpvbigCJyfAmU7FPZCFAEcGVBsExndOwUnpHtmTrBXJLkJ5fpRuiJh1aE
EufjTovcdK4HgcNV+dCU7B7gVKnr7tIrVyNYXmSy33TtHdXdUYiZZ7DvfR2Ofu2fuRbRas/L
mW/FOlh55fvALhb1cFDFRvFpnUBNlplzb0442TipHOKO1BDS7GGpKdrt6OaKdYpo0qCkc9Pe
AgVrCMycYYdg1BUw0jFUEiRxbj8OZvptZsf9YM3MQ2VoP7StWQ+JU8JsOXLuaHBQKdjW394P
k7ffzAOQsg4pTYDUGzefi1V4U0Yjl3QNH2hyJCWwfcm3TVNMfFbVFoB2U6NPCFSkKMwev8w4
ielHWjuSg8dmnnJAv/L0VfCVWw7A6NQMrGwvQJstpxpqtfvA3AWwNikt7ymdNU48og5KB2Zk
S7BiIpwm6W/kNAYqEGCKOEXr3jdELWTKqGBFo+vRizgzjQBEN54AT6HpaN1dSYWKdcqlrrtb
84H/xaFmAnPh2S+A3LpNkOhbwoAY+8G3YO973gzHffE7PNVX8POU90GOIOWQlBCMLgKBrBfV
KlKJlczeO8BheTqfxhpCVmDwmpZc+mpO+q+XpDXWiVOzj9zP/6aEpOM+Lcu8pu76Aw/KWMJy
ROkRKkBz9PrPw9Rvf8qBH2M4cOagmkm72MHnQ7o55YDsuvJ1JjdGUzTKe9lw7fXQtvH4mANO
19P1vBe1DhNCLO9fBhlVT0Q7qnDknFsWt86rpWVpe+goA5lPbDQO2sDKNOjQaFXr+acEzL2J
aRidlic+rUT8WrAaJgsvhWHvXVASKqPNDaAzLUFM/Jg6IVG/unnPhum6zc5hxvGZEwot5Ecc
HC3LEYCGr/sMDH7yg/DwJefxtBwNETbmHKf7B9h6SydR3isKiFCSEk3vBDTivARmKpNKrFgO
y9/xfmi/4MWcn9xzyaug+yWvVk7pHyR3RgAQ2Mhi0kMmIO6+8vWseJi03KG9eH7nMngI4HQO
OhDDswAOPM4pEdJZo8IAConTINt3zZUcrKFU0bXoXGoHkikMyKpy3afPKD2+bEMw+Jm/4wJb
ml363/NR6Lv8Ckid+iyYx8G/852v4arzbX8c5AxDqpShyhq6N+RQd3HhrRx4w9d91oCZek7r
2SxaDMGyqR+2MxYQapFEQ+aqDU4h1RGuWIGztjfLeRsLWWYCcjta5PFzNylAS35kWjLVKkqa
LMH4jAQ0tQJ7KrbRejscvxSBcv8ROFYiounClPNiSNWyIDJJU71NQRJKRqoiiMmzp3YFc568
+vZEAJmELXsnE9Ww4qyrsQkiWUbtoOichqiHTdMjT40qvEwl/1x3N13kB9fxnAtVo3OLi1N1
UhI9dLJqD5+7GTovfiV4h6X/ktl0IsuAM3f/gQtsyYLqwgCiCtoiawtHD1jXEFLl+ZKXv45n
GbKS0RpCOV5DzTa/7Sw+P8qao31t+MxXweUWBFJ7diypQARGsgzCqR+/Xz88zL1LqHJ8w+f/
lZUN4s89SE+G/+EDfK61qXE8rzwDk+8jXj9Z49ymE/lcKFCkW0Bo2Y/U70RHF58TZSLqRjSt
tWvpHhIN8b16PPRNdYTbZz8FE9YLGdTdzhi/6N96I6BPnboSqr0FyN67B3KPHl4UgFQEEM2D
fqq2rlwSNvam2fGYd1JwqFpEC53nNrrD5QRMVSXN2D6FjuCcBDMFUkjZIMuddELLrOU6fngN
PjiBZ/NXf8IPmyxsq7RHXfTamJdLD4+mcF2lQX/veemrYM01n2JJk7XrzcczmNmyLFsJDg4Y
qkcs6KR9tIKJpSs5Z4MGDjmF1EZh2RveyVbWJG3d+GOe1gnMWnKjgUkUiSwjzwqqRtAkS1EP
ZzUoaL/p5SvimRC8tk0QFh+o8RAoWjb2S5krveyd74vIvvJeDnzoE3w8Kg8zszuClmYACpRw
Lw78r3jamfw5ehm6x8lQRZPV15SCoCQ6KxIVkE6hH7fQVEc4lF4GO+GtsK7WC/P2neit9qER
DJfqIHDPF0+GR55zJpxy489gx+oXQbf1B+gbuUPlf1Q46KJvzLM2dLHK8fDskidfe9hi27iy
BtNzZZiv1qEjK5d86GhzcbrBG0b9GlSXeAppB7xOi+CWuOtTHlttU+ndYJmN/i7CGjxyoKjK
mt4ja0EZdTKnIzDWgW44OTb+TLEpfYGmU6ElBh40lpHRqLsS7XP566+EzCnblDLgcJQv2klf
nyt59bOUO41Tdzy8HsDkb35qaggXI5w03dM16CDL/M6H4dBnPsKDh+jM2K9/yrOL0OFt7STr
BugRp5TeI95M15A/7iSV3O/LTkm2MAqHrs7RPkT7ttOVIqKvwTEVMDqdlQZkG4KeZpvcllOa
dG6O96hmlrpahQDuEU2h1QJMmme6XUWNBOxNvghs74KQF9tJWFbfjxb6EMzNHwdtzijcc+op
kD56D/T4kzAnUkw1slYVyvp+lsbMcKHSKXppDTlWgdK3FwYnl8GFnXvg9umwCpkigpRjTdoz
bdR05qcHEGSpo6xyjB05CBODc9CO1vZp+RIEhSxHjLupP13C5vVR2Pq4WmeO9oh2jWWO5ytY
JlWUwEzTJKVgxv0Q43awSkBOIHFHS0lV2kJyrwursVmiZSwiWSVyAlMnPb3pnkz9/hf8UJPL
Vqnu/wErI/VSKXbKBLPGGkIhIj3hIKwhJPmRMwiV80s8nI3EZ7/JfJf6bRCg+fSDkGroQRio
HGRL5bzQDEN0o4mWWmEeieThEOfB3ENPgnfqjt+ZYlxdYMsqB/J5025NNFtoHcCKLqzERsGx
W8t2tLSDrxKz9YI8w0lq/7UBOkZ/C+f97LVw39Ougruf+Xewe8NLYMPuH8CSw3ejNS+DNf0I
WCuoZ0A3rGuXst3Zm1ZF+0E3JBq1w4Mj0/Ctoyc0ubBnnxh+79d7T4CPXKj3gXy9JlcG8P1A
UGP2fKoOqbTkxjStphZpH6bB3Kqbj7aAZKGjYVntUhOcq8gNpcwlVYyxH/wL5zEQFRAm57nI
jltmwxa2sPQQdQ9kAjRZxvHf/hgKf3WpeSC89sz8NEuC9H0q62KJz5JcnY4XTWOlJCGuIfzu
6pgWrdeD8WZKYQ2hAjP7Ir/4Pg+o/quvYY6rS7qGPnUNvvehWONJDmEEOptQVZ3gAYh/02AW
1Kw+kw577yGoqEpGyoZn87lEe5FYOgGKjOhOuSoE6d5R0Fe49dkgN4TX7zW2E5bRVGH+Rnn5
tBSfAXSqrRMcz2IA08uxrNjqUj3Dt8C4nYds6QhTi51dsqqkvuQUeKz3OBiqTcEzfnQ5r6U8
c8JScFcgRyrN6uoSgAUi8pQ1d9G5W9USEMJ0zc9nUrD94QfM9xZqu0s5GlTyk0y4smWrP4Uj
tbgodREqLK0BrC1zEIlllW7/HTuDU3fcBO0nbAWb8iXUZ0jbjWrUBI7xX/2Q+e3Rr3zW1N1R
dK8PP8slWKoVgayrs7h/B/WWG/+XL0Pxr2U00g4cHCjfMArJIfT+V131QTiKzpfO3yBFg9QU
QxU3nhSrIey79DV8Ff7sjKkhJO5K5z3yna/B+C9uMI6pdjhJnqNjkoSme9cRhaF9hQOItF+5
DAUxYCq/IkAf+PC7YeXVHwCre4lUn373K9bnabBQfePMI/czx6ft0VecD8d/+0YDTqJRdJ+8
7VMwe++dfB0kRe58kyzFC1TbsmhWoaYcYAWxhEZa3o7WdXG1ZLekZznkEPFT81VIjm2HdLGP
F+LxFOYJzNN2D0z3nQM7X/kg+B0rWRZj4DtZ/GwSDjztbdA/921wOqWqkROVplKpJgevswjL
8nLIFpAfUMUEAc7zalDs6IAptSaLm8mCV56L7YNKflx0Cu1EVuYgc5KMLB54PFCH/DAetNj9
gXeyE6U3slxU5pTbslVVXFisSZPGHO06RFNweeeDTXV35MnLKKJeNEiYAAs5gATq0h9v5pa9
9LOy/VFWKDrPv5Cjh3R+ugqb8jeoxRdH+dBRJaWCznngE1+CAx9974I1hAQSsubUSox6eOjz
JhlSiNU4UAo8WKSDBvyZ/KlnxJKHwtC0YAUk/4zTYfk73se6OZ0TObjUJ4/uAzm0lELAGNh0
Ih+PZiRdi6kjrlSES+/TuQ5ffy3fgxVvfgcHmtioPeOMRR5ehFqhUashFogPUE2hGBoagjPP
eCZsn2uDoVkbnvmbt8OxgQthtrsfJosbYMKPR/w6xv8Ete7NvJ5JlJa4CP+B2k/AmvoiGqHT
IdV5LtSrEljV6jDMze0Gz0LrLY7wz72lZeDWHoLe1C1oU46Dafd8sOZl297D5dZriC/Dh9yT
l8uEFfJZ6O3tg85iO47OJE+pvj+HNysVW4asyTo38Gb5PT/Mqou0i7Ubuua3svJRHj7zxz8Y
D52aNeZP3MqKhHR6PNmXgtNFfa7hI8s0eftNLNt1PR857NI+yG44JZw9kMpM33Vz03UQaFMr
Bwxt8qcnEFz/2lRDyHkfqmplKtJsnYIz7ThIZYNy1Vyccjp8P56nYck8FJ2Zx+xDrcFC+yzd
fRs339FN4anFQs+Fl0Cq2GX2XZuclF1PG/K8R77xRbbS1HVKD/JEsSidPJwdE8ViS8oRFsqG
GZA3/u426O/vl4Cem5uDk47fCHtnXdg+n4fl+34O3SN/gszUQfjjsz4G06leyXWsCrR7aH2r
JSgX1hvrrRfnIWvt1SuwbvKdYI8/CkenQo7as7cTB8kE+IUV4JQO8c/HSpfCRvgM/3u0ejbs
t86C3vYUrMjMQmcST7UybWaHQ+Ucv78ub0E6neIGfd2FNnBTWaRwqablxprSyNFCzeIY0bSG
+m1wDq+y7AbQkfxa3TTRjgBa0xOdnilXlvJDJ0xxSc6iiKxTKLPKPPNwhOrxpleK0rV4Lq15
Tn0p1AMkbh5Ot76JjMlzs9Wxw2R6UEtVmMLc6GpcKnHJtsNeHTwwfc+ElaUsF0mmF0HMGaPg
BlEOW4T+Bc2mlEtB555MZSKFsXIQcy+7QOrJ4QJGeG0J1/SHbnT6zPcb/R/bCtdwVNdQx/P/
0wM7oB0tu6uz7KhqIo2s2p33YHjtC2HjHz8rp1KkILkccqbKYfATaj3AzHIlgkvr3F4dhTX7
74TR/qfDnJeA3J7l0JmeBmetpB7+xDzkpu6C5NqnkQ9PQjLUrQ7o7rsb2rwc7A3+O/LfHlin
Ja+2IrR32FDwJmG0hhMdWvmlOYDOQhd4eCdpJqbkJOLOrqpyblIuWljm4bILj0460Id0fFun
BwmnlcfYsLIVAa8B1KF8pfpRkGbLUUdO2pAdlCwR4Voi0qeNQKiXiHOU6uDJLkAK1LI6xGpq
a6CLWun7so+FmTtAJTiHC++AlPuiqaCCwxZ6rIiwZEsndwaq9MqKN4bRFjFQOdCsgmhLKZob
x8j7EoTLxkXKvnzTBnehRY9EvEd2dOEi22qp+dcrVQbz1q1bpRhLoKAbnBNlyCbbIHPgVuid
eBS2H3cp94WrBvOxhS2jG1nlNrcOXlVa0yDXAzu2vYu7fW5KfAzagp3QdnQCshkPRtMBRxvl
Ngzz9kYY9v877vcEyOjyI68KgZuC/Ujys8kuqHtTkNbiRrIAdBRKOEomqJw7wZqt0UwXATVJ
d5TgX0g6RqtOOFZDYgDErXMEvNDQmkuVUavFUF2V1yytr2PLejuyboGwwmwI1R1JNKwSJWzZ
C04qBTL5ntdEV/WNptRQLxhh6JSscNG1fmHXf5m/TNZQU6Yg2uDFiuRn+DXmoHR8bpmg2tVG
pUYRWTUg4HZcvjp/aEoH5X4aIvw7fzvajDJmLGIn1BrUETA3gl1TGB3QMYEVWmCTnTKc5pfX
Z6A6OwWjncfD2JrnNgHZEvFliMlC02cm+rdCNVlkgNfsNvCtLOyevwo6nDkY8K+BXOYw1Du7
uXk6BWzm/RzsCt7Ii2W60fTahFy7W9OZjV1JqNR82Fdrh+40FbniTIIet8dLHvt8gwnINTVt
pezWdIMam1O/5zN669xzw43QDc1D9YMWEcelFX+W36H1suu81qHj2MY0MS0hCS7S700uqeyr
XAqfLaFcStqTVtoKgcG1fghkR68Ho1eXtSzTi0J3IOKHG1iKl4fhYF3faDUm6YnIss40cMh4
0EqugSq3sixjqfUDEdGZSi1mrimW/qmLYy0rbA5jBoCQLc0arSos0CO6Fd0w2nMDHdG/12r1
OKBJx+W1qPGE1rTV4PDAenik++NwtH0TF246DRp1E2DwM8Sp9d8cDgbUof3w/TCE9KWjsgnK
xRzcX7uWgzRCJMz0IxapiaQ85v42H4acDBTwxpCFreE93TWbggyCuSsloDdDltaDsXmZ1H98
Ua6jEqvEQbA/NpOE0bLF+1yB3+lOoyNYrXJDFPOQleW1AJpArf8tROgcgW9F8hzCZjL8OZXb
ISVstXAm41I1FiR64UhrF4gwZdVYX732WnSGiHUikt+l92xXmIWAdG4yxCxz6A/oz9CimdHl
56yQi5jck+gMFbXwTdq9rZavc+ywmpbkX191GI1aYxOgsWP3s9G5joMbmgBt6AetmlkVsbvC
XFROeQgOJOqrV62EFStXohNYZofPFwuPJEffpAagE8iPrT6XlY/uwT9AGakMWW76HHHXhfbZ
+P7hWoaLWzcV6tCRFLB/VvLge8eTcNdYikFKFpj2mXSsWDRQh7dd4t2uz1376bu3H0vC9ukk
jE+WwgmTHoDnhdkMDecRs9aUERaEU6deX9DG4wvbMb059OLvnHOs6vXADlvM0kDTTiEvFq/B
bI4VX9ReBkws04GJl4DTJV9OdL3uMKFHX4bW2xlAOLOQhfPNZ+JRU8mkrLBlgVrdqpWTFgW1
wxUuSLM8nx1FESmbarK6EIatGzcaPH68DLeJBsUw49XjgE4lk+yQTFZkjR0dZHVHEja1+9Br
TxqgtXppULcCKOnTdbw44uNeIs/8WHql4UBYbKMKk13TLre/LaRkq4GuVMBVKBxdRyNDfZzB
l2DfXPSNdXYijg1d5KqsD5txUHRnpCpz/5gNu4fHYKbumIqSXY/tbZCrwuXZorV63NtYNK+4
TTeaG/VECjd9IS0rtyoQziIRSnID61F3Pl7bB2EASNfURTuCRiVIHjSqr7KlgKwrPwjMOsHI
EiJsmGgGp6WafaoK+KhUqbhxWFNoxSmHbUX6eETBbssqd+E3lamZPiRc4hUYBcRS5wctFlLS
eRzM7zmPw49TDjqhoVqeM9bWeePQk6hCW64A65cUoKsgYKzqsZU8NOc0gTj6eytrOyfSzMdn
O457QglI0f1QCVUdfx/Ie5BkyYuAKXvREb1gOVBVcpNDk3KsliFuesgJBWqqjtuJFnOsjAPZ
L+OAcZCmUAmZx+K8SZeMTYdxR6QR9AbUDc1lTDGnohw8G5P+TPVxIrqCqwdG+LN1QoZy9Gw7
Lr1FWyI03HNLcWeZK2zFNXQA1Wg8iFEI7VA7anaQEcEgRm/CaKFjqCn9tJUzK9UZp+n+RFuG
8YpdjivP3VWOpioS4IFLRkI7n7bVZNmjhbBRutHk/LOO7LswE7icsXYIrWEbXmQqjQ8X+WUx
RUs5+LAk43AXIgIS8VdyhMYqNoyUrZgOHQUmAZq067GezVDt6uc1uBuphQ6ztxoM9P4JnT6s
a5eAqNRkpGoJWtneVM3UzWnuR1lzjnr40bWlQ6UDYE22DsWEB3unfBjfOw7+UrwuHLDZNnkO
gweHYdXK5SZwEl3Fia0jedSsR+vpMZLW2DAlmrVDjD7sx9QUDYhGZzMgcOHDtl3bcPLowKHJ
WGrNlmrbJdcID3QLhYh1Nz3lQPW1Y+AFYY6GORdNpyBcYYoUJC+IUwXdHEeDk5axDzzWoDX4
zIqxDXWANAsFdhAmKkV9lMhAbVqIk7XqCMWLVM7QMWq1Kq+HGEsfXZOahzw6bOOUipnqhC4n
YIDopRTIgmUytLCPZ6ahlWkLRhGjw9UMg5soQBTYLOnN7YNydgXMZXse1yJHwUyDZACBTG27
WOSbBdgzm4Z1uTqfAwFt92P74Nj4BExOTEBHZyfr6RvXrYVsPi8foureE69GIflOwL6DD3DK
4aaCb/JHiC7MUDK/tSJWNycFDF+uq+eHdZ4xj11YkZJ7EbPSmqbIdI74NG0yxUzdnmsstu3Y
oeWLOG5m1Sx+OXKgBKJp4UwjZeKzkwn0QYSnhtE/Vk8iKolUYZqzFbR1NsEo8MPmjBqkQRAL
NMlnYKn1VaClX6KDJI2W1xTfmuLc6EKgwvgiOjHJALrNqvIoo26oyUQbKwfaMgWR4i25Jogw
jf/abDmN9yLQR3EK3z6bxam8wVqnCnBk0wuhml/VBORoIpSWBDMVWddIRVup6TnYN1WFkp2C
MbsHqm4HAhp4He7HdjwKlUoVOopFfult39AwUG4KLXZUaG+HtowUsZctWwrtORnC37l7D4yM
yPUP1+dqESulghvKMocxB1/JWaqzkaP12GbqYal1q3Wur9Ru/bBW0Wi0gWnKQrvVoBZKU52b
n4Vdj+ziGadd5TZw8g9eG1UXUUHGcQPLIdfeqXRwX62dmDC8mR54vTYPO3ftiTtdQbO01L+8
B/LtekEjGX3ce+AIWz/GSFsbrFjSLWcidnrjmjBLdpRCgBczMzsHh45OsIGg7/WvWIrXEcSi
ewu1SqPBtW9Q9icfWLUs4oh7vN92fNZWZD979h1iHFBiEuhcjlXLurlq9qiX4e6cxKEHh0c5
4LJ2dT8kkm5E47RUAjjA/gODMD0zCyW8ydQUPXrjF9o02JxcF+eJkPJBUci2+VGoTo5ANpt9
QvtpKh1pLp98UhudF6UA0LELqgLbU7VtvV15HDQdLEMdGStJKx7ZypV43gnNFASa0swczx6c
p9DXxwrS2v4+bgZuooKRCOHIeInvJ2WO0YDr7u7W96IpAhQFdvS4cjCUG7//hO8BWV8q9iCr
V1ERuNnZWZjA66Bj0TUkldRJ5+0plYbAS9dCfsjRoyNQROA1HlvfY2rZHO1yS0uIpKiXNA7I
vYOHceaVA5BmXcrXof3SNUWvUQcEj+B19nT3cJTQALq3M8sjim4knVCjVWgFyDIeoMVJW0/g
vol/J0j/ozcB/zk36888X+vPvAfWn3FvrP9b91gDmk3v6MQcm2x6ZR/nRiCAxZ8JPuu/GHDg
/6Pztf6Dj2X9BwA59vv/EWAAHJMxEGwfmvMAAAAASUVORK5CYII=
--------------000906000207070804010401
Content-Type: image/gif;
 name="neev_logo.gif"
Content-Transfer-Encoding: base64
Content-ID: <part3.03040101.04020406@neevtech.com>
Content-Disposition: attachment;
 filename="neev_logo.gif"

R0lGODlhogBLAPcAADQpZtkcEtk0K9kjGtra2uSKhuDf4N+ysJeWlefn52RciMzLy/3z8tbW
2fK7udcVDHpymePj497T09za5Kyovurq6vX19dkrIuTMyyIVWdHO3eOnouJoYed9eSUZW7Ov
xtrMy/Grp/7+/tpCO/vu7d7e3uzs7NuVkaOet4qDpOHV1HNtlNzc3F5VhOSDfh0RVe3s8ZiS
suqRjdbW1fG/vOJWT6+svt1KQ91qZUQ5cby8u6yrqqmlu7ayxeTk5Ojo6IV+osbC1VJIe7m2
xsC9yrW0s/Lf3sXFxNs4ML26xpiTrNLS0dtiXPHOzGpiju+Nhzovaubk7uHZ2MPBzc7L2xoN
Uuvi4eq7uuNiW/X1+JCKqqait/Hx9ei1s6Wjo0tCd+He3qaiu7m1yqynweexruzT0vGblry5
y91dWOKUj/Xr6vbb2MrI0P76+t94c87NzuyinvLEweyalvjT0uO0seJvaeufm/bW1Prj4trZ
3ObPz/Ll5eLDwp6asNHQ1erp7+ra2erEwuDe6OG+u9nX4ufm7S4iYCATV9QMAykdXsjH0Cwg
X9bT4G5mj/T09/CRjM7N0/r6/NjX2ePY1+fn6OXj7aikt+fe3v/8/N5QSfn4+uLh6ePi5e/q
6uq4tuCblsvJ1crH2c3L1JaQr+GfnRYJT95xa5+atunLycHAv+W5tufl5fnf3p6dnMfGzuiW
k6KhoOXl5d7e3d3d3d/Z2cvL0SMXWqempicbXSoeX/j4+Pz8/O/v7/n5+fPz8/39/fLy8vDw
8Pv7+/b29vHx8e7u7vr6+vf39/PIxfz8/f39/vr6++Lc29vb2/vp6Orp6dPT0/j3+vb19/38
/fHw8ObZ2Pb2+N/X1j4zbvfPzt/d5+Hh4eHh4NDPz8jIyPv6+/rMza+uru9+erKwsfTz9+jk
4+vr61dOf97e4Onp6erq6f729uLKyfv5+fPy8tXU2NTU1Pz7/LazwLm4uH94nfHx8qqoqNsw
J5yWtOzs7uro5/KzsMfE1vDY1yYaXP///yH5BAAAAAAALAAAAACiAEsAAAj/AP8JHEiwoMGD
CBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTI7MUisKSZaU/ywiKsEYIxYpz
X760gIBCUCSLwgp9SOFEyBchLVZoCcIr3sVkXAjxAHJTyDkF9PBpcJRsoQgulVqKLSQCIlix
LmEw7JEDCra32AAICSKi7LJQCgD4s+XBA18PuABA0LZLYrwJQKAk8svYli1/hnLEqNRV4jQY
Y84ZSuSYsV9chr6EgaEsoQhQhuCqzjGhbEMRENyqxrYIRV2FPHL97WsLwIdhxv4AsZXBg7/j
yI97OJQLHznXDQuNSnTIePLrHjIAiFEPekMuYaAc/yp+/bqtQ9jCcEnIBVv1vvAPATkmzDtC
QlCKw89+CJQjXb8kRMEi1h3Xmw3PaPDFCwWWh5wtpQDBRYAMaXAOgw46eF4LjFDIECEtHPJY
huWd14g2HhKUzClV4HJdBl8YAExhC51CHnK4VNGCJAkQI4yABCbXWxKgQPECieV5UEoMjqR4
ECOLHOIikuUdAoAr8dhnUCgASEllebi8AAUj9RkkiF/mefCBOb0sJE2I2FWxBQsRBEPjQQM2
mAE2o5xTxXG4+JUBX1Neh8ugUwzjJEHaAJBBocllRx6k/uSIDSHGaDkQI11SqhxjlTr4AjYT
ZFpQNCu0eN0hK8RiwaIEaf9gSAbJhQmFKLMkYIGmAuUZqSGzVurBCy/wZcsL1TmYIxAJ6KIp
DEK8QCkux4roGLJglqLAH6YaBEMOqtZ6LIPLYetgKUJQsox9/JRS3p5+FPMjQiLEgCGOERJg
gAnGKORrpIRmcEgLStiQhDxKLNggcodA0QAxdxKkxZGGDtoICkMkYUkK2NwLKIRh+GiQJvT8
aaiUK/RhiQ08pJADg55GmM+8A/2xIKSOhZGOLgn9cWGttPbAgg++wDrQvycnskUtzcxSggHb
+AGBx8gtR0QFzhZEyCK01iqmDX6wIIsB3JTAhhMm4yhmA68WREV2kIb5hSXdsOB02a4AUYUt
cRf/N4QvESszhrvXvaDALEUjdIZjtVahwDsl7Mxrr0EaKmYSBLBgQAIm8BIML5Q4kWzhlviw
a0FAUIxjw0Q0vc0PnQdTjA8r3IhcKSik0wt01gBRCqWHnDNF0xHAzgsvxVCCwniGVtEIJ8d4
N4EhXjIMABH8HhQNBOEq9wIKdPJCM0JIP/hCD8SbYEEvwuwiTC9UGLJwmEqUADFBleRwiHlV
iGG3D8UAzi7cpwtO5GBEgHrBF/KQOIEQgnovgoI8miGLWPACOO0Thi7qMbWFFQcU4iNINPQG
qWFpIQHD0JI2jASpF+QAFLk6nb8qlxznvWMWEeBFL5zkiy8gEFBV0MIs/+RFEDEMqnEKaMAs
fBCMbglEBLuIQdcelIEpmKBNAhlD2pRzCHo0owQ9cuI/oEiF/BiqFPiIRQoJEgQRXUdHebhf
QbRYnhdAoBn76tdCyuePYYFvG1fUkjJa8MPjZAACksieQJRBD9UhpwoxYAEgd3eQ6dVRCZw4
HRe4hzND2KAZdRLjQDQhOsvtqB4Rg8HPkkOrIbCpII5AG84WYYOhNXCGHvRAD2JotBUUso9O
kMQrBQIDBThyL7bgAS8RkoUcNChMjciDnf4RBfHgDBtEiFz0EqIF21XKSpAY5kDwQTV/VCEF
pkvRBNzIynNAI3JZ2yMNDQkAeeQxIfSYYnKSWP8BLP6DEF/YHysBMAQDiPMg5ygkjBLZL0Ic
kZVfeMc2iJgQFPQFOy8YAgq9wwjxeA0bfgihQISBj+71MQNC5IZI5enBHMhjG7yIWEEgsLBK
8dOfRHCUeQCQAh6E4QNADapQP+BM8xgCEpILRTltkQMeiOEMQYiqVKXKj1DQtKZV4EEEbvmP
SHRQSOfDmmu+VT0DXSmGkyNI+cLUAldEQI4HAUKGFCAJrA3EBoEy1F6Ms5++XjRJttDoMJIx
hmNWzTGITSxia5pAIU6TIETIhT5zBAF0JE4EVKBadlagrys6hI8vaAEbiGa0f2ihprjgJ88E
0oe/YsevsHXQcuSx1WH/xMCkyhmUYnfLODCxiqGwPIdAkZOBRbCBiJFIVQk9IA86AaO0BeGj
Lc7hCleVNga/9Add7SoQMRTrS+Ct2vneygV6DDe84MVFhITpz4FI8ZlVQEECovcHzpjnC5KA
Z1rVOk9/DKwWupocdsGk2oGEwZvoRVIGLLGNYMDACYxNsLJesIJ3cJcgm4DCD9maB2D04gPS
KpwSmgFTmeJyVQp4AyXWiJABl2e7q/2HJVxbNdjaGLYZ6IMBePEHBUg4SRnKwAoaILmCiGAF
592LPyChPgWUdS+LgARaH8LHQygAEhtNiItrVWCBTAFNyTlEU5MwhDKb+cxoRnMP/LDjYWig
/wc2sMQW5kznOtu5zpagh/wsN+IiFyQUNM6RfCeQi2dSuLN6/Gx/raxiFh9ky/usa4w7qk//
5mAKs4DaNjbN6U572tOxgJgIemGCCHz61KdGwZ5XhQJZ9PMgzdyw4dABYkq9IAnOha5Bqnzl
LLf4l6ltwIU3IdwXLWII26hAMIgRjGY7+9nQfjYwAPSPXViA2dHOdrRttDDiJOGeB0HBMW2R
CEhAIMlihpyfFb0wRq9YwNmF8UCk4YRjeiC+bzXGAPfNb2vA4Bj8DrhrRPCLgPeCF44IuMLd
BwEEuxASBqCotxah0BUAAL5bIPFK2Y1iLDvaIJAGVJcFMorRAdEJ0v808UDEoBQUnIEKgpBG
QqyxCSrwYwyjWIEN9rsJ/TWvwm9V+RinRikEF1fKAY4IrxsNbwfJeyCymux5xKBIgwjDT9jC
xjkgkAIi/ISYPNACPc6RA/++AF3c4lW9TK6crA6tbQjRgGEDXQUINADcEOG1x5tuqJH/QxNw
KlxEPz6QIORVUIc4RCnCMIxdlOXBpUh8BsizHBQ0ESFD0KnXclALbU6OHEJ4cpIymmuJLP3d
Wo63pOdI40q9QAhToCRBqICNSuPCSowwgS9+JIIg7K1KULABV/+xjDB06VyjyEPEE30QZdgA
t14TAiQ8b/pF95rwBAm5TYUdY4FoIvRJahj/PUA4jSxMIAbHL08p+oBDkZKjEVskbi6AoAFy
/OIbheiBEyQLpip8gQ0sEAvDZxCFMCue8kinQAAwNT5UZn1Ml3pOt3puU2gaAhk5gBMXB2w6
EjaktSkAEGLm0RtfcA5CAAWGwBca8gIUoC9ssl/RUDIHeHuGgGm6omvkY317B4F9x30GoQyn
wHYA0xmo9QIAwAZ4FEgD8QtGVGnKIYStZz5a0DQCKHQFoQG91Tz08A770l5554Co92sReGEE
0Qsp8F0Sthz+8ElgBHcDIQw2gIY/5g8Cg0h0UgyihBBcIEvv4gFDQCdwpXQ46GuPBmx+NxAi
4Agp8IHZFWSHMDdN/+MDImNkvcAD4rGIGbIcUKAFMyBJJhBPDCECH1AF86Mj6rZNExEGxKFY
oQVg2DcQWmAtitUCPHgQInAMH9ACYWI7uLCLVXMIL7AIjTA8S8QLdzhGukAECrAIyFIgU8KL
feSLuNACNpA53GAOigIRUQAAe5NYGQBJGseAEPEB2AAF5FiOhtAIOYgQp1CO7AgFjTCLB/EL
x4AOKNAItUcsGfACVVAFxPICGZADEEABDaA5sRAMskeLuhALNvEyxOKLk4csDZkD9KAEYVMC
EWACx2CDBUFSudCOAPAFNMiGEvEH/HAGH2ADKGkDFEAEBCCIBBgEQ3CSKWkDRMACYmgQv/+g
C8FgAPLQB1TRAgoAlAqwAkDQB0MgCRQUAekADMUoE71ADBFABFuQAivQAjihE0OZAiiQBJLA
AiXwOgapkd4iBnCWkhSAOVt4EbsADAkQAW75lj7QiWklDLwQC2/5lrFgh14hDBZQDD+wDZIA
CbXABrUACe/wRQZgAD6QDsEAcPv1RLswDLyQDtvQAJCgCERABIrwBvAgNlCzmBdUJhMhArpg
Aj5wl275A4BzEaNmAcDwmq9JDMDQeAuRk74Am7HpCwDXEL8gDMcADMVgDumQAMRJnOlgDsXg
C7ogmg8hAr4JnMJJnLEQC8ZpAslJH49Zm8fgC7IZm8BgAU0JEQT/p3C/8AuPOZ4BV57i6T69
oAvDYAHwOQy6wD7mWREE9z7H8J7waQHySZ/Z+RoFx2/l+Z8ogRF1caC3wREHOqAJWqARYQz7
aQG+MKG3GZvYdjzHUwwaagIc2qEmYA7mUAEVoA7PUKLpkA4/UJzFuQrT6QMuepqo6Zabxg3c
kJg2agAlkKMlMAuzwAI+6qPNEKTNQABESgCSYKSSkKRJOgMNMANO+qQzAA9SCg1UWqVLcKVY
2g1auqVa+gbd8AZg+gYLMKZkWqZH8AbUwBAW8AMpmgCxAKOmdqOyIAs9ygJBiqRQGqXwAA1X
yqVfCqZl6g2CKqhHUKiGmgqImqipoAM6/7CojKoD8xCpkiqpRVCplloE45CpmRoOnBoOO7AD
nvqpO2APpEqqt3Cqt+AFqqqqsNCqrtoKsNAKsjqrsooArWCrCJCrurqrrWAA9akQrRmhwiqs
FFqsxnqsyJqsyrqszNqszoqb0Bqt0jqt1EoMnvOa4JlWtkkM3Nqt3tqt2tZsGDqu5Fqu5nqu
6Jqu6rqu7HquGvqu8Bqv8jqvHpZWUGQMvZCv+rqv/Nqv/vqvABuw+6oLBFuwBnuwCJuwCruw
DNuwDruw+kagDjqxFFuxFnuxGJuxGruxHNuxHksReGAGTzCyj4AHBdEGITCyT/AId3AQeFAA
HOACrHAQzmAG4v+AB3jwCI/AAAYxB09gBm0ADuKwD+1gEJgwBx3AATLgDC5rsySQEHggB3XQ
AXOAEG2ADG7AAa/wtAbBCo8gDjxbEKygsk8AB5hgEOuwDzhQByEQtg1BA/fwAAMQAANAA8bw
qwyQCQGwtwMABxE7ECQgAHT7ABewBo5HEKhwAQHgADRwAQPACsKQIiEwtw4gBw/ABGrAnP9w
B3sbAA8wAiTwqwIRBwLwAGtwtwZBAjdAtwFwAXFwuAOBCQ7Atw9QB6FbEA5wAaaLugPhAHO7
t0jAAMwpAh3QuQHQAe2gkaxgB5kwACPQAWUQQBTCADUwAJlwAiegB9I7ECHwADdgBzX/gAhp
QA3tAB1NILhXALcD0A+84IkhoLg3YAoBwAFWQAzdsg5P8AA1UABI8ABd4A7jgwz9G70ZWRDv
ewGvoLcdYJDQsQ5oML8FMAAPgAq0ORBwGwAE7CE0MAAD4AJpsAFhNBB3gAQB4AIFEAA3UAbX
yBC78AqXm5gJMCMCsQ418ABpQDbb0CN3csJYEAtucLnVIMMCcb4BcAVXcA8DoAcC6CHvy8H3
EABMMAnpYIoMUAcPIAOXwAHiWw5sKMAPgAGQKFNP4Lyr4AZQzAyR+A8kgAR9qwI3MACDUAGO
dsF64ANC/A80EAD3AAZQEwEXdgdPTAZgIACZwA7m4IkJ8Qsy//AAaHANgFTA/0C9AYADgzAI
l7C9AiEDAVADKlAA9+ACUuBZQyy4BVAAF3ABGBABz8W9F3API0C3TCABvsYAWPAABTAJHPAA
LsAMK+XFqfxYAyEHATAC14ADUEwLryYQzoDEJ0ALn+ACehB0FvzE7LANcJXHF0AGfKAHJmC/
A9EGViwApMAHfMAMNdgQi9zI5ywQ1Du3iIAIr7Cc0PEEKEwLYFAGl5Bs8dQEbMy3FxDNqywQ
kzsCGzC3sTzLtXzLubzLVefLdSJTdjDM12DFOCAFP2CKyzwAJ3AAWMABqBBqd3LBGGDNIc3B
71wDw7BDBOEMNyC3pNAJx7nCC5HOUv8wXwTRziPgBm4QCMRAbQJBzzcgBeVgBTCtQ65xvgNQ
BzjguHqwDQH9D++LBBiwugfNYrRsyyqw0LMgTg4NzAIR0SMgARQ9Cb7mDIL7CRvguV1QAasp
EBdczdfMwThgChtQDBYQMSKwB5nwAAEAB3YdngRB0zY9EDSsyxJwDWAQw3eiyTUgASfwvWrg
0/9AxKpAB0icyk89uQKgAj9c1a5x1Qqty8zA1f37yzIFB8Ms1g9Q0WUtuM2MBYhwBT9wxyJN
0hbcunwgAcwQl/6EB3bQBYFQwzcACDI904xc08dw0zUQAAVAkObAhidcA7RgCg+ABXugC3dC
xF1g2QOA2Uz/fAECcA1pcLmybNW5XABScN6j7U9eHM1e/Q+aPAK0UAdQfA2tHQCkYAB1gAie
kEM089a27dZ6rAIW+QOX59aCawSB8ABIcACizBCCndwDIcluAAIS0AnyPBCMzQ4/7AJWYNSj
HABkwN0AzcQDsNmfQN6+tg4u8ABuwAd7vQEGxd4kfAAgAAhOQRBwMABIwA7GbAqJzWLrsLpp
gAF77QkT9d9PPNLXjNsgUA3r4yHZILhkcAWfOwjrbNzqLOHsXL0D0Mp2ILr/kA2tKwASTAZ+
vM9UTgZMrcomLgASYMZMoAK+hgn7QLiOOwCosA3iFAdsfMqgWxBTfuJz+wqbw2Jt/3DCrSzB
/S1xDkDNAY7HHAzoaiC6NPzliosFUqDKVKjjSU0Lgz3DHIAESHAPSGAHUf7NHSAAAnABdVAN
BnBhZXADF6AKqjACSFDiA7EPI3ADEmDKpmDfjka999DqBcAMgJRo2ZAJAoAEhLwHFfwPmMC/
AnAPTFAGBrAzBIEHI1DtmYAEV5DkAxEHtM7kdyLAzi4ANwDt4+MJuO7KV6CYT70QvVABm8Pl
TzQMCfA0EdAj47MLwRABUGMAESBx//ALwOCW1umW8y4MJrANTGQOOfxxxvDwNirNA7ELUMnv
hwwdGi/wOJrsBdEL5pCYNbqABBEPvLANGD9SKz8LEG8OptE4RhaQADf6A614EMIQDOlQDFz4
D71QDMW5lHh9DCZQnCZQ3CIwDCH6mhVgjSmylumgPsRQAT7vHb9gAeaA9Iic9VtPnHJpiKVZ
nM/tJLvgCxVQnGwdMVkvoiJ59sMJ9ohsDMTQpumQxp9oDPO5KL/QC8fw9xlOEL9gDH9/DCpd
ELvQnsLwPr0gU845n7ug94dPEIlf+LxriJX/95MvEIOvC5oPu5jv94CvuVBEsKA/RhpU+JuP
+p5/DIH/sbAf+7I/+7Rf+7Z/+7if+7q/+xcREAA7
--------------000906000207070804010401--

--------------080703010506070408090700--


--------------060501010403090408050509
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------060501010403090408050509--

From java-user-return-37966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 14:16:51 2008
Return-Path: <java-user-return-37966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25921 invoked from network); 29 Dec 2008 14:16:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 14:16:51 -0000
Received: (qmail 33332 invoked by uid 500); 29 Dec 2008 14:16:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33302 invoked by uid 500); 29 Dec 2008 14:16:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32705 invoked by uid 99); 29 Dec 2008 14:16:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 06:16:35 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 14:16:24 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id AF6ED7FA9
	for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 06:16:01 -0800 (PST)
Message-Id: <1875F57C-E47E-4B8C-9E01-1F269B0BAAE4@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4958CE52.2060005@neevtech.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-194-997373907
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Help in Arabic Analysers with Lucene on Windows
Date: Mon, 29 Dec 2008 09:16:00 -0500
References: <4958C03B.6000200@neevtech.com> <43EFED66-F704-4DC3-A038-C6173E5DB1F5@apache.org> <4958CE52.2060005@neevtech.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-194-997373907
Content-Type: text/plain;
	charset=US-ASCII;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit

What does the FIELD_BODY look like?  You search is apparently going  
against that Field, but you don't show how it is indexed.

Have you looked at your index in Luke yet?  http://www.getopt.org/luke?



On Dec 29, 2008, at 8:19 AM, Girish Naik wrote:

> Sorry for that,
>
> Here is how the Analyzer is Selected:
>  public static Analyzer getAnalyzerInstance(String localeKey) {
>     Analyzer analyzer = null;
>     if (localeKey == null || localeKey.trim().equals("")) {
>         localeKey = AppContext.getSetting("defaultLocale");
>         System.out.println("<><><>><><><><><Locale key taken as  
> Default ");
>     } else {
>         // localeKey may be a csv of locales, in which case picj the  
> first
>         // one.
>         localeKey = StringUtils.split(localeKey, ",")[0].trim();
>         System.out.println("<><><>><><><><><Locale key is trimmed");
>     }
>     System.out.println("<><><>><><><><><Locale is " + localeKey);
>     String name = (String) _analyzerMap.get(localeKey);
>     System.out.println("<><><>><><><><><Name from Locale is " + name);
>     if (name == null) {
>         analyzer = new StandardAnalyzer();
>     } else {
>         // if (name.equalsIgnoreCase("Arabic")) {
>         // analyzer = new ArabicAnalyzer();
>         // } else {
>         analyzer = new SnowballAnalyzer(name);
>         // }
>     }
>     return analyzer;
>     }
>
>
> While Indexing some are analyzed and some are not...
>  document.add(new Field(FIELD_DOCUMENT_CREATED_ON, LocaleUtils
>             .convert8859_6ToUTF8 
> (com.aurigalogic.activesite.field.Field
>                 .indexableDate(avsDoc.getCreatedOn())),
>             Field.Store.YES, Field.Index.NOT_ANALYZED));
> ...
> document.add(new Field(FIELD_CONTENT_TYPE, LocaleUtils
>             .convert8859_6ToUTF8(version.getDocument()
>                 .getContentDescriptor().getName()),
>             Field.Store.YES, Field.Index.ANALYZED));
> Currently the method LocaleUtils.convert8859_6ToUTF8 does nothing  
> but returns the parameter as is.
>
> While seraching the Query parser  etc.  are created like
> Analyzer analyzer = AnalyzerSelector.getAnalyzerInstance(locale);
> ...
> QueryParser qparser = new QueryParser(Constants.FIELD_BODY, analyzer);
> ...
>
>
> So while posting the form with a Arabic word does not fetch the  
> results. An English word does work though!!
>
> I would be more that helpful if anything else is required.
>
>
>
>
> Regards,
>
> Please do not print this email unless it is absolutely necessary.
> Girish Naik
> Development Lead
>
> Neev Information Technologies Pvt Ltd
> Bangalore, Karnataka India
>
> <banner-5b.png>	Mobile: 91 09740091638
> Email: girish.naik@gmail.com
> IM: girish.naik (Skype)
> http://www.linkedin.com/in/girishnaik
>
> <banner-2c.png>	<neev_logo.gif>
>
> Fools rush in where angels fear to tread
> See who we know in common	Want a signature like this?
> The information contained in this electronic message and any  
> attachments to this message are intended for the exclusive use of  
> the addressee(s) and may contain proprietary, confidential or  
> privileged information. If you are not the intended recipient, you  
> should not disseminate, distribute or copy this e-mail. Please  
> notify the sender immediately and destroy all copies of this message  
> and any attachments.
> WARNING: Computer viruses can be transmitted via email. The  
> recipient should check this email and any attachments for the  
> presence of viruses. The company accepts no liability for any damage  
> caused by any virus transmitted by this email.
>
> On 12/29/2008 6:16 PM, Grant Ingersoll wrote:
>>
>> Hi Girish,
>>
>> Can you provide some sample code and info about what isn't  
>> working?  All you have said so far is that the Arabic Analyzer  
>> doesn't work for you, but you have said nothing about how you are  
>> actually using it.  Are you getting exceptions?  Do the tokens not  
>> look right?  Are no results coming back?  Have you looked at your  
>> index in Luke?
>>
>> I'm going to take a wild stab in the dark and guess that you are  
>> not reading in the input in the right encoding.
>>
>> -Grant
>>
>> On Dec 29, 2008, at 7:19 AM, Girish Naik wrote:
>>
>>> Hi,
>>>     I am having a hard time in indexing the Arabic content and  
>>> searching the same via Lucene. I have also used a Arabic Analyzer  
>>> from the Lucene package but had no luck. I have also used a  
>>> snowball jar but it doesn't contain an Arabic stemmer. So i had  
>>> put the Lucene Arabic Stemmer in snowball jar (with  
>>> modifications  :-X ) but still have not got any luck so far.
>>>
>>>     Moreover when i dont use any stemmers/ analyzer the search  
>>> works perfectly on a Linux systems, but with Windows system the  
>>> search does not work at all =-O
>>>
>>> If anybody has any kind of solution or ideas, then please send it  
>>> across. I will be very happy to implement and test them.
>>>
>>> Thanks in Advance.
>>>
>>> -- 
>>>
>>>
>>> Regards,
>>>
>>> Please do not print this email unless it is absolutely necessary.
>>> Girish Naik
>>> Development Lead
>>>
>>> Neev Information Technologies Pvt Ltd
>>> Bangalore, Karnataka India
>>>
>>> <banner-5b.png>    Mobile: 91 09740091638
>>> Email: girish.naik@gmail.com
>>> IM: girish.naik (Skype)
>>> http://www.linkedin.com/in/girishnaik
>>>
>>> <banner-2c.png>    <neev_logo.gif>
>>>
>>> Fools rush in where angels fear to tread
>>> See who we know in common    Want a signature like this?
>>> The information contained in this electronic message and any  
>>> attachments to this message are intended for the exclusive use of  
>>> the addressee(s) and may contain proprietary, confidential or  
>>> privileged information. If you are not the intended recipient, you  
>>> should not disseminate, distribute or copy this e-mail. Please  
>>> notify the sender immediately and destroy all copies of this  
>>> message and any attachments.
>>> WARNING: Computer viruses can be transmitted via email. The  
>>> recipient should check this email and any attachments for the  
>>> presence of viruses. The company accepts no liability for any  
>>> damage caused by any virus transmitted by this email.
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> --------------------------
>> Grant Ingersoll
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











--Apple-Mail-194-997373907--

From java-user-return-37967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 14:39:29 2008
Return-Path: <java-user-return-37967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37284 invoked from network); 29 Dec 2008 14:39:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 14:39:28 -0000
Received: (qmail 55742 invoked by uid 500); 29 Dec 2008 14:39:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55050 invoked by uid 500); 29 Dec 2008 14:39:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55039 invoked by uid 99); 29 Dec 2008 14:39:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 06:39:20 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gshackles@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 14:39:13 +0000
Received: by an-out-0708.google.com with SMTP id b2so1361845ana.5
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 06:38:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=m6xKagkmtn4YEEVgyNvmvj55CSfFO8vQPoD0zZYaR0Q=;
        b=oDsvkszj0gWO7vPL0ZhjH8BLaV23Jkbp/GtV4Jf+OvBXZOeRPqa+5bG/mN5BtXWEyp
         tQcDzlzOfA+z3kvGi4lYk+yU1b2fHhhxdEXLWns03QnJXkYkSjVCZ61O/RcpvSjNXF+P
         MFFJdsvgaDeFdSYdB887FZEsw0RjHW/V3MOVI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=G6w1uiQJ65q/ljrDS/ezN07OrnDL7qvsSUXYCEx6/NLTNOeKI+Y5sisQws4XzdvUDW
         9PEH8HN8LWEIxUOnsC5WPMljarGLPuSayGVSuKp7WkbVip/LPGfD0BJYX0Gr8i32X6a5
         6Z7btUMNfh+qIaRbTLefj2IRIKGe3PuAtAFdc=
Received: by 10.101.1.11 with SMTP id d11mr7674587ani.113.1230561532166;
        Mon, 29 Dec 2008 06:38:52 -0800 (PST)
Received: by 10.100.10.7 with HTTP; Mon, 29 Dec 2008 06:38:52 -0800 (PST)
Message-ID: <b63a7e9e0812290638j4707047dv47aaf93ed1b8c287@mail.gmail.com>
Date: Mon, 29 Dec 2008 09:38:52 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re: Re: Payloads
In-Reply-To: <20081227173834.20759.qmail@secure3.apollohosting.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_95490_8566970.1230561532156"
References: <20081227173834.20759.qmail@secure3.apollohosting.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_95490_8566970.1230561532156
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That sounds pretty cool Karl, and I also dig your use of Motorhead as an
example : )

I recently built an application where payloads were a lifesaver, but my
usage of them is pretty basic.  I am indexing pages of text, so I use
payloads to store metadata about each word on the page - size, color,
rotation, etc.   It's nothing too special, but definitely works great for
what I need it to do.

- Greg

On Sat, Dec 27, 2008 at 12:38 PM, <tom@lux.org.uk> wrote:

> AUTOMATIC REPLY
> LUX is closed until 5th January 2009
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_95490_8566970.1230561532156--

From java-user-return-37968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 14:39:38 2008
Return-Path: <java-user-return-37968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37455 invoked from network); 29 Dec 2008 14:39:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 14:39:38 -0000
Received: (qmail 56867 invoked by uid 500); 29 Dec 2008 14:39:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56826 invoked by uid 500); 29 Dec 2008 14:39:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56815 invoked by uid 99); 29 Dec 2008 14:39:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 06:39:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 209.85.218.16 as permitted sender)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 14:39:24 +0000
Received: by bwz9 with SMTP id 9so12157482bwz.5
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 06:39:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=7cF1kntqBj1fxFq5RDxOmdOaIG32ilfoO+1nfo3pquo=;
        b=D61rJyZeGO9FvPnrki7564LhUeY+JvOkPAr4gxwCwavLWwCJ6crfNZImEWpEFUzKyp
         WespKGfZgVyBugEAh++sc6+Q3fztlZGT/OWmgYeIH3uv5d2R2OAKHSx58mqTfPVY2PyB
         bEoeAweamjbyanlbcnl/0aj9H/LJQPpP4nqig=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=MTtIv6coxzPha+qbxJ15s6BmUNm8ZhU4XfF5z6pgu8cH1+0rpr2XT8bX1v2vX6/w0P
         aOyP5jc+ZRC4v3WcsxVJ79rQjfjOdlTEReSSgnq/UmCCTBaD6prW+URYTcrwk7ZDuPBH
         80qfu3O+HayoTR+jDvAW2jT4wnANijo/HR+ag=
Received: by 10.223.103.212 with SMTP id l20mr9939466fao.3.1230561542399;
        Mon, 29 Dec 2008 06:39:02 -0800 (PST)
Received: by 10.223.122.68 with HTTP; Mon, 29 Dec 2008 06:39:02 -0800 (PST)
Message-ID: <b63a7e9e0812290639t36a7ca93q6188f2a302086540@mail.gmail.com>
Date: Mon, 29 Dec 2008 09:39:02 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re: Re: Payloads
In-Reply-To: <20081227173834.20759.qmail@secure3.apollohosting.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_111046_18538232.1230561542398"
References: <20081227173834.20759.qmail@secure3.apollohosting.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_111046_18538232.1230561542398
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That sounds pretty cool Karl, and I also dig your use of Motorhead as an
example : )

I recently built an application where payloads were a lifesaver, but my
usage of them is pretty basic.  I am indexing pages of text, so I use
payloads to store metadata about each word on the page - size, color,
rotation, etc.   It's nothing too special, but definitely works great for
what I need it to do.

- Greg

On Sat, Dec 27, 2008 at 12:38 PM, <tom@lux.org.uk> wrote:

> AUTOMATIC REPLY
> LUX is closed until 5th January 2009
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_111046_18538232.1230561542398--

From java-user-return-37969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 15:00:14 2008
Return-Path: <java-user-return-37969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46771 invoked from network); 29 Dec 2008 15:00:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 15:00:11 -0000
Received: (qmail 74817 invoked by uid 500); 29 Dec 2008 15:00:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74414 invoked by uid 500); 29 Dec 2008 15:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74403 invoked by uid 99); 29 Dec 2008 15:00:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 07:00:00 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of girish@neevtech.com does not designate 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 14:59:48 +0000
Received: by ti-out-0910.google.com with SMTP id b8so4021812tic.11
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 06:59:24 -0800 (PST)
Received: by 10.110.15.9 with SMTP id 9mr21440077tio.30.1230562764292;
        Mon, 29 Dec 2008 06:59:24 -0800 (PST)
Received: from ?10.0.0.2? ([122.167.79.62])
        by mx.google.com with ESMTPS id a4sm16866263tib.7.2008.12.29.06.59.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Dec 2008 06:59:23 -0800 (PST)
Message-ID: <4958E5B9.8080603@neevtech.com>
Date: Mon, 29 Dec 2008 20:29:05 +0530
From: Girish Naik <girish@neevtech.com>
Reply-To: girish@neevtech.com
Organization: Neev Information Technologies Private Limited
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1b3pre) Gecko/20081204 Thunderbird/3.0b1 ThunderBrowse/3.2.2.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Help in Arabic Analysers with Lucene on Windows
References: <4958C03B.6000200@neevtech.com> <43EFED66-F704-4DC3-A038-C6173E5DB1F5@apache.org> <4958CE52.2060005@neevtech.com> <1875F57C-E47E-4B8C-9E01-1F269B0BAAE4@apache.org>
In-Reply-To: <1875F57C-E47E-4B8C-9E01-1F269B0BAAE4@apache.org>
Content-Type: multipart/mixed;
 boundary="------------010004030307090807030907"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------010004030307090807030907
Content-Type: multipart/alternative;
 boundary="------------090707060509010701030803"


--------------090707060509010701030803
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

FIELD_BODY is defined as

public static final String FIELD_BODY = "AVS_FIELD_BODY";

and its indexed as

  ParsedDoc webdoc = ParsedDoc.getDoc(page);
...
document.add(new Field(Constants.FIELD_BODY, webdoc.getContents(), Field.Store.NO, Field.Index.ANALYZED));

-x-x-x-
public static ParsedDoc getDoc(Page page) {
		try {
			String raw = page.getContentType();
			int semicolon = raw.indexOf(";");
			if (semicolon>  -1) {
				raw = raw.substring(0, semicolon);	
			}
			MimeType mime = new MimeType(raw);
			String contentType = mime.getBaseType();
			String classname = getImpl(contentType);
			if (classname == null) {
				classname = getImpl(mime.getPrimaryType());
				if (classname == null) {
					return null;	
				}
			}
			Class webdocClass = Class.forName(classname);
			ParsedDoc webdoc = (ParsedDoc) webdocClass.newInstance();
			webdoc.page = page;
			webdoc.contentType = contentType;
			return webdoc;
		} catch (Exception e) {
			_log.error("Eror while parsing file: " + page.toURL());
			throw new SysException(e.getMessage());
		}
-x-x-x-


And Luke is not able to open the Indexed files by Lucene currently. But 
on my colleague's System it opened but no arabic content was found 
instead some chanrecters like "S(  .. etc were found.
In my local now its giving 'Unknown format version: -8' as it was giving 
when my colleague tried to open and index from a Linux system where 
search was working fine.




------------------------------------------------------------------------

Regards,

Please do not print this email unless it is absolutely necessary.
*Girish Naik*
Development Lead

*Neev Information Technologies Pvt Ltd* <http://www.neevtech.com>
Bangalore, Karnataka India

Mozilla Store <http://www.spreadfirefox.com/node&id=182416&t=260> 
*Mobile:* 91 09740091638
*Email:* girish.naik@gmail.com <mailto:girish.naik@gmail.com>
*IM:* girish.naik (Skype)
*http://www.linkedin.com/in/girishnaik*

Mozilla Store <http://www.spreadfirefox.com/node&id=182416&t=262> 	Join 
Neev Information Technologies Private Limited Group in LinkedIn 
<http://www.linkedin.com/e/gis/68693/571D4D044006>

Fools rush in where angels fear to tread

See who we know in common <http://www.linkedin.com/e/wwk/4759877/> 	Want 
a signature like this? <http://www.linkedin.com/e/sig/4759877/>


------------------------------------------------------------------------
The information contained in this electronic message and any attachments 
to this message are intended for the exclusive use of the addressee(s) 
and may contain proprietary, confidential or privileged information. If 
you are not the intended recipient, you should not disseminate, 
distribute or copy this e-mail. Please notify the sender immediately and 
destroy all copies of this message and any attachments.
*WARNING:* Computer viruses can be transmitted via email. The recipient 
should check this email and any attachments for the presence of viruses. 
The company accepts no liability for any damage caused by any virus 
transmitted by this email.
------------------------------------------------------------------------

On 12/29/2008 7:46 PM, Grant Ingersoll wrote:
> What does the FIELD_BODY look like?  You search is apparently going 
> against that Field, but you don't show how it is indexed.
>
> Have you looked at your index in Luke yet?  http://www.getopt.org/luke?
>
>
>
> On Dec 29, 2008, at 8:19 AM, Girish Naik wrote:
>
>> Sorry for that,
>>
>> Here is how the Analyzer is Selected:
>>  public static Analyzer getAnalyzerInstance(String localeKey) {
>>     Analyzer analyzer = null;
>>     if (localeKey == null || localeKey.trim().equals("")) {
>>         localeKey = AppContext.getSetting("defaultLocale");
>>         System.out.println("<><><>><><><><><Locale key taken as 
>> Default ");
>>     } else {
>>         // localeKey may be a csv of locales, in which case picj the 
>> first
>>         // one.
>>         localeKey = StringUtils.split(localeKey, ",")[0].trim();
>>         System.out.println("<><><>><><><><><Locale key is trimmed");
>>     }
>>     System.out.println("<><><>><><><><><Locale is " + localeKey);
>>     String name = (String) _analyzerMap.get(localeKey);
>>     System.out.println("<><><>><><><><><Name from Locale is " + name);
>>     if (name == null) {
>>         analyzer = new StandardAnalyzer();
>>     } else {
>>         // if (name.equalsIgnoreCase("Arabic")) {
>>         // analyzer = new ArabicAnalyzer();
>>         // } else {
>>         analyzer = new SnowballAnalyzer(name);
>>         // }
>>     }
>>     return analyzer;
>>     }
>>
>>
>> While Indexing some are analyzed and some are not...
>>  document.add(new Field(FIELD_DOCUMENT_CREATED_ON, LocaleUtils
>>             .convert8859_6ToUTF8(com.aurigalogic.activesite.field.Field
>>                 .indexableDate(avsDoc.getCreatedOn())),
>>             Field.Store.YES, Field.Index.NOT_ANALYZED));
>> ...
>> document.add(new Field(FIELD_CONTENT_TYPE, LocaleUtils
>>             .convert8859_6ToUTF8(version.getDocument()
>>                 .getContentDescriptor().getName()),
>>             Field.Store.YES, Field.Index.ANALYZED));
>> Currently the method LocaleUtils.convert8859_6ToUTF8 does nothing but 
>> returns the parameter as is.
>>
>> While seraching the Query parser  etc.  are created like
>> Analyzer analyzer = AnalyzerSelector.getAnalyzerInstance(locale);
>> ...
>> QueryParser qparser = new QueryParser(Constants.FIELD_BODY, analyzer);
>> ...
>>
>>
>> So while posting the form with a Arabic word does not fetch the 
>> results. An English word does work though!!
>>
>> I would be more that helpful if anything else is required.
>>
>>
>>
>>
>> Regards,
>>
>> Please do not print this email unless it is absolutely necessary.
>> Girish Naik
>> Development Lead
>>
>> Neev Information Technologies Pvt Ltd
>> Bangalore, Karnataka India
>>
>> <banner-5b.png>    Mobile: 91 09740091638
>> Email: girish.naik@gmail.com
>> IM: girish.naik (Skype)
>> http://www.linkedin.com/in/girishnaik
>>
>> <banner-2c.png> <neev_logo.gif>
>>
>> Fools rush in where angels fear to tread
>> See who we know in common    Want a signature like this?
>> The information contained in this electronic message and any 
>> attachments to this message are intended for the exclusive use of the 
>> addressee(s) and may contain proprietary, confidential or privileged 
>> information. If you are not the intended recipient, you should not 
>> disseminate, distribute or copy this e-mail. Please notify the sender 
>> immediately and destroy all copies of this message and any attachments.
>> WARNING: Computer viruses can be transmitted via email. The recipient 
>> should check this email and any attachments for the presence of 
>> viruses. The company accepts no liability for any damage caused by 
>> any virus transmitted by this email.
>>
>> On 12/29/2008 6:16 PM, Grant Ingersoll wrote:
>>>
>>> Hi Girish,
>>>
>>> Can you provide some sample code and info about what isn't working?  
>>> All you have said so far is that the Arabic Analyzer doesn't work 
>>> for you, but you have said nothing about how you are actually using 
>>> it.  Are you getting exceptions?  Do the tokens not look right?  Are 
>>> no results coming back?  Have you looked at your index in Luke?
>>>
>>> I'm going to take a wild stab in the dark and guess that you are not 
>>> reading in the input in the right encoding.
>>>
>>> -Grant
>>>
>>> On Dec 29, 2008, at 7:19 AM, Girish Naik wrote:
>>>
>>>> Hi,
>>>>     I am having a hard time in indexing the Arabic content and 
>>>> searching the same via Lucene. I have also used a Arabic Analyzer 
>>>> from the Lucene package but had no luck. I have also used a 
>>>> snowball jar but it doesn't contain an Arabic stemmer. So i had put 
>>>> the Lucene Arabic Stemmer in snowball jar (with modifications  :-X 
>>>> ) but still have not got any luck so far.
>>>>
>>>>     Moreover when i dont use any stemmers/ analyzer the search 
>>>> works perfectly on a Linux systems, but with Windows system the 
>>>> search does not work at all =-O
>>>>
>>>> If anybody has any kind of solution or ideas, then please send it 
>>>> across. I will be very happy to implement and test them.
>>>>
>>>> Thanks in Advance.
>>>>
>>>> -- 
>>>>
>>>>
>>>> Regards,
>>>>
>>>> Please do not print this email unless it is absolutely necessary.
>>>> Girish Naik
>>>> Development Lead
>>>>
>>>> Neev Information Technologies Pvt Ltd
>>>> Bangalore, Karnataka India
>>>>
>>>> <banner-5b.png>    Mobile: 91 09740091638
>>>> Email: girish.naik@gmail.com
>>>> IM: girish.naik (Skype)
>>>> http://www.linkedin.com/in/girishnaik
>>>>
>>>> <banner-2c.png> <neev_logo.gif>
>>>>
>>>> Fools rush in where angels fear to tread
>>>> See who we know in common    Want a signature like this?
>>>> The information contained in this electronic message and any 
>>>> attachments to this message are intended for the exclusive use of 
>>>> the addressee(s) and may contain proprietary, confidential or 
>>>> privileged information. If you are not the intended recipient, you 
>>>> should not disseminate, distribute or copy this e-mail. Please 
>>>> notify the sender immediately and destroy all copies of this 
>>>> message and any attachments.
>>>> WARNING: Computer viruses can be transmitted via email. The 
>>>> recipient should check this email and any attachments for the 
>>>> presence of viruses. The company accepts no liability for any 
>>>> damage caused by any virus transmitted by this email.
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>> --------------------------
>>> Grant Ingersoll
>>>
>>> Lucene Helpful Hints:
>>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>

--------------090707060509010701030803
Content-Type: multipart/related;
 boundary="------------090607020907070908000102"


--------------090607020907070908000102
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="Content-Type">
</head>
<body bgcolor="#ffffff" text="#000000">
FIELD_BODY is defined as <br>
<pre>public static final String FIELD_BODY = "AVS_FIELD_BODY";</pre>
and its indexed as <br>
<pre> ParsedDoc webdoc = ParsedDoc.getDoc(page);
...
document.add(new Field(Constants.FIELD_BODY, webdoc.getContents(), Field.Store.NO, Field.Index.ANALYZED));

-x-x-x-
public static ParsedDoc getDoc(Page page) {
		try {
			String raw = page.getContentType();
			int semicolon = raw.indexOf(";");
			if (semicolon &gt; -1) {
				raw = raw.substring(0, semicolon);	
			}
			MimeType mime = new MimeType(raw);
			String contentType = mime.getBaseType();
			String classname = getImpl(contentType);
			if (classname == null) {
				classname = getImpl(mime.getPrimaryType());
				if (classname == null) {
					return null;	
				}
			}
			Class webdocClass = Class.forName(classname);
			ParsedDoc webdoc = (ParsedDoc) webdocClass.newInstance();
			webdoc.page = page;
			webdoc.contentType = contentType;
			return webdoc;
		} catch (Exception e) {
			_log.error("Eror while parsing file: " + page.toURL());
			throw new SysException(e.getMessage());
		}
-x-x-x-

</pre>
And Luke is not able to open the Indexed files by Lucene currently. But
on my colleague's System it opened but no arabic content was found
instead some chanrecters like &Oslash;&sect;&Ugrave;&#8222;&Oslash;&sect;&Oslash;&sup3;&Oslash;&ordf;&Oslash;&plusmn;&Oslash;&sect;&Oslash;&ordf;&Ugrave;&#352;&Oslash;&not;&nbsp; .. etc were found. <br>
In my local now its giving 'Unknown format version: -8' as it was
giving when my colleague tried to open and index from a Linux system
where search was working fine.<br>
<br>
<br>
<br>
<div class="moz-signature"><br>
<hr>
<br>
Regards,
<br>
<br>
<table border="0" cellpadding="0" cellspacing="0" width="600">
  <tbody>
    <tr>
      <td
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: rgb(0, 0, 119);"
 colspan="2" align="center"><marquee>Please do not print this email
unless it is absolutely necessary.</marquee></td>
    </tr>
    <tr>
      <td colspan="2"
 style="border-top: 1px solid rgb(204, 204, 204); padding: 10px;">
      <table
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 11px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;"
 border="0" cellpadding="0" cellspacing="0" width="100%">
        <tbody>
          <tr style="line-height: 15px;" valign="top">
            <td width="40%"> <b style="font-size: 14px;">Girish Naik</b><br>
            <span style="font-size: 12px;">Development Lead</span><br>
            <br>
            <a target="nw" href="http://www.neevtech.com"><b>Neev
Information Technologies Pvt Ltd</b></a><br>
Bangalore, Karnataka India<br>
            <br>
            <a href="http://www.spreadfirefox.com/node&amp;id=182416&amp;t=260"><img
 alt="Mozilla Store" title="Mozilla Store"
 src="cid:part1.03020205.09010804@neevtech.com" border="0"></a> </td>
            <td style="padding-left: 10px;" nowrap="nowrap" width="40%">
            <b style="color: rgb(153, 153, 153);">Mobile:</b> 91
09740091638<br>
            <b style="color: rgb(153, 153, 153);">Email:</b> <a
 target="nw" href="mailto:girish.naik@gmail.com"
 style="text-decoration: none; color: rgb(0, 0, 0);">girish.naik@gmail.com</a><br>
            <b style="color: rgb(153, 153, 153);">IM:</b> girish.naik
(Skype)<br>
            <div style="margin-top: 5px;"> <b><a target="nw"
 href="http://www.linkedin.com/in/girishnaik">http://www.linkedin.com/in/girishnaik</a></b>
            </div>
            <br>
            <a href="http://www.spreadfirefox.com/node&amp;id=182416&amp;t=262"><img
 alt="Mozilla Store" title="Mozilla Store"
 src="cid:part2.02050000.01000206@neevtech.com" border="0"></a> </td>
            <td style="padding: 0pt 15px;" width="20%"> <a target="nw"
 href="http://www.linkedin.com/e/gis/68693/571D4D044006"><img
 src="cid:part3.08050705.02000807@neevtech.com"
 alt=" Join Neev Information Technologies Private Limited Group in LinkedIn"
 border="0"></a><br>
            <br>
Fools rush in where angels fear to tread </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;">
      <td
 style="border-top: 1px solid rgb(204, 204, 204); padding-top: 2px; color: rgb(153, 153, 153);"><a
 target="nw" href="http://www.linkedin.com/e/wwk/4759877/">See who we
know in common</a></td>
      <td
 style="border-top: 1px solid rgb(204, 204, 204); padding-top: 2px;"
 align="right"><a target="nw"
 href="http://www.linkedin.com/e/sig/4759877/">Want a signature like
this?</a></td>
    </tr>
  </tbody>
</table>
<br>
<hr>
The information contained in this electronic message and any
attachments to this message are intended for the exclusive use of the
addressee(s) and may contain proprietary, confidential or privileged
information. If you are not the intended recipient, you should not
disseminate, distribute or copy this e-mail. Please notify the sender
immediately and destroy all copies of this message and any attachments.<br>
<b>WARNING:</b> Computer viruses can be transmitted via email. The
recipient should check this email and any attachments for the presence
of viruses. The company accepts no liability for any damage caused by
any virus transmitted by this email.
<hr></div>
<br>
On 12/29/2008 7:46 PM, Grant Ingersoll wrote:
<blockquote cite="mid:1875F57C-E47E-4B8C-9E01-1F269B0BAAE4@apache.org"
 type="cite">What does the FIELD_BODY look like?&nbsp; You search is
apparently going against that Field, but you don't show how it is
indexed.
  <br>
  <br>
Have you looked at your index in Luke yet?&nbsp; <a class="moz-txt-link-freetext" href="http://www.getopt.org/luke">http://www.getopt.org/luke</a>?
  <br>
  <br>
  <br>
  <br>
On Dec 29, 2008, at 8:19 AM, Girish Naik wrote:
  <br>
  <br>
  <blockquote type="cite">Sorry for that,
    <br>
    <br>
Here is how the Analyzer is Selected:
    <br>
&nbsp;public static Analyzer getAnalyzerInstance(String localeKey) {
    <br>
&nbsp;&nbsp;&nbsp; Analyzer analyzer = null;
    <br>
&nbsp;&nbsp;&nbsp; if (localeKey == null || localeKey.trim().equals("")) {
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localeKey = AppContext.getSetting("defaultLocale");
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
System.out.println("&lt;&gt;&lt;&gt;&lt;&gt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;Locale
key taken as Default ");
    <br>
&nbsp;&nbsp;&nbsp; } else {
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // localeKey may be a csv of locales, in which case picj the
first
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // one.
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; localeKey = StringUtils.split(localeKey, ",")[0].trim();
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
System.out.println("&lt;&gt;&lt;&gt;&lt;&gt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;Locale
key is trimmed");
    <br>
&nbsp;&nbsp;&nbsp; }
    <br>
&nbsp;&nbsp;&nbsp;
System.out.println("&lt;&gt;&lt;&gt;&lt;&gt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;Locale
is " + localeKey);
    <br>
&nbsp;&nbsp;&nbsp; String name = (String) _analyzerMap.get(localeKey);
    <br>
&nbsp;&nbsp;&nbsp;
System.out.println("&lt;&gt;&lt;&gt;&lt;&gt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;Name
from Locale is " + name);
    <br>
&nbsp;&nbsp;&nbsp; if (name == null) {
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; analyzer = new StandardAnalyzer();
    <br>
&nbsp;&nbsp;&nbsp; } else {
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // if (name.equalsIgnoreCase("Arabic")) {
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // analyzer = new ArabicAnalyzer();
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // } else {
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; analyzer = new SnowballAnalyzer(name);
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // }
    <br>
&nbsp;&nbsp;&nbsp; }
    <br>
&nbsp;&nbsp;&nbsp; return analyzer;
    <br>
&nbsp;&nbsp;&nbsp; }
    <br>
    <br>
    <br>
While Indexing some are analyzed and some are not...
    <br>
&nbsp;document.add(new Field(FIELD_DOCUMENT_CREATED_ON, LocaleUtils
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .convert8859_6ToUTF8(com.aurigalogic.activesite.field.Field
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .indexableDate(avsDoc.getCreatedOn())),
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Field.Store.YES, Field.Index.NOT_ANALYZED));
    <br>
...
    <br>
document.add(new Field(FIELD_CONTENT_TYPE, LocaleUtils
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .convert8859_6ToUTF8(version.getDocument()
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .getContentDescriptor().getName()),
    <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Field.Store.YES, Field.Index.ANALYZED));
    <br>
Currently the method LocaleUtils.convert8859_6ToUTF8 does nothing but
returns the parameter as is.
    <br>
    <br>
While seraching the Query parser&nbsp; etc.&nbsp; are created like
    <br>
Analyzer analyzer = AnalyzerSelector.getAnalyzerInstance(locale);
    <br>
...
    <br>
QueryParser qparser = new QueryParser(Constants.FIELD_BODY, analyzer);
    <br>
...
    <br>
    <br>
    <br>
So while posting the form with a Arabic word does not fetch the
results. An English word does work though!!
    <br>
    <br>
I would be more that helpful if anything else is required.
    <br>
    <br>
    <br>
    <br>
    <br>
Regards,
    <br>
    <br>
Please do not print this email unless it is absolutely necessary.
    <br>
Girish Naik
    <br>
Development Lead
    <br>
    <br>
Neev Information Technologies Pvt Ltd
    <br>
Bangalore, Karnataka India
    <br>
    <br>
&lt;banner-5b.png&gt;&nbsp;&nbsp;&nbsp; Mobile: 91 09740091638
    <br>
Email: <a class="moz-txt-link-abbreviated" href="mailto:girish.naik@gmail.com">girish.naik@gmail.com</a>
    <br>
IM: girish.naik (Skype)
    <br>
<a class="moz-txt-link-freetext" href="http://www.linkedin.com/in/girishnaik">http://www.linkedin.com/in/girishnaik</a>
    <br>
    <br>
&lt;banner-2c.png&gt;&nbsp;&nbsp;&nbsp; &lt;neev_logo.gif&gt;
    <br>
    <br>
Fools rush in where angels fear to tread
    <br>
See who we know in common&nbsp;&nbsp;&nbsp; Want a signature like this?
    <br>
The information contained in this electronic message and any
attachments to this message are intended for the exclusive use of the
addressee(s) and may contain proprietary, confidential or privileged
information. If you are not the intended recipient, you should not
disseminate, distribute or copy this e-mail. Please notify the sender
immediately and destroy all copies of this message and any attachments.
    <br>
WARNING: Computer viruses can be transmitted via email. The recipient
should check this email and any attachments for the presence of
viruses. The company accepts no liability for any damage caused by any
virus transmitted by this email.
    <br>
    <br>
On 12/29/2008 6:16 PM, Grant Ingersoll wrote:
    <br>
    <blockquote type="cite"><br>
Hi Girish,
      <br>
      <br>
Can you provide some sample code and info about what isn't working?&nbsp;
All you have said so far is that the Arabic Analyzer doesn't work for
you, but you have said nothing about how you are actually using it.&nbsp;
Are you getting exceptions?&nbsp; Do the tokens not look right?&nbsp; Are no
results coming back?&nbsp; Have you looked at your index in Luke?
      <br>
      <br>
I'm going to take a wild stab in the dark and guess that you are not
reading in the input in the right encoding.
      <br>
      <br>
-Grant
      <br>
      <br>
On Dec 29, 2008, at 7:19 AM, Girish Naik wrote:
      <br>
      <br>
      <blockquote type="cite">Hi,
        <br>
&nbsp;&nbsp;&nbsp; I am having a hard time in indexing the Arabic content and
searching the same via Lucene. I have also used a Arabic Analyzer from
the Lucene package but had no luck. I have also used a snowball jar but
it doesn't contain an Arabic stemmer. So i had put the Lucene Arabic
Stemmer in snowball jar (with modifications&nbsp; :-X ) but still have not
got any luck so far.
        <br>
        <br>
&nbsp;&nbsp;&nbsp; Moreover when i dont use any stemmers/ analyzer the search works
perfectly on a Linux systems, but with Windows system the search does
not work at all =-O
        <br>
        <br>
If anybody has any kind of solution or ideas, then please send it
across. I will be very happy to implement and test them.
        <br>
        <br>
Thanks in Advance.
        <br>
        <br>
--&nbsp;<br>
        <br>
        <br>
Regards,
        <br>
        <br>
Please do not print this email unless it is absolutely necessary.
        <br>
Girish Naik
        <br>
Development Lead
        <br>
        <br>
Neev Information Technologies Pvt Ltd
        <br>
Bangalore, Karnataka India
        <br>
        <br>
&lt;banner-5b.png&gt;&nbsp;&nbsp;&nbsp; Mobile: 91 09740091638
        <br>
Email: <a class="moz-txt-link-abbreviated" href="mailto:girish.naik@gmail.com">girish.naik@gmail.com</a>
        <br>
IM: girish.naik (Skype)
        <br>
<a class="moz-txt-link-freetext" href="http://www.linkedin.com/in/girishnaik">http://www.linkedin.com/in/girishnaik</a>
        <br>
        <br>
&lt;banner-2c.png&gt;&nbsp;&nbsp;&nbsp; &lt;neev_logo.gif&gt;
        <br>
        <br>
Fools rush in where angels fear to tread
        <br>
See who we know in common&nbsp;&nbsp;&nbsp; Want a signature like this?
        <br>
The information contained in this electronic message and any
attachments to this message are intended for the exclusive use of the
addressee(s) and may contain proprietary, confidential or privileged
information. If you are not the intended recipient, you should not
disseminate, distribute or copy this e-mail. Please notify the sender
immediately and destroy all copies of this message and any attachments.
        <br>
WARNING: Computer viruses can be transmitted via email. The recipient
should check this email and any attachments for the presence of
viruses. The company accepts no liability for any damage caused by any
virus transmitted by this email.
        <br>
---------------------------------------------------------------------
        <br>
To unsubscribe, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a>
        <br>
For additional commands, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a>
        <br>
      </blockquote>
      <br>
--------------------------
      <br>
Grant Ingersoll
      <br>
      <br>
Lucene Helpful Hints:
      <br>
<a class="moz-txt-link-freetext" href="http://wiki.apache.org/lucene-java/BasicsOfPerformance">http://wiki.apache.org/lucene-java/BasicsOfPerformance</a>
      <br>
<a class="moz-txt-link-freetext" href="http://wiki.apache.org/lucene-java/LuceneFAQ">http://wiki.apache.org/lucene-java/LuceneFAQ</a>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
      <br>
    </blockquote>
---------------------------------------------------------------------
    <br>
To unsubscribe, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a>
    <br>
For additional commands, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a>
    <br>
  </blockquote>
  <br>
--------------------------
  <br>
Grant Ingersoll
  <br>
  <br>
Lucene Helpful Hints:
  <br>
<a class="moz-txt-link-freetext" href="http://wiki.apache.org/lucene-java/BasicsOfPerformance">http://wiki.apache.org/lucene-java/BasicsOfPerformance</a>
  <br>
<a class="moz-txt-link-freetext" href="http://wiki.apache.org/lucene-java/LuceneFAQ">http://wiki.apache.org/lucene-java/LuceneFAQ</a>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
</blockquote>
</body>
</html>

--------------090607020907070908000102
Content-Type: image/png;
 name="banner-5b.png"
Content-Transfer-Encoding: base64
Content-ID: <part1.03020205.09010804@neevtech.com>
Content-Disposition: attachment;
 filename="banner-5b.png"

iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAYAAABzyUiPAAAAGXRFWHRTb2Z0d2FyZQBBZG9i
ZSBJbWFnZVJlYWR5ccllPAAACPBJREFUeNrsV31sVWcZ/53Pe+53P2hpaQtspayUlfE1Vkqy
DbMAjYnMDcaWkelgTM0SyeZiDMb5kaAxGjONyeIYmwEUUHEiITKCHwxGBwPnVqrF8t1yKbS9
7f0+93z6vO+5t71lTiHb/jGem/ac9z3ved7n4/c8z++V634yCLrcaFk5/n/d/JUYHWE3QWbO
e3pBGIoi/E8Z6LoOHNviz6IkQxDEj1W+aYbx8qmUyxwIWZaxo8f95K1ybLj0R+YholIUc2Qg
GRbVZCTz3juBGSspfP6jXOtnuagPAS8cTkLUQgQV38dqyuN3cNdBLp18slmA9An5zic5aK8V
0B834Se0L7ktiHjGxJbOIaxZWI3pZSreuZTC4QspaKEoJFm6SaS5HG08nwSBj9n10AwRjmXj
kfosgmUBKD7v/Ue9LBL/8zPjYJOLSpB4GAQOgSlEPxQU4dC/lY0LBhUNKRp2R4WAubUKpkaA
HScH0TxZQ5Y2zOh5vD9goLkqiGTWoLEB1+dCdCwCrM1liaIIUVY+kIbs3cyIhXQuj3PDedxZ
40c8ayKWtAnhFciSCrZlwMrnYDgiJFW95VQeCw79mB8cdzxwJQ50INsSdlMazyq3cU+VDp/o
oC9hQXdkQoNS9AQZI/GaAh5tr864jsOdJNC7xqgL28wXUhXImi5iaeBdSyVDXHT3JxDLiEib
zNEC0paI4zEHj7QCBo1TpoBqxcXS6YAmCbgct7CvJwvVH4Ks+ccdQAY8OANoq9NowILhIKB6
7wbTJioCEv/b/NmZeP29YRzuy0IJiNwRDteNbJEkLse2TG4Lk81RSnf2rsLnwAcDQymT9JJw
sJ8CIKljtk9AYGGMXStpAVT+nKG69PuuEbTW+RAk5XaeiuNMXILiD3MnLpvmYFalgPNDJvaT
ka11IXxhfpgl7IQofvdgDBvbyriMaj/w07dGYNkCrhFSknkRed0zfDjjwrRFPL3Aj+ukdDrv
YFlzFHrewq9OJ6BFKJiKJ5shua1Oxs6TQzjUM4olTZVYMy/K9WWOeHR+OTrPJXCBkDmcl5Cg
fRZVu7h3mkj7OvhzbwY62fmtB8pImkI26MgYDk+2194Z5bY8szjMg8P8sO1kHG/06hD8EV5P
JyCQec8uQPNHx008d4+Cty+muAGPLZw05ohNy2qxbudFDCZFPNMWwbJGHwaSJqY1hSglfTh6
IcO/+d6hAQxkHPx45RRcTeRx9FIOJ/Yk8LvHyuGTRcRzJkZpXUVQprsLVXWRNlxyjgQ/Rf1q
ysJrJ+LUdBxYFNjP3FWJ7ad6kU7nKHgKR4A+4tA3IpbOjCJHyh/sTaPzioEsITrrKuRA4B9D
BvZ0ZaCGK7G8UcUXF2pcv0q/gEVT/di0P4ZUPoyasIzbKn3oHdQxrz6ISyMGOmYFyclJdJ5P
YubkAL60pApbT5xDhjJJlFUUEcdD75TUq61d3v3IBR3b383w58/98hJWbbuCfkrpORSZoGST
81R8bf8AHtx+Fc++kUZTlYYcRXDj3hjOpSR8delkXCHnfnnfILJyOVIIcFnd1/JIUjp0X7e5
c8i/GNFdnBm2oVNTPhUzsbcnj80dNdj86SlkkPddbUTBCDWdeM6h9UBAcvHcgQRO9BtYPbcS
u9Y2YH6NjD4y3na9mp23BCQtGQlTxuNzfPjFX0ex4pWLeGpvgpAPrGwtx6/fG+VrO352Fp+n
IL/4dhadMRFhHwWnKYJNy+uxam4FXzO7pog8d8xncmmhLBS6sftY1xIkdA2LuEzQryX+cb/q
1bc9XSlIwXIcu+b36h2lZV1UxfP3TcKBnjS+/cc4RDUAUREREQ1SWsFgxib64uCuyTI5kJ4p
PRTZwYJaGUfOes1rw8IAXjwyjFcplda3VWFjewSM8SR0qtXUzekfXlqh0vscvn7gOqcpq1o0
fOP+SlxLXcMVQnix/sYpE1Y0CgirAg5R2g4ZGgWBUJZ0qbEIPGjsGsiKkEMatnTJaKn0Ssqn
XjqPqRV+nrKzq0R09luQCL0o6fzeSmccgW21nnMiPsbVvPmoJtEYaG9Q0T5dQyKje/M+KqbU
5WZF83x8ecTEd5ZX0z2P/aeHcHe9iqMbJnFjv38fkyFi3aIKNJa5CFKjCBGdaYwC0wKevJqg
gEmaw9eZBE8fNRHTUwczCeFZ6tBZSsGcAQqGi4dbw3hibhB6Nkf10zOI1dk3L3jyWqjTG4aO
i0M5PmaocmwTYUFHfVhA94A+BpKGMLPF5AwkaXqVbcntIRzrM9CfEfD8vWXYcHcYjqmT8+wx
nwl0lHPXz1Hxm7NB7qTOteP86wd/GcKj88rwwzcTFAkfvrIk5M3/6To6ZkfREFW4ErNrNOz+
WxJJMoxtdON1jGpjO/G+m7nYWtYF26d7qGaoS+pESzQRD7wSQ1oqJ1T78ewCB2HJxJrWwPi3
F7PYuG+I1kRxfH2E7PGc89C2GNlRTp3ez9c0lClc7gsHh/HbJ6bwNW/RvuteH4UUquCd9puL
Xay4XcQusqujOcTTtm/UxJNsTaAMq5stbH3f8By4rlXBnnOec1rKLVLMIJSZ6B52uDBGTxgq
WiYRKknpY5fpQyqkG+b7aE7gSm05pUP0BbG4gaLHaYEHnSSBoS/lcKWjqtewElTzopqAlmqZ
K8XQxBzUEJVIdh5/HxbQ0aRxKnTsEkVFEjGVvu8eJH0UzTupMK5JXLE+6KBtCid82H1aL5QM
jdDmYvUMtsbE7i4daVfDU/NULK4TcPqqTvpmkXZobgEFgFD5h39mcCVLtvoCZK/M5a+7k/Qm
+aepbh/oJSpDVI+lM9v/4aYcXu0yPQeubXaoDqkTiPA4CS4h0iUkWSByy8ZFsitwfihxnvXv
iDSXwb93J5wauCxOUnmQvXeit57xS2/s8TeWXkVCO4Hs8iOiy2Uwnlp8z/WwCzKkQrWyC0fG
Atfj+9AaJpsRdmbHxPO0zfVgcpmMIg81qXTt6BF5ExHogXa3PiSp7A872Bbu4lgpHZ/7AJ8f
986EudKm9Z/WO7dwdvhv+golJ1j3Bj3Y841+YPNSiYxSuyH8S4ABAL4/ROxP2qcQAAAAAElF
TkSuQmCC
--------------090607020907070908000102
Content-Type: image/png;
 name="banner-2c.png"
Content-Transfer-Encoding: base64
Content-ID: <part2.02050000.01000206@neevtech.com>
Content-Disposition: attachment;
 filename="banner-2c.png"

iVBORw0KGgoAAAANSUhEUgAAALQAAAA8CAYAAADPLpCHAAAAGXRFWHRTb2Z0d2FyZQBBZG9i
ZSBJbWFnZVJlYWR5ccllPAAAQSxJREFUeNrsfQeYXFeV5nmhUldVV3VWbIWWZEmWE8LI2MYJ
MAY8YIMNDMkmD2OCbcLusoAJw3w7RDMDs4DBxJkhmJxNcMAR2zgrWalbaknd6lSdKr337p5z
bnjvVVW37cGzO/Mtz1+51dVVL/733P/8J1zr3nvvhUW2Ar5ejq8hfB1r8fdZfO2Cv2x/2f4f
bVu3bo397j7O53/nuu7WVCoJvu+bNy38j7YgCKBaqy303e34Krd4/5gaII0bHeCBBfa1H18T
Ld4v4WvPXx7rX7YnCuitxUI79HR18C8C/yMwO44T+5Bl2+AJfF/4EAgBgV+FWrWyWVgpEGIO
hD8BltOJ386A7/lQrx4A4T0MpWoWUXoGFNMJyLg2WPUy7l3QiAH8DQILj4b7K9c8HlAuvi8C
2t8R/GsVfKsP6l5uoXN/GF+tRttRfA23eL+mvtNq26MGT+M2oQbbX7b/IoCGtrYMAoyQJAyo
fbTMFr5n48u3HHACBBuCGpENfnknBOVvI+hXQSL3MgRfXhpfK49gx4GQ8EGk1uPf10Kn5UKv
yMJw2YajdQsyGR/6EZ95/IyjBomFg8Sm2UCUoT5/B0DlG/LE0q8FN7kBnEQODs/b8EgpCSUF
3zQiPxlUTvB90XQ9jqiDiy/aUpFxSQMnixNK2vLw+zYk6W+CrhaRjrOQ7wfqk+E+6T7U695C
t+4BNes0bgvRt7Ka1VptuxS9e6Kz3V8A3WIT09PTkEmvVU+cwAVsgYUIGMyISrbKBGo2rMEs
BLU7wap8D0TiaWipX4wYb8cv9/B3eFwg6MFGKw4psG0HclCH4xDEIxUXxqsWjFWJzjiQdfEY
Cg8CZqA++0Pw524AJ30quLm34D568K8OHJh1YO+My2B2LCs0t3YaeCTgVo/BKgMJPN0UnsN8
5N20I6DD/z7M1cfgqHsZDBQd6EoFEtQIXKJX8mQIwGrHeP6RQ9L0QUMPrxuIip1MAzx+RwV4
nrfVY/pmgf6ythdR+mbxXCUHT61Wx13HBycbFtzPIgPqvidJ3xbzhxaijwvNdv85LTRZoISD
VphuZuTmM3+mJ4B/J0vqWvKhCwQn1H4vP5A8D593jh+NwM9a+HADfAACn3aA1s5JxGnLErTO
S3AyGK85MDbvwRi+tyxVxwHzCIjqz8Gv3MNg9pJXgF9NI4Wpw+EqwIOlNPgi/rA1gPUh9E/9
PoFZgzgVDEEuIZ9VzrsNhLMCxpD67J8tQpvro8WuS2BFZikCLVhuDHj0J8az+kg6leIZK7xh
Pv5K9ympeVrsnmq/hA2Hep/um0BjYUMAMeTTWIqNpPhGz6Zcrmy1bEudjy8HJe7Jq3tbAx8p
HI06YclroSPgd+r1enh8+snnJHigRW+x4IvFwYnP0/N8eJL+0EL0bTF/aCH6OKwGVWgIFlE5
RK1WhZNP3CIvIGJlANAqiCnwqo/gcylCIr0eLzshQUO0IDgEbuYC3Hs33yi6aEE30UPeG3g4
CFwETgrSyQSC3uZd6gdEVufg6DiUZ2Zayy6FApRK8n7M4IDZaQ9AMYGgsxKxz2krXA0sA2Da
6Hfaep0DkK/9EgG7FypiAET2HIWG5TAuJC9flcVBRoPK8vkckdWHllIBUoORZ67AkwDSANWg
5VnN5/cI1IECvgauseR6f/g7/U0aggbgEtVb4IGRL0PA9dVsQsZGPjOcRfH+oxmRp+PV8HwD
NalIMNP9t20JZHomFj4ji30ZGlT0t9D2Cb8OdcQGfcBxXDmYEcP6XGmslMtlNSujwUumwHXl
86lUKnx+ElPCDFAWGKo13qcQgZmnyErUJkb4HISbAmt6BKzaPOInicYN5/e2riduodsyGXUP
6VHgtF95DG8Ggtjdwj/JGjPHrA7g3VslP4t/850z8eQ85MAVmJicgtnZObPPjo4OvDgLjh0e
hlwuC50dRQa2cGy23NXyrAZzSxOEYBb6b3l/Vqz3HoNZvw3K6V4D6u50EKMS0EAt8uIuKNR+
AK5zCIT9Uhjzz4NKrROKyYDZRHcigCx+rg1pT0W4kLV8frA82xirql1kK8oDFkCadG6ZKDCY
QwtM++E3yeILuU+ympalwGdArS5bhLMlGPsaB7XVMGP5wlKWXs0mlvyMpDR4bUQZ9T55/3JA
0bkFwsaB4SjwB7z/Bhal/mbxuBR8jACSCGKiZzZ+PpFOmQFBipmczell87Xb6jcI2LLhgBEM
cNuW1Modwll/6giIMy8Da343TuO7wdn3R7D33ozUthA6LZf/cnFAp9Jpvqh6+X4JYL47gzgM
tkS8LASzvxfmy7txAGyAkakToDQ7aMCrwGyewOTkpL7bFv5NkK+VzaC1RhBV6jbS62rTTBHT
EfeW4dkDGbOPojUvXK8C014XuAkJ6BLuh6xyI5j5mpBipGoPIuXZBgf8/wEV6CTK3rQVkwL5
NDInvKkBDhQHZyXDo/lBKpDpBxz5G59x5MFb+F2hvkP3c/ruW+Vsc9qzGI5ktT2/xsDSDz4I
fDUWbAXqkO9FjtTaWisrri22tvo0uxiss9/jhQwBHXbGkxs9b1sOqui18XgkK+7wJbNlVjOP
lg0sZVm1I80zMJ5L0LCfGI/RM18gr9Xm+yeHq1i1Faypn4F129fBmhgG0bkcqpUSZJ4sh86m
LAlm5LB88zKvwAtBKoEgCOw8WlQEbuIMts6TUx0wPLUxvBcKvLNWGnKiIqKApE2B0irPzwl8
xY7b3d0DY2PHhP781+6bjv2dfr98a7vZR84OxLLqQTgMKxHUaebKdd+C2bqF/DgObGH1wnTq
MpjF6Qu9WUhHxstUzWYrXQvkzcwmJICqSJnSdiOPjnPamHdoKQseKAvM8JIWujo8BLvefCl0
Pu/F0HH62dKi0cTAYJaOpZCiJU/78rnLB2tFznUxDs18mUCnAGST/0LTP5EO/BpdXhCjvo6k
GUwtQNpx2gf+oo8j1DAikNOgC5iX1/AcnYZjC0XL/IXPjxzngJz4gGcPKUZpp1vTr8CoT5Dv
YiA7D/0MvHPeImfa0X0x6/x4gGaFY/2KO0HM/15aYR7UvQRzPKE5POmQ4w6NnYKOQzpqiSNg
HDGfO2OZlMtuP5wgMMbAH90IzLcPVeELd03Byo40vGflbbA0OQPnFffBjnIfvHXPC3G/EBsY
ZKlBgdpCsJJ0x1banwjvbbIDalY6dFsUBakQsBXo6d9dqeaHUUEUpO2gGdQxw2gZ9UPIpxEe
yJLWrnJwENz2IvjTU5Ir0ycIOCDVE6FsrsUWVBjt3zhj0cG0AJgXwrrctxcOOnz8ggeOlGEl
ZaAZw5KgjNCbZuYexAYw02H9HZA+A1lkx5HXra0znx8PCgS1sMzt1LOXsRMRh9tL5sHdehHU
j26H1P0/hWoqvSBwF7TQU1NToWKh+TFU0RG8j50+4spknYdGe9D8pyOXFVrVVy95GP5t8y5Y
kxpHMITy0sVTr8TPhBa2FTbO6E+JL9wFcF7fCJyfegx6XCmybcqMoCWVg+E7D80sCOqeNAmD
D0DBQ65sS668y79kQatBQNbbjOfAkgz6APgMamxtXNanQxyJiHhmyylXCwqMChEBoKNlDDmV
ohOVPf4kKDzzHIMXxyJt3zGcmgGllBMDzkburD/bgnTYlr2wdRRyRrCM5ffNIyBA2o5gPszU
YeFJIHRcmadAk6QY+6wQTRYa1PANlGPIgOagnc3vWYH8K983fM9bsw2ciz6KD/094G5+Loh0
M4deFNBdXV2GHzOwk+eBV/5VCHIE9KGRtej81Q2Yo/Tgga2fb44CeG0MzC+t/xE8977XxcDY
eN81NXl16geQt2toIV0zKGig/GxiHQNbHy8K6kzwIHR5t0LBvouvsBScBnPJLVDEGxQFrt7a
k8SVA6YoSZyTl2fqMI+Hsu7+FUze+DMoH9oDhWecA22rB2D0e18HBy3suk9d3/zAFd+VNyS8
LLbMQ3uhho5w6Y6b4ozFWOS6+t1tyYkbZwV5HCv05ejhB3HnUFvE0JAG8qy0BVZ0w4qwX0H0
g9SOoDVV0O8zJ3bsCMWQg46oDf0eBFaMczsRDm0pKBtHkJ1g7XQ77DSzBCzk4GDqRpY+0w7+
Be8CGEHHsDTCYLbqpScG6Ew6KcFsIhUSyH59AqqiAGPTiZZgziDvvGnLF1ruk8D8yeGz4LK+
e+E3J321EdQxx4/29emBXxrLHN3evfxWfr33wIUwl1oGdxwWrPtrUKe8tJiZ3QaTxTMg6XYg
FxyAMlpAAmujFEEAJzATPUmlBGRsedOnPv3fYPTr/ww9l1zGYK4dPgTD//gxeR34XhOY2dpZ
DYCTFrw+jLPGVz4PReTM47/+CVQPHYC5Rx+E0p03Q3L5avBnpmD9p76keHKgHqQd5s20oDia
V4PRrK3YOUWBLEArCZIqiAjYbFuqKGzrbVvRG0sRFGG+Zaw7aB1cqTBaHmYrK2IBIJJoE/gf
7SnqEPJgC0DZ58DQqkaJUh+LBqCz505IfPWNzKHrz347BBvOAnv3reAgBYFCHwN8cacwNRiX
fuoyuERgPjZ/IdRCzmzAvKZtEn646V8XjeQQmDW4/23zDfC+Hc/G73Y0fY4AT9vvp9Yyd261
fXz1z+DiHa8EL5WH8aADbtk/B2evkaC2ggLS/BzM5Jei5y4dlxp6H+QkkiWOhcjo94TUrUm/
rv3gOgbzqvd/HFKXvtXQjSWvuAx2vP4lkOlf3UxZDu6HYG4WahPj0H7aWUZHpm3+wB6oDR9A
636AwUybhxya+LQ3XYK2TScZjmtp58uKP1TbOF/KYpkBEyg1Ij7R6fe1RQwgjPowteHp3GYL
7ft1cOgeRQNBSu6zYoKEiJyb1cKCi9hAoXiD7STUNdlmkLHDSQMyUIPAD0KtW0CEs+NA3HMH
TqF9YE0ekt9dc6r8ueoU8FefwlKe+40rHjewInLtN8LS9D0wXwsdpJkgAfPll4JX3/DvAnN0
+5fRk+BVvQ/yv8nR+1XwXDhybApOajvI7xPFMNqx7S26LwL1/vkOOHNDDzxnjQMDBWHObzDV
D/lcIaZJS0uN7q3LtoOTngzVGn0UHn35+TDwyeug9vQLIBrQJGBPfe1aKKClzW46WYafZ0qw
75qr2OK67e2QWrkGafx+WPbGK6HjuS/ipx/MlvjvtBFlKd1xM3Sc/2Lofv5F4JUmoV6agp6X
vkY5ZnGgEKSqw4MIfhwMh+VD7X3pqxlh9Fniy9OP3If7kVNvxxnnKEC5UJ+ahOmH7+NjsEx4
+jng5PIc5Br+yud4xkmtWA3dL3kVLH/D2+S0bicZsMPXXcszSO+ll0HXBRfjwJuEw/TeXbfi
d1ZB1/NejINzEHwvfDZ9L3st2LkcnzMNEg+dkHQmA4lkxkiIerDxAKGosfCNVXfH9ktFI9fN
Fp0H5YH7mWrQ+zAzDkFPP+cEyQQ5GYRxHvolf/+RzObFZbuRis0jywtWyOyZKpLx+pI/G8y0
kWqht59PHIcU4lskoJjtg0MXwOv67mEn8PE2OvY5D78ebtt9jPNGxro92LYiKVL5IqyaGYJq
kINk10rwVbi6ppKWaKxWfMcAnax3FakBgW1u6wvQaAexPJA0fn3J699hKAY5RvSQ6cEufcM7
ILV8JYJ3BkoP3gv7P3Q1Ptw8gug8cPIFdgIJsHOPPgDjv/oRrH3vR3EAFDhqFujUXA5m2DGd
lv6jzw99+sNy4kQAMqAjctrQpz7MA4YAWzz9LLbzczgr0HdmH3mAFRVmy8j9+6/+IHQ85wXs
D+ROOwPE9AyMfO3zsPyNb4+p2nPbH+R97n/0auh+3otwHyUcjN/gmYWuYfrOW8xn6T06L6Jl
q97/90pHtwzXbqRAjc4hDUz6z77piyA2nQtiyQbwu1bjrIF0pX+LNNp2AmwEdK3mgZtwQIeg
6H7Vjz+fdXF4bLAloFmyW1o4hKNfymwB/hwrtwbz+V2DPPU/2S1KI4gP640oxgm5o096nzef
cD2cfN8VDOrb0GeYZZ1a3q9UfVbsnaqjX5Awdq8a4ZEVBDjpzxQImBkcgsRr/xYI420uOYuW
Ujri/hlNkTW0nIe/8o9w3Je+B4XTzjY5DvlnIFDm5uDoVz+HQD63pcRGlrPzjPOUyhdKdEb+
I8qigE4zwtqOf4KRb3/F/F0YJcXiwVJSAPM9AfOH9vIsQwDue9llbFF5ICF/pxmCZ4SLXwnt
55wPD56zhQFpOYlYvIOsOr2fPf5kJi/plf2w5kOfxkHyETNAei99LeS3PQvqI0dh6BMfgGM3
fB2WveEKSC5dYWgShcabfNzItcaEwK0XgbX/HrB33ATuuW8B0bcewZ6SwKePk/Um7s4DwGYH
krIxGfgqXO4uJNnl1h1hfkWUo1Q+Heq1lU8ZmOV8PwdW9zGo9MzhTNAmp6z0PDz72AEQYz1o
IrJPepfEyf96+yU66GLOl4I7rqghiLMmryOa30FgJutM+Em159huEA0hMNuijlRDydiKDlCw
YW7HA1AZOsCaMgVKCs9EGrL5JLZs9JMcPQKZVxqHZEeP+V556EBL7VrrrjqsDiqHgtCV3XwK
5I5/GniTY2x1ia+TRdRKHh2z64KLGHC0kQNKYF7+lndB3yWvkcEqtLJdSHH2XXM1W96uF7+M
geEpcELk+LRjrZfTLKJD2734fRoQXqndUCq/XmFDsLxahvmdjzZbR0s6mzrcTWDWdCJUhFQE
dN2ZIH7+95BKFyBA8JoAEzu/OFgzBXCCUDK1546B9didINY/0zB6d0HJTifz1KoI6o0t1Yw/
B8zVTQfgzT96Fzw4MhD70/nr74K3nX4D9O/vfdKg7k4YXTrmteyeaQO6pEIinuNBXLoj4UPC
QmohKP8aZ6LpWUjt2gGJMy5AMIf8sHrXb+EhBK5JkkIAE2jo1Y7/zhy3hafc3KlnQnnHQ+DP
TnM00C12x5OmCoWYltwoyVlWND8kiFGQXrS2h7/8WTj0pWth4CPXGmeU+DVxWjfXLtMLbvwx
n1PfJa82Q4XAQc4nfY4GBVlSd9mKmK4cnYa080rXZykRXaeXeziDdzz7+Xh6dcn50RB0Xfxy
6FHWmLUdW8QDMpycBVKq43wNrXVboSM4eB+kRvexkhGks8ZBNsNdZkvJ89GpBdUZ5fR1ccKe
u6BkFxXqvQchcE8Se0uWAfPjKRCLgfm9R86CG299L7zp6T+Cj17wv9ky3zu1BB47shauvfXV
cONjp8FPLnv3kwb1h469uslATMzVoLfdhmI2xUGDqFxX8aUOS5aXlI6Kn4EUe6n3wJTnMMgp
QYm3bRcwtZi48Wcwv+NB6H/XNXD021/HqXgVrPvEdfJRCcpxgHimhSWBaysAu4WOWPg6iMhw
llKEgwi9kXiXDz9R6ORpnrnsu68BF30EAncVAU20hLbxG3/CVrcdKZCtkBI0WmCQEcv80uVs
hSnQE82t8HB2ofdpPzmkHI2UiSgHZUXaHBq3kVYIE5jRGjdxaOK6Rg+PJD9REprgdForFmm0
S0eRM5/CSgZRDZOQpZw/ywnkQNAVTW14L1dtleBXltt+QpJd5VtgZ++AS889mZWErWu6oS2V
gI8cPGdRgJFOfMWRN8feu9tuZ8DSdvLAQ/C5Oy6BbPdBOHvdPfDGZ30HTuqT2vcHfvVWpiTR
jQYQqSPkANK/46Fpl0PqbAVzDBoxMlOD+WQW2rJpDnlLEFtNwZWelA8dKZUfve1cmPvdTyFd
m2LLTWDnKhZ85U9/Lkt2NA0TDdDAkPKXzXkNgsPJpDBMwcj3vhnKXOqBlhVN0cpD1DoTSAKT
fxHXtCU9F9D38tdBauVqGP3u1xl4ZI2XvfGdkN14ojRYh+Szy/SvaQ7OqH3S8XNPx2kanWSy
5My/VYorKzG4b/05iOdZGScQHPmm47qxkjzKtaa86rpXjUUstaWWGngQglnoJCibnUHv4o9A
MHDqAmF9O5auRhw96B1ghzGMPrbY2ttCq5tKpljqmd3/Gxg9vB8++JLNcN/+MejKpzhSRwBr
FREk0N04vqoJdG+5+W/436SMXPGdDxpw6+0ZK2VZH1ER4tfR7Z+OnAZ3+Nv4uFfvfT4fQx//
XSOv55804NasXAqPDk/DDJV8pQqQcmegy9kF66ybYZX/ff65PFWG5W0+9CbrDNplGR+Oa/dh
4DWv4Qc5/56/hu60gJxT5xwOelEFzfivfxxyb7SKZK1Kd94U4b4SpEe/+nk48OGr4Qg6jdFc
DNKjNfAC7dgFKs9aBGGAgjRYLoqIO6TEnWlAEfUguZAASY6bTlgjS02fISeQdORA5t0pIE7C
CIKVvmOjI0UDkCwwXe/R736NaQn9HFGApoETjbrrMUafn9l+v5TiwIlZcJLqypVyLN8kpnA0
5Xeb6YqdQO0Ixv8owhzzBgncUBaxCIfOW4fCnOikA51t8+C31WBo71ehb/Wb4EsX98J9Rzw4
OGbBJw6eafRkrSmTY9Zqm1HVGtoKw3wHOmRluGXPqWyhaXvn874C1917kZIN26C/YR8nrWhH
S1xW2XEZPv51I1vx39I6f/Y1T4Obb/02LM0cge6lKcgmumFJdpwjnT4lKlHuROJUmLGLIBLH
I6WQd4escYruRnsXO1ePXf162Hf1a9nBI5WAqMLhL1/LQCH+rHVd2va++01w4i/uxgfdwQlJ
1UP7WFEgYBHwyGFLLZeDm/ZHFjE6MOjv7pIVaJ2FNnyxqFyogNg89ZJDtuMNFxttmxQWsoxk
+fJbTmEaRKC08wVY8rLLGUQE5seueh0PwNUf+LiKzAnIbNzCPJks/fRdt7CGTvyZ+P+EOkfS
o4lile64RQWDpmD2t7+GTLEHZ4J16hT9WLg7KtlpDZqpkwhiTqjkw0QpbE6S0mmk0ew+iOSd
69wRnslsK56w1QLQMsuu90icgaCV7k5X4ODEQ3Ds2BgfZ+tSVxD1IJmMQEx6MVEMsspaZSDQ
37P3aCz0TZZ5eqYTXvz0n7MVfsaqB9lSE7Bve8/L5HSJHL1cF/D7/SfD5ZFqnUkvDQfrRfjQ
8wo6eKLC5PLv3/rb0+CRHTdAefr70N1HQ2EAsrkBmMGfkHwG1IIpSKaLkHF6oQY97Mx4eHMo
BZj4skvVNIio7he8lPdHWjJpwLF7gSBlmkG8OFeAFVd9kK3wo694HvNWcvoIzAQcCs5Uhw9C
cnm/Ce8WTj+XU0hpvzQ4yLoS8Hpe8iqwrWalVrNsoXkk7eO0M3hQEW1pI+pD79tUdeJyQGXj
Z78Jez74Dj4vehHACfwExPWfvh4SxU4DDopqLrn8b2HmntvBQU5O+1uLDicFaug7dI4mLoGD
xC0UEfDAciVJdqRnW8KJ5XAnkwlIUHVJQ5KULIpoDJJpZUdHDmVCEueUmEiocgIpecq21eAW
YcZpRAJsjBSKI0eOwFknXd9kXSdn5+HYaA1mxSsgn5fNPSjF8+e7KjA2W4UliQmO1jVKZm/+
4SjceeLnQl49vZVpBgH48tO+z7w5ul393f9paMjfbfsyXOhVmyKC33xZX1Oq6vYxAWcd1wW/
vPMnsK53CyTXrILuDILWSbIE5+n88QjLquMNIvlO528QqIlmaIstpsdg7Jc/gmCmZCzp4Kc+
xGDd+OUfGPpbPbgXSnfdxhaOpnCyetnNJ+LD71IP0Q55sbKW2rqSZaXPWm1ZBqPluNKy6bRN
xWvrM9NQnxyDzMq14M1OwwPnP40t6wk3/B5ZVZEtFlGMhOsqelGCI9/+CltX+hydF9GRzMaT
OEInZMKIzIMmXf7wQXy7jgN2reG3Wt2g803gDDV1x81y3ziQaMYiZzLBTm4AtXJZ1iRqNSeR
gHSmzejbpkpFaCssiyNsLdmpRCWtJ+vBELXUQgSRXBJb0azAnOuOVoGVrq7OJjCTFl1zc8il
6zAx+CsNaE7x9NBj/fI9Fdhf72gpmZGljW5ndT4CN8JpMlPuLmkJNajP/MR3TWoobX+1fBeI
wdUxC92qaoX+t7nbEvf/6UvQseRiEDi9CyuDHDrN6b+O8GCyHr9UGR2UORyuujlS0UDvHD9P
VlsghaApW9fc0c2kLLvGYov0yjVsBTmCB7p/ieTEnD3WQB2JmshAjKq1VAGUwApk8YylE41k
QGHi9pvg0LUfZRBtvO4G6RDioCJnkPYVqNIwW7WY4Aeez8PyN13F9EQfn6dpOichC2R18YHl
oOO7fCUDRhbPusaRJY5K6oqUKs/huknLcpryoskxJD1aW2kqKRNWqKuE1TO2yeG3lf01dklJ
gBDNIBQtypZ0PoolB2MQhE5mk1PoOnYMyBT+phwOvfV3TcHMzH1GHDx7TQjA919yMvT09Oi/
cZK+lvj0dmFqgq2z5sAk02352E/5FQXzlWd9SwZYIluHW2k1aGR1U30/LLVugrWd+yGZyLCq
QSFuelGmnQYxpYoubRPsAB5f9GFVNoClWXwPncJ2x0eLHXD+hq0eptD5urHEnAZZDexY8ax8
jLYpfo1VdQthFAWSrpgDckgep1gRTQ5S+8AH1UE05dAQW/WJG3/KvJwox5LXvT1S1CfMuWqw
aJ1XRhZluJ4lMxGKgzxQhTwOAURm3HkLJVMb9UUGPBRNoHpCnlkEZ9gxwO3WudqGPVsRKU+f
sbDjYXGVPmqp4giTSgryXNlYWFoK9FsDutC134A5CmTOdWhPsOJR2v9lsEd2moFDNIP460uP
x7/95B/g4AdOhdU4dRMdabTQpCvffNo/cQClEex6I336cjj8hDToO//wbhgc/BiUJ78BfcvS
kEvfCXnbYwWjLx3AiozHP+n3NTmPc51X5dABJJ6HloleNjWz4TYjpKuKFp64BbH/LJVbLMI8
YwalJas9LJKxbKcZzNqmBRpYlnkEuuLaAF4pHwQWepCkP2teT1M9OWkQaXegzycQjaCOZMk1
DE6T4ad0XZ7S2cLaJm1VqJfm80KlrBKYRBQ+pMgE1qIVNSb7zxJGe2dDwMcMjGU3UiWISCRV
NTfSujafd9B0LLdZ6zvQEszRbf3BERC/ez1UrrqDd0fT/7rENNz3938Do3+6MRKgoX1UmneA
QP340lvBOuH78LmhM+C328+G9vwES3Zv67/9cUPfmnJ0FPOwrL8DehC0Kztlon/BqUPZHob5
+gC04YDxcNSPV8MbL0PadEPrJkejDflFgovtfJayHBHv49f4bCRe7EiQTwZQwvo70TqHGWRQ
wTxANXXbls4JdiOUJX7QZW+6kh1K4txFlQPSmPzvcJW2rJIJIlIhO5M6zMwRHovBRymj0ul0
zHFlmrUdHt30AZGQo88HQg9tyYm1pSWDoPvesKVvSEwSraoGVAGxZhfWIrWIYemYvWCBfROg
g2AEZmBhMK/YMwjp4UnuP+XvvxucNdtEHu/HzitfA4XkH6HQGX63N5+G3Uda99cgwAp8XQHD
cIXO1CMcDK5+XKtM0crnbNsMS7s9GN7tQaZtFqz2NLSnKjBd3QsTtSNQTm2EdMPsoIE9WZdJ
/ey8MPfycCBYDHS2HlaY6qj5LFtLiDd5ocAGOY0JdMq6nndR6MgFqjJEV2FAJPGdHTKfgwIc
URPSwZHlT4FqcRBqu1zOj8AnrkyKRCzvItaizVZqhxsfeCooYwCKFjBAH8GyfT4O/c2BMKdC
Jv4EqpJFSmPGmeYooMyupmswd5f2R1UpFGSpuzJ32060tNCtQa0LIiS4KSeEMghpFspu2hLL
7dZFAZYS3kVDkbLbKNm1tx9aFEyJYzM4RZehnfKJfnQVBKe9Eep3fRmySQrI4FRedODYYXmQ
juzjts57Utv6zDQcrXdGaEzYh4PALL3rAQTmWkglApP3TE4hWY8eVfxKgZRItT5aZ+plR70q
5JvceDIi3EeTaASEwCZdlzz+ue0PQfqG1ZxApFsOWA02hKdyoaZznlYtWURLA8cSKnQeWn0r
ytnVw6KQO2nBWrkgmZByqhP5dmO9ROScjWKgSq9kEETyW26GpfItOJHfkg6bZYdtCCTrsGV/
DL0vW+nCAcRUh0C1LCAwyyqY5jTReLWNuiex+yyjiJRSQFr9zMMPQHbjlgU6tIDJ74hSqBji
/CBYHMwTY5AanUHHyYZO+iwCGB76Ev5UCkkhBbPkUBQzXL0x+e/ImFtse6zcbsA80JtHHITl
WVRJk7JKkEsdgTWZIp6FxzJcTWhpSBgge5HLpH+nXaoAkXPl0Bc+ySClRPaoBtu4LXvDOxhU
5KjJ6F1HJPXTZSvNhawqdxpM4EHIUDIjV1IPfdu5qQvPvRHZDiTYZvE4VC2jc48BBpVO/CAM
fPgzzdZOxHmypiR8HPIVAkslQsnEIebFIB3CaCkUHVs6a7pPhh/zBVpwMb7OsAFNSHcCCHtv
SE5uq3sURgK5Th5nPnJ6WS41ref8MLhiCnjDEi1TJBDLG2rLLJ5XdGAKRFmCKKNAPYcWOSdc
EKUqpGfq1DrUtNYcnak85RaadGjahqfmYV2HCxX3LBjyDkEP4nFJ4gEu5qXtUNmFkYqjUkVt
RTkCdhClVVc3gAIrVhiCXvnmq2Hi9t9DvVTiCGEfRdoaNgo5Vw4NwobPfA2t8/0MZgmyOF+2
lNUF4/xFQBbonkeWCYFzyICmdNdXplY5YPj9caQ2NIA2Xf8DrpbhqOwbL+YcZLLSXPYFsltr
EOvmFMi+H06YP0zzDwGEDCRRD6I0PDtwl1g70oxG1v5ZHPanbDs7oqr4cSBHZjJpoVsZRxsa
q29NugDIpjU6+Yl09ChVCQJPZfHZCvjx/Xj1ajOg3baDTwhY01tWsKXOjJYgMy2gkpcA55NC
YKNHFuPQutr7qdioTwcFctrTqrVU2yHjDDqJTm6vUA6yDOaKJ5DXy3xn+l0DnHKfyVel7kjF
VHOJfRGdL7LOZKnp33Ht0+IbTpaRQuEyerhKhrajqoNlq2C1ZdJEVbBLd7wyKaTz96EjnG/j
UHJyaT8DTWYGCmYj3A6r0MFaNyVF6Z5xVFlDU7MMx58j5SvjDIKKqulxYfP56soXNhCfvh46
z38hW2YdGqf9yaBQB6z98LV8XTTIAtuK9Anx42F5NROx0xvILDwdGImWh1E1TehhhlY6pjfj
+1Q4XLrz65Fay1Bn5lkBZ0DHglhOtectkuC/2Db39HUwt7oIfT/fjkCWHJYtc8NWrZPW/NRS
DtoIzEQ7TIdRfwaWpvbigCJyfAmU7FPZCFAEcGVBsExndOwUnpHtmTrBXJLkJ5fpRuiJh1aE
EufjTovcdK4HgcNV+dCU7B7gVKnr7tIrVyNYXmSy33TtHdXdUYiZZ7DvfR2Ofu2fuRbRas/L
mW/FOlh55fvALhb1cFDFRvFpnUBNlplzb0442TipHOKO1BDS7GGpKdrt6OaKdYpo0qCkc9Pe
AgVrCMycYYdg1BUw0jFUEiRxbj8OZvptZsf9YM3MQ2VoP7StWQ+JU8JsOXLuaHBQKdjW394P
k7ffzAOQsg4pTYDUGzefi1V4U0Yjl3QNH2hyJCWwfcm3TVNMfFbVFoB2U6NPCFSkKMwev8w4
ielHWjuSg8dmnnJAv/L0VfCVWw7A6NQMrGwvQJstpxpqtfvA3AWwNikt7ymdNU48og5KB2Zk
S7BiIpwm6W/kNAYqEGCKOEXr3jdELWTKqGBFo+vRizgzjQBEN54AT6HpaN1dSYWKdcqlrrtb
84H/xaFmAnPh2S+A3LpNkOhbwoAY+8G3YO973gzHffE7PNVX8POU90GOIOWQlBCMLgKBrBfV
KlKJlczeO8BheTqfxhpCVmDwmpZc+mpO+q+XpDXWiVOzj9zP/6aEpOM+Lcu8pu76Aw/KWMJy
ROkRKkBz9PrPw9Rvf8qBH2M4cOagmkm72MHnQ7o55YDsuvJ1JjdGUzTKe9lw7fXQtvH4mANO
19P1vBe1DhNCLO9fBhlVT0Q7qnDknFsWt86rpWVpe+goA5lPbDQO2sDKNOjQaFXr+acEzL2J
aRidlic+rUT8WrAaJgsvhWHvXVASKqPNDaAzLUFM/Jg6IVG/unnPhum6zc5hxvGZEwot5Ecc
HC3LEYCGr/sMDH7yg/DwJefxtBwNETbmHKf7B9h6SydR3isKiFCSEk3vBDTivARmKpNKrFgO
y9/xfmi/4MWcn9xzyaug+yWvVk7pHyR3RgAQ2Mhi0kMmIO6+8vWseJi03KG9eH7nMngI4HQO
OhDDswAOPM4pEdJZo8IAConTINt3zZUcrKFU0bXoXGoHkikMyKpy3afPKD2+bEMw+Jm/4wJb
ml363/NR6Lv8Ckid+iyYx8G/852v4arzbX8c5AxDqpShyhq6N+RQd3HhrRx4w9d91oCZek7r
2SxaDMGyqR+2MxYQapFEQ+aqDU4h1RGuWIGztjfLeRsLWWYCcjta5PFzNylAS35kWjLVKkqa
LMH4jAQ0tQJ7KrbRejscvxSBcv8ROFYiounClPNiSNWyIDJJU71NQRJKRqoiiMmzp3YFc568
+vZEAJmELXsnE9Ww4qyrsQkiWUbtoOichqiHTdMjT40qvEwl/1x3N13kB9fxnAtVo3OLi1N1
UhI9dLJqD5+7GTovfiV4h6X/ktl0IsuAM3f/gQtsyYLqwgCiCtoiawtHD1jXEFLl+ZKXv45n
GbKS0RpCOV5DzTa/7Sw+P8qao31t+MxXweUWBFJ7diypQARGsgzCqR+/Xz88zL1LqHJ8w+f/
lZUN4s89SE+G/+EDfK61qXE8rzwDk+8jXj9Z49ymE/lcKFCkW0Bo2Y/U70RHF58TZSLqRjSt
tWvpHhIN8b16PPRNdYTbZz8FE9YLGdTdzhi/6N96I6BPnboSqr0FyN67B3KPHl4UgFQEEM2D
fqq2rlwSNvam2fGYd1JwqFpEC53nNrrD5QRMVSXN2D6FjuCcBDMFUkjZIMuddELLrOU6fngN
PjiBZ/NXf8IPmyxsq7RHXfTamJdLD4+mcF2lQX/veemrYM01n2JJk7XrzcczmNmyLFsJDg4Y
qkcs6KR9tIKJpSs5Z4MGDjmF1EZh2RveyVbWJG3d+GOe1gnMWnKjgUkUiSwjzwqqRtAkS1EP
ZzUoaL/p5SvimRC8tk0QFh+o8RAoWjb2S5krveyd74vIvvJeDnzoE3w8Kg8zszuClmYACpRw
Lw78r3jamfw5ehm6x8lQRZPV15SCoCQ6KxIVkE6hH7fQVEc4lF4GO+GtsK7WC/P2neit9qER
DJfqIHDPF0+GR55zJpxy489gx+oXQbf1B+gbuUPlf1Q46KJvzLM2dLHK8fDskidfe9hi27iy
BtNzZZiv1qEjK5d86GhzcbrBG0b9GlSXeAppB7xOi+CWuOtTHlttU+ndYJmN/i7CGjxyoKjK
mt4ja0EZdTKnIzDWgW44OTb+TLEpfYGmU6ElBh40lpHRqLsS7XP566+EzCnblDLgcJQv2klf
nyt59bOUO41Tdzy8HsDkb35qaggXI5w03dM16CDL/M6H4dBnPsKDh+jM2K9/yrOL0OFt7STr
BugRp5TeI95M15A/7iSV3O/LTkm2MAqHrs7RPkT7ttOVIqKvwTEVMDqdlQZkG4KeZpvcllOa
dG6O96hmlrpahQDuEU2h1QJMmme6XUWNBOxNvghs74KQF9tJWFbfjxb6EMzNHwdtzijcc+op
kD56D/T4kzAnUkw1slYVyvp+lsbMcKHSKXppDTlWgdK3FwYnl8GFnXvg9umwCpkigpRjTdoz
bdR05qcHEGSpo6xyjB05CBODc9CO1vZp+RIEhSxHjLupP13C5vVR2Pq4WmeO9oh2jWWO5ytY
JlWUwEzTJKVgxv0Q43awSkBOIHFHS0lV2kJyrwursVmiZSwiWSVyAlMnPb3pnkz9/hf8UJPL
Vqnu/wErI/VSKXbKBLPGGkIhIj3hIKwhJPmRMwiV80s8nI3EZ7/JfJf6bRCg+fSDkGroQRio
HGRL5bzQDEN0o4mWWmEeieThEOfB3ENPgnfqjt+ZYlxdYMsqB/J5025NNFtoHcCKLqzERsGx
W8t2tLSDrxKz9YI8w0lq/7UBOkZ/C+f97LVw39Ougruf+Xewe8NLYMPuH8CSw3ejNS+DNf0I
WCuoZ0A3rGuXst3Zm1ZF+0E3JBq1w4Mj0/Ctoyc0ubBnnxh+79d7T4CPXKj3gXy9JlcG8P1A
UGP2fKoOqbTkxjStphZpH6bB3Kqbj7aAZKGjYVntUhOcq8gNpcwlVYyxH/wL5zEQFRAm57nI
jltmwxa2sPQQdQ9kAjRZxvHf/hgKf3WpeSC89sz8NEuC9H0q62KJz5JcnY4XTWOlJCGuIfzu
6pgWrdeD8WZKYQ2hAjP7Ir/4Pg+o/quvYY6rS7qGPnUNvvehWONJDmEEOptQVZ3gAYh/02AW
1Kw+kw577yGoqEpGyoZn87lEe5FYOgGKjOhOuSoE6d5R0Fe49dkgN4TX7zW2E5bRVGH+Rnn5
tBSfAXSqrRMcz2IA08uxrNjqUj3Dt8C4nYds6QhTi51dsqqkvuQUeKz3OBiqTcEzfnQ5r6U8
c8JScFcgRyrN6uoSgAUi8pQ1d9G5W9USEMJ0zc9nUrD94QfM9xZqu0s5GlTyk0y4smWrP4Uj
tbgodREqLK0BrC1zEIlllW7/HTuDU3fcBO0nbAWb8iXUZ0jbjWrUBI7xX/2Q+e3Rr3zW1N1R
dK8PP8slWKoVgayrs7h/B/WWG/+XL0Pxr2U00g4cHCjfMArJIfT+V131QTiKzpfO3yBFg9QU
QxU3nhSrIey79DV8Ff7sjKkhJO5K5z3yna/B+C9uMI6pdjhJnqNjkoSme9cRhaF9hQOItF+5
DAUxYCq/IkAf+PC7YeXVHwCre4lUn373K9bnabBQfePMI/czx6ft0VecD8d/+0YDTqJRdJ+8
7VMwe++dfB0kRe58kyzFC1TbsmhWoaYcYAWxhEZa3o7WdXG1ZLekZznkEPFT81VIjm2HdLGP
F+LxFOYJzNN2D0z3nQM7X/kg+B0rWRZj4DtZ/GwSDjztbdA/921wOqWqkROVplKpJgevswjL
8nLIFpAfUMUEAc7zalDs6IAptSaLm8mCV56L7YNKflx0Cu1EVuYgc5KMLB54PFCH/DAetNj9
gXeyE6U3slxU5pTbslVVXFisSZPGHO06RFNweeeDTXV35MnLKKJeNEiYAAs5gATq0h9v5pa9
9LOy/VFWKDrPv5Cjh3R+ugqb8jeoxRdH+dBRJaWCznngE1+CAx9974I1hAQSsubUSox6eOjz
JhlSiNU4UAo8WKSDBvyZ/KlnxJKHwtC0YAUk/4zTYfk73se6OZ0TObjUJ4/uAzm0lELAGNh0
Ih+PZiRdi6kjrlSES+/TuQ5ffy3fgxVvfgcHmtioPeOMRR5ehFqhUashFogPUE2hGBoagjPP
eCZsn2uDoVkbnvmbt8OxgQthtrsfJosbYMKPR/w6xv8Ete7NvJ5JlJa4CP+B2k/AmvoiGqHT
IdV5LtSrEljV6jDMze0Gz0LrLY7wz72lZeDWHoLe1C1oU46Dafd8sOZl297D5dZriC/Dh9yT
l8uEFfJZ6O3tg85iO47OJE+pvj+HNysVW4asyTo38Gb5PT/Mqou0i7Ubuua3svJRHj7zxz8Y
D52aNeZP3MqKhHR6PNmXgtNFfa7hI8s0eftNLNt1PR857NI+yG44JZw9kMpM33Vz03UQaFMr
Bwxt8qcnEFz/2lRDyHkfqmplKtJsnYIz7ThIZYNy1Vyccjp8P56nYck8FJ2Zx+xDrcFC+yzd
fRs339FN4anFQs+Fl0Cq2GX2XZuclF1PG/K8R77xRbbS1HVKD/JEsSidPJwdE8ViS8oRFsqG
GZA3/u426O/vl4Cem5uDk47fCHtnXdg+n4fl+34O3SN/gszUQfjjsz4G06leyXWsCrR7aH2r
JSgX1hvrrRfnIWvt1SuwbvKdYI8/CkenQo7as7cTB8kE+IUV4JQO8c/HSpfCRvgM/3u0ejbs
t86C3vYUrMjMQmcST7UybWaHQ+Ucv78ub0E6neIGfd2FNnBTWaRwqablxprSyNFCzeIY0bSG
+m1wDq+y7AbQkfxa3TTRjgBa0xOdnilXlvJDJ0xxSc6iiKxTKLPKPPNwhOrxpleK0rV4Lq15
Tn0p1AMkbh5Ot76JjMlzs9Wxw2R6UEtVmMLc6GpcKnHJtsNeHTwwfc+ElaUsF0mmF0HMGaPg
BlEOW4T+Bc2mlEtB555MZSKFsXIQcy+7QOrJ4QJGeG0J1/SHbnT6zPcb/R/bCtdwVNdQx/P/
0wM7oB0tu6uz7KhqIo2s2p33YHjtC2HjHz8rp1KkILkccqbKYfATaj3AzHIlgkvr3F4dhTX7
74TR/qfDnJeA3J7l0JmeBmetpB7+xDzkpu6C5NqnkQ9PQjLUrQ7o7rsb2rwc7A3+O/LfHlin
Ja+2IrR32FDwJmG0hhMdWvmlOYDOQhd4eCdpJqbkJOLOrqpyblIuWljm4bILj0460Id0fFun
BwmnlcfYsLIVAa8B1KF8pfpRkGbLUUdO2pAdlCwR4Voi0qeNQKiXiHOU6uDJLkAK1LI6xGpq
a6CLWun7so+FmTtAJTiHC++AlPuiqaCCwxZ6rIiwZEsndwaq9MqKN4bRFjFQOdCsgmhLKZob
x8j7EoTLxkXKvnzTBnehRY9EvEd2dOEi22qp+dcrVQbz1q1bpRhLoKAbnBNlyCbbIHPgVuid
eBS2H3cp94WrBvOxhS2jG1nlNrcOXlVa0yDXAzu2vYu7fW5KfAzagp3QdnQCshkPRtMBRxvl
Ngzz9kYY9v877vcEyOjyI68KgZuC/Ujys8kuqHtTkNbiRrIAdBRKOEomqJw7wZqt0UwXATVJ
d5TgX0g6RqtOOFZDYgDErXMEvNDQmkuVUavFUF2V1yytr2PLejuyboGwwmwI1R1JNKwSJWzZ
C04qBTL5ntdEV/WNptRQLxhh6JSscNG1fmHXf5m/TNZQU6Yg2uDFiuRn+DXmoHR8bpmg2tVG
pUYRWTUg4HZcvjp/aEoH5X4aIvw7fzvajDJmLGIn1BrUETA3gl1TGB3QMYEVWmCTnTKc5pfX
Z6A6OwWjncfD2JrnNgHZEvFliMlC02cm+rdCNVlkgNfsNvCtLOyevwo6nDkY8K+BXOYw1Du7
uXk6BWzm/RzsCt7Ii2W60fTahFy7W9OZjV1JqNR82Fdrh+40FbniTIIet8dLHvt8gwnINTVt
pezWdIMam1O/5zN669xzw43QDc1D9YMWEcelFX+W36H1suu81qHj2MY0MS0hCS7S700uqeyr
XAqfLaFcStqTVtoKgcG1fghkR68Ho1eXtSzTi0J3IOKHG1iKl4fhYF3faDUm6YnIss40cMh4
0EqugSq3sixjqfUDEdGZSi1mrimW/qmLYy0rbA5jBoCQLc0arSos0CO6Fd0w2nMDHdG/12r1
OKBJx+W1qPGE1rTV4PDAenik++NwtH0TF246DRp1E2DwM8Sp9d8cDgbUof3w/TCE9KWjsgnK
xRzcX7uWgzRCJMz0IxapiaQ85v42H4acDBTwxpCFreE93TWbggyCuSsloDdDltaDsXmZ1H98
Ua6jEqvEQbA/NpOE0bLF+1yB3+lOoyNYrXJDFPOQleW1AJpArf8tROgcgW9F8hzCZjL8OZXb
ISVstXAm41I1FiR64UhrF4gwZdVYX732WnSGiHUikt+l92xXmIWAdG4yxCxz6A/oz9CimdHl
56yQi5jck+gMFbXwTdq9rZavc+ywmpbkX191GI1aYxOgsWP3s9G5joMbmgBt6AetmlkVsbvC
XFROeQgOJOqrV62EFStXohNYZofPFwuPJEffpAagE8iPrT6XlY/uwT9AGakMWW76HHHXhfbZ
+P7hWoaLWzcV6tCRFLB/VvLge8eTcNdYikFKFpj2mXSsWDRQh7dd4t2uz1376bu3H0vC9ukk
jE+WwgmTHoDnhdkMDecRs9aUERaEU6deX9DG4wvbMb059OLvnHOs6vXADlvM0kDTTiEvFq/B
bI4VX9ReBkws04GJl4DTJV9OdL3uMKFHX4bW2xlAOLOQhfPNZ+JRU8mkrLBlgVrdqpWTFgW1
wxUuSLM8nx1FESmbarK6EIatGzcaPH68DLeJBsUw49XjgE4lk+yQTFZkjR0dZHVHEja1+9Br
TxqgtXppULcCKOnTdbw44uNeIs/8WHql4UBYbKMKk13TLre/LaRkq4GuVMBVKBxdRyNDfZzB
l2DfXPSNdXYijg1d5KqsD5txUHRnpCpz/5gNu4fHYKbumIqSXY/tbZCrwuXZorV63NtYNK+4
TTeaG/VECjd9IS0rtyoQziIRSnID61F3Pl7bB2EASNfURTuCRiVIHjSqr7KlgKwrPwjMOsHI
EiJsmGgGp6WafaoK+KhUqbhxWFNoxSmHbUX6eETBbssqd+E3lamZPiRc4hUYBcRS5wctFlLS
eRzM7zmPw49TDjqhoVqeM9bWeePQk6hCW64A65cUoKsgYKzqsZU8NOc0gTj6eytrOyfSzMdn
O457QglI0f1QCVUdfx/Ie5BkyYuAKXvREb1gOVBVcpNDk3KsliFuesgJBWqqjtuJFnOsjAPZ
L+OAcZCmUAmZx+K8SZeMTYdxR6QR9AbUDc1lTDGnohw8G5P+TPVxIrqCqwdG+LN1QoZy9Gw7
Lr1FWyI03HNLcWeZK2zFNXQA1Wg8iFEI7VA7anaQEcEgRm/CaKFjqCn9tJUzK9UZp+n+RFuG
8YpdjivP3VWOpioS4IFLRkI7n7bVZNmjhbBRutHk/LOO7LswE7icsXYIrWEbXmQqjQ8X+WUx
RUs5+LAk43AXIgIS8VdyhMYqNoyUrZgOHQUmAZq067GezVDt6uc1uBuphQ6ztxoM9P4JnT6s
a5eAqNRkpGoJWtneVM3UzWnuR1lzjnr40bWlQ6UDYE22DsWEB3unfBjfOw7+UrwuHLDZNnkO
gweHYdXK5SZwEl3Fia0jedSsR+vpMZLW2DAlmrVDjD7sx9QUDYhGZzMgcOHDtl3bcPLowKHJ
WGrNlmrbJdcID3QLhYh1Nz3lQPW1Y+AFYY6GORdNpyBcYYoUJC+IUwXdHEeDk5axDzzWoDX4
zIqxDXWANAsFdhAmKkV9lMhAbVqIk7XqCMWLVM7QMWq1Kq+HGEsfXZOahzw6bOOUipnqhC4n
YIDopRTIgmUytLCPZ6ahlWkLRhGjw9UMg5soQBTYLOnN7YNydgXMZXse1yJHwUyDZACBTG27
WOSbBdgzm4Z1uTqfAwFt92P74Nj4BExOTEBHZyfr6RvXrYVsPi8foureE69GIflOwL6DD3DK
4aaCb/JHiC7MUDK/tSJWNycFDF+uq+eHdZ4xj11YkZJ7EbPSmqbIdI74NG0yxUzdnmsstu3Y
oeWLOG5m1Sx+OXKgBKJp4UwjZeKzkwn0QYSnhtE/Vk8iKolUYZqzFbR1NsEo8MPmjBqkQRAL
NMlnYKn1VaClX6KDJI2W1xTfmuLc6EKgwvgiOjHJALrNqvIoo26oyUQbKwfaMgWR4i25Jogw
jf/abDmN9yLQR3EK3z6bxam8wVqnCnBk0wuhml/VBORoIpSWBDMVWddIRVup6TnYN1WFkp2C
MbsHqm4HAhp4He7HdjwKlUoVOopFfult39AwUG4KLXZUaG+HtowUsZctWwrtORnC37l7D4yM
yPUP1+dqESulghvKMocxB1/JWaqzkaP12GbqYal1q3Wur9Ru/bBW0Wi0gWnKQrvVoBZKU52b
n4Vdj+ziGadd5TZw8g9eG1UXUUHGcQPLIdfeqXRwX62dmDC8mR54vTYPO3ftiTtdQbO01L+8
B/LtekEjGX3ce+AIWz/GSFsbrFjSLWcidnrjmjBLdpRCgBczMzsHh45OsIGg7/WvWIrXEcSi
ewu1SqPBtW9Q9icfWLUs4oh7vN92fNZWZD979h1iHFBiEuhcjlXLurlq9qiX4e6cxKEHh0c5
4LJ2dT8kkm5E47RUAjjA/gODMD0zCyW8ydQUPXrjF9o02JxcF+eJkPJBUci2+VGoTo5ANpt9
QvtpKh1pLp98UhudF6UA0LELqgLbU7VtvV15HDQdLEMdGStJKx7ZypV43gnNFASa0swczx6c
p9DXxwrS2v4+bgZuooKRCOHIeInvJ2WO0YDr7u7W96IpAhQFdvS4cjCUG7//hO8BWV8q9iCr
V1ERuNnZWZjA66Bj0TUkldRJ5+0plYbAS9dCfsjRoyNQROA1HlvfY2rZHO1yS0uIpKiXNA7I
vYOHceaVA5BmXcrXof3SNUWvUQcEj+B19nT3cJTQALq3M8sjim4knVCjVWgFyDIeoMVJW0/g
vol/J0j/ozcB/zk36888X+vPvAfWn3FvrP9b91gDmk3v6MQcm2x6ZR/nRiCAxZ8JPuu/GHDg
/6Pztf6Dj2X9BwA59vv/EWAAHJMxEGwfmvMAAAAASUVORK5CYII=
--------------090607020907070908000102
Content-Type: image/gif;
 name="neev_logo.gif"
Content-Transfer-Encoding: base64
Content-ID: <part3.08050705.02000807@neevtech.com>
Content-Disposition: attachment;
 filename="neev_logo.gif"

R0lGODlhogBLAPcAADQpZtkcEtk0K9kjGtra2uSKhuDf4N+ysJeWlefn52RciMzLy/3z8tbW
2fK7udcVDHpymePj497T09za5Kyovurq6vX19dkrIuTMyyIVWdHO3eOnouJoYed9eSUZW7Ov
xtrMy/Grp/7+/tpCO/vu7d7e3uzs7NuVkaOet4qDpOHV1HNtlNzc3F5VhOSDfh0RVe3s8ZiS
suqRjdbW1fG/vOJWT6+svt1KQ91qZUQ5cby8u6yrqqmlu7ayxeTk5Ojo6IV+osbC1VJIe7m2
xsC9yrW0s/Lf3sXFxNs4ML26xpiTrNLS0dtiXPHOzGpiju+Nhzovaubk7uHZ2MPBzc7L2xoN
Uuvi4eq7uuNiW/X1+JCKqqait/Hx9ei1s6Wjo0tCd+He3qaiu7m1yqynweexruzT0vGblry5
y91dWOKUj/Xr6vbb2MrI0P76+t94c87NzuyinvLEweyalvjT0uO0seJvaeufm/bW1Prj4trZ
3ObPz/Ll5eLDwp6asNHQ1erp7+ra2erEwuDe6OG+u9nX4ufm7S4iYCATV9QMAykdXsjH0Cwg
X9bT4G5mj/T09/CRjM7N0/r6/NjX2ePY1+fn6OXj7aikt+fe3v/8/N5QSfn4+uLh6ePi5e/q
6uq4tuCblsvJ1crH2c3L1JaQr+GfnRYJT95xa5+atunLycHAv+W5tufl5fnf3p6dnMfGzuiW
k6KhoOXl5d7e3d3d3d/Z2cvL0SMXWqempicbXSoeX/j4+Pz8/O/v7/n5+fPz8/39/fLy8vDw
8Pv7+/b29vHx8e7u7vr6+vf39/PIxfz8/f39/vr6++Lc29vb2/vp6Orp6dPT0/j3+vb19/38
/fHw8ObZ2Pb2+N/X1j4zbvfPzt/d5+Hh4eHh4NDPz8jIyPv6+/rMza+uru9+erKwsfTz9+jk
4+vr61dOf97e4Onp6erq6f729uLKyfv5+fPy8tXU2NTU1Pz7/LazwLm4uH94nfHx8qqoqNsw
J5yWtOzs7uro5/KzsMfE1vDY1yYaXP///yH5BAAAAAAALAAAAACiAEsAAAj/AP8JHEiwoMGD
CBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTI7MUisKSZaU/ywiKsEYIxYpz
X760gIBCUCSLwgp9SOFEyBchLVZoCcIr3sVkXAjxAHJTyDkF9PBpcJRsoQgulVqKLSQCIlix
LmEw7JEDCra32AAICSKi7LJQCgD4s+XBA18PuABA0LZLYrwJQKAk8svYli1/hnLEqNRV4jQY
Y84ZSuSYsV9chr6EgaEsoQhQhuCqzjGhbEMRENyqxrYIRV2FPHL97WsLwIdhxv4AsZXBg7/j
yI97OJQLHznXDQuNSnTIePLrHjIAiFEPekMuYaAc/yp+/bqtQ9jCcEnIBVv1vvAPATkmzDtC
QlCKw89+CJQjXb8kRMEi1h3Xmw3PaPDFCwWWh5wtpQDBRYAMaXAOgw46eF4LjFDIECEtHPJY
huWd14g2HhKUzClV4HJdBl8YAExhC51CHnK4VNGCJAkQI4yABCbXWxKgQPECieV5UEoMjqR4
ECOLHOIikuUdAoAr8dhnUCgASEllebi8AAUj9RkkiF/mefCBOb0sJE2I2FWxBQsRBEPjQQM2
mAE2o5xTxXG4+JUBX1Neh8ugUwzjJEHaAJBBocllRx6k/uSIDSHGaDkQI11SqhxjlTr4AjYT
ZFpQNCu0eN0hK8RiwaIEaf9gSAbJhQmFKLMkYIGmAuUZqSGzVurBCy/wZcsL1TmYIxAJ6KIp
DEK8QCkux4roGLJglqLAH6YaBEMOqtZ6LIPLYetgKUJQsox9/JRS3p5+FPMjQiLEgCGOERJg
gAnGKORrpIRmcEgLStiQhDxKLNggcodA0QAxdxKkxZGGDtoICkMkYUkK2NwLKIRh+GiQJvT8
aaiUK/RhiQ08pJADg55GmM+8A/2xIKSOhZGOLgn9cWGttPbAgg++wDrQvycnskUtzcxSggHb
+AGBx8gtR0QFzhZEyCK01iqmDX6wIIsB3JTAhhMm4yhmA68WREV2kIb5hSXdsOB02a4AUYUt
cRf/N4QvESszhrvXvaDALEUjdIZjtVahwDsl7Mxrr0EaKmYSBLBgQAIm8BIML5Q4kWzhlviw
a0FAUIxjw0Q0vc0PnQdTjA8r3IhcKSik0wt01gBRCqWHnDNF0xHAzgsvxVCCwniGVtEIJ8d4
N4EhXjIMABH8HhQNBOEq9wIKdPJCM0JIP/hCD8SbYEEvwuwiTC9UGLJwmEqUADFBleRwiHlV
iGG3D8UAzi7cpwtO5GBEgHrBF/KQOIEQgnovgoI8miGLWPACOO0Thi7qMbWFFQcU4iNINPQG
qWFpIQHD0JI2jASpF+QAFLk6nb8qlxznvWMWEeBFL5zkiy8gEFBV0MIs/+RFEDEMqnEKaMAs
fBCMbglEBLuIQdcelIEpmKBNAhlD2pRzCHo0owQ9cuI/oEiF/BiqFPiIRQoJEgQRXUdHebhf
QbRYnhdAoBn76tdCyuePYYFvG1fUkjJa8MPjZAACksieQJRBD9UhpwoxYAEgd3eQ6dVRCZw4
HRe4hzND2KAZdRLjQDQhOsvtqB4Rg8HPkkOrIbCpII5AG84WYYOhNXCGHvRAD2JotBUUso9O
kMQrBQIDBThyL7bgAS8RkoUcNChMjciDnf4RBfHgDBtEiFz0EqIF21XKSpAY5kDwQTV/VCEF
pkvRBNzIynNAI3JZ2yMNDQkAeeQxIfSYYnKSWP8BLP6DEF/YHysBMAQDiPMg5ygkjBLZL0Ic
kZVfeMc2iJgQFPQFOy8YAgq9wwjxeA0bfgihQISBj+71MQNC5IZI5enBHMhjG7yIWEEgsLBK
8dOfRHCUeQCQAh6E4QNADapQP+BM8xgCEpILRTltkQMeiOEMQYiqVKXKj1DQtKZV4EEEbvmP
SHRQSOfDmmu+VT0DXSmGkyNI+cLUAldEQI4HAUKGFCAJrA3EBoEy1F6Ms5++XjRJttDoMJIx
hmNWzTGITSxia5pAIU6TIETIhT5zBAF0JE4EVKBadlagrys6hI8vaAEbiGa0f2ihprjgJ88E
0oe/YsevsHXQcuSx1WH/xMCkyhmUYnfLODCxiqGwPIdAkZOBRbCBiJFIVQk9IA86AaO0BeGj
Lc7hCleVNga/9Add7SoQMRTrS+Ct2vneygV6DDe84MVFhITpz4FI8ZlVQEECovcHzpjnC5KA
Z1rVOk9/DKwWupocdsGk2oGEwZvoRVIGLLGNYMDACYxNsLJesIJ3cJcgm4DCD9maB2D04gPS
KpwSmgFTmeJyVQp4AyXWiJABl2e7q/2HJVxbNdjaGLYZ6IMBePEHBUg4SRnKwAoaILmCiGAF
592LPyChPgWUdS+LgARaH8LHQygAEhtNiItrVWCBTAFNyTlEU5MwhDKb+cxoRnMP/LDjYWig
/wc2sMQW5kznOtu5zpagh/wsN+IiFyQUNM6RfCeQi2dSuLN6/Gx/raxiFh9ky/usa4w7qk//
5mAKs4DaNjbN6U572tOxgJgIemGCCHz61KdGwZ5XhQJZ9PMgzdyw4dABYkq9IAnOha5Bqnzl
LLf4l6ltwIU3IdwXLWII26hAMIgRjGY7+9nQfjYwAPSPXViA2dHOdrRttDDiJOGeB0HBMW2R
CEhAIMlihpyfFb0wRq9YwNmF8UCk4YRjeiC+bzXGAPfNb2vA4Bj8DrhrRPCLgPeCF44IuMLd
BwEEuxASBqCotxah0BUAAL5bIPFK2Y1iLDvaIJAGVJcFMorRAdEJ0v808UDEoBQUnIEKgpBG
QqyxCSrwYwyjWIEN9rsJ/TWvwm9V+RinRikEF1fKAY4IrxsNbwfJeyCymux5xKBIgwjDT9jC
xjkgkAIi/ISYPNACPc6RA/++AF3c4lW9TK6crA6tbQjRgGEDXQUINADcEOG1x5tuqJH/QxNw
KlxEPz6QIORVUIc4RCnCMIxdlOXBpUh8BsizHBQ0ESFD0KnXclALbU6OHEJ4cpIymmuJLP3d
Wo63pOdI40q9QAhToCRBqICNSuPCSowwgS9+JIIg7K1KULABV/+xjDB06VyjyEPEE30QZdgA
t14TAiQ8b/pF95rwBAm5TYUdY4FoIvRJahj/PUA4jSxMIAbHL08p+oBDkZKjEVskbi6AoAFy
/OIbheiBEyQLpip8gQ0sEAvDZxCFMCue8kinQAAwNT5UZn1Ml3pOt3puU2gaAhk5gBMXB2w6
EjaktSkAEGLm0RtfcA5CAAWGwBca8gIUoC9ssl/RUDIHeHuGgGm6omvkY317B4F9x30GoQyn
wHYA0xmo9QIAwAZ4FEgD8QtGVGnKIYStZz5a0DQCKHQFoQG91Tz08A770l5554Co92sReGEE
0Qsp8F0Sthz+8ElgBHcDIQw2gIY/5g8Cg0h0UgyihBBcIEvv4gFDQCdwpXQ46GuPBmx+NxAi
4Agp8IHZFWSHMDdN/+MDImNkvcAD4rGIGbIcUKAFMyBJJhBPDCECH1AF86Mj6rZNExEGxKFY
oQVg2DcQWmAtitUCPHgQInAMH9ACYWI7uLCLVXMIL7AIjTA8S8QLdzhGukAECrAIyFIgU8KL
feSLuNACNpA53GAOigIRUQAAe5NYGQBJGseAEPEB2AAF5FiOhtAIOYgQp1CO7AgFjTCLB/EL
x4AOKNAItUcsGfACVVAFxPICGZADEEABDaA5sRAMskeLuhALNvEyxOKLk4csDZkD9KAEYVMC
EWACx2CDBUFSudCOAPAFNMiGEvEH/HAGH2ADKGkDFEAEBCCIBBgEQ3CSKWkDRMACYmgQv/+g
C8FgAPLQB1TRAgoAlAqwAkDQB0MgCRQUAekADMUoE71ADBFABFuQAivQAjihE0OZAiiQBJLA
AiXwOgapkd4iBnCWkhSAOVt4EbsADAkQAW75lj7QiWklDLwQC2/5lrFgh14hDBZQDD+wDZIA
CbXABrUACe/wRQZgAD6QDsEAcPv1RLswDLyQDtvQAJCgCERABIrwBvAgNlCzmBdUJhMhArpg
Aj5wl275A4BzEaNmAcDwmq9JDMDQeAuRk74Am7HpCwDXEL8gDMcADMVgDumQAMRJnOlgDsXg
C7ogmg8hAr4JnMJJnLEQC8ZpAslJH49Zm8fgC7IZm8BgAU0JEQT/p3C/8AuPOZ4BV57i6T69
oAvDYAHwOQy6wD7mWREE9z7H8J7waQHySZ/Z+RoFx2/l+Z8ogRF1caC3wREHOqAJWqARYQz7
aQG+MKG3GZvYdjzHUwwaagIc2qEmYA7mUAEVoA7PUKLpkA4/UJzFuQrT6QMuepqo6Zabxg3c
kJg2agAlkKMlMAuzwAI+6qPNEKTNQABESgCSYKSSkKRJOgMNMANO+qQzAA9SCg1UWqVLcKVY
2g1auqVa+gbd8AZg+gYLMKZkWqZH8AbUwBAW8AMpmgCxAKOmdqOyIAs9ygJBiqRQGqXwAA1X
yqVfCqZl6g2CKqhHUKiGmgqImqipoAM6/7CojKoD8xCpkiqpRVCplloE45CpmRoOnBoOO7AD
nvqpO2APpEqqt3Cqt+AFqqqqsNCqrtoKsNAKsjqrsooArWCrCJCrurqrrWAA9akQrRmhwiqs
FFqsxnqsyJqsyrqszNqszoqb0Bqt0jqt1EoMnvOa4JlWtkkM3Nqt3tqt2tZsGDqu5Fqu5nqu
6Jqu6rqu7HquGvqu8Bqv8jqvHpZWUGQMvZCv+rqv/Nqv/vqvABuw+6oLBFuwBnuwCJuwCruw
DNuwDruw+kagDjqxFFuxFnuxGJuxGruxHNuxHksReGAGTzCyj4AHBdEGITCyT/AId3AQeFAA
HOACrHAQzmAG4v+AB3jwCI/AAAYxB09gBm0ADuKwD+1gEJgwBx3AATLgDC5rsySQEHggB3XQ
AXOAEG2ADG7AAa/wtAbBCo8gDjxbEKygsk8AB5hgEOuwDzhQByEQtg1BA/fwAAMQAANAA8bw
qwyQCQGwtwMABxE7ECQgAHT7ABewBo5HEKhwAQHgADRwAQPACsKQIiEwtw4gBw/ABGrAnP9w
B3sbAA8wAiTwqwIRBwLwAGtwtwZBAjdAtwFwAXFwuAOBCQ7Atw9QB6FbEA5wAaaLugPhAHO7
t0jAAMwpAh3QuQHQAe2gkaxgB5kwACPQAWUQQBTCADUwAJlwAiegB9I7ECHwADdgBzX/gAhp
QA3tAB1NILhXALcD0A+84IkhoLg3YAoBwAFWQAzdsg5P8AA1UABI8ABd4A7jgwz9G70ZWRDv
ewGvoLcdYJDQsQ5oML8FMAAPgAq0ORBwGwAE7CE0MAAD4AJpsAFhNBB3gAQB4AIFEAA3UAbX
yBC78AqXm5gJMCMCsQ418ABpQDbb0CN3csJYEAtucLnVIMMCcb4BcAVXcA8DoAcC6CHvy8H3
EABMMAnpYIoMUAcPIAOXwAHiWw5sKMAPgAGQKFNP4Lyr4AZQzAyR+A8kgAR9qwI3MACDUAGO
dsF64ANC/A80EAD3AAZQEwEXdgdPTAZgIACZwA7m4IkJ8Qsy//AAaHANgFTA/0C9AYADgzAI
l7C9AiEDAVADKlAA9+ACUuBZQyy4BVAAF3ABGBABz8W9F3API0C3TCABvsYAWPAABTAJHPAA
LsAMK+XFqfxYAyEHATAC14ADUEwLryYQzoDEJ0ALn+ACehB0FvzE7LANcJXHF0AGfKAHJmC/
A9EGViwApMAHfMAMNdgQi9zI5ywQ1Du3iIAIr7Cc0PEEKEwLYFAGl5Bs8dQEbMy3FxDNqywQ
kzsCGzC3sTzLtXzLubzLVefLdSJTdjDM12DFOCAFP2CKyzwAJ3AAWMABqBBqd3LBGGDNIc3B
71wDw7BDBOEMNyC3pNAJx7nCC5HOUv8wXwTRziPgBm4QCMRAbQJBzzcgBeVgBTCtQ65xvgNQ
BzjguHqwDQH9D++LBBiwugfNYrRsyyqw0LMgTg4NzAIR0SMgARQ9Cb7mDIL7CRvguV1QAasp
EBdczdfMwThgChtQDBYQMSKwB5nwAAEAB3YdngRB0zY9EDSsyxJwDWAQw3eiyTUgASfwvWrg
0/9AxKpAB0icyk89uQKgAj9c1a5x1Qqty8zA1f37yzIFB8Ms1g9Q0WUtuM2MBYhwBT9wxyJN
0hbcunwgAcwQl/6EB3bQBYFQwzcACDI904xc08dw0zUQAAVAkObAhidcA7RgCg+ABXugC3dC
xF1g2QOA2Uz/fAECcA1pcLmybNW5XABScN6j7U9eHM1e/Q+aPAK0UAdQfA2tHQCkYAB1gAie
kEM089a27dZ6rAIW+QOX59aCawSB8ABIcACizBCCndwDIcluAAIS0AnyPBCMzQ4/7AJWYNSj
HABkwN0AzcQDsNmfQN6+tg4u8ABuwAd7vQEGxd4kfAAgAAhOQRBwMABIwA7GbAqJzWLrsLpp
gAF77QkT9d9PPNLXjNsgUA3r4yHZILhkcAWfOwjrbNzqLOHsXL0D0Mp2ILr/kA2tKwASTAZ+
vM9UTgZMrcomLgASYMZMoAK+hgn7QLiOOwCosA3iFAdsfMqgWxBTfuJz+wqbw2Jt/3DCrSzB
/S1xDkDNAY7HHAzoaiC6NPzliosFUqDKVKjjSU0Lgz3DHIAESHAPSGAHUf7NHSAAAnABdVAN
BnBhZXADF6AKqjACSFDiA7EPI3ADEmDKpmDfjka999DqBcAMgJRo2ZAJAoAEhLwHFfwPmMC/
AnAPTFAGBrAzBIEHI1DtmYAEV5DkAxEHtM7kdyLAzi4ANwDt4+MJuO7KV6CYT70QvVABm8Pl
TzQMCfA0EdAj47MLwRABUGMAESBx//ALwOCW1umW8y4MJrANTGQOOfxxxvDwNirNA7ELUMnv
hwwdGi/wOJrsBdEL5pCYNbqABBEPvLANGD9SKz8LEG8OptE4RhaQADf6A614EMIQDOlQDFz4
D71QDMW5lHh9DCZQnCZQ3CIwDCH6mhVgjSmylumgPsRQAT7vHb9gAeaA9Iic9VtPnHJpiKVZ
nM/tJLvgCxVQnGwdMVkvoiJ59sMJ9ohsDMTQpumQxp9oDPO5KL/QC8fw9xlOEL9gDH9/DCpd
ELvQnsLwPr0gU845n7ug94dPEIlf+LxriJX/95MvEIOvC5oPu5jv94CvuVBEsKA/RhpU+JuP
+p5/DIH/sbAf+7I/+7Rf+7Z/+7if+7q/+xcREAA7
--------------090607020907070908000102--

--------------090707060509010701030803--


--------------010004030307090807030907
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------010004030307090807030907--

From java-user-return-37970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 15:01:04 2008
Return-Path: <java-user-return-37970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47112 invoked from network); 29 Dec 2008 15:01:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 15:01:03 -0000
Received: (qmail 78477 invoked by uid 500); 29 Dec 2008 15:00:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78447 invoked by uid 500); 29 Dec 2008 15:00:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78436 invoked by uid 99); 29 Dec 2008 15:00:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 07:00:56 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrao13@gmail.com designates 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 15:00:49 +0000
Received: by ti-out-0910.google.com with SMTP id b8so4021812tic.11
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 07:00:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=AqoiZeWMp/47QH2mAkIN9ZkJ+C0tp13dZlsbEljAaoI=;
        b=F9r1nH4wWvGQmaEVUHYpB2d0pFQCquVrgXomkAU+Ud9+o8f6cvlbwszPeL9dqSiX1B
         QXeCcMjX1cVB7stzaHJigK2Lea5+s7rT8zyLgt6GgBn2SrNqrYAXrclGAYi6Rkx4ynWn
         ciqvU1z66TNuoFUsfAFtjfETDF7X5x94Abi1M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=TH19gl6HyffeAF+Q0R9p6sA1phTn2J58heq+Z7kvAJSmjlya/vUGManvOZSLO1AwIG
         7IeTFncsD2YDfHv3TBXC9JBGGRPOg/51iVzU4PzJsS1wIzoALrJWxiPuJKZcWJnXnBKj
         Opse4EXysaM9Y55GbgbWk0f8arz6FRv6yGFZA=
Received: by 10.110.8.5 with SMTP id 5mr10055747tih.12.1230562828943;
        Mon, 29 Dec 2008 07:00:28 -0800 (PST)
Received: by 10.110.26.3 with HTTP; Mon, 29 Dec 2008 07:00:28 -0800 (PST)
Message-ID: <245655f20812290700g1eddf82duf866bbb3a5ab21ce@mail.gmail.com>
Date: Mon, 29 Dec 2008 10:00:28 -0500
From: "NageswaraRao M" <mnrao13@gmail.com>
To: java-user@lucene.apache.org
Subject: Where to get login details for Luke
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_145913_26184386.1230562828924"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_145913_26184386.1230562828924
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Guys,

   Can you Please tell me where to get login details for Luke

Thanks
Nagesh

------=_Part_145913_26184386.1230562828924--

From java-user-return-37971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 15:28:45 2008
Return-Path: <java-user-return-37971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53590 invoked from network); 29 Dec 2008 15:28:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 15:28:45 -0000
Received: (qmail 15111 invoked by uid 500); 29 Dec 2008 15:28:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15079 invoked by uid 500); 29 Dec 2008 15:28:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15057 invoked by uid 99); 29 Dec 2008 15:28:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 07:28:29 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 15:28:19 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1424498ywj.5
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 07:27:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KNV79ASk/5zwTgAx+gTTKshUaGp3v2PNZfs0tyqygz4=;
        b=I4pPYwJjuPqn9GZPfr/2jQyCUB7oD0B2sQkPHJtBl/zuSZsLMipMzYRcWFsaii/VC+
         mtE6sTLikGCTCmNUjIig0ghmeVLp+Skfgs7TO4Dn+nIRHf/DdTI4qxz2cbUmlRbQPt95
         +3CPCDsRYYHCC5oezVKnqTz/i1fS3Lac0vV5w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=DhNBOK7FgYEb+81hyERmRgsHhMTPptqlu8EQUp6OJFgEsYQS9zeyUXZRPYg2QKXNWi
         AkKPln2GnvFG7meoPtj7zplY490sTMDRivghNfx7KJbRlw2lTb+yfctLcAeB557k0yt3
         gNhVcQKsQYZlK3I836PxeoZ7LvFukB9N0jIDw=
Received: by 10.150.147.9 with SMTP id u9mr26300543ybd.110.1230564478683;
        Mon, 29 Dec 2008 07:27:58 -0800 (PST)
Received: by 10.150.177.14 with HTTP; Mon, 29 Dec 2008 07:27:53 -0800 (PST)
Message-ID: <e994873a0812290727p1877711fq266249572bf7a9d0@mail.gmail.com>
Date: Mon, 29 Dec 2008 10:27:53 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Payloads
In-Reply-To: <BEC11C35-3A7D-4A47-A4C0-3D55650AD4C7@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_82375_11494011.1230564478678"
References: <BEC11C35-3A7D-4A47-A4C0-3D55650AD4C7@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_82375_11494011.1230564478678
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Karl,

I use payloads for weight only, too, with BoostingTermQuery (see:
http://www.nabble.com/BoostingTermQuery-scoring-td20323615.html#a20323615)

A custom tokenizer looks for the reserved character '\b' followed by a 2
byte 'boost' value. It then creates a special Token type for a custom filte=
r
which sets the payload on the token. Another reserved character '\t' is use=
d
to set a position increment value. Since we often boost multiple tokens in
the stream, the payload 'boost' value is reapplied to subsequent tokens
until a 'boost' value of '0' is encountered, which disables payloads.

This is a bit messy and I agree that it would be nice to come up with a nic=
e
API for this.

Peter

On Fri, Dec 26, 2008 at 8:22 PM, Karl Wettin <karl.wettin@gmail.com> wrote:

> I would very much like to hear how people use payloads.
>
> Personally I use them for weight only. And I use them a lot, almost in al=
l
> applications. I factor the weight of synonyms, stems, dediacritization an=
d
> what not. I create huge indices that contains lots tokens at the same
> position but with different weights. I might for instance create the stre=
am
> "(1)mot=F6rhead^1", "(0)motorhead^0.7" and I'll do this at both index and
> query time, i.e. I use the payload weight to calculate both payload weigh=
t
> used by the BoostingTermQuery scorer AND to set the boost in the query at
> the same time.
>
> In order to handle this I use an interface that looks something like this=
:
>
> public interface PayloadWeightHandler {
>  public void setWeight(Token token, float weight);
>  public float getWeight(Token token);
> }
>
> In order to use this I had to patch pretty much any filter I use and pass
> down a weight factor, something like:
>
> TokenStream ts =3D analyzer.tokenStream(f, new StringReader("mot=F6rhead =
ace of
> spaces"));
> ts =3D new SynonymTokenFilter(ts, synonyms, 0.7f);
> ts =3D new StemmerFilter(ts, 0.7f);
> ts =3D new ASCIIFoldingFilter(ts, 0.5f);
>
> All these filters would, if applicable, create new synonym tokens with
> slightly less weight than the input rather than replace token content:
>
> "(1)m=F6torhead^1", "(0)motorhead^0.5", "(1)ace^1", "(1)of^1", "(1)spades=
^1",
> "(1)spad^0.7"
>
> I usually use 4 byte floats while creating the stream and then convert it
> to 8 bit floats in a final filter before adding it to the document.
>
> Is anyone else doing something similar? It would be nice to normalize thi=
s
> and perhaps come up with a reusable API for this. It would also be cool i=
f
> all the existing filters could be rewritten to handle this stuff.
>
> I find it to be extemely useful when creating indices with rather niched
> content such as song titles, names of people, street addresses, et c. For
> the last year or so I've done several (3) commercial implementations wher=
e I
> try to extend the index with incorrect typed queries but unique enough th=
at
> it does not interfere with the quality of the results. It has been very
> successful, people get great responses in great time even though they ent=
er
> an "incorrect" query.
>
> On a side note, in these implementaions I've completely replaced phrase
> queries using shingles. ShingleMatrixQuery has some built in goodies for
> calculating weight. Combined with SSD I see awesome results with very sho=
rt
> response time even in fairly large indices (10M-100M documents). I'm talk=
ing
> about 100ms-500ms for rather complex queries under heavy load.
>
>
>      karl
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_82375_11494011.1230564478678--

From java-user-return-37972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 15:50:40 2008
Return-Path: <java-user-return-37972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57873 invoked from network); 29 Dec 2008 15:50:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 15:50:39 -0000
Received: (qmail 34859 invoked by uid 500); 29 Dec 2008 15:50:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34821 invoked by uid 500); 29 Dec 2008 15:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34810 invoked by uid 99); 29 Dec 2008 15:50:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 07:50:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 15:50:23 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 9361F109F28
	for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 07:49:57 -0800 (PST)
Message-Id: <7404917B-52FA-494D-BF38-77A96E330AFE@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4958E5B9.8080603@neevtech.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Help in Arabic Analysers with Lucene on Windows
Date: Mon, 29 Dec 2008 10:49:56 -0500
References: <4958C03B.6000200@neevtech.com> <43EFED66-F704-4DC3-A038-C6173E5DB1F5@apache.org> <4958CE52.2060005@neevtech.com> <1875F57C-E47E-4B8C-9E01-1F269B0BAAE4@apache.org> <4958E5B9.8080603@neevtech.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 29, 2008, at 9:59 AM, Girish Naik wrote:

> FIELD_BODY is defined as
> public static final String FIELD_BODY =3D "AVS_FIELD_BODY";
> and its indexed as
>  ParsedDoc webdoc =3D ParsedDoc.getDoc(page);
> ...
> document.add(new Field(Constants.FIELD_BODY, webdoc.getContents(), =20
> Field.Store.NO, Field.Index.ANALYZED));
>
> -x-x-x-
> public static ParsedDoc getDoc(Page page) {
> 		try {
> 			String raw =3D page.getContentType();
> 			int semicolon =3D raw.indexOf(";");
> 			if (semicolon > -1) {
> 				raw =3D raw.substring(0, semicolon);=09
> 			}
> 			MimeType mime =3D new MimeType(raw);
> 			String contentType =3D mime.getBaseType();
> 			String classname =3D getImpl(contentType);
> 			if (classname =3D=3D null) {
> 				classname =3D =
getImpl(mime.getPrimaryType());
> 				if (classname =3D=3D null) {
> 					return null;=09
> 				}
> 			}
> 			Class webdocClass =3D Class.forName(classname);
> 			ParsedDoc webdoc =3D (ParsedDoc) =
webdocClass.newInstance();
> 			webdoc.page =3D page;
> 			webdoc.contentType =3D contentType;
> 			return webdoc;
> 		} catch (Exception e) {
> 			_log.error("Eror while parsing file: " + =
page.toURL());
> 			throw new SysException(e.getMessage());
> 		}
> -x-x-x-
>
> And Luke is not able to open the Indexed files by Lucene currently. =20=

> But on my colleague's System it opened but no arabic content was =20
> found instead some chanrecters like =D8=A7=D9=84=D8=A7=D8=B3=D8=AA=D8=B1=
=D8=A7=D8=AA=D9=8A=D8=AC  .. etc =20
> were found.

I am now pretty sure it is an encoding issue.  I'm guessing that =20
however you are getting the page, it is not in the right encoding.  =20
How do you obtain the Page object?  I'm guessing you are crawling.  =20
You need to make sure you are getting the encoding of the file and =20
opening it with that encoding.

Something like:
Reader reader =3D new InputStreamReader(new FileInputStream(file), =20
encoding);

where encoding is the encoding of the file.


>
> In my local now its giving 'Unknown format version: -8' as it was =20
> giving when my colleague tried to open and index from a Linux system =20=

> where search was working fine.

What version of Lucene are you using and what version of Luke?  This =20
usually happens, I believe, when the Luke version is older than the =20
Lucene version used to create the index.









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 16:05:38 2008
Return-Path: <java-user-return-37973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60866 invoked from network); 29 Dec 2008 16:05:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 16:05:37 -0000
Received: (qmail 44850 invoked by uid 500); 29 Dec 2008 16:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44818 invoked by uid 500); 29 Dec 2008 16:05:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44807 invoked by uid 99); 29 Dec 2008 16:05:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 08:05:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.217.12 as permitted sender)
Received: from [209.85.217.12] (HELO mail-gx0-f12.google.com) (209.85.217.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 16:05:23 +0000
Received: by gxk5 with SMTP id 5so3492060gxk.5
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 08:05:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=cxXSD5mJlbHgGa4DTs9WTqORvBjMEreC/UTCGZDNULE=;
        b=eyBUovjSnoOGBXrdu8MLOlDHlnWH+jnHqDz8jfvXSTvfEcVbTV16giWuYChsrYGoo4
         k2wjznGj9f22/0kDfr/F388Atv4LEPlTJEQWkdqnzDPzyeJvNv2A+2mRymoMmT4QMaTl
         iznQ6qzVNkk4nIwmvuUeNOqm1toKH17z4Yz9I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=GwH/qDPAMtozFmTO8iCcToMtzjvBbEdtNGjp8Nu3VuOHdhmKCs323Sa8XIiPARG3fR
         ZGXR9wkZgHS1uqwBQonq5qE8LJrsW++45Xug9k3rVbngurm0tL6gEvHnGYzoMyl6e2MU
         +WeBumajBw9TQncNUAquFQ9Vs/N6wnX+VkLWs=
Received: by 10.90.99.3 with SMTP id w3mr6595990agb.27.1230566701775;
        Mon, 29 Dec 2008 08:05:01 -0800 (PST)
Received: by 10.90.93.1 with HTTP; Mon, 29 Dec 2008 08:05:01 -0800 (PST)
Message-ID: <359a92830812290805y39920f50k63378651f859915b@mail.gmail.com>
Date: Mon, 29 Dec 2008 11:05:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Where to get login details for Luke
In-Reply-To: <245655f20812290700g1eddf82duf866bbb3a5ab21ce@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_118808_31796137.1230566701773"
References: <245655f20812290700g1eddf82duf866bbb3a5ab21ce@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_118808_31796137.1230566701773
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ummm, I don't understand the question. You don't need to login, Luke is a
stand-alone program for examining Lucene indexes. You *do* have to point
Luke at your index, there should be some choice about opening a file. I
don't
have Luke in front of me here at home, but poke around the menus and it
should be obvious.

Best
Erick

On Mon, Dec 29, 2008 at 10:00 AM, NageswaraRao M <mnrao13@gmail.com> wrote:

> Hi Guys,
>
>   Can you Please tell me where to get login details for Luke
>
> Thanks
> Nagesh
>

------=_Part_118808_31796137.1230566701773--

From java-user-return-37974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 16:08:55 2008
Return-Path: <java-user-return-37974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61836 invoked from network); 29 Dec 2008 16:08:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 16:08:55 -0000
Received: (qmail 48983 invoked by uid 500); 29 Dec 2008 16:08:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48793 invoked by uid 500); 29 Dec 2008 16:08:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48782 invoked by uid 99); 29 Dec 2008 16:08:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 08:08:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.102] (HELO web50704.mail.re2.yahoo.com) (206.190.38.102)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Dec 2008 16:08:38 +0000
Received: (qmail 32529 invoked by uid 60001); 29 Dec 2008 16:08:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=4OTZouoXoKu4elPDRGXrRJYb/9Yxq1DmIPlPMhk6eVkH9xYDQ9N4455Srxvi/ZAizSZEW2HoV4EF6r00rNNaZjkKxfJP5753aPNBjcovay4Bd0sFSXBaKsvXZPTdvshQsLnD9S0AyuEVbZF6hUpFCYUbUJLHew96Z8TfeJ4eqq4=;
X-YMail-OSG: 6MQOJDkVM1lafLuFYEgGFlFYj0Y7cvJEuCW2m37BC1KyUL7A3FXpb4Xw7BJ4rPfQva3tymwfFWiN3tUAKpo7KtzwzgyUOIn_cmOf0FR7R3cm3RvZTGVZhn8HmR.xbm2zWpcQ2tJIT3mpOIATIXfGShqYUSLiaDJQrZ3EyTva2H3ndOQe5j2JyZu12hcjgIwhW0skw4vHp9Vwr2cRFoJG2slyKBMb8gV4
Received: from [98.216.104.214] by web50704.mail.re2.yahoo.com via HTTP; Mon, 29 Dec 2008 08:08:16 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <245655f20812290700g1eddf82duf866bbb3a5ab21ce@mail.gmail.com> <359a92830812290805y39920f50k63378651f859915b@mail.gmail.com>
Date: Mon, 29 Dec 2008 08:08:16 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Re: Where to get login details for Luke
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <101100.31079.qm@web50704.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

It is just File | Open Lucene Index 
:)



----- Original Message ----
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, December 29, 2008 11:05:01 AM
Subject: Re: Where to get login details for Luke

Ummm, I don't understand the question. You don't need to login, Luke is a
stand-alone program for examining Lucene indexes. You *do* have to point
Luke at your index, there should be some choice about opening a file. I
don't
have Luke in front of me here at home, but poke around the menus and it
should be obvious.

Best
Erick

On Mon, Dec 29, 2008 at 10:00 AM, NageswaraRao M <mnrao13@gmail.com> wrote:

> Hi Guys,
>
>   Can you Please tell me where to get login details for Luke
>
> Thanks
> Nagesh
>



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 16:26:05 2008
Return-Path: <java-user-return-37975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65650 invoked from network); 29 Dec 2008 16:26:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 16:26:05 -0000
Received: (qmail 67200 invoked by uid 500); 29 Dec 2008 16:25:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67174 invoked by uid 500); 29 Dec 2008 16:25:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67163 invoked by uid 99); 29 Dec 2008 16:25:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 08:25:55 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of girish@neevtech.com does not designate 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 16:25:45 +0000
Received: by ti-out-0910.google.com with SMTP id b8so4038990tic.11
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 08:25:22 -0800 (PST)
Received: by 10.110.17.6 with SMTP id 6mr3879872tiq.57.1230567922077;
        Mon, 29 Dec 2008 08:25:22 -0800 (PST)
Received: from ?10.0.0.2? ([122.167.79.62])
        by mx.google.com with ESMTPS id d7sm10607971tib.17.2008.12.29.08.25.17
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Dec 2008 08:25:20 -0800 (PST)
Message-ID: <4958F9E1.90408@neevtech.com>
Date: Mon, 29 Dec 2008 21:55:05 +0530
From: Girish Naik <girish@neevtech.com>
Reply-To: girish@neevtech.com
Organization: Neev Information Technologies Private Limited
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1b3pre) Gecko/20081204 Thunderbird/3.0b1 ThunderBrowse/3.2.2.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Help in Arabic Analysers with Lucene on Windows
References: <4958C03B.6000200@neevtech.com> <43EFED66-F704-4DC3-A038-C6173E5DB1F5@apache.org> <4958CE52.2060005@neevtech.com> <1875F57C-E47E-4B8C-9E01-1F269B0BAAE4@apache.org> <4958E5B9.8080603@neevtech.com> <7404917B-52FA-494D-BF38-77A96E330AFE@apache.org>
In-Reply-To: <7404917B-52FA-494D-BF38-77A96E330AFE@apache.org>
Content-Type: multipart/mixed;
 boundary="------------050808090307030904080105"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------050808090307030904080105
Content-Type: multipart/alternative;
 boundary="------------010107020704000009000502"


--------------010107020704000009000502
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit

Thanks Grant  I will check this out.

BTW, as far as Lucene version is concerned I had checked out the svn of 
lucene and created a build its version says as 2.9 :)  . And Luke is of 
version 0.9.1


------------------------------------------------------------------------

Regards,

Please do not print this email unless it is absolutely necessary.
*Girish Naik*
Development Lead

*Neev Information Technologies Pvt Ltd* <http://www.neevtech.com>
Bangalore, Karnataka India

Mozilla Store <http://www.spreadfirefox.com/node&id=182416&t=260> 
*Mobile:* 91 09740091638
*Email:* girish.naik@gmail.com <mailto:girish.naik@gmail.com>
*IM:* girish.naik (Skype)
*http://www.linkedin.com/in/girishnaik*

Mozilla Store <http://www.spreadfirefox.com/node&id=182416&t=262> 	Join 
Neev Information Technologies Private Limited Group in LinkedIn 
<http://www.linkedin.com/e/gis/68693/571D4D044006>

Fools rush in where angels fear to tread

See who we know in common <http://www.linkedin.com/e/wwk/4759877/> 	Want 
a signature like this? <http://www.linkedin.com/e/sig/4759877/>


------------------------------------------------------------------------
The information contained in this electronic message and any attachments 
to this message are intended for the exclusive use of the addressee(s) 
and may contain proprietary, confidential or privileged information. If 
you are not the intended recipient, you should not disseminate, 
distribute or copy this e-mail. Please notify the sender immediately and 
destroy all copies of this message and any attachments.
*WARNING:* Computer viruses can be transmitted via email. The recipient 
should check this email and any attachments for the presence of viruses. 
The company accepts no liability for any damage caused by any virus 
transmitted by this email.
------------------------------------------------------------------------

On 12/29/2008 9:19 PM, Grant Ingersoll wrote:
>
> On Dec 29, 2008, at 9:59 AM, Girish Naik wrote:
>
>> FIELD_BODY is defined as
>> public static final String FIELD_BODY = "AVS_FIELD_BODY";
>> and its indexed as
>>  ParsedDoc webdoc = ParsedDoc.getDoc(page);
>> ...
>> document.add(new Field(Constants.FIELD_BODY, webdoc.getContents(), 
>> Field.Store.NO, Field.Index.ANALYZED));
>>
>> -x-x-x-
>> public static ParsedDoc getDoc(Page page) {
>>         try {
>>             String raw = page.getContentType();
>>             int semicolon = raw.indexOf(";");
>>             if (semicolon > -1) {
>>                 raw = raw.substring(0, semicolon);
>>             }
>>             MimeType mime = new MimeType(raw);
>>             String contentType = mime.getBaseType();
>>             String classname = getImpl(contentType);
>>             if (classname == null) {
>>                 classname = getImpl(mime.getPrimaryType());
>>                 if (classname == null) {
>>                     return null;
>>                 }
>>             }
>>             Class webdocClass = Class.forName(classname);
>>             ParsedDoc webdoc = (ParsedDoc) webdocClass.newInstance();
>>             webdoc.page = page;
>>             webdoc.contentType = contentType;
>>             return webdoc;
>>         } catch (Exception e) {
>>             _log.error("Eror while parsing file: " + page.toURL());
>>             throw new SysException(e.getMessage());
>>         }
>> -x-x-x-
>>
>> And Luke is not able to open the Indexed files by Lucene currently. 
>> But on my colleague's System it opened but no arabic content was 
>> found instead some chanrecters like   .. etc were 
>> found.
>
> I am now pretty sure it is an encoding issue.  I'm guessing that 
> however you are getting the page, it is not in the right encoding.  
> How do you obtain the Page object?  I'm guessing you are crawling.  
> You need to make sure you are getting the encoding of the file and 
> opening it with that encoding.
>
> Something like:
> Reader reader = new InputStreamReader(new FileInputStream(file), 
> encoding);
>
> where encoding is the encoding of the file.
>
>
>>
>> In my local now its giving 'Unknown format version: -8' as it was 
>> giving when my colleague tried to open and index from a Linux system 
>> where search was working fine.
>
> What version of Lucene are you using and what version of Luke?  This 
> usually happens, I believe, when the Luke version is older than the 
> Lucene version used to create the index.
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--------------010107020704000009000502
Content-Type: multipart/related;
 boundary="------------020509060904030203060607"


--------------020509060904030203060607
Content-Type: text/html; charset=windows-1252
Content-Transfer-Encoding: 8bit

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=windows-1252"
 http-equiv="Content-Type">
</head>
<body bgcolor="#ffffff" text="#000000">
Thanks Grant I will check this out.<br>
<br>
BTW, as far as Lucene version is concerned I had checked out the svn of
lucene and created a build its version says as 2.9 :) . And Luke is of
version 0.9.1 <br>
<br>
<div class="moz-signature"><br>
<hr>
<br>
Regards,
<br>
<br>
<table border="0" cellpadding="0" cellspacing="0" width="600">
  <tbody>
    <tr>
      <td
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; color: rgb(0, 0, 119);"
 colspan="2" align="center"><marquee>Please do not print this email
unless it is absolutely necessary.</marquee></td>
    </tr>
    <tr>
      <td colspan="2"
 style="border-top: 1px solid rgb(204, 204, 204); padding: 10px;">
      <table
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 11px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;"
 border="0" cellpadding="0" cellspacing="0" width="100%">
        <tbody>
          <tr style="line-height: 15px;" valign="top">
            <td width="40%"> <b style="font-size: 14px;">Girish Naik</b><br>
            <span style="font-size: 12px;">Development Lead</span><br>
            <br>
            <a target="nw" href="http://www.neevtech.com"><b>Neev
Information Technologies Pvt Ltd</b></a><br>
Bangalore, Karnataka India<br>
            <br>
            <a href="http://www.spreadfirefox.com/node&amp;id=182416&amp;t=260"><img
 alt="Mozilla Store" title="Mozilla Store"
 src="cid:part1.04050003.08070407@neevtech.com" border="0"></a> </td>
            <td style="padding-left: 10px;" nowrap="nowrap" width="40%">
            <b style="color: rgb(153, 153, 153);">Mobile:</b> 91
09740091638<br>
            <b style="color: rgb(153, 153, 153);">Email:</b> <a
 target="nw" href="mailto:girish.naik@gmail.com"
 style="text-decoration: none; color: rgb(0, 0, 0);">girish.naik@gmail.com</a><br>
            <b style="color: rgb(153, 153, 153);">IM:</b> girish.naik
(Skype)<br>
            <div style="margin-top: 5px;"> <b><a target="nw"
 href="http://www.linkedin.com/in/girishnaik">http://www.linkedin.com/in/girishnaik</a></b>
            </div>
            <br>
            <a href="http://www.spreadfirefox.com/node&amp;id=182416&amp;t=262"><img
 alt="Mozilla Store" title="Mozilla Store"
 src="cid:part2.00090801.00070402@neevtech.com" border="0"></a> </td>
            <td style="padding: 0pt 15px;" width="20%"> <a target="nw"
 href="http://www.linkedin.com/e/gis/68693/571D4D044006"><img
 src="cid:part3.09040101.03040309@neevtech.com"
 alt=" Join Neev Information Technologies Private Limited Group in LinkedIn"
 border="0"></a><br>
            <br>
Fools rush in where angels fear to tread </td>
          </tr>
        </tbody>
      </table>
      </td>
    </tr>
    <tr
 style="font-family: arial,sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 10px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none;">
      <td
 style="border-top: 1px solid rgb(204, 204, 204); padding-top: 2px; color: rgb(153, 153, 153);"><a
 target="nw" href="http://www.linkedin.com/e/wwk/4759877/">See who we
know in common</a></td>
      <td
 style="border-top: 1px solid rgb(204, 204, 204); padding-top: 2px;"
 align="right"><a target="nw"
 href="http://www.linkedin.com/e/sig/4759877/">Want a signature like
this?</a></td>
    </tr>
  </tbody>
</table>
<br>
<hr>
The information contained in this electronic message and any
attachments to this message are intended for the exclusive use of the
addressee(s) and may contain proprietary, confidential or privileged
information. If you are not the intended recipient, you should not
disseminate, distribute or copy this e-mail. Please notify the sender
immediately and destroy all copies of this message and any attachments.<br>
<b>WARNING:</b> Computer viruses can be transmitted via email. The
recipient should check this email and any attachments for the presence
of viruses. The company accepts no liability for any damage caused by
any virus transmitted by this email.
<hr></div>
<br>
On 12/29/2008 9:19 PM, Grant Ingersoll wrote:
<blockquote cite="mid:7404917B-52FA-494D-BF38-77A96E330AFE@apache.org"
 type="cite"><br>
On Dec 29, 2008, at 9:59 AM, Girish Naik wrote:
  <br>
  <br>
  <blockquote type="cite">FIELD_BODY is defined as
    <br>
public static final String FIELD_BODY = "AVS_FIELD_BODY";
    <br>
and its indexed as
    <br>
ParsedDoc webdoc = ParsedDoc.getDoc(page);
    <br>
...
    <br>
document.add(new Field(Constants.FIELD_BODY, webdoc.getContents(),
Field.Store.NO, Field.Index.ANALYZED));
    <br>
    <br>
-x-x-x-
    <br>
public static ParsedDoc getDoc(Page page) {
    <br>
 try {
    <br>
 String raw = page.getContentType();
    <br>
 int semicolon = raw.indexOf(";");
    <br>
 if (semicolon &gt; -1) {
    <br>
 raw = raw.substring(0, semicolon); <br>
 }
    <br>
 MimeType mime = new MimeType(raw);
    <br>
 String contentType = mime.getBaseType();
    <br>
 String classname = getImpl(contentType);
    <br>
 if (classname == null) {
    <br>
 classname = getImpl(mime.getPrimaryType());
    <br>
 if (classname == null) {
    <br>
 return null; <br>
 }
    <br>
 }
    <br>
 Class webdocClass = Class.forName(classname);
    <br>
 ParsedDoc webdoc = (ParsedDoc) webdocClass.newInstance();
    <br>
 webdoc.page = page;
    <br>
 webdoc.contentType = contentType;
    <br>
 return webdoc;
    <br>
 } catch (Exception e) {
    <br>
 _log.error("Eror while parsing file: " + page.toURL());
    <br>
 throw new SysException(e.getMessage());
    <br>
 }
    <br>
-x-x-x-
    <br>
    <br>
And Luke is not able to open the Indexed files by Lucene currently. But
on my colleague's System it opened but no arabic content was found
instead some chanrecters like  .. etc were found.
    <br>
  </blockquote>
  <br>
I am now pretty sure it is an encoding issue. I'm guessing that
however you are getting the page, it is not in the right encoding. How
do you obtain the Page object? I'm guessing you are crawling. You
need to make sure you are getting the encoding of the file and opening
it with that encoding.
  <br>
  <br>
Something like:
  <br>
Reader reader = new InputStreamReader(new FileInputStream(file),
encoding);
  <br>
  <br>
where encoding is the encoding of the file.
  <br>
  <br>
  <br>
  <blockquote type="cite"><br>
In my local now its giving 'Unknown format version: -8' as it was
giving when my colleague tried to open and index from a Linux system
where search was working fine.
    <br>
  </blockquote>
  <br>
What version of Lucene are you using and what version of Luke? This
usually happens, I believe, when the Luke version is older than the
Lucene version used to create the index.
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
---------------------------------------------------------------------
  <br>
To unsubscribe, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-unsubscribe@lucene.apache.org">java-user-unsubscribe@lucene.apache.org</a>
  <br>
For additional commands, e-mail: <a class="moz-txt-link-abbreviated" href="mailto:java-user-help@lucene.apache.org">java-user-help@lucene.apache.org</a>
  <br>
  <br>
  <br>
</blockquote>
</body>
</html>

--------------020509060904030203060607
Content-Type: image/png;
 name="banner-5b.png"
Content-Transfer-Encoding: base64
Content-ID: <part1.04050003.08070407@neevtech.com>
Content-Disposition: attachment;
 filename="banner-5b.png"

iVBORw0KGgoAAAANSUhEUgAAAFAAAAAPCAYAAABzyUiPAAAAGXRFWHRTb2Z0d2FyZQBBZG9i
ZSBJbWFnZVJlYWR5ccllPAAACPBJREFUeNrsV31sVWcZ/53Pe+53P2hpaQtspayUlfE1Vkqy
DbMAjYnMDcaWkelgTM0SyeZiDMb5kaAxGjONyeIYmwEUUHEiITKCHwxGBwPnVqrF8t1yKbS9
7f0+93z6vO+5t71lTiHb/jGem/ac9z3ved7n4/c8z++V634yCLrcaFk5/n/d/JUYHWE3QWbO
e3pBGIoi/E8Z6LoOHNviz6IkQxDEj1W+aYbx8qmUyxwIWZaxo8f95K1ybLj0R+YholIUc2Qg
GRbVZCTz3juBGSspfP6jXOtnuagPAS8cTkLUQgQV38dqyuN3cNdBLp18slmA9An5zic5aK8V
0B834Se0L7ktiHjGxJbOIaxZWI3pZSreuZTC4QspaKEoJFm6SaS5HG08nwSBj9n10AwRjmXj
kfosgmUBKD7v/Ue9LBL/8zPjYJOLSpB4GAQOgSlEPxQU4dC/lY0LBhUNKRp2R4WAubUKpkaA
HScH0TxZQ5Y2zOh5vD9goLkqiGTWoLEB1+dCdCwCrM1liaIIUVY+kIbs3cyIhXQuj3PDedxZ
40c8ayKWtAnhFciSCrZlwMrnYDgiJFW95VQeCw79mB8cdzxwJQ50INsSdlMazyq3cU+VDp/o
oC9hQXdkQoNS9AQZI/GaAh5tr864jsOdJNC7xqgL28wXUhXImi5iaeBdSyVDXHT3JxDLiEib
zNEC0paI4zEHj7QCBo1TpoBqxcXS6YAmCbgct7CvJwvVH4Ks+ccdQAY8OANoq9NowILhIKB6
7wbTJioCEv/b/NmZeP29YRzuy0IJiNwRDteNbJEkLse2TG4Lk81RSnf2rsLnwAcDQymT9JJw
sJ8CIKljtk9AYGGMXStpAVT+nKG69PuuEbTW+RAk5XaeiuNMXILiD3MnLpvmYFalgPNDJvaT
ka11IXxhfpgl7IQofvdgDBvbyriMaj/w07dGYNkCrhFSknkRed0zfDjjwrRFPL3Aj+ukdDrv
YFlzFHrewq9OJ6BFKJiKJ5shua1Oxs6TQzjUM4olTZVYMy/K9WWOeHR+OTrPJXCBkDmcl5Cg
fRZVu7h3mkj7OvhzbwY62fmtB8pImkI26MgYDk+2194Z5bY8szjMg8P8sO1kHG/06hD8EV5P
JyCQec8uQPNHx008d4+Cty+muAGPLZw05ohNy2qxbudFDCZFPNMWwbJGHwaSJqY1hSglfTh6
IcO/+d6hAQxkHPx45RRcTeRx9FIOJ/Yk8LvHyuGTRcRzJkZpXUVQprsLVXWRNlxyjgQ/Rf1q
ysJrJ+LUdBxYFNjP3FWJ7ad6kU7nKHgKR4A+4tA3IpbOjCJHyh/sTaPzioEsITrrKuRA4B9D
BvZ0ZaCGK7G8UcUXF2pcv0q/gEVT/di0P4ZUPoyasIzbKn3oHdQxrz6ISyMGOmYFyclJdJ5P
YubkAL60pApbT5xDhjJJlFUUEcdD75TUq61d3v3IBR3b383w58/98hJWbbuCfkrpORSZoGST
81R8bf8AHtx+Fc++kUZTlYYcRXDj3hjOpSR8delkXCHnfnnfILJyOVIIcFnd1/JIUjp0X7e5
c8i/GNFdnBm2oVNTPhUzsbcnj80dNdj86SlkkPddbUTBCDWdeM6h9UBAcvHcgQRO9BtYPbcS
u9Y2YH6NjD4y3na9mp23BCQtGQlTxuNzfPjFX0ex4pWLeGpvgpAPrGwtx6/fG+VrO352Fp+n
IL/4dhadMRFhHwWnKYJNy+uxam4FXzO7pog8d8xncmmhLBS6sftY1xIkdA2LuEzQryX+cb/q
1bc9XSlIwXIcu+b36h2lZV1UxfP3TcKBnjS+/cc4RDUAUREREQ1SWsFgxib64uCuyTI5kJ4p
PRTZwYJaGUfOes1rw8IAXjwyjFcplda3VWFjewSM8SR0qtXUzekfXlqh0vscvn7gOqcpq1o0
fOP+SlxLXcMVQnix/sYpE1Y0CgirAg5R2g4ZGgWBUJZ0qbEIPGjsGsiKkEMatnTJaKn0Ssqn
XjqPqRV+nrKzq0R09luQCL0o6fzeSmccgW21nnMiPsbVvPmoJtEYaG9Q0T5dQyKje/M+KqbU
5WZF83x8ecTEd5ZX0z2P/aeHcHe9iqMbJnFjv38fkyFi3aIKNJa5CFKjCBGdaYwC0wKevJqg
gEmaw9eZBE8fNRHTUwczCeFZ6tBZSsGcAQqGi4dbw3hibhB6Nkf10zOI1dk3L3jyWqjTG4aO
i0M5PmaocmwTYUFHfVhA94A+BpKGMLPF5AwkaXqVbcntIRzrM9CfEfD8vWXYcHcYjqmT8+wx
nwl0lHPXz1Hxm7NB7qTOteP86wd/GcKj88rwwzcTFAkfvrIk5M3/6To6ZkfREFW4ErNrNOz+
WxJJMoxtdON1jGpjO/G+m7nYWtYF26d7qGaoS+pESzQRD7wSQ1oqJ1T78ewCB2HJxJrWwPi3
F7PYuG+I1kRxfH2E7PGc89C2GNlRTp3ez9c0lClc7gsHh/HbJ6bwNW/RvuteH4UUquCd9puL
Xay4XcQusqujOcTTtm/UxJNsTaAMq5stbH3f8By4rlXBnnOec1rKLVLMIJSZ6B52uDBGTxgq
WiYRKknpY5fpQyqkG+b7aE7gSm05pUP0BbG4gaLHaYEHnSSBoS/lcKWjqtewElTzopqAlmqZ
K8XQxBzUEJVIdh5/HxbQ0aRxKnTsEkVFEjGVvu8eJH0UzTupMK5JXLE+6KBtCid82H1aL5QM
jdDmYvUMtsbE7i4daVfDU/NULK4TcPqqTvpmkXZobgEFgFD5h39mcCVLtvoCZK/M5a+7k/Qm
+aepbh/oJSpDVI+lM9v/4aYcXu0yPQeubXaoDqkTiPA4CS4h0iUkWSByy8ZFsitwfihxnvXv
iDSXwb93J5wauCxOUnmQvXeit57xS2/s8TeWXkVCO4Hs8iOiy2Uwnlp8z/WwCzKkQrWyC0fG
Atfj+9AaJpsRdmbHxPO0zfVgcpmMIg81qXTt6BF5ExHogXa3PiSp7A872Bbu4lgpHZ/7AJ8f
986EudKm9Z/WO7dwdvhv+golJ1j3Bj3Y841+YPNSiYxSuyH8S4ABAL4/ROxP2qcQAAAAAElF
TkSuQmCC
--------------020509060904030203060607
Content-Type: image/png;
 name="banner-2c.png"
Content-Transfer-Encoding: base64
Content-ID: <part2.00090801.00070402@neevtech.com>
Content-Disposition: attachment;
 filename="banner-2c.png"

iVBORw0KGgoAAAANSUhEUgAAALQAAAA8CAYAAADPLpCHAAAAGXRFWHRTb2Z0d2FyZQBBZG9i
ZSBJbWFnZVJlYWR5ccllPAAAQSxJREFUeNrsfQeYXFeV5nmhUldVV3VWbIWWZEmWE8LI2MYJ
MAY8YIMNDMkmD2OCbcLusoAJw3w7RDMDs4DBxJkhmJxNcMAR2zgrWalbaknd6lSdKr337p5z
bnjvVVW37cGzO/Mtz1+51dVVL/733P/8J1zr3nvvhUW2Ar5ejq8hfB1r8fdZfO2Cv2x/2f4f
bVu3bo397j7O53/nuu7WVCoJvu+bNy38j7YgCKBaqy303e34Krd4/5gaII0bHeCBBfa1H18T
Ld4v4WvPXx7rX7YnCuitxUI79HR18C8C/yMwO44T+5Bl2+AJfF/4EAgBgV+FWrWyWVgpEGIO
hD8BltOJ386A7/lQrx4A4T0MpWoWUXoGFNMJyLg2WPUy7l3QiAH8DQILj4b7K9c8HlAuvi8C
2t8R/GsVfKsP6l5uoXN/GF+tRttRfA23eL+mvtNq26MGT+M2oQbbX7b/IoCGtrYMAoyQJAyo
fbTMFr5n48u3HHACBBuCGpENfnknBOVvI+hXQSL3MgRfXhpfK49gx4GQ8EGk1uPf10Kn5UKv
yMJw2YajdQsyGR/6EZ95/IyjBomFg8Sm2UCUoT5/B0DlG/LE0q8FN7kBnEQODs/b8EgpCSUF
3zQiPxlUTvB90XQ9jqiDiy/aUpFxSQMnixNK2vLw+zYk6W+CrhaRjrOQ7wfqk+E+6T7U695C
t+4BNes0bgvRt7Ka1VptuxS9e6Kz3V8A3WIT09PTkEmvVU+cwAVsgYUIGMyISrbKBGo2rMEs
BLU7wap8D0TiaWipX4wYb8cv9/B3eFwg6MFGKw4psG0HclCH4xDEIxUXxqsWjFWJzjiQdfEY
Cg8CZqA++0Pw524AJ30quLm34D568K8OHJh1YO+My2B2LCs0t3YaeCTgVo/BKgMJPN0UnsN8
5N20I6DD/z7M1cfgqHsZDBQd6EoFEtQIXKJX8mQIwGrHeP6RQ9L0QUMPrxuIip1MAzx+RwV4
nrfVY/pmgf6ythdR+mbxXCUHT61Wx13HBycbFtzPIgPqvidJ3xbzhxaijwvNdv85LTRZoISD
VphuZuTmM3+mJ4B/J0vqWvKhCwQn1H4vP5A8D593jh+NwM9a+HADfAACn3aA1s5JxGnLErTO
S3AyGK85MDbvwRi+tyxVxwHzCIjqz8Gv3MNg9pJXgF9NI4Wpw+EqwIOlNPgi/rA1gPUh9E/9
PoFZgzgVDEEuIZ9VzrsNhLMCxpD67J8tQpvro8WuS2BFZikCLVhuDHj0J8az+kg6leIZK7xh
Pv5K9ympeVrsnmq/hA2Hep/um0BjYUMAMeTTWIqNpPhGz6Zcrmy1bEudjy8HJe7Jq3tbAx8p
HI06YclroSPgd+r1enh8+snnJHigRW+x4IvFwYnP0/N8eJL+0EL0bTF/aCH6OKwGVWgIFlE5
RK1WhZNP3CIvIGJlANAqiCnwqo/gcylCIr0eLzshQUO0IDgEbuYC3Hs33yi6aEE30UPeG3g4
CFwETgrSyQSC3uZd6gdEVufg6DiUZ2Zayy6FApRK8n7M4IDZaQ9AMYGgsxKxz2krXA0sA2Da
6Hfaep0DkK/9EgG7FypiAET2HIWG5TAuJC9flcVBRoPK8vkckdWHllIBUoORZ67AkwDSANWg
5VnN5/cI1IECvgauseR6f/g7/U0aggbgEtVb4IGRL0PA9dVsQsZGPjOcRfH+oxmRp+PV8HwD
NalIMNP9t20JZHomFj4ji30ZGlT0t9D2Cb8OdcQGfcBxXDmYEcP6XGmslMtlNSujwUumwHXl
86lUKnx+ElPCDFAWGKo13qcQgZmnyErUJkb4HISbAmt6BKzaPOInicYN5/e2riduodsyGXUP
6VHgtF95DG8Ggtjdwj/JGjPHrA7g3VslP4t/850z8eQ85MAVmJicgtnZObPPjo4OvDgLjh0e
hlwuC50dRQa2cGy23NXyrAZzSxOEYBb6b3l/Vqz3HoNZvw3K6V4D6u50EKMS0EAt8uIuKNR+
AK5zCIT9Uhjzz4NKrROKyYDZRHcigCx+rg1pT0W4kLV8frA82xirql1kK8oDFkCadG6ZKDCY
QwtM++E3yeILuU+ympalwGdArS5bhLMlGPsaB7XVMGP5wlKWXs0mlvyMpDR4bUQZ9T55/3JA
0bkFwsaB4SjwB7z/Bhal/mbxuBR8jACSCGKiZzZ+PpFOmQFBipmczell87Xb6jcI2LLhgBEM
cNuW1Modwll/6giIMy8Da343TuO7wdn3R7D33ozUthA6LZf/cnFAp9Jpvqh6+X4JYL47gzgM
tkS8LASzvxfmy7txAGyAkakToDQ7aMCrwGyewOTkpL7bFv5NkK+VzaC1RhBV6jbS62rTTBHT
EfeW4dkDGbOPojUvXK8C014XuAkJ6BLuh6xyI5j5mpBipGoPIuXZBgf8/wEV6CTK3rQVkwL5
NDInvKkBDhQHZyXDo/lBKpDpBxz5G59x5MFb+F2hvkP3c/ruW+Vsc9qzGI5ktT2/xsDSDz4I
fDUWbAXqkO9FjtTaWisrri22tvo0uxiss9/jhQwBHXbGkxs9b1sOqui18XgkK+7wJbNlVjOP
lg0sZVm1I80zMJ5L0LCfGI/RM18gr9Xm+yeHq1i1Faypn4F129fBmhgG0bkcqpUSZJ4sh86m
LAlm5LB88zKvwAtBKoEgCOw8WlQEbuIMts6TUx0wPLUxvBcKvLNWGnKiIqKApE2B0irPzwl8
xY7b3d0DY2PHhP781+6bjv2dfr98a7vZR84OxLLqQTgMKxHUaebKdd+C2bqF/DgObGH1wnTq
MpjF6Qu9WUhHxstUzWYrXQvkzcwmJICqSJnSdiOPjnPamHdoKQseKAvM8JIWujo8BLvefCl0
Pu/F0HH62dKi0cTAYJaOpZCiJU/78rnLB2tFznUxDs18mUCnAGST/0LTP5EO/BpdXhCjvo6k
GUwtQNpx2gf+oo8j1DAikNOgC5iX1/AcnYZjC0XL/IXPjxzngJz4gGcPKUZpp1vTr8CoT5Dv
YiA7D/0MvHPeImfa0X0x6/x4gGaFY/2KO0HM/15aYR7UvQRzPKE5POmQ4w6NnYKOQzpqiSNg
HDGfO2OZlMtuP5wgMMbAH90IzLcPVeELd03Byo40vGflbbA0OQPnFffBjnIfvHXPC3G/EBsY
ZKlBgdpCsJJ0x1banwjvbbIDalY6dFsUBakQsBXo6d9dqeaHUUEUpO2gGdQxw2gZ9UPIpxEe
yJLWrnJwENz2IvjTU5Ir0ycIOCDVE6FsrsUWVBjt3zhj0cG0AJgXwrrctxcOOnz8ggeOlGEl
ZaAZw5KgjNCbZuYexAYw02H9HZA+A1lkx5HXra0znx8PCgS1sMzt1LOXsRMRh9tL5sHdehHU
j26H1P0/hWoqvSBwF7TQU1NToWKh+TFU0RG8j50+4spknYdGe9D8pyOXFVrVVy95GP5t8y5Y
kxpHMITy0sVTr8TPhBa2FTbO6E+JL9wFcF7fCJyfegx6XCmybcqMoCWVg+E7D80sCOqeNAmD
D0DBQ65sS668y79kQatBQNbbjOfAkgz6APgMamxtXNanQxyJiHhmyylXCwqMChEBoKNlDDmV
ohOVPf4kKDzzHIMXxyJt3zGcmgGllBMDzkburD/bgnTYlr2wdRRyRrCM5ffNIyBA2o5gPszU
YeFJIHRcmadAk6QY+6wQTRYa1PANlGPIgOagnc3vWYH8K983fM9bsw2ciz6KD/094G5+Loh0
M4deFNBdXV2GHzOwk+eBV/5VCHIE9KGRtej81Q2Yo/Tgga2fb44CeG0MzC+t/xE8977XxcDY
eN81NXl16geQt2toIV0zKGig/GxiHQNbHy8K6kzwIHR5t0LBvouvsBScBnPJLVDEGxQFrt7a
k8SVA6YoSZyTl2fqMI+Hsu7+FUze+DMoH9oDhWecA22rB2D0e18HBy3suk9d3/zAFd+VNyS8
LLbMQ3uhho5w6Y6b4ozFWOS6+t1tyYkbZwV5HCv05ejhB3HnUFvE0JAG8qy0BVZ0w4qwX0H0
g9SOoDVV0O8zJ3bsCMWQg46oDf0eBFaMczsRDm0pKBtHkJ1g7XQ77DSzBCzk4GDqRpY+0w7+
Be8CGEHHsDTCYLbqpScG6Ew6KcFsIhUSyH59AqqiAGPTiZZgziDvvGnLF1ruk8D8yeGz4LK+
e+E3J321EdQxx4/29emBXxrLHN3evfxWfr33wIUwl1oGdxwWrPtrUKe8tJiZ3QaTxTMg6XYg
FxyAMlpAAmujFEEAJzATPUmlBGRsedOnPv3fYPTr/ww9l1zGYK4dPgTD//gxeR34XhOY2dpZ
DYCTFrw+jLPGVz4PReTM47/+CVQPHYC5Rx+E0p03Q3L5avBnpmD9p76keHKgHqQd5s20oDia
V4PRrK3YOUWBLEArCZIqiAjYbFuqKGzrbVvRG0sRFGG+Zaw7aB1cqTBaHmYrK2IBIJJoE/gf
7SnqEPJgC0DZ58DQqkaJUh+LBqCz505IfPWNzKHrz347BBvOAnv3reAgBYFCHwN8cacwNRiX
fuoyuERgPjZ/IdRCzmzAvKZtEn646V8XjeQQmDW4/23zDfC+Hc/G73Y0fY4AT9vvp9Yyd261
fXz1z+DiHa8EL5WH8aADbtk/B2evkaC2ggLS/BzM5Jei5y4dlxp6H+QkkiWOhcjo94TUrUm/
rv3gOgbzqvd/HFKXvtXQjSWvuAx2vP4lkOlf3UxZDu6HYG4WahPj0H7aWUZHpm3+wB6oDR9A
636AwUybhxya+LQ3XYK2TScZjmtp58uKP1TbOF/KYpkBEyg1Ij7R6fe1RQwgjPowteHp3GYL
7ft1cOgeRQNBSu6zYoKEiJyb1cKCi9hAoXiD7STUNdlmkLHDSQMyUIPAD0KtW0CEs+NA3HMH
TqF9YE0ekt9dc6r8ueoU8FefwlKe+40rHjewInLtN8LS9D0wXwsdpJkgAfPll4JX3/DvAnN0
+5fRk+BVvQ/yv8nR+1XwXDhybApOajvI7xPFMNqx7S26LwL1/vkOOHNDDzxnjQMDBWHObzDV
D/lcIaZJS0uN7q3LtoOTngzVGn0UHn35+TDwyeug9vQLIBrQJGBPfe1aKKClzW46WYafZ0qw
75qr2OK67e2QWrkGafx+WPbGK6HjuS/ipx/MlvjvtBFlKd1xM3Sc/2Lofv5F4JUmoV6agp6X
vkY5ZnGgEKSqw4MIfhwMh+VD7X3pqxlh9Fniy9OP3If7kVNvxxnnKEC5UJ+ahOmH7+NjsEx4
+jng5PIc5Br+yud4xkmtWA3dL3kVLH/D2+S0bicZsMPXXcszSO+ll0HXBRfjwJuEw/TeXbfi
d1ZB1/NejINzEHwvfDZ9L3st2LkcnzMNEg+dkHQmA4lkxkiIerDxAKGosfCNVXfH9ktFI9fN
Fp0H5YH7mWrQ+zAzDkFPP+cEyQQ5GYRxHvolf/+RzObFZbuRis0jywtWyOyZKpLx+pI/G8y0
kWqht59PHIcU4lskoJjtg0MXwOv67mEn8PE2OvY5D78ebtt9jPNGxro92LYiKVL5IqyaGYJq
kINk10rwVbi6ppKWaKxWfMcAnax3FakBgW1u6wvQaAexPJA0fn3J699hKAY5RvSQ6cEufcM7
ILV8JYJ3BkoP3gv7P3Q1Ptw8gug8cPIFdgIJsHOPPgDjv/oRrH3vR3EAFDhqFujUXA5m2DGd
lv6jzw99+sNy4kQAMqAjctrQpz7MA4YAWzz9LLbzczgr0HdmH3mAFRVmy8j9+6/+IHQ85wXs
D+ROOwPE9AyMfO3zsPyNb4+p2nPbH+R97n/0auh+3otwHyUcjN/gmYWuYfrOW8xn6T06L6Jl
q97/90pHtwzXbqRAjc4hDUz6z77piyA2nQtiyQbwu1bjrIF0pX+LNNp2AmwEdK3mgZtwQIeg
6H7Vjz+fdXF4bLAloFmyW1o4hKNfymwB/hwrtwbz+V2DPPU/2S1KI4gP640oxgm5o096nzef
cD2cfN8VDOrb0GeYZZ1a3q9UfVbsnaqjX5Awdq8a4ZEVBDjpzxQImBkcgsRr/xYI420uOYuW
Ujri/hlNkTW0nIe/8o9w3Je+B4XTzjY5DvlnIFDm5uDoVz+HQD63pcRGlrPzjPOUyhdKdEb+
I8qigE4zwtqOf4KRb3/F/F0YJcXiwVJSAPM9AfOH9vIsQwDue9llbFF5ICF/pxmCZ4SLXwnt
55wPD56zhQFpOYlYvIOsOr2fPf5kJi/plf2w5kOfxkHyETNAei99LeS3PQvqI0dh6BMfgGM3
fB2WveEKSC5dYWgShcabfNzItcaEwK0XgbX/HrB33ATuuW8B0bcewZ6SwKePk/Um7s4DwGYH
krIxGfgqXO4uJNnl1h1hfkWUo1Q+Heq1lU8ZmOV8PwdW9zGo9MzhTNAmp6z0PDz72AEQYz1o
IrJPepfEyf96+yU66GLOl4I7rqghiLMmryOa30FgJutM+Em159huEA0hMNuijlRDydiKDlCw
YW7HA1AZOsCaMgVKCs9EGrL5JLZs9JMcPQKZVxqHZEeP+V556EBL7VrrrjqsDiqHgtCV3XwK
5I5/GniTY2x1ia+TRdRKHh2z64KLGHC0kQNKYF7+lndB3yWvkcEqtLJdSHH2XXM1W96uF7+M
geEpcELk+LRjrZfTLKJD2734fRoQXqndUCq/XmFDsLxahvmdjzZbR0s6mzrcTWDWdCJUhFQE
dN2ZIH7+95BKFyBA8JoAEzu/OFgzBXCCUDK1546B9didINY/0zB6d0HJTifz1KoI6o0t1Yw/
B8zVTQfgzT96Fzw4MhD70/nr74K3nX4D9O/vfdKg7k4YXTrmteyeaQO6pEIinuNBXLoj4UPC
QmohKP8aZ6LpWUjt2gGJMy5AMIf8sHrXb+EhBK5JkkIAE2jo1Y7/zhy3hafc3KlnQnnHQ+DP
TnM00C12x5OmCoWYltwoyVlWND8kiFGQXrS2h7/8WTj0pWth4CPXGmeU+DVxWjfXLtMLbvwx
n1PfJa82Q4XAQc4nfY4GBVlSd9mKmK4cnYa080rXZykRXaeXeziDdzz7+Xh6dcn50RB0Xfxy
6FHWmLUdW8QDMpycBVKq43wNrXVboSM4eB+kRvexkhGks8ZBNsNdZkvJ89GpBdUZ5fR1ccKe
u6BkFxXqvQchcE8Se0uWAfPjKRCLgfm9R86CG299L7zp6T+Cj17wv9ky3zu1BB47shauvfXV
cONjp8FPLnv3kwb1h469uslATMzVoLfdhmI2xUGDqFxX8aUOS5aXlI6Kn4EUe6n3wJTnMMgp
QYm3bRcwtZi48Wcwv+NB6H/XNXD021/HqXgVrPvEdfJRCcpxgHimhSWBaysAu4WOWPg6iMhw
llKEgwi9kXiXDz9R6ORpnrnsu68BF30EAncVAU20hLbxG3/CVrcdKZCtkBI0WmCQEcv80uVs
hSnQE82t8HB2ofdpPzmkHI2UiSgHZUXaHBq3kVYIE5jRGjdxaOK6Rg+PJD9REprgdForFmm0
S0eRM5/CSgZRDZOQpZw/ywnkQNAVTW14L1dtleBXltt+QpJd5VtgZ++AS889mZWErWu6oS2V
gI8cPGdRgJFOfMWRN8feu9tuZ8DSdvLAQ/C5Oy6BbPdBOHvdPfDGZ30HTuqT2vcHfvVWpiTR
jQYQqSPkANK/46Fpl0PqbAVzDBoxMlOD+WQW2rJpDnlLEFtNwZWelA8dKZUfve1cmPvdTyFd
m2LLTWDnKhZ85U9/Lkt2NA0TDdDAkPKXzXkNgsPJpDBMwcj3vhnKXOqBlhVN0cpD1DoTSAKT
fxHXtCU9F9D38tdBauVqGP3u1xl4ZI2XvfGdkN14ojRYh+Szy/SvaQ7OqH3S8XNPx2kanWSy
5My/VYorKzG4b/05iOdZGScQHPmm47qxkjzKtaa86rpXjUUstaWWGngQglnoJCibnUHv4o9A
MHDqAmF9O5auRhw96B1ghzGMPrbY2ttCq5tKpljqmd3/Gxg9vB8++JLNcN/+MejKpzhSRwBr
FREk0N04vqoJdG+5+W/436SMXPGdDxpw6+0ZK2VZH1ER4tfR7Z+OnAZ3+Nv4uFfvfT4fQx//
XSOv55804NasXAqPDk/DDJV8pQqQcmegy9kF66ybYZX/ff65PFWG5W0+9CbrDNplGR+Oa/dh
4DWv4Qc5/56/hu60gJxT5xwOelEFzfivfxxyb7SKZK1Kd94U4b4SpEe/+nk48OGr4Qg6jdFc
DNKjNfAC7dgFKs9aBGGAgjRYLoqIO6TEnWlAEfUguZAASY6bTlgjS02fISeQdORA5t0pIE7C
CIKVvmOjI0UDkCwwXe/R736NaQn9HFGApoETjbrrMUafn9l+v5TiwIlZcJLqypVyLN8kpnA0
5Xeb6YqdQO0Ixv8owhzzBgncUBaxCIfOW4fCnOikA51t8+C31WBo71ehb/Wb4EsX98J9Rzw4
OGbBJw6eafRkrSmTY9Zqm1HVGtoKw3wHOmRluGXPqWyhaXvn874C1917kZIN26C/YR8nrWhH
S1xW2XEZPv51I1vx39I6f/Y1T4Obb/02LM0cge6lKcgmumFJdpwjnT4lKlHuROJUmLGLIBLH
I6WQd4escYruRnsXO1ePXf162Hf1a9nBI5WAqMLhL1/LQCH+rHVd2va++01w4i/uxgfdwQlJ
1UP7WFEgYBHwyGFLLZeDm/ZHFjE6MOjv7pIVaJ2FNnyxqFyogNg89ZJDtuMNFxttmxQWsoxk
+fJbTmEaRKC08wVY8rLLGUQE5seueh0PwNUf+LiKzAnIbNzCPJks/fRdt7CGTvyZ+P+EOkfS
o4lile64RQWDpmD2t7+GTLEHZ4J16hT9WLg7KtlpDZqpkwhiTqjkw0QpbE6S0mmk0ew+iOSd
69wRnslsK56w1QLQMsuu90icgaCV7k5X4ODEQ3Ds2BgfZ+tSVxD1IJmMQEx6MVEMsspaZSDQ
37P3aCz0TZZ5eqYTXvz0n7MVfsaqB9lSE7Bve8/L5HSJHL1cF/D7/SfD5ZFqnUkvDQfrRfjQ
8wo6eKLC5PLv3/rb0+CRHTdAefr70N1HQ2EAsrkBmMGfkHwG1IIpSKaLkHF6oQY97Mx4eHMo
BZj4skvVNIio7he8lPdHWjJpwLF7gSBlmkG8OFeAFVd9kK3wo694HvNWcvoIzAQcCs5Uhw9C
cnm/Ce8WTj+XU0hpvzQ4yLoS8Hpe8iqwrWalVrNsoXkk7eO0M3hQEW1pI+pD79tUdeJyQGXj
Z78Jez74Dj4vehHACfwExPWfvh4SxU4DDopqLrn8b2HmntvBQU5O+1uLDicFaug7dI4mLoGD
xC0UEfDAciVJdqRnW8KJ5XAnkwlIUHVJQ5KULIpoDJJpZUdHDmVCEueUmEiocgIpecq21eAW
YcZpRAJsjBSKI0eOwFknXd9kXSdn5+HYaA1mxSsgn5fNPSjF8+e7KjA2W4UliQmO1jVKZm/+
4SjceeLnQl49vZVpBgH48tO+z7w5ul393f9paMjfbfsyXOhVmyKC33xZX1Oq6vYxAWcd1wW/
vPMnsK53CyTXrILuDILWSbIE5+n88QjLquMNIvlO528QqIlmaIstpsdg7Jc/gmCmZCzp4Kc+
xGDd+OUfGPpbPbgXSnfdxhaOpnCyetnNJ+LD71IP0Q55sbKW2rqSZaXPWm1ZBqPluNKy6bRN
xWvrM9NQnxyDzMq14M1OwwPnP40t6wk3/B5ZVZEtFlGMhOsqelGCI9/+CltX+hydF9GRzMaT
OEInZMKIzIMmXf7wQXy7jgN2reG3Wt2g803gDDV1x81y3ziQaMYiZzLBTm4AtXJZ1iRqNSeR
gHSmzejbpkpFaCssiyNsLdmpRCWtJ+vBELXUQgSRXBJb0azAnOuOVoGVrq7OJjCTFl1zc8il
6zAx+CsNaE7x9NBj/fI9Fdhf72gpmZGljW5ndT4CN8JpMlPuLmkJNajP/MR3TWoobX+1fBeI
wdUxC92qaoX+t7nbEvf/6UvQseRiEDi9CyuDHDrN6b+O8GCyHr9UGR2UORyuujlS0UDvHD9P
VlsghaApW9fc0c2kLLvGYov0yjVsBTmCB7p/ieTEnD3WQB2JmshAjKq1VAGUwApk8YylE41k
QGHi9pvg0LUfZRBtvO4G6RDioCJnkPYVqNIwW7WY4Aeez8PyN13F9EQfn6dpOichC2R18YHl
oOO7fCUDRhbPusaRJY5K6oqUKs/huknLcpryoskxJD1aW2kqKRNWqKuE1TO2yeG3lf01dklJ
gBDNIBQtypZ0PoolB2MQhE5mk1PoOnYMyBT+phwOvfV3TcHMzH1GHDx7TQjA919yMvT09Oi/
cZK+lvj0dmFqgq2z5sAk02352E/5FQXzlWd9SwZYIluHW2k1aGR1U30/LLVugrWd+yGZyLCq
QSFuelGmnQYxpYoubRPsAB5f9GFVNoClWXwPncJ2x0eLHXD+hq0eptD5urHEnAZZDexY8ax8
jLYpfo1VdQthFAWSrpgDckgep1gRTQ5S+8AH1UE05dAQW/WJG3/KvJwox5LXvT1S1CfMuWqw
aJ1XRhZluJ4lMxGKgzxQhTwOAURm3HkLJVMb9UUGPBRNoHpCnlkEZ9gxwO3WudqGPVsRKU+f
sbDjYXGVPmqp4giTSgryXNlYWFoK9FsDutC134A5CmTOdWhPsOJR2v9lsEd2moFDNIP460uP
x7/95B/g4AdOhdU4dRMdabTQpCvffNo/cQClEex6I336cjj8hDToO//wbhgc/BiUJ78BfcvS
kEvfCXnbYwWjLx3AiozHP+n3NTmPc51X5dABJJ6HloleNjWz4TYjpKuKFp64BbH/LJVbLMI8
YwalJas9LJKxbKcZzNqmBRpYlnkEuuLaAF4pHwQWepCkP2teT1M9OWkQaXegzycQjaCOZMk1
DE6T4ad0XZ7S2cLaJm1VqJfm80KlrBKYRBQ+pMgE1qIVNSb7zxJGe2dDwMcMjGU3UiWISCRV
NTfSujafd9B0LLdZ6zvQEszRbf3BERC/ez1UrrqDd0fT/7rENNz3938Do3+6MRKgoX1UmneA
QP340lvBOuH78LmhM+C328+G9vwES3Zv67/9cUPfmnJ0FPOwrL8DehC0Kztlon/BqUPZHob5
+gC04YDxcNSPV8MbL0PadEPrJkejDflFgovtfJayHBHv49f4bCRe7EiQTwZQwvo70TqHGWRQ
wTxANXXbls4JdiOUJX7QZW+6kh1K4txFlQPSmPzvcJW2rJIJIlIhO5M6zMwRHovBRymj0ul0
zHFlmrUdHt30AZGQo88HQg9tyYm1pSWDoPvesKVvSEwSraoGVAGxZhfWIrWIYemYvWCBfROg
g2AEZmBhMK/YMwjp4UnuP+XvvxucNdtEHu/HzitfA4XkH6HQGX63N5+G3Uda99cgwAp8XQHD
cIXO1CMcDK5+XKtM0crnbNsMS7s9GN7tQaZtFqz2NLSnKjBd3QsTtSNQTm2EdMPsoIE9WZdJ
/ey8MPfycCBYDHS2HlaY6qj5LFtLiDd5ocAGOY0JdMq6nndR6MgFqjJEV2FAJPGdHTKfgwIc
URPSwZHlT4FqcRBqu1zOj8AnrkyKRCzvItaizVZqhxsfeCooYwCKFjBAH8GyfT4O/c2BMKdC
Jv4EqpJFSmPGmeYooMyupmswd5f2R1UpFGSpuzJ32060tNCtQa0LIiS4KSeEMghpFspu2hLL
7dZFAZYS3kVDkbLbKNm1tx9aFEyJYzM4RZehnfKJfnQVBKe9Eep3fRmySQrI4FRedODYYXmQ
juzjts57Utv6zDQcrXdGaEzYh4PALL3rAQTmWkglApP3TE4hWY8eVfxKgZRItT5aZ+plR70q
5JvceDIi3EeTaASEwCZdlzz+ue0PQfqG1ZxApFsOWA02hKdyoaZznlYtWURLA8cSKnQeWn0r
ytnVw6KQO2nBWrkgmZByqhP5dmO9ROScjWKgSq9kEETyW26GpfItOJHfkg6bZYdtCCTrsGV/
DL0vW+nCAcRUh0C1LCAwyyqY5jTReLWNuiex+yyjiJRSQFr9zMMPQHbjlgU6tIDJ74hSqBji
/CBYHMwTY5AanUHHyYZO+iwCGB76Ev5UCkkhBbPkUBQzXL0x+e/ImFtse6zcbsA80JtHHITl
WVRJk7JKkEsdgTWZIp6FxzJcTWhpSBgge5HLpH+nXaoAkXPl0Bc+ySClRPaoBtu4LXvDOxhU
5KjJ6F1HJPXTZSvNhawqdxpM4EHIUDIjV1IPfdu5qQvPvRHZDiTYZvE4VC2jc48BBpVO/CAM
fPgzzdZOxHmypiR8HPIVAkslQsnEIebFIB3CaCkUHVs6a7pPhh/zBVpwMb7OsAFNSHcCCHtv
SE5uq3sURgK5Th5nPnJ6WS41ref8MLhiCnjDEi1TJBDLG2rLLJ5XdGAKRFmCKKNAPYcWOSdc
EKUqpGfq1DrUtNYcnak85RaadGjahqfmYV2HCxX3LBjyDkEP4nFJ4gEu5qXtUNmFkYqjUkVt
RTkCdhClVVc3gAIrVhiCXvnmq2Hi9t9DvVTiCGEfRdoaNgo5Vw4NwobPfA2t8/0MZgmyOF+2
lNUF4/xFQBbonkeWCYFzyICmdNdXplY5YPj9caQ2NIA2Xf8DrpbhqOwbL+YcZLLSXPYFsltr
EOvmFMi+H06YP0zzDwGEDCRRD6I0PDtwl1g70oxG1v5ZHPanbDs7oqr4cSBHZjJpoVsZRxsa
q29NugDIpjU6+Yl09ChVCQJPZfHZCvjx/Xj1ajOg3baDTwhY01tWsKXOjJYgMy2gkpcA55NC
YKNHFuPQutr7qdioTwcFctrTqrVU2yHjDDqJTm6vUA6yDOaKJ5DXy3xn+l0DnHKfyVel7kjF
VHOJfRGdL7LOZKnp33Ht0+IbTpaRQuEyerhKhrajqoNlq2C1ZdJEVbBLd7wyKaTz96EjnG/j
UHJyaT8DTWYGCmYj3A6r0MFaNyVF6Z5xVFlDU7MMx58j5SvjDIKKqulxYfP56soXNhCfvh46
z38hW2YdGqf9yaBQB6z98LV8XTTIAtuK9Anx42F5NROx0xvILDwdGImWh1E1TehhhlY6pjfj
+1Q4XLrz65Fay1Bn5lkBZ0DHglhOtectkuC/2Db39HUwt7oIfT/fjkCWHJYtc8NWrZPW/NRS
DtoIzEQ7TIdRfwaWpvbigCJyfAmU7FPZCFAEcGVBsExndOwUnpHtmTrBXJLkJ5fpRuiJh1aE
EufjTovcdK4HgcNV+dCU7B7gVKnr7tIrVyNYXmSy33TtHdXdUYiZZ7DvfR2Ofu2fuRbRas/L
mW/FOlh55fvALhb1cFDFRvFpnUBNlplzb0442TipHOKO1BDS7GGpKdrt6OaKdYpo0qCkc9Pe
AgVrCMycYYdg1BUw0jFUEiRxbj8OZvptZsf9YM3MQ2VoP7StWQ+JU8JsOXLuaHBQKdjW394P
k7ffzAOQsg4pTYDUGzefi1V4U0Yjl3QNH2hyJCWwfcm3TVNMfFbVFoB2U6NPCFSkKMwev8w4
ielHWjuSg8dmnnJAv/L0VfCVWw7A6NQMrGwvQJstpxpqtfvA3AWwNikt7ymdNU48og5KB2Zk
S7BiIpwm6W/kNAYqEGCKOEXr3jdELWTKqGBFo+vRizgzjQBEN54AT6HpaN1dSYWKdcqlrrtb
84H/xaFmAnPh2S+A3LpNkOhbwoAY+8G3YO973gzHffE7PNVX8POU90GOIOWQlBCMLgKBrBfV
KlKJlczeO8BheTqfxhpCVmDwmpZc+mpO+q+XpDXWiVOzj9zP/6aEpOM+Lcu8pu76Aw/KWMJy
ROkRKkBz9PrPw9Rvf8qBH2M4cOagmkm72MHnQ7o55YDsuvJ1JjdGUzTKe9lw7fXQtvH4mANO
19P1vBe1DhNCLO9fBhlVT0Q7qnDknFsWt86rpWVpe+goA5lPbDQO2sDKNOjQaFXr+acEzL2J
aRidlic+rUT8WrAaJgsvhWHvXVASKqPNDaAzLUFM/Jg6IVG/unnPhum6zc5hxvGZEwot5Ecc
HC3LEYCGr/sMDH7yg/DwJefxtBwNETbmHKf7B9h6SydR3isKiFCSEk3vBDTivARmKpNKrFgO
y9/xfmi/4MWcn9xzyaug+yWvVk7pHyR3RgAQ2Mhi0kMmIO6+8vWseJi03KG9eH7nMngI4HQO
OhDDswAOPM4pEdJZo8IAConTINt3zZUcrKFU0bXoXGoHkikMyKpy3afPKD2+bEMw+Jm/4wJb
ml363/NR6Lv8Ckid+iyYx8G/852v4arzbX8c5AxDqpShyhq6N+RQd3HhrRx4w9d91oCZek7r
2SxaDMGyqR+2MxYQapFEQ+aqDU4h1RGuWIGztjfLeRsLWWYCcjta5PFzNylAS35kWjLVKkqa
LMH4jAQ0tQJ7KrbRejscvxSBcv8ROFYiounClPNiSNWyIDJJU71NQRJKRqoiiMmzp3YFc568
+vZEAJmELXsnE9Ww4qyrsQkiWUbtoOichqiHTdMjT40qvEwl/1x3N13kB9fxnAtVo3OLi1N1
UhI9dLJqD5+7GTovfiV4h6X/ktl0IsuAM3f/gQtsyYLqwgCiCtoiawtHD1jXEFLl+ZKXv45n
GbKS0RpCOV5DzTa/7Sw+P8qao31t+MxXweUWBFJ7diypQARGsgzCqR+/Xz88zL1LqHJ8w+f/
lZUN4s89SE+G/+EDfK61qXE8rzwDk+8jXj9Z49ymE/lcKFCkW0Bo2Y/U70RHF58TZSLqRjSt
tWvpHhIN8b16PPRNdYTbZz8FE9YLGdTdzhi/6N96I6BPnboSqr0FyN67B3KPHl4UgFQEEM2D
fqq2rlwSNvam2fGYd1JwqFpEC53nNrrD5QRMVSXN2D6FjuCcBDMFUkjZIMuddELLrOU6fngN
PjiBZ/NXf8IPmyxsq7RHXfTamJdLD4+mcF2lQX/veemrYM01n2JJk7XrzcczmNmyLFsJDg4Y
qkcs6KR9tIKJpSs5Z4MGDjmF1EZh2RveyVbWJG3d+GOe1gnMWnKjgUkUiSwjzwqqRtAkS1EP
ZzUoaL/p5SvimRC8tk0QFh+o8RAoWjb2S5krveyd74vIvvJeDnzoE3w8Kg8zszuClmYACpRw
Lw78r3jamfw5ehm6x8lQRZPV15SCoCQ6KxIVkE6hH7fQVEc4lF4GO+GtsK7WC/P2neit9qER
DJfqIHDPF0+GR55zJpxy489gx+oXQbf1B+gbuUPlf1Q46KJvzLM2dLHK8fDskidfe9hi27iy
BtNzZZiv1qEjK5d86GhzcbrBG0b9GlSXeAppB7xOi+CWuOtTHlttU+ndYJmN/i7CGjxyoKjK
mt4ja0EZdTKnIzDWgW44OTb+TLEpfYGmU6ElBh40lpHRqLsS7XP566+EzCnblDLgcJQv2klf
nyt59bOUO41Tdzy8HsDkb35qaggXI5w03dM16CDL/M6H4dBnPsKDh+jM2K9/yrOL0OFt7STr
BugRp5TeI95M15A/7iSV3O/LTkm2MAqHrs7RPkT7ttOVIqKvwTEVMDqdlQZkG4KeZpvcllOa
dG6O96hmlrpahQDuEU2h1QJMmme6XUWNBOxNvghs74KQF9tJWFbfjxb6EMzNHwdtzijcc+op
kD56D/T4kzAnUkw1slYVyvp+lsbMcKHSKXppDTlWgdK3FwYnl8GFnXvg9umwCpkigpRjTdoz
bdR05qcHEGSpo6xyjB05CBODc9CO1vZp+RIEhSxHjLupP13C5vVR2Pq4WmeO9oh2jWWO5ytY
JlWUwEzTJKVgxv0Q43awSkBOIHFHS0lV2kJyrwursVmiZSwiWSVyAlMnPb3pnkz9/hf8UJPL
Vqnu/wErI/VSKXbKBLPGGkIhIj3hIKwhJPmRMwiV80s8nI3EZ7/JfJf6bRCg+fSDkGroQRio
HGRL5bzQDEN0o4mWWmEeieThEOfB3ENPgnfqjt+ZYlxdYMsqB/J5025NNFtoHcCKLqzERsGx
W8t2tLSDrxKz9YI8w0lq/7UBOkZ/C+f97LVw39Ougruf+Xewe8NLYMPuH8CSw3ejNS+DNf0I
WCuoZ0A3rGuXst3Zm1ZF+0E3JBq1w4Mj0/Ctoyc0ubBnnxh+79d7T4CPXKj3gXy9JlcG8P1A
UGP2fKoOqbTkxjStphZpH6bB3Kqbj7aAZKGjYVntUhOcq8gNpcwlVYyxH/wL5zEQFRAm57nI
jltmwxa2sPQQdQ9kAjRZxvHf/hgKf3WpeSC89sz8NEuC9H0q62KJz5JcnY4XTWOlJCGuIfzu
6pgWrdeD8WZKYQ2hAjP7Ir/4Pg+o/quvYY6rS7qGPnUNvvehWONJDmEEOptQVZ3gAYh/02AW
1Kw+kw577yGoqEpGyoZn87lEe5FYOgGKjOhOuSoE6d5R0Fe49dkgN4TX7zW2E5bRVGH+Rnn5
tBSfAXSqrRMcz2IA08uxrNjqUj3Dt8C4nYds6QhTi51dsqqkvuQUeKz3OBiqTcEzfnQ5r6U8
c8JScFcgRyrN6uoSgAUi8pQ1d9G5W9USEMJ0zc9nUrD94QfM9xZqu0s5GlTyk0y4smWrP4Uj
tbgodREqLK0BrC1zEIlllW7/HTuDU3fcBO0nbAWb8iXUZ0jbjWrUBI7xX/2Q+e3Rr3zW1N1R
dK8PP8slWKoVgayrs7h/B/WWG/+XL0Pxr2U00g4cHCjfMArJIfT+V131QTiKzpfO3yBFg9QU
QxU3nhSrIey79DV8Ff7sjKkhJO5K5z3yna/B+C9uMI6pdjhJnqNjkoSme9cRhaF9hQOItF+5
DAUxYCq/IkAf+PC7YeXVHwCre4lUn373K9bnabBQfePMI/czx6ft0VecD8d/+0YDTqJRdJ+8
7VMwe++dfB0kRe58kyzFC1TbsmhWoaYcYAWxhEZa3o7WdXG1ZLekZznkEPFT81VIjm2HdLGP
F+LxFOYJzNN2D0z3nQM7X/kg+B0rWRZj4DtZ/GwSDjztbdA/921wOqWqkROVplKpJgevswjL
8nLIFpAfUMUEAc7zalDs6IAptSaLm8mCV56L7YNKflx0Cu1EVuYgc5KMLB54PFCH/DAetNj9
gXeyE6U3slxU5pTbslVVXFisSZPGHO06RFNweeeDTXV35MnLKKJeNEiYAAs5gATq0h9v5pa9
9LOy/VFWKDrPv5Cjh3R+ugqb8jeoxRdH+dBRJaWCznngE1+CAx9974I1hAQSsubUSox6eOjz
JhlSiNU4UAo8WKSDBvyZ/KlnxJKHwtC0YAUk/4zTYfk73se6OZ0TObjUJ4/uAzm0lELAGNh0
Ih+PZiRdi6kjrlSES+/TuQ5ffy3fgxVvfgcHmtioPeOMRR5ehFqhUashFogPUE2hGBoagjPP
eCZsn2uDoVkbnvmbt8OxgQthtrsfJosbYMKPR/w6xv8Ete7NvJ5JlJa4CP+B2k/AmvoiGqHT
IdV5LtSrEljV6jDMze0Gz0LrLY7wz72lZeDWHoLe1C1oU46Dafd8sOZl297D5dZriC/Dh9yT
l8uEFfJZ6O3tg85iO47OJE+pvj+HNysVW4asyTo38Gb5PT/Mqou0i7Ubuua3svJRHj7zxz8Y
D52aNeZP3MqKhHR6PNmXgtNFfa7hI8s0eftNLNt1PR857NI+yG44JZw9kMpM33Vz03UQaFMr
Bwxt8qcnEFz/2lRDyHkfqmplKtJsnYIz7ThIZYNy1Vyccjp8P56nYck8FJ2Zx+xDrcFC+yzd
fRs339FN4anFQs+Fl0Cq2GX2XZuclF1PG/K8R77xRbbS1HVKD/JEsSidPJwdE8ViS8oRFsqG
GZA3/u426O/vl4Cem5uDk47fCHtnXdg+n4fl+34O3SN/gszUQfjjsz4G06leyXWsCrR7aH2r
JSgX1hvrrRfnIWvt1SuwbvKdYI8/CkenQo7as7cTB8kE+IUV4JQO8c/HSpfCRvgM/3u0ejbs
t86C3vYUrMjMQmcST7UybWaHQ+Ucv78ub0E6neIGfd2FNnBTWaRwqablxprSyNFCzeIY0bSG
+m1wDq+y7AbQkfxa3TTRjgBa0xOdnilXlvJDJ0xxSc6iiKxTKLPKPPNwhOrxpleK0rV4Lq15
Tn0p1AMkbh5Ot76JjMlzs9Wxw2R6UEtVmMLc6GpcKnHJtsNeHTwwfc+ElaUsF0mmF0HMGaPg
BlEOW4T+Bc2mlEtB555MZSKFsXIQcy+7QOrJ4QJGeG0J1/SHbnT6zPcb/R/bCtdwVNdQx/P/
0wM7oB0tu6uz7KhqIo2s2p33YHjtC2HjHz8rp1KkILkccqbKYfATaj3AzHIlgkvr3F4dhTX7
74TR/qfDnJeA3J7l0JmeBmetpB7+xDzkpu6C5NqnkQ9PQjLUrQ7o7rsb2rwc7A3+O/LfHlin
Ja+2IrR32FDwJmG0hhMdWvmlOYDOQhd4eCdpJqbkJOLOrqpyblIuWljm4bILj0460Id0fFun
BwmnlcfYsLIVAa8B1KF8pfpRkGbLUUdO2pAdlCwR4Voi0qeNQKiXiHOU6uDJLkAK1LI6xGpq
a6CLWun7so+FmTtAJTiHC++AlPuiqaCCwxZ6rIiwZEsndwaq9MqKN4bRFjFQOdCsgmhLKZob
x8j7EoTLxkXKvnzTBnehRY9EvEd2dOEi22qp+dcrVQbz1q1bpRhLoKAbnBNlyCbbIHPgVuid
eBS2H3cp94WrBvOxhS2jG1nlNrcOXlVa0yDXAzu2vYu7fW5KfAzagp3QdnQCshkPRtMBRxvl
Ngzz9kYY9v877vcEyOjyI68KgZuC/Ujys8kuqHtTkNbiRrIAdBRKOEomqJw7wZqt0UwXATVJ
d5TgX0g6RqtOOFZDYgDErXMEvNDQmkuVUavFUF2V1yytr2PLejuyboGwwmwI1R1JNKwSJWzZ
C04qBTL5ntdEV/WNptRQLxhh6JSscNG1fmHXf5m/TNZQU6Yg2uDFiuRn+DXmoHR8bpmg2tVG
pUYRWTUg4HZcvjp/aEoH5X4aIvw7fzvajDJmLGIn1BrUETA3gl1TGB3QMYEVWmCTnTKc5pfX
Z6A6OwWjncfD2JrnNgHZEvFliMlC02cm+rdCNVlkgNfsNvCtLOyevwo6nDkY8K+BXOYw1Du7
uXk6BWzm/RzsCt7Ii2W60fTahFy7W9OZjV1JqNR82Fdrh+40FbniTIIet8dLHvt8gwnINTVt
pezWdIMam1O/5zN669xzw43QDc1D9YMWEcelFX+W36H1suu81qHj2MY0MS0hCS7S700uqeyr
XAqfLaFcStqTVtoKgcG1fghkR68Ho1eXtSzTi0J3IOKHG1iKl4fhYF3faDUm6YnIss40cMh4
0EqugSq3sixjqfUDEdGZSi1mrimW/qmLYy0rbA5jBoCQLc0arSos0CO6Fd0w2nMDHdG/12r1
OKBJx+W1qPGE1rTV4PDAenik++NwtH0TF246DRp1E2DwM8Sp9d8cDgbUof3w/TCE9KWjsgnK
xRzcX7uWgzRCJMz0IxapiaQ85v42H4acDBTwxpCFreE93TWbggyCuSsloDdDltaDsXmZ1H98
Ua6jEqvEQbA/NpOE0bLF+1yB3+lOoyNYrXJDFPOQleW1AJpArf8tROgcgW9F8hzCZjL8OZXb
ISVstXAm41I1FiR64UhrF4gwZdVYX732WnSGiHUikt+l92xXmIWAdG4yxCxz6A/oz9CimdHl
56yQi5jck+gMFbXwTdq9rZavc+ywmpbkX191GI1aYxOgsWP3s9G5joMbmgBt6AetmlkVsbvC
XFROeQgOJOqrV62EFStXohNYZofPFwuPJEffpAagE8iPrT6XlY/uwT9AGakMWW76HHHXhfbZ
+P7hWoaLWzcV6tCRFLB/VvLge8eTcNdYikFKFpj2mXSsWDRQh7dd4t2uz1376bu3H0vC9ukk
jE+WwgmTHoDnhdkMDecRs9aUERaEU6deX9DG4wvbMb059OLvnHOs6vXADlvM0kDTTiEvFq/B
bI4VX9ReBkws04GJl4DTJV9OdL3uMKFHX4bW2xlAOLOQhfPNZ+JRU8mkrLBlgVrdqpWTFgW1
wxUuSLM8nx1FESmbarK6EIatGzcaPH68DLeJBsUw49XjgE4lk+yQTFZkjR0dZHVHEja1+9Br
TxqgtXppULcCKOnTdbw44uNeIs/8WHql4UBYbKMKk13TLre/LaRkq4GuVMBVKBxdRyNDfZzB
l2DfXPSNdXYijg1d5KqsD5txUHRnpCpz/5gNu4fHYKbumIqSXY/tbZCrwuXZorV63NtYNK+4
TTeaG/VECjd9IS0rtyoQziIRSnID61F3Pl7bB2EASNfURTuCRiVIHjSqr7KlgKwrPwjMOsHI
EiJsmGgGp6WafaoK+KhUqbhxWFNoxSmHbUX6eETBbssqd+E3lamZPiRc4hUYBcRS5wctFlLS
eRzM7zmPw49TDjqhoVqeM9bWeePQk6hCW64A65cUoKsgYKzqsZU8NOc0gTj6eytrOyfSzMdn
O457QglI0f1QCVUdfx/Ie5BkyYuAKXvREb1gOVBVcpNDk3KsliFuesgJBWqqjtuJFnOsjAPZ
L+OAcZCmUAmZx+K8SZeMTYdxR6QR9AbUDc1lTDGnohw8G5P+TPVxIrqCqwdG+LN1QoZy9Gw7
Lr1FWyI03HNLcWeZK2zFNXQA1Wg8iFEI7VA7anaQEcEgRm/CaKFjqCn9tJUzK9UZp+n+RFuG
8YpdjivP3VWOpioS4IFLRkI7n7bVZNmjhbBRutHk/LOO7LswE7icsXYIrWEbXmQqjQ8X+WUx
RUs5+LAk43AXIgIS8VdyhMYqNoyUrZgOHQUmAZq067GezVDt6uc1uBuphQ6ztxoM9P4JnT6s
a5eAqNRkpGoJWtneVM3UzWnuR1lzjnr40bWlQ6UDYE22DsWEB3unfBjfOw7+UrwuHLDZNnkO
gweHYdXK5SZwEl3Fia0jedSsR+vpMZLW2DAlmrVDjD7sx9QUDYhGZzMgcOHDtl3bcPLowKHJ
WGrNlmrbJdcID3QLhYh1Nz3lQPW1Y+AFYY6GORdNpyBcYYoUJC+IUwXdHEeDk5axDzzWoDX4
zIqxDXWANAsFdhAmKkV9lMhAbVqIk7XqCMWLVM7QMWq1Kq+HGEsfXZOahzw6bOOUipnqhC4n
YIDopRTIgmUytLCPZ6ahlWkLRhGjw9UMg5soQBTYLOnN7YNydgXMZXse1yJHwUyDZACBTG27
WOSbBdgzm4Z1uTqfAwFt92P74Nj4BExOTEBHZyfr6RvXrYVsPi8foureE69GIflOwL6DD3DK
4aaCb/JHiC7MUDK/tSJWNycFDF+uq+eHdZ4xj11YkZJ7EbPSmqbIdI74NG0yxUzdnmsstu3Y
oeWLOG5m1Sx+OXKgBKJp4UwjZeKzkwn0QYSnhtE/Vk8iKolUYZqzFbR1NsEo8MPmjBqkQRAL
NMlnYKn1VaClX6KDJI2W1xTfmuLc6EKgwvgiOjHJALrNqvIoo26oyUQbKwfaMgWR4i25Jogw
jf/abDmN9yLQR3EK3z6bxam8wVqnCnBk0wuhml/VBORoIpSWBDMVWddIRVup6TnYN1WFkp2C
MbsHqm4HAhp4He7HdjwKlUoVOopFfult39AwUG4KLXZUaG+HtowUsZctWwrtORnC37l7D4yM
yPUP1+dqESulghvKMocxB1/JWaqzkaP12GbqYal1q3Wur9Ru/bBW0Wi0gWnKQrvVoBZKU52b
n4Vdj+ziGadd5TZw8g9eG1UXUUHGcQPLIdfeqXRwX62dmDC8mR54vTYPO3ftiTtdQbO01L+8
B/LtekEjGX3ce+AIWz/GSFsbrFjSLWcidnrjmjBLdpRCgBczMzsHh45OsIGg7/WvWIrXEcSi
ewu1SqPBtW9Q9icfWLUs4oh7vN92fNZWZD979h1iHFBiEuhcjlXLurlq9qiX4e6cxKEHh0c5
4LJ2dT8kkm5E47RUAjjA/gODMD0zCyW8ydQUPXrjF9o02JxcF+eJkPJBUci2+VGoTo5ANpt9
QvtpKh1pLp98UhudF6UA0LELqgLbU7VtvV15HDQdLEMdGStJKx7ZypV43gnNFASa0swczx6c
p9DXxwrS2v4+bgZuooKRCOHIeInvJ2WO0YDr7u7W96IpAhQFdvS4cjCUG7//hO8BWV8q9iCr
V1ERuNnZWZjA66Bj0TUkldRJ5+0plYbAS9dCfsjRoyNQROA1HlvfY2rZHO1yS0uIpKiXNA7I
vYOHceaVA5BmXcrXof3SNUWvUQcEj+B19nT3cJTQALq3M8sjim4knVCjVWgFyDIeoMVJW0/g
vol/J0j/ozcB/zk36888X+vPvAfWn3FvrP9b91gDmk3v6MQcm2x6ZR/nRiCAxZ8JPuu/GHDg
/6Pztf6Dj2X9BwA59vv/EWAAHJMxEGwfmvMAAAAASUVORK5CYII=
--------------020509060904030203060607
Content-Type: image/gif;
 name="neev_logo.gif"
Content-Transfer-Encoding: base64
Content-ID: <part3.09040101.03040309@neevtech.com>
Content-Disposition: attachment;
 filename="neev_logo.gif"

R0lGODlhogBLAPcAADQpZtkcEtk0K9kjGtra2uSKhuDf4N+ysJeWlefn52RciMzLy/3z8tbW
2fK7udcVDHpymePj497T09za5Kyovurq6vX19dkrIuTMyyIVWdHO3eOnouJoYed9eSUZW7Ov
xtrMy/Grp/7+/tpCO/vu7d7e3uzs7NuVkaOet4qDpOHV1HNtlNzc3F5VhOSDfh0RVe3s8ZiS
suqRjdbW1fG/vOJWT6+svt1KQ91qZUQ5cby8u6yrqqmlu7ayxeTk5Ojo6IV+osbC1VJIe7m2
xsC9yrW0s/Lf3sXFxNs4ML26xpiTrNLS0dtiXPHOzGpiju+Nhzovaubk7uHZ2MPBzc7L2xoN
Uuvi4eq7uuNiW/X1+JCKqqait/Hx9ei1s6Wjo0tCd+He3qaiu7m1yqynweexruzT0vGblry5
y91dWOKUj/Xr6vbb2MrI0P76+t94c87NzuyinvLEweyalvjT0uO0seJvaeufm/bW1Prj4trZ
3ObPz/Ll5eLDwp6asNHQ1erp7+ra2erEwuDe6OG+u9nX4ufm7S4iYCATV9QMAykdXsjH0Cwg
X9bT4G5mj/T09/CRjM7N0/r6/NjX2ePY1+fn6OXj7aikt+fe3v/8/N5QSfn4+uLh6ePi5e/q
6uq4tuCblsvJ1crH2c3L1JaQr+GfnRYJT95xa5+atunLycHAv+W5tufl5fnf3p6dnMfGzuiW
k6KhoOXl5d7e3d3d3d/Z2cvL0SMXWqempicbXSoeX/j4+Pz8/O/v7/n5+fPz8/39/fLy8vDw
8Pv7+/b29vHx8e7u7vr6+vf39/PIxfz8/f39/vr6++Lc29vb2/vp6Orp6dPT0/j3+vb19/38
/fHw8ObZ2Pb2+N/X1j4zbvfPzt/d5+Hh4eHh4NDPz8jIyPv6+/rMza+uru9+erKwsfTz9+jk
4+vr61dOf97e4Onp6erq6f729uLKyfv5+fPy8tXU2NTU1Pz7/LazwLm4uH94nfHx8qqoqNsw
J5yWtOzs7uro5/KzsMfE1vDY1yYaXP///yH5BAAAAAAALAAAAACiAEsAAAj/AP8JHEiwoMGD
CBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTI7MUisKSZaU/ywiKsEYIxYpz
X760gIBCUCSLwgp9SOFEyBchLVZoCcIr3sVkXAjxAHJTyDkF9PBpcJRsoQgulVqKLSQCIlix
LmEw7JEDCra32AAICSKi7LJQCgD4s+XBA18PuABA0LZLYrwJQKAk8svYli1/hnLEqNRV4jQY
Y84ZSuSYsV9chr6EgaEsoQhQhuCqzjGhbEMRENyqxrYIRV2FPHL97WsLwIdhxv4AsZXBg7/j
yI97OJQLHznXDQuNSnTIePLrHjIAiFEPekMuYaAc/yp+/bqtQ9jCcEnIBVv1vvAPATkmzDtC
QlCKw89+CJQjXb8kRMEi1h3Xmw3PaPDFCwWWh5wtpQDBRYAMaXAOgw46eF4LjFDIECEtHPJY
huWd14g2HhKUzClV4HJdBl8YAExhC51CHnK4VNGCJAkQI4yABCbXWxKgQPECieV5UEoMjqR4
ECOLHOIikuUdAoAr8dhnUCgASEllebi8AAUj9RkkiF/mefCBOb0sJE2I2FWxBQsRBEPjQQM2
mAE2o5xTxXG4+JUBX1Neh8ugUwzjJEHaAJBBocllRx6k/uSIDSHGaDkQI11SqhxjlTr4AjYT
ZFpQNCu0eN0hK8RiwaIEaf9gSAbJhQmFKLMkYIGmAuUZqSGzVurBCy/wZcsL1TmYIxAJ6KIp
DEK8QCkux4roGLJglqLAH6YaBEMOqtZ6LIPLYetgKUJQsox9/JRS3p5+FPMjQiLEgCGOERJg
gAnGKORrpIRmcEgLStiQhDxKLNggcodA0QAxdxKkxZGGDtoICkMkYUkK2NwLKIRh+GiQJvT8
aaiUK/RhiQ08pJADg55GmM+8A/2xIKSOhZGOLgn9cWGttPbAgg++wDrQvycnskUtzcxSggHb
+AGBx8gtR0QFzhZEyCK01iqmDX6wIIsB3JTAhhMm4yhmA68WREV2kIb5hSXdsOB02a4AUYUt
cRf/N4QvESszhrvXvaDALEUjdIZjtVahwDsl7Mxrr0EaKmYSBLBgQAIm8BIML5Q4kWzhlviw
a0FAUIxjw0Q0vc0PnQdTjA8r3IhcKSik0wt01gBRCqWHnDNF0xHAzgsvxVCCwniGVtEIJ8d4
N4EhXjIMABH8HhQNBOEq9wIKdPJCM0JIP/hCD8SbYEEvwuwiTC9UGLJwmEqUADFBleRwiHlV
iGG3D8UAzi7cpwtO5GBEgHrBF/KQOIEQgnovgoI8miGLWPACOO0Thi7qMbWFFQcU4iNINPQG
qWFpIQHD0JI2jASpF+QAFLk6nb8qlxznvWMWEeBFL5zkiy8gEFBV0MIs/+RFEDEMqnEKaMAs
fBCMbglEBLuIQdcelIEpmKBNAhlD2pRzCHo0owQ9cuI/oEiF/BiqFPiIRQoJEgQRXUdHebhf
QbRYnhdAoBn76tdCyuePYYFvG1fUkjJa8MPjZAACksieQJRBD9UhpwoxYAEgd3eQ6dVRCZw4
HRe4hzND2KAZdRLjQDQhOsvtqB4Rg8HPkkOrIbCpII5AG84WYYOhNXCGHvRAD2JotBUUso9O
kMQrBQIDBThyL7bgAS8RkoUcNChMjciDnf4RBfHgDBtEiFz0EqIF21XKSpAY5kDwQTV/VCEF
pkvRBNzIynNAI3JZ2yMNDQkAeeQxIfSYYnKSWP8BLP6DEF/YHysBMAQDiPMg5ygkjBLZL0Ic
kZVfeMc2iJgQFPQFOy8YAgq9wwjxeA0bfgihQISBj+71MQNC5IZI5enBHMhjG7yIWEEgsLBK
8dOfRHCUeQCQAh6E4QNADapQP+BM8xgCEpILRTltkQMeiOEMQYiqVKXKj1DQtKZV4EEEbvmP
SHRQSOfDmmu+VT0DXSmGkyNI+cLUAldEQI4HAUKGFCAJrA3EBoEy1F6Ms5++XjRJttDoMJIx
hmNWzTGITSxia5pAIU6TIETIhT5zBAF0JE4EVKBadlagrys6hI8vaAEbiGa0f2ihprjgJ88E
0oe/YsevsHXQcuSx1WH/xMCkyhmUYnfLODCxiqGwPIdAkZOBRbCBiJFIVQk9IA86AaO0BeGj
Lc7hCleVNga/9Add7SoQMRTrS+Ct2vneygV6DDe84MVFhITpz4FI8ZlVQEECovcHzpjnC5KA
Z1rVOk9/DKwWupocdsGk2oGEwZvoRVIGLLGNYMDACYxNsLJesIJ3cJcgm4DCD9maB2D04gPS
KpwSmgFTmeJyVQp4AyXWiJABl2e7q/2HJVxbNdjaGLYZ6IMBePEHBUg4SRnKwAoaILmCiGAF
592LPyChPgWUdS+LgARaH8LHQygAEhtNiItrVWCBTAFNyTlEU5MwhDKb+cxoRnMP/LDjYWig
/wc2sMQW5kznOtu5zpagh/wsN+IiFyQUNM6RfCeQi2dSuLN6/Gx/raxiFh9ky/usa4w7qk//
5mAKs4DaNjbN6U572tOxgJgIemGCCHz61KdGwZ5XhQJZ9PMgzdyw4dABYkq9IAnOha5Bqnzl
LLf4l6ltwIU3IdwXLWII26hAMIgRjGY7+9nQfjYwAPSPXViA2dHOdrRttDDiJOGeB0HBMW2R
CEhAIMlihpyfFb0wRq9YwNmF8UCk4YRjeiC+bzXGAPfNb2vA4Bj8DrhrRPCLgPeCF44IuMLd
BwEEuxASBqCotxah0BUAAL5bIPFK2Y1iLDvaIJAGVJcFMorRAdEJ0v808UDEoBQUnIEKgpBG
QqyxCSrwYwyjWIEN9rsJ/TWvwm9V+RinRikEF1fKAY4IrxsNbwfJeyCymux5xKBIgwjDT9jC
xjkgkAIi/ISYPNACPc6RA/++AF3c4lW9TK6crA6tbQjRgGEDXQUINADcEOG1x5tuqJH/QxNw
KlxEPz6QIORVUIc4RCnCMIxdlOXBpUh8BsizHBQ0ESFD0KnXclALbU6OHEJ4cpIymmuJLP3d
Wo63pOdI40q9QAhToCRBqICNSuPCSowwgS9+JIIg7K1KULABV/+xjDB06VyjyEPEE30QZdgA
t14TAiQ8b/pF95rwBAm5TYUdY4FoIvRJahj/PUA4jSxMIAbHL08p+oBDkZKjEVskbi6AoAFy
/OIbheiBEyQLpip8gQ0sEAvDZxCFMCue8kinQAAwNT5UZn1Ml3pOt3puU2gaAhk5gBMXB2w6
EjaktSkAEGLm0RtfcA5CAAWGwBca8gIUoC9ssl/RUDIHeHuGgGm6omvkY317B4F9x30GoQyn
wHYA0xmo9QIAwAZ4FEgD8QtGVGnKIYStZz5a0DQCKHQFoQG91Tz08A770l5554Co92sReGEE
0Qsp8F0Sthz+8ElgBHcDIQw2gIY/5g8Cg0h0UgyihBBcIEvv4gFDQCdwpXQ46GuPBmx+NxAi
4Agp8IHZFWSHMDdN/+MDImNkvcAD4rGIGbIcUKAFMyBJJhBPDCECH1AF86Mj6rZNExEGxKFY
oQVg2DcQWmAtitUCPHgQInAMH9ACYWI7uLCLVXMIL7AIjTA8S8QLdzhGukAECrAIyFIgU8KL
feSLuNACNpA53GAOigIRUQAAe5NYGQBJGseAEPEB2AAF5FiOhtAIOYgQp1CO7AgFjTCLB/EL
x4AOKNAItUcsGfACVVAFxPICGZADEEABDaA5sRAMskeLuhALNvEyxOKLk4csDZkD9KAEYVMC
EWACx2CDBUFSudCOAPAFNMiGEvEH/HAGH2ADKGkDFEAEBCCIBBgEQ3CSKWkDRMACYmgQv/+g
C8FgAPLQB1TRAgoAlAqwAkDQB0MgCRQUAekADMUoE71ADBFABFuQAivQAjihE0OZAiiQBJLA
AiXwOgapkd4iBnCWkhSAOVt4EbsADAkQAW75lj7QiWklDLwQC2/5lrFgh14hDBZQDD+wDZIA
CbXABrUACe/wRQZgAD6QDsEAcPv1RLswDLyQDtvQAJCgCERABIrwBvAgNlCzmBdUJhMhArpg
Aj5wl275A4BzEaNmAcDwmq9JDMDQeAuRk74Am7HpCwDXEL8gDMcADMVgDumQAMRJnOlgDsXg
C7ogmg8hAr4JnMJJnLEQC8ZpAslJH49Zm8fgC7IZm8BgAU0JEQT/p3C/8AuPOZ4BV57i6T69
oAvDYAHwOQy6wD7mWREE9z7H8J7waQHySZ/Z+RoFx2/l+Z8ogRF1caC3wREHOqAJWqARYQz7
aQG+MKG3GZvYdjzHUwwaagIc2qEmYA7mUAEVoA7PUKLpkA4/UJzFuQrT6QMuepqo6Zabxg3c
kJg2agAlkKMlMAuzwAI+6qPNEKTNQABESgCSYKSSkKRJOgMNMANO+qQzAA9SCg1UWqVLcKVY
2g1auqVa+gbd8AZg+gYLMKZkWqZH8AbUwBAW8AMpmgCxAKOmdqOyIAs9ygJBiqRQGqXwAA1X
yqVfCqZl6g2CKqhHUKiGmgqImqipoAM6/7CojKoD8xCpkiqpRVCplloE45CpmRoOnBoOO7AD
nvqpO2APpEqqt3Cqt+AFqqqqsNCqrtoKsNAKsjqrsooArWCrCJCrurqrrWAA9akQrRmhwiqs
FFqsxnqsyJqsyrqszNqszoqb0Bqt0jqt1EoMnvOa4JlWtkkM3Nqt3tqt2tZsGDqu5Fqu5nqu
6Jqu6rqu7HquGvqu8Bqv8jqvHpZWUGQMvZCv+rqv/Nqv/vqvABuw+6oLBFuwBnuwCJuwCruw
DNuwDruw+kagDjqxFFuxFnuxGJuxGruxHNuxHksReGAGTzCyj4AHBdEGITCyT/AId3AQeFAA
HOACrHAQzmAG4v+AB3jwCI/AAAYxB09gBm0ADuKwD+1gEJgwBx3AATLgDC5rsySQEHggB3XQ
AXOAEG2ADG7AAa/wtAbBCo8gDjxbEKygsk8AB5hgEOuwDzhQByEQtg1BA/fwAAMQAANAA8bw
qwyQCQGwtwMABxE7ECQgAHT7ABewBo5HEKhwAQHgADRwAQPACsKQIiEwtw4gBw/ABGrAnP9w
B3sbAA8wAiTwqwIRBwLwAGtwtwZBAjdAtwFwAXFwuAOBCQ7Atw9QB6FbEA5wAaaLugPhAHO7
t0jAAMwpAh3QuQHQAe2gkaxgB5kwACPQAWUQQBTCADUwAJlwAiegB9I7ECHwADdgBzX/gAhp
QA3tAB1NILhXALcD0A+84IkhoLg3YAoBwAFWQAzdsg5P8AA1UABI8ABd4A7jgwz9G70ZWRDv
ewGvoLcdYJDQsQ5oML8FMAAPgAq0ORBwGwAE7CE0MAAD4AJpsAFhNBB3gAQB4AIFEAA3UAbX
yBC78AqXm5gJMCMCsQ418ABpQDbb0CN3csJYEAtucLnVIMMCcb4BcAVXcA8DoAcC6CHvy8H3
EABMMAnpYIoMUAcPIAOXwAHiWw5sKMAPgAGQKFNP4Lyr4AZQzAyR+A8kgAR9qwI3MACDUAGO
dsF64ANC/A80EAD3AAZQEwEXdgdPTAZgIACZwA7m4IkJ8Qsy//AAaHANgFTA/0C9AYADgzAI
l7C9AiEDAVADKlAA9+ACUuBZQyy4BVAAF3ABGBABz8W9F3API0C3TCABvsYAWPAABTAJHPAA
LsAMK+XFqfxYAyEHATAC14ADUEwLryYQzoDEJ0ALn+ACehB0FvzE7LANcJXHF0AGfKAHJmC/
A9EGViwApMAHfMAMNdgQi9zI5ywQ1Du3iIAIr7Cc0PEEKEwLYFAGl5Bs8dQEbMy3FxDNqywQ
kzsCGzC3sTzLtXzLubzLVefLdSJTdjDM12DFOCAFP2CKyzwAJ3AAWMABqBBqd3LBGGDNIc3B
71wDw7BDBOEMNyC3pNAJx7nCC5HOUv8wXwTRziPgBm4QCMRAbQJBzzcgBeVgBTCtQ65xvgNQ
BzjguHqwDQH9D++LBBiwugfNYrRsyyqw0LMgTg4NzAIR0SMgARQ9Cb7mDIL7CRvguV1QAasp
EBdczdfMwThgChtQDBYQMSKwB5nwAAEAB3YdngRB0zY9EDSsyxJwDWAQw3eiyTUgASfwvWrg
0/9AxKpAB0icyk89uQKgAj9c1a5x1Qqty8zA1f37yzIFB8Ms1g9Q0WUtuM2MBYhwBT9wxyJN
0hbcunwgAcwQl/6EB3bQBYFQwzcACDI904xc08dw0zUQAAVAkObAhidcA7RgCg+ABXugC3dC
xF1g2QOA2Uz/fAECcA1pcLmybNW5XABScN6j7U9eHM1e/Q+aPAK0UAdQfA2tHQCkYAB1gAie
kEM089a27dZ6rAIW+QOX59aCawSB8ABIcACizBCCndwDIcluAAIS0AnyPBCMzQ4/7AJWYNSj
HABkwN0AzcQDsNmfQN6+tg4u8ABuwAd7vQEGxd4kfAAgAAhOQRBwMABIwA7GbAqJzWLrsLpp
gAF77QkT9d9PPNLXjNsgUA3r4yHZILhkcAWfOwjrbNzqLOHsXL0D0Mp2ILr/kA2tKwASTAZ+
vM9UTgZMrcomLgASYMZMoAK+hgn7QLiOOwCosA3iFAdsfMqgWxBTfuJz+wqbw2Jt/3DCrSzB
/S1xDkDNAY7HHAzoaiC6NPzliosFUqDKVKjjSU0Lgz3DHIAESHAPSGAHUf7NHSAAAnABdVAN
BnBhZXADF6AKqjACSFDiA7EPI3ADEmDKpmDfjka999DqBcAMgJRo2ZAJAoAEhLwHFfwPmMC/
AnAPTFAGBrAzBIEHI1DtmYAEV5DkAxEHtM7kdyLAzi4ANwDt4+MJuO7KV6CYT70QvVABm8Pl
TzQMCfA0EdAj47MLwRABUGMAESBx//ALwOCW1umW8y4MJrANTGQOOfxxxvDwNirNA7ELUMnv
hwwdGi/wOJrsBdEL5pCYNbqABBEPvLANGD9SKz8LEG8OptE4RhaQADf6A614EMIQDOlQDFz4
D71QDMW5lHh9DCZQnCZQ3CIwDCH6mhVgjSmylumgPsRQAT7vHb9gAeaA9Iic9VtPnHJpiKVZ
nM/tJLvgCxVQnGwdMVkvoiJ59sMJ9ohsDMTQpumQxp9oDPO5KL/QC8fw9xlOEL9gDH9/DCpd
ELvQnsLwPr0gU845n7ug94dPEIlf+LxriJX/95MvEIOvC5oPu5jv94CvuVBEsKA/RhpU+JuP
+p5/DIH/sbAf+7I/+7Rf+7Z/+7if+7q/+xcREAA7
--------------020509060904030203060607--

--------------010107020704000009000502--


--------------050808090307030904080105
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------050808090307030904080105--

From java-user-return-37976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 18:41:44 2008
Return-Path: <java-user-return-37976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17284 invoked from network); 29 Dec 2008 18:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 18:41:44 -0000
Received: (qmail 70205 invoked by uid 500); 29 Dec 2008 18:41:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70171 invoked by uid 500); 29 Dec 2008 18:41:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70160 invoked by uid 99); 29 Dec 2008 18:41:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 10:41:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 29 Dec 2008 18:41:28 +0000
Received: (qmail 4546 invoked by uid 60001); 29 Dec 2008 18:41:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=QGEwCtwchG9EEl7Qi5OvS+rucYLVKV344aV5mvd7O+hctQZviagtJU/0uQRuZ8uwFZ2Ci/Xa8xIUgDzvG6RleLLjqN5WU9y3fdllIDfpqCOPICQiACKgBTY1+lyUCfBGPMolDm9HAe7zyvwtwM3XNPKSAu96E8JYYyb8pVjTIS8=;
X-YMail-OSG: 91_iKsgVM1nOOuG3zpuBTqSAe7AXbyY2hDsm1JlpX2xLUKiV4dUNlVfCcuix325NnkeRnmTK5cABpo1cqhI8VRuaxWQi9JKuFwceuHq3pM4djVw7k.QEk_YM2LcyReFoMY7VuOG8L_2y_R9_e9v_SsA9ivnH63CfpPewBf29DhYO8negwv7boOccaCHOay14stBwM5lf.q0wcBgE6Qcccg3dfKRx.Q--
Received: from [167.206.188.3] by web50304.mail.re2.yahoo.com via HTTP; Mon, 29 Dec 2008 10:41:07 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <6e3ae6310812290155n1fa218c0na314757f28dae3fe@mail.gmail.com>
Date: Mon, 29 Dec 2008 10:41:07 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: duplication checking while indexing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <566414.1893.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,

Mark Miller & Co. are working on (Near) Duplicate Detection.  I think the work is in Solr's JIRA, but some of it might be applicable to Lucene.

 Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch



----- Original Message ----
> From: Chris Lu <chris.lu@gmail.com>
> To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> Sent: Monday, December 29, 2008 4:55:14 AM
> Subject: duplication checking while indexing
> 
> I am wondering whether there is an easy way to avoid duplication while
> indexing, just using the index being created, without creating other data
> structures.
> In some cases, the incoming document list can have duplicates. For example,
> when creating spell checking indexes for phrases. Each phrase is one
> document. So I want to check whether the phrase is already indexed or not.
> 
> To do so, I can either create a hash map for all the indexed phrases. But
> the hash map would consume a lot of memory.
> A possible alternative is to search existing index. But remember the index
> is being created, and not all contents are flushed to disk yet.
> 
> Is it possible to query the not-yet-closed index?
> 
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 21:07:25 2008
Return-Path: <java-user-return-37977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76537 invoked from network); 29 Dec 2008 21:07:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 21:07:25 -0000
Received: (qmail 94674 invoked by uid 500); 29 Dec 2008 21:07:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94642 invoked by uid 500); 29 Dec 2008 21:07:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94631 invoked by uid 99); 29 Dec 2008 21:07:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 13:07:17 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 21:07:08 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id E0465FE1E7
	for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 13:06:46 -0800 (PST)
Message-Id: <3536D8A9-3523-465D-B6D3-B91D3D0025DC@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4958F9E1.90408@neevtech.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Help in Arabic Analysers with Lucene on Windows
Date: Mon, 29 Dec 2008 16:06:45 -0500
References: <4958C03B.6000200@neevtech.com> <43EFED66-F704-4DC3-A038-C6173E5DB1F5@apache.org> <4958CE52.2060005@neevtech.com> <1875F57C-E47E-4B8C-9E01-1F269B0BAAE4@apache.org> <4958E5B9.8080603@neevtech.com> <7404917B-52FA-494D-BF38-77A96E330AFE@apache.org> <4958F9E1.90408@neevtech.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 29, 2008, at 11:25 AM, Girish Naik wrote:

> Thanks Grant  I will check this out.
>
> BTW, as far as Lucene version is concerned I had checked out the svn  
> of lucene and created a build its version says as 2.9 :)  . And Luke  
> is of version 0.9.1

You will need to plug in your own Lucene jars into Luke to get it to  
work.  I believe Andrzej (Luke's author) has directions on his website.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 29 23:41:31 2008
Return-Path: <java-user-return-37978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20088 invoked from network); 29 Dec 2008 23:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2008 23:41:31 -0000
Received: (qmail 20526 invoked by uid 500); 29 Dec 2008 23:41:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20497 invoked by uid 500); 29 Dec 2008 23:41:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20486 invoked by uid 99); 29 Dec 2008 23:41:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 15:41:23 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.198.231 as permitted sender)
Received: from [209.85.198.231] (HELO rv-out-0506.google.com) (209.85.198.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 23:41:16 +0000
Received: by rv-out-0506.google.com with SMTP id f6so6337729rvb.5
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 15:40:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=xuQwnkHEQa4pWJS1OvbFnto1QSc/VvbmL9plBQrGmA8=;
        b=D/J7HNHeVkjMp7uU/LBV1yJKDQ1/vCoexdZvOvlH81XbDM14hyGrlN191BVpDAib3F
         Sfyw14BGIcGfDGNmn9FsR2j0zVwAXlKlc1t0ReKK2tyLXxHBNF781LbRoJMCT5ruRGgT
         uDioaBBncpyrCKlOkKWBqirBiuX5ENYLkXgNY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YtxWgnpRCFaMQaHr2gm1sxB932SLjOa8+5Er3Ocr9NRB59SxRDBYSS1GDFM9A52r8B
         92/k2XxOwdli3e/1CpVr+vUW01/5D45V2Tpld8VyPxo2Mphz02xtNX3YuM5JlBTj+s6m
         cv0BWnLUZh3DAGPYaEuZKfo3wqjbP8Hyn9/To=
Received: by 10.140.201.8 with SMTP id y8mr1156430rvf.101.1230594054845;
        Mon, 29 Dec 2008 15:40:54 -0800 (PST)
Received: by 10.140.127.7 with HTTP; Mon, 29 Dec 2008 15:40:54 -0800 (PST)
Message-ID: <6e3ae6310812291540h3cbcff9eqcd48ec01b577e588@mail.gmail.com>
Date: Mon, 29 Dec 2008 15:40:54 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: duplication checking while indexing
In-Reply-To: <566414.1893.qm@web50304.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_110102_11639329.1230594054839"
References: <6e3ae6310812290155n1fa218c0na314757f28dae3fe@mail.gmail.com>
	 <566414.1893.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_110102_11639329.1230594054839
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Otis, thanks for the pointer.
I think the question can be:

  How to access TermEnum or TermInfos during indexing.

If this is possible, things would be easier.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Mon, Dec 29, 2008 at 10:41 AM, Otis Gospodnetic <
otis_gospodnetic@yahoo.com> wrote:

> Chris,
>
> Mark Miller & Co. are working on (Near) Duplicate Detection.  I think the
> work is in Solr's JIRA, but some of it might be applicable to Lucene.
>
>  Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
> ----- Original Message ----
> > From: Chris Lu <chris.lu@gmail.com>
> > To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> > Sent: Monday, December 29, 2008 4:55:14 AM
> > Subject: duplication checking while indexing
> >
> > I am wondering whether there is an easy way to avoid duplication while
> > indexing, just using the index being created, without creating other data
> > structures.
> > In some cases, the incoming document list can have duplicates. For
> example,
> > when creating spell checking indexes for phrases. Each phrase is one
> > document. So I want to check whether the phrase is already indexed or
> not.
> >
> > To do so, I can either create a hash map for all the indexed phrases. But
> > the hash map would consume a lot of memory.
> > A possible alternative is to search existing index. But remember the
> index
> > is being created, and not all contents are flushed to disk yet.
> >
> > Is it possible to query the not-yet-closed index?
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Scalable Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> > Lucene Database Search in 3 minutes:
> >
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> > DBSight customer, a shopping comparison site, (anonymous per request) got
> > 2.6 Million Euro funding!
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_110102_11639329.1230594054839--

From java-user-return-37979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 03:55:40 2008
Return-Path: <java-user-return-37979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96227 invoked from network); 30 Dec 2008 03:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 03:55:39 -0000
Received: (qmail 74565 invoked by uid 500); 30 Dec 2008 03:55:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74524 invoked by uid 500); 30 Dec 2008 03:55:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74512 invoked by uid 99); 30 Dec 2008 03:55:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 19:55:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ialy2005@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 03:55:23 +0000
Received: by rv-out-0506.google.com with SMTP id f6so6457746rvb.5
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 19:55:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=yc/KGZamQaUuf+u/gWtzyHEcipBbK7CDcEGJkTEjCbE=;
        b=rXoohGtwAQdUlIRJOD0L8wbSiSXGTDbsJxh+b0PfT1JL6PiY5iXstjmK+l0SBpr7u4
         PzpEQcdhzwUjgcBHhLdXV1RqIZcNqjhQ3vuuNfYFyj+wa4gXzrjXsmrny5pU+eFvntkJ
         hUu4n5mbt6o+rXAUIyPxVo4fRg6zzRCTQ5vF4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=FygzL3orASyjXCq19WsxdMkkkYFvwaFlttmQ5tV1hSypdtWxMw472Fxk/I/bvr7PBE
         SRHoKFf8Qx9RXBLromC8SddtZ1SZdiqkIDv0iOtUJTpOZjV9qaMC2AkSta8riXzlA8XS
         eBS0hJxNLszHOpSenE9t25ZV5V+YXSMFVQZKM=
Received: by 10.140.163.3 with SMTP id l3mr2790309rve.2.1230609302429;
        Mon, 29 Dec 2008 19:55:02 -0800 (PST)
Received: by 10.140.169.21 with HTTP; Mon, 29 Dec 2008 19:55:02 -0800 (PST)
Message-ID: <a632fad90812291955k5aac2612pe77c45bd7aa93b1@mail.gmail.com>
Date: Tue, 30 Dec 2008 11:55:02 +0800
From: "liu Ivan" <ialy2005@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: duplication checking while indexing
In-Reply-To: <6e3ae6310812291540h3cbcff9eqcd48ec01b577e588@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_139384_10502240.1230609302416"
References: <6e3ae6310812290155n1fa218c0na314757f28dae3fe@mail.gmail.com>
	 <566414.1893.qm@web50304.mail.re2.yahoo.com>
	 <6e3ae6310812291540h3cbcff9eqcd48ec01b577e588@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_139384_10502240.1230609302416
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSB1c2UgSkRCTSBzdG9yZSBkb2N1bWVudCdzIGtleSBJRC4KCjIwMDgvMTIvMzAgQ2hyaXMgTHUg
PGNocmlzLmx1QGdtYWlsLmNvbT4KCj4gT3RpcywgdGhhbmtzIGZvciB0aGUgcG9pbnRlci4KPiBJ
IHRoaW5rIHRoZSBxdWVzdGlvbiBjYW4gYmU6Cj4KPiAgSG93IHRvIGFjY2VzcyBUZXJtRW51bSBv
ciBUZXJtSW5mb3MgZHVyaW5nIGluZGV4aW5nLgo+Cj4gSWYgdGhpcyBpcyBwb3NzaWJsZSwgdGhp
bmdzIHdvdWxkIGJlIGVhc2llci4KPgo+IC0tCj4gQ2hyaXMgTHUKPiAtLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tCj4gSW5zdGFudCBTY2FsYWJsZSBGdWxsLVRleHQgU2VhcmNoIE9uIEFueSBEYXRh
YmFzZS9BcHBsaWNhdGlvbgo+IHNpdGU6IGh0dHA6Ly93d3cuZGJzaWdodC5uZXQKPiBkZW1vOiBo
dHRwOi8vc2VhcmNoLmRic2lnaHQuY29tCj4gTHVjZW5lIERhdGFiYXNlIFNlYXJjaCBpbiAzIG1p
bnV0ZXM6Cj4KPiBodHRwOi8vd2lraS5kYnNpZ2h0LmNvbS9pbmRleC5waHA/dGl0bGU9Q3JlYXRl
X0x1Y2VuZV9EYXRhYmFzZV9TZWFyY2hfaW5fM19taW51dGVzCj4gREJTaWdodCBjdXN0b21lciwg
YSBzaG9wcGluZyBjb21wYXJpc29uIHNpdGUsIChhbm9ueW1vdXMgcGVyIHJlcXVlc3QpIGdvdAo+
IDIuNiBNaWxsaW9uIEV1cm8gZnVuZGluZyEKPgo+ICBPbiBNb24sIERlYyAyOSwgMjAwOCBhdCAx
MDo0MSBBTSwgT3RpcyBHb3Nwb2RuZXRpYyA8Cj4gb3Rpc19nb3Nwb2RuZXRpY0B5YWhvby5jb20+
IHdyb3RlOgo+Cj4gPiBDaHJpcywKPiA+Cj4gPiBNYXJrIE1pbGxlciAmIENvLiBhcmUgd29ya2lu
ZyBvbiAoTmVhcikgRHVwbGljYXRlIERldGVjdGlvbi4gIEkgdGhpbmsgdGhlCj4gPiB3b3JrIGlz
IGluIFNvbHIncyBKSVJBLCBidXQgc29tZSBvZiBpdCBtaWdodCBiZSBhcHBsaWNhYmxlIHRvIEx1
Y2VuZS4KPiA+Cj4gPiAgT3Rpcwo+ID4gLS0KPiA+IFNlbWF0ZXh0IC0tIGh0dHA6Ly9zZW1hdGV4
dC5jb20vIC0tIEx1Y2VuZSAtIFNvbHIgLSBOdXRjaAo+ID4KPiA+Cj4gPgo+ID4gLS0tLS0gT3Jp
Z2luYWwgTWVzc2FnZSAtLS0tCj4gPiA+IEZyb206IENocmlzIEx1IDxjaHJpcy5sdUBnbWFpbC5j
b20+Cj4gPiA+IFRvOiAiamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnIiA8amF2YS11c2VyQGx1
Y2VuZS5hcGFjaGUub3JnPgo+ID4gPiBTZW50OiBNb25kYXksIERlY2VtYmVyIDI5LCAyMDA4IDQ6
NTU6MTQgQU0KPiA+ID4gU3ViamVjdDogZHVwbGljYXRpb24gY2hlY2tpbmcgd2hpbGUgaW5kZXhp
bmcKPiA+ID4KPiA+ID4gSSBhbSB3b25kZXJpbmcgd2hldGhlciB0aGVyZSBpcyBhbiBlYXN5IHdh
eSB0byBhdm9pZCBkdXBsaWNhdGlvbiB3aGlsZQo+ID4gPiBpbmRleGluZywganVzdCB1c2luZyB0
aGUgaW5kZXggYmVpbmcgY3JlYXRlZCwgd2l0aG91dCBjcmVhdGluZyBvdGhlcgo+IGRhdGEKPiA+
ID4gc3RydWN0dXJlcy4KPiA+ID4gSW4gc29tZSBjYXNlcywgdGhlIGluY29taW5nIGRvY3VtZW50
IGxpc3QgY2FuIGhhdmUgZHVwbGljYXRlcy4gRm9yCj4gPiBleGFtcGxlLAo+ID4gPiB3aGVuIGNy
ZWF0aW5nIHNwZWxsIGNoZWNraW5nIGluZGV4ZXMgZm9yIHBocmFzZXMuIEVhY2ggcGhyYXNlIGlz
IG9uZQo+ID4gPiBkb2N1bWVudC4gU28gSSB3YW50IHRvIGNoZWNrIHdoZXRoZXIgdGhlIHBocmFz
ZSBpcyBhbHJlYWR5IGluZGV4ZWQgb3IKPiA+IG5vdC4KPiA+ID4KPiA+ID4gVG8gZG8gc28sIEkg
Y2FuIGVpdGhlciBjcmVhdGUgYSBoYXNoIG1hcCBmb3IgYWxsIHRoZSBpbmRleGVkIHBocmFzZXMu
Cj4gQnV0Cj4gPiA+IHRoZSBoYXNoIG1hcCB3b3VsZCBjb25zdW1lIGEgbG90IG9mIG1lbW9yeS4K
PiA+ID4gQSBwb3NzaWJsZSBhbHRlcm5hdGl2ZSBpcyB0byBzZWFyY2ggZXhpc3RpbmcgaW5kZXgu
IEJ1dCByZW1lbWJlciB0aGUKPiA+IGluZGV4Cj4gPiA+IGlzIGJlaW5nIGNyZWF0ZWQsIGFuZCBu
b3QgYWxsIGNvbnRlbnRzIGFyZSBmbHVzaGVkIHRvIGRpc2sgeWV0Lgo+ID4gPgo+ID4gPiBJcyBp
dCBwb3NzaWJsZSB0byBxdWVyeSB0aGUgbm90LXlldC1jbG9zZWQgaW5kZXg/Cj4gPiA+Cj4gPiA+
IC0tCj4gPiA+IENocmlzIEx1Cj4gPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+ID4g
SW5zdGFudCBTY2FsYWJsZSBGdWxsLVRleHQgU2VhcmNoIE9uIEFueSBEYXRhYmFzZS9BcHBsaWNh
dGlvbgo+ID4gPiBzaXRlOiBodHRwOi8vd3d3LmRic2lnaHQubmV0Cj4gPiA+IGRlbW86IGh0dHA6
Ly9zZWFyY2guZGJzaWdodC5jb20KPiA+ID4gTHVjZW5lIERhdGFiYXNlIFNlYXJjaCBpbiAzIG1p
bnV0ZXM6Cj4gPiA+Cj4gPgo+IGh0dHA6Ly93aWtpLmRic2lnaHQuY29tL2luZGV4LnBocD90aXRs
ZT1DcmVhdGVfTHVjZW5lX0RhdGFiYXNlX1NlYXJjaF9pbl8zX21pbnV0ZXMKPiA+ID4gREJTaWdo
dCBjdXN0b21lciwgYSBzaG9wcGluZyBjb21wYXJpc29uIHNpdGUsIChhbm9ueW1vdXMgcGVyIHJl
cXVlc3QpCj4gZ290Cj4gPiA+IDIuNiBNaWxsaW9uIEV1cm8gZnVuZGluZyEKPiA+Cj4gPgo+ID4g
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCj4gPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJz
Y3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1h
aWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4gPgo+ID4KPgoKCgotLSAKwfXG
vbuqCgoKuePW3bTT0Mu159fTv6q3otPQz965q8u+Cgo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6
Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6
Ojo6OgoKCgoqOmlhbHkyMDA1IGF0IGdtYWlsLmNvbQoKKzq549bdytC549bdtPO1wMTPMzY4usUx
MkYgICA1MTAzMDAKCjo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6
Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6OgoKzfjVvqO6aHR0cDovL3d3dy5zZWFyY2hmdWxsLm5ldApC
bG9nOmh0dHA6Ly93d3cuc2VhcmNoZnVsbC5uZXQvYmxvZy8K
------=_Part_139384_10502240.1230609302416--

From java-user-return-37980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 06:32:41 2008
Return-Path: <java-user-return-37980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42135 invoked from network); 30 Dec 2008 06:32:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 06:32:41 -0000
Received: (qmail 33122 invoked by uid 500); 30 Dec 2008 06:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33090 invoked by uid 500); 30 Dec 2008 06:32:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33079 invoked by uid 99); 30 Dec 2008 06:32:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 22:32:33 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shalinmangar@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 06:32:23 +0000
Received: by wf-out-1314.google.com with SMTP id 28so5011460wfc.20
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 22:32:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=M55ymyc8V2lgKPqt9YV/P7lB5rqsQxkIGNNYKdExNk4=;
        b=HpG2XkoFKH/recblx/oV7llv0pYKyAbXR5vMyPVASBg1FFLVvyZCN94whLX6jEc4iE
         1abcDPaNQOFOwY7Rq+7ywsJMwOk35gj8AqrSFBpJPsCbHDBiXfNTRMyEUQyiVkRmrKwr
         AqBL4p5BmbI4HQ1utT9qNi2kTf3TyFLfMXyI0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=RTKBw7BKYQFVTD4mwT7GVDWzZG68c2Z1soZWGMy7xEjHVQ7uUxOmgaq1ZfGNRdSYcn
         7+H0BPwPNao2wCBlqTDtW0BD6FgXVPLZYZNbpjSONlg4j0sfXszV4sRbreXdDvzAoQii
         XixRPuW6vXK08Kdb2bMtPFvYJCiYPjqTVlYHU=
Received: by 10.143.156.12 with SMTP id i12mr5986953wfo.320.1230618722724;
        Mon, 29 Dec 2008 22:32:02 -0800 (PST)
Received: by 10.142.139.12 with HTTP; Mon, 29 Dec 2008 22:32:02 -0800 (PST)
Message-ID: <69de18140812292232n1301e8d1s8aff1ef1874c182@mail.gmail.com>
Date: Tue, 30 Dec 2008 12:02:02 +0530
From: "Shalin Shekhar Mangar" <shalinmangar@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexCommit#getFileNames() returning duplicates?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_129692_12381488.1230618722712"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_129692_12381488.1230618722712
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

Solr uses IndexCommit#getFileNames() to get a list of files for replication.
One windows user reported an exception which looks like it may have been
caused by IndexCommit#getFileNames() returning duplicate file names. The
exception in his case was caused by "_21e.tvx" coming more than once.

The problem was reported to be fixed after we used new
HashSet<String>(commit.getFileNames()).

I haven't been able to reproduce the bug but I was hoping people here would
know more about this. Solr is using the 2.9-dev version. Unfortunately, I
don't know which revision that user was using. However if it is of any help,
it should be one of r707499, r719351, r723985 or r724059.

You can see the original report at
http://markmail.org/message/xybvkcjx5kraqvoh

-- 
Regards,
Shalin Shekhar Mangar.

------=_Part_129692_12381488.1230618722712--

From java-user-return-37981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 06:33:16 2008
Return-Path: <java-user-return-37981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42369 invoked from network); 30 Dec 2008 06:33:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 06:33:15 -0000
Received: (qmail 35207 invoked by uid 500); 30 Dec 2008 06:33:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34934 invoked by uid 500); 30 Dec 2008 06:33:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34919 invoked by uid 99); 30 Dec 2008 06:33:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 22:33:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 06:32:59 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBU6WbdA018746
	for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 00:32:37 -0600
Received: (qmail 29262 invoked by uid 0); 30 Dec 2008 00:32:37 -0600
Date: 30 Dec 2008 00:32:37 -0600
Message-ID: <20081230063237.29261.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_IndexCommit#getFileNames=28=29_returning_duplicates=3F?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.02
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 332739637 - 0bc35bf87111
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=332739637&m=0bc35bf87111&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=332739637&m=0bc35bf87111&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=332739637&m=0bc35bf87111&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 06:33:47 2008
Return-Path: <java-user-return-37982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42532 invoked from network); 30 Dec 2008 06:33:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 06:33:47 -0000
Received: (qmail 36789 invoked by uid 500); 30 Dec 2008 06:33:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36643 invoked by uid 500); 30 Dec 2008 06:33:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36632 invoked by uid 99); 30 Dec 2008 06:33:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 22:33:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 06:33:31 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBU6XAuL012940
	for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 00:33:10 -0600
Received: (qmail 29630 invoked by uid 0); 30 Dec 2008 00:33:10 -0600
Date: 30 Dec 2008 00:33:10 -0600
Message-ID: <20081230063310.29629.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: =?utf-8?Q?Re:_Re:_IndexCommit#getFileNames=28=29_returning_duplicates=3F?=
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.02
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 332739741 - 7ba7d7769642
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=332739741&m=7ba7d7769642&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=332739741&m=7ba7d7769642&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=332739741&m=7ba7d7769642&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 07:57:16 2008
Return-Path: <java-user-return-37983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68973 invoked from network); 30 Dec 2008 07:57:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 07:57:16 -0000
Received: (qmail 82363 invoked by uid 500); 30 Dec 2008 07:57:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82324 invoked by uid 500); 30 Dec 2008 07:57:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82313 invoked by uid 99); 30 Dec 2008 07:57:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 29 Dec 2008 23:57:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aminmc@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 07:56:58 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1374163nfd.15
        for <java-user@lucene.apache.org>; Mon, 29 Dec 2008 23:56:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:references:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:cc;
        bh=pBc36/7zFckO4aVg3st2DdobRE7oqmcJ2M1b5iZ8Ivg=;
        b=TBllKwZ5yCp3TQW+J1x70bfO+IE8AlWgZO8P9QixwU1A0QcJa+oSCwZ+a6XXabziwG
         MVsfJD4+nOgZq+0zqVkHw7zqKB0eThAYPZ2LERVpr3j/YrCCa+R5K3YdUjd2jdf9T0dl
         2wRk7Z3TcZyJ3T78+3XHlTbAQjzflIf6c6suY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date:cc;
        b=IMR2F2jRM0Ab0iWtgTtykCTZudtPopclT5146iz+rUAln38Aeu+8FWfxLV3ON7iJvr
         ebzbV48I54BRLe9nVnGD6Im4f2mZPihrxAWERp7DKKOkfyzRZPLWI69PUY2X0Una4nUZ
         3UyzAo4NkH9rfW9E4ITNaQiCG+MM0GMiq6jSI=
Received: by 10.210.129.19 with SMTP id b19mr17014455ebd.40.1230623797681;
        Mon, 29 Dec 2008 23:56:37 -0800 (PST)
Received: from ?10.32.4.189? ([82.132.136.193])
        by mx.google.com with ESMTPS id d24sm39266107nfh.75.2008.12.29.23.56.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 29 Dec 2008 23:56:36 -0800 (PST)
References: <2E93DCB9-1072-4EB8-90BD-7AA036C8858D@gmail.com> <81148B83-B4B7-4A91-B4E8-8AF290E25C83@apache.org>
Message-Id: <E1C72934-6AAD-4BBF-8CF6-5FD30AA2164E@gmail.com>
From: Amin Mohammed-Coleman <aminmc@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <81148B83-B4B7-4A91-B4E8-8AF290E25C83@apache.org>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5G77)
Mime-Version: 1.0 (iPhone Mail 5G77)
Subject: Re: Field Not Present In Document
Date: Tue, 30 Dec 2008 07:56:31 +0000
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Thanks for your reply. It turns out you were correct and I was not  
loading the correct document. User error!


Cheers


Amin

On 28 Dec 2008, at 19:50, Grant Ingersoll <gsingers@apache.org> wrote:

> How do you know that document in question has an id of 1, as in when  
> you do:  Document documentFromIndex = indexReader.document(1)
>
> I would fire up Luke (http://www.getopt.org/luke) against your index  
> and see what is inside of it.
>
>
> On Dec 26, 2008, at 3:19 PM, Amin Mohammed-Coleman wrote:
>
>> Hi
>>
>> I have the following situation:
>>
>> Document document = new Document();
>>        String body ="This is a body of document";
>>        Field field = new Field("body", body, Field.Store.YES,  
>> Field.Index.ANALYZED);
>>        document.add(field);
>>
>>        String id ="1234";
>>        Field idField = new Field("id", id, Field.Store.YES,  
>> Field.Index.ANALYZED);
>>        document.add(idField);
>>        rtfIndexer.add(document);
>>        System.out.println(document.getFields());
>>
>>
>>
>> When I print the fields of the document I get the following:
>>
>>
>> stored/uncompressed,indexed,tokenized<body:This is a body of  
>> document>, stored/uncompressed,indexed,tokenized<id:1234>]
>>
>>
>> The RtfIndexer looks like this:
>>
>>    public void add(Document document) {
>>        IndexWriter rtfIndexWriter =  
>> IndexWriterFactory.createIndexWriter(rtfDirectory, analyzer);
>>        try {
>>            rtfIndexWriter.addDocument(document);
>>            LOGGER.debug("Added Document:" + document + " to index");
>>            commitAndOptimise(rtfIndexWriter);
>>        } catch (CorruptIndexException e) {
>>            throw new IllegalStateException(e);
>>        } catch (IOException e) {
>>            throw new IllegalStateException(e);
>>        }
>>    }
>>
>>    private void commitAndOptimise(IndexWriter rtfIndexWriter)  
>> throws CorruptIndexException,IOException {
>>        LOGGER.debug("Committing document and closing index writer");
>>        rtfIndexWriter.optimize();
>>        rtfIndexWriter.commit();
>>        rtfIndexWriter.close();
>>    }
>>
>>
>>
>> However I load the Document using the below code:
>>
>>        Directory directory = ((RtfIndexer)rtfIndexer).getDirectory();
>>        IndexReader indexReader = IndexReader.open(directory);
>>        Document documentFromIndex = indexReader.document(1);
>>        System.out.println(documentFromIndex.getFields());
>>
>> I get:
>>
>> [stored/uncompressed,indexed,tokenized<body:This is a body of  
>> document>]
>>
>>
>> It seems as though id field is not being stored in the Index...I  
>> can't understand why not as I can have added it to the document,
>>
>>
>> I would be grateful if anyone could help!
>>
>>
>> Cheers
>> Amin
>>
>> P.S. Merry Christmas!
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 09:03:42 2008
Return-Path: <java-user-return-37984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91638 invoked from network); 30 Dec 2008 09:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 09:03:42 -0000
Received: (qmail 21522 invoked by uid 500); 30 Dec 2008 09:03:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21493 invoked by uid 500); 30 Dec 2008 09:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21482 invoked by uid 99); 30 Dec 2008 09:03:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 01:03:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of claudia.cm.santos@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 09:03:26 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1918939fgb.27
        for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 01:03:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:subject
         :date:mime-version:content-type:x-priority:x-msmail-priority
         :x-mailer:x-mimeole;
        bh=Nyxr7l6EZpoovXNx6eU/gdxAawh06/cY6Ljt1ncWnLk=;
        b=yBd2jcUc1FldKs50isk9UqEtiLbrSt60DVjzFVb2sCtJzcyKTTIlI+ZEQgDQGm09gR
         POn3nep13izQnfUXNH0ThLY4fCcF3NxE/Ddjs7v1SQadt1q4ig5ADFpYzxrwtaJ3vKt6
         2ZptML7DjceF0sYeg/WI3CQ0j2UDakjXYONiY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:subject:date:mime-version:content-type
         :x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=xjuc4LeSQvesk0tqmx0bpiE/2RDE6AEyevrVu4a1N9FWARGDa0UtOYWOoLHlXPSNkG
         nC+uj9wVom8yhDYsaYqLFWRk8msJom1i5cfBEhKRF7GCXOAPLG8rbCaElXkNwrXKzXOf
         wjcmcASmzynaMMMYVQxBuajG0WXBG7e5xAJNU=
Received: by 10.86.84.18 with SMTP id h18mr8636651fgb.69.1230627785590;
        Tue, 30 Dec 2008 01:03:05 -0800 (PST)
Received: from intrepid (dsdf-4db58338.pool.einsundeins.de [77.181.131.56])
        by mx.google.com with ESMTPS id e20sm22502894fga.53.2008.12.30.01.03.04
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 30 Dec 2008 01:03:04 -0800 (PST)
Message-ID: <4F4AD93B957B4538A6186356A3718970@intrepid>
From: "Claudia Santos" <claudia.cm.santos@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Lucene retrieval model 
Date: Tue, 30 Dec 2008 10:03:03 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0048_01C96A65.CE2481F0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Windows Mail 6.0.6001.18000
X-MimeOLE: Produced By Microsoft MimeOLE V6.0.6001.18049
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0048_01C96A65.CE2481F0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hello,

I would like to know more about Lucene's retrieval model, more =
specifically
about the boolean model.
Is that a standard model or an extended model? I mean, it returns just =
documents that
match the boolean expression or include in the search result all =
Documents which correspond to the given conditions, regardless of
the boolean connectors - AND, OR, NOT and calculate a weight between 0 =
and 1 for all search results that contains at least one of the terms.=20
The extended model evaluates documents with only one of the terms with a =

smaller value than one that contains both.=20

In the Apache Lucene - Scoring's page i found not that much about:=20
"Lucene scoring uses a combination of the Vector Space Model (VSM) of
Information Retrieval and the Boolean model to determine how relevant a
given Document is to a User's query. In general, the idea behind the VSM =
is
the more times a query term appears in a document relative to the number =
of
times the term appears in all the documents in the collection, the more
relevant that document is to the query. It uses the Boolean model to =
first
narrow down the documents that need to be scored based on the use of =
boolean
logic in the Query specification. Lucene also adds some capabilities and
refinements onto this model to support boolean and fuzzy searching, but =
it
essentially remains a VSM based system at the heart."

Thanks in advance for any responses
------=_NextPart_000_0048_01C96A65.CE2481F0--


From java-user-return-37985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 09:14:00 2008
Return-Path: <java-user-return-37985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95232 invoked from network); 30 Dec 2008 09:13:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 09:13:59 -0000
Received: (qmail 32414 invoked by uid 500); 30 Dec 2008 09:13:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31409 invoked by uid 500); 30 Dec 2008 09:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31398 invoked by uid 99); 30 Dec 2008 09:13:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 01:13:52 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 09:13:39 +0000
Received: by rv-out-0506.google.com with SMTP id f6so6586310rvb.5
        for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 01:13:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=LuEW6wUOrLAfV9L6tneAvqZq/FL6/GMN9U1ejmG1guQ=;
        b=JzVAXQMqPIzlNl1RAtrk600k+0+jDn5eUG1aYflIgIgrt43SCtHSN9nUJaxrP3ZmvX
         XQ6Li87TpGsjB7r4mK/NkLi8ouSCdifa/+PV1vaHFsbw0bhy6h3zZG3PgTj7VoGJpn6q
         xyCCRGIbFeEhCnyYpm0O/pi83KWJYFwB5nfyI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KAMKwMadTf3hOnczQtgL/k0bOmDMiUpnfOHjCtqzahsQIcU91o3w98yGKTMZ9evN3L
         5nf/D5QFMkyrevXVhmflCrS5VRA+M0T9HQBI5y/0aJ2O2fLsi0B0AbCYsyN3tV24hHX/
         ALF91cSUz82AulrLU/ss2wJzD8gnCMEO4Q6J4=
Received: by 10.141.114.15 with SMTP id r15mr7208063rvm.42.1230628396319;
        Tue, 30 Dec 2008 01:13:16 -0800 (PST)
Received: by 10.140.127.7 with HTTP; Tue, 30 Dec 2008 01:13:16 -0800 (PST)
Message-ID: <6e3ae6310812300113j3700b7a2k8fe6329200c3c3fc@mail.gmail.com>
Date: Tue, 30 Dec 2008 01:13:16 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: duplication checking while indexing
In-Reply-To: <a632fad90812291955k5aac2612pe77c45bd7aa93b1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_113876_12887850.1230628396303"
References: <6e3ae6310812290155n1fa218c0na314757f28dae3fe@mail.gmail.com>
	 <566414.1893.qm@web50304.mail.re2.yahoo.com>
	 <6e3ae6310812291540h3cbcff9eqcd48ec01b577e588@mail.gmail.com>
	 <a632fad90812291955k5aac2612pe77c45bd7aa93b1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_113876_12887850.1230628396303
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

SkRCTSBpcyBzdXJlbHkgYSBiZXR0ZXIgd2F5IHRoYW4gaW4gbWVtb3J5IGhhc2ggbWFwLgpCdXQg
SSBmZWVsIHNpbmNlIGFsbCBwcmV2aW91cyBkb2N1bWVudHMgYXJlIGFscmVhZHkgaW4gdGhlIGlu
ZGV4LCBhbHRob3VnaApub3QgY2xvc2VkIHlldCwgdGhlcmUgc2hvdWxkIGJlIGEgd2F5IHRvIHJl
YWQgYWxsIHByZXZpb3VzIHRlcm1zLgpJdCdzIG9rIHRvIHVzZSBhZGRpdGlvbmFsIGRhdGEgc3Ry
dWN0dXJlLCBsaWtlIEpEQk0gb3IgaGFzaCBtYXAsIHRvCmR1cGxpY2F0ZSB0aGUgdGVybXMsIGlu
IG9yZGVyIHRvIGxvb2sgaXQgdXAuIEJ1dCBpdCBkb2Vzbid0IGZlZWwgcmlnaHQuCgotLSAKQ2hy
aXMgTHUKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpJbnN0YW50IFNjYWxhYmxlIEZ1bGwtVGV4
dCBTZWFyY2ggT24gQW55IERhdGFiYXNlL0FwcGxpY2F0aW9uCnNpdGU6IGh0dHA6Ly93d3cuZGJz
aWdodC5uZXQKZGVtbzogaHR0cDovL3NlYXJjaC5kYnNpZ2h0LmNvbQpMdWNlbmUgRGF0YWJhc2Ug
U2VhcmNoIGluIDMgbWludXRlczoKaHR0cDovL3dpa2kuZGJzaWdodC5jb20vaW5kZXgucGhwP3Rp
dGxlPUNyZWF0ZV9MdWNlbmVfRGF0YWJhc2VfU2VhcmNoX2luXzNfbWludXRlcwpEQlNpZ2h0IGN1
c3RvbWVyLCBhIHNob3BwaW5nIGNvbXBhcmlzb24gc2l0ZSwgKGFub255bW91cyBwZXIgcmVxdWVz
dCkgZ290CjIuNiBNaWxsaW9uIEV1cm8gZnVuZGluZyEKCk9uIE1vbiwgRGVjIDI5LCAyMDA4IGF0
IDc6NTUgUE0sIGxpdSBJdmFuIDxpYWx5MjAwNUBnbWFpbC5jb20+IHdyb3RlOgoKPiBJIHVzZSBK
REJNIHN0b3JlIGRvY3VtZW50J3Mga2V5IElELgo+Cj4gMjAwOC8xMi8zMCBDaHJpcyBMdSA8Y2hy
aXMubHVAZ21haWwuY29tPgo+Cj4gPiBPdGlzLCB0aGFua3MgZm9yIHRoZSBwb2ludGVyLgo+ID4g
SSB0aGluayB0aGUgcXVlc3Rpb24gY2FuIGJlOgo+ID4KPiA+ICBIb3cgdG8gYWNjZXNzIFRlcm1F
bnVtIG9yIFRlcm1JbmZvcyBkdXJpbmcgaW5kZXhpbmcuCj4gPgo+ID4gSWYgdGhpcyBpcyBwb3Nz
aWJsZSwgdGhpbmdzIHdvdWxkIGJlIGVhc2llci4KPiA+Cj4gPiAtLQo+ID4gQ2hyaXMgTHUKPiA+
IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+IEluc3RhbnQgU2NhbGFibGUgRnVsbC1UZXh0
IFNlYXJjaCBPbiBBbnkgRGF0YWJhc2UvQXBwbGljYXRpb24KPiA+IHNpdGU6IGh0dHA6Ly93d3cu
ZGJzaWdodC5uZXQKPiA+IGRlbW86IGh0dHA6Ly9zZWFyY2guZGJzaWdodC5jb20KPiA+IEx1Y2Vu
ZSBEYXRhYmFzZSBTZWFyY2ggaW4gMyBtaW51dGVzOgo+ID4KPiA+Cj4gaHR0cDovL3dpa2kuZGJz
aWdodC5jb20vaW5kZXgucGhwP3RpdGxlPUNyZWF0ZV9MdWNlbmVfRGF0YWJhc2VfU2VhcmNoX2lu
XzNfbWludXRlcwo+ID4gREJTaWdodCBjdXN0b21lciwgYSBzaG9wcGluZyBjb21wYXJpc29uIHNp
dGUsIChhbm9ueW1vdXMgcGVyIHJlcXVlc3QpIGdvdAo+ID4gMi42IE1pbGxpb24gRXVybyBmdW5k
aW5nIQo+ID4KPiA+ICBPbiBNb24sIERlYyAyOSwgMjAwOCBhdCAxMDo0MSBBTSwgT3RpcyBHb3Nw
b2RuZXRpYyA8Cj4gPiBvdGlzX2dvc3BvZG5ldGljQHlhaG9vLmNvbT4gd3JvdGU6Cj4gPgo+ID4g
PiBDaHJpcywKPiA+ID4KPiA+ID4gTWFyayBNaWxsZXIgJiBDby4gYXJlIHdvcmtpbmcgb24gKE5l
YXIpIER1cGxpY2F0ZSBEZXRlY3Rpb24uICBJIHRoaW5rCj4gdGhlCj4gPiA+IHdvcmsgaXMgaW4g
U29scidzIEpJUkEsIGJ1dCBzb21lIG9mIGl0IG1pZ2h0IGJlIGFwcGxpY2FibGUgdG8gTHVjZW5l
Lgo+ID4gPgo+ID4gPiAgT3Rpcwo+ID4gPiAtLQo+ID4gPiBTZW1hdGV4dCAtLSBodHRwOi8vc2Vt
YXRleHQuY29tLyAtLSBMdWNlbmUgLSBTb2xyIC0gTnV0Y2gKPiA+ID4KPiA+ID4KPiA+ID4KPiA+
ID4gLS0tLS0gT3JpZ2luYWwgTWVzc2FnZSAtLS0tCj4gPiA+ID4gRnJvbTogQ2hyaXMgTHUgPGNo
cmlzLmx1QGdtYWlsLmNvbT4KPiA+ID4gPiBUbzogImphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9y
ZyIgPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZz4KPiA+ID4gPiBTZW50OiBNb25kYXksIERl
Y2VtYmVyIDI5LCAyMDA4IDQ6NTU6MTQgQU0KPiA+ID4gPiBTdWJqZWN0OiBkdXBsaWNhdGlvbiBj
aGVja2luZyB3aGlsZSBpbmRleGluZwo+ID4gPiA+Cj4gPiA+ID4gSSBhbSB3b25kZXJpbmcgd2hl
dGhlciB0aGVyZSBpcyBhbiBlYXN5IHdheSB0byBhdm9pZCBkdXBsaWNhdGlvbgo+IHdoaWxlCj4g
PiA+ID4gaW5kZXhpbmcsIGp1c3QgdXNpbmcgdGhlIGluZGV4IGJlaW5nIGNyZWF0ZWQsIHdpdGhv
dXQgY3JlYXRpbmcgb3RoZXIKPiA+IGRhdGEKPiA+ID4gPiBzdHJ1Y3R1cmVzLgo+ID4gPiA+IElu
IHNvbWUgY2FzZXMsIHRoZSBpbmNvbWluZyBkb2N1bWVudCBsaXN0IGNhbiBoYXZlIGR1cGxpY2F0
ZXMuIEZvcgo+ID4gPiBleGFtcGxlLAo+ID4gPiA+IHdoZW4gY3JlYXRpbmcgc3BlbGwgY2hlY2tp
bmcgaW5kZXhlcyBmb3IgcGhyYXNlcy4gRWFjaCBwaHJhc2UgaXMgb25lCj4gPiA+ID4gZG9jdW1l
bnQuIFNvIEkgd2FudCB0byBjaGVjayB3aGV0aGVyIHRoZSBwaHJhc2UgaXMgYWxyZWFkeSBpbmRl
eGVkIG9yCj4gPiA+IG5vdC4KPiA+ID4gPgo+ID4gPiA+IFRvIGRvIHNvLCBJIGNhbiBlaXRoZXIg
Y3JlYXRlIGEgaGFzaCBtYXAgZm9yIGFsbCB0aGUgaW5kZXhlZCBwaHJhc2VzLgo+ID4gQnV0Cj4g
PiA+ID4gdGhlIGhhc2ggbWFwIHdvdWxkIGNvbnN1bWUgYSBsb3Qgb2YgbWVtb3J5Lgo+ID4gPiA+
IEEgcG9zc2libGUgYWx0ZXJuYXRpdmUgaXMgdG8gc2VhcmNoIGV4aXN0aW5nIGluZGV4LiBCdXQg
cmVtZW1iZXIgdGhlCj4gPiA+IGluZGV4Cj4gPiA+ID4gaXMgYmVpbmcgY3JlYXRlZCwgYW5kIG5v
dCBhbGwgY29udGVudHMgYXJlIGZsdXNoZWQgdG8gZGlzayB5ZXQuCj4gPiA+ID4KPiA+ID4gPiBJ
cyBpdCBwb3NzaWJsZSB0byBxdWVyeSB0aGUgbm90LXlldC1jbG9zZWQgaW5kZXg/Cj4gPiA+ID4K
PiA+ID4gPiAtLQo+ID4gPiA+IENocmlzIEx1Cj4gPiA+ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLQo+ID4gPiA+IEluc3RhbnQgU2NhbGFibGUgRnVsbC1UZXh0IFNlYXJjaCBPbiBBbnkgRGF0
YWJhc2UvQXBwbGljYXRpb24KPiA+ID4gPiBzaXRlOiBodHRwOi8vd3d3LmRic2lnaHQubmV0Cj4g
PiA+ID4gZGVtbzogaHR0cDovL3NlYXJjaC5kYnNpZ2h0LmNvbQo+ID4gPiA+IEx1Y2VuZSBEYXRh
YmFzZSBTZWFyY2ggaW4gMyBtaW51dGVzOgo+ID4gPiA+Cj4gPiA+Cj4gPgo+IGh0dHA6Ly93aWtp
LmRic2lnaHQuY29tL2luZGV4LnBocD90aXRsZT1DcmVhdGVfTHVjZW5lX0RhdGFiYXNlX1NlYXJj
aF9pbl8zX21pbnV0ZXMKPiA+ID4gPiBEQlNpZ2h0IGN1c3RvbWVyLCBhIHNob3BwaW5nIGNvbXBh
cmlzb24gc2l0ZSwgKGFub255bW91cyBwZXIgcmVxdWVzdCkKPiA+IGdvdAo+ID4gPiA+IDIuNiBN
aWxsaW9uIEV1cm8gZnVuZGluZyEKPiA+ID4KPiA+ID4KPiA+ID4gLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gPiA+
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBh
Y2hlLm9yZwo+ID4gPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXIt
aGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gPgo+ID4gPgo+ID4KPgo+Cj4KPiAtLQo+IMH1xr27
qgo+Cj4KPiC549bdtNPQy7Xn19O/qrei09DP3rmry74KPgo+Cj4gOjo6Ojo6Ojo6Ojo6Ojo6Ojo6
Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6
Ojo6Ojo6Ojo6OjoKPgo+Cj4KPiAqOmlhbHkyMDA1IGF0IGdtYWlsLmNvbQo+Cj4gKzq549bdytC5
49bdtPO1wMTPMzY4usUxMkYgICA1MTAzMDAKPgo+IDo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6
Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ojo6Ogo+Cj4gzfjVvqO6aHR0cDov
L3d3dy5zZWFyY2hmdWxsLm5ldAo+IEJsb2c6aHR0cDovL3d3dy5zZWFyY2hmdWxsLm5ldC9ibG9n
Lwo+Cg==
------=_Part_113876_12887850.1230628396303--

From java-user-return-37986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 10:30:13 2008
Return-Path: <java-user-return-37986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36989 invoked from network); 30 Dec 2008 10:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 10:30:13 -0000
Received: (qmail 83759 invoked by uid 500); 30 Dec 2008 10:30:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83731 invoked by uid 500); 30 Dec 2008 10:30:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83720 invoked by uid 99); 30 Dec 2008 10:30:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 02:30:05 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.136.44.189] (HELO n64.bullet.mail.sp1.yahoo.com) (98.136.44.189)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Dec 2008 10:29:53 +0000
Received: from [69.147.84.144] by n64.bullet.mail.sp1.yahoo.com with NNFMP; 30 Dec 2008 10:29:31 -0000
Received: from [67.195.9.81] by t6.bullet.mail.sp1.yahoo.com with NNFMP; 30 Dec 2008 10:29:31 -0000
Received: from [67.195.9.105] by t1.bullet.mail.gq1.yahoo.com with NNFMP; 30 Dec 2008 10:29:31 -0000
Received: from [127.0.0.1] by omp109.mail.gq1.yahoo.com with NNFMP; 30 Dec 2008 10:29:31 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 612820.84161.bm@omp109.mail.gq1.yahoo.com
Received: (qmail 56950 invoked by uid 60001); 30 Dec 2008 10:29:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=ymail.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=A8iSkWwJhIBeY76IVLZTmyUmlxH5y8ONKCIrZTNb1bWI/mWOmRF5Rrx5gb+oQTmB/IQfX3dFG7/2qSqXsNQ2ANomtk5DVbEs1WvXlO9eu1znyS4MLN7MRYnVqAfit5t+MOpD7gBpbtxH7Dwknawaj9I19uFu9xTXYahFn32ig60=;
X-YMail-OSG: Z3jh3KIVM1mYT0zUlxH8yHC8pcgPxTmgs.urE88um0lshKiwyaROFsKKuPEmHgQ89SesNrPiQBuA5gYvCsn5yDrWFfvRAFdgLaQQa0dBiXWc8KIr6PNX5dLdNPuzFZWDhkXy5eTn0wcLEmE66iii6Um369hG
Received: from [217.205.40.94] by web112210.mail.gq1.yahoo.com via HTTP; Tue, 30 Dec 2008 02:29:31 PST
X-Mailer: YahooMailRC/1156.77 YahooMailWebService/0.7.260.1
Date: Tue, 30 Dec 2008 02:29:31 -0800 (PST)
From: Lebiram <lebiram@ymail.com>
Subject: Extract the text that was indexed
To: Lucene Mailing-List <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-141490314-1230632971=:56701"
Message-ID: <410194.56701.qm@web112210.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-141490314-1230632971=:56701
Content-Type: text/plain; charset=us-ascii

Hi All, 

Is it possible to extract the text that was indexed but not stored for a field in a document? 

Right now, reader.document() returns only fields that was stored. However I'd also want to get the text on the indexed only field...

I'd appreciate your help



      
--0-141490314-1230632971=:56701--


From java-user-return-37987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 11:16:00 2008
Return-Path: <java-user-return-37987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46947 invoked from network); 30 Dec 2008 11:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 11:15:59 -0000
Received: (qmail 29168 invoked by uid 500); 30 Dec 2008 11:15:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28928 invoked by uid 500); 30 Dec 2008 11:15:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28917 invoked by uid 99); 30 Dec 2008 11:15:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 03:15:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 11:15:42 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.8/8.13.8) with ESMTP id mBUBFK1d062774
	for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 12:15:20 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene retrieval model
Date: Tue, 30 Dec 2008 12:09:17 +0100
User-Agent: KMail/1.9.10
References: <4F4AD93B957B4538A6186356A3718970@intrepid>
In-Reply-To: <4F4AD93B957B4538A6186356A3718970@intrepid>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200812301209.18041.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Tuesday 30 December 2008 10:03:03 schreef Claudia Santos:
> Hello,
>
> I would like to know more about Lucene's retrieval model, more
> specifically about the boolean model.
> Is that a standard model or an extended model? I mean, it returns
> just documents that match the boolean expression or include in the
> search result all Documents which correspond to the given conditions,
> regardless of the boolean connectors - AND, OR, NOT and calculate a
> weight between 0 and 1 for all search results that contains at least
> one of the terms. The extended model evaluates documents with only
> one of the terms with a smaller value than one that contains both.
>
> In the Apache Lucene - Scoring's page i found not that much about:
> "Lucene scoring uses a combination of the Vector Space Model (VSM) of
> Information Retrieval and the Boolean model to determine how relevant
> a given Document is to a User's query. In general, the idea behind
> the VSM is the more times a query term appears in a document relative
> to the number of times the term appears in all the documents in the
> collection, the more relevant that document is to the query. It uses
> the Boolean model to first narrow down the documents that need to be
> scored based on the use of boolean logic in the Query specification.
> Lucene also adds some capabilities and refinements onto this model to
> support boolean and fuzzy searching, but it essentially remains a VSM
> based system at the heart."
>

A somewhat refined Boolean model is used to determine a set of
documents, and only for documents in that set a score value
is calculated according the Lucene VSM model.

The Boolean model in Lucene does not directly use the standard
boolean connectors. Instead of that, each clause
(term, subquery) is either required, optional or prohibited.
The required and prohibited clauses determine a set of
documents to be scored in the normal Boolean AND/NOT way.

The refinement in the Boolean model is for the optional clauses:
a minimum number of optional clauses may be required for
documents to be part of the set that is scored.
The normal Boolean OR operator has 1 as that minimum number,
and in Lucene this minimum defaults to 1 when no required clauses
are present.

The required clauses and the optional clauses contribute to the score.
One might consider the scoring of the optional clauses to be an
implementation of the extended Boolean model.

Fuzzy searching is implemented by constructing a Boolean query
with optional (and actually present) terms that are similar enough to
the fuzzy query term.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 12:28:36 2008
Return-Path: <java-user-return-37988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78947 invoked from network); 30 Dec 2008 12:28:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 12:28:35 -0000
Received: (qmail 13539 invoked by uid 500); 30 Dec 2008 12:28:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13506 invoked by uid 500); 30 Dec 2008 12:28:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13495 invoked by uid 99); 30 Dec 2008 12:28:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 04:28:27 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.218.16] (HELO mail-bw0-f16.google.com) (209.85.218.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 12:28:19 +0000
Received: by bwz9 with SMTP id 9so13193606bwz.5
        for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 04:27:56 -0800 (PST)
Received: by 10.223.113.194 with SMTP id b2mr10637243faq.80.1230640075952;
        Tue, 30 Dec 2008 04:27:55 -0800 (PST)
Received: by 10.223.103.210 with HTTP; Tue, 30 Dec 2008 04:27:55 -0800 (PST)
Message-ID: <9ac0c6aa0812300427t221d57c5m1ef29df1251e4246@mail.gmail.com>
Date: Tue, 30 Dec 2008 07:27:55 -0500
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Subject: Re: IndexCommit#getFileNames() returning duplicates?
In-Reply-To: <69de18140812292232n1301e8d1s8aff1ef1874c182@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13528_25616380.1230640075948"
References: <69de18140812292232n1301e8d1s8aff1ef1874c182@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13528_25616380.1230640075948
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK I think I see what's going on here... I'll open an issue & fix it.
 Thanks Shalin!
Mike

Shalin Shekhar Mangar <shalinmangar@gmail.com> wrote:

> Hello,
>
> Solr uses IndexCommit#getFileNames() to get a list of files for
> replication.
> One windows user reported an exception which looks like it may have been
> caused by IndexCommit#getFileNames() returning duplicate file names. The
> exception in his case was caused by "_21e.tvx" coming more than once.
>
> The problem was reported to be fixed after we used new
> HashSet<String>(commit.getFileNames()).
>
> I haven't been able to reproduce the bug but I was hoping people here would
> know more about this. Solr is using the 2.9-dev version. Unfortunately, I
> don't know which revision that user was using. However if it is of any
> help,
> it should be one of r707499, r719351, r723985 or r724059.
>
> You can see the original report at
> http://markmail.org/message/xybvkcjx5kraqvoh
>
> --
> Regards,
> Shalin Shekhar Mangar.
>

------=_Part_13528_25616380.1230640075948--

From java-user-return-37989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 12:32:13 2008
Return-Path: <java-user-return-37989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81073 invoked from network); 30 Dec 2008 12:32:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 12:32:13 -0000
Received: (qmail 18146 invoked by uid 500); 30 Dec 2008 12:32:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18104 invoked by uid 500); 30 Dec 2008 12:32:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18093 invoked by uid 99); 30 Dec 2008 12:32:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 04:32:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.aristov@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 12:32:00 +0000
Received: by rv-out-0506.google.com with SMTP id f6so6671389rvb.5
        for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 04:31:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=7hfFMXjU5AxiwmSLd7I9E7H5K0AhTLR8AR67r/SsLcA=;
        b=m6VltPNeEiiAuLYlxh2LRBhzwhPi0DgKyyXvffeKRZr0qv1akF2K2Iy61EsTqqT3PO
         y7T/6MI8SSJkJLS7ZUOmluuOBC61oxTHEgAA/Ia0YKY5vod8qnTpT4oMs8/dnCcyen0T
         KyiK5CTUL4l/rgVfagiIPCMM+PQkJmHZGJhlI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=mxX7ZFxwzaFWJIhOzZ5nh8ECT3olXLUi8LM13xQDz4AylVi4rWXSE65gQmBIl7JGCB
         BAlNjl2UlkxjJxRTwQYNtg+ILDjFoWBm/gIUBLU8+9Dx5brI24Ua++QrmB2cfRPTdMOZ
         Qqrl27Rd4IQNWi6qSXfX1S1yYTqhiXs+m+HMA=
Received: by 10.142.254.8 with SMTP id b8mr6123527wfi.144.1230640300521;
        Tue, 30 Dec 2008 04:31:40 -0800 (PST)
Received: by 10.142.104.5 with HTTP; Tue, 30 Dec 2008 04:31:40 -0800 (PST)
Message-ID: <11975c90812300431h31c9719w50a367a2ee80a1c@mail.gmail.com>
Date: Tue, 30 Dec 2008 15:31:40 +0300
From: "Alexander Aristov" <alexander.aristov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extract the text that was indexed
In-Reply-To: <410194.56701.qm@web112210.mail.gq1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_168687_25797063.1230640300515"
References: <410194.56701.qm@web112210.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_168687_25797063.1230640300515
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am not sure but from my understanding fields that are only indexed and not
stored do not keep position. So even if you get back all terms for a field
for a given document you won't be able to reconstruct original words
sequence.

And remember that not all words are indexed.

Alex

2008/12/30 Lebiram <lebiram@ymail.com>

> Hi All,
>
> Is it possible to extract the text that was indexed but not stored for a
> field in a document?
>
> Right now, reader.document() returns only fields that was stored. However
> I'd also want to get the text on the indexed only field...
>
> I'd appreciate your help
>
>
>
>




-- 
Best Regards
Alexander Aristov

------=_Part_168687_25797063.1230640300515--

From java-user-return-37990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 13:53:37 2008
Return-Path: <java-user-return-37990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15239 invoked from network); 30 Dec 2008 13:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 13:53:36 -0000
Received: (qmail 96639 invoked by uid 500); 30 Dec 2008 13:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96420 invoked by uid 500); 30 Dec 2008 13:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96409 invoked by uid 99); 30 Dec 2008 13:53:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 05:53:29 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.176.40] (HELO web26503.mail.ukl.yahoo.com) (217.146.176.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Dec 2008 13:53:19 +0000
Received: (qmail 92168 invoked by uid 60001); 30 Dec 2008 13:52:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:Cc:MIME-Version:Content-Type:Message-ID;
  b=HlUKQlkzweDjVLeIFIH090ZmoHjWDvwvOS3oeg+P5ury2GtpMumvUJnQg7j7v1F4vQuaIaCyvzRg6cTc1ab5tHNuWgY8OoGlTuncx72QdT1Z0fw3LxMGXJPJ2JOv9yVUvKIxlYK4Lhgr4JxqYOwYJsoTqdsBrgr6PWyKPVvJbuk=;
X-YMail-OSG: UQqgvv4VM1luUWDAJCsKQEniDTb_l.VZ3HbKdUYOFRZ82tOJ2qG0K0T00aNhIkvCdTuvkJfZHdDs0dpWOuF7SUnRGvcg_doRAXYnkYDbkSjYWOwbznu4TWTA1it94HsQJsEn3u8i3gFjvcnSLbW7B5SK5RtPWZQBbs2tDPY5TRRntk1BwyKuTn15yseYOg--
Received: from [82.66.133.250] by web26503.mail.ukl.yahoo.com via HTTP; Tue, 30 Dec 2008 13:52:57 GMT
X-Mailer: YahooMailWebService/0.7.260.1
Date: Tue, 30 Dec 2008 13:52:57 +0000 (GMT)
From: legrand thomas <thomaslegrand14@yahoo.fr>
Reply-To: thomaslegrand14@yahoo.fr
Subject: Filtering accents
To: java-user@lucene.apache.org
Cc: francois.vanhille@hotmail.fr
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1244224898-1230645177=:91928"
Message-ID: <547401.91928.qm@web26503.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1244224898-1230645177=:91928
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Dear all,

I'd like my lucene searches to be insensitive to (French) accents. For exam=
ple, considering a indexed term "m=C3=A9tal", I want to get it when searchi=
ng for "metal" or "m=C3=A9tal" . I use lucene-2.3.2 and the searches are pe=
rformed with: IndexSearcher.search(query,filter,sorter), Another filter is =
already used together with a "Sort" object. Futrhermore, I cannot use the F=
renchAnalyzer as my index does not only contain French words.

Can anybody help ?
Thanks in advance,
Tom
=0A=0A=0A      
--0-1244224898-1230645177=:91928--

From java-user-return-37991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 14:23:06 2008
Return-Path: <java-user-return-37991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38061 invoked from network); 30 Dec 2008 14:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 14:23:06 -0000
Received: (qmail 19857 invoked by uid 500); 30 Dec 2008 14:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19826 invoked by uid 500); 30 Dec 2008 14:22:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19812 invoked by uid 99); 30 Dec 2008 14:22:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 06:22:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 14:22:50 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id mBUEMRMP000824
	for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 09:22:28 -0500 (EST)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <495A2E9C.8040900@informatics.jax.org>
Date: Tue, 30 Dec 2008 09:22:20 -0500
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Filtering accents
References: <547401.91928.qm@web26503.mail.ukl.yahoo.com>
In-Reply-To: <547401.91928.qm@web26503.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.4.6.353000, Antispam-Engine: 2.6.1.350677, Antispam-Data: 2008.12.30.140713
X-PerlMx-Spam: Gauge=IIIIIIII, Probability=8%, Report='LEO_OBFU_SUBJ_RE 0.1, SUPERLONG_LINE 0.05, BODY_SIZE_1200_1299 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

If you are constrained in such a way as to not use the French Analyzer 
you might instead consider transforming the input as an additional step 
at both search/indexing time.

Use something like a regex that looks for  and always replaces it with 
e in the index, and at search time.  (expand this transformation step as 
needed)

You likely also need to store the original word somewhere, so I would 
suggest adding a second stored, but unindexed field that stores the 
original value of the word, so when you match on your search criteria, 
you will also get the original form of the word in your hits object.

Hope this helps,

Matt

egrand thomas wrote:
> Dear all,
>
> I'd like my lucene searches to be insensitive to (French) accents. For example, considering a indexed term "mtal", I want to get it when searching for "metal" or "mtal" . I use lucene-2.3.2 and the searches are performed with: IndexSearcher.search(query,filter,sorter), Another filter is already used together with a "Sort" object. Futrhermore, I cannot use the FrenchAnalyzer as my index does not only contain French words.
>
> Can anybody help ?
> Thanks in advance,
> Tom
>
>
>
>       
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 14:37:32 2008
Return-Path: <java-user-return-37992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45134 invoked from network); 30 Dec 2008 14:37:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 14:37:32 -0000
Received: (qmail 32302 invoked by uid 500); 30 Dec 2008 14:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32258 invoked by uid 500); 30 Dec 2008 14:37:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32247 invoked by uid 99); 30 Dec 2008 14:37:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 06:37:25 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 64.233.170.188 as permitted sender)
Received: from [64.233.170.188] (HELO rn-out-0910.google.com) (64.233.170.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 14:37:18 +0000
Received: by rn-out-0910.google.com with SMTP id j71so3482450rne.4
        for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 06:36:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JovdPwgHMa3tt/sw9B8UenuMXnG9ueL1yZNdYK7zxTE=;
        b=e43ttFS59ynjfcsRtvXe4xGIDamhgtoml1Zkf877FCSVcn4NcVYUboCieC7+JiUFoA
         JCbPVp8cxXRgvQe5WgySfcFoPN+QS1Ubk9bLmZfVlFao3k7Kw0P4Z9MSTayeQvidb+8I
         1IFpi1Ucak0pNkwdTOwJWCxMuSciApZ5C5kik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=PyBMeUzTiF7dREpgSA7ZoevxiVSjikAzdJjjx/hTrMqnkkqB1/Pi9Xh0VAnbumYU01
         WX5C8fgPtIDKAlpV8HxXFk/BxPUyUvFCwEesXKW6qAA43qklGziC+FsOMi9E6gfphutN
         zEKWPBueQRDaXbeRSo+AAdw+DGqIgMODWHo74=
Received: by 10.100.128.2 with SMTP id a2mr8319812and.158.1230647817974;
        Tue, 30 Dec 2008 06:36:57 -0800 (PST)
Received: by 10.100.10.7 with HTTP; Tue, 30 Dec 2008 06:36:57 -0800 (PST)
Message-ID: <b63a7e9e0812300636h56477096r99acd43426a26d10@mail.gmail.com>
Date: Tue, 30 Dec 2008 09:36:57 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filtering accents
In-Reply-To: <495A2E9C.8040900@informatics.jax.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101700_15559224.1230647817666"
References: <547401.91928.qm@web26503.mail.ukl.yahoo.com>
	 <495A2E9C.8040900@informatics.jax.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101700_15559224.1230647817666
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Just thought I'd comment since I had to do word processing before indexing
in my application as well.  Matt's method is pretty similar to what I did.
I wrote a filter that transforms the tokens as they get indexed (and also
use that for searching).  Since I am indexing a block of words, rather than
one document per word, I store the word in its original form in the payload
of the token so I can retrieve it from the search.  If your documents
contain one word each, then Matt's suggestion of a stored field would be the
right way to go.  If not, I would suggest using payloads.

- Greg

------=_Part_101700_15559224.1230647817666--

From java-user-return-37993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 14:41:01 2008
Return-Path: <java-user-return-37993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46888 invoked from network); 30 Dec 2008 14:41:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 14:41:01 -0000
Received: (qmail 37644 invoked by uid 500); 30 Dec 2008 14:40:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37617 invoked by uid 500); 30 Dec 2008 14:40:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37606 invoked by uid 99); 30 Dec 2008 14:40:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 06:40:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 209.85.132.242 as permitted sender)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 14:40:47 +0000
Received: by an-out-0708.google.com with SMTP id b2so1484489ana.5
        for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 06:40:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=chHx+Xm6dSXGLfswwMw9oyvTg/cXftGkK111rApc1J0=;
        b=m/u0ONzEstTKihWAiL90LoI5rGeiqVE4wwsG6/iTAuiXoj4WqBm37knBKJW23pKsyq
         H51jMvs9sRevPc3al2iDeDomnwGkJvO/k3Lc8UuuvBPwhHRBcDDQ+ciycgqhiIPycHMS
         xNyPu6yRLn5LBBzuVmVtmLXLEO+eqFzdkk7U0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Y0gWrDtincwCV2fybbb0Dgj9PPYR66g+yxeyuQDcOhiQe2POoZfxONNiCXmHhnja4N
         D/zPCAVBAtX7DTHQj+VeKInJAFstGplvBQYmDoHpkF/I00J2shy8IjJM3cY16krWAK0c
         rMnFgFCeLuhKnoVoij0TMZT2Ckjzyfv/2ZeCY=
Received: by 10.101.68.19 with SMTP id v19mr8346948ank.58.1230648026059;
        Tue, 30 Dec 2008 06:40:26 -0800 (PST)
Received: by 10.100.10.7 with HTTP; Tue, 30 Dec 2008 06:40:26 -0800 (PST)
Message-ID: <b63a7e9e0812300640x2a197cceu4cc83d0b130b3ada@mail.gmail.com>
Date: Tue, 30 Dec 2008 09:40:26 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extract the text that was indexed
In-Reply-To: <11975c90812300431h31c9719w50a367a2ee80a1c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_101722_30632327.1230648026053"
References: <410194.56701.qm@web112210.mail.gq1.yahoo.com>
	 <11975c90812300431h31c9719w50a367a2ee80a1c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_101722_30632327.1230648026053
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That is my understanding of it too.  Terms in the index will point to the
position of the tokens they map to.  Since one index term can point at any
number of tokens, this isn't a sequence map, but just a search map.  If you
still have the text that was indexed you could run it through an analyzer
and observe the tokens as they go through.

- Greg

On Tue, Dec 30, 2008 at 7:31 AM, Alexander Aristov <
alexander.aristov@gmail.com> wrote:

> I am not sure but from my understanding fields that are only indexed and
> not
> stored do not keep position. So even if you get back all terms for a field
> for a given document you won't be able to reconstruct original words
> sequence.
>
> And remember that not all words are indexed.
>
> Alex
>
> 2008/12/30 Lebiram <lebiram@ymail.com>
>
> > Hi All,
> >
> > Is it possible to extract the text that was indexed but not stored for a
> > field in a document?
> >
> > Right now, reader.document() returns only fields that was stored. However
> > I'd also want to get the text on the indexed only field...
> >
> > I'd appreciate your help
> >
> >
> >
> >
>
>
>
>
> --
> Best Regards
> Alexander Aristov
>

------=_Part_101722_30632327.1230648026053--

From java-user-return-37994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 15:36:07 2008
Return-Path: <java-user-return-37994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74237 invoked from network); 30 Dec 2008 15:36:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 15:36:07 -0000
Received: (qmail 83562 invoked by uid 500); 30 Dec 2008 15:36:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83517 invoked by uid 500); 30 Dec 2008 15:36:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83506 invoked by uid 99); 30 Dec 2008 15:36:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 07:36:00 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.46.29 as permitted sender)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 15:35:54 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1552613ywj.5
        for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 07:35:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Vxf63+dbPC/R1m2eV8Dwv13/CoxCaEZ+SX0OE5ahtXc=;
        b=orJzC4obuguLIjuGwOkIXJqSNmD9k3HHp0nT57QvsgH1ivM5YRhtwqSjjxqF5iS7iE
         3wtBsEgsaItCn09toGlvqqVvBtqpJWIw2oUVTx7LSs6qkJJsQdCEoKbxtJMktpfY4092
         bA2UU8Sda8MEbFM3aKy+Z7Ke8xKcZuCaQKVnQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KgKKSeE1gPAaWogB4Bs1aD07zbUTbG16EVg8bqGw+k4gR+mjdgCysTNCaki7/6A90H
         uuLn+dp78QGCJvnJ8C61GfSlCGX2anpWskvyY35mzxEffOo58lZ04swyhczoqMI+LoK9
         dXXOHWlde5tV/FtEMFN7YFpMA3tBXNdHdxrG4=
Received: by 10.90.72.3 with SMTP id u3mr7088539aga.24.1230651333333;
        Tue, 30 Dec 2008 07:35:33 -0800 (PST)
Received: by 10.90.93.1 with HTTP; Tue, 30 Dec 2008 07:35:33 -0800 (PST)
Message-ID: <359a92830812300735k7370b915t7cde710a537225a0@mail.gmail.com>
Date: Tue, 30 Dec 2008 10:35:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, thomaslegrand14@yahoo.fr
Subject: Re: Filtering accents
In-Reply-To: <547401.91928.qm@web26503.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_127318_29094443.1230651333327"
References: <547401.91928.qm@web26503.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_127318_29094443.1230651333327
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

You might want to take a look at using the ISOLatinAccentFilter or similar
at
both index and query time. It basically folds accented characters into thei=
r
un-accented form.

Matthew:

You wrote:
<<<so I would suggest adding a second stored, but unindexed field that
stores
the original value >>>

I also did this before realizing that the second field is unnecessary.
Storing is
orthogonal to indexing. That is, the filters are NOT applied to the stored
data.
>From the docs for Field.Store.YES (emphasis mine)

<<<Store the original field value in the index. This is useful for short
texts like a
document's title which should be displayed with the results. The value is
stored
in its original form, *i.e. no analyzer is used before it is stored*.>>>

I don't think it makes much/any real performance difference, but it does
make the
code simpler to use just one field...

Best
Erick


On Tue, Dec 30, 2008 at 8:52 AM, legrand thomas <thomaslegrand14@yahoo.fr>w=
rote:

> Dear all,
>
> I'd like my lucene searches to be insensitive to (French) accents. For
> example, considering a indexed term "m=E9tal", I want to get it when sear=
ching
> for "metal" or "m=E9tal" . I use lucene-2.3.2 and the searches are perfor=
med
> with: IndexSearcher.search(query,filter,sorter), Another filter is alread=
y
> used together with a "Sort" object. Futrhermore, I cannot use the
> FrenchAnalyzer as my index does not only contain French words.
>
> Can anybody help ?
> Thanks in advance,
> Tom
>
>
>
>

------=_Part_127318_29094443.1230651333327--

From java-user-return-37995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 15:42:21 2008
Return-Path: <java-user-return-37995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76800 invoked from network); 30 Dec 2008 15:42:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 15:42:21 -0000
Received: (qmail 88574 invoked by uid 500); 30 Dec 2008 15:42:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88548 invoked by uid 500); 30 Dec 2008 15:42:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88537 invoked by uid 99); 30 Dec 2008 15:42:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 07:42:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.217.12 as permitted sender)
Received: from [209.85.217.12] (HELO mail-gx0-f12.google.com) (209.85.217.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 15:42:07 +0000
Received: by gxk5 with SMTP id 5so3809697gxk.5
        for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 07:41:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=gDjpwBO7y4jXN9Zr9fAusMGd0SwMBcLS3sBuMVWDz6I=;
        b=p6nTkrrlPbnuZmh9xkzxbNMGAH4TF1uRsAxbUmECYGMFVlDzBPkLL5SSdJz43DqqwA
         FVIjWEV3akh3Omy8MJPJAb29gh5fc7pBvG2CROeyirvT6ApxaFweeGLy6sYTXyHn9sL5
         OyDvjuXklaiAFgHz9sorV0p5YxHn5dyUmzDpU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Laf9N3NItSUjC3W57bl7zUzUhPupqf9h0E1aXh/0aQgX0W6uHZO/CRLQ7SgRZ2FB5g
         i1y9A6WejgS6RziVGv6mt7S+gaqMuM8xpFxPK5aDctmdu7nW/SDLwVuhM82ChyRgo3fK
         I4vBB55N6tK91CbXAvwS+ggeuS2X6O1W7gMwk=
Received: by 10.90.30.2 with SMTP id d2mr7077361agd.58.1230651706719;
        Tue, 30 Dec 2008 07:41:46 -0800 (PST)
Received: by 10.90.93.1 with HTTP; Tue, 30 Dec 2008 07:41:46 -0800 (PST)
Message-ID: <359a92830812300741u50ac5c4cq45d5236595fe7c6c@mail.gmail.com>
Date: Tue, 30 Dec 2008 10:41:46 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Extract the text that was indexed
In-Reply-To: <b63a7e9e0812300640x2a197cceu4cc83d0b130b3ada@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_127394_18475922.1230651706710"
References: <410194.56701.qm@web112210.mail.gq1.yahoo.com>
	 <11975c90812300431h31c9719w50a367a2ee80a1c@mail.gmail.com>
	 <b63a7e9e0812300640x2a197cceu4cc83d0b130b3ada@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_127394_18475922.1230651706710
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Actually, you can reconstruct the text, but it's a lossy process. Stop words
aren't in the index for instance. And it's very time-consuming. Luke makes
a "best guess" at this process, so you might want to take a look at that
code. But even the very bright folks who put Luke together caution that
it's not a perfect process.

What do you want to accomplish by reconstructing the text? Perhaps there's
a better way....

I'd also add parenthetically that while storing text certainly bulks up your
index, it doesn't affect searching proportionately since searching is
accomplished with indexed terms only. It may, however, substantially
increase document loading time (i.e. IndexReader.document(i)), which
*can* affect search time if you load a bunch of documents as part of
your processing. But this can be handled with lazy loading if it's an issue.

Best
Erick

On Tue, Dec 30, 2008 at 9:40 AM, Greg Shackles <gshackles@gmail.com> wrote:

> That is my understanding of it too.  Terms in the index will point to the
> position of the tokens they map to.  Since one index term can point at any
> number of tokens, this isn't a sequence map, but just a search map.  If you
> still have the text that was indexed you could run it through an analyzer
> and observe the tokens as they go through.
>
> - Greg
>
> On Tue, Dec 30, 2008 at 7:31 AM, Alexander Aristov <
> alexander.aristov@gmail.com> wrote:
>
> > I am not sure but from my understanding fields that are only indexed and
> > not
> > stored do not keep position. So even if you get back all terms for a
> field
> > for a given document you won't be able to reconstruct original words
> > sequence.
> >
> > And remember that not all words are indexed.
> >
> > Alex
> >
> > 2008/12/30 Lebiram <lebiram@ymail.com>
> >
> > > Hi All,
> > >
> > > Is it possible to extract the text that was indexed but not stored for
> a
> > > field in a document?
> > >
> > > Right now, reader.document() returns only fields that was stored.
> However
> > > I'd also want to get the text on the indexed only field...
> > >
> > > I'd appreciate your help
> > >
> > >
> > >
> > >
> >
> >
> >
> >
> > --
> > Best Regards
> > Alexander Aristov
> >
>

------=_Part_127394_18475922.1230651706710--

From java-user-return-37996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 16:14:20 2008
Return-Path: <java-user-return-37996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91840 invoked from network); 30 Dec 2008 16:14:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 16:14:20 -0000
Received: (qmail 16235 invoked by uid 500); 30 Dec 2008 16:14:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16201 invoked by uid 500); 30 Dec 2008 16:14:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16190 invoked by uid 99); 30 Dec 2008 16:14:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 08:14:12 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [98.136.44.46] (HELO n58.bullet.mail.sp1.yahoo.com) (98.136.44.46)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Dec 2008 16:14:02 +0000
Received: from [216.252.122.218] by n58.bullet.mail.sp1.yahoo.com with NNFMP; 30 Dec 2008 16:13:42 -0000
Received: from [67.195.9.82] by t3.bullet.sp1.yahoo.com with NNFMP; 30 Dec 2008 16:13:41 -0000
Received: from [67.195.9.101] by t2.bullet.mail.gq1.yahoo.com with NNFMP; 30 Dec 2008 16:13:41 -0000
Received: from [127.0.0.1] by omp105.mail.gq1.yahoo.com with NNFMP; 30 Dec 2008 16:13:41 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 754291.34352.bm@omp105.mail.gq1.yahoo.com
Received: (qmail 2837 invoked by uid 60001); 30 Dec 2008 16:13:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=ymail.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=NO0ua9P+x75lM3V+KlCjcncSo/VGrW9hDdX2iffoRvoSi/ywCmDBJ2Uh8l3SydDSZmNnWPJ02uTBa3rXcNUT4oW3Omp7KJUoJHPaSPiVrgsXPQVBuNPPtgXFnNjQDrFGmq574oZ34p/G/aBW5liaxqgRmrvKuv6XDY51KRcmlDY=;
X-YMail-OSG: 3f_ER7AVM1k3PoEMmBijAFwHmpIiMOaRwEMKR8JtpK_GlVin3yvOq7YJSTBdzkVcvdoR90s4FCxQZYTRIHMx51YZ9ogFCBeaT56j98JThO3RcZ6Wmruk9w5lSuTbhu4EAv7iZNYJ_ddSp9J2PgH14j5rrCmTAwsNCXFxRARcBy53MH4jmvZ_a_kh9DFfow--
Received: from [217.205.40.94] by web112218.mail.gq1.yahoo.com via HTTP; Tue, 30 Dec 2008 08:13:41 PST
X-Mailer: YahooMailRC/1156.77 YahooMailWebService/0.7.260.1
References: <410194.56701.qm@web112210.mail.gq1.yahoo.com>  <11975c90812300431h31c9719w50a367a2ee80a1c@mail.gmail.com>  <b63a7e9e0812300640x2a197cceu4cc83d0b130b3ada@mail.gmail.com> <359a92830812300741u50ac5c4cq45d5236595fe7c6c@mail.gmail.com>
Date: Tue, 30 Dec 2008 08:13:41 -0800 (PST)
From: Lebiram <lebiram@ymail.com>
Subject: Re: Extract the text that was indexed
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-333355162-1230653621=:2560"
Message-ID: <559869.2560.qm@web112218.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-333355162-1230653621=:2560
Content-Type: text/plain; charset=us-ascii

Hi All, 

Thanks for the reply. 

Just wanted to reconstruct a new index based on an existing index(but turning off norms) that's all. 

However, as it is nearly impossible to extract the terms  of unstored fields, we might think of other ways.

Thanks for the inputs guys! 




________________________________
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Sent: Tuesday, December 30, 2008 3:41:46 PM
Subject: Re: Extract the text that was indexed

Actually, you can reconstruct the text, but it's a lossy process. Stop words
aren't in the index for instance. And it's very time-consuming. Luke makes
a "best guess" at this process, so you might want to take a look at that
code. But even the very bright folks who put Luke together caution that
it's not a perfect process.

What do you want to accomplish by reconstructing the text? Perhaps there's
a better way....

I'd also add parenthetically that while storing text certainly bulks up your
index, it doesn't affect searching proportionately since searching is
accomplished with indexed terms only. It may, however, substantially
increase document loading time (i.e. IndexReader.document(i)), which
*can* affect search time if you load a bunch of documents as part of
your processing. But this can be handled with lazy loading if it's an issue.

Best
Erick

On Tue, Dec 30, 2008 at 9:40 AM, Greg Shackles <gshackles@gmail.com> wrote:

> That is my understanding of it too.  Terms in the index will point to the
> position of the tokens they map to.  Since one index term can point at any
> number of tokens, this isn't a sequence map, but just a search map.  If you
> still have the text that was indexed you could run it through an analyzer
> and observe the tokens as they go through.
>
> - Greg
>
> On Tue, Dec 30, 2008 at 7:31 AM, Alexander Aristov <
> alexander.aristov@gmail.com> wrote:
>
> > I am not sure but from my understanding fields that are only indexed and
> > not
> > stored do not keep position. So even if you get back all terms for a
> field
> > for a given document you won't be able to reconstruct original words
> > sequence.
> >
> > And remember that not all words are indexed.
> >
> > Alex
> >
> > 2008/12/30 Lebiram <lebiram@ymail.com>
> >
> > > Hi All,
> > >
> > > Is it possible to extract the text that was indexed but not stored for
> a
> > > field in a document?
> > >
> > > Right now, reader.document() returns only fields that was stored.
> However
> > > I'd also want to get the text on the indexed only field...
> > >
> > > I'd appreciate your help
> > >
> > >
> > >
> > >
> >
> >
> >
> >
> > --
> > Best Regards
> > Alexander Aristov
> >
>



      
--0-333355162-1230653621=:2560--


From java-user-return-37997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 30 17:22:18 2008
Return-Path: <java-user-return-37997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12819 invoked from network); 30 Dec 2008 17:22:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2008 17:22:18 -0000
Received: (qmail 92458 invoked by uid 500); 30 Dec 2008 17:22:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92426 invoked by uid 500); 30 Dec 2008 17:22:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92415 invoked by uid 99); 30 Dec 2008 17:22:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 09:22:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 30 Dec 2008 17:22:00 +0000
Received: (qmail 32700 invoked by uid 60001); 30 Dec 2008 17:21:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=3yds2vhFimKZFjP7BDGFvXmolflR22e29FU8eb0hN5KBKTH7saUbA6avM6boxa/m4dzMl00gPQP2OEUK0GGy1x4eLV1Bq5A+NXIyv4w1VEewVYtSx6sjufRr+hPCSQygvg0RePbLLXW+X6C5TJ1G853Ba44H/zLTpHaUHq4vHdA=;
X-YMail-OSG: OZ5nKJUVM1n4AUV3WF0P9UqVSRzJ1RFa.YWdS1HLPT3is.wsCvnmbWGxbgXZ8kzbHUxAufTrXRbCcG_TpEGJRPvJANUKftQOUNpiHnfEIRpgkpS9QnLpjKH24Yv4NQKXo.dvbF..AXi5SP5IyiqWGvfijSiTsbyfuj65SyicQ7fjRmMxekwCDSMikKA_LOU0BeuJyOmHMarYaHNA2yWx9G8o2mINc8s-
Received: from [167.206.188.3] by web50303.mail.re2.yahoo.com via HTTP; Tue, 30 Dec 2008 09:21:39 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <547401.91928.qm@web26503.mail.ukl.yahoo.com>
Date: Tue, 30 Dec 2008 09:21:39 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Filtering accents
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <435141.32101.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Tom:=0A=0AHave a look at ASCIIFoldingFilter.=0A=0Aotis@lesina:~/workspace/a=
sf-lucene$ svn log ./src/java/org/apache/lucene/analysis/ASCIIFoldingFilter=
.java=0A-------------------------------------------------------------------=
-----=0Ar724053 | markrmiller | 2008-12-06 18:25:42 -0500 (Sat, 06 Dec 2008=
) | 1 line=0A=0ALUCENE-1390: Added ASCIIFoldingFilter, a Filter that conver=
ts alphabetic, numeric, and symbolic Unicode characters which are not in th=
e first 127 ASCII characters (the "Basic Latin" Unicode block) into their A=
SCII equivalents, if one exists. ISOLatin1AccentFilter, which handles a sub=
set of this filter, has been deprecated.=0A--------------------------------=
----------------------------------------=0A=0A=0AYou'll have to use the tru=
nk version of Lucene (or a nightly build) in order to use this new ASCIIFol=
dingFilter class.=0A=0AOtis=0A--=0ASematext -- http://sematext.com/ -- Luce=
ne - Solr - Nutch=0A=0A=0A=0A----- Original Message ----=0A> From: legrand =
thomas <thomaslegrand14@yahoo.fr>=0A> To: java-user@lucene.apache.org=0A> C=
c: francois.vanhille@hotmail.fr=0A> Sent: Tuesday, December 30, 2008 8:52:5=
7 AM=0A> Subject: Filtering accents=0A> =0A> Dear all,=0A> =0A> I'd like my=
 lucene searches to be insensitive to (French) accents. For example, =0A> c=
onsidering a indexed term "m=E9tal", I want to get it when searching for "m=
etal" =0A> or "m=E9tal" . I use lucene-2.3.2 and the searches are performed=
 with: =0A> IndexSearcher.search(query,filter,sorter), Another filter is al=
ready used =0A> together with a "Sort" object. Futrhermore, I cannot use th=
e FrenchAnalyzer as =0A> my index does not only contain French words.=0A> =
=0A> Can anybody help ?=0A> Thanks in advance,=0A> Tom=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 31 00:30:44 2008
Return-Path: <java-user-return-37998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60830 invoked from network); 31 Dec 2008 00:30:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2008 00:30:44 -0000
Received: (qmail 17854 invoked by uid 500); 31 Dec 2008 00:30:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17815 invoked by uid 500); 31 Dec 2008 00:30:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17804 invoked by uid 99); 31 Dec 2008 00:30:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 30 Dec 2008 16:30:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 00:30:28 +0000
Received: by ewy14 with SMTP id 14so6211306ewy.5
        for <java-user@lucene.apache.org>; Tue, 30 Dec 2008 16:30:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=K2t061Pbci4GFPxmRo5z0e1F03bFCPTiOaAupW3GJ+A=;
        b=sgSYSW7+H04Feb/AQYk5klIkpYyTXDronlMPjHnUwjnbCqJx1PnESI9HQJrATvmOos
         N8w3gmP6g7O+AaUnM+yQ2NYyy1h2sUqdk5p10Bg63rt02ISzY7Q7RlgWQLVAtbEqbElX
         7HFUHrLuSkBxpYbfQjCBDBNAONqf1xve1NzIs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=ZVMTeMp8WX7S1tx4zVYyMj5iYW+5C4Fni/nN2CQAorMa+T14H2E1BMk4YsSyGkVom4
         0J1v6kEEFxcQZodVShfkHn6yX7sNC5v53reTPs709M2RBlH4mA3FBZ9ENvnJuT0Dm7+A
         xE8aRI2XiMHHYxnC8OUIS+ErgH+7oL/z5cNn0=
Received: by 10.210.10.8 with SMTP id 8mr12968954ebj.186.1230683407096;
        Tue, 30 Dec 2008 16:30:07 -0800 (PST)
Received: from c-1ee6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se (c-1ee6e355.029-18-6d6c6d2.cust.bredbandsbolaget.se [85.227.230.30])
        by mx.google.com with ESMTPS id 5sm39303724nfv.58.2008.12.30.16.30.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 30 Dec 2008 16:30:06 -0800 (PST)
Message-Id: <BBA4C509-E17B-4504-8244-40A1817A6D25@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <559869.2560.qm@web112218.mail.gq1.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: Extract the text that was indexed
Date: Wed, 31 Dec 2008 01:30:05 +0100
References: <410194.56701.qm@web112210.mail.gq1.yahoo.com>  <11975c90812300431h31c9719w50a367a2ee80a1c@mail.gmail.com>  <b63a7e9e0812300640x2a197cceu4cc83d0b130b3ada@mail.gmail.com> <359a92830812300741u50ac5c4cq45d5236595fe7c6c@mail.gmail.com> <559869.2560.qm@web112218.mail.gq1.yahoo.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

30 dec 2008 kl. 17.13 skrev Lebiram:

Hi Lebiram,

contrib/misc contains a couple of tools that might be of help.

> Just wanted to reconstruct a new index based on an existing  
> index(but turning off norms) that's all.

If you want to create an identical index but without norms use  
FieldNormModifier in contrib/miscellaneous.

> However, as it is nearly impossible to extract the terms  of  
> unstored fields, we might think of other ways.

Not impossible, just time consuming. The easiest way is to reconstruct  
the token stream of each field using the term frequency vector. If you  
haven't stored it there is a class called TermVectorAccessor in  
contrib/miscellaneous that allows you to visit the term vector even  
though it is not store, i.e. it will construct it be enumerating the  
inverted index.

Remember that if you reconstruct a token stream via the term vector no  
payloads will be available. If you use payloads it would be a simple  
thing to patch TermVectorAccessor in order to set the payloads in the  
tokens. Feel free to post such a patch in the Jira, it would be a nice  
addition to that code.


     karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 31 13:45:27 2008
Return-Path: <java-user-return-37999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25893 invoked from network); 31 Dec 2008 13:45:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2008 13:45:27 -0000
Received: (qmail 28863 invoked by uid 500); 31 Dec 2008 13:45:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28839 invoked by uid 500); 31 Dec 2008 13:45:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28828 invoked by uid 99); 31 Dec 2008 13:45:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 05:45:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mnrao13@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 13:45:12 +0000
Received: by rv-out-0506.google.com with SMTP id f6so7416760rvb.5
        for <java-user@lucene.apache.org>; Wed, 31 Dec 2008 05:44:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=ww2AjUw3HjzAdOGFz/uIDx+0lYL0XlpVDH9qxdM9oGI=;
        b=HvL7nqZ6DamQ56XYJgX1myFfgFKFtM196+9BvmIxEvaXd8WRXkiYmYYBdLzTcuNX3b
         4G6AAQl0CmelRlJQccK08L/OYz6ixOrGZm/85pdkPazQNzxbE+eRWL790ouyEeZtz7kY
         uHmVLMZNOiRtx8sCVmdXwxbMExoeM+jxCDO9Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=PTsvZ3E3awiTmNrt3gcKKFbwAkHJ/TCFEatD6/2cLEnl+hrh1OYcUVIHELjX9Hfa1R
         bocoIs8zGQhfj3gfIba8DexlgNPn3expPbU4gVUyVPg5pNSVElRpzquFkT0G/VAVZ5V0
         uKNna9Od7z5MVXLEf8A+fkk6O9OjenFiVrd6Y=
Received: by 10.141.100.15 with SMTP id c15mr7813925rvm.222.1230731090637;
        Wed, 31 Dec 2008 05:44:50 -0800 (PST)
Received: by 10.141.205.11 with HTTP; Wed, 31 Dec 2008 05:44:50 -0800 (PST)
Message-ID: <245655f20812310544i4fcf0986n65aebd87f755fc81@mail.gmail.com>
Date: Wed, 31 Dec 2008 08:44:50 -0500
From: "NageswaraRao M" <mnrao13@gmail.com>
To: java-user@lucene.apache.org
Subject: How to index pdf, html, doc and other MIME types in lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_178673_13552218.1230731090628"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_178673_13552218.1230731090628
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

     Please let me know how i can index different mime type files like (pdf,
html, doc ... etc) using lucene

thanks
Nagesh

------=_Part_178673_13552218.1230731090628--

From java-user-return-38000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 31 13:46:01 2008
Return-Path: <java-user-return-38000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26422 invoked from network); 31 Dec 2008 13:46:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2008 13:46:01 -0000
Received: (qmail 31270 invoked by uid 500); 31 Dec 2008 13:45:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31245 invoked by uid 500); 31 Dec 2008 13:45:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31233 invoked by uid 99); 31 Dec 2008 13:45:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 05:45:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 13:45:46 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBVDjO0X009627
	for <java-user@lucene.apache.org>; Wed, 31 Dec 2008 07:45:24 -0600
Received: (qmail 21661 invoked by uid 0); 31 Dec 2008 07:45:24 -0600
Date: 31 Dec 2008 07:45:24 -0600
Message-ID: <20081231134524.21660.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: How to index pdf, html, doc and other MIME types in lucene
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.01
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 333355115 - a27c4801bbaa
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=333355115&m=a27c4801bbaa&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=333355115&m=a27c4801bbaa&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=333355115&m=a27c4801bbaa&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 31 13:46:32 2008
Return-Path: <java-user-return-38001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26825 invoked from network); 31 Dec 2008 13:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2008 13:46:32 -0000
Received: (qmail 33231 invoked by uid 500); 31 Dec 2008 13:46:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33027 invoked by uid 500); 31 Dec 2008 13:46:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33016 invoked by uid 99); 31 Dec 2008 13:46:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 05:46:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.125.223.72] (HELO mx02.mailboxcop.com) (206.125.223.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 13:46:17 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx02.mailboxcop.com (8.13.8/8.13.8) with ESMTP id mBVDju9R021804
	for <java-user@lucene.apache.org>; Wed, 31 Dec 2008 07:45:56 -0600
Received: (qmail 22061 invoked by uid 0); 31 Dec 2008 07:45:56 -0600
Date: 31 Dec 2008 07:45:56 -0600
Message-ID: <20081231134556.22060.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: How to index pdf, html, doc and other MIME types in lucene
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.01
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 5.20] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 333355239 - 3ce72e1b77ab
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=333355239&m=3ce72e1b77ab&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=333355239&m=3ce72e1b77ab&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=333355239&m=3ce72e1b77ab&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.4
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY
LUX is closed until 5th January 2009



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 31 13:49:37 2008
Return-Path: <java-user-return-38002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29152 invoked from network); 31 Dec 2008 13:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2008 13:49:36 -0000
Received: (qmail 36562 invoked by uid 500); 31 Dec 2008 13:49:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36192 invoked by uid 500); 31 Dec 2008 13:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36181 invoked by uid 99); 31 Dec 2008 13:49:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 05:49:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.104] (HELO web50706.mail.re2.yahoo.com) (206.190.38.104)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 31 Dec 2008 13:49:21 +0000
Received: (qmail 6985 invoked by uid 60001); 31 Dec 2008 13:48:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Y+6r751tkCxWk25JTMsyrNTIKutR+iMueZtcaKjsPQR4BzhfyIDbc12UQCCvnqmIsY1PzW/p4+CJh6MRbt2bO7MfrcsYFfx+EqNcMavmYzjcTDZLlo7+CnaKGQeqAMVCzr7ti9VXxyF51gJ4NgHEllxU3hjDDZGFu6ZxS2+eXZM=;
X-YMail-OSG: LCPb1iwVM1n2Y4iuB8k2gfK8QL86tqanlXtBIGL4C0l.rTckPnrPB8c2toHHJv1dFZtqioskIMqAu6EVISNLH08MaHG06AtmOn0ueiiLMcrEwIRr9lAMBHRtK7ib08m304FYqMt9_z6qssQDTuiT9AaXlHoKsgh2CFhQ9H8gAVYVKhXnfgkNfKUY_Y8wlvw35PPIWNbsndi0tcDavsjUQ5dUNlBNAFLl
Received: from [98.216.104.214] by web50706.mail.re2.yahoo.com via HTTP; Wed, 31 Dec 2008 05:48:59 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <245655f20812310544i4fcf0986n65aebd87f755fc81@mail.gmail.com>
Date: Wed, 31 Dec 2008 05:48:59 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Re: How to index pdf, html, doc and other MIME types in lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <932961.6036.qm@web50706.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Do a search on list archives - has been asked/answered several times.



----- Original Message ----
From: NageswaraRao M <mnrao13@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 31, 2008 8:44:50 AM
Subject: How to index pdf, html, doc and other MIME types in lucene

Hi,

     Please let me know how i can index different mime type files like (pdf,
html, doc ... etc) using lucene

thanks
Nagesh



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 31 13:59:24 2008
Return-Path: <java-user-return-38003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35241 invoked from network); 31 Dec 2008 13:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2008 13:59:24 -0000
Received: (qmail 45433 invoked by uid 500); 31 Dec 2008 13:59:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45405 invoked by uid 500); 31 Dec 2008 13:59:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45394 invoked by uid 99); 31 Dec 2008 13:59:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 05:59:17 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a3.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 13:59:09 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a3.g.dreamhost.com (Postfix) with ESMTP id A230315D4EA
	for <java-user@lucene.apache.org>; Wed, 31 Dec 2008 05:58:48 -0800 (PST)
Message-Id: <4493CABB-49AF-4884-A1A2-10EA2DE444BC@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <932961.6036.qm@web50706.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v930.3)
Subject: Re: How to index pdf, html, doc and other MIME types in lucene
Date: Wed, 31 Dec 2008 08:58:47 -0500
References: <245655f20812310544i4fcf0986n65aebd87f755fc81@mail.gmail.com> <932961.6036.qm@web50706.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.930.3)
X-Virus-Checked: Checked by ClamAV on apache.org

See Tika:  http://lucene.apache.org/tika

-Grant

On Dec 31, 2008, at 8:48 AM, Aaron Schon wrote:

> Do a search on list archives - has been asked/answered several times.
>
>
>
> ----- Original Message ----
> From: NageswaraRao M <mnrao13@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, December 31, 2008 8:44:50 AM
> Subject: How to index pdf, html, doc and other MIME types in lucene
>
> Hi,
>
>     Please let me know how i can index different mime type files  
> like (pdf,
> html, doc ... etc) using lucene
>
> thanks
> Nagesh
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 31 14:16:55 2008
Return-Path: <java-user-return-38004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46344 invoked from network); 31 Dec 2008 14:16:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2008 14:16:54 -0000
Received: (qmail 62837 invoked by uid 500); 31 Dec 2008 14:16:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62800 invoked by uid 500); 31 Dec 2008 14:16:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62789 invoked by uid 99); 31 Dec 2008 14:16:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 06:16:47 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mnrao13@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 14:16:40 +0000
Received: by rv-out-0506.google.com with SMTP id f6so7430294rvb.5
        for <java-user@lucene.apache.org>; Wed, 31 Dec 2008 06:16:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SaQA4NO00pj65cRdWGE5PsPcLZAnykRZWN1nxRNR6Nk=;
        b=wtOj6DBQl77n8NaufNPbbGNEkNgV0R4jXgDleags8tm1bVlouGMo9oCRvGvBzgrIEG
         hDiTF/w6MUa+FFOfOuAAr+K4GpnGzJ0/NZu8WZ9jNs7rEybJOdFTzbXu9koc909UFKVA
         YoDMyxdu1a39Vsjye/15XqDCoobzYJjBA2DlE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=nbtJISo8hzoRIiSd9/sBbd2aqFFx4GyFLvtVC5cG9hJpmx7iBGK7eS+77kDZiJXpK8
         aTeaCRhnlH0xeAOxHUMtw1sFTd5rdlc/cLnb4yo/yoeHWYNqKX2qNHUOA95d/aUrZhH3
         8Fi55Hk1mMTJxR0QYm2INzR66LOnM2aOm2jog=
Received: by 10.141.98.13 with SMTP id a13mr3854989rvm.20.1230732979637;
        Wed, 31 Dec 2008 06:16:19 -0800 (PST)
Received: by 10.141.205.11 with HTTP; Wed, 31 Dec 2008 06:16:19 -0800 (PST)
Message-ID: <245655f20812310616i10cb990s51a1e615bfcadad6@mail.gmail.com>
Date: Wed, 31 Dec 2008 09:16:19 -0500
From: "NageswaraRao M" <mnrao13@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to index pdf, html, doc and other MIME types in lucene
In-Reply-To: <4493CABB-49AF-4884-A1A2-10EA2DE444BC@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_179008_8474135.1230732979621"
References: <245655f20812310544i4fcf0986n65aebd87f755fc81@mail.gmail.com>
	 <932961.6036.qm@web50706.mail.re2.yahoo.com>
	 <4493CABB-49AF-4884-A1A2-10EA2DE444BC@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_179008_8474135.1230732979621
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have subscribed to this group recently - how can search archives

On Wed, Dec 31, 2008 at 8:58 AM, Grant Ingersoll <gsingers@apache.org>wrote:

> See Tika:  http://lucene.apache.org/tika
>
> -Grant
>
>
> On Dec 31, 2008, at 8:48 AM, Aaron Schon wrote:
>
>  Do a search on list archives - has been asked/answered several times.
>>
>>
>>
>> ----- Original Message ----
>> From: NageswaraRao M <mnrao13@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, December 31, 2008 8:44:50 AM
>> Subject: How to index pdf, html, doc and other MIME types in lucene
>>
>> Hi,
>>
>>    Please let me know how i can index different mime type files like (pdf,
>> html, doc ... etc) using lucene
>>
>> thanks
>> Nagesh
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_179008_8474135.1230732979621--

From java-user-return-38005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 31 15:47:34 2008
Return-Path: <java-user-return-38005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85974 invoked from network); 31 Dec 2008 15:47:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2008 15:47:34 -0000
Received: (qmail 10867 invoked by uid 500); 31 Dec 2008 15:47:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10835 invoked by uid 500); 31 Dec 2008 15:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10824 invoked by uid 99); 31 Dec 2008 15:47:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 07:47:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.250] (HELO web50709.mail.re2.yahoo.com) (206.190.38.250)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 31 Dec 2008 15:47:17 +0000
Received: (qmail 20194 invoked by uid 60001); 31 Dec 2008 15:46:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=VOwYmVxZSo9dVSNyIbqBr/f4buR0ZAhJyeb8fO02U0yHajgFRuK5RhRi4gYPJJROJ6YmhCjPCR8crnTcybqFVgmxKozcbvhJiLnbPwawS/dneIvKuv+xkD4sRMulG1qY+4cY9yfjdkUefw/buwsa3hw3YhfsMaGOM1UaLaQeYT8=;
X-YMail-OSG: S.s1EYQVM1mMmEku0RMmloj3RcxPARfdfMPacU_BKbJFSVYuUWpCa2kwd8Z2netyESEB_zr3.1E9dVPRoAjAEjGhsC65cevmPk8rOau8W6XAbKLQS2ZhStRcYtq.XJhwtfyAwit0RYImrxApNIIXbusmfQLF_qUpy3vAfc_oKhhJED7WJawo7e3btdRtcFnVJLsh4ibmWPnqvQ8ApfRkPA9obmoIX0AM
Received: from [98.216.104.214] by web50709.mail.re2.yahoo.com via HTTP; Wed, 31 Dec 2008 07:46:55 PST
X-Mailer: YahooMailRC/1155.45 YahooMailWebService/0.7.260.1
References: <245655f20812310544i4fcf0986n65aebd87f755fc81@mail.gmail.com>  <932961.6036.qm@web50706.mail.re2.yahoo.com>  <4493CABB-49AF-4884-A1A2-10EA2DE444BC@apache.org> <245655f20812310616i10cb990s51a1e615bfcadad6@mail.gmail.com>
Date: Wed, 31 Dec 2008 07:46:55 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Re: How to index pdf, html, doc and other MIME types in lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <920269.18616.qm@web50709.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

http://wiki.apache.org/lucene-java/MailingListArchives



----- Original Message ----
From: NageswaraRao M <mnrao13@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 31, 2008 9:16:19 AM
Subject: Re: How to index pdf, html, doc and other MIME types in lucene

I have subscribed to this group recently - how can search archives

On Wed, Dec 31, 2008 at 8:58 AM, Grant Ingersoll <gsingers@apache.org>wrote:

> See Tika:  http://lucene.apache.org/tika
>
> -Grant
>
>
> On Dec 31, 2008, at 8:48 AM, Aaron Schon wrote:
>
>  Do a search on list archives - has been asked/answered several times.
>>
>>
>>
>> ----- Original Message ----
>> From: NageswaraRao M <mnrao13@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Wednesday, December 31, 2008 8:44:50 AM
>> Subject: How to index pdf, html, doc and other MIME types in lucene
>>
>> Hi,
>>
>>    Please let me know how i can index different mime type files like (pdf,
>> html, doc ... etc) using lucene
>>
>> thanks
>> Nagesh
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-38006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 31 19:34:59 2008
Return-Path: <java-user-return-38006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56954 invoked from network); 31 Dec 2008 19:34:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 31 Dec 2008 19:34:59 -0000
Received: (qmail 65253 invoked by uid 500); 31 Dec 2008 19:34:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65224 invoked by uid 500); 31 Dec 2008 19:34:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65213 invoked by uid 99); 31 Dec 2008 19:34:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 11:34:51 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [128.138.128.141] (HELO smtp01.Colorado.EDU) (128.138.128.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 31 Dec 2008 19:34:42 +0000
X-ASG-Debug-ID: 1230752038-076500a5000a-H1Y1KX
X-Barracuda-URL: http://128.138.128.141:8000/cgi-bin/mark.cgi
Received: from omr-raz-2-priv.int.colorado.edu (omr-raz-2-pub.colorado.edu [128.138.123.155])
	by smtp01.Colorado.EDU (Spam Firewall) with ESMTP id 479E9B08630
	for <java-user@lucene.apache.org>; Wed, 31 Dec 2008 12:34:21 -0700 (MST)
Received: from omr-raz-2-priv.int.colorado.edu (omr-raz-2-pub.colorado.edu [128.138.123.155]) by smtp01.Colorado.EDU with ESMTP id KbiMNYWxJiKtaRqv for <java-user@lucene.apache.org>; Wed, 31 Dec 2008 12:34:21 -0700 (MST)
Received: from 63-253-96-50.ip.mcleodusa.net (EHLO _10.1.1.99_) ([63.253.96.50])
	by omr-raz-2-priv.int.colorado.edu (MOS 3.8.5-GA FastPath queued)
	with ESMTP id ASG81810 (AUTH ogren);
	Wed, 31 Dec 2008 12:34:20 -0700 (MST)
Message-ID: <495BC92D.1020505@ogren.info>
Date: Wed, 31 Dec 2008 12:34:05 -0700
From: Philip Ogren <philip@ogren.info>
User-Agent: Thunderbird 2.0.0.19 (Windows/20081209)
MIME-Version: 1.0
To: java-user@lucene.apache.org
X-ASG-Orig-Subj: updating payloads
Subject: updating payloads
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Barracuda-Connect: omr-raz-2-pub.colorado.edu[128.138.123.155]
X-Barracuda-Start-Time: 1230752061
X-Barracuda-Spam-Score: 0.00
X-Barracuda-Spam-Status: No, SCORE=0.00 using global scores of TAG_LEVEL=1000.0 QUARANTINE_LEVEL=1000.0 KILL_LEVEL=8.0 tests=
X-Barracuda-Spam-Report: Code version 3.1, rules version 3.1.71465
	Rule breakdown below
	 pts rule name              description
	---- ---------------------- --------------------------------------------------
X-Virus-Checked: Checked by ClamAV on apache.org

Is it possible to update the payloads of an existing index?  I having 
troubles finding any mention of this on the mailing list archives and it 
is not obvious that this is possible from the api.  I do not want to 
change the size of the payloads - just update the values.  My payloads 
values depend on values returned from reader.docFreq().  I don't want to 
update often - just once - and I would settle for a very hackish way of 
doing it if needed.  I suppose in the worst case scenario I could update 
the .cfs file directly - but now I expose my naivety. 

Any pointers are greatly appreciated.

Thanks,
Philip

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


