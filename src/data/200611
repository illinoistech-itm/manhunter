From java-user-return-24288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 01 08:42:31 2006
Return-Path: <java-user-return-24288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3237 invoked from network); 1 Nov 2006 08:42:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 08:42:31 -0000
Received: (qmail 60059 invoked by uid 500); 1 Nov 2006 08:42:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60026 invoked by uid 500); 1 Nov 2006 08:42:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60005 invoked by uid 99); 1 Nov 2006 08:42:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 00:42:31 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.68.238.35] (HELO mailgw3.technion.ac.il) (132.68.238.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 00:42:18 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mailgw3.technion.ac.il (Postfix) with ESMTP id B5CB8173A62
	for <java-user@lucene.apache.org>; Wed,  1 Nov 2006 10:41:55 +0200 (IST)
X-Virus-Scanned: by amavisd-new at technion.ac.il
Received: from mailgw3.technion.ac.il ([127.0.0.1])
	by localhost (mailgw3.technion.ac.il [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id iFrK50nqwm+f for <java-user@lucene.apache.org>;
	Wed,  1 Nov 2006 10:41:55 +0200 (IST)
Received: from fermat.math.technion.ac.il (fermat.math.technion.ac.il [132.68.115.6])
	by mailgw3.technion.ac.il (Postfix) with ESMTP id 6F89F173A58
	for <java-user@lucene.apache.org>; Wed,  1 Nov 2006 10:41:55 +0200 (IST)
Received: from fermat.math.technion.ac.il (localhost [127.0.0.1])
	by fermat.math.technion.ac.il (8.12.10/8.12.10) with ESMTP id kA18ftXQ006384
	for <java-user@lucene.apache.org>; Wed, 1 Nov 2006 10:41:55 +0200 (IST)
Received: (from nyh@localhost)
	by fermat.math.technion.ac.il (8.12.10/8.12.10/Submit) id kA18fsXw006383
	for java-user@lucene.apache.org; Wed, 1 Nov 2006 10:41:54 +0200 (IST)
X-Authentication-Warning: fermat.math.technion.ac.il: nyh set sender to nyh@math.technion.ac.il using -f
Date: Wed, 1 Nov 2006 10:41:54 +0200
From: "Nadav Har'El" <nyh@math.technion.ac.il>
To: java-user@lucene.apache.org
Subject: Re: Indexing floating point number
Message-ID: <20061101084154.GA3222@fermat.math.technion.ac.il>
References: <85c493340610300157t57ea76a3oa1695e8b3a533b23@mail.gmail.com> <c68e39170610300955h33dc0156t59054e5970a95b64@mail.gmail.com>
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="2fHTh5uZTiUOsy+g"
Content-Disposition: inline
In-Reply-To: <c68e39170610300955h33dc0156t59054e5970a95b64@mail.gmail.com>
User-Agent: Mutt/1.4.2.2i
Hebrew-Date: 10 Heshvan 5767
X-Virus-Checked: Checked by ClamAV on apache.org

--2fHTh5uZTiUOsy+g
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

On Mon, Oct 30, 2006, Yonik Seeley wrote about "Re: Indexing floating point number":
> On 10/30/06, KEGan <khoon.ee.gan@gmail.com> wrote:
> >Newbie question. How do we index floating point number in Lucene, so that 
> >it
> >is sortable ? There is a built-in utility class 'NumberTools' which help
> >with indexing integer. Does Lucene has the same mechanism for floating 
> >point
> >number?
> 
> You can look at NumberUtils in Solr, it has conversions for
> int/long/float/double that make strings that sort correctly

This question was asked so many times, that I think it belongs in the FAQ.
Moreover, I wonder if we shouldn't add a floating-point version of NumberTools
to the base Lucene, instead of referring people to Solr every time this
question is asked?

I'm attaching another possible implementation. It's a class ToSortableString
with two static functions fromDouble(double) and fromInt(int). These convert
numbers into strings which sort lexicographically in the same order as the
original numbers.

The long comments in the attached code explain my encoding, the details of
which are different from Solr's. In particular differences include:
1. In my code, integers and floating point can be mixed: the encoding of
   7 (integer) and 7.0 (double) is the same.
2. In my code, we can decide how much precision (significant digits) we want
   to keep from doubles. I decided to keep only 10 significant digits (out of
   the available ~16) by default, which is more than enough for search
   application.
3. My code currently uses base 10 encoding, and therefore often generates
   longer strings than Solr's NumberTools. Moving to base 100 or even 256
   (as I suggest in the comments) can eliminate this difference.
4. My code is probably a bit slower, though I didn't actually check.
5. I did not yet implement a reverse transformation (from String back to
   number), because it practice it wasn't needed.

> (for range queries as well as sorts).

This support for floating-point range queries is a "honey trap". It sounds
really good, but when you actually try to use it, you'll notice how extremely
inefficient it is during search (unless you're lucky enough to have only a
few distinct floating point values in the given range).

To really support numeric search well, Lucene may need some additional data
structure in addition to the usual lexicon and posting lists - like some sort
tree of sub-range posting lists, or something.
But perhaps this can even be done without any changes to Lucene: for example,
imagine we index the number 2.345 as four tokens "2.345", "2.34", "2.3", "2".
Now, if we're looking for the range [2.3-2.4) we can just search for "2.3",
and if we're looking for the range [2.2-2.45) we can search for
	"2.2" OR "2.3" OR "2.40" OR "2.41" OR "2.42" OR "2.43" OR "2.44"
(note that this is an OR of just 7 posting lists, even if this range contains
thousands of distinct values).

I wonder if anybody ever done such a thing (or came up with an better
solution) in Lucene.

-- 
Nadav Har'El                        |   Wednesday, Nov 1 2006, 10 Heshvan 5767
IBM Haifa Research Lab              |-----------------------------------------
                                    |The socks in my drawer are like
http://nadav.harel.org.il           |snowflakes: No two are alike.

--2fHTh5uZTiUOsy+g
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="ToSortableString.java"

package com.ibm.search.lucene.query.parser;

import java.text.DecimalFormat;

/**
 * The functions in this class do a transformation which is currently necessary
 * for using Lucene's RangeQuery over numbers. They convert floating-point
 * numbers into strings which sort lexicographically in the same order as the
 * original numbers.
 * 
 * Unfortunately, for any number domain other than positive integers, we are
 * not aware of a way of doing this sort of conversion while keeping the
 * numbers readable. The result of the conversion (even for positive integers)
 * will be unreadable to casual readers. It is therefore recommended that if
 * you want numeric fields to be stored, not just index, store the original
 * numbers rather than the result of this conversion. It is possible to do
 * this with the aid of a special Analyzer, which will carry out this
 * conversion for the purpose of indexing but will leave the un-analyzed value
 * stored.
 * 
 * The conversions we carry out is one-to-one (up to the 10 decimal significant
 * digits of precision - as explained below), and it should be easy to carry
 * out the reverse conversion. However, we haven't implemented this yet
 * because we haven't found it necessary.
 */

public class ToSortableString {
	/**
	 * fromDouble() implements a transformation which is currently
	 * necessary for matching a range of floating point numbers using
	 * Lucene's RangeQuery. This function converts floating-point numbers
         * into strings which sort lexicographically in the same order as the
	 * original numbers.
	 * 
	 * We correctly handle numbers in double's entire range, but limit
	 * precision to 10 significant digits. This was a deliberate choice:
	 * 10 decimal digits are enough to distinguish between 32 bit
	 * integers, and more floating-point precision is hardly required in
	 * search applications.
	 */

	/*
	 * Our string representation of a floating point number will look as
	 * follows: SEEENN... Where: 1. S is the sign of the number, "n" for
	 * negative, "p" for positive. This ensures that all negative numbers
	 * come before all positive numbers. (In the alphabet, "n" comes
	 * before "p"). 2. EEE is the base-10 exponent leaving a mantissa
	 * between >=0.1, <1.0. We add 500 to it, to get all the negative and
	 * positive exponents into 3 digits (typically, a double's exponent
	 * can be between -308 and 308). For negative numbers, we negate their
	 * exponent first. The idea is that positive numbers with lower
	 * exponent come before (are less) than those with higher exponent
	 * (1e-1 is smaller than 1e2) and for negative numbers, this is
	 * reversed (-1e-1 is larger than -1e2). We assume that for Java
	 * doubles, the maximum exponent is around 300, so our addition of 500
	 * is more than enough, and ensures that the result doesn't even need
	 * padding with zeros. 3. NN... is the mantissa, >=0.1 and <1.0.
	 * When the original number is positive, we output the mantissa as a
	 * base 10 floating point without the initial "0.". For negative
	 * numbers, 1 minus the mantissa is printed instead (the result is
	 * <=0.9, >0). The mantissa is printed with a certain precision (up to
	 * 15 digits makes sense on most computers, but we don't need this
	 * sort of precision and we'll settle with 10 - enough for accurate
	 * representation of Java ints). Trailing zeros are not printed,
	 * which is ok, because "0.1" is lexicographically before "0.11".
	 * Positive and negative Infinities are also supported, and generate
	 * strings "pinf" and "n-inf", respectively, which sort after and
	 * before all numbers, respectively. NaNs (Not-a-Number) are not
	 * supported, because their sorting order relative to other numbers
	 * is undefined.
	 * 
	 * If this representation appears similar to the IEEE 754 floating
	 * point standard, it is not entirely an accident. IEEE 754
	 * representation is almost sortable, except that for a need to invert
	 * all bits for negative numbers, and that the sign bit is on for
	 * negative numbers, rather than positive (larger) numbers. Solr's 
	 * "NumberUtils", for example, uses Java's Double.floatToRawIntBits
	 * to very easily do this, and treat ints, longs, floats and doubles
	 * very similarly; In their code, a 4 byte int or float is transformed
	 * into 3 java (16-bit) chars, and a 8 byte long or double is
	 * transformed into 5 java chars. 
	 * 
	 * Note that we chose base 10 representation because it was more
	 * convinient to code and debug, as well as giving a shorter
	 * representation for floating point numbers with a short decimal
	 * representation (say, 0.12). However, using a larger base would have
	 * yielded a more compact representation. It particular, it should be
	 * easy to half the length of this function's output by converting
	 * its output to base 100.
	 */

	public static String fromDouble(double d) {
		boolean negative = d < 0;
		if (negative)
			d = -d;
		// Note: the addition of 1e-15 below is to offset rounding
		// errors in our log calculation, e.g., log(1000)/log(10)-3 
		// comes out -4e16 on the machine I tried this on. This
		// addition is not important at all, except to get nicer
		// output for integers - to convert 1000 into p5041 and not
		// p5039999999999.
		int exponent = (int) Math.floor(Math.log(d) / log10 + 1 + 1e-15);
		double mantissa = d * Math.exp(-exponent * log10);

		// If the exponent is too negative, d is zero. Just print "p0",
		// which will sort before any positive number, but after every
		// negative number.
		if (exponent <= -400)
			return "p0";
		// If the exponent is too positive, we're at infinity, either
		// positive or negative. Print "n-inf" (sorts before all
		// negative numbers we print) or "pinf" (sorts after all
		// positive numbers we print).
		if (exponent >= 400)
			return negative ? "n-inf" : "pinf";

		if (negative)
			exponent = -exponent;
		exponent += 500;

		if (negative)
			return "n" + Integer.toString(exponent)
					+ mantissaFormat(1.0 - mantissa);
		else
			return "p" + Integer.toString(exponent) + mantissaFormat(mantissa);
	}

	private static final double log10 = Math.log(10);

	// This function limits the number's precision to 10 significant
	// decimal digits. See comment above for the rationale for this choice.
	private static String mantissaFormat(double m) {
		// Unfortunately, we need to create a new "DecimalFormat"
		// object every time, because that object is not thread safe.
		// This may be a performance bottleneck.
		DecimalFormat mantFormatter = new DecimalFormat(".##########");
		// 1234567890
		String result = mantFormatter.format(m);
		if (result.charAt(0) == '.')
			return result.substring(1); // remove initial "."
		else
			// 0.999.. was printed as 1.0. We don't want that.
			return "9999999999"; // we could have also printed "x" or
		// anything that comes after all numbers.
		// 1234567890
	}

	/**
	 * fromInt() implements a transformation which is currently necessary
	 * for matching a range of integers using Lucene's RangeQuery. This
	 * function converts integers into strings which sort
	 * lexicographically in the same order as the original numbers.
	 * 
	 * fromInt() uses the same transformation as fromDouble(), so that
	 * fromInt(3) is idential to fromDouble(3.0) and comes before
	 * fromDouble(3.1), and so on.
	 */
	public static String fromInt(int i) {
		// NOTE: for simplicity, we could have just returned
		// fromDouble((double)i), instead of inventing this integer
		// implementation. But this was an interesting exercise :-)
		if (i == 0)
			return "p0";
		boolean negative = i < 0;
		String istr;
		if (negative)
			istr = Long.toString(-(long) i); // long needed for
		// -Int.MIN_VALUE...
		else
			istr = Integer.toString(i);
		int exponent = istr.length();
		// remove trailing zeros from istr (just like happens when
		// printing floating point). Also, if negative, replace each
		// digit by 9-digit (identical to taking 1-mantissa in
		// floating point).
		int len = exponent;
		while (len > 0 && istr.charAt(len - 1) == '0') {
			len--;
		}
		StringBuffer sb = new StringBuffer();
		if (negative) {
			sb.append('n');
			sb.append(Integer.toString(500 - exponent));
			for (int j = 0; j < len; j++)
				sb
						.append((char) ('0' + ('9' - istr.charAt(j)) + (j == (len - 1) ? 1
								: 0)));
		} else {
			sb.append('p');
			sb.append(Integer.toString(500 + exponent));
			sb.append(istr.substring(0, len));
		}
		return sb.toString();
	}
}


--2fHTh5uZTiUOsy+g
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--2fHTh5uZTiUOsy+g--

From java-user-return-24289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 01 16:09:26 2006
Return-Path: <java-user-return-24289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56976 invoked from network); 1 Nov 2006 16:09:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 16:09:25 -0000
Received: (qmail 8398 invoked by uid 500); 1 Nov 2006 16:09:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8362 invoked by uid 500); 1 Nov 2006 16:09:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8351 invoked by uid 99); 1 Nov 2006 16:09:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 08:09:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.174.5.96] (HELO expredir5.cites.uiuc.edu) (128.174.5.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 08:09:14 -0800
Received: from susie (dynpool-fluorine.cs.uiuc.edu [128.174.253.109])
	by expredir5.cites.uiuc.edu (8.13.7/8.13.7) with SMTP id kA1G8rPj001950
	for <java-user@lucene.apache.org>; Wed, 1 Nov 2006 10:08:53 -0600 (CST)
Message-ID: <06f001c6fdd0$0636fe10$6dfdae80@susie>
From: "Hengzhi Zhong" <hzhong@uiuc.edu>
To: <java-user@lucene.apache.org>
Subject: Write/Read from CFS files
Date: Wed, 1 Nov 2006 10:08:52 -0600
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_06ED_01C6FD9D.BB78D970"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_06ED_01C6FD9D.BB78D970
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,

How are the index written to CFS files?  Can someone describe the =
process to me (ie. first .fnm was written, then...)? =20

What is the order in which the files are read for an index lookup? =20

Thank you very much.

Hanna
------=_NextPart_000_06ED_01C6FD9D.BB78D970--


From java-user-return-24290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 01 16:51:00 2006
Return-Path: <java-user-return-24290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68722 invoked from network); 1 Nov 2006 16:51:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 16:50:59 -0000
Received: (qmail 84892 invoked by uid 500); 1 Nov 2006 16:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84857 invoked by uid 500); 1 Nov 2006 16:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84816 invoked by uid 99); 1 Nov 2006 16:51:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 08:51:01 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 08:50:46 -0800
Received: by nf-out-0910.google.com with SMTP id b2so652705nfe
        for <java-user@lucene.apache.org>; Wed, 01 Nov 2006 08:50:25 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=o3gEYPjKgTsrzoXQRPIjOMx+SoN2HA/Zblo+xt9i3M0zDS+a811wRpKJ5SEhH9AqdlA8bBeWpAKLA6Ao5kEAi/U0mhJNjt+L1iQlFKRBDyk7SdQIaMhMNgaRUpYU6rPosWOHyyxPrD2l59rzl+1Ke34rsq8vECfUEvaeix830PY=
Received: by 10.82.139.17 with SMTP id m17mr1549219bud;
        Wed, 01 Nov 2006 08:50:24 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Wed, 1 Nov 2006 08:50:24 -0800 (PST)
Message-ID: <c68e39170611010850p4153969bg5617a8a8f770cf44@mail.gmail.com>
Date: Wed, 1 Nov 2006 11:50:24 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Indexing floating point number
In-Reply-To: <20061101084154.GA3222@fermat.math.technion.ac.il>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <85c493340610300157t57ea76a3oa1695e8b3a533b23@mail.gmail.com>
	 <c68e39170610300955h33dc0156t59054e5970a95b64@mail.gmail.com>
	 <20061101084154.GA3222@fermat.math.technion.ac.il>
X-Google-Sender-Auth: e71d1ae9e0ba07d4
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/1/06, Nadav Har'El <nyh@math.technion.ac.il> wrote:
> On Mon, Oct 30, 2006, Yonik Seeley wrote about "Re: Indexing floating point number":
> > On 10/30/06, KEGan <khoon.ee.gan@gmail.com> wrote:
> > >Newbie question. How do we index floating point number in Lucene, so that
> > >it
> > >is sortable ? There is a built-in utility class 'NumberTools' which help
> > >with indexing integer. Does Lucene has the same mechanism for floating
> > >point
> > >number?
> >
> > You can look at NumberUtils in Solr, it has conversions for
> > int/long/float/double that make strings that sort correctly
>
> This question was asked so many times, that I think it belongs in the FAQ.
> Moreover, I wonder if we shouldn't add a floating-point version of NumberTools
> to the base Lucene, instead of referring people to Solr every time this
> question is asked?

There are different ways to do it, with different tradeoffs.  I'd
rather not see a proliferation of different methods put into Lucene,
but a single "good" one.
I'm not crazy about the implementation of lucene's NumberUtils long
representation (takes up too much room in the fieldcache).

> I'm attaching another possible implementation. It's a class ToSortableString
> with two static functions fromDouble(double) and fromInt(int). These convert
> numbers into strings which sort lexicographically in the same order as the
> original numbers.

This is the road I went down before using the binary version.
It converts integers directly from base10 (text) to sortable base100
or sortable base10000 (since Solr gets it's data/queries in text form
anyway).  I never got to the floating point version since the binary
version that Solr uses by default turned out to be faster.
http://svn.apache.org/viewvc/incubator/solr/trunk/src/java/org/apache/solr/util/BCDUtils.java?view=markup

> The long comments in the attached code explain my encoding, the details of
> which are different from Solr's. In particular differences include:
> 1. In my code, integers and floating point can be mixed: the encoding of
>    7 (integer) and 7.0 (double) is the same.

I like this property.... same idea I had in BCDUtils, but the float
stuff looked like it was going to be a *lot* of work to implement
efficiently.

> 2. In my code, we can decide how much precision (significant digits) we want
>    to keep from doubles. I decided to keep only 10 significant digits (out of
>    the available ~16) by default, which is more than enough for search
>    application.

"more than enough" depends on the application, but I like the idea of
being able to chop off precision too.

> 3. My code currently uses base 10 encoding, and therefore often generates
>    longer strings than Solr's NumberTools. Moving to base 100 or even 256
>    (as I suggest in the comments) can eliminate this difference.

Or higher, depending on what you are optimizing for.
If you are going to hold String instances in memory (like the
FieldCache does) it's probably better to use more of those 16 bit
chars.

> 4. My code is probably a bit slower, though I didn't actually check.

It would be nice to get rid of those Math.log() and Math.exp() calls...
things like mantissa and exponent can be obtained directly from the float bits.

> 5. I did not yet implement a reverse transformation (from String back to
>    number), because it practice it wasn't needed.
>
> > (for range queries as well as sorts).
>
> This support for floating-point range queries is a "honey trap". It sounds
> really good, but when you actually try to use it, you'll notice how extremely
> inefficient it is during search (unless you're lucky enough to have only a
> few distinct floating point values in the given range).

Yeah, some of the same problems exist with date ranges.
Often, there are a fixed number of ranges though, so they may be
pulled out as filter queries and cached (restricting things by price
range, etc).

> To really support numeric search well, Lucene may need some additional data
> structure in addition to the usual lexicon and posting lists - like some sort
> tree of sub-range posting lists, or something.

I think totally arbitrary numeric range queries (where the endpoints
are different all the time) is a rare usecase for Lucene.

Sorting by distances from a certain point is probably a more common
usecase, but that might be better served by a specific geolocation
class.



> But perhaps this can even be done without any changes to Lucene: for example,
> imagine we index the number 2.345 as four tokens "2.345", "2.34", "2.3", "2".
> Now, if we're looking for the range [2.3-2.4) we can just search for "2.3",
> and if we're looking for the range [2.2-2.45) we can search for
>         "2.2" OR "2.3" OR "2.40" OR "2.41" OR "2.42" OR "2.43" OR "2.44"
> (note that this is an OR of just 7 posting lists, even if this range contains
> thousands of distinct values).
>
> I wonder if anybody ever done such a thing (or came up with an better
> solution) in Lucene.



-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 01 21:56:51 2006
Return-Path: <java-user-return-24291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91092 invoked from network); 1 Nov 2006 21:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2006 21:56:50 -0000
Received: (qmail 55709 invoked by uid 500); 1 Nov 2006 21:56:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55098 invoked by uid 500); 1 Nov 2006 21:56:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55084 invoked by uid 99); 1 Nov 2006 21:56:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 13:56:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucene.developer@googlemail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 13:56:40 -0800
Received: by nz-out-0102.google.com with SMTP id k1so1754639nzf
        for <java-user@lucene.apache.org>; Wed, 01 Nov 2006 13:56:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=tYwq1PU+6twOrAR3VkqA0ym/61Q/B4cbgq1erKOP/7Qx45zxIXp/l/3Uz05DTxwxNEk4Nlal/0+tggxRyrLByNjFq47VNFr1OhHE9ILedEm3M0HJok3NvjBt5X1rDhLcd7CKrWoDyXynEu4pxq7qJK0VXRDfQ5xGWG+g8AXc0CQ=
Received: by 10.65.232.19 with SMTP id j19mr9753391qbr;
        Wed, 01 Nov 2006 13:56:19 -0800 (PST)
Received: by 10.65.83.3 with HTTP; Wed, 1 Nov 2006 13:56:19 -0800 (PST)
Message-ID: <a218b3050611011356w6844f1bfj6082cc48ebeec28d@mail.gmail.com>
Date: Wed, 1 Nov 2006 22:56:19 +0100
From: lude <lucene.developer@googlemail.com>
To: java-user <java-user@lucene.apache.org>
Subject: Any experience with spring's lucene support?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30182_5645129.1162418179478"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30182_5645129.1162418179478
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

while starting a new project we are thinking about using the
spring-modules for working with lucene. See:
https://springmodules.dev.java.net/

Does anybody has experience with this higher level lucene API?
How does it compare to Compass?
(Dis-)Advantages of using spring-modules lucene support?

Thanks
lude

------=_Part_30182_5645129.1162418179478--

From java-user-return-24292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 07:30:55 2006
Return-Path: <java-user-return-24292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50287 invoked from network); 2 Nov 2006 07:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 07:30:54 -0000
Received: (qmail 44391 invoked by uid 500); 2 Nov 2006 07:30:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44355 invoked by uid 500); 2 Nov 2006 07:30:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44344 invoked by uid 99); 2 Nov 2006 07:30:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 23:30:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 23:30:31 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GfX1S-0005tz-RQ
	for java-user@lucene.apache.org; Wed, 01 Nov 2006 23:29:58 -0800
Message-ID: <7128924.post@talk.nabble.com>
Date: Wed, 1 Nov 2006 23:29:58 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: reindex all files
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Basically what I want to do is to reindex all the files in particular
directory. I wonder how I can do this with Lucene search? And I noticed that
reindexing all the files will actually take a lot of time and resources, so
how I can optimize the preformance problem.

   Hope there are examples that I can review on.

   Thanks.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/reindex-all-files-tf2558188.html#a7128924
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 07:43:33 2006
Return-Path: <java-user-return-24293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54772 invoked from network); 2 Nov 2006 07:43:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 07:43:32 -0000
Received: (qmail 59445 invoked by uid 500); 2 Nov 2006 07:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58781 invoked by uid 500); 2 Nov 2006 07:43:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58770 invoked by uid 99); 2 Nov 2006 07:43:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 23:43:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 01 Nov 2006 23:43:24 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GfXE8-0001sO-6T
	for java-user@lucene.apache.org; Wed, 01 Nov 2006 23:43:04 -0800
Message-ID: <7129070.post@talk.nabble.com>
Date: Wed, 1 Nov 2006 23:43:04 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: search within search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I want to perform a search within search feature in my application, so I
having this problem and stuck at this point. I  be able to retrieve search
index from my first search, but having problem to search within the result
that I retrieved. I have gone through some of the mailing list archieves,
and mentined to use queryFilter method and bitSet method, however I m still
not quite get it. In fact, I construct the index search to return in String
by using Hits, and I noticed from the archieves it will be a problem doing
with Hits in terms of performance wise.

   However, I hope there are someone can provide me examples on how to solve
this problem with not changing a lot the way I coded.

   Please let me know if the problem above not clear to you and I will
explain again.

   Thanks.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/search-within-search-tf2558237.html#a7129070
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 08:39:43 2006
Return-Path: <java-user-return-24294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77526 invoked from network); 2 Nov 2006 08:39:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 08:39:39 -0000
Received: (qmail 31038 invoked by uid 500); 2 Nov 2006 08:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30782 invoked by uid 500); 2 Nov 2006 08:39:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30767 invoked by uid 99); 2 Nov 2006 08:39:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 00:39:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 00:39:30 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GfY6P-0003RQ-UI
	for java-user@lucene.apache.org; Thu, 02 Nov 2006 00:39:09 -0800
Message-ID: <7129679.post@talk.nabble.com>
Date: Thu, 2 Nov 2006 00:39:09 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: search within search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I want to perform a search within search feature in my application, so I
having this problem and stuck at this point. I  be able to retrieve search
index from my first search, but having problem to search within the result
that I retrieved. I have gone through some of the mailing list archieves,
and mentined to use queryFilter method and bitSet method, however I m still
not quite get it. In fact, I construct the index search to return in String
by using Hits, and I noticed from the archieves it will be a problem doing
with Hits in terms of performance wise.

   However, I hope there are someone can provide me examples on how to solve
this problem with not changing a lot the way I coded.

   Please let me know if the problem above not clear to you and I will
explain again.

   Thanks.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/search-within-search-tf2558436.html#a7129679
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 09:41:03 2006
Return-Path: <java-user-return-24295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94863 invoked from network); 2 Nov 2006 09:41:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 09:41:02 -0000
Received: (qmail 26130 invoked by uid 500); 2 Nov 2006 09:40:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26094 invoked by uid 500); 2 Nov 2006 09:40:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26083 invoked by uid 99); 2 Nov 2006 09:40:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 01:40:54 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [132.68.238.33] (HELO mailgw2.technion.ac.il) (132.68.238.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 01:40:38 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mailgw2.technion.ac.il (Postfix) with ESMTP id A42B83901C6
	for <java-user@lucene.apache.org>; Thu,  2 Nov 2006 11:39:58 +0200 (IST)
X-Virus-Scanned: by amavisd-new at technion.ac.il
Received: from mailgw2.technion.ac.il ([127.0.0.1])
	by localhost (mailgw2.technion.ac.il [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id BrclBSPNPNXU for <java-user@lucene.apache.org>;
	Thu,  2 Nov 2006 11:39:58 +0200 (IST)
Received: from fermat.math.technion.ac.il (fermat.math.technion.ac.il [132.68.115.6])
	by mailgw2.technion.ac.il (Postfix) with ESMTP id 48AAD39017F
	for <java-user@lucene.apache.org>; Thu,  2 Nov 2006 11:39:54 +0200 (IST)
Received: from fermat.math.technion.ac.il (localhost [127.0.0.1])
	by fermat.math.technion.ac.il (8.12.10/8.12.10) with ESMTP id kA29drXQ018053
	for <java-user@lucene.apache.org>; Thu, 2 Nov 2006 11:39:53 +0200 (IST)
Received: (from nyh@localhost)
	by fermat.math.technion.ac.il (8.12.10/8.12.10/Submit) id kA29drFs018052
	for java-user@lucene.apache.org; Thu, 2 Nov 2006 11:39:53 +0200 (IST)
X-Authentication-Warning: fermat.math.technion.ac.il: nyh set sender to nyh@math.technion.ac.il using -f
Date: Thu, 2 Nov 2006 11:39:53 +0200
From: "Nadav Har'El" <nyh@math.technion.ac.il>
To: java-user@lucene.apache.org
Subject: Re: Indexing floating point number
Message-ID: <20061102093953.GA16449@fermat.math.technion.ac.il>
References: <85c493340610300157t57ea76a3oa1695e8b3a533b23@mail.gmail.com> <c68e39170610300955h33dc0156t59054e5970a95b64@mail.gmail.com> <20061101084154.GA3222@fermat.math.technion.ac.il> <c68e39170611010850p4153969bg5617a8a8f770cf44@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <c68e39170611010850p4153969bg5617a8a8f770cf44@mail.gmail.com>
User-Agent: Mutt/1.4.2.2i
Hebrew-Date: 11 Heshvan 5767
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Nov 01, 2006, Yonik Seeley wrote about "Re: Indexing floating point number":
> >   longer strings than Solr's NumberTools. Moving to base 100 or even 256
> >   (as I suggest in the comments) can eliminate this difference.
> 
> Or higher, depending on what you are optimizing for.
> If you are going to hold String instances in memory (like the
> FieldCache does) it's probably better to use more of those 16 bit
> chars.

This is a good point. I was thinking byte arrays, but indeed terms are
Strings, not byte arrays.

> >4. My code is probably a bit slower, though I didn't actually check.
> 
> It would be nice to get rid of those Math.log() and Math.exp() calls...
> things like mantissa and exponent can be obtained directly from the float 
> bits.

Well, it really depends what is your bottleneck. In my application, where
there is barely a handful of numeric fields, this slow encoding is shadowed
by the much slower process of indexing the document itself. Not to mention
that what usually really matters is the speed of the search or sort, not the
speed of the one-time indexing.

-- 
Nadav Har'El                        |    Thursday, Nov 2 2006, 11 Heshvan 5767
IBM Haifa Research Lab              |-----------------------------------------
                                    |Christopher Robin Hood steals from the
http://nadav.harel.org.il           |rich and gives to the Pooh.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 11:48:24 2006
Return-Path: <java-user-return-24296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38235 invoked from network); 2 Nov 2006 11:48:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 11:48:23 -0000
Received: (qmail 75114 invoked by uid 500); 2 Nov 2006 11:48:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74877 invoked by uid 500); 2 Nov 2006 11:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74866 invoked by uid 99); 2 Nov 2006 11:48:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 03:48:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 02 Nov 2006 03:48:10 -0800
Received: (qmail invoked by alias); 02 Nov 2006 11:47:48 -0000
Received: from p548C67DF.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.103.223]
  by mail.gmx.net (mp037) with SMTP; 02 Nov 2006 12:47:48 +0100
X-Authenticated: #3493418
Message-ID: <4549DA5A.90905@gmx.de>
Date: Thu, 02 Nov 2006 12:45:30 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: How to get Term Weights (document term matrix)?
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I would like to extract and store the document term matrix externally. I 
iterate the terms and the documents for each term:
TermEnum terms=IndexReader.terms();
while(terms.next()) {
	TermDocs docs=IndexReader.termDocs(terms.term());
	while(docs.next()) {
		//store the term, the document and the weight
	}
}

How can I get the term weight for a document?

Thanks. Sören

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 12:17:55 2006
Return-Path: <java-user-return-24297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47969 invoked from network); 2 Nov 2006 12:17:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 12:17:55 -0000
Received: (qmail 24397 invoked by uid 500); 2 Nov 2006 12:17:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24366 invoked by uid 500); 2 Nov 2006 12:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24355 invoked by uid 99); 2 Nov 2006 12:17:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 04:17:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 04:17:37 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DFCBD30EFC19; Thu,  2 Nov 2006 07:16:57 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 24C7430EFC18
	for <java-user@lucene.apache.org>; Thu,  2 Nov 2006 07:16:50 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <7129679.post@talk.nabble.com>
References: <7129679.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <39735A87-BE2A-401E-A2C9-8E9E0C3C7AF9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search within search
Date: Thu, 2 Nov 2006 07:16:47 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

Take the original search, and stick it inside a BooleanQuery as a  
MUST clause along with the new search criteria as another MUST  
clause.  That is effectively ANDing the two queries together.

	Erik

On Nov 2, 2006, at 3:39 AM, spinergywmy wrote:

>
> Hi,
>
>    I want to perform a search within search feature in my  
> application, so I
> having this problem and stuck at this point. I  be able to retrieve  
> search
> index from my first search, but having problem to search within the  
> result
> that I retrieved. I have gone through some of the mailing list  
> archieves,
> and mentined to use queryFilter method and bitSet method, however I  
> m still
> not quite get it. In fact, I construct the index search to return  
> in String
> by using Hits, and I noticed from the archieves it will be a  
> problem doing
> with Hits in terms of performance wise.
>
>    However, I hope there are someone can provide me examples on how  
> to solve
> this problem with not changing a lot the way I coded.
>
>    Please let me know if the problem above not clear to you and I will
> explain again.
>
>    Thanks.
>
> regards,
> Wooi Meng
> -- 
> View this message in context: http://www.nabble.com/search-within- 
> search-tf2558436.html#a7129679
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 12:37:08 2006
Return-Path: <java-user-return-24298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53980 invoked from network); 2 Nov 2006 12:37:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 12:37:07 -0000
Received: (qmail 62800 invoked by uid 500); 2 Nov 2006 12:37:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62568 invoked by uid 500); 2 Nov 2006 12:37:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62554 invoked by uid 99); 2 Nov 2006 12:37:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 04:37:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 04:36:54 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kA2CaVRi004988
	for <java-user@lucene.apache.org>; Thu, 2 Nov 2006 13:36:32 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 004258BC82
	for <java-user@lucene.apache.org>; Thu,  2 Nov 2006 13:36:32 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 13962-07 for <java-user@lucene.apache.org>;
 Thu,  2 Nov 2006 13:36:30 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id E357B8BC70
	for <java-user@lucene.apache.org>; Thu,  2 Nov 2006 13:36:30 +0100 (CET)
Message-ID: <4549E64E.8010102@uni-hd.de>
Date: Thu, 02 Nov 2006 13:36:30 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.7 (X11/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: experiences with lingpipe
References: <453C7D4F.2090502@uni-hd.de> <453D5740.4050005@alias-i.com> <453F86F0.5060101@uni-hd.de> <453FC61F.5010505@alias-i.com>
In-Reply-To: <453FC61F.5010505@alias-i.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Breck,

i have tried your tutorial and built (hopefully) a successful
SpellCheck.model File with
49M.
My Lucene Index directory is 2,4G. When I try to read the Model with the
readmodel function,
i get an "Exception in thread "main" java.lang.OutOfMemoryError: Java
heap space", though I started java with -Xms1024m -Xmx1024m.

How many RAM will I need for the Model (I only have 2 GB of physical
RAM, and lucene's also using some memory).

Is there a "rule of thumb" to calculate the needed amount of memory of
the model?

thanks in advance,

martin


>>> Tuning params dominate the performance space. A small beam (16 active
>>> hypotheses) will be quite snappy (I have 200 queries/sec with a 32 beam.
>>> over a 80 gig text collection that with some pruning was 5 gig in memory
>>> running an 8 gram model)
>>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 13:15:28 2006
Return-Path: <java-user-return-24299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64453 invoked from network); 2 Nov 2006 13:15:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 13:15:28 -0000
Received: (qmail 32010 invoked by uid 500); 2 Nov 2006 13:15:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31984 invoked by uid 500); 2 Nov 2006 13:15:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31973 invoked by uid 99); 2 Nov 2006 13:15:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 05:15:31 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 05:15:17 -0800
Received: by nf-out-0910.google.com with SMTP id b2so923539nfe
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 05:14:56 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qfVjCDLOv9jpSGiH087iOpNBZvAIlhVPZh3qjcB+op+j4/3de8ekP7adxC9QHX2LZDGHSjDz84+IELP1MbBeNJP6EdpYWbOQVLjRmN4skcWuIXKZRoyZqDW0lQnxx2zlCmFxYxgOTzmvSkI30u5bdrbloBY2tWhCgr50Bh1GCQ0=
Received: by 10.82.123.16 with SMTP id v16mr82400buc.1162473296080;
        Thu, 02 Nov 2006 05:14:56 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Thu, 2 Nov 2006 05:14:50 -0800 (PST)
Message-ID: <359a92830611020514s7da05da5w9438d1f63045cbe7@mail.gmail.com>
Date: Thu, 2 Nov 2006 08:14:50 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: reindex all files
In-Reply-To: <7128924.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3539_30598384.1162473290443"
References: <7128924.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3539_30598384.1162473290443
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There isn't enough of an explanation here to give you any meaningful answer
about performance. Do you have any evidence that the optimization will take
a long time? Have you run it before? Do you have any count of how many files
you're indexing? Do they have a complex structure? What are the performance
numbers you need? What performance are you seeing? The only real advice here
is "try some stuff and see". That said, here are some parameters that will
affect your indexing speed, see the javadocs for cautions about how to use
these.

setMergeFactor
setMaxBufferedDocs
setMaxMergeDocs

I'd advise you just try a few runs with the defaults and see whether
performance needs tweaking....

Here's some code for recursing a directory structure


    private void index(File file) throws Exception {
        // Boring stuff to only try to index files.
        if (file.canRead()) {
            if (file.isDirectory()) {
                String[] files = file.list();
                if (files != null) {
                    for (int i = 0; i < files.length; i++) {
                        index(new File(file, files[i]));
                    }
                }
            } else {
                // Index the file
                System.out.println("Indexing " + file);
                // Here's the interesting part.
                indexOneFile(file); // Here's where you'll do your
processing....
            }
        }
    }


Call this with a new File("path to directory");
On 11/2/06, spinergywmy <spinergywmy@gmail.com> wrote:
>
>
> Hi,
>
>    Basically what I want to do is to reindex all the files in particular
> directory. I wonder how I can do this with Lucene search? And I noticed
> that
> reindexing all the files will actually take a lot of time and resources,
> so
> how I can optimize the preformance problem.
>
>    Hope there are examples that I can review on.
>
>    Thanks.
>
> regards,
> Wooi Meng
> --
> View this message in context:
> http://www.nabble.com/reindex-all-files-tf2558188.html#a7128924
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3539_30598384.1162473290443--

From java-user-return-24300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 14:37:22 2006
Return-Path: <java-user-return-24300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99231 invoked from network); 2 Nov 2006 14:37:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 14:37:21 -0000
Received: (qmail 11329 invoked by uid 500); 2 Nov 2006 14:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11300 invoked by uid 500); 2 Nov 2006 14:37:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11288 invoked by uid 99); 2 Nov 2006 14:37:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 06:37:25 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of michele.amoretti@gmail.com designates 66.249.82.229 as permitted sender)
Received: from [66.249.82.229] (HELO wx-out-0506.google.com) (66.249.82.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 06:37:09 -0800
Received: by wx-out-0506.google.com with SMTP id s15so118200wxc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 06:36:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=V0BtkDGsOA0vsr+N9ac1qZYk1cr6qbSnU8LDsnP/2j7l/jxJZIdbppSWaEB2BPeuVosP3gj6fbKqH/DrtGUYso3lrZjgsuwLkuka1pPqrGvwGRVVrhANEfXUOEuOZg+UtUR46p8haAF42jV6MKLBWOxe8+s+ZhdE5Ab4vogWF2E=
Received: by 10.90.27.6 with SMTP id a6mr244021aga.1162478209103;
        Thu, 02 Nov 2006 06:36:49 -0800 (PST)
Received: by 10.90.51.3 with HTTP; Thu, 2 Nov 2006 06:36:48 -0800 (PST)
Message-ID: <71caf8b50611020636l505eddb7rf16fd556abbc289c@mail.gmail.com>
Date: Thu, 2 Nov 2006 15:36:48 +0100
From: "Michele Amoretti" <amoretti@ce.unipr.it>
Sender: michele.amoretti@gmail.com
To: java-user@lucene.apache.org
Subject: simple (?) question about scoring
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Google-Sender-Auth: 41b28da151177bde
X-Virus-Checked: Checked by ClamAV on apache.org

Hello, I am completely new at Lucene. I browsed the web site and the
source code, searching for an example which illustrates the following
operation:

given a Query and a Document, return the score

To me, this is a very basic operation, but I cannot find a class which
easily provide this functionality.

E.g. the Similarity class provides methods which return the factors of
the scoring formula, but I would like a method which returns the score
directly.

Is this possible?

Is the Scorer class the solution? Javadoc is too poor to understand
how to use it. Btw, I do not have an index, I have 1 Document, and 1
Query.

Thanks

--=20
Michele Amoretti, Ph.D.
Distributed Systems Group
Dipartimento di Ingegneria dell'Informazione
Universit=E0 degli Studi di Parma
http://www.ce.unipr.it/people/amoretti

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 14:44:28 2006
Return-Path: <java-user-return-24301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1371 invoked from network); 2 Nov 2006 14:44:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 14:44:25 -0000
Received: (qmail 24447 invoked by uid 500); 2 Nov 2006 14:44:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24403 invoked by uid 500); 2 Nov 2006 14:44:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24380 invoked by uid 99); 2 Nov 2006 14:44:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 06:44:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 06:43:56 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gfdn6-0004DZ-Do
	for java-user@lucene.apache.org; Thu, 02 Nov 2006 06:43:36 -0800
Message-ID: <7134849.post@talk.nabble.com>
Date: Thu, 2 Nov 2006 06:43:36 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search within search
In-Reply-To: <39735A87-BE2A-401E-A2C9-8E9E0C3C7AF9@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7129070.post@talk.nabble.com> <39735A87-BE2A-401E-A2C9-8E9E0C3C7AF9@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Thanks Erik.

   Is there any example that I can refer to cause I m actually quite new to
apache lucene although it is sometimes quite straight forward, but I hope u
understand and it is better to have a guide for me.

   Thanks


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/search-within-search-tf2558237.html#a7134849
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 14:54:24 2006
Return-Path: <java-user-return-24302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4478 invoked from network); 2 Nov 2006 14:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 14:54:24 -0000
Received: (qmail 61437 invoked by uid 500); 2 Nov 2006 14:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61378 invoked by uid 500); 2 Nov 2006 14:54:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61355 invoked by uid 99); 2 Nov 2006 14:54:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 06:54:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 06:53:58 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GfdvJ-0006lr-Hi
	for java-user@lucene.apache.org; Thu, 02 Nov 2006 06:52:05 -0800
Message-ID: <7135033.post@talk.nabble.com>
Date: Thu, 2 Nov 2006 06:52:05 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: reindex all files
In-Reply-To: <359a92830611020514s7da05da5w9438d1f63045cbe7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7128924.post@talk.nabble.com> <359a92830611020514s7da05da5w9438d1f63045cbe7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Thanks Erik.

   I hope u can provide me a complete example cause I actually quite new to
lucene search, sorry for the inconvenience.

   Thanks.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/reindex-all-files-tf2558188.html#a7135033
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 15:09:19 2006
Return-Path: <java-user-return-24303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8407 invoked from network); 2 Nov 2006 15:09:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 15:09:17 -0000
Received: (qmail 14626 invoked by uid 500); 2 Nov 2006 15:09:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14604 invoked by uid 500); 2 Nov 2006 15:09:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 84600 invoked by uid 99); 2 Nov 2006 15:01:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Warming up a Searcher
Date: Thu, 2 Nov 2006 10:00:36 -0500
Message-ID: <6B6D3063DF0A7A4DB8A989D40C61BEB301FD93C4@EMAIL02.wescodist.com>
In-Reply-To: <7135033.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Warming up a Searcher
Thread-Index: Acb+jsr5Z4EOO+ZDRqKif0jLmad0QAAAGw5Q
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 02 Nov 2006 15:00:37.0948 (UTC) FILETIME=[A8077FC0:01C6FE8F]
X-Virus-Checked: Checked by ClamAV on apache.org


I have seen numerous posts on warming up a searcher, but was wondering
if someone could post their code that would spin off another thread to
warm up a searcher, then switch to the new one when it is warmed up? =20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 16:15:22 2006
Return-Path: <java-user-return-24304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38376 invoked from network); 2 Nov 2006 16:10:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 16:10:37 -0000
Received: (qmail 28238 invoked by uid 500); 2 Nov 2006 16:10:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28038 invoked by uid 500); 2 Nov 2006 16:10:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27811 invoked by uid 99); 2 Nov 2006 16:10:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:10:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:09:47 -0800
Received: by nf-out-0910.google.com with SMTP id b2so964604nfe
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 08:09:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=smF34hpvbzicZwkbEaaVghhAL1/rX+YawVG+WgSb47qQn7wGQuPQQMWsNZWhWkZIHSwxO5TzR5QdD0gGfiPndX/t3V7MPL3K43C7wM4WWN5wZOAK92n1Aid1gmBTb6esgmIkIWhIpoMCkOYIZq/QgYvmSMW5qy5lSZKSqmx8KKk=
Received: by 10.82.190.2 with SMTP id n2mr235137buf.1162483766103;
        Thu, 02 Nov 2006 08:09:26 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Thu, 2 Nov 2006 08:09:20 -0800 (PST)
Message-ID: <359a92830611020809u1ce5806encc4890676417f8cd@mail.gmail.com>
Date: Thu, 2 Nov 2006 11:09:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <71caf8b50611020636l505eddb7rf16fd556abbc289c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6413_13909028.1162483760648"
References: <71caf8b50611020636l505eddb7rf16fd556abbc289c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6413_13909028.1162483760648
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well, the simplest way is to look at the HITS object returned from a search=
.
Something like

Hits hits =3D searcher.search(new TermQuery(new Term("field", "value")));
for (int idx =3D 0; idx < hits.length(); ++idx)
    float score =3D hits.score(idx);


Look at the warnings in the javadoc for why using the Hits object rather
than a HitCollector is not optimal if you intend to look at more than 100 o=
r
so documents...

Best
Erick

On 11/2/06, Michele Amoretti <amoretti@ce.unipr.it> wrote:
>
> Hello, I am completely new at Lucene. I browsed the web site and the
> source code, searching for an example which illustrates the following
> operation:
>
> given a Query and a Document, return the score
>
> To me, this is a very basic operation, but I cannot find a class which
> easily provide this functionality.
>
> E.g. the Similarity class provides methods which return the factors of
> the scoring formula, but I would like a method which returns the score
> directly.
>
> Is this possible?
>
> Is the Scorer class the solution? Javadoc is too poor to understand
> how to use it. Btw, I do not have an index, I have 1 Document, and 1
> Query.
>
> Thanks
>
> --
> Michele Amoretti, Ph.D.
> Distributed Systems Group
> Dipartimento di Ingegneria dell'Informazione
> Universit=E0 degli Studi di Parma
> http://www.ce.unipr.it/people/amoretti
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6413_13909028.1162483760648--

From java-user-return-24305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 16:16:10 2006
Return-Path: <java-user-return-24305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40432 invoked from network); 2 Nov 2006 16:11:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 16:11:56 -0000
Received: (qmail 39693 invoked by uid 500); 2 Nov 2006 16:11:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39670 invoked by uid 500); 2 Nov 2006 16:11:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39659 invoked by uid 99); 2 Nov 2006 16:11:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:11:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:11:43 -0800
Received: by nf-out-0910.google.com with SMTP id b2so965005nfe
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 08:11:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mAhxUSA0Ijy451LRKXHt11v7Tzrbw+tQ+SwCSkqry036Q/tI6BoidHM9CamZADWxinWYcD79k/ujRWP7oU2kpcMB4Lh/bijObmpnQ8cNikNpf96+Bu54J138TEPt2tlose8/HzAKXu3zjm5asBqcG0Wzuh05SePTq/VqxuaVJrw=
Received: by 10.82.120.15 with SMTP id s15mr237318buc.1162483876553;
        Thu, 02 Nov 2006 08:11:16 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Thu, 2 Nov 2006 08:11:01 -0800 (PST)
Message-ID: <359a92830611020811p10298eeexe6a2f3cf69e8f1e@mail.gmail.com>
Date: Thu, 2 Nov 2006 11:11:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search within search
In-Reply-To: <7134849.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6465_7740703.1162483861172"
References: <7129070.post@talk.nabble.com>
	 <39735A87-BE2A-401E-A2C9-8E9E0C3C7AF9@ehatchersolutions.com>
	 <7134849.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6465_7740703.1162483861172
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I *strongly* recommend that you get a copy of "Lucene in Action". It has
many examples and I found it extremely helpful when I started out....

Best
Erick

On 11/2/06, spinergywmy <spinergywmy@gmail.com> wrote:
>
>
> Hi,
>
>    Thanks Erik.
>
>    Is there any example that I can refer to cause I m actually quite new
> to
> apache lucene although it is sometimes quite straight forward, but I hope
> u
> understand and it is better to have a guide for me.
>
>    Thanks
>
>
> regards,
> Wooi Meng
> --
> View this message in context:
> http://www.nabble.com/search-within-search-tf2558237.html#a7134849
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6465_7740703.1162483861172--

From java-user-return-24306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 16:16:18 2006
Return-Path: <java-user-return-24306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44554 invoked from network); 2 Nov 2006 16:14:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 16:14:40 -0000
Received: (qmail 46310 invoked by uid 500); 2 Nov 2006 16:14:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46266 invoked by uid 500); 2 Nov 2006 16:14:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46250 invoked by uid 99); 2 Nov 2006 16:14:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:14:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:14:29 -0800
Received: by ug-out-1314.google.com with SMTP id k40so167007ugc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 08:14:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uiPU6iwpwAlmXg+EzDuu/3e/Qv4gCV6FtNh2XArCNSVcGtK+8ZzGXlKQYTFf5FXGmw+164QLSqeruNlurTrzAhsRUe2FIAZ1b5X0Vzq1v2UoGS2cJYmG4pFhxpvD9R7iUTlHUAU1h9eTKBEG0fWyI/jMcXhQMlFV1i9ysAkCrSo=
Received: by 10.82.111.8 with SMTP id j8mr235207buc.1162484047057;
        Thu, 02 Nov 2006 08:14:07 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Thu, 2 Nov 2006 08:14:06 -0800 (PST)
Message-ID: <359a92830611020814r2e0e1fd9uabd44d4b5e24321@mail.gmail.com>
Date: Thu, 2 Nov 2006 11:14:06 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: reindex all files
In-Reply-To: <7135033.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6541_25880391.1162484046605"
References: <7128924.post@talk.nabble.com>
	 <359a92830611020514s7da05da5w9438d1f63045cbe7@mail.gmail.com>
	 <7135033.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6541_25880391.1162484046605
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I really, really, really recommend a copy of "Lucene in action" <G>.

Another rich source of examples is the unit test code that comes along with
the source for Lucene. You can download a copy of all the source and unit
tests from http://www.eng.lsu.edu/mirrors/apache/lucene/java/

Best
Erick

On 11/2/06, spinergywmy <spinergywmy@gmail.com> wrote:
>
>
> Hi,
>
>    Thanks Erik.
>
>    I hope u can provide me a complete example cause I actually quite new
> to
> lucene search, sorry for the inconvenience.
>
>    Thanks.
>
> regards,
> Wooi Meng
> --
> View this message in context:
> http://www.nabble.com/reindex-all-files-tf2558188.html#a7135033
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6541_25880391.1162484046605--

From java-user-return-24307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 16:35:20 2006
Return-Path: <java-user-return-24307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54921 invoked from network); 2 Nov 2006 16:35:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 16:35:19 -0000
Received: (qmail 2413 invoked by uid 500); 2 Nov 2006 16:35:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2387 invoked by uid 500); 2 Nov 2006 16:35:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2376 invoked by uid 99); 2 Nov 2006 16:35:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:35:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 08:35:08 -0800
Received: by ug-out-1314.google.com with SMTP id k40so172939ugc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 08:34:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=hL8F8AI23stYOstkQ3Wydfp+ZKHO4EpXoJv6m7DGnOf6fC8XjCnxmR1kCAIrC3HycxepnIupK0Mu49i3o+vD0k0rBdafUMUfjjAIqNxKSAQKzTISFs4Sg0wty9C417Uqm/YThdpOz4l84HZeAwoPviG040qgxHjZFdlNwU3RtTQ=
Received: by 10.82.190.2 with SMTP id n2mr242065buf.1162485286421;
        Thu, 02 Nov 2006 08:34:46 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Thu, 2 Nov 2006 08:34:46 -0800 (PST)
Message-ID: <c68e39170611020834q7fe5bcc7h4392111888e0f5b8@mail.gmail.com>
Date: Thu, 2 Nov 2006 11:34:46 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Indexing floating point number
In-Reply-To: <20061102093953.GA16449@fermat.math.technion.ac.il>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <85c493340610300157t57ea76a3oa1695e8b3a533b23@mail.gmail.com>
	 <c68e39170610300955h33dc0156t59054e5970a95b64@mail.gmail.com>
	 <20061101084154.GA3222@fermat.math.technion.ac.il>
	 <c68e39170611010850p4153969bg5617a8a8f770cf44@mail.gmail.com>
	 <20061102093953.GA16449@fermat.math.technion.ac.il>
X-Google-Sender-Auth: 570434ee028b9b8d
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/2/06, Nadav Har'El <nyh@math.technion.ac.il> wrote:
> On Wed, Nov 01, 2006, Yonik Seeley wrote about "Re: Indexing floating point number":
> > >   longer strings than Solr's NumberTools. Moving to base 100 or even 256
> > >   (as I suggest in the comments) can eliminate this difference.
> >
> > Or higher, depending on what you are optimizing for.
> > If you are going to hold String instances in memory (like the
> > FieldCache does) it's probably better to use more of those 16 bit
> > chars.
>
> This is a good point. I was thinking byte arrays, but indeed terms are
> Strings, not byte arrays.

For now :-)
I think byte arrays may be in lucene's future:
http://www.nabble.com/storing-term-text-internally-as-byte-array-and-bytecount-as-prefix%2C-etc.-tf1540279.html#a4220593

And if we kept UTF8 in byte arrays, the next logical question would
be, why not just allow binary in there too :-)

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 17:16:14 2006
Return-Path: <java-user-return-24308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66190 invoked from network); 2 Nov 2006 17:16:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 17:16:13 -0000
Received: (qmail 88322 invoked by uid 500); 2 Nov 2006 17:15:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88254 invoked by uid 500); 2 Nov 2006 17:15:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88200 invoked by uid 99); 2 Nov 2006 17:15:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [208.97.132.62] (HELO spunkymail-a18.dreamhost.com) (208.97.132.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 09:15:43 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.dreamhost.com (Postfix) with ESMTP id 65C205B533
	for <java-user@lucene.apache.org>; Thu,  2 Nov 2006 09:14:26 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830611020809u1ce5806encc4890676417f8cd@mail.gmail.com>
References: <71caf8b50611020636l505eddb7rf16fd556abbc289c@mail.gmail.com> <359a92830611020809u1ce5806encc4890676417f8cd@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <178DFFC0-C757-4E14-B823-1CD17882C687@apache.org>
Content-Transfer-Encoding: quoted-printable
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: simple (?) question about scoring
Date: Thu, 2 Nov 2006 12:14:23 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Also, from the javadocs, check out the explain method on Searcher:  =20
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/=20
Searcher.html#explain(org.apache.lucene.search.Query,%20int)

As for the state of the documentation, If you have concerns about the =20=

javadocs, please write up an issue in JIRA and, even better, submit a =20=

patch with your improvements.  We are always looking for help, =20
especially in the documentation department.  Lucene will only get =20
better by having people make quality contributions based on their =20
knowledge of Lucene and IR.

-Grant

On Nov 2, 2006, at 11:09 AM, Erick Erickson wrote:

> Well, the simplest way is to look at the HITS object returned from =20
> a search.
> Something like
>
> Hits hits =3D searcher.search(new TermQuery(new Term("field", =20
> "value")));
> for (int idx =3D 0; idx < hits.length(); ++idx)
>    float score =3D hits.score(idx);
>
>
> Look at the warnings in the javadoc for why using the Hits object =20
> rather
> than a HitCollector is not optimal if you intend to look at more =20
> than 100 or
> so documents...
>
> Best
> Erick
>
> On 11/2/06, Michele Amoretti <amoretti@ce.unipr.it> wrote:
>>
>> Hello, I am completely new at Lucene. I browsed the web site and the
>> source code, searching for an example which illustrates the following
>> operation:
>>
>> given a Query and a Document, return the score
>>
>> To me, this is a very basic operation, but I cannot find a class =20
>> which
>> easily provide this functionality.
>>
>> E.g. the Similarity class provides methods which return the =20
>> factors of
>> the scoring formula, but I would like a method which returns the =20
>> score
>> directly.
>>
>> Is this possible?
>>
>> Is the Scorer class the solution? Javadoc is too poor to understand
>> how to use it. Btw, I do not have an index, I have 1 Document, and 1
>> Query.
>>
>> Thanks
>>
>> --
>> Michele Amoretti, Ph.D.
>> Distributed Systems Group
>> Dipartimento di Ingegneria dell'Informazione
>> Universit=E0 degli Studi di Parma
>> http://www.ce.unipr.it/people/amoretti
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 17:53:21 2006
Return-Path: <java-user-return-24309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78850 invoked from network); 2 Nov 2006 17:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 17:53:20 -0000
Received: (qmail 72787 invoked by uid 500); 2 Nov 2006 17:53:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72756 invoked by uid 500); 2 Nov 2006 17:53:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72745 invoked by uid 99); 2 Nov 2006 17:53:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 09:53:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 09:53:06 -0800
Received: by ug-out-1314.google.com with SMTP id k40so194517ugc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 09:52:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cxEGHES0i+zUvPhisERvl7BlWbtM3w03nHfUaPTOE4+ba0wErVUO6EcL+vgIVK+9s64kEoYuaQfyujcAa9CF71xB3LlwQMmBOQDJ+twfkgohUl5vKDLgoTJQGTVWmIgn2yoXPlwRw2IGdyburNpz2pRoDs0udAaFnLGibk1yPoY=
Received: by 10.82.153.5 with SMTP id a5mr263518bue.1162489963747;
        Thu, 02 Nov 2006 09:52:43 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Thu, 2 Nov 2006 09:52:38 -0800 (PST)
Message-ID: <359a92830611020952i3eeb5eefhdaacc6cd87ff95dc@mail.gmail.com>
Date: Thu, 2 Nov 2006 12:52:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <71caf8b50611020636l505eddb7rf16fd556abbc289c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8421_16310843.1162489958246"
References: <71caf8b50611020636l505eddb7rf16fd556abbc289c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8421_16310843.1162489958246
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

BTW, I highly recommend "Lucene in Action" for examples on getting started.
Another good place to see examples is in the unit tests that come along wit=
h
the Lucene source code. See
http://www.eng.lsu.edu/mirrors/apache/lucene/java/

Best
Erick

On 11/2/06, Michele Amoretti <amoretti@ce.unipr.it> wrote:
>
> Hello, I am completely new at Lucene. I browsed the web site and the
> source code, searching for an example which illustrates the following
> operation:
>
> given a Query and a Document, return the score
>
> To me, this is a very basic operation, but I cannot find a class which
> easily provide this functionality.
>
> E.g. the Similarity class provides methods which return the factors of
> the scoring formula, but I would like a method which returns the score
> directly.
>
> Is this possible?
>
> Is the Scorer class the solution? Javadoc is too poor to understand
> how to use it. Btw, I do not have an index, I have 1 Document, and 1
> Query.
>
> Thanks
>
> --
> Michele Amoretti, Ph.D.
> Distributed Systems Group
> Dipartimento di Ingegneria dell'Informazione
> Universit=E0 degli Studi di Parma
> http://www.ce.unipr.it/people/amoretti
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8421_16310843.1162489958246--

From java-user-return-24310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 18:45:18 2006
Return-Path: <java-user-return-24310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94803 invoked from network); 2 Nov 2006 18:45:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 18:45:17 -0000
Received: (qmail 76945 invoked by uid 500); 2 Nov 2006 18:45:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76914 invoked by uid 500); 2 Nov 2006 18:45:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76903 invoked by uid 99); 2 Nov 2006 18:45:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 10:45:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of simon.willnauer@googlemail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 10:45:05 -0800
Received: by ug-out-1314.google.com with SMTP id k40so208379ugc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 10:44:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IyeCb6hOnvmFkwukrq9fhzs1Qas6CLyyjEtpB3WdEZHA5pQdb8CLzQtNq5uBrvQd/4mlETz7Rhs43z/XztyF39qc9d0SkgEpPn5hFZonKI4/nf21pInjc8vTB/QK4Ryry7KPYnVbHigQjy1zu5rBJAMRbZgshiwy/YfdiPyctVE=
Received: by 10.67.19.17 with SMTP id w17mr1155425ugi.1162493083360;
        Thu, 02 Nov 2006 10:44:43 -0800 (PST)
Received: by 10.67.22.3 with HTTP; Thu, 2 Nov 2006 10:44:42 -0800 (PST)
Message-ID: <f18c9dde0611021044g7068731dlc20f98b4f62daec7@mail.gmail.com>
Date: Thu, 2 Nov 2006 19:44:42 +0100
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Warming up a Searcher
In-Reply-To: <6B6D3063DF0A7A4DB8A989D40C61BEB301FD93C4@EMAIL02.wescodist.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7135033.post@talk.nabble.com>
	 <6B6D3063DF0A7A4DB8A989D40C61BEB301FD93C4@EMAIL02.wescodist.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I can't point out the actual position in solr but I bet if you spend
10 min looking into the solr source you will find a nice example how
to warm up a searcher.

regards simon

On 11/2/06, Aigner, Thomas <TAigner@wescodist.com> wrote:
>
> I have seen numerous posts on warming up a searcher, but was wondering
> if someone could post their code that would spin off another thread to
> warm up a searcher, then switch to the new one when it is warmed up?
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 18:52:34 2006
Return-Path: <java-user-return-24311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98097 invoked from network); 2 Nov 2006 18:52:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 18:52:33 -0000
Received: (qmail 2894 invoked by uid 500); 2 Nov 2006 18:52:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2863 invoked by uid 500); 2 Nov 2006 18:52:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2852 invoked by uid 99); 2 Nov 2006 18:52:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 10:52:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 10:52:22 -0800
Received: by nf-out-0910.google.com with SMTP id b2so1001081nfe
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 10:52:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=OfDVO37BHA4hW9br+9MaH9tDGNl2dyTyeQOCTpBm7rO8NzjiFnJRO+kKHgBeIO2jjgkKDTLbfGBPocGGHVoIMR1xBDTlHFp/aGpTalSvxyVgzUbLoC1FmvMngWTrtltrjUJ+IvYC0kJnfWuA1iUu0uWROlh2n4+ntBN0ZMK8vyA=
Received: by 10.82.111.8 with SMTP id j8mr289339buc.1162493520865;
        Thu, 02 Nov 2006 10:52:00 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Thu, 2 Nov 2006 10:52:00 -0800 (PST)
Message-ID: <c68e39170611021052y62a9d479j54c17690de286e8f@mail.gmail.com>
Date: Thu, 2 Nov 2006 13:52:00 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Subject: Re: Warming up a Searcher
In-Reply-To: <f18c9dde0611021044g7068731dlc20f98b4f62daec7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <7135033.post@talk.nabble.com>
	 <6B6D3063DF0A7A4DB8A989D40C61BEB301FD93C4@EMAIL02.wescodist.com>
	 <f18c9dde0611021044g7068731dlc20f98b4f62daec7@mail.gmail.com>
X-Google-Sender-Auth: bc18af064f7a27fc
X-Virus-Checked: Checked by ClamAV on apache.org

SolrCore.getSearcher() and registerSearcher() work together to do do warming.
If you want to try and rip that out of solr, remove any calls having
to do with autowarming (warming new caches from most-recently-used
items in old caches), and replace the static warming queries (defined
in an external configuration file to be run when warming) with your
own queries.

Or see if Solr will meet your needs as-is ;-)

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 19:10:41 2006
Return-Path: <java-user-return-24312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3500 invoked from network); 2 Nov 2006 19:10:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 19:10:41 -0000
Received: (qmail 43031 invoked by uid 500); 2 Nov 2006 19:10:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42996 invoked by uid 500); 2 Nov 2006 19:10:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42985 invoked by uid 99); 2 Nov 2006 19:10:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 11:10:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of michele.amoretti@gmail.com designates 66.249.82.232 as permitted sender)
Received: from [66.249.82.232] (HELO wx-out-0506.google.com) (66.249.82.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 11:10:31 -0800
Received: by wx-out-0506.google.com with SMTP id s15so189263wxc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 11:10:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=aUz6FLk3YnAh7fMk047Fxa0Y6jmMO1otBYYdQ92Y52XwxzPH52/QGjft268a4/jhA7V7RCPVfSFJ8PLraKM7pm0gowXFqZqa3GGWs2oigDCVi2r4B29fuciUUL0frUOT3zIgepJOTpa/W0Af6+k8hyf22gZImL2Jbmt6beyHAZ0=
Received: by 10.90.115.4 with SMTP id n4mr678380agc.1162494609705;
        Thu, 02 Nov 2006 11:10:09 -0800 (PST)
Received: by 10.90.51.3 with HTTP; Thu, 2 Nov 2006 11:10:09 -0800 (PST)
Message-ID: <71caf8b50611021110xbcb0393pc6dedc203713198a@mail.gmail.com>
Date: Thu, 2 Nov 2006 20:10:09 +0100
From: "Michele Amoretti" <amoretti@ce.unipr.it>
Sender: michele.amoretti@gmail.com
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <359a92830611020952i3eeb5eefhdaacc6cd87ff95dc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <71caf8b50611020636l505eddb7rf16fd556abbc289c@mail.gmail.com>
	 <359a92830611020952i3eeb5eefhdaacc6cd87ff95dc@mail.gmail.com>
X-Google-Sender-Auth: 6770b88ab54a1768
X-Virus-Checked: Checked by ClamAV on apache.org

I look at the test section in the source code, before posting, but all
seemed too complicated.

Currently I am trying to use an implementation of the Scorer abstract class=
.

Michele

On 11/2/06, Erick Erickson <erickerickson@gmail.com> wrote:
> BTW, I highly recommend "Lucene in Action" for examples on getting starte=
d.
> Another good place to see examples is in the unit tests that come along w=
ith
> the Lucene source code. See
> http://www.eng.lsu.edu/mirrors/apache/lucene/java/
>
> Best
> Erick
>
> On 11/2/06, Michele Amoretti <amoretti@ce.unipr.it> wrote:
> >
> > Hello, I am completely new at Lucene. I browsed the web site and the
> > source code, searching for an example which illustrates the following
> > operation:
> >
> > given a Query and a Document, return the score
> >
> > To me, this is a very basic operation, but I cannot find a class which
> > easily provide this functionality.
> >
> > E.g. the Similarity class provides methods which return the factors of
> > the scoring formula, but I would like a method which returns the score
> > directly.
> >
> > Is this possible?
> >
> > Is the Scorer class the solution? Javadoc is too poor to understand
> > how to use it. Btw, I do not have an index, I have 1 Document, and 1
> > Query.
> >
> > Thanks
> >
> > --
> > Michele Amoretti, Ph.D.
> > Distributed Systems Group
> > Dipartimento di Ingegneria dell'Informazione
> > Universit=E0 degli Studi di Parma
> > http://www.ce.unipr.it/people/amoretti
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>


--=20
Michele Amoretti, Ph.D.
Distributed Systems Group
Dipartimento di Ingegneria dell'Informazione
Universit=E0 degli Studi di Parma
http://www.ce.unipr.it/people/amoretti

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 20:03:26 2006
Return-Path: <java-user-return-24313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25042 invoked from network); 2 Nov 2006 20:03:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 20:03:25 -0000
Received: (qmail 52159 invoked by uid 500); 2 Nov 2006 20:03:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51595 invoked by uid 500); 2 Nov 2006 20:03:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51584 invoked by uid 99); 2 Nov 2006 20:03:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 12:03:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 12:03:11 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id kA2K2nju165964
	for <java-user@lucene.apache.org>; Thu, 2 Nov 2006 20:02:49 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kA2K5jum2593018
	for <java-user@lucene.apache.org>; Thu, 2 Nov 2006 21:05:45 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kA2K2mHb006789
	for <java-user@lucene.apache.org>; Thu, 2 Nov 2006 21:02:48 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kA2K2mZQ006786
	for <java-user@lucene.apache.org>; Thu, 2 Nov 2006 21:02:48 +0100
In-Reply-To: <71caf8b50611020636l505eddb7rf16fd556abbc289c@mail.gmail.com>
Subject: Re: simple (?) question about scoring
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 2 Nov 2006 12:01:39 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 02/11/2006 22:05:44
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

michele.amoretti@gmail.com wrote on 02/11/2006 06:36:48:
> .. the following operation:
> given a Query and a Document, return the score
> .. I would like a method which returns the score directly.
> .. Btw, I do not have an index, I have 1 Document, and 1 Query.

Lucene scoring - http://lucene.apache.org/java/docs/scoring.html - uses
pre-computed statistics, location info, and the number of documents in the
index (1 in your case). So some preparation is required before a
(stand-alone) document can be scored against a query.

You could create a single-document in-memory index, with RAMDirectory -
http://lucene.apache.org/java/docs/api/org/apache/lucene/store/RAMDirectory.html
 - then you can search and score against that single document index.

Perhaps also MemoryIndex would be useful for you - in Lucene's contrib - I
never used it, but it seems very relevant to your question.
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/memory/package-summary.html

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 21:20:55 2006
Return-Path: <java-user-return-24314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56897 invoked from network); 2 Nov 2006 21:20:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 21:20:52 -0000
Received: (qmail 67817 invoked by uid 500); 2 Nov 2006 21:20:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67789 invoked by uid 500); 2 Nov 2006 21:20:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67777 invoked by uid 99); 2 Nov 2006 21:20:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 13:20:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 13:20:43 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 166B75B77F; Thu,  2 Nov 2006 13:20:23 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 068767F403
	for <java-user@lucene.apache.org>; Thu,  2 Nov 2006 13:20:23 -0800 (PST)
Date: Thu, 2 Nov 2006 13:20:23 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
Message-ID: <Pine.LNX.4.58.0611021315060.1124@hal.rescomp.berkeley.edu>
References: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: > .. Btw, I do not have an index, I have 1 Document, and 1 Query.

: Lucene scoring - http://lucene.apache.org/java/docs/scoring.html - uses
: pre-computed statistics, location info, and the number of documents in the
: index (1 in your case). So some preparation is required before a
: (stand-alone) document can be scored against a query.

Doron's comments really just scratch the surface of a larger issue with
your question: Lucene is not an API for evaluating how similar a
"Document" is to a "Query", it's for finding Documents in a Corpus which
match a Query, and (optionally) using the "Score" to know which Documnts
match better then other docuemnts.

For most of the various types of Queries that exist in Lucene, the score
is very dependent on how common the Terms involved are in the Corpus as a
whole -- if your Corpus consists of only 1 Document, then your scores are
going to be relatively meaningless.

Perhaps what you are interested in is more of an substring matching count?
or an Edit Distance type calculation? ... can you give us a concrete
example of what type of "score" you are looking for and what you mean when
you say "Query" ?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 22:10:44 2006
Return-Path: <java-user-return-24315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78185 invoked from network); 2 Nov 2006 22:10:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 22:10:42 -0000
Received: (qmail 65238 invoked by uid 500); 2 Nov 2006 22:10:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65015 invoked by uid 500); 2 Nov 2006 22:10:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65004 invoked by uid 99); 2 Nov 2006 22:10:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 14:10:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of michele.amoretti@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 14:10:34 -0800
Received: by wx-out-0506.google.com with SMTP id s15so225883wxc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 14:10:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=pebmcmwISzTINah1LyZvDcKTQr6eb/xnHFnBTdgF71IqLfPvTssqv6aRAluy+YVwbhEWCh1oD6I1R8TSl+zYyjCPlwpeZ/dnoxKJQ8kIU3ZWGV/csYWcs0UM/MqPUXWDoPY/KYhmeIqdCTcwpY4oTa57C9CFwJjk+YeJOOZCzro=
Received: by 10.70.96.3 with SMTP id t3mr1701226wxb.1162505413425;
        Thu, 02 Nov 2006 14:10:13 -0800 (PST)
Received: by 10.90.51.3 with HTTP; Thu, 2 Nov 2006 14:10:13 -0800 (PST)
Message-ID: <71caf8b50611021410s1ee36584u1ebfda832ea7f93e@mail.gmail.com>
Date: Thu, 2 Nov 2006 23:10:13 +0100
From: "Michele Amoretti" <amoretti@ce.unipr.it>
Sender: michele.amoretti@gmail.com
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <71caf8b50611020636l505eddb7rf16fd556abbc289c@mail.gmail.com>
	 <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
X-Google-Sender-Auth: 962c5ad89396b154
X-Virus-Checked: Checked by ClamAV on apache.org

Ok I am trying the MemoryIndex, but when compiling I have the
following erro message:

package org.apache.lucene.index.memory does not exist

Is it not included in the lucene .jar?

I currently have the latest lucene binaries.

Moreover:

parse(java.lang.String) in org.apache.lucene.queryParser.QueryParser
cannot be applied to
(java.lang.String,java.lang.String,org.apache.lucene.analysis.Analyzer)
    [javac]     float score =3D
index.search(QueryParser.parse("information", "content", analyzer));



Michele


On 11/2/06, Doron Cohen <DORONC@il.ibm.com> wrote:
> michele.amoretti@gmail.com wrote on 02/11/2006 06:36:48:
> > .. the following operation:
> > given a Query and a Document, return the score
> > .. I would like a method which returns the score directly.
> > .. Btw, I do not have an index, I have 1 Document, and 1 Query.
>
> Lucene scoring - http://lucene.apache.org/java/docs/scoring.html - uses
> pre-computed statistics, location info, and the number of documents in th=
e
> index (1 in your case). So some preparation is required before a
> (stand-alone) document can be scored against a query.
>
> You could create a single-document in-memory index, with RAMDirectory -
> http://lucene.apache.org/java/docs/api/org/apache/lucene/store/RAMDirecto=
ry.html
>  - then you can search and score against that single document index.
>
> Perhaps also MemoryIndex would be useful for you - in Lucene's contrib - =
I
> never used it, but it seems very relevant to your question.
> http://lucene.apache.org/java/docs/api/org/apache/lucene/index/memory/pac=
kage-summary.html
>
> Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Michele Amoretti, Ph.D.
Distributed Systems Group
Dipartimento di Ingegneria dell'Informazione
Universit=E0 degli Studi di Parma
http://www.ce.unipr.it/people/amoretti

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 23:04:44 2006
Return-Path: <java-user-return-24316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93971 invoked from network); 2 Nov 2006 23:04:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 23:04:43 -0000
Received: (qmail 51944 invoked by uid 500); 2 Nov 2006 23:04:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51911 invoked by uid 500); 2 Nov 2006 23:04:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51900 invoked by uid 99); 2 Nov 2006 23:04:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:04:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:04:36 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id kA2N4FJE085396
	for <java-user@lucene.apache.org>; Thu, 2 Nov 2006 23:04:15 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kA2N7BHs2883724
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 00:07:11 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kA2N4ED7030477
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 00:04:14 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kA2N4Ewb030472
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 00:04:14 +0100
In-Reply-To: <71caf8b50611021410s1ee36584u1ebfda832ea7f93e@mail.gmail.com>
Subject: Re: simple (?) question about scoring
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFBB51BB17.BE685B36-ON8825721A.007AF8F6-8825721A.007C2FE0@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 2 Nov 2006 14:36:27 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 03/11/2006 01:07:10
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

michele.amoretti wrote:
> Ok I am trying the MemoryIndex, but when compiling I have the
> following erro message:
>
> package org.apache.lucene.index.memory does not exist
>
> Is it not included in the lucene .jar?
>
> I currently have the latest lucene binaries.

Yes this is not part of core Lucene but rather under contrib.
To use this you can either download the source and compile, or download
lucene-2.0.0.zip from the download site and use lucene-memory-2.0.0.jar
from within that zip.

> parse(java.lang.String) in org.apache.lucene.queryParser.QueryParser
> cannot be applied to
> (java.lang.String,java.lang.String,org.apache.lucene.analysis.Analyzer)
>     [javac]     float score =
> index.search(QueryParser.parse("information", "content", analyzer));

Probably because sample code in that javadocs was created with Lucene 1.4.
See
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-d09fdfc8a6335eab4e3f3dc8ac41a40a3666318e
and also
http://www.nabble.com/Re%3A-Lucene-in-Action-examples-complie-problem-p6743189.html

> >
> > Lucene scoring - http://lucene.apache.org/java/docs/scoring.html - uses
> > pre-computed statistics, location info, and the number of documents in
the
> > index (1 in your case). So some preparation is required before a
> > (stand-alone) document can be scored against a query.

Also see comments by Chris on the value (or not) of the score you would
get.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 02 23:36:09 2006
Return-Path: <java-user-return-24317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3410 invoked from network); 2 Nov 2006 23:36:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2006 23:36:08 -0000
Received: (qmail 9673 invoked by uid 500); 2 Nov 2006 23:36:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9637 invoked by uid 500); 2 Nov 2006 23:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9626 invoked by uid 99); 2 Nov 2006 23:36:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:36:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of michele.amoretti@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 15:35:56 -0800
Received: by wx-out-0506.google.com with SMTP id s15so239687wxc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 15:35:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=FOZye7cC2moE3qCt0WHhQvmm9Qdm5Lb5ZzFzy4P4g8O9FIVNtzF2RkmnI51NadFGJIr1R3xZ5wGhstjuKhP3ksW1iICLxdAzLTrNloHpC76BQsVPhQvns8+g1+gRSMjRNpY3BqOdk3YMQngVFU+FQ05eSx4oSQy6nkhCmZVN3aw=
Received: by 10.70.129.2 with SMTP id b2mr1774330wxd.1162510533773;
        Thu, 02 Nov 2006 15:35:33 -0800 (PST)
Received: by 10.90.51.3 with HTTP; Thu, 2 Nov 2006 15:35:33 -0800 (PST)
Message-ID: <71caf8b50611021535t3611f155g9e2d3caa146f308a@mail.gmail.com>
Date: Fri, 3 Nov 2006 00:35:33 +0100
From: "Michele Amoretti" <amoretti@ce.unipr.it>
Sender: michele.amoretti@gmail.com
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <Pine.LNX.4.58.0611021315060.1124@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
	 <Pine.LNX.4.58.0611021315060.1124@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: 75128bacb42fee11
X-Virus-Checked: Checked by ClamAV on apache.org

The whole problem I have to face is the following:

I have a web service which searches a corpus of documents and returns
a list of documents which match the query

le list is not ordered (I do not know the details of the search
angine, I only have its result for a query)

then I have this list of documents, which represents a subset of the corpus

I have to rank the documents of the list, using your scoring algorithm

now: I do not know if I have to import all the documents in a sort of
Index and apply Lucene's ranking algorithm (if there is one), or take
each document and compute the score of the document vs the query, and
then sort the list based on the scores

currently I am following the second approach, thus I need to compute
the score of each document

I think the MemoryIndex is good for this, I am trying to compile the
example provided in the javadoc, but there is some package lacking...

Michele

On 11/2/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : > .. Btw, I do not have an index, I have 1 Document, and 1 Query.
>
> : Lucene scoring - http://lucene.apache.org/java/docs/scoring.html - uses
> : pre-computed statistics, location info, and the number of documents in =
the
> : index (1 in your case). So some preparation is required before a
> : (stand-alone) document can be scored against a query.
>
> Doron's comments really just scratch the surface of a larger issue with
> your question: Lucene is not an API for evaluating how similar a
> "Document" is to a "Query", it's for finding Documents in a Corpus which
> match a Query, and (optionally) using the "Score" to know which Documnts
> match better then other docuemnts.
>
> For most of the various types of Queries that exist in Lucene, the score
> is very dependent on how common the Terms involved are in the Corpus as a
> whole -- if your Corpus consists of only 1 Document, then your scores are
> going to be relatively meaningless.
>
> Perhaps what you are interested in is more of an substring matching count=
?
> or an Edit Distance type calculation? ... can you give us a concrete
> example of what type of "score" you are looking for and what you mean whe=
n
> you say "Query" ?
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Michele Amoretti, Ph.D.
Distributed Systems Group
Dipartimento di Ingegneria dell'Informazione
Universit=E0 degli Studi di Parma
http://www.ce.unipr.it/people/amoretti

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 00:49:38 2006
Return-Path: <java-user-return-24318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21045 invoked from network); 3 Nov 2006 00:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 00:49:36 -0000
Received: (qmail 6705 invoked by uid 500); 3 Nov 2006 00:49:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6452 invoked by uid 500); 3 Nov 2006 00:49:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6441 invoked by uid 99); 3 Nov 2006 00:49:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 16:49:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 16:49:27 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GfnF4-0002XD-2v
	for java-user@lucene.apache.org; Thu, 02 Nov 2006 16:49:06 -0800
Message-ID: <7149611.post@talk.nabble.com>
Date: Thu, 2 Nov 2006 16:49:06 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: reindex all files
In-Reply-To: <359a92830611020814r2e0e1fd9uabd44d4b5e24321@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7128924.post@talk.nabble.com> <359a92830611020514s7da05da5w9438d1f63045cbe7@mail.gmail.com> <7135033.post@talk.nabble.com> <359a92830611020814r2e0e1fd9uabd44d4b5e24321@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Thanks Erik.

   I will take a look on it.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/reindex-all-files-tf2558188.html#a7149611
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 00:49:45 2006
Return-Path: <java-user-return-24319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21142 invoked from network); 3 Nov 2006 00:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 00:49:44 -0000
Received: (qmail 7743 invoked by uid 500); 3 Nov 2006 00:49:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7722 invoked by uid 500); 3 Nov 2006 00:49:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7597 invoked by uid 99); 3 Nov 2006 00:49:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 16:49:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 16:49:34 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 599E15B774; Thu,  2 Nov 2006 16:49:13 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 50E2E7F403
	for <java-user@lucene.apache.org>; Thu,  2 Nov 2006 16:49:13 -0800 (PST)
Date: Thu, 2 Nov 2006 16:49:13 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <71caf8b50611021535t3611f155g9e2d3caa146f308a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0611021639350.11655@hal.rescomp.berkeley.edu>
References: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
  <Pine.LNX.4.58.0611021315060.1124@hal.rescomp.berkeley.edu>
 <71caf8b50611021535t3611f155g9e2d3caa146f308a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: le list is not ordered (I do not know the details of the search
: angine, I only have its result for a query)
:
: then I have this list of documents, which represents a subset of the corpus
:
: I have to rank the documents of the list, using your scoring algorithm

In other words, out of a large copus C, this webservice hase
told you that the documents comprising subset S is the top N matching
documents for your query Q (where N << sizeof(C))

your goal is to sort S as best as possible.

You could try indexing all the docs in S in a Lucene RAMDirectory and then
search on them, but my orriginal point about the score being
fairly meaningless in an index of only 1 document still applies somewhat
... if all of the documents you get back allready have a lot in common
9they must have something in common or hte webservice wouldn't havre
returned them in response to your query) it may be hard to get a
meaningful document frequency of the words in your query.

you also may run into confusion about what exactly your query "is" and
wether or not your interpretation matches that of the webservice ... at a
very simplisitc level, if the query is "Java Lucene" and your webservice
interprets that as an "OR" query and you interpret that as an "AND" query,
you might find that the scores you compute for all the docs are 0.

If i were in your shoes, i'd try to work with whoever runs this webservice
to make it return more usefull informatoin -- at the very least to return
results in sorted order.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 01:58:56 2006
Return-Path: <java-user-return-24320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38458 invoked from network); 3 Nov 2006 01:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 01:58:54 -0000
Received: (qmail 89323 invoked by uid 500); 3 Nov 2006 01:59:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89289 invoked by uid 500); 3 Nov 2006 01:59:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89278 invoked by uid 99); 3 Nov 2006 01:59:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 17:59:00 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeff.richley@sevajug.org designates 209.200.235.101 as permitted sender)
Received: from [209.200.235.101] (HELO segonax.lunarpages.com) (209.200.235.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 17:58:48 -0800
Received: from segonax.lunarpages.com ([209.200.235.101] helo=www.sevajug.org)
	by segonax.lunarpages.com with esmtp (Exim 4.52)
	id 1GfoLs-0004yk-5a
	for java-user@lucene.apache.org; Thu, 02 Nov 2006 18:00:12 -0800
Received: from 70.161.166.218
        (SquirrelMail authenticated user jeff.richley@sevajug.org)
        by www.sevajug.org with HTTP;
        Thu, 2 Nov 2006 18:00:12 -0800 (PST)
Message-ID: <62109.70.161.166.218.1162519212.squirrel@www.sevajug.org>
Date: Thu, 2 Nov 2006 18:00:12 -0800 (PST)
Subject: Query question
From: jeff.richley@sevajug.org
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.6
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - segonax.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - sevajug.org
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

I am wanting to be able to put sets of data in a very structured way and
query Lucene for only 100% matches.  Is there a way to do this?  I seem to
be getting back at best 0.30685282.  I appreciate any help and insite.


Jeff Richley, Vice President
Southeast Virginia Java Users Group
jeff.richley@sevajug.org
http://www.sevajug.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 02:47:21 2006
Return-Path: <java-user-return-24321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50784 invoked from network); 3 Nov 2006 02:47:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 02:47:20 -0000
Received: (qmail 26390 invoked by uid 500); 3 Nov 2006 02:47:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26212 invoked by uid 500); 3 Nov 2006 02:47:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26201 invoked by uid 99); 3 Nov 2006 02:47:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 18:47:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 18:47:12 -0800
Received: by nf-out-0910.google.com with SMTP id m18so1229154nfc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 18:46:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HV5kq53kh6aOGoZi+WcGPgygUFrPbRNrXMtqaUJEZsf7SzenQhsWtRzusAmN9P0EVKrts/+LJxG/GR+eu4a1BmgRHfA5/zdOF7BQhjA8GgWhh/0/lXRKC7Nt8+M/DaaTJsTwx28sf3R2Z4hcIXotC0XhnIa2h7bwZb2wdovdSCA=
Received: by 10.82.123.16 with SMTP id v16mr614227buc.1162521998869;
        Thu, 02 Nov 2006 18:46:38 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Thu, 2 Nov 2006 18:46:38 -0800 (PST)
Message-ID: <359a92830611021846p1b91c26m6746cfa20d8fcfe0@mail.gmail.com>
Date: Thu, 2 Nov 2006 21:46:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query question
In-Reply-To: <62109.70.161.166.218.1162519212.squirrel@www.sevajug.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14208_25707844.1162521998777"
References: <62109.70.161.166.218.1162519212.squirrel@www.sevajug.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14208_25707844.1162521998777
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

An example (simplified, to be sure) would help a lot. What does a 100% match
mean? Why do you care? What problem are you trying to solve? Why wouldn't a
database server you better?

Best
Erick

On 11/2/06, jeff.richley@sevajug.org <jeff.richley@sevajug.org> wrote:
>
> I am wanting to be able to put sets of data in a very structured way and
> query Lucene for only 100% matches.  Is there a way to do this?  I seem to
> be getting back at best 0.30685282.  I appreciate any help and insite.
>
>
> Jeff Richley, Vice President
> Southeast Virginia Java Users Group
> jeff.richley@sevajug.org
> http://www.sevajug.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14208_25707844.1162521998777--

From java-user-return-24322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 03:04:04 2006
Return-Path: <java-user-return-24322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53255 invoked from network); 3 Nov 2006 03:04:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 03:04:03 -0000
Received: (qmail 47344 invoked by uid 500); 3 Nov 2006 03:04:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46752 invoked by uid 500); 3 Nov 2006 03:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46741 invoked by uid 99); 3 Nov 2006 03:04:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 19:04:08 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.92] (HELO web52009.mail.yahoo.com) (206.190.48.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 02 Nov 2006 19:03:55 -0800
Received: (qmail 2312 invoked by uid 60001); 3 Nov 2006 03:03:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=L6CyPjj6NzahJiu7ZNoReSNZhc8EWfovXFdSAoMe0mgXFY24jWRxBjz0oaHrGrCHh69Of9L7VGEZs2u5snhhskl7FL5CCv9TcLKTRdVAyp/ukWw1od+7edu0NbK+MW27Labt/xLFUCNYPEud36IpUWfoRvq0qOIAgsYRudHUQ4A=  ;
Message-ID: <20061103030334.2310.qmail@web52009.mail.yahoo.com>
Received: from [12.162.3.126] by web52009.mail.yahoo.com via HTTP; Thu, 02 Nov 2006 19:03:34 PST
Date: Thu, 2 Nov 2006 19:03:34 -0800 (PST)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Modelling relational data in Lucene Index?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AAs I understand, Lucene has a flat structure where you can define =
multiple fields inside the document. There is no relationship between any f=
ield.=0A=0AI would like to enable index based search for some of the compon=
ents inside relational database. For exmaple, let say "Folder" Object. The =
Folder object can have relationship with File object. The File object, in t=
urn, can have attributes like is image, is text file, etc. So, the strictur=
e is =0A    =0A    Folder -- > File=0A             |=0A             -------=
 > is image, is text file, ......=0A=0A=0AI would like to enable a search t=
o find a Folder with File of type image. How can we model such relational d=
ata inside Lucene index?=0A=0ARegards,=0ARajesh=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 03:29:39 2006
Return-Path: <java-user-return-24323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57654 invoked from network); 3 Nov 2006 03:29:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 03:29:38 -0000
Received: (qmail 78650 invoked by uid 500); 3 Nov 2006 03:29:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78624 invoked by uid 500); 3 Nov 2006 03:29:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78611 invoked by uid 99); 3 Nov 2006 03:29:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 19:29:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 19:29:29 -0800
Received: by nz-out-0102.google.com with SMTP id k1so240310nzf
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 19:29:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Qf9Rt9Ib3MjY5BKCppGD6xNSn33fE/fJEE9YXJJEK6cK51lClEjEUiId87HjsEYb9QGc2L+4Q/mim3BPGnoI77bzaFJivYwshmL4haxtLOEem1RTm55KaxgitzC5JEVUPlVyG9roHtGuPnQmp6Gl01SggaT4tJc4F/oLtJcBiuY=
Received: by 10.35.93.1 with SMTP id v1mr2277166pyl.1162524547058;
        Thu, 02 Nov 2006 19:29:07 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 38sm941920nzk.2006.11.02.19.29.05;
        Thu, 02 Nov 2006 19:29:06 -0800 (PST)
Message-ID: <454AB786.4030402@gmail.com>
Date: Thu, 02 Nov 2006 22:29:10 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Modelling relational data in Lucene Index?
References: <20061103030334.2310.qmail@web52009.mail.yahoo.com>
In-Reply-To: <20061103030334.2310.qmail@web52009.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene is probably not the solution if you are looking for a relational 
model. You should be using a database for that. If you want to combine 
Lucene with a relational model, check out Hibernate and the new EJB 
annotations that it supports...there is a cool little Lucene add-on that 
lets you declare fields to be indexed (and how) with annotations.

- Mark

Rajesh parab wrote:
> Hi,
>
> As I understand, Lucene has a flat structure where you can define multiple fields inside the document. There is no relationship between any field.
>
> I would like to enable index based search for some of the components inside relational database. For exmaple, let say "Folder" Object. The Folder object can have relationship with File object. The File object, in turn, can have attributes like is image, is text file, etc. So, the stricture is 
>     
>     Folder -- > File
>              |
>              ------- > is image, is text file, ......
>
>
> I would like to enable a search to find a Folder with File of type image. How can we model such relational data inside Lucene index?
>
> Regards,
> Rajesh
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 03:50:57 2006
Return-Path: <java-user-return-24324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60459 invoked from network); 3 Nov 2006 03:50:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 03:50:56 -0000
Received: (qmail 2076 invoked by uid 500); 3 Nov 2006 03:51:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2046 invoked by uid 500); 3 Nov 2006 03:51:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2031 invoked by uid 99); 3 Nov 2006 03:51:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 19:51:00 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.85] (HELO web52002.mail.yahoo.com) (206.190.48.85)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 02 Nov 2006 19:50:47 -0800
Received: (qmail 10373 invoked by uid 60001); 3 Nov 2006 03:50:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=hoK7mqE2chNGkKG+u/T69wBkoDOBK76PwtnHRtCrfGBvlvwX9RDpC8+Bkxh++a40WUnXVVLAOi0v/xiN/Vyh9urISp2Bycm6iHBeOlVr6uT9Ud9twb3Dmpr+F/oLNviERmm8F3f2InSuU1XqmDn19All+zLpjL70vRihsV+dDXM=  ;
Message-ID: <20061103035023.10371.qmail@web52002.mail.yahoo.com>
Received: from [12.162.3.126] by web52002.mail.yahoo.com via HTTP; Thu, 02 Nov 2006 19:50:23 PST
Date: Thu, 2 Nov 2006 19:50:23 -0800 (PST)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Modelling relational data in Lucene Index?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mark.=0A=0ACan you please tell me more about the Lucene add-on you a=
re talking about? Are you talking about Compass?=0A=0ARegards,=0ARajesh=0A=
=0A----- Original Message ----=0AFrom: Mark Miller <markrmiller@gmail.com>=
=0ATo: java-user@lucene.apache.org=0ASent: Thursday, November 2, 2006 7:29:=
10 PM=0ASubject: Re: Modelling relational data in Lucene Index?=0A=0ALucene=
 is probably not the solution if you are looking for a relational =0Amodel.=
 You should be using a database for that. If you want to combine =0ALucene =
with a relational model, check out Hibernate and the new EJB =0Aannotations=
 that it supports...there is a cool little Lucene add-on that =0Alets you d=
eclare fields to be indexed (and how) with annotations.=0A=0A- Mark=0A=0ARa=
jesh parab wrote:=0A> Hi,=0A>=0A> As I understand, Lucene has a flat struct=
ure where you can define multiple fields inside the document. There is no r=
elationship between any field.=0A>=0A> I would like to enable index based s=
earch for some of the components inside relational database. For exmaple, l=
et say "Folder" Object. The Folder object can have relationship with File o=
bject. The File object, in turn, can have attributes like is image, is text=
 file, etc. So, the stricture is =0A>     =0A>     Folder -- > File=0A>    =
          |=0A>              ------- > is image, is text file, ......=0A>=
=0A>=0A> I would like to enable a search to find a Folder with File of type=
 image. How can we model such relational data inside Lucene index?=0A>=0A> =
Regards,=0A> Rajesh=0A>=0A>=0A>=0A>=0A> -----------------------------------=
----------------------------------=0A> To unsubscribe, e-mail: java-user-un=
subscribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-=
help@lucene.apache.org=0A>=0A>=0A>   =0A=0A--------------------------------=
-------------------------------------=0ATo unsubscribe, e-mail: java-user-u=
nsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-h=
elp@lucene.apache.org=0A=0A=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 03:58:20 2006
Return-Path: <java-user-return-24325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61308 invoked from network); 3 Nov 2006 03:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 03:58:19 -0000
Received: (qmail 10601 invoked by uid 500); 3 Nov 2006 03:58:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10576 invoked by uid 500); 3 Nov 2006 03:58:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10565 invoked by uid 99); 3 Nov 2006 03:58:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 19:58:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 19:58:10 -0800
Received: by ug-out-1314.google.com with SMTP id k40so325644ugc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 19:57:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sDEydKSZYsIFsXR+Mp/LNbkHSPxj1/tSdH3Mly/O9OW7ZTh/6rsrs7gPbpjRD2qpRpItosWJ90wdqUnDz1Jh7IR/yZTFpXxfvvqBBR+EJ4+bou9Sv+vCL2cQ4aZ4nf3uFU+gRf/TX4zOVui+D9gfjiL2HUSbuB8ZeKt3UsdiA1I=
Received: by 10.82.129.5 with SMTP id b5mr622632bud.1162526267061;
        Thu, 02 Nov 2006 19:57:47 -0800 (PST)
Received: by 10.82.131.8 with HTTP; Thu, 2 Nov 2006 19:57:46 -0800 (PST)
Message-ID: <6e3ae6310611021957o137b3b44ka72a55613f5a4b41@mail.gmail.com>
Date: Thu, 2 Nov 2006 19:57:46 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modelling relational data in Lucene Index?
In-Reply-To: <454AB786.4030402@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061103030334.2310.qmail@web52009.mail.yahoo.com>
	 <454AB786.4030402@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

For this specific question, you can create index on files, search
files that of type image, and from matched files, find the unique
directories(can be done in lucene or you can do it via java).

Of course this does not scale to deeper relationships. Usually you do
need to flattern the database objects in order to use lucene. It's
just trading space for speed.

I would prefer a detached approach instead of Hibernate or EJB's
approach, which is kind of too tightly coupled with any system. How to
rebuild if the index is corrupted, or you have a new Analyzer, or
schema evolves? How to make it multi-thread safe?

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 11/2/06, Mark Miller <markrmiller@gmail.com> wrote:
> Lucene is probably not the solution if you are looking for a relational
> model. You should be using a database for that. If you want to combine
> Lucene with a relational model, check out Hibernate and the new EJB
> annotations that it supports...there is a cool little Lucene add-on that
> lets you declare fields to be indexed (and how) with annotations.
>
> - Mark
>
> Rajesh parab wrote:
> > Hi,
> >
> > As I understand, Lucene has a flat structure where you can define multiple fields inside the document. There is no relationship between any field.
> >
> > I would like to enable index based search for some of the components inside relational database. For exmaple, let say "Folder" Object. The Folder object can have relationship with File object. The File object, in turn, can have attributes like is image, is text file, etc. So, the stricture is
> >
> >     Folder -- > File
> >              |
> >              ------- > is image, is text file, ......
> >
> >
> > I would like to enable a search to find a Folder with File of type image. How can we model such relational data inside Lucene index?
> >
> > Regards,
> > Rajesh
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 04:10:51 2006
Return-Path: <java-user-return-24326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65036 invoked from network); 3 Nov 2006 04:10:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 04:10:49 -0000
Received: (qmail 27637 invoked by uid 500); 3 Nov 2006 04:10:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27606 invoked by uid 500); 3 Nov 2006 04:10:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27595 invoked by uid 99); 3 Nov 2006 04:10:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 20:10:54 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeff.richley@sevajug.org designates 209.200.235.101 as permitted sender)
Received: from [209.200.235.101] (HELO segonax.lunarpages.com) (209.200.235.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 20:10:42 -0800
Received: from segonax.lunarpages.com ([209.200.235.101] helo=www.sevajug.org)
	by segonax.lunarpages.com with esmtp (Exim 4.52)
	id 1GfqPW-0002sV-T5
	for java-user@lucene.apache.org; Thu, 02 Nov 2006 20:12:06 -0800
Received: from 70.161.166.218
        (SquirrelMail authenticated user jeff.richley@sevajug.org)
        by www.sevajug.org with HTTP;
        Thu, 2 Nov 2006 20:12:06 -0800 (PST)
Message-ID: <62576.70.161.166.218.1162527126.squirrel@www.sevajug.org>
In-Reply-To: <359a92830611021846p1b91c26m6746cfa20d8fcfe0@mail.gmail.com>
References: <62109.70.161.166.218.1162519212.squirrel@www.sevajug.org>
    <359a92830611021846p1b91c26m6746cfa20d8fcfe0@mail.gmail.com>
Date: Thu, 2 Nov 2006 20:12:06 -0800 (PST)
Subject: Re: Query question
From: jeff.richley@sevajug.org
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.6
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - segonax.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - sevajug.org
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

Ah good question.  The data that I am needing to query on is not a set
definition of tables or columns like a database is.  Let me give two
examples:

1.) I have data like name="Jeff" lastname="Richley" age="33" and I need to
be able to query by any combination such as name="Jeff" age="33".  But if
I query with name="Jeffrey" there is no match.

2.) The name value pairs are not really controlled until the end user is
inserting information or querying.  I may have the data from the previous
example and then have another that has address information and then
something totally unrelated such as stock prices.  The point is, I can't
guarantee what exactly will be in the data.

If you need any other information, let me know.  I do realize that Lucene
may not really be a perfect fit.  That is why I am doing my research
before the project gets ramped up.  Once again, thanks for any help.

Jeff Richley


> An example (simplified, to be sure) would help a lot. What does a 100%
> match
> mean? Why do you care? What problem are you trying to solve? Why wouldn't
> a
> database server you better?
>
> Best
> Erick
>
> On 11/2/06, jeff.richley@sevajug.org <jeff.richley@sevajug.org> wrote:
>>
>> I am wanting to be able to put sets of data in a very structured way and
>> query Lucene for only 100% matches.  Is there a way to do this?  I seem
>> to
>> be getting back at best 0.30685282.  I appreciate any help and insite.
>>
>>
>> Jeff Richley, Vice President
>> Southeast Virginia Java Users Group
>> jeff.richley@sevajug.org
>> http://www.sevajug.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


Jeff Richley, Vice President
Southeast Virginia Java Users Group
jeff.richley@sevajug.org
http://www.sevajug.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 04:22:32 2006
Return-Path: <java-user-return-24327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67733 invoked from network); 3 Nov 2006 04:22:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 04:22:31 -0000
Received: (qmail 42711 invoked by uid 500); 3 Nov 2006 04:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42677 invoked by uid 500); 3 Nov 2006 04:22:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42666 invoked by uid 99); 3 Nov 2006 04:22:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 20:22:35 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.91] (HELO web52008.mail.yahoo.com) (206.190.48.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 02 Nov 2006 20:22:23 -0800
Received: (qmail 96429 invoked by uid 60001); 3 Nov 2006 04:22:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=s0PHvJpMdlWl0kkW9UuCP0PmCYLYWLEF7/H9y7ISxuOWoOZTiJAe2YvEzsnhyHGnD8HE10riZmFg82CuHgodCSuu8c8GffddAepSIBloTkHtAzT456jQpAZPt8zlG48Ky0ORtCknCFxA2hGGwN9EeMU04cIZ6WtA8qaoranivcM=  ;
Message-ID: <20061103042202.96427.qmail@web52008.mail.yahoo.com>
Received: from [71.142.76.39] by web52008.mail.yahoo.com via HTTP; Thu, 02 Nov 2006 20:22:02 PST
Date: Thu, 2 Nov 2006 20:22:02 -0800 (PST)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Modelling relational data in Lucene Index?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for feedback Chris.=0A =0AI agree with you. The data set should be f=
lattened out to store inside Lucene index. The Folder-File was just an exam=
ple. As you know, in relational database, we can have more complex relation=
ships. I understand that this model may not work for deeper relationships.=
=0A =0AWhat I am mainly interested in is just one level deep relationship. =
But, I would like to search on the additional attributes of the related obj=
ect. For example, in the relationship for Folder-File, I would like to use =
additional file attributes as search criteria along with file name while se=
arching for folders.=0A =0AThe way I see is having single filed for the rel=
ated object and all its additional attributes and use some separator while =
capturing this data inside Lucene Field object. For example -=0A        =0A=
            new Field("file", "abc.txt<sep>image");=0A =0ABut, I am not qui=
te sure if this model will work.=0A =0ABTW. I did not understand what you m=
eant by the detached approach. Can you please elaborate?=0A =0ARegards,=0AR=
ajesh=0A=0A----- Original Message ----=0AFrom: Chris Lu <chris.lu@gmail.com=
>=0ATo: java-user@lucene.apache.org=0ASent: Thursday, November 2, 2006 7:57=
:46 PM=0ASubject: Re: Modelling relational data in Lucene Index?=0A=0A=0AFo=
r this specific question, you can create index on files, search=0Afiles tha=
t of type image, and from matched files, find the unique=0Adirectories(can =
be done in lucene or you can do it via java).=0A=0AOf course this does not =
scale to deeper relationships. Usually you do=0Aneed to flattern the databa=
se objects in order to use lucene. It's=0Ajust trading space for speed.=0A=
=0AI would prefer a detached approach instead of Hibernate or EJB's=0Aappro=
ach, which is kind of too tightly coupled with any system. How to=0Arebuild=
 if the index is corrupted, or you have a new Analyzer, or=0Aschema evolves=
? How to make it multi-thread safe?=0A=0A-- =0AChris Lu=0A-----------------=
--------=0AInstant Full-Text Search On Any Database/Application=0Asite: htt=
p://www.dbsight.net=0Ademo: http://search.dbsight.com=0A=0AOn 11/2/06, Mark=
 Miller <markrmiller@gmail.com> wrote:=0A> Lucene is probably not the solut=
ion if you are looking for a relational=0A> model. You should be using a da=
tabase for that. If you want to combine=0A> Lucene with a relational model,=
 check out Hibernate and the new EJB=0A> annotations that it supports...the=
re is a cool little Lucene add-on that=0A> lets you declare fields to be in=
dexed (and how) with annotations.=0A>=0A> - Mark=0A>=0A> Rajesh parab wrote=
:=0A> > Hi,=0A> >=0A> > As I understand, Lucene has a flat structure where =
you can define multiple fields inside the document. There is no relationshi=
p between any field.=0A> >=0A> > I would like to enable index based search =
for some of the components inside relational database. For exmaple, let say=
 "Folder" Object. The Folder object can have relationship with File object.=
 The File object, in turn, can have attributes like is image, is text file,=
 etc. So, the stricture is=0A> >=0A> >     Folder -- > File=0A> >          =
    |=0A> >              ------- > is image, is text file, ......=0A> >=0A>=
 >=0A> > I would like to enable a search to find a Folder with File of type=
 image. How can we model such relational data inside Lucene index?=0A> >=0A=
> > Regards,=0A> > Rajesh=0A> >=0A> >=0A> >=0A> >=0A> > -------------------=
--------------------------------------------------=0A> > To unsubscribe, e-=
mail: java-user-unsubscribe@lucene.apache.org=0A> > For additional commands=
, e-mail: java-user-help@lucene.apache.org=0A> >=0A> >=0A> >=0A>=0A> ------=
---------------------------------------------------------------=0A> To unsu=
bscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> For additional=
 commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=0A=0A----------=
-----------------------------------------------------------=0ATo unsubscrib=
e, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional command=
s, e-mail: java-user-help@lucene.apache.org=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 05:01:49 2006
Return-Path: <java-user-return-24328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72899 invoked from network); 3 Nov 2006 05:01:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 05:01:48 -0000
Received: (qmail 74291 invoked by uid 500); 3 Nov 2006 05:01:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74248 invoked by uid 500); 3 Nov 2006 05:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74237 invoked by uid 99); 3 Nov 2006 05:01:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 21:01:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 21:01:41 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id kA351JHA045150
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 05:01:19 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kA354FYE2928702
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 06:04:15 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kA351I1x017255
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 06:01:18 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kA351IKK017252
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 06:01:18 +0100
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7C012B4858@webmail.hippo.nl>
Subject: Re: Possible documentation error?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF603A4999.0FCDB5AD-ON8825721B.001A325C-8825721B.001AACC9@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 2 Nov 2006 20:51:21 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 03/11/2006 07:04:15
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

"Johan Stuyts" <j.stuyts@hippo.nl> wrote on 26/10/2006 07:40:21:
> Hi,
>
> On the page about the file formats I think there might be a
> documentation error below 'frequencies'. The example is '15, 22, 3', but
> if I read the paragraph starting with 'DocDelta determines both the
> document number and the frequency' correctly this example translates to:
>   Doc ID   Freq.
>     7       1
>    18       3
>
> Instead of documents 7 and 11 as described in the paragraph above the
> example.
>
> Shouldn't the example be '15, 8, 3'?

Yes you are right:

  15 = 2 * 7 + 1    --> doc 7 with freq 1
   8 = 2 * (11 - 7) --> doc 11 with frequency > 1
   3                --> frequency = 3 for doc 11

Nice catch!
Doron

>
> Kind regards,
>
> Johan Stuyts
> Hippo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 05:32:17 2006
Return-Path: <java-user-return-24329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76634 invoked from network); 3 Nov 2006 05:32:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 05:32:15 -0000
Received: (qmail 1974 invoked by uid 500); 3 Nov 2006 05:32:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 917 invoked by uid 500); 3 Nov 2006 05:32:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 896 invoked by uid 99); 3 Nov 2006 05:32:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 21:32:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 21:32:09 -0800
Received: by nf-out-0910.google.com with SMTP id n29so41148nfc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 21:31:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=AzXHUOhhzmR7ZZWPc454/m5cbv57rZufaK0Vy6k2BzWXkySexULUYiTefSufDkbiKaU0LPHfzhK5TIMWNTa8zv4Pwmw+wQxLU/zD5wkW49isSK7PZx5c8YxN/VwAZk07nj4B8el6o0fAfKvmKFUYYzrqy3HkbutJagq5fpzpGoQ=
Received: by 10.82.153.5 with SMTP id a5mr617184bue.1162531907060;
        Thu, 02 Nov 2006 21:31:47 -0800 (PST)
Received: by 10.82.131.8 with HTTP; Thu, 2 Nov 2006 21:31:47 -0800 (PST)
Message-ID: <6e3ae6310611022131n4cd2d73dr149404944f6958ff@mail.gmail.com>
Date: Thu, 2 Nov 2006 21:31:47 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modelling relational data in Lucene Index?
In-Reply-To: <20061103042202.96427.qmail@web52008.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061103042202.96427.qmail@web52008.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Rajesh,

You can use space as <sep>, by use WhitespaceAnalyzer.

By detached mode, I mean the search function and your java system
should be kind of logically separated. From the technical side, a
separated search server will be more scalable. From the business side,
searching is more like an add-on rather than a must-have. And users
will have new different requirements to query the content.

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com


On 11/2/06, Rajesh parab <rajesh_parab_1@yahoo.com> wrote:
> Thanks for feedback Chris.
>
> I agree with you. The data set should be flattened out to store inside Lucene index. The Folder-File was just an example. As you know, in relational database, we can have more complex relationships. I understand that this model may not work for deeper relationships.
>
> What I am mainly interested in is just one level deep relationship. But, I would like to search on the additional attributes of the related object. For example, in the relationship for Folder-File, I would like to use additional file attributes as search criteria along with file name while searching for folders.
>
> The way I see is having single filed for the related object and all its additional attributes and use some separator while capturing this data inside Lucene Field object. For example -
>
>             new Field("file", "abc.txt<sep>image");
>
> But, I am not quite sure if this model will work.
>
> BTW. I did not understand what you meant by the detached approach. Can you please elaborate?
>
> Regards,
> Rajesh
>
> ----- Original Message ----
> From: Chris Lu <chris.lu@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, November 2, 2006 7:57:46 PM
> Subject: Re: Modelling relational data in Lucene Index?
>
>
> For this specific question, you can create index on files, search
> files that of type image, and from matched files, find the unique
> directories(can be done in lucene or you can do it via java).
>
> Of course this does not scale to deeper relationships. Usually you do
> need to flattern the database objects in order to use lucene. It's
> just trading space for speed.
>
> I would prefer a detached approach instead of Hibernate or EJB's
> approach, which is kind of too tightly coupled with any system. How to
> rebuild if the index is corrupted, or you have a new Analyzer, or
> schema evolves? How to make it multi-thread safe?
>
> --
> Chris Lu
> -------------------------
> Instant Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
>
> On 11/2/06, Mark Miller <markrmiller@gmail.com> wrote:
> > Lucene is probably not the solution if you are looking for a relational
> > model. You should be using a database for that. If you want to combine
> > Lucene with a relational model, check out Hibernate and the new EJB
> > annotations that it supports...there is a cool little Lucene add-on that
> > lets you declare fields to be indexed (and how) with annotations.
> >
> > - Mark
> >
> > Rajesh parab wrote:
> > > Hi,
> > >
> > > As I understand, Lucene has a flat structure where you can define multiple fields inside the document. There is no relationship between any field.
> > >
> > > I would like to enable index based search for some of the components inside relational database. For exmaple, let say "Folder" Object. The Folder object can have relationship with File object. The File object, in turn, can have attributes like is image, is text file, etc. So, the stricture is
> > >
> > >     Folder -- > File
> > >              |
> > >              ------- > is image, is text file, ......
> > >
> > >
> > > I would like to enable a search to find a Folder with File of type image. How can we model such relational data inside Lucene index?
> > >
> > > Regards,
> > > Rajesh
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 06:08:00 2006
Return-Path: <java-user-return-24330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82465 invoked from network); 3 Nov 2006 06:07:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 06:07:58 -0000
Received: (qmail 34167 invoked by uid 500); 3 Nov 2006 06:08:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34130 invoked by uid 500); 3 Nov 2006 06:08:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34119 invoked by uid 99); 3 Nov 2006 06:08:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 22:08:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of michele.amoretti@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 22:07:50 -0800
Received: by wx-out-0506.google.com with SMTP id s15so292015wxc
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 22:07:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=WA3EgeOjvXmCrdogUKVPZvnmqIu6ALG7VErduL17GutrzlVBBsKXuYvJsE/6zrrGShty3Fg6FjUpeQTcqosJa1UagWTBfgOK4biqUmmxzvQ5MTJKdb4j+paDMo+14gkZ3DIEGQVdgqtlO4LkroxDTiy/ZByLDSOt/LiOEpVZu48=
Received: by 10.90.104.14 with SMTP id b14mr864296agc.1162534050184;
        Thu, 02 Nov 2006 22:07:30 -0800 (PST)
Received: by 10.90.51.3 with HTTP; Thu, 2 Nov 2006 22:07:30 -0800 (PST)
Message-ID: <71caf8b50611022207t4b96c09aq9f99c3ee0e1b10b@mail.gmail.com>
Date: Fri, 3 Nov 2006 07:07:30 +0100
From: "Michele Amoretti" <amoretti@ce.unipr.it>
Sender: michele.amoretti@gmail.com
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <Pine.LNX.4.58.0611021639350.11655@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
	 <Pine.LNX.4.58.0611021315060.1124@hal.rescomp.berkeley.edu>
	 <71caf8b50611021535t3611f155g9e2d3caa146f308a@mail.gmail.com>
	 <Pine.LNX.4.58.0611021639350.11655@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: 5adf9f9c0599f6b4
X-Virus-Checked: Checked by ClamAV on apache.org

I have a question: is the score for a document different if I have
only that document in my index, or if I have N documents?
If the answer is yes, I will put all N documents together, otherwise I
will evaluate them one by one.

Btw, I will ask the ws develepoer about how queries are interpreted by
the search engine.

Thanks

On 11/3/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : le list is not ordered (I do not know the details of the search
> : angine, I only have its result for a query)
> :
> : then I have this list of documents, which represents a subset of the co=
rpus
> :
> : I have to rank the documents of the list, using your scoring algorithm
>
> In other words, out of a large copus C, this webservice hase
> told you that the documents comprising subset S is the top N matching
> documents for your query Q (where N << sizeof(C))
>
> your goal is to sort S as best as possible.
>
> You could try indexing all the docs in S in a Lucene RAMDirectory and the=
n
> search on them, but my orriginal point about the score being
> fairly meaningless in an index of only 1 document still applies somewhat
> ... if all of the documents you get back allready have a lot in common
> 9they must have something in common or hte webservice wouldn't havre
> returned them in response to your query) it may be hard to get a
> meaningful document frequency of the words in your query.
>
> you also may run into confusion about what exactly your query "is" and
> wether or not your interpretation matches that of the webservice ... at a
> very simplisitc level, if the query is "Java Lucene" and your webservice
> interprets that as an "OR" query and you interpret that as an "AND" query=
,
> you might find that the scores you compute for all the docs are 0.
>
> If i were in your shoes, i'd try to work with whoever runs this webservic=
e
> to make it return more usefull informatoin -- at the very least to return
> results in sorted order.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Michele Amoretti, Ph.D.
Distributed Systems Group
Dipartimento di Ingegneria dell'Informazione
Universit=E0 degli Studi di Parma
http://www.ce.unipr.it/people/amoretti

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 06:13:37 2006
Return-Path: <java-user-return-24331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83289 invoked from network); 3 Nov 2006 06:13:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 06:13:35 -0000
Received: (qmail 38921 invoked by uid 500); 3 Nov 2006 06:13:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38892 invoked by uid 500); 3 Nov 2006 06:13:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38881 invoked by uid 99); 3 Nov 2006 06:13:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 22:13:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 22:13:26 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GfsIb-00067L-Pv
	for java-user@lucene.apache.org; Thu, 02 Nov 2006 22:13:05 -0800
Message-ID: <7152393.post@talk.nabble.com>
Date: Thu, 2 Nov 2006 22:13:05 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search within search
In-Reply-To: <39735A87-BE2A-401E-A2C9-8E9E0C3C7AF9@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7129070.post@talk.nabble.com> <39735A87-BE2A-401E-A2C9-8E9E0C3C7AF9@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I have look at the examples from lucene source, and try out myself but it
doesn't work. Perhaps u can point out where I did wrong. Below r the codes
that I developed:

   public String search(String searchString) throws IOException, Exception 
	{
		//System.out.println("inside search util");
		
		IndexReader reader = null;
		StringBuffer buff = new StringBuffer();
		BooleanQuery bq1 = new BooleanQuery();
		//BooleanQuery bq2 = new BooleanQuery();
		//ArrayList resultList = new ArrayList();
		
		try
		{
			reader = IndexReader.open(DsConstant.indexDir);
			Searcher searcher = new IndexSearcher(reader);
			Analyzer analyzer = new StandardAnalyzer();
			QueryParser parser = new QueryParser(DsConstant.idxFileContent,
analyzer);
			Query query = parser.parse(searchString);
			
			bq1.add(query, BooleanClause.Occur.MUST);
			bq1.add(new BooleanClause(query, BooleanClause.Occur.MUST));
			//bq2.add(query, BooleanClause.Occur.MUST);
			//bq1.add(bq2, BooleanClause.Occur.MUST);
			
			searchHits = searcher.search(bq1);
			
			if(searchHits.length() > 0)
			{
				QueryScorer scorer = new QueryScorer(query);
				Highlighter highlighter = new Highlighter(new SimpleHTMLFormatter("<span          
style='background-color:yellow;  font-weight:bold;'>",
								"</span>"), scorer);
				
				for(int i = 0; i < searchHits.length(); i++)
				{
					Document doc = searchHits.doc(i);
					String text = doc.get(DsConstant.idxFileContent);
					TokenStream tokenstream =
analyzer.tokenStream(DsConstant.idxFileContent, new StringReader(text));
					//buff.append("<p> '" + DsConstant.userDir
					buff.append("<p  " + searchHits.doc(i).get(DsConstant.idxPath) + " "
							+ searchHits.doc(i).get("docName") + " <br>");
					//buff.append("score: " + searchHits.score(i) + "<br>");
					buff.append(highlighter.getBestFragments(tokenstream, text, 3, "...")+
"</p>");
					buff.append("!");
				}
				
				//System.out.println("Folder path is ::: " +DsConstant.folderPath);
				
				searcher.close();
			}
			
			System.out.println("Found "+searchHits.length()+" searchHits with query =
"+query);
		}
		catch(Exception e)
		{
			e.printStackTrace();
		}
		
		return buff.toString();
		//return resultList;
	}   

   Thanks.

regards,
Wooi Meng

-- 
View this message in context: http://www.nabble.com/search-within-search-tf2558237.html#a7152393
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 06:36:02 2006
Return-Path: <java-user-return-24332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87325 invoked from network); 3 Nov 2006 06:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 06:36:01 -0000
Received: (qmail 53159 invoked by uid 500); 3 Nov 2006 06:36:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53133 invoked by uid 500); 3 Nov 2006 06:36:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53121 invoked by uid 99); 3 Nov 2006 06:36:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 22:36:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucene.developer@googlemail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 22:35:52 -0800
Received: by nz-out-0102.google.com with SMTP id k1so258447nzf
        for <java-user@lucene.apache.org>; Thu, 02 Nov 2006 22:35:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bfzrjcf0GCBVW2WbDKS3krQ9/bXjNkmfg8bv8RHZxmXlRfc/MrnDZ4Tgv7STpZAo60i8aUHKBb/+oFRHqewQ7rVD8/kxSfzqpSHtM0TJiOD5c23u0jKvvDmTNgjEMucNDTTSJOuOgakJ7ORU22NQ0hSZQbjGZFk31Yv1dgVTrC0=
Received: by 10.65.204.7 with SMTP id g7mr77679qbq.1162535731543;
        Thu, 02 Nov 2006 22:35:31 -0800 (PST)
Received: by 10.65.83.3 with HTTP; Thu, 2 Nov 2006 22:35:31 -0800 (PST)
Message-ID: <a218b3050611022235x21b16e81rcdd0f41324515276@mail.gmail.com>
Date: Fri, 3 Nov 2006 07:35:31 +0100
From: lude <lucene.developer@googlemail.com>
To: java-user <java-user@lucene.apache.org>
Subject: Re: Any experience with spring's lucene support?
In-Reply-To: <a218b3050611011356w6844f1bfj6082cc48ebeec28d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15715_24301410.1162535731507"
References: <a218b3050611011356w6844f1bfj6082cc48ebeec28d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15715_24301410.1162535731507
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Nobody here, who is using spring-modules?

On 11/1/06, lude <lucene.developer@googlemail.com> wrote:
>
> Hello,
>
> while starting a new project we are thinking about using the
> spring-modules for working with lucene. See:
> https://springmodules.dev.java.net/
>
> Does anybody has experience with this higher level lucene API?
> How does it compare to Compass?
> (Dis-)Advantages of using spring-modules lucene support?
>
> Thanks
> lude
>

------=_Part_15715_24301410.1162535731507--

From java-user-return-24333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 07:13:02 2006
Return-Path: <java-user-return-24333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94288 invoked from network); 3 Nov 2006 07:13:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 07:13:01 -0000
Received: (qmail 88309 invoked by uid 500); 3 Nov 2006 07:13:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88280 invoked by uid 500); 3 Nov 2006 07:13:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88269 invoked by uid 99); 3 Nov 2006 07:13:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 23:13:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 23:12:53 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7EC5B5B76E; Thu,  2 Nov 2006 23:12:32 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7655B7F403
	for <java-user@lucene.apache.org>; Thu,  2 Nov 2006 23:12:32 -0800 (PST)
Date: Thu, 2 Nov 2006 23:12:32 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Query question
In-Reply-To: <62576.70.161.166.218.1162527126.squirrel@www.sevajug.org>
Message-ID: <Pine.LNX.4.58.0611022305580.29820@hal.rescomp.berkeley.edu>
References: <62109.70.161.166.218.1162519212.squirrel@www.sevajug.org>   
 <359a92830611021846p1b91c26m6746cfa20d8fcfe0@mail.gmail.com>
 <62576.70.161.166.218.1162527126.squirrel@www.sevajug.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: 1.) I have data like name="Jeff" lastname="Richley" age="33" and I need to
: be able to query by any combination such as name="Jeff" age="33".  But if
: I query with name="Jeffrey" there is no match.
:
: 2.) The name value pairs are not really controlled until the end user is
: inserting information or querying.  I may have the data from the previous
: example and then have another that has address information and then
: something totally unrelated such as stock prices.  The point is, I can't
: guarantee what exactly will be in the data.

Lucene will fit your needs because of your second point nicely, Documents
don't need to all have hte same fields.

as to your first point, and your question about 100% matches, Lucene
should be able to meet your needs perfectly, you just have to understand
how to ask it the right question.  lemme give you a quick check list of
things to keep in mind, and as you dig into the documentation these will
make more sense...

 1) Use only UN_TOKENIZED fields when adding your documents, and if you
use QueryParser to build your queries for you, use the KeywordAnalyzer to
make sure no lowercasing or stemming takes place.
 2) OMIT_NORMs when indexing .. they only matter if you want the lengths
of fields to affect the score, and you don't -- you only want to know if
it matched or not.
 3) if you want to require name="jeff" and age="33" make sure you
construct a query where all clauses are mandatory .. the default in the
query parser is "SHOULD" meaning only one clause is mandatory, and the
other clauses increase the score.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 07:13:57 2006
Return-Path: <java-user-return-24334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94408 invoked from network); 3 Nov 2006 07:13:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 07:13:56 -0000
Received: (qmail 90005 invoked by uid 500); 3 Nov 2006 07:14:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89974 invoked by uid 500); 3 Nov 2006 07:14:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89963 invoked by uid 99); 3 Nov 2006 07:14:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 23:14:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 23:13:48 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id kA37DPZd174546
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 07:13:25 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kA37GMjS3129538
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 08:16:22 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kA37DOMU020934
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 08:13:24 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kA37DO7H020928
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 08:13:24 +0100
In-Reply-To: <7152393.post@talk.nabble.com>
Subject: Re: search within search
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF6E0E356B.BA51309B-ON8825721B.0025E295-8825721B.00266FCD@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 2 Nov 2006 22:59:49 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 03/11/2006 09:16:21
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

This code adds the same query twice to a boolean query:
                                     Query query =
parser.parse(searchString);
                                     bq1.add(query,
BooleanClause.Occur.MUST);
                                     bq1.add(new BooleanClause(query,
BooleanClause.Occur.MUST));
But  X AND X == X  :-)

You probably want to do something like:
      Query q = new BooleanQuery();
      bq.add(parser.parse(searchString1), BooleanClause.Occur.MUST);
      bq.add(parser.parse(searchString2), BooleanClause.Occur.MUST);
      ...
      searchHits = searcher.search(q);

Regards,
Doron

spinergywmy <spinergywmy@gmail.com> wrote on 02/11/2006 22:13:05:

>
> Hi,
>
>    I have look at the examples from lucene source, and try out myself but
it
> doesn't work. Perhaps u can point out where I did wrong. Below r the
codes
> that I developed:
>
>    public String search(String searchString) throws IOException,
Exception
>    {
>       //System.out.println("inside search util");
>
>       IndexReader reader = null;
>       StringBuffer buff = new StringBuffer();
>       BooleanQuery bq1 = new BooleanQuery();
>       //BooleanQuery bq2 = new BooleanQuery();
>       //ArrayList resultList = new ArrayList();
>
>       try
>       {
>          reader = IndexReader.open(DsConstant.indexDir);
>          Searcher searcher = new IndexSearcher(reader);
>          Analyzer analyzer = new StandardAnalyzer();
>          QueryParser parser = new QueryParser(DsConstant.idxFileContent,
> analyzer);
>          Query query = parser.parse(searchString);
>
>          bq1.add(query, BooleanClause.Occur.MUST);
>          bq1.add(new BooleanClause(query, BooleanClause.Occur.MUST));
>          //bq2.add(query, BooleanClause.Occur.MUST);
>          //bq1.add(bq2, BooleanClause.Occur.MUST);
>
>          searchHits = searcher.search(bq1);
>
>          if(searchHits.length() > 0)
>          {
>             QueryScorer scorer = new QueryScorer(query);
>             Highlighter highlighter = new Highlighter(new
> SimpleHTMLFormatter("<span
> style='background-color:yellow;  font-weight:bold;'>",
>                         "</span>"), scorer);
>
>             for(int i = 0; i < searchHits.length(); i++)
>             {
>                Document doc = searchHits.doc(i);
>                String text = doc.get(DsConstant.idxFileContent);
>                TokenStream tokenstream =
> analyzer.tokenStream(DsConstant.idxFileContent, new StringReader(text));
>                //buff.append("<p> '" + DsConstant.userDir
>                buff.append("<p  " + searchHits.doc(i).
> get(DsConstant.idxPath) + " "
>                      + searchHits.doc(i).get("docName") + " <br>");
>                //buff.append("score: " + searchHits.score(i) + "<br>");
>                buff.append(highlighter.getBestFragments(tokenstream,
> text, 3, "...")+
> "</p>");
>                buff.append("!");
>             }
>
>             //System.out.println("Folder path is ::: " +DsConstant.
> folderPath);
>
>             searcher.close();
>          }
>
>          System.out.println("Found "+searchHits.length()+"
> searchHits with query =
> "+query);
>       }
>       catch(Exception e)
>       {
>          e.printStackTrace();
>       }
>
>       return buff.toString();
>       //return resultList;
>    }
>
>    Thanks.
>
> regards,
> Wooi Meng
>
> --
> View this message in context: http://www.nabble.com/search-within-
> search-tf2558237.html#a7152393
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 07:17:40 2006
Return-Path: <java-user-return-24335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95215 invoked from network); 3 Nov 2006 07:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 07:17:40 -0000
Received: (qmail 95598 invoked by uid 500); 3 Nov 2006 07:17:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95566 invoked by uid 500); 3 Nov 2006 07:17:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95551 invoked by uid 99); 3 Nov 2006 07:17:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 23:17:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 02 Nov 2006 23:17:33 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 028AD5B76E; Thu,  2 Nov 2006 23:17:12 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F3C247F403
	for <java-user@lucene.apache.org>; Thu,  2 Nov 2006 23:17:12 -0800 (PST)
Date: Thu, 2 Nov 2006 23:17:12 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <71caf8b50611022207t4b96c09aq9f99c3ee0e1b10b@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0611022313570.29820@hal.rescomp.berkeley.edu>
References: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
  <Pine.LNX.4.58.0611021315060.1124@hal.rescomp.berkeley.edu> 
 <71caf8b50611021535t3611f155g9e2d3caa146f308a@mail.gmail.com> 
 <Pine.LNX.4.58.0611021639350.11655@hal.rescomp.berkeley.edu>
 <71caf8b50611022207t4b96c09aq9f99c3ee0e1b10b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have a question: is the score for a document different if I have
: only that document in my index, or if I have N documents?
: If the answer is yes, I will put all N documents together, otherwise I
: will evaluate them one by one.

as i said before, yes it does...

>> For most of the various types of Queries that exist in Lucene, the
>> score is very dependent on how common the Terms involved are in the
>> Corpus as a whole -- if your Corpus consists of only 1 Document, then
>> your scores are going to be relatively meaningless.

...you will see a big difference between an index containing 1 doc, and an
index containing 10 docs which all match your query, and an index
containing 100000 docs.

I believe Doron already suggested you take a look at the Document
explainaing how Lucene's Scoring works correct? ...

	http://lucene.apache.org/java/docs/scoring.html


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 08:07:37 2006
Return-Path: <java-user-return-24336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7178 invoked from network); 3 Nov 2006 08:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 08:07:36 -0000
Received: (qmail 48578 invoked by uid 500); 3 Nov 2006 08:07:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48133 invoked by uid 500); 3 Nov 2006 08:07:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48122 invoked by uid 99); 3 Nov 2006 08:07:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 00:07:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 00:07:27 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id kA3872Il064746
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 09:07:06 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
Date: Fri, 3 Nov 2006 09:07:01 +0100
User-Agent: KMail/1.8.2
References: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com> <Pine.LNX.4.58.0611021639350.11655@hal.rescomp.berkeley.edu> <71caf8b50611022207t4b96c09aq9f99c3ee0e1b10b@mail.gmail.com>
In-Reply-To: <71caf8b50611022207t4b96c09aq9f99c3ee0e1b10b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611030907.01856.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Michele,

On Friday 03 November 2006 07:07, Michele Amoretti wrote:
> I have a question: is the score for a document different if I have
> only that document in my index, or if I have N documents?
> If the answer is yes, I will put all N documents together, otherwise I
> will evaluate them one by one.
> 
> Btw, I will ask the ws develepoer about how queries are interpreted by
> the search engine.

To compute the score for only a subset of the lucene documents
one normally uses a Filter. Assuming you get the primary keys of
the docs to be scored, you can look them up in the lucene index
and use their internal lucene document numbers to create the Filter.
Then search your query with this filter.
Have a look at the source code of RangeFilter.bits() to see how to
get to the internal document numbers from a set of terms.

Btw. when your database uses the same query to obtain this set of
documents, you might consider to move this function into Lucene
completely, because this will allow you to avoid using a filter alltogether.

Regards,
Paul Elschot


> 
> Thanks
> 
> On 11/3/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> > : le list is not ordered (I do not know the details of the search
> > : angine, I only have its result for a query)
> > :
> > : then I have this list of documents, which represents a subset of the 
corpus
> > :
> > : I have to rank the documents of the list, using your scoring algorithm
> >
> > In other words, out of a large copus C, this webservice hase
> > told you that the documents comprising subset S is the top N matching
> > documents for your query Q (where N << sizeof(C))
> >
> > your goal is to sort S as best as possible.
> >
> > You could try indexing all the docs in S in a Lucene RAMDirectory and then
> > search on them, but my orriginal point about the score being
> > fairly meaningless in an index of only 1 document still applies somewhat
> > ... if all of the documents you get back allready have a lot in common
> > 9they must have something in common or hte webservice wouldn't havre
> > returned them in response to your query) it may be hard to get a
> > meaningful document frequency of the words in your query.
> >
> > you also may run into confusion about what exactly your query "is" and
> > wether or not your interpretation matches that of the webservice ... at a
> > very simplisitc level, if the query is "Java Lucene" and your webservice
> > interprets that as an "OR" query and you interpret that as an "AND" query,
> > you might find that the scores you compute for all the docs are 0.
> >
> > If i were in your shoes, i'd try to work with whoever runs this webservice
> > to make it return more usefull informatoin -- at the very least to return
> > results in sorted order.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 08:21:09 2006
Return-Path: <java-user-return-24337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18478 invoked from network); 3 Nov 2006 08:21:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 08:21:08 -0000
Received: (qmail 68771 invoked by uid 500); 3 Nov 2006 08:21:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68723 invoked by uid 500); 3 Nov 2006 08:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68712 invoked by uid 99); 3 Nov 2006 08:21:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 00:21:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of michele.amoretti@gmail.com designates 66.249.82.233 as permitted sender)
Received: from [66.249.82.233] (HELO wx-out-0506.google.com) (66.249.82.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 00:21:00 -0800
Received: by wx-out-0506.google.com with SMTP id s15so307149wxc
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 00:20:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=lQ6k1C+9rdIdzf/a5BC+wyJV9eU5/o+fcGz72EtVRARbCxkQlZ0zy2EHY5UJ8fmzbF/Tb7cJmXsKBTjTGB175OHPGKJkFfNu47UbI+/1EyNefUckEhjSvoIZ09bY1+4d1RqImpopb+Dvr3vsyBrCobHCAEzEg81PcQUdWlSEflg=
Received: by 10.90.27.6 with SMTP id a6mr878380aga.1162542039274;
        Fri, 03 Nov 2006 00:20:39 -0800 (PST)
Received: by 10.90.51.3 with HTTP; Fri, 3 Nov 2006 00:20:39 -0800 (PST)
Message-ID: <71caf8b50611030020u61367cc5h56834db033630a0a@mail.gmail.com>
Date: Fri, 3 Nov 2006 09:20:39 +0100
From: "Michele Amoretti" <amoretti@ce.unipr.it>
Sender: michele.amoretti@gmail.com
To: java-user@lucene.apache.org
Subject: for admins: mailing list like spam
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Google-Sender-Auth: bf24f52ee1499407
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

why not to put a [LUCENE USER] automatic tag at the beginning of
e-mails subjects?

It will make mails list more easy to read (I am using gmail and I do
not have client-side filters).

--=20
Michele Amoretti, Ph.D.
Distributed Systems Group
Dipartimento di Ingegneria dell'Informazione
Universit=E0 degli Studi di Parma
http://www.ce.unipr.it/people/amoretti

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 08:41:09 2006
Return-Path: <java-user-return-24338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24814 invoked from network); 3 Nov 2006 08:41:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 08:41:09 -0000
Received: (qmail 93027 invoked by uid 500); 3 Nov 2006 08:41:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93003 invoked by uid 500); 3 Nov 2006 08:41:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92992 invoked by uid 99); 3 Nov 2006 08:41:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 00:41:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 00:41:02 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GfubS-0007ut-4h
	for java-user@lucene.apache.org; Fri, 03 Nov 2006 00:40:42 -0800
Message-ID: <7153721.post@talk.nabble.com>
Date: Fri, 3 Nov 2006 00:40:42 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search within search
In-Reply-To: <OF6E0E356B.BA51309B-ON8825721B.0025E295-8825721B.00266FCD@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7129070.post@talk.nabble.com> <39735A87-BE2A-401E-A2C9-8E9E0C3C7AF9@ehatchersolutions.com> <7152393.post@talk.nabble.com> <OF6E0E356B.BA51309B-ON8825721B.0025E295-8825721B.00266FCD@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Doron, good call, thanks.

   I have another problem is I do not perform the real search within search
feature which according to the way that I have coded, because for the second
time searching, I actually go back to the index directory to search the
entire indeces again rather then cached the first time search result.

   How can I solve this problem? Do I need to use queryFilter and
reconstruct the codes again, and that is time consuming, is there any how I
can get it done without reconstruct. Or do I need to use bitSet within my
existing codes.

   Thanks.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/search-within-search-tf2558237.html#a7153721
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 09:41:17 2006
Return-Path: <java-user-return-24339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39676 invoked from network); 3 Nov 2006 09:41:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 09:41:16 -0000
Received: (qmail 86669 invoked by uid 500); 3 Nov 2006 09:41:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86634 invoked by uid 500); 3 Nov 2006 09:41:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86623 invoked by uid 99); 3 Nov 2006 09:41:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 01:41:20 -0800
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DATE_IN_PAST_24_48,RCVD_IN_BL_SPAMCOP_NET,RCVD_NUMERIC_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 01:41:07 -0800
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1GfvWw-0007Fp-SL
	for java-user@lucene.apache.org; Fri, 03 Nov 2006 10:40:11 +0100
Received: from 125.23.82.0 ([125.23.82.0])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 10:40:06 +0100
Received: from sri by 125.23.82.0 with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 10:40:06 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  "Paramasivam  Srinivasan" <sri@indicus.net>
Subject:  Re: Announcement: Lucene powering Monster job search index (Beta)
Date:  Thu, 2 Nov 2006 13:22:18 +0530
Lines: 61
Message-ID: <eic83k$hdo$1@sea.gmane.org>
References:  <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com> <1162223166.9917.4.camel@posthaste.boston.ximian.com> <e994873a0610300831p1229ad0k69de63cba052bd22@mail.gmail.com>
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: 125.23.82.0
X-MSMail-Priority: Normal
X-Newsreader: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-RFC2646: Format=Flowed; Original
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Peter

When I use the CustomHitCollector, it affect the application performance. 
Also how you accomplish the grouping the results with out affecting 
performance. Also If possible give some code snippet for custome 
hitcollector.

TIA

Sri

"Peter Keegan" <peterlkeegan@gmail.com> wrote in message 
news:e994873a0610300831p1229ad0k69de63cba052bd22@mail.gmail.com...
> Joe,
>
> Fields with numeric values are stored in a separate file as binary values 
> in
> an internal format. Lucene is unaware of this file and unaware of the 
> range
> expression in the query. The range expression is parsed outside of Lucene
> and used in a custom HitCollector to filter out documents that aren't in 
> the
> requested range(s). A goal was to do this without having to modify Lucene.
> Our scheme is pretty efficient, but not very general purpose in its 
> current
> form, though.
>
> Peter
>
>
> On 10/30/06, Joe Shaw <joeshaw@novell.com> wrote:
>>
>> Hi Peter,
>>
>> On Fri, 2006-10-27 at 15:29 -0400, Peter Keegan wrote:
>> > Numeric range search is one of Lucene's weak points (performance-wise)
>> so we
>> > have implemented this with a custom HitCollector and an extension to 
>> > the
>> > Lucene index files that stores the numeric field values for all
>> documents.
>> >
>> > It is important to point out that this has all been implemented with 
>> > the
>> > stock Lucene 2.0 library. No code changes were made to the Lucene core.
>>
>> Can you give some technical details on the extension to the Lucene index
>> files?  How did you do it without making any changes to the Lucene core?
>>
>> Thanks,
>> Joe
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 10:14:34 2006
Return-Path: <java-user-return-24340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47263 invoked from network); 3 Nov 2006 10:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 10:14:33 -0000
Received: (qmail 40727 invoked by uid 500); 3 Nov 2006 10:14:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40333 invoked by uid 500); 3 Nov 2006 10:14:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40322 invoked by uid 99); 3 Nov 2006 10:14:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 02:14:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of michele.amoretti@gmail.com designates 66.249.82.225 as permitted sender)
Received: from [66.249.82.225] (HELO wx-out-0506.google.com) (66.249.82.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 02:14:24 -0800
Received: by wx-out-0506.google.com with SMTP id s15so322381wxc
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 02:13:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=V/f2f37SjBwlFs5Ig1kYj2EDsYrKGo0PdoqErAXZJh1Z7zGBGdYoGPmDztnKyhV71id4Zw6Nv6aGYHOmp/sqydjSk5fTWfH+srC+DYpoIPXCd+EZFkGI4/5N7YIrR4lfVnCi/KGkxsi5sbl1Zu6NFGRxckH6zqQ0vWqkKZeUEUM=
Received: by 10.90.93.6 with SMTP id q6mr890229agb.1162548824350;
        Fri, 03 Nov 2006 02:13:44 -0800 (PST)
Received: by 10.90.51.3 with HTTP; Fri, 3 Nov 2006 02:13:39 -0800 (PST)
Message-ID: <71caf8b50611030213x1e39c707o27816d5e6fb32add@mail.gmail.com>
Date: Fri, 3 Nov 2006 11:13:39 +0100
From: "Michele Amoretti" <amoretti@ce.unipr.it>
Sender: michele.amoretti@gmail.com
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <Pine.LNX.4.58.0611022313570.29820@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
	 <Pine.LNX.4.58.0611021315060.1124@hal.rescomp.berkeley.edu>
	 <71caf8b50611021535t3611f155g9e2d3caa146f308a@mail.gmail.com>
	 <Pine.LNX.4.58.0611021639350.11655@hal.rescomp.berkeley.edu>
	 <71caf8b50611022207t4b96c09aq9f99c3ee0e1b10b@mail.gmail.com>
	 <Pine.LNX.4.58.0611022313570.29820@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: d2486dce3d65f0fa
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, sorry I did not read it in depth.

Now, where can I find an example of:

- building the RAMDirectory
- scoring all documents against the query?

thanks

On 11/3/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : I have a question: is the score for a document different if I have
> : only that document in my index, or if I have N documents?
> : If the answer is yes, I will put all N documents together, otherwise I
> : will evaluate them one by one.
>
> as i said before, yes it does...
>
> >> For most of the various types of Queries that exist in Lucene, the
> >> score is very dependent on how common the Terms involved are in the
> >> Corpus as a whole -- if your Corpus consists of only 1 Document, then
> >> your scores are going to be relatively meaningless.
>
> ...you will see a big difference between an index containing 1 doc, and a=
n
> index containing 10 docs which all match your query, and an index
> containing 100000 docs.
>
> I believe Doron already suggested you take a look at the Document
> explainaing how Lucene's Scoring works correct? ...
>
>        http://lucene.apache.org/java/docs/scoring.html
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Michele Amoretti, Ph.D.
Distributed Systems Group
Dipartimento di Ingegneria dell'Informazione
Universit=E0 degli Studi di Parma
http://www.ce.unipr.it/people/amoretti

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 10:16:42 2006
Return-Path: <java-user-return-24341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47532 invoked from network); 3 Nov 2006 10:16:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 10:16:42 -0000
Received: (qmail 43868 invoked by uid 500); 3 Nov 2006 10:16:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43111 invoked by uid 500); 3 Nov 2006 10:16:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43100 invoked by uid 99); 3 Nov 2006 10:16:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 02:16:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of michele.amoretti@gmail.com designates 66.249.82.230 as permitted sender)
Received: from [66.249.82.230] (HELO wx-out-0506.google.com) (66.249.82.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 02:16:32 -0800
Received: by wx-out-0506.google.com with SMTP id s15so322638wxc
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 02:15:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=fXq2VA1bS34dVwTPHd6fTmekPwfn9IgoFWje5R8XYX0YyxloZ+xboxjei8iLoES+05V70lEzv2oxuYrOzGaWLEPaBOFn1pwjDeEj0jj9P+hkWouZGDixEpwPJqUsZ8uynwt+KjUsXgi2gAf4562AnGKrtu7CHyCQUVHnTB2ho+w=
Received: by 10.90.118.12 with SMTP id q12mr891590agc.1162548943372;
        Fri, 03 Nov 2006 02:15:43 -0800 (PST)
Received: by 10.90.51.3 with HTTP; Fri, 3 Nov 2006 02:15:43 -0800 (PST)
Message-ID: <71caf8b50611030215i5fd9a1ccj976f6b70ae564b93@mail.gmail.com>
Date: Fri, 3 Nov 2006 11:15:43 +0100
From: "Michele Amoretti" <amoretti@ce.unipr.it>
Sender: michele.amoretti@gmail.com
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <71caf8b50611030213x1e39c707o27816d5e6fb32add@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
	 <Pine.LNX.4.58.0611021315060.1124@hal.rescomp.berkeley.edu>
	 <71caf8b50611021535t3611f155g9e2d3caa146f308a@mail.gmail.com>
	 <Pine.LNX.4.58.0611021639350.11655@hal.rescomp.berkeley.edu>
	 <71caf8b50611022207t4b96c09aq9f99c3ee0e1b10b@mail.gmail.com>
	 <Pine.LNX.4.58.0611022313570.29820@hal.rescomp.berkeley.edu>
	 <71caf8b50611030213x1e39c707o27816d5e6fb32add@mail.gmail.com>
X-Google-Sender-Auth: 9dd5067cad4ecd8a
X-Virus-Checked: Checked by ClamAV on apache.org

http://javatechniques.com/public/java/docs/basics/lucene-memory-search.html

is this good? it seems to be good..

On 11/3/06, Michele Amoretti <amoretti@ce.unipr.it> wrote:
> Ok, sorry I did not read it in depth.
>
> Now, where can I find an example of:
>
> - building the RAMDirectory
> - scoring all documents against the query?
>
> thanks
>
> On 11/3/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> > : I have a question: is the score for a document different if I have
> > : only that document in my index, or if I have N documents?
> > : If the answer is yes, I will put all N documents together, otherwise =
I
> > : will evaluate them one by one.
> >
> > as i said before, yes it does...
> >
> > >> For most of the various types of Queries that exist in Lucene, the
> > >> score is very dependent on how common the Terms involved are in the
> > >> Corpus as a whole -- if your Corpus consists of only 1 Document, the=
n
> > >> your scores are going to be relatively meaningless.
> >
> > ...you will see a big difference between an index containing 1 doc, and=
 an
> > index containing 10 docs which all match your query, and an index
> > containing 100000 docs.
> >
> > I believe Doron already suggested you take a look at the Document
> > explainaing how Lucene's Scoring works correct? ...
> >
> >        http://lucene.apache.org/java/docs/scoring.html
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Michele Amoretti, Ph.D.
> Distributed Systems Group
> Dipartimento di Ingegneria dell'Informazione
> Universit=E0 degli Studi di Parma
> http://www.ce.unipr.it/people/amoretti
>


--=20
Michele Amoretti, Ph.D.
Distributed Systems Group
Dipartimento di Ingegneria dell'Informazione
Universit=E0 degli Studi di Parma
http://www.ce.unipr.it/people/amoretti

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 11:34:34 2006
Return-Path: <java-user-return-24342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62803 invoked from network); 3 Nov 2006 11:34:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 11:34:33 -0000
Received: (qmail 49609 invoked by uid 500); 3 Nov 2006 11:34:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49581 invoked by uid 500); 3 Nov 2006 11:34:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49570 invoked by uid 99); 3 Nov 2006 11:34:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 03:34:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 03:34:20 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E83CE30EFC19; Fri,  3 Nov 2006 06:33:43 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9E1CB30EFC18
	for <java-user@lucene.apache.org>; Fri,  3 Nov 2006 06:33:40 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <71caf8b50611030020u61367cc5h56834db033630a0a@mail.gmail.com>
References: <71caf8b50611030020u61367cc5h56834db033630a0a@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <15C56B92-0573-4C6F-9F88-E4A98933DA48@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: for admins: mailing list like spam
Date: Fri, 3 Nov 2006 06:33:37 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Nov 3, 2006, at 3:20 AM, Michele Amoretti wrote:
> why not to put a [LUCENE USER] automatic tag at the beginning of
> e-mails subjects?

Because the To and Reply-to headers indicate the list.  All Apache e- 
mail lists operate the same, and we are not going to change this  
behavior.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 11:46:50 2006
Return-Path: <java-user-return-24343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66182 invoked from network); 3 Nov 2006 11:46:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 11:46:49 -0000
Received: (qmail 64845 invoked by uid 500); 3 Nov 2006 11:46:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64811 invoked by uid 500); 3 Nov 2006 11:46:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64800 invoked by uid 99); 3 Nov 2006 11:46:54 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of michele.amoretti@gmail.com designates 66.249.82.235 as permitted sender)
Received: from [66.249.82.235] (HELO wx-out-0506.google.com) (66.249.82.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 03:46:48 -0800
Received: by wx-out-0506.google.com with SMTP id s15so335382wxc
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 03:44:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ZQSl1lNruRn0GXgTpcwBA2BRqFnjISTU6CTl4k2/CytHxBmywWDeUAad9KOLV0DuulUo+6rH7UraGDx0Rsy08Z4sr4s8jcIl08pHjvIMnplfa7Wj+l/h3ceV2V2ebqNQLXU22hLnC9BQO/XrEQHwpQJD74txZzgl7FjgM60FdPk=
Received: by 10.90.78.9 with SMTP id a9mr13624agb.1162552613161;
        Fri, 03 Nov 2006 03:16:53 -0800 (PST)
Received: by 10.90.51.3 with HTTP; Fri, 3 Nov 2006 03:16:53 -0800 (PST)
Message-ID: <71caf8b50611030316s4a631118j4eb8c5bf4da3fc5@mail.gmail.com>
Date: Fri, 3 Nov 2006 12:16:53 +0100
From: "Michele Amoretti" <amoretti@ce.unipr.it>
Sender: michele.amoretti@gmail.com
To: java-user@lucene.apache.org
Subject: Re: simple (?) question about scoring
In-Reply-To: <71caf8b50611030215i5fd9a1ccj976f6b70ae564b93@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <OF68A17459.F3DC6B9E-ON8825721A.0069DC1D-8825721A.006E03B0@il.ibm.com>
	 <Pine.LNX.4.58.0611021315060.1124@hal.rescomp.berkeley.edu>
	 <71caf8b50611021535t3611f155g9e2d3caa146f308a@mail.gmail.com>
	 <Pine.LNX.4.58.0611021639350.11655@hal.rescomp.berkeley.edu>
	 <71caf8b50611022207t4b96c09aq9f99c3ee0e1b10b@mail.gmail.com>
	 <Pine.LNX.4.58.0611022313570.29820@hal.rescomp.berkeley.edu>
	 <71caf8b50611030213x1e39c707o27816d5e6fb32add@mail.gmail.com>
	 <71caf8b50611030215i5fd9a1ccj976f6b70ae564b93@mail.gmail.com>
X-Google-Sender-Auth: ae41996428096684
X-Virus-Checked: Checked by ClamAV on apache.org

Yes! I modified the example to be compliant with 2.1 api, and I added
the hits.score() call, for each discovered results.

It works!

     [java] Hits for "freedom" were found in quotes by:
     [java]   1. Mohandas Gandhi with score =3D 0.53033006
     [java]   2. Ayn Rand with score =3D 0.25
     [java]   3. Friedrich Hayek with score =3D 0.1875

     [java] Hits for "free" were found in quotes by:
     [java]   1. Ayn Rand with score =3D 0.5986179

     [java] Hits for "progress or achievements" were found in quotes by:
     [java]   1. Theodore Roosevelt with score =3D 0.14965448
     [java]   2. Friedrich Hayek with score =3D 0.11224086


I will start from this, for my purposes.

Thank you for all the hints.

Michele



On 11/3/06, Michele Amoretti <amoretti@ce.unipr.it> wrote:
> http://javatechniques.com/public/java/docs/basics/lucene-memory-search.ht=
ml
>
> is this good? it seems to be good..
>
> On 11/3/06, Michele Amoretti <amoretti@ce.unipr.it> wrote:
> > Ok, sorry I did not read it in depth.
> >
> > Now, where can I find an example of:
> >
> > - building the RAMDirectory
> > - scoring all documents against the query?
> >
> > thanks
> >
> > On 11/3/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > >
> > > : I have a question: is the score for a document different if I have
> > > : only that document in my index, or if I have N documents?
> > > : If the answer is yes, I will put all N documents together, otherwis=
e I
> > > : will evaluate them one by one.
> > >
> > > as i said before, yes it does...
> > >
> > > >> For most of the various types of Queries that exist in Lucene, the
> > > >> score is very dependent on how common the Terms involved are in th=
e
> > > >> Corpus as a whole -- if your Corpus consists of only 1 Document, t=
hen
> > > >> your scores are going to be relatively meaningless.
> > >
> > > ...you will see a big difference between an index containing 1 doc, a=
nd an
> > > index containing 10 docs which all match your query, and an index
> > > containing 100000 docs.
> > >
> > > I believe Doron already suggested you take a look at the Document
> > > explainaing how Lucene's Scoring works correct? ...
> > >
> > >        http://lucene.apache.org/java/docs/scoring.html
> > >
> > >
> > > -Hoss
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > --
> > Michele Amoretti, Ph.D.
> > Distributed Systems Group
> > Dipartimento di Ingegneria dell'Informazione
> > Universit=E0 degli Studi di Parma
> > http://www.ce.unipr.it/people/amoretti
> >
>
>
> --
> Michele Amoretti, Ph.D.
> Distributed Systems Group
> Dipartimento di Ingegneria dell'Informazione
> Universit=E0 degli Studi di Parma
> http://www.ce.unipr.it/people/amoretti
>


--=20
Michele Amoretti, Ph.D.
Distributed Systems Group
Dipartimento di Ingegneria dell'Informazione
Universit=E0 degli Studi di Parma
http://www.ce.unipr.it/people/amoretti

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 13:54:30 2006
Return-Path: <java-user-return-24344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6436 invoked from network); 3 Nov 2006 13:54:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 13:54:29 -0000
Received: (qmail 5678 invoked by uid 500); 3 Nov 2006 13:54:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5588 invoked by uid 500); 3 Nov 2006 13:54:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5549 invoked by uid 99); 3 Nov 2006 13:54:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 05:54:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucener@gmail.com designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO nz-out-0102.google.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 05:54:16 -0800
Received: by nz-out-0102.google.com with SMTP id k1so313610nzf
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 05:53:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=p9d7YnjkC/HI8ZBJOLW+sctXVJasUyWo7g7Km0EmYipX0OkBMyr9367QY6ApJBCZ5CPbKE1QX094u29Zdrn8hhgUCiGhukUbivsQKpCFO9i825i2pcSlIWBEKVcREhuY3aZ3Vpd6rqf/t9XAWw6sQ9E7KAX9Re+Fl06xAhm4zP4=
Received: by 10.65.210.18 with SMTP id m18mr687143qbq.1162562034624;
        Fri, 03 Nov 2006 05:53:54 -0800 (PST)
Received: by 10.65.200.9 with HTTP; Fri, 3 Nov 2006 05:53:54 -0800 (PST)
Message-ID: <882004010611030553k15335c0di2abb1798135bbe31@mail.gmail.com>
Date: Fri, 3 Nov 2006 08:53:54 -0500
From: "Lucifer Hammer" <lucener@gmail.com>
To: java-user@lucene.apache.org
Subject: Suspected problem in the QueryParser
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17807_289273.1162562034478"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17807_289273.1162562034478
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I recently stumbled across what I think might be a bug in the QueryParser.
Before I enter it as a bug, I wanted to run it by this group to see if I'm
just not looking at the boolean expression correctly.

Here's the issue:

I created an index with 5 documents, all have one field: "text", with the
following contents:
doc1:text:"Table Chair Spoon"
doc2:text:"Table Chair Spoon Fork"
doc3:text:"Table Spoon Fork"
doc4:text:"Chair Spoon Fork"
doc5:text:"Spoon Fork"

When I enter the query: "Table AND NOT Chair"  I get one hit, doc3
When I enter the query: "Table AND (NOT Chair)" I get 0 hits.

I had thought that both queries would return the same results.  Is this a
bug, or, am I not understanding the query language correctly?

I'm attaching test code.  The program creates an index in the directory
which you pass into the main program.

Thanks!
L
------------------------------------------------------------------------------

import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

import org.apache.lucene.search.Query;
import org.apache.lucene.search.Hits;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.index.Term;



import java.io.File;
import java.io.IOException;
import java.io.FileReader;

public class IndexTest {
    public static void create(File indexDir) throws IOException {

        IndexWriter writer = new IndexWriter(indexDir, new
                WhitespaceAnalyzer(), true);
        Document doc = new Document();
        doc.add(new Field("text",
                "Table Chair Spoon",
                Field.Store.YES,
                Field.Index.TOKENIZED,
                Field.TermVector.NO));

        writer.addDocument(doc);
        doc = new Document();
        doc.add(new Field("text",
                "Table Chair Spoon Fork",
                Field.Store.YES,
                Field.Index.TOKENIZED,
                Field.TermVector.NO));
        writer.addDocument(doc);
        doc = new Document();
        doc.add(new Field("text",
                "Table Spoon Fork!",
                Field.Store.YES,
                Field.Index.TOKENIZED,
                Field.TermVector.NO));
        writer.addDocument(doc);
        doc = new Document();
        doc.add(new Field("text",
                "Chair Spoon Fork",
                Field.Store.YES,
                Field.Index.TOKENIZED,
                Field.TermVector.NO));
        writer.addDocument(doc);
        doc = new Document();
        doc.add(new Field("text",
                "Spoon Fork",
                Field.Store.YES,
                Field.Index.TOKENIZED,
                Field.TermVector.NO));
        writer.addDocument(doc);

        writer.close();
    }


    public static void query(File indexDir, String queryString) throws
IOException
    {
        Query query = null;
        Hits hits = null;

        try {
            QueryParser qp = new QueryParser("text",new
WhitespaceAnalyzer());
            qp.setDefaultOperator(QueryParser.OR_OPERATOR);
            query = qp.parse(queryString);
        } catch (Exception qe) {System.out.println(qe.toString());}
        if (query == null) return;
        System.out.println("Query: " + query.toString());
        IndexReader reader = IndexReader.open(indexDir);
        IndexSearcher searcher = new IndexSearcher(reader);

        hits = searcher.search(query);
        System.out.println("Hits: " + hits.length());

        for (int i = 0; i < hits.length(); i++)
        {
            System.out.println( hits.doc(i).get("text") + " ");
        }

        searcher.close();
        reader.close();

    }
    public static void main(String[] args) throws Exception {
        if (args.length != 1) {
            throw new Exception("Usage: " + IndexTest.class.getName() +
"<index dir>");
        }
        File indexDir = new File(args[0]);
        create(indexDir);
        query(indexDir,"Table AND NOT Chair");
        query(indexDir,"Table AND (NOT Chair)");
    }
}

------=_Part_17807_289273.1162562034478--

From java-user-return-24345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 14:26:51 2006
Return-Path: <java-user-return-24345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24633 invoked from network); 3 Nov 2006 14:26:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 14:26:50 -0000
Received: (qmail 88932 invoked by uid 500); 3 Nov 2006 14:26:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88908 invoked by uid 500); 3 Nov 2006 14:26:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88897 invoked by uid 99); 3 Nov 2006 14:26:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 06:26:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 06:26:38 -0800
Received: by nf-out-0910.google.com with SMTP id n29so187961nfc
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 06:26:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IDLe7/QXb2NGv9KFSPTg4386Qld/aSxSF3Cviw2eR75H11/mYurSMJP/lvrYjlV3zlW+YVNkXocVxee+823YLQi9i4WOHZH/lbJ1cD86clT5rTK6smgc4S7jsmXbs1MKnuzhVVLPiYkg2zgKOluzfcJfrfTWJ+ah4efz8PDYOPo=
Received: by 10.82.182.8 with SMTP id e8mr745030buf.1162563975877;
        Fri, 03 Nov 2006 06:26:15 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Fri, 3 Nov 2006 06:26:15 -0800 (PST)
Message-ID: <359a92830611030626w62e270f2m1cf011c774842d80@mail.gmail.com>
Date: Fri, 3 Nov 2006 09:26:15 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modelling relational data in Lucene Index?
In-Reply-To: <20061103042202.96427.qmail@web52008.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18888_30193825.1162563975031"
References: <20061103042202.96427.qmail@web52008.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_18888_30193825.1162563975031
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

One thing it took me a while to grasp, and is not automatic for folks with
significant database backgrounds is that the fields in a Lucene document are
only related to those of any other document by the meaning you, as a
programmer, understand. That is, document 1 may have fields a, b, c.
Document 2 may have fields b, e, g. There is no requirement that, in this
example, document 1 has fields e and g for instance. and vice-versa. In
other words, Lucene documents don't fit into a table model.

The reason I mention that is that I'm extremely leery of packing data in a
field that really doesn't belong together. Plus, your searching becomes more
complicated.

In your example above, what happens if the file name and image are similar
enough to produce false hits? Whereas if you stored them as separate fields
in a document, you don't have this kind of problem.

So, if you can cleverly de-normalize your data in such a way as to satisfy
all the searches you'll ever want to perform, you can store it all in a
Lucene index and be happy. If you can't, you could use Lucene to search the
parts you *do* care about and store the rest in a database. Or, you could
just use a database. I believe it all hinges on whether you have a fixed set
of queries you can anticipate (and thus reflect in a Lucene index) or not.

Best
Erick

On 11/2/06, Rajesh parab <rajesh_parab_1@yahoo.com> wrote:
>
> Thanks for feedback Chris.
>
> I agree with you. The data set should be flattened out to store inside
> Lucene index. The Folder-File was just an example. As you know, in
> relational database, we can have more complex relationships. I understand
> that this model may not work for deeper relationships.
>
> What I am mainly interested in is just one level deep relationship. But, I
> would like to search on the additional attributes of the related object. For
> example, in the relationship for Folder-File, I would like to use additional
> file attributes as search criteria along with file name while searching for
> folders.
>
> The way I see is having single filed for the related object and all its
> additional attributes and use some separator while capturing this data
> inside Lucene Field object. For example -
>
>             new Field("file", "abc.txt<sep>image");
>
> But, I am not quite sure if this model will work.
>
> BTW. I did not understand what you meant by the detached approach. Can you
> please elaborate?
>
> Regards,
> Rajesh
>
> ----- Original Message ----
> From: Chris Lu <chris.lu@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, November 2, 2006 7:57:46 PM
> Subject: Re: Modelling relational data in Lucene Index?
>
>
> For this specific question, you can create index on files, search
> files that of type image, and from matched files, find the unique
> directories(can be done in lucene or you can do it via java).
>
> Of course this does not scale to deeper relationships. Usually you do
> need to flattern the database objects in order to use lucene. It's
> just trading space for speed.
>
> I would prefer a detached approach instead of Hibernate or EJB's
> approach, which is kind of too tightly coupled with any system. How to
> rebuild if the index is corrupted, or you have a new Analyzer, or
> schema evolves? How to make it multi-thread safe?
>
> --
> Chris Lu
> -------------------------
> Instant Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
>
> On 11/2/06, Mark Miller <markrmiller@gmail.com> wrote:
> > Lucene is probably not the solution if you are looking for a relational
> > model. You should be using a database for that. If you want to combine
> > Lucene with a relational model, check out Hibernate and the new EJB
> > annotations that it supports...there is a cool little Lucene add-on that
> > lets you declare fields to be indexed (and how) with annotations.
> >
> > - Mark
> >
> > Rajesh parab wrote:
> > > Hi,
> > >
> > > As I understand, Lucene has a flat structure where you can define
> multiple fields inside the document. There is no relationship between any
> field.
> > >
> > > I would like to enable index based search for some of the components
> inside relational database. For exmaple, let say "Folder" Object. The Folder
> object can have relationship with File object. The File object, in turn, can
> have attributes like is image, is text file, etc. So, the stricture is
> > >
> > >     Folder -- > File
> > >              |
> > >              ------- > is image, is text file, ......
> > >
> > >
> > > I would like to enable a search to find a Folder with File of type
> image. How can we model such relational data inside Lucene index?
> > >
> > > Regards,
> > > Rajesh
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18888_30193825.1162563975031--

From java-user-return-24346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 14:40:05 2006
Return-Path: <java-user-return-24346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30902 invoked from network); 3 Nov 2006 14:40:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 14:40:05 -0000
Received: (qmail 11528 invoked by uid 500); 3 Nov 2006 14:40:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11486 invoked by uid 500); 3 Nov 2006 14:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11475 invoked by uid 99); 3 Nov 2006 14:40:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 06:40:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 06:39:54 -0800
Received: by nz-out-0102.google.com with SMTP id k1so323126nzf
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 06:39:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kkr3vIuOyRT9fMCGn56p3DCFVobnPtVEIwk4PBRiLQNqkclM/bb8Jm+m4VbqF4siDSre+4yMZOZWZBqbhYMZgybLGCJRruOTx7qACjz2N6O2FeeV+xyjOZf6fpioU81E2dSav6gSu9oaGnlESPOUQVdbTDoYO5aFu8ug1fY1kq0=
Received: by 10.65.219.11 with SMTP id w11mr788184qbq.1162564767417;
        Fri, 03 Nov 2006 06:39:27 -0800 (PST)
Received: by 10.65.22.5 with HTTP; Fri, 3 Nov 2006 06:39:26 -0800 (PST)
Message-ID: <48b038c60611030639k2fabf8f6vab614c7924510ae9@mail.gmail.com>
Date: Fri, 3 Nov 2006 09:39:26 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: for admins: mailing list like spam
In-Reply-To: <71caf8b50611030020u61367cc5h56834db033630a0a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22961_9626560.1162564766808"
References: <71caf8b50611030020u61367cc5h56834db033630a0a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22961_9626560.1162564766808
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> It will make mails list more easy to read (I am using gmail and I do
> not have client-side filters).


That is not true.

You can have labels, and, if you look at the top of the page, right beside
the  "Search the Web" button, you have a "create filter" link.

Patrick

------=_Part_22961_9626560.1162564766808--

From java-user-return-24347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 15:00:21 2006
Return-Path: <java-user-return-24347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37011 invoked from network); 3 Nov 2006 15:00:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 15:00:21 -0000
Received: (qmail 56980 invoked by uid 500); 3 Nov 2006 15:00:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56937 invoked by uid 500); 3 Nov 2006 15:00:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56888 invoked by uid 99); 3 Nov 2006 15:00:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 07:00:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 06:59:51 -0800
Received: from [192.168.1.99] (gate.marathonconsulting.com [69.38.225.18])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id kA3F06c19999
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 10:00:07 -0500
Message-ID: <454B594B.5050709@alias-i.com>
Date: Fri, 03 Nov 2006 09:59:23 -0500
From: Breck Baldwin <breck@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: experiences with lingpipe
References: <453C7D4F.2090502@uni-hd.de> <453D5740.4050005@alias-i.com> <453F86F0.5060101@uni-hd.de> <453FC61F.5010505@alias-i.com> <4549E64E.8010102@uni-hd.de>
In-Reply-To: <4549E64E.8010102@uni-hd.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org



Martin Braun wrote:
> Hi Breck,
> 
> i have tried your tutorial and built (hopefully) a successful
> SpellCheck.model File with
> 49M.
> My Lucene Index directory is 2,4G. When I try to read the Model with the
> readmodel function,
> i get an "Exception in thread "main" java.lang.OutOfMemoryError: Java
> heap space", though I started java with -Xms1024m -Xmx1024m.
> 
> How many RAM will I need for the Model (I only have 2 GB of physical
> RAM, and lucene's also using some memory).

You need to increase the memory for java. I think 32-bit jave is limited 
to a 1.3 gig heap but could be wrong. No heuristics at the tip of my 
fingers.

To make the spell checker smaller you can prune the tokens using the
pruneLM method in the TrainSpellChecker. Pruning the 1 counts should 
make a big difference and not hurt spelling too much (depends on how 
things are paramterized). Probably up to 5 counts won't matter.

Also look at my tuning tutorial that is in very rough shape but will
get you going on tuning at:

cvs -d:pserver:anonymous@alias-i.com:/usr/local/sandbox co 
querySpellCheckTuner

I will try to get another pass at it over the weekend.

b reck


> 
> Is there a "rule of thumb" to calculate the needed amount of memory of
> the model?
> 
> thanks in advance,
> 
> martin
> 
> 
> 
>>>>Tuning params dominate the performance space. A small beam (16 active
>>>>hypotheses) will be quite snappy (I have 200 queries/sec with a 32 beam.
>>>>over a 80 gig text collection that with some pruning was 5 gig in memory
>>>>running an 8 gram model)
>>>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 15:04:26 2006
Return-Path: <java-user-return-24348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38092 invoked from network); 3 Nov 2006 15:04:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 15:04:25 -0000
Received: (qmail 64530 invoked by uid 500); 3 Nov 2006 15:04:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64286 invoked by uid 500); 3 Nov 2006 15:04:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64271 invoked by uid 99); 3 Nov 2006 15:04:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 07:04:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 07:04:13 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 66d9_5107963a_6b4d_11db_8eb9_003048245df9;
	Fri, 03 Nov 2006 10:09:45 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: experiences with lingpipe
Date: Fri, 3 Nov 2006 10:03:06 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F07692362@tormail01.cihi.ca>
In-Reply-To: <454B594B.5050709@alias-i.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: experiences with lingpipe
Thread-Index: Acb/WMG+IacrzZ76QEicnYVapnPjPQAADjCg
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

> You need to increase the memory for java. I think 32-bit jave is
limited to a 1.3 gig heap but
> could be wrong. No heuristics at the tip of my fingers.

32-bit JVM under Linux/Windows. Solaris runs OK. Limit on the heap is
~1.7 - 1.8Gb.

-----Original Message-----
From: Breck Baldwin [mailto:breck@alias-i.com]=20
Sent: Friday, November 03, 2006 9:59 AM
To: java-user@lucene.apache.org
Subject: Re: experiences with lingpipe



Martin Braun wrote:
> Hi Breck,
>=20
> i have tried your tutorial and built (hopefully) a successful=20
> SpellCheck.model File with 49M.
> My Lucene Index directory is 2,4G. When I try to read the Model with=20
> the readmodel function, i get an "Exception in thread "main"=20
> java.lang.OutOfMemoryError: Java heap space", though I started java=20
> with -Xms1024m -Xmx1024m.
>=20
> How many RAM will I need for the Model (I only have 2 GB of physical=20
> RAM, and lucene's also using some memory).

You need to increase the memory for java. I think 32-bit jave is limited
to a 1.3 gig heap but could be wrong. No heuristics at the tip of my
fingers.

To make the spell checker smaller you can prune the tokens using the
pruneLM method in the TrainSpellChecker. Pruning the 1 counts should
make a big difference and not hurt spelling too much (depends on how
things are paramterized). Probably up to 5 counts won't matter.

Also look at my tuning tutorial that is in very rough shape but will get
you going on tuning at:

cvs -d:pserver:anonymous@alias-i.com:/usr/local/sandbox co
querySpellCheckTuner

I will try to get another pass at it over the weekend.

b reck


>=20
> Is there a "rule of thumb" to calculate the needed amount of memory of

> the model?
>=20
> thanks in advance,
>=20
> martin
>=20
>=20
>=20
>>>>Tuning params dominate the performance space. A small beam (16=20
>>>>active
>>>>hypotheses) will be quite snappy (I have 200 queries/sec with a 32
beam.
>>>>over a 80 gig text collection that with some pruning was 5 gig in=20
>>>>memory running an 8 gram model)
>>>>
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 15:15:57 2006
Return-Path: <java-user-return-24349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41461 invoked from network); 3 Nov 2006 15:15:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 15:15:55 -0000
Received: (qmail 1386 invoked by uid 500); 3 Nov 2006 15:16:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1347 invoked by uid 500); 3 Nov 2006 15:15:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1333 invoked by uid 99); 3 Nov 2006 15:15:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 07:15:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 07:15:42 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 7a95_ef7dee58_6b4e_11db_864c_003048245df9;
	Fri, 03 Nov 2006 10:21:13 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Any experience with spring's lucene support?
Date: Fri, 3 Nov 2006 10:14:45 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F07692382@tormail01.cihi.ca>
In-Reply-To: <a218b3050611022235x21b16e81rcdd0f41324515276@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Any experience with spring's lucene support?
Thread-Index: Acb/Ek8s3LfgXMtaSnqvcvnOzckQDgAR7aZw
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Haven't used them, but had a look at them some time ago. Seems like a
nice set of helper factory classes to manage Lucene engine through
Spring IoC. Can't do much wrong in here I guess... If you'd be using
Spring in your app, you'd have to come up with similar factories either
way, so probably it'd make sense to reuse the ones in springmodules. The
only 'non-factory' classes I noticed is 'DB indexing'. The only problem
(from my estimations) is that the DB Access layer is fixed to Spring SQL
classes (ie, you probably wouldn't be able to use iBatis or Hibernate
easily).

As to compass, probably these guys have similar Spring classes as well
as some other stuff. One person on the list used it (Compass) in
production environment and says he's quite happy with it.

But generally, it's probably worthwhile to go to SpringModules forum and
Compass forum accordingly for more info...

Vlad

-----Original Message-----
From: lude [mailto:lucene.developer@googlemail.com]=20
Sent: Friday, November 03, 2006 1:36 AM
To: java-user
Subject: Re: Any experience with spring's lucene support?

Nobody here, who is using spring-modules?

On 11/1/06, lude <lucene.developer@googlemail.com> wrote:
>
> Hello,
>
> while starting a new project we are thinking about using the=20
> spring-modules for working with lucene. See:
> https://springmodules.dev.java.net/
>
> Does anybody has experience with this higher level lucene API?
> How does it compare to Compass?
> (Dis-)Advantages of using spring-modules lucene support?
>
> Thanks
> lude
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 16:01:40 2006
Return-Path: <java-user-return-24350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54540 invoked from network); 3 Nov 2006 16:01:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 16:01:39 -0000
Received: (qmail 99812 invoked by uid 500); 3 Nov 2006 16:01:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99786 invoked by uid 500); 3 Nov 2006 16:01:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99764 invoked by uid 99); 3 Nov 2006 16:01:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 08:01:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of rosherd@googlemail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO nz-out-0102.google.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 08:01:23 -0800
Received: by nz-out-0102.google.com with SMTP id k1so341365nzf
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 08:01:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=HjGLSSzFGOfV0g6TraXybbv7H5By5pWXN2kStqkoUTGtwAlAhvH8ezHYTrZotziprCkY3LlB0/TZfQ4RaMbIWmIvo2TjDeki6+mXdoEtixzewtJLBlTOb9Yla6shOY3S2Gzg/3etZmeQnq8xfcl0iYSBM67d/7DQybjifMC4yVE=
Received: by 10.65.159.2 with SMTP id l2mr899293qbo.1162569662274;
        Fri, 03 Nov 2006 08:01:02 -0800 (PST)
Received: by 10.65.185.18 with HTTP; Fri, 3 Nov 2006 08:01:02 -0800 (PST)
Message-ID: <1c36b0de0611030801u320dff57k1a470eb93c239441@mail.gmail.com>
Date: Fri, 3 Nov 2006 16:01:02 +0000
From: "Daniel Rosher" <rosherd@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15432_2804422.1162569662229"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_15432_2804422.1162569662229
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Peter,

Does this mean you are calculating the euclidean distance twice ... once for
the HitCollecter to filter
'out of range' documents, and then again for the custom Comparator to sort
the returned documents?
especially since the filtering is done outside Lucene?

Regards,
Dan


>Joe,
>
>Fields with numeric values are stored in a separate file as binary values
in
>an internal format. Lucene is unaware of this file and unaware of the range
>expression in the query. The range expression is parsed outside of Lucene
>and used in a custom HitCollector to filter out documents that aren't in
the
>requested range(s). A goal was to do this without having to modify Lucene.
>Our scheme is pretty efficient, but not very general purpose in its current
>form, though.
>
>Peter
>
>
>On 10/30/06, Joe Shaw <joeshaw@novell.com> wrote:
>>
>> Hi Peter,
>>
>> On Fri, 2006-10-27 at 15:29 -0400, Peter Keegan wrote:
>> > Numeric range search is one of Lucene's weak points (performance-wise)
>> so we
>> > have implemented this with a custom HitCollector and an extension to
the
>> > Lucene index files that stores the numeric field values for all
>> documents.
>> >
>> > It is important to point out that this has all been implemented with
the
>> > stock Lucene 2.0 library. No code changes were made to the Lucene core.
>>
>> Can you give some technical details on the extension to the Lucene index
>> files?  How did you do it without making any changes to the Lucene core?
>>
>> Thanks,
>> Joe
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

------=_Part_15432_2804422.1162569662229--

From java-user-return-24351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 16:37:10 2006
Return-Path: <java-user-return-24351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64414 invoked from network); 3 Nov 2006 16:37:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 16:37:09 -0000
Received: (qmail 82129 invoked by uid 500); 3 Nov 2006 16:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82098 invoked by uid 500); 3 Nov 2006 16:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82087 invoked by uid 99); 3 Nov 2006 16:37:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 08:37:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.159.88.170] (HELO ns1.hauk-sasko-backup.de) (62.159.88.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 08:36:58 -0800
Received: (from mail@localhost)
	by ns1.hauk-sasko-backup.de (8.9.3/8.9.3) id RAA25830
	for java-user@lucene.apache.org.KAV; Fri, 3 Nov 2006 17:36:32 +0100
Received: (from mail@localhost)
	by ns1.hauk-sasko-backup.de (8.9.3/8.9.3) id RAA25824
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 17:36:31 +0100
Received: from UNKNOWN(172.19.1.103), claiming to be "homer.hauk-sasko.de"
 via SMTP by ns1, id smtpdgnjIM0; Fri Nov  3 17:36:01 2006
Received: from core1 (localhost [127.0.0.1])
	by localhost (Postfix) with SMTP id 99492438D
	for <java-user@lucene.apache.org>; Fri,  3 Nov 2006 17:35:48 +0100 (CET)
Received: by homer.hauk-sasko.de (Postfix, from userid 1050)
	id 7A7AC438C; Fri,  3 Nov 2006 17:35:48 +0100 (CET)
Received: from [172.19.3.123] (lx-el.hauk-sasko.de [172.19.3.123])
	by homer.hauk-sasko.de (Postfix) with ESMTP id 5EDF5AF
	for <java-user@lucene.apache.org>; Fri,  3 Nov 2006 17:35:48 +0100 (CET)
Message-ID: <454B6FE4.4090607@hauk-sasko.de>
Date: Fri, 03 Nov 2006 17:35:48 +0100
From: Eric Louvard <eric.louvard@hauk-sasko.de>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: fr-fr, de-de, en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: TooManyClauses with MultiTermQueries
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Sanitizer: This message has been sanitized!
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by ns1.hauk-sasko-backup.de id RAA25824
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-105.9 required=4.0
	tests=BAYES_01,SIGNATURE_LONG_SPARSE,USER_AGENT_MOZILLA_UA,
	      USER_IN_WHITELIST
	version=2.55

Hello, in working with Lucene since several years.
One of my biggest problem was the unability of lucene to search with 
wildcard. Also I have develop my own MultiTermQueries.

Now there's a standard class for this, but you'll allways become an 
exception if your search is to generic, 'a*' for exemple.
I can't solve this problem, but I making it acceptable with the follwing 
allgorithm:
- getting all possible terms.
- sort them (actualy with the length difference beetween search term (if 
you search 'TooMany*' then 'TooManyDog' has a better range than 
'TooManyClauses')).
- get the allowed (I want my BooleanQuery not to overwrite 100 terms for 
example).
- search this.

 for this Query I can call call:
.getWarnnigs() give me a string with a description of the limitation 
("Have found 265654 terms for you search please be more precise.")
.getTermsList() the list of all searched terms (usefull too for the user).

So I can allways have a result. Mostly, with the sorting I am getting 
the searched term (You can use another sort). I can limit maxClauseCount 
to few values (avoid out of memory and better performance).

Hope this can help someone. I think it would be a nice feature to 
implements in lucene.


PS: sorry for my poor english.

-- 
Mit freundlichen Grüßen

i. A. Éric Louvard
HAUK & SASKO Ingenieurgesellschaft mbH
Zettachring 2
D-70567 Stuttgart

Phone: +49 7 11 7 25 89 - 19
Fax: +49 7 11 7 25 89 - 50
E-Mail: eric.louvard@hauk-sasko.de
www: www.hauk-sasko.de





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 17:22:00 2006
Return-Path: <java-user-return-24352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78131 invoked from network); 3 Nov 2006 17:21:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 17:21:58 -0000
Received: (qmail 93396 invoked by uid 500); 3 Nov 2006 17:22:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93350 invoked by uid 500); 3 Nov 2006 17:22:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93339 invoked by uid 99); 3 Nov 2006 17:22:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 09:22:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.164.102.196] (HELO mail.gotuit.com) (216.164.102.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 09:21:47 -0800
x-mimeole: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6FF6C.7D6BBCE9"
Subject: Multi valued fields
Date: Fri, 3 Nov 2006 12:21:24 -0500
Message-ID: <586B46B62C73C44AA8F4302E01A84A8405A02F@exchange.gotuit.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Multi valued fields
Thread-Index: Acb/bH0Zp6Zqs8ZtThmoL067QfKSWA==
From: "Seeta Somagani" <seeta@gotuit.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C6FF6C.7D6BBCE9
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi all,

=20

Our company has a set of assets and we use meta-data (XML files) to
describe each asset. My job is to index and search over the meta-data
associated with the assets. The interesting aspect of my problem is that
an asset can have more than one meta-data file associated with it,
depending on the context that the asset lies in. The search result must
display an asset only once. If more than one meta-data associated with
it match the search query, we need to display the different meta-data
associated with the asset in order of relevance as part of one hit to be
able to show the user the various contexts that this asset occurs in.=20

=20

My first idea was to index each meta-data file into its own document and
merge the documents with the same asset_id on search. But, there are
hundreds of thousands of meta-data and the search results can run into
hundreds.=20

=20

My next idea was to index all the meta-data associated with an asset
into multi-valued fields. But, I cannot see a way to rank within the
multi-valued fields.=20

=20

Another crazy idea that crossed my mind - how about building a separate
index that indexes document ids of the documents associated with an
asset, so that I can look it up to merge the hits?

=20

Any thoughts?

=20

Seeta


------_=_NextPart_001_01C6FF6C.7D6BBCE9--

From java-user-return-24353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 18:55:36 2006
Return-Path: <java-user-return-24353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6380 invoked from network); 3 Nov 2006 18:55:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 18:55:36 -0000
Received: (qmail 83701 invoked by uid 500); 3 Nov 2006 18:55:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83675 invoked by uid 500); 3 Nov 2006 18:55:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83644 invoked by uid 99); 3 Nov 2006 18:55:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 10:55:39 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 10:55:26 -0800
Received: by ug-out-1314.google.com with SMTP id k40so505932ugc
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 10:55:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ilE9VzmEexF615rGfmiNKhQnOuSPAEASaGsXRWNn3//mk0LRAMwWQOxaJ0gcGIinZtUMYipq4CKDhGCSX6eDT/xEUGZ6sfXoF5sP3yHtA0TwiPsWgKuN/2+MPQpizQ2WwQ9Tj4HOZxc5/77Uy7/Gv+5xUQ9eSL3mb5idPUlU0T4=
Received: by 10.67.97.18 with SMTP id z18mr3188546ugl.1162580104927;
        Fri, 03 Nov 2006 10:55:04 -0800 (PST)
Received: by 10.66.239.7 with HTTP; Fri, 3 Nov 2006 10:55:04 -0800 (PST)
Message-ID: <e994873a0611031055p13d42526l8fef768f6503cc50@mail.gmail.com>
Date: Fri, 3 Nov 2006 13:55:04 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <eic83k$hdo$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32501_5204854.1162580104774"
References: <e994873a0610271229x43e96da7ldb86c24bbe4fba4f@mail.gmail.com>
	 <1162223166.9917.4.camel@posthaste.boston.ximian.com>
	 <e994873a0610300831p1229ad0k69de63cba052bd22@mail.gmail.com>
	 <eic83k$hdo$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32501_5204854.1162580104774
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Paramasivam,

Take a look at Solr, in particular the DocSetHitCollector class. The
collector simply sets a bit in a BitSet, or saves the docIds in an array
(for low hit counts). Solr's BitSet was optimized (by Yonik, I believe) to
be faster than Java's BitSet, so this HitCollector is very fast. This is
essentially what we are doing for counting.

Peter

On 11/2/06, Paramasivam Srinivasan <sri@indicus.net> wrote:
>
> Hi Peter
>
> When I use the CustomHitCollector, it affect the application performance.
> Also how you accomplish the grouping the results with out affecting
> performance. Also If possible give some code snippet for custome
> hitcollector.
>
> TIA
>
> Sri
>
> "Peter Keegan" <peterlkeegan@gmail.com> wrote in message
> news:e994873a0610300831p1229ad0k69de63cba052bd22@mail.gmail.com...
> > Joe,
> >
> > Fields with numeric values are stored in a separate file as binary
> values
> > in
> > an internal format. Lucene is unaware of this file and unaware of the
> > range
> > expression in the query. The range expression is parsed outside of
> Lucene
> > and used in a custom HitCollector to filter out documents that aren't in
> > the
> > requested range(s). A goal was to do this without having to modify
> Lucene.
> > Our scheme is pretty efficient, but not very general purpose in its
> > current
> > form, though.
> >
> > Peter
> >
> >
> > On 10/30/06, Joe Shaw <joeshaw@novell.com> wrote:
> >>
> >> Hi Peter,
> >>
> >> On Fri, 2006-10-27 at 15:29 -0400, Peter Keegan wrote:
> >> > Numeric range search is one of Lucene's weak points
> (performance-wise)
> >> so we
> >> > have implemented this with a custom HitCollector and an extension to
> >> > the
> >> > Lucene index files that stores the numeric field values for all
> >> documents.
> >> >
> >> > It is important to point out that this has all been implemented with
> >> > the
> >> > stock Lucene 2.0 library. No code changes were made to the Lucene
> core.
> >>
> >> Can you give some technical details on the extension to the Lucene
> index
> >> files?  How did you do it without making any changes to the Lucene
> core?
> >>
> >> Thanks,
> >> Joe
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_32501_5204854.1162580104774--

From java-user-return-24354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 18:56:39 2006
Return-Path: <java-user-return-24354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6576 invoked from network); 3 Nov 2006 18:56:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 18:56:38 -0000
Received: (qmail 85948 invoked by uid 500); 3 Nov 2006 18:56:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85920 invoked by uid 500); 3 Nov 2006 18:56:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85909 invoked by uid 99); 3 Nov 2006 18:56:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 10:56:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 10:56:28 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.8/8.13.8) with ESMTP id kA3Iu6bg325496
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 18:56:06 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kA3Ix4mp3174468
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 19:59:04 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kA3Iu5WP000567
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 19:56:05 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kA3Iu58p000564
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 19:56:05 +0100
In-Reply-To: <7153721.post@talk.nabble.com>
Subject: Re: search within search
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF1A3794E1.3F1D12FA-ON8825721B.0063AF58-8825721B.00653BF8@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 3 Nov 2006 10:25:44 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 03/11/2006 20:59:03
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

spinergywmy <spinergywmy@gmail.com> wrote on 03/11/2006 00:40:42:

>    I have another problem is I do not perform the real search within
search
> feature which according to the way that I have coded, because for the
second
> time searching, I actually go back to the index directory to search the
> entire indeces again rather then cached the first time search result.
>
>    How can I solve this problem? Do I need to use queryFilter and
> reconstruct the codes again, and that is time consuming, is there any how
I
> can get it done without reconstruct. Or do I need to use bitSet within my
> existing codes.

This was the recommendation you got on this in the list (forgot who it
was): submit query1 ANDed with query2. True, this is searching again the
"entire" index. In particular, it is re-doing work already done for query1.
However this is the simplest approach, with equivalent results. Unless you
are facing performance problems this should be sufficient.

If however, you are facing performance issues, say, if the queries are very
large, and the index is large as well, and you have more than 2 stages
(search within (search within (search within search (...)))), and
resubmitting a larger and larger boolean query is out of the question - you
can go with the filter approach. For this you can use your hit collector,
which, while query1 is processed, would populate a bitset to be used for a
filter for query2, should that be requested by the user. But I wouldn't go
there if I don't have to.

Doron



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 18:57:25 2006
Return-Path: <java-user-return-24355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6872 invoked from network); 3 Nov 2006 18:57:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 18:57:24 -0000
Received: (qmail 90159 invoked by uid 500); 3 Nov 2006 18:57:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90127 invoked by uid 500); 3 Nov 2006 18:57:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90107 invoked by uid 99); 3 Nov 2006 18:57:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 10:57:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of peterlkeegan@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 10:57:15 -0800
Received: by ug-out-1314.google.com with SMTP id k40so506349ugc
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 10:56:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YkDSWzDqwQi7KPGzDWgpeZlt2xiQpBJoX1l+8q+M98p8XMBkDsLuEfybBBsHzKNxmUCWkuVqsK2KBC364jv9/41RGxtkmnRbUadMo23MWlFSwosOq+14H7Q9FMJc5w98OWCkJ39QEFMb71QZzwWVsOtHEk9qgPWZBMnjMpMhajc=
Received: by 10.67.101.10 with SMTP id d10mr3187768ugm.1162580213266;
        Fri, 03 Nov 2006 10:56:53 -0800 (PST)
Received: by 10.66.239.7 with HTTP; Fri, 3 Nov 2006 10:56:53 -0800 (PST)
Message-ID: <e994873a0611031056wc507d8ds213d0c8115b576bd@mail.gmail.com>
Date: Fri, 3 Nov 2006 13:56:53 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Announcement: Lucene powering Monster job search index (Beta)
In-Reply-To: <1c36b0de0611030801u320dff57k1a470eb93c239441@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32533_968963.1162580213162"
References: <1c36b0de0611030801u320dff57k1a470eb93c239441@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32533_968963.1162580213162
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Daniel,
Yes, this is correct if you happen to be doing a radius search and sorting
by mileage.
Peter

On 11/3/06, Daniel Rosher <rosherd@googlemail.com> wrote:
>
> Hi Peter,
>
> Does this mean you are calculating the euclidean distance twice ... once
> for
> the HitCollecter to filter
> 'out of range' documents, and then again for the custom Comparator to sort
> the returned documents?
> especially since the filtering is done outside Lucene?
>
> Regards,
> Dan
>
>
> >Joe,
> >
> >Fields with numeric values are stored in a separate file as binary values
> in
> >an internal format. Lucene is unaware of this file and unaware of the
> range
> >expression in the query. The range expression is parsed outside of Lucene
> >and used in a custom HitCollector to filter out documents that aren't in
> the
> >requested range(s). A goal was to do this without having to modify
> Lucene.
> >Our scheme is pretty efficient, but not very general purpose in its
> current
> >form, though.
> >
> >Peter
> >
> >
> >On 10/30/06, Joe Shaw <joeshaw@novell.com> wrote:
> >>
> >> Hi Peter,
> >>
> >> On Fri, 2006-10-27 at 15:29 -0400, Peter Keegan wrote:
> >> > Numeric range search is one of Lucene's weak points
> (performance-wise)
> >> so we
> >> > have implemented this with a custom HitCollector and an extension to
> the
> >> > Lucene index files that stores the numeric field values for all
> >> documents.
> >> >
> >> > It is important to point out that this has all been implemented with
> the
> >> > stock Lucene 2.0 library. No code changes were made to the Lucene
> core.
> >>
> >> Can you give some technical details on the extension to the Lucene
> index
> >> files?  How did you do it without making any changes to the Lucene
> core?
> >>
> >> Thanks,
> >> Joe
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
>
>

------=_Part_32533_968963.1162580213162--

From java-user-return-24356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 19:08:31 2006
Return-Path: <java-user-return-24356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10534 invoked from network); 3 Nov 2006 19:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:08:31 -0000
Received: (qmail 12013 invoked by uid 500); 3 Nov 2006 19:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11983 invoked by uid 500); 3 Nov 2006 19:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11968 invoked by uid 99); 3 Nov 2006 19:08:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:08:25 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 065AE5B782; Fri,  3 Nov 2006 11:07:15 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 037D07F403
	for <java-user@lucene.apache.org>; Fri,  3 Nov 2006 11:07:15 -0800 (PST)
Date: Fri, 3 Nov 2006 11:07:14 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to get Term Weights (document term matrix)?
In-Reply-To: <4549DA5A.90905@gmx.de>
Message-ID: <Pine.LNX.4.58.0611031106340.30415@hal.rescomp.berkeley.edu>
References: <4549DA5A.90905@gmx.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org


I don't really know what a "term matrix" is, but when you ask about
"weight' is it possible you are just looking for the TermDoc.freq() of the
term/doc pair?


: Date: Thu, 02 Nov 2006 12:45:30 +0100
: From: Soeren Pekrul <soeren.pekrul@gmx.de>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: How to get Term Weights (document term matrix)?
:
: Hello,
:
: I would like to extract and store the document term matrix externally. I
: iterate the terms and the documents for each term:
: TermEnum terms=3DIndexReader.terms();
: while(terms.next()) {
: =09TermDocs docs=3DIndexReader.termDocs(terms.term());
: =09while(docs.next()) {
: =09=09//store the term, the document and the weight
: =09}
: }
:
: How can I get the term weight for a document?
:
: Thanks. S=F6ren
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 19:08:41 2006
Return-Path: <java-user-return-24357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10690 invoked from network); 3 Nov 2006 19:08:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:08:40 -0000
Received: (qmail 12340 invoked by uid 500); 3 Nov 2006 19:08:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12287 invoked by uid 500); 3 Nov 2006 19:08:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12225 invoked by uid 99); 3 Nov 2006 19:08:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:08:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ben.dotte@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO nz-out-0102.google.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:07:58 -0800
Received: by nz-out-0102.google.com with SMTP id k1so380416nzf
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 11:07:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Xil41hvn8uSLgidCqivWMPLG+0EnQ1YRz5rIkwgM5o3rZiTrqVfqUOlc+xRtpenMkTn9Z0meQC3CGoqyzOGe6z1fY+5YNnOj4lwCEylkdh8DcTQwsls52rR8muwKUrjtR1/1nBBOGWR0jkt8+Dt7urP89Qwmzd+Dznfx3NraOOk=
Received: by 10.65.43.5 with SMTP id v5mr1238412qbj.1162580844065;
        Fri, 03 Nov 2006 11:07:24 -0800 (PST)
Received: by 10.65.145.3 with HTTP; Fri, 3 Nov 2006 11:07:23 -0800 (PST)
Message-ID: <8a29e7880611031107r69dbb0bbw1bb3d20b1819bc3c@mail.gmail.com>
Date: Fri, 3 Nov 2006 13:07:23 -0600
From: "Ben Dotte" <ben.dotte@gmail.com>
To: java-user@lucene.apache.org
Subject: Intermittent search performance problem
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm trying to figure out a way to troubleshoot a performance problem
we're seeing when searching against a memory-based index. What happens
is we will run a search against the index and it generally returns in
1 second or less. But every once in a while it takes 15-20 seconds for
the exact same search for no apparent reason. There is nothing else
going on in the system to cause this behavior.

I have tried hooking up YourKit profiler to see where the time is
going but it doesn't even record the extra time being taken up, even
when I ask for method invocation counts.

This is very strange, we have been using Lucene for years in
production and I've never seen a problem like it. It is also only
exhibited in one particular index, we cannot reproduce the problem
with other indexes. This index has around 170,000 documents in it and
does not have a particularly large amount of data relative to our
other indexes.

I would really appreciate any suggestions for tracking down the
culprit. Since YourKit is missing the extra time it seems like some
sort of lock/synchronized method issue but I've only really seen that
type of problem using disk indexing when the indexes aren't optimized.
We're currently on Lucene 2.0 but I had the same problem with 1.9.1.

Thanks,
Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 19:20:33 2006
Return-Path: <java-user-return-24358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14451 invoked from network); 3 Nov 2006 19:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:20:30 -0000
Received: (qmail 35656 invoked by uid 500); 3 Nov 2006 19:20:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35310 invoked by uid 500); 3 Nov 2006 19:20:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35299 invoked by uid 99); 3 Nov 2006 19:20:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:20:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.113.241.148] (HELO iss04.interliant.com) (207.113.241.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:20:18 -0800
Received: from EX-008.mail.navisite.com (ex-008.interliant.com [207.113.240.188])
	by iss04.interliant.com (8.10.2/8.10.2) with ESMTP id kA3JJt004568
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 13:19:57 -0600 (CST)
Received: from [10.1.8.74] ([65.244.175.131]) by EX-008.mail.navisite.com over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 3 Nov 2006 13:19:50 -0600
Message-ID: <454B964B.3090606@hibernate.org>
Date: Fri, 03 Nov 2006 14:19:39 -0500
From: Emmanuel Bernard <emmanuel@hibernate.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Modelling relational data in Lucene Index?
References: <20061103035023.10371.qmail@web52002.mail.yahoo.com>
In-Reply-To: <20061103035023.10371.qmail@web52002.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 03 Nov 2006 19:19:50.0509 (UTC) FILETIME=[087DB9D0:01C6FF7D]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi
No, he is talking about
http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html

Also note that I'm about to release a new version much more flexible
http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
and for the future (but flexible)
http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00393.html

Note that Compass is an alternative approach. I haven't really looked at 
the project in detail, the main drawback for me and some other people 
who compared the 2 were
 - it requires you to deal with a different API than your ORM
 - it does not give you back a managed (ORM) object on query results
 - it abstracts quite a lot Lucene

I guess you need to check by yourself

Emmanuel

Rajesh parab wrote:
> Thanks Mark.
>
> Can you please tell me more about the Lucene add-on you are talking about? Are you talking about Compass?
>
> Regards,
> Rajesh
>
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, November 2, 2006 7:29:10 PM
> Subject: Re: Modelling relational data in Lucene Index?
>
> Lucene is probably not the solution if you are looking for a relational 
> model. You should be using a database for that. If you want to combine 
> Lucene with a relational model, check out Hibernate and the new EJB 
> annotations that it supports...there is a cool little Lucene add-on that 
> lets you declare fields to be indexed (and how) with annotations.
>
> - Mark
>
> Rajesh parab wrote:
>   
>> Hi,
>>
>> As I understand, Lucene has a flat structure where you can define multiple fields inside the document. There is no relationship between any field.
>>
>> I would like to enable index based search for some of the components inside relational database. For exmaple, let say "Folder" Object. The Folder object can have relationship with File object. The File object, in turn, can have attributes like is image, is text file, etc. So, the stricture is 
>>     
>>     Folder -- > File
>>              |
>>              ------- > is image, is text file, ......
>>
>>
>> I would like to enable a search to find a Folder with File of type image. How can we model such relational data inside Lucene index?
>>
>> Regards,
>> Rajesh
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>   
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 19:28:06 2006
Return-Path: <java-user-return-24359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16773 invoked from network); 3 Nov 2006 19:28:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:28:05 -0000
Received: (qmail 52944 invoked by uid 500); 3 Nov 2006 19:28:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52924 invoked by uid 500); 3 Nov 2006 19:28:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52913 invoked by uid 99); 3 Nov 2006 19:28:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:28:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mike.klaas@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:27:54 -0800
Received: by ug-out-1314.google.com with SMTP id k40so513391ugc
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 11:27:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jafyTI0199Bjt2653itaC5Jy3Cc7FJN2DgBjpAUWoEqO4DvOYrcvJ9Qot03JdBg4wUoUYBlV1qvdIa1jA3e5SytefTmKuTyxJ7m030rcNvlxM7wAB6C7UqMaN87jWvHPToe2xGTRwdfdnhE0GiZmZlZkxlmMztPGdBKQA4MTRQ4=
Received: by 10.78.178.5 with SMTP id a5mr3338272huf.1162582053495;
        Fri, 03 Nov 2006 11:27:33 -0800 (PST)
Received: by 10.78.203.10 with HTTP; Fri, 3 Nov 2006 11:27:32 -0800 (PST)
Message-ID: <3d2ce8cb0611031127t5791754dnb13d036b588f8404@mail.gmail.com>
Date: Fri, 3 Nov 2006 11:27:33 -0800
From: "Mike Klaas" <mike.klaas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re: for admins: mailing list like spam
In-Reply-To: <48b038c60611030639k2fabf8f6vab614c7924510ae9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <71caf8b50611030020u61367cc5h56834db033630a0a@mail.gmail.com>
	 <48b038c60611030639k2fabf8f6vab614c7924510ae9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/3/06, Patrick Turcotte <patrek@gmail.com> wrote:
> >
> > It will make mails list more easy to read (I am using gmail and I do
> > not have client-side filters).
>
>
> That is not true.
>
> You can have labels, and, if you look at the top of the page, right beside
> the  "Search the Web" button, you have a "create filter" link.

"Skip Inbox" is particularly important when doing this.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 19:30:52 2006
Return-Path: <java-user-return-24360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17716 invoked from network); 3 Nov 2006 19:30:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:30:51 -0000
Received: (qmail 59538 invoked by uid 500); 3 Nov 2006 19:30:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59504 invoked by uid 500); 3 Nov 2006 19:30:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59484 invoked by uid 99); 3 Nov 2006 19:30:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:30:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.113.241.148] (HELO iss04.interliant.com) (207.113.241.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:30:31 -0800
Received: from EX-008.mail.navisite.com (ex-008.interliant.com [207.113.240.188])
	by iss04.interliant.com (8.10.2/8.10.2) with ESMTP id kA3JUA009446
	for <java-user@lucene.apache.org>; Fri, 3 Nov 2006 13:30:10 -0600 (CST)
Received: from [10.1.8.74] ([65.244.175.131]) by EX-008.mail.navisite.com over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 3 Nov 2006 13:29:02 -0600
Message-ID: <454B9873.80703@hibernate.org>
Date: Fri, 03 Nov 2006 14:28:51 -0500
From: Emmanuel Bernard <emmanuel@hibernate.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Modelling relational data in Lucene Index?
References: <20061103030334.2310.qmail@web52009.mail.yahoo.com>	 <454AB786.4030402@gmail.com> <6e3ae6310611021957o137b3b44ka72a55613f5a4b41@mail.gmail.com>
In-Reply-To: <6e3ae6310611021957o137b3b44ka72a55613f5a4b41@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 03 Nov 2006 19:29:02.0386 (UTC) FILETIME=[516F7920:01C6FF7E]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
What exactly are your concerned about the "non-detached" approach (see 
below)?

Chris Lu wrote:
>
> I would prefer a detached approach instead of Hibernate or EJB's
> approach, which is kind of too tightly coupled with any system. How to
it is probably going to be couple with yours ;-)
> rebuild if the index is corrupted, or you have a new Analyzer, or
I've introduced a session.index() which forces the (re)indexing of the 
document
> schema evolves? How to make it multi-thread safe?
What do you mean by multithread safe? The indexing?
the indexing is multithread safe in the Hibernate Lucene integration

The query process?
the query doesn't have to since you query on a give session (aka user 
conversation), so no multithread threat here.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 19:50:50 2006
Return-Path: <java-user-return-24361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22859 invoked from network); 3 Nov 2006 19:50:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 19:50:49 -0000
Received: (qmail 6931 invoked by uid 500); 3 Nov 2006 19:50:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6901 invoked by uid 500); 3 Nov 2006 19:50:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6888 invoked by uid 99); 3 Nov 2006 19:50:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:50:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 11:50:39 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7AE405B77D; Fri,  3 Nov 2006 11:50:19 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7789E7F403
	for <java-user@lucene.apache.org>; Fri,  3 Nov 2006 11:50:19 -0800 (PST)
Date: Fri, 3 Nov 2006 11:50:19 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Suspected problem in the QueryParser
In-Reply-To: <882004010611030553k15335c0di2abb1798135bbe31@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0611031144560.30415@hal.rescomp.berkeley.edu>
References: <882004010611030553k15335c0di2abb1798135bbe31@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: When I enter the query: "Table AND NOT Chair"  I get one hit, doc3
: When I enter the query: "Table AND (NOT Chair)" I get 0 hits.
:
: I had thought that both queries would return the same results.  Is this a
: bug, or, am I not understanding the query language correctly?

it's a confusing eccentricity of the QueryParser syntax ... as a general
rule, thing in parens need to be self contained, effective, queries ... if
you have something in parens which would not make sense as a query by
itself, then it won't make any more sense as part of a larger query.

In your case, the query "  NOT Chair " is the problem ... you can't have
a negative clause in isolation by itself -- it doesn't make sense because
there isn't anything positively selecting results for you to then exclude
results from.


As a side not: i strongly encourage you to train yourself to think in
terms of MUST, MUST_NOT and SHOULD (which are represented in the query
parser as the prefixes "+", "-" and the default) instead of in terms of
AND, OR, and NOT ... Lucene's BooleanQuery (and thus Lucene's QueryParser)
is not a strict Boolean Logic system, so it's best not to try and think
of it like one.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 20:10:25 2006
Return-Path: <java-user-return-24362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27221 invoked from network); 3 Nov 2006 20:10:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 20:10:24 -0000
Received: (qmail 58543 invoked by uid 500); 3 Nov 2006 20:10:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58508 invoked by uid 500); 3 Nov 2006 20:10:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58490 invoked by uid 99); 3 Nov 2006 20:10:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 12:10:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 12:10:12 -0800
Received: by nf-out-0910.google.com with SMTP id n29so281617nfc
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 12:09:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Jr72dKcD/AH2xkGOMglbUk8WFlFKBoro1vLOWjOyqpLYNhmRyH026eRx1wjpPq9l+BXdiOEySPOcIlGEhne1M2QIVrdDN2zhnUqtiBxCKsmuC4QgPb8qAISNEYhvgO62Idr+nwQujM4VawxDZSlSKamZngfpEqGbWcUN6bEjCnI=
Received: by 10.82.107.15 with SMTP id f15mr875971buc.1162584590833;
        Fri, 03 Nov 2006 12:09:50 -0800 (PST)
Received: by 10.82.131.8 with HTTP; Fri, 3 Nov 2006 12:09:50 -0800 (PST)
Message-ID: <6e3ae6310611031209o8544a5dqa7134c3fdfb42c10@mail.gmail.com>
Date: Fri, 3 Nov 2006 12:09:50 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modelling relational data in Lucene Index?
In-Reply-To: <454B9873.80703@hibernate.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061103030334.2310.qmail@web52009.mail.yahoo.com>
	 <454AB786.4030402@gmail.com>
	 <6e3ae6310611021957o137b3b44ka72a55613f5a4b41@mail.gmail.com>
	 <454B9873.80703@hibernate.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I personally like your effort, but technically I would  disagree.

The SOLR project, and the project I am working on, DBSight, have an
detached approach which is implementation agnostic, no matter if it's
java, ruby, php, .net. The return results can be a rendered HTML,
JSON, XML. I don't think you can be more flexible than that. If
creating an new index takes 5 minutes without any coding, you can
create something more creative.

>From business side, you don't need to worry about indexing when
designing a system. New requirement may come. It's very hard trying to
anticipate all the needs.

Technically, detached approach gives more flexible on resources like
CPU, memory, hard drive. For example, if your index grows large, say
1G, indexing can take hours with merging, I am not sure how compass or
hibernate/lucene handles it. Need to re-write code at that time? I
actually feel it's a dangerous trap.

> I've introduced a session.index() which forces the (re)indexing of the
> document
So does it mean you need to write some code to fix the index if it's crashed?

> What do you mean by multithread safe? The indexing?
> the indexing is multithread safe in the Hibernate Lucene integration
The indexing can be threadsafe. But will it affect the searching? With
many files changing and merging, if you cache the searcher. the
searching will have "read passed EOF" exceptions. If you don't cache
the searcher, you will loose the built-in caching, FieldCacheImpl, in
Lucene.

>
> The query process?
> the query doesn't have to since you query on a give session (aka user
> conversation), so no multithread threat here.
So you are not caching searcher.

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 11/3/06, Emmanuel Bernard <emmanuel@hibernate.org> wrote:
> Hi,
> What exactly are your concerned about the "non-detached" approach (see
> below)?
>
> Chris Lu wrote:
> >
> > I would prefer a detached approach instead of Hibernate or EJB's
> > approach, which is kind of too tightly coupled with any system. How to
> it is probably going to be couple with yours ;-)
> > rebuild if the index is corrupted, or you have a new Analyzer, or
> I've introduced a session.index() which forces the (re)indexing of the
> document
> > schema evolves? How to make it multi-thread safe?
> What do you mean by multithread safe? The indexing?
> the indexing is multithread safe in the Hibernate Lucene integration
>
> The query process?
> the query doesn't have to since you query on a give session (aka user
> conversation), so no multithread threat here.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 20:19:39 2006
Return-Path: <java-user-return-24363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37102 invoked from network); 3 Nov 2006 20:19:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 20:19:39 -0000
Received: (qmail 79401 invoked by uid 500); 3 Nov 2006 20:19:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79377 invoked by uid 500); 3 Nov 2006 20:19:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79366 invoked by uid 99); 3 Nov 2006 20:19:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 12:19:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [66.35.230.4] (HELO mx1.funmail.com) (66.35.230.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 12:19:29 -0800
Received: from mail01.kittyhawk.funmail.com (mail01.kittyhawk.funmail.com [66.35.215.133])
	by mx1.funmail.com (Postfix) with ESMTP id A2F42A4226
	for <java-user@lucene.apache.org>; Fri,  3 Nov 2006 12:19:06 -0800 (PST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: TooManyClauses with MultiTermQueries
Date: Fri, 3 Nov 2006 12:19:08 -0800
Message-ID: <91C65A732E71A54ABD1F74F4C14D7D0201C49CF2@mail01.kittyhawk.funmail.com>
In-Reply-To: <454B6FE4.4090607@hauk-sasko.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: TooManyClauses with MultiTermQueries
thread-index: Acb/ZnXwfxNy8vzVQyipoOjEplH/MgAHsVOw
From: "Silvy Mathews" <smathews@funmobility.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All,
I also need to resolve this issue. What is the best way to catch this =
exception?
Thanks
Mathews

-----Original Message-----
From: Eric Louvard [mailto:eric.louvard@hauk-sasko.de]=20
Sent: Friday, November 03, 2006 8:36 AM
To: java-user@lucene.apache.org
Subject: TooManyClauses with MultiTermQueries

Hello, in working with Lucene since several years.
One of my biggest problem was the unability of lucene to search with=20
wildcard. Also I have develop my own MultiTermQueries.

Now there's a standard class for this, but you'll allways become an=20
exception if your search is to generic, 'a*' for exemple.
I can't solve this problem, but I making it acceptable with the follwing =

allgorithm:
- getting all possible terms.
- sort them (actualy with the length difference beetween search term (if =

you search 'TooMany*' then 'TooManyDog' has a better range than=20
'TooManyClauses')).
- get the allowed (I want my BooleanQuery not to overwrite 100 terms for =

example).
- search this.

 for this Query I can call call:
.getWarnnigs() give me a string with a description of the limitation=20
("Have found 265654 terms for you search please be more precise.")
.getTermsList() the list of all searched terms (usefull too for the =
user).

So I can allways have a result. Mostly, with the sorting I am getting=20
the searched term (You can use another sort). I can limit maxClauseCount =

to few values (avoid out of memory and better performance).

Hope this can help someone. I think it would be a nice feature to=20
implements in lucene.


PS: sorry for my poor english.

--=20
Mit freundlichen Gr=FC=DFen

i. A. =C9ric Louvard
HAUK & SASKO Ingenieurgesellschaft mbH
Zettachring 2
D-70567 Stuttgart

Phone: +49 7 11 7 25 89 - 19
Fax: +49 7 11 7 25 89 - 50
E-Mail: eric.louvard@hauk-sasko.de
www: www.hauk-sasko.de





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 21:25:15 2006
Return-Path: <java-user-return-24364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59607 invoked from network); 3 Nov 2006 21:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 21:25:14 -0000
Received: (qmail 13977 invoked by uid 500); 3 Nov 2006 21:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13945 invoked by uid 500); 3 Nov 2006 21:25:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13934 invoked by uid 99); 3 Nov 2006 21:25:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 13:25:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 13:25:04 -0800
Received: by nf-out-0910.google.com with SMTP id n29so301409nfc
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 13:24:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=IvvMw9TVW6lLwHfn8vZPCDJtOFaBhsyZg+sWplI+5yUr+P5feeQzSgdC3l/kLssd6YMuN+2JCqNIrTuJDMntcKyG8t5SwNFh0MF3NLmIO4Ws/tpXCTKyXoK/znLZi0uoMI17316esNQA6+5cfu2DWttln9wIiBKT32HGXlTl+BY=
Received: by 10.82.164.9 with SMTP id m9mr895450bue.1162589082815;
        Fri, 03 Nov 2006 13:24:42 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Fri, 3 Nov 2006 13:24:42 -0800 (PST)
Message-ID: <c68e39170611031324o24891615l23c3d78868fc611e@mail.gmail.com>
Date: Fri, 3 Nov 2006 16:24:42 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Intermittent search performance problem
In-Reply-To: <8a29e7880611031107r69dbb0bbw1bb3d20b1819bc3c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8a29e7880611031107r69dbb0bbw1bb3d20b1819bc3c@mail.gmail.com>
X-Google-Sender-Auth: c8a44603646b3798
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/3/06, Ben Dotte <ben.dotte@gmail.com> wrote:
> I'm trying to figure out a way to troubleshoot a performance problem
> we're seeing when searching against a memory-based index. What happens
> is we will run a search against the index and it generally returns in
> 1 second or less. But every once in a while it takes 15-20 seconds for
> the exact same search for no apparent reason.

Are you sure it's not just a big GC?  How big is your heap?

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 21:48:34 2006
Return-Path: <java-user-return-24365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63632 invoked from network); 3 Nov 2006 21:48:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 21:48:33 -0000
Received: (qmail 52706 invoked by uid 500); 3 Nov 2006 21:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52668 invoked by uid 500); 3 Nov 2006 21:48:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52657 invoked by uid 99); 3 Nov 2006 21:48:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 13:48:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ben.dotte@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO nz-out-0102.google.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 13:48:24 -0800
Received: by nz-out-0102.google.com with SMTP id k1so408698nzf
        for <java-user@lucene.apache.org>; Fri, 03 Nov 2006 13:48:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=DHbF5BT7+K30ZGNJeXiOYtBQIYP99KAvM1Ag/BMMJAsqIy8OPcp6yuPROW8xSVjUaaOTL2R224Vv8W2C7XylX5PJlzIvnMSYOcxg4An9hFNxTO/SPwXGuFn7ch0ya4xDEkWtS6CwbUwyxLRFH2+MQENwlt6ux6+HPCBTHurVXQY=
Received: by 10.65.23.7 with SMTP id a7mr1513645qbj.1162590483859;
        Fri, 03 Nov 2006 13:48:03 -0800 (PST)
Received: by 10.65.145.3 with HTTP; Fri, 3 Nov 2006 13:48:03 -0800 (PST)
Message-ID: <8a29e7880611031348p24c4993dp9e9624c0effc52c6@mail.gmail.com>
Date: Fri, 3 Nov 2006 15:48:03 -0600
From: "Ben Dotte" <ben.dotte@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Intermittent search performance problem
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Good suggestion, I tried watching the GCs in YourKit while testing but
unfortunately they don't seem to line up with the searches that take
forever. They also don't last long enough to make up that kind of
time. I have our heap limited to 1GB right now and its using around
768MB of that.

On 11/3/06, Ben Dotte <ben.dotte@gmail.com> wrote:
> I'm trying to figure out a way to troubleshoot a performance problem
> we're seeing when searching against a memory-based index. What happens
> is we will run a search against the index and it generally returns in
> 1 second or less. But every once in a while it takes 15-20 seconds for
> the exact same search for no apparent reason.

Are you sure it's not just a big GC?  How big is your heap?

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 03 23:55:07 2006
Return-Path: <java-user-return-24366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92897 invoked from network); 3 Nov 2006 23:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2006 23:55:05 -0000
Received: (qmail 40572 invoked by uid 500); 3 Nov 2006 23:55:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40266 invoked by uid 500); 3 Nov 2006 23:55:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40254 invoked by uid 99); 3 Nov 2006 23:55:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 15:55:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 03 Nov 2006 15:54:57 -0800
Received: (qmail invoked by alias); 03 Nov 2006 23:54:35 -0000
Received: from p548C5699.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.86.153]
  by mail.gmx.net (mp041) with SMTP; 04 Nov 2006 00:54:35 +0100
X-Authenticated: #3493418
Message-ID: <454BD637.20500@gmx.de>
Date: Sat, 04 Nov 2006 00:52:23 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to get Term Weights (document term matrix)?
References: <4549DA5A.90905@gmx.de> <Pine.LNX.4.58.0611031106340.30415@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0611031106340.30415@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> I don't really know what a "term matrix" is, but when you ask about
> "weight' is it possible you are just looking for the TermDoc.freq() of the
> term/doc pair?

Thank you Chris,

that was also my first idea. I wanted to get the document frequency
	indexreader.docFreq(term)
and the term frequency
	termdoc.freq()
to calculate the term weight by my self.
If I change the scoring by sub classing the Similarity class I have to 
change the code for the term weight calculation as well. The better way 
would be to use the same scoring engine for a single term weight and the 
ranking of search results.

It seems that there is no simple function to ask the weight for a term 
in a document directly. So I decide not to iterate the documents of a 
term or the terms of a document. I'm iterating the terms of the index, 
searching for the term, iterating the result documents and using the 
score as my term weight for the document term matrix:

TermEnum terms=indexreader.terms();
while(terms.next()) {
   Term term=terms.term();
   // write the term to the external document term matrix
   Hits hits=indexsearcher.search(new TermQuery(term));
   for(int i=0; i<hits.length(); i++) {
     Document doc=hits.doc(i);
     // write the document id (key, URL or index number) to the document 
term matrix
     float weight=hits.score(i);
     // write the term weight to the document term matrix
   }
}

Sören

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 04 00:13:49 2006
Return-Path: <java-user-return-24367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97658 invoked from network); 4 Nov 2006 00:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2006 00:13:48 -0000
Received: (qmail 77519 invoked by uid 500); 4 Nov 2006 00:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77493 invoked by uid 500); 4 Nov 2006 00:13:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77482 invoked by uid 99); 4 Nov 2006 00:13:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 16:13:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 16:13:41 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6A8A45B775; Fri,  3 Nov 2006 16:13:21 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 61CDF7F403
	for <java-user@lucene.apache.org>; Fri,  3 Nov 2006 16:13:21 -0800 (PST)
Date: Fri, 3 Nov 2006 16:13:21 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: How to get Term Weights (document term matrix)?
In-Reply-To: <454BD637.20500@gmx.de>
Message-ID: <Pine.LNX.4.58.0611031607340.9906@hal.rescomp.berkeley.edu>
References: <4549DA5A.90905@gmx.de> <Pine.LNX.4.58.0611031106340.30415@hal.rescomp.berkeley.edu>
 <454BD637.20500@gmx.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: It seems that there is no simple function to ask the weight for a term
: in a document directly. So I decide not to iterate the documents of a

as i said: it depends on what you mean by "term weight" ...

: term or the terms of a document. I'm iterating the terms of the index,
: searching for the term, iterating the result documents and using the
: score as my term weight for the document term matrix:

...okay, so it sounds like your defining term weight of a doc/term to be
the score of that document when searching for that term.

You really, *REALLY* don't wnat to be doing this using the "Hits" class
like in your example ...
   1) this will re-execute your search behind the scenes many many times
   2) the scores returnd by "Hits" are psuedo-normalized ... they will be
      meaningless for any sort of comparison.

if your concern is making sure that the score you get back matches the
score you would get from executing a search even if you change the
Similarity, you could just make sure you use the lengthNorm and tf
functions from the SImilarity class just like TermScorer does ... or you
could keep executing a TermQuery for each term like you are now, but using
a HitCollector so you get the raw score)

take a look at the Searcher.search methods that take in a HitCollector.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 04 02:36:02 2006
Return-Path: <java-user-return-24368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28281 invoked from network); 4 Nov 2006 02:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2006 02:36:01 -0000
Received: (qmail 89068 invoked by uid 500); 4 Nov 2006 02:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89042 invoked by uid 500); 4 Nov 2006 02:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89031 invoked by uid 99); 4 Nov 2006 02:36:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 18:36:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 03 Nov 2006 18:35:53 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GgBNc-0002K2-MJ
	for java-user@lucene.apache.org; Fri, 03 Nov 2006 18:35:32 -0800
Message-ID: <7171019.post@talk.nabble.com>
Date: Fri, 3 Nov 2006 18:35:32 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search within search
In-Reply-To: <OF1A3794E1.3F1D12FA-ON8825721B.0063AF58-8825721B.00653BF8@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7129070.post@talk.nabble.com> <39735A87-BE2A-401E-A2C9-8E9E0C3C7AF9@ehatchersolutions.com> <7152393.post@talk.nabble.com> <OF6E0E356B.BA51309B-ON8825721B.0025E295-8825721B.00266FCD@il.ibm.com> <7153721.post@talk.nabble.com> <OF1A3794E1.3F1D12FA-ON8825721B.0063AF58-8825721B.00653BF8@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Doron, thanks for the advice.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/search-within-search-tf2558237.html#a7171019
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 04 09:53:50 2006
Return-Path: <java-user-return-24369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86722 invoked from network); 4 Nov 2006 09:53:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2006 09:53:49 -0000
Received: (qmail 96526 invoked by uid 500); 4 Nov 2006 09:53:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96316 invoked by uid 500); 4 Nov 2006 09:53:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96304 invoked by uid 99); 4 Nov 2006 09:53:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 01:53:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 04 Nov 2006 01:53:40 -0800
Received: (qmail invoked by alias); 04 Nov 2006 09:53:18 -0000
Received: from p548C5699.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.86.153]
  by mail.gmx.net (mp040) with SMTP; 04 Nov 2006 10:53:18 +0100
X-Authenticated: #3493418
Message-ID: <454C6290.2030408@gmx.de>
Date: Sat, 04 Nov 2006 10:51:12 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to get Term Weights (document term matrix)?
References: <4549DA5A.90905@gmx.de> <Pine.LNX.4.58.0611031106340.30415@hal.rescomp.berkeley.edu> <454BD637.20500@gmx.de> <Pine.LNX.4.58.0611031607340.9906@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0611031607340.9906@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> You really, *REALLY* don't wnat to be doing this using the "Hits" class
> like in your example ...
>    1) this will re-execute your search behind the scenes many many times
>    2) the scores returnd by "Hits" are psuedo-normalized ... they will be
>       meaningless for any sort of comparison.

Thank you very much Hoss.

> if your concern is making sure that the score you get back matches the
> score you would get from executing a search even if you change the
> Similarity, you could just make sure you use the lengthNorm and tf
> functions from the SImilarity class just like TermScorer does 

That sounds very good. The term frequency and the document frequency can 
I get from the IndexReader. The number of tokens in a field (numTokens) 
for the Similarity.lengthNorm function can I get from the term vector 
(TermFreqVector) or I use the IndexReader.norms(String field).

The usage of TermQuery in my previous example is a simplification. The 
documents of my collection have some fields like title, abstract or 
keywords. The term weights in my document term matrix should include all 
fields of a document for a word (token). So I used in reality a 
BooleanQuery that combines the possible TermQueries for a word. 
Of-course, I can sum the field weights of a term.

> ... or you
> could keep executing a TermQuery for each term like you are now, but using
> a HitCollector so you get the raw score)
> 
> take a look at the Searcher.search methods that take in a HitCollector.

That seems to be the easiest way for my BooleanQuery. I will start with 
this and change my current implementation.

Have a nice weekend.

Sören

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 04 11:46:59 2006
Return-Path: <java-user-return-24370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93473 invoked from network); 4 Nov 2006 11:46:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2006 11:46:58 -0000
Received: (qmail 92081 invoked by uid 500); 4 Nov 2006 11:47:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92049 invoked by uid 500); 4 Nov 2006 11:47:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92038 invoked by uid 99); 4 Nov 2006 11:47:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 03:47:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pksunilpk@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 03:46:51 -0800
Received: by nf-out-0910.google.com with SMTP id n29so492451nfc
        for <java-user@lucene.apache.org>; Sat, 04 Nov 2006 03:46:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DkZTVYUEZEUtFXAYuta3Uj0BI0to7Jq9KI3vLVzhbAcsFRUONKujzqnZuQWgiwjc4N1LnvM9/VlruREtbShu3H8ikHJtocuS0YluXXP9MdTOgB4GCN/oXzscoL4BOuAgYGL4130onxiazEa+H6NzhIZhLaH5AH5So2zLTGZWD4s=
Received: by 10.78.142.14 with SMTP id p14mr4113033hud.1162640788193;
        Sat, 04 Nov 2006 03:46:28 -0800 (PST)
Received: by 10.78.159.7 with HTTP; Sat, 4 Nov 2006 03:46:27 -0800 (PST)
Message-ID: <a9893f800611040346s593fa125m2f8135ff7f4cd3b9@mail.gmail.com>
Date: Sat, 4 Nov 2006 17:16:28 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: "java user" <java-user@lucene.apache.org>
Subject: How to improve document retrieval speed.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26870_10611395.1162640788067"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26870_10611395.1162640788067
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

In my index there is a unique field, "MY_DOCNO".

If I want get a document from the index with MY_DOCNO=1000,  I am using
following code,

IndexSearcher isearcher = new IndexSearcher("myindex1");
QueryParser qp = new QueryParser("MY_DOCNO", new StandardAnalyzer());

Query query = qp.parse("MY_DOCNO:1000");
Hits hits = isearcher.search(query);

Since I have a unique field in my index, is there any other method, that can
retrieve the document faster than this?

Thanks,
Sunil

------=_Part_26870_10611395.1162640788067--

From java-user-return-24371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 04 13:23:55 2006
Return-Path: <java-user-return-24371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49805 invoked from network); 4 Nov 2006 13:23:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2006 13:23:54 -0000
Received: (qmail 74020 invoked by uid 500); 4 Nov 2006 13:24:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72977 invoked by uid 500); 4 Nov 2006 13:23:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72960 invoked by uid 99); 4 Nov 2006 13:23:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 05:23:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a12.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 05:23:45 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.dreamhost.com (Postfix) with ESMTP id 4762E7FA0
	for <java-user@lucene.apache.org>; Sat,  4 Nov 2006 05:23:21 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <a9893f800611040346s593fa125m2f8135ff7f4cd3b9@mail.gmail.com>
References: <a9893f800611040346s593fa125m2f8135ff7f4cd3b9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <23E42CF7-5645-4664-996C-02201C9759C6@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: How to improve document retrieval speed.
Date: Sat, 4 Nov 2006 08:23:20 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You probably can skip the QueryParser part and just construct a  
TermQuery with your term and field.  That will save you a few ticks.   
I'm betting you have just included the code below for example, so  
this may not apply, however, you want to make sure you aren't  
creating the IndexSearcher every time you want to run the query.  See  
the list archives for info on warming/caching the searcher.

What kind of runtimes are you experiencing?

On Nov 4, 2006, at 6:46 AM, Sunil Kumar PK wrote:

> Hi,
>
> In my index there is a unique field, "MY_DOCNO".
>
> If I want get a document from the index with MY_DOCNO=1000,  I am  
> using
> following code,
>
> IndexSearcher isearcher = new IndexSearcher("myindex1");
> QueryParser qp = new QueryParser("MY_DOCNO", new StandardAnalyzer());
>
> Query query = qp.parse("MY_DOCNO:1000");
> Hits hits = isearcher.search(query);
>
> Since I have a unique field in my index, is there any other method,  
> that can
> retrieve the document faster than this?
>
> Thanks,
> Sunil

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 04 15:13:29 2006
Return-Path: <java-user-return-24372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72365 invoked from network); 4 Nov 2006 15:13:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2006 15:13:28 -0000
Received: (qmail 77773 invoked by uid 500); 4 Nov 2006 15:13:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77736 invoked by uid 500); 4 Nov 2006 15:13:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77725 invoked by uid 99); 4 Nov 2006 15:13:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 07:13:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of pksunilpk@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 07:13:19 -0800
Received: by nf-out-0910.google.com with SMTP id n29so546152nfc
        for <java-user@lucene.apache.org>; Sat, 04 Nov 2006 07:12:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ay7I5Rk6MNWQXlwIAjw+jqxi1GJGlnTKoe1tIPTwSEgEzV7C31T5K2PXL/g+v8BE+sIius1R+YIIRM9X2L9TZK/iPaZQBtyfizSnUvt/5b20QyjAX/xIWAMFDmHD0zYSlh79xwwl0eJGLiHRBmdNum+G95Yvlmtvx1Wo2jv7zDs=
Received: by 10.78.201.15 with SMTP id y15mr4318330huf.1162653177614;
        Sat, 04 Nov 2006 07:12:57 -0800 (PST)
Received: by 10.78.159.7 with HTTP; Sat, 4 Nov 2006 07:12:57 -0800 (PST)
Message-ID: <a9893f800611040712l30e4322dpa3744565a84353d0@mail.gmail.com>
Date: Sat, 4 Nov 2006 20:42:57 +0530
From: "Sunil Kumar PK" <pksunilpk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to improve document retrieval speed.
In-Reply-To: <23E42CF7-5645-4664-996C-02201C9759C6@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27570_14345695.1162653177589"
References: <a9893f800611040346s593fa125m2f8135ff7f4cd3b9@mail.gmail.com>
	 <23E42CF7-5645-4664-996C-02201C9759C6@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27570_14345695.1162653177589
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am using Lucene's Remote Parallel Multisearcher with 10 nodes in my search
cluster having 200+ distributed index fragments (1 Index fragment = 4GB). I
have 30+ fields in my index, and I am storing a master XML file (contains 5
to 30 pages of information) in one field. I also  have two web servers
behind a load-balancer.

My system works as follows.

I) When the user search for a document, the search result page will display
3 stored fields from the index (Document Number,Title and Date).

II) On clicking a particular result I am searching again(Since I am using a
load-balancer I can't use the same RemoteSearchable object) for that
particular 'document number' and retrieve the stored master XML from the
index.

The first step is ok with me, but I want to improve the speed in the second
part. Is it necessary to do the scoring and weight calculation in the second
step?

Thanks,
Sunil

On 11/4/06, Grant Ingersoll <gsingers@apache.org> wrote:
>
> You probably can skip the QueryParser part and just construct a
> TermQuery with your term and field.  That will save you a few ticks.
> I'm betting you have just included the code below for example, so
> this may not apply, however, you want to make sure you aren't
> creating the IndexSearcher every time you want to run the query.  See
> the list archives for info on warming/caching the searcher.
>
> What kind of runtimes are you experiencing?
>
> On Nov 4, 2006, at 6:46 AM, Sunil Kumar PK wrote:
>
> > Hi,
> >
> > In my index there is a unique field, "MY_DOCNO".
> >
> > If I want get a document from the index with MY_DOCNO=1000,  I am
> > using
> > following code,
> >
> > IndexSearcher isearcher = new IndexSearcher("myindex1");
> > QueryParser qp = new QueryParser("MY_DOCNO", new StandardAnalyzer());
> >
> > Query query = qp.parse("MY_DOCNO:1000");
> > Hits hits = isearcher.search(query);
> >
> > Since I have a unique field in my index, is there any other method,
> > that can
> > retrieve the document faster than this?
> >
> > Thanks,
> > Sunil
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27570_14345695.1162653177589--

From java-user-return-24373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 04 19:15:17 2006
Return-Path: <java-user-return-24373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8802 invoked from network); 4 Nov 2006 19:15:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2006 19:15:13 -0000
Received: (qmail 86198 invoked by uid 500); 4 Nov 2006 19:15:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85999 invoked by uid 500); 4 Nov 2006 19:15:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85988 invoked by uid 99); 4 Nov 2006 19:15:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 11:15:15 -0800
X-ASF-Spam-Status: No, hits=4.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DRUGS_ERECTILE,DRUGS_ERECTILE_OBFU,FUZZY_VPILL
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [217.146.189.32] (HELO web23007.mail.ird.yahoo.com) (217.146.189.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 04 Nov 2006 11:15:01 -0800
Received: (qmail 77170 invoked by uid 60001); 4 Nov 2006 19:14:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=RmPEhhbejUQLRSYteLU74PdJONXhmXuv+s6mf0PZ+9PQPy4so+AnJNR2nxyZ0jd9P/oU4OEmcP4w2z3Ywr5Is8gKX22sMHjXD6SEsVmNHIKwkejmMzrF7NgotFAeRV+AF3bRubxEo5l1zeHSrZ/RA/WiSvta6fn+EBK8mR2OKiI=  ;
Message-ID: <20061104191439.77168.qmail@web23007.mail.ird.yahoo.com>
Received: from [84.131.233.73] by web23007.mail.ird.yahoo.com via HTTP; Sat, 04 Nov 2006 19:14:39 GMT
Date: Sat, 4 Nov 2006 19:14:39 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: How to improve document retrieval speed.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I would strongly suggest not storing these fields in lucene, just keep them=
 as files and store some kind of url to get them latter. that will boost yo=
ur speed heavily. If you really, really need to store documents in lucene, =
try some compression=0AAlso, so many fields hurt performance, any chance yo=
u could pack some of them together?=0A=0ADid you have  a chance to read Luc=
ene in Action, could help you greatly. =0A=0Agood luck=0A=0A----- Original =
Message ----=0AFrom: Sunil Kumar PK <pksunilpk@gmail.com>=0ATo: java-user@l=
ucene.apache.org=0ASent: Saturday, 4 November, 2006 4:12:57 PM=0ASubject: R=
e: How to improve document retrieval speed.=0A=0AHi,=0A=0AI am using Lucene=
's Remote Parallel Multisearcher with 10 nodes in my search=0Acluster havin=
g 200+ distributed index fragments (1 Index fragment =3D 4GB). I=0Ahave 30+=
 fields in my index, and I am storing a master XML file (contains 5=0Ato 30=
 pages of information) in one field. I also  have two web servers=0Abehind =
a load-balancer.=0A=0AMy system works as follows.=0A=0AI) When the user sea=
rch for a document, the search result page will display=0A3 stored fields f=
rom the index (Document Number,Title and Date).=0A=0AII) On clicking a part=
icular result I am searching again(Since I am using a=0Aload-balancer I can=
't use the same RemoteSearchable object) for that=0Aparticular 'document nu=
mber' and retrieve the stored master XML from the=0Aindex.=0A=0AThe first s=
tep is ok with me, but I want to improve the speed in the second=0Apart. Is=
 it necessary to do the scoring and weight calculation in the second=0Astep=
?=0A=0AThanks,=0ASunil=0A=0AOn 11/4/06, Grant Ingersoll <gsingers@apache.or=
g> wrote:=0A>=0A> You probably can skip the QueryParser part and just const=
ruct a=0A> TermQuery with your term and field.  That will save you a few ti=
cks.=0A> I'm betting you have just included the code below for example, so=
=0A> this may not apply, however, you want to make sure you aren't=0A> crea=
ting the IndexSearcher every time you want to run the query.  See=0A> the l=
ist archives for info on warming/caching the searcher.=0A>=0A> What kind of=
 runtimes are you experiencing?=0A>=0A> On Nov 4, 2006, at 6:46 AM, Sunil K=
umar PK wrote:=0A>=0A> > Hi,=0A> >=0A> > In my index there is a unique fiel=
d, "MY_DOCNO".=0A> >=0A> > If I want get a document from the index with MY_=
DOCNO=3D1000,  I am=0A> > using=0A> > following code,=0A> >=0A> > IndexSear=
cher isearcher =3D new IndexSearcher("myindex1");=0A> > QueryParser qp =3D =
new QueryParser("MY_DOCNO", new StandardAnalyzer());=0A> >=0A> > Query quer=
y =3D qp.parse("MY_DOCNO:1000");=0A> > Hits hits =3D isearcher.search(query=
);=0A> >=0A> > Since I have a unique field in my index, is there any other =
method,=0A> > that can=0A> > retrieve the document faster than this?=0A> >=
=0A> > Thanks,=0A> > Sunil=0A>=0A> --------------------------=0A> Grant Ing=
ersoll=0A> Sr. Software Engineer=0A> Center for Natural Language Processing=
=0A> Syracuse University=0A> 335 Hinds Hall=0A> Syracuse, NY 13244=0A> http=
://www.cnlp.org=0A>=0A>=0A>=0A>=0A> ---------------------------------------=
------------------------------=0A> To unsubscribe, e-mail: java-user-unsubs=
cribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-help=
@lucene.apache.org=0A>=0A>=0A=0A=0A=0A=0A=0A=09=09=0A______________________=
_____________________________________ =0AAll New Yahoo! Mail =96 Tired of V=
i@gr@! come-ons? Let our SpamGuard protect you. http://uk.docs.yahoo.com/no=
wyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 04 20:17:32 2006
Return-Path: <java-user-return-24374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16542 invoked from network); 4 Nov 2006 20:17:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2006 20:17:32 -0000
Received: (qmail 44654 invoked by uid 500); 4 Nov 2006 20:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44631 invoked by uid 500); 4 Nov 2006 20:17:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44620 invoked by uid 99); 4 Nov 2006 20:17:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 12:17:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.174.5.96] (HELO expredir5.cites.uiuc.edu) (128.174.5.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 12:17:23 -0800
Received: from [128.174.154.148] (glap148.lis.uiuc.edu [128.174.154.148])
	by expredir5.cites.uiuc.edu (8.13.7/8.13.7) with ESMTP id kA4KH26c004491;
	Sat, 4 Nov 2006 14:17:02 -0600 (CST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2506483E-0DDE-4390-9683-31FAF72402AC@uiuc.edu>
Cc: Amit Kumar <amitku@uiuc.edu>
Content-Transfer-Encoding: 7bit
From: Amit Kumar <amitku@uiuc.edu>
Subject: RemoteSearchable Term Freq
Date: Sat, 4 Nov 2006 14:17:13 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I am  trying to figure out a way to get term frequencies from  
RemoteSearchables; My index is partitioned in to 3 sets on remote  
servers, the RemoteSearchable API
has docFreq* methods but no getTermFreq* methods.  So my question is;

1. Is there a class that I am over looking that would provide  me  
with term frequencies from remote indices?

Any alternatives?

Thanks
Amit



---------------------------------------------------------
Amit Kumar
Research Programmer
The Graduate School of Library and Information Science
University of Illinois, Urbana Champaign IL, 61820
phone: 217-333-4118 fax: 217-244-3302
---------------------------------------------------------





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 04 22:20:21 2006
Return-Path: <java-user-return-24375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42471 invoked from network); 4 Nov 2006 22:20:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2006 22:20:20 -0000
Received: (qmail 50751 invoked by uid 500); 4 Nov 2006 22:20:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50720 invoked by uid 500); 4 Nov 2006 22:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50708 invoked by uid 99); 4 Nov 2006 22:20:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 14:20:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jrrhodes@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 14:20:13 -0800
Received: by nf-out-0910.google.com with SMTP id n29so651721nfc
        for <java-user@lucene.apache.org>; Sat, 04 Nov 2006 14:19:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=WQkzVMcgZxSrYaRN+rs5gWkxGu/aq86MfAERuPmVP2frs0kNMfHq+OkQufXEJam2uDg13RXtJctgh4locr1NDBO7bZygiS1UcoFwbrhF9a38QF/jiZTGFSRSj9azHOm+f5H4s110KbhUKOrDmYbkwmaxDCmrikcmmLT1TMDW/FM=
Received: by 10.78.203.13 with SMTP id a13mr4698858hug.1162678791297;
        Sat, 04 Nov 2006 14:19:51 -0800 (PST)
Received: by 10.78.155.9 with HTTP; Sat, 4 Nov 2006 14:19:51 -0800 (PST)
Message-ID: <386a4720611041419m2b029019ke93d57857fe68eb7@mail.gmail.com>
Date: Sat, 4 Nov 2006 17:19:51 -0500
From: "James Rhodes" <jrrhodes@gmail.com>
To: java-user@lucene.apache.org
Subject: 2.0 and Tokenized versus UN_TOKENIZED
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29148_31983584.1162678791269"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29148_31983584.1162678791269
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm using the 2.0 branch and I've had issues with searching indexes where
the fields aren't tokenized.
For instance, my index consists of count,lastname,city,state and I used the
following code to index it (the data is in a sql server db):
*

if*(count != 0) {

doc.add(*new* Field("count", NumberUtils.*pad*(count), Field.*Store*.*YES*,
Field.Index.*TOKENIZED*));

}

*if*(lastName != *null*) {

doc.add(*new* Field("lastname", lastName, Field.Store.*YES*, Field.Index.*
TOKENIZED*,Field.TermVector.*YES*));

}

*if*(city != *null*) {

doc.add(*new* Field("city", city, Field.Store.*YES*, Field.Index.*UN_**
TOKENIZED*));

}

*if*(state != *null*) {

*doc*.add(*new* Field("*state*", state, Field.Store.*YES*, Field.Index.*
TOKENIZED*));

}

*Using this code I can search by any field with my app EXCEPT city, though I
see it in the index using Luke.  I also can't search for it using Luke. When
I add Field.Index.TOKENIZED  to the city field, I can search by it fine.*

*Is this normal behavior? This doesn't make sense to me. Tokenized should
prevent me from searching unless I'm missing something. Any ideas? Thanks!*

*B*

------=_Part_29148_31983584.1162678791269--

From java-user-return-24376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 01:58:42 2006
Return-Path: <java-user-return-24376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71985 invoked from network); 5 Nov 2006 01:58:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 01:58:41 -0000
Received: (qmail 95682 invoked by uid 500); 5 Nov 2006 01:58:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95640 invoked by uid 500); 5 Nov 2006 01:58:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95629 invoked by uid 99); 5 Nov 2006 01:58:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 17:58:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 17:58:33 -0800
Received: by wx-out-0506.google.com with SMTP id s15so633348wxc
        for <java-user@lucene.apache.org>; Sat, 04 Nov 2006 17:58:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=fN0yhhQsWvZ2OP5WPTfTc4DjcWrYuvD8mD+kVq+QkRgaoHHZQIk0UmTAGWAIHToUhEPh+lpoISXnMKjLmHzoEuAFL8nj4Ai/swZd4cqFdG7+Y/t0e88F3tCUR/CjQyv3jV6FpoGoMJQdhka0gfEHoEHds0SVItrGqbCIFtIOsF8=
Received: by 10.70.90.17 with SMTP id n17mr1575597wxb.1162691892571;
        Sat, 04 Nov 2006 17:58:12 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 3sm3060824wrh.2006.11.04.17.58.11;
        Sat, 04 Nov 2006 17:58:12 -0800 (PST)
Message-ID: <454D453A.706@gmail.com>
Date: Sat, 04 Nov 2006 20:58:18 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: JGuruMultisearcher
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The JGuruMultiSearcher from LIA appears to me to be outdated. Am I wrong 
or has anyone who is willing to share updated the code? I would attempt 
it myself but I have not played with this stuff before and I would like 
something without bugs :_ A quick look at when the search(Query query, 
Filter filter, int nDocs) method seemed to disappear suggests that 
JGuru's multisearcher may have been written even before sorting was 
added, so I am hesitant to get involved with it.

Please let me know if there is an easy solution that I'm missing (or I 
am just plain wrong) or if you have updated the code and are willing to 
share. If not I suppose I am off to dig into the MultiSearcher...

- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 02:02:53 2006
Return-Path: <java-user-return-24377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73140 invoked from network); 5 Nov 2006 02:02:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 02:02:52 -0000
Received: (qmail 98850 invoked by uid 500); 5 Nov 2006 02:02:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98818 invoked by uid 500); 5 Nov 2006 02:02:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98807 invoked by uid 99); 5 Nov 2006 02:02:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 18:02:57 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jrrhodes@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 18:02:45 -0800
Received: by nf-out-0910.google.com with SMTP id n29so696451nfc
        for <java-user@lucene.apache.org>; Sat, 04 Nov 2006 18:02:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=aslR/WmrUsMz/Z1wPzfKHMbs1LfPYsamA0tAiAZzelnMkW7oZj0YX6dDmyIZPJcNWLkIH1+P3LT62p9s3YtxSWGIkVUJ7u6KBMj5+dliUyHcbe3+DkzECcdV4hy/WoI8+JXh1eJ8iAZY6BGDjYyBbEGBVZ7gbNS/RGuiEzrfxxw=
Received: by 10.78.26.9 with SMTP id 9mr1576076huz.1162692144081;
        Sat, 04 Nov 2006 18:02:24 -0800 (PST)
Received: by 10.78.155.9 with HTTP; Sat, 4 Nov 2006 18:02:23 -0800 (PST)
Message-ID: <386a4720611041802i7a8b6215y5e98ed155db5b8cb@mail.gmail.com>
Date: Sat, 4 Nov 2006 21:02:23 -0500
From: "James Rhodes" <jrrhodes@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene and web services?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29968_18325093.1162692143695"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29968_18325093.1162692143695
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Has anyone successfully implemented a web services front end to remotely
search a Lucene index? I've tried to do it with the Xfire stuff in
MyEclipse, but their default Aegis xml mapping stuff doesn't support the
Lucene Hits object. I'd like to avoid searching a remote index via RMI, but
for now it works. Can anyone point me in the right direction?

Thanks!

Bob

------=_Part_29968_18325093.1162692143695--

From java-user-return-24378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 03:00:45 2006
Return-Path: <java-user-return-24378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88440 invoked from network); 5 Nov 2006 03:00:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 03:00:44 -0000
Received: (qmail 26188 invoked by uid 500); 5 Nov 2006 03:00:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26157 invoked by uid 500); 5 Nov 2006 03:00:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26146 invoked by uid 99); 5 Nov 2006 03:00:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 19:00:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 19:00:37 -0800
Received: by nf-out-0910.google.com with SMTP id n29so708336nfc
        for <java-user@lucene.apache.org>; Sat, 04 Nov 2006 19:00:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rveCnSw30yP5PM7izpfHurk2w9lBG7XMcuOqa/y8wi/S0RRx9CkShO0dgKexFhlIUR2zRzMvNkfLSICHNb+2ewJpQhHKPOWpKjrqjgZryTlPIgCixApHDJLVqxm6IgAkNTRFnAviW7IC5RzQUUQEjd6K5zj6CQzuvxzMQVXqfdg=
Received: by 10.82.123.16 with SMTP id v16mr1074533buc.1162695615430;
        Sat, 04 Nov 2006 19:00:15 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Sat, 4 Nov 2006 19:00:15 -0800 (PST)
Message-ID: <359a92830611041900u502378c0md801397394cbc203@mail.gmail.com>
Date: Sat, 4 Nov 2006 22:00:15 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 2.0 and Tokenized versus UN_TOKENIZED
In-Reply-To: <386a4720611041419m2b029019ke93d57857fe68eb7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34323_5257502.1162695615355"
References: <386a4720611041419m2b029019ke93d57857fe68eb7@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34323_5257502.1162695615355
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Two questions come to mind...

1> what analyzer are you using for the *query*? Is it possible that when you
query for city you're using a tokenizer that breaks up your city code?

2> what about case? I'll assume that you have tried to search one-word
cities, so how the stream is tokenized won't break the query places you
don't expect. But if you index Austin UN_TOKENZED, then search for it using,
say StandardAnalyzer, it'll look for austin and they won't match. This may
apply to Luke too. In Luke, you can choose a different analyzer
(WhitespaceAnalyzer comes to mind).

Hope this helps
Erick

On 11/4/06, James Rhodes <jrrhodes@gmail.com> wrote:
>
> I'm using the 2.0 branch and I've had issues with searching indexes where
> the fields aren't tokenized.
> For instance, my index consists of count,lastname,city,state and I used
> the
> following code to index it (the data is in a sql server db):
> *
>
> if*(count != 0) {
>
> doc.add(*new* Field("count", NumberUtils.*pad*(count),
> Field.*Store*.*YES*,
> Field.Index.*TOKENIZED*));
>
> }
>
> *if*(lastName != *null*) {
>
> doc.add(*new* Field("lastname", lastName, Field.Store.*YES*, Field.Index.*
> TOKENIZED*,Field.TermVector.*YES*));
>
> }
>
> *if*(city != *null*) {
>
> doc.add(*new* Field("city", city, Field.Store.*YES*, Field.Index.*UN_**
> TOKENIZED*));
>
> }
>
> *if*(state != *null*) {
>
> *doc*.add(*new* Field("*state*", state, Field.Store.*YES*, Field.Index.*
> TOKENIZED*));
>
> }
>
> *Using this code I can search by any field with my app EXCEPT city, though
> I
> see it in the index using Luke.  I also can't search for it using Luke.
> When
> I add Field.Index.TOKENIZED  to the city field, I can search by it fine.*
>
> *Is this normal behavior? This doesn't make sense to me. Tokenized should
> prevent me from searching unless I'm missing something. Any ideas?
> Thanks!*
>
> *B*
>
>

------=_Part_34323_5257502.1162695615355--

From java-user-return-24379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 03:06:41 2006
Return-Path: <java-user-return-24379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88990 invoked from network); 5 Nov 2006 03:06:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 03:06:41 -0000
Received: (qmail 32040 invoked by uid 500); 5 Nov 2006 03:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31998 invoked by uid 500); 5 Nov 2006 03:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31987 invoked by uid 99); 5 Nov 2006 03:06:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 19:06:46 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeff.richley@sevajug.org designates 209.200.235.101 as permitted sender)
Received: from [209.200.235.101] (HELO segonax.lunarpages.com) (209.200.235.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 19:06:33 -0800
Received: from segonax.lunarpages.com ([209.200.235.101] helo=www.sevajug.org)
	by segonax.lunarpages.com with esmtp (Exim 4.52)
	id 1GgYMb-0006KF-6K
	for java-user@lucene.apache.org; Sat, 04 Nov 2006 19:08:01 -0800
Received: from 70.161.166.218
        (SquirrelMail authenticated user jeff.richley@sevajug.org)
        by www.sevajug.org with HTTP;
        Sat, 4 Nov 2006 19:08:01 -0800 (PST)
Message-ID: <61732.70.161.166.218.1162696081.squirrel@www.sevajug.org>
In-Reply-To: <Pine.LNX.4.58.0611022305580.29820@hal.rescomp.berkeley.edu>
References: <62109.70.161.166.218.1162519212.squirrel@www.sevajug.org>   
    <359a92830611021846p1b91c26m6746cfa20d8fcfe0@mail.gmail.com>
    <62576.70.161.166.218.1162527126.squirrel@www.sevajug.org>
    <Pine.LNX.4.58.0611022305580.29820@hal.rescomp.berkeley.edu>
Date: Sat, 4 Nov 2006 19:08:01 -0800 (PST)
Subject: Re: Query question
From: jeff.richley@sevajug.org
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.6
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="----=_20061104190801_85203"
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - segonax.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - sevajug.org
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

------=_20061104190801_85203
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

I know I am getting very close on this one but can't seem to get the score
above .306.  My guess is that I need to do something different in my
query.  If at all possible, could you take a quick look at my test code
and point me in the correct direction?  I know everyone is very busy, so
any help would be greatly appreciated.

>
> : 1.) I have data like name="Jeff" lastname="Richley" age="33" and I need
> to
> : be able to query by any combination such as name="Jeff" age="33".  But
> if
> : I query with name="Jeffrey" there is no match.
> :
> : 2.) The name value pairs are not really controlled until the end user is
> : inserting information or querying.  I may have the data from the
> previous
> : example and then have another that has address information and then
> : something totally unrelated such as stock prices.  The point is, I can't
> : guarantee what exactly will be in the data.
>
> Lucene will fit your needs because of your second point nicely, Documents
> don't need to all have hte same fields.
>
> as to your first point, and your question about 100% matches, Lucene
> should be able to meet your needs perfectly, you just have to understand
> how to ask it the right question.  lemme give you a quick check list of
> things to keep in mind, and as you dig into the documentation these will
> make more sense...
>
>  1) Use only UN_TOKENIZED fields when adding your documents, and if you
> use QueryParser to build your queries for you, use the KeywordAnalyzer to
> make sure no lowercasing or stemming takes place.
>  2) OMIT_NORMs when indexing .. they only matter if you want the lengths
> of fields to affect the score, and you don't -- you only want to know if
> it matched or not.
>  3) if you want to require name="jeff" and age="33" make sure you
> construct a query where all clauses are mandatory .. the default in the
> query parser is "SHOULD" meaning only one clause is mandatory, and the
> other clauses increase the score.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


Jeff Richley, Vice President
Southeast Virginia Java Users Group
jeff.richley@sevajug.org
http://www.sevajug.org

------=_20061104190801_85203
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_20061104190801_85203--



From java-user-return-24380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 03:09:46 2006
Return-Path: <java-user-return-24380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89264 invoked from network); 5 Nov 2006 03:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 03:09:45 -0000
Received: (qmail 34385 invoked by uid 500); 5 Nov 2006 03:09:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34350 invoked by uid 500); 5 Nov 2006 03:09:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34338 invoked by uid 99); 5 Nov 2006 03:09:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 19:09:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of david.halsted@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 19:09:37 -0800
Received: by nf-out-0910.google.com with SMTP id n29so710187nfc
        for <java-user@lucene.apache.org>; Sat, 04 Nov 2006 19:09:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=OX7afsw5Hm23XTP9+Gch8/PQmoZKMSx/3/qvUpzcqmMAbEeeg4Y1xQt2AqwRXV9eWN8wdnROmozvPBz11ttzY5xFe83fl2KQrW/F1ETQdyn7pB+ewqT0rbT/HpiqVRkiusUUTgruRk/3iyRa2SaAcQihvvWFo+hOWy60KdYjxbg=
Received: by 10.48.157.1 with SMTP id f1mr3761633nfe.1162696155847;
        Sat, 04 Nov 2006 19:09:15 -0800 (PST)
Received: by 10.49.29.6 with HTTP; Sat, 4 Nov 2006 19:09:15 -0800 (PST)
Message-ID: <82dd50a0611041909w5b0e4971sd1b1bf809fa5a934@mail.gmail.com>
Date: Sat, 4 Nov 2006 22:09:15 -0500
From: "David Halsted" <david.halsted@gmail.com>
To: java-user@lucene.apache.org
Subject: Minor issues with sample Web app
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I ran into a couple of minor issues with the sample Web app included
in the Lucene 2.0.0 download in results.jsp.  Not sure whether this
list is the right place to bring this up but thought I'd try.

*) At line 81, there's a line that assumes a static
parse(String,String,Analyzer) in QueryParser, and there isn't one in
this version, so I was throwing a Jasper error.  It's easy to fix but
it might confuse some folks:

//query = QueryParser.parse(queryString, "contents", analyzer);
QueryParser qp = new QueryParser("contents", analyzer);
query = qp.parse(queryString);

*) org.apache.lucene.demo.IndexHTML calls HTMLDocument, which creates
a field called "path" and fills it with the URL of the file.
results.jsp has the following around line 130:

String url = doc.get("url");

Of course, that returns null (the field is called "path", not "url"),
so the result sets you get back look really broken (none of the links
to the docuements work).  This works:

String url = doc.get("path");

So, not a big deal, but might be nice to fix sometime.

Dave Halsted

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 03:10:50 2006
Return-Path: <java-user-return-24381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89352 invoked from network); 5 Nov 2006 03:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 03:10:49 -0000
Received: (qmail 36088 invoked by uid 500); 5 Nov 2006 03:10:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36047 invoked by uid 500); 5 Nov 2006 03:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36036 invoked by uid 99); 5 Nov 2006 03:10:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 19:10:51 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeff.richley@sevajug.org designates 209.200.235.101 as permitted sender)
Received: from [209.200.235.101] (HELO segonax.lunarpages.com) (209.200.235.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 19:10:39 -0800
Received: from segonax.lunarpages.com ([209.200.235.101] helo=www.sevajug.org)
	by segonax.lunarpages.com with esmtp (Exim 4.52)
	id 1GgYQY-0008Ee-H3
	for java-user@lucene.apache.org; Sat, 04 Nov 2006 19:12:06 -0800
Received: from 70.161.166.218
        (SquirrelMail authenticated user jeff.richley@sevajug.org)
        by www.sevajug.org with HTTP;
        Sat, 4 Nov 2006 19:12:06 -0800 (PST)
Message-ID: <61740.70.161.166.218.1162696326.squirrel@www.sevajug.org>
In-Reply-To: <61732.70.161.166.218.1162696081.squirrel@www.sevajug.org>
References: <62109.70.161.166.218.1162519212.squirrel@www.sevajug.org>      
    <359a92830611021846p1b91c26m6746cfa20d8fcfe0@mail.gmail.com>   
    <62576.70.161.166.218.1162527126.squirrel@www.sevajug.org>   
    <Pine.LNX.4.58.0611022305580.29820@hal.rescomp.berkeley.edu>
    <61732.70.161.166.218.1162696081.squirrel@www.sevajug.org>
Date: Sat, 4 Nov 2006 19:12:06 -0800 (PST)
Subject: Re: Query question
From: jeff.richley@sevajug.org
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.6
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - segonax.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - sevajug.org
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

Thought I attached the code :)

package com.infinity.naxx.sandbox;

import java.io.IOException;
import java.util.Iterator;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.KeywordAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Hit;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.store.RAMDirectory;

public class LuceneTest {
	public static void main(String[] args) {
		try {
			Analyzer analyzer = new KeywordAnalyzer();
			RAMDirectory directory = new RAMDirectory();
			IndexWriter writer = new IndexWriter(directory, analyzer, true);

			Document document = new Document();
			Field location = new Field("location", "/a/b/c", Field.Store.YES,
					Field.Index.UN_TOKENIZED);
			document.add(location);
			Field name = new Field("name", "Jeff Richley", Field.Store.YES,
					Field.Index.UN_TOKENIZED);
			document.add(name);

			writer.addDocument(document);
			writer.optimize();
			writer.close();

			IndexSearcher searcher = new IndexSearcher(directory);
			QueryParser parser = new QueryParser("name", analyzer);
			Query query = parser.parse("\"Jeff Richley\"");

			System.out.println("Searching: " + query.toString());

			Hits hits = searcher.search(query);
			System.out.println("There were " + hits.length() + " hits");

			for (Iterator iter = hits.iterator(); iter.hasNext();) {
				Hit hit = (Hit) iter.next();
				System.out.println(hit.getScore() + " "
						+ hit.getDocument().get("location"));
			}
		} catch (IOException e) {
			e.printStackTrace();
		} catch (ParseException e) {
			e.printStackTrace();
		}
	}
}




> I know I am getting very close on this one but can't seem to get the score
> above .306.  My guess is that I need to do something different in my
> query.  If at all possible, could you take a quick look at my test code
> and point me in the correct direction?  I know everyone is very busy, so
> any help would be greatly appreciated.
>
>>
>> : 1.) I have data like name="Jeff" lastname="Richley" age="33" and I
>> need
>> to
>> : be able to query by any combination such as name="Jeff" age="33".  But
>> if
>> : I query with name="Jeffrey" there is no match.
>> :
>> : 2.) The name value pairs are not really controlled until the end user
>> is
>> : inserting information or querying.  I may have the data from the
>> previous
>> : example and then have another that has address information and then
>> : something totally unrelated such as stock prices.  The point is, I
>> can't
>> : guarantee what exactly will be in the data.
>>
>> Lucene will fit your needs because of your second point nicely,
>> Documents
>> don't need to all have hte same fields.
>>
>> as to your first point, and your question about 100% matches, Lucene
>> should be able to meet your needs perfectly, you just have to understand
>> how to ask it the right question.  lemme give you a quick check list of
>> things to keep in mind, and as you dig into the documentation these will
>> make more sense...
>>
>>  1) Use only UN_TOKENIZED fields when adding your documents, and if you
>> use QueryParser to build your queries for you, use the KeywordAnalyzer
>> to
>> make sure no lowercasing or stemming takes place.
>>  2) OMIT_NORMs when indexing .. they only matter if you want the lengths
>> of fields to affect the score, and you don't -- you only want to know if
>> it matched or not.
>>  3) if you want to require name="jeff" and age="33" make sure you
>> construct a query where all clauses are mandatory .. the default in the
>> query parser is "SHOULD" meaning only one clause is mandatory, and the
>> other clauses increase the score.
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> Jeff Richley, Vice President
> Southeast Virginia Java Users Group
> jeff.richley@sevajug.org
> http://www.sevajug.org
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


Jeff Richley, Vice President
Southeast Virginia Java Users Group
jeff.richley@sevajug.org
http://www.sevajug.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 03:18:42 2006
Return-Path: <java-user-return-24382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90020 invoked from network); 5 Nov 2006 03:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 03:18:42 -0000
Received: (qmail 40312 invoked by uid 500); 5 Nov 2006 03:18:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40284 invoked by uid 500); 5 Nov 2006 03:18:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40271 invoked by uid 99); 5 Nov 2006 03:18:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 19:18:47 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jrrhodes@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 19:18:35 -0800
Received: by nf-out-0910.google.com with SMTP id n29so712141nfc
        for <java-user@lucene.apache.org>; Sat, 04 Nov 2006 19:18:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QfZ/0Wa3lpAMfmkuu7jzowyLAMXSx6lOAzoWwZpU7c6nBS1Id8qHzmULZ4RMXQP6Fs6cCpM1/JhFSejr38f3SikhM+qdxvps/xLH74KpavODaBHPNbcjb1FzW+tQHZUamBjE6Olx6060PK91dWC32KFWALO5Ao99xf4Crz+ifBg=
Received: by 10.78.41.3 with SMTP id o3mr1631880huo.1162696693560;
        Sat, 04 Nov 2006 19:18:13 -0800 (PST)
Received: by 10.78.155.9 with HTTP; Sat, 4 Nov 2006 19:18:13 -0800 (PST)
Message-ID: <386a4720611041918h66b5a5das7e871fafb1169bcb@mail.gmail.com>
Date: Sat, 4 Nov 2006 22:18:13 -0500
From: "James Rhodes" <jrrhodes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 2.0 and Tokenized versus UN_TOKENIZED
In-Reply-To: <359a92830611041900u502378c0md801397394cbc203@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30300_32745171.1162696693539"
References: <386a4720611041419m2b029019ke93d57857fe68eb7@mail.gmail.com>
	 <359a92830611041900u502378c0md801397394cbc203@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30300_32745171.1162696693539
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks. That helps, but I've tried a lot of combinations and I forget now.
I'm using StandardAnalyzer for the index and query.I can't say for sure if
I've tried other cases. The specific combination is lastname:rhodes AND
city:"EAGLE RIVER" AND state:AK, Before TOKENIZED no match after TOKENIZED
match. Is there something special I need to do to ensure that EAGLE RIVER is
kept in the same field? I'm a newbie, admittedly, but I've learned a lot
since Friday. Thanks for the help.

B


On 11/4/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Two questions come to mind...
>
> 1> what analyzer are you using for the *query*? Is it possible that when
> you
> query for city you're using a tokenizer that breaks up your city code?
>
> 2> what about case? I'll assume that you have tried to search one-word
> cities, so how the stream is tokenized won't break the query places you
> don't expect. But if you index Austin UN_TOKENZED, then search for it
> using,
> say StandardAnalyzer, it'll look for austin and they won't match. This may
> apply to Luke too. In Luke, you can choose a different analyzer
> (WhitespaceAnalyzer comes to mind).
>
> Hope this helps
> Erick
>
> On 11/4/06, James Rhodes <jrrhodes@gmail.com> wrote:
> >
> > I'm using the 2.0 branch and I've had issues with searching indexes
> where
> > the fields aren't tokenized.
> > For instance, my index consists of count,lastname,city,state and I used
> > the
> > following code to index it (the data is in a sql server db):
> > *
> >
> > if*(count != 0) {
> >
> > doc.add(*new* Field("count", NumberUtils.*pad*(count),
> > Field.*Store*.*YES*,
> > Field.Index.*TOKENIZED*));
> >
> > }
> >
> > *if*(lastName != *null*) {
> >
> > doc.add(*new* Field("lastname", lastName, Field.Store.*YES*,
> Field.Index.*
> > TOKENIZED*,Field.TermVector.*YES*));
> >
> > }
> >
> > *if*(city != *null*) {
> >
> > doc.add(*new* Field("city", city, Field.Store.*YES*, Field.Index.*UN_**
> > TOKENIZED*));
> >
> > }
> >
> > *if*(state != *null*) {
> >
> > *doc*.add(*new* Field("*state*", state, Field.Store.*YES*, Field.Index.*
> > TOKENIZED*));
> >
> > }
> >
> > *Using this code I can search by any field with my app EXCEPT city,
> though
> > I
> > see it in the index using Luke.  I also can't search for it using Luke.
> > When
> > I add Field.Index.TOKENIZED  to the city field, I can search by it
> fine.*
> >
> > *Is this normal behavior? This doesn't make sense to me. Tokenized
> should
> > prevent me from searching unless I'm missing something. Any ideas?
> > Thanks!*
> >
> > *B*
> >
> >
>
>

------=_Part_30300_32745171.1162696693539--

From java-user-return-24383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 04:50:12 2006
Return-Path: <java-user-return-24383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98174 invoked from network); 5 Nov 2006 04:50:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 04:50:11 -0000
Received: (qmail 84736 invoked by uid 500); 5 Nov 2006 04:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84708 invoked by uid 500); 5 Nov 2006 04:50:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84676 invoked by uid 99); 5 Nov 2006 04:50:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 20:50:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of chris.lu@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 20:50:03 -0800
Received: by nf-out-0910.google.com with SMTP id n29so733244nfc
        for <java-user@lucene.apache.org>; Sat, 04 Nov 2006 20:49:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GhRjGnyeEO7/iu0BVLAvMdPJhCTPnJwyob755Fh6Q05T2fOdOSGRtoKSqNfNVbuji3aAgESbEHpzsI0AUH9C4/t6xuqCw/mhKiLm75FXVitdpeR2+JbDlNS29bX+Nvis0OmKcDy+ksG7B5l8CCHcQxng3KpxU6XVFwOTalreqD0=
Received: by 10.82.105.13 with SMTP id d13mr1084940buc.1162702181817;
        Sat, 04 Nov 2006 20:49:41 -0800 (PST)
Received: by 10.82.131.8 with HTTP; Sat, 4 Nov 2006 20:49:41 -0800 (PST)
Message-ID: <6e3ae6310611042049t62510bb0iff853dcb2960d9f2@mail.gmail.com>
Date: Sat, 4 Nov 2006 20:49:41 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene and web services?
In-Reply-To: <386a4720611041802i7a8b6215y5e98ed155db5b8cb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <386a4720611041802i7a8b6215y5e98ed155db5b8cb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Why not render your search results in XML format?
You can use some templating like Velocity.

-- 
Chris Lu
-------------------------
Instant Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com

On 11/4/06, James Rhodes <jrrhodes@gmail.com> wrote:
> Has anyone successfully implemented a web services front end to remotely
> search a Lucene index? I've tried to do it with the Xfire stuff in
> MyEclipse, but their default Aegis xml mapping stuff doesn't support the
> Lucene Hits object. I'd like to avoid searching a remote index via RMI, but
> for now it works. Can anyone point me in the right direction?
>
> Thanks!
>
> Bob
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 05:21:44 2006
Return-Path: <java-user-return-24384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 399 invoked from network); 5 Nov 2006 05:21:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 05:21:43 -0000
Received: (qmail 97718 invoked by uid 500); 5 Nov 2006 05:21:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96712 invoked by uid 500); 5 Nov 2006 05:21:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96695 invoked by uid 99); 5 Nov 2006 05:21:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 21:21:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jrrhodes@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 21:21:36 -0800
Received: by nf-out-0910.google.com with SMTP id n29so742525nfc
        for <java-user@lucene.apache.org>; Sat, 04 Nov 2006 21:21:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=s9vzXG5bgwrZ8a5RSm/Zy5KW8RCfTEInrhL7j1PaMe2cK+Bx3QKBEPvkIYC4yWHxET6VTFK6KmLK8LO63usiMJx9YjXbepkLCHShD2pNH5piVAukUAE+TGHlRUixOgyJlSkVS1Awu5fYBUKAH1Io10QME0fIDIpGNd4PvEjyvJw=
Received: by 10.78.128.11 with SMTP id a11mr3018381hud.1162704074474;
        Sat, 04 Nov 2006 21:21:14 -0800 (PST)
Received: by 10.78.155.9 with HTTP; Sat, 4 Nov 2006 21:21:14 -0800 (PST)
Message-ID: <386a4720611042121v14c6cc34g2f5c8634d7e8d80c@mail.gmail.com>
Date: Sun, 5 Nov 2006 00:21:14 -0500
From: "James Rhodes" <jrrhodes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re: lucene and web services?
In-Reply-To: <6e3ae6310611042049t62510bb0iff853dcb2960d9f2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <386a4720611041802i7a8b6215y5e98ed155db5b8cb@mail.gmail.com>
	 <6e3ae6310611042049t62510bb0iff853dcb2960d9f2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, I've considered that but I thought it would be pretty nice if I
was able to build something that was transparent to Lucene. I'd like
to use the Hits object itself. I may be complicating something, but
the Hits implementation, at least in concept, seems pretty efficient
and worth keeping. I'm open to the xml approach for sure, but was just
curious if the WS approach was possible. Using the RemoteSearchable
approach works with RMI pretty well.

B

On 11/4/06, Chris Lu <chris.lu@gmail.com> wrote:
> Why not render your search results in XML format?
> You can use some templating like Velocity.
>
> --
> Chris Lu
> -------------------------
> Instant Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
>
> On 11/4/06, James Rhodes <jrrhodes@gmail.com> wrote:
> > Has anyone successfully implemented a web services front end to remotely
> > search a Lucene index? I've tried to do it with the Xfire stuff in
> > MyEclipse, but their default Aegis xml mapping stuff doesn't support the
> > Lucene Hits object. I'd like to avoid searching a remote index via RMI, but
> > for now it works. Can anyone point me in the right direction?
> >
> > Thanks!
> >
> > Bob
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 05:40:15 2006
Return-Path: <java-user-return-24385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1829 invoked from network); 5 Nov 2006 05:40:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 05:40:14 -0000
Received: (qmail 3046 invoked by uid 500); 5 Nov 2006 05:40:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3014 invoked by uid 500); 5 Nov 2006 05:40:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3003 invoked by uid 99); 5 Nov 2006 05:40:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 21:40:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 21:40:08 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 7c48_e1b96ac0_6c90_11db_932d_003048245df9;
	Sun, 05 Nov 2006 00:45:47 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C7009C.B828041B"
Subject: RE: Re: lucene and web services?
Date: Sun, 5 Nov 2006 00:34:41 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F070D152C@tormail01.cihi.ca>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <373399D6389D8C42B4EAD9BE2B6B5C5F070D152C@tormail01.cihi.ca>
Thread-Topic: Re: lucene and web services?
Thread-Index: AccAmkOy4pXCLRAAR8eJOZfK0P6eYwAAdPnL
References: <386a4720611041802i7a8b6215y5e98ed155db5b8cb@mail.gmail.com><6e3ae6310611042049t62510bb0iff853dcb2960d9f2@mail.gmail.com> <386a4720611042121v14c6cc34g2f5c8634d7e8d80c@mail.gmail.com>
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7009C.B828041B
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

You might want to check out:
- Solr (WS & RESTish access to Lucene engine, both search & index)
- DWR (AJAX remote access library. Not really a WS, since communication =
protocol is not generic at this point, but works excellent if all you =
need is access to POJOs from JavaScript; it's more or less a very good =
AJAX remoting kit)
- AJAX-RPC or JAVA-AJAX-RPC (don't remeber the name exactly). Similar to =
DWR, but protocol is standard JSON. A bit more difficult to use though =
and has a bit more limitations)

Vlad


-----Original Message-----
From: James Rhodes [mailto:jrrhodes@gmail.com]
Sent: Sun 11/5/2006 12:21 AM
To: java-user@lucene.apache.org
Subject: Re: Re: lucene and web services?
=20
Yeah, I've considered that but I thought it would be pretty nice if I
was able to build something that was transparent to Lucene. I'd like
to use the Hits object itself. I may be complicating something, but
the Hits implementation, at least in concept, seems pretty efficient
and worth keeping. I'm open to the xml approach for sure, but was just
curious if the WS approach was possible. Using the RemoteSearchable
approach works with RMI pretty well.

B

On 11/4/06, Chris Lu <chris.lu@gmail.com> wrote:
> Why not render your search results in XML format?
> You can use some templating like Velocity.
>
> --
> Chris Lu
> -------------------------
> Instant Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
>
> On 11/4/06, James Rhodes <jrrhodes@gmail.com> wrote:
> > Has anyone successfully implemented a web services front end to =
remotely
> > search a Lucene index? I've tried to do it with the Xfire stuff in
> > MyEclipse, but their default Aegis xml mapping stuff doesn't support =
the
> > Lucene Hits object. I'd like to avoid searching a remote index via =
RMI, but
> > for now it works. Can anyone point me in the right direction?
> >
> > Thanks!
> >
> > Bob
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




------_=_NextPart_001_01C7009C.B828041B
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C7009C.B828041B--

From java-user-return-24386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 05:44:28 2006
Return-Path: <java-user-return-24386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2110 invoked from network); 5 Nov 2006 05:44:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 05:44:27 -0000
Received: (qmail 7984 invoked by uid 500); 5 Nov 2006 05:44:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7815 invoked by uid 500); 5 Nov 2006 05:44:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7804 invoked by uid 99); 5 Nov 2006 05:44:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 21:44:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [68.230.241.36] (HELO fed1rmmtao03.cox.net) (68.230.241.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 21:44:18 -0800
Received: from fed1rmimpo02.cox.net ([70.169.32.72])
          by fed1rmmtao03.cox.net
          (InterMail vM.6.01.06.01 201-2131-130-101-20060113) with ESMTP
          id <20061105054355.KUY2704.fed1rmmtao03.cox.net@fed1rmimpo02.cox.net>
          for <java-user@lucene.apache.org>; Sun, 5 Nov 2006 00:43:55 -0500
Received: from dv1040 ([68.111.203.208])
	by fed1rmimpo02.cox.net with bizsmtp
	id itjw1V00T4WHZgL0000000
	Sun, 05 Nov 2006 00:44:00 -0500
Reply-To: <gstead@ieee.org>
From: "Graham Stead" <gstead@ieee.org>
To: <java-user@lucene.apache.org>
Subject: RE: Re: lucene and web services?
Date: Sat, 4 Nov 2006 21:43:44 -0800
Message-ID: <005901c7009d$5bb14c40$0401a8c0@dv1040>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <386a4720611042121v14c6cc34g2f5c8634d7e8d80c@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccAmmOjOIH9CoX4QUilbLQIioT3UgAAj7Ag
X-Virus-Checked: Checked by ClamAV on apache.org

Jim,

IMHO, Solr is excellent and perhaps your best bet.

There's a new-ish Lucene WS project here: http://lucene-ws.net/. I have not
tried it, but it looks fine if you want to interface vanilla Lucene to, for
example, Opensearch.

There's an older Lucene WS project here: http://lucene-ws.sourceforge.net/.

Hope this helps,
-Graham

> -----Original Message-----
> From: James Rhodes [mailto:jrrhodes@gmail.com] 
> Sent: Saturday, November 04, 2006 9:21 PM
> To: java-user@lucene.apache.org
> Subject: Re: Re: lucene and web services?
> 
> Yeah, I've considered that but I thought it would be pretty 
> nice if I was able to build something that was transparent to 
> Lucene. I'd like to use the Hits object itself. I may be 
> complicating something, but the Hits implementation, at least 
> in concept, seems pretty efficient and worth keeping. I'm 
> open to the xml approach for sure, but was just curious if 
> the WS approach was possible. Using the RemoteSearchable 
> approach works with RMI pretty well.
> 
> B
> 
> On 11/4/06, Chris Lu <chris.lu@gmail.com> wrote:
> > Why not render your search results in XML format?
> > You can use some templating like Velocity.
> >
> > --
> > Chris Lu
> > -------------------------
> > Instant Full-Text Search On Any Database/Application
> > site: http://www.dbsight.net
> > demo: http://search.dbsight.com
> >
> > On 11/4/06, James Rhodes <jrrhodes@gmail.com> wrote:
> > > Has anyone successfully implemented a web services front end to 
> > > remotely search a Lucene index? I've tried to do it with 
> the Xfire 
> > > stuff in MyEclipse, but their default Aegis xml mapping stuff 
> > > doesn't support the Lucene Hits object. I'd like to avoid 
> searching 
> > > a remote index via RMI, but for now it works. Can anyone 
> point me in the right direction?
> > >
> > > Thanks!
> > >
> > > Bob
> > >
> > >
> >
> > 
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 05:56:19 2006
Return-Path: <java-user-return-24387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2903 invoked from network); 5 Nov 2006 05:56:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 05:56:18 -0000
Received: (qmail 18858 invoked by uid 500); 5 Nov 2006 05:56:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18817 invoked by uid 500); 5 Nov 2006 05:56:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18806 invoked by uid 99); 5 Nov 2006 05:56:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 21:56:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 04 Nov 2006 21:56:11 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 1486_1f4bd4ca_6c93_11db_8e98_003048245df9;
	Sun, 05 Nov 2006 01:01:50 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7009E.F60ED103"
Subject: injecting fields looked up from DB at the runtime - Solr/Lucene question
Date: Sun, 5 Nov 2006 00:55:13 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F070D152D@tormail01.cihi.ca>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: injecting fields looked up from DB at the runtime - Solr/Lucene question
Thread-Index: AccAnvXannAfypbSQNGrFmzf8kJ9PQ==
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7009E.F60ED103
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi,

I wonder if the below is the correct way of doing things...

- when the Hits objects are returned from IndexSearcher (as a result of =
some search), 'inject' 'info' fields into the 'Hit' objects at runtime =
by looking the values up in the DB. The main purpose is to avoid storing =
'info' fields in the index as 'stored' fields.
  * in other words, I want to keep in Lucene index ONLY 'indexed' fields =
and keep all 'stored' fields (some of which might be big BLOB entries) =
in relational DB. I do want however to provide 'generic' transparent =
access to these stored fields through Lucene APIs (one of the rational =
is to be able to use some frameworks around, like Solr, transparently, =
no matter which fields are stored in index and which are stored in the =
DB).

I wonder if adding 'Fields' to the returned Document object (linked with =
Hit object) will do the trick for me? In other words, will the below =
work?

Hits hits =3D indexSearcher.search(luceneQuery);
HitsIterator iter =3D (HitsIterator)hits.iterator();
Hit hit =3D (Hit)iter.next();
Document doc =3D hit.getDocument();
String docId =3D doc.getField("docId");
doc.addField(getFieldBy("someStoredDBField", docId));

Would this disturb the index in any way? Would this be reflected in all =
other objects in the returned Hits set (eg, will =
'hit.get("someStoredDBField")' return the value looked up in the DB?)

Thanks.

Vlad

------_=_NextPart_001_01C7009E.F60ED103--

From java-user-return-24388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 09:42:08 2006
Return-Path: <java-user-return-24388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26360 invoked from network); 5 Nov 2006 09:42:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 09:42:07 -0000
Received: (qmail 24205 invoked by uid 500); 5 Nov 2006 09:42:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24181 invoked by uid 500); 5 Nov 2006 09:42:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24167 invoked by uid 99); 5 Nov 2006 09:42:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 01:42:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 01:42:00 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4649A5B764; Sun,  5 Nov 2006 01:41:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2710C7F403
	for <java-user@lucene.apache.org>; Sun,  5 Nov 2006 01:41:37 -0800 (PST)
Date: Sun, 5 Nov 2006 01:41:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: 2.0 and Tokenized versus UN_TOKENIZED
In-Reply-To: <386a4720611041918h66b5a5das7e871fafb1169bcb@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0611050137430.26962@hal.rescomp.berkeley.edu>
References: <386a4720611041419m2b029019ke93d57857fe68eb7@mail.gmail.com> 
 <359a92830611041900u502378c0md801397394cbc203@mail.gmail.com>
 <386a4720611041918h66b5a5das7e871fafb1169bcb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


what Erick was saying is that if you use an Analyzer to build your
queries, that Analyzer has no way of knowing that the city filed wasn't
tokenized.

your queries work when you tokenize city because the same analyzer is used
at index time and at query time ... when you don't tokenize, no analyzer
is used, so the value in the index is something like...

	EAGLE RIVER

but when you ask QueryParser to give you a Query object for city:"EAGLE
RIVER" it uses the Analyzer you told it to use and makes a phrase query on
"eagle" and "river" (or maybe something like "eagl" and "rivr" ... I don't
remember if it has stemming by default)

if you want it to work iwthout tokenizing, you need to use something like
hte PerFieldAnalyzerWrapper, and the KeywordAnalyzer for hte city field
... the KeywordAnalyzer at query time will leave the query text
untokenized so it can match the untokenized value you indexed.

: Date: Sat, 4 Nov 2006 22:18:13 -0500
: From: James Rhodes <jrrhodes@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: 2.0 and Tokenized versus UN_TOKENIZED
:
: Thanks. That helps, but I've tried a lot of combinations and I forget now.
: I'm using StandardAnalyzer for the index and query.I can't say for sure if
: I've tried other cases. The specific combination is lastname:rhodes AND
: city:"EAGLE RIVER" AND state:AK, Before TOKENIZED no match after TOKENIZED
: match. Is there something special I need to do to ensure that EAGLE RIVER is
: kept in the same field? I'm a newbie, admittedly, but I've learned a lot
: since Friday. Thanks for the help.
:
: B
:
:
: On 11/4/06, Erick Erickson <erickerickson@gmail.com> wrote:
: >
: > Two questions come to mind...
: >
: > 1> what analyzer are you using for the *query*? Is it possible that when
: > you
: > query for city you're using a tokenizer that breaks up your city code?
: >
: > 2> what about case? I'll assume that you have tried to search one-word
: > cities, so how the stream is tokenized won't break the query places you
: > don't expect. But if you index Austin UN_TOKENZED, then search for it
: > using,
: > say StandardAnalyzer, it'll look for austin and they won't match. This may
: > apply to Luke too. In Luke, you can choose a different analyzer
: > (WhitespaceAnalyzer comes to mind).
: >
: > Hope this helps
: > Erick
: >
: > On 11/4/06, James Rhodes <jrrhodes@gmail.com> wrote:
: > >
: > > I'm using the 2.0 branch and I've had issues with searching indexes
: > where
: > > the fields aren't tokenized.
: > > For instance, my index consists of count,lastname,city,state and I used
: > > the
: > > following code to index it (the data is in a sql server db):
: > > *
: > >
: > > if*(count != 0) {
: > >
: > > doc.add(*new* Field("count", NumberUtils.*pad*(count),
: > > Field.*Store*.*YES*,
: > > Field.Index.*TOKENIZED*));
: > >
: > > }
: > >
: > > *if*(lastName != *null*) {
: > >
: > > doc.add(*new* Field("lastname", lastName, Field.Store.*YES*,
: > Field.Index.*
: > > TOKENIZED*,Field.TermVector.*YES*));
: > >
: > > }
: > >
: > > *if*(city != *null*) {
: > >
: > > doc.add(*new* Field("city", city, Field.Store.*YES*, Field.Index.*UN_**
: > > TOKENIZED*));
: > >
: > > }
: > >
: > > *if*(state != *null*) {
: > >
: > > *doc*.add(*new* Field("*state*", state, Field.Store.*YES*, Field.Index.*
: > > TOKENIZED*));
: > >
: > > }
: > >
: > > *Using this code I can search by any field with my app EXCEPT city,
: > though
: > > I
: > > see it in the index using Luke.  I also can't search for it using Luke.
: > > When
: > > I add Field.Index.TOKENIZED  to the city field, I can search by it
: > fine.*
: > >
: > > *Is this normal behavior? This doesn't make sense to me. Tokenized
: > should
: > > prevent me from searching unless I'm missing something. Any ideas?
: > > Thanks!*
: > >
: > > *B*
: > >
: > >
: >
: >
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 13:12:22 2006
Return-Path: <java-user-return-24389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68526 invoked from network); 5 Nov 2006 13:12:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 13:12:21 -0000
Received: (qmail 41279 invoked by uid 500); 5 Nov 2006 13:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41248 invoked by uid 500); 5 Nov 2006 13:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41237 invoked by uid 99); 5 Nov 2006 13:12:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 05:12:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jrrhodes@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 05:12:13 -0800
Received: by nf-out-0910.google.com with SMTP id a4so824941nfc
        for <java-user@lucene.apache.org>; Sun, 05 Nov 2006 05:11:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qX/s6KSKhjg3QuwA8kHKPwP0MpuPw4iOmNabznizWxMFxHuqYqxJBD0E14r2KWTl532WslbcShOKQ1Mqazx3akTCCns1lfy8rqE/mPrQHPGNN4u5p9/IKLxVk0zv6W2PBvLQct55InZt4Qa8+EvsOr7Dm7z8klkFb9HsHYYvS0w=
Received: by 10.78.193.19 with SMTP id q19mr5398120huf.1162732310473;
        Sun, 05 Nov 2006 05:11:50 -0800 (PST)
Received: by 10.78.155.9 with HTTP; Sun, 5 Nov 2006 05:11:50 -0800 (PST)
Message-ID: <386a4720611050511k7020505euf5eaf9a73dbf55b9@mail.gmail.com>
Date: Sun, 5 Nov 2006 08:11:50 -0500
From: "James Rhodes" <jrrhodes@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 2.0 and Tokenized versus UN_TOKENIZED
In-Reply-To: <Pine.LNX.4.58.0611050137430.26962@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32440_2790087.1162732310444"
References: <386a4720611041419m2b029019ke93d57857fe68eb7@mail.gmail.com>
	 <359a92830611041900u502378c0md801397394cbc203@mail.gmail.com>
	 <386a4720611041918h66b5a5das7e871fafb1169bcb@mail.gmail.com>
	 <Pine.LNX.4.58.0611050137430.26962@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32440_2790087.1162732310444
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ahh. That makes sense and helps a lot. Thanks so much for the replies. I'm
sure I'll have more noob questions later today.

B


On 11/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> what Erick was saying is that if you use an Analyzer to build your
> queries, that Analyzer has no way of knowing that the city filed wasn't
> tokenized.
>
> your queries work when you tokenize city because the same analyzer is used
> at index time and at query time ... when you don't tokenize, no analyzer
> is used, so the value in the index is something like...
>
>        EAGLE RIVER
>
> but when you ask QueryParser to give you a Query object for city:"EAGLE
> RIVER" it uses the Analyzer you told it to use and makes a phrase query on
> "eagle" and "river" (or maybe something like "eagl" and "rivr" ... I don't
> remember if it has stemming by default)
>
> if you want it to work iwthout tokenizing, you need to use something like
> hte PerFieldAnalyzerWrapper, and the KeywordAnalyzer for hte city field
> ... the KeywordAnalyzer at query time will leave the query text
> untokenized so it can match the untokenized value you indexed.
>
> : Date: Sat, 4 Nov 2006 22:18:13 -0500
> : From: James Rhodes <jrrhodes@gmail.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Re: 2.0 and Tokenized versus UN_TOKENIZED
> :
> : Thanks. That helps, but I've tried a lot of combinations and I forget
> now.
> : I'm using StandardAnalyzer for the index and query.I can't say for sure
> if
> : I've tried other cases. The specific combination is lastname:rhodes AND
> : city:"EAGLE RIVER" AND state:AK, Before TOKENIZED no match after
> TOKENIZED
> : match. Is there something special I need to do to ensure that EAGLE
> RIVER is
> : kept in the same field? I'm a newbie, admittedly, but I've learned a lot
> : since Friday. Thanks for the help.
> :
> : B
> :
> :
> : On 11/4/06, Erick Erickson <erickerickson@gmail.com> wrote:
> : >
> : > Two questions come to mind...
> : >
> : > 1> what analyzer are you using for the *query*? Is it possible that
> when
> : > you
> : > query for city you're using a tokenizer that breaks up your city code?
> : >
> : > 2> what about case? I'll assume that you have tried to search one-word
> : > cities, so how the stream is tokenized won't break the query places
> you
> : > don't expect. But if you index Austin UN_TOKENZED, then search for it
> : > using,
> : > say StandardAnalyzer, it'll look for austin and they won't match. This
> may
> : > apply to Luke too. In Luke, you can choose a different analyzer
> : > (WhitespaceAnalyzer comes to mind).
> : >
> : > Hope this helps
> : > Erick
> : >
> : > On 11/4/06, James Rhodes <jrrhodes@gmail.com> wrote:
> : > >
> : > > I'm using the 2.0 branch and I've had issues with searching indexes
> : > where
> : > > the fields aren't tokenized.
> : > > For instance, my index consists of count,lastname,city,state and I
> used
> : > > the
> : > > following code to index it (the data is in a sql server db):
> : > > *
> : > >
> : > > if*(count != 0) {
> : > >
> : > > doc.add(*new* Field("count", NumberUtils.*pad*(count),
> : > > Field.*Store*.*YES*,
> : > > Field.Index.*TOKENIZED*));
> : > >
> : > > }
> : > >
> : > > *if*(lastName != *null*) {
> : > >
> : > > doc.add(*new* Field("lastname", lastName, Field.Store.*YES*,
> : > Field.Index.*
> : > > TOKENIZED*,Field.TermVector.*YES*));
> : > >
> : > > }
> : > >
> : > > *if*(city != *null*) {
> : > >
> : > > doc.add(*new* Field("city", city, Field.Store.*YES*,
> Field.Index.*UN_**
> : > > TOKENIZED*));
> : > >
> : > > }
> : > >
> : > > *if*(state != *null*) {
> : > >
> : > > *doc*.add(*new* Field("*state*", state, Field.Store.*YES*,
> Field.Index.*
> : > > TOKENIZED*));
> : > >
> : > > }
> : > >
> : > > *Using this code I can search by any field with my app EXCEPT city,
> : > though
> : > > I
> : > > see it in the index using Luke.  I also can't search for it using
> Luke.
> : > > When
> : > > I add Field.Index.TOKENIZED  to the city field, I can search by it
> : > fine.*
> : > >
> : > > *Is this normal behavior? This doesn't make sense to me. Tokenized
> : > should
> : > > prevent me from searching unless I'm missing something. Any ideas?
> : > > Thanks!*
> : > >
> : > > *B*
> : > >
> : > >
> : >
> : >
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_32440_2790087.1162732310444--

From java-user-return-24390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 14:37:00 2006
Return-Path: <java-user-return-24390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84612 invoked from network); 5 Nov 2006 14:36:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 14:36:58 -0000
Received: (qmail 94046 invoked by uid 500); 5 Nov 2006 14:37:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94014 invoked by uid 500); 5 Nov 2006 14:37:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94003 invoked by uid 99); 5 Nov 2006 14:37:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 06:37:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 06:36:51 -0800
Received: by nf-out-0910.google.com with SMTP id n29so924754nfc
        for <java-user@lucene.apache.org>; Sun, 05 Nov 2006 06:36:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=e1Ob7h+us84GHgacTAfbXVWn1tfybLkiM4yJke71uYyun1A70+dJU53fQbyFb1fgySF4i04/MzQ1+rfh2b1rVSyB0oj/RivmzcGSGoG4iVbDRcp59CDYXBZri7mMJrs6H8lIeSImdzPCKWceoc7rjGHUZc9OHTsTVUwfA4BZd5c=
Received: by 10.82.105.13 with SMTP id d13mr1129149buc.1162737389641;
        Sun, 05 Nov 2006 06:36:29 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Sun, 5 Nov 2006 06:36:29 -0800 (PST)
Message-ID: <c68e39170611050636n151727c8j86a444b8ec34babe@mail.gmail.com>
Date: Sun, 5 Nov 2006 09:36:29 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: injecting fields looked up from DB at the runtime - Solr/Lucene question
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F070D152D@tormail01.cihi.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <373399D6389D8C42B4EAD9BE2B6B5C5F070D152D@tormail01.cihi.ca>
X-Google-Sender-Auth: 3c08c7ae732607ef
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/5/06, Vladimir Olenin <VOlenin@cihi.ca> wrote:
> - when the Hits objects are returned from IndexSearcher (as a result of some search), 'inject' 'info' fields into the 'Hit' objects at runtime by looking the values up in the DB. The main purpose is to avoid storing 'info' fields in the index as 'stored' fields.

Yes, I've considered doing that at the Solr layer... adding something
like a subclassable SolrDocument.  An implementation could add other
fields by retrieving them from a database.

Upsides: simpler clients that don't need to understand where stored
fields are coming from.
Downsides: you tie yourself to a database (another thing to worry
about in an environment where you need HA).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 05 18:32:21 2006
Return-Path: <java-user-return-24391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17023 invoked from network); 5 Nov 2006 18:32:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2006 18:32:20 -0000
Received: (qmail 56688 invoked by uid 500); 5 Nov 2006 18:32:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55641 invoked by uid 500); 5 Nov 2006 18:32:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55629 invoked by uid 99); 5 Nov 2006 18:32:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 10:32:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 10:32:10 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4573B5B774; Sun,  5 Nov 2006 10:31:49 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3930A7F403
	for <java-user@lucene.apache.org>; Sun,  5 Nov 2006 10:31:49 -0800 (PST)
Date: Sun, 5 Nov 2006 10:31:49 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Query question
In-Reply-To: <61732.70.161.166.218.1162696081.squirrel@www.sevajug.org>
Message-ID: <Pine.LNX.4.58.0611051021020.15886@hal.rescomp.berkeley.edu>
References: <62109.70.161.166.218.1162519212.squirrel@www.sevajug.org>     
  <359a92830611021846p1b91c26m6746cfa20d8fcfe0@mail.gmail.com>   
 <62576.70.161.166.218.1162527126.squirrel@www.sevajug.org>   
 <Pine.LNX.4.58.0611022305580.29820@hal.rescomp.berkeley.edu>
 <61732.70.161.166.218.1162696081.squirrel@www.sevajug.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I know I am getting very close on this one but can't seem to get the score
: above .306.  My guess is that I need to do something different in my

1) you didn't setOmitNorms(true)

2) why do you care what the score is? .. you said you only wanted exact
matches: if you don't tokenize, and you build your queries explicitly (all
MUST or MUST_NOT, no sloppy phrases, etc..) the matches you get will only
be exact matches.

3) if you really care about the numeric score values, don't use Hits,
those scores are "psuedo-normalized"

4) the Searcher.explain method can be used to understand why you are
getting a particular score value.  most likely you can get a score of
"1.0" by subclassing Similarity in a creative way, but see point#2.


: >  1) Use only UN_TOKENIZED fields when adding your documents, and if you
: > use QueryParser to build your queries for you, use the KeywordAnalyzer to
: > make sure no lowercasing or stemming takes place.
: >  2) OMIT_NORMs when indexing .. they only matter if you want the lengths
: > of fields to affect the score, and you don't -- you only want to know if
: > it matched or not.
: >  3) if you want to require name="jeff" and age="33" make sure you
: > construct a query where all clauses are mandatory .. the default in the
: > query parser is "SHOULD" meaning only one clause is mandatory, and the
: > other clauses increase the score.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 00:45:41 2006
Return-Path: <java-user-return-24392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96673 invoked from network); 6 Nov 2006 00:45:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 00:45:37 -0000
Received: (qmail 44565 invoked by uid 500); 6 Nov 2006 00:45:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43454 invoked by uid 500); 6 Nov 2006 00:44:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42804 invoked by uid 99); 6 Nov 2006 00:44:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 16:44:47 -0800
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [202.86.4.25] (HELO web7606.mail.in.yahoo.com) (202.86.4.25)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 05 Nov 2006 16:21:50 -0800
Received: (qmail 41496 invoked by uid 60001); 6 Nov 2006 00:21:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Q9cdTjJAJralya8CIgr5NQLfC7klepOP1P+0oaDrPbAw4PUXJyPphctrVr1oXo4ZLK1yiOMwI2M6OwB9ZMNPK0z4JSD4IHzV9TPupKRKyMNc+6CBncWC1YOKmkbYsFR7e8EyuHsBLHHYo1mes9f8L0rVhi5LR2wZ+li/bWMeCIQ=;
X-YMail-OSG: G.PbFO0VM1n.2nH07PxDauPjd6jfllMuJuRNNVNcCOBPsRdg10zmJhIyXSB3oMOf4kZgf2FbiQ5mPTLCAj2oS9FaSF4AxsTBjz92z2OWfr4791t3yLLl3fiL8cH6G._5idUIqJKl_rTjL_0-
Received: from [65.28.29.59] by web7606.mail.in.yahoo.com via HTTP; Mon, 06 Nov 2006 00:21:19 GMT
Date: Mon, 6 Nov 2006 00:21:19 +0000 (GMT)
From: mukkamalla rama kumar <mukkamalla_r@yahoo.co.in>
Subject: reg : document number
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-162449347-1162772479=:40521"
Content-Transfer-Encoding: 8bit
Message-ID: <555111.40521.qm@web7606.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-162449347-1162772479=:40521
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
     How is this document number assigned to documents. Can i give my own document number.
   
     I would like to get the document number for a particular file that i added to an index.

 				
---------------------------------
 Find out what India is talking about on  - Yahoo! Answers India 
 Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get it NOW
--0-162449347-1162772479=:40521--

From java-user-return-24393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 01:04:23 2006
Return-Path: <java-user-return-24393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1821 invoked from network); 6 Nov 2006 01:04:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 01:04:22 -0000
Received: (qmail 75099 invoked by uid 500); 6 Nov 2006 01:04:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74606 invoked by uid 500); 6 Nov 2006 01:04:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74595 invoked by uid 99); 6 Nov 2006 01:04:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 17:04:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 17:04:14 -0800
Received: by nf-out-0910.google.com with SMTP id n29so1141450nfc
        for <java-user@lucene.apache.org>; Sun, 05 Nov 2006 17:03:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NdXq1ajBYxETMwk/+9xTk3vKj62KqxwXEsgnKWQc/Pp9VQal4T5tbZwLvOjJ2eAXYRFJQ3M6WaQczV8aetHyoxTGueUdDISXvEMRAgkdLd+OmCEOs+RQ7xm4yKB9/PHTIUUv9oZKF52MwDCpoQ3NkE4IOTAxh6kApSEykNiC1CA=
Received: by 10.82.107.15 with SMTP id f15mr1178971buc.1162775033369;
        Sun, 05 Nov 2006 17:03:53 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Sun, 5 Nov 2006 17:03:53 -0800 (PST)
Message-ID: <359a92830611051703k46f47574t24ad39e4ee6a7fab@mail.gmail.com>
Date: Sun, 5 Nov 2006 20:03:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: reg : document number
In-Reply-To: <555111.40521.qm@web7606.mail.in.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40878_10609093.1162775033269"
References: <555111.40521.qm@web7606.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_40878_10609093.1162775033269
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Do NOT rely on the Lucene document number. It changes periodically. As I
understand it the general algorithm is that each doc gets an ID one greater
than the current max doc ID at INDEX time. However, when you delete
documents and optimize your index, the document IDs change. Simplistically,
say you have docs indexed with IDs 1, 2, 3, 4, 5, remove 2 and reoptimize.
You then have IDs 1, 2, 3, 4 where 2, 3, 4 were 3, 4, 5 respectively.

WARNING: I have no idea whether that's exactly how it works. The point is
that the doc IDs change. I wouldn't count on trying to match any algorithm
that Lucene uses....

But you don't need to anyway. Just assign your own document ID that *you*
can guarantee doesn't change (no relation to the Lucene ID) and store that
wherever you want, then search on that. I believe you'll find that you can
search fast enough on such an ID that you won't notice the time. At any
rate, that's how I'd start out and only get fancier if performance proves
unacceptable.

Best
Erick

On 11/5/06, mukkamalla rama kumar <mukkamalla_r@yahoo.co.in> wrote:
>
> Hi,
>
>      How is this document number assigned to documents. Can i give my own
> document number.
>
>      I would like to get the document number for a particular file that i
> added to an index.
>
>
> ---------------------------------
> Find out what India is talking about on  - Yahoo! Answers India
> Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get
> it NOW
>

------=_Part_40878_10609093.1162775033269--

From java-user-return-24394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 01:11:58 2006
Return-Path: <java-user-return-24394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3287 invoked from network); 6 Nov 2006 01:11:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 01:11:56 -0000
Received: (qmail 83714 invoked by uid 500); 6 Nov 2006 01:12:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83676 invoked by uid 500); 6 Nov 2006 01:12:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83665 invoked by uid 99); 6 Nov 2006 01:12:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 17:12:00 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=NO_REAL_NAME,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeff.richley@sevajug.org designates 209.200.235.101 as permitted sender)
Received: from [209.200.235.101] (HELO segonax.lunarpages.com) (209.200.235.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 17:11:47 -0800
Received: from segonax.lunarpages.com ([209.200.235.101] helo=www.sevajug.org)
	by segonax.lunarpages.com with esmtp (Exim 4.52)
	id 1Ggt36-0007Dw-Q4
	for java-user@lucene.apache.org; Sun, 05 Nov 2006 17:13:16 -0800
Received: from 70.161.166.218
        (SquirrelMail authenticated user jeff.richley@sevajug.org)
        by www.sevajug.org with HTTP;
        Sun, 5 Nov 2006 17:13:16 -0800 (PST)
Message-ID: <62452.70.161.166.218.1162775596.squirrel@www.sevajug.org>
In-Reply-To: <Pine.LNX.4.58.0611051021020.15886@hal.rescomp.berkeley.edu>
References: <62109.70.161.166.218.1162519212.squirrel@www.sevajug.org>      
    <359a92830611021846p1b91c26m6746cfa20d8fcfe0@mail.gmail.com>   
    <62576.70.161.166.218.1162527126.squirrel@www.sevajug.org>   
    <Pine.LNX.4.58.0611022305580.29820@hal.rescomp.berkeley.edu>
    <61732.70.161.166.218.1162696081.squirrel@www.sevajug.org>
    <Pine.LNX.4.58.0611051021020.15886@hal.rescomp.berkeley.edu>
Date: Sun, 5 Nov 2006 17:13:16 -0800 (PST)
Subject: Re: Query question
From: jeff.richley@sevajug.org
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.6
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - segonax.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - sevajug.org
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org

Chris, thank you so much for your help.  I guess I was interpretting the
score incorrectly.  Wasn't getting it through this thick head, I'm rolling
along now.  You all have done a great job with this!

>
> : I know I am getting very close on this one but can't seem to get the
> score
> : above .306.  My guess is that I need to do something different in my
>
> 1) you didn't setOmitNorms(true)
>
> 2) why do you care what the score is? .. you said you only wanted exact
> matches: if you don't tokenize, and you build your queries explicitly (all
> MUST or MUST_NOT, no sloppy phrases, etc..) the matches you get will only
> be exact matches.
>
> 3) if you really care about the numeric score values, don't use Hits,
> those scores are "psuedo-normalized"
>
> 4) the Searcher.explain method can be used to understand why you are
> getting a particular score value.  most likely you can get a score of
> "1.0" by subclassing Similarity in a creative way, but see point#2.
>
>
> : >  1) Use only UN_TOKENIZED fields when adding your documents, and if
> you
> : > use QueryParser to build your queries for you, use the KeywordAnalyzer
> to
> : > make sure no lowercasing or stemming takes place.
> : >  2) OMIT_NORMs when indexing .. they only matter if you want the
> lengths
> : > of fields to affect the score, and you don't -- you only want to know
> if
> : > it matched or not.
> : >  3) if you want to require name="jeff" and age="33" make sure you
> : > construct a query where all clauses are mandatory .. the default in
> the
> : > query parser is "SHOULD" meaning only one clause is mandatory, and the
> : > other clauses increase the score.
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


Jeff Richley, Vice President
Southeast Virginia Java Users Group
jeff.richley@sevajug.org
http://www.sevajug.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 03:10:52 2006
Return-Path: <java-user-return-24395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25224 invoked from network); 6 Nov 2006 03:10:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 03:10:51 -0000
Received: (qmail 72005 invoked by uid 500); 6 Nov 2006 03:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71980 invoked by uid 500); 6 Nov 2006 03:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71968 invoked by uid 99); 6 Nov 2006 03:10:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 19:10:55 -0800
X-ASF-Spam-Status: No, hits=3.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [202.86.4.20] (HELO web7601.mail.in.yahoo.com) (202.86.4.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 05 Nov 2006 19:10:43 -0800
Received: (qmail 49367 invoked by uid 60001); 6 Nov 2006 03:10:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=thw73o7+f6uMG42meMjBSN+/ow21hGUd/zeBTlnYrAd2V/I4avEZUVnGPvYTkv2jIO3VdVgK7iFyg+rKYpL9DTJmoKdOZmV4320GMr+eY8eN7JsTwrhc5x2Q+z2NVQgF3Fl4JiPEE4XzC6GmYYDl6FHcanEGPVzrbcW0mp3qVz8=;
X-YMail-OSG: GCLCQ_8VM1nWvKhcigUgGmLb0GAy6P99S4y2UjvCA0uOaGo4yjYFmVV1QyxDXJnghnUtdTYxvoEwDaX55SFsUrS_dC8FZAoQyS7tTWvyQMK_O6k4AXBNSnLZut4YbvQmuDrR4NwCwGHK0XKRWlS4xCJPmzEX5EtVIBOvaj1GQqSLCE3K0J1ZQtt2K.CL
Received: from [65.28.29.59] by web7601.mail.in.yahoo.com via HTTP; Mon, 06 Nov 2006 03:10:20 GMT
Date: Mon, 6 Nov 2006 03:10:20 +0000 (GMT)
From: mukkamalla rama kumar <mukkamalla_r@yahoo.co.in>
Subject: Re: reg : document number
To: java-user@lucene.apache.org
In-Reply-To: <359a92830611051703k46f47574t24ad39e4ee6a7fab@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-203498814-1162782620=:48983"
Content-Transfer-Encoding: 8bit
Message-ID: <565569.48983.qm@web7601.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-203498814-1162782620=:48983
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks for your reply,
   
      Actually what my concern was that,
  I have a file repository, when files are added to this repository i would be updating the index by the corresponding document.
   
  But during deletion of the file in the file repository i have to delete the document from the index that i have built. The IndexModifer provides the option
   
  public void deleteDocument(int docNum)

  but this docNum will be varying for the documents, so how can i delete the document when the files they represent are deleted in my file repository
   
  Thanks in advance for your reply
   
  

Erick Erickson <erickerickson@gmail.com> wrote:
  Do NOT rely on the Lucene document number. It changes periodically. As I
understand it the general algorithm is that each doc gets an ID one greater
than the current max doc ID at INDEX time. However, when you delete
documents and optimize your index, the document IDs change. Simplistically,
say you have docs indexed with IDs 1, 2, 3, 4, 5, remove 2 and reoptimize.
You then have IDs 1, 2, 3, 4 where 2, 3, 4 were 3, 4, 5 respectively.

WARNING: I have no idea whether that's exactly how it works. The point is
that the doc IDs change. I wouldn't count on trying to match any algorithm
that Lucene uses....

But you don't need to anyway. Just assign your own document ID that *you*
can guarantee doesn't change (no relation to the Lucene ID) and store that
wherever you want, then search on that. I believe you'll find that you can
search fast enough on such an ID that you won't notice the time. At any
rate, that's how I'd start out and only get fancier if performance proves
unacceptable.

Best
Erick

On 11/5/06, mukkamalla rama kumar wrote:
>
> Hi,
>
> How is this document number assigned to documents. Can i give my own
> document number.
>
> I would like to get the document number for a particular file that i
> added to an index.
>
>
> ---------------------------------
> Find out what India is talking about on - Yahoo! Answers India
> Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get
> it NOW
>


 				
---------------------------------
 Find out what India is talking about on  - Yahoo! Answers India 
 Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get it NOW
--0-203498814-1162782620=:48983--

From java-user-return-24396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 03:32:52 2006
Return-Path: <java-user-return-24396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28112 invoked from network); 6 Nov 2006 03:32:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 03:32:51 -0000
Received: (qmail 89989 invoked by uid 500); 6 Nov 2006 03:32:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89945 invoked by uid 500); 6 Nov 2006 03:32:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89934 invoked by uid 99); 6 Nov 2006 03:32:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 19:32:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yiqing.jin@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 19:32:44 -0800
Received: by nf-out-0910.google.com with SMTP id n29so1221743nfc
        for <java-user@lucene.apache.org>; Sun, 05 Nov 2006 19:32:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=eux9m+3+jyJrZt0F08CbDSYf0yy/O/IKvLl6Wufqx0uLWE7GLyCs/tu/lYIOauuM5YeyTyy/Mxs6Z9qlpTbV0zZ0jsz5zgzNJFwIFSFs8L/gCRVwC9xe0gWnfdRCVv1Kc2oZYjepPm5dvL423Mp+gj+IIBqOtRpVJE24YzwTTMg=
Received: by 10.82.106.14 with SMTP id e14mr1204089buc.1162783942312;
        Sun, 05 Nov 2006 19:32:22 -0800 (PST)
Received: by 10.82.167.6 with HTTP; Sun, 5 Nov 2006 19:32:21 -0800 (PST)
Message-ID: <f7d99bf30611051932h609c4831g7f1a13c7ad66d018@mail.gmail.com>
Date: Mon, 6 Nov 2006 11:32:22 +0800
From: "Jin Yiqing" <yiqing.jin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: reg : document number
In-Reply-To: <565569.48983.qm@web7601.mail.in.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43253_17469465.1162783942191"
References: <359a92830611051703k46f47574t24ad39e4ee6a7fab@mail.gmail.com>
	 <565569.48983.qm@web7601.mail.in.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43253_17469465.1162783942191
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I used to have this question too. My solution is use "searcher" to get the
document then detele it. To do this you should know how to give a query that
could get the exact one doc you wanted.  Hope  this  could  do some help to
u.

2006/11/6, mukkamalla rama kumar <mukkamalla_r@yahoo.co.in>:
>
> Thanks for your reply,
>
>       Actually what my concern was that,
>   I have a file repository, when files are added to this repository i
> would be updating the index by the corresponding document.
>
>   But during deletion of the file in the file repository i have to delete
> the document from the index that i have built. The IndexModifer provides the
> option
>
>   public void deleteDocument(int docNum)
>
>   but this docNum will be varying for the documents, so how can i delete
> the document when the files they represent are deleted in my file repository
>
>   Thanks in advance for your reply
>
>
>
> Erick Erickson <erickerickson@gmail.com> wrote:
>   Do NOT rely on the Lucene document number. It changes periodically. As I
> understand it the general algorithm is that each doc gets an ID one
> greater
> than the current max doc ID at INDEX time. However, when you delete
> documents and optimize your index, the document IDs change.
> Simplistically,
> say you have docs indexed with IDs 1, 2, 3, 4, 5, remove 2 and reoptimize.
> You then have IDs 1, 2, 3, 4 where 2, 3, 4 were 3, 4, 5 respectively.
>
> WARNING: I have no idea whether that's exactly how it works. The point is
> that the doc IDs change. I wouldn't count on trying to match any algorithm
> that Lucene uses....
>
> But you don't need to anyway. Just assign your own document ID that *you*
> can guarantee doesn't change (no relation to the Lucene ID) and store that
> wherever you want, then search on that. I believe you'll find that you can
> search fast enough on such an ID that you won't notice the time. At any
> rate, that's how I'd start out and only get fancier if performance proves
> unacceptable.
>
> Best
> Erick
>
> On 11/5/06, mukkamalla rama kumar wrote:
> >
> > Hi,
> >
> > How is this document number assigned to documents. Can i give my own
> > document number.
> >
> > I would like to get the document number for a particular file that i
> > added to an index.
> >
> >
> > ---------------------------------
> > Find out what India is talking about on - Yahoo! Answers India
> > Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8.
> Get
> > it NOW
> >
>
>
>
> ---------------------------------
> Find out what India is talking about on  - Yahoo! Answers India
> Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8. Get
> it NOW
>

------=_Part_43253_17469465.1162783942191--

From java-user-return-24397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 04:05:49 2006
Return-Path: <java-user-return-24397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31585 invoked from network); 6 Nov 2006 04:05:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 04:05:48 -0000
Received: (qmail 10133 invoked by uid 500); 6 Nov 2006 04:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10111 invoked by uid 500); 6 Nov 2006 04:05:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10100 invoked by uid 99); 6 Nov 2006 04:05:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 05 Nov 2006 20:05:52 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 05 Nov 2006 20:05:39 -0800
Received: (qmail 90186 invoked by uid 60001); 6 Nov 2006 04:05:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=YCpIXIxlIjsxSUNc2JL2GTGOTtmbWE/dRmjJEYiDDpYowoLmuIWvWjDD2eNJCSJvl2Xx412J2pWi7ARO0kKghIV41scEkIi+Jzi/gdXKB2r2sSRiA1tvAE4lwaY4yTcCRgYKurlbICJbNEQTkD9aUiWD4YBXMgH9dy524gHV7+M=  ;
Message-ID: <20061106040518.90184.qmail@web50307.mail.yahoo.com>
Received: from [74.65.202.166] by web50307.mail.yahoo.com via HTTP; Sun, 05 Nov 2006 20:05:18 PST
Date: Sun, 5 Nov 2006 20:05:18 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Minor issues with sample Web app
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I think this was already fixed after 2.0 release.  The fix would be in the =
SVN trunk.=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: David Halsted=
 <david.halsted@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Saturd=
ay, November 4, 2006 10:09:15 PM=0ASubject: Minor issues with sample Web ap=
p=0A=0AI ran into a couple of minor issues with the sample Web app included=
=0Ain the Lucene 2.0.0 download in results.jsp.  Not sure whether this=0Ali=
st is the right place to bring this up but thought I'd try.=0A=0A*) At line=
 81, there's a line that assumes a static=0Aparse(String,String,Analyzer) i=
n QueryParser, and there isn't one in=0Athis version, so I was throwing a J=
asper error.  It's easy to fix but=0Ait might confuse some folks:=0A=0A//qu=
ery =3D QueryParser.parse(queryString, "contents", analyzer);=0AQueryParser=
 qp =3D new QueryParser("contents", analyzer);=0Aquery =3D qp.parse(querySt=
ring);=0A=0A*) org.apache.lucene.demo.IndexHTML calls HTMLDocument, which c=
reates=0Aa field called "path" and fills it with the URL of the file.=0Ares=
ults.jsp has the following around line 130:=0A=0AString url =3D doc.get("ur=
l");=0A=0AOf course, that returns null (the field is called "path", not "ur=
l"),=0Aso the result sets you get back look really broken (none of the link=
s=0Ato the docuements work).  This works:=0A=0AString url =3D doc.get("path=
");=0A=0ASo, not a big deal, but might be nice to fix sometime.=0A=0ADave H=
alsted=0A=0A---------------------------------------------------------------=
------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A=
For additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=
=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 11:20:31 2006
Return-Path: <java-user-return-24398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39965 invoked from network); 6 Nov 2006 11:20:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 11:20:31 -0000
Received: (qmail 24070 invoked by uid 500); 6 Nov 2006 11:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23897 invoked by uid 500); 6 Nov 2006 11:20:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23879 invoked by uid 99); 6 Nov 2006 11:20:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 03:20:33 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Nov 2006 03:20:19 -0800
Received: (qmail 27475 invoked from network); 6 Nov 2006 10:30:38 -0000
Received: from unknown (HELO bhavin) (172.16.3.151)
  by mailserver with SMTP; 6 Nov 2006 10:30:38 -0000
Message-ID: <020d01c70191$38190d00$970310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: how to boost recent doc
Date: Mon, 6 Nov 2006 16:19:18 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_020A_01C701BF.4F7D1FD0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_020A_01C701BF.4F7D1FD0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi guys,

I want to boost recent documents....so that it top ups...
what could be best strategy...

- Bhavin pandya
------=_NextPart_000_020A_01C701BF.4F7D1FD0--


From java-user-return-24399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 11:29:09 2006
Return-Path: <java-user-return-24399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41863 invoked from network); 6 Nov 2006 11:29:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 11:29:09 -0000
Received: (qmail 34149 invoked by uid 500); 6 Nov 2006 11:29:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34115 invoked by uid 500); 6 Nov 2006 11:29:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34092 invoked by uid 99); 6 Nov 2006 11:29:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 03:29:13 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Nov 2006 03:28:58 -0800
Received: (qmail 5647 invoked from network); 6 Nov 2006 10:43:00 -0000
Received: from unknown (HELO bhavin) (172.16.3.151)
  by mailserver with SMTP; 6 Nov 2006 10:43:00 -0000
Message-ID: <023501c70192$f2454f30$970310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: how to boost recent document
Date: Mon, 6 Nov 2006 16:31:40 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0232_01C701C1.09C3C7D0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0232_01C701C1.09C3C7D0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi guys,

How to boost recent documents ...so that it top ups...
I mean what coulld be proper strategy...

- Bhavin pandya
------=_NextPart_000_0232_01C701C1.09C3C7D0--


From java-user-return-24400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 14:00:42 2006
Return-Path: <java-user-return-24400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97022 invoked from network); 6 Nov 2006 14:00:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 14:00:41 -0000
Received: (qmail 92006 invoked by uid 500); 6 Nov 2006 14:00:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91967 invoked by uid 500); 6 Nov 2006 14:00:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91949 invoked by uid 99); 6 Nov 2006 14:00:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:00:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 06:00:29 -0800
Received: by nf-out-0910.google.com with SMTP id a25so1143752nfc
        for <java-user@lucene.apache.org>; Mon, 06 Nov 2006 06:00:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TM7uz1H/Xe58tdxnW0da9bbfbtAmZuQkJ/m5D/4SznQoqk5GHIOeOiWozgEfpzwMLfuTr3765lo50GRudBu9mpjvbD0b54aJvlJpZdAFIeQ36J5tZ0mBddvSIa6d2bpTIxyEO/P3oMXqQSFeygVO//7Wl2GbBPrgCRpev0DHLTU=
Received: by 10.82.114.3 with SMTP id m3mr1278481buc.1162821606810;
        Mon, 06 Nov 2006 06:00:06 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Mon, 6 Nov 2006 06:00:06 -0800 (PST)
Message-ID: <359a92830611060600k77febeeaj39d4d2aa6628ce71@mail.gmail.com>
Date: Mon, 6 Nov 2006 09:00:06 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: reg : document number
In-Reply-To: <f7d99bf30611051932h609c4831g7f1a13c7ad66d018@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47649_33358613.1162821606525"
References: <359a92830611051703k46f47574t24ad39e4ee6a7fab@mail.gmail.com>
	 <565569.48983.qm@web7601.mail.in.yahoo.com>
	 <f7d99bf30611051932h609c4831g7f1a13c7ad66d018@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47649_33358613.1162821606525
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From the comments in the IndexModifier.java file (didn't see this in the
"regular" javadoc...

/**
   * Deletes all documents containing <code>term</code>.
   * This is useful if one uses a document field to hold a unique ID string
for
   * the document.  Then to delete such a document, one merely constructs a
   * term with the appropriate field and the unique ID string as its text
and
   * passes it to this method.  Returns the number of documents deleted.
   * @return the number of documents deleted
   * @see IndexReader#deleteDocuments(Term)
   * @throws IllegalStateException if the index is closed
   */
  public int deleteDocuments(Term term) throws IOException {

Unless space constrains you, this seems like a natural mapping for the file
path (UN_TOKENIZED). That is, just add the full file path to your document
at index time and delete the doucment with this call. You don't have to
STORE the path though......

Otherwise, you'd have some process like
1> search on a known unique field for the doucment
2> delete that document id
3> repeat.....

Or, you could get fancy and just inspect the terms in the index and get the
corresponding doc ID (see TermEnum and TermDocs), but I suspect that's
waaaay overkill.

But this comment from IndexReader Javadoc finally makes sense to me.....

<<<

For efficiency, in this API documents are often referred to via *document
numbers*, non-negative integers which each name a unique document in the
index. These document numbers are ephemeral--they may change as documents
are added to and deleted from an index. Clients should thus not rely on a
given document having the same number between sessions.

An IndexReader can be opened on a directory for which an IndexWriter is
opened already, but it cannot be used to delete documents from the index
then.

>>>

I've wondered for a while why you delete documents through an IndexReader.
Seemed kind of funky. It finally makes sense. An IndexReader is a snapshot
of an index, so while you have that reader open, the DocIDs won't change for
that reader. Indeed, you don't get to see updates to the index until you
close/reopen your reader. But you can't delete through a reader while a
writer is open. Because the writer may change DocIDs. So you can't do both
at once..

The caution is relying on DocIDs between sessions, especially storing DocIDs
somewhere else and trying to go back and use them with a different
indexreader. While the reader is open, you can freely delete documents
without fear of doc IDs changing is how I read it.

Erick

P.S. This would be yet another fine time for folks who really know to tell
me I just don't get it <G>.

On 11/5/06, Jin Yiqing <yiqing.jin@gmail.com> wrote:
>
> I used to have this question too. My solution is use "searcher" to get the
> document then detele it. To do this you should know how to give a query
> that
> could get the exact one doc you wanted.  Hope  this  could  do some help
> to
> u.
>
> 2006/11/6, mukkamalla rama kumar <mukkamalla_r@yahoo.co.in>:
> >
> > Thanks for your reply,
> >
> >       Actually what my concern was that,
> >   I have a file repository, when files are added to this repository i
> > would be updating the index by the corresponding document.
> >
> >   But during deletion of the file in the file repository i have to
> delete
> > the document from the index that i have built. The IndexModifer provides
> the
> > option
> >
> >   public void deleteDocument(int docNum)
> >
> >   but this docNum will be varying for the documents, so how can i delete
> > the document when the files they represent are deleted in my file
> repository
> >
> >   Thanks in advance for your reply
> >
> >
> >
> > Erick Erickson <erickerickson@gmail.com> wrote:
> >   Do NOT rely on the Lucene document number. It changes periodically. As
> I
> > understand it the general algorithm is that each doc gets an ID one
> > greater
> > than the current max doc ID at INDEX time. However, when you delete
> > documents and optimize your index, the document IDs change.
> > Simplistically,
> > say you have docs indexed with IDs 1, 2, 3, 4, 5, remove 2 and
> reoptimize.
> > You then have IDs 1, 2, 3, 4 where 2, 3, 4 were 3, 4, 5 respectively.
> >
> > WARNING: I have no idea whether that's exactly how it works. The point
> is
> > that the doc IDs change. I wouldn't count on trying to match any
> algorithm
> > that Lucene uses....
> >
> > But you don't need to anyway. Just assign your own document ID that
> *you*
> > can guarantee doesn't change (no relation to the Lucene ID) and store
> that
> > wherever you want, then search on that. I believe you'll find that you
> can
> > search fast enough on such an ID that you won't notice the time. At any
> > rate, that's how I'd start out and only get fancier if performance
> proves
> > unacceptable.
> >
> > Best
> > Erick
> >
> > On 11/5/06, mukkamalla rama kumar wrote:
> > >
> > > Hi,
> > >
> > > How is this document number assigned to documents. Can i give my own
> > > document number.
> > >
> > > I would like to get the document number for a particular file that i
> > > added to an index.
> > >
> > >
> > > ---------------------------------
> > > Find out what India is talking about on - Yahoo! Answers India
> > > Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8.
> > Get
> > > it NOW
> > >
> >
> >
> >
> > ---------------------------------
> > Find out what India is talking about on  - Yahoo! Answers India
> > Send FREE SMS to your friend's mobile from Yahoo! Messenger Version 8.
> Get
> > it NOW
> >
>
>

------=_Part_47649_33358613.1162821606525--

From java-user-return-24401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 15:14:18 2006
Return-Path: <java-user-return-24401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31732 invoked from network); 6 Nov 2006 15:14:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 15:14:17 -0000
Received: (qmail 68976 invoked by uid 500); 6 Nov 2006 15:14:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68942 invoked by uid 500); 6 Nov 2006 15:14:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68931 invoked by uid 99); 6 Nov 2006 15:14:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 07:14:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.113.241.148] (HELO iss04.interliant.com) (207.113.241.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 07:14:01 -0800
Received: from EX-008.mail.navisite.com (ex-008.interliant.com [207.113.240.188])
	by iss04.interliant.com (8.10.2/8.10.2) with ESMTP id kA6FDa010782
	for <java-user@lucene.apache.org>; Mon, 6 Nov 2006 09:13:36 -0600 (CST)
Received: from [192.168.1.100] ([71.56.54.96]) by EX-008.mail.navisite.com over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 6 Nov 2006 09:13:35 -0600
Message-ID: <454F5113.3010202@hibernate.org>
Date: Mon, 06 Nov 2006 10:13:23 -0500
From: Emmanuel Bernard <emmanuel@hibernate.org>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Modelling relational data in Lucene Index?
References: <20061103030334.2310.qmail@web52009.mail.yahoo.com>	 <454AB786.4030402@gmail.com>	 <6e3ae6310611021957o137b3b44ka72a55613f5a4b41@mail.gmail.com>	 <454B9873.80703@hibernate.org> <6e3ae6310611031209o8544a5dqa7134c3fdfb42c10@mail.gmail.com>
In-Reply-To: <6e3ae6310611031209o8544a5dqa7134c3fdfb42c10@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 06 Nov 2006 15:13:35.0733 (UTC) FILETIME=[21471250:01C701B6]
X-Virus-Checked: Checked by ClamAV on apache.org

I had a quick look at SOLR and DBSight. They seem to achieve a different 
goal than Hibernate Lucene.
The formers belong to the project box category: you set up a server that 
will handle the search for you. The application will then delegate the 
work to those servers.
The latter belongs to the framework category: you use it inside your 
Hibernate/EJB 3.0 application to enable an index based search feature.
To a certain extend, it is the same difference between a Google box and 
Lucene.

You can write some code based on the latter to covers the formers 
features esp the platform abstraction (PHP, .net), but it is probably a 
lot of work and that is not really the point.
You can write some code based on the formers to enable indexing and 
search of your persistent domain model (persisted through Hibernate), 
but that is probably more work.

Really it is a matter of easing the pain from one side of the problem or 
the other side. I don't see much competition between the 2 approaches, 
they cover different goals.

To specifically answer some of your remarks:
 - yes, you need to write some code to recreate an index. Literally, 6 
lines of code.
 - no, I do not currently cache the searcher because, Hibernate is 
transactional by nature and protect yourself as much as possible from 
read uncommited and other data inconsistencies. I guess I could 
implement some caching capabilities using reader.isCurrent() or 
something equivalent.
 - the ability to split searchers servers from indexers servers is on my 
todo list.

Cheers

Emmanuel


Chris Lu wrote:
> I personally like your effort, but technically I would  disagree.
>
> The SOLR project, and the project I am working on, DBSight, have an
> detached approach which is implementation agnostic, no matter if it's
> java, ruby, php, .net. The return results can be a rendered HTML,
> JSON, XML. I don't think you can be more flexible than that. If
> creating an new index takes 5 minutes without any coding, you can
> create something more creative.
>
>> From business side, you don't need to worry about indexing when
> designing a system. New requirement may come. It's very hard trying to
> anticipate all the needs.
>
> Technically, detached approach gives more flexible on resources like
> CPU, memory, hard drive. For example, if your index grows large, say
> 1G, indexing can take hours with merging, I am not sure how compass or
> hibernate/lucene handles it. Need to re-write code at that time? I
> actually feel it's a dangerous trap.
>
>> I've introduced a session.index() which forces the (re)indexing of the
>> document
> So does it mean you need to write some code to fix the index if it's 
> crashed?
>
>> What do you mean by multithread safe? The indexing?
>> the indexing is multithread safe in the Hibernate Lucene integration
> The indexing can be threadsafe. But will it affect the searching? With
> many files changing and merging, if you cache the searcher. the
> searching will have "read passed EOF" exceptions. If you don't cache
> the searcher, you will loose the built-in caching, FieldCacheImpl, in
> Lucene.
>
>>
>> The query process?
>> the query doesn't have to since you query on a give session (aka user
>> conversation), so no multithread threat here.
> So you are not caching searcher.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 15:37:36 2006
Return-Path: <java-user-return-24402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38710 invoked from network); 6 Nov 2006 15:37:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 15:37:34 -0000
Received: (qmail 33021 invoked by uid 500); 6 Nov 2006 15:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32982 invoked by uid 500); 6 Nov 2006 15:37:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32971 invoked by uid 99); 6 Nov 2006 15:37:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 07:37:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 07:37:13 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 7495_74e491fe_6dad_11db_9592_003048245df9;
	Mon, 06 Nov 2006 10:42:59 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: injecting fields looked up from DB at the runtime - Solr/Lucene question
Date: Mon, 6 Nov 2006 10:36:04 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F076928AB@tormail01.cihi.ca>
In-Reply-To: <c68e39170611050636n151727c8j86a444b8ec34babe@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: injecting fields looked up from DB at the runtime - Solr/Lucene question
Thread-Index: AccA59Ru1UgNTk+nSCKQmQkqkJL8IQA0QDsQ
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

So, if I'll be using Solr, what's the right strategy? Is it possible to
redefine SolrDocument class through configuration? If not, would it be
safe to inject these properties through Aspects while maintaining the
whole framework intact and in workable condition? (eg, if at some point
for some reason the field is cross checked with content of the index,
which won't work if I'm injecting field from the DB, or smth like
that...)

Vlad


-----Original Message-----
From: yseeley@gmail.com [mailto:yseeley@gmail.com] On Behalf Of Yonik
Seeley
Sent: Sunday, November 05, 2006 9:36 AM
To: java-user@lucene.apache.org
Subject: Re: injecting fields looked up from DB at the runtime -
Solr/Lucene question

On 11/5/06, Vladimir Olenin <VOlenin@cihi.ca> wrote:
> - when the Hits objects are returned from IndexSearcher (as a result
of some search), 'inject' 'info' fields into the 'Hit' objects at
runtime by looking the values up in the DB. The main purpose is to avoid
storing 'info' fields in the index as 'stored' fields.

Yes, I've considered doing that at the Solr layer... adding something
like a subclassable SolrDocument.  An implementation could add other
fields by retrieving them from a database.

Upsides: simpler clients that don't need to understand where stored
fields are coming from.
Downsides: you tie yourself to a database (another thing to worry about
in an environment where you need HA).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search
server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 15:40:26 2006
Return-Path: <java-user-return-24403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39343 invoked from network); 6 Nov 2006 15:40:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 15:40:25 -0000
Received: (qmail 37630 invoked by uid 500); 6 Nov 2006 15:40:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37393 invoked by uid 500); 6 Nov 2006 15:40:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37382 invoked by uid 99); 6 Nov 2006 15:40:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 07:40:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 07:40:15 -0800
Received: by ug-out-1314.google.com with SMTP id k40so897073ugc
        for <java-user@lucene.apache.org>; Mon, 06 Nov 2006 07:39:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Kl54bGcJ9g4Dlh3WT006Us7llTpBA2VDrzuekwM0FHzagg2mMmIzPT6tzUiWst9RqbCR5Fxwmo9io2djP0PdsMMXUPTh72ddM5CWIB8kItzpMP/7Esmb4cg7JRuTb/eYaygVssa6KzxKKpB6WpIBzCY0fnMaZFZ6/biUxPcowmo=
Received: by 10.82.142.9 with SMTP id p9mr1298680bud.1162827591053;
        Mon, 06 Nov 2006 07:39:51 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Mon, 6 Nov 2006 07:39:50 -0800 (PST)
Message-ID: <c68e39170611060739n44181371pf3b6524d89a48074@mail.gmail.com>
Date: Mon, 6 Nov 2006 10:39:50 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: injecting fields looked up from DB at the runtime - Solr/Lucene question
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F076928AB@tormail01.cihi.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170611050636n151727c8j86a444b8ec34babe@mail.gmail.com>
	 <373399D6389D8C42B4EAD9BE2B6B5C5F076928AB@tormail01.cihi.ca>
X-Google-Sender-Auth: b84efc19b6f70432
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/6/06, Vladimir Olenin <VOlenin@cihi.ca> wrote:
> So, if I'll be using Solr, what's the right strategy? Is it possible to
> redefine SolrDocument class through configuration?

There isn't currently a SolrDocument class... it's all hypothetical.
But yes, I imagine it would work by allowing one to specify their own
implementation via configuration.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 15:42:38 2006
Return-Path: <java-user-return-24404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39956 invoked from network); 6 Nov 2006 15:42:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 15:42:37 -0000
Received: (qmail 42592 invoked by uid 500); 6 Nov 2006 15:42:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42566 invoked by uid 500); 6 Nov 2006 15:42:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42550 invoked by uid 99); 6 Nov 2006 15:42:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 07:42:32 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.129] (HELO web28109.mail.ukl.yahoo.com) (217.146.182.129)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Nov 2006 07:42:17 -0800
Received: (qmail 13707 invoked by uid 60001); 6 Nov 2006 15:41:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=fvAkp9q0gbIchQ/+ZQR1cKbkTmPXYkSEn79Cu4PWTxmWstw74grDSI30JN9D/diD0+OVlsrhDTXvkHkA8VdBKW6fhFnchTiXjfQEQxGsAnGpPbVMIjMNMjWSDCZ+heCuUyJ10QxinylKOXcZWdSJGtSheQ1xCr+b+B//5hK39Og=  ;
Message-ID: <20061106154155.13705.qmail@web28109.mail.ukl.yahoo.com>
Received: from [217.110.73.186] by web28109.mail.ukl.yahoo.com via HTTP; Mon, 06 Nov 2006 16:41:55 CET
Date: Mon, 6 Nov 2006 16:41:55 +0100 (CET)
From: hans meiser <fischauto333@yahoo.de>
Subject: whats the correct way to do normalisation?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1022568464-1162827715=:13187"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1022568464-1162827715=:13187
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  Lucene indexes documents from 3 different countries here
(English, German and French). I want to normalize some 
characters like umlauts. ä -> ae
  I did it in the following way:
  New Analyzer:
public class SpecialCharsAnalyzer extends StandardAnalyzer {
 public SpecialCharsAnalyzer() {
 }
   public SpecialCharsAnalyzer(Set stopWords) {
  super(stopWords);
 }
   public SpecialCharsAnalyzer(String[] stopWords) {
  super(stopWords);
 }
   public SpecialCharsAnalyzer(File stopwords) throws IOException {
  super(stopwords);
 }
   public SpecialCharsAnalyzer(Reader stopwords) throws IOException {
  super(stopwords);
 }
   @Override
 public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream ts = super.tokenStream(fieldName, reader);
  ts = new SpecialCharacterFilter(ts);
  return ts;
 }
}
  Is the SpecialCharsAnalyzer::tokenStream implemented correctly?
  
New Filter:
public class SpecialCharacterFilter extends TokenFilter {
 public SpecialCharacterFilter(TokenStream input) {
  super(input);
 }
   @Override
 public Token next() throws IOException {
  Token t = input.next();
    if (t == null)
   return null;
    String str = t.termText();
  if (str.indexOf("ä") != -1) {
   str = str.replaceAll("ä", "ae");
   t = new Token(str, t.startOffset(), t.endOffset() + 1);
  }
  return t;
 }
}
  Is the SpecialCharacterFilter::next implemented correctly, 
in case of the "ä"?
  
Is this way the correct way to do normalisation?
  thx

 		
---------------------------------
NEU: Fragen stellen - Wissen, Meinungen und Erfahrungen teilen. Jetzt auf Yahoo! Clever.
--0-1022568464-1162827715=:13187--

From java-user-return-24405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 16:03:28 2006
Return-Path: <java-user-return-24405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46009 invoked from network); 6 Nov 2006 16:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 16:03:26 -0000
Received: (qmail 81494 invoked by uid 500); 6 Nov 2006 16:03:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81452 invoked by uid 500); 6 Nov 2006 16:03:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81441 invoked by uid 99); 6 Nov 2006 16:03:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 08:03:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 08:03:16 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 2266_18ce1788_6db1_11db_8ce9_003048245df9;
	Mon, 06 Nov 2006 11:09:03 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Intermittent search performance problem
Date: Mon, 6 Nov 2006 11:02:10 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F076928F3@tormail01.cihi.ca>
In-Reply-To: <8a29e7880611031348p24c4993dp9e9624c0effc52c6@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Intermittent search performance problem
Thread-Index: Acb/kcpok5ooX2iqQBqUdcvGJFAb1ACKG7NQ
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Any profiler can add it's own overhead. You might try the "-verbose:gc"
JVM flag (if you haven't tried it yet). The fastest way to check if you
problems are GC related. Check JVM docs (or plainly - 'java -help' for
more flags. There are some '-X' flags for more detailed info, as well as
flags to dump GC output to a separate file). Watch for 'Tenured
generation' collection ("Full GC"), which are 'stop the world' ones.

All in all, I agree with Yonik and am pretty positive that it's a full
GC. I was actually getting similar pauses time on a similar heap size
with a similar application (custom made 'all in memory' search engine,
so I'd guess the number of object references and their complexity should
be of a similar order).

Also, turn off explicit GC (-XX:+DisableExplicitGC) to disable any
'System.gc()' calls. Though log dump should be sufficient, this is just
another way to make sure if it's a GC that gives you the problems (eg,
if you set -Xmx to 1Gb and you current heap size is 700M AND you are
experiencing pauses without hitting the top limit, it MIGHT indicate
that it's not GC related issue, but generally does NOT guarantee it. GC
Log is the safest and fastest way to sort this kind of problems out).

Vlad

-----Original Message-----
From: Ben Dotte [mailto:ben.dotte@gmail.com]=20
Sent: Friday, November 03, 2006 4:48 PM
To: java-user@lucene.apache.org
Subject: Re: Intermittent search performance problem

Good suggestion, I tried watching the GCs in YourKit while testing but
unfortunately they don't seem to line up with the searches that take
forever. They also don't last long enough to make up that kind of time.
I have our heap limited to 1GB right now and its using around 768MB of
that.

On 11/3/06, Ben Dotte <ben.dotte@gmail.com> wrote:
> I'm trying to figure out a way to troubleshoot a performance problem=20
> we're seeing when searching against a memory-based index. What happens

> is we will run a search against the index and it generally returns in
> 1 second or less. But every once in a while it takes 15-20 seconds for

> the exact same search for no apparent reason.

Are you sure it's not just a big GC?  How big is your heap?

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search
server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 16:03:46 2006
Return-Path: <java-user-return-24406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46178 invoked from network); 6 Nov 2006 16:03:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 16:03:44 -0000
Received: (qmail 84459 invoked by uid 500); 6 Nov 2006 16:03:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84418 invoked by uid 500); 6 Nov 2006 16:03:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84407 invoked by uid 99); 6 Nov 2006 16:03:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 08:03:48 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO nz-out-0102.google.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 08:03:34 -0800
Received: by nz-out-0102.google.com with SMTP id k1so832477nzf
        for <java-user@lucene.apache.org>; Mon, 06 Nov 2006 08:03:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TN5IrK5SHgTENTS7do9lnPKAUhRSseYwyogKVy7Ebjha4p2BRhE6Icuj0Bev2Kmx0HnJOuqRXdcy2klWLqmeSae5GhAOhiMwFSWOo2OdAruYzVcTzzfqiResOh3TZtL0+JENL6DxVLoB4gyKFcvp9t0rVXiwgVPNxl+EejmGN9Q=
Received: by 10.65.239.14 with SMTP id q14mr5851606qbr.1162828992413;
        Mon, 06 Nov 2006 08:03:12 -0800 (PST)
Received: by 10.65.22.5 with HTTP; Mon, 6 Nov 2006 08:03:12 -0800 (PST)
Message-ID: <48b038c60611060803h442bf1b7mfc173227fc951d2a@mail.gmail.com>
Date: Mon, 6 Nov 2006 11:03:12 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: whats the correct way to do normalisation?
In-Reply-To: <20061106154155.13705.qmail@web28109.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58586_23143871.1162828992159"
References: <20061106154155.13705.qmail@web28109.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58586_23143871.1162828992159
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

Did you take a look at IsoLatin1AccentFilter ?

Patrick

On 11/6/06, hans meiser <fischauto333@yahoo.de> wrote:
>
> Hi,
>
>   Lucene indexes documents from 3 different countries here
> (English, German and French). I want to normalize some
> characters like umlauts. =E4 -> ae
>   I did it in the following way:
>   New Analyzer:
> public class SpecialCharsAnalyzer extends StandardAnalyzer {
> public SpecialCharsAnalyzer() {
> }
>    public SpecialCharsAnalyzer(Set stopWords) {
>   super(stopWords);
> }
>    public SpecialCharsAnalyzer(String[] stopWords) {
>   super(stopWords);
> }
>    public SpecialCharsAnalyzer(File stopwords) throws IOException {
>   super(stopwords);
> }
>    public SpecialCharsAnalyzer(Reader stopwords) throws IOException {
>   super(stopwords);
> }
>    @Override
> public TokenStream tokenStream(String fieldName, Reader reader) {
>     TokenStream ts =3D super.tokenStream(fieldName, reader);
>   ts =3D new SpecialCharacterFilter(ts);
>   return ts;
> }
> }
>   Is the SpecialCharsAnalyzer::tokenStream implemented correctly?
>
> New Filter:
> public class SpecialCharacterFilter extends TokenFilter {
> public SpecialCharacterFilter(TokenStream input) {
>   super(input);
> }
>    @Override
> public Token next() throws IOException {
>   Token t =3D input.next();
>     if (t =3D=3D null)
>    return null;
>     String str =3D t.termText();
>   if (str.indexOf("=E4") !=3D -1) {
>    str =3D str.replaceAll("=E4", "ae");
>    t =3D new Token(str, t.startOffset(), t.endOffset() + 1);
>   }
>   return t;
> }
> }
>   Is the SpecialCharacterFilter::next implemented correctly,
> in case of the "=E4"?
>
> Is this way the correct way to do normalisation?
>   thx
>
>
> ---------------------------------
> NEU: Fragen stellen - Wissen, Meinungen und Erfahrungen teilen. Jetzt auf
> Yahoo! Clever.
>

------=_Part_58586_23143871.1162828992159--

From java-user-return-24407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 16:28:18 2006
Return-Path: <java-user-return-24407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53583 invoked from network); 6 Nov 2006 16:28:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 16:28:17 -0000
Received: (qmail 35206 invoked by uid 500); 6 Nov 2006 16:28:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35183 invoked by uid 500); 6 Nov 2006 16:28:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35172 invoked by uid 99); 6 Nov 2006 16:28:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 08:28:19 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.128] (HELO web28108.mail.ukl.yahoo.com) (217.146.182.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 06 Nov 2006 08:28:03 -0800
Received: (qmail 11004 invoked by uid 60001); 6 Nov 2006 16:27:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DadpGGQMp+VOiVtAjIRsUobV61ZmrAHEY7RypOwtUeCD+gAl69JAPeARQ+VuVgQZ1ea3guENvpHIbMGly1h0+jXJTq+awIyw3G5LiWAYpHPEsuBHQx8v9dhMMp3lzLP7aVrQmX6pcMLyozJtsEzwAbCTFbZw8OleGkR77bgyXEM=  ;
Message-ID: <20061106162741.11002.qmail@web28108.mail.ukl.yahoo.com>
Received: from [217.110.73.186] by web28108.mail.ukl.yahoo.com via HTTP; Mon, 06 Nov 2006 17:27:41 CET
Date: Mon, 6 Nov 2006 17:27:41 +0100 (CET)
From: hans meiser <fischauto333@yahoo.de>
Subject: Re: whats the correct way to do normalisation?
To: java-user@lucene.apache.org
In-Reply-To: <48b038c60611060803h442bf1b7mfc173227fc951d2a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1264663575-1162830461=:9043"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1264663575-1162830461=:9043
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  > Did you take a look at IsoLatin1AccentFilter ?
   
  It nearly do the same i need, but not perfectly.
   
   public final Token next() throws java.io.IOException {
 final Token t = input.next();
   if (t == null)
   return null;   
 return new Token(removeAccents(t.termText()), t.startOffset(), t.endOffset(), t.type());
 }
   
  Here also a new Token is created. The question i have, why the endoffset is not
  corrected for the new created token? Some times the new token is bigger than before.
  Complete code link:
  http://developer.spikesource.com/spikewatch.logs/fedora-3-i386/2221/lucene/reports/clover/org/apache/lucene/analysis/ISOLatin1AccentFilter.html
  


 

 		
---------------------------------
Keine Lust auf Tippen? Rufen Sie Ihre Freunde einfach an.
  Yahoo! Messenger. Jetzt installieren . 
--0-1264663575-1162830461=:9043--

From java-user-return-24408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 17:26:53 2006
Return-Path: <java-user-return-24408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74998 invoked from network); 6 Nov 2006 17:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 17:26:52 -0000
Received: (qmail 68765 invoked by uid 500); 6 Nov 2006 17:26:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68689 invoked by uid 500); 6 Nov 2006 17:26:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68678 invoked by uid 99); 6 Nov 2006 17:26:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 09:26:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 09:26:33 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 6 Nov 2006 09:26:12 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C701C8.A7BC177C"
Subject: Doc classification / categorization with Lucene ?
Date: Mon, 6 Nov 2006 09:26:12 -0800
Message-ID: <5CCB14CB6DCFB147A4D09CC90808B0F30D6E95@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Doc classification / categorization with Lucene ?
Thread-Index: AccByKe0Vpf84yEmT9KyWnYydKJiUg==
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Nov 2006 17:26:12.0549 (UTC) FILETIME=[A7E8D750:01C701C8]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C701C8.A7BC177C
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,
=20
What are the best practices for document classification / categorization =
using Lucene?  Any recommendations as far as manual vs. automatic, which =
products to use or not to use?  Does Lucene offer anything out of the =
box?
=20
Thanks,
- Dmitry

------_=_NextPart_001_01C701C8.A7BC177C--

From java-user-return-24409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 18:01:00 2006
Return-Path: <java-user-return-24409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85227 invoked from network); 6 Nov 2006 18:00:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 18:00:59 -0000
Received: (qmail 40968 invoked by uid 500); 6 Nov 2006 18:01:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40950 invoked by uid 500); 6 Nov 2006 18:01:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 84561 invoked by uid 99); 6 Nov 2006 16:51:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
X-IronPort-AV: i="4.09,392,1157342400"; 
   d="scan'208"; a="18791929:sNHT66368197"
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B0240DD99@mt-exch1.nuance.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@nuance.com>
To: java-user@lucene.apache.org
Subject: RE: "Catalog" backend for document stored fields?
Date: Mon, 6 Nov 2006 11:50:37 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2658.27)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

[sorry for the long delay for my answer, we are having some issues with our
mail server...]

Thanks for your comment.  Yes it would make sense if the log files were not
so big.  In fact, I'm only indexing a subset of the log information.
Because I store the information in Lucene, it is easier and faster to
retrieve the information.  

For example, generating a report by reading the logs themselves takes ~18
hours.  Converting to xml and indexing the logs takes ~12 hours and each
report takes <20 minutes to generate.  Since we often generate (different)
reports, the Lucene approach is way faster. [Note that I wrote both classes
to convert to xml and to index the logs.  The log2xml step is quite useful
because the xml really has all the log information and compressing the xml
with xmlppm reduces the size of the logs by 97%.  This way I can archive the
log.xml without wasting much space.]

As another comparison point: the logs takes 100Gig per week while the
indices 35Gig per month!  This design is already more optimal than the first
approach.  But I'm trying to make it better.

I really do think that this dictionary/catalog approach could benefit others
Lucene users.  I'm not against the idea of doing it myself.  I just need
some pointers and guidelines for all the gurus out there!

Thanks for all you help!

Jp
-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com] 
Sent: Tuesday, October 24, 2006 1:50 AM
To: java-user@lucene.apache.org
Subject: Re: "Catalog" backend for document stored fields?

> I'm indexing logs from a transaction-based application.
> ...
> millions documents per month, the size of the indices is ~35 gigs per
month
> (that's the lower bound).  I have no choice but to 'store' each field
values
> (as well as indexing/tokenizing them) because I'll need to retrieve them
in
> order to create various reports.  Also, I have a backlog of ~2 years of
logs
> to index!
> ...
> 1-       is there someone out there that already wrote an extension to
> Lucene so that 'stored' string for each document/field is in fact stored
in
> a centralized repository? Meaning, only an 'index' is actually stored in
the
> document and the real data is put somewhere else.

Do you gain anything from storing the document fields within Lucene?  In
case not, especially if log files are kept somewhere, you cuold make all
'content' fields unstored (reduce index size), and add a stored non-indexed
ID field. It can also be a POINTER field - e.g. <log file name + start
offset + length>.  At search time, for found documents you can retrieve
this ID/POINTER field and then fetch the document from the (original) log
file. Makes sense?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 06 20:49:45 2006
Return-Path: <java-user-return-24410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53520 invoked from network); 6 Nov 2006 20:49:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2006 20:49:43 -0000
Received: (qmail 95850 invoked by uid 500); 6 Nov 2006 20:49:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95825 invoked by uid 500); 6 Nov 2006 20:49:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95814 invoked by uid 99); 6 Nov 2006 20:49:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:49:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 12:49:31 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5EBCA30EFC16; Mon,  6 Nov 2006 15:49:10 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id EBF4130EFC16
	for <java-user@lucene.apache.org>; Mon,  6 Nov 2006 15:48:49 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <20061106162741.11002.qmail@web28108.mail.ukl.yahoo.com>
References: <20061106162741.11002.qmail@web28108.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0F0CA5BF-D513-4F55-AC61-B77B098BC58D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: whats the correct way to do normalisation?
Date: Mon, 6 Nov 2006 15:48:43 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Nov 6, 2006, at 11:27 AM, hans meiser wrote:

> Hi,
>
>> Did you take a look at IsoLatin1AccentFilter ?
>
>   It nearly do the same i need, but not perfectly.
>
>    public final Token next() throws java.io.IOException {
>  final Token t = input.next();
>    if (t == null)
>    return null;
>  return new Token(removeAccents(t.termText()), t.startOffset(),  
> t.endOffset(), t.type());
>  }
>
>   Here also a new Token is created. The question i have, why the  
> endoffset is not
>   corrected for the new created token? Some times the new token is  
> bigger than before.
>   Complete code link:
>   http://developer.spikesource.com/spikewatch.logs/fedora-3- 
> i386/2221/lucene/reports/clover/org/apache/lucene/analysis/ 
> ISOLatin1AccentFilter.html

For highlighting purposes, it's best to keep the offsets in the  
original text, not adjusted for token mutation.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 03:17:34 2006
Return-Path: <java-user-return-24411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86425 invoked from network); 7 Nov 2006 03:17:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 03:17:31 -0000
Received: (qmail 72628 invoked by uid 500); 7 Nov 2006 03:17:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71663 invoked by uid 500); 7 Nov 2006 03:17:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71652 invoked by uid 99); 7 Nov 2006 03:17:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 19:17:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 19:17:20 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GhHSO-0006zG-8d
	for java-user@lucene.apache.org; Mon, 06 Nov 2006 19:17:00 -0800
Message-ID: <7211921.post@talk.nabble.com>
Date: Mon, 6 Nov 2006 19:17:00 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Filter query method
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Is there anyone built your own filter query before, in order to perform
search within search results. Meaning after the first search, the result is
cached and the second search searches the result that return from the first
searched, and is not searching the whole index again.

   Just wondering by using Hits, can it achieved the result above?

   I have try using the boolean search but the result wasn't what I
expected.

   Thanks

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Filter-query-method-tf2586547.html#a7211921
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 04:54:59 2006
Return-Path: <java-user-return-24412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5883 invoked from network); 7 Nov 2006 04:54:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 04:54:58 -0000
Received: (qmail 62761 invoked by uid 500); 7 Nov 2006 04:55:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62728 invoked by uid 500); 7 Nov 2006 04:55:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62717 invoked by uid 99); 7 Nov 2006 04:55:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 20:55:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 20:54:49 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id CAA4B5B774; Mon,  6 Nov 2006 20:54:27 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C08187F403
	for <java-user@lucene.apache.org>; Mon,  6 Nov 2006 20:54:27 -0800 (PST)
Date: Mon, 6 Nov 2006 20:54:27 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <7211921.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu>
References: <7211921.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:    Is there anyone built your own filter query before, in order to perform
: search within search results. Meaning after the first search, the result is
: cached and the second search searches the result that return from the first
: searched, and is not searching the whole index again.
:
:    Just wondering by using Hits, can it achieved the result above?

1) it's typically not neccessary to worry about the caching of the results
too much for the simple cases that Hits can be used in.

2) you have to decide what semantics you are interested in ... is it a
"search A within a result set B" where the score is only based on query A,
or is it a "search on A and B" where A and B both make up the score?

...in the first case, you can use the serch method that takes a Filter
and some caching is possible, in the second case BooleanQuery is what you
really want.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 05:44:38 2006
Return-Path: <java-user-return-24413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17186 invoked from network); 7 Nov 2006 05:44:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 05:44:37 -0000
Received: (qmail 21736 invoked by uid 500); 7 Nov 2006 05:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21706 invoked by uid 500); 7 Nov 2006 05:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21695 invoked by uid 99); 7 Nov 2006 05:44:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 21:44:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 21:44:27 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GhJkl-0007jW-0w
	for java-user@lucene.apache.org; Mon, 06 Nov 2006 21:44:07 -0800
Message-ID: <7212918.post@talk.nabble.com>
Date: Mon, 6 Nov 2006 21:44:07 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7211921.post@talk.nabble.com> <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Chris,

   My scenario is:

      I will key in the first search value in the text box, then the first
search result will be return. Next, I will clear the first search value and
key in the second search value within the same text box. The 2nd search
value will search the first result, for instance, my first result found 3
records, after the 2nd search is performed, it should be return 1 record.
Meaning the first result is searched from the index folder, while 2nd search
should not search the index directory again.

   I hope the scenario above make sense to you. 

   Below a the codes that I have written, hope you can point out which part
I m done wrong. Thanks

      reader = IndexReader.open(DsConstant.indexDir);
		   Searcher searcher = new IndexSearcher(reader);
		   Analyzer analyzer = new StandardAnalyzer();
		   QueryParser parser = new QueryParser(DsConstant.idxFileContent,
analyzer);
		   Query query = parser.parse(searchString);
			
		   BooleanQuery bq = new BooleanQuery();
		   query = new FilteredQuery(new MatchAllDocQuery(), new
SingleDocTestFilter(0));
		   bq.add(query, BooleanClause.Occur.MUST);
		   query = new FilteredQuery(new MatchAllDocQuery(), new
SingleDocTestFilter(0));
		   bq.add(query, BooleanClause.Occur.MUST);
		   
                   searchHits = searcher.search(query);

   Unfortunately, the codes above doesn't return any result. Hope to hear
from you again.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Filter-query-method-tf2586547.html#a7212918
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 07:18:35 2006
Return-Path: <java-user-return-24414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42128 invoked from network); 7 Nov 2006 07:18:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 07:18:35 -0000
Received: (qmail 23663 invoked by uid 500); 7 Nov 2006 07:18:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23625 invoked by uid 500); 7 Nov 2006 07:18:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23614 invoked by uid 99); 7 Nov 2006 07:18:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 23:18:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 23:18:26 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kA77HrND012069
	for <java-user@lucene.apache.org>; Tue, 7 Nov 2006 09:17:53 +0200
Received: from [10.142.3.11] ([10.142.3.11]) by nimitz with ESMTP
	 id mb79h1a1; 7 Nov 2006 09:17:00 +0200
Message-ID: <4550330F.7040209@teamware.com>
Date: Tue, 07 Nov 2006 18:17:35 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: idf in scores
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

I've been trying to understand how idf is arrived at from a query.  I have a 
single Document with 9 fields.  One field "subject" has the phrase "RFC2822 - 
Internet Message Format" and a second "body" has the contents of rfc2822.

The other fields contain additional meta data.  If I search for subject:message 
I get the following explanation.

0.15342641 = fieldWeight(subject:message in 0), product of:
   1.0 = tf(termFreq(subject:message)=1)
   0.30685282 = idf(docFreq=1)
   0.5 = fieldNorm(field=subject, doc=0)

why does the idf get that value?
Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 07:44:05 2006
Return-Path: <java-user-return-24415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48993 invoked from network); 7 Nov 2006 07:44:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 07:44:04 -0000
Received: (qmail 59372 invoked by uid 500); 7 Nov 2006 07:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59262 invoked by uid 500); 7 Nov 2006 07:44:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59215 invoked by uid 99); 7 Nov 2006 07:44:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 23:44:03 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of khoon.ee.gan@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 06 Nov 2006 23:43:49 -0800
Received: by nf-out-0910.google.com with SMTP id n28so176765nfc
        for <java-user@lucene.apache.org>; Mon, 06 Nov 2006 23:43:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iIq8Ow1wzuUAIDebn365+2q+XePXsarW6eDMzHVtesI00kuBP+9msl2FBqVfahNi2Mbh47szRjVzTi+Hizt/3KgN+qXwS6b82qUgfPDAFqWQTMp/BcTtbkRx/aZeiCI+sp2WJH7yLbfAKhZPMFoIwJAfMhm5VOg4+9H/4J9a8Pk=
Received: by 10.82.136.4 with SMTP id j4mr1456803bud.1162884995333;
        Mon, 06 Nov 2006 23:36:35 -0800 (PST)
Received: by 10.82.140.20 with HTTP; Mon, 6 Nov 2006 23:36:35 -0800 (PST)
Message-ID: <85c493340611062336i2bbc8c42h7463409236a255a@mail.gmail.com>
Date: Tue, 7 Nov 2006 15:36:35 +0800
From: KEGan <khoon.ee.gan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modelling relational data in Lucene Index?
In-Reply-To: <454F5113.3010202@hibernate.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1384_32125009.1162884995041"
References: <20061103030334.2310.qmail@web52009.mail.yahoo.com>
	 <454AB786.4030402@gmail.com>
	 <6e3ae6310611021957o137b3b44ka72a55613f5a4b41@mail.gmail.com>
	 <454B9873.80703@hibernate.org>
	 <6e3ae6310611031209o8544a5dqa7134c3fdfb42c10@mail.gmail.com>
	 <454F5113.3010202@hibernate.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1384_32125009.1162884995041
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I am actually doing something what the original poster mentioned.
Previously, I have use Hibernate and Lucene. But I found that for my
particular project my data is quite flat, so in the next version I totally
take out Hibernate (and the complexity with it :)) and use Lucene as the
"main storage".

In this new version, my data is persisted into filesystem simply using
XMLEncoder. Lucene is both used as a text search index, and also provides
reference to the encoded data (.xml) in the filesystem. Everytime data is
added, an entry into Lucene will be made. And I am using RAMDirectory (super
fast), hence if the server ever shutdown/restart, the Lucene in built again
on startup.

This works for my case because my data set is small enough (hey I read
1.1million documents only average about 300MB of lucene index, and I
have
plenty of RAM), my data probably wont reach anywhere near 0.5 million. The
cons are startup will be slow when data increase, but server shouldnt be
down that often.

Is anyone using similar model ? Any pitfall that I should be aware about ?
Thanks.

~KEGan


On 11/6/06, Emmanuel Bernard <emmanuel@hibernate.org> wrote:
>
> I had a quick look at SOLR and DBSight. They seem to achieve a different
> goal than Hibernate Lucene.
> The formers belong to the project box category: you set up a server that
> will handle the search for you. The application will then delegate the
> work to those servers.
> The latter belongs to the framework category: you use it inside your
> Hibernate/EJB 3.0 application to enable an index based search feature.
> To a certain extend, it is the same difference between a Google box and
> Lucene.
>
> You can write some code based on the latter to covers the formers
> features esp the platform abstraction (PHP, .net), but it is probably a
> lot of work and that is not really the point.
> You can write some code based on the formers to enable indexing and
> search of your persistent domain model (persisted through Hibernate),
> but that is probably more work.
>
> Really it is a matter of easing the pain from one side of the problem or
> the other side. I don't see much competition between the 2 approaches,
> they cover different goals.
>
> To specifically answer some of your remarks:
> - yes, you need to write some code to recreate an index. Literally, 6
> lines of code.
> - no, I do not currently cache the searcher because, Hibernate is
> transactional by nature and protect yourself as much as possible from
> read uncommited and other data inconsistencies. I guess I could
> implement some caching capabilities using reader.isCurrent() or
> something equivalent.
> - the ability to split searchers servers from indexers servers is on my
> todo list.
>
> Cheers
>
> Emmanuel
>
>
> Chris Lu wrote:
> > I personally like your effort, but technically I would  disagree.
> >
> > The SOLR project, and the project I am working on, DBSight, have an
> > detached approach which is implementation agnostic, no matter if it's
> > java, ruby, php, .net. The return results can be a rendered HTML,
> > JSON, XML. I don't think you can be more flexible than that. If
> > creating an new index takes 5 minutes without any coding, you can
> > create something more creative.
> >
> >> From business side, you don't need to worry about indexing when
> > designing a system. New requirement may come. It's very hard trying to
> > anticipate all the needs.
> >
> > Technically, detached approach gives more flexible on resources like
> > CPU, memory, hard drive. For example, if your index grows large, say
> > 1G, indexing can take hours with merging, I am not sure how compass or
> > hibernate/lucene handles it. Need to re-write code at that time? I
> > actually feel it's a dangerous trap.
> >
> >> I've introduced a session.index() which forces the (re)indexing of the
> >> document
> > So does it mean you need to write some code to fix the index if it's
> > crashed?
> >
> >> What do you mean by multithread safe? The indexing?
> >> the indexing is multithread safe in the Hibernate Lucene integration
> > The indexing can be threadsafe. But will it affect the searching? With
> > many files changing and merging, if you cache the searcher. the
> > searching will have "read passed EOF" exceptions. If you don't cache
> > the searcher, you will loose the built-in caching, FieldCacheImpl, in
> > Lucene.
> >
> >>
> >> The query process?
> >> the query doesn't have to since you query on a give session (aka user
> >> conversation), so no multithread threat here.
> > So you are not caching searcher.
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1384_32125009.1162884995041--

From java-user-return-24416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 08:52:25 2006
Return-Path: <java-user-return-24416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72628 invoked from network); 7 Nov 2006 08:52:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 08:52:23 -0000
Received: (qmail 58426 invoked by uid 500); 7 Nov 2006 08:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58393 invoked by uid 500); 7 Nov 2006 08:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58382 invoked by uid 99); 7 Nov 2006 08:52:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 00:52:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.136.47.147] (HELO m2.polopoly.com) (213.136.47.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 00:52:13 -0800
Received: from [172.31.252.192] (holmer.polopoly.com [172.31.252.192])
	(authenticated bits=0)
	by m2.polopoly.com (8.13.5/8.13.5) with ESMTP id kA78lnFw028058
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 7 Nov 2006 09:47:49 +0100
Message-ID: <45504925.90005@polopoly.com>
Date: Tue, 07 Nov 2006 09:51:49 +0100
From: Claes Holmerson <claes.holmerson@polopoly.com>
Organization: Polopoly AB
User-Agent: Thunderbird 1.5.0.4 (X11/20060527)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: State in IndexSearcher that is not in IndexReader?
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry for asking the obvious, but I just want to be sure: Is there any
state associated with IndexSearcher that is not in the underlying
IndexReader (if created with IndexReader as argument). Sharing and
reusing IndexReader would be just as good as reusing IndexSearcher,
performance-wise, wouldn't it?

Thanks, Claes

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 09:06:09 2006
Return-Path: <java-user-return-24417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76524 invoked from network); 7 Nov 2006 09:06:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 09:06:08 -0000
Received: (qmail 76259 invoked by uid 500); 7 Nov 2006 09:06:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76226 invoked by uid 500); 7 Nov 2006 09:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76215 invoked by uid 99); 7 Nov 2006 09:06:11 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 01:06:08 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GhMtW-0004Jf-01
	for java-user@lucene.apache.org; Tue, 07 Nov 2006 01:05:22 -0800
Message-ID: <7214786.post@talk.nabble.com>
Date: Tue, 7 Nov 2006 01:05:21 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7211921.post@talk.nabble.com> <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Chris,

   Another thing I would like to emphasize is:

      for example, if my first query is "Java" and it returned 3 records.
For my 2nd query is "Tomcat", and within my first search, there is only one
record contain the word "Tomcat", this will be my intention to do so.

   Is it possible for lucene to do so?

   Thanks

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Filter-query-method-tf2586547.html#a7214786
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 11:42:35 2006
Return-Path: <java-user-return-24418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33296 invoked from network); 7 Nov 2006 11:42:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 11:42:34 -0000
Received: (qmail 77526 invoked by uid 500); 7 Nov 2006 11:42:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77495 invoked by uid 500); 7 Nov 2006 11:42:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77483 invoked by uid 99); 7 Nov 2006 11:42:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 03:42:36 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.182.130] (HELO web28110.mail.ukl.yahoo.com) (217.146.182.130)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 07 Nov 2006 03:42:20 -0800
Received: (qmail 9189 invoked by uid 60001); 7 Nov 2006 11:41:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=h+Ck0Lvv1SrYw0aes5bjAilmqXD9FUgLQfgeJgpsuvEOZae2gOFg456dsr5UVYEEN99wT/oJze6qiThybQoDwqsTqElxR4gQL3UVxhzq+v4ZfT93788PbjPnx8g+T8mDXFSGIx6hhkwTu1GvuJ4K9RTYpy/IPEN6aqVJZXLO/eA=  ;
Message-ID: <20061107114158.9187.qmail@web28110.mail.ukl.yahoo.com>
Received: from [217.110.73.186] by web28110.mail.ukl.yahoo.com via HTTP; Tue, 07 Nov 2006 12:41:58 CET
Date: Tue, 7 Nov 2006 12:41:58 +0100 (CET)
From: hans meiser <fischauto333@yahoo.de>
Subject: Re: whats the correct way to do normalisation?
To: java-user@lucene.apache.org
In-Reply-To: <0F0CA5BF-D513-4F55-AC61-B77B098BC58D@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-88549257-1162899718=:5346"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

--0-88549257-1162899718=:5346
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi, 
  
On Nov 6, 2006, at 11:27 AM, hans meiser wrote:
>> public final Token next() throws java.io.IOException {
>> final Token t = input.next();
>> if (t == null)
>> return null;
>> return new Token(removeAccents(t.termText()), t.startOffset(), 
>> t.endOffset(), t.type());
>> }
>>

> For highlighting purposes, it's best to keep the offsets in the 
> original text, not adjusted for token mutation.
   
  Ok, i corrected it.
   
  For a  "normal" search without a "*" it works now. But when i do a
  search with an "*" or a "?" my newly implemented filter is not called and for example my umlauts are not replaced by the analyzer(filter).
   
  I do a:
  Analyzer analyzer = new SpecialCharsAnalyzer();
  QueryParser parser = new QueryParser(DocumentFields.TEXT, analyzer);
  query = parser.parse(queryStr);
   
  For wildcards the tokenStream method of my analyzer isnt called.
  Whats my fault?

 		
---------------------------------
Yahoo! 360°  Bloggen und Leute treffen. Erstellen Sie jetzt Ihre eigene Seite  kostenlos!. 
--0-88549257-1162899718=:5346--

From java-user-return-24419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 15:14:45 2006
Return-Path: <java-user-return-24419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14914 invoked from network); 7 Nov 2006 15:14:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 15:14:43 -0000
Received: (qmail 10633 invoked by uid 500); 7 Nov 2006 15:14:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10426 invoked by uid 500); 7 Nov 2006 15:14:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10409 invoked by uid 99); 7 Nov 2006 15:14:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 07:14:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 07:14:32 -0800
Received: by nf-out-0910.google.com with SMTP id n28so353358nfc
        for <java-user@lucene.apache.org>; Tue, 07 Nov 2006 07:14:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=cjkPdOuc8yPMs0FSxXXblaHCIntVBGZz79J6V6ZaDBJg8BHo22xNY6omV5Yd/BOKUQRivFgn0B9neFWsd6Kr84lh/NO0OaK98VdWTJAOPLAhs/umc4eQszXpL/o5rZPdoBwEWskwfBf3497WVfWlCVMYHD5qn/pFCYqRNMvJmAA=
Received: by 10.82.164.9 with SMTP id m9mr1523108bue.1162912450493;
        Tue, 07 Nov 2006 07:14:10 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Tue, 7 Nov 2006 07:14:10 -0800 (PST)
Message-ID: <c68e39170611070714j23c10111y49447ce53eaf1862@mail.gmail.com>
Date: Tue, 7 Nov 2006 10:14:10 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: idf in scores
In-Reply-To: <4550330F.7040209@teamware.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4550330F.7040209@teamware.com>
X-Google-Sender-Auth: 1ad90aa9e6b9b5e0
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/7/06, Antony Bowesman <adb@teamware.com> wrote:
> I've been trying to understand how idf is arrived at from a query.  I have a
> single Document with 9 fields.  One field "subject" has the phrase "RFC2822 -
> Internet Message Format" and a second "body" has the contents of rfc2822.
>
> The other fields contain additional meta data.  If I search for subject:message
> I get the following explanation.
>
> 0.15342641 = fieldWeight(subject:message in 0), product of:
>    1.0 = tf(termFreq(subject:message)=1)
>    0.30685282 = idf(docFreq=1)
>    0.5 = fieldNorm(field=subject, doc=0)
>
> why does the idf get that value?

idf is dependent only on the corpus, not on the individual document.
The formula is here:
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html
1+log(1/2) = 0.30685282

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 16:52:13 2006
Return-Path: <java-user-return-24420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49249 invoked from network); 7 Nov 2006 16:52:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 16:52:12 -0000
Received: (qmail 59497 invoked by uid 500); 7 Nov 2006 16:52:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59264 invoked by uid 500); 7 Nov 2006 16:52:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59253 invoked by uid 99); 7 Nov 2006 16:52:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 08:52:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 66.249.82.234 as permitted sender)
Received: from [66.249.82.234] (HELO wx-out-0506.google.com) (66.249.82.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 08:51:57 -0800
Received: by wx-out-0506.google.com with SMTP id s15so1380879wxc
        for <java-user@lucene.apache.org>; Tue, 07 Nov 2006 08:51:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:x-mailer:x-mimeole:thread-index;
        b=g8SRzqfY5j9FnEjq/X+7pDGgq3tIMP0vWoLVxjI4gYAYq6zsyOGO5pOoR64KAVeChPJIEVahgcAzZcImeu9fr1vECC451JiqD/okzS/zEETCFF6Q8H7TVH3nAK0kEVlrWpk77PBa4wfGGIwHe4G3D0UqMOxNTB2kuisgD4NP3kQ=
Received: by 10.90.71.12 with SMTP id t12mr2273129aga.1162918296978;
        Tue, 07 Nov 2006 08:51:36 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 14sm11943317wrl.2006.11.07.08.51.31;
        Tue, 07 Nov 2006 08:51:36 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Help on search
Date: Tue, 7 Nov 2006 14:51:16 -0200
Message-ID: <004401c7028c$f7480e00$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0045_01C7027C.33BF3E00"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccCjPEarjQgtf16QpeUa4lbGuHHpA==
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0045_01C7027C.33BF3E00
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hello!

I am totally new to Lucene and I'm trying to use it with my web application.

 

What I'm doing is reading a table from my database line by line and indexing
the columns.

I read the users data such as First Name, Last Name, Email and so on.

 

I hava a field by column, such as: firstName="Frederich" lastName="Brown"

My intetion is to make users find other users using name, lastName or email.

What is the best way to do it?

If the user enter "Fred Brown", as I use queryParser, this string is broken
to "Fred" "Brown" and I search those tokens in every field.

 

As "Brown" was indexed, the user's registry is found.

But if the user enters "Fred", no user is found.

Why is that? I thought it would return the user "Frederich Brown" either.

Can someone help?

 

Thanks!

 


------=_NextPart_000_0045_01C7027C.33BF3E00--


From java-user-return-24421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 16:55:32 2006
Return-Path: <java-user-return-24421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50398 invoked from network); 7 Nov 2006 16:55:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 16:55:31 -0000
Received: (qmail 69590 invoked by uid 500); 7 Nov 2006 16:55:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69561 invoked by uid 500); 7 Nov 2006 16:55:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69540 invoked by uid 99); 7 Nov 2006 16:55:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 08:55:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 08:55:18 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 7883_8afc81c0_6e81_11db_9851_003048245df9;
	Tue, 07 Nov 2006 12:01:10 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Help on search
Date: Tue, 7 Nov 2006 11:54:10 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F07692F38@tormail01.cihi.ca>
In-Reply-To: <004401c7028c$f7480e00$4900000a@m4u.com.br>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Help on search
Thread-Index: AccCjPEarjQgtf16QpeUa4lbGuHHpAAAFj8A
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Search for 'Fred*' if I'm not mistaken...

-----Original Message-----
From: Alice [mailto:alicelista@gmail.com]=20
Sent: Tuesday, November 07, 2006 11:51 AM
To: java-user@lucene.apache.org
Subject: Help on search

Hello!

I am totally new to Lucene and I'm trying to use it with my web
application.

=20

What I'm doing is reading a table from my database line by line and
indexing the columns.

I read the users data such as First Name, Last Name, Email and so on.

=20

I hava a field by column, such as: firstName=3D"Frederich"
lastName=3D"Brown"

My intetion is to make users find other users using name, lastName or
email.

What is the best way to do it?

If the user enter "Fred Brown", as I use queryParser, this string is
broken to "Fred" "Brown" and I search those tokens in every field.

=20

As "Brown" was indexed, the user's registry is found.

But if the user enters "Fred", no user is found.

Why is that? I thought it would return the user "Frederich Brown"
either.

Can someone help?

=20

Thanks!

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 17:06:40 2006
Return-Path: <java-user-return-24422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54696 invoked from network); 7 Nov 2006 17:06:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 17:06:39 -0000
Received: (qmail 3826 invoked by uid 500); 7 Nov 2006 17:06:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3790 invoked by uid 500); 7 Nov 2006 17:06:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3770 invoked by uid 99); 7 Nov 2006 17:06:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 09:06:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 09:06:22 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.13.8/8.13.8) with ESMTP id kA7H60YS080212
	for <java-user@lucene.apache.org>; Tue, 7 Nov 2006 18:06:00 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: State in IndexSearcher that is not in IndexReader?
Date: Tue, 7 Nov 2006 18:05:26 +0100
User-Agent: KMail/1.8.2
References: <45504925.90005@polopoly.com>
In-Reply-To: <45504925.90005@polopoly.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611071805.56603.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 07 November 2006 09:51, Claes Holmerson wrote:
> Sorry for asking the obvious, but I just want to be sure: Is there any
> state associated with IndexSearcher that is not in the underlying
> IndexReader (if created with IndexReader as argument). Sharing and
> reusing IndexReader would be just as good as reusing IndexSearcher,
> performance-wise, wouldn't it?

Currently IndexSearcher is indeed lightweight.
But one can use IndexSearcher.getIndexReader() and reuse
an IndexSearcher anyway.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 17:12:16 2006
Return-Path: <java-user-return-24423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56830 invoked from network); 7 Nov 2006 17:12:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 17:12:16 -0000
Received: (qmail 24289 invoked by uid 500); 7 Nov 2006 17:12:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24260 invoked by uid 500); 7 Nov 2006 17:12:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24249 invoked by uid 99); 7 Nov 2006 17:12:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 09:12:17 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 09:12:04 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1236385ugc
        for <java-user@lucene.apache.org>; Tue, 07 Nov 2006 09:11:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BVlJ+xH0G8aMTvusPl4DmQ8x2X+kY3SHOIZIpO8t2D0+tuCyQ+uQXjyiDFKrSo1aO6/UZsFP+vJUznMYLUlkPuprb2vusAd3Y3kdcj60dDLvjXaRY6HXha6OwSH7PMrIMP9znNHwClQdMXYbocFtyLWaSlWUj1KZ7o0RS1fK27w=
Received: by 10.82.129.8 with SMTP id b8mr1548201bud.1162919502041;
        Tue, 07 Nov 2006 09:11:42 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Tue, 7 Nov 2006 09:11:42 -0800 (PST)
Message-ID: <359a92830611070911w78da979co3bfca0226013f451@mail.gmail.com>
Date: Tue, 7 Nov 2006 12:11:42 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help on search
In-Reply-To: <004401c7028c$f7480e00$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7721_2086032.1162919502009"
References: <004401c7028c$f7480e00$4900000a@m4u.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7721_2086032.1162919502009
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You really have to get away from thinking about lucene like you would a
database, or you'll have endless problems <G>.

If you want just a bag of name parts, why use separate fields? For instance,
index both firstname and lastname in a name field in each document. Then all
you have to do to find all documents that have Brown in them is search on
the single field name. There's no need to construct complex or clauses,
which is what I suspect you're doing now.....

You can also index firstname, lastname, and a third field "bagofnames" that
contains both if you want.

Vladimir is right, unless you take some actions you always get exact matches
when you search, so I'm not surprised that searching for Fred does NOT
return Frederich-containing documents.

Whether wildcarding is your best strategy is debatable, it depends upon your
intent. You could consider stemming both at index and search time.
Generically, all that means is that you index "Fred" for "Frederich". and at
search time you search for "Fred". There are stemming analyzers in Lucene,
but whether they do what you want only you can decide. Be aware that
wildcard searches frequently run afoul of a TooManyClauses exception. There
is a bunch of information from people far more knowledgeable than me in this
mail archive if you search on "wildcard". It's a more complicated matter
than you might think at first.

Note that the TooManyClauses exception very likely won't show up in your
test data sets. It won't show up until you put in a bunch of data. See
TooManyClauses in the javadoc.....

I'd argue if you can create rules for wildcarding, you can create rules for
stemming By that I mean that if you have a programmatic way to turn
"Frederich" into "Fred", you can just index and search on "Fred" equally
easily and not have to deal with wildcard complexity.

Of course, since I don't know what problem you're actually trying to solve,
this may be irrelevant....

Best
Erick

On 11/7/06, Alice <alicelista@gmail.com> wrote:
>
> Hello!
>
> I am totally new to Lucene and I'm trying to use it with my web
> application.
>
>
>
> What I'm doing is reading a table from my database line by line and
> indexing
> the columns.
>
> I read the users data such as First Name, Last Name, Email and so on.
>
>
>
> I hava a field by column, such as: firstName="Frederich" lastName="Brown"
>
> My intetion is to make users find other users using name, lastName or
> email.
>
> What is the best way to do it?
>
> If the user enter "Fred Brown", as I use queryParser, this string is
> broken
> to "Fred" "Brown" and I search those tokens in every field.
>
>
>
> As "Brown" was indexed, the user's registry is found.
>
> But if the user enters "Fred", no user is found.
>
> Why is that? I thought it would return the user "Frederich Brown" either.
>
> Can someone help?
>
>
>
> Thanks!
>
>
>
>
>

------=_Part_7721_2086032.1162919502009--

From java-user-return-24424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 17:23:31 2006
Return-Path: <java-user-return-24424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60810 invoked from network); 7 Nov 2006 17:23:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 17:23:30 -0000
Received: (qmail 56510 invoked by uid 500); 7 Nov 2006 17:23:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56476 invoked by uid 500); 7 Nov 2006 17:23:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56465 invoked by uid 99); 7 Nov 2006 17:23:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 09:23:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 66.249.82.238 as permitted sender)
Received: from [66.249.82.238] (HELO wx-out-0506.google.com) (66.249.82.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 09:23:16 -0800
Received: by wx-out-0506.google.com with SMTP id s15so1390705wxc
        for <java-user@lucene.apache.org>; Tue, 07 Nov 2006 09:22:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:thread-index:in-reply-to;
        b=lX1mw058hfiwAvscI9qE3crvBsVKBOVf/T6ImfnAbiczPR9GsdSCo3FXNfHxA5jSVt8u4TDzSMhFjNGQOO9Z2fT8QNJFq1v6cBwLGEQqa2sLzOr1myuDDbZ8FLbasbokFZjQ4nDjt2OuS3MTxOcO+IWSMBYPljQjQ2p+VbvQOIc=
Received: by 10.90.104.14 with SMTP id b14mr1675711agc.1162920171967;
        Tue, 07 Nov 2006 09:22:51 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 38sm11985281wrl.2006.11.07.09.22.48;
        Tue, 07 Nov 2006 09:22:51 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Help on search
Date: Tue, 7 Nov 2006 15:22:28 -0200
Message-ID: <004f01c70291$520792d0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccCj93ptFQDkDpzSwGMKyL8lFzZ0gAAJ/NA
In-Reply-To: <359a92830611070911w78da979co3bfca0226013f451@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for answering.

I thought about stemming at index and search time, but Im dealing with
names.
How can I make a rule for stemming names?=20

I'm thinking about different names, I thought I could use Lucene to help
users find whomever they're looking for without having to spell their
friends names correctly or fully.

That=92s why I gave the example about 'Frederich', it is very common =
that
users enter 'Fred'.

I'm going to read about the wildcards.

Anymore suggestions are very welcome.

Thanks

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: ter=E7a-feira, 7 de novembro de 2006 15:12
To: java-user@lucene.apache.org
Subject: Re: Help on search

You really have to get away from thinking about lucene like you would a
database, or you'll have endless problems <G>.

If you want just a bag of name parts, why use separate fields? For =
instance,
index both firstname and lastname in a name field in each document. Then =
all
you have to do to find all documents that have Brown in them is search =
on
the single field name. There's no need to construct complex or clauses,
which is what I suspect you're doing now.....

You can also index firstname, lastname, and a third field "bagofnames" =
that
contains both if you want.

Vladimir is right, unless you take some actions you always get exact =
matches
when you search, so I'm not surprised that searching for Fred does NOT
return Frederich-containing documents.

Whether wildcarding is your best strategy is debatable, it depends upon =
your
intent. You could consider stemming both at index and search time.
Generically, all that means is that you index "Fred" for "Frederich". =
and at
search time you search for "Fred". There are stemming analyzers in =
Lucene,
but whether they do what you want only you can decide. Be aware that
wildcard searches frequently run afoul of a TooManyClauses exception. =
There
is a bunch of information from people far more knowledgeable than me in =
this
mail archive if you search on "wildcard". It's a more complicated matter
than you might think at first.

Note that the TooManyClauses exception very likely won't show up in your
test data sets. It won't show up until you put in a bunch of data. See
TooManyClauses in the javadoc.....

I'd argue if you can create rules for wildcarding, you can create rules =
for
stemming By that I mean that if you have a programmatic way to turn
"Frederich" into "Fred", you can just index and search on "Fred" equally
easily and not have to deal with wildcard complexity.

Of course, since I don't know what problem you're actually trying to =
solve,
this may be irrelevant....

Best
Erick

On 11/7/06, Alice <alicelista@gmail.com> wrote:
>
> Hello!
>
> I am totally new to Lucene and I'm trying to use it with my web
> application.
>
>
>
> What I'm doing is reading a table from my database line by line and
> indexing
> the columns.
>
> I read the users data such as First Name, Last Name, Email and so on.
>
>
>
> I hava a field by column, such as: firstName=3D"Frederich" =
lastName=3D"Brown"
>
> My intetion is to make users find other users using name, lastName or
> email.
>
> What is the best way to do it?
>
> If the user enter "Fred Brown", as I use queryParser, this string is
> broken
> to "Fred" "Brown" and I search those tokens in every field.
>
>
>
> As "Brown" was indexed, the user's registry is found.
>
> But if the user enters "Fred", no user is found.
>
> Why is that? I thought it would return the user "Frederich Brown" =
either.
>
> Can someone help?
>
>
>
> Thanks!
>
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 18:27:43 2006
Return-Path: <java-user-return-24425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83744 invoked from network); 7 Nov 2006 18:27:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 18:27:42 -0000
Received: (qmail 79102 invoked by uid 500); 7 Nov 2006 18:27:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79074 invoked by uid 500); 7 Nov 2006 18:27:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79063 invoked by uid 99); 7 Nov 2006 18:27:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 10:27:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 10:27:32 -0800
Received: by nf-out-0910.google.com with SMTP id n28so415514nfc
        for <java-user@lucene.apache.org>; Tue, 07 Nov 2006 10:27:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GOFqMveHymfcN9CunjEYlnTx1u6bWhIRFNjeQZ3BOO2QU+ZxEVgBHM6VQlgbiu+fiJ3lqZ4SXilNJkRy0dOQXFLMvHbesiraosRUuhFqATMtfCUUxykHvazZ4aQjGRP0IuWjKw1cJqPnmqMbsysnZTC+G+H18y3Ls0vfSk47xHk=
Received: by 10.82.147.6 with SMTP id u6mr997202bud.1162924029816;
        Tue, 07 Nov 2006 10:27:09 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Tue, 7 Nov 2006 10:27:09 -0800 (PST)
Message-ID: <359a92830611071027o79820e0m73131461dd53ccce@mail.gmail.com>
Date: Tue, 7 Nov 2006 13:27:09 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Help on search
In-Reply-To: <004f01c70291$520792d0$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8990_14266230.1162924029557"
References: <359a92830611070911w78da979co3bfca0226013f451@mail.gmail.com>
	 <004f01c70291$520792d0$4900000a@m4u.com.br>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8990_14266230.1162924029557
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

<<<How can I make a rule for stemming names?>>>

That's the problem all right. And I don't have any good answer. Wildcarding
could work for you, but it's really the same question, isn't it? "How do yo=
u
transform a typed name into a wildcard query?" is, I think, equivalent to
your question above (assuming that wildcarding is really truncation. i.e.
Fred* and not Fred*i*). And if you can answer it, you can stem or
wildcard......

Could a really simple rule like "only use the first 4 letters" work? Of
course there are obvious names for which this wouldn't work. But is
something like that "good enough"?

There is one other possibility, soundex/metaphone. There's a discussion in
Lucene in Action about how to do this. The basic idea is that you index and
search on words that "sound like" what's in the document. Whether "sounds
like" makes Fred and Frederich equivalent is the unknown here.....

Not much help I know

Good luck
Erick

On 11/7/06, Alice <alicelista@gmail.com> wrote:
>
> Thank you for answering.
>
> I thought about stemming at index and search time, but Im dealing with
> names.
> How can I make a rule for stemming names?
>
> I'm thinking about different names, I thought I could use Lucene to help
> users find whomever they're looking for without having to spell their
> friends names correctly or fully.
>
> That's why I gave the example about 'Frederich', it is very common that
> users enter 'Fred'.
>
> I'm going to read about the wildcards.
>
> Anymore suggestions are very welcome.
>
> Thanks
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: ter=E7a-feira, 7 de novembro de 2006 15:12
> To: java-user@lucene.apache.org
> Subject: Re: Help on search
>
> You really have to get away from thinking about lucene like you would a
> database, or you'll have endless problems <G>.
>
> If you want just a bag of name parts, why use separate fields? For
> instance,
> index both firstname and lastname in a name field in each document. Then
> all
> you have to do to find all documents that have Brown in them is search on
> the single field name. There's no need to construct complex or clauses,
> which is what I suspect you're doing now.....
>
> You can also index firstname, lastname, and a third field "bagofnames"
> that
> contains both if you want.
>
> Vladimir is right, unless you take some actions you always get exact
> matches
> when you search, so I'm not surprised that searching for Fred does NOT
> return Frederich-containing documents.
>
> Whether wildcarding is your best strategy is debatable, it depends upon
> your
> intent. You could consider stemming both at index and search time.
> Generically, all that means is that you index "Fred" for "Frederich". and
> at
> search time you search for "Fred". There are stemming analyzers in Lucene=
,
> but whether they do what you want only you can decide. Be aware that
> wildcard searches frequently run afoul of a TooManyClauses exception.
> There
> is a bunch of information from people far more knowledgeable than me in
> this
> mail archive if you search on "wildcard". It's a more complicated matter
> than you might think at first.
>
> Note that the TooManyClauses exception very likely won't show up in your
> test data sets. It won't show up until you put in a bunch of data. See
> TooManyClauses in the javadoc.....
>
> I'd argue if you can create rules for wildcarding, you can create rules
> for
> stemming By that I mean that if you have a programmatic way to turn
> "Frederich" into "Fred", you can just index and search on "Fred" equally
> easily and not have to deal with wildcard complexity.
>
> Of course, since I don't know what problem you're actually trying to
> solve,
> this may be irrelevant....
>
> Best
> Erick
>
> On 11/7/06, Alice <alicelista@gmail.com> wrote:
> >
> > Hello!
> >
> > I am totally new to Lucene and I'm trying to use it with my web
> > application.
> >
> >
> >
> > What I'm doing is reading a table from my database line by line and
> > indexing
> > the columns.
> >
> > I read the users data such as First Name, Last Name, Email and so on.
> >
> >
> >
> > I hava a field by column, such as: firstName=3D"Frederich"
> lastName=3D"Brown"
> >
> > My intetion is to make users find other users using name, lastName or
> > email.
> >
> > What is the best way to do it?
> >
> > If the user enter "Fred Brown", as I use queryParser, this string is
> > broken
> > to "Fred" "Brown" and I search those tokens in every field.
> >
> >
> >
> > As "Brown" was indexed, the user's registry is found.
> >
> > But if the user enters "Fred", no user is found.
> >
> > Why is that? I thought it would return the user "Frederich Brown"
> either.
> >
> > Can someone help?
> >
> >
> >
> > Thanks!
> >
> >
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8990_14266230.1162924029557--

From java-user-return-24426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 18:59:29 2006
Return-Path: <java-user-return-24426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93829 invoked from network); 7 Nov 2006 18:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 18:59:28 -0000
Received: (qmail 38086 invoked by uid 500); 7 Nov 2006 18:59:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38056 invoked by uid 500); 7 Nov 2006 18:59:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38045 invoked by uid 99); 7 Nov 2006 18:59:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 10:59:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 10:59:17 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 762a_dfb2f0a8_6e92_11db_8261_003048245df9;
	Tue, 07 Nov 2006 14:05:10 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Help on search
Date: Tue, 7 Nov 2006 13:58:13 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F07693019@tormail01.cihi.ca>
In-Reply-To: <359a92830611071027o79820e0m73131461dd53ccce@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Help on search
Thread-Index: AccCmmQaj7h7hvm0SMWwUZ0Y+y8o1AAA7ggg
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

You might actually try to look for some 'names database' (similar to =
Wordnet). Someone has probably already compiled a list of english =
'names' and their common short forms (eg, 'Vlad' for 'Vladimir', 'Fred' =
for 'Frederich', etc). Alternatevly, compile such DB yourself (and don't =
forget to publish it under OSS license afterwards!!!! :) ) - if there is =
none right now it really can be useful for quite a few applications.

Once you have the DB your can do similar things as with 'english =
synomym' DB (not sure what Lucene notations are for this) - lookup =
'synonym' for the name and thus be able to search all forms.... Or use =
such DB for custom stemming, as Erick suggested.

Vlad

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Tuesday, November 07, 2006 1:27 PM
To: java-user@lucene.apache.org
Subject: Re: Help on search

<<<How can I make a rule for stemming names?>>>

That's the problem all right. And I don't have any good answer. =
Wildcarding could work for you, but it's really the same question, isn't =
it? "How do you transform a typed name into a wildcard query?" is, I =
think, equivalent to your question above (assuming that wildcarding is =
really truncation. i.e.
Fred* and not Fred*i*). And if you can answer it, you can stem or =
wildcard......

Could a really simple rule like "only use the first 4 letters" work? Of =
course there are obvious names for which this wouldn't work. But is =
something like that "good enough"?

There is one other possibility, soundex/metaphone. There's a discussion =
in Lucene in Action about how to do this. The basic idea is that you =
index and search on words that "sound like" what's in the document. =
Whether "sounds like" makes Fred and Frederich equivalent is the unknown =
here.....

Not much help I know

Good luck
Erick

On 11/7/06, Alice <alicelista@gmail.com> wrote:
>
> Thank you for answering.
>
> I thought about stemming at index and search time, but Im dealing with =

> names.
> How can I make a rule for stemming names?
>
> I'm thinking about different names, I thought I could use Lucene to=20
> help users find whomever they're looking for without having to spell=20
> their friends names correctly or fully.
>
> That's why I gave the example about 'Frederich', it is very common=20
> that users enter 'Fred'.
>
> I'm going to read about the wildcards.
>
> Anymore suggestions are very welcome.
>
> Thanks
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: ter=E7a-feira, 7 de novembro de 2006 15:12
> To: java-user@lucene.apache.org
> Subject: Re: Help on search
>
> You really have to get away from thinking about lucene like you would=20
> a database, or you'll have endless problems <G>.
>
> If you want just a bag of name parts, why use separate fields? For=20
> instance, index both firstname and lastname in a name field in each=20
> document. Then all you have to do to find all documents that have=20
> Brown in them is search on the single field name. There's no need to=20
> construct complex or clauses, which is what I suspect you're doing=20
> now.....
>
> You can also index firstname, lastname, and a third field "bagofnames"
> that
> contains both if you want.
>
> Vladimir is right, unless you take some actions you always get exact=20
> matches when you search, so I'm not surprised that searching for Fred=20
> does NOT return Frederich-containing documents.
>
> Whether wildcarding is your best strategy is debatable, it depends=20
> upon your intent. You could consider stemming both at index and search =

> time.
> Generically, all that means is that you index "Fred" for "Frederich".=20
> and at search time you search for "Fred". There are stemming analyzers =

> in Lucene, but whether they do what you want only you can decide. Be=20
> aware that wildcard searches frequently run afoul of a TooManyClauses=20
> exception.
> There
> is a bunch of information from people far more knowledgeable than me=20
> in this mail archive if you search on "wildcard". It's a more=20
> complicated matter than you might think at first.
>
> Note that the TooManyClauses exception very likely won't show up in=20
> your test data sets. It won't show up until you put in a bunch of=20
> data. See TooManyClauses in the javadoc.....
>
> I'd argue if you can create rules for wildcarding, you can create=20
> rules for stemming By that I mean that if you have a programmatic way=20
> to turn "Frederich" into "Fred", you can just index and search on=20
> "Fred" equally easily and not have to deal with wildcard complexity.
>
> Of course, since I don't know what problem you're actually trying to=20
> solve, this may be irrelevant....
>
> Best
> Erick
>
> On 11/7/06, Alice <alicelista@gmail.com> wrote:
> >
> > Hello!
> >
> > I am totally new to Lucene and I'm trying to use it with my web=20
> > application.
> >
> >
> >
> > What I'm doing is reading a table from my database line by line and=20
> > indexing the columns.
> >
> > I read the users data such as First Name, Last Name, Email and so =
on.
> >
> >
> >
> > I hava a field by column, such as: firstName=3D"Frederich"
> lastName=3D"Brown"
> >
> > My intetion is to make users find other users using name, lastName=20
> > or email.
> >
> > What is the best way to do it?
> >
> > If the user enter "Fred Brown", as I use queryParser, this string is =

> > broken to "Fred" "Brown" and I search those tokens in every field.
> >
> >
> >
> > As "Brown" was indexed, the user's registry is found.
> >
> > But if the user enters "Fred", no user is found.
> >
> > Why is that? I thought it would return the user "Frederich Brown"
> either.
> >
> > Can someone help?
> >
> >
> >
> > Thanks!
> >
> >
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 19:31:17 2006
Return-Path: <java-user-return-24427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4673 invoked from network); 7 Nov 2006 19:31:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 19:31:16 -0000
Received: (qmail 96174 invoked by uid 500); 7 Nov 2006 19:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96149 invoked by uid 500); 7 Nov 2006 19:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96126 invoked by uid 99); 7 Nov 2006 19:31:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:31:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:30:57 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 19B895B763; Tue,  7 Nov 2006 11:30:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 154A27F403
	for <java-user@lucene.apache.org>; Tue,  7 Nov 2006 11:30:37 -0800 (PST)
Date: Tue, 7 Nov 2006 11:30:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <7214786.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0611071128450.29748@hal.rescomp.berkeley.edu>
References: <7211921.post@talk.nabble.com> <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu>
 <7214786.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:       for example, if my first query is "Java" and it returned 3 records.
: For my 2nd query is "Tomcat", and within my first search, there is only one
: record contain the word "Tomcat", this will be my intention to do so.
:
:    Is it possible for lucene to do so?

anything is possible .. but as i said, you have to first decide wether you
want the scores of your final query to only be based on the tf/idf of
the word "Tomcat" (in which case you want to build a Filter out of the
query on "Java" or if you want the scores to be based on the tf/idf of
both words (in which case you should build a big boolean query)

I also have no idea what SingleDocTestFilter is in the code you posted, so
i really can't guess why your code doesn't work for you... what is it
supose to do?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 19:34:13 2006
Return-Path: <java-user-return-24428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5601 invoked from network); 7 Nov 2006 19:34:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 19:34:12 -0000
Received: (qmail 4007 invoked by uid 500); 7 Nov 2006 19:34:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3983 invoked by uid 500); 7 Nov 2006 19:34:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3972 invoked by uid 99); 7 Nov 2006 19:34:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:34:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:33:52 -0800
Received: (qmail 25578 invoked from network); 7 Nov 2006 19:33:29 -0000
Received: from unknown (HELO p5496d45c.dip.t-dialin.net) ([pbs]695637@[84.150.212.92])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 7 Nov 2006 19:33:29 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: whats the correct way to do normalisation?
Date: Tue, 7 Nov 2006 20:35:26 +0100
User-Agent: KMail/1.8.2
References: <20061107114158.9187.qmail@web28110.mail.ukl.yahoo.com>
In-Reply-To: <20061107114158.9187.qmail@web28110.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200611072035.26950@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 07 November 2006 12:41, hans meiser wrote:

> =C2=A0 For a =C2=A0"normal" search without a "*" it works now. But when i=
 do a
> =C2=A0 search with an "*" or a "?" my newly implemented filter is not cal=
led
> and for example my umlauts are not replaced by the analyzer(filter).

See
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-133cf44dd3dff3680c96c1=
316a663e881eeac35a

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 19:34:50 2006
Return-Path: <java-user-return-24429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5858 invoked from network); 7 Nov 2006 19:34:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 19:34:49 -0000
Received: (qmail 8341 invoked by uid 500); 7 Nov 2006 19:34:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8313 invoked by uid 500); 7 Nov 2006 19:34:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8302 invoked by uid 99); 7 Nov 2006 19:34:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:34:53 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:34:39 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 724495B771; Tue,  7 Nov 2006 11:34:19 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6C9387F403
	for <java-user@lucene.apache.org>; Tue,  7 Nov 2006 11:34:19 -0800 (PST)
Date: Tue, 7 Nov 2006 11:34:19 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: whats the correct way to do normalisation?
In-Reply-To: <20061107114158.9187.qmail@web28110.mail.ukl.yahoo.com>
Message-ID: <Pine.LNX.4.58.0611071134020.29748@hal.rescomp.berkeley.edu>
References: <20061107114158.9187.qmail@web28110.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org


http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-133cf44dd3dff3680c96c1=
316a663e881eeac35a

Are Wildcard, Prefix, and Fuzzy queries case sensitive?

Unlike other types of Lucene queries, Wildcard, Prefix, and Fuzzy queries
are not passed through the Analyzer, which is the component that performs
operations such as stemming and lowercasing.

The reason for skipping the Analyzer is that if you were searching for
"dogs*" you would not want "dogs" first stemmed to "dog", since that would
then match "dog*", which is not the intended query.


: Date: Tue, 7 Nov 2006 12:41:58 +0100 (CET)
: From: hans meiser <fischauto333@yahoo.de>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: whats the correct way to do normalisation?
:
: Hi,
:
: On Nov 6, 2006, at 11:27 AM, hans meiser wrote:
: >> public final Token next() throws java.io.IOException {
: >> final Token t =3D input.next();
: >> if (t =3D=3D null)
: >> return null;
: >> return new Token(removeAccents(t.termText()), t.startOffset(),
: >> t.endOffset(), t.type());
: >> }
: >>
:
: > For highlighting purposes, it's best to keep the offsets in the
: > original text, not adjusted for token mutation.
:
:   Ok, i corrected it.
:
:   For a  "normal" search without a "*" it works now. But when i do a
:   search with an "*" or a "?" my newly implemented filter is not called a=
nd for example my umlauts are not replaced by the analyzer(filter).
:
:   I do a:
:   Analyzer analyzer =3D new SpecialCharsAnalyzer();
:   QueryParser parser =3D new QueryParser(DocumentFields.TEXT, analyzer);
:   query =3D parser.parse(queryStr);
:
:   For wildcards the tokenStream method of my analyzer isnt called.
:   Whats my fault?
:
:
: ---------------------------------
: Yahoo! 360=B0 =96 Bloggen und Leute treffen. Erstellen Sie jetzt Ihre eig=
ene Seite =96 kostenlos!.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 19:53:15 2006
Return-Path: <java-user-return-24430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12305 invoked from network); 7 Nov 2006 19:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 19:53:15 -0000
Received: (qmail 43316 invoked by uid 500); 7 Nov 2006 19:53:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43285 invoked by uid 500); 7 Nov 2006 19:53:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43274 invoked by uid 99); 7 Nov 2006 19:53:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:53:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ben.dotte@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO nz-out-0102.google.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:53:04 -0800
Received: by nz-out-0102.google.com with SMTP id k1so1302539nzf
        for <java-user@lucene.apache.org>; Tue, 07 Nov 2006 11:52:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WXsGva5z6icVKFKFJTm23dh8MnTsuGr17lXvtcXwG6F4GD3ZNIRSDxv37uJPAT8WPGufwLmAV3ZOPDmmZ9JnvPDxHxHtCU8ABEWiKuhDwvvXxySxghI1nUx11AECQg3Efvon5Ptdr3fRR+t+AAwJ4eJpYURtqPGHc9O6eIGRs+w=
Received: by 10.65.185.3 with SMTP id m3mr10671378qbp.1162929163658;
        Tue, 07 Nov 2006 11:52:43 -0800 (PST)
Received: by 10.65.145.3 with HTTP; Tue, 7 Nov 2006 11:52:43 -0800 (PST)
Message-ID: <8a29e7880611071152x3159f9e4ic5841b6182a54e9@mail.gmail.com>
Date: Tue, 7 Nov 2006 13:52:43 -0600
From: "Ben Dotte" <ben.dotte@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Intermittent search performance problem
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F076928F3@tormail01.cihi.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8a29e7880611031348p24c4993dp9e9624c0effc52c6@mail.gmail.com>
	 <373399D6389D8C42B4EAD9BE2B6B5C5F076928F3@tormail01.cihi.ca>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the additional GC suggestions, that does sound like a
likely culprit the more I look into it. It takes a while to get the
app to a state where the problem is reproducible so it will take a
while to fully test the theory. I'll continue investigating the GCs
this week and hopefully get to the bottom of this sooner or later.

Thanks again,
Ben

On 11/6/06, Vladimir Olenin <VOlenin@cihi.ca> wrote:
> Any profiler can add it's own overhead. You might try the "-verbose:gc"
> JVM flag (if you haven't tried it yet). The fastest way to check if you
> problems are GC related. Check JVM docs (or plainly - 'java -help' for
> more flags. There are some '-X' flags for more detailed info, as well as
> flags to dump GC output to a separate file). Watch for 'Tenured
> generation' collection ("Full GC"), which are 'stop the world' ones.
>
> All in all, I agree with Yonik and am pretty positive that it's a full
> GC. I was actually getting similar pauses time on a similar heap size
> with a similar application (custom made 'all in memory' search engine,
> so I'd guess the number of object references and their complexity should
> be of a similar order).
>
> Also, turn off explicit GC (-XX:+DisableExplicitGC) to disable any
> 'System.gc()' calls. Though log dump should be sufficient, this is just
> another way to make sure if it's a GC that gives you the problems (eg,
> if you set -Xmx to 1Gb and you current heap size is 700M AND you are
> experiencing pauses without hitting the top limit, it MIGHT indicate
> that it's not GC related issue, but generally does NOT guarantee it. GC
> Log is the safest and fastest way to sort this kind of problems out).
>
> Vlad
>
> -----Original Message-----
> From: Ben Dotte [mailto:ben.dotte@gmail.com]
> Sent: Friday, November 03, 2006 4:48 PM
> To: java-user@lucene.apache.org
> Subject: Re: Intermittent search performance problem
>
> Good suggestion, I tried watching the GCs in YourKit while testing but
> unfortunately they don't seem to line up with the searches that take
> forever. They also don't last long enough to make up that kind of time.
> I have our heap limited to 1GB right now and its using around 768MB of
> that.
>
> On 11/3/06, Ben Dotte <ben.dotte@gmail.com> wrote:
> > I'm trying to figure out a way to troubleshoot a performance problem
> > we're seeing when searching against a memory-based index. What happens
>
> > is we will run a search against the index and it generally returns in
> > 1 second or less. But every once in a while it takes 15-20 seconds for
>
> > the exact same search for no apparent reason.
>
> Are you sure it's not just a big GC?  How big is your heap?
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search
> server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 19:57:55 2006
Return-Path: <java-user-return-24431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13155 invoked from network); 7 Nov 2006 19:57:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 19:57:54 -0000
Received: (qmail 50545 invoked by uid 500); 7 Nov 2006 19:57:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50510 invoked by uid 500); 7 Nov 2006 19:57:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50498 invoked by uid 99); 7 Nov 2006 19:57:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:57:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO nz-out-0102.google.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 11:57:42 -0800
Received: by nz-out-0102.google.com with SMTP id k1so1304216nzf
        for <java-user@lucene.apache.org>; Tue, 07 Nov 2006 11:57:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Dy25B6q243vSS1N8ulYrinOAiZWrCaFW5Kt+y7qTd2O9gbHRNM54zsv8h4OKBdPUqvaBLlHcjoQSWD7RlvDtpLQkQ8nViOWvCaSI7Etg4tu/qrHJh7FJVC7N+KT51gIFsTHej3Nwvv/P/fn8huLLm01o/JI8AYRpk3TXCmaKLCI=
Received: by 10.35.76.9 with SMTP id d9mr3708235pyl.1162927638617;
        Tue, 07 Nov 2006 11:27:18 -0800 (PST)
Received: from ?172.24.156.35? ( [129.176.197.15])
        by mx.google.com with ESMTP id f78sm7047612pyh.2006.11.07.11.27.17;
        Tue, 07 Nov 2006 11:27:18 -0800 (PST)
Message-ID: <4550DE14.7050105@gmail.com>
Date: Tue, 07 Nov 2006 13:27:16 -0600
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Help on search
References: <004f01c70291$520792d0$4900000a@m4u.com.br>
In-Reply-To: <004f01c70291$520792d0$4900000a@m4u.com.br>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

A few more google searches will probably turn up some reasonable lists 
of abbreviation rules or lists for common names - I found this right away:

(google cache link that converts pdf to html)

http://72.14.205.104/search?q=cache:dh7HGiQ-G4wJ:immigrants.byu.edu/Downloads/BritishNames.pdf+common+name+abbreviations&hl=en&gl=us&ct=clnk&cd=5

With a table such as this, you could write a tokenizer that would inject 
the abbreviated form of common names into your index in addition to the 
default form.

Or, you could index them in as an alternate field, then you would have 
more control at query time whether or not you wanted to match on 
abbreviations.

Dan


-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 20:07:19 2006
Return-Path: <java-user-return-24432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16360 invoked from network); 7 Nov 2006 20:07:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 20:07:17 -0000
Received: (qmail 65535 invoked by uid 500); 7 Nov 2006 20:07:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65505 invoked by uid 500); 7 Nov 2006 20:07:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65494 invoked by uid 99); 7 Nov 2006 20:07:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 12:07:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 12:07:07 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C628A5B763; Tue,  7 Nov 2006 12:06:46 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C3F847F403;
	Tue,  7 Nov 2006 12:06:46 -0800 (PST)
Date: Tue, 7 Nov 2006 12:06:46 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, Bhavin Pandya <bhavinp@rediff.co.in>
Subject: Re: how to boost recent doc
In-Reply-To: <020d01c70191$38190d00$970310ac@bhavin>
Message-ID: <Pine.LNX.4.58.0611071205380.31329@hal.rescomp.berkeley.edu>
References: <020d01c70191$38190d00$970310ac@bhavin>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I want to boost recent documents....so that it top ups...
: what could be best strategy...

you might want to take a look at "FunctionQuery" hwich is part of hte solr
codebase.  if you search the archives you'll find several discussions of
it.  (as well as several past discussions on "boost by date" that have
other suggestions which don't involve FunctionQuery)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 07 21:09:50 2006
Return-Path: <java-user-return-24433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45868 invoked from network); 7 Nov 2006 21:09:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2006 21:09:50 -0000
Received: (qmail 97062 invoked by uid 500); 7 Nov 2006 21:09:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97036 invoked by uid 500); 7 Nov 2006 21:09:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97025 invoked by uid 99); 7 Nov 2006 21:09:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 13:09:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 13:09:40 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kA7L9BJ9022534
	for <java-user@lucene.apache.org>; Tue, 7 Nov 2006 23:09:11 +0200
Received: from [10.142.3.11] ([10.142.3.11]) by nimitz with ESMTP
	 id mb7n9b3w; 7 Nov 2006 23:09:00 +0200
Message-ID: <4550F5F6.9000803@teamware.com>
Date: Wed, 08 Nov 2006 08:09:10 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: idf in scores
References: <4550330F.7040209@teamware.com> <c68e39170611070714j23c10111y49447ce53eaf1862@mail.gmail.com>
In-Reply-To: <c68e39170611070714j23c10111y49447ce53eaf1862@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik Seeley wrote:
> 
> idf is dependent only on the corpus, not on the individual document.
> The formula is here:
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Similarity.html 
> 
> 1+log(1/2) = 0.30685282

Thanks Yonik, whilst all is not yet completely clear, it is much more so!
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 00:56:12 2006
Return-Path: <java-user-return-24434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18957 invoked from network); 8 Nov 2006 00:56:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 00:56:11 -0000
Received: (qmail 27437 invoked by uid 500); 8 Nov 2006 00:56:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27355 invoked by uid 500); 8 Nov 2006 00:56:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27262 invoked by uid 99); 8 Nov 2006 00:56:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:56:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 16:55:52 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Ghbj2-0005yF-3r
	for java-user@lucene.apache.org; Tue, 07 Nov 2006 16:55:32 -0800
Message-ID: <7230856.post@talk.nabble.com>
Date: Tue, 7 Nov 2006 16:55:32 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <Pine.LNX.4.58.0611071128450.29748@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7211921.post@talk.nabble.com> <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu> <7214786.post@talk.nabble.com> <Pine.LNX.4.58.0611071128450.29748@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Chris,

   For my case, I want the scores of final query to be based on the second
query = "Tomcat". So, is there any example that I can refering to?

   Thanks.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Filter-query-method-tf2586547.html#a7230856
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 01:05:16 2006
Return-Path: <java-user-return-24435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19979 invoked from network); 8 Nov 2006 01:05:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 01:05:15 -0000
Received: (qmail 36008 invoked by uid 500); 8 Nov 2006 01:05:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35390 invoked by uid 500); 8 Nov 2006 01:05:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35379 invoked by uid 99); 8 Nov 2006 01:05:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 17:05:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 17:05:06 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Ghbrx-0000nX-Nc
	for java-user@lucene.apache.org; Tue, 07 Nov 2006 17:04:45 -0800
Message-ID: <7230940.post@talk.nabble.com>
Date: Tue, 7 Nov 2006 17:04:45 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <Pine.LNX.4.58.0611071128450.29748@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7211921.post@talk.nabble.com> <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu> <7214786.post@talk.nabble.com> <Pine.LNX.4.58.0611071128450.29748@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Chris,

   I have made some modification for the codes that I have posted yesterday.

      reader = IndexReader.open(DsConstant.indexDir);
			Searcher searcher = new IndexSearcher(reader);
			Analyzer analyzer = new StandardAnalyzer();
			QueryParser parser = new QueryParser(DsConstant.idxFileContent,
analyzer);
			
			Query query1 = parser.parse(searchString1);
			Query query2 = parser.parse(searchString2);
			
			filter = new Filter(){
				public BitSet bits (IndexReader reader){
					System.out.println("inside bit set");
					
					BitSet bits = new BitSet(reader.maxDoc());
					System.out.println("bits size is ::: " +bits.size());
					for(int i=start; (i<end && i<bits.size()); i++) 
					{
						bits.set(i);
				    }
					
					return bits;
				}
			};
			
			BooleanQuery bq = new BooleanQuery();
		    query1 = new FilteredQuery(new MatchAllDocQuery(), filter);
		    bq.add(query1, BooleanClause.Occur.MUST);
		    bq.add(query2, BooleanClause.Occur.MUST);
			
		    searchHits = searcher.search(bq);

   Can you pls point me out which part I have done it wrong. Thanks.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Filter-query-method-tf2586547.html#a7230940
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 07:08:54 2006
Return-Path: <java-user-return-24436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95879 invoked from network); 8 Nov 2006 07:08:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 07:08:53 -0000
Received: (qmail 13038 invoked by uid 500); 8 Nov 2006 07:08:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13005 invoked by uid 500); 8 Nov 2006 07:08:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12993 invoked by uid 99); 8 Nov 2006 07:08:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 23:08:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.152.235.220] (HELO l98upmt3.hewitt.com) (204.152.235.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 23:08:43 -0800
Received: from linkap11.hewitt.com (linkap11.hewitt.com [10.20.63.2])
	by l98upmt3.hewitt.com (8.13.4/8.13.4) with ESMTP id kA8780Tr021122
	for <java-user@lucene.apache.org>; Wed, 8 Nov 2006 01:08:21 -0600 (CST)
Received: from 10.20.63.62 by linkap11.hewitt.com with ESMTP (Tumbleweed
 MMS SMTP Relay); Wed, 08 Nov 2006 01:08:10 -0600
X-Server-Uuid: 8E43C66C-9DC0-4EF6-8749-D8C04BB61E49
To: java-user@lucene.apache.org
Subject: Problems while using double quotes
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OF1BB5E59C.AE484D6B-ON65257220.0026D5CD-65257220.00273052@hewitt.com>
From: "Krishnendra Nandi" <krishnendra.nandi@hewitt.com>
Date: Wed, 8 Nov 2006 12:38:00 +0530
X-MIMETrack: S/MIME Sign by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 11/08/2006 12:38:02 PM, Serialize by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 11/08/2006 12:38:02 PM, Serialize complete at 11/08/2006 12:38:02 PM,
 S/MIME Sign failed at 11/08/2006 12:38:02 PM: The cryptographic key was
 not found, Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.5FP1 HF52|June 29, 2006) at 11/08/2006 01:08:10
 AM, Serialize complete at 11/08/2006 01:08:10 AM
X-HANotesOU: Gurgaon
X-WSS-ID: 694F5DD33DW11318288-01-01
Content-Type: multipart/alternative;
 boundary="=_alternative 0027304C65257220_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0027304C65257220_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi All,

in my search criteria i am using a criteria "apache tomcat" but it is 
giving me a parse exception.

my searcher has this piece of code:

searchQuery=makeWildcardQuery(searchQuery);
masterQuery.add(MultiFieldQueryParser.parse(searchQuery,fields,analyzer),REQUIRED,PROHIBITED);




private String makeWildcardQuery(String query)
    {
        String result = query.trim();

        if (0 != result.length())
        {
            if (!result.endsWith("*"))
            {
                result = result + "*";
            }
        }

        return result;
    }

Thanks and Regards
Krishnendra Nandi
Hewitt Associates India (Pvt.) Ltd.
Unitech World
Sector-39, Gurgaon
Haryana-India
 
The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient 
is strictly prohibited.



--=_alternative 0027304C65257220_=--


From java-user-return-24437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 07:18:17 2006
Return-Path: <java-user-return-24437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98742 invoked from network); 8 Nov 2006 07:18:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 07:18:16 -0000
Received: (qmail 20938 invoked by uid 500); 8 Nov 2006 07:18:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20613 invoked by uid 500); 8 Nov 2006 07:18:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20602 invoked by uid 99); 8 Nov 2006 07:18:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 23:18:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 07 Nov 2006 23:18:04 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id kA87Hgl8226270
	for <java-user@lucene.apache.org>; Wed, 8 Nov 2006 07:17:42 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kA87KlmO2486512
	for <java-user@lucene.apache.org>; Wed, 8 Nov 2006 08:20:47 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kA87Hge0031206
	for <java-user@lucene.apache.org>; Wed, 8 Nov 2006 08:17:42 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kA87Hgsx031203
	for <java-user@lucene.apache.org>; Wed, 8 Nov 2006 08:17:42 +0100
In-Reply-To: <7230940.post@talk.nabble.com>
Subject: Re: Filter query method
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF04FF8261.1193B464-ON88257220.00267C16-88257220.0027F204@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 7 Nov 2006 23:16:18 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 08/11/2006 09:20:47
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Wooi Meng,

I don't understand this code.
In particular, searchString1 has no efect, and not clear what are start and
end.

spinergywmy <spinergywmy@gmail.com> wrote on 07/11/2006 17:04:45:
> Query query1 = parser.parse(searchString1);
> Query query2 = parser.parse(searchString2);
>
> filter = new Filter(){
>   public BitSet bits (IndexReader reader){
>     BitSet bits = new BitSet(reader.maxDoc());
>     for(int i=start; (i<end && i<bits.size()); i++)
>       bits.set(i);
>     return bits;
>   }
> };
>
> BooleanQuery bq = new BooleanQuery();
> query1 = new FilteredQuery(new MatchAllDocQuery(), filter);
> bq.add(query1, BooleanClause.Occur.MUST);
> bq.add(query2, BooleanClause.Occur.MUST);
>
> searchHits = searcher.search(bq);

Anyhow, if you do not cache the results of the first search, two simple
options are:

(1) score by both str1 and str2:

    Query query1 = parser.parse(searchString1);
    Query query2 = parser.parse(searchString2);
    BooleanQuery q = new BooleanQuery();
    q.add(query1, BooleanClause.Occur.MUST);
    q.add(query2, BooleanClause.Occur.MUST);
    Hits searchHits = searcher.search(q);

(2) score ony by str, filter by str1:

    Query query1 = parser.parse(searchString1);
    Filter f1 = new QueryFilter(query1);
    Query q2 = parser.parse(searchString2);
    Hits searchHits = searcher.search(q2,f1);

I would start with this, and go for caching only if performance issues
justify that.

Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 09:56:33 2006
Return-Path: <java-user-return-24438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36155 invoked from network); 8 Nov 2006 09:56:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 09:56:32 -0000
Received: (qmail 8717 invoked by uid 500); 8 Nov 2006 09:56:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8696 invoked by uid 500); 8 Nov 2006 09:56:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8685 invoked by uid 99); 8 Nov 2006 09:56:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 01:56:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 01:56:20 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GhkA4-000816-7h
	for java-user@lucene.apache.org; Wed, 08 Nov 2006 01:56:00 -0800
Message-ID: <7235584.post@talk.nabble.com>
Date: Wed, 8 Nov 2006 01:56:00 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <OF04FF8261.1193B464-ON88257220.00267C16-88257220.0027F204@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7211921.post@talk.nabble.com> <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu> <7214786.post@talk.nabble.com> <Pine.LNX.4.58.0611071128450.29748@hal.rescomp.berkeley.edu> <7230940.post@talk.nabble.com> <OF04FF8261.1193B464-ON88257220.00267C16-88257220.0027F204@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Doron,

   Thanks for the suggestion.

   However, the solution that u suggest come close to what I really want.

   The scenario sound like this:

      when I key in the first search query, for instance, "Java", the return
result has 3 records. Next, the perform the second search, which the query
this time is "Tomcat". 

      within my first search result, there is only one record that contains
"Java" and "Tomcat" words, therefore, there should be only one record return
for 2nd search. And the highlight is now move from "Java" to "Tomcat".

      basically, my second search query should be searching within the first
result records rather than go back to the index folder to redo the search
contents again.

   I hope I did explain what I have to do. Is there any solution for this?
Hope to hear from you soon.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Filter-query-method-tf2586547.html#a7235584
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 10:01:10 2006
Return-Path: <java-user-return-24439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37654 invoked from network); 8 Nov 2006 10:01:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 10:01:09 -0000
Received: (qmail 16280 invoked by uid 500); 8 Nov 2006 10:01:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16251 invoked by uid 500); 8 Nov 2006 10:01:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16240 invoked by uid 99); 8 Nov 2006 10:01:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 02:01:14 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [206.190.53.27] (HELO smtp102.plus.mail.re2.yahoo.com) (206.190.53.27)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 08 Nov 2006 02:00:59 -0800
Received: (qmail 9042 invoked from network); 8 Nov 2006 10:00:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=fCLtuN8bfjsycwjjCgXI9BYCInJob4S4dEt29WvrakR/tB/zfUoiX4z4DwPSXzNna5K26hbHSPQEyu9pr9GbO0FQ2TAk0uJzBF/bp/tkoXnkNZQZxkxDbMTxlkzwMBKXYBRahV27iwpdjWZM4j4iP4dmvwUnaVrW3fJA9415p5A=  ;
Received: from unknown (HELO ?127.0.0.1?) (fischauto333@217.110.73.186 with plain)
  by smtp102.plus.mail.re2.yahoo.com with SMTP; 8 Nov 2006 10:00:36 -0000
X-YMail-OSG: 9sVoKFwVM1mnYnH8SGR.YQ9YUw07rFPGx.4duTyfSPb_e6h_C5ByZBIMHq5enWaYnrg3uyF.yflTzrE0tMwH_8chbsMIQ1aJaG8xqDt7SH1ZpWCurVLQbQ--
Message-ID: <4551AA75.20809@yahoo.de>
Date: Wed, 08 Nov 2006 10:59:17 +0100
From: Joe <fischauto333@yahoo.de>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: whats the correct way to do normalisation?
References: <20061107114158.9187.qmail@web28110.mail.ukl.yahoo.com> <Pine.LNX.4.58.0611071134020.29748@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0611071134020.29748@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-133cf44dd3dff3680c96c1316a663e881eeac35a
>
> Are Wildcard, Prefix, and Fuzzy queries case sensitive?
>
> Unlike other types of Lucene queries, Wildcard, Prefix, and Fuzzy queries
> are not passed through the Analyzer, which is the component that performs
> operations such as stemming and lowercasing

Ok, thx

I want "Überraschung" is found by

Überr*
Ueberr*

So the best i can do is to do the normalisation manually(not by an 
analyzer) before the indexing/searching process?


		
___________________________________________________________ 
Telefonate ohne weitere Kosten vom PC zum PC: http://messenger.yahoo.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 11:00:55 2006
Return-Path: <java-user-return-24440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53295 invoked from network); 8 Nov 2006 11:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 11:00:54 -0000
Received: (qmail 9619 invoked by uid 500); 8 Nov 2006 11:01:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9581 invoked by uid 500); 8 Nov 2006 11:00:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9569 invoked by uid 99); 8 Nov 2006 11:00:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 03:00:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 03:00:45 -0800
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T7bd3da439788ad3ee41218@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Wed, 8 Nov 2006 12:01:14 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C70325.34D2E416"
Subject: Update an existing index
Date: Wed, 8 Nov 2006 12:01:13 +0100
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF4BD@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Update an existing index
Thread-Index: AccDJTTSiv57lWTHSpKBSTKLyFct/w==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C70325.34D2E416
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

how to update a field in lucene?

------_=_NextPart_001_01C70325.34D2E416--

From java-user-return-24441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 13:04:06 2006
Return-Path: <java-user-return-24441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83734 invoked from network); 8 Nov 2006 13:04:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 13:04:04 -0000
Received: (qmail 11890 invoked by uid 500); 8 Nov 2006 13:04:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11739 invoked by uid 500); 8 Nov 2006 13:04:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11724 invoked by uid 99); 8 Nov 2006 13:04:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 05:04:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 05:03:52 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kA8D3SQQ026113
	for <java-user@lucene.apache.org>; Wed, 8 Nov 2006 14:03:28 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 431D18BCE2
	for <java-user@lucene.apache.org>; Wed,  8 Nov 2006 14:03:28 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 28103-09 for <java-user@lucene.apache.org>;
 Wed,  8 Nov 2006 14:03:27 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 42D8F8B8DE
	for <java-user@lucene.apache.org>; Wed,  8 Nov 2006 14:03:27 +0100 (CET)
Message-ID: <4551D59F.2040503@uni-hd.de>
Date: Wed, 08 Nov 2006 14:03:27 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Update an existing index
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF4BD@EPLUXSEX01.ep.parl.union.eu>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF4BD@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

WATHELET Thomas schrieb:
> how to update a field in lucene?
> 
I think you'll have to delete the whole doc and add the doc with the new
field to the index...

hth,
martin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 13:34:45 2006
Return-Path: <java-user-return-24442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93158 invoked from network); 8 Nov 2006 13:34:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 13:34:44 -0000
Received: (qmail 59483 invoked by uid 500); 8 Nov 2006 13:34:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59313 invoked by uid 500); 8 Nov 2006 13:34:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59302 invoked by uid 99); 8 Nov 2006 13:34:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 05:34:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 05:34:34 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1146043nfc
        for <java-user@lucene.apache.org>; Wed, 08 Nov 2006 05:34:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JMxg10sMRR7ynNMJxuujnfGmzCpjVPbRlgrHFsPmql+5Qt9AfQ6Bgyz3XVmbFkkOJ3KM2SZB54uTX93QyAd/d9gByN/rGXsFfH3JYZ+ZH973nanpA9mM/4nF7oA4RwWk7W2dIiSGjwnC+cjULpH23dagzrsjzqCjuLnSWpRMFw8=
Received: by 10.82.131.1 with SMTP id e1mr1710477bud.1162992852628;
        Wed, 08 Nov 2006 05:34:12 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Wed, 8 Nov 2006 05:34:12 -0800 (PST)
Message-ID: <359a92830611080534y2332f1abh555fc517cd572875@mail.gmail.com>
Date: Wed, 8 Nov 2006 08:34:12 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: Update an existing index
In-Reply-To: <4551D59F.2040503@uni-hd.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20762_1860268.1162992852575"
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF4BD@EPLUXSEX01.ep.parl.union.eu>
	 <4551D59F.2040503@uni-hd.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20762_1860268.1162992852575
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Martin's got it right. You might get some mileage out of the IndexModifier
class if you have to do insertions and deletions, but really read the
documentation.

Also note: Any changes you make to an index are invisible to a searcher
that's already open. You have to close/reopen that searcher to see the
effects of index modifications (either insertions or deletions).

Erick

On 11/8/06, Martin Braun <mbraun@uni-hd.de> wrote:
>
> WATHELET Thomas schrieb:
> > how to update a field in lucene?
> >
> I think you'll have to delete the whole doc and add the doc with the new
> field to the index...
>
> hth,
> martin
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_20762_1860268.1162992852575--

From java-user-return-24443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 14:47:11 2006
Return-Path: <java-user-return-24443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21711 invoked from network); 8 Nov 2006 14:47:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 14:47:11 -0000
Received: (qmail 83689 invoked by uid 500); 8 Nov 2006 14:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83664 invoked by uid 500); 8 Nov 2006 14:41:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83652 invoked by uid 99); 8 Nov 2006 14:41:16 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 06:41:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of alicelista@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 06:40:47 -0800
Received: by wr-out-0506.google.com with SMTP id i32so505431wra
        for <java-user@lucene.apache.org>; Wed, 08 Nov 2006 06:40:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:x-mimeole:in-reply-to:thread-index;
        b=SsAIHz/n7B2GqNNjIFLp+LacnEN1Jrc5xhIDCWH1IaBnbQhYNOF9KNF7QpjAzHvwD8Rd1oU7dW1kvPHTtyh27ibjrQ3KhgYNUAjSshcmdt086BIKH2DzkqQ0z9f2oX1YsOR0KhTh2y2RL9ygsaFwpUm3+mpSGtHI9e8spDRtRBw=
Received: by 10.90.28.12 with SMTP id b12mr2347959agb.1162996825303;
        Wed, 08 Nov 2006 06:40:25 -0800 (PST)
Received: from etiopia ( [200.152.100.56])
        by mx.google.com with ESMTP id 9sm9077084wrl.2006.11.08.06.40.22;
        Wed, 08 Nov 2006 06:40:24 -0800 (PST)
From: "Alice" <alicelista@gmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Help on search
Date: Wed, 8 Nov 2006 12:39:25 -0200
Message-ID: <002401c70343$b231aa80$4900000a@m4u.com.br>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F07693019@tormail01.cihi.ca>
Thread-Index: AccCmmQaj7h7hvm0SMWwUZ0Y+y8o1AAA7gggACliJWA=
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you all guys!

I'll work on that!

-----Original Message-----
From: Vladimir Olenin [mailto:VOlenin@cihi.ca]=20
Sent: ter=E7a-feira, 7 de novembro de 2006 16:58
To: java-user@lucene.apache.org
Subject: RE: Help on search

You might actually try to look for some 'names database' (similar to
Wordnet). Someone has probably already compiled a list of english =
'names'
and their common short forms (eg, 'Vlad' for 'Vladimir', 'Fred' for
'Frederich', etc). Alternatevly, compile such DB yourself (and don't =
forget
to publish it under OSS license afterwards!!!! :) ) - if there is none =
right
now it really can be useful for quite a few applications.

Once you have the DB your can do similar things as with 'english =
synomym' DB
(not sure what Lucene notations are for this) - lookup 'synonym' for the
name and thus be able to search all forms.... Or use such DB for custom
stemming, as Erick suggested.

Vlad

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Tuesday, November 07, 2006 1:27 PM
To: java-user@lucene.apache.org
Subject: Re: Help on search

<<<How can I make a rule for stemming names?>>>

That's the problem all right. And I don't have any good answer. =
Wildcarding
could work for you, but it's really the same question, isn't it? "How do =
you
transform a typed name into a wildcard query?" is, I think, equivalent =
to
your question above (assuming that wildcarding is really truncation. =
i.e.
Fred* and not Fred*i*). And if you can answer it, you can stem or
wildcard......

Could a really simple rule like "only use the first 4 letters" work? Of
course there are obvious names for which this wouldn't work. But is
something like that "good enough"?

There is one other possibility, soundex/metaphone. There's a discussion =
in
Lucene in Action about how to do this. The basic idea is that you index =
and
search on words that "sound like" what's in the document. Whether =
"sounds
like" makes Fred and Frederich equivalent is the unknown here.....

Not much help I know

Good luck
Erick

On 11/7/06, Alice <alicelista@gmail.com> wrote:
>
> Thank you for answering.
>
> I thought about stemming at index and search time, but Im dealing with =

> names.
> How can I make a rule for stemming names?
>
> I'm thinking about different names, I thought I could use Lucene to=20
> help users find whomever they're looking for without having to spell=20
> their friends names correctly or fully.
>
> That's why I gave the example about 'Frederich', it is very common=20
> that users enter 'Fred'.
>
> I'm going to read about the wildcards.
>
> Anymore suggestions are very welcome.
>
> Thanks
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: ter=E7a-feira, 7 de novembro de 2006 15:12
> To: java-user@lucene.apache.org
> Subject: Re: Help on search
>
> You really have to get away from thinking about lucene like you would=20
> a database, or you'll have endless problems <G>.
>
> If you want just a bag of name parts, why use separate fields? For=20
> instance, index both firstname and lastname in a name field in each=20
> document. Then all you have to do to find all documents that have=20
> Brown in them is search on the single field name. There's no need to=20
> construct complex or clauses, which is what I suspect you're doing=20
> now.....
>
> You can also index firstname, lastname, and a third field "bagofnames"
> that
> contains both if you want.
>
> Vladimir is right, unless you take some actions you always get exact=20
> matches when you search, so I'm not surprised that searching for Fred=20
> does NOT return Frederich-containing documents.
>
> Whether wildcarding is your best strategy is debatable, it depends=20
> upon your intent. You could consider stemming both at index and search =

> time.
> Generically, all that means is that you index "Fred" for "Frederich".=20
> and at search time you search for "Fred". There are stemming analyzers =

> in Lucene, but whether they do what you want only you can decide. Be=20
> aware that wildcard searches frequently run afoul of a TooManyClauses=20
> exception.
> There
> is a bunch of information from people far more knowledgeable than me=20
> in this mail archive if you search on "wildcard". It's a more=20
> complicated matter than you might think at first.
>
> Note that the TooManyClauses exception very likely won't show up in=20
> your test data sets. It won't show up until you put in a bunch of=20
> data. See TooManyClauses in the javadoc.....
>
> I'd argue if you can create rules for wildcarding, you can create=20
> rules for stemming By that I mean that if you have a programmatic way=20
> to turn "Frederich" into "Fred", you can just index and search on=20
> "Fred" equally easily and not have to deal with wildcard complexity.
>
> Of course, since I don't know what problem you're actually trying to=20
> solve, this may be irrelevant....
>
> Best
> Erick
>
> On 11/7/06, Alice <alicelista@gmail.com> wrote:
> >
> > Hello!
> >
> > I am totally new to Lucene and I'm trying to use it with my web=20
> > application.
> >
> >
> >
> > What I'm doing is reading a table from my database line by line and=20
> > indexing the columns.
> >
> > I read the users data such as First Name, Last Name, Email and so =
on.
> >
> >
> >
> > I hava a field by column, such as: firstName=3D"Frederich"
> lastName=3D"Brown"
> >
> > My intetion is to make users find other users using name, lastName=20
> > or email.
> >
> > What is the best way to do it?
> >
> > If the user enter "Fred Brown", as I use queryParser, this string is =

> > broken to "Fred" "Brown" and I search those tokens in every field.
> >
> >
> >
> > As "Brown" was indexed, the user's registry is found.
> >
> > But if the user enters "Fred", no user is found.
> >
> > Why is that? I thought it would return the user "Frederich Brown"
> either.
> >
> > Can someone help?
> >
> >
> >
> > Thanks!
> >
> >
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 15:30:24 2006
Return-Path: <java-user-return-24444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32570 invoked from network); 8 Nov 2006 15:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 15:30:22 -0000
Received: (qmail 68383 invoked by uid 500); 8 Nov 2006 15:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68355 invoked by uid 500); 8 Nov 2006 15:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68343 invoked by uid 99); 8 Nov 2006 15:30:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 07:30:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 07:30:11 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 38de_d3e0ca78_6f3e_11db_957d_003048245df9;
	Wed, 08 Nov 2006 10:36:08 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Update an existing index
Date: Wed, 8 Nov 2006 10:29:00 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F0773AA9A@tormail01.cihi.ca>
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF4BD@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Update an existing index
Thread-Index: AccDJTTSiv57lWTHSpKBSTKLyFct/wAJSfag
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

>From what I remember reading in the docs, you need to delete current
document and create a new one with updated fields.

Vlad


-----Original Message-----
From: WATHELET Thomas [mailto:thomas.wathelet@europarl.europa.eu]=20
Sent: Wednesday, November 08, 2006 6:01 AM
To: java-user@lucene.apache.org
Subject: Update an existing index

how to update a field in lucene?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 18:42:48 2006
Return-Path: <java-user-return-24445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99716 invoked from network); 8 Nov 2006 18:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 18:42:47 -0000
Received: (qmail 27103 invoked by uid 500); 8 Nov 2006 18:42:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27061 invoked by uid 500); 8 Nov 2006 18:42:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27050 invoked by uid 99); 8 Nov 2006 18:42:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:42:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:42:36 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5D05F5B773; Wed,  8 Nov 2006 10:42:16 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 540C97F403
	for <java-user@lucene.apache.org>; Wed,  8 Nov 2006 10:42:16 -0800 (PST)
Date: Wed, 8 Nov 2006 10:42:16 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: whats the correct way to do normalisation?
In-Reply-To: <4551AA75.20809@yahoo.de>
Message-ID: <Pine.LNX.4.58.0611081039240.20337@hal.rescomp.berkeley.edu>
References: <20061107114158.9187.qmail@web28110.mail.ukl.yahoo.com>
 <Pine.LNX.4.58.0611071134020.29748@hal.rescomp.berkeley.edu> <4551AA75.20809@yahoo.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=ISO-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org


: I want "=DCberraschung" is found by
:
: =DCberr*
: Ueberr*
:
: So the best i can do is to do the normalisation manually(not by an
: analyzer) before the indexing/searching process?

Or use an Analyzer at index time that puts both the UTF-8 version of the
string and the Latin-1 version of the string in the same field (at the
same position so they still work with phrases) and at query time just
search for the text the user types in as is ... that should work for both
straight term queries and prefix/wildcard queries that don't get analyzed
at query time.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 18:51:01 2006
Return-Path: <java-user-return-24446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2563 invoked from network); 8 Nov 2006 18:51:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 18:51:00 -0000
Received: (qmail 48295 invoked by uid 500); 8 Nov 2006 18:51:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48270 invoked by uid 500); 8 Nov 2006 18:51:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48259 invoked by uid 99); 8 Nov 2006 18:51:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:51:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 10:50:50 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 46AD35B773; Wed,  8 Nov 2006 10:50:30 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 407747F403
	for <java-user@lucene.apache.org>; Wed,  8 Nov 2006 10:50:30 -0800 (PST)
Date: Wed, 8 Nov 2006 10:50:30 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Problems while using double quotes
In-Reply-To: <OF1BB5E59C.AE484D6B-ON65257220.0026D5CD-65257220.00273052@hewitt.com>
Message-ID: <Pine.LNX.4.58.0611081048470.20337@hal.rescomp.berkeley.edu>
References: <OF1BB5E59C.AE484D6B-ON65257220.0026D5CD-65257220.00273052@hewitt.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: in my search criteria i am using a criteria "apache tomcat" but it is
: giving me a parse exception.

if i understand you correctly, you're saying that when searchQuery is...

	"apache tomcat"

you get a parse error? .. is that by any chance because you are allways
attaching a "*" to the end of searchQuery in the makeWildcardQuery method,
so what you wind up passing to the QueryParser is...

	"apache tomcat"*

... ? ... that's not a legal query string.



:
: my searcher has this piece of code:
:
: searchQuery=makeWildcardQuery(searchQuery);
: masterQuery.add(MultiFieldQueryParser.parse(searchQuery,fields,analyzer),REQUIRED,PROHIBITED);
:
:
:
:
: private String makeWildcardQuery(String query)
:     {
:         String result = query.trim();
:
:         if (0 != result.length())
:         {
:             if (!result.endsWith("*"))
:             {
:                 result = result + "*";
:             }
:         }
:
:         return result;
:     }
:
: Thanks and Regards
: Krishnendra Nandi
: Hewitt Associates India (Pvt.) Ltd.
: Unitech World
: Sector-39, Gurgaon
: Haryana-India
:
: The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient
: is strictly prohibited.
:
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 08 19:03:26 2006
Return-Path: <java-user-return-24447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6297 invoked from network); 8 Nov 2006 19:03:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2006 19:03:23 -0000
Received: (qmail 71339 invoked by uid 500); 8 Nov 2006 19:03:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71311 invoked by uid 500); 8 Nov 2006 19:03:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71292 invoked by uid 99); 8 Nov 2006 19:03:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:03:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 11:02:59 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id kA8J2bNZ322278
	for <java-user@lucene.apache.org>; Wed, 8 Nov 2006 19:02:37 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kA8J5gHM2895968
	for <java-user@lucene.apache.org>; Wed, 8 Nov 2006 20:05:42 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kA8J2bTF020298
	for <java-user@lucene.apache.org>; Wed, 8 Nov 2006 20:02:37 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kA8J2aHW020295
	for <java-user@lucene.apache.org>; Wed, 8 Nov 2006 20:02:36 +0100
In-Reply-To: <7235584.post@talk.nabble.com>
Subject: Re: Filter query method
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFBAB9076A.1877B7BD-ON88257220.005A0C80-88257220.00669CE4@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 8 Nov 2006 10:40:48 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 08/11/2006 21:05:42
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

spinergywmy <spinergywmy@gmail.com> wrote on 08/11/2006 01:56:00:
>       within my first search result, there is only one record that
contains
> "Java" and "Tomcat" words, therefore, there should be only one record
return
> for 2nd search. And the highlight is now move from "Java" to "Tomcat".

To my understanding the 2nd suggestion does exactly this, as long as the
highlighter QueryScorer is based on q2:

  :  (2) score only by str2, filter by str1:
  :      Query query1 = parser.parse(searchString1);
  :      Filter f1 = new QueryFilter(query1);
  :      Query q2 = parser.parse(searchString2);
  :      Hits searchHits = searcher.search(q2,f1);


>       basically, my second search query should be searching within the
first
> result records rather than go back to the index folder to redo the search
> contents again.

Going back to the server (for q1) might take more time, but is simple. Task
wise, does not block you from programming any behavior required (e.g. the
various options that Chris mentioned). You would be able to get the same
results - returned docs, their scores, highlighting - as when not going
back to the server (for q1). Only disadvantage might be performance. Did
you get that working but saw performance problems?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 00:49:20 2006
Return-Path: <java-user-return-24448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29368 invoked from network); 9 Nov 2006 00:49:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 00:49:20 -0000
Received: (qmail 38181 invoked by uid 500); 9 Nov 2006 00:49:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37713 invoked by uid 500); 9 Nov 2006 00:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37702 invoked by uid 99); 9 Nov 2006 00:49:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 16:49:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 16:49:09 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Ghy64-0001f8-OI
	for java-user@lucene.apache.org; Wed, 08 Nov 2006 16:48:48 -0800
Message-ID: <7250452.post@talk.nabble.com>
Date: Wed, 8 Nov 2006 16:48:48 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <OFBAB9076A.1877B7BD-ON88257220.005A0C80-88257220.00669CE4@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7211921.post@talk.nabble.com> <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu> <7214786.post@talk.nabble.com> <Pine.LNX.4.58.0611071128450.29748@hal.rescomp.berkeley.edu> <7230940.post@talk.nabble.com> <OF04FF8261.1193B464-ON88257220.00267C16-88257220.0027F204@il.ibm.com> <7235584.post@talk.nabble.com> <OFBAB9076A.1877B7BD-ON88257220.005A0C80-88257220.00669CE4@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Thanks, I will try it again.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Filter-query-method-tf2586547.html#a7250452
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 05:05:25 2006
Return-Path: <java-user-return-24449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15331 invoked from network); 9 Nov 2006 05:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 05:05:24 -0000
Received: (qmail 81373 invoked by uid 500); 9 Nov 2006 05:05:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81323 invoked by uid 500); 9 Nov 2006 05:05:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81293 invoked by uid 99); 9 Nov 2006 05:05:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 21:05:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of samuelgiffney@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 08 Nov 2006 21:05:10 -0800
Received: by ug-out-1314.google.com with SMTP id k40so120966ugc
        for <java-user@lucene.apache.org>; Wed, 08 Nov 2006 21:04:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=AGNTZJTYvEGcMzzyX2fbXT9jqFSGhK1ADheA4u/cJvmf5pC/dw2mymygLFCUNoSkTi9fgkXcmVE5H1cFld98k177+dCVB9U1eUgO3gSUH+XJPICtn3Nrlv3jBe/ydclqhLzchhSOQ/rVSQ7bvSjojLXRSeAeBe0XLkZ2cNt1o2k=
Received: by 10.78.75.15 with SMTP id x15mr518227hua.1163048689241;
        Wed, 08 Nov 2006 21:04:49 -0800 (PST)
Received: by 10.78.154.13 with HTTP; Wed, 8 Nov 2006 21:04:49 -0800 (PST)
Message-ID: <fc7839340611082104m1b176718ia6d53297798e3787@mail.gmail.com>
Date: Thu, 9 Nov 2006 18:04:49 +1300
From: "Sam Giffney" <samuelgiffney@gmail.com>
To: java-user@lucene.apache.org
Subject: Google Coop - Lucene style
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Most of you have probably heard of the
Google Coop Custom Search Engine
http://www.google.com/coop/cse/overview
A user defined vertical search of the Google index

The obvious and simple way to implement a Google Coop style facility
in Lucene would be to add a unique id to each document in the index
for each website selected in each users custom engine.
That's a lot of 'eaches', and it doesn't seem scalable.

Does anyone have any idea (even on a theoretical level) how Google
would be doing this and whether this kind of thing would be possible
in Lucene?

Sam

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 09:24:44 2006
Return-Path: <java-user-return-24450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81490 invoked from network); 9 Nov 2006 09:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 09:24:44 -0000
Received: (qmail 90963 invoked by uid 500); 9 Nov 2006 09:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90717 invoked by uid 500); 9 Nov 2006 09:24:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90701 invoked by uid 99); 9 Nov 2006 09:24:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 01:24:45 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [206.190.53.26] (HELO smtp101.plus.mail.re2.yahoo.com) (206.190.53.26)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Nov 2006 01:24:30 -0800
Received: (qmail 79280 invoked from network); 9 Nov 2006 09:24:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.de;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=CAKjjVhdhxpdYKFK9gWymH0jzOBK5By7phfIz4JVgb2JGmrgTHXdNGcG56S3EsWgrQoEVRCketvmBXD5SIAwgdidZ0BnwjWFFGHyxJv07/6eNLtMbh8GiEpWbIdIrRJ5f642HpimJWCQTHfMIvQ18N6A0k2glitb/y1hKYKNn0g=  ;
Received: from unknown (HELO ?127.0.0.1?) (fischauto333@217.110.73.186 with plain)
  by smtp101.plus.mail.re2.yahoo.com with SMTP; 9 Nov 2006 09:24:06 -0000
X-YMail-OSG: QsXxWl8VM1nff6LOhmkgHMQLQgQl0yOkyAppudTWJY0teERYbjZ99rwBpoESYr4F.eNTdt4FTJnjESIGYO_GHwi4InqvEEGuYVNO41GvxggYrjwBJoIELg2_DvpGkN7KSaNqYntgP70GXi3kYViefby5KDrtF5RIGQg-
Message-ID: <4552F36E.9010203@yahoo.de>
Date: Thu, 09 Nov 2006 10:22:54 +0100
From: Joe <fischauto333@yahoo.de>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: whats the correct way to do normalisation?
References: <20061107114158.9187.qmail@web28110.mail.ukl.yahoo.com> <Pine.LNX.4.58.0611071134020.29748@hal.rescomp.berkeley.edu> <4551AA75.20809@yahoo.de> <Pine.LNX.4.58.0611081039240.20337@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0611081039240.20337@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
> : I want "Überraschung" is found by
> :
> : Überr*
> : Ueberr*
> :
> : So the best i can do is to do the normalisation manually(not by an
> : analyzer) before the indexing/searching process?
>
> Or use an Analyzer at index time that puts both the UTF-8 version of the
> string and the Latin-1 version of the string in the same field (at the
> same position so they still work with phrases) and at query time just
> search for the text the user types in as is ... that should work for both
> straight term queries and prefix/wildcard queries that don't get analyzed
> at query time.
>   
Oh yes thats sounds good too.




		
___________________________________________________________ 
Telefonate ohne weitere Kosten vom PC zum PC: http://messenger.yahoo.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 09:25:02 2006
Return-Path: <java-user-return-24451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81548 invoked from network); 9 Nov 2006 09:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 09:25:01 -0000
Received: (qmail 92256 invoked by uid 500); 9 Nov 2006 09:25:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92223 invoked by uid 500); 9 Nov 2006 09:25:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92212 invoked by uid 99); 9 Nov 2006 09:25:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 01:25:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Nov 2006 01:24:51 -0800
Received: (qmail invoked by alias); 09 Nov 2006 09:24:30 -0000
Received: from p548C4ED3.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.78.211]
  by mail.gmx.net (mp044) with SMTP; 09 Nov 2006 10:24:30 +0100
X-Authenticated: #3493418
Message-ID: <4552F324.9020402@gmx.de>
Date: Thu, 09 Nov 2006 10:21:40 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Scoring depending on terms combination
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

How can I manipulate the score depending on the combination of query 
terms containing in the result document? Not a single term is important. 
That could be boosted. Important is the combination of terms.

The user searches for the terms A, B, C and D.
Of-course, the document containing all terms has the highest score. The 
document containing just the terms B and C has a higher score than the 
document containing the terms A and B.

A+B+C+D > B+C > A+B

I know the boosting combinations at query time.

Has anybody an idea how to do this?

Thanks. Sören

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 12:59:58 2006
Return-Path: <java-user-return-24452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42903 invoked from network); 9 Nov 2006 12:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 12:59:57 -0000
Received: (qmail 72395 invoked by uid 500); 9 Nov 2006 13:00:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72370 invoked by uid 500); 9 Nov 2006 13:00:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72358 invoked by uid 99); 9 Nov 2006 13:00:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:00:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.152.235.220] (HELO l98upmt3.hewitt.com) (204.152.235.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 04:59:46 -0800
Received: from linkap11.hewitt.com (linkap11.hewitt.com [10.20.63.2])
	by l98upmt3.hewitt.com (8.13.4/8.13.4) with ESMTP id kA9CxOgO017743
	for <java-user@lucene.apache.org>; Thu, 9 Nov 2006 06:59:25 -0600 (CST)
Received: from 10.20.63.62 by linkap11.hewitt.com with ESMTP (Tumbleweed
 MMS SMTP Relay); Thu, 09 Nov 2006 06:59:15 -0600
X-Server-Uuid: 8E43C66C-9DC0-4EF6-8749-D8C04BB61E49
To: java-user@lucene.apache.org
Subject: Specific Query on multiple fields
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OF2B032965.D4CE7B47-ON65257221.0046BC7F-65257221.0047568B@hewitt.com>
From: "Krishnendra Nandi" <krishnendra.nandi@hewitt.com>
Date: Thu, 9 Nov 2006 18:29:07 +0530
X-MIMETrack: S/MIME Sign by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 11/09/2006 06:29:12 PM, Serialize by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 11/09/2006 06:29:12 PM, Serialize complete at 11/09/2006 06:29:12 PM,
 S/MIME Sign failed at 11/09/2006 06:29:12 PM: The cryptographic key was
 not found, Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.5FP1 HF52|June 29, 2006) at 11/09/2006 06:59:16
 AM, Serialize complete at 11/09/2006 06:59:16 AM
X-HANotesOU: Gurgaon
X-WSS-ID: 694DF9A93DW13157687-01-01
Content-Type: multipart/alternative;
 boundary="=_alternative 0047568965257221_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0047568965257221_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi All,

How do we use a specific query on multiple fields ?

for eg.
I have to run a query "jakarta tomcat" (the string which i give in my 
textbox is with double quotes as I have to get the string 'jakarta tomcat' 
together)
on mutiple fields like "content" ,"title","examples" 

Also if I have a specific string query like "Jakarta:" How do i get that? 
would it not try to search a field with the name jakarta ? 
As far as I can see it ignores the ':' and tries to search only on 
jakarta.

All possible help is welcome.
Thanks and Regards
Krishnendra Nandi
Hewitt Associates India (Pvt.) Ltd.
Unitech World
Sector-39, Gurgaon
Haryana-India
 
The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient 
is strictly prohibited.



--=_alternative 0047568965257221_=--


From java-user-return-24453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 13:16:02 2006
Return-Path: <java-user-return-24453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47536 invoked from network); 9 Nov 2006 13:16:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 13:16:00 -0000
Received: (qmail 6512 invoked by uid 500); 9 Nov 2006 13:16:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6478 invoked by uid 500); 9 Nov 2006 13:16:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6459 invoked by uid 99); 9 Nov 2006 13:16:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:16:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 05:15:50 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1554263nfc
        for <java-user@lucene.apache.org>; Thu, 09 Nov 2006 05:15:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qfsQG+opwA8xEJsO29XRotIdN9hUfrzT7Mb/ePLH6QbhUeA7sHjWjzKPGp+y1fGqHxEZjmnelQdtIsQPR9H3xeZ9ocTPUYnQt76BXZ9bEkxVGZ8me6qWeXnQk/VOIeJed+oGX3oJyIDr01XojBAv7gf9X1kqDZX0oAQkjHGI8D8=
Received: by 10.82.182.8 with SMTP id e8mr125559buf.1163078129040;
        Thu, 09 Nov 2006 05:15:29 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Thu, 9 Nov 2006 05:15:28 -0800 (PST)
Message-ID: <359a92830611090515t34b755fexbb365c78616a211@mail.gmail.com>
Date: Thu, 9 Nov 2006 08:15:28 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Specific Query on multiple fields
In-Reply-To: <OF2B032965.D4CE7B47-ON65257221.0046BC7F-65257221.0047568B@hewitt.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35669_10458319.1163078128998"
References: <OF2B032965.D4CE7B47-ON65257221.0046BC7F-65257221.0047568B@hewitt.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35669_10458319.1163078128998
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, if I think you can create three PhraseQueries and combine them  in a
BooleanQuery with SHOULD. That is
PhraseQuery pq1 = new PhraseQuery();
pq1.add(new Term("content", "jakarta tomcat"));
pq2.add(new Term("title", "jakarta tomcat"));

BooleanQuery bq = new BooleanQuery();
bq.add(pq1, BooleanClause.Occur.SHOULD);
bq.add(pq2, BoleanClause.Occur.SHOULD);

and then use the bq for your searcher.

Note: you may have to do a separate add for pq, once for "jakarta" and once
for "tomcat"...

As far as the second question is concerned, you probably are running afoul
of the analyzer you use either at index time or search time or both. If you
use StandardAnalyzer, it will strip out the colon ':', so searching only for
"jakarta" is exactly what I would expect. Something like WhitespaceAnalyzer
might be a better bet...

Hope this helps
Erick



On 11/9/06, Krishnendra Nandi <krishnendra.nandi@hewitt.com> wrote:
>
> Hi All,
>
> How do we use a specific query on multiple fields ?
>
> for eg.
> I have to run a query "jakarta tomcat" (the string which i give in my
> textbox is with double quotes as I have to get the string 'jakarta tomcat'
> together)
> on mutiple fields like "content" ,"title","examples"
>
> Also if I have a specific string query like "Jakarta:" How do i get that?
> would it not try to search a field with the name jakarta ?
> As far as I can see it ignores the ':' and tries to search only on
> jakarta.
>
> All possible help is welcome.
> Thanks and Regards
> Krishnendra Nandi
> Hewitt Associates India (Pvt.) Ltd.
> Unitech World
> Sector-39, Gurgaon
> Haryana-India
>
> The information contained in this e-mail and any accompanying documents
> may contain information that is confidential or otherwise protected from
> disclosure. If you are not the intended recipient of this message, or if
> this message has been addressed to you in error, please immediately alert
> the sender by reply e-mail and then delete this message, including any
> attachments. Any dissemination, distribution or other use of the contents of
> this message by anyone other than the intended recipient
> is strictly prohibited.
>
>
>
>

------=_Part_35669_10458319.1163078128998--

From java-user-return-24454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 14:04:08 2006
Return-Path: <java-user-return-24454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64765 invoked from network); 9 Nov 2006 14:04:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 14:04:06 -0000
Received: (qmail 21509 invoked by uid 500); 9 Nov 2006 14:04:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21481 invoked by uid 500); 9 Nov 2006 14:04:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21470 invoked by uid 99); 9 Nov 2006 14:04:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 06:04:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of patrek@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO nz-out-0102.google.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 06:03:56 -0800
Received: by nz-out-0102.google.com with SMTP id s1so132157nze
        for <java-user@lucene.apache.org>; Thu, 09 Nov 2006 06:03:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=grNIbYZHj1hXlIwqUOYxUhHgMRElfzjaS4jI1ij0HXLkmC6f+49LfXqE6NDnmfIYzDmPwT0wFBCCALyImeYzlSh/2NmpHQ2f2ZymPEgv7t6XT4AZelESu08fVKG5EZqoSwUvi94NCVPRc7EYkCU2iH0sp53rYHWTzi0ZLUb3BN0=
Received: by 10.65.224.11 with SMTP id b11mr312184qbr.1163081013330;
        Thu, 09 Nov 2006 06:03:33 -0800 (PST)
Received: by 10.65.22.5 with HTTP; Thu, 9 Nov 2006 06:03:33 -0800 (PST)
Message-ID: <48b038c60611090603n14abb607h2c33a79dd952386f@mail.gmail.com>
Date: Thu, 9 Nov 2006 09:03:33 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Specific Query on multiple fields
In-Reply-To: <OF2B032965.D4CE7B47-ON65257221.0046BC7F-65257221.0047568B@hewitt.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43009_14297743.1163081013183"
References: <OF2B032965.D4CE7B47-ON65257221.0046BC7F-65257221.0047568B@hewitt.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43009_14297743.1163081013183
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

How do we use a specific query on multiple fields ?
>
> for eg.
> I have to run a query "jakarta tomcat" (the string which i give in my
> textbox is with double quotes as I have to get the string 'jakarta tomcat'
> together)
> on mutiple fields like "content" ,"title","examples"


Take a look at org.apache.lucene.queryParser.MultiFieldQueryParser, it
probably does what you want.

Patrick

------=_Part_43009_14297743.1163081013183--

From java-user-return-24455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 15:04:10 2006
Return-Path: <java-user-return-24455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89117 invoked from network); 9 Nov 2006 15:04:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 15:04:09 -0000
Received: (qmail 77445 invoked by uid 500); 9 Nov 2006 15:04:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77379 invoked by uid 500); 9 Nov 2006 15:04:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77336 invoked by uid 99); 9 Nov 2006 15:04:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 07:04:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 07:03:57 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 3c6f_56e301b4_7004_11db_9fb7_003048245df9;
	Thu, 09 Nov 2006 10:09:58 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Google Coop - Lucene style
Date: Thu, 9 Nov 2006 10:02:47 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F0773AF40@tormail01.cihi.ca>
In-Reply-To: <fc7839340611082104m1b176718ia6d53297798e3787@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Google Coop - Lucene style
Thread-Index: AccDvKHXl2MkGQR5QjOuvsXQv6KrGAAUnISA
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I think it's pretty straighforward: the 'custom search engine' is
essentially the 'filter' that can also modify score weights of found
documents. I'd say 'coop engine' + 'your query' should be relatively
easily reducted into your 'your extended query', once you subsitute
'coop engine' with 'query parameters' you set for that engine. The only
thing that remains in the 'scorer' part of the coop engine, but that
seems relatively straightforward as well..... Or I'm missing some
crucial part altogether :).

Vlad

-----Original Message-----
From: Sam Giffney [mailto:samuelgiffney@gmail.com]=20
Sent: Thursday, November 09, 2006 12:05 AM
To: java-user@lucene.apache.org
Subject: Google Coop - Lucene style

Most of you have probably heard of the
Google Coop Custom Search Engine
http://www.google.com/coop/cse/overview
A user defined vertical search of the Google index

The obvious and simple way to implement a Google Coop style facility in
Lucene would be to add a unique id to each document in the index for
each website selected in each users custom engine.
That's a lot of 'eaches', and it doesn't seem scalable.

Does anyone have any idea (even on a theoretical level) how Google would
be doing this and whether this kind of thing would be possible in
Lucene?

Sam

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 16:21:58 2006
Return-Path: <java-user-return-24456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15630 invoked from network); 9 Nov 2006 16:21:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 16:21:56 -0000
Received: (qmail 44002 invoked by uid 500); 9 Nov 2006 16:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43927 invoked by uid 500); 9 Nov 2006 16:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43916 invoked by uid 99); 9 Nov 2006 16:21:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 08:21:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 08:21:46 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1602182nfc
        for <java-user@lucene.apache.org>; Thu, 09 Nov 2006 08:21:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=o1lksdfTR6/0S9biCnISSmgZQ5mFsy1bSUXlCQhQcHPrmjtlbPeO+YHgi8sDEPBDc+Fy2K1+3eA/6wRqE2dSDVNE5VMSi6ndQplZI1vaTDIvO64Hzz03XO0ZGM9bYhQdPB18Kyi5g1LaUbJJYPFaFIaeHEUJ4ynYD6kPegBG5xw=
Received: by 10.49.27.17 with SMTP id e17mr3980866nfj.1163089278254;
        Thu, 09 Nov 2006 08:21:18 -0800 (PST)
Received: by 10.49.110.2 with HTTP; Thu, 9 Nov 2006 08:21:18 -0800 (PST)
Message-ID: <ab0709bf0611090821o4139e568y572234da174a6383@mail.gmail.com>
Date: Thu, 9 Nov 2006 11:21:18 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Multi Query MultiSearcher
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39722_32709116.1163089278113"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39722_32709116.1163089278113
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Okay, so no help with the JGuruMultisearcher...How about something more
specific:

It seems easy enough to just copy The JGuruMS method of keeping a an array
of Weight's around and feeding a different one to
each subsearcher...I am worried about the following method though...I am
guessing that this method has to do with generating correct
scores across Indexes and I am worried that creating a more than one weight
using this method and then passing a different one to each subsearcher
will not generate the correct scores (or something). This whole Weight thing
does not appear to have been around when the JGuruMultisearcher was written.
Any tips, info, insight?

Thanks, Mark


  /**
   * Create weight in multiple index scenario.
   *
   * Distributed query processing is done in the following steps:
   * 1. rewrite query
   * 2. extract necessary terms
   * 3. collect dfs for these terms from the Searchables
   * 4. create query weight using aggregate dfs.
   * 5. distribute that weight to Searchables
   * 6. merge results
   *
   * Steps 1-4 are done here, 5+6 in the search() methods
   *
   * @return rewritten queries
   */
  protected Weight createWeight(Query original) throws IOException {
    // step 1
    Query rewrittenQuery = rewrite(original);

    // step 2
    Set terms = new HashSet();
    rewrittenQuery.extractTerms(terms);

    // step3
    Term[] allTermsArray = new Term[terms.size()];
    terms.toArray(allTermsArray);
    int[] aggregatedDfs = new int[terms.size()];
    for (int i = 0; i < searchables.length; i++) {
      int[] dfs = searchables[i].docFreqs(allTermsArray);
      for(int j=0; j<aggregatedDfs.length; j++){
        aggregatedDfs[j] += dfs[j];
      }
    }

    HashMap dfMap = new HashMap();
    for(int i=0; i<allTermsArray.length; i++) {
      dfMap.put(allTermsArray[i], new Integer(aggregatedDfs[i]));
    }

    // step4
    int numDocs = maxDoc();
    CachedDfSource cacheSim = new CachedDfSource(dfMap, numDocs);

    return rewrittenQuery.weight(cacheSim);
  }

------=_Part_39722_32709116.1163089278113--

From java-user-return-24457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 16:50:30 2006
Return-Path: <java-user-return-24457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26859 invoked from network); 9 Nov 2006 16:50:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 16:50:29 -0000
Received: (qmail 11405 invoked by uid 500); 9 Nov 2006 16:50:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11381 invoked by uid 500); 9 Nov 2006 16:50:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11359 invoked by uid 99); 9 Nov 2006 16:50:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 08:50:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 08:50:12 -0800
Received: by ug-out-1314.google.com with SMTP id k40so268742ugc
        for <java-user@lucene.apache.org>; Thu, 09 Nov 2006 08:49:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:to:message-id:content-type:from:subject:date:x-mailer;
        b=Qm713uUVuTHLUU5GxSwRpVeHyY3mk+P3jHxjdLTVVK+1taiIgFhM/SQdxf/bIpE0UBj58Dsc3HvzYmyEaYlEwHMUoaNlAlZMr4Zau8RPJ7nlhWXJdYMUEzBnSoZ9GoldAD3zL3ULzKcGMLqT6/AhD6yRZDinZ9umfpLMIwWQIm8=
Received: by 10.67.117.2 with SMTP id u2mr1638632ugm.1163090989236;
        Thu, 09 Nov 2006 08:49:49 -0800 (PST)
Received: from ?192.168.0.100? ( [83.249.118.246])
        by mx.google.com with ESMTP id j2sm998283ugf.2006.11.09.08.49.48;
        Thu, 09 Nov 2006 08:49:48 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
To: java-user@lucene.apache.org
Message-Id: <D3CF02A9-A8FE-46B7-9F29-D1D53A8ED3A7@gmail.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-6-100196103
From: karl wettin <karl.wettin@gmail.com>
Subject: TerraCotta cluster Lucene
Date: Thu, 9 Nov 2006 17:49:49 +0100
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-6-100196103
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Some people might find this interesting. I have personally not looked  
at it in depth:

Engineers at TerraCotta have detailed a new way to cluster lucene,  
the popular text search library from Apache. Their method involves  
implementing the lucene RAMDirectory interface and using TerraCotta  
DSO to share the RAMDirectory across JVMs.

http://www.infoq.com/news/2006/11/clustering-lucene-terracotta	
--Apple-Mail-6-100196103--

From java-user-return-24458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 18:56:24 2006
Return-Path: <java-user-return-24458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77537 invoked from network); 9 Nov 2006 18:56:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 18:56:23 -0000
Received: (qmail 78693 invoked by uid 500); 9 Nov 2006 18:56:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78655 invoked by uid 500); 9 Nov 2006 18:56:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78640 invoked by uid 99); 9 Nov 2006 18:56:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 10:56:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [128.218.33.11] (HELO gossamer.ckm.ucsf.edu) (128.218.33.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 10:56:10 -0800
Received: from CKMPC08 (tikal.library.ucsf.edu [128.218.15.151])
	by gossamer.ckm.ucsf.edu (8.13.7/8.13.6) with ESMTP id kA9Itks8004212
	for <java-user@lucene.apache.org>; Thu, 9 Nov 2006 10:55:49 -0800 (PST)
From: "Renaud Waldura" <renaud.waldura@library.ucsf.edu>
To: <java-user@lucene.apache.org>
Subject: PDF Highlighting Again
Date: Thu, 9 Nov 2006 10:55:41 -0800
Message-ID: <001b01c70430$aa727e80$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccEMKdAMajKGMroTm+xfwBh3zIDbQ==
X-Virus-Checked: Checked by ClamAV on apache.org

Greetings:
 
I read the mailing-list archives about this topic and found the PDFBox
solutions at: http://www.pdfbox.org/userguide/highlighting.html

Basically there are 3 options:
1- append query parameters to the PDF URL
2- generate a highlight XML document that Acrobat Reader will download
separately
3- alter contents of the PDF

I've only tried (1) so far and I really like the user experience: Acrobat
Reader displays a list of matches in a small pane on the right. By clicking
in this pane the user can bounce around the document. I don't think (2) or
(3) can match that.

I implemented (1) by rewriting the Lucene query and creating a query string
with the terms. I am now facing a problem where the number of terms expand
beyond the limits of the query string.

I realized it's silly to ask Acrobat to highlight all the query terms when
in reality only a subset of them is present in the document. But how can I
compute that subset?

I'm thinking I might have to tokenize the document text (I have it), then
compute the intersection between the set of all terms and the set of terms
from the rewritten query. Blech. Sounds expensive. Any other ideas?

How does the contrib'ed highlighter work? I'm guessing it's doing something
similar. Any way I could not tokenize the document twice (they can be really
long)? 

--Renaud




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 19:02:36 2006
Return-Path: <java-user-return-24459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79172 invoked from network); 9 Nov 2006 19:02:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 19:02:35 -0000
Received: (qmail 93415 invoked by uid 500); 9 Nov 2006 19:02:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93391 invoked by uid 500); 9 Nov 2006 19:02:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93380 invoked by uid 99); 9 Nov 2006 19:02:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 11:02:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.44 as permitted sender)
Received: from [80.67.18.44] (HELO smtprelay06.ispgateway.de) (80.67.18.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 11:02:23 -0800
Received: (qmail 4379 invoked from network); 9 Nov 2006 19:01:58 -0000
Received: from unknown (HELO p5496e8c5.dip.t-dialin.net) ([pbs]695637@[84.150.232.197])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay06.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 9 Nov 2006 19:01:58 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: PDF Highlighting Again
Date: Thu, 9 Nov 2006 20:04:02 +0100
User-Agent: KMail/1.8.2
References: <001b01c70430$aa727e80$970fda80@libraria.ucsf.edu>
In-Reply-To: <001b01c70430$aa727e80$970fda80@libraria.ucsf.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611092004.02977@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 09 November 2006 19:55, Renaud Waldura wrote:

> I'm thinking I might have to tokenize the document text (I have it),
> then compute the intersection between the set of all terms and the set
> of terms from the rewritten query. Blech. Sounds expensive. Any other
> ideas?

No faster, but easier: index the Document in a RAMDirectory, open that with 
an IndexReader und use this reader to do the first (and only) rewrite. As 
this only happens when the user really clicks a match I see no problems 
with performance.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 19:18:17 2006
Return-Path: <java-user-return-24460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87179 invoked from network); 9 Nov 2006 19:18:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 19:18:13 -0000
Received: (qmail 38081 invoked by uid 500); 9 Nov 2006 19:18:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38028 invoked by uid 500); 9 Nov 2006 19:18:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37987 invoked by uid 99); 9 Nov 2006 19:18:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 11:18:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of sharrissf@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 11:17:59 -0800
Received: by wr-out-0506.google.com with SMTP id i7so66888wra
        for <java-user@lucene.apache.org>; Thu, 09 Nov 2006 11:17:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kqlLB9CIdXSZlFclcblIHTgl8V4FFyFyR/94yUr1qEpCse+ysrblylvSId7NCErtBjLidsC+9i7VGOe+dAaBoDEMfCtTzn1FxfoYtG08+wvx4XEshhrRZ28kYxD0GSW/boxc7gCZMPxOQGDSyaFY9IzRC5pk9yqRIebYLrTJMFU=
Received: by 10.78.68.18 with SMTP id q18mr1457500hua.1163099850198;
        Thu, 09 Nov 2006 11:17:30 -0800 (PST)
Received: by 10.78.143.4 with HTTP; Thu, 9 Nov 2006 11:17:29 -0800 (PST)
Message-ID: <8fcbd19a0611091117h7aa59bc6mb4fb089462292948@mail.gmail.com>
Date: Thu, 9 Nov 2006 11:17:30 -0800
From: "Steve Harris" <sharrissf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: TerraCotta cluster Lucene
In-Reply-To: <D3CF02A9-A8FE-46B7-9F29-D1D53A8ED3A7@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <D3CF02A9-A8FE-46B7-9F29-D1D53A8ED3A7@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Interesting that the article references a post I made here. In the end
I did not end up needing that lucene code change for two reasons.

1) I ended up just clustering the RAMDirectory itself so the subclass
of the collection ended up not being shared
2) In the coming release (early december) we'll be supporting
subclasses of collections.

Pretty neat stuff. Doing the exercise ended up leading to some
performance tuning that made it work pertty well. That is also coming
in the early december release.

Cheers,
Steve

On 11/9/06, karl wettin <karl.wettin@gmail.com> wrote:
> Some people might find this interesting. I have personally not looked
> at it in depth:
>
> Engineers at TerraCotta have detailed a new way to cluster lucene,
> the popular text search library from Apache. Their method involves
> implementing the lucene RAMDirectory interface and using TerraCotta
> DSO to share the RAMDirectory across JVMs.
>
> http://www.infoq.com/news/2006/11/clustering-lucene-terracotta
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 20:20:22 2006
Return-Path: <java-user-return-24461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9725 invoked from network); 9 Nov 2006 20:20:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 20:20:21 -0000
Received: (qmail 73876 invoked by uid 500); 9 Nov 2006 20:20:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73841 invoked by uid 500); 9 Nov 2006 20:20:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73824 invoked by uid 99); 9 Nov 2006 20:20:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 12:20:23 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.78.20.46] (HELO exsmtp012-2.exch012.intermedia.net) (64.78.20.46)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 09 Nov 2006 12:20:09 -0800
Received: from EXVBE012-3.exch012.intermedia.net ([64.78.20.18]) by exsmtp012-2.exch012.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 9 Nov 2006 12:19:49 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C7043C.67AB10DF"
Subject: Searching by bit masks 
Date: Thu, 9 Nov 2006 12:19:48 -0800
Message-ID: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching by bit masks 
Thread-Index: AccEPGdUWCmcimfrQh2MnYoJ9cGCeA==
From: "Larry Taylor" <ltaylor@employon.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 Nov 2006 20:19:49.0042 (UTC) FILETIME=[67DCC920:01C7043C]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C7043C.67AB10DF
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,=20

I am currently evaluating Lucene to see if it would be appropriate to
replace my company's current search software. So far everything has been
looking great, however there is one requirement that I am not too
certain about.=20

What we need to do is to be able to store a bit mask specifying various
filter flags for a document in the index and then search this field by
specifying another bit mask with desired filters, returning documents
that have any of the specified flags set. In other words, we are doing a
bitwise OR on the stored filter bit mask and the specified filter bit
mask and if it is non-zero, we want to return the document.=20

Before I started toying around with various options myself, I wanted to
see if any of you good folks in the Lucene community had some
suggestions for an efficient way to implement this.=20

We currently need to index ~8,000,000 documents. We have several filter
flag fields, the most important of which currently has 7 possible flags
with any combination of the flags being valid. The number of flags is
expected to increase rather rapidly in the near future.=20

My preemptive thanks for your suggestions,


Lawrence Taylor
Senior Software Engineer
Employon
Message was edited by: ltaylor.employon


------_=_NextPart_001_01C7043C.67AB10DF--

From java-user-return-24462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 09 20:50:00 2006
Return-Path: <java-user-return-24462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18793 invoked from network); 9 Nov 2006 20:50:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2006 20:50:00 -0000
Received: (qmail 34996 invoked by uid 500); 9 Nov 2006 20:50:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34975 invoked by uid 500); 9 Nov 2006 20:50:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34964 invoked by uid 99); 9 Nov 2006 20:50:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 12:50:03 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 09 Nov 2006 12:49:49 -0800
Received: by ug-out-1314.google.com with SMTP id k40so334365ugc
        for <java-user@lucene.apache.org>; Thu, 09 Nov 2006 12:49:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NsjyGmGGz59v0Qve6I8bwoE9CiTNBg8D0p/75PyKpqHXZFnyxfiu72+CtBcEw7fEaEujaEx1nXR8VK5yVFBpjd9H/IORpxqwNr747gI7kOpkZA8vd4ay8ZNSqnmTb1eMz3LIhOjpj/IS20XZytQhXXHrOlcXXOoXp9fCyxvbTsg=
Received: by 10.82.142.9 with SMTP id p9mr235278bud.1163105366307;
        Thu, 09 Nov 2006 12:49:26 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Thu, 9 Nov 2006 12:49:26 -0800 (PST)
Message-ID: <359a92830611091249o266b9a5aw300159ed344d9f3b@mail.gmail.com>
Date: Thu, 9 Nov 2006 15:49:26 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching by bit masks
In-Reply-To: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43401_21898371.1163105366264"
References: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43401_21898371.1163105366264
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Let me see if I have a clue what you're trying to do. Warning: I'm a bit
confused since "filter" has a very specific meaning in Lucene, so when you
talk about filters I'm assuming that you're NOT talking about Lucene
filters, but rather just a set of flags you're associating with each
document, and then a set of flags with the same semantics at search time.

If that's all true, here's the first approach I would take...

Don't store a bitmask in Lucene. Rather, index a field for each flag with
each document. NOTE: you do NOT have to have the same fields for all
documents....

Something like
Document doc = new Document();
doc.add("flag1", "Y");
doc.add("flag2", "Y");
IndexWriter.add(doc);

Document doc = new Document();
doc.add("flag1", "Y");   // NOTE: no "flag2" field. No problem.
IndexWriter.add(doc);

Now your searches are simple. Just search for the "or" of the fields with
the flags you're interested in. i.e. "flag1=Y" or "flag2="Y".....

If you want to get fancy, you can use TermDocs to enumerate the document IDs
with values for specified fields and perhaps even create a Lucene filter
based on that enumeration. This is much faster than you may think.

You probably want to index but not store such flags.

I suspect that this will be waaaaay faster than trying to inspect a binary
field in each document and then see if the bits were set, because that would
require you to read each document rather than just look at the terms in the
index.

I doubt that this will add much in the way of size to your index, and
anyway, disk space is cheap.

NOTE: the down side here is that you must delete and re-add a document to
modify it, which may be slow. But you'd have to do that when you updated
your bit mask anyway.....


Another approach: create a set of Lucene Filters (really, these are just
Java bitsets), one for each flag. All this is a bitset with one bit for each
document, or about 1M of memory per flag with 8M docs. So you'd populate
flag1Filter, flag2Filter... and have these ready whenever you needed them.

You should very rapidly be able to do any of the logical operations on these
bitsets (OR in your case) and use the resulting Lucene filter in your query.
It's up to you whether you create these filters as part of server warm-up or
just create them when needed, letting the first user who encounters them pay
the price for creating them. This is kind of the Solr warm-up idea. The
CachingWrapperFilter class should keep these around for you. Creating a
Lucene filter is much faster than I thought. See Lucene In Action for a
sample.

Of course, I may be entirely misunderstanding your problem, in which case
I'd ask you to explain a bit more <G>.

Best
Erick

On 11/9/06, Larry Taylor <ltaylor@employon.com> wrote:
>
> Hello,
>
> I am currently evaluating Lucene to see if it would be appropriate to
> replace my company's current search software. So far everything has been
> looking great, however there is one requirement that I am not too
> certain about.
>
> What we need to do is to be able to store a bit mask specifying various
> filter flags for a document in the index and then search this field by
> specifying another bit mask with desired filters, returning documents
> that have any of the specified flags set. In other words, we are doing a
> bitwise OR on the stored filter bit mask and the specified filter bit
> mask and if it is non-zero, we want to return the document.
>
> Before I started toying around with various options myself, I wanted to
> see if any of you good folks in the Lucene community had some
> suggestions for an efficient way to implement this.
>
> We currently need to index ~8,000,000 documents. We have several filter
> flag fields, the most important of which currently has 7 possible flags
> with any combination of the flags being valid. The number of flags is
> expected to increase rather rapidly in the near future.
>
> My preemptive thanks for your suggestions,
>
>
> Lawrence Taylor
> Senior Software Engineer
> Employon
> Message was edited by: ltaylor.employon
>
>
>

------=_Part_43401_21898371.1163105366264--

From java-user-return-24463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 09:48:19 2006
Return-Path: <java-user-return-24463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23049 invoked from network); 10 Nov 2006 09:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 09:48:17 -0000
Received: (qmail 81411 invoked by uid 500); 10 Nov 2006 09:48:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81305 invoked by uid 500); 10 Nov 2006 09:48:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81294 invoked by uid 99); 10 Nov 2006 09:48:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 01:48:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 01:48:07 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GiSzD-0002JB-Bj
	for java-user@lucene.apache.org; Fri, 10 Nov 2006 01:47:47 -0800
Message-ID: <7273997.post@talk.nabble.com>
Date: Fri, 10 Nov 2006 01:47:47 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <OFBAB9076A.1877B7BD-ON88257220.005A0C80-88257220.00669CE4@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7211921.post@talk.nabble.com> <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu> <7214786.post@talk.nabble.com> <Pine.LNX.4.58.0611071128450.29748@hal.rescomp.berkeley.edu> <7230940.post@talk.nabble.com> <OF04FF8261.1193B464-ON88257220.00267C16-88257220.0027F204@il.ibm.com> <7235584.post@talk.nabble.com> <OFBAB9076A.1877B7BD-ON88257220.005A0C80-88257220.00669CE4@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Doron,

   I m not sure I m implement your suggestion correctly.

   The way I did is I have 2 separate methods controlling by the check box.
I used basic search method for the first time and that will look up the
index from the directory. After I got the result, I will check the checkbox
and that will lead to 2nd method which the reader again from the index
directory and searcher search based on the reader. Next, I  m only implement
the codes that suggested by you. So, I m not sure I m doing the right thing
or not.

   I have attached the work that I done on below:

      public String search(String searchString) throws IOException,
Exception 
	{
		StringBuffer buff = new StringBuffer();
		String field = "";
		
		try
		{
			reader = IndexReader.open(DsConstant.indexDir);
			Searcher searcher = new IndexSearcher(reader);
			Analyzer analyzer = new StandardAnalyzer();
			QueryParser parser = new QueryParser(DsConstant.idxFileContent,
analyzer);
			//Query query = parser.parse(searchString);
			
			String[] metaFields = field.split(":");
			metaFields = new String[]{"contents", "companyId", "ownerId",
"createdBy", "docName",   "docDesc", "keywords", "docId", "docPropName"};
			
			for(int i = 0; i < metaFields.length; i++)
			{
				buff.append(metaFields[i] + ":" + searchString);
				if(i != (metaFields.length-1))
				{
					buff.append(" OR ");
				}
			}
			
			Query query = parser.parse(buff.toString());
			query = query.rewrite(reader);
			
			System.out.println("query ::: " + query);
			
		    searchHits = searcher.search(query);
		    
		    System.out.println("search hits is ::: " +searchHits.length());
			
			if(searchHits.length() > 0)
			{
				QueryScorer scorer = new QueryScorer(query);
				Highlighter highlighter = new Highlighter(new SimpleHTMLFormatter("<span
style='background-color:yellow;  font-weight:bold;'>",
								"</span>"), scorer);
				
				for(int i = 0; i < searchHits.length(); i++)
				{
					Document doc = searchHits.doc(i);
					String text = doc.get(DsConstant.idxFileContent);
					TokenStream tokenstream =
analyzer.tokenStream(DsConstant.idxFileContent, new StringReader(text));
					//buff.append("<p> '" + DsConstant.userDir
					buff.append("!");
					buff.append("<p  " + searchHits.doc(i).get(DsConstant.idxPath) + " "
							+ searchHits.doc(i).get("docName") + " <br>");
					buff.append("score: " + searchHits.score(i) + "<br>");
					buff.append(highlighter.getBestFragments(tokenstream, text, 3, "...")+
"</p>");
				}
				
				//System.out.println("Folder path is ::: " +DsConstant.folderPath);
				
				searcher.close();
			}
			
			System.out.println("Found "+searchHits.length()+" searchHits with query =
"+query);
		}
		catch(Exception e)
		{
			e.printStackTrace();
		}
		
		return buff.toString();
		//return resultList;
	}
	
	public String refindSearchResult(String searchString1, String
searchString2) throws IOException, Exception 
	{
		System.out.println("inside search util - refind search result");
		
		IndexReader reader = null;
		StringBuffer buff = new StringBuffer();
		
		try
		{
			reader = IndexReader.open(DsConstant.indexDir);
			Searcher searcher = new IndexSearcher(reader);
			Analyzer analyzer = new StandardAnalyzer();
			QueryParser parser = new QueryParser(DsConstant.idxFileContent,
analyzer);
			
			Query query1 = parser.parse(searchString1);
			filter = new QueryFilter(query1);
			Query query2 = parser.parse(searchString2);
			
		    searchHits = searcher.search(query2, filter);
			
			System.out.println("search hits is ::: " +searchHits.length());
			
			if(searchHits.length() > 0)
			{
				QueryScorer scorer = new QueryScorer(query2);
				Highlighter highlighter = new Highlighter(new SimpleHTMLFormatter("<span
style='background-color:yellow;  font-weight:bold;'>",
								"</span>"), scorer);
				
				for(int i = 0; i < searchHits.length(); i++)
				{
					Document doc = searchHits.doc(i);
					String text = doc.get(DsConstant.idxFileContent);
					TokenStream tokenstream =
analyzer.tokenStream(DsConstant.idxFileContent, new StringReader(text));
					//buff.append("<p> '" + DsConstant.userDir
					buff.append("<p  " + searchHits.doc(i).get(DsConstant.idxPath) + " "
							+ searchHits.doc(i).get("docName") + " <br>");
					buff.append("score: " + searchHits.score(i) + "<br>");
					buff.append(highlighter.getBestFragments(tokenstream, text, 3, "...")+
"</p>");
					buff.append("!").substring(i);
				}
				
				searcher.close();
			}
			
			System.out.println("Found "+searchHits.length()+" searchHits with query =
"+query2);
		}
		catch(Exception e)
		{
			e.printStackTrace();
		}
		
		return buff.toString();
	}

   Please point out where I m done wrong and hopefully the right solution
that I can use.

   Thank you.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Filter-query-method-tf2586547.html#a7273997
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 11:18:55 2006
Return-Path: <java-user-return-24464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58129 invoked from network); 10 Nov 2006 11:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 11:18:54 -0000
Received: (qmail 16043 invoked by uid 500); 10 Nov 2006 11:18:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15841 invoked by uid 500); 10 Nov 2006 11:18:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15830 invoked by uid 99); 10 Nov 2006 11:18:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 03:18:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 03:18:42 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GiUOq-0001zR-4u
	for java-user@lucene.apache.org; Fri, 10 Nov 2006 03:18:20 -0800
Message-ID: <7275098.post@talk.nabble.com>
Date: Fri, 10 Nov 2006 03:18:20 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing Performance issue
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I having this indexing the pdf file performance issue. It took me more
than 10 sec to index a pdf file about 200kb. Is it because I only have a
segment file? How can I make the indexing performance better?

   Thanks


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Indexing-Performance-issue-tf2607084.html#a7275098
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 11:49:28 2006
Return-Path: <java-user-return-24465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11654 invoked from network); 10 Nov 2006 11:49:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 11:49:28 -0000
Received: (qmail 61269 invoked by uid 500); 10 Nov 2006 11:49:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60960 invoked by uid 500); 10 Nov 2006 11:49:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60949 invoked by uid 99); 10 Nov 2006 11:49:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 03:49:31 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 03:49:17 -0800
Received: from dfki-2203.dfki.uni-kl.de (pc-210.dfki.uni-kl.de [131.246.241.70])
	by mailgw1.uni-kl.de (8.13.4/8.13.4/Debian-3sarge3) with ESMTP id kAABmsIH017578
	for <java-user@lucene.apache.org>; Fri, 10 Nov 2006 12:48:54 +0100
Received: from serv-3100.kl.dfki.de (serv-3100.kl.dfki.de [192.168.31.180])
	by dfki-2203.dfki.uni-kl.de (8.11.7p3+Sun/8.11.4) with ESMTP id kAABmsY21197;
	Fri, 10 Nov 2006 12:48:54 +0100 (MET)
Received: from [192.168.31.173] (pc-3153 [192.168.31.173])
	by serv-3100.kl.dfki.de (8.13.7+Sun/8.13.7) with ESMTP id kAABmqSd008477;
	Fri, 10 Nov 2006 12:48:52 +0100 (CET)
Message-ID: <45546725.5030904@web.de>
Date: Fri, 10 Nov 2006 12:48:53 +0100
From: duiduder@web.de
User-Agent: Thunderbird 1.5.0.7 (X11/20060909)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: result explanations / how to get the current document id inside a
 similarity subclass
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hello folks,

we want to work with explanations of document scores inside result lists.
In this context we are interested on the scores of the single terms from a
query, for each document inside the result list:

Query:
"termA termB"

Result:
doc1  => overall score 2.3
doc2  => overall score 1.6

We would love it to have explanations like this:
overall score doc1 (2.3) = score termA (1.2) + score termB (1.1)
overall score doc2 (1.6) = score termA (1.1) + score termB (0.5)

In the past we worked with the Searcher.explain(..) method which is appropriate
in order to explain the results for small numbers of documents, but since this
method takes as much time as a whole search (as written inside the ApiDoc), this
of course is not feasible for whole result lists.

Nevertheless, all values should be available during the calculation of the overall
score, which is done inside the Similarity class. Thus, collecting of these should
result into nearly no runtime overhead, its mainly a question about memory.

We have looked inside Similarity, and all is available except the current document
id - so we have term score values but we don't know the documents they are related
to. And this is our question:
Does anybody know how to get this current document number/id inside a subclass
implementation of Similarity?


Thanks in advance!

Chris




- --
______________________________________________________________________

Christian Reuschling, Dipl.-Ing.(BA)
Software Engineer

Knowledge Management Department
German Research Center for Artificial Intelligence DFKI GmbH
Erwin-Schrödinger-Straße 57, D-67663 Kaiserslautern, Germany

Phone: +49.631.205-3441
mailto:reuschling@dfki.de  http://www.dfki.uni-kl.de/~reuschling/
______________________________________________________________________
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)

iD8DBQFFVGclQoTr50f1tpcRArjFAJ44DUfNDCdjhj3H/nsh7lWQD4nb7QCgmnXM
SHA8byhpGUZJyA/mwQ7IIws=
=Uka/
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 12:02:58 2006
Return-Path: <java-user-return-24466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26439 invoked from network); 10 Nov 2006 12:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 12:02:57 -0000
Received: (qmail 76209 invoked by uid 500); 10 Nov 2006 12:03:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76171 invoked by uid 500); 10 Nov 2006 12:03:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76160 invoked by uid 99); 10 Nov 2006 12:03:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 04:03:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 04:02:48 -0800
Received: from snorlax.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id kAAC2NcC028422
	for <java-user@lucene.apache.org>; Fri, 10 Nov 2006 12:02:24 GMT
Received: from [10.11.108.231] (snorlax.uk.scalix.com [10.11.108.216])
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.344-beta)
    via ESMTP; Fri, 10 Nov 2006 12:02:19 +0000 (GMT)
Date: Fri, 10 Nov 2006 12:02:18 +0000
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <45546A4A.6070308@scalix.com>
In-Reply-To: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>
References: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>
Subject: Re: Searching by bit masks
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.8 (X11/20061107)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on 
	snorlax.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.7

Larry Taylor wrote:
> What we need to do is to be able to store a bit mask specifying various
> filter flags for a document in the index and then search this field by
> specifying another bit mask with desired filters, returning documents
> that have any of the specified flags set. In other words, we are doing a
> bitwise OR on the stored filter bit mask and the specified filter bit
> mask and if it is non-zero, we want to return the document. 
>   
We did this by naming the flags and storing them in a single field.  So 
if we have three flags called, oh, alice, bob and clive and we wanted to 
indicate alice and clive were set and bob clear then we store "alice", 
"unbob" and "clive" in the "flags" field.

That seems to be quite efficient -- I can now search for any combination 
of flags (or bits) set or unset and I can add new flags at will.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 12:14:56 2006
Return-Path: <java-user-return-24467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32043 invoked from network); 10 Nov 2006 12:14:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 12:14:56 -0000
Received: (qmail 89139 invoked by uid 500); 10 Nov 2006 12:14:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89114 invoked by uid 500); 10 Nov 2006 12:14:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89103 invoked by uid 99); 10 Nov 2006 12:14:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 04:14:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 04:14:44 -0800
Received: (qmail 25078 invoked from network); 10 Nov 2006 12:14:20 -0000
Received: from unknown (HELO p5496d319.dip.t-dialin.net) ([pbs]695637@[84.150.211.25])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 10 Nov 2006 12:14:20 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Indexing Performance issue
Date: Fri, 10 Nov 2006 13:16:28 +0100
User-Agent: KMail/1.8.2
References: <7275098.post@talk.nabble.com>
In-Reply-To: <7275098.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200611101316.28591@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 10 November 2006 12:18, spinergywmy wrote:

> =C2=A0I having this indexing the pdf file performance issue. It took me m=
ore
> than 10 sec to index a pdf file about 200kb. Is it because I only have a
> segment file? How can I make the indexing performance better?

PDFBox (which I assume you are using) can be quite slow converting large=20
PDF files to text. This has nothing to do with Lucene.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 12:48:57 2006
Return-Path: <java-user-return-24468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45739 invoked from network); 10 Nov 2006 12:48:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 12:48:56 -0000
Received: (qmail 57056 invoked by uid 500); 10 Nov 2006 12:48:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57009 invoked by uid 500); 10 Nov 2006 12:48:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56941 invoked by uid 99); 10 Nov 2006 12:48:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 04:48:50 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 04:48:36 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1860523nfc
        for <java-user@lucene.apache.org>; Fri, 10 Nov 2006 04:48:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EpIQ4lW0aNcrrcmA7phYgryeHEJmekSJ8mGID9BFrD9mt/kq6KVUqZZDFFVLRk+uMfe9vcSN4VdVjnRQpEnrUrGXMA+Nrj5+phTqZ8SDRdLo6zYF6T33kdzyI+gnV3Mh/JElUJu/9en/0B0irFSrwafvRdWSSxa2pOrx0QO4bK8=
Received: by 10.82.135.13 with SMTP id i13mr328484bud.1163162894380;
        Fri, 10 Nov 2006 04:48:14 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Fri, 10 Nov 2006 04:48:14 -0800 (PST)
Message-ID: <359a92830611100448v5532b495lc8744ca5fb600c2a@mail.gmail.com>
Date: Fri, 10 Nov 2006 07:48:14 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Performance issue
In-Reply-To: <200611101316.28591@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52034_14279446.1163162894346"
References: <7275098.post@talk.nabble.com> <200611101316.28591@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_52034_14279446.1163162894346
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you measured to see how much of your time is spent indexing and how
much is just parsing the file? You need to do this before having a clue what
you need to make faster....

Erick

On 11/10/06, Daniel Naber <lucenelist2005@danielnaber.de> wrote:
>
> On Friday 10 November 2006 12:18, spinergywmy wrote:
>
> > I having this indexing the pdf file performance issue. It took me more
> > than 10 sec to index a pdf file about 200kb. Is it because I only have a
> > segment file? How can I make the indexing performance better?
>
> PDFBox (which I assume you are using) can be quite slow converting large
> PDF files to text. This has nothing to do with Lucene.
>
> Regards
> Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_52034_14279446.1163162894346--

From java-user-return-24469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 14:17:01 2006
Return-Path: <java-user-return-24469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73436 invoked from network); 10 Nov 2006 14:17:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 14:17:00 -0000
Received: (qmail 33423 invoked by uid 500); 10 Nov 2006 14:17:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33387 invoked by uid 500); 10 Nov 2006 14:17:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33376 invoked by uid 99); 10 Nov 2006 14:17:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:17:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of icocan@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:16:49 -0800
Received: by ug-out-1314.google.com with SMTP id k40so525602ugc
        for <java-user@lucene.apache.org>; Fri, 10 Nov 2006 06:16:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=CanXf70FybJb7Gmy/+m0aeOmuaodu5mGvnclpJoKjpsSkTv3awbM/RUhfbt9841On7zX/XYmSRjrgWFY8iSOiAnT29xyTKCCvCDhhvxRT9eGP/OhrG6alzPKknlgIc17RD0oQFex5LwV0vCGRxccyjN5Kl80w96NGzSt06WQTng=
Received: by 10.66.216.20 with SMTP id o20mr3407675ugg.1163168187992;
        Fri, 10 Nov 2006 06:16:27 -0800 (PST)
Received: from ?10.1.10.99? ( [86.35.27.2])
        by mx.google.com with ESMTP id b35sm2455940ugd.2006.11.10.06.16.27;
        Fri, 10 Nov 2006 06:16:27 -0800 (PST)
Message-ID: <455489B2.4030205@gmail.com>
Date: Fri, 10 Nov 2006 16:16:18 +0200
From: Ioan Cocan <icocan@gmail.com>
Reply-To:  icocan@gmail.com
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing Performance issue
References: <7275098.post@talk.nabble.com>
In-Reply-To: <7275098.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You may want to use something like pdftotext part of XPDF 
(http://www.foolabs.com/xpdf/download.html). It will produce a text 
extract for a PDF. Indexing will work like a breeze, without memory 
consumption of PDFBox.
Regards,
Ioan

spinergywmy wrote:
> Hi,
>
>    I having this indexing the pdf file performance issue. It took me more
> than 10 sec to index a pdf file about 200kb. Is it because I only have a
> segment file? How can I make the indexing performance better?
>
>    Thanks
>
>
> regards,
> Wooi Meng
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 14:46:15 2006
Return-Path: <java-user-return-24470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94917 invoked from network); 10 Nov 2006 14:46:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 14:46:15 -0000
Received: (qmail 1938 invoked by uid 500); 10 Nov 2006 14:46:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1785 invoked by uid 500); 10 Nov 2006 14:46:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1774 invoked by uid 99); 10 Nov 2006 14:46:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 06:46:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [195.245.230.131] (HELO mail78.messagelabs.com) (195.245.230.131)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Nov 2006 06:46:03 -0800
X-VirusChecked: Checked
X-Env-Sender: hdoeleman@amadeus.com
X-Msg-Ref: server-15.tower-78.messagelabs.com!1163169940!45220518!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [193.23.186.180]
Received: (qmail 4912 invoked from network); 10 Nov 2006 14:45:40 -0000
Received: from mucsmtp2.amadeus.net (HELO mucsmtp2.amadeus.net) (193.23.186.180)
  by server-15.tower-78.messagelabs.com with RC4-SHA encrypted SMTP; 10 Nov 2006 14:45:40 -0000
In-Reply-To: <7275098.post@talk.nabble.com>
MIME-Version: 1.0
X-MIMETrack: S/MIME Sign by Notes Client on Heikki Doeleman/NCE/AMADEUS(Release 6.5.5
  CCH1|March 07, 2006) at 10/11/2006 15:44:31,
	Serialize by Notes Client on Heikki Doeleman/NCE/AMADEUS(Release 6.5.5
  CCH1|March 07, 2006) at 10/11/2006 15:44:31,
	Serialize complete at 10/11/2006 15:44:31,
	S/MIME Sign failed at 10/11/2006 15:44:31: The cryptographic key was not
 found,
	S/MIME Sign by Notes Client on Heikki Doeleman/NCE/AMADEUS(Release 6.5.5
  CCH1|March 07, 2006) at 10/11/2006 15:45:22,
	Serialize by Notes Client on Heikki Doeleman/NCE/AMADEUS(Release 6.5.5
  CCH1|March 07, 2006) at 10/11/2006 15:45:22,
	Serialize complete at 10/11/2006 15:45:22,
	S/MIME Sign failed at 10/11/2006 15:45:22: The cryptographic key was not
 found,
	Serialize by Router on MUCSMTP2/MUC/AMAEXTMAIL(Release 6.5.5|November 30, 2005) at
 10/11/2006 15:45:40,
	Serialize complete at 10/11/2006 15:45:40
To: java-user@lucene.apache.org
Subject: Highlighting span for Phrase Queries
X-Mailer: Lotus Notes Release 6.5.5  CCH1 March 07, 2006
Message-ID: <OF2CF3D17D.A7285305-ONC1257222.00408A86-C1257222.00510F12@amadeus.com>
From: Heikki Doeleman <hdoeleman@amadeus.com>
Date: Fri, 10 Nov 2006 15:45:23 +0100
Content-Type: multipart/alternative; boundary="=_alternative 00510F10C1257222_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00510F10C1257222_=
Content-Type: text/plain; charset="US-ASCII"

Hi there,

I have a question on using the Highlighter.

I'm using Lucene in a web application that allows you to search the 
catalogue of a library. The idea is to highlight, in the results, the 
terms entered by the user. I'm using a Highlighter with a NullFragmenter 
because I want the whole field highlighted (for each field the user 
searched in).

The catalogue is indexed with a StandardAnalyzer on each field. 
Highlighting a field from a result I do like this  :

            QueryScorer scorer = new QueryScorer ( theQuery, 
searcher.getIndexReader ( ) , fieldName ) ;
            Highlighter highlighter = new Highlighter ( new 
SimpleHTMLFormatter ( "<span style=\"border-style:solid;\">" , "</span>" ) 
, scorer ) ;
            highlighter. setTextFragmenter ( new NullFragmenter ( ) ) ;

        highlightedFieldContent = highlighter. getBestFragment ( analyzer 
, fieldName , originalFieldContent ) ; 

This works all very well, except for phrase queries. The spans of the 
phrase queries as such are not highlighted and instead, each of the terms 
that is in the phrase query, gets highlighted. I guess this is because the 
indexed fields have been tokenized, and what-not, by the StandardAnalyzer.

Does anyone have a good example about how to implement a highlighting 
function that works well with phrase queries, too ?

thank you very much.

Heikki DOELEMAN
--=_alternative 00510F10C1257222_=--

From java-user-return-24471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 16:46:40 2006
Return-Path: <java-user-return-24471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42023 invoked from network); 10 Nov 2006 16:46:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 16:46:38 -0000
Received: (qmail 30025 invoked by uid 500); 10 Nov 2006 16:46:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29944 invoked by uid 500); 10 Nov 2006 16:46:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29919 invoked by uid 99); 10 Nov 2006 16:46:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 08:46:38 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.219] (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Nov 2006 08:46:23 -0800
Received: (qmail 78008 invoked by uid 60001); 10 Nov 2006 16:46:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=rUd7LRS563WJH7V5F9VC2uHGKfNroK6kPFWxzFQTZs9aFHKqwujRl8S2xDZYzOfJ8S8Sl8FuZT+0GsCiezAypOlkV1epPO31LlYR7c2m1Syk3kYQ1cy0jGrsqWIsVKRlIvQv5BmQ2kb4OqI4Zyv9SpRzufHi9C5zQ74HpHSSseg=  ;
Message-ID: <20061110164601.78005.qmail@web26008.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26008.mail.ukl.yahoo.com via HTTP; Fri, 10 Nov 2006 16:46:01 GMT
Date: Fri, 10 Nov 2006 16:46:00 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Highlighting span for Phrase Queries
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

There have been a couple of alternative Highlighter contributions recently,=
 I can't recall which claim to support "proper" highlighting of phrases but=
 you might want to give them a try.=0A=0A=0Ahttp://issues.apache.org/jira/b=
rowse/LUCENE-644=0A=0Ahttp://issues.apache.org/jira/browse/LUCENE-663=0A=0A=
=0AUltimately "proper" highlighting is very hard to achieve if you both wan=
t to select a summary of the doc's "best bits" and also support queries whi=
ch can be arbitrarily complex nestings of boolean queries which can also co=
ntain Spans/phrases covering large sections of the document. Some compromis=
es are inevitable under these extreme circumstances and I don't think there=
 is one implementation that is capable of catering for this.=0A=0ALet us kn=
ow how you get on.=0A=0ACheers=0AMark=0A=0A=0A----- Original Message ----=
=0AFrom: Heikki Doeleman <hdoeleman@amadeus.com>=0ATo: java-user@lucene.apa=
che.org=0ASent: Friday, 10 November, 2006 2:45:23 PM=0ASubject: Highlightin=
g span for Phrase Queries=0A=0AHi there,=0A=0AI have a question on using th=
e Highlighter.=0A=0AI'm using Lucene in a web application that allows you t=
o search the =0Acatalogue of a library. The idea is to highlight, in the re=
sults, the =0Aterms entered by the user. I'm using a Highlighter with a Nul=
lFragmenter =0Abecause I want the whole field highlighted (for each field t=
he user =0Asearched in).=0A=0AThe catalogue is indexed with a StandardAnaly=
zer on each field. =0AHighlighting a field from a result I do like this  :=
=0A=0A            QueryScorer scorer =3D new QueryScorer ( theQuery, =0Asea=
rcher.getIndexReader ( ) , fieldName ) ;=0A            Highlighter highligh=
ter =3D new Highlighter ( new =0ASimpleHTMLFormatter ( "<span style=3D\"bor=
der-style:solid;\">" , "</span>" ) =0A, scorer ) ;=0A            highlighte=
r. setTextFragmenter ( new NullFragmenter ( ) ) ;=0A=0A        highlightedF=
ieldContent =3D highlighter. getBestFragment ( analyzer =0A, fieldName , or=
iginalFieldContent ) ; =0A=0AThis works all very well, except for phrase qu=
eries. The spans of the =0Aphrase queries as such are not highlighted and i=
nstead, each of the terms =0Athat is in the phrase query, gets highlighted.=
 I guess this is because the =0Aindexed fields have been tokenized, and wha=
t-not, by the StandardAnalyzer.=0A=0ADoes anyone have a good example about =
how to implement a highlighting =0Afunction that works well with phrase que=
ries, too ?=0A=0Athank you very much.=0A=0AHeikki DOELEMAN=0A=0A=0A=0A=0A=
=09=09=0A___________________________________________________________ =0ANow=
 you can scan emails quickly with a reading pane. Get the new Yahoo! Mail. =
http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 17:27:29 2006
Return-Path: <java-user-return-24472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58782 invoked from network); 10 Nov 2006 17:27:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 17:27:26 -0000
Received: (qmail 8863 invoked by uid 500); 10 Nov 2006 17:27:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8832 invoked by uid 500); 10 Nov 2006 17:27:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8820 invoked by uid 99); 10 Nov 2006 17:27:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 09:27:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [204.127.192.84] (HELO rwcrmhc14.comcast.net) (204.127.192.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 09:27:15 -0800
Received: from [192.168.168.15] (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20061110172652m1400kpe7ie>; Fri, 10 Nov 2006 17:26:52 +0000
Message-ID: <4554B65C.1040802@apache.org>
Date: Fri, 10 Nov 2006 09:26:52 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching by bit masks
References: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net> <359a92830611091249o266b9a5aw300159ed344d9f3b@mail.gmail.com>
In-Reply-To: <359a92830611091249o266b9a5aw300159ed344d9f3b@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> Something like
> Document doc = new Document();
> doc.add("flag1", "Y");
> doc.add("flag2", "Y");
> IndexWriter.add(doc);

Fields have overheads.  It would be more efficient to implement this as 
a single field with a different value for each boolean flag (as others 
have suggested).

> Another approach: create a set of Lucene Filters (really, these are just
> Java bitsets), one for each flag. All this is a bitset with one bit for 
> each
> document, or about 1M of memory per flag with 8M docs. So you'd populate
> flag1Filter, flag2Filter... and have these ready whenever you needed them.

Cached filters will be faster especially when a large portion of the 
documents have the flag set.  If, for example, you have a flag that is 
set in half the documents that is specified in half the queries, then a 
cached filter will have a large impact on not only the performance of 
those queries but on the performance of your service as a whole.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 18:54:45 2006
Return-Path: <java-user-return-24473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99451 invoked from network); 10 Nov 2006 18:54:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 18:54:44 -0000
Received: (qmail 88228 invoked by uid 500); 10 Nov 2006 18:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88062 invoked by uid 500); 10 Nov 2006 18:54:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88042 invoked by uid 99); 10 Nov 2006 18:54:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 10:54:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 10:54:33 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0F3735B77B; Fri, 10 Nov 2006 10:54:13 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 072EE7F403
	for <java-user@lucene.apache.org>; Fri, 10 Nov 2006 10:54:13 -0800 (PST)
Date: Fri, 10 Nov 2006 10:54:13 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: result explanations / how to get the current document id inside
 a similarity subclass
In-Reply-To: <45546725.5030904@web.de>
Message-ID: <Pine.LNX.4.58.0611101049340.18810@hal.rescomp.berkeley.edu>
References: <45546725.5030904@web.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Nevertheless, all values should be available during the calculation of the overall
: score, which is done inside the Similarity class. Thus, collecting of these should
: result into nearly no runtime overhead, its mainly a question about memory.

Similarity instances don't calculate any scores -- Similarity provides the
utilities neccessary for hte various Scorer classes to compute their
scores using common functions.  the "overall score" of a query depends
on the query type ... in your examples it seems that you are dealing with
BooleanQueries contaiing TermQueries, but I could write a new Query class
that never even used the Similarity class if i wanted to.

your best bet for getting out the information that you would be to
subclass BooleanQuery/BooleanScorer2 and add your logic there.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 21:03:53 2006
Return-Path: <java-user-return-24474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49893 invoked from network); 10 Nov 2006 21:03:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 21:03:52 -0000
Received: (qmail 27819 invoked by uid 500); 10 Nov 2006 21:03:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26922 invoked by uid 500); 10 Nov 2006 21:03:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26909 invoked by uid 99); 10 Nov 2006 21:03:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:03:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:03:39 -0800
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id kAAL3HUh259354
	for <java-user@lucene.apache.org>; Fri, 10 Nov 2006 21:03:17 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/8.13.6/NCO v8.1.1) with ESMTP id kAAL6QaF3284992
	for <java-user@lucene.apache.org>; Fri, 10 Nov 2006 22:06:26 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id kAAL3Hxa020259
	for <java-user@lucene.apache.org>; Fri, 10 Nov 2006 22:03:17 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id kAAL3HeO020254
	for <java-user@lucene.apache.org>; Fri, 10 Nov 2006 22:03:17 +0100
In-Reply-To: <7273997.post@talk.nabble.com>
Subject: Re: Filter query method
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF29182AF9.FEFAAAF0-ON88257222.0070DC18-88257222.00723694@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 10 Nov 2006 12:47:30 -0800
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 10/11/2006 23:06:26
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

You did not specify what's wrong - in what way is the code below not
working as you expect?

Two things to check:

(1) search() and refindSearchResult() process the text of the first query
differently. In search() the text is added to multiple fields
("metaField"). The way it is done btw would not work well if searchString
is multi-word. You should take a look at the printout for the result query
to see if this is what you expect. In refindSearchResult() the metaFields
logic is not done for q1. You should print q1 and print the filter to see
they match what you expect, and also compare to the query as printed in
search().

(2) reuse searcher for better performance - currently in every call to
search() and to refindSearchResult() a new searcher is opened. This would
hurt performance. Better to reuse a searchers between queries, and, from
time to time, reopen it to refresh with recent index changes. Many
discussions on this in the mailing list.

Hope this helps,
Doron

spinergywmy wrote:

>
> Hi Doron,
>
>    I m not sure I m implement your suggestion correctly.
>
>    The way I did is I have 2 separate methods controlling by the check
box.
> I used basic search method for the first time and that will look up the
> index from the directory. After I got the result, I will check the
checkbox
> and that will lead to 2nd method which the reader again from the index
> directory and searcher search based on the reader. Next, I  m only
implement
> the codes that suggested by you. So, I m not sure I m doing the right
thing
> or not.
>
>    I have attached the work that I done on below:
>
>       public String search(String searchString) throws IOException,
> Exception
>    {
>       StringBuffer buff = new StringBuffer();
>       String field = "";
>
>       try
>       {
>          reader = IndexReader.open(DsConstant.indexDir);
>          Searcher searcher = new IndexSearcher(reader);
>          Analyzer analyzer = new StandardAnalyzer();
>          QueryParser parser = new QueryParser(DsConstant.idxFileContent,
> analyzer);
>          //Query query = parser.parse(searchString);
>
>          String[] metaFields = field.split(":");
>          metaFields = new String[]{"contents", "companyId", "ownerId",
> "createdBy", "docName",   "docDesc", "keywords", "docId", "docPropName"};
>
>          for(int i = 0; i < metaFields.length; i++)
>          {
>             buff.append(metaFields[i] + ":" + searchString);
>             if(i != (metaFields.length-1))
>             {
>                buff.append(" OR ");
>             }
>          }
>
>          Query query = parser.parse(buff.toString());
>          query = query.rewrite(reader);
>
>          System.out.println("query ::: " + query);
>
>           searchHits = searcher.search(query);
>
>           System.out.println("search hits is ::: " +searchHits.length());
>
>          if(searchHits.length() > 0)
>          {
>             QueryScorer scorer = new QueryScorer(query);
>             Highlighter highlighter = new Highlighter(new
> SimpleHTMLFormatter("<span
> style='background-color:yellow;  font-weight:bold;'>",
>                         "</span>"), scorer);
>
>             for(int i = 0; i < searchHits.length(); i++)
>             {
>                Document doc = searchHits.doc(i);
>                String text = doc.get(DsConstant.idxFileContent);
>                TokenStream tokenstream =
> analyzer.tokenStream(DsConstant.idxFileContent, new StringReader(text));
>                //buff.append("<p> '" + DsConstant.userDir
>                buff.append("!");
>                buff.append("<p  " + searchHits.doc(i).
> get(DsConstant.idxPath) + " "
>                      + searchHits.doc(i).get("docName") + " <br>");
>                buff.append("score: " + searchHits.score(i) + "<br>");
>                buff.append(highlighter.getBestFragments(tokenstream,
> text, 3, "...")+
> "</p>");
>             }
>
>             //System.out.println("Folder path is ::: " +DsConstant.
> folderPath);
>
>             searcher.close();
>          }
>
>          System.out.println("Found "+searchHits.length()+"
> searchHits with query =
> "+query);
>       }
>       catch(Exception e)
>       {
>          e.printStackTrace();
>       }
>
>       return buff.toString();
>       //return resultList;
>    }
>
>    public String refindSearchResult(String searchString1, String
> searchString2) throws IOException, Exception
>    {
>       System.out.println("inside search util - refind search result");
>
>       IndexReader reader = null;
>       StringBuffer buff = new StringBuffer();
>
>       try
>       {
>          reader = IndexReader.open(DsConstant.indexDir);
>          Searcher searcher = new IndexSearcher(reader);
>          Analyzer analyzer = new StandardAnalyzer();
>          QueryParser parser = new QueryParser(DsConstant.idxFileContent,
> analyzer);
>
>          Query query1 = parser.parse(searchString1);
>          filter = new QueryFilter(query1);
>          Query query2 = parser.parse(searchString2);
>
>           searchHits = searcher.search(query2, filter);
>
>          System.out.println("search hits is ::: " +searchHits.length());
>
>          if(searchHits.length() > 0)
>          {
>             QueryScorer scorer = new QueryScorer(query2);
>             Highlighter highlighter = new Highlighter(new
> SimpleHTMLFormatter("<span
> style='background-color:yellow;  font-weight:bold;'>",
>                         "</span>"), scorer);
>
>             for(int i = 0; i < searchHits.length(); i++)
>             {
>                Document doc = searchHits.doc(i);
>                String text = doc.get(DsConstant.idxFileContent);
>                TokenStream tokenstream =
> analyzer.tokenStream(DsConstant.idxFileContent, new StringReader(text));
>                //buff.append("<p> '" + DsConstant.userDir
>                buff.append("<p  " + searchHits.doc(i).
> get(DsConstant.idxPath) + " "
>                      + searchHits.doc(i).get("docName") + " <br>");
>                buff.append("score: " + searchHits.score(i) + "<br>");
>                buff.append(highlighter.getBestFragments(tokenstream,
> text, 3, "...")+
> "</p>");
>                buff.append("!").substring(i);
>             }
>
>             searcher.close();
>          }
>
>          System.out.println("Found "+searchHits.length()+"
> searchHits with query =
> "+query2);
>       }
>       catch(Exception e)
>       {
>          e.printStackTrace();
>       }
>
>       return buff.toString();
>    }
>
>    Please point out where I m done wrong and hopefully the right solution
> that I can use.
>
>    Thank you.
>
> regards,
> Wooi Meng
> --
> View this message in context: http://www.nabble.com/Filter-query-
> method-tf2586547.html#a7273997
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 10 21:08:35 2006
Return-Path: <java-user-return-24475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50919 invoked from network); 10 Nov 2006 21:08:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2006 21:08:35 -0000
Received: (qmail 34545 invoked by uid 500); 10 Nov 2006 21:08:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34512 invoked by uid 500); 10 Nov 2006 21:08:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34501 invoked by uid 99); 10 Nov 2006 21:08:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 10 Nov 2006 13:08:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.78.20.47] (HELO exsmtp012-1.exch012.intermedia.net) (64.78.20.47)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 10 Nov 2006 13:08:24 -0800
Received: from EXVBE012-3.exch012.intermedia.net ([64.78.20.18]) by exsmtp012-1.exch012.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 10 Nov 2006 13:08:04 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Searching by bit masks
Date: Fri, 10 Nov 2006 13:08:02 -0800
Message-ID: <5780D033175834459D174EF240286AF601C85528@EXVBE012-3.exch012.intermedia.net>
In-Reply-To: <4554B65C.1040802@apache.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching by bit masks
Thread-Index: AccE7XqhQ/KE7xLPTSaHJNLmsyvCPwAHq25g
From: "Larry Taylor" <ltaylor@employon.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Nov 2006 21:08:04.0056 (UTC) FILETIME=[4FD69D80:01C7050C]
X-Virus-Checked: Checked by ClamAV on apache.org

Excellent, caching filters seem to fit the bill best so will use those
with the flags stored in the underlying index in the format you
suggested.  Thank you for the assistance.

Larry

-----Original Message-----
From: Doug Cutting [mailto:cutting@apache.org]=20
Sent: Friday, November 10, 2006 12:27 PM
To: java-user@lucene.apache.org
Subject: Re: Searching by bit masks

Erick Erickson wrote:
> Something like
> Document doc =3D new Document();
> doc.add("flag1", "Y");
> doc.add("flag2", "Y");
> IndexWriter.add(doc);

Fields have overheads.  It would be more efficient to implement this as=20
a single field with a different value for each boolean flag (as others=20
have suggested).

> Another approach: create a set of Lucene Filters (really, these are
just
> Java bitsets), one for each flag. All this is a bitset with one bit
for=20
> each
> document, or about 1M of memory per flag with 8M docs. So you'd
populate
> flag1Filter, flag2Filter... and have these ready whenever you needed
them.

Cached filters will be faster especially when a large portion of the=20
documents have the flag set.  If, for example, you have a flag that is=20
set in half the documents that is specified in half the queries, then a=20
cached filter will have a large impact on not only the performance of=20
those queries but on the performance of your service as a whole.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 11 18:06:44 2006
Return-Path: <java-user-return-24476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26420 invoked from network); 11 Nov 2006 18:06:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 18:06:43 -0000
Received: (qmail 95630 invoked by uid 500); 11 Nov 2006 18:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95585 invoked by uid 500); 11 Nov 2006 18:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95574 invoked by uid 99); 11 Nov 2006 18:06:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 10:06:45 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeff.storey@dac.us designates 216.85.37.218 as permitted sender)
Received: from [216.85.37.218] (HELO arlington1mail.dac.us) (216.85.37.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 10:06:32 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C705BC.1206B2FD"
Subject: Partial Word Matches
Date: Sat, 11 Nov 2006 13:06:10 -0500
Message-ID: <572725A4D5BFDE41922873B5199337D4010D7830@arlington1mail.dac.us>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Partial Word Matches
Thread-Index: AccFvBGDnoi3Ey1tRiutX/aknp1Y0g==
From: "Storey, Jeff" <jeff.storey@dac.us>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C705BC.1206B2FD
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi. I'm using Lucene to do some searching (using the Searcher object and
passing it a ParsedQuery). I search for a word such as "long" and it is
returning partial matches, such as "belong" and "along." Is there a way
to turn off this behavior and only match whole words?

=20

Thank you,

Jeff

=20


------_=_NextPart_001_01C705BC.1206B2FD--

From java-user-return-24477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 11 19:33:42 2006
Return-Path: <java-user-return-24477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40733 invoked from network); 11 Nov 2006 19:33:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 19:33:42 -0000
Received: (qmail 57029 invoked by uid 500); 11 Nov 2006 19:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56995 invoked by uid 500); 11 Nov 2006 19:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56984 invoked by uid 99); 11 Nov 2006 19:33:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 11:33:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 11:33:33 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2194284nfc
        for <java-user@lucene.apache.org>; Sat, 11 Nov 2006 11:33:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=p+C0EYkYG/ibDo5M1ZK6K0P5nEiFHHnReJtActCjwq38ttYMJw5Fzpgqib65VcBA4MAJ//sW3zTBZzWX3WzcslZD11SBC0eepbBCM5USA4wVQH/QYX9yZYYlJNxTT0mR+TWZvNmGVzXB/DDjxOduMoj8Z8LJvF9Rql254qJg+BQ=
Received: by 10.82.147.6 with SMTP id u6mr457064bud.1163273591525;
        Sat, 11 Nov 2006 11:33:11 -0800 (PST)
Received: by 10.82.182.20 with HTTP; Sat, 11 Nov 2006 11:33:11 -0800 (PST)
Message-ID: <359a92830611111133p529ffc8fs35efec87c6cc11cc@mail.gmail.com>
Date: Sat, 11 Nov 2006 14:33:11 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Partial Word Matches
In-Reply-To: <572725A4D5BFDE41922873B5199337D4010D7830@arlington1mail.dac.us>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67349_23683446.1163273591405"
References: <572725A4D5BFDE41922873B5199337D4010D7830@arlington1mail.dac.us>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67349_23683446.1163273591405
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That's not the default behavior, so I'm perplexed. Normally, you have to go
to considerable effort to get partial matches....

What analyzers are you using at both index and query time? Perhaps as short
a code snippet as you could make showing this behavior would be a good thing
to post. I flat guarantee folks will look at it. But please make it short
<G>.

Best
ERick

On 11/11/06, Storey, Jeff <jeff.storey@dac.us> wrote:
>
> Hi. I'm using Lucene to do some searching (using the Searcher object and
> passing it a ParsedQuery). I search for a word such as "long" and it is
> returning partial matches, such as "belong" and "along." Is there a way
> to turn off this behavior and only match whole words?
>
>
>
> Thank you,
>
> Jeff
>
>
>
>
>

------=_Part_67349_23683446.1163273591405--

From java-user-return-24478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 11 20:06:20 2006
Return-Path: <java-user-return-24478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51305 invoked from network); 11 Nov 2006 20:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 20:06:19 -0000
Received: (qmail 79712 invoked by uid 500); 11 Nov 2006 20:06:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79667 invoked by uid 500); 11 Nov 2006 20:06:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79656 invoked by uid 99); 11 Nov 2006 20:06:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 12:06:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of paul.borgermans@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 12:06:11 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2200260nfc
        for <java-user@lucene.apache.org>; Sat, 11 Nov 2006 12:05:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qLgI9wxi389yCozdKAy41zaqSveTJ0+orH3GudI+1gWYn3BMbQwW8EAxd9xkEmorQGfidGoQpiKa/OqrJa9ZNXUfm8l6Llm1gjtx+YAwiZ8mS/QeDkwMw5YoJ2v3CwTyJFV6xBkP9tRKAimaAmDWwyeOq6PBfgN2ZplzxRHsNUE=
Received: by 10.49.58.13 with SMTP id l13mr7322293nfk.1163275549561;
        Sat, 11 Nov 2006 12:05:49 -0800 (PST)
Received: by 10.49.27.13 with HTTP; Sat, 11 Nov 2006 12:05:49 -0800 (PST)
Message-ID: <8c0c601f0611111205i5af0ac58y65bcdc3a4376f5cd@mail.gmail.com>
Date: Sat, 11 Nov 2006 21:05:49 +0100
From: "Paul Borgermans" <paul.borgermans@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Partial Word Matches
In-Reply-To: <359a92830611111133p529ffc8fs35efec87c6cc11cc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_75868_31496613.1163275549513"
References: <572725A4D5BFDE41922873B5199337D4010D7830@arlington1mail.dac.us>
	 <359a92830611111133p529ffc8fs35efec87c6cc11cc@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_75868_31496613.1163275549513
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Indeed, the only way this can happen as far as I know Lucene is by using a
stemmer during indexing, the standard analyzer won't result in such
behaviour.

hth

Paul

On 11/11/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> That's not the default behavior, so I'm perplexed. Normally, you have to
> go
> to considerable effort to get partial matches....
>
> What analyzers are you using at both index and query time? Perhaps as
> short
> a code snippet as you could make showing this behavior would be a good
> thing
> to post. I flat guarantee folks will look at it. But please make it short
> <G>.
>
> Best
> ERick
>
> On 11/11/06, Storey, Jeff <jeff.storey@dac.us> wrote:
> >
> > Hi. I'm using Lucene to do some searching (using the Searcher object and
> > passing it a ParsedQuery). I search for a word such as "long" and it is
> > returning partial matches, such as "belong" and "along." Is there a way
> > to turn off this behavior and only match whole words?
> >
> >
> >
> > Thank you,
> >
> > Jeff
> >
> >
> >
> >
> >
>
>


-- 
http://walhalla.wordpress.com

------=_Part_75868_31496613.1163275549513--

From java-user-return-24479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 11 20:51:43 2006
Return-Path: <java-user-return-24479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65418 invoked from network); 11 Nov 2006 20:51:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 20:51:42 -0000
Received: (qmail 24571 invoked by uid 500); 11 Nov 2006 20:51:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23575 invoked by uid 500); 11 Nov 2006 20:51:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23564 invoked by uid 99); 11 Nov 2006 20:51:45 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jeff.storey@dac.us designates 216.85.37.218 as permitted sender)
Received: from [216.85.37.218] (HELO arlington1mail.dac.us) (216.85.37.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 12:51:43 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Partial Word Matches
Date: Sat, 11 Nov 2006 15:50:48 -0500
Message-ID: <572725A4D5BFDE41922873B5199337D4010D7833@arlington1mail.dac.us>
In-Reply-To: <8c0c601f0611111205i5af0ac58y65bcdc3a4376f5cd@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Partial Word Matches
Thread-Index: AccFzNrbZ7YKM/mJSz6NMs0BnzOqowABaEeA
From: "Storey, Jeff" <jeff.storey@dac.us>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

For proprietary reasons, I cannot post code samples, but I can give you
more details as to what I am doing. I am basically trying to search a
directory of text files.

Step 1: Create an IndexWriter for the directory being searched.

Step 2: For each text file, create a new Document object and add the
document title and content as fields to this Lucene document. Add these
documents to the IndexWriter.

Step 3: Create a QueryParser and parse a user entered query.

Step 4: Create an IndexSearcher to search the directory created by the
IndexWriter.

Step 5: Use the search method of the IndexSearcher to search the parsed
query created in Step 3.

That's it. Is this the proper way to be doing searching?

Thanks.
Jeff

-----Original Message-----
From: Paul Borgermans [mailto:paul.borgermans@gmail.com]=20
Sent: Saturday, November 11, 2006 3:06 PM
To: java-user@lucene.apache.org
Subject: Re: Partial Word Matches

Indeed, the only way this can happen as far as I know Lucene is by using
a
stemmer during indexing, the standard analyzer won't result in such
behaviour.

hth

Paul

On 11/11/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> That's not the default behavior, so I'm perplexed. Normally, you have
to
> go
> to considerable effort to get partial matches....
>
> What analyzers are you using at both index and query time? Perhaps as
> short
> a code snippet as you could make showing this behavior would be a good
> thing
> to post. I flat guarantee folks will look at it. But please make it
short
> <G>.
>
> Best
> ERick
>
> On 11/11/06, Storey, Jeff <jeff.storey@dac.us> wrote:
> >
> > Hi. I'm using Lucene to do some searching (using the Searcher object
and
> > passing it a ParsedQuery). I search for a word such as "long" and it
is
> > returning partial matches, such as "belong" and "along." Is there a
way
> > to turn off this behavior and only match whole words?
> >
> >
> >
> > Thank you,
> >
> > Jeff
> >
> >
> >
> >
> >
>
>


--=20
http://walhalla.wordpress.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 11 21:03:07 2006
Return-Path: <java-user-return-24480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67582 invoked from network); 11 Nov 2006 21:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 21:03:06 -0000
Received: (qmail 31790 invoked by uid 500); 11 Nov 2006 21:03:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31690 invoked by uid 500); 11 Nov 2006 21:03:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31670 invoked by uid 99); 11 Nov 2006 21:03:09 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jeff.storey@dac.us designates 216.85.37.218 as permitted sender)
Received: from [216.85.37.218] (HELO arlington1mail.dac.us) (216.85.37.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 13:03:07 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Partial Word Matches
Date: Sat, 11 Nov 2006 16:02:13 -0500
Message-ID: <572725A4D5BFDE41922873B5199337D4010D7836@arlington1mail.dac.us>
In-Reply-To: <8c0c601f0611111205i5af0ac58y65bcdc3a4376f5cd@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Partial Word Matches
Thread-Index: AccFzNrbZ7YKM/mJSz6NMs0BnzOqowABzH3Q
From: "Storey, Jeff" <jeff.storey@dac.us>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I stand corrected -- I am NOT getting partial matches, I was extracting
partial matches from the text programmatically and thought that's what
was being returned.

On another topic, regarding Boolean queries and wildcard queries, I have
two questions:

It seems like when I enter the query "ball AND basket" it returns
different results than "ball and basket." Is there a way to make the
Boolean operators case insensitive?

As for wildcard searches, one of the things I attempt to do is pick out
the words that caused a particular file to be returned. However, when I
search for the term "yellow~" I might get something like "bellow." Is
there a way to list what Lucene found in the document that made it
relevant?

Thanks for all the help.

Jeff

-----Original Message-----
From: Paul Borgermans [mailto:paul.borgermans@gmail.com]=20
Sent: Saturday, November 11, 2006 3:06 PM
To: java-user@lucene.apache.org
Subject: Re: Partial Word Matches

Indeed, the only way this can happen as far as I know Lucene is by using
a
stemmer during indexing, the standard analyzer won't result in such
behaviour.

hth

Paul

On 11/11/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> That's not the default behavior, so I'm perplexed. Normally, you have
to
> go
> to considerable effort to get partial matches....
>
> What analyzers are you using at both index and query time? Perhaps as
> short
> a code snippet as you could make showing this behavior would be a good
> thing
> to post. I flat guarantee folks will look at it. But please make it
short
> <G>.
>
> Best
> ERick
>
> On 11/11/06, Storey, Jeff <jeff.storey@dac.us> wrote:
> >
> > Hi. I'm using Lucene to do some searching (using the Searcher object
and
> > passing it a ParsedQuery). I search for a word such as "long" and it
is
> > returning partial matches, such as "belong" and "along." Is there a
way
> > to turn off this behavior and only match whole words?
> >
> >
> >
> > Thank you,
> >
> > Jeff
> >
> >
> >
> >
> >
>
>


--=20
http://walhalla.wordpress.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 11 22:51:17 2006
Return-Path: <java-user-return-24481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86619 invoked from network); 11 Nov 2006 22:51:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 22:51:15 -0000
Received: (qmail 6447 invoked by uid 500); 11 Nov 2006 22:51:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6420 invoked by uid 500); 11 Nov 2006 22:51:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6409 invoked by uid 99); 11 Nov 2006 22:51:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 14:51:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 14:51:01 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2229141nfc
        for <java-user@lucene.apache.org>; Sat, 11 Nov 2006 14:50:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=P0DHmeK6sL9TlbQWtf7JDLZiT+vUw541MJTWiCqGQqLrRWZyQTdpgyAXQ5IGBKFxs5EQ2Po5KqFmy+Dy8p8AYCr/Ti/T/eWTXuBGsAAbUSdsPkcSZsScVOpRp5KT9ztAGwa8uzG6NyaXyHVlnlXvwigKuTq4lMlln6njPseOFaU=
Received: by 10.82.164.9 with SMTP id m9mr473261bue.1163285438910;
        Sat, 11 Nov 2006 14:50:38 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Sat, 11 Nov 2006 14:50:38 -0800 (PST)
Message-ID: <359a92830611111450q24bcbbd6y74a1ddd2918291b3@mail.gmail.com>
Date: Sat, 11 Nov 2006 17:50:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Partial Word Matches
In-Reply-To: <572725A4D5BFDE41922873B5199337D4010D7836@arlington1mail.dac.us>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_405_15976633.1163285438758"
References: <8c0c601f0611111205i5af0ac58y65bcdc3a4376f5cd@mail.gmail.com>
	 <572725A4D5BFDE41922873B5199337D4010D7836@arlington1mail.dac.us>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_405_15976633.1163285438758
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below.....

On 11/11/06, Storey, Jeff <jeff.storey@dac.us> wrote:
>
> I stand corrected -- I am NOT getting partial matches, I was extracting
> partial matches from the text programmatically and thought that's what
> was being returned.
>
> On another topic, regarding Boolean queries and wildcard queries, I have
> two questions:
>
> It seems like when I enter the query "ball AND basket" it returns
> different results than "ball and basket." Is there a way to make the
> Boolean operators case insensitive?


No. I've found this kind of odd too. Here's a snippet...

Boolean operators allow terms to be combined through logic operators. Lucene
supports AND, "+", OR, NOT and "-" as Boolean operators(Note: Boolean
operators must be ALL CAPS).

from http://sewm.pku.edu.cn/src/clucene/doc/queryparsersyntax.html



As for wildcard searches, one of the things I attempt to do is pick out
> the words that caused a particular file to be returned. However, when I
> search for the term "yellow~" I might get something like "bellow." Is
> there a way to list what Lucene found in the document that made it
> relevant?


Well, first ~ isn't a wildcard, it's a "fuzzy search" (aka similar terms).
So getting "bellow" for "yellow~" is expected. Although, somewhat
confusingly, "lemon orange"~10 is a proximity search.

* and ? are the wildcard characters.

Searcher.explain() is probably your friend, although I haven't used it much,
I've certainly seen it mentioned enough......

If you haven't, get a copy of Luke (google lucene luke). It's a program that
allows you to explore your indexes, explain queries, explore the effects of
different analyzers, etc. Really, really, really get a copy <G>....


Thanks for all the help.
>
> Jeff
>
> -----Original Message-----
> From: Paul Borgermans [mailto:paul.borgermans@gmail.com]
> Sent: Saturday, November 11, 2006 3:06 PM
> To: java-user@lucene.apache.org
> Subject: Re: Partial Word Matches
>
> Indeed, the only way this can happen as far as I know Lucene is by using
> a
> stemmer during indexing, the standard analyzer won't result in such
> behaviour.
>
> hth
>
> Paul
>
> On 11/11/06, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > That's not the default behavior, so I'm perplexed. Normally, you have
> to
> > go
> > to considerable effort to get partial matches....
> >
> > What analyzers are you using at both index and query time? Perhaps as
> > short
> > a code snippet as you could make showing this behavior would be a good
> > thing
> > to post. I flat guarantee folks will look at it. But please make it
> short
> > <G>.
> >
> > Best
> > ERick
> >
> > On 11/11/06, Storey, Jeff <jeff.storey@dac.us> wrote:
> > >
> > > Hi. I'm using Lucene to do some searching (using the Searcher object
> and
> > > passing it a ParsedQuery). I search for a word such as "long" and it
> is
> > > returning partial matches, such as "belong" and "along." Is there a
> way
> > > to turn off this behavior and only match whole words?
> > >
> > >
> > >
> > > Thank you,
> > >
> > > Jeff
> > >
> > >
> > >
> > >
> > >
> >
> >
>
>
> --
> http://walhalla.wordpress.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_405_15976633.1163285438758--

From java-user-return-24482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 11 23:11:12 2006
Return-Path: <java-user-return-24482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90726 invoked from network); 11 Nov 2006 23:11:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2006 23:11:10 -0000
Received: (qmail 21092 invoked by uid 500); 11 Nov 2006 23:11:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20833 invoked by uid 500); 11 Nov 2006 23:11:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20822 invoked by uid 99); 11 Nov 2006 23:11:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 15:11:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeff.storey@dac.us designates 216.85.37.218 as permitted sender)
Received: from [216.85.37.218] (HELO arlington1mail.dac.us) (216.85.37.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 15:11:00 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Partial Word Matches
Date: Sat, 11 Nov 2006 18:10:36 -0500
Message-ID: <572725A4D5BFDE41922873B5199337D4010D7839@arlington1mail.dac.us>
In-Reply-To: <359a92830611111450q24bcbbd6y74a1ddd2918291b3@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Partial Word Matches
Thread-Index: AccF4+V8o1oz6BjKQXq6KryxSFoKDwAAp96g
From: "Storey, Jeff" <jeff.storey@dac.us>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Erick,

Very useful answers -- I'll be reading up more with the links you've
provided.

Thanks.
Jeff

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Saturday, November 11, 2006 5:51 PM
To: java-user@lucene.apache.org
Subject: Re: Partial Word Matches

See below.....

On 11/11/06, Storey, Jeff <jeff.storey@dac.us> wrote:
>
> I stand corrected -- I am NOT getting partial matches, I was
extracting
> partial matches from the text programmatically and thought that's what
> was being returned.
>
> On another topic, regarding Boolean queries and wildcard queries, I
have
> two questions:
>
> It seems like when I enter the query "ball AND basket" it returns
> different results than "ball and basket." Is there a way to make the
> Boolean operators case insensitive?


No. I've found this kind of odd too. Here's a snippet...

Boolean operators allow terms to be combined through logic operators.
Lucene
supports AND, "+", OR, NOT and "-" as Boolean operators(Note: Boolean
operators must be ALL CAPS).

from http://sewm.pku.edu.cn/src/clucene/doc/queryparsersyntax.html



As for wildcard searches, one of the things I attempt to do is pick out
> the words that caused a particular file to be returned. However, when
I
> search for the term "yellow~" I might get something like "bellow." Is
> there a way to list what Lucene found in the document that made it
> relevant?


Well, first ~ isn't a wildcard, it's a "fuzzy search" (aka similar
terms).
So getting "bellow" for "yellow~" is expected. Although, somewhat
confusingly, "lemon orange"~10 is a proximity search.

* and ? are the wildcard characters.

Searcher.explain() is probably your friend, although I haven't used it
much,
I've certainly seen it mentioned enough......

If you haven't, get a copy of Luke (google lucene luke). It's a program
that
allows you to explore your indexes, explain queries, explore the effects
of
different analyzers, etc. Really, really, really get a copy <G>....


Thanks for all the help.
>
> Jeff
>
> -----Original Message-----
> From: Paul Borgermans [mailto:paul.borgermans@gmail.com]
> Sent: Saturday, November 11, 2006 3:06 PM
> To: java-user@lucene.apache.org
> Subject: Re: Partial Word Matches
>
> Indeed, the only way this can happen as far as I know Lucene is by
using
> a
> stemmer during indexing, the standard analyzer won't result in such
> behaviour.
>
> hth
>
> Paul
>
> On 11/11/06, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > That's not the default behavior, so I'm perplexed. Normally, you
have
> to
> > go
> > to considerable effort to get partial matches....
> >
> > What analyzers are you using at both index and query time? Perhaps
as
> > short
> > a code snippet as you could make showing this behavior would be a
good
> > thing
> > to post. I flat guarantee folks will look at it. But please make it
> short
> > <G>.
> >
> > Best
> > ERick
> >
> > On 11/11/06, Storey, Jeff <jeff.storey@dac.us> wrote:
> > >
> > > Hi. I'm using Lucene to do some searching (using the Searcher
object
> and
> > > passing it a ParsedQuery). I search for a word such as "long" and
it
> is
> > > returning partial matches, such as "belong" and "along." Is there
a
> way
> > > to turn off this behavior and only match whole words?
> > >
> > >
> > >
> > > Thank you,
> > >
> > > Jeff
> > >
> > >
> > >
> > >
> > >
> >
> >
>
>
> --
> http://walhalla.wordpress.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 12 03:40:11 2006
Return-Path: <java-user-return-24483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36451 invoked from network); 12 Nov 2006 03:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2006 03:40:10 -0000
Received: (qmail 82640 invoked by uid 500); 12 Nov 2006 03:40:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82610 invoked by uid 500); 12 Nov 2006 03:40:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82599 invoked by uid 99); 12 Nov 2006 03:40:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 19:40:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 11 Nov 2006 19:40:01 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6751B5B781; Sat, 11 Nov 2006 19:39:41 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 629E27F403
	for <java-user@lucene.apache.org>; Sat, 11 Nov 2006 19:39:41 -0800 (PST)
Date: Sat, 11 Nov 2006 19:39:41 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Partial Word Matches
In-Reply-To: <359a92830611111450q24bcbbd6y74a1ddd2918291b3@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0611111935020.12493@hal.rescomp.berkeley.edu>
References: <8c0c601f0611111205i5af0ac58y65bcdc3a4376f5cd@mail.gmail.com> 
 <572725A4D5BFDE41922873B5199337D4010D7836@arlington1mail.dac.us>
 <359a92830611111450q24bcbbd6y74a1ddd2918291b3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Well, first ~ isn't a wildcard, it's a "fuzzy search" (aka similar terms).
: So getting "bellow" for "yellow~" is expected. Although, somewhat
: confusingly, "lemon orange"~10 is a proximity search.

FYI: the meme there is that in the QueryParser ~ denotes something is
sloppy or "loose" ... so  yellow~0.8  is a loose match on the word
"yellow" (with some character insertions/reordering/deletions allowed) and
"lemon orange"~10  is a loose match on the phrase "lemon orange" (with
some word insertions/reordering allowed)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 12 14:46:44 2006
Return-Path: <java-user-return-24484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38720 invoked from network); 12 Nov 2006 14:46:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2006 14:46:44 -0000
Received: (qmail 5953 invoked by uid 500); 12 Nov 2006 14:46:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5899 invoked by uid 500); 12 Nov 2006 14:46:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5886 invoked by uid 99); 12 Nov 2006 14:46:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 06:46:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gaoligong@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO nz-out-0102.google.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 06:46:34 -0800
Received: by nz-out-0102.google.com with SMTP id s1so564606nze
        for <java-user@lucene.apache.org>; Sun, 12 Nov 2006 06:46:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jtoq022+QJ8HUmfByTdqkKaXYWMy07waLa2EZMw3uptfauF6eKmVss++a9tLrhw9Fu67se9kvdy2ASzEa4+LZK26u/eF0xmOi/s8NGFFDu2oB9h86dL4kUGsQ3PGQAHAmCXBgxI7tJ4CZBDJYdnCt4rANyJ4yAV910Eq+S5PoJs=
Received: by 10.65.188.4 with SMTP id q4mr5313820qbp.1163342773549;
        Sun, 12 Nov 2006 06:46:13 -0800 (PST)
Received: by 10.64.3.17 with HTTP; Sun, 12 Nov 2006 06:46:13 -0800 (PST)
Message-ID: <739f0ce40611120646v32f47ef1ib67997323c40e666@mail.gmail.com>
Date: Sun, 12 Nov 2006 22:46:13 +0800
From: "tony yin" <gaoligong@gmail.com>
To: java-user@lucene.apache.org
Subject: search by field, not field value
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9094_13229885.1163342773511"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9094_13229885.1163342773511
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I want search document by specific field, not by field value, How to?

I have some document store in fields{content, key, path} and some in
{content, key, path, specific_field}

and I want to find all the document that have specific_field, Could you help
me?

------=_Part_9094_13229885.1163342773511--

From java-user-return-24485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 12 17:33:08 2006
Return-Path: <java-user-return-24485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64258 invoked from network); 12 Nov 2006 17:33:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2006 17:33:07 -0000
Received: (qmail 38101 invoked by uid 500); 12 Nov 2006 17:33:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38029 invoked by uid 500); 12 Nov 2006 17:33:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38009 invoked by uid 99); 12 Nov 2006 17:33:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 09:33:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of simon.willnauer@googlemail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 09:32:57 -0800
Received: by ug-out-1314.google.com with SMTP id k40so862601ugc
        for <java-user@lucene.apache.org>; Sun, 12 Nov 2006 09:32:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kWNra9a8udqtQgBgfngDUkidRKl/uCIVNann9pzxA9aE8GRykvSWzDgklZggEXhIzoffNXwWkoWIIMGUAba718uH+Yswz6N9AtTFw8GhCN/TxTb7pkgJVTW64l0X2fRoM0B8X1vMA5f/NNaFEs6TNfrFYyc6SrvHhfbsahYhlko=
Received: by 10.67.119.13 with SMTP id w13mr6780858ugm.1163352755686;
        Sun, 12 Nov 2006 09:32:35 -0800 (PST)
Received: by 10.67.22.3 with HTTP; Sun, 12 Nov 2006 09:32:35 -0800 (PST)
Message-ID: <f18c9dde0611120932x25d85512t906fad685b1fbf06@mail.gmail.com>
Date: Sun, 12 Nov 2006 18:32:35 +0100
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: search by field, not field value
In-Reply-To: <739f0ce40611120646v32f47ef1ib67997323c40e666@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <739f0ce40611120646v32f47ef1ib67997323c40e666@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hey tony,
I guess the easiest way for you to do that is to create a extra field
containig the field names and just fire a boolean query on this extra
field.

best regards simon

On 11/12/06, tony yin <gaoligong@gmail.com> wrote:
> I want search document by specific field, not by field value, How to?
>
> I have some document store in fields{content, key, path} and some in
> {content, key, path, specific_field}
>
> and I want to find all the document that have specific_field, Could you help
> me?
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 12 17:48:31 2006
Return-Path: <java-user-return-24486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66390 invoked from network); 12 Nov 2006 17:48:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2006 17:48:30 -0000
Received: (qmail 62824 invoked by uid 500); 12 Nov 2006 17:48:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62790 invoked by uid 500); 12 Nov 2006 17:48:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62779 invoked by uid 99); 12 Nov 2006 17:48:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 09:48:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 09:48:21 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2401356nfc
        for <java-user@lucene.apache.org>; Sun, 12 Nov 2006 09:48:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KsGn3+xy+SsTYCb6/TWXEZlBmXhkqMxRGvj17S2NZ+zUohCTpQn3EusRaa+jGH1kl3MR7PEigbHgr41xr/FUAdrN/YOU8Oeqei8rT2UaiTLncO0Jhsvz70KmMu48ZM1pk8fleqH8BKI1O5rbC++Ap6FbYYA2QBGwVwtM7B+XlYk=
Received: by 10.82.126.5 with SMTP id y5mr520319buc.1163353679526;
        Sun, 12 Nov 2006 09:47:59 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Sun, 12 Nov 2006 09:47:59 -0800 (PST)
Message-ID: <359a92830611120947p3b85666y2c3e93d328059ed4@mail.gmail.com>
Date: Sun, 12 Nov 2006 12:47:59 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Partial Word Matches
In-Reply-To: <Pine.LNX.4.58.0611111935020.12493@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7022_13936338.1163353679433"
References: <8c0c601f0611111205i5af0ac58y65bcdc3a4376f5cd@mail.gmail.com>
	 <572725A4D5BFDE41922873B5199337D4010D7836@arlington1mail.dac.us>
	 <359a92830611111450q24bcbbd6y74a1ddd2918291b3@mail.gmail.com>
	 <Pine.LNX.4.58.0611111935020.12493@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7022_13936338.1163353679433
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I *knew* it wasn't just a random thing, solely intended to confuse me
<G>....

Thanks for that..

Erick

On 11/11/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : Well, first ~ isn't a wildcard, it's a "fuzzy search" (aka similar
> terms).
> : So getting "bellow" for "yellow~" is expected. Although, somewhat
> : confusingly, "lemon orange"~10 is a proximity search.
>
> FYI: the meme there is that in the QueryParser ~ denotes something is
> sloppy or "loose" ... so  yellow~0.8  is a loose match on the word
> "yellow" (with some character insertions/reordering/deletions allowed) and
> "lemon orange"~10  is a loose match on the phrase "lemon orange" (with
> some word insertions/reordering allowed)
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7022_13936338.1163353679433--

From java-user-return-24487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 12 18:04:28 2006
Return-Path: <java-user-return-24487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69535 invoked from network); 12 Nov 2006 18:04:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2006 18:04:27 -0000
Received: (qmail 76627 invoked by uid 500); 12 Nov 2006 18:04:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75539 invoked by uid 500); 12 Nov 2006 18:04:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75528 invoked by uid 99); 12 Nov 2006 18:04:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 10:04:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 10:04:18 -0800
Received: by nf-out-0910.google.com with SMTP id p46so1811755nfa
        for <java-user@lucene.apache.org>; Sun, 12 Nov 2006 10:03:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IpgzEpq7HoOT1tX3OG2ZnvwVLKdGXRXoj6tNKA8HJ3BECnK3cEzCH/wwQEll1uUli6rxP133v+jLn7sWGlkAJtfnodHvZpPwLYDadwRNP66PAgY5Gsd8V02fK3vtsCW1rPJy6CWFN4VmLCo9IPxSCgYKLOyva4FASi7p6LRSdkc=
Received: by 10.82.114.3 with SMTP id m3mr521665buc.1163354635312;
        Sun, 12 Nov 2006 10:03:55 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Sun, 12 Nov 2006 10:03:55 -0800 (PST)
Message-ID: <359a92830611121003v3952d70cg625fd693d4e9f1dd@mail.gmail.com>
Date: Sun, 12 Nov 2006 13:03:55 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Subject: Re: search by field, not field value
In-Reply-To: <f18c9dde0611120932x25d85512t906fad685b1fbf06@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7262_904346.1163354635236"
References: <739f0ce40611120646v32f47ef1ib67997323c40e666@mail.gmail.com>
	 <f18c9dde0611120932x25d85512t906fad685b1fbf06@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7262_904346.1163354635236
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm going mostly from memory here, so the details may not be entirely
accurate, but.....

See TermDocs (FilterTermDocs?). Use the seek method to get to the term e.g.

TermDocs.seek(new Term("specific_field", ""));

 Note that the "" as the value of the term gets all the terms. Then use
TermDocs.next until it returns false. At each point, TermDocs.doc() will
give you the Lucene ID of a document containing that term.

Really, this enumerates all the documents that have any values in
specific_field.

One issue here is that you'll get multiple hits per document. For instance,
say you've indexed A, B, and C as values in specific_field for document 5.
Just blindly doing the next() call will get you document 5 three times. You
can use TermDocs.skipTo(current document + 1). to insure that you only
process a document once. This is either a minor efficiency or a major time
savings, depending on the characteristics of your index..... Be a bit
careful and only call next() if you *don't* use skipto, or you may skip a
doc that only has one value for specific_field.

Hope this helps
Erick




On 11/12/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
>
> Hey tony,
> I guess the easiest way for you to do that is to create a extra field
> containig the field names and just fire a boolean query on this extra
> field.
>
> best regards simon
>
> On 11/12/06, tony yin <gaoligong@gmail.com> wrote:
> > I want search document by specific field, not by field value, How to?
> >
> > I have some document store in fields{content, key, path} and some in
> > {content, key, path, specific_field}
> >
> > and I want to find all the document that have specific_field, Could you
> help
> > me?
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7262_904346.1163354635236--

From java-user-return-24488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 12 20:50:57 2006
Return-Path: <java-user-return-24488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15182 invoked from network); 12 Nov 2006 20:50:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2006 20:50:54 -0000
Received: (qmail 68468 invoked by uid 500); 12 Nov 2006 20:51:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68433 invoked by uid 500); 12 Nov 2006 20:51:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67982 invoked by uid 99); 12 Nov 2006 20:50:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 12:50:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 12:50:42 -0800
Received: from beetext06 ([70.81.32.231]) by VL-MH-MR001.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with ESMTP id <0J8M001G0XVX8EG0@VL-MH-MR001.ip.videotron.ca> for
 java-user@lucene.apache.org; Sun, 12 Nov 2006 15:50:21 -0500 (EST)
Date: Sun, 12 Nov 2006 15:50:09 -0500
From: Jean-Francois Beaulac <jean-francois.beaulac@beetext.com>
Subject: IndexReader.getTermFreqVectors() throws Read past EOF exception
To: java-user@lucene.apache.org
Message-id: <0J8M001G1XVX8EG0@VL-MH-MR001.ip.videotron.ca>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Content-type: multipart/alternative;
 boundary="Boundary_(ID_IPxXGdRGTvFV9nUphXySWA)"
Thread-index: AccGnCRjZ235ZC4zTD+77lH8i1fNeg==
X-Virus-Checked: Checked by ClamAV on apache.org

--Boundary_(ID_IPxXGdRGTvFV9nUphXySWA)
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT

Hi,

 

I make a search on several indexes using a MultiSearcher and I can only
retrieve the TermFreqVectors from the IndexSearcher in the Searcher at
position 0 in my searchable array.

 

For example ():

hits = multi.search(luceneQuery);

for (int k = 0; k < hits.length(); k++) {

 
((IndexSearcher)multi.getSearchables()[multi.subSearcher(hits.id(k))]).getIn
dexReader().getTermFreqVectors(hits.id(k));

}

 

Will work correctly if multi.subSearcher() returns 0, but will fail if > 0.

 

I'm really wondering why I got this exception since my search results are
good.

 

 

Thank you

 


--Boundary_(ID_IPxXGdRGTvFV9nUphXySWA)--

From java-user-return-24489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 12 21:19:23 2006
Return-Path: <java-user-return-24489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20414 invoked from network); 12 Nov 2006 21:19:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2006 21:19:23 -0000
Received: (qmail 89936 invoked by uid 500); 12 Nov 2006 21:19:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89895 invoked by uid 500); 12 Nov 2006 21:19:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89884 invoked by uid 99); 12 Nov 2006 21:19:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 13:19:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 13:19:11 -0800
Received: from beetext06 ([70.81.32.231]) by VL-MO-MR002.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with ESMTP id <0J8M009A1Z7EJR40@VL-MO-MR002.ip.videotron.ca> for
 java-user@lucene.apache.org; Sun, 12 Nov 2006 16:18:50 -0500 (EST)
Date: Sun, 12 Nov 2006 16:18:38 -0500
From: Jean-Francois Beaulac <jean-francois.beaulac@beetext.com>
Subject: RE: IndexReader.getTermFreqVectors() throws Read past EOF exception
In-reply-to: <0J8M001G1XVX8EG0@VL-MH-MR001.ip.videotron.ca>
To: java-user@lucene.apache.org
Message-id: <0J8M009A2Z7EJR40@VL-MO-MR002.ip.videotron.ca>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-index: AccGnCRjZ235ZC4zTD+77lH8i1fNegAA+XGg
X-Virus-Checked: Checked by ClamAV on apache.org

Forgot to post the stacktrace

java.io.IOException: read past EOF
	at =
org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java=
:60)
	at =
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.ja=
va:33)
	at org.apache.lucene.store.IndexInput.readInt(IndexInput.java:46)
	at org.apache.lucene.store.IndexInput.readLong(IndexInput.java:69)
	at =
org.apache.lucene.index.TermVectorsReader.get(TermVectorsReader.java:151)=

	at =
org.apache.lucene.index.SegmentReader.getTermFreqVectors(SegmentReader.ja=
va:508)
	...


-----Message d'origine-----
De=A0: Jean-Francois Beaulac [mailto:jean-francois.beaulac@beetext.com]=20
Envoy=E9=A0: November 12, 2006 3:50 PM
=C0=A0: java-user@lucene.apache.org
Objet=A0: IndexReader.getTermFreqVectors() throws Read past EOF =
exception

Hi,

=20

I make a search on several indexes using a MultiSearcher and I can only
retrieve the TermFreqVectors from the IndexSearcher in the Searcher at
position 0 in my searchable array.

=20

For example ():

hits =3D multi.search(luceneQuery);

for (int k =3D 0; k < hits.length(); k++) {

=20
((IndexSearcher)multi.getSearchables()[multi.subSearcher(hits.id(k))]).ge=
tIn
dexReader().getTermFreqVectors(hits.id(k));

}

=20

Will work correctly if multi.subSearcher() returns 0, but will fail if > =
0.

=20

I'm really wondering why I got this exception since my search results =
are
good.

=20

=20

Thank you

=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 01:59:10 2006
Return-Path: <java-user-return-24490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68332 invoked from network); 13 Nov 2006 01:59:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 01:59:09 -0000
Received: (qmail 39507 invoked by uid 500); 13 Nov 2006 01:59:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39463 invoked by uid 500); 13 Nov 2006 01:59:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39452 invoked by uid 99); 13 Nov 2006 01:59:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 17:59:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 17:58:59 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GjR5p-0000fr-DE
	for java-user@lucene.apache.org; Sun, 12 Nov 2006 17:58:37 -0800
Message-ID: <7310277.post@talk.nabble.com>
Date: Sun, 12 Nov 2006 17:58:37 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <OF29182AF9.FEFAAAF0-ON88257222.0070DC18-88257222.00723694@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7211921.post@talk.nabble.com> <Pine.LNX.4.58.0611062050170.20924@hal.rescomp.berkeley.edu> <7214786.post@talk.nabble.com> <Pine.LNX.4.58.0611071128450.29748@hal.rescomp.berkeley.edu> <7230940.post@talk.nabble.com> <OF04FF8261.1193B464-ON88257220.00267C16-88257220.0027F204@il.ibm.com> <7235584.post@talk.nabble.com> <OFBAB9076A.1877B7BD-ON88257220.005A0C80-88257220.00669CE4@il.ibm.com> <7273997.post@talk.nabble.com> <OF29182AF9.FEFAAAF0-ON88257222.0070DC18-88257222.00723694@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Doron,

   How to reuse the searcher? Is there any example on how to do this?

   Thanks

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Filter-query-method-tf2586547.html#a7310277
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 03:08:58 2006
Return-Path: <java-user-return-24491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 294 invoked from network); 13 Nov 2006 03:08:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 03:08:57 -0000
Received: (qmail 15190 invoked by uid 500); 13 Nov 2006 03:08:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15156 invoked by uid 500); 13 Nov 2006 03:08:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15145 invoked by uid 99); 13 Nov 2006 03:08:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 19:08:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 19:08:46 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2503345nfc
        for <java-user@lucene.apache.org>; Sun, 12 Nov 2006 19:08:25 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HfWSWd0IPJQvIvcr+sY8ldNO81bDDGuFGOHBvhKRB/eIS4tU+MTCra445Yq6zRu2+W0gZg43+HopRYKdrSFDrwYXHwfh4CP3RtPfE3yfXuNjGV838+t06Ly4BoitHqfE5zfLnhYrAMaiMMGvXFaYByHQHmoCrN134P1HiOH15QE=
Received: by 10.82.164.9 with SMTP id m9mr84983bue.1163387304606;
        Sun, 12 Nov 2006 19:08:24 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Sun, 12 Nov 2006 19:08:24 -0800 (PST)
Message-ID: <359a92830611121908u3ef42489w33b7f76b3e26b351@mail.gmail.com>
Date: Sun, 12 Nov 2006 22:08:24 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter query method
In-Reply-To: <7310277.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12504_17417950.1163387304535"
References: <7211921.post@talk.nabble.com> <7214786.post@talk.nabble.com>
	 <Pine.LNX.4.58.0611071128450.29748@hal.rescomp.berkeley.edu>
	 <7230940.post@talk.nabble.com>
	 <OF04FF8261.1193B464-ON88257220.00267C16-88257220.0027F204@il.ibm.com>
	 <7235584.post@talk.nabble.com>
	 <OFBAB9076A.1877B7BD-ON88257220.005A0C80-88257220.00669CE4@il.ibm.com>
	 <7273997.post@talk.nabble.com>
	 <OF29182AF9.FEFAAAF0-ON88257222.0070DC18-88257222.00723694@il.ibm.com>
	 <7310277.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12504_17417950.1163387304535
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Just don't close it. Think of this as a singleton pattern.....

Erick

On 11/12/06, spinergywmy <spinergywmy@gmail.com> wrote:
>
>
> Hi Doron,
>
>    How to reuse the searcher? Is there any example on how to do this?
>
>    Thanks
>
> regards,
> Wooi Meng
> --
> View this message in context:
> http://www.nabble.com/Filter-query-method-tf2586547.html#a7310277
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12504_17417950.1163387304535--

From java-user-return-24492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 03:29:52 2006
Return-Path: <java-user-return-24492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10245 invoked from network); 13 Nov 2006 03:29:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 03:29:52 -0000
Received: (qmail 28122 invoked by uid 500); 13 Nov 2006 03:29:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28101 invoked by uid 500); 13 Nov 2006 03:29:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28090 invoked by uid 99); 13 Nov 2006 03:29:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 19:29:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of gaoligong@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO nz-out-0102.google.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 19:29:42 -0800
Received: by nz-out-0102.google.com with SMTP id s1so654383nze
        for <java-user@lucene.apache.org>; Sun, 12 Nov 2006 19:29:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kIIh1QMR10SmfCSK7AjvUw4nFc4igQUGVn1gZ4NrNAXEkOoa0Ya+hWIjikAyi7H5U0DM0PxH8Z6psc3nO5W9/LccXvKc++6QlewoM2af737k7TMk8DGrn4eaKupz2TWEHS5laTxmhK4JwAnXAzcugzw9mB1TCg+uIvbLWAWgWYY=
Received: by 10.65.219.3 with SMTP id w3mr6953891qbq.1163388561399;
        Sun, 12 Nov 2006 19:29:21 -0800 (PST)
Received: by 10.64.3.17 with HTTP; Sun, 12 Nov 2006 19:29:21 -0800 (PST)
Message-ID: <739f0ce40611121929y5a255fb0s94b0feeca7744267@mail.gmail.com>
Date: Mon, 13 Nov 2006 11:29:21 +0800
From: "tony yin" <gaoligong@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search by field, not field value
In-Reply-To: <359a92830611121003v3952d70cg625fd693d4e9f1dd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17361_29395869.1163388561239"
References: <739f0ce40611120646v32f47ef1ib67997323c40e666@mail.gmail.com>
	 <f18c9dde0611120932x25d85512t906fad685b1fbf06@mail.gmail.com>
	 <359a92830611121003v3952d70cg625fd693d4e9f1dd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17361_29395869.1163388561239
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What a valuable answer. thanks.
don't worry about multiple hits. I would never store multiple values in
specific_field.


On 11/13/06, Erick Erickson <erickerickson@gmail.com> wrote:
...



-- 
Kindly Regards

Tony
===============================

------=_Part_17361_29395869.1163388561239--

From java-user-return-24493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 04:04:08 2006
Return-Path: <java-user-return-24493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21364 invoked from network); 13 Nov 2006 04:04:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 04:04:07 -0000
Received: (qmail 49813 invoked by uid 500); 13 Nov 2006 04:04:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49785 invoked by uid 500); 13 Nov 2006 04:04:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49773 invoked by uid 99); 13 Nov 2006 04:04:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 20:04:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 12 Nov 2006 20:03:58 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id BD31C5B763; Sun, 12 Nov 2006 20:03:37 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id ACDB07F403
	for <java-user@lucene.apache.org>; Sun, 12 Nov 2006 20:03:37 -0800 (PST)
Date: Sun, 12 Nov 2006 20:03:37 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Scoring depending on terms combination
In-Reply-To: <4552F324.9020402@gmx.de>
Message-ID: <Pine.LNX.4.58.0611121958320.21666@hal.rescomp.berkeley.edu>
References: <4552F324.9020402@gmx.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The user searches for the terms A, B, C and D.
: Of-course, the document containing all terms has the highest score. The
: document containing just the terms B and C has a higher score than the
: document containing the terms A and B.
:
: A+B+C+D > B+C > A+B
:
: I know the boosting combinations at query time.

that's a pretty specific and not all together intuitive ranking... can you
elaborate on your actual use case? ... why is B+C better then A+B ? .. are
these rules specific to a known list of terms, or is a general rule
relating to how you parse the users input?

off the top of my head, i would suggest building one big BooleanQuery and
putting each of the permutations you care about in it as subqueries with
boosts that corripsond to their importance.  you'll probably want to
disable the coord, and depending on how you want things to work if a doc
matches your "A+B" clause *and* matches your "B+C" clause you may want to
use a DisjunctionMaxQuery with a 0.0f tiebreaker value instead of a
BooleanQuery.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 09:46:34 2006
Return-Path: <java-user-return-24494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16080 invoked from network); 13 Nov 2006 09:46:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 09:46:34 -0000
Received: (qmail 8545 invoked by uid 500); 13 Nov 2006 09:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8518 invoked by uid 500); 13 Nov 2006 09:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8505 invoked by uid 99); 13 Nov 2006 09:46:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 01:46:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of soeren.pekrul@gmx.de designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 13 Nov 2006 01:46:23 -0800
Received: (qmail invoked by alias); 13 Nov 2006 09:46:01 -0000
Received: from p548C7F8C.dip.t-dialin.net (EHLO [10.0.1.102]) [84.140.127.140]
  by mail.gmx.net (mp010) with SMTP; 13 Nov 2006 10:46:01 +0100
X-Authenticated: #3493418
Message-ID: <45583E44.1010207@gmx.de>
Date: Mon, 13 Nov 2006 10:43:32 +0100
From: Soeren Pekrul <soeren.pekrul@gmx.de>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Scoring depending on terms combination
References: <4552F324.9020402@gmx.de> <Pine.LNX.4.58.0611121958320.21666@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0611121958320.21666@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> that's a pretty specific and not all together intuitive ranking... can you
> elaborate on your actual use case? ... why is B+C better then A+B ? .. are
> these rules specific to a known list of terms, or is a general rule
> relating to how you parse the users input?

The original user query was a Boolean query:
+(A B) +(C D)

It is possible that this query is to restrict. So I would like to give 
the user to the hits matching his original query additional hits.

> off the top of my head, i would suggest building one big BooleanQuery and
> putting each of the permutations you care about in it as subqueries with
> boosts that corripsond to their importance.  you'll probably want to
> disable the coord, and depending on how you want things to work if a doc
> matches your "A+B" clause *and* matches your "B+C" clause you may want to
> use a DisjunctionMaxQuery with a 0.0f tiebreaker value instead of a
> BooleanQuery.

My first idea was sub classing TopDocCollector and overriding the 
collect function. In this function I wanted to ask for terms of the 
current document, calculate the score and call the collect function of 
the base class with the new score as argument. I afraid it takes to much 
time.

Boolean queries for each interesting combination with a corresponding 
boost value should be faster.

Thank you, Hoss.

Sören

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 12:46:34 2006
Return-Path: <java-user-return-24495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82553 invoked from network); 13 Nov 2006 12:46:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 12:46:33 -0000
Received: (qmail 75586 invoked by uid 500); 13 Nov 2006 12:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75555 invoked by uid 500); 13 Nov 2006 12:46:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75544 invoked by uid 99); 13 Nov 2006 12:46:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 04:46:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 04:46:22 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1014547ugc
        for <java-user@lucene.apache.org>; Mon, 13 Nov 2006 04:46:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=c4X2I6TNsvrHDUH0fHLxfnwA4vga0Xe8/4nBISatRj5QXM2rtogThJ/tDQi2LYU//N1bee7EQrAhBi0SYlG1SXr2/S5a/kzzbjhauE5rqTSwUiX8gU/VbKL07naLpz36CyxcSRWanfBTlAoR/ZlWlVNZtvJhvDdoTMfb9aiEVVw=
Received: by 10.82.101.3 with SMTP id y3mr611335bub.1163421960466;
        Mon, 13 Nov 2006 04:46:00 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Mon, 13 Nov 2006 04:46:00 -0800 (PST)
Message-ID: <359a92830611130446t306a0ad0xc41f56e89c13d747@mail.gmail.com>
Date: Mon, 13 Nov 2006 07:46:00 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: search by field, not field value
In-Reply-To: <739f0ce40611121929y5a255fb0s94b0feeca7744267@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17785_14603719.1163421960312"
References: <739f0ce40611120646v32f47ef1ib67997323c40e666@mail.gmail.com>
	 <f18c9dde0611120932x25d85512t906fad685b1fbf06@mail.gmail.com>
	 <359a92830611121003v3952d70cg625fd693d4e9f1dd@mail.gmail.com>
	 <739f0ce40611121929y5a255fb0s94b0feeca7744267@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17785_14603719.1163421960312
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Glad it helped. About multiple hits, I assume you're storing values in
specific_field as UN_TOKENIZED then? or it's some unique ID? The hidden
thing here is that if your analyzer may break up your token stream for you.
It depends upon the stream and the analyzer you use. For instance, an e-mail
address (or file path or...) would be tokenized as multiple tokens (or not),
depending upon the analyzer. WhitespaceAnalyzer is probably the most
intuitive from this perspective, but UN_TOKENIZED overrides the analyzer and
doesn't break up the input stream at index time at least.

apologies if this is old hat to you,,

And if it's not, I'll recommend Luke for examining the effects of various
analyzers on input streams when putting them in your index (google lucene
and luke)....

Best
Erick



On 11/12/06, tony yin <gaoligong@gmail.com> wrote:
>
> What a valuable answer. thanks.
> don't worry about multiple hits. I would never store multiple values in
> specific_field.
>
>
> On 11/13/06, Erick Erickson <erickerickson@gmail.com> wrote:
> ...
>
>
>
> --
> Kindly Regards
>
> Tony
> ===============================
>
>

------=_Part_17785_14603719.1163421960312--

From java-user-return-24496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 16:08:20 2006
Return-Path: <java-user-return-24496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67399 invoked from network); 13 Nov 2006 16:08:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 16:08:19 -0000
Received: (qmail 63098 invoked by uid 500); 13 Nov 2006 16:08:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63067 invoked by uid 500); 13 Nov 2006 16:08:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63030 invoked by uid 99); 13 Nov 2006 16:08:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 08:08:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of grant.ingersoll@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 08:08:02 -0800
Received: by wr-out-0506.google.com with SMTP id i2so113338wra
        for <java-user@lucene.apache.org>; Mon, 13 Nov 2006 08:07:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Uf5WfmU0Vatoliu8GQRdz8LyjpTpLZ0grv6Sseo9UOBU58NqBnt2WVSWs4ledA2aMqhVT/CM6dyWk7MZDt3vFdd8vapCqqoGz5Fi1qYqFZfF58Wmzj3JBH3T4YOp/xql0oXMktbnIKTfu9P5zvDIvnq4A9gRxBKJfBaI5mnzWZg=
Received: by 10.100.197.15 with SMTP id u15mr62739anf.1163434057358;
        Mon, 13 Nov 2006 08:07:37 -0800 (PST)
Received: from ?192.168.0.2? ( [74.229.189.244])
        by mx.google.com with ESMTP id 26sm7468640wrl.2006.11.13.08.07.35;
        Mon, 13 Nov 2006 08:07:36 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <0J8M001G1XVX8EG0@VL-MH-MR001.ip.videotron.ca>
References: <0J8M001G1XVX8EG0@VL-MH-MR001.ip.videotron.ca>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AB3DDF3A-D034-43B8-9791-8DB5C4F9F2B8@gmail.com>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <grant.ingersoll@gmail.com>
Subject: Re: IndexReader.getTermFreqVectors() throws Read past EOF exception
Date: Mon, 13 Nov 2006 11:07:33 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you provide more info on your setup?

Can you run a search against just one of the other subsearchers and  
see if you get term vectors that way?  That is, simplify the process  
by taking the MultiSearcher out of the equation to see if you get  
valid results.

On Nov 12, 2006, at 3:50 PM, Jean-Francois Beaulac wrote:

> Hi,
>
>
>
> I make a search on several indexes using a MultiSearcher and I can  
> only
> retrieve the TermFreqVectors from the IndexSearcher in the Searcher at
> position 0 in my searchable array.
>
>
>
> For example ():
>
> hits = multi.search(luceneQuery);
>
> for (int k = 0; k < hits.length(); k++) {
>
>
> ((IndexSearcher)multi.getSearchables()[multi.subSearcher(hits.id 
> (k))]).getIn
> dexReader().getTermFreqVectors(hits.id(k));
>
> }
>
>
>
> Will work correctly if multi.subSearcher() returns 0, but will fail  
> if > 0.
>
>
>
> I'm really wondering why I got this exception since my search  
> results are
> good.
>
>
>
>
>
> Thank you
>
>
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 16:11:34 2006
Return-Path: <java-user-return-24497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69037 invoked from network); 13 Nov 2006 16:11:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 16:11:33 -0000
Received: (qmail 75594 invoked by uid 500); 13 Nov 2006 16:11:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75560 invoked by uid 500); 13 Nov 2006 16:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75549 invoked by uid 99); 13 Nov 2006 16:11:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 08:11:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [129.240.10.15] (HELO pat.uio.no) (129.240.10.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 08:11:23 -0800
Received: from mail-mx1.uio.no ([129.240.10.29])
	by pat.uio.no with esmtp (Exim 4.43)
	id 1GjeOk-0006TZ-Cc
	for java-user@lucene.apache.org; Mon, 13 Nov 2006 17:11:02 +0100
Received: from f3bdhcp15.uio.no ([129.240.92.144])
	by mail-mx1.uio.no with esmtpsa (SSLv3:RC4-MD5:128)
	(Exim 4.43)
	id 1GjeOc-00044a-Ij; Mon, 13 Nov 2006 17:10:54 +0100
Subject: NFS and Lucene 2.0 status - still troublesome ?
From: =?ISO-8859-1?Q?=D8yvind?= Stegard <oyvind.stegard@usit.uio.no>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Organization: USIT, University of Oslo
Date: Mon, 13 Nov 2006 17:10:54 +0100
Message-Id: <1163434254.5381.29.camel@blackelf>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1 
Content-Transfer-Encoding: quoted-printable
X-UiO-Spam-info: not spam, SpamAssassin (score=-5.267, required 12,
	autolearn=disabled, AWL -0.27, UIO_MAIL_IS_INTERNAL -5.00)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Java-Lucene list,

We are using Lucene in our own searchable content-repository solution.
We have started making plans for clustering support in our application,
and this also affects the indexing parts of it.

I've searched the list and have found many references to problems when
using Lucene over NFS. Mostly because of file-based locking, which
doesn't work all that well for many NFS installations. I'm under the
impression that the core locking logic between writers and/or readers
hasn't changed in a significant way between Lucene 1.4 and 2.0 (?). I
guess this means NFS is still problematic ?

We are considering a model where a single node updates the search index
according to changes in the repository (only one physical index for the
entire cluster) while multiple other nodes can search the very same
index over NFS (read-only). But I guess there is a need for a single
lock-directory shared and writable between all nodes, and that this
makes NFS-usage difficult ?

The reason we are thinking about NFS is that it's well supported in our
network/IT infrastructure, and we have many network/*nix technicians
with years of experience with it.

Is there any feasible way of using NFS for distributed searching at all,
while avoiding the pesky locking problems ?

Perhaps someone on this list has some pointers to alternative ways of
doing things ? I don't think we have the option of using a different
network file system, though.

Thanks in advance for any replies !

=C3=98yvind Stegard
USIT, University of Oslo
--=20
< =C3=98yvind Stegard < oyvind stegard at usit uio no >
 < SAUS/USIT, UiO


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 16:45:39 2006
Return-Path: <java-user-return-24498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81094 invoked from network); 13 Nov 2006 16:45:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 16:45:37 -0000
Received: (qmail 54677 invoked by uid 500); 13 Nov 2006 16:45:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54633 invoked by uid 500); 13 Nov 2006 16:45:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54597 invoked by uid 99); 13 Nov 2006 16:45:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 08:45:40 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.86.89.65] (HELO elasmtp-kukur.atl.sa.earthlink.net) (209.86.89.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 08:45:26 -0800
Received: from [69.234.25.117] (helo=[172.16.1.3])
	by elasmtp-kukur.atl.sa.earthlink.net with asmtp (Exim 4.34)
	id 1Gjeve-000433-Os
	for java-user@lucene.apache.org; Mon, 13 Nov 2006 11:45:02 -0500
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <1163434254.5381.29.camel@blackelf>
References: <1163434254.5381.29.camel@blackelf>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <EEE84A41-E09F-413E-88AB-CC8D49FBDADA@corp.earthlink.net>
Content-Transfer-Encoding: quoted-printable
From: "Peter A. Friend" <octavian@corp.earthlink.net>
Subject: Re: NFS and Lucene 2.0 status - still troublesome ?
Date: Mon, 13 Nov 2006 08:45:01 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-ELNK-Trace: e38a400786bfeea01aa676d7e74259b7b3291a7d08dfec79fcf241778f2e80df83e937798828c3df350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 69.234.25.117
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 13, 2006, at 8:10 AM, =D8yvind Stegard wrote:

> I've searched the list and have found many references to problems when
> using Lucene over NFS. Mostly because of file-based locking, which
> doesn't work all that well for many NFS installations. I'm under the
> impression that the core locking logic between writers and/or readers
> hasn't changed in a significant way between Lucene 1.4 and 2.0 (?). I
> guess this means NFS is still problematic ?

Unfortunately it all depends on the reliability of the NFS drivers in =20=

the OS, and the kind of filers you are using. If the environment =20
isn't too busy, NFS lockd *may* work on some systems, but it usually =20
ends up collapsing under load.

 =46rom there you have to hand craft some C code to create lock files, =20=

and what works again depends on your system. On some systems doing an =20=

exclusive create will work (can only be expected to work on version 3 =20=

mounts), but then local caches will bite you, so you end up having to =20=

disable the directory cache, assuming your system supports such an =20
option. That failing, creating locks as symlinks to unique temporary =20
files that don't exist will usually blow through the cache and work =20
ok. This of course doesn't rule out problems in the NFS =20
implementation that show up under heavy load, and allow more than one =20=

machine to think it has the lock. You also have to include some code =20
to sensibly expire locks left from crashes.

> We are considering a model where a single node updates the search =20
> index
> according to changes in the repository (only one physical index for =20=

> the
> entire cluster) while multiple other nodes can search the very same
> index over NFS (read-only). But I guess there is a need for a single
> lock-directory shared and writable between all nodes, and that this
> makes NFS-usage difficult ?

The fact that only a single node will be doing writes greatly =20
improves the chances of this working. I don't recall whether readers =20
ever check for locks, it's best if that can be avoided. I know that =20
it's safe to write the new indexes since they aren't being referred =20
to by the segments file, but I'm not sure what sequence of operations =20=

are used when re-writing the segments file. I think unlinking the old =20=

segments file and using a rename to put the new one in place is =20
probably the safest bet.

Peter


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 17:03:24 2006
Return-Path: <java-user-return-24499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95462 invoked from network); 13 Nov 2006 17:03:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 17:03:24 -0000
Received: (qmail 21944 invoked by uid 500); 13 Nov 2006 17:03:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21812 invoked by uid 500); 13 Nov 2006 17:03:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21794 invoked by uid 99); 13 Nov 2006 17:03:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 09:03:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 09:03:13 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by frontend1.messagingengine.com (Postfix) with ESMTP id E8871DC83EE
	for <java-user@lucene.apache.org>; Mon, 13 Nov 2006 12:02:49 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Mon, 13 Nov 2006 12:02:53 -0500
X-Sasl-enc: UzyJejxSJ/uGIAwjvf9ZZRMLAMrM9jpxvwopINAJDiZz 1163437373
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 85BAAC999
	for <java-user@lucene.apache.org>; Mon, 13 Nov 2006 12:02:53 -0500 (EST)
Message-ID: <4558A52A.2000300@mikemccandless.com>
Date: Mon, 13 Nov 2006 12:02:34 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.7 (Windows/20060909)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NFS and Lucene 2.0 status - still troublesome ?
References: <1163434254.5381.29.camel@blackelf> <EEE84A41-E09F-413E-88AB-CC8D49FBDADA@corp.earthlink.net>
In-Reply-To: <EEE84A41-E09F-413E-88AB-CC8D49FBDADA@corp.earthlink.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org


The quick answer is: NFS is still problematic in Lucene 2.0.

The longer answer is: we'd like to fix this, but it's not fully fixed
yet.  You can see here:

     http://issues.apache.org/jira/browse/LUCENE-673

for gory details.

There are at least two different problems with NFS (spelled out in the
above issue):

   * Intermittant IOException on instantiating a reader.

     This is in fact [surprisingly] not due to locking, at least in my
     testing.  The unreleased version of Lucene now supports native
     locks (through java.nio.*), but even when using native locks I can
     still reproduce this error in my testing.

     The good news is: the lockless commits patch (which is not yet
     committed but I think close):

         http://issues.apache.org/jira/browse/LUCENE-701

     resolves this issue.  Lockless commits also makes readers entirely
     read only, so your read-only NFS mount for readers becomes
     possible.

   * "Stale NFS handle" IOException when searching.

     Lucene's readers provide "point in time" searching: once open,
     a reader searches the snapshot of the index as of the point it was
     open.

     Unfortunately, the implementation of this feature currently relies
     on the filesystem to provide access to files even after they are
     deleted.  NFS makes no such guarantee.

     This means on searching you have to catch this exception and then
     close & open a new searcher.

     I think it would make sense to change how Lucene implements point
     in time searching so we don't rely on filesystem semantics.  But
     this is a ways off.

I'm hopeful that with lockless commits, and then with the caveat of
closing/opening your searchers on hitting "Stale NFS handle" during
searching (until we can change how "point in time" searching is
implemented), that Lucene will work fine over NFS.

Anyway, in the meantime, one good workaround is to either use Solr:

     http://incubator.apache.org/solr/

directly, or, borrow its approach.  With Solr, a writer writes to the
index and periodically (at a known safe time) takes a snapshot, and
then readers only read from the current snapshot.

Mike

Peter A. Friend wrote:
> 
> On Nov 13, 2006, at 8:10 AM, Øyvind Stegard wrote:
> 
>> I've searched the list and have found many references to problems when
>> using Lucene over NFS. Mostly because of file-based locking, which
>> doesn't work all that well for many NFS installations. I'm under the
>> impression that the core locking logic between writers and/or readers
>> hasn't changed in a significant way between Lucene 1.4 and 2.0 (?). I
>> guess this means NFS is still problematic ?
> 
> Unfortunately it all depends on the reliability of the NFS drivers in 
> the OS, and the kind of filers you are using. If the environment isn't 
> too busy, NFS lockd *may* work on some systems, but it usually ends up 
> collapsing under load.
> 
>  From there you have to hand craft some C code to create lock files, and 
> what works again depends on your system. On some systems doing an 
> exclusive create will work (can only be expected to work on version 3 
> mounts), but then local caches will bite you, so you end up having to 
> disable the directory cache, assuming your system supports such an 
> option. That failing, creating locks as symlinks to unique temporary 
> files that don't exist will usually blow through the cache and work ok. 
> This of course doesn't rule out problems in the NFS implementation that 
> show up under heavy load, and allow more than one machine to think it 
> has the lock. You also have to include some code to sensibly expire 
> locks left from crashes.
> 
>> We are considering a model where a single node updates the search index
>> according to changes in the repository (only one physical index for the
>> entire cluster) while multiple other nodes can search the very same
>> index over NFS (read-only). But I guess there is a need for a single
>> lock-directory shared and writable between all nodes, and that this
>> makes NFS-usage difficult ?
> 
> The fact that only a single node will be doing writes greatly improves 
> the chances of this working. I don't recall whether readers ever check 
> for locks, it's best if that can be avoided. I know that it's safe to 
> write the new indexes since they aren't being referred to by the 
> segments file, but I'm not sure what sequence of operations are used 
> when re-writing the segments file. I think unlinking the old segments 
> file and using a rename to put the new one in place is probably the 
> safest bet.
> 
> Peter
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 17:43:55 2006
Return-Path: <java-user-return-24500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11770 invoked from network); 13 Nov 2006 17:43:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 17:43:54 -0000
Received: (qmail 8243 invoked by uid 500); 13 Nov 2006 17:43:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8201 invoked by uid 500); 13 Nov 2006 17:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8190 invoked by uid 99); 13 Nov 2006 17:43:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 09:43:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 09:43:43 -0800
Received: from beetext06 ([70.81.32.231]) by VL-MO-MR001.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with ESMTP id <0J8O00GY3JVK3ZF0@VL-MO-MR001.ip.videotron.ca> for
 java-user@lucene.apache.org; Mon, 13 Nov 2006 12:42:57 -0500 (EST)
Date: Mon, 13 Nov 2006 12:42:43 -0500
From: Jean-Francois Beaulac <jean-francois.beaulac@beetext.com>
Subject: RE: IndexReader.getTermFreqVectors() throws Read past EOF exception
In-reply-to: <AB3DDF3A-D034-43B8-9791-8DB5C4F9F2B8@gmail.com>
To: java-user@lucene.apache.org
Message-id: <0J8O00GY4JVL3ZF0@VL-MO-MR001.ip.videotron.ca>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-index: AccHPqMni255uWa+RTOpUOEDMjt9vwAA26aA
X-Virus-Checked: Checked by ClamAV on apache.org

If I run a search with one searcher I get the term vector correctly.=20

When I use the MultiSearcher, the Searcher at position 0 in the =
searchable arrays returns me the TermFreqVector correctly, but all
the subsequent searchers will produce the stacktrace.


-----Message d'origine-----
De=A0: Grant Ingersoll [mailto:grant.ingersoll@gmail.com]=20
Envoy=E9=A0: November 13, 2006 11:08 AM
=C0=A0: java-user@lucene.apache.org
Objet=A0: Re: IndexReader.getTermFreqVectors() throws Read past EOF =
exception

Can you provide more info on your setup?

Can you run a search against just one of the other subsearchers and =20
see if you get term vectors that way?  That is, simplify the process =20
by taking the MultiSearcher out of the equation to see if you get =20
valid results.

On Nov 12, 2006, at 3:50 PM, Jean-Francois Beaulac wrote:

> Hi,
>
>
>
> I make a search on several indexes using a MultiSearcher and I can =20
> only
> retrieve the TermFreqVectors from the IndexSearcher in the Searcher at
> position 0 in my searchable array.
>
>
>
> For example ():
>
> hits =3D multi.search(luceneQuery);
>
> for (int k =3D 0; k < hits.length(); k++) {
>
>
> ((IndexSearcher)multi.getSearchables()[multi.subSearcher(hits.id=20
> (k))]).getIn
> dexReader().getTermFreqVectors(hits.id(k));
>
> }
>
>
>
> Will work correctly if multi.subSearcher() returns 0, but will fail =20
> if > 0.
>
>
>
> I'm really wondering why I got this exception since my search =20
> results are
> good.
>
>
>
>
>
> Thank you
>
>
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 20:21:45 2006
Return-Path: <java-user-return-24501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72112 invoked from network); 13 Nov 2006 20:21:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 20:21:44 -0000
Received: (qmail 28674 invoked by uid 500); 13 Nov 2006 20:21:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28364 invoked by uid 500); 13 Nov 2006 20:21:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28353 invoked by uid 99); 13 Nov 2006 20:21:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:21:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:21:32 -0800
Received: from beetext06 ([70.81.32.231]) by VL-MO-MR001.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with ESMTP id <0J8O00E2TR7BUH60@VL-MO-MR001.ip.videotron.ca> for
 java-user@lucene.apache.org; Mon, 13 Nov 2006 15:21:12 -0500 (EST)
Date: Mon, 13 Nov 2006 15:20:58 -0500
From: Jean-Francois Beaulac <jean-francois.beaulac@beetext.com>
Subject: RE: IndexReader.getTermFreqVectors() throws Read past EOF exception
In-reply-to: <0J8O00GY4JVL3ZF0@VL-MO-MR001.ip.videotron.ca>
To: java-user@lucene.apache.org
Message-id: <0J8O00E2UR7BUH60@VL-MO-MR001.ip.videotron.ca>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-index: AccHPqMni255uWa+RTOpUOEDMjt9vwAA26aAAAYM//A=
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Here is more information on the problem

My code is pretty straightforward:
- I create 1 IndexSearcher per index using the constructor : public =
IndexSearcher(Directory directory)
- Add the IndexSearcher to an array (IndexSearcher[])
- Instanciate a MultiSearcher using the array: MultiSearcher multi =3D =
new MultiSearcher(searcherArray);
- Then I call Hits searchHits =3D multi.search(luceneQuery);
- After that I loop on my hits, and use:

((IndexSearcher)multi.getSearchables()[multi.subSearcher(searchHits.id(k)=
)]).
getIndexReader().getTermFreqVectors(searchHits.id(k))

to get each TermFreqVectors. (variable k is the index of my loop on the =
hits).



I added some debug to the refill() method in the class =
org.apache.lucene.store.BufferedIndexInput

    private void refill() throws IOException {
        long start =3D bufferStart + bufferPosition;
        System.out.println("LUCENE--> start=3D" + bufferStart +" + " + =
bufferPosition);
        long end =3D start + BUFFER_SIZE;
        System.out.println("LUCENE--> end=3D" + start +" + " + =
BUFFER_SIZE);
       =20
        if (end > length())				  // don't read past EOF
            end =3D length();
        System.out.println("LUCENE--> length()=3D" + length());       =20
        bufferLength =3D (int)(end - start);
        System.out.println("LUCENE--> bufferLength=3D" + end +" - " + =
start);
       =20
        if (bufferLength <=3D 0)
            throw new IOException("read past EOF");
       =20
        if (buffer =3D=3D null)
            buffer =3D new byte[BUFFER_SIZE];		  // allocate buffer =
lazily
        readInternal(buffer, 0, bufferLength);
       =20
        bufferStart =3D start;
        bufferPosition =3D 0;
    }

Here's the resulting output:


LUCENE--> start=3D668 + 0
LUCENE--> end=3D668 + 1024
LUCENE--> length()=3D436
LUCENE--> bufferLength=3D436 - 668
[Exception thrown here]

LUCENE--> start=3D724 + 0
LUCENE--> end=3D724 + 1024
LUCENE--> length()=3D436
LUCENE--> bufferLength=3D436 - 724
[Exception thrown here]

LUCENE--> start=3D732 + 0
LUCENE--> end=3D732 + 1024
LUCENE--> length()=3D436
LUCENE--> bufferLength=3D436 - 732
[Exception thrown here]


I don't know if this might help, but each time an exception is thrown =
the length of the FileEntry is always 436

I have also noticed that the exception is thrown on the first call to =
refill().


Thank you

-----Message d'origine-----
De=A0: Jean-Francois Beaulac [mailto:jean-francois.beaulac@beetext.com]=20
Envoy=E9=A0: November 13, 2006 12:43 PM
=C0=A0: java-user@lucene.apache.org
Objet=A0: RE: IndexReader.getTermFreqVectors() throws Read past EOF =
exception

If I run a search with one searcher I get the term vector correctly.=20

When I use the MultiSearcher, the Searcher at position 0 in the =
searchable arrays returns me the TermFreqVector correctly, but all
the subsequent searchers will produce the stacktrace.


-----Message d'origine-----
De=A0: Grant Ingersoll [mailto:grant.ingersoll@gmail.com]=20
Envoy=E9=A0: November 13, 2006 11:08 AM
=C0=A0: java-user@lucene.apache.org
Objet=A0: Re: IndexReader.getTermFreqVectors() throws Read past EOF =
exception

Can you provide more info on your setup?

Can you run a search against just one of the other subsearchers and =20
see if you get term vectors that way?  That is, simplify the process =20
by taking the MultiSearcher out of the equation to see if you get =20
valid results.

On Nov 12, 2006, at 3:50 PM, Jean-Francois Beaulac wrote:

> Hi,
>
>
>
> I make a search on several indexes using a MultiSearcher and I can =20
> only
> retrieve the TermFreqVectors from the IndexSearcher in the Searcher at
> position 0 in my searchable array.
>
>
>
> For example ():
>
> hits =3D multi.search(luceneQuery);
>
> for (int k =3D 0; k < hits.length(); k++) {
>
>
> ((IndexSearcher)multi.getSearchables()[multi.subSearcher(hits.id=20
> (k))]).getIn
> dexReader().getTermFreqVectors(hits.id(k));
>
> }
>
>
>
> Will work correctly if multi.subSearcher() returns 0, but will fail =20
> if > 0.
>
>
>
> I'm really wondering why I got this exception since my search =20
> results are
> good.
>
>
>
>
>
> Thank you
>
>
>

------------------------------------------------------
Grant Ingersoll
http://www.grantingersoll.com/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 20:30:24 2006
Return-Path: <java-user-return-24502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74864 invoked from network); 13 Nov 2006 20:30:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 20:30:23 -0000
Received: (qmail 48852 invoked by uid 500); 13 Nov 2006 20:30:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48807 invoked by uid 500); 13 Nov 2006 20:30:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48796 invoked by uid 99); 13 Nov 2006 20:30:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:30:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:30:13 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A0E0F5B76E; Mon, 13 Nov 2006 12:29:52 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9C8577F403
	for <java-user@lucene.apache.org>; Mon, 13 Nov 2006 12:29:52 -0800 (PST)
Date: Mon, 13 Nov 2006 12:29:52 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: IndexReader.getTermFreqVectors() throws Read past EOF exception
In-Reply-To: <0J8O00E2UR7BUH60@VL-MO-MR001.ip.videotron.ca>
Message-ID: <Pine.LNX.4.58.0611131227210.19767@hal.rescomp.berkeley.edu>
References: <0J8O00E2UR7BUH60@VL-MO-MR001.ip.videotron.ca>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: - Then I call Hits searchHits = multi.search(luceneQuery);
: - After that I loop on my hits, and use:
:
: ((IndexSearcher)multi.getSearchables()[multi.subSearcher(searchHits.id(k))]).
: getIndexReader().getTermFreqVectors(searchHits.id(k))

I don't know a lot about multi-searcher, but that doesn't look right ...
you are passing the docid from the multisearcher directly to a subsearcher
... i think you should be using multi.subDoc the same way you use
multi.subSearcher...


  ((IndexSearcher)multi.getSearchables()
   [multi.subSearcher(searchHits.id(k))]).getIndexReader().getTermFreqVectors
    (multi.subDoc(searchHits.id(k)));



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 20:49:59 2006
Return-Path: <java-user-return-24503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81392 invoked from network); 13 Nov 2006 20:49:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 20:49:58 -0000
Received: (qmail 81559 invoked by uid 500); 13 Nov 2006 20:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81533 invoked by uid 500); 13 Nov 2006 20:50:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81522 invoked by uid 99); 13 Nov 2006 20:50:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:50:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [24.201.245.36] (HELO relais.videotron.ca) (24.201.245.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 12:49:48 -0800
Received: from beetext06 ([70.81.32.231]) by VL-MH-MR001.ip.videotron.ca
 (Sun Java System Messaging Server 6.2-2.05 (built Apr 28 2005))
 with ESMTP id <0J8O00CCFSIFNAY0@VL-MH-MR001.ip.videotron.ca> for
 java-user@lucene.apache.org; Mon, 13 Nov 2006 15:49:27 -0500 (EST)
Date: Mon, 13 Nov 2006 15:49:13 -0500
From: Jean-Francois Beaulac <jean-francois.beaulac@beetext.com>
Subject: RE: IndexReader.getTermFreqVectors() throws Read past EOF exception
In-reply-to: <Pine.LNX.4.58.0611131227210.19767@hal.rescomp.berkeley.edu>
To: java-user@lucene.apache.org
Message-id: <0J8O00CCGSIFNAY0@VL-MH-MR001.ip.videotron.ca>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
Thread-index: AccHYz/8HxoBjBjwQlekMbdLzE+DyQAAXY0g
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you very much, it works now!


-----Message d'origine-----
De=A0: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Envoy=E9=A0: November 13, 2006 3:30 PM
=C0=A0: java-user@lucene.apache.org
Objet=A0: RE: IndexReader.getTermFreqVectors() throws Read past EOF =
exception


: - Then I call Hits searchHits =3D multi.search(luceneQuery);
: - After that I loop on my hits, and use:
:
: =
((IndexSearcher)multi.getSearchables()[multi.subSearcher(searchHits.id(k)=
)]).
: getIndexReader().getTermFreqVectors(searchHits.id(k))

I don't know a lot about multi-searcher, but that doesn't look right ...
you are passing the docid from the multisearcher directly to a =
subsearcher
... i think you should be using multi.subDoc the same way you use
multi.subSearcher...


  ((IndexSearcher)multi.getSearchables()
   =
[multi.subSearcher(searchHits.id(k))]).getIndexReader().getTermFreqVector=
s
    (multi.subDoc(searchHits.id(k)));



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 13 21:51:41 2006
Return-Path: <java-user-return-24504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2481 invoked from network); 13 Nov 2006 21:51:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2006 21:51:40 -0000
Received: (qmail 99573 invoked by uid 500); 13 Nov 2006 21:51:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99549 invoked by uid 500); 13 Nov 2006 21:51:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99531 invoked by uid 99); 13 Nov 2006 21:51:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 13:51:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of coriander@gmail.com designates 66.249.82.231 as permitted sender)
Received: from [66.249.82.231] (HELO wx-out-0506.google.com) (66.249.82.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 13 Nov 2006 13:51:30 -0800
Received: by wx-out-0506.google.com with SMTP id h26so1245375wxd
        for <java-user@lucene.apache.org>; Mon, 13 Nov 2006 13:51:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=hHB9Vs9q9tubVzbOLMNeOORfR31QkfXMknMAdZ2eD0FCSDP/T/EFge+1QRRgRFvxVStHk1JwsUAZ2AU0mv9tWmwY+HQhbE7tacfrjJqE1+NeCkYZZw59ovgAk5HhByLgkZbHj5z1khdt2RvtzIsQvv8GZoGEmrESGIFO8bay2Xw=
Received: by 10.70.90.17 with SMTP id n17mr121187wxb.1163454669348;
        Mon, 13 Nov 2006 13:51:09 -0800 (PST)
Received: by 10.70.27.4 with HTTP; Mon, 13 Nov 2006 13:51:09 -0800 (PST)
Message-ID: <8960abb20611131351g20f78052odae6ba9f0e93b8e0@mail.gmail.com>
Date: Mon, 13 Nov 2006 16:51:09 -0500
From: "Sarah Hunter" <coriander@gmail.com>
To: java-user@lucene.apache.org
Subject: StandardAnalyzer Problem with Apostrophes
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there,
Any ideas you have about the following would be greatly appreciated.

I'd like apostropes to break up a word into two for indexing - ie, the
french l'observatoire would be indexed as two separate tokens, l
observatoire. My understanding from reading documentation and list
archives is that StandardAnalyzer should do this. However, it is not
working that way for me, and l'observatoire is indexing as one word.
Interstingly, l`observatoire (ie, with the other, less common
apostrophe) is indexing properly, as l observatoire .

Here is the test I've written and the output I'm getting.

TEST


import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.Token;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import java.io.StringReader;
import java.io.IOException;

public class LuceneTokenizingTest {

   static Analyzer analyzer;

   public static void main(String[] args) throws IOException {
       analyzer =  new StandardAnalyzer(new String[] {});

       testTokenizeUnusualApostrophe();
       testTokenizeUsualApostrophe();
   }

       public static void testTokenizeUnusualApostrophe() {
               System.out.println( "Testing how l`observatoire is tokenized." );
               System.out.println( "Expecting: [l] [observatoire] ");
               System.out.println( "Getting: " +
analyze("l`observatoire") + "\n\n");
       }

       public static void testTokenizeUsualApostrophe() {
               System.out.println( "Testing how l'observatoire is tokenized." );
               System.out.println( "Expecting: [l] [observatoire] ");
               System.out.println( "Getting: " + analyze("l'observatoire") );
       }

   private static String analyze(String text) {
       String returnString="";
       try{
               TokenStream stream = analyzer.tokenStream("contents", new
StringReader(text));
               while (true) {
                   Token token = stream.next();
                   if (token == null) break;
                       returnString = returnString + "[" +
token.termText() + "] ";
                   }
       }catch(IOException e){
               System.out.println("Exception: " + e.toString());
       }
       return returnString;
   }
}



OUTPUT

Testing how l`observatoire is tokenized.
Expecting: [l] [observatoire]
Getting: [l] [observatoire]


Testing how l'observatoire is tokenized.
Expecting: [l] [observatoire]
Getting: [l'observatoire]




Thanks so much for your help!

Sarah

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 09:08:09 2006
Return-Path: <java-user-return-24505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91151 invoked from network); 14 Nov 2006 09:08:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 09:08:08 -0000
Received: (qmail 32073 invoked by uid 500); 14 Nov 2006 09:08:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31096 invoked by uid 500); 14 Nov 2006 09:08:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31085 invoked by uid 99); 14 Nov 2006 09:08:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:08:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [129.240.10.15] (HELO pat.uio.no) (129.240.10.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:07:54 -0800
Received: from mail-mx2.uio.no ([129.240.10.30])
	by pat.uio.no with esmtp (Exim 4.43)
	id 1GjuGS-0007eE-PS
	for java-user@lucene.apache.org; Tue, 14 Nov 2006 10:07:32 +0100
Received: from f3bdhcp15.uio.no ([129.240.92.144])
	by mail-mx2.uio.no with esmtpsa (SSLv3:RC4-MD5:128)
	(Exim 4.43)
	id 1GjuGK-0007y3-B5
	for java-user@lucene.apache.org; Tue, 14 Nov 2006 10:07:24 +0100
Subject: Re: NFS and Lucene 2.0 status - still troublesome ?
From: =?ISO-8859-1?Q?=D8yvind?= Stegard <oyvind.stegard@usit.uio.no>
To: java-user@lucene.apache.org
In-Reply-To: <4558A52A.2000300@mikemccandless.com>
References: <1163434254.5381.29.camel@blackelf>
	 <EEE84A41-E09F-413E-88AB-CC8D49FBDADA@corp.earthlink.net>
	 <4558A52A.2000300@mikemccandless.com>
Content-Type: text/plain; charset=utf-8
Organization: USIT, University of Oslo
Date: Tue, 14 Nov 2006 10:07:24 +0100
Message-Id: <1163495244.5415.9.camel@blackelf>
Mime-Version: 1.0
X-Mailer: Evolution 2.8.1 
Content-Transfer-Encoding: quoted-printable
X-UiO-Spam-info: not spam, SpamAssassin (score=-5.359, required 12,
	autolearn=disabled, AWL -0.36, UIO_MAIL_IS_INTERNAL -5.00)
X-Virus-Checked: Checked by ClamAV on apache.org

man, 13,.11.2006 kl. 12.02 -0500, skrev Michael McCandless:
> The quick answer is: NFS is still problematic in Lucene 2.0.
>=20
> The longer answer is: we'd like to fix this, but it's not fully fixed
> yet.  You can see here:
>=20
>      http://issues.apache.org/jira/browse/LUCENE-673
>=20
> for gory details.
<snip>

Thanks for the detailed and helpful replies. We will be doing some more
investigating into the issues and consider our options. We are
definitely looking at Solr, as well.

Does anyone have any successful experiences using Lucene over network
file systems other than NFS ? Any recommendations or tips ?

Regards,
=C3=98yvind Stegard
USIT, University of Oslo
--=20
< =C3=98yvind Stegard < oyvind stegard at usit uio no >
 < SAUS/USIT, UiO


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 09:09:44 2006
Return-Path: <java-user-return-24506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91630 invoked from network); 14 Nov 2006 09:09:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 09:09:44 -0000
Received: (qmail 35070 invoked by uid 500); 14 Nov 2006 09:09:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35027 invoked by uid 500); 14 Nov 2006 09:09:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35007 invoked by uid 99); 14 Nov 2006 09:09:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 01:09:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [195.245.231.67] (HELO mail82.messagelabs.com) (195.245.231.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Nov 2006 01:09:32 -0800
X-VirusChecked: Checked
X-Env-Sender: hdoeleman@amadeus.com
X-Msg-Ref: server-2.tower-82.messagelabs.com!1163495348!48403859!1
X-StarScan-Version: 5.5.10.7; banners=-,-,-
X-Originating-IP: [193.23.186.180]
Received: (qmail 2029 invoked from network); 14 Nov 2006 09:09:08 -0000
Received: from mucsmtp2.amadeus.net (HELO mucsmtp2.amadeus.net) (193.23.186.180)
  by server-2.tower-82.messagelabs.com with RC4-SHA encrypted SMTP; 14 Nov 2006 09:09:08 -0000
In-Reply-To: <20061110164601.78005.qmail@web26008.mail.ukl.yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: Highlighting span for Phrase Queries
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.5  CCH1 March 07, 2006
Message-ID: <OF6EC3D13E.385AB660-ONC1257226.0031C499-C1257226.00324313@amadeus.com>
From: Heikki Doeleman <hdoeleman@amadeus.com>
Date: Tue, 14 Nov 2006 10:08:59 +0100
X-MIMETrack: S/MIME Sign by Notes Client on Heikki Doeleman/NCE/AMADEUS(Release 6.5.5
  CCH1|March 07, 2006) at 14/11/2006 10:08:59,
	Serialize by Notes Client on Heikki Doeleman/NCE/AMADEUS(Release 6.5.5
  CCH1|March 07, 2006) at 14/11/2006 10:08:59,
	Serialize complete at 14/11/2006 10:08:59,
	S/MIME Sign failed at 14/11/2006 10:08:59: The cryptographic key was not
 found,
	Serialize by Router on MUCSMTP2/MUC/AMAEXTMAIL(Release 6.5.5|November 30, 2005) at
 14/11/2006 10:09:08,
	Serialize complete at 14/11/2006 10:09:08
Content-Type: multipart/alternative; boundary="=_alternative 0032430DC1257226_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0032430DC1257226_=
Content-Type: text/plain; charset="US-ASCII"

Hi Mark,

thanks for pointing out these, however neither seems to do exactly what I 
want, i.e. highlight a phrase when a phrase search was done.

All of these highlighting solutions seem concerned with selecting "the 
best bits" of a document, along with highlighting some parts thereof. To 
me this seems like a mix-up of different functionalities; I would expect a 
highlighter to do just the highlighting, and nothing else (not that this 
has anything to do with my phrase highlighting problem -- just wondering).



Heikki DOELEMAN





mark harwood <markharw00d@yahoo.co.uk> 
To
java-user@lucene.apache.org
cc

bcc

Subject
Re: Highlighting span for Phrase Queries





mark harwood <markharw00d@yahoo.co.uk> 
Please respond to java-user@lucene.apache.org
10/11/2006 17:46


There have been a couple of alternative Highlighter contributions 
recently, I can't recall which claim to support "proper" highlighting of 
phrases but you might want to give them a try.


http://issues.apache.org/jira/browse/LUCENE-644

http://issues.apache.org/jira/browse/LUCENE-663


Ultimately "proper" highlighting is very hard to achieve if you both want 
to select a summary of the doc's "best bits" and also support queries 
which can be arbitrarily complex nestings of boolean queries which can 
also contain Spans/phrases covering large sections of the document. Some 
compromises are inevitable under these extreme circumstances and I don't 
think there is one implementation that is capable of catering for this.

Let us know how you get on.

Cheers
Mark


----- Original Message ----
From: Heikki Doeleman <hdoeleman@amadeus.com>
To: java-user@lucene.apache.org
Sent: Friday, 10 November, 2006 2:45:23 PM
Subject: Highlighting span for Phrase Queries

Hi there,

I have a question on using the Highlighter.

I'm using Lucene in a web application that allows you to search the 
catalogue of a library. The idea is to highlight, in the results, the 
terms entered by the user. I'm using a Highlighter with a NullFragmenter 
because I want the whole field highlighted (for each field the user 
searched in).

The catalogue is indexed with a StandardAnalyzer on each field. 
Highlighting a field from a result I do like this  :

            QueryScorer scorer = new QueryScorer ( theQuery, 
searcher.getIndexReader ( ) , fieldName ) ;
            Highlighter highlighter = new Highlighter ( new 
SimpleHTMLFormatter ( "<span style=\"border-style:solid;\">" , "</span>" ) 

, scorer ) ;
            highlighter. setTextFragmenter ( new NullFragmenter ( ) ) ;

        highlightedFieldContent = highlighter. getBestFragment ( analyzer 
, fieldName , originalFieldContent ) ; 

This works all very well, except for phrase queries. The spans of the 
phrase queries as such are not highlighted and instead, each of the terms 
that is in the phrase query, gets highlighted. I guess this is because the 

indexed fields have been tokenized, and what-not, by the StandardAnalyzer.

Does anyone have a good example about how to implement a highlighting 
function that works well with phrase queries, too ?

thank you very much.

Heikki DOELEMAN




 
___________________________________________________________ 
Now you can scan emails quickly with a reading pane. Get the new Yahoo! 
Mail. http://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--=_alternative 0032430DC1257226_=--

From java-user-return-24507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 09:47:36 2006
Return-Path: <java-user-return-24507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3746 invoked from network); 14 Nov 2006 09:47:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 09:47:34 -0000
Received: (qmail 1106 invoked by uid 500); 14 Nov 2006 09:47:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1085 invoked by uid 500); 14 Nov 2006 09:47:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 97158 invoked by uid 99); 14 Nov 2006 07:19:43 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
X-Server-Uuid: 8E43C66C-9DC0-4EF6-8749-D8C04BB61E49
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Specific string query search
Sensitivity: 
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OF8A921D03.30EE9163-ON65257226.002679C4-65257226.00282D56@hewitt.com>
From: "Gaurav Kalra" <gaurav.kalra@hewitt.com>
Date: Tue, 14 Nov 2006 12:48:52 +0530
X-HANotesOU: Gurgaon
X-MIMETrack: Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.5FP1 HF52|June 29, 2006) at 11/14/2006 01:18:57
 AM, Serialize complete at 11/14/2006 01:18:57 AM
X-WSS-ID: 6947B26B3DW19809103-01-01
Content-Type: multipart/alternative;
 boundary="=_alternative 00282D5465257226_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 00282D5465257226_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi all, 

I have a specific string query like "Jakarta:" How do i get that? I am 
using standardAnalyzer and it seems as if it is stripping ":" and it is 
simply searching for "Jakarta".
I have used WhiteSpaceAnalyzer also and its working fine for ":" but I 
think it has some other limitations. The limitations of WhiteSpaceAnalyzer 
which I have noticed are as follows:
1. It needs the search criteria in the proper case i.e for searching 
"Jakarta" I cant give "jakarta" as my search criteria.
2. WhiteSpaceAnalyzer is not supporting FIELD:TEXT kind of search.
e.g ISSUE_TITLE:test
where ISSUE_TITLE is the field in which test is to be searched. But 
standardAnalyzer supports this.

May be the limitations I am seeing is because of my code.

Can you please help me out as to how I can do a search like "Jakarta:". I 
would appreciate if could please send me the code snippet doing this kind 
of search.


Thanks & Regards
Gaurav Kalra

 
The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient 
is strictly prohibited.



--=_alternative 00282D5465257226_=--


From java-user-return-24508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 10:02:05 2006
Return-Path: <java-user-return-24508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8289 invoked from network); 14 Nov 2006 10:02:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 10:02:03 -0000
Received: (qmail 34881 invoked by uid 500); 14 Nov 2006 10:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33943 invoked by uid 500); 14 Nov 2006 10:02:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33924 invoked by uid 99); 14 Nov 2006 10:02:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 02:02:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 02:01:53 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5411930EFC17; Tue, 14 Nov 2006 05:01:33 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 7070830EFC16
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 05:01:31 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <OF6EC3D13E.385AB660-ONC1257226.0031C499-C1257226.00324313@amadeus.com>
References: <OF6EC3D13E.385AB660-ONC1257226.0031C499-C1257226.00324313@amadeus.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E3C8E213-3EE0-40F0-9E3C-BE126E800C34@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Highlighting span for Phrase Queries
Date: Tue, 14 Nov 2006 05:01:31 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Nov 14, 2006, at 4:08 AM, Heikki Doeleman wrote:
> thanks for pointing out these, however neither seems to do exactly  
> what I
> want, i.e. highlight a phrase when a phrase search was done.

A technique I've employed for a client is to convert a general Query  
object into a SpanQuery, and created custom code to walk the spans,  
via SpanQuery.getSpans(), to put markers around them (such as <span  
class="highlight">....</span>).

At this point the code is not public domain, though it is not  
particularly sophisticated either.  There may be some examples that  
have floated past this list in the past of SpanQuery highlighting?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 10:18:42 2006
Return-Path: <java-user-return-24509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14315 invoked from network); 14 Nov 2006 10:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 10:18:41 -0000
Received: (qmail 58573 invoked by uid 500); 14 Nov 2006 10:18:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58544 invoked by uid 500); 14 Nov 2006 10:18:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58527 invoked by uid 99); 14 Nov 2006 10:18:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 02:18:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of supriya.shyamal@artnology.com designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 02:18:25 -0800
Received: (qmail 302 invoked from network); 14 Nov 2006 10:18:02 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]383542@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 14 Nov 2006 10:18:02 -0000
Message-ID: <455997E7.4010601@artnology.com>
Date: Tue, 14 Nov 2006 11:18:15 +0100
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.7 (X11/20060911)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NFS and Lucene 2.0 status - still troublesome ?
References: <1163434254.5381.29.camel@blackelf>	 <EEE84A41-E09F-413E-88AB-CC8D49FBDADA@corp.earthlink.net>	 <4558A52A.2000300@mikemccandless.com> <1163495244.5415.9.camel@blackelf>
In-Reply-To: <1163495244.5415.9.camel@blackelf>
X-Enigmail-Version: 0.94.1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Like Mike already said and I had also experienced the same problem of
sharing the index accross the NFS, but now I am testing the Lucene with
lockless commit patch and till now I did not get any problem, also I
liked. But I am surely in afavour of having this lockless commit
approach for the future release of Lucene.

Ãyvind Stegard wrote:
> man, 13,.11.2006 kl. 12.02 -0500, skrev Michael McCandless:
>> The quick answer is: NFS is still problematic in Lucene 2.0.
>>
>> The longer answer is: we'd like to fix this, but it's not fully fixed
>> yet.  You can see here:
>>
>>      http://issues.apache.org/jira/browse/LUCENE-673
>>
>> for gory details.
> <snip>
> 
> Thanks for the detailed and helpful replies. We will be doing some more
> investigating into the issues and consider our options. We are
> definitely looking at Solr, as well.
> 
> Does anyone have any successful experiences using Lucene over network
> file systems other than NFS ? Any recommendations or tips ?
> 
> Regards,
> Ãyvind Stegard
> USIT, University of Oslo


- --
Mit freundlichen GrÃ¼Ãen / Regards

Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   SoftwarelÃ¶sung fÃ¼r die Verwaltung der Sammlung zeitgenÃ¶ssischer
   Kunstwerke zur kulturellen ReprÃ¤sentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site fÃ¼r Springer: www.springeronline.com
 * E-Detailing-Portal fÃ¼r Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform fÃ¼r Biogen: www.ms-life.de
 * eCRM-System fÃ¼r GrÃ¼nenthal: www.gruenenthal.com

___________________________________________________________________________
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (GNU/Linux)
Comment: Using GnuPG with SUSE - http://enigmail.mozdev.org

iD8DBQFFWZfnf/9ZhxH6/bkRAnS0AJ49bGWTXmReup9GsDw813HsagBbEACcDjkl
bTUPeTFehprJ0xysVNsB4YU=
=CmtD
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 13:28:51 2006
Return-Path: <java-user-return-24510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75421 invoked from network); 14 Nov 2006 13:28:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 13:28:51 -0000
Received: (qmail 3349 invoked by uid 500); 14 Nov 2006 13:28:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3317 invoked by uid 500); 14 Nov 2006 13:28:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3296 invoked by uid 99); 14 Nov 2006 13:28:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 05:28:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 05:28:39 -0800
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1GjyKl-00064N-Kg
	for java-user@lucene.apache.org; Tue, 14 Nov 2006 14:28:15 +0100
Message-ID: <4559C46C.1070103@tejnora.cz>
Date: Tue, 14 Nov 2006 14:28:12 +0100
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.8 (X11/20061112)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StandardAnalyzer Problem with Apostrophes
References: <8960abb20611131351g20f78052odae6ba9f0e93b8e0@mail.gmail.com>
In-Reply-To: <8960abb20611131351g20f78052odae6ba9f0e93b8e0@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org

Apostrophe is recognized as a part of word - Standard analyzer is mostly 
English oriented.
The way is to swap apostrophes - "normal" with unusual.

StandardAnalyzer.java line 40-44

APOSTROPHE:
      token = jj_consume_token(APOSTROPHE);



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 13:29:02 2006
Return-Path: <java-user-return-24511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75471 invoked from network); 14 Nov 2006 13:29:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 13:29:01 -0000
Received: (qmail 4775 invoked by uid 500); 14 Nov 2006 13:29:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4752 invoked by uid 500); 14 Nov 2006 13:29:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4741 invoked by uid 99); 14 Nov 2006 13:29:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 05:29:04 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 05:28:51 -0800
Received: by nf-out-0910.google.com with SMTP id n28so268557nfc
        for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 05:28:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=I3qhZbjFaaHuWLWLLdM9EzFLjxAYfFMpRo5bmYCa1EosGP8S/6h0rqQUGaltnG+KkNIneSGDTJrZcGCMBHbJ44b1W87L1xubLo4WvxynW/XEasNgB4Yo60c4tOTAirJrfuAnchvWZmPCAe8X3Rk156nSUXu3zZ1Gk01KkB47me0=
Received: by 10.82.129.5 with SMTP id b5mr116716bud.1163510909433;
        Tue, 14 Nov 2006 05:28:29 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Tue, 14 Nov 2006 05:28:29 -0800 (PST)
Message-ID: <359a92830611140528ma98f01drd1b44e6f7aa59e18@mail.gmail.com>
Date: Tue, 14 Nov 2006 08:28:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Specific string query search
In-Reply-To: <OF8A921D03.30EE9163-ON65257226.002679C4-65257226.00282D56@hewitt.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38695_29261109.1163510909388"
References: <OF8A921D03.30EE9163-ON65257226.002679C4-65257226.00282D56@hewitt.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_38695_29261109.1163510909388
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, if none of the regular analyzers meet your needs, you can always roll
your own. There is an example of a SynonymAnanlyzer in Lucene In Action that
you can use as a model. It's not very difficult (although a bit arcane).

You're right, WhitespaceAnalyzer doesn't respect case. But it should work
for the FIELD:TEXT kind of searches. When you say it doesn't work, what
exactly are you seeing? Have you used luke to examine your index? You can
use Luke to see how the WhitespaceAnalyzer rewrites your query, that'll tell
you a lot.

You can always lowercase your input stream yourself both at index time and
at search time....

But I have to ask: What is the value of indexing and searching on things
like colons? Would your application be better served by just letting the
analyzers do their work? Then SimpleAnalyzer or StopAnalyzer might be all
you need (since they lowercase).

You also might investigate UN_TOKENIZED storage in your index, although you
then have to take care when constructing your query.

Best
Erick

On 11/14/06, Gaurav Kalra <gaurav.kalra@hewitt.com> wrote:
>
> Hi all,
>
> I have a specific string query like "Jakarta:" How do i get that? I am
> using standardAnalyzer and it seems as if it is stripping ":" and it is
> simply searching for "Jakarta".
> I have used WhiteSpaceAnalyzer also and its working fine for ":" but I
> think it has some other limitations. The limitations of WhiteSpaceAnalyzer
> which I have noticed are as follows:
> 1. It needs the search criteria in the proper case i.e for searching
> "Jakarta" I cant give "jakarta" as my search criteria.
> 2. WhiteSpaceAnalyzer is not supporting FIELD:TEXT kind of search.
> e.g ISSUE_TITLE:test
> where ISSUE_TITLE is the field in which test is to be searched. But
> standardAnalyzer supports this.
>
> May be the limitations I am seeing is because of my code.
>
> Can you please help me out as to how I can do a search like "Jakarta:". I
> would appreciate if could please send me the code snippet doing this kind
> of search.
>
>
> Thanks & Regards
> Gaurav Kalra
>
>
> The information contained in this e-mail and any accompanying documents
> may contain information that is confidential or otherwise protected from
> disclosure. If you are not the intended recipient of this message, or if
> this message has been addressed to you in error, please immediately alert
> the sender by reply e-mail and then delete this message, including any
> attachments. Any dissemination, distribution or other use of the contents of
> this message by anyone other than the intended recipient
> is strictly prohibited.
>
>
>
>

------=_Part_38695_29261109.1163510909388--

From java-user-return-24512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 13:32:59 2006
Return-Path: <java-user-return-24512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76312 invoked from network); 14 Nov 2006 13:32:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 13:32:59 -0000
Received: (qmail 10446 invoked by uid 500); 14 Nov 2006 13:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10163 invoked by uid 500); 14 Nov 2006 13:33:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10152 invoked by uid 99); 14 Nov 2006 13:33:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 05:33:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 05:32:47 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kAEDWNiG015540
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 14:32:23 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id AEF178BD27
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 14:32:23 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 04381-03 for <java-user@lucene.apache.org>;
 Tue, 14 Nov 2006 14:32:22 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 9A0CF8BCF7
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 14:32:22 +0100 (CET)
Message-ID: <4559C566.9000606@uni-hd.de>
Date: Tue, 14 Nov 2006 14:32:22 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Best approach for exact Prefix Field Query 
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

hi,

i would like to provide a exact "PrefixField Search", i.e. a search for
exactly the first words in a field.
I think I can't use a PrefixQuery because it would find also substrings
inside the field, e.g.
action* would find titles like "Action and knowledge" but also (that's
what i don't want it to find)
"Lucene in Action"

As a regex it would be sth. like /^Action and.*/

Now the question for me is how to implement this functionality, I see to
ways:

1) Some kind of TermEnum over all Docs (or the prefixquery results?) and
string comparison
2) Using the regex contribution
3) a super -fast lucene function I have overseen :)

with 2) I am worrying about performance, anybody have experiences with
regex-queries?

.. but same for 1) anybody already impolemented this already and could
give some code samples / hints ?

tia,


martin





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 13:38:25 2006
Return-Path: <java-user-return-24513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77598 invoked from network); 14 Nov 2006 13:38:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 13:38:25 -0000
Received: (qmail 27087 invoked by uid 500); 14 Nov 2006 13:38:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27059 invoked by uid 500); 14 Nov 2006 13:38:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27048 invoked by uid 99); 14 Nov 2006 13:38:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 05:38:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 05:38:14 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EF15130EFC17; Tue, 14 Nov 2006 08:37:53 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id A254830EFC16
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 08:37:51 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4559C566.9000606@uni-hd.de>
References: <4559C566.9000606@uni-hd.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DA22440E-F40F-4923-A847-D5F379C31989@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Best approach for exact Prefix Field Query 
Date: Tue, 14 Nov 2006 08:37:52 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1

Martin,

SpanFirstQuery is what you're after.

	Erik


On Nov 14, 2006, at 8:32 AM, Martin Braun wrote:

> hi,
>
> i would like to provide a exact "PrefixField Search", i.e. a search  
> for
> exactly the first words in a field.
> I think I can't use a PrefixQuery because it would find also  
> substrings
> inside the field, e.g.
> action* would find titles like "Action and knowledge" but also (that's
> what i don't want it to find)
> "Lucene in Action"
>
> As a regex it would be sth. like /^Action and.*/
>
> Now the question for me is how to implement this functionality, I  
> see to
> ways:
>
> 1) Some kind of TermEnum over all Docs (or the prefixquery  
> results?) and
> string comparison
> 2) Using the regex contribution
> 3) a super -fast lucene function I have overseen :)
>
> with 2) I am worrying about performance, anybody have experiences with
> regex-queries?
>
> .. but same for 1) anybody already impolemented this already and could
> give some code samples / hints ?
>
> tia,
>
>
> martin
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 13:51:32 2006
Return-Path: <java-user-return-24514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82405 invoked from network); 14 Nov 2006 13:51:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 13:51:29 -0000
Received: (qmail 51722 invoked by uid 500); 14 Nov 2006 13:51:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50735 invoked by uid 500); 14 Nov 2006 13:51:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50724 invoked by uid 99); 14 Nov 2006 13:51:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 05:51:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 05:51:16 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1329076ugc
        for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 05:50:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=peMvH9p7fq+1jUdnLc8gr4iyB+rSiQzKEOTLOSgzVQvF23zsz5396UYsXYYEw4SM6I/l3mP3GxsNYueYREQgQnsvatfMQBoOegiPguBVtwNs+kktG1Pn1j9I6usynRxWLUQLEsnDY2vtY7+EKgg1tXaRXbFePCJ492ckYDKVDiE=
Received: by 10.82.126.5 with SMTP id y5mr52531buc.1163512253793;
        Tue, 14 Nov 2006 05:50:53 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Tue, 14 Nov 2006 05:50:53 -0800 (PST)
Message-ID: <359a92830611140550h8b97d0dw11978078d253ee73@mail.gmail.com>
Date: Tue, 14 Nov 2006 08:50:53 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: Best approach for exact Prefix Field Query
In-Reply-To: <4559C566.9000606@uni-hd.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_39015_27902782.1163512253754"
References: <4559C566.9000606@uni-hd.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_39015_27902782.1163512253754
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What Erik said <G>...

But I thought I'd add that I was pleasantly surprised by how very fast the
regex contribution went when creating a filter. And you can cache the
filters. Don't be afraid <G>.

But in this case I don't think that would help either. Your basic problem is
probably that you're indexing discrete elements because the analyzer breaks
them up. i.e. "Lucene in action" gets indexed as three tokens, then you have
a hard time searching them other than as individual tokens. Regex wouldn't
help you here, since there's really no concept of a "line" after things are
tokenized (except that you can do interesting things with the offsets of the
tokens in the field, which is what I believe SpanFirst is doing for you).

But don't go there, use Erik's suggestion instead. And if that doesn't do
exactly what you want, consider indexing a separate field that only
contains, say, the first word and doing your "prefix field search" on that
field. You wouldn't even have to store that field......

Best
Erick@ICanTypeMoreThanErikAndBeLessHelp.....

On 11/14/06, Martin Braun <mbraun@uni-hd.de> wrote:
>
> hi,
>
> i would like to provide a exact "PrefixField Search", i.e. a search for
> exactly the first words in a field.
> I think I can't use a PrefixQuery because it would find also substrings
> inside the field, e.g.
> action* would find titles like "Action and knowledge" but also (that's
> what i don't want it to find)
> "Lucene in Action"
>
> As a regex it would be sth. like /^Action and.*/
>
> Now the question for me is how to implement this functionality, I see to
> ways:
>
> 1) Some kind of TermEnum over all Docs (or the prefixquery results?) and
> string comparison
> 2) Using the regex contribution
> 3) a super -fast lucene function I have overseen :)
>
> with 2) I am worrying about performance, anybody have experiences with
> regex-queries?
>
> .. but same for 1) anybody already impolemented this already and could
> give some code samples / hints ?
>
> tia,
>
>
> martin
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_39015_27902782.1163512253754--

From java-user-return-24515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 15:52:22 2006
Return-Path: <java-user-return-24515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27133 invoked from network); 14 Nov 2006 15:52:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 15:52:22 -0000
Received: (qmail 14858 invoked by uid 500); 14 Nov 2006 15:52:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14837 invoked by uid 500); 14 Nov 2006 15:52:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14826 invoked by uid 99); 14 Nov 2006 15:52:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 07:52:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of coriander@gmail.com designates 66.249.82.228 as permitted sender)
Received: from [66.249.82.228] (HELO wx-out-0506.google.com) (66.249.82.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 07:52:11 -0800
Received: by wx-out-0506.google.com with SMTP id h26so1484151wxd
        for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 07:51:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MptKkn9cH6plWjX1FbU3gUa2Zfqr+u5d9cRg2HUaWvNTLFJ/yQKJAZHmXd0z2rrdRzWwEKONmKMeKb6ebiTnBiHFtY8jnvzyvnYXj4vqIuvMxWdWpTWdl46GbhPrK4bwybAhiSIsjFtfwFFChrzmHEtRXFGGs2sbrF+o/EqoIq4=
Received: by 10.70.44.4 with SMTP id r4mr1134894wxr.1163519510264;
        Tue, 14 Nov 2006 07:51:50 -0800 (PST)
Received: by 10.70.27.4 with HTTP; Tue, 14 Nov 2006 07:51:50 -0800 (PST)
Message-ID: <8960abb20611140751i2105bdeaq6631e1934f06fd07@mail.gmail.com>
Date: Tue, 14 Nov 2006 10:51:50 -0500
From: "Sarah Hunter" <coriander@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer Problem with Apostrophes
In-Reply-To: <4559C46C.1070103@tejnora.cz>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8960abb20611131351g20f78052odae6ba9f0e93b8e0@mail.gmail.com>
	 <4559C46C.1070103@tejnora.cz>
X-Virus-Checked: Checked by ClamAV on apache.org

That was my first thought as well, but it looks like APOSTROPHE is
already the one that I want. As you can see, from StandardAnalyzer.jj

-------------------
TOKEN : {					  // token patterns

  // basic word: a sequence of digits & letters
  <ALPHANUM: (<LETTER>|<DIGIT>|<KOREAN>)+ >

  // internal apostrophes: O'Reilly, you're, O'Reilly's
  // use a post-filter to remove possesives
| <APOSTROPHE: <ALPHA> ("'" <ALPHA>)+ >
-------------------

It really looks like it should work for ' rather than `, but it does not.

Thanks for the reply! Hopefully you or someone else can point out
what's going on or where I'm going wrong.
Sarah

On 11/14/06, Karel Tejnora <karel@tejnora.cz> wrote:
> Apostrophe is recognized as a part of word - Standard analyzer is mostly
> English oriented.
> The way is to swap apostrophes - "normal" with unusual.
>
> StandardAnalyzer.java line 40-44
>
> APOSTROPHE:
>       token = jj_consume_token(APOSTROPHE);
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 16:19:27 2006
Return-Path: <java-user-return-24516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43808 invoked from network); 14 Nov 2006 16:19:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 16:19:23 -0000
Received: (qmail 84815 invoked by uid 500); 14 Nov 2006 16:19:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84784 invoked by uid 500); 14 Nov 2006 16:19:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84773 invoked by uid 99); 14 Nov 2006 16:19:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 08:19:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 08:19:11 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kAEGImDb027815
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 17:18:48 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id F3BDC8BD30
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 17:18:48 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 08175-08 for <java-user@lucene.apache.org>;
 Tue, 14 Nov 2006 17:18:47 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id BC4368BD2C
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 17:18:47 +0100 (CET)
Message-ID: <4559EC67.7040105@uni-hd.de>
Date: Tue, 14 Nov 2006 17:18:47 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Best approach for exact Prefix Field Query
References: <4559C566.9000606@uni-hd.de> <DA22440E-F40F-4923-A847-D5F379C31989@ehatchersolutions.com>
In-Reply-To: <DA22440E-F40F-4923-A847-D5F379C31989@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erik,

> SpanFirstQuery is what you're after.

thanks for this hint (@Erick: thanks for the good explanation of my prob),

I read the chapter for the spanfirstquery in LIA, but what I don't
understand is, how do i have to do a "Phrase" SpanFirstQuery?
I found a message with example code (
http://www.nabble.com/Speedup-indexing-process-tf1140025.html#a3034612 ):

here's my jruby snippet:

   SpanFirstQuery = org.apache.lucene.search.spans.SpanFirstQuery
   SpanTermQuery = org.apache.lucene.search.spans.SpanTermQuery
   Term = org.apache.lucene.index.Term

   sp = SpanFirstQuery.new(SpanTermQuery.new(Term.new("TI",search)),2)
   hits = searcher.search(sp)
   for i in 0...hits.length
      puts hits.doc(i).getField("kurz")
   end

I get no results for "action and" (there are some docs with beginning
with "action and" in the title) but i get (correct) results for "action",
What am I doing wrong here?

tia,
martin


> 
>     Erik
> 
> 
> On Nov 14, 2006, at 8:32 AM, Martin Braun wrote:
> 
>> hi,
>>
>> i would like to provide a exact "PrefixField Search", i.e. a search for
>> exactly the first words in a field.
>> I think I can't use a PrefixQuery because it would find also substrings
>> inside the field, e.g.
>> action* would find titles like "Action and knowledge" but also (that's
>> what i don't want it to find)
>> "Lucene in Action"
>>
>> As a regex it would be sth. like /^Action and.*/
>>
>> Now the question for me is how to implement this functionality, I see to
>> ways:
>>
>> 1) Some kind of TermEnum over all Docs (or the prefixquery results?) and
>> string comparison
>> 2) Using the regex contribution
>> 3) a super -fast lucene function I have overseen :)
>>
>> with 2) I am worrying about performance, anybody have experiences with
>> regex-queries?
>>
>> .. but same for 1) anybody already impolemented this already and could
>> give some code samples / hints ?
>>
>> tia,
>>
>>
>> martin
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 16:46:49 2006
Return-Path: <java-user-return-24517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55971 invoked from network); 14 Nov 2006 16:46:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 16:46:48 -0000
Received: (qmail 51386 invoked by uid 500); 14 Nov 2006 16:46:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51349 invoked by uid 500); 14 Nov 2006 16:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51338 invoked by uid 99); 14 Nov 2006 16:46:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 08:46:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 08:46:37 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4F9AB30EFC16; Tue, 14 Nov 2006 11:46:16 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 3ABD030EFC16
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 11:46:09 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4559EC67.7040105@uni-hd.de>
References: <4559C566.9000606@uni-hd.de> <DA22440E-F40F-4923-A847-D5F379C31989@ehatchersolutions.com> <4559EC67.7040105@uni-hd.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <27EB1225-C43C-4A28-A354-1A664492B142@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Best approach for exact Prefix Field Query
Date: Tue, 14 Nov 2006 11:46:07 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Nov 14, 2006, at 11:18 AM, Martin Braun wrote:
> Hi Erik,
>
>> SpanFirstQuery is what you're after.
>
> thanks for this hint (@Erick: thanks for the good explanation of my  
> prob),
>
> I read the chapter for the spanfirstquery in LIA, but what I don't
> understand is, how do i have to do a "Phrase" SpanFirstQuery?
> I found a message with example code (
> http://www.nabble.com/Speedup-indexing-process- 
> tf1140025.html#a3034612 ):
>
> here's my jruby snippet:
>
>    SpanFirstQuery = org.apache.lucene.search.spans.SpanFirstQuery
>    SpanTermQuery = org.apache.lucene.search.spans.SpanTermQuery
>    Term = org.apache.lucene.index.Term
>
>    sp = SpanFirstQuery.new(SpanTermQuery.new(Term.new("TI",search)),2)
>    hits = searcher.search(sp)
>    for i in 0...hits.length
>       puts hits.doc(i).getField("kurz")
>    end
>
> I get no results for "action and" (there are some docs with beginning
> with "action and" in the title) but i get (correct) results for  
> "action",
> What am I doing wrong here?

"action and" is likely not a single Term, so you'll want to create a  
SpanNearQuery of those individual terms (that match the way they were  
when analyzed and indexed, mind you) and use a SpanNearQuery inside a  
SpanFirstQuery.   Make sense?

JRuby!  Yeehaw!

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 17:24:39 2006
Return-Path: <java-user-return-24518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72644 invoked from network); 14 Nov 2006 17:24:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 17:24:38 -0000
Received: (qmail 24965 invoked by uid 500); 14 Nov 2006 17:24:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24782 invoked by uid 500); 14 Nov 2006 17:24:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24769 invoked by uid 99); 14 Nov 2006 17:24:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 09:24:41 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.88] (HELO web52005.mail.yahoo.com) (206.190.48.88)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Nov 2006 09:24:27 -0800
Received: (qmail 47050 invoked by uid 60001); 14 Nov 2006 17:24:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=5y9DW8eejdzIG2uZQqCuw+qEnrpFx/p2clUtvLQ6lWQ6kgg+bXv3y9e2wH5ljpu8rbBDSkV5bzKs8ibniPhftakiPBLONGlAaeV/yA/20nhInuym4BtyUY3sFsqZRgTeLYtDjCpV9557DBTTXW5AEGZKn6kwCKiR5jWTjji1oac=  ;
Message-ID: <20061114172406.47048.qmail@web52005.mail.yahoo.com>
Received: from [12.162.3.126] by web52005.mail.yahoo.com via HTTP; Tue, 14 Nov 2006 09:24:06 PST
Date: Tue, 14 Nov 2006 09:24:06 -0800 (PST)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Transaction support in Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0ADoes anyone know if there is any plan in adding transaction suppor=
t in Lucene?=0A=0ARegards,=0ARajesh=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 18:10:25 2006
Return-Path: <java-user-return-24519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87290 invoked from network); 14 Nov 2006 18:10:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:10:24 -0000
Received: (qmail 23506 invoked by uid 500); 14 Nov 2006 18:10:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23476 invoked by uid 500); 14 Nov 2006 18:10:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23465 invoked by uid 99); 14 Nov 2006 18:10:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:10:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:10:13 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 808A1DC84D4
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 13:09:50 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Tue, 14 Nov 2006 13:09:53 -0500
X-Sasl-enc: MJJwvFVdlsuPI0bb6MOJ+pEEXw4cPkztJ99trl5a4lsy 1163527792
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id DA052D92F
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 13:09:52 -0500 (EST)
Message-ID: <455A066D.7090909@mikemccandless.com>
Date: Tue, 14 Nov 2006 13:09:49 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Transaction support in Lucene
References: <20061114172406.47048.qmail@web52005.mail.yahoo.com>
In-Reply-To: <20061114172406.47048.qmail@web52005.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Rajesh parab wrote:

> Does anyone know if there is any plan in adding transaction support in Lucene?

I don't know of specific plans.

This has been discussed before on user & dev lists.  I know the
Compass project builds transactional support on top of Lucene.

Are you asking for transaction support shared with something external
(eg a database)?  Meaning updates to the DB and to Lucene either
atomically succeed or fail, together?

Or, are you asking for transactional behaviour of updates just to
Lucene, eg, you want to do a bunch of adds & deletes but have them not
be visible (committed) until the end of your transaction and roll back
on any failure?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 18:20:13 2006
Return-Path: <java-user-return-24520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90682 invoked from network); 14 Nov 2006 18:20:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:20:10 -0000
Received: (qmail 39416 invoked by uid 500); 14 Nov 2006 18:20:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39374 invoked by uid 500); 14 Nov 2006 18:20:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39307 invoked by uid 99); 14 Nov 2006 18:20:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:20:11 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.94] (HELO web52011.mail.yahoo.com) (206.190.48.94)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 14 Nov 2006 10:19:56 -0800
Received: (qmail 54871 invoked by uid 60001); 14 Nov 2006 18:19:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=emhqZexuMfmLrGip7IblIr+1wkiHIF2hjh7z5DPzIw1ZcPsOq5AE2xkMXIji4naC7S+lFvEdsZFEvMn/ZNPzavsqd59a/AjFD7at/6mPsi6w5jaw1+Qwpxg+abJMqrWEfeqaMGgBgNNjkxvZSk7957sXQDKtPTpnMV4h/qL5iGk=  ;
Message-ID: <20061114181935.54869.qmail@web52011.mail.yahoo.com>
Received: from [12.162.3.126] by web52011.mail.yahoo.com via HTTP; Tue, 14 Nov 2006 10:19:35 PST
Date: Tue, 14 Nov 2006 10:19:35 -0800 (PST)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Re: Transaction support in Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,=0A=0AThanks for the feedback.=0A=0AI am talking about transaction =
support in Lucene only. If there is a failure during insert/update/delete o=
f document inside the index, there is no way to roll back the operation and=
 this will keep the index in in-consistent state.=0A=0AI read about Compass=
 providing transaction support on top of Lucene APIs. But, I am not sure, i=
f it is a good idea to use Compass instead of directly using Lucene APIs. T=
here will always be a dependency on Compass to support the latest version/a=
dditions to Lucene.=0A=0ARegards,=0ARajesh=0A=0A----- Original Message ----=
=0AFrom: Michael McCandless <lucene@mikemccandless.com>=0ATo: java-user@luc=
ene.apache.org=0ASent: Tuesday, November 14, 2006 10:09:49 AM=0ASubject: Re=
: Transaction support in Lucene=0A=0ARajesh parab wrote:=0A=0A> Does anyone=
 know if there is any plan in adding transaction support in Lucene?=0A=0AI =
don't know of specific plans.=0A=0AThis has been discussed before on user &=
 dev lists.  I know the=0ACompass project builds transactional support on t=
op of Lucene.=0A=0AAre you asking for transaction support shared with somet=
hing external=0A(eg a database)?  Meaning updates to the DB and to Lucene e=
ither=0Aatomically succeed or fail, together?=0A=0AOr, are you asking for t=
ransactional behaviour of updates just to=0ALucene, eg, you want to do a bu=
nch of adds & deletes but have them not=0Abe visible (committed) until the =
end of your transaction and roll back=0Aon any failure?=0A=0AMike=0A=0A----=
-----------------------------------------------------------------=0ATo unsu=
bscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional c=
ommands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 18:29:18 2006
Return-Path: <java-user-return-24521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93336 invoked from network); 14 Nov 2006 18:29:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:29:17 -0000
Received: (qmail 68061 invoked by uid 500); 14 Nov 2006 18:29:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68034 invoked by uid 500); 14 Nov 2006 18:29:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68023 invoked by uid 99); 14 Nov 2006 18:29:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:29:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [65.61.166.69] (HELO rs30.luxsci.com) (65.61.166.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:29:05 -0800
Received: from [10.0.1.2] (ip-65-183-78-29.rev.frii.com [65.183.78.29])
	(authenticated bits=0)
	by rs30.luxsci.com (8.13.7/8.13.7) with ESMTP id kAEISfJE021179;
	Tue, 14 Nov 2006 12:28:42 -0600
In-Reply-To: <20061114181935.54869.qmail@web52011.mail.yahoo.com>
References: <20061114181935.54869.qmail@web52011.mail.yahoo.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <709408C6-BC3F-4471-A5B1-35D0A75B5BCB@colvin.org>
Content-Transfer-Encoding: 7bit
From: Greg Colvin <greg@colvin.org>
Subject: Re: Transaction support in Lucene
Date: Tue, 14 Nov 2006 11:28:33 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Last I looked at this, I thought that mapping transactions
onto Lucene segments was the way to go.

On Nov 14, 2006, at 11:19 AM, Rajesh parab wrote:
> Hi Mike,
>
> Thanks for the feedback.
>
> I am talking about transaction support in Lucene only. If there is  
> a failure during insert/update/delete of document inside the index,  
> there is no way to roll back the operation and this will keep the  
> index in in-consistent state.
>
> I read about Compass providing transaction support on top of Lucene  
> APIs. But, I am not sure, if it is a good idea to use Compass  
> instead of directly using Lucene APIs. There will always be a  
> dependency on Compass to support the latest version/additions to  
> Lucene.
>
> Regards,
> Rajesh
>
> ----- Original Message ----
> From: Michael McCandless <lucene@mikemccandless.com>
> To: java-user@lucene.apache.org
> Sent: Tuesday, November 14, 2006 10:09:49 AM
> Subject: Re: Transaction support in Lucene
>
> Rajesh parab wrote:
>
>> Does anyone know if there is any plan in adding transaction  
>> support in Lucene?
>
> I don't know of specific plans.
>
> This has been discussed before on user & dev lists.  I know the
> Compass project builds transactional support on top of Lucene.
>
> Are you asking for transaction support shared with something external
> (eg a database)?  Meaning updates to the DB and to Lucene either
> atomically succeed or fail, together?
>
> Or, are you asking for transactional behaviour of updates just to
> Lucene, eg, you want to do a bunch of adds & deletes but have them not
> be visible (committed) until the end of your transaction and roll back
> on any failure?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 18:58:14 2006
Return-Path: <java-user-return-24522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1985 invoked from network); 14 Nov 2006 18:58:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 18:58:13 -0000
Received: (qmail 34030 invoked by uid 500); 14 Nov 2006 18:58:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33989 invoked by uid 500); 14 Nov 2006 18:58:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33978 invoked by uid 99); 14 Nov 2006 18:58:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:58:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 10:58:00 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by frontend1.messagingengine.com (Postfix) with ESMTP id A6809DC84AF
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 13:57:37 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Tue, 14 Nov 2006 13:57:40 -0500
X-Sasl-enc: tjxwzpzKfLqjOJ0j1Q+8UutrvKyCnaDkhXrrjHPK0wb5 1163530660
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 05144DA2B
	for <java-user@lucene.apache.org>; Tue, 14 Nov 2006 13:57:39 -0500 (EST)
Message-ID: <455A11A0.3080904@mikemccandless.com>
Date: Tue, 14 Nov 2006 13:57:36 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Transaction support in Lucene
References: <20061114181935.54869.qmail@web52011.mail.yahoo.com>
In-Reply-To: <20061114181935.54869.qmail@web52011.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Rajesh parab wrote:

> I am talking about transaction support in Lucene only. If there is a failure during insert/update/delete of document inside the index, there is no way to roll back the operation and this will keep the index in in-consistent state.

OK, I see.  Then you should also look at Solr, which puts "Lucene
only" transactional semantics on top, in that you can do a bunch of
add/update/deletes to your index but only on calling "commit" are
these changes copied to a snapshot (using hard links in the
filesystem) and distributed to searchers.

Also, the lockless commits patch (not committed yet but I think
close):

     http://issues.apache.org/jira/browse/LUCENE-701

gets us closer to enabling transactions.  With that patch, every
commit from Lucene writes to a segments_N file (N increments on every
commit).  We keep only the last segments_N file.

But, with a small-ish change beyond that patch, which has been briefly
touched on the dev list & Jira, we could have Lucene keep more than
just the last segments_N file (and all segment files referenced by
them).  This would enable you to open a Lucene index explicitly at
prior commit point.  Then we could enable transactions over that by
recording the segments_N at which you began your transaction, not
deleting it, and then rolling back to it if any error had occurred.

This same approach could be used to make Lucene's "point in time"
searching explicit, and, work correctly on NFS.

I will open a Jira issue to start tracking these ideas ... but I think
it's a ways off before this would be available in a release.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 21:06:11 2006
Return-Path: <java-user-return-24523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49822 invoked from network); 14 Nov 2006 21:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 21:06:09 -0000
Received: (qmail 68978 invoked by uid 500); 14 Nov 2006 21:06:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68947 invoked by uid 500); 14 Nov 2006 21:06:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68935 invoked by uid 99); 14 Nov 2006 21:06:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 13:06:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [213.151.89.70] (HELO server) (213.151.89.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 14 Nov 2006 13:05:58 -0800
Received: from [85.207.40.193] (helo=[10.10.1.71])
	by server with esmtp (Exim 4.50)
	id 1Gk5TM-0000NZ-23
	for java-user@lucene.apache.org; Tue, 14 Nov 2006 22:05:36 +0100
Message-ID: <455A2F9C.1050704@tejnora.cz>
Date: Tue, 14 Nov 2006 22:05:32 +0100
From: Karel Tejnora <karel@tejnora.cz>
User-Agent: Thunderbird 1.5.0.8 (X11/20061112)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StandardAnalyzer Problem with Apostrophes
References: <8960abb20611131351g20f78052odae6ba9f0e93b8e0@mail.gmail.com>	 <4559C46C.1070103@tejnora.cz> <8960abb20611140751i2105bdeaq6631e1934f06fd07@mail.gmail.com>
In-Reply-To: <8960abb20611140751i2105bdeaq6631e1934f06fd07@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 85.207.40.193
X-SA-Exim-Mail-From: karel@tejnora.cz
X-SA-Exim-Scanned: No (on server); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org

The problem is in StandardTokenizer so Analyzer with method:

public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream result = new LowerCaseTokenizer(reader);
    result = new StopFilter(result, stopSet);
    return result;
}

if you need everything standard analyzer does
 From StandardTokenizer.jj

remove token def.
176 token = <APOSTROPHE> |

than compile. l'aabb shall be recognized as <ALPHA> <ALPHA>


||

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 14 21:25:43 2006
Return-Path: <java-user-return-24524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57741 invoked from network); 14 Nov 2006 21:25:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2006 21:25:42 -0000
Received: (qmail 9743 invoked by uid 500); 14 Nov 2006 21:25:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9723 invoked by uid 500); 14 Nov 2006 21:25:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 4616 invoked by uid 99); 14 Nov 2006 21:23:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.09,422,1157342400"; 
   d="scan'208"; a="20531819:sNHT29622075"
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B02479EF0@mt-exch1.nuance.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@nuance.com>
To: java-user@lucene.apache.org
Subject: RE: "Catalog" backend for document stored fields?
Date: Tue, 14 Nov 2006 15:46:59 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2658.27)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

[sorry for the long delay for my answer, we are having some issues with our
mail server...]

Thanks for your comment.  Yes it would make sense if the log files were not
so big.  In fact, I'm only indexing a subset of the log information.
Because I store the information in Lucene, it is easier and faster to
retrieve the information.  

For example, generating a report by reading the logs themselves takes ~18
hours.  Converting to xml and indexing the logs takes ~12 hours and each
report takes <20 minutes to generate.  Since we often generate (different)
reports, the Lucene approach is way faster. [Note that I wrote both classes
to convert to xml and to index the logs.  The log2xml step is quite useful
because the xml really has all the log information and compressing the xml
with xmlppm reduces the size of the logs by 97%.  This way I can archive the
log.xml without wasting much space.]

As another comparison point: the logs takes 100Gig per week while the
indices 35Gig per month!  This design is already more optimal than the first
approach.  But I'm trying to make it better.

I really do think that this dictionary/catalog approach could benefit others
Lucene users.  I'm not against the idea of doing it myself.  I just need
some pointers and guidelines for all the gurus out there!

Thanks for all you help!

Jp
-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com] 
Sent: Tuesday, October 24, 2006 1:50 AM
To: java-user@lucene.apache.org
Subject: Re: "Catalog" backend for document stored fields?

> I'm indexing logs from a transaction-based application.
> ...
> millions documents per month, the size of the indices is ~35 gigs per
month
> (that's the lower bound).  I have no choice but to 'store' each field
values
> (as well as indexing/tokenizing them) because I'll need to retrieve them
in
> order to create various reports.  Also, I have a backlog of ~2 years of
logs
> to index!
> ...
> 1-       is there someone out there that already wrote an extension to
> Lucene so that 'stored' string for each document/field is in fact stored
in
> a centralized repository? Meaning, only an 'index' is actually stored in
the
> document and the real data is put somewhere else.

Do you gain anything from storing the document fields within Lucene?  In
case not, especially if log files are kept somewhere, you cuold make all
'content' fields unstored (reduce index size), and add a stored non-indexed
ID field. It can also be a POINTER field - e.g. <log file name + start
offset + length>.  At search time, for found documents you can retrieve
this ID/POINTER field and then fetch the document from the (original) log
file. Makes sense?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 15 16:12:06 2006
Return-Path: <java-user-return-24525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95680 invoked from network); 15 Nov 2006 16:12:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 16:12:04 -0000
Received: (qmail 44959 invoked by uid 500); 15 Nov 2006 16:12:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44920 invoked by uid 500); 15 Nov 2006 16:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44908 invoked by uid 99); 15 Nov 2006 16:12:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 08:12:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.236.116.36] (HELO enzo.optaros.com) (68.236.116.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 08:11:54 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by enzo.optaros.com (Postfix) with ESMTP id 5FDE56DC935
	for <java-user@lucene.apache.org>; Wed, 15 Nov 2006 11:11:33 -0500 (EST)
X-DSPAM-Result: Innocent
X-DSPAM-Processed: Wed Nov 15 11:11:33 2006
X-DSPAM-Confidence: 0.9997
X-DSPAM-Probability: 0.0000
X-DSPAM-Signature: 455b3c35163191804284693
X-DSPAM-Factors: 27,
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -4.351
X-Spam-Level: 
Received: from enzo.optaros.com ([127.0.0.1])
	by localhost (enzo.optaros.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id N9xo2Z1qkxq4 for <java-user@lucene.apache.org>;
	Wed, 15 Nov 2006 11:11:32 -0500 (EST)
Received: from enzo.optaros.com (enzo.optaros.com [10.88.1.6])
	by enzo.optaros.com (Postfix) with ESMTP id ED2F16DC934
	for <java-user@lucene.apache.org>; Wed, 15 Nov 2006 11:11:32 -0500 (EST)
From: Phil Rosen <prosen@optaros.com>
To: <java-user@lucene.apache.org>
Subject: term vectors
Date: Wed, 15 Nov 2006 11:11:32 -0500 (EST)
Message-ID: <002201c708d0$b700a100$b3640a0a@DJ8P5VB1PR>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0023_01C708A6.CE2A9900"
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccI0La5JIeaU9rsTMyxy58zCw8Uxw==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.351 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.147, BAYES_00=-2.599, DSPAM_HAM=-0.1,
	HTML_MESSAGE=0.001]

------=_NextPart_000_0023_01C708A6.CE2A9900
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello,

 

Thanks in advance for your help, I am really stumped I feel.

 

I am building an application that requires I index a set of documents on
the scale of hundreds of thousands.

 

A document can have a varying number of attribute fields with an unknown
set of potential values. I realize that just indexing a blob of fields
would be much faster, however I need to bin the search results based on
common attributes; as different types of attributes could potentially have
overlapping values a single blob for all attributes wont work.

 

My question is this, is there a way to get term frequencies for a set of
documents or hits, without using getTermFreqVector() on each document and
each attribute field? As I could have hundreds of results, each with
dozens of attribute fields, looping getTermFreqVector() would be very
slow. If there isn't something inherent to lucene, has anyone seen an
extension that could accomplish this?

 

Thanks!


------=_NextPart_000_0023_01C708A6.CE2A9900--


From java-user-return-24526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 15 16:33:23 2006
Return-Path: <java-user-return-24526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7864 invoked from network); 15 Nov 2006 16:33:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 16:33:22 -0000
Received: (qmail 4598 invoked by uid 500); 15 Nov 2006 16:33:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4568 invoked by uid 500); 15 Nov 2006 16:33:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4557 invoked by uid 99); 15 Nov 2006 16:33:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 08:33:24 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 08:33:11 -0800
Received: by nf-out-0910.google.com with SMTP id n28so671702nfc
        for <java-user@lucene.apache.org>; Wed, 15 Nov 2006 08:32:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LIiKp8ejIIrn2sxDClOXjie9dqQZqXPq0XR1ck3J//5f8Xmm3WTaEpMxhKs0/b0aMgItMQfXEqmy77lA6Smz4OdJo8f8kiEJFu0fIzsJJ8EVBqsNc8GvByChdyo+BRVc47aBvGJYNXbUCEPYcWqbFQPiQeYa+7W4kYo2UZvfyrQ=
Received: by 10.82.164.9 with SMTP id m9mr205967bue.1163608369539;
        Wed, 15 Nov 2006 08:32:49 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Wed, 15 Nov 2006 08:32:49 -0800 (PST)
Message-ID: <359a92830611150832i4d1aa17bu8ab47adf6b406ef3@mail.gmail.com>
Date: Wed, 15 Nov 2006 11:32:49 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: term vectors
In-Reply-To: <002201c708d0$b700a100$b3640a0a@DJ8P5VB1PR>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60404_32500842.1163608369307"
References: <002201c708d0$b700a100$b3640a0a@DJ8P5VB1PR>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60404_32500842.1163608369307
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why do you think you need term frequencies in the first place? What is it
that you're trying to do that just searching wouldn't accomplish?

I've often jumped into the middle of something and made it waaaaay too
complex, so I'm asking to see if you're doing something similar <G>.

Lucene has no requirements that each document have identical fields. So you
could simply index a varying number of fields with each document,
corresponding to the attributes of your files. After a search, you could
determine what you needed to by which docs had which attributes (fields). It
seems to me that if you form your query appropriately, the search results
*are* the results you want and this kind of analysis wouldn't be necessary.
Since your search would only return documents that had the fields you
specify and the values you want in those fields (attributes).

But that may just reflect that I don't understand the problem you're trying
to solve very well <G>...

Best
Erick

On 11/15/06, Phil Rosen <prosen@optaros.com> wrote:
>
> Hello,
>
>
>
> Thanks in advance for your help, I am really stumped I feel.
>
>
>
> I am building an application that requires I index a set of documents on
> the scale of hundreds of thousands.
>
>
>
> A document can have a varying number of attribute fields with an unknown
> set of potential values. I realize that just indexing a blob of fields
> would be much faster, however I need to bin the search results based on
> common attributes; as different types of attributes could potentially have
> overlapping values a single blob for all attributes wont work.
>
>
>
> My question is this, is there a way to get term frequencies for a set of
> documents or hits, without using getTermFreqVector() on each document and
> each attribute field? As I could have hundreds of results, each with
> dozens of attribute fields, looping getTermFreqVector() would be very
> slow. If there isn't something inherent to lucene, has anyone seen an
> extension that could accomplish this?
>
>
>
> Thanks!
>
>
>

------=_Part_60404_32500842.1163608369307--

From java-user-return-24527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 15 16:35:22 2006
Return-Path: <java-user-return-24527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8411 invoked from network); 15 Nov 2006 16:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 16:35:20 -0000
Received: (qmail 9238 invoked by uid 500); 15 Nov 2006 16:35:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9202 invoked by uid 500); 15 Nov 2006 16:35:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9187 invoked by uid 99); 15 Nov 2006 16:35:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 08:35:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.97.157.186] (HELO n034.sc1.cp.net) (64.97.157.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 08:35:10 -0800
Received: from [10.1.1.2] (75.45.69.112) by n034.sc1.cp.net (7.2.069.1) (authenticated as mike@curtin.com)
        id 455A206B000383E6 for java-user@lucene.apache.org; Wed, 15 Nov 2006 16:34:49 +0000
Message-ID: <455B41A8.7090209@curtin.com>
Date: Wed, 15 Nov 2006 11:34:48 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: term vectors
References: <002201c708d0$b700a100$b3640a0a@DJ8P5VB1PR>
In-Reply-To: <002201c708d0$b700a100$b3640a0a@DJ8P5VB1PR>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Phil Rosen wrote:

> I am building an application that requires I index a set of documents on
> the scale of hundreds of thousands.
> 
> A document can have a varying number of attribute fields with an unknown
> set of potential values. I realize that just indexing a blob of fields
> would be much faster, however I need to bin the search results based on
> common attributes; as different types of attributes could potentially have
> overlapping values a single blob for all attributes wont work.
> 
> My question is this, is there a way to get term frequencies for a set of
> documents or hits, without using getTermFreqVector() on each document and
> each attribute field? As I could have hundreds of results, each with
> dozens of attribute fields, looping getTermFreqVector() would be very
> slow. If there isn't something inherent to lucene, has anyone seen an
> extension that could accomplish this?

Could you give an example of what you're starting with, what a search looks 
like, and what you want out?  It sounds almost like you're looking for a 
custom statistical analysis of hits, which I doubt Lucene is going to have for 
you, out of the box ...

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 15 18:07:57 2006
Return-Path: <java-user-return-24528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56549 invoked from network); 15 Nov 2006 18:07:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 18:07:55 -0000
Received: (qmail 20206 invoked by uid 500); 15 Nov 2006 18:07:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20167 invoked by uid 500); 15 Nov 2006 18:07:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20156 invoked by uid 99); 15 Nov 2006 18:07:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:07:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.236.116.36] (HELO enzo.optaros.com) (68.236.116.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 10:07:45 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by enzo.optaros.com (Postfix) with ESMTP id F2A226DC95A
	for <java-user@lucene.apache.org>; Wed, 15 Nov 2006 13:07:20 -0500 (EST)
X-DSPAM-Result: Innocent
X-DSPAM-Processed: Wed Nov 15 13:07:20 2006
X-DSPAM-Confidence: 0.9997
X-DSPAM-Probability: 0.0000
X-DSPAM-Signature: 455b5758282932557716246
X-DSPAM-Factors: 27,
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -4.499
X-Spam-Level: 
Received: from enzo.optaros.com ([127.0.0.1])
	by localhost (enzo.optaros.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id N4hjggRGTaut for <java-user@lucene.apache.org>;
	Wed, 15 Nov 2006 13:07:20 -0500 (EST)
Received: from enzo.optaros.com (enzo.optaros.com [10.88.1.6])
	by enzo.optaros.com (Postfix) with ESMTP id 6BA086DC934
	for <java-user@lucene.apache.org>; Wed, 15 Nov 2006 13:07:20 -0500 (EST)
From: Phil Rosen <prosen@optaros.com>
To: <java-user@lucene.apache.org>
Subject: RE: term vectors
Date: Wed, 15 Nov 2006 13:07:20 -0500 (EST)
Message-ID: <003b01c708e0$e5d53440$b3640a0a@DJ8P5VB1PR>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <455B41A8.7090209@curtin.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccI1BC5REzkHaLrR9ywfmT4wKpCGgAAEvrA
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.499 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, BAYES_00=-2.599, DSPAM_HAM=-0.1]

Thanks for your help!

Here is an example, I have 100 items, each with a set of potentially unique 
attributes. Attributes could be color, size, length, density, etc. So an 
example document could be:

Id: 1
ItemType: foo
Blob-field: all sorts of text handled normally
Outer-Color: Red
Size: Large
Temperature: hot
Etc:
Etc:

I would like to get the sum of frequency counts for each term in the fields 
I specify across the search results. I can just iterate through the 
documents and use getTermFreqVector() for each desired field on each 
document, then sum that; but this seems slow to me.




-----Original Message-----
From: Michael D. Curtin [mailto:mike@curtin.com]
Sent: Wednesday, November 15, 2006 11:35 AM
To: java-user@lucene.apache.org
Subject: Re: term vectors

Phil Rosen wrote:

> I am building an application that requires I index a set of documents on
> the scale of hundreds of thousands.
>
> A document can have a varying number of attribute fields with an unknown
> set of potential values. I realize that just indexing a blob of fields
> would be much faster, however I need to bin the search results based on
> common attributes; as different types of attributes could potentially have
> overlapping values a single blob for all attributes wont work.
>
> My question is this, is there a way to get term frequencies for a set of
> documents or hits, without using getTermFreqVector() on each document and
> each attribute field? As I could have hundreds of results, each with
> dozens of attribute fields, looping getTermFreqVector() would be very
> slow. If there isn't something inherent to lucene, has anyone seen an
> extension that could accomplish this?

Could you give an example of what you're starting with, what a search looks
like, and what you want out?  It sounds almost like you're looking for a
custom statistical analysis of hits, which I doubt Lucene is going to have 
for
you, out of the box ...

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 15 20:15:26 2006
Return-Path: <java-user-return-24529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11071 invoked from network); 15 Nov 2006 20:15:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 20:15:25 -0000
Received: (qmail 21284 invoked by uid 500); 15 Nov 2006 20:15:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21155 invoked by uid 500); 15 Nov 2006 20:15:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21143 invoked by uid 99); 15 Nov 2006 20:15:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:15:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [64.97.157.189] (HELO n007.sc1.cp.net) (64.97.157.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 12:15:12 -0800
Received: from [10.1.1.2] (75.45.69.112) by n007.sc1.cp.net (7.2.069.1) (authenticated as mike@curtin.com)
        id 455A22B300049864 for java-user@lucene.apache.org; Wed, 15 Nov 2006 20:14:49 +0000
Message-ID: <455B7538.3000203@curtin.com>
Date: Wed, 15 Nov 2006 15:14:48 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: term vectors
References: <003b01c708e0$e5d53440$b3640a0a@DJ8P5VB1PR>
In-Reply-To: <003b01c708e0$e5d53440$b3640a0a@DJ8P5VB1PR>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Phil Rosen wrote:

> I would like to get the sum of frequency counts for each term in the fields 
> I specify across the search results. I can just iterate through the 
> documents and use getTermFreqVector() for each desired field on each 
> document, then sum that; but this seems slow to me.

It seems that you really do want a custom statistical analysis of the hit 
documents, an analysis that is specific not just to the hits, but to the query 
as well.  I don't think there's anything built into Lucene to do this for you.

Have you run getTermFreqVector(), with representative data and query, to see 
what its performance actually turns out to be?

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 15 22:00:45 2006
Return-Path: <java-user-return-24530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67517 invoked from network); 15 Nov 2006 22:00:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2006 22:00:43 -0000
Received: (qmail 71847 invoked by uid 500); 15 Nov 2006 22:00:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71815 invoked by uid 500); 15 Nov 2006 22:00:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71804 invoked by uid 99); 15 Nov 2006 22:00:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 14:00:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a13.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 14:00:30 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a13.dreamhost.com (Postfix) with ESMTP id E707B129B3D
	for <java-user@lucene.apache.org>; Wed, 15 Nov 2006 14:00:09 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <003b01c708e0$e5d53440$b3640a0a@DJ8P5VB1PR>
References: <003b01c708e0$e5d53440$b3640a0a@DJ8P5VB1PR>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <58D5A137-7C52-48DB-BFDE-B4717CC7ECB5@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: term vectors
Date: Wed, 15 Nov 2006 17:00:06 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Can this be done as an offline task?

On Nov 15, 2006, at 1:07 PM, Phil Rosen wrote:

> Thanks for your help!
>
> Here is an example, I have 100 items, each with a set of  
> potentially unique
> attributes. Attributes could be color, size, length, density, etc.  
> So an
> example document could be:
>
> Id: 1
> ItemType: foo
> Blob-field: all sorts of text handled normally
> Outer-Color: Red
> Size: Large
> Temperature: hot
> Etc:
> Etc:
>
> I would like to get the sum of frequency counts for each term in  
> the fields
> I specify across the search results. I can just iterate through the
> documents and use getTermFreqVector() for each desired field on each
> document, then sum that; but this seems slow to me.
>
>
>
>
> -----Original Message-----
> From: Michael D. Curtin [mailto:mike@curtin.com]
> Sent: Wednesday, November 15, 2006 11:35 AM
> To: java-user@lucene.apache.org
> Subject: Re: term vectors
>
> Phil Rosen wrote:
>
>> I am building an application that requires I index a set of  
>> documents on
>> the scale of hundreds of thousands.
>>
>> A document can have a varying number of attribute fields with an  
>> unknown
>> set of potential values. I realize that just indexing a blob of  
>> fields
>> would be much faster, however I need to bin the search results  
>> based on
>> common attributes; as different types of attributes could  
>> potentially have
>> overlapping values a single blob for all attributes wont work.
>>
>> My question is this, is there a way to get term frequencies for a  
>> set of
>> documents or hits, without using getTermFreqVector() on each  
>> document and
>> each attribute field? As I could have hundreds of results, each with
>> dozens of attribute fields, looping getTermFreqVector() would be very
>> slow. If there isn't something inherent to lucene, has anyone seen an
>> extension that could accomplish this?
>
> Could you give an example of what you're starting with, what a  
> search looks
> like, and what you want out?  It sounds almost like you're looking  
> for a
> custom statistical analysis of hits, which I doubt Lucene is going  
> to have
> for
> you, out of the box ...
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 00:16:52 2006
Return-Path: <java-user-return-24531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8479 invoked from network); 16 Nov 2006 00:16:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 00:16:51 -0000
Received: (qmail 95203 invoked by uid 500); 16 Nov 2006 00:16:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95178 invoked by uid 500); 16 Nov 2006 00:16:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95167 invoked by uid 99); 16 Nov 2006 00:16:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 16:16:54 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.48.97] (HELO web52014.mail.yahoo.com) (206.190.48.97)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 15 Nov 2006 16:16:41 -0800
Received: (qmail 10441 invoked by uid 60001); 16 Nov 2006 00:16:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=AX7sw6DVA2BfZwO/wMrUdza9L9i35JcQfyTUntPE2GLlBZShdKiSAsfuOlNU4kM+vZFErC4cS6qMTXK6tSo9q66F6Kn7EJotVQIpTdFnnAucCL95fBD5X7pMVLwG5BDQbCTdxFsGTN1eQ1e5nV2XWnMt/UjY6PJO7sQCcW2KD98=  ;
Message-ID: <20061116001620.10439.qmail@web52014.mail.yahoo.com>
Received: from [12.162.3.126] by web52014.mail.yahoo.com via HTTP; Wed, 15 Nov 2006 16:16:20 PST
Date: Wed, 15 Nov 2006 16:16:20 -0800 (PST)
From: Rajesh parab <rajesh_parab_1@yahoo.com>
Subject: Index generation failure
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AI have a question on index generation. What if the index generatio=
n fails for some reason, may be disk full, or any other reason? Does it mak=
e the index corrupt? I mean, can we still use the index created so far or w=
e need to re-generate the entire index?=0A=0ASecondly, what are possible sc=
enarios for index generation failure apart from desk full, too many open fi=
les, etc?=0A=0ARegards,=0ARajesh=0A=0A=0A=0A=0A =0A________________________=
____________________________________________________________=0ADo you Yahoo=
!?=0AEveryone is raving about the all-new Yahoo! Mail beta.=0Ahttp://new.ma=
il.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 01:15:56 2006
Return-Path: <java-user-return-24532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25025 invoked from network); 16 Nov 2006 01:15:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 01:15:55 -0000
Received: (qmail 79968 invoked by uid 500); 16 Nov 2006 01:15:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79939 invoked by uid 500); 16 Nov 2006 01:15:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79928 invoked by uid 99); 16 Nov 2006 01:15:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 17:15:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [144.92.197.210] (HELO smtpauth.wiscmail.wisc.edu) (144.92.197.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 17:15:44 -0800
Received: from avs-daemon.smtpauth1.wiscmail.wisc.edu by
 smtpauth1.wiscmail.wisc.edu
 (Sun Java System Messaging Server 6.2-7.05 (built Sep  5 2006))
 id <0J8S00E01U5MH100@smtpauth1.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Wed, 15 Nov 2006 19:15:22 -0600 (CST)
Received: from Hathor ([144.92.136.11]) by smtpauth1.wiscmail.wisc.edu
 (Sun Java System Messaging Server 6.2-7.05 (built Sep  5 2006))
 with ESMTPSA id <0J8S00CJQU5MZ300@smtpauth1.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Wed, 15 Nov 2006 19:15:22 -0600 (CST)
Date: Wed, 15 Nov 2006 19:15:22 -0600
From: Michael Rusch <mcrusch@facstaff.wisc.edu>
Subject: newbie scoring question
To: Lucene Users <java-user@lucene.apache.org>
Message-id: <000501c7091c$b07aa370$0d1aa8c0@gel.local>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook, Build 10.0.6626
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
X-Spam-Report: AuthenticatedSender=yes, SenderIP=144.92.136.11
X-Spam-PmxInfo: Server=avs-8, Version=5.2.1.279297,
 Antispam-Engine: 2.5.0.283055, Antispam-Data: 2006.11.15.170433,
 SenderIP=144.92.136.11
X-Virus-Checked: Checked by ClamAV on apache.org

I have documents that have a variety of IDs and names by which people may
commonly refer to them.  There is one guaranteed unique ID and multiple
other names, synonyms, etc. that are "almost unique".  Furthermore, any
document may have text that refers to another document by any of these
various identifiers.

What I want is that when somebody does a search using one of these
identifiers, the document(s) identified by that identifier score the best.

For example, there could be document A identified by ABE-0000008, and
document B that has within it's content "this is kinda like ABE-0000008."  I
want a search for ABE-0000008 to hit both of these, but for A to score
better.

I already am already indexing the identifier in the same field with the rest
of the content for the docs, so I'm getting hits to both, just not sure how
to achieve the scoring I want.

Thanks,
Michael.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 04:47:00 2006
Return-Path: <java-user-return-24533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88675 invoked from network); 16 Nov 2006 04:47:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 04:47:00 -0000
Received: (qmail 57227 invoked by uid 500); 16 Nov 2006 04:47:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57192 invoked by uid 500); 16 Nov 2006 04:47:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57181 invoked by uid 99); 16 Nov 2006 04:47:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 20:47:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucener@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO nz-out-0102.google.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 20:46:48 -0800
Received: by nz-out-0102.google.com with SMTP id s1so203842nze
        for <java-user@lucene.apache.org>; Wed, 15 Nov 2006 20:46:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=kec2+8vKu9R4wqsyoCFWyKFNRAE3y7slV9IQLBZJYFNX7hU4X+QExdASGB+P7bk4CdKi86A64091589isbSqtom1MBMditD2B0ehXRn7Gb2vh906hAsH+hswhe9Fv6gYajzqBUNZS2bMwfxdVNKqCpxRBWHHwdv4Dw1Nb55rtBg=
Received: by 10.64.241.3 with SMTP id o3mr175862qbh.1163651980650;
        Wed, 15 Nov 2006 20:39:40 -0800 (PST)
Received: by 10.65.200.9 with HTTP; Wed, 15 Nov 2006 20:39:40 -0800 (PST)
Message-ID: <882004010611152039p1c829682p4adcd00705e66d14@mail.gmail.com>
Date: Wed, 15 Nov 2006 23:39:40 -0500
From: "Lucifer Hammer" <lucener@gmail.com>
To: java-user@lucene.apache.org
Subject: Another problem with the QueryParser
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_113573_32659500.1163651980545"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_113573_32659500.1163651980545
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I posted a few weeks ago with an issue that revolved around parens in a
query.  Since then, we've been testing other booleans and came across this
anomaly.  The test code is almost the same, I'm just modifying the queries.
Before I enter it as a bug, I wanted to run it by this group to see if I'm
just not looking at the boolean expression correctly.

Here's the issue:

I created an index with 5 documents, all have one field: "text", with the
following contents:
doc1:text:"Table Chair Spoon"
doc2:text:"Table Chair Spoon Fork"
doc3:text:"Table Spoon Fork"
doc4:text:"Chair Spoon Fork"
doc5:text:"Spoon Fork"

When I enter the query: "Table OR NOT Chair"  I get one hit, doc3
When I enter the query: "Table OR (NOT Chair)" I get 3 hits: doc1, doc2, and
doc3

I expected both queries to return 4 hits: doc1, doc2, doc3, doc5.

Is this a bug, or, am I not understanding the query language correctly?
 (There's two separate issues here: the first Query should have worked
correctly. The second might have the same problem that I found in my
previous post - with subqueries beginning with the NOT operator, however,
since NOT is a unary operator, I'm not sure I understand.

I'm attaching test code.  The program creates an index in the directory
which you pass into the main program.

Thanks!
L

-----------------------------------------------------------------------------------------------------


import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

import org.apache.lucene.search.Query;
import org.apache.lucene.search.Hits;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.index.Term;



import java.io.File;
import java.io.IOException;
import java.io.FileReader;

public class IndexTest {
    public static void create(File indexDir) throws IOException {

        IndexWriter writer = new IndexWriter(indexDir, new
                WhitespaceAnalyzer(), true);
        Document doc = new Document();
        doc.add(new Field("text",
                "Table Chair Spoon",
                Field.Store.YES,
                Field.Index.TOKENIZED,
                Field.TermVector.NO));

        writer.addDocument(doc);
        doc = new Document();
        doc.add(new Field("text",
                "Table Chair Spoon Fork",
                Field.Store.YES,
                Field.Index.TOKENIZED,
                Field.TermVector.NO));
        writer.addDocument(doc);
        doc = new Document();
        doc.add(new Field("text",
                "Table Spoon Fork",
                Field.Store.YES,
                Field.Index.TOKENIZED,
                Field.TermVector.NO));
        writer.addDocument(doc);
        doc = new Document();
        doc.add(new Field("text",
                "Chair Spoon Fork",
                Field.Store.YES,
                Field.Index.TOKENIZED,
                Field.TermVector.NO));
        writer.addDocument(doc);
        doc = new Document();
        doc.add(new Field("text",
                "Spoon Fork",
                Field.Store.YES,
                Field.Index.TOKENIZED,
                Field.TermVector.NO));
        writer.addDocument(doc);

        writer.close();
    }


    public static void query(File indexDir, String queryString) throws
IOException
    {
        Query query = null;
        Hits hits = null;

        try {
            QueryParser qp = new QueryParser("text",new
WhitespaceAnalyzer());
            qp.setDefaultOperator(QueryParser.OR_OPERATOR);
            query = qp.parse(queryString);
        } catch (Exception qe) {System.out.println(qe.toString());}
        if (query == null) return;
        System.out.println("Query: " + query.toString());
        IndexReader reader = IndexReader.open(indexDir);
        IndexSearcher searcher = new IndexSearcher(reader);

        hits = searcher.search(query);
        System.out.println("Hits: " + hits.length());

        for (int i = 0; i < hits.length(); i++)
        {
            System.out.println( hits.doc(i).get("text") + " ");
        }

        searcher.close();
        reader.close();

    }
    public static void main(String[] args) throws Exception {
        if (args.length != 1) {
            throw new Exception("Usage: " + IndexTest.class.getName() +
"<index dir>");
        }
        File indexDir = new File(args[0]);
        create(indexDir);
        query(indexDir,"Table OR NOT Chair");
        query(indexDir,"Table OR (NOT Chair)");
    }
}

------=_Part_113573_32659500.1163651980545--

From java-user-return-24534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 07:06:07 2006
Return-Path: <java-user-return-24534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32626 invoked from network); 16 Nov 2006 07:06:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 07:06:07 -0000
Received: (qmail 23085 invoked by uid 500); 16 Nov 2006 07:06:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23029 invoked by uid 500); 16 Nov 2006 07:06:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22952 invoked by uid 99); 16 Nov 2006 07:06:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:06:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 15 Nov 2006 23:05:53 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6E23C5B764; Wed, 15 Nov 2006 23:05:32 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 637407F403
	for <java-user@lucene.apache.org>; Wed, 15 Nov 2006 23:05:32 -0800 (PST)
Date: Wed, 15 Nov 2006 23:05:32 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Another problem with the QueryParser
In-Reply-To: <882004010611152039p1c829682p4adcd00705e66d14@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0611152254130.17920@hal.rescomp.berkeley.edu>
References: <882004010611152039p1c829682p4adcd00705e66d14@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


your first query only returns one document because there is only one
clause selecting results -- it doesn't matter whether you write "Table AND
NOT Chair" or "Table OR NOT Chair" -- the only clause building up a list
of documents is "Table" ... the "NOT Chair" part of the query can only
take away documents.

As i mentioned in response to your last question about QueryParser....

> 	...i strongly encourage you to train yourself to think in
> terms of MUST, MUST_NOT and SHOULD (which are represented in the query
> parser as the prefixes "+", "-" and the default) instead of in terms of
> AND, OR, and NOT ... Lucene's BooleanQuery (and thus Lucene's QueryParser)
> is not a strict Boolean Logic system, so it's best not to try and think
> of it like one.

If it were up to me, QueryParser wouldn't recognize AND OR and NOT as
keywords, in my experience they cause nothing but confusion...

: since NOT is a unary operator, I'm not sure I understand.

the key is that NOT isn't the only unary operator -- AND and OR are also
unary, they just map to the clauses on both sides unless the clause on one
side alreayd has another op ... they are also badly named, their real
names are MUST and SHOULD.  the way ot think about your query is ...

	Table OR NOT Chair =>    SHOULD(Table) NOT(Chair)

...that may not make any more sense then it did before, but hopefully thta
just further illustrates my point that using AND OR and NOT is an evil
thing to do ... avoid them like the plauge and use "+" and "-" instead.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 14:20:51 2006
Return-Path: <java-user-return-24535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10695 invoked from network); 16 Nov 2006 14:20:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 14:20:49 -0000
Received: (qmail 1573 invoked by uid 500); 16 Nov 2006 14:20:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1503 invoked by uid 500); 16 Nov 2006 14:20:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1488 invoked by uid 99); 16 Nov 2006 14:20:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 06:20:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [68.236.116.36] (HELO enzo.optaros.com) (68.236.116.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 06:20:35 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by enzo.optaros.com (Postfix) with ESMTP id 6D9CFB1C12B
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 09:20:11 -0500 (EST)
X-DSPAM-Result: Innocent
X-DSPAM-Processed: Thu Nov 16 09:20:11 2006
X-DSPAM-Confidence: 0.9997
X-DSPAM-Probability: 0.0000
X-DSPAM-Signature: 455c739b296311804284693
X-DSPAM-Factors: 27,
X-Virus-Scanned: amavisd-new at 
X-Spam-Score: -3.954
X-Spam-Level: 
Received: from enzo.optaros.com ([127.0.0.1])
	by localhost (enzo.optaros.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id JZ-qdWIwHwPK for <java-user@lucene.apache.org>;
	Thu, 16 Nov 2006 09:20:11 -0500 (EST)
Received: from enzo.optaros.com (enzo.optaros.com [10.88.1.6])
	by enzo.optaros.com (Postfix) with ESMTP id 08FB4B1C128
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 09:20:11 -0500 (EST)
From: Phil Rosen <prosen@optaros.com>
To: <java-user@lucene.apache.org>
Subject: RE: newbie scoring question
Date: Thu, 16 Nov 2006 09:20:10 -0500 (EST)
Message-ID: <000a01c7098a$4fe9d5d0$a3640a0a@DJ8P5VB1PR>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Thread-Index: AccJHMhyGj317iryR6mN70EA9GOdhwAbMfvA
In-Reply-To: <000501c7091c$b07aa370$0d1aa8c0@gel.local>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.954 tagged_above=-10 required=6.6
	tests=[ALL_TRUSTED=-1.8, AWL=0.545, BAYES_00=-2.599, DSPAM_HAM=-0.1]

You can set the boost on specific terms within your query, I believe the 
syntax is:

Id_field:someterm^2

So you can make a specific field's relevancy for a given term higher 
compared to another term using something like

Id_field:someterm^2 || blob_field:someterm

Im kind of a newb myself but I think this should work for you.

-----Original Message-----
From: Michael Rusch [mailto:mcrusch@facstaff.wisc.edu]
Sent: Wednesday, November 15, 2006 8:15 PM
To: Lucene Users
Subject: newbie scoring question

I have documents that have a variety of IDs and names by which people may
commonly refer to them.  There is one guaranteed unique ID and multiple
other names, synonyms, etc. that are "almost unique".  Furthermore, any
document may have text that refers to another document by any of these
various identifiers.

What I want is that when somebody does a search using one of these
identifiers, the document(s) identified by that identifier score the best.

For example, there could be document A identified by ABE-0000008, and
document B that has within it's content "this is kinda like ABE-0000008."  I
want a search for ABE-0000008 to hit both of these, but for A to score
better.

I already am already indexing the identifier in the same field with the rest
of the content for the docs, so I'm getting hits to both, just not sure how
to achieve the scoring I want.

Thanks,
Michael.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 15:14:20 2006
Return-Path: <java-user-return-24536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31262 invoked from network); 16 Nov 2006 15:14:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 15:14:16 -0000
Received: (qmail 44292 invoked by uid 500); 16 Nov 2006 15:14:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44234 invoked by uid 500); 16 Nov 2006 15:14:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44189 invoked by uid 99); 16 Nov 2006 15:14:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 07:14:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 07:14:08 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kAGFDif4027991
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 16:13:44 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 827C48BD3B
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 16:13:44 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 31212-01 for <java-user@lucene.apache.org>;
 Thu, 16 Nov 2006 16:13:43 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 614F88BD0A
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 16:13:43 +0100 (CET)
Message-ID: <455C8027.5060403@uni-hd.de>
Date: Thu, 16 Nov 2006 16:13:43 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Best approach for exact Prefix Field Query
References: <4559C566.9000606@uni-hd.de> <DA22440E-F40F-4923-A847-D5F379C31989@ehatchersolutions.com> <4559EC67.7040105@uni-hd.de> <27EB1225-C43C-4A28-A354-1A664492B142@ehatchersolutions.com>
In-Reply-To: <27EB1225-C43C-4A28-A354-1A664492B142@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

hi Erik,

> "action and" is likely not a single Term, so you'll want to create a
> SpanNearQuery of those individual terms (that match the way they were
> when analyzed and indexed, mind you) and use a SpanNearQuery inside a
> SpanFirstQuery.   Make sense?
Yes, it works (see below)!
... but with my Java-App I have the Problem that I need to combine this
SpanFirstQuery with a Query from the QueryParser,
i.e. from the Webform I get the SpanFirstQuery (which I am just
.split'ing as inJRuby Sample) and I get another inputfield with a query
I normally parse with the QueryParser.

Is there a way to merge these two query-classes?

tia,
martin


   SpanFirstQuery = org.apache.lucene.search.spans.SpanFirstQuery
   SpanTermQuery  = org.apache.lucene.search.spans.SpanTermQuery
   SpanQuery  = org.apache.lucene.search.spans.SpanQuery
   SpanNearQuery  = org.apache.lucene.search.spans.SpanNearQuery

   Term = org.apache.lucene.index.Term

   qs = search.split(/\s/)

   spanq_ar =SpanQuery[].new(qs.length)

   for i in 0...qs.length
      spanq_ar[i] = SpanTermQuery.new( Term.new("TI", qs[i] ) )
   end

   sp = SpanFirstQuery.new(SpanNearQuery.new(spanq_ar,1,true),
spanq_ar.length)
   hits = searcher.search(sp)
   for i in 0...hits.length
      puts hits.doc(i).getField("kurz")
   end



-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 15:18:26 2006
Return-Path: <java-user-return-24537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32071 invoked from network); 16 Nov 2006 15:18:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 15:18:26 -0000
Received: (qmail 52754 invoked by uid 500); 16 Nov 2006 15:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52713 invoked by uid 500); 16 Nov 2006 15:18:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52683 invoked by uid 99); 16 Nov 2006 15:18:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 07:18:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.152.235.220] (HELO l98upmt3.hewitt.com) (204.152.235.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 07:18:12 -0800
Received: from linkap11.hewitt.com (linkap11.hewitt.com [10.20.63.2])
	by l98upmt3.hewitt.com (8.13.4/8.13.4) with ESMTP id kAGFGoDB013757
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 09:17:51 -0600 (CST)
Received: from 10.20.63.62 by linkap11.hewitt.com with ESMTP (Tumbleweed
 MMS SMTP Relay); Thu, 16 Nov 2006 09:17:37 -0600
X-Server-Uuid: 8E43C66C-9DC0-4EF6-8749-D8C04BB61E49
MIME-Version: 1.0
X-MIMETrack: S/MIME Sign by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 11/16/2006 08:46:59 PM, Serialize by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 11/16/2006 08:46:59 PM, Serialize complete at 11/16/2006 08:46:59 PM,
 S/MIME Sign failed at 11/16/2006 08:46:59 PM: The cryptographic key was
 not found, S/MIME Sign by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 11/16/2006 08:47:24 PM, Serialize by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 11/16/2006 08:47:24 PM, Serialize complete at 11/16/2006 08:47:24 PM,
 S/MIME Sign failed at 11/16/2006 08:47:24 PM: The cryptographic key was
 not found, Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.5FP1 HF52|June 29, 2006) at 11/16/2006 09:17:38
 AM, Serialize complete at 11/16/2006 09:17:38 AM
To: java-user@lucene.apache.org
Subject: Urgent : Specific string query search
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OF2B711977.F786FEAE-ON65257228.0053E2EC-65257228.0053FDB6@hewitt.com>
From: "Krishnendra Nandi" <krishnendra.nandi@hewitt.com>
Date: Thu, 16 Nov 2006 20:47:22 +0530
X-HANotesOU: Gurgaon
X-WSS-ID: 69425E9B3DW23983939-02-01
Content-Type: multipart/alternative;
 boundary="=_alternative 0053FDB465257228_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0053FDB465257228_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi all, 

I have a specific string query like "Jakarta:" How do i get that? I am 
using standardAnalyzer and it seems as if it is stripping ":" and it is 
simply searching for "Jakarta".
I have used WhiteSpaceAnalyzer also and its working fine for ":" but I 
think it has some other limitations. The limitations of WhiteSpaceAnalyzer 
which I have noticed are as follows:
1. It needs the search criteria in the proper case i.e for searching 
"Jakarta" I cant give "jakarta" as my search criteria.
2. WhiteSpaceAnalyzer is not supporting FIELD:TEXT kind of search.
e.g ISSUE_TITLE:test
where ISSUE_TITLE is the field in which test is to be searched. But 
standardAnalyzer supports this.

May be the limitations I am seeing is because of my code.

Can you please help me out as to how I can do a search like "Jakarta:". I 
would appreciate if could please send me the code snippet doing this kind 
of search.


Thanks & Regards
Krishnendra Nandi

 
The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient 
is strictly prohibited.



--=_alternative 0053FDB465257228_=--


From java-user-return-24538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 17:50:25 2006
Return-Path: <java-user-return-24538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95802 invoked from network); 16 Nov 2006 17:50:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 17:50:25 -0000
Received: (qmail 55522 invoked by uid 500); 16 Nov 2006 17:50:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55494 invoked by uid 500); 16 Nov 2006 17:50:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55483 invoked by uid 99); 16 Nov 2006 17:50:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 09:50:27 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 09:50:15 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1022173nfc
        for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 09:49:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=J/eal406mn6PkP8DdZzKlr5bDLZtUOg1Idz3aXi/r79XLg5+yVjNxw1o0c0zOH9CC1MS7rhjA6uFOBkhuMXbJZVIiTaNZVIYW2EUeOwhk14YBafqMdqM+x+1no/9KnDfeCKa8QkGedaIJ7Q5IDKwGjvOF3eKAs+tvsh10UFh8bE=
Received: by 10.82.105.13 with SMTP id d13mr99947buc.1163699392786;
        Thu, 16 Nov 2006 09:49:52 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Thu, 16 Nov 2006 09:49:52 -0800 (PST)
Message-ID: <359a92830611160949w55d6d398y79f0dba75ebe78ad@mail.gmail.com>
Date: Thu, 16 Nov 2006 12:49:52 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Urgent : Specific string query search
In-Reply-To: <OF2B711977.F786FEAE-ON65257228.0053E2EC-65257228.0053FDB6@hewitt.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_73839_3625491.1163699392751"
References: <OF2B711977.F786FEAE-ON65257228.0053E2EC-65257228.0053FDB6@hewitt.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_73839_3625491.1163699392751
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First, I'd ask why you need to search on punctuation. This often leads you
into an overly-complex place. My first suggestion is that you re-think
whether that's desirable. If it's not, just use different analyzer at index
and search time.

If it is desirable, then you probably need to make your own analyzer that
does the same thing as WhitespaceAnalyzer but just lowercases the tokens and
use that in *both* indexing and querying. The actual code to create your own
analyzer is very, very, very small. See the Lucene source for
WhitespaceAnalyzer and WhitespaceTokenizer.........

As far as I know, WhiteSpaceAnalyzer does support the field:text format. Try
getting a copy of Luke (google lucene luke) and use that to examine your
index. You can fire queries at it using, for instance, WhitespaceAnalyzer
and see what actually happens. I'm betting that you're aren't executing the
query you think you are. Could you post a code snippet illustrating the
problem?

Best
Erick

On 11/16/06, Krishnendra Nandi <krishnendra.nandi@hewitt.com> wrote:
>
> Hi all,
>
> I have a specific string query like "Jakarta:" How do i get that? I am
> using standardAnalyzer and it seems as if it is stripping ":" and it is
> simply searching for "Jakarta".
> I have used WhiteSpaceAnalyzer also and its working fine for ":" but I
> think it has some other limitations. The limitations of WhiteSpaceAnalyzer
> which I have noticed are as follows:
> 1. It needs the search criteria in the proper case i.e for searching
> "Jakarta" I cant give "jakarta" as my search criteria.
> 2. WhiteSpaceAnalyzer is not supporting FIELD:TEXT kind of search.
> e.g ISSUE_TITLE:test
> where ISSUE_TITLE is the field in which test is to be searched. But
> standardAnalyzer supports this.
>
> May be the limitations I am seeing is because of my code.
>
> Can you please help me out as to how I can do a search like "Jakarta:". I
> would appreciate if could please send me the code snippet doing this kind
> of search.
>
>
> Thanks & Regards
> Krishnendra Nandi
>
>
> The information contained in this e-mail and any accompanying documents
> may contain information that is confidential or otherwise protected from
> disclosure. If you are not the intended recipient of this message, or if
> this message has been addressed to you in error, please immediately alert
> the sender by reply e-mail and then delete this message, including any
> attachments. Any dissemination, distribution or other use of the contents of
> this message by anyone other than the intended recipient
> is strictly prohibited.
>
>
>
>

------=_Part_73839_3625491.1163699392751--

From java-user-return-24539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 20:13:45 2006
Return-Path: <java-user-return-24539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44325 invoked from network); 16 Nov 2006 20:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 20:13:31 -0000
Received: (qmail 17458 invoked by uid 500); 16 Nov 2006 20:13:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17436 invoked by uid 500); 16 Nov 2006 20:13:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17415 invoked by uid 99); 16 Nov 2006 20:13:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 12:13:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 12:13:20 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D5EDB5B779; Thu, 16 Nov 2006 12:12:55 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0D4A67F403
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 12:12:55 -0800 (PST)
Date: Thu, 16 Nov 2006 12:12:55 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: newbie scoring question
In-Reply-To: <000a01c7098a$4fe9d5d0$a3640a0a@DJ8P5VB1PR>
Message-ID: <Pine.LNX.4.58.0611161211450.27690@hal.rescomp.berkeley.edu>
References: <000a01c7098a$4fe9d5d0$a3640a0a@DJ8P5VB1PR>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: So you can make a specific field's relevancy for a given term higher
: compared to another term using something like
:
: Id_field:someterm^2 || blob_field:someterm
:
: Im kind of a newb myself but I think this should work for you.

Indeed that is the way i would recommend solving this problem (which i use
frequently)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 20:22:49 2006
Return-Path: <java-user-return-24540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54390 invoked from network); 16 Nov 2006 20:22:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 20:22:49 -0000
Received: (qmail 35659 invoked by uid 500); 16 Nov 2006 20:22:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35622 invoked by uid 500); 16 Nov 2006 20:22:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35611 invoked by uid 99); 16 Nov 2006 20:22:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 12:22:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 12:22:39 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8103F5B779; Thu, 16 Nov 2006 12:22:19 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7D1887F403
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 12:22:19 -0800 (PST)
Date: Thu, 16 Nov 2006 12:22:19 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Urgent : Specific string query search
In-Reply-To: <359a92830611160949w55d6d398y79f0dba75ebe78ad@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0611161218130.27690@hal.rescomp.berkeley.edu>
References: <OF2B711977.F786FEAE-ON65257228.0053E2EC-65257228.0053FDB6@hewitt.com>
 <359a92830611160949w55d6d398y79f0dba75ebe78ad@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: As far as I know, WhiteSpaceAnalyzer does support the field:text format. Try

More specificaly, the bit of syntax  field:value  ...or more generally
field:"some longer value" is parsed by QueryParser regardless of what
Analyzer you use.  QP is what extracts the field name and the colon, and
then gives the Analyzer the string:  some longer value

pay carefull attention that when you say "XXXX dosn't work with
WhitespaceAnalyzer" that you are using WhitespaceAnalyzer both when you
index your text and when you query (ie: set it on the IndexWriter, and on
the QueryParser) otherwise there will be a large disconnect between the
terms in your index, and the TermQueries the QueryPArser gives you...

	http://wiki.apache.org/jakarta-lucene/AnalysisParalysis


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 20:41:50 2006
Return-Path: <java-user-return-24541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60772 invoked from network); 16 Nov 2006 20:41:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 20:41:49 -0000
Received: (qmail 92341 invoked by uid 500); 16 Nov 2006 20:41:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92314 invoked by uid 500); 16 Nov 2006 20:41:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92293 invoked by uid 99); 16 Nov 2006 20:41:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 12:41:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucener@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO nz-out-0102.google.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 12:41:35 -0800
Received: by nz-out-0102.google.com with SMTP id s1so368495nze
        for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 12:41:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H8041ALjYA6lGfnhBjNph1sZXRttItd9ei5OW2J1kMdPFMWhIjaCo1OoK6ubjxj8916eMRQNphyzrp2uhTQDp8e8h6n6cMHapRSVH45rkXLZvwdLa14g4r4CcUx86j7m0AScYl4O9GMbKENwhgUmDLIWYbxGnXPSpxt6N8svE/4=
Received: by 10.65.188.4 with SMTP id q4mr984950qbp.1163709674093;
        Thu, 16 Nov 2006 12:41:14 -0800 (PST)
Received: by 10.65.200.9 with HTTP; Thu, 16 Nov 2006 12:41:14 -0800 (PST)
Message-ID: <882004010611161241s100017bu81fe52fe9d42fbb3@mail.gmail.com>
Date: Thu, 16 Nov 2006 15:41:14 -0500
From: "Lucifer Hammer" <lucener@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Another problem with the QueryParser
In-Reply-To: <Pine.LNX.4.58.0611152254130.17920@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_123638_22051973.1163709674040"
References: <882004010611152039p1c829682p4adcd00705e66d14@mail.gmail.com>
	 <Pine.LNX.4.58.0611152254130.17920@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_123638_22051973.1163709674040
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Hi Chris,

Thanks for your response.  If it's alright with you,  I'd like to spell it
out, just so you can confirm that I'm understanding what you're saying:

Here's the Query: "Table OR NOT Chair"

I thought the results I should expect are:
    All documents in the index that have the word "Table" and all documents
in the index that don't have the word "Chair"

However, if I understand what you're saying, then what's really happening
is:
   Find all documents in the index with the word "Table", and then from that
list, remove any  docs that don't have "Chair"?


If the latter is true, then how are these two queries different:
     "Table OR NOT Chair"
     "Table AND NOT Chair"


Along these same lines, I would've expected a query of "NOT Table" to return
all the docs in the index that don't contain "Table",  kinda like "* NOT
Table" (where * represents all the docs in the index). However, if I
understood what you said, this will return no results, cause there isn't any
portion of query that adds docs to the result set.

Thanks again for all your help!

L



On 11/16/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> your first query only returns one document because there is only one
> clause selecting results -- it doesn't matter whether you write "Table AND
>
> NOT Chair" or "Table OR NOT Chair" -- the only clause building up a list
> of documents is "Table" ... the "NOT Chair" part of the query can only
> take away documents.
>
> As i mentioned in response to your last question about QueryParser....
>
> >       ...i strongly encourage you to train yourself to think in
> > terms of MUST, MUST_NOT and SHOULD (which are represented in the query
> > parser as the prefixes "+", "-" and the default) instead of in terms of
> > AND, OR, and NOT ... Lucene's BooleanQuery (and thus Lucene's
> QueryParser)
> > is not a strict Boolean Logic system, so it's best not to try and think
> > of it like one.
>
> If it were up to me, QueryParser wouldn't recognize AND OR and NOT as
> keywords, in my experience they cause nothing but confusion...
>
> : since NOT is a unary operator, I'm not sure I understand.
>
> the key is that NOT isn't the only unary operator -- AND and OR are also
> unary, they just map to the clauses on both sides unless the clause on one
>
> side alreayd has another op ... they are also badly named, their real
> names are MUST and SHOULD.  the way ot think about your query is ...
>
>        Table OR NOT Chair =>    SHOULD(Table) NOT(Chair)
>
> ...that may not make any more sense then it did before, but hopefully thta
>
> just further illustrates my point that using AND OR and NOT is an evil
> thing to do ... avoid them like the plauge and use "+" and "-" instead.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_123638_22051973.1163709674040--

From java-user-return-24542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 21:51:52 2006
Return-Path: <java-user-return-24542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79341 invoked from network); 16 Nov 2006 21:51:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 21:51:50 -0000
Received: (qmail 23866 invoked by uid 500); 16 Nov 2006 21:51:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23836 invoked by uid 500); 16 Nov 2006 21:51:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23825 invoked by uid 99); 16 Nov 2006 21:51:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 13:51:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 13:51:40 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 66AF25B779; Thu, 16 Nov 2006 13:51:15 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E2DFF7F403
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 13:51:15 -0800 (PST)
Date: Thu, 16 Nov 2006 13:51:15 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Another problem with the QueryParser
In-Reply-To: <882004010611161241s100017bu81fe52fe9d42fbb3@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0611161345270.31357@hal.rescomp.berkeley.edu>
References: <882004010611152039p1c829682p4adcd00705e66d14@mail.gmail.com> 
 <Pine.LNX.4.58.0611152254130.17920@hal.rescomp.berkeley.edu>
 <882004010611161241s100017bu81fe52fe9d42fbb3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

:    Find all documents in the index with the word "Table", and then from that
: list, remove any  docs that don't have "Chair"?

correct.

: If the latter is true, then how are these two queries different:
:      "Table OR NOT Chair"
:      "Table AND NOT Chair"

They aren't.  Those queries are functionally...
	Table -Chair
	+Table -Chair

Since "Table" is the only thing matching anything in both queries, they
are equivilent.

Things like these however...
	Phone OR Table OR NOT Chair
	Phone AND Table AND NOT Chair

are...
	Phone Table -Chair
	+Phone +Table -Chair

...so they are different, the first requiring either Phone or Table, the
second requireing both -- neither permitting results which match Chair.


: Along these same lines, I would've expected a query of "NOT Table" to return
: all the docs in the index that don't contain "Table",  kinda like "* NOT
: Table" (where * represents all the docs in the index). However, if I
: understood what you said, this will return no results, cause there isn't any
: portion of query that adds docs to the result set.

correct ... Lucene is not a Boolean Logic system ... it is a scoring
system. "NOT Chair" doesn't score anything, so nothing matches.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 16 23:26:48 2006
Return-Path: <java-user-return-24543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8193 invoked from network); 16 Nov 2006 23:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2006 23:26:47 -0000
Received: (qmail 49161 invoked by uid 500); 16 Nov 2006 23:26:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49134 invoked by uid 500); 16 Nov 2006 23:26:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49123 invoked by uid 99); 16 Nov 2006 23:26:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 15:26:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 15:26:37 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kAGNQBv1010032
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 01:26:11 +0200
Received: from [10.142.3.12] ([10.142.3.12]) by nimitz with ESMTP
	 id mbh1pne0; 17 Nov 2006 01:26:00 +0200
Message-ID: <455CF385.3040306@teamware.com>
Date: Fri, 17 Nov 2006 10:25:57 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing Performance issue
References: <7275098.post@talk.nabble.com>
In-Reply-To: <7275098.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

spinergywmy wrote:
> Hi,
> 
>    I having this indexing the pdf file performance issue. It took me more
> than 10 sec to index a pdf file about 200kb. Is it because I only have a
> segment file? How can I make the indexing performance better?

If you're using the log4j PDFBox jar file, you must make sure you ensure pdfbox 
categories are disabled, otherwise the log4j statements in pdfbox really slow it 
down even if there's no appender for its Loggers.  Alternatively use the non 
log4j PDFBox jar file.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 17 02:49:12 2006
Return-Path: <java-user-return-24544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56527 invoked from network); 17 Nov 2006 02:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 02:49:11 -0000
Received: (qmail 48756 invoked by uid 500); 17 Nov 2006 02:49:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48738 invoked by uid 500); 17 Nov 2006 02:49:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48726 invoked by uid 99); 17 Nov 2006 02:49:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 18:49:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 18:49:02 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kAH2mPgl028465
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 04:48:26 +0200
Received: from [10.142.3.12] ([10.142.3.12]) by nimitz with ESMTP
	 id mbh4csj4; 17 Nov 2006 04:48:00 +0200
Message-ID: <455D22FA.8070400@teamware.com>
Date: Fri, 17 Nov 2006 13:48:26 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: IOException question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have the IndexWriter.infoStream set to System.out and get the following

merging segments _4m (2 docs) _4n (1 docs) into _4o (3 docs)
java.io.IOException: Cannot delete PathToDB\_29.cfs; Will re-try later.
java.io.IOException: Cannot delete PathToDB\_29.cfs; Will re-try later.

Is this normal?  IndexWriter.deleteFiles() is giving the message and it 
explicitly catches the IOException which is what makes me think it might be normal.

On the other hand, I'm a newbie, so I'm probably doing something wrong, but I 
can't figure out what.  It happens consistently when I open the index and add a 
document to it.  It doesn't seem to affect the indexes at all.

Any ideas what can cause this?
Antony




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 17 03:16:35 2006
Return-Path: <java-user-return-24545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61881 invoked from network); 17 Nov 2006 03:16:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 03:16:34 -0000
Received: (qmail 73157 invoked by uid 500); 17 Nov 2006 03:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73122 invoked by uid 500); 17 Nov 2006 03:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73111 invoked by uid 99); 17 Nov 2006 03:16:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 19:16:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 19:16:24 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 91A4CDC8978
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 22:16:00 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by db2.internal (MEProxy); Thu, 16 Nov 2006 22:16:03 -0500
X-Sasl-enc: ZisN+nI1hML/OPZ7dLRCrGNdOINMKnzeGHZPwTMl56Sw 1163733285
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id A9BF6159BC
	for <java-user@lucene.apache.org>; Thu, 16 Nov 2006 22:14:45 -0500 (EST)
Message-ID: <455D291B.2000704@mikemccandless.com>
Date: Thu, 16 Nov 2006 22:14:35 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IOException question
References: <455D22FA.8070400@teamware.com>
In-Reply-To: <455D22FA.8070400@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antony Bowesman wrote:
> Hi,
> 
> I have the IndexWriter.infoStream set to System.out and get the following
> 
> merging segments _4m (2 docs) _4n (1 docs) into _4o (3 docs)
> java.io.IOException: Cannot delete PathToDB\_29.cfs; Will re-try later.
> java.io.IOException: Cannot delete PathToDB\_29.cfs; Will re-try later.
> 
> Is this normal?  IndexWriter.deleteFiles() is giving the message and it 
> explicitly catches the IOException which is what makes me think it might 
> be normal.

Do you also have a reader open against this index?  If yes, then this is 
totally normal on Windows.  A reader holds open the segments cfs files 
that it is using, so when the writer tries to delete them (because they 
were merged) the delete fails and Lucene will try again later.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 17 03:44:40 2006
Return-Path: <java-user-return-24546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66917 invoked from network); 17 Nov 2006 03:44:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 03:44:40 -0000
Received: (qmail 10089 invoked by uid 500); 17 Nov 2006 03:44:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10070 invoked by uid 500); 17 Nov 2006 03:44:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10043 invoked by uid 99); 17 Nov 2006 03:44:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 19:44:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 16 Nov 2006 19:44:27 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kAH3i2Bo000530
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 05:44:02 +0200
Received: from [10.142.3.12] ([10.142.3.12]) by nimitz with ESMTP
	 id mbh58638; 17 Nov 2006 05:44:00 +0200
Message-ID: <455D3003.9070207@teamware.com>
Date: Fri, 17 Nov 2006 14:44:03 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IOException question
References: <455D22FA.8070400@teamware.com> <455D291B.2000704@mikemccandless.com>
In-Reply-To: <455D291B.2000704@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

> Do you also have a reader open against this index?  If yes, then this is 
> totally normal on Windows.  A reader holds open the segments cfs files 
> that it is using, so when the writer tries to delete them (because they 
> were merged) the delete fails and Lucene will try again later.

Aha, yes, I have a searcher open with a reader.  Thanks for explanation.
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 17 09:04:46 2006
Return-Path: <java-user-return-24547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40424 invoked from network); 17 Nov 2006 09:04:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 09:04:45 -0000
Received: (qmail 12901 invoked by uid 500); 17 Nov 2006 09:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12280 invoked by uid 500); 17 Nov 2006 09:04:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12269 invoked by uid 99); 17 Nov 2006 09:04:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 01:04:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stephan.spat@joanneum.at designates 143.224.24.130 as permitted sender)
Received: from [143.224.24.130] (HELO mail.healthgate.at) (143.224.24.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 01:04:31 -0800
Received: by mail.healthgate.at (Postfix, from userid 65534)
	id 86A5B10FD32; Fri, 17 Nov 2006 10:09:20 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by mail.healthgate.at (Postfix) with ESMTP id 97D5F10FD9C
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 10:09:19 +0100 (CET)
Received: from [143.224.23.166] (msgw166.joanneum.ac.at [143.224.23.166])
	by mail.healthgate.at (Postfix) with ESMTP id D95A610E936
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 10:09:15 +0100 (CET)
Message-ID: <455D7B05.2040006@joanneum.at>
Date: Fri, 17 Nov 2006 10:04:05 +0100
From: Stephan Spat <stephan.spat@joanneum.at>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Q: Searching - Use of field to increase score, without filtering
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by AMaViS snapshot-20020531
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on 
	msgs130.healthgate.at
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-4.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=2.64

Hello everybody!

I used Weka-classification to classify document into different classes. 
In Lucene I saved the predicted classes (besides the document + 
metadata) for these docs into a field called preclasses. Now I would 
like to use this field to boost the score, if a userquery agree to the 
value of this field. But I don't like to filter by this field, which 
means: if a userquery for the field preclasses fits to the value of the 
field, all documents (indenpentent from the value  of the field 
preclasses) should be returned, but for documents where the value of the 
preclasses field matches to the user-input should be used for boosting 
the score (therefore I set the boostfactor of the field preclasses to a 
higher value than 1).

In short: The field preclasses should be used as a booster and not as a 
filter! Is this possible? And how?

Thanks a lot!

Stephan Spat


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 17 10:05:20 2006
Return-Path: <java-user-return-24548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57772 invoked from network); 17 Nov 2006 10:05:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 10:05:19 -0000
Received: (qmail 4708 invoked by uid 500); 17 Nov 2006 10:05:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4226 invoked by uid 500); 17 Nov 2006 10:05:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4214 invoked by uid 99); 17 Nov 2006 10:05:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 02:05:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 02:05:07 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kAHA4i1n031524
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 11:04:44 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 794A88BD43
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 11:04:44 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 17726-04 for <java-user@lucene.apache.org>;
 Fri, 17 Nov 2006 11:04:43 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 6AEFB8BD33
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 11:04:43 +0100 (CET)
Message-ID: <455D893B.5070108@uni-hd.de>
Date: Fri, 17 Nov 2006 11:04:43 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Search "C++" with Solrs WordDelimiterFilter
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

hi all,

I would like to implement the possibility to search for "C++" and "C#" -
I found in the archive the hint to customize the appropriate *.jj  file
with the code in NutchAnalysis.jj:

     // irregular words
| <#IRREGULAR_WORD: (<C_PLUS_PLUS>|<C_SHARP>)>
| <#C_PLUS_PLUS: ("C"|"c") "++" >
| <#C_SHARP: ("C"|"c") "#" >

I am using a custum analyzer with the yonik's WordDelimiterFilter:

@Override
	public TokenStream tokenStream(String fieldName, Reader reader) {
				
		return new LowerCaseFilter(new WordDelimiterFilter(new
WhitespaceTokenizer(reader),1,1,1,1,1 ));
	}


But as I can see WordDelimiterFilter uses only the WhiteSpaceTokenizer
which does not use a Java-CC file.

What would be the best way to integrate (anyway, preferably not changing
lucene-src) this feature?

Should I override the WhitespaceTokenizer and using java-cc ( are there
any docs on doing this?).

tia,
martin





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 17 12:38:09 2006
Return-Path: <java-user-return-24549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99286 invoked from network); 17 Nov 2006 12:38:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 12:38:07 -0000
Received: (qmail 34171 invoked by uid 500); 17 Nov 2006 12:38:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34124 invoked by uid 500); 17 Nov 2006 12:38:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34101 invoked by uid 99); 17 Nov 2006 12:38:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 04:38:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 04:37:56 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1294622nfc
        for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 04:37:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=HBL/wAjGp+5d4DoBk0U4hjXGEqs3vsbhAYScRzvyj3YsQSvOTjRC/w3BDmKgzHsRunwpBiu9x1QHt2qxRLd+trsokU2Vhf3rYxFR3GkN+KOAWJlbZR9g3steR2UkolA+3KZZultcJFFqmke7J5EPZaEAtK6ATb2F1qc+60PlElw=
Received: by 10.82.190.2 with SMTP id n2mr215837buf.1163767053347;
        Fri, 17 Nov 2006 04:37:33 -0800 (PST)
Received: by 10.82.147.11 with HTTP; Fri, 17 Nov 2006 04:37:33 -0800 (PST)
Message-ID: <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com>
Date: Fri, 17 Nov 2006 13:37:33 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Fwd: Hibernate Lucene trademark issues
In-Reply-To: <4558ECAA.2050904@hibernate.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_81319_13972485.1163767053302"
References: <454F459B.7000100@hibernate.org>
	 <52c3ddca0611112217m1ccc1798x67deae19c56ee9c7@mail.gmail.com>
	 <4558ECAA.2050904@hibernate.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_81319_13972485.1163767053302
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Emanuael,
I would be glad to hear your answer here (on user list).
Regards,
Lukas

---------- Forwarded message ----------
From: Emmanuel Bernard <emmanuel@hibernate.org>
Date: Nov 13, 2006 11:07 PM
Subject: Re: Hibernate Lucene trademark issues
To: java-dev@lucene.apache.org, lukas.vlcek@gmail.com

Hi Lukas,
I'd be happy to answer your question, but I don't think Lucene dev is
the appropriate area for that kind of discussion.
let's move this discussion here
http://forum.hibernate.org/viewforum.php?f=9 (or in the Lucene User list
if you want to).

Emmanuel

Lukas Vlcek wrote:
>
> Hi Emmanuel,
>
> I am interested in you solution. I have a plan to use lucene and hibernate
> in my next project and search will play very important role
> (*stake-holder*
> functionality). I have heard of
> comapss<http://www.opensymphony.com/compass/>project which introduces
> searching (lucene) layer on top of hibernate also.
> I haven't had a change to study it in detail yet.
>
> Do you think you could give me some high level comments about your
> motivation for implementing lucene search directly in hibernate code,
> couldn't you just use compass project? Is there any fundamental difference
> between your approach and comapss?
>
> Many thanks,
> Lukas
>
> On 11/6/06, Emmanuel Bernard <emmanuel@hibernate.org> wrote:
> >
> > Hi guys,
> > I'm Emmanuel Bernard from JBoss.
> > I'm the current lead developer of the Hibernate Lucene integration
> module.
> > The goal of this project is to facilitate the integration of a search
> > capability to Hibernate based applications. And guess what, I use Lucene
> > ;-)
> >
> >
>
http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
> >
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> >
> > I realized this week end that the 'Hibernate Lucene' name might infringe
> > the Apache Lucene trademark policy.
> > http://www.cafepress.com/lucene/ seems to state that Lucene is a
> > trademark of the Apache Software Foundation (nice golf shirt BTW)
> > But I wasn't able to find any document explaining the fair use of the
> > Lucene brand (the license as well as the notice seem to be silent on
> > this subject).
> >
> > Even if Lucene in not trademarked, what do you consider a fair use of
> > your brand? I'm happy to rename my project, I guess the initial choice
> > was more a tribute to your project than anything else.
> >
> > Emmanuel
> >
> > PS: please forward this email to the appropriate persons if this is not
> > the case already (PMC or whatever)
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-dev-help@lucene.apache.org
> >
> >
>

------=_Part_81319_13972485.1163767053302--

From java-user-return-24550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 17 16:47:10 2006
Return-Path: <java-user-return-24550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91522 invoked from network); 17 Nov 2006 16:47:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 16:47:09 -0000
Received: (qmail 82395 invoked by uid 500); 17 Nov 2006 16:47:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82349 invoked by uid 500); 17 Nov 2006 16:47:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82336 invoked by uid 99); 17 Nov 2006 16:47:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 08:47:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 08:46:57 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gl6rN-0000qj-8e
	for java-user@lucene.apache.org; Fri, 17 Nov 2006 08:46:37 -0800
Message-ID: <7405959.post@talk.nabble.com>
Date: Fri, 17 Nov 2006 08:46:37 -0800 (PST)
From: John Pailet <9i7svel2zr6uujn@jetable.org>
To: java-user@lucene.apache.org
Subject: Boost Document
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: 9i7svel2zr6uujn@jetable.org
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I have a problem with the BOOST DOCUMENT method.

When I have 2 documents that have exactly the same data, but different boost
value.
The order does not respect the boost value. It the following exemples, the
first document of the search is the document with the lower boost value...
is it a bug ?

Here is my test code:

public void testIt() throws IOException, ParseException
	{
		RAMDirectory ramDir = new RAMDirectory();
		IndexWriter writer = new IndexWriter(ramDir, new StandardAnalyzer(),
true);
		
		Document doc1 = new Document();
		Field word = new Field("WORD","home",
Field.Store.YES,Field.Index.TOKENIZED);
		word.setBoost(15);
		doc1.add(word);
		Field id = new Field("ID","111", Field.Store.YES,Field.Index.NO);
		doc1.add(id);
		doc1.setBoost(3163);
		
		Document doc2 = new Document();
		word = new Field("WORD","home", Field.Store.YES,Field.Index.TOKENIZED);
		word.setBoost(15);
		doc2.add(word);
		id = new Field("ID","222", Field.Store.YES,Field.Index.NO);
		doc2.add(id);
		doc2.setBoost(3150);
		
		
		writer.addDocument(doc2);
		writer.addDocument(doc1);
		
		writer.optimize();
		writer.close();
		
		Searcher searcher = new IndexSearcher(ramDir);
		
		QueryParser queryParserWord = new QueryParser("WORD",new
StandardAnalyzer());
		Query query = queryParserWord.parse("home");
		
		Hits hits = searcher.search(query);
		
		for (int i = 0; i < hits.length(); i++) {
			System.out.println("----- DOC " + hits.doc(i).get("ID") +"-----" +
hits.doc(i).get("WORD")+"-");
			System.out.println(searcher.explain(query,hits.id(i)).toString());
		}
	}


Thanks a lot !
-- 
View this message in context: http://www.nabble.com/Boost-Document-tf2654631.html#a7405959
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 17 18:35:55 2006
Return-Path: <java-user-return-24551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31390 invoked from network); 17 Nov 2006 18:35:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 18:35:54 -0000
Received: (qmail 12563 invoked by uid 500); 17 Nov 2006 18:35:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12539 invoked by uid 500); 17 Nov 2006 18:35:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12528 invoked by uid 99); 17 Nov 2006 18:35:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 10:35:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 10:35:43 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F0CC85B77D; Fri, 17 Nov 2006 10:35:22 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EB8717F403
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 10:35:22 -0800 (PST)
Date: Fri, 17 Nov 2006 10:35:22 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Q: Searching - Use of field to increase score, without filtering
In-Reply-To: <455D7B05.2040006@joanneum.at>
Message-ID: <Pine.LNX.4.58.0611171034500.30605@hal.rescomp.berkeley.edu>
References: <455D7B05.2040006@joanneum.at>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


This sounds very similar to this recent question...

http://www.nabble.com/newbie-scoring-question-tf2640109.html

..if i'm missunderstanding you, please clarify with a specific example.


: Date: Fri, 17 Nov 2006 10:04:05 +0100
: From: Stephan Spat <stephan.spat@joanneum.at>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Q: Searching - Use of field to increase score, without filtering
:
: Hello everybody!
:
: I used Weka-classification to classify document into different classes.
: In Lucene I saved the predicted classes (besides the document +
: metadata) for these docs into a field called preclasses. Now I would
: like to use this field to boost the score, if a userquery agree to the
: value of this field. But I don't like to filter by this field, which
: means: if a userquery for the field preclasses fits to the value of the
: field, all documents (indenpentent from the value  of the field
: preclasses) should be returned, but for documents where the value of the
: preclasses field matches to the user-input should be used for boosting
: the score (therefore I set the boostfactor of the field preclasses to a
: higher value than 1).
:
: In short: The field preclasses should be used as a booster and not as a
: filter! Is this possible? And how?
:
: Thanks a lot!
:
: Stephan Spat
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 17 18:43:50 2006
Return-Path: <java-user-return-24552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32910 invoked from network); 17 Nov 2006 18:43:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 18:43:50 -0000
Received: (qmail 23780 invoked by uid 500); 17 Nov 2006 18:43:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23747 invoked by uid 500); 17 Nov 2006 18:43:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23736 invoked by uid 99); 17 Nov 2006 18:43:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 10:43:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 10:43:41 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C51955B777; Fri, 17 Nov 2006 10:43:20 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BEB977F403
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 10:43:20 -0800 (PST)
Date: Fri, 17 Nov 2006 10:43:20 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boost Document
In-Reply-To: <7405959.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0611171040310.30605@hal.rescomp.berkeley.edu>
References: <7405959.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: When I have 2 documents that have exactly the same data, but different boost
: value.
: The order does not respect the boost value. It the following exemples, the
: first document of the search is the document with the lower boost value...
: is it a bug ?

i would suggest you look at the explain output ... but it seems you
already are: what does that tell you? what scores do the indvidual
documents get, and how do their explanations differ?

if i had to guess, i would suspect that your boosts are big enough that
they become equivilent when byte encoded and stored as fieldNorms (that's
what happens to document boosts, they get written as part of hte fieldNorm
for each field in the document) and the only reason you are getting the
order that you are is because doc2 has a lower internal id then doc1 ....
if i'm right, then the scores and the explanations would be equal.

...does that jive with what you are seeing?


:
: Here is my test code:
:
: public void testIt() throws IOException, ParseException
: 	{
: 		RAMDirectory ramDir = new RAMDirectory();
: 		IndexWriter writer = new IndexWriter(ramDir, new StandardAnalyzer(),
: true);
:
: 		Document doc1 = new Document();
: 		Field word = new Field("WORD","home",
: Field.Store.YES,Field.Index.TOKENIZED);
: 		word.setBoost(15);
: 		doc1.add(word);
: 		Field id = new Field("ID","111", Field.Store.YES,Field.Index.NO);
: 		doc1.add(id);
: 		doc1.setBoost(3163);
:
: 		Document doc2 = new Document();
: 		word = new Field("WORD","home", Field.Store.YES,Field.Index.TOKENIZED);
: 		word.setBoost(15);
: 		doc2.add(word);
: 		id = new Field("ID","222", Field.Store.YES,Field.Index.NO);
: 		doc2.add(id);
: 		doc2.setBoost(3150);
:
:
: 		writer.addDocument(doc2);
: 		writer.addDocument(doc1);
:
: 		writer.optimize();
: 		writer.close();
:
: 		Searcher searcher = new IndexSearcher(ramDir);
:
: 		QueryParser queryParserWord = new QueryParser("WORD",new
: StandardAnalyzer());
: 		Query query = queryParserWord.parse("home");
:
: 		Hits hits = searcher.search(query);
:
: 		for (int i = 0; i < hits.length(); i++) {
: 			System.out.println("----- DOC " + hits.doc(i).get("ID") +"-----" +
: hits.doc(i).get("WORD")+"-");
: 			System.out.println(searcher.explain(query,hits.id(i)).toString());
: 		}
: 	}
:
:
: Thanks a lot !
: --
: View this message in context: http://www.nabble.com/Boost-Document-tf2654631.html#a7405959
: Sent from the Lucene - Java Users mailing list archive at Nabble.com.
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 17 18:48:16 2006
Return-Path: <java-user-return-24553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35360 invoked from network); 17 Nov 2006 18:48:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2006 18:48:15 -0000
Received: (qmail 34228 invoked by uid 500); 17 Nov 2006 18:48:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34199 invoked by uid 500); 17 Nov 2006 18:48:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34188 invoked by uid 99); 17 Nov 2006 18:48:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 10:48:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 10:48:06 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B9D905B777; Fri, 17 Nov 2006 10:47:45 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id B19D07F403;
	Fri, 17 Nov 2006 10:47:45 -0800 (PST)
Date: Fri, 17 Nov 2006 10:47:45 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: Search "C++" with Solrs WordDelimiterFilter
In-Reply-To: <455D893B.5070108@uni-hd.de>
Message-ID: <Pine.LNX.4.58.0611171044370.30605@hal.rescomp.berkeley.edu>
References: <455D893B.5070108@uni-hd.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


WordDelimiterFilter doesn't explicitly use an Tokenizer -- thats the
bueaty of TokenFilters, you can compose them arround any other TokenStream
instance that you want.

If you have a custom grammer file of your own that you like, you can use
it to build your own Tokenizer and then wrap that up in a
WordDelimiterFilter (and any other filters you want) to make a custom
Analyzer ... this is all StandardAnalyzer does, it wraps the
StandardTokenizer (which is built from a .jj file) with a few useful
TokenFilters.


: Date: Fri, 17 Nov 2006 11:04:43 +0100
: From: Martin Braun <mbraun@uni-hd.de>
: Reply-To: java-user@lucene.apache.org, mbraun@uni-hd.de
: To: java-user@lucene.apache.org
: Subject: Search "C++" with Solrs WordDelimiterFilter
:
: hi all,
:
: I would like to implement the possibility to search for "C++" and "C#" -
: I found in the archive the hint to customize the appropriate *.jj  file
: with the code in NutchAnalysis.jj:
:
:      // irregular words
: | <#IRREGULAR_WORD: (<C_PLUS_PLUS>|<C_SHARP>)>
: | <#C_PLUS_PLUS: ("C"|"c") "++" >
: | <#C_SHARP: ("C"|"c") "#" >
:
: I am using a custum analyzer with the yonik's WordDelimiterFilter:
:
: @Override
: 	public TokenStream tokenStream(String fieldName, Reader reader) {
:
: 		return new LowerCaseFilter(new WordDelimiterFilter(new
: WhitespaceTokenizer(reader),1,1,1,1,1 ));
: 	}
:
:
: But as I can see WordDelimiterFilter uses only the WhiteSpaceTokenizer
: which does not use a Java-CC file.
:
: What would be the best way to integrate (anyway, preferably not changing
: lucene-src) this feature?
:
: Should I override the WhitespaceTokenizer and using java-cc ( are there
: any docs on doing this?).
:
: tia,
: martin
:
:
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 02:49:19 2006
Return-Path: <java-user-return-24554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92987 invoked from network); 18 Nov 2006 02:49:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 02:49:18 -0000
Received: (qmail 90242 invoked by uid 500); 18 Nov 2006 02:49:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90218 invoked by uid 500); 18 Nov 2006 02:49:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90191 invoked by uid 99); 18 Nov 2006 02:49:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 18:49:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.246] (HELO mail.rhoderunner.com) (216.170.99.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 18:49:06 -0800
Message-ID: <5310030.41163818123988.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
X-UserIsAuth: true
Received: from c-67-165-96-31.hsd1.pa.comcast.net ([67.165.96.31])
          by mail.rhoderunner.com (JAMES SMTP Server 2.3.0rc2) with SMTP ID 248
          for <java-user@lucene.apache.org>;
          Fri, 17 Nov 2006 21:48:43 -0500 (EST)
Date: Fri, 17 Nov 2006 21:48:37 -0500
From: Phillip Rhodes <spamsucks@rhoderunner.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
To:  java-user@lucene.apache.org
Subject: Cleaning up the james filesystem ( i.e. /var/mail/spam)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I was tarring up a james installation, and there are an awful lot of 
files in the /var/mail/spam, the /var/mail/address-error, and some other 
folders.  Is this stuff that james deletes on a regular basis, or should 
I do a regular "pruning" of the different files that james stores?

Does anyone have any experience or thoughts on this?  I am thinking that 
I will write a couple of ant scripts and run them via cron to clean up 
this stuff.

Thanks.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 03:40:42 2006
Return-Path: <java-user-return-24555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1043 invoked from network); 18 Nov 2006 03:40:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 03:40:41 -0000
Received: (qmail 25657 invoked by uid 500); 18 Nov 2006 03:40:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25615 invoked by uid 500); 18 Nov 2006 03:40:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25604 invoked by uid 99); 18 Nov 2006 03:40:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 19:40:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 17 Nov 2006 19:40:33 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8CDFB5B777; Fri, 17 Nov 2006 19:40:13 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7726D7F403
	for <java-user@lucene.apache.org>; Fri, 17 Nov 2006 19:40:13 -0800 (PST)
Date: Fri, 17 Nov 2006 19:40:13 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Cleaning up the james filesystem ( i.e. /var/mail/spam)
In-Reply-To: <5310030.41163818123988.JavaMail.root@dell.rhoderunner.com>
Message-ID: <Pine.LNX.4.58.0611171938170.28552@hal.rescomp.berkeley.edu>
References: <5310030.41163818123988.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I think you ment to email a differnet list.


: Date: Fri, 17 Nov 2006 21:48:37 -0500
: From: Phillip Rhodes <spamsucks@rhoderunner.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Cleaning up the james filesystem ( i.e. /var/mail/spam)
:
: I was tarring up a james installation, and there are an awful lot of
: files in the /var/mail/spam, the /var/mail/address-error, and some other
: folders.  Is this stuff that james deletes on a regular basis, or should
: I do a regular "pruning" of the different files that james stores?
:
: Does anyone have any experience or thoughts on this?  I am thinking that
: I will write a couple of ant scripts and run them via cron to clean up
: this stuff.
:
: Thanks.
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 09:22:39 2006
Return-Path: <java-user-return-24556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63308 invoked from network); 18 Nov 2006 09:22:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 09:22:39 -0000
Received: (qmail 37684 invoked by uid 500); 18 Nov 2006 09:22:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36870 invoked by uid 500); 18 Nov 2006 09:22:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36859 invoked by uid 99); 18 Nov 2006 09:22:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 01:22:36 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [81.255.54.11] (HELO mx.laposte.net) (81.255.54.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 01:22:21 -0800
Received: from smtpin.laposte.net (10.150.9.74) by mx.laposte.net (7.2.060.1)
        id 4559988D0058F5D6 for java-user@lucene.apache.org; Sat, 18 Nov 2006 10:19:52 +0100
Received: from [192.168.57.105] (82.66.242.118) by smtpin.laposte.net (7.2.060.1) (authenticated as thom.klein@laposte.net)
        id 4552EDE70004BA32 for java-user@lucene.apache.org; Sat, 18 Nov 2006 10:19:51 +0100
From: Thomas Klein <tkl@laposte.net>
To: java-user@lucene.apache.org
Subject: stemmer
Date: Sat, 18 Nov 2006 10:19:48 +0100
User-Agent: KMail/1.9.5
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611181019.49061.tkl@laposte.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there,

I'm fairly new to lucene, I just developped a multi threaded indexing 
tcp server using lucene to hmmm, let me remember, index stuffs :)

I have to index not only english, but french and german, and, I don't 
know, perhaps other languages in the future.

Did lucene use a default stemmer or do I have to stem the texts before 
indexing ?

Does a multi-language stemmer exists ?

(sorry if the answers are in the documentation, I didn't manage to 
fully read it)

Thanks in advance !

Thomas Klein.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 11:03:03 2006
Return-Path: <java-user-return-24557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74885 invoked from network); 18 Nov 2006 11:03:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 11:03:03 -0000
Received: (qmail 87265 invoked by uid 500); 18 Nov 2006 11:03:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87221 invoked by uid 500); 18 Nov 2006 11:03:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87210 invoked by uid 99); 18 Nov 2006 11:03:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 03:03:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 03:02:50 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GlNxu-0005cF-5x
	for java-user@lucene.apache.org; Sat, 18 Nov 2006 03:02:30 -0800
Message-ID: <7417101.post@talk.nabble.com>
Date: Sat, 18 Nov 2006 03:02:30 -0800 (PST)
From: John Pailet <9i7svel2zr6uujn@jetable.org>
To: java-user@lucene.apache.org
Subject: Re: Boost Document
In-Reply-To: <Pine.LNX.4.58.0611171040310.30605@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: 9i7svel2zr6uujn@jetable.org
References: <7405959.post@talk.nabble.com> <Pine.LNX.4.58.0611171040310.30605@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Chris,

You are right !!!
Here is the explain output:

----- DOC 222-----home-
40960.0 = fieldWeight(WORD:home in 0), product of:
  1.0 = tf(termFreq(WORD:home)=1)
  1.0 = idf(docFreq=2)
  40960.0 = fieldNorm(field=WORD, doc=0)

----- DOC 111-----home-
40960.0 = fieldWeight(WORD:home in 1), product of:
  1.0 = tf(termFreq(WORD:home)=1)
  1.0 = idf(docFreq=2)
  40960.0 = fieldNorm(field=WORD, doc=1)

As you can see, doc 222 and doc 111 get exactly the same score, even if data
are exactly the same and even id Doc111 boost value is greater than  Doc222
boost value !!!

Is the internal document ID part of score computation ?

How can I solve this problem of gertting same score for different boost
values?

Thanks a lot !

John





Chris Hostetter wrote:
> 
> 
> : When I have 2 documents that have exactly the same data, but different
> boost
> : value.
> : The order does not respect the boost value. It the following exemples,
> the
> : first document of the search is the document with the lower boost
> value...
> : is it a bug ?
> 
> i would suggest you look at the explain output ... but it seems you
> already are: what does that tell you? what scores do the indvidual
> documents get, and how do their explanations differ?
> 
> if i had to guess, i would suspect that your boosts are big enough that
> they become equivilent when byte encoded and stored as fieldNorms (that's
> what happens to document boosts, they get written as part of hte fieldNorm
> for each field in the document) and the only reason you are getting the
> order that you are is because doc2 has a lower internal id then doc1 ....
> if i'm right, then the scores and the explanations would be equal.
> 
> ...does that jive with what you are seeing?
> 
> 
> :
> : Here is my test code:
> :
> : public void testIt() throws IOException, ParseException
> : 	{
> : 		RAMDirectory ramDir = new RAMDirectory();
> : 		IndexWriter writer = new IndexWriter(ramDir, new StandardAnalyzer(),
> : true);
> :
> : 		Document doc1 = new Document();
> : 		Field word = new Field("WORD","home",
> : Field.Store.YES,Field.Index.TOKENIZED);
> : 		word.setBoost(15);
> : 		doc1.add(word);
> : 		Field id = new Field("ID","111", Field.Store.YES,Field.Index.NO);
> : 		doc1.add(id);
> : 		doc1.setBoost(3163);
> :
> : 		Document doc2 = new Document();
> : 		word = new Field("WORD","home",
> Field.Store.YES,Field.Index.TOKENIZED);
> : 		word.setBoost(15);
> : 		doc2.add(word);
> : 		id = new Field("ID","222", Field.Store.YES,Field.Index.NO);
> : 		doc2.add(id);
> : 		doc2.setBoost(3150);
> :
> :
> : 		writer.addDocument(doc2);
> : 		writer.addDocument(doc1);
> :
> : 		writer.optimize();
> : 		writer.close();
> :
> : 		Searcher searcher = new IndexSearcher(ramDir);
> :
> : 		QueryParser queryParserWord = new QueryParser("WORD",new
> : StandardAnalyzer());
> : 		Query query = queryParserWord.parse("home");
> :
> : 		Hits hits = searcher.search(query);
> :
> : 		for (int i = 0; i < hits.length(); i++) {
> : 			System.out.println("----- DOC " + hits.doc(i).get("ID") +"-----" +
> : hits.doc(i).get("WORD")+"-");
> : 			System.out.println(searcher.explain(query,hits.id(i)).toString());
> : 		}
> : 	}
> :
> :
> : Thanks a lot !
> : --
> : View this message in context:
> http://www.nabble.com/Boost-Document-tf2654631.html#a7405959
> : Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Boost-Document-tf2654631.html#a7417101
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 14:14:26 2006
Return-Path: <java-user-return-24558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29469 invoked from network); 18 Nov 2006 14:14:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 14:14:25 -0000
Received: (qmail 6360 invoked by uid 500); 18 Nov 2006 14:14:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6332 invoked by uid 500); 18 Nov 2006 14:14:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6310 invoked by uid 99); 18 Nov 2006 14:14:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 06:14:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 06:14:12 -0800
Received: (qmail 29849 invoked from network); 18 Nov 2006 14:13:48 -0000
Received: from unknown (HELO p5496e1e4.dip.t-dialin.net) ([pbs]695637@[84.150.225.228])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 18 Nov 2006 14:13:48 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Japanese word segmentation
Date: Sat, 18 Nov 2006 15:15:35 +0100
User-Agent: KMail/1.8.2
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611181515.36833@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

does anybody know a (more or less) ready-to-use free Japanese analyzer? I 
know I can use CJKAnalyzer but I need one that puts only real words into 
the index (no just n-grams). There seem to be a lot of papers on the Web 
and there's also "Juma", but I'm looking for a Java-based solution.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 14:22:35 2006
Return-Path: <java-user-return-24559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36386 invoked from network); 18 Nov 2006 14:22:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 14:22:34 -0000
Received: (qmail 16665 invoked by uid 500); 18 Nov 2006 14:22:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16634 invoked by uid 500); 18 Nov 2006 14:22:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16622 invoked by uid 99); 18 Nov 2006 14:22:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 06:22:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.74.196.209] (HELO drachma.dmz.atl2.jboss.com) (64.74.196.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 06:22:23 -0800
Received: from [127.0.0.1] (drachma.dmz.atl2.jboss.com [64.74.196.209])
	by drachma.dmz.atl2.jboss.com (8.12.11.20060308/8.12.11) with ESMTP id kAIEM28d017417
	for <java-user@lucene.apache.org>; Sat, 18 Nov 2006 09:22:02 -0500
Message-ID: <455F1706.50905@hibernate.org>
Date: Sat, 18 Nov 2006 09:21:58 -0500
From: Emmanuel Bernard <emmanuel@hibernate.org>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fwd: Hibernate Lucene trademark issues
References: <454F459B.7000100@hibernate.org> <52c3ddca0611112217m1ccc1798x67deae19c56ee9c7@mail.gmail.com> <4558ECAA.2050904@hibernate.org> <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com>
In-Reply-To: <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I am not really familiar with Compass I haven't really looked at the 
code, Hibernate Lucene (now renamed Hibernate Search) started from a 
user demand. I had some in depth discussions though, with some users 
that evaluated both Compass and Hibernate Search that helped me drive 
its design.

Here are the arguments in favor of Hibernate Search:
1. not Yet Another API to deal with your domain model
If you already use an ORM (JPA or Hibernate), you are familiar with 
those APIs. Using compass implies that you have to use a different set 
of API to play with the object lifecycle (CRUD).
Hibernate Search is integrated with the org.hibernate.Query interface, 
and all the CUD operations on the index are triggered from the Hibernate 
CUD operations.

2. Metadata
Metadata are minimal and fit particularly well through annotations, so 
you don't have yet another XML representation of ther same domain model 
(Compass might now have annotations support, you'll have to check)

3. it's all about managed objects (ie managed by the Session or the 
EntityManager)
Hibernate Search gives you back objects managed by the Session, so any 
change made to them will (by default) be synchronized with the database, 
this is the normal behavior of an ORM, but is not what you have from a 
Compass search.
This approach fits well with the JBoss Seam approach of having all the 
application around the domain model and EJB 3.0

4. Not too much abstraction
 From what I've heard, Compass borrow a lot of its design / classnames 
from Hibernate/Spring/Lucene. Compass tries to abstract those 3 
techlnologies (at least Hibernate and Lucene), by providing its own 
infrastructure.
What am trying to do with Hibernate Search is to keep the abstraction as 
light as possible. For advanced Lucene query you'll have to use pure 
Lucene APIs, which is possible / natural with Hibernate Search


I invite you to check these links (which I expect to release soon)
http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
and for the future (but flexible)
http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00393.html

HTH

Emmanuel

Lukas Vlcek wrote:
>
> Emanuael,
> I would be glad to hear your answer here (on user list).
> Regards,
> Lukas
>
> ---------- Forwarded message ----------
> From: Emmanuel Bernard <emmanuel@hibernate.org>
> Date: Nov 13, 2006 11:07 PM
> Subject: Re: Hibernate Lucene trademark issues
> To: java-dev@lucene.apache.org, lukas.vlcek@gmail.com
>
> Hi Lukas,
> I'd be happy to answer your question, but I don't think Lucene dev is
> the appropriate area for that kind of discussion.
> let's move this discussion here
> http://forum.hibernate.org/viewforum.php?f=9 (or in the Lucene User list
> if you want to).
>
> Emmanuel
>
> Lukas Vlcek wrote:
> >
> > Hi Emmanuel,
> >
> > I am interested in you solution. I have a plan to use lucene and 
> hibernate
> > in my next project and search will play very important role
> > (*stake-holder*
> > functionality). I have heard of
> > comapss<http://www.opensymphony.com/compass/>project which introduces
> > searching (lucene) layer on top of hibernate also.
> > I haven't had a change to study it in detail yet.
> >
> > Do you think you could give me some high level comments about your
> > motivation for implementing lucene search directly in hibernate code,
> > couldn't you just use compass project? Is there any fundamental 
> difference
> > between your approach and comapss?
> >
> > Many thanks,
> > Lukas
> >
> > On 11/6/06, Emmanuel Bernard <emmanuel@hibernate.org> wrote:
> > >
> > > Hi guys,
> > > I'm Emmanuel Bernard from JBoss.
> > > I'm the current lead developer of the Hibernate Lucene integration
> > module.
> > > The goal of this project is to facilitate the integration of a search
> > > capability to Hibernate based applications. And guess what, I use 
> Lucene
> > > ;-)
> > >
> > >
> >
> http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
> > >
> > 
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> > >
> > > I realized this week end that the 'Hibernate Lucene' name might 
> infringe
> > > the Apache Lucene trademark policy.
> > > http://www.cafepress.com/lucene/ seems to state that Lucene is a
> > > trademark of the Apache Software Foundation (nice golf shirt BTW)
> > > But I wasn't able to find any document explaining the fair use of the
> > > Lucene brand (the license as well as the notice seem to be silent on
> > > this subject).
> > >
> > > Even if Lucene in not trademarked, what do you consider a fair use of
> > > your brand? I'm happy to rename my project, I guess the initial choice
> > > was more a tribute to your project than anything else.
> > >
> > > Emmanuel
> > >
> > > PS: please forward this email to the appropriate persons if this 
> is not
> > > the case already (PMC or whatever)
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-dev-help@lucene.apache.org
> > >
> > >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 15:50:02 2006
Return-Path: <java-user-return-24560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49647 invoked from network); 18 Nov 2006 15:50:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 15:50:01 -0000
Received: (qmail 86258 invoked by uid 500); 18 Nov 2006 15:50:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85674 invoked by uid 500); 18 Nov 2006 15:50:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85663 invoked by uid 99); 18 Nov 2006 15:50:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 07:50:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 07:49:49 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1636388nfc
        for <java-user@lucene.apache.org>; Sat, 18 Nov 2006 07:49:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bngFqMqpnpovVA4sU0m5pOR5b7qY/nGSj/haWKBJWraoInPe/erOY87yRtXbr32Ff583eztR/bOOLrc1wZauWFjSmF3ksMI7G4D7+we9RYmLWZ1bikcz+60nded3yjMudDdPr7kVIzuB8Q3PqDa0ILYgODQrDMoD4BxfoQjCw3c=
Received: by 10.82.164.9 with SMTP id m9mr371051bue.1163864967656;
        Sat, 18 Nov 2006 07:49:27 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Sat, 18 Nov 2006 07:49:27 -0800 (PST)
Message-ID: <359a92830611180749h1ce19c26r9335d03f3676cea8@mail.gmail.com>
Date: Sat, 18 Nov 2006 10:49:27 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: stemmer
In-Reply-To: <200611181019.49061.tkl@laposte.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93906_1682960.1163864967495"
References: <200611181019.49061.tkl@laposte.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93906_1682960.1163864967495
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thomas:

There are some rather extensive threads on this list about the "interesting"
issues that exist when indexing/searching other languages. I think you'd
find it worthwhile to search the list archive for foreign language or some
such...

The short answer as I remember is that there *is* a built-in stemmer, but
whether it does what you want when indexing multiple languages depends upon
what results you expect to get...and there's no clear answer that I
remember....

Erick

On 11/18/06, Thomas Klein <tkl@laposte.net> wrote:
>
> Hi there,
>
> I'm fairly new to lucene, I just developped a multi threaded indexing
> tcp server using lucene to hmmm, let me remember, index stuffs :)
>
> I have to index not only english, but french and german, and, I don't
> know, perhaps other languages in the future.
>
> Did lucene use a default stemmer or do I have to stem the texts before
> indexing ?
>
> Does a multi-language stemmer exists ?
>
> (sorry if the answers are in the documentation, I didn't manage to
> fully read it)
>
> Thanks in advance !
>
> Thomas Klein.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_93906_1682960.1163864967495--

From java-user-return-24561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 15:53:46 2006
Return-Path: <java-user-return-24561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50517 invoked from network); 18 Nov 2006 15:52:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 15:52:50 -0000
Received: (qmail 89458 invoked by uid 500); 18 Nov 2006 15:52:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88604 invoked by uid 500); 18 Nov 2006 15:52:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88593 invoked by uid 99); 18 Nov 2006 15:52:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 07:52:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 07:52:31 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1637024nfc
        for <java-user@lucene.apache.org>; Sat, 18 Nov 2006 07:52:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KecPtqa6dvh5noGGmL6KN5cqhxqEO2lcBXrXN6rqilJOjLGpFgbz/99uAplz1ylrvYkdiHJG+tGOK5ou8dvvCL7TJkS0mSMBQ11xSLSX/Y4YsP/SNgboFLfKoIWtLB+V+oFSDl93qR36ZFNy+vSkDWSOfVh26fjEjdT0EAKXSYU=
Received: by 10.82.152.16 with SMTP id z16mr366894bud.1163865129383;
        Sat, 18 Nov 2006 07:52:09 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Sat, 18 Nov 2006 07:52:09 -0800 (PST)
Message-ID: <359a92830611180752o7fae0074j5a057c9ae05fbdf0@mail.gmail.com>
Date: Sat, 18 Nov 2006 10:52:09 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boost Document
In-Reply-To: <7417101.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93918_26398661.1163865129349"
References: <7405959.post@talk.nabble.com>
	 <Pine.LNX.4.58.0611171040310.30605@hal.rescomp.berkeley.edu>
	 <7417101.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93918_26398661.1163865129349
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can answer a small part of your question... Doc IDs have nothing to do
with scoring.  Each time you index a document, it get a doc id greater than
any already in the index, and they get reassigned if you delete docs and
optimize.... They *may* be used when scoring to break ties but that doesn't
do you any good.......

For the other part of your question, I'll defer to the experts....

Erick

On 11/18/06, John Pailet <9i7svel2zr6uujn@jetable.org> wrote:
>
>
> Hi Chris,
>
> You are right !!!
> Here is the explain output:
>
> ----- DOC 222-----home-
> 40960.0 = fieldWeight(WORD:home in 0), product of:
>   1.0 = tf(termFreq(WORD:home)=1)
>   1.0 = idf(docFreq=2)
>   40960.0 = fieldNorm(field=WORD, doc=0)
>
> ----- DOC 111-----home-
> 40960.0 = fieldWeight(WORD:home in 1), product of:
>   1.0 = tf(termFreq(WORD:home)=1)
>   1.0 = idf(docFreq=2)
>   40960.0 = fieldNorm(field=WORD, doc=1)
>
> As you can see, doc 222 and doc 111 get exactly the same score, even if
> data
> are exactly the same and even id Doc111 boost value is greater
> than  Doc222
> boost value !!!
>
> Is the internal document ID part of score computation ?
>
> How can I solve this problem of gertting same score for different boost
> values?
>
> Thanks a lot !
>
> John
>
>
>
>
>
> Chris Hostetter wrote:
> >
> >
> > : When I have 2 documents that have exactly the same data, but different
> > boost
> > : value.
> > : The order does not respect the boost value. It the following exemples,
> > the
> > : first document of the search is the document with the lower boost
> > value...
> > : is it a bug ?
> >
> > i would suggest you look at the explain output ... but it seems you
> > already are: what does that tell you? what scores do the indvidual
> > documents get, and how do their explanations differ?
> >
> > if i had to guess, i would suspect that your boosts are big enough that
> > they become equivilent when byte encoded and stored as fieldNorms
> (that's
> > what happens to document boosts, they get written as part of hte
> fieldNorm
> > for each field in the document) and the only reason you are getting the
> > order that you are is because doc2 has a lower internal id then doc1
> ....
> > if i'm right, then the scores and the explanations would be equal.
> >
> > ...does that jive with what you are seeing?
> >
> >
> > :
> > : Here is my test code:
> > :
> > : public void testIt() throws IOException, ParseException
> > :     {
> > :             RAMDirectory ramDir = new RAMDirectory();
> > :             IndexWriter writer = new IndexWriter(ramDir, new
> StandardAnalyzer(),
> > : true);
> > :
> > :             Document doc1 = new Document();
> > :             Field word = new Field("WORD","home",
> > : Field.Store.YES,Field.Index.TOKENIZED);
> > :             word.setBoost(15);
> > :             doc1.add(word);
> > :             Field id = new Field("ID","111", Field.Store.YES,
> Field.Index.NO);
> > :             doc1.add(id);
> > :             doc1.setBoost(3163);
> > :
> > :             Document doc2 = new Document();
> > :             word = new Field("WORD","home",
> > Field.Store.YES,Field.Index.TOKENIZED);
> > :             word.setBoost(15);
> > :             doc2.add(word);
> > :             id = new Field("ID","222", Field.Store.YES,Field.Index.NO
> );
> > :             doc2.add(id);
> > :             doc2.setBoost(3150);
> > :
> > :
> > :             writer.addDocument(doc2);
> > :             writer.addDocument(doc1);
> > :
> > :             writer.optimize();
> > :             writer.close();
> > :
> > :             Searcher searcher = new IndexSearcher(ramDir);
> > :
> > :             QueryParser queryParserWord = new QueryParser("WORD",new
> > : StandardAnalyzer());
> > :             Query query = queryParserWord.parse("home");
> > :
> > :             Hits hits = searcher.search(query);
> > :
> > :             for (int i = 0; i < hits.length(); i++) {
> > :                     System.out.println("----- DOC " + hits.doc(i).get("ID")
> +"-----" +
> > : hits.doc(i).get("WORD")+"-");
> > :                     System.out.println(searcher.explain(query,hits.id
> (i)).toString());
> > :             }
> > :     }
> > :
> > :
> > : Thanks a lot !
> > : --
> > : View this message in context:
> > http://www.nabble.com/Boost-Document-tf2654631.html#a7405959
> > : Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> > :
> > :
> > : ---------------------------------------------------------------------
> > : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > : For additional commands, e-mail: java-user-help@lucene.apache.org
> > :
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Boost-Document-tf2654631.html#a7417101
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_93918_26398661.1163865129349--

From java-user-return-24562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 16:46:26 2006
Return-Path: <java-user-return-24562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64677 invoked from network); 18 Nov 2006 16:46:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 16:46:26 -0000
Received: (qmail 41409 invoked by uid 500); 18 Nov 2006 16:46:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41369 invoked by uid 500); 18 Nov 2006 16:46:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41358 invoked by uid 99); 18 Nov 2006 16:46:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 08:46:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.74.196.209] (HELO drachma.dmz.atl2.jboss.com) (64.74.196.209)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 08:46:13 -0800
Received: from [127.0.0.1] (drachma.dmz.atl2.jboss.com [64.74.196.209])
	by drachma.dmz.atl2.jboss.com (8.12.11.20060308/8.12.11) with ESMTP id kAIGjqSK019488
	for <java-user@lucene.apache.org>; Sat, 18 Nov 2006 11:45:52 -0500
Message-ID: <455F38BC.1040104@hibernate.org>
Date: Sat, 18 Nov 2006 11:45:48 -0500
From: Emmanuel Bernard <emmanuel@hibernate.org>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fwd: Hibernate Lucene trademark issues
References: <454F459B.7000100@hibernate.org> <52c3ddca0611112217m1ccc1798x67deae19c56ee9c7@mail.gmail.com> <4558ECAA.2050904@hibernate.org> <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com> <455F1706.50905@hibernate.org>
In-Reply-To: <455F1706.50905@hibernate.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I forgot a couple of things.
I do not think that all your object properties belongs to the Index, and 
some of them will be put in the index with information degradation (ie 
store year/month rather than the whole date). So I do not believe there 
is a bidirectional relationship between your domain model and your index 
documents (for size, efficiency and accuracy purpose).
For that matter, Compass cannot really truly index your database backed 
domain model and give back the object to you. Hibernate Search can 
because it delegate the object hydration to Hibernate Core.

Of course that's my opinions, and some people can disagree ;-)

Emmanuel Bernard wrote:
>
> Hi,
> I am not really familiar with Compass I haven't really looked at the
> code, Hibernate Lucene (now renamed Hibernate Search) started from a
> user demand. I had some in depth discussions though, with some users
> that evaluated both Compass and Hibernate Search that helped me drive
> its design.
>
> Here are the arguments in favor of Hibernate Search:
> 1. not Yet Another API to deal with your domain model
> If you already use an ORM (JPA or Hibernate), you are familiar with
> those APIs. Using compass implies that you have to use a different set
> of API to play with the object lifecycle (CRUD).
> Hibernate Search is integrated with the org.hibernate.Query interface,
> and all the CUD operations on the index are triggered from the Hibernate
> CUD operations.
>
> 2. Metadata
> Metadata are minimal and fit particularly well through annotations, so
> you don't have yet another XML representation of ther same domain model
> (Compass might now have annotations support, you'll have to check)
>
> 3. it's all about managed objects (ie managed by the Session or the
> EntityManager)
> Hibernate Search gives you back objects managed by the Session, so any
> change made to them will (by default) be synchronized with the database,
> this is the normal behavior of an ORM, but is not what you have from a
> Compass search.
> This approach fits well with the JBoss Seam approach of having all the
> application around the domain model and EJB 3.0
>
> 4. Not too much abstraction
>  From what I've heard, Compass borrow a lot of its design / classnames
> from Hibernate/Spring/Lucene. Compass tries to abstract those 3
> techlnologies (at least Hibernate and Lucene), by providing its own
> infrastructure.
> What am trying to do with Hibernate Search is to keep the abstraction as
> light as possible. For advanced Lucene query you'll have to use pure
> Lucene APIs, which is possible / natural with Hibernate Search
>
>
> I invite you to check these links (which I expect to release soon)
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> and for the future (but flexible)
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00393.html
>
> HTH
>
> Emmanuel
>
> Lukas Vlcek wrote:
> >
> > Emanuael,
> > I would be glad to hear your answer here (on user list).
> > Regards,
> > Lukas
> >
> > ---------- Forwarded message ----------
> > From: Emmanuel Bernard <emmanuel@hibernate.org>
> > Date: Nov 13, 2006 11:07 PM
> > Subject: Re: Hibernate Lucene trademark issues
> > To: java-dev@lucene.apache.org, lukas.vlcek@gmail.com
> >
> > Hi Lukas,
> > I'd be happy to answer your question, but I don't think Lucene dev is
> > the appropriate area for that kind of discussion.
> > let's move this discussion here
> > http://forum.hibernate.org/viewforum.php?f=9 (or in the Lucene User list
> > if you want to).
> >
> > Emmanuel
> >
> > Lukas Vlcek wrote:
> > >
> > > Hi Emmanuel,
> > >
> > > I am interested in you solution. I have a plan to use lucene and
> > hibernate
> > > in my next project and search will play very important role
> > > (*stake-holder*
> > > functionality). I have heard of
> > > comapss<http://www.opensymphony.com/compass/>project which introduces
> > > searching (lucene) layer on top of hibernate also.
> > > I haven't had a change to study it in detail yet.
> > >
> > > Do you think you could give me some high level comments about your
> > > motivation for implementing lucene search directly in hibernate code,
> > > couldn't you just use compass project? Is there any fundamental
> > difference
> > > between your approach and comapss?
> > >
> > > Many thanks,
> > > Lukas
> > >
> > > On 11/6/06, Emmanuel Bernard <emmanuel@hibernate.org> wrote:
> > > >
> > > > Hi guys,
> > > > I'm Emmanuel Bernard from JBoss.
> > > > I'm the current lead developer of the Hibernate Lucene integration
> > > module.
> > > > The goal of this project is to facilitate the integration of a 
> search
> > > > capability to Hibernate based applications. And guess what, I use
> > Lucene
> > > > ;-)
> > > >
> > > >
> > >
> > 
> http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
> > > >
> > >
> > 
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> > > >
> > > > I realized this week end that the 'Hibernate Lucene' name might
> > infringe
> > > > the Apache Lucene trademark policy.
> > > > http://www.cafepress.com/lucene/ seems to state that Lucene is a
> > > > trademark of the Apache Software Foundation (nice golf shirt BTW)
> > > > But I wasn't able to find any document explaining the fair use 
> of the
> > > > Lucene brand (the license as well as the notice seem to be silent on
> > > > this subject).
> > > >
> > > > Even if Lucene in not trademarked, what do you consider a fair 
> use of
> > > > your brand? I'm happy to rename my project, I guess the initial 
> choice
> > > > was more a tribute to your project than anything else.
> > > >
> > > > Emmanuel
> > > >
> > > > PS: please forward this email to the appropriate persons if this
> > is not
> > > > the case already (PMC or whatever)
> > > >
> > > >
> > > > 
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-dev-help@lucene.apache.org
> > > >
> > > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 17:02:58 2006
Return-Path: <java-user-return-24563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66869 invoked from network); 18 Nov 2006 17:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 17:02:57 -0000
Received: (qmail 57508 invoked by uid 500); 18 Nov 2006 17:03:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57471 invoked by uid 500); 18 Nov 2006 17:02:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57441 invoked by uid 99); 18 Nov 2006 17:02:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 09:02:59 -0800
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of softpope@gmail.com designates 64.233.162.196 as permitted sender)
Received: from [64.233.162.196] (HELO nz-out-0102.google.com) (64.233.162.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 09:02:45 -0800
Received: by nz-out-0102.google.com with SMTP id s1so674435nze
        for <java-user@lucene.apache.org>; Sat, 18 Nov 2006 09:02:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ri8nR4E4pBW98clhE1IWrJtp5Myzoj4l9ZeMSuUriCelC3rNsmxPUeWQZEhLkXrFhUydGcu46wEqtwWkM5iSLevZv+XvwKurENvka8Naa1c0W3uJwLroo+Q4x5a14aEfPQBvPf3toj7JaRBG8cbmQAF0NVcRRq7cAAyKTIPhmzI=
Received: by 10.65.224.11 with SMTP id b11mr4830135qbr.1163869336699;
        Sat, 18 Nov 2006 09:02:16 -0800 (PST)
Received: by 10.64.184.10 with HTTP; Sat, 18 Nov 2006 09:02:16 -0800 (PST)
Message-ID: <efbbf7cf0611180902k66839ef9r6c0bad27c2cd8042@mail.gmail.com>
Date: Sat, 18 Nov 2006 18:02:16 +0100
From: alex <softpope@gmail.com>
To: java-user@lucene.apache.org
Subject: Add a document in a single pass?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47144_8003369.1163869336670"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47144_8003369.1163869336670
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I have a stream-based document parser that extracts contents (as a character
stream) as well as document metadata (as strings) from a file, in a single
pass. From these data I want to create a Lucene document. The problem is
that the metadata are available not until the complete document has been
parsed, i.e. after IndexWriter.addDocument returned.

Is there a way to affect the order the document fields are processed in
IndexWriter.addDocument or another way to build the index efficiently?
Thanks in advance
Alex

------=_Part_47144_8003369.1163869336670--

From java-user-return-24564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 18 23:19:27 2006
Return-Path: <java-user-return-24564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20843 invoked from network); 18 Nov 2006 23:19:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2006 23:19:27 -0000
Received: (qmail 29105 invoked by uid 500); 18 Nov 2006 23:19:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29075 invoked by uid 500); 18 Nov 2006 23:19:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29064 invoked by uid 99); 18 Nov 2006 23:19:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 18 Nov 2006 15:19:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of koji.sekiguchi@m4.dion.ne.jp designates 219.125.112.16 as permitted sender)
Received: from [219.125.112.16] (HELO nm05omta05f.dion.ne.jp) (219.125.112.16)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 18 Nov 2006 15:19:13 -0800
Received: from sekiguchi ([219.125.60.94])
	by nm05mta.dion.ne.jp
	id <20061119081851456.MAF1.8068788@nm05mta.dion.ne.jp>;
	Sun, 19 Nov 2006 08:18:51 +0900
From: "Koji Sekiguchi" <koji.sekiguchi@m4.dion.ne.jp>
To: <java-user@lucene.apache.org>
Subject: RE: Japanese word segmentation
Date: Sun, 19 Nov 2006 08:18:49 +0900
Message-ID: <PKEIKOCKCHNIIHNECPCCEEIECNAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <200611181515.36833@danielnaber.de>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Daniel,

JapaneseAnalyzer, which is the most popular analyzer in Japan I believe, is
there.

JapaneseAnalyzer:
https://sen.dev.java.net/files/documents/1373/35812/lucene-ja-2.0test2.zip

ASL v2.0 applies to the releases of JapaneseAnalyzer.
JapaneseAnalyzer is not large program but it uses Sen to tokenize
Japanese string.

sen-1.2.2.1.zip:
https://sen.dev.java.net/files/documents/1373/31864/sen-1.2.2.1.zip

Sen is a morphological analyzer and distributed under LGPL.
To get the information of both of them, please see:

Sen Project:
https://sen.dev.java.net/

My company implements Japanese-Lucene consulting services.
If you need our help, please mail me directly. :-)

regards,

========================================
SEKIGUCHI, Koji
RONDHUIT Co.,Ltd.
9F AIG Bldg 1-1-3 Marunouchi
Chiyoda-ku, Tokyo 100-0005
http://www.rondhuit.com/




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 19 20:34:37 2006
Return-Path: <java-user-return-24565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19385 invoked from network); 19 Nov 2006 20:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2006 20:34:36 -0000
Received: (qmail 50783 invoked by uid 500); 19 Nov 2006 20:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50381 invoked by uid 500); 19 Nov 2006 20:34:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50370 invoked by uid 99); 19 Nov 2006 20:34:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Nov 2006 12:34:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Nov 2006 12:34:28 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F33C05B770; Sun, 19 Nov 2006 12:34:07 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E81FC7F403
	for <java-user@lucene.apache.org>; Sun, 19 Nov 2006 12:34:07 -0800 (PST)
Date: Sun, 19 Nov 2006 12:34:07 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boost Document
In-Reply-To: <359a92830611180752o7fae0074j5a057c9ae05fbdf0@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0611191222340.6468@hal.rescomp.berkeley.edu>
References: <7405959.post@talk.nabble.com>  <Pine.LNX.4.58.0611171040310.30605@hal.rescomp.berkeley.edu>
  <7417101.post@talk.nabble.com> <359a92830611180752o7fae0074j5a057c9ae05fbdf0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: with scoring.  Each time you index a document, it get a doc id greater than
: any already in the index, and they get reassigned if you delete docs and
: optimize.... They *may* be used when scoring to break ties but that doesn't
: do you any good.......

they aren't really used to break ties -- that implies there is code
somewhere that deliberately wants the order to be deterministic and when
it sees two identicle scores, then does a sort on docid.  In reality, the
fact that docs come back in docid order is just a side effect of the fact
that the Scorers iterate over documents in order and that the sorting code
generates a "stable sort"

Looking at why the scores are teh same...

: > ----- DOC 222-----home-
: >   40960.0 = fieldNorm(field=WORD, doc=0)

: > ----- DOC 111-----home-
: > 40960.0 = fieldWeight(WORD:home in 1), product of:
: >   40960.0 = fieldNorm(field=WORD, doc=1)

: > > :             doc1.setBoost(3163);

: > > :             doc2.setBoost(3150);

...norms (which is where field and doc boosts go) get encoded as a single
byte, so they loose a lot of precision, unfortunately the methods used to
translate from float->byte->float aren't subclassable (see
Similarity.encodeNorm) if you write a bit of test code to call those
mehtods on various values and see what you'll get you'll notice that
bigger numbers are more affected then smaller numbers, so you may wnat to
just use smaller boosts (ie: divide by 100) and see if that helps.

alternately: stop using boosts to approach this problem, add these numbers
as a new field, and use the FunctionQuery class from Solr to achieve your
goal (search the list archives for more detailed Discussions of
FunctionQuery)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 19 20:48:09 2006
Return-Path: <java-user-return-24566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21700 invoked from network); 19 Nov 2006 20:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2006 20:48:09 -0000
Received: (qmail 62605 invoked by uid 500); 19 Nov 2006 20:48:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62569 invoked by uid 500); 19 Nov 2006 20:48:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62557 invoked by uid 99); 19 Nov 2006 20:48:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Nov 2006 12:48:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Nov 2006 12:48:00 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GltZh-0004X2-Ku
	for java-user@lucene.apache.org; Sun, 19 Nov 2006 12:47:37 -0800
Message-ID: <7433312.post@talk.nabble.com>
Date: Sun, 19 Nov 2006 12:47:37 -0800 (PST)
From: Shay Banon <kimchy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fwd: Hibernate Lucene trademark issues
In-Reply-To: <455F38BC.1040104@hibernate.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: kimchy@gmail.com
References: <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com> <455F1706.50905@hibernate.org> <455F38BC.1040104@hibernate.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Since I do not want to invade Lucene user list regarding a discussion about
Compass and Hiberante Search, but I still think that it is something that
needs to get answered, here is a link to my blog post discussing this:
http://jroller.com/page/kimchy?entry=hibernate_search_lucene .

Cheers,
Shay


Emmanuel Bernard wrote:
> 
> I forgot a couple of things.
> I do not think that all your object properties belongs to the Index, and 
> some of them will be put in the index with information degradation (ie 
> store year/month rather than the whole date). So I do not believe there 
> is a bidirectional relationship between your domain model and your index 
> documents (for size, efficiency and accuracy purpose).
> For that matter, Compass cannot really truly index your database backed 
> domain model and give back the object to you. Hibernate Search can 
> because it delegate the object hydration to Hibernate Core.
> 
> Of course that's my opinions, and some people can disagree ;-)
> 
> Emmanuel Bernard wrote:
>>
>> Hi,
>> I am not really familiar with Compass I haven't really looked at the
>> code, Hibernate Lucene (now renamed Hibernate Search) started from a
>> user demand. I had some in depth discussions though, with some users
>> that evaluated both Compass and Hibernate Search that helped me drive
>> its design.
>>
>> Here are the arguments in favor of Hibernate Search:
>> 1. not Yet Another API to deal with your domain model
>> If you already use an ORM (JPA or Hibernate), you are familiar with
>> those APIs. Using compass implies that you have to use a different set
>> of API to play with the object lifecycle (CRUD).
>> Hibernate Search is integrated with the org.hibernate.Query interface,
>> and all the CUD operations on the index are triggered from the Hibernate
>> CUD operations.
>>
>> 2. Metadata
>> Metadata are minimal and fit particularly well through annotations, so
>> you don't have yet another XML representation of ther same domain model
>> (Compass might now have annotations support, you'll have to check)
>>
>> 3. it's all about managed objects (ie managed by the Session or the
>> EntityManager)
>> Hibernate Search gives you back objects managed by the Session, so any
>> change made to them will (by default) be synchronized with the database,
>> this is the normal behavior of an ORM, but is not what you have from a
>> Compass search.
>> This approach fits well with the JBoss Seam approach of having all the
>> application around the domain model and EJB 3.0
>>
>> 4. Not too much abstraction
>>  From what I've heard, Compass borrow a lot of its design / classnames
>> from Hibernate/Spring/Lucene. Compass tries to abstract those 3
>> techlnologies (at least Hibernate and Lucene), by providing its own
>> infrastructure.
>> What am trying to do with Hibernate Search is to keep the abstraction as
>> light as possible. For advanced Lucene query you'll have to use pure
>> Lucene APIs, which is possible / natural with Hibernate Search
>>
>>
>> I invite you to check these links (which I expect to release soon)
>> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
>> and for the future (but flexible)
>> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00393.html
>>
>> HTH
>>
>> Emmanuel
>>
>> Lukas Vlcek wrote:
>> >
>> > Emanuael,
>> > I would be glad to hear your answer here (on user list).
>> > Regards,
>> > Lukas
>> >
>> > ---------- Forwarded message ----------
>> > From: Emmanuel Bernard <emmanuel@hibernate.org>
>> > Date: Nov 13, 2006 11:07 PM
>> > Subject: Re: Hibernate Lucene trademark issues
>> > To: java-dev@lucene.apache.org, lukas.vlcek@gmail.com
>> >
>> > Hi Lukas,
>> > I'd be happy to answer your question, but I don't think Lucene dev is
>> > the appropriate area for that kind of discussion.
>> > let's move this discussion here
>> > http://forum.hibernate.org/viewforum.php?f=9 (or in the Lucene User
>> list
>> > if you want to).
>> >
>> > Emmanuel
>> >
>> > Lukas Vlcek wrote:
>> > >
>> > > Hi Emmanuel,
>> > >
>> > > I am interested in you solution. I have a plan to use lucene and
>> > hibernate
>> > > in my next project and search will play very important role
>> > > (*stake-holder*
>> > > functionality). I have heard of
>> > > comapss<http://www.opensymphony.com/compass/>project which introduces
>> > > searching (lucene) layer on top of hibernate also.
>> > > I haven't had a change to study it in detail yet.
>> > >
>> > > Do you think you could give me some high level comments about your
>> > > motivation for implementing lucene search directly in hibernate code,
>> > > couldn't you just use compass project? Is there any fundamental
>> > difference
>> > > between your approach and comapss?
>> > >
>> > > Many thanks,
>> > > Lukas
>> > >
>> > > On 11/6/06, Emmanuel Bernard <emmanuel@hibernate.org> wrote:
>> > > >
>> > > > Hi guys,
>> > > > I'm Emmanuel Bernard from JBoss.
>> > > > I'm the current lead developer of the Hibernate Lucene integration
>> > > module.
>> > > > The goal of this project is to facilitate the integration of a 
>> search
>> > > > capability to Hibernate based applications. And guess what, I use
>> > Lucene
>> > > > ;-)
>> > > >
>> > > >
>> > >
>> > 
>> http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
>> > > >
>> > >
>> > 
>> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
>> > > >
>> > > > I realized this week end that the 'Hibernate Lucene' name might
>> > infringe
>> > > > the Apache Lucene trademark policy.
>> > > > http://www.cafepress.com/lucene/ seems to state that Lucene is a
>> > > > trademark of the Apache Software Foundation (nice golf shirt BTW)
>> > > > But I wasn't able to find any document explaining the fair use 
>> of the
>> > > > Lucene brand (the license as well as the notice seem to be silent
>> on
>> > > > this subject).
>> > > >
>> > > > Even if Lucene in not trademarked, what do you consider a fair 
>> use of
>> > > > your brand? I'm happy to rename my project, I guess the initial 
>> choice
>> > > > was more a tribute to your project than anything else.
>> > > >
>> > > > Emmanuel
>> > > >
>> > > > PS: please forward this email to the appropriate persons if this
>> > is not
>> > > > the case already (PMC or whatever)
>> > > >
>> > > >
>> > > > 
>> ---------------------------------------------------------------------
>> > > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
>> > > > For additional commands, e-mail: java-dev-help@lucene.apache.org
>> > > >
>> > > >
>> > >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Fwd%3A-Hibernate-Lucene-trademark-issues-tf2651281.html#a7433312
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 02:07:04 2006
Return-Path: <java-user-return-24567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80476 invoked from network); 20 Nov 2006 02:07:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 02:07:04 -0000
Received: (qmail 17938 invoked by uid 500); 20 Nov 2006 02:07:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17555 invoked by uid 500); 20 Nov 2006 02:07:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 4840 invoked by uid 99); 20 Nov 2006 01:50:44 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of howareyounoah@gmail.com designates 66.249.82.224 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:user-agent:mime-version:to:subject:content-type:content-transfer-encoding:from;
        b=Vek0OzxB9V68Xy+7JIXoyWmHkl8p3aaU2CqZ0yxwH+e9AJX4Cny0rQIRvXxTdjRYdCIa6PCrUaqympL39Kv6AbJBxFh4Pzy9hGc8H/oUZbRl4H9Pg2MG3/dkTg9e6AACUZ0j+KFxzrJlr4LFS+EJgYFkjDzHmD64CdLYEUAJKUk=
Message-ID: <456109BC.9000306@gmail.com>
Date: Mon, 20 Nov 2006 09:49:48 +0800
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Implementing scoring in Lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
From: noah <howareyounoah@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Is there a step by step guide on how to implement the scoring function 
for Apache Lucene?
The help given on the website is not easy to follow.

How do I integrate the search function into my website?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 02:11:29 2006
Return-Path: <java-user-return-24568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81833 invoked from network); 20 Nov 2006 02:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 02:11:28 -0000
Received: (qmail 24497 invoked by uid 500); 20 Nov 2006 02:11:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24456 invoked by uid 500); 20 Nov 2006 02:11:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24445 invoked by uid 99); 20 Nov 2006 02:11:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Nov 2006 18:11:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.113.241.148] (HELO iss04.interliant.com) (207.113.241.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Nov 2006 18:11:11 -0800
Received: from EX-008.mail.navisite.com (ex-008.interliant.com [207.113.240.188])
	by iss04.interliant.com (8.10.2/8.10.2) with ESMTP id kAK2AaB16933
	for <java-user@lucene.apache.org>; Sun, 19 Nov 2006 20:10:38 -0600 (CST)
Received: from [10.128.233.106] ([80.187.217.50]) by EX-008.mail.navisite.com over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Sun, 19 Nov 2006 20:10:34 -0600
Message-ID: <45610E92.6020104@hibernate.org>
Date: Mon, 20 Nov 2006 03:10:26 +0100
From: Emmanuel Bernard <emmanuel@hibernate.org>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fwd: Hibernate Lucene trademark issues
References: <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com> <455F1706.50905@hibernate.org> <455F38BC.1040104@hibernate.org> <7433312.post@talk.nabble.com>
In-Reply-To: <7433312.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 20 Nov 2006 02:10:35.0542 (UTC) FILETIME=[10AF5360:01C70C49]
X-Virus-Checked: Checked by ClamAV on apache.org

Cool thanks.

Shay Banon wrote:
>
> Since I do not want to invade Lucene user list regarding a discussion 
> about
> Compass and Hiberante Search, but I still think that it is something that
> needs to get answered, here is a link to my blog post discussing this:
> http://jroller.com/page/kimchy?entry=hibernate_search_lucene .
>
> Cheers,
> Shay
>
>
> Emmanuel Bernard wrote:
> >
> > I forgot a couple of things.
> > I do not think that all your object properties belongs to the Index, and
> > some of them will be put in the index with information degradation (ie
> > store year/month rather than the whole date). So I do not believe there
> > is a bidirectional relationship between your domain model and your index
> > documents (for size, efficiency and accuracy purpose).
> > For that matter, Compass cannot really truly index your database backed
> > domain model and give back the object to you. Hibernate Search can
> > because it delegate the object hydration to Hibernate Core.
> >
> > Of course that's my opinions, and some people can disagree ;-)
> >
> > Emmanuel Bernard wrote:
> >>
> >> Hi,
> >> I am not really familiar with Compass I haven't really looked at the
> >> code, Hibernate Lucene (now renamed Hibernate Search) started from a
> >> user demand. I had some in depth discussions though, with some users
> >> that evaluated both Compass and Hibernate Search that helped me drive
> >> its design.
> >>
> >> Here are the arguments in favor of Hibernate Search:
> >> 1. not Yet Another API to deal with your domain model
> >> If you already use an ORM (JPA or Hibernate), you are familiar with
> >> those APIs. Using compass implies that you have to use a different set
> >> of API to play with the object lifecycle (CRUD).
> >> Hibernate Search is integrated with the org.hibernate.Query interface,
> >> and all the CUD operations on the index are triggered from the 
> Hibernate
> >> CUD operations.
> >>
> >> 2. Metadata
> >> Metadata are minimal and fit particularly well through annotations, so
> >> you don't have yet another XML representation of ther same domain model
> >> (Compass might now have annotations support, you'll have to check)
> >>
> >> 3. it's all about managed objects (ie managed by the Session or the
> >> EntityManager)
> >> Hibernate Search gives you back objects managed by the Session, so any
> >> change made to them will (by default) be synchronized with the 
> database,
> >> this is the normal behavior of an ORM, but is not what you have from a
> >> Compass search.
> >> This approach fits well with the JBoss Seam approach of having all the
> >> application around the domain model and EJB 3.0
> >>
> >> 4. Not too much abstraction
> >>  From what I've heard, Compass borrow a lot of its design / classnames
> >> from Hibernate/Spring/Lucene. Compass tries to abstract those 3
> >> techlnologies (at least Hibernate and Lucene), by providing its own
> >> infrastructure.
> >> What am trying to do with Hibernate Search is to keep the 
> abstraction as
> >> light as possible. For advanced Lucene query you'll have to use pure
> >> Lucene APIs, which is possible / natural with Hibernate Search
> >>
> >>
> >> I invite you to check these links (which I expect to release soon)
> >> 
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> >> and for the future (but flexible)
> >> 
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00393.html
> >>
> >> HTH
> >>
> >> Emmanuel
> >>
> >> Lukas Vlcek wrote:
> >> >
> >> > Emanuael,
> >> > I would be glad to hear your answer here (on user list).
> >> > Regards,
> >> > Lukas
> >> >
> >> > ---------- Forwarded message ----------
> >> > From: Emmanuel Bernard <emmanuel@hibernate.org>
> >> > Date: Nov 13, 2006 11:07 PM
> >> > Subject: Re: Hibernate Lucene trademark issues
> >> > To: java-dev@lucene.apache.org, lukas.vlcek@gmail.com
> >> >
> >> > Hi Lukas,
> >> > I'd be happy to answer your question, but I don't think Lucene dev is
> >> > the appropriate area for that kind of discussion.
> >> > let's move this discussion here
> >> > http://forum.hibernate.org/viewforum.php?f=9 (or in the Lucene User
> >> list
> >> > if you want to).
> >> >
> >> > Emmanuel
> >> >
> >> > Lukas Vlcek wrote:
> >> > >
> >> > > Hi Emmanuel,
> >> > >
> >> > > I am interested in you solution. I have a plan to use lucene and
> >> > hibernate
> >> > > in my next project and search will play very important role
> >> > > (*stake-holder*
> >> > > functionality). I have heard of
> >> > > comapss<http://www.opensymphony.com/compass/>project which 
> introduces
> >> > > searching (lucene) layer on top of hibernate also.
> >> > > I haven't had a change to study it in detail yet.
> >> > >
> >> > > Do you think you could give me some high level comments about your
> >> > > motivation for implementing lucene search directly in hibernate 
> code,
> >> > > couldn't you just use compass project? Is there any fundamental
> >> > difference
> >> > > between your approach and comapss?
> >> > >
> >> > > Many thanks,
> >> > > Lukas
> >> > >
> >> > > On 11/6/06, Emmanuel Bernard <emmanuel@hibernate.org> wrote:
> >> > > >
> >> > > > Hi guys,
> >> > > > I'm Emmanuel Bernard from JBoss.
> >> > > > I'm the current lead developer of the Hibernate Lucene 
> integration
> >> > > module.
> >> > > > The goal of this project is to facilitate the integration of a
> >> search
> >> > > > capability to Hibernate based applications. And guess what, I use
> >> > Lucene
> >> > > > ;-)
> >> > > >
> >> > > >
> >> > >
> >> >
> >> 
> http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
> >> > > >
> >> > >
> >> >
> >> 
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> >> > > >
> >> > > > I realized this week end that the 'Hibernate Lucene' name might
> >> > infringe
> >> > > > the Apache Lucene trademark policy.
> >> > > > http://www.cafepress.com/lucene/ seems to state that Lucene is a
> >> > > > trademark of the Apache Software Foundation (nice golf shirt BTW)
> >> > > > But I wasn't able to find any document explaining the fair use
> >> of the
> >> > > > Lucene brand (the license as well as the notice seem to be silent
> >> on
> >> > > > this subject).
> >> > > >
> >> > > > Even if Lucene in not trademarked, what do you consider a fair
> >> use of
> >> > > > your brand? I'm happy to rename my project, I guess the initial
> >> choice
> >> > > > was more a tribute to your project than anything else.
> >> > > >
> >> > > > Emmanuel
> >> > > >
> >> > > > PS: please forward this email to the appropriate persons if this
> >> > is not
> >> > > > the case already (PMC or whatever)
> >> > > >
> >> > > >
> >> > > >
> >> ---------------------------------------------------------------------
> >> > > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> >> > > > For additional commands, e-mail: java-dev-help@lucene.apache.org
> >> > > >
> >> > > >
> >> > >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context: 
> http://www.nabble.com/Fwd%3A-Hibernate-Lucene-trademark-issues-tf2651281.html#a7433312
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 03:55:02 2006
Return-Path: <java-user-return-24569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9958 invoked from network); 20 Nov 2006 03:55:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 03:55:01 -0000
Received: (qmail 4358 invoked by uid 500); 20 Nov 2006 03:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4259 invoked by uid 500); 20 Nov 2006 03:54:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4186 invoked by uid 99); 20 Nov 2006 03:54:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Nov 2006 19:54:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 19 Nov 2006 19:54:41 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kAK3sEp1017704
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 05:54:14 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mbk5ijda; 20 Nov 2006 05:54:00 +0200
Message-ID: <456126E3.7030209@teamware.com>
Date: Mon, 20 Nov 2006 14:54:11 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: How to do a "starts with" search
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm trying to replace an existing search mechanism that supports a 'starts with' 
type of searching, for example a mail subject can contain the string

A B C D

the existing search allows the user to search starts with 'A B*' which would 
match, whereas starts with 'B C*' would not.  PhraseQuery with no slop would 
would not work as it would match.

Is there any query I can enfore the starts with, so that 'B C*' does not match.

If not, do I have to use some HitsCollector to filter the results after the 
search - but then how do I find out the positional information.

Regards
Antony








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 08:21:07 2006
Return-Path: <java-user-return-24570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63206 invoked from network); 20 Nov 2006 08:21:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 08:21:06 -0000
Received: (qmail 35410 invoked by uid 500); 20 Nov 2006 08:21:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34884 invoked by uid 500); 20 Nov 2006 08:21:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34873 invoked by uid 99); 20 Nov 2006 08:21:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:21:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:20:51 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gm4OF-0006xd-87
	for java-user@lucene.apache.org; Mon, 20 Nov 2006 00:20:31 -0800
Message-ID: <7438630.post@talk.nabble.com>
Date: Mon, 20 Nov 2006 00:20:31 -0800 (PST)
From: sirakov <sirakov@gmail.com>
To: java-user@lucene.apache.org
Subject: Newbie Search Question
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sirakov@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,
the indexation works, as well as the search. 

E:\Temp>java org.apache.lucene.demo.IndexFiles E:\Temp\linux-vani
Indexing to directory 'index'...
adding E:\Temp\linux-vani\mngenf.pdf
adding E:\Temp\linux-vani\VVZSS2006.pdf
adding E:\Temp\linux-vani\komm.Vlvz-SS06-Hp.pdf
adding E:\Temp\linux-vani\ostsuednf.pdf
adding E:\Temp\linux-vani\ects_2006s.pdf
adding E:\Temp\linux-vani\Programm_SS06.doc
adding E:\Temp\linux-vani\Programm_SS06.kwd
adding E:\Temp\linux-vani\bulso-nf.pdf
adding E:\Temp\linux-vani\Programm_SS06.rtf
Optimizing...
2624 total milliseconds

E:\Temp>java org.apache.lucene.demo.SearchFiles
Query: Kulturthema
Searching for: kulturthema
2 total matching documents
1. E:\Temp\linux-vani\Programm_SS06.rtf
2. E:\Temp\linux-vani\Programm_SS06.doc
Query:


But how I can insert some text into the search results. I must use the
highligter or what? Unfortunately, I find no tips about that under
http://lucene.apache.org/java/docs/gettingstarted.html.

Thanks in advance,
Sirakov
-- 
View this message in context: http://www.nabble.com/Newbie-Search-Question-tf2667479.html#a7438630
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 08:22:06 2006
Return-Path: <java-user-return-24571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63444 invoked from network); 20 Nov 2006 08:22:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 08:22:05 -0000
Received: (qmail 36635 invoked by uid 500); 20 Nov 2006 08:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36606 invoked by uid 500); 20 Nov 2006 08:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36594 invoked by uid 99); 20 Nov 2006 08:22:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:22:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stephan.spat@joanneum.at designates 143.224.24.130 as permitted sender)
Received: from [143.224.24.130] (HELO mail.healthgate.at) (143.224.24.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:21:55 -0800
Received: by mail.healthgate.at (Postfix, from userid 65534)
	id 20C5C117CA2; Mon, 20 Nov 2006 09:26:47 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by mail.healthgate.at (Postfix) with ESMTP id 83E2811831D
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 09:26:46 +0100 (CET)
Received: from [143.224.23.166] (msgw166.joanneum.ac.at [143.224.23.166])
	by mail.healthgate.at (Postfix) with ESMTP id A6938116A0F
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 09:26:42 +0100 (CET)
Message-ID: <45616582.4040807@joanneum.at>
Date: Mon, 20 Nov 2006 09:21:22 +0100
From: Stephan Spat <stephan.spat@joanneum.at>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Q: Highlighter + Search symbols "*, ?, ~"
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by AMaViS snapshot-20020531
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on 
	msgs130.healthgate.at
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-4.8 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE 
	autolearn=no version=2.64

Hello!

I would like to highlight the searching words from the user query in my 
result presentation. Therfore I use the highlighter package. I used to 
example published in "Lucene in Action" to do so! When I use bollean 
operators there is no problem, but with operators like "?", "*", ... the 
words cannot be found anymore.

Is it possible to highlight text (word) fregments (without extension of 
th package) when I use ?, *, ... operators? And when it is possible, how?

Thank's a lot!

Stephan Spat

PS: The used code:

public String cutAndHighlightText(String text, SearchParameterVO 
searchParameter) {
       
        QueryParser queryParser = new QueryParser(
            ConstantsRetrieval.FIELD_DOC_CONTENT, new SimpleAnalyzer());
       
        String formattedText = null;
       
        try {
           
            QueryScorer queryScorer = new QueryScorer(
                    queryParser.parse(searchParameter.getUserQuery()));
           
            
//logger.debug(queryParser.parse(searchParameter.getUserQuery()).toString());
           
            SimpleHTMLFormatter formatter = new SimpleHTMLFormatter(
                    "<span class=\"highlight\">", "</span>");
           
            Highlighter highlighter = new Highlighter(formatter, 
queryScorer);
            Fragmenter fragmenter = new SimpleFragmenter(200);
            highlighter.setTextFragmenter(fragmenter);
           
            TokenStream tokenStream = new StandardAnalyzer().
                tokenStream(ConstantsRetrieval.FIELD_DOC_CONTENT, new 
StringReader(text));
           
            formattedText = highlighter.getBestFragments(tokenStream, 
text, 5, "...");
           
            FileWriter writer = new FileWriter(
                    "D:/development/iremr/text/highlightedDoc.html");
           
            writer.write("<html>");
            writer.write("<style>\n" +
                    ".highlight {\n" +
                    " background: yellow;\n" +
                    "}\n" +
                    "</style>");
            writer.write("<body>");
            writer.write(formattedText);
            writer.write("</body></html>");
            writer.close();
           
        } catch (ParseException e) {
            logger.error("Not able to parse query\n" + e.getMessage());
            return null;
        } catch (IOException e) {
            logger.error("IO-Exception in highlighting" + e.getMessage());
            return null;
        }
       
        return formattedText;
    }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 08:42:16 2006
Return-Path: <java-user-return-24572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68177 invoked from network); 20 Nov 2006 08:42:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 08:42:15 -0000
Received: (qmail 57964 invoked by uid 500); 20 Nov 2006 08:42:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57939 invoked by uid 500); 20 Nov 2006 08:42:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57928 invoked by uid 99); 20 Nov 2006 08:42:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:42:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stephan.spat@joanneum.at designates 143.224.24.130 as permitted sender)
Received: from [143.224.24.130] (HELO mail.healthgate.at) (143.224.24.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:42:05 -0800
Received: by mail.healthgate.at (Postfix, from userid 65534)
	id 87E121134E5; Mon, 20 Nov 2006 09:46:59 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by mail.healthgate.at (Postfix) with ESMTP id 6CDD511364B
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 09:46:57 +0100 (CET)
Received: from [143.224.23.166] (msgw166.joanneum.ac.at [143.224.23.166])
	by mail.healthgate.at (Postfix) with ESMTP id C0797108FA0
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 09:46:53 +0100 (CET)
Message-ID: <45616A43.7040402@joanneum.at>
Date: Mon, 20 Nov 2006 09:41:39 +0100
From: Stephan Spat <stephan.spat@joanneum.at>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Q: Highlighter + Search symbols "*, ?, ~"
References: <45616582.4040807@joanneum.at>
In-Reply-To: <45616582.4040807@joanneum.at>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by AMaViS snapshot-20020531
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on 
	msgs130.healthgate.at
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-4.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=2.64

Stephan Spat schrieb:
> I would like to highlight the searching words from the user query in 
> my result presentation. Therfore I use the highlighter package. I used 
> to example published in "Lucene in Action" to do so! When I use 
> bollean operators there is no problem, but with operators like "?", 
> "*", ... the words cannot be found anymore.
>
> Is it possible to highlight text (word) fregments (without extension 
> of th package) when I use ?, *, ... operators? And when it is 
> possible, how?
I have already found a solution: Have to rewrite the query!!

with kind regards

Stephan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 08:55:11 2006
Return-Path: <java-user-return-24573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72210 invoked from network); 20 Nov 2006 08:55:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 08:55:10 -0000
Received: (qmail 73040 invoked by uid 500); 20 Nov 2006 08:55:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72802 invoked by uid 500); 20 Nov 2006 08:55:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72791 invoked by uid 99); 20 Nov 2006 08:55:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:55:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 00:54:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BD4E630EFC1F; Mon, 20 Nov 2006 03:54:37 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id AE35630EFC19
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 03:54:24 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <7438630.post@talk.nabble.com>
References: <7438630.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <29AA93ED-F339-49BB-8D37-E4DDF0D987A5@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Newbie Search Question
Date: Mon, 20 Nov 2006 03:54:21 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Nov 20, 2006, at 3:20 AM, sirakov wrote:
> E:\Temp>java org.apache.lucene.demo.SearchFiles
> Query: Kulturthema
> Searching for: kulturthema
> 2 total matching documents
> 1. E:\Temp\linux-vani\Programm_SS06.rtf
> 2. E:\Temp\linux-vani\Programm_SS06.doc
> Query:
>
>
> But how I can insert some text into the search results. I must use the
> highligter or what? Unfortunately, I find no tips about that under
> http://lucene.apache.org/java/docs/gettingstarted.html.

The demo code does not tap into highlighting.  To integrate the  
highlighter, you'll use its API and add it to the Java code that  
outputs the results.  It's API is here:

	<http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ 
highlight/package-summary.html>

You'll learn more about the usage of the API by perusing the test  
cases available along with the source code (either in the source  
distribution or Subversion directly).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 09:01:23 2006
Return-Path: <java-user-return-24574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74040 invoked from network); 20 Nov 2006 09:01:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 09:01:23 -0000
Received: (qmail 81216 invoked by uid 500); 20 Nov 2006 09:01:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81179 invoked by uid 500); 20 Nov 2006 09:01:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81168 invoked by uid 99); 20 Nov 2006 09:01:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 01:01:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 01:01:11 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kAK90jgG011185
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 10:00:46 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 4B1158BD33
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 10:00:46 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 05031-04 for <java-user@lucene.apache.org>;
 Mon, 20 Nov 2006 10:00:45 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 3F92F8BD59
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 10:00:45 +0100 (CET)
Message-ID: <45616EB8.2070404@uni-hd.de>
Date: Mon, 20 Nov 2006 10:00:40 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to do a "starts with" search
References: <456126E3.7030209@teamware.com>
In-Reply-To: <456126E3.7030209@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Antony Bowesman schrieb:
> Hi,
> 
> I'm trying to replace an existing search mechanism that supports a
> 'starts with' type of searching, for example a mail subject can contain
> the string
> 
> A B C D
> 
> the existing search allows the user to search starts with 'A B*' which
> would match, whereas starts with 'B C*' would not.  PhraseQuery with no
> slop would would not work as it would match.
> 
> Is there any query I can enfore the starts with, so that 'B C*' does not
> match.

Please refer to  the answers to my question on this list:
http://www.nabble.com/forum/ViewPost.jtp?post=7337585&framed=y

Shortly spoken: SpanFirstQuery works like a charm :)

hth,
 martin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 10:36:16 2006
Return-Path: <java-user-return-24575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98340 invoked from network); 20 Nov 2006 10:36:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 10:36:15 -0000
Received: (qmail 3669 invoked by uid 500); 20 Nov 2006 10:36:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3631 invoked by uid 500); 20 Nov 2006 10:36:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3620 invoked by uid 99); 20 Nov 2006 10:36:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 02:36:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 02:36:03 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kAKAZG49017695
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 12:35:17 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mbkc_k5v; 20 Nov 2006 12:35:00 +0200
Message-ID: <456184E0.9060108@teamware.com>
Date: Mon, 20 Nov 2006 21:35:12 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to do a "starts with" search
References: <456126E3.7030209@teamware.com> <45616EB8.2070404@uni-hd.de>
In-Reply-To: <45616EB8.2070404@uni-hd.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Martin Braun wrote:
> Please refer to  the answers to my question on this list:
> http://www.nabble.com/forum/ViewPost.jtp?post=7337585&framed=y
> 
> Shortly spoken: SpanFirstQuery works like a charm :)

Thanks Martin, that looks just right.  I'll try it.
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 11:32:04 2006
Return-Path: <java-user-return-24576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12742 invoked from network); 20 Nov 2006 11:32:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 11:32:03 -0000
Received: (qmail 84583 invoked by uid 500); 20 Nov 2006 11:32:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84294 invoked by uid 500); 20 Nov 2006 11:32:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84283 invoked by uid 99); 20 Nov 2006 11:32:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 03:32:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 03:31:53 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gm7N7-0008UR-FF
	for java-user@lucene.apache.org; Mon, 20 Nov 2006 03:31:33 -0800
Message-ID: <7440978.post@talk.nabble.com>
Date: Mon, 20 Nov 2006 03:31:33 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: how to search string with words
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   I wonder how I can perform search on string of words within PDF file
contents, for instance,

      I type "third party license" in the search text box, I'm using
QueryParser:

           String searchString = request.getParameter("txtSearch");

           QueryParser parser = new QueryParser("contents", analyzer);

           Query query = parser.parse(searchString);

      From the system.out.println(), I noticed that the query has been
broken like below:

           contents:third contents:party contents:license

      So, I m wondering how can I make the query becomes contents:third
party license? And make the searching more accurate.

   Thanks.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/how-to-search-string-with-words-tf2668490.html#a7440978
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 11:48:53 2006
Return-Path: <java-user-return-24577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18069 invoked from network); 20 Nov 2006 11:48:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 11:48:52 -0000
Received: (qmail 5480 invoked by uid 500); 20 Nov 2006 11:48:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5443 invoked by uid 500); 20 Nov 2006 11:48:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5432 invoked by uid 99); 20 Nov 2006 11:48:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 03:48:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 03:48:42 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gm7dO-0001Ov-FZ
	for java-user@lucene.apache.org; Mon, 20 Nov 2006 03:48:22 -0800
Message-ID: <7441161.post@talk.nabble.com>
Date: Mon, 20 Nov 2006 03:48:22 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Delete contents from index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   How can I delete the contents from Index file? Is there any example that
I can refer to?

   Thanks.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Delete-contents-from-index-tf2668566.html#a7441161
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 11:57:00 2006
Return-Path: <java-user-return-24578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25715 invoked from network); 20 Nov 2006 11:56:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 11:56:59 -0000
Received: (qmail 14685 invoked by uid 500); 20 Nov 2006 11:57:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14658 invoked by uid 500); 20 Nov 2006 11:57:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14647 invoked by uid 99); 20 Nov 2006 11:57:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 03:57:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 03:56:49 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 7AC73DC9A57
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 06:56:28 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Mon, 20 Nov 2006 06:56:30 -0500
X-Sasl-enc: VTjLVVu+rPn6CDl/tjSADfjYMrFFqf781Qq1B+R2eCs1 1164023790
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 0FD30A7EE
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 06:56:29 -0500 (EST)
Message-ID: <456197E8.5010302@mikemccandless.com>
Date: Mon, 20 Nov 2006 06:56:24 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Delete contents from index
References: <7441161.post@talk.nabble.com>
In-Reply-To: <7441161.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

spinergywmy wrote:

>    How can I delete the contents from Index file? Is there any example that
> I can refer to?

Just create an IndexWriter with the 3rd boolean argument (create) set to 
true.  This will remove any existing files.

Alternatively, you can use FSDirectory.getDirectory(<path-to-index>, true).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 12:47:00 2006
Return-Path: <java-user-return-24579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37846 invoked from network); 20 Nov 2006 12:46:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 12:46:59 -0000
Received: (qmail 82526 invoked by uid 500); 20 Nov 2006 12:47:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82477 invoked by uid 500); 20 Nov 2006 12:47:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82466 invoked by uid 99); 20 Nov 2006 12:47:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 04:47:01 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_PASS,SUBJECT_ENCODED_TWICE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stephan.spat@joanneum.at designates 143.224.24.130 as permitted sender)
Received: from [143.224.24.130] (HELO mail.healthgate.at) (143.224.24.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 04:46:48 -0800
Received: by mail.healthgate.at (Postfix, from userid 65534)
	id B0FBE11744B; Mon, 20 Nov 2006 13:51:42 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by mail.healthgate.at (Postfix) with ESMTP id 776211178DD
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 13:51:41 +0100 (CET)
Received: from [143.224.23.166] (msgw166.joanneum.ac.at [143.224.23.166])
	by mail.healthgate.at (Postfix) with ESMTP id 0EDC811744B
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 13:51:37 +0100 (CET)
Message-ID: <4561A39E.9060405@joanneum.at>
Date: Mon, 20 Nov 2006 13:46:22 +0100
From: Stephan Spat <stephan.spat@joanneum.at>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: =?ISO-8859-15?Q?Q=3A_Wildcard_searching_with_german_um?=
 =?ISO-8859-15?Q?lauts_=28=E4=2C_=F6=2C_=DF=2C_=2E=2E=2E=29?=
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by AMaViS snapshot-20020531
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on 
	msgs130.healthgate.at
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-4.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=2.64

Hello again!

I use the following Analyzer to analyze my documents:

public TokenStream tokenStream(String fieldName, Reader reader) {
                return new SnowballFilter(
                    new LowerCaseFilter(
                        new StandardFilter(
                            new StandardTokenizer(reader))), "German");   
    }

It replaces german umlauts, e.g. ä <=> a, ü <=> u, ... . So no umlauts 
are in the index. For searching I use the same Analyzer. When I do a 
simple search for a word with umlauts there is no problem. But if I use 
addidionally wildcards I suppose the word is not analyzed and so I word 
with umlauts and wildcards is not found in the index?!! (for example: 
grö*). Is this assumption correct?

Is the only way to use wildcards and umlauts not to use the 
StadardFilter (I suppose replacement is done here)? Or is there a 
"trick" to use umlauts and wildcards? Or is it necessary to write a new 
Filter instead of the StandardFilter?

Thank's a lot

Stephan Spat


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 12:55:05 2006
Return-Path: <java-user-return-24580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39648 invoked from network); 20 Nov 2006 12:55:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 12:55:03 -0000
Received: (qmail 99661 invoked by uid 500); 20 Nov 2006 12:55:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99524 invoked by uid 500); 20 Nov 2006 12:55:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99504 invoked by uid 99); 20 Nov 2006 12:55:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 04:55:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [204.152.235.220] (HELO l98upmt3.hewitt.com) (204.152.235.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 04:54:52 -0800
Received: from linkap11.hewitt.com (linkap11.hewitt.com [10.20.63.2])
	by l98upmt3.hewitt.com (8.13.4/8.13.4) with ESMTP id kAKCsUCC028236
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 06:54:30 -0600 (CST)
Received: from 10.20.63.62 by linkap11.hewitt.com with ESMTP (Tumbleweed
 MMS SMTP Relay); Mon, 20 Nov 2006 06:54:21 -0600
X-Server-Uuid: 8E43C66C-9DC0-4EF6-8749-D8C04BB61E49
To: java-user@lucene.apache.org
Subject: Fw: Urgent : Specific search problem with whitespace analyzer
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OF87DBB200.4A74D651-ON6525722C.0046B79D-6525722C.0046E65C@hewitt.com>
From: "Krishnendra Nandi" <krishnendra.nandi@hewitt.com>
Date: Mon, 20 Nov 2006 18:24:15 +0530
X-MIMETrack: S/MIME Sign by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 11/20/2006 06:24:24 PM, Serialize by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 11/20/2006 06:24:24 PM, Serialize complete at 11/20/2006 06:24:24 PM,
 S/MIME Sign failed at 11/20/2006 06:24:25 PM: The cryptographic key was
 not found, Serialize by Router on LINTNG1/National/Hewitt
 Associates(Release 6.5.5FP1 HF52|June 29, 2006) at 11/20/2006 06:54:21
 AM, Serialize complete at 11/20/2006 06:54:21 AM
X-HANotesOU: Gurgaon
X-WSS-ID: 697F7AF63DW27840156-02-01
Content-Type: multipart/alternative;
 boundary="=_alternative 0046E6596525722C_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0046E6596525722C_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi,

I am doing "field:text" kind of search using my own analyzer which behaves 
like whitespaceanalyzer. Following are the code snippets for my own 
whitespaceanalyzer and whitespacetokenizer.


// WhiteSpaceAnalyzerMaestro.java
package com.hewitt.itk.maestro.support.service.simplesearch;

import java.io.Reader;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;

/** An Analyzer that uses WhitespaceTokenizer. */

public final class WhitespaceAnalyzerMaestro extends Analyzer {
  public TokenStream tokenStream(String fieldName, Reader reader) {
    return new WhitespaceTokenizerMaestro(reader);
  }
} 



// WhitespaceTokenizerMaestro.java
package com.hewitt.itk.maestro.support.service.simplesearch;

import java.io.Reader;

import org.apache.lucene.analysis.WhitespaceTokenizer;

/** A WhitespaceTokenizerMaestro is a tokenizer that divides text at 
whitespace.
 * Adjacent sequences of non-Whitespace characters form tokens. */

public class WhitespaceTokenizerMaestro extends WhitespaceTokenizer {
  /** Construct a new WhitespaceTokenizerMaestro. */
  public WhitespaceTokenizerMaestro(Reader in) {
    super(in);
  }

  /** Collects only characters which do not satisfy
   * {@link Character#isWhitespace(char)} 
   * and lowercases that character before returning.*/
  protected boolean isTokenChar(char c) {
        c = Character.toLowerCase(c); 
    return !Character.isWhitespace(c);
  }
}



I have modified the tokenizer class by making it return characters in 
lower case.

Now my search criteria is  ISSUE_TITLE:test  in which  ISSUE_TITLE is the 
field in which test is to be searched. 

Following is my code snippet which is doing the search:

BooleanQuery masterQuery = new BooleanQuery();
 
 masterQuery.add(MultiFieldQueryParser.parse(
                                                        searchQuery,
                                                        fields,
                                                        analyzer),
                            REQUIRED,
                            PROHIBITED);

Here the searchquery is   ISSUE_TITLE:test , fields is the array of fields 
in which ISSUE_TITLE is one of the fields and analyzer is 
WhitespaceAnalyzerMaestro() (already mentioned above).

When I run the search, the masterQuery I get after running the above code 
snippet has the following value: 
+(ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* 
ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* 
ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* 
ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* 
ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* 
ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* 
ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test* 
ISSUE_TITLE:test* ISSUE_TITLE:test*)

which I think is not correct. Is the MultiFieldQueryParser not supporting 
WhiteSpaceAnalyzer?

Please help.

Regards
Krishnendra Nandi

 
The information contained in this e-mail and any accompanying documents may contain information that is confidential or otherwise protected from disclosure. If you are not the intended recipient of this message, or if this message has been addressed to you in error, please immediately alert the sender by reply e-mail and then delete this message, including any attachments. Any dissemination, distribution or other use of the contents of this message by anyone other than the intended recipient 
is strictly prohibited.



--=_alternative 0046E6596525722C_=--


From java-user-return-24581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 13:11:12 2006
Return-Path: <java-user-return-24581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43569 invoked from network); 20 Nov 2006 13:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 13:11:11 -0000
Received: (qmail 23971 invoked by uid 500); 20 Nov 2006 13:11:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23939 invoked by uid 500); 20 Nov 2006 13:11:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23928 invoked by uid 99); 20 Nov 2006 13:11:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 05:11:14 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 05:11:01 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2184336nfc
        for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 05:10:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=BkvwmROelro4nm7/PdD9Qre1QuxzCaL9oysvY5+E9e192veTddJgRaHg4/iNAHdcVgMatbQ+6oUeQs8Q9kQW4bsmeIu6t0URE8fUS9YFZCySvmtyW1DtHWhIxhEnMYvY3/P+nhMwpHeoo6Rfwmh98BdfQY5XceddIShYxgyTnZY=
Received: by 10.49.29.2 with SMTP id g2mr6731536nfj.1164028239854;
        Mon, 20 Nov 2006 05:10:39 -0800 (PST)
Received: by 10.49.110.2 with HTTP; Mon, 20 Nov 2006 05:10:39 -0800 (PST)
Message-ID: <ab0709bf0611200510h5bf0b2b3if36b47e3f5f8809e@mail.gmail.com>
Date: Mon, 20 Nov 2006 08:10:39 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Multi-Index Spellchecker
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35579_28667701.1164028239780"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35579_28667701.1164028239780
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Does anyone have any interested in making the spellchecker work across more
than one index? Does the coder of the spellchecker have any advice/dont do
that moron info etc ?

- Mark

------=_Part_35579_28667701.1164028239780--

From java-user-return-24582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 13:35:31 2006
Return-Path: <java-user-return-24582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50609 invoked from network); 20 Nov 2006 13:35:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 13:35:30 -0000
Received: (qmail 47775 invoked by uid 500); 20 Nov 2006 13:35:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47749 invoked by uid 500); 20 Nov 2006 13:35:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47738 invoked by uid 99); 20 Nov 2006 13:35:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 05:35:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeff.storey@dac.us designates 216.85.37.218 as permitted sender)
Received: from [216.85.37.218] (HELO arlington1mail.dac.us) (216.85.37.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 05:35:21 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
Subject: RE: Q: Highlighter + Search symbols "*, ?, ~"
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C70CA8.ACDE8677"
Date: Mon, 20 Nov 2006 08:33:59 -0500
Message-ID: <572725A4D5BFDE41922873B5199337D49E781E@arlington1mail.dac.us>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <572725A4D5BFDE41922873B5199337D49E781E@arlington1mail.dac.us>
Thread-Topic: Q: Highlighter + Search symbols "*, ?, ~"
Thread-Index: AccMf8hC+LeK9cPnQ/2/0X4rnhV6AAAKMCdJ
References: <45616582.4040807@joanneum.at> <45616A43.7040402@joanneum.at>
From: "Storey, Jeff" <jeff.storey@dac.us>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C70CA8.ACDE8677
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Stephan,
=20
Could you explain what you did for your solution?  This is a problem I'm =
currently facing as well. But, for example, if the user searches for =
"head~" would you also be able to highlight "read" and "dead" if they =
are returned or just "head" without the ~.
=20
Thanks.
Jeff

________________________________

From: Stephan Spat [mailto:stephan.spat@joanneum.at]
Sent: Mon 11/20/2006 3:41 AM
To: java-user@lucene.apache.org
Subject: Re: Q: Highlighter + Search symbols "*, ?, ~"



Stephan Spat schrieb:
> I would like to highlight the searching words from the user query in
> my result presentation. Therfore I use the highlighter package. I used
> to example published in "Lucene in Action" to do so! When I use
> bollean operators there is no problem, but with operators like "?",
> "*", ... the words cannot be found anymore.
>
> Is it possible to highlight text (word) fregments (without extension
> of th package) when I use ?, *, ... operators? And when it is
> possible, how?
I have already found a solution: Have to rewrite the query!!

with kind regards

Stephan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C70CA8.ACDE8677
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C70CA8.ACDE8677--

From java-user-return-24583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 13:44:02 2006
Return-Path: <java-user-return-24583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52669 invoked from network); 20 Nov 2006 13:44:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 13:44:01 -0000
Received: (qmail 61907 invoked by uid 500); 20 Nov 2006 13:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61870 invoked by uid 500); 20 Nov 2006 13:44:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61859 invoked by uid 99); 20 Nov 2006 13:44:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 05:44:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of stephan.spat@joanneum.at designates 143.224.24.130 as permitted sender)
Received: from [143.224.24.130] (HELO mail.healthgate.at) (143.224.24.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 05:43:50 -0800
Received: by mail.healthgate.at (Postfix, from userid 65534)
	id 4AA34117E00; Mon, 20 Nov 2006 14:48:44 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by mail.healthgate.at (Postfix) with ESMTP id 4ECA2117F3F
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 14:48:42 +0100 (CET)
Received: from [143.224.23.166] (msgw166.joanneum.ac.at [143.224.23.166])
	by mail.healthgate.at (Postfix) with ESMTP id 903E011798C
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 14:48:38 +0100 (CET)
Message-ID: <4561B0FC.9040808@joanneum.at>
Date: Mon, 20 Nov 2006 14:43:24 +0100
From: Stephan Spat <stephan.spat@joanneum.at>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Q: Highlighter + Search symbols "*, ?, ~"
References: <45616582.4040807@joanneum.at> <45616A43.7040402@joanneum.at> <572725A4D5BFDE41922873B5199337D49E781E@arlington1mail.dac.us>
In-Reply-To: <572725A4D5BFDE41922873B5199337D49E781E@arlington1mail.dac.us>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by AMaViS snapshot-20020531
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on 
	msgs130.healthgate.at
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-4.8 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE 
	autolearn=no version=2.64

Hey Jeff!

Storey, Jeff schrieb:
> Could you explain what you did for your solution?  This is a problem I'm currently facing as well. But, for example, if the user searches for "head~" would you also be able to highlight "read" and "dead" if they are returned or just "head" without the ~.
>   
It is necessary to give a "native" query to the QueryScorer (only 
Boolean operators). Therefore I just took the an IndexWriter object and 
used its public method rewrite(query).

Here the code:

QueryParser queryParser = new QueryParser(
            ConstantsRetrieval.FIELD_DOC_CONTENT, new EMRAnalyzer());
       
        String formattedText = null;
       
        try {
           
            // for the usage of highlighting with wildcards
            Query query = 
indexSearcher.rewrite(queryParser.parse(searchParameter.getUserQuery()));
            QueryScorer queryScorer = new QueryScorer(query);
           
            //logger.debug("User Query: " + query.toString());
           
            SimpleHTMLFormatter formatter = new SimpleHTMLFormatter(
                    "<span class=\"highlight\">", "</span>");
           
            Highlighter highlighter = new Highlighter(formatter, 
queryScorer);
            Fragmenter fragmenter = new SimpleFragmenter(100);
            highlighter.setTextFragmenter(fragmenter);
           
            TokenStream tokenStream = new EMRAnalyzer().
                tokenStream(ConstantsRetrieval.FIELD_DOC_CONTENT, new 
StringReader(text));
           
            formattedText = highlighter.getBestFragments(tokenStream, 
text, 5, "...");
           
            //logger.debug("Formatted Text: \n" + formattedText);
           
            FileWriter writer = new FileWriter(
                    "D:/development/iremr/text/highlightedDoc.html");
           
            writer.write("<html>");
            writer.write("<style>\n" +
                    ".highlight {\n" +
                    " background: yellow;\n" +
                    "}\n" +
                    "</style>");
            writer.write("<body>");
            writer.write(formattedText);
            writer.write("</body></html>");
            writer.close();
           
        } catch (ParseException e) {
            logger.error("Not able to parse query\n" + e.getMessage());
            return null;
        } catch (IOException e) {
            logger.error("IO-Exception in highlighting" + e.getMessage());
            return null;
        }

Stephan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 14:16:55 2006
Return-Path: <java-user-return-24584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64003 invoked from network); 20 Nov 2006 14:16:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 14:16:54 -0000
Received: (qmail 30136 invoked by uid 500); 20 Nov 2006 14:16:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29566 invoked by uid 500); 20 Nov 2006 14:16:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29555 invoked by uid 99); 20 Nov 2006 14:16:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 06:16:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jeff.storey@dac.us designates 216.85.37.218 as permitted sender)
Received: from [216.85.37.218] (HELO arlington1mail.dac.us) (216.85.37.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 06:16:42 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
Subject: RE: Q: Highlighter + Search symbols "*, ?, ~"
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 20 Nov 2006 09:16:20 -0500
Message-ID: <572725A4D5BFDE41922873B5199337D4010D8365@arlington1mail.dac.us>
In-Reply-To: <4561B0FC.9040808@joanneum.at>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Q: Highlighter + Search symbols "*, ?, ~"
Thread-Index: AccMqfITtAGXfoXZTp6mtNeleDFNNgABHCUg
From: "Storey, Jeff" <jeff.storey@dac.us>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the quick reply. I'll be implementing this in the next couple
of days. Appreciate it!

Jeff

-----Original Message-----
From: Stephan Spat [mailto:stephan.spat@joanneum.at]=20
Sent: Monday, November 20, 2006 8:43 AM
To: java-user@lucene.apache.org
Subject: Re: Q: Highlighter + Search symbols "*, ?, ~"

Hey Jeff!

Storey, Jeff schrieb:
> Could you explain what you did for your solution?  This is a problem
I'm currently facing as well. But, for example, if the user searches for
"head~" would you also be able to highlight "read" and "dead" if they
are returned or just "head" without the ~.
>  =20
It is necessary to give a "native" query to the QueryScorer (only=20
Boolean operators). Therefore I just took the an IndexWriter object and=20
used its public method rewrite(query).

Here the code:

QueryParser queryParser =3D new QueryParser(
            ConstantsRetrieval.FIELD_DOC_CONTENT, new EMRAnalyzer());
      =20
        String formattedText =3D null;
      =20
        try {
          =20
            // for the usage of highlighting with wildcards
            Query query =3D=20
indexSearcher.rewrite(queryParser.parse(searchParameter.getUserQuery()))
;
            QueryScorer queryScorer =3D new QueryScorer(query);
          =20
            //logger.debug("User Query: " + query.toString());
          =20
            SimpleHTMLFormatter formatter =3D new SimpleHTMLFormatter(
                    "<span class=3D\"highlight\">", "</span>");
          =20
            Highlighter highlighter =3D new Highlighter(formatter,=20
queryScorer);
            Fragmenter fragmenter =3D new SimpleFragmenter(100);
            highlighter.setTextFragmenter(fragmenter);
          =20
            TokenStream tokenStream =3D new EMRAnalyzer().
                tokenStream(ConstantsRetrieval.FIELD_DOC_CONTENT, new=20
StringReader(text));
          =20
            formattedText =3D highlighter.getBestFragments(tokenStream,=20
text, 5, "...");
          =20
            //logger.debug("Formatted Text: \n" + formattedText);
          =20
            FileWriter writer =3D new FileWriter(
                    "D:/development/iremr/text/highlightedDoc.html");
          =20
            writer.write("<html>");
            writer.write("<style>\n" +
                    ".highlight {\n" +
                    " background: yellow;\n" +
                    "}\n" +
                    "</style>");
            writer.write("<body>");
            writer.write(formattedText);
            writer.write("</body></html>");
            writer.close();
          =20
        } catch (ParseException e) {
            logger.error("Not able to parse query\n" + e.getMessage());
            return null;
        } catch (IOException e) {
            logger.error("IO-Exception in highlighting" +
e.getMessage());
            return null;
        }

Stephan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 16:00:18 2006
Return-Path: <java-user-return-24585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7275 invoked from network); 20 Nov 2006 16:00:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 16:00:16 -0000
Received: (qmail 99480 invoked by uid 500); 20 Nov 2006 16:00:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99436 invoked by uid 500); 20 Nov 2006 16:00:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99425 invoked by uid 99); 20 Nov 2006 16:00:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 08:00:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 08:00:06 -0800
Received: by nf-out-0910.google.com with SMTP id l35so264002nfa
        for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 07:59:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t25StL67yUjeXj8sjEDFWzi0XCBNPF3/mMLJldJkYVLd2tluNzlXcnbmuDMH1QVtcwbvzkTWu0Srihikd3Jqx+Ff+Nq2iA0ZWuAgIIYSCxzYQ45BzDeNsl9ABvfIjYLwj3Lvt2uqUoH7s8JblC2o5UVEY46QcjZAoIi2AFpaxCU=
Received: by 10.82.123.16 with SMTP id v16mr633065buc.1164038383924;
        Mon, 20 Nov 2006 07:59:43 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Mon, 20 Nov 2006 07:59:38 -0800 (PST)
Message-ID: <359a92830611200759r133971b9q6907020b1088de47@mail.gmail.com>
Date: Mon, 20 Nov 2006 10:59:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to search string with words
In-Reply-To: <7440978.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7285_24811342.1164038378775"
References: <7440978.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7285_24811342.1164038378775
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From a reply by Martin:


Please refer to  the answers to my question on this list:
http://www.nabble.com/forum/ViewPost.jtp?post=7337585&framed=y

Shortly spoken: SpanFirstQuery works like a charm :)

hth,


On 11/20/06, spinergywmy <spinergywmy@gmail.com> wrote:
>
>
> Hi,
>
>    I wonder how I can perform search on string of words within PDF file
> contents, for instance,
>
>       I type "third party license" in the search text box, I'm using
> QueryParser:
>
>            String searchString = request.getParameter("txtSearch");
>
>            QueryParser parser = new QueryParser("contents", analyzer);
>
>            Query query = parser.parse(searchString);
>
>       From the system.out.println(), I noticed that the query has been
> broken like below:
>
>            contents:third contents:party contents:license
>
>       So, I m wondering how can I make the query becomes contents:third
> party license? And make the searching more accurate.
>
>    Thanks.
>
> regards,
> Wooi Meng
> --
> View this message in context:
> http://www.nabble.com/how-to-search-string-with-words-tf2668490.html#a7440978
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7285_24811342.1164038378775--

From java-user-return-24586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 18:46:54 2006
Return-Path: <java-user-return-24586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55919 invoked from network); 20 Nov 2006 18:46:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 18:46:53 -0000
Received: (qmail 32596 invoked by uid 500); 20 Nov 2006 18:46:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32480 invoked by uid 500); 20 Nov 2006 18:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32428 invoked by uid 99); 20 Nov 2006 18:46:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 10:46:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 10:46:38 -0800
Received: (qmail 6890 invoked from network); 20 Nov 2006 18:46:14 -0000
Received: from unknown (HELO p5496df62.dip.t-dialin.net) ([pbs]695637@[84.150.223.98])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 20 Nov 2006 18:46:14 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Fw: Urgent : Specific search problem with whitespace analyzer
Date: Mon, 20 Nov 2006 19:45:56 +0100
User-Agent: KMail/1.8.2
References: <OF87DBB200.4A74D651-ON6525722C.0046B79D-6525722C.0046E65C@hewitt.com>
In-Reply-To: <OF87DBB200.4A74D651-ON6525722C.0046B79D-6525722C.0046E65C@hewitt.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611201945.56334@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 20 November 2006 13:54, Krishnendra Nandi wrote:

> When I run the search, the masterQuery I get after running the above
> code snippet has the following value:
> +(ISSUE_TITLE:test* ISSUE_TITLE:test* ISSUE_TITLE:test*
> ISSUE_TITLE:test*

Could you make a small self-contained test case that demonstrates this? 
This would help analyzing the problem. Also, yre you using Lucene 1.4? 
Have you tried to update?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 19:06:13 2006
Return-Path: <java-user-return-24587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63435 invoked from network); 20 Nov 2006 19:06:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 19:06:12 -0000
Received: (qmail 80931 invoked by uid 500); 20 Nov 2006 19:06:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80894 invoked by uid 500); 20 Nov 2006 19:06:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80883 invoked by uid 99); 20 Nov 2006 19:06:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 11:06:15 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FORGED_MUA_OUTLOOK,MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.246] (HELO mail.rhoderunner.com) (216.170.99.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 11:06:01 -0800
Message-ID: <12378468.941164049539891.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
X-UserIsAuth: true
Received: from mism.r-effects.com ([209.166.180.139])
          by mail.rhoderunner.com (JAMES SMTP Server 2.3.0rc2) with SMTP ID 392
          for <java-user@lucene.apache.org>;
          Mon, 20 Nov 2006 14:05:39 -0500 (EST)
From: "spamsucks" <spamsucks@rhoderunner.com>
To: <java-user@lucene.apache.org>
Subject: Sorting on distance from a long/lat
Date: Mon, 20 Nov 2006 14:05:38 -0500
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org

I am successfully able to search for "nearbys" given a longitude and a 
latitude.  The basic summary of how I do this is that I add 1000 to the 
long/lat values and use a RangeFilter in my query.

In my display results, I display the results ordered by distance from the 
original long/lat.  What I do is calulate the distance for every document in 
my result from the original long/lat and perform a sort of the distance.

Doing the sort this way (calculating the distances for all results 
documents) feels like I am being inefficient and wasteful with my CPU 
cycles.  In most cases, I am only displaying the closest 10 documents, but I 
need to calculate the distance for all documents (potentially 1000) in order 
to come up with the 10 closest.

Has anyone wrestled with these questions before?  Is there another approache 
that I can take?

Here is my current working implementation, so you can see what I am 
describing.  The long/lat is stored in a database that I use to build up my 
lucene query/filters
 http://www.visitpa.com/visitpa/visitNearbyActivities.pa?type=dining&name=Color+Me+MineThanks,Phillip


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 19:52:22 2006
Return-Path: <java-user-return-24588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77075 invoked from network); 20 Nov 2006 19:52:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 19:52:20 -0000
Received: (qmail 80349 invoked by uid 500); 20 Nov 2006 19:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80320 invoked by uid 500); 20 Nov 2006 19:52:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80309 invoked by uid 99); 20 Nov 2006 19:52:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 11:52:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 11:52:11 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 403645B778; Mon, 20 Nov 2006 11:51:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3CF1C7F403
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 11:51:50 -0800 (PST)
Date: Mon, 20 Nov 2006 11:51:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Fw: Urgent : Specific search problem with whitespace analyzer
In-Reply-To: <OF87DBB200.4A74D651-ON6525722C.0046B79D-6525722C.0046E65C@hewitt.com>
Message-ID: <Pine.LNX.4.58.0611201147460.15786@hal.rescomp.berkeley.edu>
References: <OF87DBB200.4A74D651-ON6525722C.0046B79D-6525722C.0046E65C@hewitt.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I have modified the tokenizer class by making it return characters in
: lower case.

there is really no reason to do this ... have your analyzer use the
WhitespaceTokenizer, wrapped in a LowerCaseFilter ... that will illiminate
some of your custom code, and perhaps some of your problems as well.

regarding the rest of your code...

:  masterQuery.add(MultiFieldQueryParser.parse(
:                                                         searchQuery,
:                                                         fields,
:                                                         analyzer),
:                             REQUIRED,
:                             PROHIBITED);
:
: Here the searchquery is   ISSUE_TITLE:test , fields is the array of fields
: in which ISSUE_TITLE is one of the fields and analyzer is
: WhitespaceAnalyzerMaestro() (already mentioned above).

...there is a lot going on here, some of which you haven't included so we
can't be sure what exactly it is...
  1) have you tested your analyzer in isolation to ensure that it's
     working properly outside of a QueryParser?
  2) have you tried it with a plain QueryParser instead of a MultiFieldQueryParser?
  3) have you verified that fields really contains what you think it does?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 20:03:28 2006
Return-Path: <java-user-return-24589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78665 invoked from network); 20 Nov 2006 20:03:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 20:03:27 -0000
Received: (qmail 97330 invoked by uid 500); 20 Nov 2006 20:03:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96412 invoked by uid 500); 20 Nov 2006 20:03:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96401 invoked by uid 99); 20 Nov 2006 20:03:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 12:03:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 12:03:19 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5F82C5B778; Mon, 20 Nov 2006 12:02:59 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5C2857F403
	for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 12:02:59 -0800 (PST)
Date: Mon, 20 Nov 2006 12:02:59 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Multi-Index Spellchecker
In-Reply-To: <ab0709bf0611200510h5bf0b2b3if36b47e3f5f8809e@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0611201157130.15786@hal.rescomp.berkeley.edu>
References: <ab0709bf0611200510h5bf0b2b3if36b47e3f5f8809e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Does anyone have any interested in making the spellchecker work across more
: than one index? Does the coder of the spellchecker have any advice/dont do
: that moron info etc ?

Doesn't it already? ... the SpellChecker class doesn't seem to care if you
call indexDictionary more then once ... so you can make multiple
LuceneDictionary instances from your multiple indexes, and add all of
them...

  SpellChecker spellchecker = new SpellChecker(spellIndexDirectory);
  // To use terms from field a of index1
  spellchecker.indexDictionary(new LuceneDictionary(reader1, a_field));
  // To use terms from field b of index1
  spellchecker.indexDictionary(new LuceneDictionary(reader1, b_field));
  // To use terms from field c of index2
  spellchecker.indexDictionary(new LuceneDictionary(reader2, c_field));
  String[] suggestions = spellchecker.suggestSimilar("misspelt", 5);


...or am i missing something here?

(disclaimer: i've never acctually used SpellChecker, just skimmed the
code)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 20:34:38 2006
Return-Path: <java-user-return-24590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94700 invoked from network); 20 Nov 2006 20:34:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 20:34:37 -0000
Received: (qmail 59773 invoked by uid 500); 20 Nov 2006 20:34:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59540 invoked by uid 500); 20 Nov 2006 20:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59420 invoked by uid 99); 20 Nov 2006 20:34:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 12:34:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [208.253.57.9] (HELO UWMAIL.nt02.unitedway.org) (208.253.57.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 12:33:56 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Sorting on distance from a long/lat
Date: Mon, 20 Nov 2006 15:30:48 -0500
Message-ID: <5B99185C1E450E488073D0FDB8A25C730161F698@UWMAIL.nt02.unitedway.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting on distance from a long/lat
Thread-Index: AccM1xecxi5CBDr0QKGMYXdElFk6MQAC6vWg
References: <12378468.941164049539891.JavaMail.root@dell.rhoderunner.com>
From: "Bryzek.Michael" <Michael.Bryzek@uwa.unitedway.org>
To: <java-user@lucene.apache.org>,
	<java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Our general approach is:

  * Rewrite the query to compute the min and max latitude and longitude, =
essentially drawing a box around the coordinate to find all documents =
within the range. This provides for an efficient constant range query to =
find the total, unordered document set. This is much faster than trying =
to do a distance calculation between all documents.

  * Run the search once internally, and compute the distance between all =
matching results. Generally, this requires about 1000 distance =
calculations for our document set

  * Run the search again using our now populated search comparator to =
return ordered results back to the user

Our approach is also rather inefficient for queries that return a large =
number of documents, but we could not find a feasible way to precompute =
the distance between lat/long pairs in advance. I'm also interested in =
hearing other ideas/approaches.

-Mike


-----Original Message-----
From: spamsucks [mailto:spamsucks@rhoderunner.com]
Sent: Mon 11/20/06 2:05 PM
To: java-user@lucene.apache.org
Subject: Sorting on distance from a long/lat
=20
I am successfully able to search for "nearbys" given a longitude and a=20
latitude.  The basic summary of how I do this is that I add 1000 to the=20
long/lat values and use a RangeFilter in my query.

In my display results, I display the results ordered by distance from =
the=20
original long/lat.  What I do is calulate the distance for every =
document in=20
my result from the original long/lat and perform a sort of the distance.

Doing the sort this way (calculating the distances for all results=20
documents) feels like I am being inefficient and wasteful with my CPU=20
cycles.  In most cases, I am only displaying the closest 10 documents, =
but I=20
need to calculate the distance for all documents (potentially 1000) in =
order=20
to come up with the 10 closest.

Has anyone wrestled with these questions before?  Is there another =
approache=20
that I can take?

Here is my current working implementation, so you can see what I am=20
describing.  The long/lat is stored in a database that I use to build up =
my=20
lucene query/filters
 =
http://www.visitpa.com/visitpa/visitNearbyActivities.pa?type=3Ddining&nam=
e=3DColor+Me+MineThanks,Phillip


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 21:26:19 2006
Return-Path: <java-user-return-24591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8991 invoked from network); 20 Nov 2006 21:26:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 21:26:18 -0000
Received: (qmail 61375 invoked by uid 500); 20 Nov 2006 21:26:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61327 invoked by uid 500); 20 Nov 2006 21:26:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61316 invoked by uid 99); 20 Nov 2006 21:26:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 13:26:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 13:26:06 -0800
Received: by wr-out-0506.google.com with SMTP id i21so393279wra
        for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 13:25:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=bCTAE30FP1pRb9Dbt2Uquy9wgSnA/sosqtJB/7yWa332SvAwYmbK445bK+1jdIO7ln9F9N5ZQdiVyj0Wrc5E3xiQAU+B0gv6gPPPEUkWieq9MtzSeFgt5/D8ETkq989MYWREa7azXJg2JUaDK7mddHK/lzmwPWyU2ELUp0bXuic=
Received: by 10.90.29.2 with SMTP id c2mr3988717agc.1164057945775;
        Mon, 20 Nov 2006 13:25:45 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 40sm6976337nzf.2006.11.20.13.25.43;
        Mon, 20 Nov 2006 13:25:44 -0800 (PST)
Message-ID: <45621D60.6090703@gmail.com>
Date: Mon, 20 Nov 2006 16:25:52 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Multi-Index Spellchecker
References: <ab0709bf0611200510h5bf0b2b3if36b47e3f5f8809e@mail.gmail.com> <Pine.LNX.4.58.0611201157130.15786@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0611201157130.15786@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Hoss,

I hadn't looked at the indexDictionary method yet. It does not appear to 
be what I am looking for though...I should have been more explicit -
I am using the spellchecker for a 'did you mean search', so I am not 
using a dedicated spell check index. Instead I am passing the index that 
I am searching and so I
do not want to add a dictionary to that index. The index must not be 
modified...just have suggested words puled from it.

 I want to be able to apply my 'did you mean' check across multiple 
indexes in the case of a multisearcher being used.

- Mark

Chris Hostetter wrote:
> : Does anyone have any interested in making the spellchecker work across more
> : than one index? Does the coder of the spellchecker have any advice/dont do
> : that moron info etc ?
>
> Doesn't it already? ... the SpellChecker class doesn't seem to care if you
> call indexDictionary more then once ... so you can make multiple
> LuceneDictionary instances from your multiple indexes, and add all of
> them...
>
>   SpellChecker spellchecker = new SpellChecker(spellIndexDirectory);
>   // To use terms from field a of index1
>   spellchecker.indexDictionary(new LuceneDictionary(reader1, a_field));
>   // To use terms from field b of index1
>   spellchecker.indexDictionary(new LuceneDictionary(reader1, b_field));
>   // To use terms from field c of index2
>   spellchecker.indexDictionary(new LuceneDictionary(reader2, c_field));
>   String[] suggestions = spellchecker.suggestSimilar("misspelt", 5);
>
>
> ...or am i missing something here?
>
> (disclaimer: i've never acctually used SpellChecker, just skimmed the
> code)
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 21:41:23 2006
Return-Path: <java-user-return-24592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14468 invoked from network); 20 Nov 2006 21:41:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 21:41:21 -0000
Received: (qmail 94402 invoked by uid 500); 20 Nov 2006 21:41:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94380 invoked by uid 500); 20 Nov 2006 21:41:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94369 invoked by uid 99); 20 Nov 2006 21:41:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 13:41:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 13:41:10 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2315922nfc
        for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 13:40:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UEDmgkl1JYVzcdjv8CPYhNu7W72lymOJnWSC7MVvCc+xfgSbt8+omLJFf0o9uqJP/p45rb2tTLBzyF6MoHz+5wk+Nqa3/YcJJe5BDrKCuZLOY8l8MNr5i8zIpy2VhMMEUuCpAlHTqgakbPZlzWC1Y9KNaiBiVjQizDODCAIlE4E=
Received: by 10.49.58.13 with SMTP id l13mr7598620nfk.1164058846324;
        Mon, 20 Nov 2006 13:40:46 -0800 (PST)
Received: by 10.49.110.2 with HTTP; Mon, 20 Nov 2006 13:40:45 -0800 (PST)
Message-ID: <ab0709bf0611201340i181ac352se77829ed24218dfb@mail.gmail.com>
Date: Mon, 20 Nov 2006 16:40:45 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi-Index Spellchecker
In-Reply-To: <45621D60.6090703@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43639_7345629.1164058845945"
References: <ab0709bf0611200510h5bf0b2b3if36b47e3f5f8809e@mail.gmail.com>
	 <Pine.LNX.4.58.0611201157130.15786@hal.rescomp.berkeley.edu>
	 <45621D60.6090703@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43639_7345629.1164058845945
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Uggg. Okay...ignore my last e-mail. I was working from memory and I have
non. I have to go back and look at my code.

On 11/20/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> Thanks Hoss,
>
> I hadn't looked at the indexDictionary method yet. It does not appear to
> be what I am looking for though...I should have been more explicit -
> I am using the spellchecker for a 'did you mean search', so I am not
> using a dedicated spell check index. Instead I am passing the index that
> I am searching and so I
> do not want to add a dictionary to that index. The index must not be
> modified...just have suggested words puled from it.
>
> I want to be able to apply my 'did you mean' check across multiple
> indexes in the case of a multisearcher being used.
>
> - Mark
>
> Chris Hostetter wrote:
> > : Does anyone have any interested in making the spellchecker work across
> more
> > : than one index? Does the coder of the spellchecker have any
> advice/dont do
> > : that moron info etc ?
> >
> > Doesn't it already? ... the SpellChecker class doesn't seem to care if
> you
> > call indexDictionary more then once ... so you can make multiple
> > LuceneDictionary instances from your multiple indexes, and add all of
> > them...
> >
> >   SpellChecker spellchecker = new SpellChecker(spellIndexDirectory);
> >   // To use terms from field a of index1
> >   spellchecker.indexDictionary(new LuceneDictionary(reader1, a_field));
> >   // To use terms from field b of index1
> >   spellchecker.indexDictionary(new LuceneDictionary(reader1, b_field));
> >   // To use terms from field c of index2
> >   spellchecker.indexDictionary(new LuceneDictionary(reader2, c_field));
> >   String[] suggestions = spellchecker.suggestSimilar("misspelt", 5);
> >
> >
> > ...or am i missing something here?
> >
> > (disclaimer: i've never acctually used SpellChecker, just skimmed the
> > code)
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>

------=_Part_43639_7345629.1164058845945--

From java-user-return-24593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 21:43:24 2006
Return-Path: <java-user-return-24593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15042 invoked from network); 20 Nov 2006 21:43:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 21:43:22 -0000
Received: (qmail 693 invoked by uid 500); 20 Nov 2006 21:43:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 666 invoked by uid 500); 20 Nov 2006 21:43:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 655 invoked by uid 99); 20 Nov 2006 21:43:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 13:43:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 13:43:13 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2316516nfc
        for <java-user@lucene.apache.org>; Mon, 20 Nov 2006 13:42:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=omnCSFmrNfq7wOFfka0n5MuYERsk1fvEplBMR7Z8D9ZZgqLEVLsaQAOdNc7xKE0ZNaSka0Jqt8qDSmDmHzM0LSADGdLd5gVV7ADWEuCtqqVShYdIBAmLpwve3WQKb0wcdwEC3b4JchEwl4NIBWnqUV1dRUF65/R4fpJbqr3kTuQ=
Received: by 10.49.3.10 with SMTP id f10mr7584419nfi.1164058969883;
        Mon, 20 Nov 2006 13:42:49 -0800 (PST)
Received: by 10.49.110.2 with HTTP; Mon, 20 Nov 2006 13:42:49 -0800 (PST)
Message-ID: <ab0709bf0611201342r5e74b1ean68ab3d446d330b91@mail.gmail.com>
Date: Mon, 20 Nov 2006 16:42:49 -0500
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Multi-Index Spellchecker
In-Reply-To: <ab0709bf0611201340i181ac352se77829ed24218dfb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_43691_28728554.1164058969847"
References: <ab0709bf0611200510h5bf0b2b3if36b47e3f5f8809e@mail.gmail.com>
	 <Pine.LNX.4.58.0611201157130.15786@hal.rescomp.berkeley.edu>
	 <45621D60.6090703@gmail.com>
	 <ab0709bf0611201340i181ac352se77829ed24218dfb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_43691_28728554.1164058969847
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Okay Hoss...you are correct. I had forgotten that I am not using a live
Index for the 'did you mean' spellcheck index, but create a snapshot
instead. indexDictionary is exactly what I need. Thanks,

Mark

On 11/20/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> Uggg. Okay...ignore my last e-mail. I was working from memory and I have
> non. I have to go back and look at my code.
>
> On 11/20/06, Mark Miller < markrmiller@gmail.com> wrote:
> >
> > Thanks Hoss,
> >
> > I hadn't looked at the indexDictionary method yet. It does not appear to
> >
> > be what I am looking for though...I should have been more explicit -
> > I am using the spellchecker for a 'did you mean search', so I am not
> > using a dedicated spell check index. Instead I am passing the index that
> > I am searching and so I
> > do not want to add a dictionary to that index. The index must not be
> > modified...just have suggested words puled from it.
> >
> > I want to be able to apply my 'did you mean' check across multiple
> > indexes in the case of a multisearcher being used.
> >
> > - Mark
> >
> > Chris Hostetter wrote:
> > > : Does anyone have any interested in making the spellchecker work
> > across more
> > > : than one index? Does the coder of the spellchecker have any
> > advice/dont do
> > > : that moron info etc ?
> > >
> > > Doesn't it already? ... the SpellChecker class doesn't seem to care if
> > you
> > > call indexDictionary more then once ... so you can make multiple
> > > LuceneDictionary instances from your multiple indexes, and add all of
> > > them...
> > >
> > >   SpellChecker spellchecker = new SpellChecker(spellIndexDirectory);
> > >   // To use terms from field a of index1
> > >   spellchecker.indexDictionary(new LuceneDictionary(reader1,
> > a_field));
> > >   // To use terms from field b of index1
> > >   spellchecker.indexDictionary(new LuceneDictionary(reader1,
> > b_field));
> > >   // To use terms from field c of index2
> > >   spellchecker.indexDictionary(new LuceneDictionary(reader2,
> > c_field));
> > >   String[] suggestions = spellchecker.suggestSimilar("misspelt", 5);
> > >
> > >
> > > ...or am i missing something here?
> > >
> > > (disclaimer: i've never acctually used SpellChecker, just skimmed the
> > > code)
> > >
> > >
> > > -Hoss
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
>
>

------=_Part_43691_28728554.1164058969847--

From java-user-return-24594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 20 23:48:51 2006
Return-Path: <java-user-return-24594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33016 invoked from network); 20 Nov 2006 23:48:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2006 23:48:51 -0000
Received: (qmail 74271 invoked by uid 500); 20 Nov 2006 23:48:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74248 invoked by uid 500); 20 Nov 2006 23:48:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 71901 invoked by uid 99); 20 Nov 2006 22:11:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Message-ID: <4562288B.8060701@nuix.com>
Date: Tue, 21 Nov 2006 09:13:31 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061119)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Q: Highlighter + Search symbols "*, ?, ~"
References: <45616582.4040807@joanneum.at> <45616A43.7040402@joanneum.at> <572725A4D5BFDE41922873B5199337D49E781E@arlington1mail.dac.us> <4561B0FC.9040808@joanneum.at>
In-Reply-To: <4561B0FC.9040808@joanneum.at>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Stephan Spat wrote:
> It is necessary to give a "native" query to the QueryScorer (only 
> Boolean operators). Therefore I just took the an IndexWriter object and 
> used its public method rewrite(query).

How efficient is this for huge wildcard queries?  e.g. "a*"

At the moment we highlight our terms by using for instance, 
WildcardQuery#getEnum(IndexReader), and only storing the strings which 
it returns, whereas I would assume Query#rewrite(IndexReader) would take 
up much more memory.

Range queries are another one... try querying for a range from a to zzzz 
and see what happens. :-)

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 03:29:11 2006
Return-Path: <java-user-return-24595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93990 invoked from network); 21 Nov 2006 03:29:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 03:29:10 -0000
Received: (qmail 69473 invoked by uid 500); 21 Nov 2006 03:29:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69436 invoked by uid 500); 21 Nov 2006 03:29:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69410 invoked by uid 99); 21 Nov 2006 03:29:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 19:29:11 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_HELO_PASS,SUBJECT_ENCODED_TWICE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 19:28:59 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kAL3SUDn021298
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 05:28:30 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mbl5skuf; 21 Nov 2006 05:28:00 +0200
Message-ID: <4562724D.5010003@teamware.com>
Date: Tue, 21 Nov 2006 14:28:13 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: =?ISO-8859-1?Q?Re=3A_Q=3A_Wildcard_searching_with_germ?=
 =?ISO-8859-1?Q?an_umlauts_=28=E4=2C_=F6=2C_=DF=2C_=2E=2E=2E=29?=
References: <4561A39E.9060405@joanneum.at>
In-Reply-To: <4561A39E.9060405@joanneum.at>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 21 Nov 2006 05:28:31 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=1.724, required 5,
	BAYES_50 0.00, SUBJECT_ENCODED_TWICE 1.72)
X-TWG-MailScanner-SpamScore: 1
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Stephan Spat wrote:
> Hello again!
> 
> It replaces german umlauts, e.g. ä <=> a, ü <=> u, ... . So no umlauts 
> are in the index. For searching I use the same Analyzer. When I do a 
> simple search for a word with umlauts there is no problem. But if I use 
> addidionally wildcards I suppose the word is not analyzed and so I word 
> with umlauts and wildcards is not found in the index?!! (for example: 
> grö*). Is this assumption correct?

I came across this class this morning:

AnalyzingQueryParser - Overrides Lucene's default QueryParser so that Fuzzy-, 
Prefix-, Range-, and WildcardQuerys are also passed through the given analyzer, 
but ? and * don't get removed from the search terms.

Read the warning re German though.

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 07:31:57 2006
Return-Path: <java-user-return-24596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39216 invoked from network); 21 Nov 2006 07:31:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 07:31:56 -0000
Received: (qmail 31468 invoked by uid 500); 21 Nov 2006 07:31:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31438 invoked by uid 500); 21 Nov 2006 07:31:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31427 invoked by uid 99); 21 Nov 2006 07:31:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 20 Nov 2006 23:31:58 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 20 Nov 2006 23:31:46 -0800
Received: (qmail 10779 invoked from network); 21 Nov 2006 07:27:33 -0000
Received: from unknown (HELO bhavin) (172.16.3.151)
  by mailserver with SMTP; 21 Nov 2006 07:27:33 -0000
Message-ID: <002001c70d41$2585ceb0$970310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: is there any way to find unique records ?
Date: Tue, 21 Nov 2006 13:16:21 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001D_01C70D6F.3D01D650"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_001D_01C70D6F.3D01D650
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
In lucene, is there any way to find only unique records from a single =
field ..?

otherwise unnecessary i have to itereate through Hits and find out =
unique...

plz help..

- Bhavin pandya
------=_NextPart_000_001D_01C70D6F.3D01D650--


From java-user-return-24597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 08:31:09 2006
Return-Path: <java-user-return-24597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58186 invoked from network); 21 Nov 2006 08:31:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 08:31:08 -0000
Received: (qmail 21329 invoked by uid 500); 21 Nov 2006 08:31:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20620 invoked by uid 500); 21 Nov 2006 08:31:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20609 invoked by uid 99); 21 Nov 2006 08:31:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 00:31:10 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.79] (HELO smtp010.mail.ukl.yahoo.com) (217.12.11.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Nov 2006 00:30:57 -0800
Received: (qmail 18440 invoked from network); 21 Nov 2006 08:30:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=rQC12fTWNFE+LzB38DH3Vi0awhRNumBED9Nyjooj1DE8U+fxbAlz91ZcjIQw7WzoTSLHFTsk+OeWHIps2FeVoP/Qp5sdL3iwN+viq89oIKm0OEYyZ+r0ebNy1GL3a+6E24NN9Po/BZFXt1skJD7Be2rQ36kdVgFqnNcUTA3NqDk=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp010.mail.ukl.yahoo.com with SMTP; 21 Nov 2006 08:30:32 -0000
X-YMail-OSG: 16C_XmAVM1nEOBpWw65THpIa6c3PLNYRocpF6xbDcoLh8UtdOZ0gbN5FSanTH7qfTU.2Nv_ivlY1R7RU7CqvfdGyLjbvcgOIpt79EIfg0Kcehg0_raUekmr5UgcR.2dWmctYRm79yemIqdhzNvKBVv2UzKc45Lt8
Message-ID: <4562B924.6080807@yahoo.co.uk>
Date: Tue, 21 Nov 2006 08:30:28 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Q: Highlighter + Search symbols "*, ?, ~"
References: <45616582.4040807@joanneum.at> <45616A43.7040402@joanneum.at> <572725A4D5BFDE41922873B5199337D49E781E@arlington1mail.dac.us> <4561B0FC.9040808@joanneum.at> <4562288B.8060701@nuix.com>
In-Reply-To: <4562288B.8060701@nuix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Daniel Noll wrote:
> How efficient is this for huge wildcard queries?  e.g. "a*"
> At the moment we highlight our terms by using for instance, 
> WildcardQuery#getEnum(IndexReader), and only storing the strings which 
> it returns, whereas I would assume Query#rewrite(IndexReader) would 
> take up much more memory.
>
There is no discernible cost in practice. Query.rewrite always happens 
internally anyway - it is a necessary part of searching. All we are 
doing is pre-empting this step and calling rewrite before core Lucene 
does so we have visibility of the terms actually used for matching. 
Admittedly, the Lucene search code will then needlessly call rewrite on 
our rewritten query when we search with it but this is evaluated *very* 
quickly and does not add any noticeable performance overhead. (Always 
remember to pass the rewritten query to the search method, not the 
orginal). Your suggested approach of calling WildcardQuery.getEnum adds 
an extra sweep of TermEnum on top of the one  that already happens 
internally as part of rewrite (see base class MultiTermQuery.rewrite) so 
is slower and uses no less memory.

> Range queries are another one... try querying for a range from a to 
> zzzz and see what happens. :-)
Note: QueryParser does not use RangeQuery by default any more - it uses 
a filter. This means it's faster and doesn't blow up with an explosion 
in terms when ranges are large. Using this new default setting we lost 
the ability to highlight terms in the range but I think that is 
generally an unusual requirement and on balance the benefits of filters 
over queries for ranges outweigh the costs.

While we're on the subject of large wilcard queries /filtering etc I 
also recently found it useful recently to subclass the QueryParser when 
querying all pages for a domain i.e a query for docs with url fields 
starting with http://www.ibm.com/*.
The old "too many BooleanClause" exception was a likely scenario again 
so I used the new PrefixFilter class as opposed to a WildcardQuery to 
avoid the problem.

Cheers,
Mark

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 09:03:34 2006
Return-Path: <java-user-return-24598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68052 invoked from network); 21 Nov 2006 09:03:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 09:03:33 -0000
Received: (qmail 66614 invoked by uid 500); 21 Nov 2006 09:03:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66588 invoked by uid 500); 21 Nov 2006 09:03:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66577 invoked by uid 99); 21 Nov 2006 09:03:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 01:03:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.81.148.10] (HELO bcn.isoco.net) (62.81.148.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 01:03:22 -0800
Received: by bcn.isoco.net (Postfix, from userid 65534)
	id A329663CE5; Tue, 21 Nov 2006 10:02:58 +0100 (CET)
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on iron.bcn.isoco.net
X-Spam-Level: 
Received: from [172.18.2.124] (lrodrigo.mad.isoco.net [172.18.2.124])
	by bcn.isoco.net (Postfix) with ESMTP id 0708F63CE3
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 10:02:56 +0100 (CET)
Message-ID: <4562C0C1.1000606@isoco.com>
Date: Tue, 21 Nov 2006 10:02:57 +0100
From: Luis Rodrigo Aguado <lrodrigo@isoco.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Combining scores
Content-Type: multipart/alternative;
 boundary="------------040906090107090500000400"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.0 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_MESSAGE autolearn=ham version=3.1.7

--------------040906090107090500000400
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

Hi all,

I am working in a project that, for each query from the user, builds 
four or five different queries and tries to combine the results. The 
first part is already working, but, as I have read that the scores from 
different queries are not comparable at all among them, I am a bit stuck 
in the second part. Which could be a good strategy to get a unified 
score merging the results from different queries over the same index. Is 
there anything already done on that?

I have searched through the list, but all I have found is threads like this:

http://article.gmane.org/gmane.comp.jakarta.lucene.user/10810

that only warn about the incompatibility of scores, but not any clue 
about how to solve it.

Thanks!

Luis.

-- 

*Luis Rodrigo Aguado*

Innovation and R&D

Research Manager

lrodrigo(at)isoco.com

#T  +34913349777

C/Pedro de Valdivia, 10

28006, Madrid, Spain

* *

*iSOCO** *

            intelligent software for the networked economy

            www.isoco.com <http://www.isoco.com/>

 

Este mensaje se dirige exclusivamente a su destinatario y puede contener 
información privilegiada o confidencial. Si no es vd. el destinatario 
indicado, queda notificado de que la utilización, divulgación y/o copia 
sin autorización está prohibida en virtud de la legislación vigente. Si 
ha recibido este mensaje por error, le rogamos que nos lo comunique 
inmediatamente por esta misma vía y proceda a su destrucción.

 

This message is intended exclusively for its addressee and may contain 
information that is CONFIDENTIAL and protected by professional 
privilege. If you are not the intended recipient you are hereby notified 
that any dissemination, copy or disclosure of this communication is 
strictly prohibited by law. If this message has been received in error, 
please immediately notify us via e-mail and delete it.


--------------040906090107090500000400--

From java-user-return-24599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 09:10:38 2006
Return-Path: <java-user-return-24599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70485 invoked from network); 21 Nov 2006 09:10:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 09:10:36 -0000
Received: (qmail 80526 invoked by uid 500); 21 Nov 2006 09:10:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80471 invoked by uid 500); 21 Nov 2006 09:10:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 28332 invoked by uid 99); 21 Nov 2006 04:20:44 -0000
X-ASF-Spam-Status: No, hits=4.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FORGED_HOTMAIL_RCVD,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ad007@hotmail.com designates 65.54.246.174 as permitted sender)
X-Originating-IP: [202.27.88.6]
X-Originating-Email: [ad007@hotmail.com]
Message-ID: <BAY124-W20D0F14DA5287E54C4455CFDEC0@phx.gbl>
From: Adam <ad007@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Ordered Proximity searching, does it exist?
Date: Tue, 21 Nov 2006 15:20:10 +1100
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 21 Nov 2006 04:20:10.0591 (UTC) FILETIME=[556366F0:01C70D24]
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Lucene Users,

Is there a way or has someone been able to implement an ordered proximity s=
earch. Lucene currently uses the "word1 word2"~5 query to find tokens that =
are within 5 words of each other in any order. What I've been asked to do i=
s find only the results that are for instance within 5 words of each other =
in the order the query was written.=20

For a scenario like


text:"blah blah blah. Section 1 of Primary Act 1976, s1. Dogs Act 1999, s3 =
blah blah blah"


Say  I wanted to find the Dogs Act Section 1 using text:"dogs act s1"~5 que=
ry would give the above record when it wasn't in context. This is the reaso=
n for wanting results in order to stop these incorrect results.


Any help would be greatly appreciated.

R
Adam



_________________________________________________________________
Be one of the first to try Windows Live Mail.
http://ideas.live.com/programpage.aspx?versionId=3D5d21c51a-b161-4314-9b0e-=
4911fb2b2e6d=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 09:42:15 2006
Return-Path: <java-user-return-24600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81464 invoked from network); 21 Nov 2006 09:42:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 09:42:14 -0000
Received: (qmail 27746 invoked by uid 500); 21 Nov 2006 09:42:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27715 invoked by uid 500); 21 Nov 2006 09:42:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27697 invoked by uid 99); 21 Nov 2006 09:42:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 01:42:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 01:42:01 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0F87330EFC19; Tue, 21 Nov 2006 04:41:34 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id B898C30EFC17
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 04:41:09 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <BAY124-W20D0F14DA5287E54C4455CFDEC0@phx.gbl>
References: <BAY124-W20D0F14DA5287E54C4455CFDEC0@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0DFB2237-D1E7-4E37-A65F-5B0E09FA02AD@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Ordered Proximity searching, does it exist?
Date: Tue, 21 Nov 2006 04:41:06 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.1


On Nov 20, 2006, at 11:20 PM, Adam wrote:

>
> Dear Lucene Users,
>
> Is there a way or has someone been able to implement an ordered  
> proximity search. Lucene currently uses the "word1 word2"~5 query  
> to find tokens that are within 5 words of each other in any order.  
> What I've been asked to do is find only the results that are for  
> instance within 5 words of each other in the order the query was  
> written.

Yup... SpanNearQuery supports ordered and unordered proximity.   
PhraseQuery does not, though.  QueryParser will only create a  
PhraseQuery though, so you'll need to subclass QueryParser to add  
this functionality.  There is an example of this in the free code of  
Lucene in Action - http://www.lucenebook.com

	Erik


>
> For a scenario like
>
>
> text:"blah blah blah. Section 1 of Primary Act 1976, s1. Dogs Act  
> 1999, s3 blah blah blah"
>
>
> Say  I wanted to find the Dogs Act Section 1 using text:"dogs act  
> s1"~5 query would give the above record when it wasn't in context.  
> This is the reason for wanting results in order to stop these  
> incorrect results.
>
>
> Any help would be greatly appreciated.
>
> R
> Adam
>
>
>
> _________________________________________________________________
> Be one of the first to try Windows Live Mail.
> http://ideas.live.com/programpage.aspx?versionId=5d21c51a- 
> b161-4314-9b0e-4911fb2b2e6d
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 10:42:26 2006
Return-Path: <java-user-return-24601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96521 invoked from network); 21 Nov 2006 10:42:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 10:42:26 -0000
Received: (qmail 46379 invoked by uid 500); 21 Nov 2006 10:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46355 invoked by uid 500); 21 Nov 2006 10:42:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46344 invoked by uid 99); 21 Nov 2006 10:42:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 02:42:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of adam.saltiel@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO nz-out-0102.google.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 02:42:16 -0800
Received: by nz-out-0102.google.com with SMTP id s1so1009171nze
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 02:41:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bZLiXCvSolhKYfa2swC/VXNmDETKbvlsXpU1Fwdzp83AGQN0nS0ZQhFJJ/TZk7aWL9o/oCmbbrnIWsgOYS58ShjbEwfQDf3mar0FDNtHziiRzu8yAzC3Qf3aOKq+sKnSwYKpqMiPzAKJ7yID0TT0HLqSklAU8KZOBzAgWRsyUzU=
Received: by 10.64.181.12 with SMTP id d12mr10015835qbf.1164105715336;
        Tue, 21 Nov 2006 02:41:55 -0800 (PST)
Received: by 10.64.183.2 with HTTP; Tue, 21 Nov 2006 02:41:55 -0800 (PST)
Message-ID: <e8aa138c0611210241j5c982b10p9ed5cbfb76e1b288@mail.gmail.com>
Date: Tue, 21 Nov 2006 10:41:55 +0000
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fwd: Hibernate Lucene trademark issues
In-Reply-To: <7433312.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70902_9223659.1164105715097"
References: <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com>
	 <455F1706.50905@hibernate.org> <455F38BC.1040104@hibernate.org>
	 <7433312.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70902_9223659.1164105715097
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for link and your write up.

On 19/11/06, Shay Banon <kimchy@gmail.com> wrote:
>
>
> Since I do not want to invade Lucene user list regarding a discussion
> about
> Compass and Hiberante Search, but I still think that it is something that
> needs to get answered, here is a link to my blog post discussing this:
> http://jroller.com/page/kimchy?entry=hibernate_search_lucene .
>
> Cheers,
> Shay
>
>
> Emmanuel Bernard wrote:
> >
> > I forgot a couple of things.
> > I do not think that all your object properties belongs to the Index, and
> > some of them will be put in the index with information degradation (ie
> > store year/month rather than the whole date). So I do not believe there
> > is a bidirectional relationship between your domain model and your index
> > documents (for size, efficiency and accuracy purpose).
> > For that matter, Compass cannot really truly index your database backed
> > domain model and give back the object to you. Hibernate Search can
> > because it delegate the object hydration to Hibernate Core.
> >
> > Of course that's my opinions, and some people can disagree ;-)
> >
> > Emmanuel Bernard wrote:
> >>
> >> Hi,
> >> I am not really familiar with Compass I haven't really looked at the
> >> code, Hibernate Lucene (now renamed Hibernate Search) started from a
> >> user demand. I had some in depth discussions though, with some users
> >> that evaluated both Compass and Hibernate Search that helped me drive
> >> its design.
> >>
> >> Here are the arguments in favor of Hibernate Search:
> >> 1. not Yet Another API to deal with your domain model
> >> If you already use an ORM (JPA or Hibernate), you are familiar with
> >> those APIs. Using compass implies that you have to use a different set
> >> of API to play with the object lifecycle (CRUD).
> >> Hibernate Search is integrated with the org.hibernate.Query interface,
> >> and all the CUD operations on the index are triggered from the
> Hibernate
> >> CUD operations.
> >>
> >> 2. Metadata
> >> Metadata are minimal and fit particularly well through annotations, so
> >> you don't have yet another XML representation of ther same domain model
>
> >> (Compass might now have annotations support, you'll have to check)
> >>
> >> 3. it's all about managed objects (ie managed by the Session or the
> >> EntityManager)
> >> Hibernate Search gives you back objects managed by the Session, so any
> >> change made to them will (by default) be synchronized with the
> database,
> >> this is the normal behavior of an ORM, but is not what you have from a
> >> Compass search.
> >> This approach fits well with the JBoss Seam approach of having all the
> >> application around the domain model and EJB 3.0
> >>
> >> 4. Not too much abstraction
> >>  From what I've heard, Compass borrow a lot of its design / classnames
> >> from Hibernate/Spring/Lucene. Compass tries to abstract those 3
> >> techlnologies (at least Hibernate and Lucene), by providing its own
> >> infrastructure.
> >> What am trying to do with Hibernate Search is to keep the abstraction
> as
> >> light as possible. For advanced Lucene query you'll have to use pure
> >> Lucene APIs, which is possible / natural with Hibernate Search
> >>
> >>
> >> I invite you to check these links (which I expect to release soon)
> >>
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> >> and for the future (but flexible)
> >> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00393.html
>
> >>
> >> HTH
> >>
> >> Emmanuel
> >>
> >> Lukas Vlcek wrote:
> >> >
> >> > Emanuael,
> >> > I would be glad to hear your answer here (on user list).
> >> > Regards,
> >> > Lukas
> >> >
> >> > ---------- Forwarded message ----------
> >> > From: Emmanuel Bernard <emmanuel@hibernate.org >
> >> > Date: Nov 13, 2006 11:07 PM
> >> > Subject: Re: Hibernate Lucene trademark issues
> >> > To: java-dev@lucene.apache.org, lukas.vlcek@gmail.com
> >> >
> >> > Hi Lukas,
> >> > I'd be happy to answer your question, but I don't think Lucene dev is
> >> > the appropriate area for that kind of discussion.
> >> > let's move this discussion here
> >> > http://forum.hibernate.org/viewforum.php?f=9 (or in the Lucene User
> >> list
> >> > if you want to).
> >> >
> >> > Emmanuel
> >> >
> >> > Lukas Vlcek wrote:
> >> > >
> >> > > Hi Emmanuel,
> >> > >
> >> > > I am interested in you solution. I have a plan to use lucene and
> >> > hibernate
> >> > > in my next project and search will play very important role
> >> > > (*stake-holder*
> >> > > functionality). I have heard of
> >> > > comapss< http://www.opensymphony.com/compass/>project which
> introduces
> >> > > searching (lucene) layer on top of hibernate also.
> >> > > I haven't had a change to study it in detail yet.
> >> > >
> >> > > Do you think you could give me some high level comments about your
> >> > > motivation for implementing lucene search directly in hibernate
> code,
> >> > > couldn't you just use compass project? Is there any fundamental
> >> > difference
> >> > > between your approach and comapss?
> >> > >
> >> > > Many thanks,
> >> > > Lukas
> >> > >
> >> > > On 11/6/06, Emmanuel Bernard < emmanuel@hibernate.org> wrote:
> >> > > >
> >> > > > Hi guys,
> >> > > > I'm Emmanuel Bernard from JBoss.
> >> > > > I'm the current lead developer of the Hibernate Lucene
> integration
> >> > > module.
> >> > > > The goal of this project is to facilitate the integration of a
> >> search
> >> > > > capability to Hibernate based applications. And guess what, I use
>
> >> > Lucene
> >> > > > ;-)
> >> > > >
> >> > > >
> >> > >
> >> >
> >>
> http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
> >> > > >
> >> > >
> >> >
> >>
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> >> > > >
> >> > > > I realized this week end that the 'Hibernate Lucene' name might
> >> > infringe
> >> > > > the Apache Lucene trademark policy.
> >> > > > http://www.cafepress.com/lucene/ seems to state that Lucene is a
> >> > > > trademark of the Apache Software Foundation (nice golf shirt BTW)
>
> >> > > > But I wasn't able to find any document explaining the fair use
> >> of the
> >> > > > Lucene brand (the license as well as the notice seem to be silent
> >> on
> >> > > > this subject).
> >> > > >
> >> > > > Even if Lucene in not trademarked, what do you consider a fair
> >> use of
> >> > > > your brand? I'm happy to rename my project, I guess the initial
> >> choice
> >> > > > was more a tribute to your project than anything else.
> >> > > >
> >> > > > Emmanuel
> >> > > >
> >> > > > PS: please forward this email to the appropriate persons if this
> >> > is not
> >> > > > the case already (PMC or whatever)
> >> > > >
> >> > > >
> >> > > >
> >> ---------------------------------------------------------------------
> >> > > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> >> > > > For additional commands, e-mail: java-dev-help@lucene.apache.org
> >> > > >
> >> > > >
> >> > >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Fwd%3A-Hibernate-Lucene-trademark-issues-tf2651281.html#a7433312
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_70902_9223659.1164105715097--

From java-user-return-24602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 11:28:09 2006
Return-Path: <java-user-return-24602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8777 invoked from network); 21 Nov 2006 11:28:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 11:28:09 -0000
Received: (qmail 36992 invoked by uid 500); 21 Nov 2006 11:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36825 invoked by uid 500); 21 Nov 2006 11:28:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36814 invoked by uid 99); 21 Nov 2006 11:28:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 03:28:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 03:27:57 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GmTmq-0001GI-GJ
	for java-user@lucene.apache.org; Tue, 21 Nov 2006 03:27:36 -0800
Message-ID: <7469644.post@talk.nabble.com>
Date: Tue, 21 Nov 2006 03:27:36 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to search string with words
In-Reply-To: <359a92830611200759r133971b9q6907020b1088de47@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7440978.post@talk.nabble.com> <359a92830611200759r133971b9q6907020b1088de47@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick,

   I did take a look at the link that u provided me, and I have try myself
but I have no return reesult.

   My search string is "third party license readme"

   Below r the codes that I wrote, please point me out where I have done
wrong.

      readerA = IndexReader.open(DsConstant.indexDir);
			readerB = IndexReader.open(DsConstant.idxCompDir);
			
			//building the searchables
	        Searcher[] searchers = new Searcher[2];
	        
	        // VITAL STEP:adding the searcher for the empty index first, before
the searcher for the populated index
	        searchers[0] = new IndexSearcher(readerA);
	        searchers[1] = new IndexSearcher(readerB);
	        
			Analyzer analyzer = new StandardAnalyzer();
			QueryParser parser = new QueryParser(DsConstant.idxFileContent,
analyzer);

      SpanTermQuery stq = new SpanTermQuery(new Term(field,
buff.toString())); //field = search base on what I have index
				SpanFirstQuery sfq = new SpanFirstQuery(stq, searchString1.length);
//searchString1 = "third party license readme"
				
				sfq = (SpanFirstQuery) sfq.rewrite(readerA);
				sfq = (SpanFirstQuery) sfq.rewrite(readerB);
				
				//creating the multiSearcher
		        Searcher mSearcher = getMultiSearcherInstance(searchers);
				
				searchHits = mSearcher.search(sfq);

   The sysout as below:

      span first query is ::: spanFirst(TestC:TestC:Third Party License
Readme, 32)
-- 
View this message in context: http://www.nabble.com/how-to-search-string-with-words-tf2668490.html#a7469644
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 12:00:59 2006
Return-Path: <java-user-return-24603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19969 invoked from network); 21 Nov 2006 12:00:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 12:00:58 -0000
Received: (qmail 88369 invoked by uid 500); 21 Nov 2006 12:01:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88333 invoked by uid 500); 21 Nov 2006 12:01:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88320 invoked by uid 99); 21 Nov 2006 12:01:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 04:01:00 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [147.96.1.105] (HELO parker.sim.ucm.es) (147.96.1.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 04:00:48 -0800
Received: from parker.sim.ucm.es (parker.sim.ucm.es [127.0.0.1])
	by localhost.ucm.es (Postfix) with ESMTP id 77C9D2F4209
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 13:00:24 +0100 (CET)
Received: from ULISES.sim.ucm.es (unknown [10.150.1.31])
	by parker.sim.ucm.es (Postfix) with ESMTP id 005322F41AE
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 13:00:23 +0100 (CET)
Received: from ucm.es ([10.147.128.157])
 by ULISES.sim.ucm.es (Sun Java System Messaging Server 6.2-6.01 (built Apr  3
 2006)) with ESMTP id <0J9200LS8XCNK5E0@ULISES.sim.ucm.es> for
 java-user@lucene.apache.org; Tue, 21 Nov 2006 13:00:23 +0100 (CET)
Received: from [10.150.1.31] (Forwarded-For: [10.150.1.31])
 by menelao.adm.ucm.es (mshttpd); Tue, 21 Nov 2006 13:00:23 +0100
Date: Tue, 21 Nov 2006 13:00:23 +0100
From: =?iso-8859-1?B?Ikpvc+kgUmFt824gUOlyZXogQWf8ZXJhIg==?= <jose.aguera@fdi.ucm.es>
Subject: Re: Combining scores
In-reply-to: <4562C0C1.1000606@isoco.com>
To: java-user@lucene.apache.org
Message-id: <fcc4cadeb59.4562f867@ucm.es>
MIME-version: 1.0
X-Mailer: Sun Java(tm) System Messenger Express 6.2-6.01 (built Apr  3 2006)
Content-type: multipart/alternative; boundary=--c9f99a90202b110e68b
Content-language: es
X-Accept-Language: es
Priority: normal
References: <4562C0C1.1000606@isoco.com>
X-Virus-Checked: Checked by ClamAV on apache.org

----c9f99a90202b110e68b
Content-Type: text/plain; charset=iso-8859-1
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

i=27ve some code to do that=2C but it is not really friendly yet =3A-(

Anyway is quite simple=2E You need merge the postings that you obtain fo=
r the differents queries using TermDocs=2E With TermDocs you obtain the =
internal ids for the docs related to terms=2E If you merge the TermDocs =
for each word that appear in the queries that you want to merge=2C you o=
btain the postings for a set of queries and=2C therefore you can compute=
 the score for this set=2E

i hope to help

jose

Jos=E9 Ram=F3n P=E9rez Ag=FCera

Visiting Research Scholar at Yahoo! Research Spain=2E
Ocata 1=2C 1st floor 08003 Barcelona Catalunya=2C Spain

Dept=2E de Ingenier=EDa del Software e Inteligencia Artificial
Despacho 411 tlf=2E 913947599
Facultad de Inform=E1tica
Universidad Complutense de Madrid

----- Mensaje original -----
De=3A Luis Rodrigo Aguado =3Clrodrigo=40isoco=2Ecom=3E
Fecha=3A Martes=2C Noviembre 21=2C 2006 12=3A39 pm
Asunto=3A Combining scores
A=3A java-user=40lucene=2Eapache=2Eorg

=3E Hi all=2C
=3E =

=3E I am working in a project that=2C for each query from the user=2C =

=3E builds =

=3E four or five different queries and tries to combine the results=2E =

=3E The =

=3E first part is already working=2C but=2C as I have read that the =

=3E scores from =

=3E different queries are not comparable at all among them=2C I am a =

=3E bit stuck =

=3E in the second part=2E Which could be a good strategy to get a =

=3E unified =

=3E score merging the results from different queries over the same =

=3E index=2E Is =

=3E there anything already done on that=3F
=3E =

=3E I have searched through the list=2C but all I have found is =

=3E threads like this=3A
=3E =

=3E http=3A//article=2Egmane=2Eorg/gmane=2Ecomp=2Ejakarta=2Elucene=2Euse=
r/10810
=3E =

=3E that only warn about the incompatibility of scores=2C but not any =

=3E clue =

=3E about how to solve it=2E
=3E =

=3E Thanks!
=3E =

=3E Luis=2E
=3E =

=3E -- =

=3E =

=3E *Luis Rodrigo Aguado*
=3E =

=3E Innovation and R=26D
=3E =

=3E Research Manager
=3E =

=3E lrodrigo(at)isoco=2Ecom
=3E =

=3E =23T=A0 +34913349777
=3E =

=3E C/Pedro de Valdivia=2C 10
=3E =

=3E 28006=2C Madrid=2C Spain
=3E =

=3E * *
=3E =

=3E *iSOCO** *
=3E =

=3E =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 intelligent software for the netwo=
rked economy
=3E =

=3E =A0=A0=A0=A0=A0=A0=A0=A0=A0=A0=A0 www=2Eisoco=2Ecom =3Chttp=3A//www=2E=
isoco=2Ecom/=3E
=3E =

=3E =A0
=3E =

=3E Este mensaje se dirige exclusivamente a su destinatario y puede =

=3E contener =

=3E informaci=F3n privilegiada o confidencial=2E Si no es vd=2E el =

=3E destinatario =

=3E indicado=2C queda notificado de que la utilizaci=F3n=2C divulgaci=F3=
n =

=3E y/o copia =

=3E sin autorizaci=F3n est=E1 prohibida en virtud de la legislaci=F3n =

=3E vigente=2E Si =

=3E ha recibido este mensaje por error=2C le rogamos que nos lo =

=3E comunique =

=3E inmediatamente por esta misma v=EDa y proceda a su destrucci=F3n=2E
=3E =

=3E =A0
=3E =

=3E This message is intended exclusively for its addressee and may =

=3E contain =

=3E information that is CONFIDENTIAL and protected by professional =

=3E privilege=2E If you are not the intended recipient you are hereby =

=3E notified =

=3E that any dissemination=2C copy or disclosure of this communication =

=3E is =

=3E strictly prohibited by law=2E If this message has been received in =

=3E error=2C =

=3E please immediately notify us via e-mail and delete it=2E
=3E =

=3E =


Jos=E9 Ram=F3n P=E9rez Ag=FCera

Visiting Research Scholar at Yahoo! Research Spain=2E
Ocata 1=2C 1st floor 08003 Barcelona Catalunya=2C Spain

Dept=2E de Ingenier=EDa del Software e Inteligencia Artificial
Despacho 411 tlf=2E 913947599
Facultad de Inform=E1tica
Universidad Complutense de Madrid

----c9f99a90202b110e68b--

From java-user-return-24604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 12:55:47 2006
Return-Path: <java-user-return-24604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37150 invoked from network); 21 Nov 2006 12:55:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 12:55:46 -0000
Received: (qmail 5924 invoked by uid 500); 21 Nov 2006 12:55:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5895 invoked by uid 500); 21 Nov 2006 12:55:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5884 invoked by uid 99); 21 Nov 2006 12:55:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 04:55:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 04:55:34 -0800
Received: by nf-out-0910.google.com with SMTP id n28so162672nfc
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 04:55:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=kWWmlDM2OMKFviGrzHIg/HR+Nqp1dykFgDKTuXv05gRhdo6oPrl8oiWLrkdHT/resN3JTPhaWJGWSwfzvC6R3M8P8TosdW90/BCp7LT9l52F1dRgyzBZaHXzpESoZx4VUZvFlr2r2MmOIJq3kiTFXSFynVgDXA5qYEeKSYEsgrE=
Received: by 10.49.41.12 with SMTP id t12mr678626nfj.1164113712147;
        Tue, 21 Nov 2006 04:55:12 -0800 (PST)
Received: from ?172.16.1.115? ( [212.162.171.110])
        by mx.google.com with ESMTP id k9sm25810631nfc.2006.11.21.04.55.06;
        Tue, 21 Nov 2006 04:55:10 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4562C0C1.1000606@isoco.com>
References: <4562C0C1.1000606@isoco.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D8600D9E-1D39-41DF-8499-D869C7137B5F@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Combining scores
Date: Tue, 21 Nov 2006 13:55:07 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


21 nov 2006 kl. 10.02 skrev Luis Rodrigo Aguado:

> Hi all,
>
> I am working in a project that, for each query from the user,  
> builds four or five different queries and tries to combine the  
> results. The first part is already working, but, as I have read  
> that the scores from different queries are not comparable at all  
> among them, I am a bit stuck in the second part. Which could be a  
> good strategy to get a unified score merging the results from  
> different queries over the same index. Is there anything already  
> done on that?

Perhaps this can help you:

I've written something I call a QueryFork, used for simplified  
queries when the user does not specify any operators (field:, +, -,  
et c). In essence it builds a number of queries from the same text  
and place them in the order of their priority. The collector discards  
any documents already matched. For each query results to be collected  
I normlize the score based on the bottom score of the previous results.

So something like this:

1. Fork results from phrase query
2. Fork results from non sequencial near query
3. Fork results from boolean MUST term queries

Each query can be placed in multiple fields with multiple boosts. See  
it as an alternative to MultiFieldQueryParser.

I could put the code in the Jira if you want. This is the core:

class ForkCollector extends HitCollector {

     private ConcurrentLinkedQueue<ForkHit> collected = new  
ConcurrentLinkedQueue<ForkHit>();
     private float iterationLowScore = 1;
     private float norm = 1;

     private Set<Integer> collectedDocumentNumbers = new  
HashSet<Integer>(100);

     public synchronized void collect(int doc, float score) {
         if (!collectedDocumentNumbers.contains(doc)) {
             collectedDocumentNumbers.add(doc);
             ForkHit hit = new ForkHit(doc, score * norm);
             collected.add(hit);
             if (hit.getScore() < iterationLowScore) {
                 iterationLowScore = hit.getScore();
             }
         }
     }

     void prepareNextCollectionIteration() {
         norm = iterationLowScore;
     }


     ConcurrentLinkedQueue<ForkHit> getCollected() {
         return collected;
     }
}


public class ForkSearcher {

     private List<Fork> forks = new ArrayList<Fork>();

     /**
      * @param searcher
      * @param analyzer
      * @param forkQuery
      * @return null if no Fork was applicable (thus no search was  
placed)
      * @throws IOException
      */
     public ForkHit[] search(Searcher searcher, Analyzer analyzer,  
ForkQuery forkQuery) throws IOException {

         boolean forkUsed = false;

         ForkCollector collector = new ForkCollector();
         for (Fork fork : getForks()) {
             Query query = fork.queryFactory(forkQuery, analyzer);
             if (query != null) {
                 if (forkQuery.getStaticQuery() != null) {
                     BooleanQuery q = new BooleanQuery();
                     q.add(new BooleanClause(forkQuery.getStaticQuery 
(), BooleanClause.Occur.MUST));
                     q.add(new BooleanClause(query,  
BooleanClause.Occur.MUST));

                     searcher.search(q, collector);
                     collector.prepareNextCollectionIteration();

                     forkUsed = true;
                 } else {
                     searcher.search(query, collector);
                     collector.prepareNextCollectionIteration();
                     forkUsed = true;
                 }
             }
         }

         if (!forkUsed) {
             return null;
         }

         ForkHit[] forkHits = collector.getCollected().toArray(new  
ForkHit[collector.getCollected().size()]);
         Arrays.sort(forkHits, new Comparator<ForkHit>() {
             public int compare(ForkHit forkHit, ForkHit forkHit1) {
                 return Float.compare(forkHit.getScore(),  
forkHit1.getScore());
             }
         });
         return forkHits;
     }


public interface Fork {

     /**
      * @param forkQuery
      * @param analyzer
      * @return null if fork is not applicable
      */
     Query queryFactory(ForkQuery forkQuery, Analyzer analyzer)  
throws IOException;
}



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 13:28:44 2006
Return-Path: <java-user-return-24605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45545 invoked from network); 21 Nov 2006 13:28:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 13:28:42 -0000
Received: (qmail 68437 invoked by uid 500); 21 Nov 2006 13:28:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68401 invoked by uid 500); 21 Nov 2006 13:28:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68390 invoked by uid 99); 21 Nov 2006 13:28:45 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 05:28:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 05:28:31 -0800
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id kALDS8RA031810
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 14:28:08 +0100
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 005208BCD8
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 14:28:09 +0100 (CET)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 09262-07 for <java-user@lucene.apache.org>;
 Tue, 21 Nov 2006 14:28:07 +0100 (CET)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id DBDAC8BD5D
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 14:28:07 +0100 (CET)
Message-ID: <4562FEE7.8080705@uni-hd.de>
Date: Tue, 21 Nov 2006 14:28:07 +0100
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.8 (X11/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: how to search string with words
References: <7440978.post@talk.nabble.com> <359a92830611200759r133971b9q6907020b1088de47@mail.gmail.com> <7469644.post@talk.nabble.com>
In-Reply-To: <7469644.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org

spinergywmy schrieb:
> Hi Erick,
> 
>    I did take a look at the link that u provided me, and I have try myself
> but I have no return reesult.
> 
>    My search string is "third party license readme"
> 
hhm with a quick look I would suggest that you have to split the string
into individual terms, and then make a spannearquery  for these Terms:

    	String[] que_ary = system_query.split("\\s");
    	//=> Array with third,party,licens,readme
    	SpanQuery[] spanq_ar = new SpanQuery[que_ary.length];
    	
    	for (int i=0; i < que_ary.length; i++) {
    		spanq_ar[i] = new SpanTermQuery( new Term("TI", que_ary[i]) );
    	}
	// now we have an array of spantermquerys

	// each term of the sentence should be in exact order => spannearquery
	//  I am not sure if you'll better do a slop of "0"
    	SpanFirstQuery sfq = new SpanFirstQuery(
    							new SpanNearQuery(spanq_ar,1,true), spanq_ar.length);


hth,
martin

>    Below r the codes that I wrote, please point me out where I have done
> wrong.
> 
>       readerA = IndexReader.open(DsConstant.indexDir);
> 			readerB = IndexReader.open(DsConstant.idxCompDir);
> 			
> 			//building the searchables
> 	        Searcher[] searchers = new Searcher[2];
> 	        
> 	        // VITAL STEP:adding the searcher for the empty index first, before
> the searcher for the populated index
> 	        searchers[0] = new IndexSearcher(readerA);
> 	        searchers[1] = new IndexSearcher(readerB);
> 	        
> 			Analyzer analyzer = new StandardAnalyzer();
> 			QueryParser parser = new QueryParser(DsConstant.idxFileContent,
> analyzer);
> 
>       SpanTermQuery stq = new SpanTermQuery(new Term(field,
> buff.toString())); //field = search base on what I have index
> 				SpanFirstQuery sfq = new SpanFirstQuery(stq, searchString1.length);
> //searchString1 = "third party license readme"
> 				
> 				sfq = (SpanFirstQuery) sfq.rewrite(readerA);
> 				sfq = (SpanFirstQuery) sfq.rewrite(readerB);
> 				
> 				//creating the multiSearcher
> 		        Searcher mSearcher = getMultiSearcherInstance(searchers);
> 				
> 				searchHits = mSearcher.search(sfq);
> 
>    The sysout as below:
> 
>       span first query is ::: spanFirst(TestC:TestC:Third Party License
> Readme, 32)



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 13:31:52 2006
Return-Path: <java-user-return-24606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45986 invoked from network); 21 Nov 2006 13:31:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 13:31:51 -0000
Received: (qmail 74233 invoked by uid 500); 21 Nov 2006 13:31:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74205 invoked by uid 500); 21 Nov 2006 13:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74194 invoked by uid 99); 21 Nov 2006 13:31:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 05:31:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 05:31:43 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1448908ugc
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 05:31:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gB+TUn+XcKOkHu6MKPxh0KSKo6ud1sV7gxjjIwroA3KELssfIyDr6XZX8HGTrXecOGJBKNsONq6NlGlPuK/zml/jKYGOFndMDKEk0Qj4MjrJ9lS6DMoGVavcbWWmNlxqWS1fWBeGNAP6AxR7Zytq8gzfkBJkirS6B+Sw3zYY94M=
Received: by 10.82.101.3 with SMTP id y3mr909233bub.1164115881936;
        Tue, 21 Nov 2006 05:31:21 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Tue, 21 Nov 2006 05:31:21 -0800 (PST)
Message-ID: <359a92830611210531kc3bb5a1h4765a59ca5b9d0cb@mail.gmail.com>
Date: Tue, 21 Nov 2006 08:31:21 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, "Bhavin Pandya" <bhavinp@rediff.co.in>
Subject: Re: is there any way to find unique records ?
In-Reply-To: <002001c70d41$2585ceb0$970310ac@bhavin>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19723_22588757.1164115881681"
References: <002001c70d41$2585ceb0$970310ac@bhavin>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19723_22588757.1164115881681
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 I don't think I understand what "only unique records from a single field"
means.  If it's a unique value in a filed, there'll only be one document in
the hits object and there's no cost to iterating, so I doubt that's what you
mean.

If your asking for a list of all the unique values for a particular field,
see TermDocs and/or TermEnum which will allow you to look at, say, all the
values stored for some field. A trick here is to seek (new Term("field",
""));. By putting nothing in the value, you effectively enumerate them all,
something that I didn't find obvious.

If neither of these are close to the mark, perhaps you could provide more
detail.

Best
Erick

On 11/21/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>
> Hi,
> In lucene, is there any way to find only unique records from a single
> field ..?
>
> otherwise unnecessary i have to itereate through Hits and find out
> unique...
>
> plz help..
>
> - Bhavin pandya
>

------=_Part_19723_22588757.1164115881681--

From java-user-return-24607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 13:37:10 2006
Return-Path: <java-user-return-24607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46962 invoked from network); 21 Nov 2006 13:37:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 13:37:10 -0000
Received: (qmail 85647 invoked by uid 500); 21 Nov 2006 13:37:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85617 invoked by uid 500); 21 Nov 2006 13:37:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85606 invoked by uid 99); 21 Nov 2006 13:37:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 05:37:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 05:37:00 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1450512ugc
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 05:36:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UdrVKyYO9WbUlQL4a7mFc5wpb4hVnnSpbsc7fonDF/L/n+AIqiOq1y2bN0fhytgP3jnf5aWry9THB8qj9BaE1L0ZMch9k25OHRijJEhVwMmBRDfAzrjX7Ro+rO5nPuWZZRbs2NkG6iG+tdOTcI5CCrCB6laASU/8mh9rYX+GIzU=
Received: by 10.82.126.5 with SMTP id y5mr912825buc.1164116198538;
        Tue, 21 Nov 2006 05:36:38 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Tue, 21 Nov 2006 05:36:37 -0800 (PST)
Message-ID: <359a92830611210536s7c2df70cy9824152fde257270@mail.gmail.com>
Date: Tue, 21 Nov 2006 08:36:38 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Combining scores
In-Reply-To: <4562C0C1.1000606@isoco.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19775_20837378.1164116198055"
References: <4562C0C1.1000606@isoco.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19775_20837378.1164116198055
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

This is a *really* simplistic approach, but why not just submit all 4 or 5
queries at once ina BooleanQuery and let Lucene do all the work for you? Or
are the 4 or 5 queries such that they don't combine easily with MUST,
MUST_NOT or SHOULD in a BooleanQuery?

Best
Erick

On 11/21/06, Luis Rodrigo Aguado <lrodrigo@isoco.com> wrote:
>
> Hi all,
>
> I am working in a project that, for each query from the user, builds
> four or five different queries and tries to combine the results. The
> first part is already working, but, as I have read that the scores from
> different queries are not comparable at all among them, I am a bit stuck
> in the second part. Which could be a good strategy to get a unified
> score merging the results from different queries over the same index. Is
> there anything already done on that?
>
> I have searched through the list, but all I have found is threads like
> this:
>
> http://article.gmane.org/gmane.comp.jakarta.lucene.user/10810
>
> that only warn about the incompatibility of scores, but not any clue
> about how to solve it.
>
> Thanks!
>
> Luis.
>
> --
>
> *Luis Rodrigo Aguado*
>
> Innovation and R&D
>
> Research Manager
>
> lrodrigo(at)isoco.com
>
> #T  +34913349777
>
> C/Pedro de Valdivia, 10
>
> 28006, Madrid, Spain
>
> * *
>
> *iSOCO** *
>
>             intelligent software for the networked economy
>
>             www.isoco.com <http://www.isoco.com/>
>
>
>
> Este mensaje se dirige exclusivamente a su destinatario y puede contener
> informaci=F3n privilegiada o confidencial. Si no es vd. el destinatario
> indicado, queda notificado de que la utilizaci=F3n, divulgaci=F3n y/o cop=
ia
> sin autorizaci=F3n est=E1 prohibida en virtud de la legislaci=F3n vigente=
. Si
> ha recibido este mensaje por error, le rogamos que nos lo comunique
> inmediatamente por esta misma v=EDa y proceda a su destrucci=F3n.
>
>
>
> This message is intended exclusively for its addressee and may contain
> information that is CONFIDENTIAL and protected by professional
> privilege. If you are not the intended recipient you are hereby notified
> that any dissemination, copy or disclosure of this communication is
> strictly prohibited by law. If this message has been received in error,
> please immediately notify us via e-mail and delete it.
>
>
>

------=_Part_19775_20837378.1164116198055--

From java-user-return-24608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 13:44:49 2006
Return-Path: <java-user-return-24608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48731 invoked from network); 21 Nov 2006 13:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 13:44:48 -0000
Received: (qmail 3025 invoked by uid 500); 21 Nov 2006 13:44:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2999 invoked by uid 500); 21 Nov 2006 13:44:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2988 invoked by uid 99); 21 Nov 2006 13:44:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 05:44:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 05:44:37 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GmVv6-0003Rz-LP
	for java-user@lucene.apache.org; Tue, 21 Nov 2006 05:44:16 -0800
Message-ID: <7471415.post@talk.nabble.com>
Date: Tue, 21 Nov 2006 05:44:16 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to search string with words
In-Reply-To: <4562FEE7.8080705@uni-hd.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7440978.post@talk.nabble.com> <359a92830611200759r133971b9q6907020b1088de47@mail.gmail.com> <7469644.post@talk.nabble.com> <4562FEE7.8080705@uni-hd.de>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

   Thanks Martin. I have one question, what does that slop does within span
near query? What is the difference between 0 and 1? I have seen the source
from Lucene, one of the example putting slop as 4. Could u pls explain that
to me. Thanks.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/how-to-search-string-with-words-tf2668490.html#a7471415
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 14:36:34 2006
Return-Path: <java-user-return-24609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71431 invoked from network); 21 Nov 2006 14:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 14:36:32 -0000
Received: (qmail 20968 invoked by uid 500); 21 Nov 2006 14:36:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20934 invoked by uid 500); 21 Nov 2006 14:36:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20923 invoked by uid 99); 21 Nov 2006 14:36:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 06:36:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 06:36:21 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15B14A72@mailer.syr.edu>; Tue, 21 Nov 2006 9:36:00 -0500
Message-ID: <45630ECF.8060805@syr.edu>
Date: Tue, 21 Nov 2006 09:35:59 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: is there any way to find unique records ?
References: <002001c70d41$2585ceb0$970310ac@bhavin>
In-Reply-To: <002001c70d41$2585ceb0$970310ac@bhavin>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Bhavin,

Bhavin Pandya wrote:
> In lucene, is there any way to find only unique records from a single
> field ..?
>
> otherwise unnecessary i have to itereate through Hits and find out
> unique...

Can you clarify what you mean by "unique"?

Do you want to return only documents that have a field value that is not
contained in other documents, that is, to exclude documents which share
the same particular field value with at least one other document?

Or, do you want to return just one document from each set of documents
that share the same field value (given your database-ish "record"
terminology, where standard Lucene usage is "document", I'm guessing
that "SELECT UNIQUE" is what you want)?  And if so, do you care which
one from the set is returned?  That is, do you have any other selection
criteria?

Steve



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 14:45:38 2006
Return-Path: <java-user-return-24610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73634 invoked from network); 21 Nov 2006 14:45:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 14:45:37 -0000
Received: (qmail 43489 invoked by uid 500); 21 Nov 2006 14:45:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43462 invoked by uid 500); 21 Nov 2006 14:45:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43451 invoked by uid 99); 21 Nov 2006 14:45:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 06:45:39 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 21 Nov 2006 06:45:27 -0800
Received: (qmail 19952 invoked from network); 21 Nov 2006 14:41:33 -0000
Received: from unknown (HELO bhavin) (172.16.3.151)
  by mailserver with SMTP; 21 Nov 2006 14:41:33 -0000
Message-ID: <007c01c70d7d$c656f850$970310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <002001c70d41$2585ceb0$970310ac@bhavin> <359a92830611210531kc3bb5a1h4765a59ca5b9d0cb@mail.gmail.com>
Subject: Re: is there any way to find unique records ?
Date: Tue, 21 Nov 2006 20:30:22 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

> If your asking for a list of all the unique values for a particular field,
> see TermDocs and/or TermEnum which will allow you to look at, say, all the
> values stored for some field. A trick here is to seek (new Term("field",
> ""));. By putting nothing in the value, you effectively enumerate them 
> all,
> something that I didn't find obvious

I think your above solution is very near to what i am looking for ,
But little bit different way...
here is what i am planning to do...

Suppose my index has four fields "product-title" , "product-desc" , 
"category" and "FLAG"    ( Fieldname FLAG has value "true" for each n every 
doc in index ...just added for iteration purpose )

At search time.. .
query =  +(product-title:nokia) +(product-desc:nokia)
Hits hits = searcher.search(query);
I want to fetch unique "category" from above hits object...

But i dont want to iterate through Hits object....

Now As per your suggestions,  I can do something like this...
TermEnum  enum = termDocs(new Term("FLAG","true")
But it will return enumeration of all the document which is in index...But i 
want enumeration of all the document which is relevant to "nokia"...
How to . . ?

Thanks
- Bhavin pandya


----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>; "Bhavin Pandya" <bhavinp@rediff.co.in>
Sent: Tuesday, November 21, 2006 7:01 PM
Subject: Re: is there any way to find unique records ?


> I don't think I understand what "only unique records from a single field"
> means.  If it's a unique value in a filed, there'll only be one document 
> in
> the hits object and there's no cost to iterating, so I doubt that's what 
> you
> mean.
>
> If your asking for a list of all the unique values for a particular field,
> see TermDocs and/or TermEnum which will allow you to look at, say, all the
> values stored for some field. A trick here is to seek (new Term("field",
> ""));. By putting nothing in the value, you effectively enumerate them 
> all,
> something that I didn't find obvious.
>
> If neither of these are close to the mark, perhaps you could provide more
> detail.
>
> Best
> Erick
>
> On 11/21/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>>
>> Hi,
>> In lucene, is there any way to find only unique records from a single
>> field ..?
>>
>> otherwise unnecessary i have to itereate through Hits and find out
>> unique...
>>
>> plz help..
>>
>> - Bhavin pandya
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 15:30:56 2006
Return-Path: <java-user-return-24611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88651 invoked from network); 21 Nov 2006 15:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 15:30:54 -0000
Received: (qmail 44585 invoked by uid 500); 21 Nov 2006 15:30:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44514 invoked by uid 500); 21 Nov 2006 15:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44494 invoked by uid 99); 21 Nov 2006 15:30:48 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 07:30:46 -0800
Received: by nf-out-0910.google.com with SMTP id n28so197496nfc
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 07:28:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hck7A0LI+U6JEdxPQMyaqiKwx9T21QYjhvWI7JUOAMIBde20+XBhr4LcvPPptn7WLAd34YOqal7kAFyPOW+A2lSXAQGa+Gp6QWCvKgpdHmXq16CLy0mm8jnCUqz7eziVWyzJ4h1dQJXlhg2gc7gp+LU7qypTVT3T4Dm0Q8IxWz4=
Received: by 10.82.153.5 with SMTP id a5mr938974bue.1164122931162;
        Tue, 21 Nov 2006 07:28:51 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Tue, 21 Nov 2006 07:28:50 -0800 (PST)
Message-ID: <359a92830611210728g328155f0mcca29a5c01779bda@mail.gmail.com>
Date: Tue, 21 Nov 2006 10:28:50 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, "Bhavin Pandya" <bhavinp@rediff.co.in>
Subject: Re: is there any way to find unique records ?
In-Reply-To: <007c01c70d7d$c656f850$970310ac@bhavin>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21534_13040712.1164122930773"
References: <002001c70d41$2585ceb0$970310ac@bhavin>
	 <359a92830611210531kc3bb5a1h4765a59ca5b9d0cb@mail.gmail.com>
	 <007c01c70d7d$c656f850$970310ac@bhavin>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21534_13040712.1164122930773
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ok, I think I get it now. You're right that you probably don't want to
iterate the Hits object since that has performance issues once you get
beyond 100 docs or so. Although, I don't know how big your result sets are.
If they are guaranteed to be small, this may not matter.

I'm guessing you want to implement a custom HitCollector. That has it's own
cautions about calling, say, IndexReader.document(id) for each hit, so you
probably want to use TermDocs object. seek() and skipTo() and doc() are your
friends. Although I'd try the simple way of just calling
IndexReader.document(id) first just to see if the performance was
acceptable. Be sure you're looking at a truly representative data set though
<G>...

Hope this helps
Erick

On 11/21/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>
> Hi Erick,
>
> > If your asking for a list of all the unique values for a particular
> field,
> > see TermDocs and/or TermEnum which will allow you to look at, say, all
> the
> > values stored for some field. A trick here is to seek (new Term("field",
> > ""));. By putting nothing in the value, you effectively enumerate them
> > all,
> > something that I didn't find obvious
>
> I think your above solution is very near to what i am looking for ,
> But little bit different way...
> here is what i am planning to do...
>
> Suppose my index has four fields "product-title" , "product-desc" ,
> "category" and "FLAG"    ( Fieldname FLAG has value "true" for each n
> every
> doc in index ...just added for iteration purpose )
>
> At search time.. .
> query =  +(product-title:nokia) +(product-desc:nokia)
> Hits hits = searcher.search(query);
> I want to fetch unique "category" from above hits object...
>
> But i dont want to iterate through Hits object....
>
> Now As per your suggestions,  I can do something like this...
> TermEnum  enum = termDocs(new Term("FLAG","true")
> But it will return enumeration of all the document which is in index...But
> i
> want enumeration of all the document which is relevant to "nokia"...
> How to . . ?
>
> Thanks
> - Bhavin pandya
>
>
> ----- Original Message -----
> From: "Erick Erickson" <erickerickson@gmail.com>
> To: <java-user@lucene.apache.org>; "Bhavin Pandya" <bhavinp@rediff.co.in>
> Sent: Tuesday, November 21, 2006 7:01 PM
> Subject: Re: is there any way to find unique records ?
>
>
> > I don't think I understand what "only unique records from a single
> field"
> > means.  If it's a unique value in a filed, there'll only be one document
> > in
> > the hits object and there's no cost to iterating, so I doubt that's what
> > you
> > mean.
> >
> > If your asking for a list of all the unique values for a particular
> field,
> > see TermDocs and/or TermEnum which will allow you to look at, say, all
> the
> > values stored for some field. A trick here is to seek (new Term("field",
> > ""));. By putting nothing in the value, you effectively enumerate them
> > all,
> > something that I didn't find obvious.
> >
> > If neither of these are close to the mark, perhaps you could provide
> more
> > detail.
> >
> > Best
> > Erick
> >
> > On 11/21/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
> >>
> >> Hi,
> >> In lucene, is there any way to find only unique records from a single
> >> field ..?
> >>
> >> otherwise unnecessary i have to itereate through Hits and find out
> >> unique...
> >>
> >> plz help..
> >>
> >> - Bhavin pandya
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21534_13040712.1164122930773--

From java-user-return-24612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 15:37:29 2006
Return-Path: <java-user-return-24612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91806 invoked from network); 21 Nov 2006 15:37:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 15:37:28 -0000
Received: (qmail 64848 invoked by uid 500); 21 Nov 2006 15:37:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64821 invoked by uid 500); 21 Nov 2006 15:37:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64810 invoked by uid 99); 21 Nov 2006 15:37:29 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 07:37:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [207.99.47.68] (HELO mail13.simplicato.com) (207.99.47.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 07:37:15 -0800
Received: from mail13.simplicato.com (localhost [127.0.0.1])
	by mail13.simplicato.com (Postfix) with ESMTP id CC18B77AE2E
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 10:36:54 -0500 (EST)
Received: from PEACE (unknown [216.195.213.27])
	by mail13.simplicato.com (Postfix) with ESMTP id EB71077ADBF
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 10:36:53 -0500 (EST)
From: "Jong Kim" <jkim@sitescape.com>
To: <java-user@lucene.apache.org>
Subject: Use case for term vector's token position/offset?
Date: Tue, 21 Nov 2006 10:36:55 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AccNgt+tAWHwm/rLQyuQ187vGDO95Q==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Message-Id: <20061121153653.EB71077ADBF@mail13.simplicato.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
 
When I look at org.apache.lucene.document.Field.TermVector,
it defines the following 5 options as to the detailed info 
that can be stored wrt term vectors. 

1. NO
2. WITH_OFFSETS
3. WITH_POSITIONS
4. WITH_POSITIONS_OFFSETS
5. YES

It isn't difficult to understand where the basic term vector
information (ie, terms and their number of occurences - option 5)
might be useful. I believe it can be used to implement features
like "concept search" or "more like this" functionalities. 

However, it isn't clear to me how the other extra info (ie,
token position information and/or token offset information)
might be used? Can anyone help me understand what kind of 
(advanced) search techniques people use these extra 
information for, or even better, any pointer to real world 
examples?

Thanks
/Jong


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 15:42:53 2006
Return-Path: <java-user-return-24613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94382 invoked from network); 21 Nov 2006 15:42:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 15:42:52 -0000
Received: (qmail 76669 invoked by uid 500); 21 Nov 2006 15:42:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76643 invoked by uid 500); 21 Nov 2006 15:42:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76632 invoked by uid 99); 21 Nov 2006 15:42:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 07:42:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [38.99.0.71] (HELO mail.guba.com) (38.99.0.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 07:42:41 -0800
Received: (qmail 16567 invoked from network); 21 Nov 2006 16:42:19 -0000
Received: from adsl-67-126-47-209.dsl.pltn13.pacbell.net (HELO ?192.168.213.232?) (smtp@67.126.47.209)
  by mail.guba.com with ESMTPA; 21 Nov 2006 16:42:19 -0000
From: Dennis Watson <dennis@guba.com>
Organization: Guba.com
To: java-user@lucene.apache.org
Subject: Re: Sorting on distance from a long/lat
Date: Tue, 21 Nov 2006 07:42:29 -0800
User-Agent: KMail/1.8.2
Cc: "spamsucks" <spamsucks@rhoderunner.com>
References: <12378468.941164049539891.JavaMail.root@dell.rhoderunner.com>
In-Reply-To: <12378468.941164049539891.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611210742.29696.dennis@guba.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I apologize if this is slightly off topic.  I have not implemented this, but 
the idea came to me after reading another post about measuring distance in 
lucene.  It may be completely impractical, however it seems it COULD work at 
least if the area to be indexed could be constrained.

What if you divided the earth up into lets say 100 square blocks.  Each block 
would have sides of length x1 with an area x1^2.  You could number those 
blocks 0 - 99.  Then you could divide each of those blocks into 100 blocks 
with sides of length x2 = x1 / 10 and number these 0 - 99 as well.  You could 
do this until you had blocks with sides of length xn and area xn^2.

Each one of these blocks would have four corners with a lat and lon.  It would 
be fairly easy to tell if one block were in another block.  It should be 
fairly easy to tell which set of boxes any lat, lon pair belonged to.

It seems then you could specify locations almost like IP addresses:

   X1.X2.X3...Xn

where X1 is the 0-99 number of the first largest set of blocks and X2 is the 
0-99 number of the next smaller set of blocks inside the first X1 box and so 
on. 

You could search in lucene for objects within a certain proximity with a 
prefix search:

   X1.X2.*
   X1.X2.X3.*

Moreover you would know that the longer the path that matches, the closer 
those objects are (it is fractal in nature).  If you needed more granularity 
you could do a prefix search like this down to the smallest granularity you 
have and then perform a greatcircle distance calculation on the the results 
to see if they are close enough.

Of course there might be too many squares to cover the whole Earth.  You will 
want to pick a number of boxes which is a power of two so there are a 
"square" number of squares.  I think this enables the fractal nature 
described above. You would want the corners of the squares to land on 
predicable lat, lon points.  This may be done more easily with some 
measurement systems than another.

Just my $.02...


Dennis Watson
Sr SW Engineer
GUBA.com


On Monday 20 November 2006 11:05, spamsucks wrote:
> I am successfully able to search for "nearbys" given a longitude and a
> latitude.  The basic summary of how I do this is that I add 1000 to the
> long/lat values and use a RangeFilter in my query.
>
> In my display results, I display the results ordered by distance from the
> original long/lat.  What I do is calulate the distance for every document
> in my result from the original long/lat and perform a sort of the distance.
>
> Doing the sort this way (calculating the distances for all results
> documents) feels like I am being inefficient and wasteful with my CPU
> cycles.  In most cases, I am only displaying the closest 10 documents, but
> I need to calculate the distance for all documents (potentially 1000) in
> order to come up with the 10 closest.
>
> Has anyone wrestled with these questions before?  Is there another
> approache that I can take?
>
> Here is my current working implementation, so you can see what I am
> describing.  The long/lat is stored in a database that I use to build up my
> lucene query/filters
> 
> http://www.visitpa.com/visitpa/visitNearbyActivities.pa?type=dining&name=Co
>lor+Me+MineThanks,Phillip
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 15:44:04 2006
Return-Path: <java-user-return-24614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94654 invoked from network); 21 Nov 2006 15:44:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 15:44:03 -0000
Received: (qmail 81477 invoked by uid 500); 21 Nov 2006 15:44:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81446 invoked by uid 500); 21 Nov 2006 15:44:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81435 invoked by uid 99); 21 Nov 2006 15:44:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 07:44:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 64.233.162.194 as permitted sender)
Received: from [64.233.162.194] (HELO nz-out-0102.google.com) (64.233.162.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 07:43:53 -0800
Received: by nz-out-0102.google.com with SMTP id s1so1056762nze
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 07:43:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=i058L79bkZLdGXi71Q8BFpZVat1genU1j3x2oJKxLmRnFuu+bbLth+gQIx7yX9JYfi6OImIWGmL/CIbvTopGgOH7F0UsioD77StkU8rZPfZef3D0SPGaSQ4zCptOo9oh0u6sVk3Wb2GfX3sOlwtJa0KoTslGiJQIoGcIVcn/lno=
Received: by 10.78.51.9 with SMTP id y9mr6561370huy.1164123811708;
        Tue, 21 Nov 2006 07:43:31 -0800 (PST)
Received: by 10.78.200.9 with HTTP; Tue, 21 Nov 2006 07:43:31 -0800 (PST)
Message-ID: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
Date: Tue, 21 Nov 2006 16:43:31 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: RAMDirectory vs MemoryIndex
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have to decide between  using a RAMDirectory and MemoryIndex, but
not sure what approach will work better...

I have to run many items (tens of thousands) against some queries (100
at most), but I have to do it one item at a time. And I already have
the lucene Document associated with each item, from a previous
operation I perform.

>From what I read MemoryIndex should be faster, but apparently I cannot
reuse the document I already have, and I have to create a new
MemoryIndex per item. Using the RAMDirectory I can use only one of
them, also one IndexWriter, and create a IndexSearcher and IndexReader
per item, for searching and removing the item each time.

Any thoughts?

thanks,
javi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 15:50:11 2006
Return-Path: <java-user-return-24615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98531 invoked from network); 21 Nov 2006 15:50:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 15:50:11 -0000
Received: (qmail 97995 invoked by uid 500); 21 Nov 2006 15:50:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97973 invoked by uid 500); 21 Nov 2006 15:50:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97962 invoked by uid 99); 21 Nov 2006 15:50:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 07:50:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 07:49:59 -0800
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id kALFnbER009778
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 17:49:37 +0200
Message-ID: <45632010.1070407@sirma.bg>
Date: Tue, 21 Nov 2006 17:49:36 +0200
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Querying performance decrease in 1.9.1 and 2.0.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Hi guys,

We've identified a significant querying performance decrease after 
switching from Lucene 1.4.3 to 1.9.1.
It is steadily demonstrated no mater if the concurrent querying threads 
are 1, 2, 4 or 8 (or even more) -
If N queries are executed against 1.9.1 for a given time, then 1.4.3 
executes approx. 1.5 * N queries for the same time.
Lucene 2.0.0 behaves just like 1.9.1 in terms of querying performance.

Any idea what may be causing this behavior?
Or is it just the Windows (tm) syndrome - every newer version requires 
more powerful hardware to deliver the same performance?

Regards,
Stanislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 16:04:08 2006
Return-Path: <java-user-return-24616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8446 invoked from network); 21 Nov 2006 16:04:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 16:04:07 -0000
Received: (qmail 47108 invoked by uid 500); 21 Nov 2006 16:04:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47085 invoked by uid 500); 21 Nov 2006 16:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47074 invoked by uid 99); 21 Nov 2006 16:04:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:04:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:03:55 -0800
Received: by nf-out-0910.google.com with SMTP id n28so205952nfc
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 08:03:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Ud/ak037OHHAf5odoi+8cuXjKQmDlQCBNnDn3pTHwp6YxphsrdLFCSx+5THN9t8+DS/qQ7JVALJhROHgqlRGtPyyUIXxv0oalUl8a+DSK3gp71JLZvxv3euaLNrQX3J4ZPo5KeNobOVdcG0F+jU3Z2wigfwxZdw6UrSC8N1BD78=
Received: by 10.82.131.1 with SMTP id e1mr967615bud.1164125013777;
        Tue, 21 Nov 2006 08:03:33 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Tue, 21 Nov 2006 08:03:33 -0800 (PST)
Message-ID: <c68e39170611210803t6d561f7er67b1c882e69c4887@mail.gmail.com>
Date: Tue, 21 Nov 2006 11:03:33 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Querying performance decrease in 1.9.1 and 2.0.0
In-Reply-To: <45632010.1070407@sirma.bg>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <45632010.1070407@sirma.bg>
X-Google-Sender-Auth: 8aa5ee2a3b7f87e5
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/21/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
> We've identified a significant querying performance decrease after
> switching from Lucene 1.4.3 to 1.9.1.
> It is steadily demonstrated no mater if the concurrent querying threads
> are 1, 2, 4 or 8 (or even more) -
> If N queries are executed against 1.9.1 for a given time, then 1.4.3
> executes approx. 1.5 * N queries for the same time.
> Lucene 2.0.0 behaves just like 1.9.1 in terms of querying performance.
>
> Any idea what may be causing this behavior?

BooleanScorer changed to BooleanScorer2, which can be faster or slower
depending on the nature of the queries.  There has been some
performance work lately in the trunk... you could try the latest
nightly builds to see if it improves things for you.

You could also verify that it's only the BooleanScorer by trying to
use the old scorer with the new code via
BooleanQuery.setUseScorer14(true)


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 16:13:36 2006
Return-Path: <java-user-return-24617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12748 invoked from network); 21 Nov 2006 16:13:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 16:13:35 -0000
Received: (qmail 76635 invoked by uid 500); 21 Nov 2006 16:13:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76607 invoked by uid 500); 21 Nov 2006 16:13:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76596 invoked by uid 99); 21 Nov 2006 16:13:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:13:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a4.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:13:22 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.dreamhost.com (Postfix) with ESMTP id 8A019131A3E
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 08:13:01 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20061121153653.EB71077ADBF@mail13.simplicato.com>
References: <20061121153653.EB71077ADBF@mail13.simplicato.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5066A3D7-C849-4D43-8538-7A5C641516C2@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: Use case for term vector's token position/offset?
Date: Tue, 21 Nov 2006 11:13:00 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jong,

I think these are useful for things like highlighting (I think  
contrib/highlighter can use them); other post processing algorithms  
such as: question answering, calculating co-occurrences (find the 6  
terms to the left and right of the term at position 16).  Perhaps you  
want to give higher scores to documents where your terms occur in a  
certain part of the document (like the beginning)

Really, any application where you need to know the relationships  
between the terms in a document or the document and the original.

HTH,
Grant

On Nov 21, 2006, at 10:36 AM, Jong Kim wrote:

> Hi,
>
> When I look at org.apache.lucene.document.Field.TermVector,
> it defines the following 5 options as to the detailed info
> that can be stored wrt term vectors.
>
> 1. NO
> 2. WITH_OFFSETS
> 3. WITH_POSITIONS
> 4. WITH_POSITIONS_OFFSETS
> 5. YES
>
> It isn't difficult to understand where the basic term vector
> information (ie, terms and their number of occurences - option 5)
> might be useful. I believe it can be used to implement features
> like "concept search" or "more like this" functionalities.
>
> However, it isn't clear to me how the other extra info (ie,
> token position information and/or token offset information)
> might be used? Can anyone help me understand what kind of
> (advanced) search techniques people use these extra
> information for, or even better, any pointer to real world
> examples?
>
> Thanks
> /Jong
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 16:16:54 2006
Return-Path: <java-user-return-24618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13892 invoked from network); 21 Nov 2006 16:16:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 16:16:54 -0000
Received: (qmail 89363 invoked by uid 500); 21 Nov 2006 16:16:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89340 invoked by uid 500); 21 Nov 2006 16:16:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89329 invoked by uid 99); 21 Nov 2006 16:16:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:16:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:16:39 -0800
Received: by nf-out-0910.google.com with SMTP id n28so208947nfc
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 08:16:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=tiSgEIQv4bS5x/CXgiTcpYOSdooVFllfr3BViljvDcsKy4+HsFFhcdThR12PR/pmrqpzRgJeKdDf6R3H6PbenNGvpA6DR3xYrno6d+xf7eRMwpoZ7EwsnW4MS3lASmNKqcaksyLRyAqxgspj+GWJ6TW+a2iTsehipIqXDvIeSYA=
Received: by 10.49.5.2 with SMTP id h2mr1357763nfi.1164125778157;
        Tue, 21 Nov 2006 08:16:18 -0800 (PST)
Received: from ?172.16.1.115? ( [212.162.171.110])
        by mx.google.com with ESMTP id r33sm26470255nfc.2006.11.21.08.16.14;
        Tue, 21 Nov 2006 08:16:17 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <473CC0BF-222D-4392-BF96-AFC51A737ECA@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: RAMDirectory vs MemoryIndex
Date: Tue, 21 Nov 2006 17:16:19 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


21 nov 2006 kl. 16.43 skrev jm:

> Any thoughts?

You can also try InstantiatedIndex, similair in speed and design with  
a MemoryIndex, but can handle multiple documents, IndexReader,  
IndexWriter, IndexModifier et.c. just like any Directory  
implementation. It requires a minor patch to the Lucene core.

http://issues.apache.org/jira/browse/LUCENE-550

I have a more updated version on my local system. (Actually, I'm  
working full time on improving the code and adding benches this and  
next week.)



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 16:52:45 2006
Return-Path: <java-user-return-24619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31918 invoked from network); 21 Nov 2006 16:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 16:52:44 -0000
Received: (qmail 98250 invoked by uid 500); 21 Nov 2006 16:52:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98228 invoked by uid 500); 21 Nov 2006 16:52:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98217 invoked by uid 99); 21 Nov 2006 16:52:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:52:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:52:32 -0800
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id kALGq9ER018532
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 18:52:10 +0200
Message-ID: <45632EB9.6060806@sirma.bg>
Date: Tue, 21 Nov 2006 18:52:09 +0200
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Querying performance decrease in 1.9.1 and 2.0.0
References: <45632010.1070407@sirma.bg> <c68e39170611210803t6d561f7er67b1c882e69c4887@mail.gmail.com>
In-Reply-To: <c68e39170611210803t6d561f7er67b1c882e69c4887@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Switch to the old scorer (via BooleanQuery.setUseScorer14(true) )
solved the performance issue - now Lucene 1.9.1 & 2.0.0 perform on the 
same load test just as 1.4.3 does

Thanks a lot Yonik!

Any chance there exists a non-professional explanation what's the 
difference between old and new boolean scorers?

Cheers,
Stenly

Yonik Seeley wrote:
> On 11/21/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
>> We've identified a significant querying performance decrease after
>> switching from Lucene 1.4.3 to 1.9.1.
>> It is steadily demonstrated no mater if the concurrent querying threads
>> are 1, 2, 4 or 8 (or even more) -
>> If N queries are executed against 1.9.1 for a given time, then 1.4.3
>> executes approx. 1.5 * N queries for the same time.
>> Lucene 2.0.0 behaves just like 1.9.1 in terms of querying performance.
>>
>> Any idea what may be causing this behavior?
>
> BooleanScorer changed to BooleanScorer2, which can be faster or slower
> depending on the nature of the queries.  There has been some
> performance work lately in the trunk... you could try the latest
> nightly builds to see if it improves things for you.
>
> You could also verify that it's only the BooleanScorer by trying to
> use the old scorer with the new code via
> BooleanQuery.setUseScorer14(true)
>
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search 
> server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 17:00:01 2006
Return-Path: <java-user-return-24620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33756 invoked from network); 21 Nov 2006 17:00:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 17:00:00 -0000
Received: (qmail 19488 invoked by uid 500); 21 Nov 2006 17:00:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19466 invoked by uid 500); 21 Nov 2006 17:00:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19455 invoked by uid 99); 21 Nov 2006 17:00:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 09:00:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 08:59:49 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1520386ugc
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 08:59:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=eT0VMUchW8jlW4Buir+mb69TcmIbIy1AahtvmhXq+siR4WwjmlI0Nkl6XF87lXlzzp5Pf3K8HZwvBdAYfifl8XBoUiU0sKuDzSvhbdui1P/7fB2bxKoR/+DTd5ulKbG7uJEfj/5rJ5S+Gq3hjpAED1Vp/hHHbESbRrsMOD2CFn8=
Received: by 10.82.175.2 with SMTP id x2mr1017482bue.1164128366717;
        Tue, 21 Nov 2006 08:59:26 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Tue, 21 Nov 2006 08:59:26 -0800 (PST)
Message-ID: <c68e39170611210859l4619f169l35ad1c2e2fb08bb0@mail.gmail.com>
Date: Tue, 21 Nov 2006 11:59:26 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Querying performance decrease in 1.9.1 and 2.0.0
In-Reply-To: <45632EB9.6060806@sirma.bg>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <45632010.1070407@sirma.bg>
	 <c68e39170611210803t6d561f7er67b1c882e69c4887@mail.gmail.com>
	 <45632EB9.6060806@sirma.bg>
X-Google-Sender-Auth: 25a6103babedc9d8
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/21/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
> Switch to the old scorer (via BooleanQuery.setUseScorer14(true) )
> solved the performance issue - now Lucene 1.9.1 & 2.0.0 perform on the
> same load test just as 1.4.3 does
>
> Thanks a lot Yonik!
>
> Any chance there exists a non-professional explanation what's the
> difference between old and new boolean scorers?

The original BooleanScorer was a bucket-based scorer that could
deliver docs out of order and thus restricted how it could be used.
It also had a limitation of 32 required or prohibited clauses (because
of an int bitmask).

BooleanScorer2 removes these limitations, and uses skipTo() where
applicable on sub-scorers.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 18:34:20 2006
Return-Path: <java-user-return-24621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61931 invoked from network); 21 Nov 2006 18:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 18:34:20 -0000
Received: (qmail 17025 invoked by uid 500); 21 Nov 2006 18:34:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16991 invoked by uid 500); 21 Nov 2006 18:34:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16942 invoked by uid 99); 21 Nov 2006 18:34:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 10:34:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 10:34:08 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.8/8.13.8) with ESMTP id kALIXk6Z013034
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 19:33:46 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Querying performance decrease in 1.9.1 and 2.0.0
Date: Tue, 21 Nov 2006 19:33:45 +0100
User-Agent: KMail/1.8.2
References: <45632010.1070407@sirma.bg> <45632EB9.6060806@sirma.bg> <c68e39170611210859l4619f169l35ad1c2e2fb08bb0@mail.gmail.com>
In-Reply-To: <c68e39170611210859l4619f169l35ad1c2e2fb08bb0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611211933.46040.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Stanislav,

Could you also try a nightly build to test the later performance improvement
on BooleanScorer2?  The nightly builds are here:
http://people.apache.org/builds/lucene/java/nightly/
The jar is called lucene-core-nightly.jar in the .tar.gz build.

It's not likely that this is faster than the 1.4 BooleanScorer, 
but one never knows.

Regards,
Paul Elschot


On Tuesday 21 November 2006 17:59, Yonik Seeley wrote:
> On 11/21/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
> > Switch to the old scorer (via BooleanQuery.setUseScorer14(true) )
> > solved the performance issue - now Lucene 1.9.1 & 2.0.0 perform on the
> > same load test just as 1.4.3 does
> >
> > Thanks a lot Yonik!
> >
> > Any chance there exists a non-professional explanation what's the
> > difference between old and new boolean scorers?
> 
> The original BooleanScorer was a bucket-based scorer that could
> deliver docs out of order and thus restricted how it could be used.
> It also had a limitation of 32 required or prohibited clauses (because
> of an int bitmask).
> 
> BooleanScorer2 removes these limitations, and uses skipTo() where
> applicable on sub-scorers.
> 
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search server
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 18:38:31 2006
Return-Path: <java-user-return-24622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62803 invoked from network); 21 Nov 2006 18:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 18:38:31 -0000
Received: (qmail 24747 invoked by uid 500); 21 Nov 2006 18:38:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24721 invoked by uid 500); 21 Nov 2006 18:38:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24705 invoked by uid 99); 21 Nov 2006 18:38:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 10:38:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 10:38:13 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6510B5B776; Tue, 21 Nov 2006 10:37:53 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4CBAD7F403
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 10:37:53 -0800 (PST)
Date: Tue, 21 Nov 2006 10:37:53 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Implementing scoring in Lucene
In-Reply-To: <456109BC.9000306@gmail.com>
Message-ID: <Pine.LNX.4.58.0611211033580.32186@hal.rescomp.berkeley.edu>
References: <456109BC.9000306@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is there a step by step guide on how to implement the scoring function
: for Apache Lucene?
: The help given on the website is not easy to follow.
:
: How do I integrate the search function into my website?

First off, what help did you look at? ... did you start with the tutorial?
  http://lucene.apache.org/java/docs/gettingstarted.html

Second, you don't really need to "implement the scoring function" if your
goal is to just "use Lucene" .. the scoring documentation on the website
is for people who want to get in to the low level internals and write
their own classes of Queries.

If you are looking for an easy way to add a search box to your website,
then you might want to start by using one of the products that are built
on *top* of Lucene -- isnstead of building something from scratch using
the Lucene Java API.  depending on your needs Nutch, or Solr might work
well for you -- but if you really want to write a a search application,
start by understanding the code used in the getting started tutorial i
linked to above.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 18:44:51 2006
Return-Path: <java-user-return-24623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64583 invoked from network); 21 Nov 2006 18:44:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 18:44:21 -0000
Received: (qmail 41970 invoked by uid 500); 21 Nov 2006 18:44:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41940 invoked by uid 500); 21 Nov 2006 18:44:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41929 invoked by uid 99); 21 Nov 2006 18:44:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 10:44:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 10:44:10 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 20AFA5B776; Tue, 21 Nov 2006 10:43:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1798E7F403;
	Tue, 21 Nov 2006 10:43:50 -0800 (PST)
Date: Tue, 21 Nov 2006 10:43:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, Bhavin Pandya <bhavinp@rediff.co.in>
Subject: Re: is there any way to find unique records ?
In-Reply-To: <007c01c70d7d$c656f850$970310ac@bhavin>
Message-ID: <Pine.LNX.4.58.0611211043240.32186@hal.rescomp.berkeley.edu>
References: <002001c70d41$2585ceb0$970310ac@bhavin>
 <359a92830611210531kc3bb5a1h4765a59ca5b9d0cb@mail.gmail.com>
 <007c01c70d7d$c656f850$970310ac@bhavin>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


serach the archives for "faceted searching" and "category counts" and you
should find lots of discussions on this topic.

: Date: Tue, 21 Nov 2006 20:30:22 +0530
: From: Bhavin Pandya <bhavinp@rediff.co.in>
: Reply-To: java-user@lucene.apache.org, Bhavin Pandya <bhavinp@rediff.co.in>
: To: java-user@lucene.apache.org
: Subject: Re: is there any way to find unique records ?
:
: Hi Erick,
:
: > If your asking for a list of all the unique values for a particular field,
: > see TermDocs and/or TermEnum which will allow you to look at, say, all the
: > values stored for some field. A trick here is to seek (new Term("field",
: > ""));. By putting nothing in the value, you effectively enumerate them
: > all,
: > something that I didn't find obvious
:
: I think your above solution is very near to what i am looking for ,
: But little bit different way...
: here is what i am planning to do...
:
: Suppose my index has four fields "product-title" , "product-desc" ,
: "category" and "FLAG"    ( Fieldname FLAG has value "true" for each n every
: doc in index ...just added for iteration purpose )
:
: At search time.. .
: query =  +(product-title:nokia) +(product-desc:nokia)
: Hits hits = searcher.search(query);
: I want to fetch unique "category" from above hits object...
:
: But i dont want to iterate through Hits object....
:
: Now As per your suggestions,  I can do something like this...
: TermEnum  enum = termDocs(new Term("FLAG","true")
: But it will return enumeration of all the document which is in index...But i
: want enumeration of all the document which is relevant to "nokia"...
: How to . . ?
:
: Thanks
: - Bhavin pandya
:
:
: ----- Original Message -----
: From: "Erick Erickson" <erickerickson@gmail.com>
: To: <java-user@lucene.apache.org>; "Bhavin Pandya" <bhavinp@rediff.co.in>
: Sent: Tuesday, November 21, 2006 7:01 PM
: Subject: Re: is there any way to find unique records ?
:
:
: > I don't think I understand what "only unique records from a single field"
: > means.  If it's a unique value in a filed, there'll only be one document
: > in
: > the hits object and there's no cost to iterating, so I doubt that's what
: > you
: > mean.
: >
: > If your asking for a list of all the unique values for a particular field,
: > see TermDocs and/or TermEnum which will allow you to look at, say, all the
: > values stored for some field. A trick here is to seek (new Term("field",
: > ""));. By putting nothing in the value, you effectively enumerate them
: > all,
: > something that I didn't find obvious.
: >
: > If neither of these are close to the mark, perhaps you could provide more
: > detail.
: >
: > Best
: > Erick
: >
: > On 11/21/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
: >>
: >> Hi,
: >> In lucene, is there any way to find only unique records from a single
: >> field ..?
: >>
: >> otherwise unnecessary i have to itereate through Hits and find out
: >> unique...
: >>
: >> plz help..
: >>
: >> - Bhavin pandya
: >>
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 18:49:52 2006
Return-Path: <java-user-return-24624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66636 invoked from network); 21 Nov 2006 18:49:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 18:49:51 -0000
Received: (qmail 51687 invoked by uid 500); 21 Nov 2006 18:49:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51661 invoked by uid 500); 21 Nov 2006 18:49:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51650 invoked by uid 99); 21 Nov 2006 18:49:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 10:49:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 10:49:41 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 96AD15B77A; Tue, 21 Nov 2006 10:49:21 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8B5217F403
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 10:49:21 -0800 (PST)
Date: Tue, 21 Nov 2006 10:49:21 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Querying performance decrease in 1.9.1 and 2.0.0
In-Reply-To: <200611211933.46040.paul.elschot@xs4all.nl>
Message-ID: <Pine.LNX.4.58.0611211047160.32186@hal.rescomp.berkeley.edu>
References: <45632010.1070407@sirma.bg> <45632EB9.6060806@sirma.bg>
 <c68e39170611210859l4619f169l35ad1c2e2fb08bb0@mail.gmail.com>
 <200611211933.46040.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Could you also try a nightly build to test the later performance improvement
: on BooleanScorer2?  The nightly builds are here:
: http://people.apache.org/builds/lucene/java/nightly/
: The jar is called lucene-core-nightly.jar in the .tar.gz build.
:
: It's not likely that this is faster than the 1.4 BooleanScorer,
: but one never knows.

...and there have been other performance improvements that may make up for
it ... MultiTermDocs.skipTo for example (if you use non optimized indexes)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 19:00:05 2006
Return-Path: <java-user-return-24625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70748 invoked from network); 21 Nov 2006 19:00:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 19:00:03 -0000
Received: (qmail 83679 invoked by uid 500); 21 Nov 2006 19:00:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83656 invoked by uid 500); 21 Nov 2006 19:00:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83645 invoked by uid 99); 21 Nov 2006 19:00:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 11:00:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 10:59:51 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15B18003@mailer.syr.edu>; Tue, 21 Nov 2006 13:59:30 -0500
Message-ID: <45634C91.8080206@syr.edu>
Date: Tue, 21 Nov 2006 13:59:29 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: is there any way to find unique records ?
References: <002001c70d41$2585ceb0$970310ac@bhavin> <359a92830611210531kc3bb5a1h4765a59ca5b9d0cb@mail.gmail.com> <007c01c70d7d$c656f850$970310ac@bhavin> <Pine.LNX.4.58.0611211043240.32186@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0611211043240.32186@hal.rescomp.berkeley.edu>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Bhavin,

Mark Harwood gives a solution that looks almost exactly like what you want:

   http://www.mail-archive.com/java-user@lucene.apache.org/msg05154.html

Steve

Chris Hostetter wrote:
> serach the archives for "faceted searching" and "category counts" and you
> should find lots of discussions on this topic.
> 
> : Date: Tue, 21 Nov 2006 20:30:22 +0530
> : From: Bhavin Pandya <bhavinp@rediff.co.in>
> : Reply-To: java-user@lucene.apache.org, Bhavin Pandya <bhavinp@rediff.co.in>
> : To: java-user@lucene.apache.org
> : Subject: Re: is there any way to find unique records ?
> :
> : Hi Erick,
> :
> : > If your asking for a list of all the unique values for a particular field,
> : > see TermDocs and/or TermEnum which will allow you to look at, say, all the
> : > values stored for some field. A trick here is to seek (new Term("field",
> : > ""));. By putting nothing in the value, you effectively enumerate them
> : > all,
> : > something that I didn't find obvious
> :
> : I think your above solution is very near to what i am looking for ,
> : But little bit different way...
> : here is what i am planning to do...
> :
> : Suppose my index has four fields "product-title" , "product-desc" ,
> : "category" and "FLAG"    ( Fieldname FLAG has value "true" for each n every
> : doc in index ...just added for iteration purpose )
> :
> : At search time.. .
> : query =  +(product-title:nokia) +(product-desc:nokia)
> : Hits hits = searcher.search(query);
> : I want to fetch unique "category" from above hits object...
> :
> : But i dont want to iterate through Hits object....
> :
> : Now As per your suggestions,  I can do something like this...
> : TermEnum  enum = termDocs(new Term("FLAG","true")
> : But it will return enumeration of all the document which is in index...But i
> : want enumeration of all the document which is relevant to "nokia"...
> : How to . . ?
> :
> : Thanks
> : - Bhavin pandya
> :
> :
> : ----- Original Message -----
> : From: "Erick Erickson" <erickerickson@gmail.com>
> : To: <java-user@lucene.apache.org>; "Bhavin Pandya" <bhavinp@rediff.co.in>
> : Sent: Tuesday, November 21, 2006 7:01 PM
> : Subject: Re: is there any way to find unique records ?
> :
> :
> : > I don't think I understand what "only unique records from a single field"
> : > means.  If it's a unique value in a filed, there'll only be one document
> : > in
> : > the hits object and there's no cost to iterating, so I doubt that's what
> : > you
> : > mean.
> : >
> : > If your asking for a list of all the unique values for a particular field,
> : > see TermDocs and/or TermEnum which will allow you to look at, say, all the
> : > values stored for some field. A trick here is to seek (new Term("field",
> : > ""));. By putting nothing in the value, you effectively enumerate them
> : > all,
> : > something that I didn't find obvious.
> : >
> : > If neither of these are close to the mark, perhaps you could provide more
> : > detail.
> : >
> : > Best
> : > Erick
> : >
> : > On 11/21/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
> : >>
> : >> Hi,
> : >> In lucene, is there any way to find only unique records from a single
> : >> field ..?
> : >>
> : >> otherwise unnecessary i have to itereate through Hits and find out
> : >> unique...
> : >>
> : >> plz help..
> : >>
> : >> - Bhavin pandya


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 19:06:30 2006
Return-Path: <java-user-return-24626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72606 invoked from network); 21 Nov 2006 19:06:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 19:06:29 -0000
Received: (qmail 95655 invoked by uid 500); 21 Nov 2006 19:06:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95631 invoked by uid 500); 21 Nov 2006 19:06:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95620 invoked by uid 99); 21 Nov 2006 19:06:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 11:06:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=ADVANCE_FEE_1
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 11:06:19 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 40F985B776; Tue, 21 Nov 2006 11:05:59 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 360037F403;
	Tue, 21 Nov 2006 11:05:59 -0800 (PST)
Date: Tue, 21 Nov 2006 11:05:59 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Cc: spamsucks <spamsucks@rhoderunner.com>
Subject: Re: Sorting on distance from a long/lat
In-Reply-To: <200611210742.29696.dennis@guba.com>
Message-ID: <Pine.LNX.4.58.0611211057140.32186@hal.rescomp.berkeley.edu>
References: <12378468.941164049539891.JavaMail.root@dell.rhoderunner.com>
 <200611210742.29696.dennis@guba.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I'm not really sure what an approach like this gaines you ... it provides
a mechanism for ensuring that the lat/lon of all results are within a
bounding box arround your start location -- but those bounding boxes
are fixed when building your index.

couldn't you achieve the same thing using a "lat" field, a "lon" field
and two RangeFilters? ... except now you get variable sized/centered
bounding boxes?


: Date: Tue, 21 Nov 2006 07:42:29 -0800
: From: Dennis Watson <dennis@guba.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Cc: spamsucks <spamsucks@rhoderunner.com>
: Subject: Re: Sorting on distance from a long/lat
:
: Hi,
:
: I apologize if this is slightly off topic.  I have not implemented this, but
: the idea came to me after reading another post about measuring distance in
: lucene.  It may be completely impractical, however it seems it COULD work at
: least if the area to be indexed could be constrained.
:
: What if you divided the earth up into lets say 100 square blocks.  Each block
: would have sides of length x1 with an area x1^2.  You could number those
: blocks 0 - 99.  Then you could divide each of those blocks into 100 blocks
: with sides of length x2 = x1 / 10 and number these 0 - 99 as well.  You could
: do this until you had blocks with sides of length xn and area xn^2.
:
: Each one of these blocks would have four corners with a lat and lon.  It would
: be fairly easy to tell if one block were in another block.  It should be
: fairly easy to tell which set of boxes any lat, lon pair belonged to.
:
: It seems then you could specify locations almost like IP addresses:
:
:    X1.X2.X3...Xn
:
: where X1 is the 0-99 number of the first largest set of blocks and X2 is the
: 0-99 number of the next smaller set of blocks inside the first X1 box and so
: on.
:
: You could search in lucene for objects within a certain proximity with a
: prefix search:
:
:    X1.X2.*
:    X1.X2.X3.*
:
: Moreover you would know that the longer the path that matches, the closer
: those objects are (it is fractal in nature).  If you needed more granularity
: you could do a prefix search like this down to the smallest granularity you
: have and then perform a greatcircle distance calculation on the the results
: to see if they are close enough.
:
: Of course there might be too many squares to cover the whole Earth.  You will
: want to pick a number of boxes which is a power of two so there are a
: "square" number of squares.  I think this enables the fractal nature
: described above. You would want the corners of the squares to land on
: predicable lat, lon points.  This may be done more easily with some
: measurement systems than another.
:
: Just my $.02...
:
:
: Dennis Watson
: Sr SW Engineer
: GUBA.com
:
:
: On Monday 20 November 2006 11:05, spamsucks wrote:
: > I am successfully able to search for "nearbys" given a longitude and a
: > latitude.  The basic summary of how I do this is that I add 1000 to the
: > long/lat values and use a RangeFilter in my query.
: >
: > In my display results, I display the results ordered by distance from the
: > original long/lat.  What I do is calulate the distance for every document
: > in my result from the original long/lat and perform a sort of the distance.
: >
: > Doing the sort this way (calculating the distances for all results
: > documents) feels like I am being inefficient and wasteful with my CPU
: > cycles.  In most cases, I am only displaying the closest 10 documents, but
: > I need to calculate the distance for all documents (potentially 1000) in
: > order to come up with the 10 closest.
: >
: > Has anyone wrestled with these questions before?  Is there another
: > approache that I can take?
: >
: > Here is my current working implementation, so you can see what I am
: > describing.  The long/lat is stored in a database that I use to build up my
: > lucene query/filters
: >
: > http://www.visitpa.com/visitpa/visitNearbyActivities.pa?type=dining&name=Co
: >lor+Me+MineThanks,Phillip
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 20:18:25 2006
Return-Path: <java-user-return-24627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2969 invoked from network); 21 Nov 2006 20:18:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 20:18:23 -0000
Received: (qmail 59364 invoked by uid 500); 21 Nov 2006 20:18:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59339 invoked by uid 500); 21 Nov 2006 20:18:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59319 invoked by uid 99); 21 Nov 2006 20:18:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:18:18 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=FORGED_MUA_OUTLOOK,MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [216.170.99.246] (HELO mail.rhoderunner.com) (216.170.99.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:18:05 -0800
Message-ID: <16929399.491164140264038.JavaMail.root@dell.rhoderunner.com>
MIME-Version: 1.0
X-UserIsAuth: true
Received: from mism.r-effects.com ([209.166.180.139])
          by mail.rhoderunner.com (JAMES SMTP Server 2.3.0rc2) with SMTP ID 939
          for <java-user@lucene.apache.org>;
          Tue, 21 Nov 2006 15:17:43 -0500 (EST)
From: "spamsucks" <spamsucks@rhoderunner.com>
To: <java-user@lucene.apache.org>
Subject: Federated search (lucene custom and nutch)?
Date: Tue, 21 Nov 2006 15:17:42 -0500
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Everybody,

I am successfully using lucene to index/display results for a hugely 
successful tourism site...  We even for nearby's of attractions of different 
categories.  Love it.

The next step is to start indexing all the "legacy" content, which numbers 
around 3000 or so JSP's that will never be migrated to a database.  While I 
know I could use nutch to crawl my site, I don't want 2 different search 
engines for this site (custom lucene and nutch) , I need to present a single 
search interface and single set of results to the user.

Has anyone tried to inject the crawling of nutch or reuse pieces of nutch to 
augment the index of lucene?
Thanks.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 20:30:58 2006
Return-Path: <java-user-return-24628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11590 invoked from network); 21 Nov 2006 20:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 20:30:57 -0000
Received: (qmail 81394 invoked by uid 500); 21 Nov 2006 20:30:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81366 invoked by uid 500); 21 Nov 2006 20:30:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81349 invoked by uid 99); 21 Nov 2006 20:30:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:30:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.171] (HELO smtpout.mac.com) (17.250.248.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:30:46 -0800
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout01/MantshX 4.0) with ESMTP id kALKUO5B005387
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 12:30:24 -0800 (PST)
Received: from [172.16.4.31] (66-147-201-242.focaldata.net [66.147.201.242] (may be forged))
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id kALKULWP026033
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 12:30:23 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com>
Content-Transfer-Encoding: 7bit
From: Wolfgang Hoschek <wolfgang.hoschek@mac.com>
Subject: Re: RAMDirectory vs MemoryIndex
Date: Tue, 21 Nov 2006 12:30:19 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5446:2.3.11,1.2.37,4.0.164 definitions=2006-11-21_03:2006-11-21,2006-11-21,2006-11-21 signatures=0
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 spamscore=0 ipscore=0 adultscore=0 classifier=spam adjust=0 reason=mlx engine=3.1.0-0610180000 definitions=main-0611210025
X-Virus-Checked: Checked by ClamAV on apache.org

On Nov 21, 2006, at 7:43 AM, jm wrote:

> Hi,
>
> I have to decide between  using a RAMDirectory and MemoryIndex, but
> not sure what approach will work better...
>
> I have to run many items (tens of thousands) against some queries (100
> at most), but I have to do it one item at a time. And I already have
> the lucene Document associated with each item, from a previous
> operation I perform.
>
> From what I read MemoryIndex should be faster, but apparently I cannot
> reuse the document I already have, and I have to create a new
> MemoryIndex per item.

A MemoryIndex object holds one document.

> Using the RAMDirectory I can use only one of
> them, also one IndexWriter, and create a IndexSearcher and IndexReader
> per item, for searching and removing the item each time.
>
> Any thoughts?

The MemoryIndex impl is optimized to work efficiently without reusing  
the MemoryIndex object for a subsequent document. See the source  
code. Reusing the object would not further improve performance.

Wolfgang.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 20:38:51 2006
Return-Path: <java-user-return-24629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14707 invoked from network); 21 Nov 2006 20:38:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 20:38:49 -0000
Received: (qmail 3338 invoked by uid 500); 21 Nov 2006 20:38:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3307 invoked by uid 500); 21 Nov 2006 20:38:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3287 invoked by uid 99); 21 Nov 2006 20:38:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:38:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:38:37 -0800
Received: by wr-out-0506.google.com with SMTP id i21so582625wra
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 12:38:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=K875qxltWk1fQZPQnUZjKP9Ij/Hs12kX/KnF0ujDHkrgB3KcYcMpLfL+FC7hYSqj+Fka9epVm5AnmX/HK7v8K+08FtpLkmBwlvj0lMRZ2DTTiz1W4OjfoKgKWrbZH2ge6zNFXvRzmDd9+yTZ5GpZsmX/OBKr8RlFSh8En0yV5I8=
Received: by 10.78.51.9 with SMTP id y9mr6905318huy.1164141495494;
        Tue, 21 Nov 2006 12:38:15 -0800 (PST)
Received: by 10.78.200.9 with HTTP; Tue, 21 Nov 2006 12:38:15 -0800 (PST)
Message-ID: <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com>
Date: Tue, 21 Nov 2006 21:38:15 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory vs MemoryIndex
In-Reply-To: <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
	 <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, thanks, I'll give MemoryIndex a go, and if that is not good enoguh
I will explore the other options then.


On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> On Nov 21, 2006, at 7:43 AM, jm wrote:
>
> > Hi,
> >
> > I have to decide between  using a RAMDirectory and MemoryIndex, but
> > not sure what approach will work better...
> >
> > I have to run many items (tens of thousands) against some queries (100
> > at most), but I have to do it one item at a time. And I already have
> > the lucene Document associated with each item, from a previous
> > operation I perform.
> >
> > From what I read MemoryIndex should be faster, but apparently I cannot
> > reuse the document I already have, and I have to create a new
> > MemoryIndex per item.
>
> A MemoryIndex object holds one document.
>
> > Using the RAMDirectory I can use only one of
> > them, also one IndexWriter, and create a IndexSearcher and IndexReader
> > per item, for searching and removing the item each time.
> >
> > Any thoughts?
>
> The MemoryIndex impl is optimized to work efficiently without reusing
> the MemoryIndex object for a subsequent document. See the source
> code. Reusing the object would not further improve performance.
>
> Wolfgang.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 20:41:42 2006
Return-Path: <java-user-return-24630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15659 invoked from network); 21 Nov 2006 20:41:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 20:41:41 -0000
Received: (qmail 15832 invoked by uid 500); 21 Nov 2006 20:41:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15801 invoked by uid 500); 21 Nov 2006 20:41:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15790 invoked by uid 99); 21 Nov 2006 20:41:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:41:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.171] (HELO smtpout.mac.com) (17.250.248.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 12:41:29 -0800
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout01/MantshX 4.0) with ESMTP id kALKf56b011803;
	Tue, 21 Nov 2006 12:41:05 -0800 (PST)
Received: from [172.16.4.31] (66-147-201-242.focaldata.net [66.147.201.242] (may be forged))
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id kALKf0ob000638
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO);
	Tue, 21 Nov 2006 12:41:03 -0800 (PST)
In-Reply-To: <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com>
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com> <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com> <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com>
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com>
Cc: jm <jmuguruza@gmail.com>
Content-Transfer-Encoding: 7bit
From: Wolfgang Hoschek <wolfgang.hoschek@mac.com>
Subject: Re: RAMDirectory vs MemoryIndex
Date: Tue, 21 Nov 2006 12:40:57 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5446:2.3.11,1.2.37,4.0.164 definitions=2006-11-21_03:2006-11-21,2006-11-21,2006-11-21 signatures=0
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 spamscore=0 ipscore=0 adultscore=0 classifier=spam adjust=0 reason=mlx engine=3.1.0-0610180000 definitions=main-0611210026
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 21, 2006, at 12:38 PM, jm wrote:

> Ok, thanks, I'll give MemoryIndex a go, and if that is not good enoguh
> I will explore the other options then.

To get started you can use something like this:

for each document D:
     MemoryIndex index = createMemoryIndex(D, ...)
     for each query Q:
         float score = index.search(Q)
	if (score > 0.0) System.out.println("it's a match");




   private MemoryIndex createMemoryIndex(Document doc, Analyzer  
analyzer) {
     MemoryIndex index = new MemoryIndex();
     Enumeration iter = doc.fields();
     while (iter.hasMoreElements()) {
       Field field = (Field) iter.nextElement();
       index.addField(field.name(), field.stringValue(), analyzer);
     }
     return index;
   }



>
>
> On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>> On Nov 21, 2006, at 7:43 AM, jm wrote:
>>
>> > Hi,
>> >
>> > I have to decide between  using a RAMDirectory and MemoryIndex, but
>> > not sure what approach will work better...
>> >
>> > I have to run many items (tens of thousands) against some  
>> queries (100
>> > at most), but I have to do it one item at a time. And I already  
>> have
>> > the lucene Document associated with each item, from a previous
>> > operation I perform.
>> >
>> > From what I read MemoryIndex should be faster, but apparently I  
>> cannot
>> > reuse the document I already have, and I have to create a new
>> > MemoryIndex per item.
>>
>> A MemoryIndex object holds one document.
>>
>> > Using the RAMDirectory I can use only one of
>> > them, also one IndexWriter, and create a IndexSearcher and  
>> IndexReader
>> > per item, for searching and removing the item each time.
>> >
>> > Any thoughts?
>>
>> The MemoryIndex impl is optimized to work efficiently without reusing
>> the MemoryIndex object for a subsequent document. See the source
>> code. Reusing the object would not further improve performance.
>>
>> Wolfgang.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 22:11:01 2006
Return-Path: <java-user-return-24631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56606 invoked from network); 21 Nov 2006 22:11:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:11:00 -0000
Received: (qmail 99153 invoked by uid 500); 21 Nov 2006 22:11:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99125 invoked by uid 500); 21 Nov 2006 22:11:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99114 invoked by uid 99); 21 Nov 2006 22:11:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:11:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:10:48 -0800
Received: from [192.168.1.98] (gate.marathonconsulting.com [66.253.5.226])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id kALMAcc31039
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 17:10:38 -0500
Message-ID: <45637AB9.3010702@alias-i.com>
Date: Tue, 21 Nov 2006 17:16:25 -0500
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: a "fair" similarity
References: <200608150220.26216@danielnaber.de> <44E122D0.1050504@curtin.com>
In-Reply-To: <44E122D0.1050504@curtin.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael D. Curtin wrote:
> Daniel Naber wrote:
> 
>> Hi,
>>
>> as some of you may have noticed, Lucene prefers shorter documents over 
>> longer ones, i.e. shorter documents get a higher ranking, even if the 
>> ratio "matched terms / total terms in document" is the same.

There's even more interesting kinds of "unfairness".

Suppose we have a document.  We can turn the
document into a query in the obvious way (a set
of boolean SHOULD clauses with term frequencies
given by counts in the doc).

Lucene's IDF scaling is only applied to the query.
This is great for performance, because the doc vectors
remain stable as new docs are added.

Then, in general:

score(doc,doc) < score(doc,doc')

if IDF(doc) = doc'.  That is, the inversely IDF-scaled
query matches a document better than the document itself.

- Bob Carpenter
   Alias-i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 22:14:46 2006
Return-Path: <java-user-return-24632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63758 invoked from network); 21 Nov 2006 22:14:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:14:46 -0000
Received: (qmail 6120 invoked by uid 500); 21 Nov 2006 22:14:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6092 invoked by uid 500); 21 Nov 2006 22:14:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6081 invoked by uid 99); 21 Nov 2006 22:14:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:14:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:14:36 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kALME8Tt021188
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 00:14:08 +0200
Received: from [10.142.3.12] ([10.142.3.12]) by nimitz with ESMTP
	 id mbm0edbp; 22 Nov 2006 00:14:00 +0200
Message-ID: <45637A2E.6090301@teamware.com>
Date: Wed, 22 Nov 2006 09:14:06 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: NOT queries
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 22 Nov 2006 00:14:08 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm writing a mapping mechanism between an existing search interface and Lucene 
and wondered how to support a single NOT/- query.

Given the query "-attribute", then from an ealier comment by Chris Hostetter 
where he says "you can't have a negative clause in isolation by itself", I 
assume that you first have to create a BooleanClause that finds everything and 
then another Clause that removes the "attribute".

Is this right or is there another way to do it?

Thanks
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 22:24:24 2006
Return-Path: <java-user-return-24633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79840 invoked from network); 21 Nov 2006 22:24:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:24:24 -0000
Received: (qmail 29276 invoked by uid 500); 21 Nov 2006 22:24:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29253 invoked by uid 500); 21 Nov 2006 22:24:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29242 invoked by uid 99); 21 Nov 2006 22:24:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:24:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:24:12 -0800
Received: from [192.168.1.98] (gate.marathonconsulting.com [66.253.5.226])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id kALMO2c31104
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 17:24:02 -0500
Message-ID: <45637DDD.2070906@alias-i.com>
Date: Tue, 21 Nov 2006 17:29:49 -0500
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Analysis/tokenization of compound words (German, Chinese, etc.)
References: <20060919201504.67013.qmail@web25914.mail.ukl.yahoo.com>
In-Reply-To: <20060919201504.67013.qmail@web25914.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

eks dev wrote:

> Depends what yo need to do with it, if you need this to be only used as "kind of stemming" for searching documents, solution is not all that complex. If you need linguisticly correct splitting than it gets complicated.

This is a very good point.  Stemming for
high recall is much easier than fine-grained
linguistic morphology.

Often the best solution is a combination of
best-guess based on linguistic rules/statistical
models/heuristics combined with weaker substring
measures.

> For beter solutions that would cover fuzzy errors, contact Bob Carpenter from Alias-I, his SpellChecker can do this rather easily, unfortunatelly (for us) for money (Warning: I am in no relatatin to Bob or Alias-I at all)...

The implementation we have is a simple character-level
noisy channel model.  We even have a tutorial for
how to do this in Chinese:

http://www.alias-i.com/lingpipe/demos/tutorial/chineseTokens/read-me.html

As pointed out in another thread, this requires a set of
training data consisting of the parts of the German
words.  And you may need to allow things other than
spaces to be dropped in cases of epenthesis (adding
a vowel between words).

It's also possible to bootstrap directly from
raw data, though only for the stemming for
high recall case -- you won't get close to the
true morphology this way.

Just to clarify, our LingPipe license is a dual
royalty-free/commercial license.  Our source is
downloadable online. The royalty free license
is very much like GPL with the added restriction that you
have to make public the data over which you run LingPipe.

- Bob Carpenter
   Alias-i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 22:26:48 2006
Return-Path: <java-user-return-24634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80504 invoked from network); 21 Nov 2006 22:26:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:26:47 -0000
Received: (qmail 34902 invoked by uid 500); 21 Nov 2006 22:26:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34878 invoked by uid 500); 21 Nov 2006 22:26:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34867 invoked by uid 99); 21 Nov 2006 22:26:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:26:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:26:37 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kALMQBt8022480
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 00:26:11 +0200
Received: from [10.142.3.12] ([10.142.3.12]) by nimitz with ESMTP
	 id mbm0qgjt; 22 Nov 2006 00:26:00 +0200
Message-ID: <45637D01.7080000@teamware.com>
Date: Wed, 22 Nov 2006 09:26:09 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Limiting QueryParser
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 22 Nov 2006 00:26:11 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have a search UI that allows search criteria to be input against specific 
fields, e.g. Subject.

In order to create a suitable Lucene Query, I must analyze that String so that 
it becomes a set of Tokens which I can then turn into Terms.  QueryParser seems 
to fit the bill for that, however, it is too clever as it assumes that anything 
suffixes with a : is a field reference.

If someone enters

important:conference agenda

in the subject field, I don't want QP to translate this to

+important:conference +defaultfield:agenda

I want to end up with

+subject:important +subject:conference +subject:agenda

I've written something to do this, but I know it is not as clever as QP as 
currently it can only create BooleanQueries with TermQueries and cannot handle 
PhraseQuery, so would not handle

important:"conference agenda"

correctly.  Does anyone have any pointers on how to limit QueryParser so that I 
can force it to treat what it thinks as fields as terms.

Thanks
Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 22:30:30 2006
Return-Path: <java-user-return-24635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82319 invoked from network); 21 Nov 2006 22:30:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:30:29 -0000
Received: (qmail 46308 invoked by uid 500); 21 Nov 2006 22:30:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46284 invoked by uid 500); 21 Nov 2006 22:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46273 invoked by uid 99); 21 Nov 2006 22:30:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:30:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:30:18 -0800
Received: from [192.168.1.98] (gate.marathonconsulting.com [66.253.5.226])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id kALMU9c31162
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 17:30:09 -0500
Message-ID: <45637F4C.4030808@alias-i.com>
Date: Tue, 21 Nov 2006 17:35:56 -0500
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Analyzers and multiple languages (language detection)
References: <452F4381.5000106@teamware.com>
In-Reply-To: <452F4381.5000106@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antony Bowesman wrote:
> Hello,
> 
> I'm new to Lucene and wanted some advice on analyzers, stemmers and 
> language analysis.  I've got LIA, so have read it's chapters.
> 
> I am writing a framework that needs to be able to index documents from a 
> range of languages where just the character set of the document is 
> known.  Has anyone looked at or is using language analysis to determine 
> the language of a document in ISO-8859-1.

Language ID is pretty easy.  The best way to
do it wholly within Lucene would be with a
separate index containing one document per
language, with an analyzer that returned weighted
character n-grams.  You can read about our analyzer
to do that in LIA.  This is what some
of the packages such as Gertjan van Noord's do.

If you need very high accuracy, you could also
use our language ID, which is based on a probabilistic
classifier.  You can check out our tutorial at:

http://www.alias-i.com/lingpipe/demos/tutorial/langid/read-me.html

Accuracy depends on the pair of languages (some are
more confusible than others), as well as length of
input (it's very hard with only one or two words,
especially if it's a a name).

- Bob Carpenter
   Alias-i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 22:40:36 2006
Return-Path: <java-user-return-24636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3289 invoked from network); 21 Nov 2006 22:40:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:40:35 -0000
Received: (qmail 64750 invoked by uid 500); 21 Nov 2006 22:40:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64720 invoked by uid 500); 21 Nov 2006 22:40:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64709 invoked by uid 99); 21 Nov 2006 22:40:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:40:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:40:23 -0800
Received: from [192.168.1.98] (gate.marathonconsulting.com [66.253.5.226])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id kALMeEc31237
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 17:40:14 -0500
Message-ID: <456381A9.2000907@alias-i.com>
Date: Tue, 21 Nov 2006 17:46:01 -0500
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: does anyone know of a 'smart' categorizing text pattern finder?
References: <373399D6389D8C42B4EAD9BE2B6B5C5F070D1529@tormail01.cihi.ca>
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F070D1529@tormail01.cihi.ca>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Vladimir Olenin wrote:
> Hi,
> 
> I wonder if anyone here knows if there is a 'smart' text pattern finder, ideally written in Java. The library I'm looking for should be able to 'guess' the category of the particular text on the page, most probably by finding similarities between the bulk of the pages and a set of templates.

This is another problem you can actually do pretty
well in Lucene itself.  Either index with your usual
analyzer or use the n-gram analyzers we wrote about
in LingPipe in Action.

Then create an index with a single pseudo-document
per topic, containing all the text you want to use
to train the topic.

Then run the document to classify as a query against
the index, and the highest scoring pseudo-document
is the most likely category according to token
match.

You could also check out our more probabilistic
classifiers.  For instance, we have a classification
by topic demo:

http://www.alias-i.com/lingpipe/demos/tutorial/classify/read-me.html

And just about every other natural language platform
and most machine learning platforms do classificaton
(e.g. Mallet and MinorThird, both in Java).  For
general structured classification problems, you
might want to check out Weka.

- Bob Carpenter
   Alias-i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 22:49:08 2006
Return-Path: <java-user-return-24637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17436 invoked from network); 21 Nov 2006 22:49:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:49:06 -0000
Received: (qmail 85255 invoked by uid 500); 21 Nov 2006 22:49:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85222 invoked by uid 500); 21 Nov 2006 22:49:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85206 invoked by uid 99); 21 Nov 2006 22:49:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:49:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:48:42 -0800
Received: (qmail 16339 invoked from network); 21 Nov 2006 22:48:13 -0000
Received: from unknown (HELO p5496e31a.dip.t-dialin.net) ([pbs]695637@[84.150.227.26])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 21 Nov 2006 22:48:13 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: NOT queries
Date: Tue, 21 Nov 2006 23:48:00 +0100
User-Agent: KMail/1.8.2
References: <45637A2E.6090301@teamware.com>
In-Reply-To: <45637A2E.6090301@teamware.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611212348.00851@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 21 November 2006 23:14, Antony Bowesman wrote:

>  I
> assume that you first have to create a BooleanClause that finds
> everything and then another Clause that removes the "attribute".
>
> Is this right or is there another way to do it?

That's correct. For the "find everything" part you can use 
MatchAllDocsQuery.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 22:55:57 2006
Return-Path: <java-user-return-24638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22942 invoked from network); 21 Nov 2006 22:55:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 22:55:57 -0000
Received: (qmail 2279 invoked by uid 500); 21 Nov 2006 22:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2251 invoked by uid 500); 21 Nov 2006 22:56:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2240 invoked by uid 99); 21 Nov 2006 22:56:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:56:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 14:55:47 -0800
Received: from [192.168.1.98] (gate.marathonconsulting.com [66.253.5.226])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id kALMtQc31319
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 17:55:30 -0500
Message-ID: <45638534.3000804@alias-i.com>
Date: Tue, 21 Nov 2006 18:01:08 -0500
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: is there any n-gram analyzer available??
References: <a36516400609220149x4accf69ar38d5d4231c3ac39@mail.gmail.com>	 <Pine.LNX.4.58.0609221805000.12848@hal.rescomp.berkeley.edu> <a36516400609222136s297dc409j39c21e7520cff52c@mail.gmail.com>
In-Reply-To: <a36516400609222136s297dc409j39c21e7520cff52c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

heritrix.lucene wrote:
> Thanks for your reply.
> 
> This analyzer creates combination of words. I am looking for analyzer where
> you can break up the words into their n-grams. For example:
> 2-grams of
> google - > go, oo, og, gl, le
> like that.

This is also easy.  You can check out our
sample in Gospodentic and Hatcher's Lucene
in Action book if you want to stream them out.
If you're willing to collect them and then push
them out, it's even easier.  (Oh, how I wish
we had the yielding iterator construct of Python
in Java.)

Our version allows you to specify minimum n-gram
length and maximum n-gram length.  You
might want to put them in different fields
if you want weighting between them to be
easy.

- Bob Carpenter
   Alias-i


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 23:05:16 2006
Return-Path: <java-user-return-24639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26030 invoked from network); 21 Nov 2006 23:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:05:14 -0000
Received: (qmail 22060 invoked by uid 500); 21 Nov 2006 23:05:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21988 invoked by uid 500); 21 Nov 2006 23:05:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21958 invoked by uid 99); 21 Nov 2006 23:05:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:05:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:05:08 -0800
Received: from [192.168.1.98] (gate.marathonconsulting.com [66.253.5.226])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id kALN4ec31403;
	Tue, 21 Nov 2006 18:04:45 -0500
Message-ID: <4563875D.9070605@alias-i.com>
Date: Tue, 21 Nov 2006 18:10:21 -0500
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: part of speech tagger
References: <20061020102517.41481.qmail@web60811.mail.yahoo.com>
In-Reply-To: <20061020102517.41481.qmail@web60811.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

zzzzz shalev wrote:
> hello all,
>    
>     i would like to retrieve during query time, the part of speech of each word in a query,
>   does anyone know of an implementation of a java part of speech api?

The standard statistical POS taggers, such as
the ones recommended (Brill's, OpenNLP, LingPipe)
use syntactic context to disambiguate.   (Aramorph
is the exception.)  Some of them, such as ours (LingPipe),
can return multiple answers with confidence scores.

What they can't do is determine the part-of-speech
of words in a bag of words from a query.  So whether
this will work will depend on whether the queries
come in in whole sentences.

Most of these systems are trained on newswire, too,
so they won't do as well with questions, which have
different syntactic forms in most languages.

For instance, "run home" might be a verb (run)
and noun (home), or the query might be about baseball
and it's really two nouns, "run" and "home" (not to
be confused with "home run", which is a compound
noun with an idiomatic meaning in baseball).

- Bob

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 23:06:52 2006
Return-Path: <java-user-return-24640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26405 invoked from network); 21 Nov 2006 23:06:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:06:50 -0000
Received: (qmail 25194 invoked by uid 500); 21 Nov 2006 23:06:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25164 invoked by uid 500); 21 Nov 2006 23:06:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25128 invoked by uid 99); 21 Nov 2006 23:06:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:06:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:06:40 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kALN6CtU024996
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 01:06:12 +0200
Received: from [10.142.3.12] ([10.142.3.12]) by nimitz with ESMTP
	 id mbm16hex; 22 Nov 2006 01:06:00 +0200
Message-ID: <45638662.5010407@teamware.com>
Date: Wed, 22 Nov 2006 10:06:10 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NOT queries
References: <45637A2E.6090301@teamware.com> <200611212348.00851@danielnaber.de>
In-Reply-To: <200611212348.00851@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 22 Nov 2006 01:06:12 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=-0.185,
	required 5, autolearn=not spam, BAYES_40 -0.18)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Daniel Naber wrote:
> That's correct. For the "find everything" part you can use 
> MatchAllDocsQuery.

Thanks - I hadn't noticed that Query.
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 23:20:08 2006
Return-Path: <java-user-return-24641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31339 invoked from network); 21 Nov 2006 23:20:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:20:08 -0000
Received: (qmail 55546 invoked by uid 500); 21 Nov 2006 23:20:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55478 invoked by uid 500); 21 Nov 2006 23:20:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55467 invoked by uid 99); 21 Nov 2006 23:20:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:20:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [64.90.160.18] (HELO server1.threattracker.com) (64.90.160.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:19:57 -0800
Received: from [192.168.1.98] (gate.marathonconsulting.com [66.253.5.226])
	(authenticated)
	by server1.threattracker.com (8.11.6/8.11.6) with ESMTP id kALNJdc31560
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 18:19:42 -0500
Message-ID: <45638AE2.9080103@alias-i.com>
Date: Tue, 21 Nov 2006 18:25:22 -0500
From: Bob Carpenter <carp@alias-i.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: word frequency list? (all our n-grams are belong to you)
References: <44F5D548.4010401@mindspring.com>
In-Reply-To: <44F5D548.4010401@mindspring.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Jason Pump wrote:
> Is there a large list of words and their frequency in the english 
> language? Obviously it would differ by corpus but I would like to see 
> what's already available.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

These will vary by corpus, but the best you can do now
for English on the web is Google's corpus.  Here's
their blog entry describing it:

http://googleresearch.blogspot.com/2006/08/all-our-n-gram-are-belong-to-you.html

It's collected over 1,024,908,267,229 words,
with 13,588,391 distinct words that appeared
at least 200 times.  It also includes n-grams
up to order 5.  (It's on 6 compressed DVDs!)

Hats off to Alex Franz and Thorsten Brants
for releasing this (they're two computational
linguistics researchers at Google).

Here's where to get it:

http://www.ldc.upenn.edu/Catalog/CatalogEntry.jsp?catalogId=LDC2006T13

- Bob Carpenter
   Alias-i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 23:20:34 2006
Return-Path: <java-user-return-24642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31500 invoked from network); 21 Nov 2006 23:20:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:20:31 -0000
Received: (qmail 57360 invoked by uid 500); 21 Nov 2006 23:20:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57330 invoked by uid 500); 21 Nov 2006 23:20:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57319 invoked by uid 99); 21 Nov 2006 23:20:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:20:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.226 as permitted sender)
Received: from [66.249.82.226] (HELO wx-out-0506.google.com) (66.249.82.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:20:18 -0800
Received: by wx-out-0506.google.com with SMTP id i29so20792wxd
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 15:19:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=L7TC05MoUWycNYyCjcv2CQL8KMYGdrpwmjf9V25AfwjqZ5E5W4EYyOCTwLE+HWP4teDhIVmiOmHfEBMQsIgvzTx2j9TkFo+K7u+LvmbV5d5lMe5/pqKjM0E8gciEAG2mOpRnUZ6JXYw2/frMArwr42YePydeYdFQgHnhVvMXq1U=
Received: by 10.90.101.19 with SMTP id y19mr3673374agb.1164151197789;
        Tue, 21 Nov 2006 15:19:57 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 8sm5327204nzn.2006.11.21.15.19.56;
        Tue, 21 Nov 2006 15:19:56 -0800 (PST)
Message-ID: <4563899B.1030305@gmail.com>
Date: Tue, 21 Nov 2006 18:19:55 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Limiting QueryParser
References: <45637D01.7080000@teamware.com>
In-Reply-To: <45637D01.7080000@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

if you scan the query and escape all colons (ie \:) then you should be 
good (I have not verified). Of course you will not be able to do a field 
search, but that seems to be what your after.

Antony Bowesman wrote:
> Hi,
>
> I have a search UI that allows search criteria to be input against 
> specific fields, e.g. Subject.
>
> In order to create a suitable Lucene Query, I must analyze that String 
> so that it becomes a set of Tokens which I can then turn into Terms.  
> QueryParser seems to fit the bill for that, however, it is too clever 
> as it assumes that anything suffixes with a : is a field reference.
>
> If someone enters
>
> important:conference agenda
>
> in the subject field, I don't want QP to translate this to
>
> +important:conference +defaultfield:agenda
>
> I want to end up with
>
> +subject:important +subject:conference +subject:agenda
>
> I've written something to do this, but I know it is not as clever as 
> QP as currently it can only create BooleanQueries with TermQueries and 
> cannot handle PhraseQuery, so would not handle
>
> important:"conference agenda"
>
> correctly.  Does anyone have any pointers on how to limit QueryParser 
> so that I can force it to treat what it thinks as fields as terms.
>
> Thanks
> Antony
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 23:30:23 2006
Return-Path: <java-user-return-24643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34693 invoked from network); 21 Nov 2006 23:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:30:22 -0000
Received: (qmail 76041 invoked by uid 500); 21 Nov 2006 23:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76010 invoked by uid 500); 21 Nov 2006 23:30:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75999 invoked by uid 99); 21 Nov 2006 23:30:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:30:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:30:11 -0800
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15B19F7F@mailer.syr.edu>; Tue, 21 Nov 2006 18:29:50 -0500
Message-ID: <45638BEE.7000901@syr.edu>
Date: Tue, 21 Nov 2006 18:29:50 -0500
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Limiting QueryParser
References: <45637D01.7080000@teamware.com> <4563899B.1030305@gmail.com>
In-Reply-To: <4563899B.1030305@gmail.com>
X-Enigmail-Version: 0.94.1.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

static String QueryParser.escape(String) should do the trick:

<http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/QueryParser.html#escape(java.lang.String)>

Look at the bottom of the below-linked page for the list of characters
that the above method will escape:

<http://lucene.apache.org/java/docs/queryparsersyntax.html>

Steve

Mark Miller wrote:
> if you scan the query and escape all colons (ie \:) then you should be
> good (I have not verified). Of course you will not be able to do a field
> search, but that seems to be what your after.
> 
> Antony Bowesman wrote:
>> Hi,
>>
>> I have a search UI that allows search criteria to be input against
>> specific fields, e.g. Subject.
>>
>> In order to create a suitable Lucene Query, I must analyze that String
>> so that it becomes a set of Tokens which I can then turn into Terms. 
>> QueryParser seems to fit the bill for that, however, it is too clever
>> as it assumes that anything suffixes with a : is a field reference.
>>
>> If someone enters
>>
>> important:conference agenda
>>
>> in the subject field, I don't want QP to translate this to
>>
>> +important:conference +defaultfield:agenda
>>
>> I want to end up with
>>
>> +subject:important +subject:conference +subject:agenda
>>
>> I've written something to do this, but I know it is not as clever as
>> QP as currently it can only create BooleanQueries with TermQueries and
>> cannot handle PhraseQuery, so would not handle
>>
>> important:"conference agenda"
>>
>> correctly.  Does anyone have any pointers on how to limit QueryParser
>> so that I can force it to treat what it thinks as fields as terms.
>>
>> Thanks
>> Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 23:35:32 2006
Return-Path: <java-user-return-24644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36313 invoked from network); 21 Nov 2006 23:35:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:35:31 -0000
Received: (qmail 85452 invoked by uid 500); 21 Nov 2006 23:35:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85119 invoked by uid 500); 21 Nov 2006 23:35:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 28939 invoked by uid 99); 21 Nov 2006 22:24:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Message-ID: <45637D23.7060407@nuix.com>
Date: Wed, 22 Nov 2006 09:26:43 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061120)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NOT queries
References: <45637A2E.6090301@teamware.com>
In-Reply-To: <45637A2E.6090301@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Antony Bowesman wrote:
> Hi,
> 
> I'm writing a mapping mechanism between an existing search interface and 
> Lucene and wondered how to support a single NOT/- query.
> 
> Given the query "-attribute", then from an ealier comment by Chris 
> Hostetter where he says "you can't have a negative clause in isolation 
> by itself", I assume that you first have to create a BooleanClause that 
> finds everything and then another Clause that removes the "attribute".
> 
> Is this right or is there another way to do it?

That's certainly how we do it... a BooleanClause with a 
MatchAllDocsQuery as default and the desired prohibited query.

You can subclass QueryParser to make this happen automatically (and I 
believe I've posted code about this at least once on the list already.)

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 23:36:42 2006
Return-Path: <java-user-return-24645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37045 invoked from network); 21 Nov 2006 23:36:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:36:41 -0000
Received: (qmail 88244 invoked by uid 500); 21 Nov 2006 23:36:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88222 invoked by uid 500); 21 Nov 2006 23:36:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88210 invoked by uid 99); 21 Nov 2006 23:36:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:36:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=ADVANCE_FEE_1
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [38.99.0.71] (HELO mail.guba.com) (38.99.0.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:36:31 -0800
Received: (qmail 7255 invoked from network); 22 Nov 2006 00:36:07 -0000
Received: from adsl-67-126-47-209.dsl.pltn13.pacbell.net (HELO ?192.168.213.232?) (smtp@67.126.47.209)
  by mail.guba.com with ESMTPA; 22 Nov 2006 00:36:07 -0000
From: Dennis Watson <dennis@guba.com>
Organization: Guba.com
To: java-user@lucene.apache.org
Subject: Re: Sorting on distance from a long/lat
Date: Tue, 21 Nov 2006 15:36:17 -0800
User-Agent: KMail/1.8.2
Cc: Chris Hostetter <hossman_lucene@fucit.org>,
 spamsucks <spamsucks@rhoderunner.com>
References: <12378468.941164049539891.JavaMail.root@dell.rhoderunner.com> <200611210742.29696.dennis@guba.com> <Pine.LNX.4.58.0611211057140.32186@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0611211057140.32186@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611211536.18086.dennis@guba.com>
X-Virus-Checked: Checked by ClamAV on apache.org

It is similar to the two Range Filter approach except my way is precomputed 
and probably faster than filtering through a potentially large result set.  
Also I can quickly compute a rough max distance between two any lat, lon 
pairs by compairing thier X1.X2.X3... path.


Dennis Watson
Sr SW Engineer
GUBA.com


On Tuesday 21 November 2006 11:05, Chris Hostetter wrote:
> I'm not really sure what an approach like this gaines you ... it provides
> a mechanism for ensuring that the lat/lon of all results are within a
> bounding box arround your start location -- but those bounding boxes
> are fixed when building your index.
>
> couldn't you achieve the same thing using a "lat" field, a "lon" field
> and two RangeFilters? ... except now you get variable sized/centered
> bounding boxes?
>
> : Date: Tue, 21 Nov 2006 07:42:29 -0800
> : From: Dennis Watson <dennis@guba.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Cc: spamsucks <spamsucks@rhoderunner.com>
> : Subject: Re: Sorting on distance from a long/lat
> :
> : Hi,
> :
> : I apologize if this is slightly off topic.  I have not implemented this,
> : but the idea came to me after reading another post about measuring
> : distance in lucene.  It may be completely impractical, however it seems
> : it COULD work at least if the area to be indexed could be constrained.
> :
> : What if you divided the earth up into lets say 100 square blocks.  Each
> : block would have sides of length x1 with an area x1^2.  You could number
> : those blocks 0 - 99.  Then you could divide each of those blocks into 100
> : blocks with sides of length x2 = x1 / 10 and number these 0 - 99 as well.
> :  You could do this until you had blocks with sides of length xn and area
> : xn^2.
> :
> : Each one of these blocks would have four corners with a lat and lon.  It
> : would be fairly easy to tell if one block were in another block.  It
> : should be fairly easy to tell which set of boxes any lat, lon pair
> : belonged to.
> :
> : It seems then you could specify locations almost like IP addresses:
> :
> :    X1.X2.X3...Xn
> :
> : where X1 is the 0-99 number of the first largest set of blocks and X2 is
> : the 0-99 number of the next smaller set of blocks inside the first X1 box
> : and so on.
> :
> : You could search in lucene for objects within a certain proximity with a
> : prefix search:
> :
> :    X1.X2.*
> :    X1.X2.X3.*
> :
> : Moreover you would know that the longer the path that matches, the closer
> : those objects are (it is fractal in nature).  If you needed more
> : granularity you could do a prefix search like this down to the smallest
> : granularity you have and then perform a greatcircle distance calculation
> : on the the results to see if they are close enough.
> :
> : Of course there might be too many squares to cover the whole Earth.  You
> : will want to pick a number of boxes which is a power of two so there are
> : a "square" number of squares.  I think this enables the fractal nature
> : described above. You would want the corners of the squares to land on
> : predicable lat, lon points.  This may be done more easily with some
> : measurement systems than another.
> :
> : Just my $.02...
> :
> :
> : Dennis Watson
> : Sr SW Engineer
> : GUBA.com
> :
> : On Monday 20 November 2006 11:05, spamsucks wrote:
> : > I am successfully able to search for "nearbys" given a longitude and a
> : > latitude.  The basic summary of how I do this is that I add 1000 to the
> : > long/lat values and use a RangeFilter in my query.
> : >
> : > In my display results, I display the results ordered by distance from
> : > the original long/lat.  What I do is calulate the distance for every
> : > document in my result from the original long/lat and perform a sort of
> : > the distance.
> : >
> : > Doing the sort this way (calculating the distances for all results
> : > documents) feels like I am being inefficient and wasteful with my CPU
> : > cycles.  In most cases, I am only displaying the closest 10 documents,
> : > but I need to calculate the distance for all documents (potentially
> : > 1000) in order to come up with the 10 closest.
> : >
> : > Has anyone wrestled with these questions before?  Is there another
> : > approache that I can take?
> : >
> : > Here is my current working implementation, so you can see what I am
> : > describing.  The long/lat is stored in a database that I use to build
> : > up my lucene query/filters
> : >
> : > http://www.visitpa.com/visitpa/visitNearbyActivities.pa?type=dining&nam
> : >e=Co lor+Me+MineThanks,Phillip
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 21 23:55:07 2006
Return-Path: <java-user-return-24646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43258 invoked from network); 21 Nov 2006 23:55:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2006 23:55:05 -0000
Received: (qmail 26887 invoked by uid 500); 21 Nov 2006 23:55:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26852 invoked by uid 500); 21 Nov 2006 23:55:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26838 invoked by uid 99); 21 Nov 2006 23:55:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:55:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 66.249.82.224 as permitted sender)
Received: from [66.249.82.224] (HELO wx-out-0506.google.com) (66.249.82.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 15:54:54 -0800
Received: by wx-out-0506.google.com with SMTP id i29so29470wxd
        for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 15:54:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=QOJkr1a785ddOgR/I8oHYa24dX5upDjgydwpe+3+HiyCmM2fpPgLQc8HZk58lPzg3HVtk8QY1WEvEzWbi9ngAb2EqiaYjIaDFsMQiVsEphkiy0YKsOUsJGcNDwVv+5ov7OFuSoa7Lqa3pG1bgWHbFfnNETGqifcUO1477q7Bb5U=
Received: by 10.70.68.11 with SMTP id q11mr2016756wxa.1164153273449;
        Tue, 21 Nov 2006 15:54:33 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 15sm33842357nzn.2006.11.21.15.54.32;
        Tue, 21 Nov 2006 15:54:32 -0800 (PST)
Message-ID: <456391B7.2070206@gmail.com>
Date: Tue, 21 Nov 2006 18:54:31 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Limiting QueryParser
References: <45637D01.7080000@teamware.com> <4563899B.1030305@gmail.com> <45638BEE.7000901@syr.edu>
In-Reply-To: <45638BEE.7000901@syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Keep in mind that this would not work for

important:"conference agenda"

as the quotes would be escaped and queryparser will not generate a phrase query

- Mark


Steven Rowe wrote:
> static String QueryParser.escape(String) should do the trick:
>
> <http://lucene.apache.org/java/docs/api/org/apache/lucene/queryParser/QueryParser.html#escape(java.lang.String)>
>
> Look at the bottom of the below-linked page for the list of characters
> that the above method will escape:
>
> <http://lucene.apache.org/java/docs/queryparsersyntax.html>
>
> Steve
>
> Mark Miller wrote:
>   
>> if you scan the query and escape all colons (ie \:) then you should be
>> good (I have not verified). Of course you will not be able to do a field
>> search, but that seems to be what your after.
>>
>> Antony Bowesman wrote:
>>     
>>> Hi,
>>>
>>> I have a search UI that allows search criteria to be input against
>>> specific fields, e.g. Subject.
>>>
>>> In order to create a suitable Lucene Query, I must analyze that String
>>> so that it becomes a set of Tokens which I can then turn into Terms. 
>>> QueryParser seems to fit the bill for that, however, it is too clever
>>> as it assumes that anything suffixes with a : is a field reference.
>>>
>>> If someone enters
>>>
>>> important:conference agenda
>>>
>>> in the subject field, I don't want QP to translate this to
>>>
>>> +important:conference +defaultfield:agenda
>>>
>>> I want to end up with
>>>
>>> +subject:important +subject:conference +subject:agenda
>>>
>>> I've written something to do this, but I know it is not as clever as
>>> QP as currently it can only create BooleanQueries with TermQueries and
>>> cannot handle PhraseQuery, so would not handle
>>>
>>> important:"conference agenda"
>>>
>>> correctly.  Does anyone have any pointers on how to limit QueryParser
>>> so that I can force it to treat what it thinks as fields as terms.
>>>
>>> Thanks
>>> Antony
>>>       
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 00:04:02 2006
Return-Path: <java-user-return-24647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45939 invoked from network); 22 Nov 2006 00:04:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 00:04:01 -0000
Received: (qmail 47529 invoked by uid 500); 22 Nov 2006 00:04:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47496 invoked by uid 500); 22 Nov 2006 00:04:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47485 invoked by uid 99); 22 Nov 2006 00:04:04 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 16:04:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 16:03:50 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1D01930EFC17; Tue, 21 Nov 2006 19:03:30 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 8E73B30EFC16
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 19:03:28 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <456381A9.2000907@alias-i.com>
References: <373399D6389D8C42B4EAD9BE2B6B5C5F070D1529@tormail01.cihi.ca> <456381A9.2000907@alias-i.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <02621271-05B0-4AC9-88E5-957920E8B6A8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: does anyone know of a 'smart' categorizing text pattern finder?
Date: Tue, 21 Nov 2006 19:03:26 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Nov 21, 2006, at 5:46 PM, Bob Carpenter wrote:
> LingPipe in Action.

Now that's a book I'd love to own!





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 00:30:26 2006
Return-Path: <java-user-return-24648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54146 invoked from network); 22 Nov 2006 00:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 00:30:25 -0000
Received: (qmail 89885 invoked by uid 500); 22 Nov 2006 00:30:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89862 invoked by uid 500); 22 Nov 2006 00:30:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89851 invoked by uid 99); 22 Nov 2006 00:30:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 16:30:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 16:30:13 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3732B5B77A; Tue, 21 Nov 2006 16:29:38 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2B4AD7F403
	for <java-user@lucene.apache.org>; Tue, 21 Nov 2006 16:29:38 -0800 (PST)
Date: Tue, 21 Nov 2006 16:29:38 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Limiting QueryParser
In-Reply-To: <45637D01.7080000@teamware.com>
Message-ID: <Pine.LNX.4.58.0611211626560.22671@hal.rescomp.berkeley.edu>
References: <45637D01.7080000@teamware.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: important:conference agenda

: I want to end up with
:
: +subject:important +subject:conference +subject:agenda
:
: I've written something to do this, but I know it is not as clever as QP as
: currently it can only create BooleanQueries with TermQueries and cannot handle
: PhraseQuery, so would not handle
:
: important:"conference agenda"

you're on a slippery slope .. basically what you are ssaying is you want
":" to be treated as a field seperater *some* ofthe time, and as a
whitespace hcaracter the rest of the time ... but it's not really clear if
the rules you want to use are deterministic -- can you describe what you
want to do to an *arbitrary* input string?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 02:31:30 2006
Return-Path: <java-user-return-24649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22172 invoked from network); 22 Nov 2006 02:31:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 02:31:29 -0000
Received: (qmail 36330 invoked by uid 500); 22 Nov 2006 02:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36300 invoked by uid 500); 22 Nov 2006 02:31:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36289 invoked by uid 99); 22 Nov 2006 02:31:31 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 18:31:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 18:31:18 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gmht3-0004Pu-QP
	for java-user@lucene.apache.org; Tue, 21 Nov 2006 18:30:57 -0800
Message-ID: <7484264.post@talk.nabble.com>
Date: Tue, 21 Nov 2006 18:30:57 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to search string with words
In-Reply-To: <359a92830611200759r133971b9q6907020b1088de47@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7440978.post@talk.nabble.com> <359a92830611200759r133971b9q6907020b1088de47@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys,

   I have this problem searching all fields (metadata) using SpanFirstQuery.

      My scenario is if I just searching on one thing using SpanFirstQuery
is not a problem. However, if I would have to search everything than I will
not have any result return.

      For example, I search based on ALL (id, name, desc, owner, created
by), I put OR in between the query and it looks like id:1 OR name:first
thing OR desc:first thing OR owner:first thing OR createdBy:first thing.
When I sysout I saw the above query listed within my spanNear and that cause
no result. If I just searching on name:first thing then I don't have any
problem.

      Is there any solution for my case?

      Thanks.

regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/how-to-search-string-with-words-tf2668490.html#a7484264
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 03:35:14 2006
Return-Path: <java-user-return-24650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31138 invoked from network); 22 Nov 2006 03:35:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 03:35:13 -0000
Received: (qmail 94669 invoked by uid 500); 22 Nov 2006 03:35:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94644 invoked by uid 500); 22 Nov 2006 03:35:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94633 invoked by uid 99); 22 Nov 2006 03:35:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 19:35:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 19:35:02 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kAM3YaWZ011110
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 05:34:36 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mbm5y5p1; 22 Nov 2006 05:34:00 +0200
Message-ID: <4563C54A.2010907@teamware.com>
Date: Wed, 22 Nov 2006 14:34:34 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Limiting QueryParser
References: <45637D01.7080000@teamware.com> <Pine.LNX.4.58.0611211626560.22671@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0611211626560.22671@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 22 Nov 2006 05:34:37 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Hostetter wrote:
> : important:conference agenda
> 
> : I want to end up with
> :
> : +subject:important +subject:conference +subject:agenda
> :
> : I've written something to do this, but I know it is not as clever as QP as
> : currently it can only create BooleanQueries with TermQueries and cannot handle
> : PhraseQuery, so would not handle
> :
> : important:"conference agenda"
> 
> you're on a slippery slope .. basically what you are ssaying is you want
> ":" to be treated as a field seperater *some* ofthe time, and as a
> whitespace hcaracter the rest of the time ... but it's not really clear if
> the rules you want to use are deterministic -- can you describe what you
> want to do to an *arbitrary* input string?

I have a number of UI search fields that are field specific, e.g. Subject, 
Sender, amongst others as well as a "free form" google style field where 
anything can be entered.

On the field specific fields, I want to control the parsing to ensure that the 
parser will not interpret fields in the user entered string, so in those fields 
it treats : as : all of the time.  However, in the "free form" field, anything 
goes and : is a field delimeter all of the time.  So, a user can seach for

Subject  - important:conference agenda
FieldA   - blah:abc
FreeForm - fieldX:Xdata fieldY:Ydata

in the above, the Subject and Field A would have been indexed using configurable 
analysers and would have indexed "important" and "blah", so these are relevant 
to the search.

This should come out as a

(+subject:important +subject:conference +subject:agenda) (+fielda:blah 
+fielda:abc) (+fieldx:xdata +fieldy:ydata)

My framework allows for field specific parsers as well as field specific 
analysers, so having a different query parser for the named fields and the free 
form field is fine.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 04:01:54 2006
Return-Path: <java-user-return-24651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34252 invoked from network); 22 Nov 2006 04:01:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 04:01:53 -0000
Received: (qmail 17728 invoked by uid 500); 22 Nov 2006 04:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17697 invoked by uid 500); 22 Nov 2006 04:01:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17664 invoked by uid 99); 22 Nov 2006 04:01:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 20:01:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 21 Nov 2006 20:01:43 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kAM41GOj012992
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 06:01:16 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mbm617b5; 22 Nov 2006 06:01:00 +0200
Message-ID: <4563CB7C.6000508@teamware.com>
Date: Wed, 22 Nov 2006 15:01:00 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Limiting QueryParser
References: <45637D01.7080000@teamware.com> <4563899B.1030305@gmail.com>
In-Reply-To: <4563899B.1030305@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 22 Nov 2006 06:01:16 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> if you scan the query and escape all colons (ie \:) then you should be 
> good (I have not verified). Of course you will not be able to do a field 
> search, but that seems to be what your after.

Thanks for that suggestion.  However, a standard un-escaped parse gives

Input - important:conference agenda
Query - important:conference body:agenda

Escaping the : gives

Input - important\:conference agenda
Query - subject:"important conference" subject:agenda

which has caused it to generate a PhraseQuery for important conference which is 
incorrect.

The following

Input - important\:"conference agenda"
Query - subject:important subject:"conference agenda"

is correct.  Is that a bug in the middle one?
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 08:43:54 2006
Return-Path: <java-user-return-24652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2345 invoked from network); 22 Nov 2006 08:43:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 08:43:53 -0000
Received: (qmail 94657 invoked by uid 500); 22 Nov 2006 08:43:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94602 invoked by uid 500); 22 Nov 2006 08:43:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94590 invoked by uid 99); 22 Nov 2006 08:43:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 00:43:53 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lukas.vlcek@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 00:43:41 -0800
Received: by nf-out-0910.google.com with SMTP id n28so427629nfc
        for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 00:43:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=GrbG+w0YvFps1JOBBhwpxMhnvKqeoBL4AWKpZ3kfGYs71LI+jqiOP0b/HJZrpRsIZl8djkr6JllInTHW7ffDcTxZgwkkwRoIqIBD9G4VjhlQINkc4WC5t0hn2RaPVQ/2yj9TVZrk1325VgRGhJ6wW3Ry1Osp9guRaUbtZ2sEjsQ=
Received: by 10.82.126.5 with SMTP id y5mr1185197buc.1164184999808;
        Wed, 22 Nov 2006 00:43:19 -0800 (PST)
Received: by 10.82.147.11 with HTTP; Wed, 22 Nov 2006 00:43:19 -0800 (PST)
Message-ID: <52c3ddca0611220043s2144afe2tf8ddf67d25fe8471@mail.gmail.com>
Date: Wed, 22 Nov 2006 09:43:19 +0100
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: Fwd: Hibernate Lucene trademark issues
In-Reply-To: <e8aa138c0611210241j5c982b10p9ed5cbfb76e1b288@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31310_28172585.1164184999768"
References: <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com>
	 <455F1706.50905@hibernate.org> <455F38BC.1040104@hibernate.org>
	 <7433312.post@talk.nabble.com>
	 <e8aa138c0611210241j5c982b10p9ed5cbfb76e1b288@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31310_28172585.1164184999768
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you all for your time and writing!
This will really help me.
Lukas

On 11/21/06, adasal <adam.saltiel@gmail.com> wrote:
>
> Thanks for link and your write up.
>
> On 19/11/06, Shay Banon <kimchy@gmail.com> wrote:
> >
> >
> > Since I do not want to invade Lucene user list regarding a discussion
> > about
> > Compass and Hiberante Search, but I still think that it is something
> that
> > needs to get answered, here is a link to my blog post discussing this:
> > http://jroller.com/page/kimchy?entry=hibernate_search_lucene .
> >
> > Cheers,
> > Shay
> >
> >
> > Emmanuel Bernard wrote:
> > >
> > > I forgot a couple of things.
> > > I do not think that all your object properties belongs to the Index,
> and
> > > some of them will be put in the index with information degradation (ie
> > > store year/month rather than the whole date). So I do not believe
> there
> > > is a bidirectional relationship between your domain model and your
> index
> > > documents (for size, efficiency and accuracy purpose).
> > > For that matter, Compass cannot really truly index your database
> backed
> > > domain model and give back the object to you. Hibernate Search can
> > > because it delegate the object hydration to Hibernate Core.
> > >
> > > Of course that's my opinions, and some people can disagree ;-)
> > >
> > > Emmanuel Bernard wrote:
> > >>
> > >> Hi,
> > >> I am not really familiar with Compass I haven't really looked at the
> > >> code, Hibernate Lucene (now renamed Hibernate Search) started from a
> > >> user demand. I had some in depth discussions though, with some users
> > >> that evaluated both Compass and Hibernate Search that helped me drive
> > >> its design.
> > >>
> > >> Here are the arguments in favor of Hibernate Search:
> > >> 1. not Yet Another API to deal with your domain model
> > >> If you already use an ORM (JPA or Hibernate), you are familiar with
> > >> those APIs. Using compass implies that you have to use a different
> set
> > >> of API to play with the object lifecycle (CRUD).
> > >> Hibernate Search is integrated with the org.hibernate.Queryinterface,
> > >> and all the CUD operations on the index are triggered from the
> > Hibernate
> > >> CUD operations.
> > >>
> > >> 2. Metadata
> > >> Metadata are minimal and fit particularly well through annotations,
> so
> > >> you don't have yet another XML representation of ther same domain
> model
> >
> > >> (Compass might now have annotations support, you'll have to check)
> > >>
> > >> 3. it's all about managed objects (ie managed by the Session or the
> > >> EntityManager)
> > >> Hibernate Search gives you back objects managed by the Session, so
> any
> > >> change made to them will (by default) be synchronized with the
> > database,
> > >> this is the normal behavior of an ORM, but is not what you have from
> a
> > >> Compass search.
> > >> This approach fits well with the JBoss Seam approach of having all
> the
> > >> application around the domain model and EJB 3.0
> > >>
> > >> 4. Not too much abstraction
> > >>  From what I've heard, Compass borrow a lot of its design /
> classnames
> > >> from Hibernate/Spring/Lucene. Compass tries to abstract those 3
> > >> techlnologies (at least Hibernate and Lucene), by providing its own
> > >> infrastructure.
> > >> What am trying to do with Hibernate Search is to keep the abstraction
> > as
> > >> light as possible. For advanced Lucene query you'll have to use pure
> > >> Lucene APIs, which is possible / natural with Hibernate Search
> > >>
> > >>
> > >> I invite you to check these links (which I expect to release soon)
> > >>
> >
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> > >> and for the future (but flexible)
> > >>
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00393.html
> >
> > >>
> > >> HTH
> > >>
> > >> Emmanuel
> > >>
> > >> Lukas Vlcek wrote:
> > >> >
> > >> > Emanuael,
> > >> > I would be glad to hear your answer here (on user list).
> > >> > Regards,
> > >> > Lukas
> > >> >
> > >> > ---------- Forwarded message ----------
> > >> > From: Emmanuel Bernard <emmanuel@hibernate.org >
> > >> > Date: Nov 13, 2006 11:07 PM
> > >> > Subject: Re: Hibernate Lucene trademark issues
> > >> > To: java-dev@lucene.apache.org, lukas.vlcek@gmail.com
> > >> >
> > >> > Hi Lukas,
> > >> > I'd be happy to answer your question, but I don't think Lucene dev
> is
> > >> > the appropriate area for that kind of discussion.
> > >> > let's move this discussion here
> > >> > http://forum.hibernate.org/viewforum.php?f=9 (or in the Lucene User
> > >> list
> > >> > if you want to).
> > >> >
> > >> > Emmanuel
> > >> >
> > >> > Lukas Vlcek wrote:
> > >> > >
> > >> > > Hi Emmanuel,
> > >> > >
> > >> > > I am interested in you solution. I have a plan to use lucene and
> > >> > hibernate
> > >> > > in my next project and search will play very important role
> > >> > > (*stake-holder*
> > >> > > functionality). I have heard of
> > >> > > comapss< http://www.opensymphony.com/compass/>project which
> > introduces
> > >> > > searching (lucene) layer on top of hibernate also.
> > >> > > I haven't had a change to study it in detail yet.
> > >> > >
> > >> > > Do you think you could give me some high level comments about
> your
> > >> > > motivation for implementing lucene search directly in hibernate
> > code,
> > >> > > couldn't you just use compass project? Is there any fundamental
> > >> > difference
> > >> > > between your approach and comapss?
> > >> > >
> > >> > > Many thanks,
> > >> > > Lukas
> > >> > >
> > >> > > On 11/6/06, Emmanuel Bernard < emmanuel@hibernate.org> wrote:
> > >> > > >
> > >> > > > Hi guys,
> > >> > > > I'm Emmanuel Bernard from JBoss.
> > >> > > > I'm the current lead developer of the Hibernate Lucene
> > integration
> > >> > > module.
> > >> > > > The goal of this project is to facilitate the integration of a
> > >> search
> > >> > > > capability to Hibernate based applications. And guess what, I
> use
> >
> > >> > Lucene
> > >> > > > ;-)
> > >> > > >
> > >> > > >
> > >> > >
> > >> >
> > >>
> >
> http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
> > >> > > >
> > >> > >
> > >> >
> > >>
> >
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> > >> > > >
> > >> > > > I realized this week end that the 'Hibernate Lucene' name might
> > >> > infringe
> > >> > > > the Apache Lucene trademark policy.
> > >> > > > http://www.cafepress.com/lucene/ seems to state that Lucene is
> a
> > >> > > > trademark of the Apache Software Foundation (nice golf shirt
> BTW)
> >
> > >> > > > But I wasn't able to find any document explaining the fair use
> > >> of the
> > >> > > > Lucene brand (the license as well as the notice seem to be
> silent
> > >> on
> > >> > > > this subject).
> > >> > > >
> > >> > > > Even if Lucene in not trademarked, what do you consider a fair
> > >> use of
> > >> > > > your brand? I'm happy to rename my project, I guess the initial
> > >> choice
> > >> > > > was more a tribute to your project than anything else.
> > >> > > >
> > >> > > > Emmanuel
> > >> > > >
> > >> > > > PS: please forward this email to the appropriate persons if
> this
> > >> > is not
> > >> > > > the case already (PMC or whatever)
> > >> > > >
> > >> > > >
> > >> > > >
> > >> ---------------------------------------------------------------------
> > >> > > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > >> > > > For additional commands, e-mail:
> java-dev-help@lucene.apache.org
> > >> > > >
> > >> > > >
> > >> > >
> > >> >
> > >>
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> >
> > --
> > View this message in context:
> >
> http://www.nabble.com/Fwd%3A-Hibernate-Lucene-trademark-issues-tf2651281.html#a7433312
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_31310_28172585.1164184999768--

From java-user-return-24653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 08:52:40 2006
Return-Path: <java-user-return-24653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5154 invoked from network); 22 Nov 2006 08:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 08:52:40 -0000
Received: (qmail 9514 invoked by uid 500); 22 Nov 2006 08:52:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8628 invoked by uid 500); 22 Nov 2006 08:52:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8617 invoked by uid 99); 22 Nov 2006 08:52:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 00:52:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 00:52:30 -0800
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id kAM8q6ER001461
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 10:52:06 +0200
Message-ID: <45640FB7.90209@sirma.bg>
Date: Wed, 22 Nov 2006 10:52:07 +0200
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Querying performance decrease in 1.9.1 and 2.0.0
References: <45632010.1070407@sirma.bg> <45632EB9.6060806@sirma.bg> <c68e39170611210859l4619f169l35ad1c2e2fb08bb0@mail.gmail.com> <200611211933.46040.paul.elschot@xs4all.nl>
In-Reply-To: <200611211933.46040.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Paul,
We are working on delivering the next release by the end of the week so 
I have to take care of 2 or 3 issues before I try the nightly build.
I promise to try it and report the results here.

Best,
Stanislav

Paul Elschot wrote:
> Stanislav,
>
> Could you also try a nightly build to test the later performance improvement
> on BooleanScorer2?  The nightly builds are here:
> http://people.apache.org/builds/lucene/java/nightly/
> The jar is called lucene-core-nightly.jar in the .tar.gz build.
>
> It's not likely that this is faster than the 1.4 BooleanScorer, 
> but one never knows.
>
> Regards,
> Paul Elschot
>
>
> On Tuesday 21 November 2006 17:59, Yonik Seeley wrote:
>   
>> On 11/21/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
>>     
>>> Switch to the old scorer (via BooleanQuery.setUseScorer14(true) )
>>> solved the performance issue - now Lucene 1.9.1 & 2.0.0 perform on the
>>> same load test just as 1.4.3 does
>>>
>>> Thanks a lot Yonik!
>>>
>>> Any chance there exists a non-professional explanation what's the
>>> difference between old and new boolean scorers?
>>>       
>> The original BooleanScorer was a bucket-based scorer that could
>> deliver docs out of order and thus restricted how it could be used.
>> It also had a limitation of 32 required or prohibited clauses (because
>> of an int bitmask).
>>
>> BooleanScorer2 removes these limitations, and uses skipTo() where
>> applicable on sub-scorers.
>>
>> -Yonik
>> http://incubator.apache.org/solr Solr, the open-source Lucene search server
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 09:15:51 2006
Return-Path: <java-user-return-24654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11175 invoked from network); 22 Nov 2006 09:15:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 09:15:49 -0000
Received: (qmail 40513 invoked by uid 500); 22 Nov 2006 09:15:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40476 invoked by uid 500); 22 Nov 2006 09:15:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40464 invoked by uid 99); 22 Nov 2006 09:15:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 01:15:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 01:15:37 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2336F30EFC16; Wed, 22 Nov 2006 04:15:17 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.3] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 9FE6430EFC16
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 04:15:09 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4563C54A.2010907@teamware.com>
References: <45637D01.7080000@teamware.com> <Pine.LNX.4.58.0611211626560.22671@hal.rescomp.berkeley.edu> <4563C54A.2010907@teamware.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3CCDA72B-667B-4EC7-B4C0-EAF80842C87B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Limiting QueryParser
Date: Wed, 22 Nov 2006 04:15:07 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Nov 21, 2006, at 10:34 PM, Antony Bowesman wrote:
> On the field specific fields, I want to control the parsing to  
> ensure that the parser will not interpret fields in the user  
> entered string, so in those fields it treats : as : all of the  
> time.  However, in the "free form" field, anything goes and : is a  
> field delimeter all of the time.  So, a user can seach for
>
> Subject  - important:conference agenda
> FieldA   - blah:abc
> FreeForm - fieldX:Xdata fieldY:Ydata
>
> in the above, the Subject and Field A would have been indexed using  
> configurable analysers and would have indexed "important" and  
> "blah", so these are relevant to the search.
>
> This should come out as a
>
> (+subject:important +subject:conference +subject:agenda)  
> (+fielda:blah +fielda:abc) (+fieldx:xdata +fieldy:ydata)
>
> My framework allows for field specific parsers as well as field  
> specific analysers, so having a different query parser for the  
> named fields and the free form field is fine.

It doesn't seem like you need a "parser" at all for your field- 
specific search fields.  Simply tokenize, using a Lucene Analyzer,  
the text field and build up a BooleanQuery of all the tokens.

QueryParser is over prescribed - and is often not the best fit for  
the job.  It's only a few lines of code to tokenize (look at the  
QueryParser code in how it creates a PhraseQuery, for example) and  
build a Query from the tokens.

If you need to support +/-/AND/OR syntax in your field-specific  
inputs that's a different story - though your example does not show  
this need.  If so, copying the QueryParser.jj file and removing the  
"field:" syntax and fixing all created Query objects to a specified  
single field might be the trick.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 12:13:57 2006
Return-Path: <java-user-return-24655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60599 invoked from network); 22 Nov 2006 12:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 12:13:54 -0000
Received: (qmail 10689 invoked by uid 500); 22 Nov 2006 12:13:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10670 invoked by uid 500); 22 Nov 2006 12:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10659 invoked by uid 99); 22 Nov 2006 12:13:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 04:13:54 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Nov 2006 04:13:42 -0800
Received: (qmail 751 invoked from network); 22 Nov 2006 12:09:47 -0000
Received: from unknown (HELO bhavin) (172.16.3.42)
  by mailserver with SMTP; 22 Nov 2006 12:09:47 -0000
Message-ID: <007901c70e31$bd53f190$970310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>,
	"Erick Erickson" <erickerickson@gmail.com>
References: <002001c70d41$2585ceb0$970310ac@bhavin> <359a92830611210531kc3bb5a1h4765a59ca5b9d0cb@mail.gmail.com> <007c01c70d7d$c656f850$970310ac@bhavin> <359a92830611210728g328155f0mcca29a5c01779bda@mail.gmail.com>
Subject: Re: is there any way to find unique records ?
Date: Wed, 22 Nov 2006 17:58:36 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

Thanks for your help...
I have successfully implemented using custom HitCollector....

- Bhavin pandya

----- Original Message ----- 
From: "Erick Erickson" <erickerickson@gmail.com>
To: <java-user@lucene.apache.org>; "Bhavin Pandya" <bhavinp@rediff.co.in>
Sent: Tuesday, November 21, 2006 8:58 PM
Subject: Re: is there any way to find unique records ?


> Ok, I think I get it now. You're right that you probably don't want to
> iterate the Hits object since that has performance issues once you get
> beyond 100 docs or so. Although, I don't know how big your result sets 
> are.
> If they are guaranteed to be small, this may not matter.
>
> I'm guessing you want to implement a custom HitCollector. That has it's 
> own
> cautions about calling, say, IndexReader.document(id) for each hit, so you
> probably want to use TermDocs object. seek() and skipTo() and doc() are 
> your
> friends. Although I'd try the simple way of just calling
> IndexReader.document(id) first just to see if the performance was
> acceptable. Be sure you're looking at a truly representative data set 
> though
> <G>...
>
> Hope this helps
> Erick
>
> On 11/21/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>>
>> Hi Erick,
>>
>> > If your asking for a list of all the unique values for a particular
>> field,
>> > see TermDocs and/or TermEnum which will allow you to look at, say, all
>> the
>> > values stored for some field. A trick here is to seek (new 
>> > Term("field",
>> > ""));. By putting nothing in the value, you effectively enumerate them
>> > all,
>> > something that I didn't find obvious
>>
>> I think your above solution is very near to what i am looking for ,
>> But little bit different way...
>> here is what i am planning to do...
>>
>> Suppose my index has four fields "product-title" , "product-desc" ,
>> "category" and "FLAG"    ( Fieldname FLAG has value "true" for each n
>> every
>> doc in index ...just added for iteration purpose )
>>
>> At search time.. .
>> query =  +(product-title:nokia) +(product-desc:nokia)
>> Hits hits = searcher.search(query);
>> I want to fetch unique "category" from above hits object...
>>
>> But i dont want to iterate through Hits object....
>>
>> Now As per your suggestions,  I can do something like this...
>> TermEnum  enum = termDocs(new Term("FLAG","true")
>> But it will return enumeration of all the document which is in 
>> index...But
>> i
>> want enumeration of all the document which is relevant to "nokia"...
>> How to . . ?
>>
>> Thanks
>> - Bhavin pandya
>>
>>
>> ----- Original Message -----
>> From: "Erick Erickson" <erickerickson@gmail.com>
>> To: <java-user@lucene.apache.org>; "Bhavin Pandya" <bhavinp@rediff.co.in>
>> Sent: Tuesday, November 21, 2006 7:01 PM
>> Subject: Re: is there any way to find unique records ?
>>
>>
>> > I don't think I understand what "only unique records from a single
>> field"
>> > means.  If it's a unique value in a filed, there'll only be one 
>> > document
>> > in
>> > the hits object and there's no cost to iterating, so I doubt that's 
>> > what
>> > you
>> > mean.
>> >
>> > If your asking for a list of all the unique values for a particular
>> field,
>> > see TermDocs and/or TermEnum which will allow you to look at, say, all
>> the
>> > values stored for some field. A trick here is to seek (new 
>> > Term("field",
>> > ""));. By putting nothing in the value, you effectively enumerate them
>> > all,
>> > something that I didn't find obvious.
>> >
>> > If neither of these are close to the mark, perhaps you could provide
>> more
>> > detail.
>> >
>> > Best
>> > Erick
>> >
>> > On 11/21/06, Bhavin Pandya <bhavinp@rediff.co.in> wrote:
>> >>
>> >> Hi,
>> >> In lucene, is there any way to find only unique records from a single
>> >> field ..?
>> >>
>> >> otherwise unnecessary i have to itereate through Hits and find out
>> >> unique...
>> >>
>> >> plz help..
>> >>
>> >> - Bhavin pandya
>> >>
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 12:15:57 2006
Return-Path: <java-user-return-24656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61673 invoked from network); 22 Nov 2006 12:15:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 12:15:57 -0000
Received: (qmail 15540 invoked by uid 500); 22 Nov 2006 12:15:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15508 invoked by uid 500); 22 Nov 2006 12:15:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15497 invoked by uid 99); 22 Nov 2006 12:15:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 04:15:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 04:15:46 -0800
Received: by ug-out-1314.google.com with SMTP id k40so139295ugc
        for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 04:15:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=A/EJdnWhLdIawMXzroRJbxAh/wTdXkkDqeiBC89oGvFUY209hkJqnMDXgyUOItBsGffj6HLT0L6oB33iVQ2Oc06f2gRu8Hp8j0BxHF2YNrBj26iclgGh6Z54PHzNcYprG9yi3TPrYFdFnIz1DlCJpKeyKr4SiMSgaZG5rLrTr6I=
Received: by 10.78.128.11 with SMTP id a11mr7684643hud.1164197724474;
        Wed, 22 Nov 2006 04:15:24 -0800 (PST)
Received: by 10.78.200.9 with HTTP; Wed, 22 Nov 2006 04:15:24 -0800 (PST)
Message-ID: <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com>
Date: Wed, 22 Nov 2006 13:15:24 +0100
From: jm <jmuguruza@gmail.com>
To: "Wolfgang Hoschek" <wolfgang.hoschek@mac.com>
Subject: Re: RAMDirectory vs MemoryIndex
Cc: java-user@lucene.apache.org
In-Reply-To: <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
	 <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com>
	 <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com>
	 <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

checking one last thing, just in case...

as I mentioned, I have previously indexed the same document in another
index (for another purpose), as I am going to use the same analyzer,
would it be possible to avoid analyzing the doc again?

I see IndexWriter.addDocument() returns void, so it does not seem to
be an easy way to do that no?

thanks

On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>
> On Nov 21, 2006, at 12:38 PM, jm wrote:
>
> > Ok, thanks, I'll give MemoryIndex a go, and if that is not good enoguh
> > I will explore the other options then.
>
> To get started you can use something like this:
>
> for each document D:
>      MemoryIndex index = createMemoryIndex(D, ...)
>      for each query Q:
>          float score = index.search(Q)
>         if (score > 0.0) System.out.println("it's a match");
>
>
>
>
>    private MemoryIndex createMemoryIndex(Document doc, Analyzer
> analyzer) {
>      MemoryIndex index = new MemoryIndex();
>      Enumeration iter = doc.fields();
>      while (iter.hasMoreElements()) {
>        Field field = (Field) iter.nextElement();
>        index.addField(field.name(), field.stringValue(), analyzer);
>      }
>      return index;
>    }
>
>
>
> >
> >
> > On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> >> On Nov 21, 2006, at 7:43 AM, jm wrote:
> >>
> >> > Hi,
> >> >
> >> > I have to decide between  using a RAMDirectory and MemoryIndex, but
> >> > not sure what approach will work better...
> >> >
> >> > I have to run many items (tens of thousands) against some
> >> queries (100
> >> > at most), but I have to do it one item at a time. And I already
> >> have
> >> > the lucene Document associated with each item, from a previous
> >> > operation I perform.
> >> >
> >> > From what I read MemoryIndex should be faster, but apparently I
> >> cannot
> >> > reuse the document I already have, and I have to create a new
> >> > MemoryIndex per item.
> >>
> >> A MemoryIndex object holds one document.
> >>
> >> > Using the RAMDirectory I can use only one of
> >> > them, also one IndexWriter, and create a IndexSearcher and
> >> IndexReader
> >> > per item, for searching and removing the item each time.
> >> >
> >> > Any thoughts?
> >>
> >> The MemoryIndex impl is optimized to work efficiently without reusing
> >> the MemoryIndex object for a subsequent document. See the source
> >> code. Reusing the object would not further improve performance.
> >>
> >> Wolfgang.
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 13:10:46 2006
Return-Path: <java-user-return-24657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75605 invoked from network); 22 Nov 2006 13:10:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 13:10:45 -0000
Received: (qmail 99117 invoked by uid 500); 22 Nov 2006 13:10:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99092 invoked by uid 500); 22 Nov 2006 13:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99081 invoked by uid 99); 22 Nov 2006 13:10:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 05:10:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 05:10:24 -0800
Received: by ug-out-1314.google.com with SMTP id k40so153144ugc
        for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 05:09:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Juvh8c4Mt6gJsrnJhx3GyZCSYfrhJ1h17ofR4cHRACy3MyY1G1DnfDFk+SC+yT3y6uFlx7+hP/OkpiGFCCCkhWe+Av6jsaoN2GkbzaWDnmnFvF4NO8ZeoFpp0h1bbHR1Vh/R284czMYRcNHzw7hAjLpcwiuwd0FReAtsvBi3Iiw=
Received: by 10.78.185.15 with SMTP id i15mr7767702huf.1164200988850;
        Wed, 22 Nov 2006 05:09:48 -0800 (PST)
Received: by 10.78.145.11 with HTTP; Wed, 22 Nov 2006 05:09:48 -0800 (PST)
Message-ID: <126142c0611220509r5e702436g22232743bdf694d3@mail.gmail.com>
Date: Wed, 22 Nov 2006 10:09:48 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Oracle and Lucene Integration
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all:
  I read on this a list many threads about Lucene indexing framework
integration with Oracle.
http://www.gossamer-threads.com/lists/lucene/java-user/41104?search_string=oracle%20jvm%20BLOB;#41104
  So it push me to work in a Lucene and Oracle JVM (a Java virtual
machine running inside the Oracle database).
  The reason to do this is:
   - Using traditional File System for storing the inverted index is
not a good option for some users.
   - Using BLOB for storing the inverted index running Lucene outside
the Oracle database has a bad performance because there are a lot of
network round trips and data marshalling.
   - Indexing relational data stores such as tables with VARCHAR2,
CLOB or XMLType with Lucene running outside the database has the same
problem as the previous point.
   - The JVM included inside the Oracle database can scale up to
10.000+ concurrent threads without memory leaks or deadlock and all
the operation on tables are in the same memory space!!
   With these points in mind, I uploaded the complete Lucene framework
inside the Oracle JVM and I runned the complete JUnit test case
successful, except for some test such as the RMI test which requires
special grants to open ports inside the database.
   The Lucene's test cases run faster inside the Oracle database (11g)
than the Sun JDK 1.5, because the classes are automatically JITed
after some executions.
   I had implemented and OJVMDirectory Lucene Store which replaces the
file system storage with a BLOB based storage, compared with a
RAMDirectory implementation is a bit slower but we gets all the
benefits of the BLOB storage (backup, concurrence control, and so on).
  The OJVMDirectory is cloned from the source at
http://issues.apache.org/jira/browse/LUCENE-150 (DBDirectory) but with
some changes to run faster inside the Oracle JVM.
  At this moment, I am working in a full integration with the SQL
Engine using the Data Cartridge API, it means using Lucene as a new
Oracle Domain Index.
  With this extension we can create a Lucene Inverted index in a table using:

create index it1 on t1(f2) indextype is LuceneIndex parameters('test');

  assuming that the table t1 has a column f2 of type VARCHAR2, CLOB or
XMLType, after this, the query against the Lucene inverted index can
be made using a new Oracle operator:

select * from t1 where contains(f2, 'Marcelo') = 1;

  the important point here is that this query is integrated with the
execution plan of the Oracle database, so in this simple example the
Oracle optimizer see that the column "f2" is indexed with the Lucene
Domain index, then using the Data Cartridge API a Java code running
inside the Oracle JVM is executed to open the search, a fetch all the
ROWID that match with "Marcelo" and get the rows using the pointer,
here the output:

SELECT STATEMENT	                              ALL_ROWS	3	1	115
        TABLE ACCESS(BY INDEX ROWID) LUCENE.T1		3	1	115
             DOMAIN INDEX LUCENE.IT1

  Another benefits of using the Data Cartridge API is that if the
table T1 has insert, update or delete rows operations a corresponding
Java method will be called to automatically update the Lucene Index.
  Well may be the email is so long, if anybody is interested in this
implementation I can put in a public web site.
   Best regards, Marcelo.

PD: For Oracle users the big question is, Why do I use Lucene instead
of Oracle Text which is implemented in C?
I think that the answer is too simple, Lucene is open source and
anybody can extend it and add the functionality needed :)
-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 13:26:54 2006
Return-Path: <java-user-return-24658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79865 invoked from network); 22 Nov 2006 13:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 13:26:53 -0000
Received: (qmail 34724 invoked by uid 500); 22 Nov 2006 13:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34696 invoked by uid 500); 22 Nov 2006 13:26:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34685 invoked by uid 99); 22 Nov 2006 13:26:56 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 05:26:56 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.220] (HELO web26009.mail.ukl.yahoo.com) (217.12.10.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Nov 2006 05:26:41 -0800
Received: (qmail 74463 invoked by uid 60001); 22 Nov 2006 13:26:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=fJQeQ+YtAJcvtTWh8DqdPNmFWmoCilkG55abfpzLJ90IF0UyTvh7l/lU1G7U4KWQHgCxbvZ3Ef2EUZVj/2vA+pY+QiMiU+oZH1/2OjZs98bgepxIqkN+yVCQDXPPSSz9KK9IAbRh8395okrEiVUK3sP74XslQlL6XWLOs3+Hiik=  ;
Message-ID: <20061122132619.74461.qmail@web26009.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26009.mail.ukl.yahoo.com via HTTP; Wed, 22 Nov 2006 13:26:19 GMT
Date: Wed, 22 Nov 2006 13:26:16 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Oracle and Lucene Integration
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Very interesting.=0A=0ASo how does this solution manage mapping Oracle prim=
ary keys to and from Lucene doc ids?=0A=0A>> Another benefits of using the =
Data Cartridge API is that if the=0A>>table T1 has insert, update or delete=
 rows operations a corresponding=0A>>Java method will be called to automati=
cally update the Lucene Index.=0A=0AI suspect the tricky bit is optimizing =
the opening/closing of Lucene IndexReaders/Writers especially in the event =
of large batches of database updates.=0ADoes this API pass the transactiona=
l info which would help organize the batching of the Lucene reader.delete a=
nd writer.add calls?=0A=0ACheers=0AMark=0A=0A=0A=0A----- Original Message -=
---=0AFrom: Marcelo Ochoa <marcelo.ochoa@gmail.com>=0ATo: java-user@lucene.=
apache.org=0ASent: Wednesday, 22 November, 2006 1:09:48 PM=0ASubject: Oracl=
e and Lucene Integration=0A=0AHi all:=0A  I read on this a list many thread=
s about Lucene indexing framework=0Aintegration with Oracle.=0Ahttp://www.g=
ossamer-threads.com/lists/lucene/java-user/41104?search_string=3Doracle%20j=
vm%20BLOB;#41104=0A  So it push me to work in a Lucene and Oracle JVM (a Ja=
va virtual=0Amachine running inside the Oracle database).=0A  The reason to=
 do this is:=0A   - Using traditional File System for storing the inverted =
index is=0Anot a good option for some users.=0A   - Using BLOB for storing =
the inverted index running Lucene outside=0Athe Oracle database has a bad p=
erformance because there are a lot of=0Anetwork round trips and data marsha=
lling.=0A   - Indexing relational data stores such as tables with VARCHAR2,=
=0ACLOB or XMLType with Lucene running outside the database has the same=0A=
problem as the previous point.=0A   - The JVM included inside the Oracle da=
tabase can scale up to=0A10.000+ concurrent threads without memory leaks or=
 deadlock and all=0Athe operation on tables are in the same memory space!!=
=0A   With these points in mind, I uploaded the complete Lucene framework=
=0Ainside the Oracle JVM and I runned the complete JUnit test case=0Asucces=
sful, except for some test such as the RMI test which requires=0Aspecial gr=
ants to open ports inside the database.=0A   The Lucene's test cases run fa=
ster inside the Oracle database (11g)=0Athan the Sun JDK 1.5, because the c=
lasses are automatically JITed=0Aafter some executions.=0A   I had implemen=
ted and OJVMDirectory Lucene Store which replaces the=0Afile system storage=
 with a BLOB based storage, compared with a=0ARAMDirectory implementation i=
s a bit slower but we gets all the=0Abenefits of the BLOB storage (backup, =
concurrence control, and so on).=0A  The OJVMDirectory is cloned from the s=
ource at=0Ahttp://issues.apache.org/jira/browse/LUCENE-150 (DBDirectory) bu=
t with=0Asome changes to run faster inside the Oracle JVM.=0A  At this mome=
nt, I am working in a full integration with the SQL=0AEngine using the Data=
 Cartridge API, it means using Lucene as a new=0AOracle Domain Index.=0A  W=
ith this extension we can create a Lucene Inverted index in a table using:=
=0A=0Acreate index it1 on t1(f2) indextype is LuceneIndex parameters('test'=
);=0A=0A  assuming that the table t1 has a column f2 of type VARCHAR2, CLOB=
 or=0AXMLType, after this, the query against the Lucene inverted index can=
=0Abe made using a new Oracle operator:=0A=0Aselect * from t1 where contain=
s(f2, 'Marcelo') =3D 1;=0A=0A  the important point here is that this query =
is integrated with the=0Aexecution plan of the Oracle database, so in this =
simple example the=0AOracle optimizer see that the column "f2" is indexed w=
ith the Lucene=0ADomain index, then using the Data Cartridge API a Java cod=
e running=0Ainside the Oracle JVM is executed to open the search, a fetch a=
ll the=0AROWID that match with "Marcelo" and get the rows using the pointer=
,=0Ahere the output:=0A=0ASELECT STATEMENT                                 =
 ALL_ROWS    3    1    115=0A        TABLE ACCESS(BY INDEX ROWID) LUCENE.T1=
        3    1    115=0A             DOMAIN INDEX LUCENE.IT1=0A=0A  Another=
 benefits of using the Data Cartridge API is that if the=0Atable T1 has ins=
ert, update or delete rows operations a corresponding=0AJava method will be=
 called to automatically update the Lucene Index.=0A  Well may be the email=
 is so long, if anybody is interested in this=0Aimplementation I can put in=
 a public web site.=0A   Best regards, Marcelo.=0A=0APD: For Oracle users t=
he big question is, Why do I use Lucene instead=0Aof Oracle Text which is i=
mplemented in C?=0AI think that the answer is too simple, Lucene is open so=
urce and=0Aanybody can extend it and add the functionality needed :)=0A-- =
=0AMarcelo F. Ochoa=0Ahttp://marcelo.ochoa.googlepages.com/home=0A_________=
_____=0ADo you Know DBPrism? Look @ DB Prism's Web Site=0Ahttp://www.dbpris=
m.com.ar/index.html=0AMore info?=0AChapter 17 of the book "Programming the =
Oracle Database using Java &=0AWeb Services"=0Ahttp://www.amazon.com/gp/pro=
duct/1555583296/=0AChapter 21 of the book "Professional XML Databases" - Wr=
ox Press=0Ahttp://www.amazon.com/gp/product/1861003587/=0AChapter 8 of the =
book "Oracle & Open Source" - O'Reilly=0Ahttp://www.oreilly.com/catalog/ora=
cleopen/=0A=0A-------------------------------------------------------------=
--------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=
=0A=0A=0A=0ASend instant messages to your online friends http://uk.messenge=
r.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 13:45:31 2006
Return-Path: <java-user-return-24659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84804 invoked from network); 22 Nov 2006 13:45:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 13:45:30 -0000
Received: (qmail 66875 invoked by uid 500); 22 Nov 2006 13:45:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66607 invoked by uid 500); 22 Nov 2006 13:45:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66596 invoked by uid 99); 22 Nov 2006 13:45:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 05:45:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 05:45:21 -0800
Received: by wr-out-0506.google.com with SMTP id i21so29917wra
        for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 05:45:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PN/boMxH4KEsFQ6MElL4hckkPDQwb6ctYpcwmcmdWOhXFsLsz/3cRfTKX6UR0WsY5oPbi2rwdkE7QBxJfuNIjFgn61zA6paEqbgrafBg50WkgNXeuBFeDhivdKWnvkBOAhc25bpnqnIEJzUD74ekNbLH2UZwK2PyRyPvDDwbDA4=
Received: by 10.78.204.7 with SMTP id b7mr7805255hug.1164203099163;
        Wed, 22 Nov 2006 05:44:59 -0800 (PST)
Received: by 10.78.145.11 with HTTP; Wed, 22 Nov 2006 05:44:58 -0800 (PST)
Message-ID: <126142c0611220544l433c309fwaa58cf0fc50b540a@mail.gmail.com>
Date: Wed, 22 Nov 2006 10:44:58 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Oracle and Lucene Integration
In-Reply-To: <20061122132619.74461.qmail@web26009.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061122132619.74461.qmail@web26009.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark:
> Very interesting.
>
> So how does this solution manage mapping Oracle primary keys to and from Lucene doc ids?
  I am storing the rowid value as a Document field, here a code sniped
                Document doc = new Document();
                doc.add(new Field("rowid", rowid, Field.Store.YES,
                          Field.Index.TOKENIZED));
                Object value = rs.getObject(2);
                String valueStr = null;
                if (value!=null) { // Sanity checks
                  if (value instanceof CLOB)
                    valueStr =
((CLOB)value).getSubString(1,(int)((CLOB)value).length());
                  else if (value instanceof XMLType)
                    valueStr =
((XMLType)value).extract("//text()","").getStringVal();
                  else
                    valueStr = value.toString();
                  doc.add(new
Field(col,valueStr,Field.Store.NO,Field.Index.TOKENIZED));
                  writer.addDocument(doc);

  So when I am querying I can get the rowid back using:
                if (iterator.hasNext()) {
                    // append rowid to collection
                    Hit hit = (Hit) iterator.next();
                    try {
                        rid =  hit.get("rowid");
                        score = hit.getScore();
                    } catch (IOException e) {
                        e.printStackTrace();
                        throw new SQLException(e.getMessage());
                    }
                    rlist[i] = new String(rid);
                    slist.put(rid,new Float(score));
                    idx++;
                } else {.............
  and passing the rowid to the Oracle execution plan which is
collecting in bacth of 2000 rowids.
>
> >> Another benefits of using the Data Cartridge API is that if the
> >>table T1 has insert, update or delete rows operations a corresponding
> >>Java method will be called to automatically update the Lucene Index.
>
> I suspect the tricky bit is optimizing the opening/closing of Lucene IndexReaders/Writers especially in the event of large batches of database updates.
> Does this API pass the transactional info which would help organize the batching of the Lucene reader.delete and writer.add calls?
  Well, I think that Oracle Text uses a Queue to store large batches,
because it use a ctx_sys.sync procedure to update the index ;)
  We can make the same solution using Oracle AQ.
>
> Cheers
> Mark
 Best regards, Marcelo.
-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 15:33:29 2006
Return-Path: <java-user-return-24660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24562 invoked from network); 22 Nov 2006 15:33:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 15:33:28 -0000
Received: (qmail 93708 invoked by uid 500); 22 Nov 2006 15:33:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93684 invoked by uid 500); 22 Nov 2006 15:33:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93673 invoked by uid 99); 22 Nov 2006 15:33:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 07:33:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of VOlenin@cihi.ca designates 205.207.78.3 as permitted sender)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 07:33:16 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 22c6_c308baba_7a3f_11db_88b9_003048245df9;
	Wed, 22 Nov 2006 10:40:21 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Oracle and Lucene Integration
Date: Wed, 22 Nov 2006 10:32:03 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F0788D63D@tormail01.cihi.ca>
In-Reply-To: <126142c0611220509r5e702436g22232743bdf694d3@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Oracle and Lucene Integration
Thread-Index: AccON4oneiVCzM9aSRyCezZJM+PnZQAE6IWg
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

=20
Hi, Marcelo,

Yes, putting it in the public space would be great. I personally would
be very interested to have a look. Can it be posted on the 'lucene'
website?

Vlad

-----Original Message-----
From: Marcelo Ochoa [mailto:marcelo.ochoa@gmail.com]=20
Sent: Wednesday, November 22, 2006 8:10 AM
To: java-user@lucene.apache.org
Subject: Oracle and Lucene Integration

Hi all:
  I read on this a list many threads about Lucene indexing framework
integration with Oracle.
http://www.gossamer-threads.com/lists/lucene/java-user/41104?search_stri
ng=3Doracle%20jvm%20BLOB;#41104
  So it push me to work in a Lucene and Oracle JVM (a Java virtual
machine running inside the Oracle database).
  The reason to do this is:
   - Using traditional File System for storing the inverted index is not
a good option for some users.
   - Using BLOB for storing the inverted index running Lucene outside
the Oracle database has a bad performance because there are a lot of
network round trips and data marshalling.
   - Indexing relational data stores such as tables with VARCHAR2, CLOB
or XMLType with Lucene running outside the database has the same problem
as the previous point.
   - The JVM included inside the Oracle database can scale up to 10.000+
concurrent threads without memory leaks or deadlock and all the
operation on tables are in the same memory space!!
   With these points in mind, I uploaded the complete Lucene framework
inside the Oracle JVM and I runned the complete JUnit test case
successful, except for some test such as the RMI test which requires
special grants to open ports inside the database.
   The Lucene's test cases run faster inside the Oracle database (11g)
than the Sun JDK 1.5, because the classes are automatically JITed after
some executions.
   I had implemented and OJVMDirectory Lucene Store which replaces the
file system storage with a BLOB based storage, compared with a
RAMDirectory implementation is a bit slower but we gets all the benefits
of the BLOB storage (backup, concurrence control, and so on).
  The OJVMDirectory is cloned from the source at
http://issues.apache.org/jira/browse/LUCENE-150 (DBDirectory) but with
some changes to run faster inside the Oracle JVM.
  At this moment, I am working in a full integration with the SQL Engine
using the Data Cartridge API, it means using Lucene as a new Oracle
Domain Index.
  With this extension we can create a Lucene Inverted index in a table
using:

create index it1 on t1(f2) indextype is LuceneIndex parameters('test');

  assuming that the table t1 has a column f2 of type VARCHAR2, CLOB or
XMLType, after this, the query against the Lucene inverted index can be
made using a new Oracle operator:

select * from t1 where contains(f2, 'Marcelo') =3D 1;

  the important point here is that this query is integrated with the
execution plan of the Oracle database, so in this simple example the
Oracle optimizer see that the column "f2" is indexed with the Lucene
Domain index, then using the Data Cartridge API a Java code running
inside the Oracle JVM is executed to open the search, a fetch all the
ROWID that match with "Marcelo" and get the rows using the pointer, here
the output:

SELECT STATEMENT	                              ALL_ROWS	3
1	115
        TABLE ACCESS(BY INDEX ROWID) LUCENE.T1		3	1
115
             DOMAIN INDEX LUCENE.IT1

  Another benefits of using the Data Cartridge API is that if the table
T1 has insert, update or delete rows operations a corresponding Java
method will be called to automatically update the Lucene Index.
  Well may be the email is so long, if anybody is interested in this
implementation I can put in a public web site.
   Best regards, Marcelo.

PD: For Oracle users the big question is, Why do I use Lucene instead of
Oracle Text which is implemented in C?
I think that the answer is too simple, Lucene is open source and anybody
can extend it and add the functionality needed :)
--
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java & Web
Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 15:46:29 2006
Return-Path: <java-user-return-24661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29860 invoked from network); 22 Nov 2006 15:46:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 15:46:28 -0000
Received: (qmail 29743 invoked by uid 500); 22 Nov 2006 15:46:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29712 invoked by uid 500); 22 Nov 2006 15:46:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29701 invoked by uid 99); 22 Nov 2006 15:46:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 07:46:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 07:46:17 -0800
Received: by wr-out-0506.google.com with SMTP id i21so52566wra
        for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 07:45:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FcXmQxkoxQzAh0N1zRzU8yC32kDFsYMKj6YD2QUp5HAr1QiaDXPRW5c4JBlEMKLLSEUMwpNzXJnLxVN4B8cMirBReB14TITAxyp5yDvnlpiWxzUA/jjJzHXWStFiNG525yuBqb99JuZlBOzygrdWH6coqF5ulQfCddKz4j9E6IE=
Received: by 10.78.183.15 with SMTP id g15mr7886856huf.1164210340471;
        Wed, 22 Nov 2006 07:45:40 -0800 (PST)
Received: by 10.78.145.11 with HTTP; Wed, 22 Nov 2006 07:45:40 -0800 (PST)
Message-ID: <126142c0611220745y55b9907et1302ca328240da9@mail.gmail.com>
Date: Wed, 22 Nov 2006 12:45:40 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Oracle and Lucene Integration
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F0788D63D@tormail01.cihi.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <126142c0611220509r5e702436g22232743bdf694d3@mail.gmail.com>
	 <373399D6389D8C42B4EAD9BE2B6B5C5F0788D63D@tormail01.cihi.ca>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Vladimir:
  Well, I finishing with the implementation of the ancillary operator
score() and the contains function ready to use outside the SQL where
expression, for example:
  select score(1),colx,coly from t1 where contains(f2,'test',1)=1
  select contains(f2,'test') from t1
  Then I'll move the code outside the lucene-2.0 code tree to be
packed as subdirectory of the contrib area, for example.
  Other alternative is to make an small zip file and send it to the
list as attach as a preliminary (alpha-alpha version ;)
  Best regards, Marcelo.
On 11/22/06, Vladimir Olenin <VOlenin@cihi.ca> wrote:
>
> Hi, Marcelo,
>
> Yes, putting it in the public space would be great. I personally would
> be very interested to have a look. Can it be posted on the 'lucene'
> website?
>
> Vlad
>
> -----Original Message-----
> From: Marcelo Ochoa [mailto:marcelo.ochoa@gmail.com]
> Sent: Wednesday, November 22, 2006 8:10 AM
> To: java-user@lucene.apache.org
> Subject: Oracle and Lucene Integration
>
> Hi all:
>   I read on this a list many threads about Lucene indexing framework
> integration with Oracle.
> http://www.gossamer-threads.com/lists/lucene/java-user/41104?search_stri
> ng=oracle%20jvm%20BLOB;#41104
>   So it push me to work in a Lucene and Oracle JVM (a Java virtual
> machine running inside the Oracle database).
>   The reason to do this is:
>    - Using traditional File System for storing the inverted index is not
> a good option for some users.
>    - Using BLOB for storing the inverted index running Lucene outside
> the Oracle database has a bad performance because there are a lot of
> network round trips and data marshalling.
>    - Indexing relational data stores such as tables with VARCHAR2, CLOB
> or XMLType with Lucene running outside the database has the same problem
> as the previous point.
>    - The JVM included inside the Oracle database can scale up to 10.000+
> concurrent threads without memory leaks or deadlock and all the
> operation on tables are in the same memory space!!
>    With these points in mind, I uploaded the complete Lucene framework
> inside the Oracle JVM and I runned the complete JUnit test case
> successful, except for some test such as the RMI test which requires
> special grants to open ports inside the database.
>    The Lucene's test cases run faster inside the Oracle database (11g)
> than the Sun JDK 1.5, because the classes are automatically JITed after
> some executions.
>    I had implemented and OJVMDirectory Lucene Store which replaces the
> file system storage with a BLOB based storage, compared with a
> RAMDirectory implementation is a bit slower but we gets all the benefits
> of the BLOB storage (backup, concurrence control, and so on).
>   The OJVMDirectory is cloned from the source at
> http://issues.apache.org/jira/browse/LUCENE-150 (DBDirectory) but with
> some changes to run faster inside the Oracle JVM.
>   At this moment, I am working in a full integration with the SQL Engine
> using the Data Cartridge API, it means using Lucene as a new Oracle
> Domain Index.
>   With this extension we can create a Lucene Inverted index in a table
> using:
>
> create index it1 on t1(f2) indextype is LuceneIndex parameters('test');
>
>   assuming that the table t1 has a column f2 of type VARCHAR2, CLOB or
> XMLType, after this, the query against the Lucene inverted index can be
> made using a new Oracle operator:
>
> select * from t1 where contains(f2, 'Marcelo') = 1;
>
>   the important point here is that this query is integrated with the
> execution plan of the Oracle database, so in this simple example the
> Oracle optimizer see that the column "f2" is indexed with the Lucene
> Domain index, then using the Data Cartridge API a Java code running
> inside the Oracle JVM is executed to open the search, a fetch all the
> ROWID that match with "Marcelo" and get the rows using the pointer, here
> the output:
>
> SELECT STATEMENT                                      ALL_ROWS  3
> 1       115
>         TABLE ACCESS(BY INDEX ROWID) LUCENE.T1          3       1
> 115
>              DOMAIN INDEX LUCENE.IT1
>
>   Another benefits of using the Data Cartridge API is that if the table
> T1 has insert, update or delete rows operations a corresponding Java
> method will be called to automatically update the Lucene Index.
>   Well may be the email is so long, if anybody is interested in this
> implementation I can put in a public web site.
>    Best regards, Marcelo.
>
> PD: For Oracle users the big question is, Why do I use Lucene instead of
> Oracle Text which is implemented in C?
> I think that the answer is too simple, Lucene is open source and anybody
> can extend it and add the functionality needed :)
> --
> Marcelo F. Ochoa
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Do you Know DBPrism? Look @ DB Prism's Web Site
> http://www.dbprism.com.ar/index.html
> More info?
> Chapter 17 of the book "Programming the Oracle Database using Java & Web
> Services"
> http://www.amazon.com/gp/product/1555583296/
> Chapter 21 of the book "Professional XML Databases" - Wrox Press
> http://www.amazon.com/gp/product/1861003587/
> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
> http://www.oreilly.com/catalog/oracleopen/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 16:50:27 2006
Return-Path: <java-user-return-24662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54802 invoked from network); 22 Nov 2006 16:50:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 16:50:24 -0000
Received: (qmail 15184 invoked by uid 500); 22 Nov 2006 16:50:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14924 invoked by uid 500); 22 Nov 2006 16:50:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14913 invoked by uid 99); 22 Nov 2006 16:50:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 08:50:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [144.92.197.211] (HELO smtpauth.wiscmail.wisc.edu) (144.92.197.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 08:50:10 -0800
Received: from avs-daemon.smtpauth2.wiscmail.wisc.edu by
 smtpauth2.wiscmail.wisc.edu
 (Sun Java System Messaging Server 6.2-7.05 (built Sep  5 2006))
 id <0J9500M035EZTU00@smtpauth2.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Wed, 22 Nov 2006 10:49:47 -0600 (CST)
Received: from Hathor ([144.92.136.11]) by smtpauth2.wiscmail.wisc.edu
 (Sun Java System Messaging Server 6.2-7.05 (built Sep  5 2006))
 with ESMTPSA id <0J9500L475EV5V20@smtpauth2.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Wed, 22 Nov 2006 10:49:43 -0600 (CST)
Date: Wed, 22 Nov 2006 10:49:45 -0600
From: Michael Rusch <mcrusch@facstaff.wisc.edu>
Subject: RE: Limiting QueryParser
In-reply-to: <4563CB7C.6000508@teamware.com>
To: java-user@lucene.apache.org
Message-id: <000501c70e56$374d7d30$0d1aa8c0@gel.local>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook, Build 10.0.6626
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
X-Spam-Report: AuthenticatedSender=yes, SenderIP=144.92.136.11
X-Spam-PmxInfo: Server=avs-8, Version=5.2.1.279297,
 Antispam-Engine: 2.5.0.283055, Antispam-Data: 2006.11.22.83435,
 SenderIP=144.92.136.11
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry if I'm missing the point here, but what about simply replacing colons
with spaces first?

Michael.

> -----Original Message-----
> From: Antony Bowesman [mailto:adb@teamware.com]
> Sent: Tuesday, November 21, 2006 10:01 PM
> To: java-user@lucene.apache.org
> Subject: Re: Limiting QueryParser
> 
> Mark Miller wrote:
> > if you scan the query and escape all colons (ie \:) then you should be
> > good (I have not verified). Of course you will not be able to do a field
> > search, but that seems to be what your after.
> 
> Thanks for that suggestion.  However, a standard un-escaped parse gives
> 
> Input - important:conference agenda
> Query - important:conference body:agenda
> 
> Escaping the : gives
> 
> Input - important\:conference agenda
> Query - subject:"important conference" subject:agenda
> 
> which has caused it to generate a PhraseQuery for important conference
> which is
> incorrect.
> 
> The following
> 
> Input - important\:"conference agenda"
> Query - subject:important subject:"conference agenda"
> 
> is correct.  Is that a bug in the middle one?
> Antony
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 17:18:30 2006
Return-Path: <java-user-return-24663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66274 invoked from network); 22 Nov 2006 17:18:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 17:18:29 -0000
Received: (qmail 87492 invoked by uid 500); 22 Nov 2006 17:18:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87462 invoked by uid 500); 22 Nov 2006 17:18:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87451 invoked by uid 99); 22 Nov 2006 17:18:30 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 09:18:30 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 09:18:18 -0800
Received: by ug-out-1314.google.com with SMTP id k40so229063ugc
        for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 09:17:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FADzW0oQUSyjTpF6jnWQes7UMo9wr0M20uXLdOzoDSSG9w/4jhxy2cyQV2Qrxw9mN/mKjYUMU6Gq+/jbpMGgHuJWJSWMBSRaoWQVgaZXBShJbpNpFe/HfmVsCkufBj3d7qNujy75NaHrtJxN4QcCV10Yk41ShIfJCOFyy97AqjU=
Received: by 10.82.126.5 with SMTP id y5mr1268857buc.1164215876257;
        Wed, 22 Nov 2006 09:17:56 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Wed, 22 Nov 2006 09:17:56 -0800 (PST)
Message-ID: <359a92830611220917g6618da6y7890261e6f3d63d1@mail.gmail.com>
Date: Wed, 22 Nov 2006 12:17:56 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Limiting QueryParser
In-Reply-To: <000501c70e56$374d7d30$0d1aa8c0@gel.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_37254_31177349.1164215876178"
References: <4563CB7C.6000508@teamware.com>
	 <000501c70e56$374d7d30$0d1aa8c0@gel.local>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_37254_31177349.1164215876178
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've also got to ask a similar question to Michael's... Who is the UI
intended for? If it's intended for any type of "end user", even other IT
folks, who aren't  Lucene junkies, trying to explain when colon's count and
when they don't is going to be a challenge. I predict it will lead to 1>
endless confusion and 2> waaaaaay more time spent than you think and 3>
little value actually added to the app.

I think that rather than spending time worrying about this issue, I'd define
it away by removing colon's from my token stream while indexing and causing
every colon in my free-form text to be a field. Unless I just took away the
field:value syntax from the free-form entry field entirely.....

Erick

On 11/22/06, Michael Rusch <mcrusch@facstaff.wisc.edu> wrote:
>
> Sorry if I'm missing the point here, but what about simply replacing
> colons
> with spaces first?
>
> Michael.
>
> > -----Original Message-----
> > From: Antony Bowesman [mailto:adb@teamware.com]
> > Sent: Tuesday, November 21, 2006 10:01 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Limiting QueryParser
> >
> > Mark Miller wrote:
> > > if you scan the query and escape all colons (ie \:) then you should be
> > > good (I have not verified). Of course you will not be able to do a
> field
> > > search, but that seems to be what your after.
> >
> > Thanks for that suggestion.  However, a standard un-escaped parse gives
> >
> > Input - important:conference agenda
> > Query - important:conference body:agenda
> >
> > Escaping the : gives
> >
> > Input - important\:conference agenda
> > Query - subject:"important conference" subject:agenda
> >
> > which has caused it to generate a PhraseQuery for important conference
> > which is
> > incorrect.
> >
> > The following
> >
> > Input - important\:"conference agenda"
> > Query - subject:important subject:"conference agenda"
> >
> > is correct.  Is that a bug in the middle one?
> > Antony
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_37254_31177349.1164215876178--

From java-user-return-24664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 17:20:06 2006
Return-Path: <java-user-return-24664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66499 invoked from network); 22 Nov 2006 17:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 17:20:05 -0000
Received: (qmail 90595 invoked by uid 500); 22 Nov 2006 17:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90540 invoked by uid 500); 22 Nov 2006 17:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90529 invoked by uid 99); 22 Nov 2006 17:20:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 09:20:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.173] (HELO smtpout.mac.com) (17.250.248.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 09:19:53 -0800
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout03/MantshX 4.0) with ESMTP id kAMHJV0v010297
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 09:19:33 -0800 (PST)
Received: from [10.0.1.2] (69-12-148-180.dsl.dynamic.sonic.net [69.12.148.180])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id kAMHJQEs018345
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 09:19:27 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com>
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com> <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com> <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com> <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com> <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com>
Content-Transfer-Encoding: 7bit
From: Wolfgang Hoschek <wolfgang.hoschek@mac.com>
Subject: Re: RAMDirectory vs MemoryIndex
Date: Wed, 22 Nov 2006 09:19:25 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Virus-Checked: Checked by ClamAV on apache.org

I've never tried it, but I guess you could write an Analyzer and  
TokenFilter that no only feeds into IndexWriter on  
IndexWriter.addDocument(), but as a sneaky side effect also  
simultaneously saves its tokens into a list so that you could later  
turn that list into another TokenStream to be added to MemoryIndex.  
How much this might help depends on how expensive your analyzer chain  
is. For some examples on how to set up analyzers for chains of token  
streams, see MemoryIndex.keywordTokenStream and class AnalzyerUtil in  
the same package.

Wolfgang.

On Nov 22, 2006, at 4:15 AM, jm wrote:

> checking one last thing, just in case...
>
> as I mentioned, I have previously indexed the same document in another
> index (for another purpose), as I am going to use the same analyzer,
> would it be possible to avoid analyzing the doc again?
>
> I see IndexWriter.addDocument() returns void, so it does not seem to
> be an easy way to do that no?
>
> thanks
>
> On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>>
>> On Nov 21, 2006, at 12:38 PM, jm wrote:
>>
>> > Ok, thanks, I'll give MemoryIndex a go, and if that is not good  
>> enoguh
>> > I will explore the other options then.
>>
>> To get started you can use something like this:
>>
>> for each document D:
>>      MemoryIndex index = createMemoryIndex(D, ...)
>>      for each query Q:
>>          float score = index.search(Q)
>>         if (score > 0.0) System.out.println("it's a match");
>>
>>
>>
>>
>>    private MemoryIndex createMemoryIndex(Document doc, Analyzer
>> analyzer) {
>>      MemoryIndex index = new MemoryIndex();
>>      Enumeration iter = doc.fields();
>>      while (iter.hasMoreElements()) {
>>        Field field = (Field) iter.nextElement();
>>        index.addField(field.name(), field.stringValue(), analyzer);
>>      }
>>      return index;
>>    }
>>
>>
>>
>> >
>> >
>> > On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>> >> On Nov 21, 2006, at 7:43 AM, jm wrote:
>> >>
>> >> > Hi,
>> >> >
>> >> > I have to decide between  using a RAMDirectory and  
>> MemoryIndex, but
>> >> > not sure what approach will work better...
>> >> >
>> >> > I have to run many items (tens of thousands) against some
>> >> queries (100
>> >> > at most), but I have to do it one item at a time. And I already
>> >> have
>> >> > the lucene Document associated with each item, from a previous
>> >> > operation I perform.
>> >> >
>> >> > From what I read MemoryIndex should be faster, but apparently I
>> >> cannot
>> >> > reuse the document I already have, and I have to create a new
>> >> > MemoryIndex per item.
>> >>
>> >> A MemoryIndex object holds one document.
>> >>
>> >> > Using the RAMDirectory I can use only one of
>> >> > them, also one IndexWriter, and create a IndexSearcher and
>> >> IndexReader
>> >> > per item, for searching and removing the item each time.
>> >> >
>> >> > Any thoughts?
>> >>
>> >> The MemoryIndex impl is optimized to work efficiently without  
>> reusing
>> >> the MemoryIndex object for a subsequent document. See the source
>> >> code. Reusing the object would not further improve performance.
>> >>
>> >> Wolfgang.
>> >>
>> >>  
>> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> >  
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 18:33:11 2006
Return-Path: <java-user-return-24665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88517 invoked from network); 22 Nov 2006 18:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 18:33:10 -0000
Received: (qmail 15562 invoked by uid 500); 22 Nov 2006 18:33:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15543 invoked by uid 500); 22 Nov 2006 18:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15532 invoked by uid 99); 22 Nov 2006 18:33:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 10:33:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.44.23.182] (HELO mail.spline-software.com) (194.44.23.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 10:33:00 -0800
Received: from [192.168.0.86] (stargate.jforce [192.168.0.1])
	by mail.spline-software.com (Postfix) with ESMTP id DD02DE487B
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 20:32:22 -0500 (EST)
Message-ID: <456497C6.6060905@i-hypergrid.com>
Date: Wed, 22 Nov 2006 20:32:38 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: FieldCache vs TermVector
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all.

Previous message lost somewhere, resending...

Index in my application has about 15M docs and about 6Gb in size;
I want to implement sorting on some fields, but using default approach
FieldCache size can be quite large.
But I want to keep application footprint small.

So question is:
- Can TermVector be used instead of FieldCache to implement sorting (and
other activities where FieldCache is used) ?
- Would it be much slower?

-- 
regards,
Volodymyr Bychkoviak


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 19:31:13 2006
Return-Path: <java-user-return-24666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18533 invoked from network); 22 Nov 2006 19:31:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 19:31:12 -0000
Received: (qmail 4000 invoked by uid 500); 22 Nov 2006 19:31:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3975 invoked by uid 500); 22 Nov 2006 19:31:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3953 invoked by uid 99); 22 Nov 2006 19:31:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:31:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [204.127.192.82] (HELO rwcrmhc12.comcast.net) (204.127.192.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:31:02 -0800
Received: from [192.168.168.15] (c-71-202-24-246.hsd1.ca.comcast.net[71.202.24.246])
          by comcast.net (rwcrmhc12) with ESMTP
          id <20061122193042m1200m3idee>; Wed, 22 Nov 2006 19:30:42 +0000
Message-ID: <4564A561.5080101@apache.org>
Date: Wed, 22 Nov 2006 11:30:41 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Thunderbird 1.5.0.7 (X11/20060922)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Oracle and Lucene Integration
References: <126142c0611220509r5e702436g22232743bdf694d3@mail.gmail.com>	 <373399D6389D8C42B4EAD9BE2B6B5C5F0788D63D@tormail01.cihi.ca> <126142c0611220745y55b9907et1302ca328240da9@mail.gmail.com>
In-Reply-To: <126142c0611220745y55b9907et1302ca328240da9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Marcelo Ochoa wrote:
>  Then I'll move the code outside the lucene-2.0 code tree to be
> packed as subdirectory of the contrib area, for example.
>  Other alternative is to make an small zip file and send it to the
> list as attach as a preliminary (alpha-alpha version ;)

This sounds like great potential addition to Lucene!

I encourage you to create an issue in Jira and attach your code there 
now.  (Anyone can create themselves a Jira account.)

There's no need to wait until it is cleaned up: attach an initial 
version to an issue and describe what you intend to do next, then attach 
improved versions later.  That way other folks can provide input, and, 
heaven forbid, should you for some reason lose interest before it is 
polished, someone else can complete the work.

Thanks!

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 19:46:10 2006
Return-Path: <java-user-return-24667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22302 invoked from network); 22 Nov 2006 19:46:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 19:46:10 -0000
Received: (qmail 30093 invoked by uid 500); 22 Nov 2006 19:46:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29651 invoked by uid 500); 22 Nov 2006 19:46:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29637 invoked by uid 99); 22 Nov 2006 19:46:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:46:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 11:46:01 -0800
Received: by wr-out-0506.google.com with SMTP id i21so96242wra
        for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 11:45:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=FHo7qY8RQXaTbH+LPM7Yv/qDmhBTpyuGX5BseaQanBlIf7qpVZT4PG6M5RtisXA74i/sNRFaaKlZE2Oxv5xhWbpk8dG9nRWusaCgS+KoA8KIjvGZwO1gnrEo/06A29poAS1ZjIND+y1drHyAYr2arx/pnywHayLg7y6S5hHxVbA=
Received: by 10.78.200.3 with SMTP id x3mr8187363huf.1164224737514;
        Wed, 22 Nov 2006 11:45:37 -0800 (PST)
Received: by 10.78.145.11 with HTTP; Wed, 22 Nov 2006 11:45:37 -0800 (PST)
Message-ID: <126142c0611221145q1cf2758dn825d64b48a03526c@mail.gmail.com>
Date: Wed, 22 Nov 2006 16:45:37 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Oracle and Lucene Integration
In-Reply-To: <4564A561.5080101@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <126142c0611220509r5e702436g22232743bdf694d3@mail.gmail.com>
	 <373399D6389D8C42B4EAD9BE2B6B5C5F0788D63D@tormail01.cihi.ca>
	 <126142c0611220745y55b9907et1302ca328240da9@mail.gmail.com>
	 <4564A561.5080101@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Doug:
  I'll create a Jira account today and extract my code from the
lucene-2.0.0 tree.
  Then I'll upload to Jira to get more feedback.
  May be the first optimization for the TODO list will be replace the
insert/delete/update Data  Cartridge entry points for a new code which
put the modification in a queue to be processed with a new Sync method
regularly using an Oracle's DBMS_SCHEDULER or by the user's
application code.
  Best regards, Marcelo.

On 11/22/06, Doug Cutting <cutting@apache.org> wrote:
> Marcelo Ochoa wrote:
> >  Then I'll move the code outside the lucene-2.0 code tree to be
> > packed as subdirectory of the contrib area, for example.
> >  Other alternative is to make an small zip file and send it to the
> > list as attach as a preliminary (alpha-alpha version ;)
>
> This sounds like great potential addition to Lucene!
>
> I encourage you to create an issue in Jira and attach your code there
> now.  (Anyone can create themselves a Jira account.)
>
> There's no need to wait until it is cleaned up: attach an initial
> version to an issue and describe what you intend to do next, then attach
> improved versions later.  That way other folks can provide input, and,
> heaven forbid, should you for some reason lose interest before it is
> polished, someone else can complete the work.
>
> Thanks!
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 21:54:04 2006
Return-Path: <java-user-return-24668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61651 invoked from network); 22 Nov 2006 21:54:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 21:54:04 -0000
Received: (qmail 23233 invoked by uid 500); 22 Nov 2006 21:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22979 invoked by uid 500); 22 Nov 2006 21:54:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22968 invoked by uid 99); 22 Nov 2006 21:54:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 13:54:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 13:53:54 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kAMLrNY0020519
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 23:53:23 +0200
Received: from [10.142.3.12] ([10.142.3.12]) by nimitz with ESMTP
	 id mbmnhdjy; 22 Nov 2006 23:53:00 +0200
Message-ID: <4564C6C3.1070301@teamware.com>
Date: Thu, 23 Nov 2006 08:53:07 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Limiting QueryParser
References: <000501c70e56$374d7d30$0d1aa8c0@gel.local>
In-Reply-To: <000501c70e56$374d7d30$0d1aa8c0@gel.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Wed, 22 Nov 2006 23:53:23 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Michael Rusch wrote:
> Sorry if I'm missing the point here, but what about simply replacing colons
> with spaces first?
> 
> Michael.

Err, thanks.  I've been in too deep at the wrong end :) Wood, trees and 
visibility spring to mind!

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 22:53:01 2006
Return-Path: <java-user-return-24669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79242 invoked from network); 22 Nov 2006 22:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 22:52:58 -0000
Received: (qmail 10173 invoked by uid 500); 22 Nov 2006 22:53:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9938 invoked by uid 500); 22 Nov 2006 22:53:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9926 invoked by uid 99); 22 Nov 2006 22:53:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:53:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 14:52:48 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kAMMpppp025209
	for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 00:51:51 +0200
Received: from [10.142.3.12] ([10.142.3.12]) by nimitz with ESMTP
	 id mbn0fll2; 23 Nov 2006 00:51:00 +0200
Message-ID: <4564D486.1000905@teamware.com>
Date: Thu, 23 Nov 2006 09:51:50 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Limiting QueryParser
References: <45637D01.7080000@teamware.com> <Pine.LNX.4.58.0611211626560.22671@hal.rescomp.berkeley.edu> <4563C54A.2010907@teamware.com> <3CCDA72B-667B-4EC7-B4C0-EAF80842C87B@ehatchersolutions.com>
In-Reply-To: <3CCDA72B-667B-4EC7-B4C0-EAF80842C87B@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Thu, 23 Nov 2006 00:51:51 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=3.001, required 5,
	BAYES_50 0.00, TWG_DSL 3.00)
X-TWG-MailScanner-SpamScore: 3
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Erik Hatcher wrote:
> 
> It doesn't seem like you need a "parser" at all for your field-specific 
> search fields.  Simply tokenize, using a Lucene Analyzer, the text field 
> and build up a BooleanQuery of all the tokens.

That's what I'm currently doing, but I was getting bogged down with trying to 
support PhraseQueries in case of quoted input.  My knowledge of JavaCC is 
limited, so I was trying to weigh up the effor of rolling my own or adapting QP.

> QueryParser is over prescribed - and is often not the best fit for the 
> job.  It's only a few lines of code to tokenize (look at the QueryParser 
> code in how it creates a PhraseQuery, for example) and build a Query 
> from the tokens.
> 
> If you need to support +/-/AND/OR syntax in your field-specific inputs 
> that's a different story - though your example does not show this need.  
> If so, copying the QueryParser.jj file and removing the "field:" syntax 
> and fixing all created Query objects to a specified single field might 
> be the trick.

I do have other levels where +- can be used, but that's the easy bit and I'm 
just constructing an outer BooleanQuery.  Anyway, I'll have a go with QP.jj and 
see where I get.  BTW, LIA is an excellent book!

Thanks everyone for your comments.
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 22 23:04:15 2006
Return-Path: <java-user-return-24670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80999 invoked from network); 22 Nov 2006 23:04:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2006 23:04:15 -0000
Received: (qmail 23097 invoked by uid 500); 22 Nov 2006 23:04:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23065 invoked by uid 500); 22 Nov 2006 23:04:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23054 invoked by uid 99); 22 Nov 2006 23:04:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 15:04:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.176] (HELO smtpout.mac.com) (17.250.248.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 15:04:05 -0800
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout06/MantshX 4.0) with ESMTP id kAMN3gQ4017467
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 15:03:42 -0800 (PST)
Received: from [192.168.2.4] (adsl-71-146-176-207.dsl.pltn13.sbcglobal.net [71.146.176.207])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id kAMN3cdT028074
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 15:03:40 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com>
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com> <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com> <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com> <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com> <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com> <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com>
Content-Transfer-Encoding: 7bit
From: Wolfgang Hoschek <wolfgang.hoschek@mac.com>
Subject: Re: RAMDirectory vs MemoryIndex
Date: Wed, 22 Nov 2006 15:03:37 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5446:2.3.11,1.2.37,4.0.164 definitions=2006-11-22_06:2006-11-22,2006-11-22,2006-11-22 signatures=0
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 spamscore=0 ipscore=0 adultscore=0 classifier=spam adjust=0 reason=mlx engine=3.1.0-0610180000 definitions=main-0611220046
X-Virus-Checked: Checked by ClamAV on apache.org

Out of interest, I've checked an implementation of something like  
this into AnalyzerUtil SVN trunk:

   /**
    * Returns an analyzer wrapper that caches all tokens generated by  
the underlying child analyzer's
    * token stream, and delivers those cached tokens on subsequent  
calls to
    * <code>tokenStream(String fieldName, Reader reader)</code>.
    * <p>
    * This can help improve performance in the presence of expensive  
Analyzer / TokenFilter chains.
    * <p>
    * Caveats:
    * 1) Caching only works if the methods equals() and hashCode()  
methods are properly
    * implemented on the Reader passed to <code>tokenStream(String  
fieldName, Reader reader)</code>.
    * 2) Caching the tokens of large Lucene documents can lead to out  
of memory exceptions.
    * 3) The Token instances delivered by the underlying child  
analyzer must be immutable.
    *
    * @param child
    *            the underlying child analyzer
    * @return a new analyzer
    */
   public static Analyzer getTokenCachingAnalyzer(final Analyzer  
child) { ... }


Check it out, and let me know if this is close to what you had in mind.

Wolfgang.

On Nov 22, 2006, at 9:19 AM, Wolfgang Hoschek wrote:

> I've never tried it, but I guess you could write an Analyzer and  
> TokenFilter that no only feeds into IndexWriter on  
> IndexWriter.addDocument(), but as a sneaky side effect also  
> simultaneously saves its tokens into a list so that you could later  
> turn that list into another TokenStream to be added to MemoryIndex.  
> How much this might help depends on how expensive your analyzer  
> chain is. For some examples on how to set up analyzers for chains  
> of token streams, see MemoryIndex.keywordTokenStream and class  
> AnalzyerUtil in the same package.
>
> Wolfgang.
>
> On Nov 22, 2006, at 4:15 AM, jm wrote:
>
>> checking one last thing, just in case...
>>
>> as I mentioned, I have previously indexed the same document in  
>> another
>> index (for another purpose), as I am going to use the same analyzer,
>> would it be possible to avoid analyzing the doc again?
>>
>> I see IndexWriter.addDocument() returns void, so it does not seem to
>> be an easy way to do that no?
>>
>> thanks
>>
>> On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>>>
>>> On Nov 21, 2006, at 12:38 PM, jm wrote:
>>>
>>> > Ok, thanks, I'll give MemoryIndex a go, and if that is not good  
>>> enoguh
>>> > I will explore the other options then.
>>>
>>> To get started you can use something like this:
>>>
>>> for each document D:
>>>      MemoryIndex index = createMemoryIndex(D, ...)
>>>      for each query Q:
>>>          float score = index.search(Q)
>>>         if (score > 0.0) System.out.println("it's a match");
>>>
>>>
>>>
>>>
>>>    private MemoryIndex createMemoryIndex(Document doc, Analyzer
>>> analyzer) {
>>>      MemoryIndex index = new MemoryIndex();
>>>      Enumeration iter = doc.fields();
>>>      while (iter.hasMoreElements()) {
>>>        Field field = (Field) iter.nextElement();
>>>        index.addField(field.name(), field.stringValue(), analyzer);
>>>      }
>>>      return index;
>>>    }
>>>
>>>
>>>
>>> >
>>> >
>>> > On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>>> >> On Nov 21, 2006, at 7:43 AM, jm wrote:
>>> >>
>>> >> > Hi,
>>> >> >
>>> >> > I have to decide between  using a RAMDirectory and  
>>> MemoryIndex, but
>>> >> > not sure what approach will work better...
>>> >> >
>>> >> > I have to run many items (tens of thousands) against some
>>> >> queries (100
>>> >> > at most), but I have to do it one item at a time. And I already
>>> >> have
>>> >> > the lucene Document associated with each item, from a previous
>>> >> > operation I perform.
>>> >> >
>>> >> > From what I read MemoryIndex should be faster, but apparently I
>>> >> cannot
>>> >> > reuse the document I already have, and I have to create a new
>>> >> > MemoryIndex per item.
>>> >>
>>> >> A MemoryIndex object holds one document.
>>> >>
>>> >> > Using the RAMDirectory I can use only one of
>>> >> > them, also one IndexWriter, and create a IndexSearcher and
>>> >> IndexReader
>>> >> > per item, for searching and removing the item each time.
>>> >> >
>>> >> > Any thoughts?
>>> >>
>>> >> The MemoryIndex impl is optimized to work efficiently without  
>>> reusing
>>> >> the MemoryIndex object for a subsequent document. See the source
>>> >> code. Reusing the object would not further improve performance.
>>> >>
>>> >> Wolfgang.
>>> >>
>>> >>  
>>> -------------------------------------------------------------------- 
>>> -
>>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >>
>>> >>
>>> >
>>> >  
>>> -------------------------------------------------------------------- 
>>> -
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 05:14:01 2006
Return-Path: <java-user-return-24671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71313 invoked from network); 23 Nov 2006 05:14:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 05:14:00 -0000
Received: (qmail 56472 invoked by uid 500); 23 Nov 2006 05:14:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56433 invoked by uid 500); 23 Nov 2006 05:14:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56418 invoked by uid 99); 23 Nov 2006 05:14:01 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 21:14:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yiqing.jin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 21:13:49 -0800
Received: by nf-out-0910.google.com with SMTP id n28so691973nfc
        for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 21:13:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cI1hCV3Lghws3PIPAmrV3jT4FuU4GAiTGOZZRPl91MOa/Gql7mjCI021E1BXhEL780GICCyGvrPpg3ROaPGrAU/5V4VA/ozgnI4GuFGm3yOSxPXWRgecVr04cdNcyT4TaSHraZ+7VuH/F2jzPAdT55/efZNlyzZHOH7yIbmtyZE=
Received: by 10.82.129.5 with SMTP id b5mr1365363bud.1164258807903;
        Wed, 22 Nov 2006 21:13:27 -0800 (PST)
Received: by 10.82.171.9 with HTTP; Wed, 22 Nov 2006 21:13:27 -0800 (PST)
Message-ID: <f7d99bf30611222113t181063dahc7f1c3ee4b54008a@mail.gmail.com>
Date: Thu, 23 Nov 2006 13:13:27 +0800
From: "Jin Yiqing" <yiqing.jin@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: labels search like google mail?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42150_2521284.1164258807881"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42150_2521284.1164258807881
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,all
     Maybe lots of u guys have used google mail. i noticed google mail has a
good feature called labels. you could select a mail then just put  labels on
it by select <more actions>-><apply label>.  The labels could be  created by
users dynamicly . Then you could list your mails just by these labels, very
fast. And one mail could have more than one label.

     I always wondering how google did this. considering the mail amont this
must be a search technology. Can Lucene also implement the same function by
now?

     i have thought about this but got no solution.  :(   So i wrote this
mail, if anyone have good suggestions i'll appreciate it very much.

     Richie

------=_Part_42150_2521284.1164258807881--

From java-user-return-24672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 07:10:40 2006
Return-Path: <java-user-return-24672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98850 invoked from network); 23 Nov 2006 07:10:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 07:10:40 -0000
Received: (qmail 71094 invoked by uid 500); 23 Nov 2006 07:10:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70460 invoked by uid 500); 23 Nov 2006 07:10:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70449 invoked by uid 99); 23 Nov 2006 07:10:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 23:10:41 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yiqing.jin@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 23:10:29 -0800
Received: by nf-out-0910.google.com with SMTP id n28so719024nfc
        for <java-user@lucene.apache.org>; Wed, 22 Nov 2006 23:10:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pZW72X4KVVWx8WN1FK55gjPB5r91zZ+FQQi1Glg8KcnD+FdkXfE5iEMn7xY5kN3y4ccvcFs535IrHCqG3iC60eaQHVcg9tYbvadQn3MehqyMuprkK/x5gHukAUIPSCYcyN3FciVRbL3vl6NeNRXUIcSTEAs9NpKdNNk7d0g/bWQ=
Received: by 10.82.164.9 with SMTP id m9mr1384132bue.1164265807515;
        Wed, 22 Nov 2006 23:10:07 -0800 (PST)
Received: by 10.82.171.9 with HTTP; Wed, 22 Nov 2006 23:10:07 -0800 (PST)
Message-ID: <f7d99bf30611222310u1b1df16es92ecdd49a38d3f6d@mail.gmail.com>
Date: Thu, 23 Nov 2006 15:10:07 +0800
From: "Jin Yiqing" <yiqing.jin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fwd: Hibernate Lucene trademark issues
In-Reply-To: <455F38BC.1040104@hibernate.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42806_15860620.1164265807469"
References: <454F459B.7000100@hibernate.org>
	 <52c3ddca0611112217m1ccc1798x67deae19c56ee9c7@mail.gmail.com>
	 <4558ECAA.2050904@hibernate.org>
	 <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com>
	 <455F1706.50905@hibernate.org> <455F38BC.1040104@hibernate.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_42806_15860620.1164265807469
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,Emmanuel
i think you did a very greate job!  Since i am now working on a system that
using lucene to implement a search engine, i would like to know some more
details about Hinbernate Search.

  I have read some of the code in Hinbernate 3.2GA release, the code is
pretty cool, but  there is one thing i doubt:

  For the update operation Hibernate Search used remove & update.which refer
to Lucene's deleteDocuments method.  That's ok and i also could only find
this way to update the index data. This will works fine when the operation
does not have high frequency.

But as i know  the remove operation in lucene only marked a tag for the
deleted document without actually delete the data ofr index files.  We know
in some systems the data would be updated in a very high  frequency(eg. an
traffic status query system), then it will not take a long time that the
index will be filled with lots of expired document data,  even if the data
update is not as fast as a traffic status, i think this problem is still
very critical since things we stored in databases are always updating.

 Is there any way to solve this in Hibernate Search?


Richie


2006/11/19, Emmanuel Bernard <emmanuel@hibernate.org>:
>
> I forgot a couple of things.
> I do not think that all your object properties belongs to the Index, and
> some of them will be put in the index with information degradation (ie
> store year/month rather than the whole date). So I do not believe there
> is a bidirectional relationship between your domain model and your index
> documents (for size, efficiency and accuracy purpose).
> For that matter, Compass cannot really truly index your database backed
> domain model and give back the object to you. Hibernate Search can
> because it delegate the object hydration to Hibernate Core.
>
> Of course that's my opinions, and some people can disagree ;-)
>
> Emmanuel Bernard wrote:
> >
> > Hi,
> > I am not really familiar with Compass I haven't really looked at the
> > code, Hibernate Lucene (now renamed Hibernate Search) started from a
> > user demand. I had some in depth discussions though, with some users
> > that evaluated both Compass and Hibernate Search that helped me drive
> > its design.
> >
> > Here are the arguments in favor of Hibernate Search:
> > 1. not Yet Another API to deal with your domain model
> > If you already use an ORM (JPA or Hibernate), you are familiar with
> > those APIs. Using compass implies that you have to use a different set
> > of API to play with the object lifecycle (CRUD).
> > Hibernate Search is integrated with the org.hibernate.Query interface,
> > and all the CUD operations on the index are triggered from the Hibernate
> > CUD operations.
> >
> > 2. Metadata
> > Metadata are minimal and fit particularly well through annotations, so
> > you don't have yet another XML representation of ther same domain model
> > (Compass might now have annotations support, you'll have to check)
> >
> > 3. it's all about managed objects (ie managed by the Session or the
> > EntityManager)
> > Hibernate Search gives you back objects managed by the Session, so any
> > change made to them will (by default) be synchronized with the database,
> > this is the normal behavior of an ORM, but is not what you have from a
> > Compass search.
> > This approach fits well with the JBoss Seam approach of having all the
> > application around the domain model and EJB 3.0
> >
> > 4. Not too much abstraction
> >  From what I've heard, Compass borrow a lot of its design / classnames
> > from Hibernate/Spring/Lucene. Compass tries to abstract those 3
> > techlnologies (at least Hibernate and Lucene), by providing its own
> > infrastructure.
> > What am trying to do with Hibernate Search is to keep the abstraction as
> > light as possible. For advanced Lucene query you'll have to use pure
> > Lucene APIs, which is possible / natural with Hibernate Search
> >
> >
> > I invite you to check these links (which I expect to release soon)
> >
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> > and for the future (but flexible)
> >
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00393.html
> >
> > HTH
> >
> > Emmanuel
> >
> > Lukas Vlcek wrote:
> > >
> > > Emanuael,
> > > I would be glad to hear your answer here (on user list).
> > > Regards,
> > > Lukas
> > >
> > > ---------- Forwarded message ----------
> > > From: Emmanuel Bernard <emmanuel@hibernate.org>
> > > Date: Nov 13, 2006 11:07 PM
> > > Subject: Re: Hibernate Lucene trademark issues
> > > To: java-dev@lucene.apache.org, lukas.vlcek@gmail.com
> > >
> > > Hi Lukas,
> > > I'd be happy to answer your question, but I don't think Lucene dev is
> > > the appropriate area for that kind of discussion.
> > > let's move this discussion here
> > > http://forum.hibernate.org/viewforum.php?f=9 (or in the Lucene User
> list
> > > if you want to).
> > >
> > > Emmanuel
> > >
> > > Lukas Vlcek wrote:
> > > >
> > > > Hi Emmanuel,
> > > >
> > > > I am interested in you solution. I have a plan to use lucene and
> > > hibernate
> > > > in my next project and search will play very important role
> > > > (*stake-holder*
> > > > functionality). I have heard of
> > > > comapss<http://www.opensymphony.com/compass/>project which
> introduces
> > > > searching (lucene) layer on top of hibernate also.
> > > > I haven't had a change to study it in detail yet.
> > > >
> > > > Do you think you could give me some high level comments about your
> > > > motivation for implementing lucene search directly in hibernate
> code,
> > > > couldn't you just use compass project? Is there any fundamental
> > > difference
> > > > between your approach and comapss?
> > > >
> > > > Many thanks,
> > > > Lukas
> > > >
> > > > On 11/6/06, Emmanuel Bernard <emmanuel@hibernate.org> wrote:
> > > > >
> > > > > Hi guys,
> > > > > I'm Emmanuel Bernard from JBoss.
> > > > > I'm the current lead developer of the Hibernate Lucene integration
> > > > module.
> > > > > The goal of this project is to facilitate the integration of a
> > search
> > > > > capability to Hibernate based applications. And guess what, I use
> > > Lucene
> > > > > ;-)
> > > > >
> > > > >
> > > >
> > >
> >
> http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
> > > > >
> > > >
> > >
> >
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> > > > >
> > > > > I realized this week end that the 'Hibernate Lucene' name might
> > > infringe
> > > > > the Apache Lucene trademark policy.
> > > > > http://www.cafepress.com/lucene/ seems to state that Lucene is a
> > > > > trademark of the Apache Software Foundation (nice golf shirt BTW)
> > > > > But I wasn't able to find any document explaining the fair use
> > of the
> > > > > Lucene brand (the license as well as the notice seem to be silent
> on
> > > > > this subject).
> > > > >
> > > > > Even if Lucene in not trademarked, what do you consider a fair
> > use of
> > > > > your brand? I'm happy to rename my project, I guess the initial
> > choice
> > > > > was more a tribute to your project than anything else.
> > > > >
> > > > > Emmanuel
> > > > >
> > > > > PS: please forward this email to the appropriate persons if this
> > > is not
> > > > > the case already (PMC or whatever)
> > > > >
> > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-dev-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_42806_15860620.1164265807469--

From java-user-return-24673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 07:42:05 2006
Return-Path: <java-user-return-24673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4375 invoked from network); 23 Nov 2006 07:42:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 07:42:04 -0000
Received: (qmail 5643 invoked by uid 500); 23 Nov 2006 07:42:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5480 invoked by uid 500); 23 Nov 2006 07:42:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5469 invoked by uid 99); 23 Nov 2006 07:42:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 22 Nov 2006 23:42:05 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 22 Nov 2006 23:41:52 -0800
Received: (qmail 10152 invoked by uid 60001); 23 Nov 2006 07:41:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=kA8+O34bgGeysS4QhBdsHPAhspQXIbQAmZoeKtI2eqebIijt7UFOF1X2Ngx2PJ/QZIsU5wM5NLpVKruoXkbX0V+Ix1x/6cKhq/SzGewua1OSeUrtqWhapWOExyuwKT7nI2pP8a6TsfTNMnpX5zer8zB6YjGFVqAV1gFoSk4V+/I=  ;
Message-ID: <20061123074131.10150.qmail@web50305.mail.yahoo.com>
Received: from [74.65.202.166] by web50305.mail.yahoo.com via HTTP; Wed, 22 Nov 2006 23:41:31 PST
Date: Wed, 22 Nov 2006 23:41:30 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Oracle and Lucene Integration
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Wow, very cool, even though I don't use Oracle anywhere at the moment.=0AYo=
u probably don't want that rowid field tokenized, by the way.=0A=0AOtis=0A=
=0A----- Original Message ----=0AFrom: Marcelo Ochoa <marcelo.ochoa@gmail.c=
om>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, November 22, 2006 =
8:44:58 AM=0ASubject: Re: Oracle and Lucene Integration=0A=0AHi Mark:=0A> V=
ery interesting.=0A>=0A> So how does this solution manage mapping Oracle pr=
imary keys to and from Lucene doc ids?=0A  I am storing the rowid value as =
a Document field, here a code sniped=0A                Document doc =3D new=
 Document();=0A                doc.add(new Field("rowid", rowid, Field.Stor=
e.YES,=0A                          Field.Index.TOKENIZED));=0A             =
   Object value =3D rs.getObject(2);=0A                String valueStr =3D =
null;=0A                if (value!=3Dnull) { // Sanity checks=0A           =
       if (value instanceof CLOB)=0A                    valueStr =3D=0A((CL=
OB)value).getSubString(1,(int)((CLOB)value).length());=0A                  =
else if (value instanceof XMLType)=0A                    valueStr =3D=0A((X=
MLType)value).extract("//text()","").getStringVal();=0A                  el=
se=0A                    valueStr =3D value.toString();=0A                 =
 doc.add(new=0AField(col,valueStr,Field.Store.NO,Field.Index.TOKENIZED));=
=0A                  writer.addDocument(doc);=0A=0A  So when I am querying =
I can get the rowid back using:=0A                if (iterator.hasNext()) {=
=0A                    // append rowid to collection=0A                    =
Hit hit =3D (Hit) iterator.next();=0A                    try {=0A          =
              rid =3D  hit.get("rowid");=0A                        score =
=3D hit.getScore();=0A                    } catch (IOException e) {=0A     =
                   e.printStackTrace();=0A                        throw new=
 SQLException(e.getMessage());=0A                    }=0A                  =
  rlist[i] =3D new String(rid);=0A                    slist.put(rid,new Flo=
at(score));=0A                    idx++;=0A                } else {........=
.....=0A  and passing the rowid to the Oracle execution plan which is=0Acol=
lecting in bacth of 2000 rowids.=0A>=0A> >> Another benefits of using the D=
ata Cartridge API is that if the=0A> >>table T1 has insert, update or delet=
e rows operations a corresponding=0A> >>Java method will be called to autom=
atically update the Lucene Index.=0A>=0A> I suspect the tricky bit is optim=
izing the opening/closing of Lucene IndexReaders/Writers especially in the =
event of large batches of database updates.=0A> Does this API pass the tran=
sactional info which would help organize the batching of the Lucene reader.=
delete and writer.add calls?=0A  Well, I think that Oracle Text uses a Queu=
e to store large batches,=0Abecause it use a ctx_sys.sync procedure to upda=
te the index ;)=0A  We can make the same solution using Oracle AQ.=0A>=0A> =
Cheers=0A> Mark=0A Best regards, Marcelo.=0A-- =0AMarcelo F. Ochoa=0Ahttp:/=
/marcelo.ochoa.googlepages.com/home=0A______________=0ADo you Know DBPrism?=
 Look @ DB Prism's Web Site=0Ahttp://www.dbprism.com.ar/index.html=0AMore i=
nfo?=0AChapter 17 of the book "Programming the Oracle Database using Java &=
=0AWeb Services"=0Ahttp://www.amazon.com/gp/product/1555583296/=0AChapter 2=
1 of the book "Professional XML Databases" - Wrox Press=0Ahttp://www.amazon=
.com/gp/product/1861003587/=0AChapter 8 of the book "Oracle & Open Source" =
- O'Reilly=0Ahttp://www.oreilly.com/catalog/oracleopen/=0A=0A--------------=
-------------------------------------------------------=0ATo unsubscribe, e=
-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e=
-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 09:24:07 2006
Return-Path: <java-user-return-24674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49949 invoked from network); 23 Nov 2006 09:24:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 09:24:06 -0000
Received: (qmail 72575 invoked by uid 500); 23 Nov 2006 09:24:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72295 invoked by uid 500); 23 Nov 2006 09:24:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72284 invoked by uid 99); 23 Nov 2006 09:24:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 01:24:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 01:23:56 -0800
Received: by nf-out-0910.google.com with SMTP id n28so750058nfc
        for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 01:23:35 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bohI6u9vJ+C+5NBod9G3osIvHgAak3vJktQpyOo2kRFMaXCmpy0BD8X2ISB4IxL6viRbtrMF71sDGdKfZu7JKnbpLsilYb/DkBnUO94OV1uh+KqcICwlsC4C66166dJOnMqMkV9OMCgF0RK/n7heZftjx6ty8HQKG5DgLhnrtAs=
Received: by 10.78.157.8 with SMTP id f8mr8817554hue.1164273814722;
        Thu, 23 Nov 2006 01:23:34 -0800 (PST)
Received: by 10.78.200.9 with HTTP; Thu, 23 Nov 2006 01:23:29 -0800 (PST)
Message-ID: <f071061b0611230123u52abd842td35a041c25e2c8ba@mail.gmail.com>
Date: Thu, 23 Nov 2006 10:23:29 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory vs MemoryIndex
In-Reply-To: <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
	 <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com>
	 <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com>
	 <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com>
	 <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com>
	 <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com>
	 <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

thanks. I'll try to get this working and see wether there is a perf
difference during the weekend.

On 11/23/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> Out of interest, I've checked an implementation of something like
> this into AnalyzerUtil SVN trunk:
>
>    /**
>     * Returns an analyzer wrapper that caches all tokens generated by
> the underlying child analyzer's
>     * token stream, and delivers those cached tokens on subsequent
> calls to
>     * <code>tokenStream(String fieldName, Reader reader)</code>.
>     * <p>
>     * This can help improve performance in the presence of expensive
> Analyzer / TokenFilter chains.
>     * <p>
>     * Caveats:
>     * 1) Caching only works if the methods equals() and hashCode()
> methods are properly
>     * implemented on the Reader passed to <code>tokenStream(String
> fieldName, Reader reader)</code>.
>     * 2) Caching the tokens of large Lucene documents can lead to out
> of memory exceptions.
>     * 3) The Token instances delivered by the underlying child
> analyzer must be immutable.
>     *
>     * @param child
>     *            the underlying child analyzer
>     * @return a new analyzer
>     */
>    public static Analyzer getTokenCachingAnalyzer(final Analyzer
> child) { ... }
>
>
> Check it out, and let me know if this is close to what you had in mind.
>
> Wolfgang.
>
> On Nov 22, 2006, at 9:19 AM, Wolfgang Hoschek wrote:
>
> > I've never tried it, but I guess you could write an Analyzer and
> > TokenFilter that no only feeds into IndexWriter on
> > IndexWriter.addDocument(), but as a sneaky side effect also
> > simultaneously saves its tokens into a list so that you could later
> > turn that list into another TokenStream to be added to MemoryIndex.
> > How much this might help depends on how expensive your analyzer
> > chain is. For some examples on how to set up analyzers for chains
> > of token streams, see MemoryIndex.keywordTokenStream and class
> > AnalzyerUtil in the same package.
> >
> > Wolfgang.
> >
> > On Nov 22, 2006, at 4:15 AM, jm wrote:
> >
> >> checking one last thing, just in case...
> >>
> >> as I mentioned, I have previously indexed the same document in
> >> another
> >> index (for another purpose), as I am going to use the same analyzer,
> >> would it be possible to avoid analyzing the doc again?
> >>
> >> I see IndexWriter.addDocument() returns void, so it does not seem to
> >> be an easy way to do that no?
> >>
> >> thanks
> >>
> >> On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> >>>
> >>> On Nov 21, 2006, at 12:38 PM, jm wrote:
> >>>
> >>> > Ok, thanks, I'll give MemoryIndex a go, and if that is not good
> >>> enoguh
> >>> > I will explore the other options then.
> >>>
> >>> To get started you can use something like this:
> >>>
> >>> for each document D:
> >>>      MemoryIndex index = createMemoryIndex(D, ...)
> >>>      for each query Q:
> >>>          float score = index.search(Q)
> >>>         if (score > 0.0) System.out.println("it's a match");
> >>>
> >>>
> >>>
> >>>
> >>>    private MemoryIndex createMemoryIndex(Document doc, Analyzer
> >>> analyzer) {
> >>>      MemoryIndex index = new MemoryIndex();
> >>>      Enumeration iter = doc.fields();
> >>>      while (iter.hasMoreElements()) {
> >>>        Field field = (Field) iter.nextElement();
> >>>        index.addField(field.name(), field.stringValue(), analyzer);
> >>>      }
> >>>      return index;
> >>>    }
> >>>
> >>>
> >>>
> >>> >
> >>> >
> >>> > On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> >>> >> On Nov 21, 2006, at 7:43 AM, jm wrote:
> >>> >>
> >>> >> > Hi,
> >>> >> >
> >>> >> > I have to decide between  using a RAMDirectory and
> >>> MemoryIndex, but
> >>> >> > not sure what approach will work better...
> >>> >> >
> >>> >> > I have to run many items (tens of thousands) against some
> >>> >> queries (100
> >>> >> > at most), but I have to do it one item at a time. And I already
> >>> >> have
> >>> >> > the lucene Document associated with each item, from a previous
> >>> >> > operation I perform.
> >>> >> >
> >>> >> > From what I read MemoryIndex should be faster, but apparently I
> >>> >> cannot
> >>> >> > reuse the document I already have, and I have to create a new
> >>> >> > MemoryIndex per item.
> >>> >>
> >>> >> A MemoryIndex object holds one document.
> >>> >>
> >>> >> > Using the RAMDirectory I can use only one of
> >>> >> > them, also one IndexWriter, and create a IndexSearcher and
> >>> >> IndexReader
> >>> >> > per item, for searching and removing the item each time.
> >>> >> >
> >>> >> > Any thoughts?
> >>> >>
> >>> >> The MemoryIndex impl is optimized to work efficiently without
> >>> reusing
> >>> >> the MemoryIndex object for a subsequent document. See the source
> >>> >> code. Reusing the object would not further improve performance.
> >>> >>
> >>> >> Wolfgang.
> >>> >>
> >>> >>
> >>> --------------------------------------------------------------------
> >>> -
> >>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>> >>
> >>> >>
> >>> >
> >>> >
> >>> --------------------------------------------------------------------
> >>> -
> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >>> >
> >>>
> >>>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 09:24:23 2006
Return-Path: <java-user-return-24675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50216 invoked from network); 23 Nov 2006 09:24:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 09:24:23 -0000
Received: (qmail 74378 invoked by uid 500); 23 Nov 2006 09:24:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74350 invoked by uid 500); 23 Nov 2006 09:24:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74339 invoked by uid 99); 23 Nov 2006 09:24:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 01:24:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of clamprecht@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 01:24:14 -0800
Received: by nf-out-0910.google.com with SMTP id n28so750137nfc
        for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 01:23:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DQaXo/2ic2KrJJeHaO4qlg2yRq5rUy7b/RDkSCZFIBmfH4SK78piqMgyUd6U51Tbs4zy1wwvWl3WXGlYgmYSn4erLXbn7fdRzVPCLdBfoBxrQHDarlNLjwyWJwzc3u7EcM5xLf+H60uYQ3i3PQD3q6ajg18uyLUSRf9F9q8uj74=
Received: by 10.49.41.12 with SMTP id t12mr3704780nfj.1164273832804;
        Thu, 23 Nov 2006 01:23:52 -0800 (PST)
Received: by 10.48.216.16 with HTTP; Thu, 23 Nov 2006 01:23:52 -0800 (PST)
Message-ID: <88c6a6720611230123g7e7fafa5lf384a02b369881cf@mail.gmail.com>
Date: Thu, 23 Nov 2006 03:23:52 -0600
From: "Chris Lamprecht" <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: labels search like google mail?
In-Reply-To: <f7d99bf30611222113t181063dahc7f1c3ee4b54008a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55920_20257566.1164273832757"
References: <f7d99bf30611222113t181063dahc7f1c3ee4b54008a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_55920_20257566.1164273832757
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure.. using Lucene you could have a field called "labels" (or "tags", as
everyone except google calls them), and just add a bunch of keyword field
values to the field, one for each tag.   The tricky part might be doing this
quickly -- right when the user adds a tag, updating the lucene index -- if
your project requires this.  Or if you're using a database, it might make
sense to just use the database instead of lucene for this particular feature
(DB updates are typically more straightforward than "updating" a lucene
document).

-chris

On 11/22/06, Jin Yiqing <yiqing.jin@gmail.com> wrote:
>
> Hi,all
>      Maybe lots of u guys have used google mail. i noticed google mail has
> a
> good feature called labels. you could select a mail then just put  labels
> on
> it by select <more actions>-><apply label>.  The labels could be  created
> by
> users dynamicly . Then you could list your mails just by these labels,
> very
> fast. And one mail could have more than one label.
>
>      I always wondering how google did this. considering the mail amont
> this
> must be a search technology. Can Lucene also implement the same function
> by
> now?
>
>      i have thought about this but got no solution.  :(   So i wrote this
> mail, if anyone have good suggestions i'll appreciate it very much.
>
>      Richie
>
>

------=_Part_55920_20257566.1164273832757--

From java-user-return-24676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 10:35:57 2006
Return-Path: <java-user-return-24676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65095 invoked from network); 23 Nov 2006 10:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 10:35:56 -0000
Received: (qmail 94692 invoked by uid 500); 23 Nov 2006 10:36:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94657 invoked by uid 500); 23 Nov 2006 10:36:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94646 invoked by uid 99); 23 Nov 2006 10:36:00 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 02:36:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 02:35:46 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GnBvR-0004N2-Va
	for java-user@lucene.apache.org; Thu, 23 Nov 2006 02:35:25 -0800
Message-ID: <7506220.post@talk.nabble.com>
Date: Thu, 23 Nov 2006 02:35:25 -0800 (PST)
From: sirakov <sirakov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie Search Question
In-Reply-To: <29AA93ED-F339-49BB-8D37-E4DDF0D987A5@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sirakov@gmail.com
References: <7438630.post@talk.nabble.com> <29AA93ED-F339-49BB-8D37-E4DDF0D987A5@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org


thanky you for the info :) i've showed and tried to use the example, but I
get following error message

Query: test
Searching for: test
Fields are:
java.lang. NullPointerException
	 at java.io. String reader. <init> (Unknown Source)
	 at org.apache.lucene.demo. SearchFiles.main (SearchFiles.java:158)
15 totally matching documents

Line 158 is:

TokenStream tokenStream = analyzer.tokenStream (field, new string reader
(text));

The variable "text" is a "null".

my question is: should I index the files differently or should I use some
parameters?
-- 
View this message in context: http://www.nabble.com/Newbie-Search-Question-tf2667479.html#a7506220
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 11:05:28 2006
Return-Path: <java-user-return-24677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71716 invoked from network); 23 Nov 2006 11:05:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 11:05:26 -0000
Received: (qmail 47445 invoked by uid 500); 23 Nov 2006 11:05:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47407 invoked by uid 500); 23 Nov 2006 11:05:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47396 invoked by uid 99); 23 Nov 2006 11:05:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 03:05:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 03:05:14 -0800
Received: from lettmelk [212.4.54.150] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id AB0103E0; Thu, 23 Nov 2006 11:42:09 +0100
Date: Thu, 23 Nov 2006 12:04:42 +0100
To: java-user@lucene.apache.org
Subject: Re: Reviving a dead index
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <44F3F64B.8030709@sirma.bg> <44F42594.3040609@mikemccandless.com> <44F58F36.6040307@sirma.bg> <44F63E84.7080402@mikemccandless.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.tjgud4anoftp72@lettmelk>
In-Reply-To: <44F63E84.7080402@mikemccandless.com>
User-Agent: Opera Mail/9.02 (Win32)
X-Antivirus: avast! (VPS 0650-1, 11/22/2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.150]
X-Declude-Spoolname: D7b010a860000b068.smd
X-Virus-Checked: Checked by ClamAV on apache.org

Hey, saw this old thread, and was just wondering if any of you solved the  
problem? Same has happened to me now. Couldn't really trace back to the  
origin of the problem, but the segments file references a segment that is  
obviously corrupt/not complete...

I thought i might remove the uncomplete segment, but then i guess this  
would f* up my segments file. Any taker on how to remove the segment in  
question, and make the rest of the index work again?.. Since i guess its  
not as straightforward to just remove the segmentname from the segments  
file without changing some of the other crytic bytes aswell..?

- Aleksander


On Thu, 31 Aug 2006 03:42:28 +0200, Michael McCandless  
<lucene@mikemccandless.com> wrote:

> Stanislav Jordanov wrote:
>
>> For a moment I wondered what exactly do you mean by "compound file"?
>> Then I read http://lucene.apache.org/java/docs/fileformats.html and got  
>> the idea.
>> I do not have access to that specific machine that all this is  
>> happening at.
>> It is a 80x86 machine running Win 2003 server;
>> Sorry, but they neglected my question about the index is stored on a  
>> Local FS or on a NFS.
>> I was only able to obtain a directory listing of the index dir and  
>> guess what - there's no a /*_1j8s.cfs * /file at all!
>> Pitty, I can't have a look at segments file, but I guess it lists the  
>> _1j8s
>> Given these scarce resources, can you give me some further advise about  
>> what has happened and what can be done to prevent it from happening  
>> again?
>
> I'm assuming this is easily repeated (question from my last email) and
> not a transient error?  If it's transient, this could be explained by
> locking not working properly.
>
> If it's not transient (ie, happens every time you open this index),
> it sounds like indeed the segments file is referencing a segment that
> does not exist.
>
> But, how the index got into this state is a mystery.  I don't know of
> any existing Lucene bugs that can do this.  Furthermore, crashing
> an indexing process should not lead to this (it can lead to other things
> like only have a segments.new file and no segments file).
>
> Were there any earlier exceptions (before indexing hit an "improper
> shutdown") in your indexing process that could give a clue as to root
> cause?  Or for example was the machine rebooted and did windows to run
> a "filesystem check" on rebooting this box (which can remove corrupt
> files)?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 11:40:00 2006
Return-Path: <java-user-return-24678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85474 invoked from network); 23 Nov 2006 11:39:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 11:39:57 -0000
Received: (qmail 14398 invoked by uid 500); 23 Nov 2006 11:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14371 invoked by uid 500); 23 Nov 2006 11:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14360 invoked by uid 99); 23 Nov 2006 11:39:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 03:39:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 03:39:45 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by out1.messagingengine.com (Postfix) with ESMTP id 2F934910F
	for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 06:39:25 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Thu, 23 Nov 2006 06:39:25 -0500
X-Sasl-enc: pfTS7Os5EMXdvNTjebb9ce/JmwhW/mfo+zzQKQKVNzUe 1164281964
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id EA29EAE4E
	for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 06:39:24 -0500 (EST)
Message-ID: <45658867.90902@mikemccandless.com>
Date: Thu, 23 Nov 2006 06:39:19 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Reviving a dead index
References: <44F3F64B.8030709@sirma.bg> <44F42594.3040609@mikemccandless.com> <44F58F36.6040307@sirma.bg> <44F63E84.7080402@mikemccandless.com> <op.tjgud4anoftp72@lettmelk>
In-Reply-To: <op.tjgud4anoftp72@lettmelk>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Aleksander M. Stensby wrote:
> Hey, saw this old thread, and was just wondering if any of you solved 
> the problem? Same has happened to me now. Couldn't really trace back to 
> the origin of the problem, but the segments file references a segment 
> that is obviously corrupt/not complete...
> 
> I thought i might remove the uncomplete segment, but then i guess this 
> would f* up my segments file. Any taker on how to remove the segment in 
> question, and make the rest of the index work again?.. Since i guess its 
> not as straightforward to just remove the segmentname from the segments 
> file without changing some of the other crytic bytes aswell..?

I don't think the root cause was ever uncovered on this thread.

Do you have any copying process to move your index from one machine to
another, or across mount points on the same machine, or anything?  A
copying step has been the cause of similar corruption in past issues.
I would really like to get to the root cause of any and all
corruption.

To recover your index, it would be fairly simple to write a tool that
reads the segments files, removes the known bad segments, and writes
the segments file back out.  Something like this (I haven't tested!):

   Directory dir = FSDirectory.getDirectory("/path/to/my/index", false);
   SegmentInfos sis = new SegmentInfos();
   sis.read(dir);
   for(int i=0;i<sis.size();i++) {
     SegmentInfo si = (SegmentInfo) sis.elementAt(i);
     if (si.name.equals("_XXXX")) {
       sis.removeElementAt(i);
       break;
     }
   }
   sis.write(dir);

Please make a backup copy of your index before running this in case
it messes anything up!!

And note that by removing an entire segment, many documents are now
gone from your index.  Determining which ones are gone and must be
reindexed is not particularly easy unless you have a way to do so in
your application...

Also note that Lucene will not delete the now un-referenced (bad)
segment file (ie, _XXXX.cfs, and other _XXXX files like _XXXX.del if
it exists) so you will have to do that step manually.  (The current
"trunk" version of Lucene does in fact remove unreferenced index
files correctly but this hasn't been released yet).

Mike

> 
> - Aleksander
> 
> 
> On Thu, 31 Aug 2006 03:42:28 +0200, Michael McCandless 
> <lucene@mikemccandless.com> wrote:
> 
>> Stanislav Jordanov wrote:
>>
>>> For a moment I wondered what exactly do you mean by "compound file"?
>>> Then I read http://lucene.apache.org/java/docs/fileformats.html and 
>>> got the idea.
>>> I do not have access to that specific machine that all this is 
>>> happening at.
>>> It is a 80x86 machine running Win 2003 server;
>>> Sorry, but they neglected my question about the index is stored on a 
>>> Local FS or on a NFS.
>>> I was only able to obtain a directory listing of the index dir and 
>>> guess what - there's no a /*_1j8s.cfs * /file at all!
>>> Pitty, I can't have a look at segments file, but I guess it lists the 
>>> _1j8s
>>> Given these scarce resources, can you give me some further advise 
>>> about what has happened and what can be done to prevent it from 
>>> happening again?
>>
>> I'm assuming this is easily repeated (question from my last email) and
>> not a transient error?  If it's transient, this could be explained by
>> locking not working properly.
>>
>> If it's not transient (ie, happens every time you open this index),
>> it sounds like indeed the segments file is referencing a segment that
>> does not exist.
>>
>> But, how the index got into this state is a mystery.  I don't know of
>> any existing Lucene bugs that can do this.  Furthermore, crashing
>> an indexing process should not lead to this (it can lead to other things
>> like only have a segments.new file and no segments file).
>>
>> Were there any earlier exceptions (before indexing hit an "improper
>> shutdown") in your indexing process that could give a clue as to root
>> cause?  Or for example was the machine rebooted and did windows to run
>> a "filesystem check" on rebooting this box (which can remove corrupt
>> files)?
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> 
> --Aleksander M. Stensby
> Software Developer
> Integrasco A/S
> aleksander.stensby@integrasco.no
> Tlf.: +47 41 22 82 72
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 12:23:38 2006
Return-Path: <java-user-return-24679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94684 invoked from network); 23 Nov 2006 12:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 12:23:38 -0000
Received: (qmail 84661 invoked by uid 500); 23 Nov 2006 12:23:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84604 invoked by uid 500); 23 Nov 2006 12:23:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84577 invoked by uid 99); 23 Nov 2006 12:23:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 04:23:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 04:23:14 -0800
Received: by ug-out-1314.google.com with SMTP id k40so417627ugc
        for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 04:22:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=A9G9UDoEiU6RfFplYGLzkPJTWApUC9P9q+wX+X/f5k+pPcyySAnWiYCn+ZTnQL6b1XRGFfyos6Zz9VPGXRodWs2N9d5e7kHoqSoXP0s12VAKBU0JMaRFZ+eW21u39VOm0jzK7VXGjkBaBNrRV+XEOMxdqDFuYoSK4Z2CkZNsMJw=
Received: by 10.78.136.9 with SMTP id j9mr8995303hud.1164284571727;
        Thu, 23 Nov 2006 04:22:51 -0800 (PST)
Received: by 10.78.145.11 with HTTP; Thu, 23 Nov 2006 04:22:51 -0800 (PST)
Message-ID: <126142c0611230422k7cd31c2u3978bb9bd0432517@mail.gmail.com>
Date: Thu, 23 Nov 2006 09:22:51 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Oracle and Lucene Integration
In-Reply-To: <20061123074131.10150.qmail@web50305.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061123074131.10150.qmail@web50305.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Otis:
  I am new to Lucene API and searching technologies :)

                  doc.add(new Field("rowid", rowid, Field.Store.YES,
                          Field.Index.UN_TOKENIZED));
                  Done!!.

  Also the Oracle ROWID format has a portion which can be used as the
document id into the Lucene document, this will simplify the delete
operation, for example, because with the rowid we can use
reader.deleteDocument(idFromRowIDValue).
http://download-east.oracle.com/docs/cd/B19306_01/server.102/b14220/datatype.htm#sthref3899
  But I don't know how to add documents with an specific id.
  Somebody can help me showing a code snipped with an adding operation
using a predefined ID?
  Rowid number start with 0 and are sequentially assigned.
  Best regards, Marcelo.

On 11/23/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Wow, very cool, even though I don't use Oracle anywhere at the moment.
> You probably don't want that rowid field tokenized, by the way.
>
> Otis
>
> ----- Original Message ----
> From: Marcelo Ochoa <marcelo.ochoa@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, November 22, 2006 8:44:58 AM
> Subject: Re: Oracle and Lucene Integration
>
> Hi Mark:
> > Very interesting.
> >
> > So how does this solution manage mapping Oracle primary keys to and from Lucene doc ids?
>   I am storing the rowid value as a Document field, here a code sniped
>                 Document doc = new Document();
>                 doc.add(new Field("rowid", rowid, Field.Store.YES,
>                           Field.Index.TOKENIZED));
>                 Object value = rs.getObject(2);
>                 String valueStr = null;
>                 if (value!=null) { // Sanity checks
>                   if (value instanceof CLOB)
>                     valueStr =
> ((CLOB)value).getSubString(1,(int)((CLOB)value).length());
>                   else if (value instanceof XMLType)
>                     valueStr =
> ((XMLType)value).extract("//text()","").getStringVal();
>                   else
>                     valueStr = value.toString();
>                   doc.add(new
> Field(col,valueStr,Field.Store.NO,Field.Index.TOKENIZED));
>                   writer.addDocument(doc);
>
>   So when I am querying I can get the rowid back using:
>                 if (iterator.hasNext()) {
>                     // append rowid to collection
>                     Hit hit = (Hit) iterator.next();
>                     try {
>                         rid =  hit.get("rowid");
>                         score = hit.getScore();
>                     } catch (IOException e) {
>                         e.printStackTrace();
>                         throw new SQLException(e.getMessage());
>                     }
>                     rlist[i] = new String(rid);
>                     slist.put(rid,new Float(score));
>                     idx++;
>                 } else {.............
>   and passing the rowid to the Oracle execution plan which is
> collecting in bacth of 2000 rowids.
> >
> > >> Another benefits of using the Data Cartridge API is that if the
> > >>table T1 has insert, update or delete rows operations a corresponding
> > >>Java method will be called to automatically update the Lucene Index.
> >
> > I suspect the tricky bit is optimizing the opening/closing of Lucene IndexReaders/Writers especially in the event of large batches of database updates.
> > Does this API pass the transactional info which would help organize the batching of the Lucene reader.delete and writer.add calls?
>   Well, I think that Oracle Text uses a Queue to store large batches,
> because it use a ctx_sys.sync procedure to update the index ;)
>   We can make the same solution using Oracle AQ.
> >
> > Cheers
> > Mark
>  Best regards, Marcelo.
> --
> Marcelo F. Ochoa
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Do you Know DBPrism? Look @ DB Prism's Web Site
> http://www.dbprism.com.ar/index.html
> More info?
> Chapter 17 of the book "Programming the Oracle Database using Java &
> Web Services"
> http://www.amazon.com/gp/product/1555583296/
> Chapter 21 of the book "Professional XML Databases" - Wrox Press
> http://www.amazon.com/gp/product/1861003587/
> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
> http://www.oreilly.com/catalog/oracleopen/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 12:33:11 2006
Return-Path: <java-user-return-24680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96497 invoked from network); 23 Nov 2006 12:33:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 12:33:09 -0000
Received: (qmail 99739 invoked by uid 500); 23 Nov 2006 12:33:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99655 invoked by uid 500); 23 Nov 2006 12:33:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99625 invoked by uid 99); 23 Nov 2006 12:33:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 04:33:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 04:32:56 -0800
Received: from lettmelk [212.4.54.150] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id AF8C05E8; Thu, 23 Nov 2006 13:09:48 +0100
Date: Thu, 23 Nov 2006 13:32:21 +0100
To: java-user@lucene.apache.org
Subject: Re: Reviving a dead index
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <44F3F64B.8030709@sirma.bg> <44F42594.3040609@mikemccandless.com> <44F58F36.6040307@sirma.bg> <44F63E84.7080402@mikemccandless.com> <op.tjgud4anoftp72@lettmelk> <45658867.90902@mikemccandless.com>
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.tjgyf7i6oftp72@lettmelk>
In-Reply-To: <45658867.90902@mikemccandless.com>
User-Agent: Opera Mail/9.02 (Win32)
X-Antivirus: avast! (VPS 0650-1, 11/22/2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.150]
X-Declude-Spoolname: D8f8c003c0000bda0.smd
X-Virus-Checked: Checked by ClamAV on apache.org

works like a charm Michael! (only thing is that SegmentInfos / SegmentIn=
fo  =

are final classe, (which I didnt know) so i was bugging around to really=
  =

find the classes:) heh.

I was able to remove the broken segment. I must now get the MAX(id) from=
  =

the clean remaining segments, then just regenerate from that point on.  =

(ive indexed the ids, so thats a good pinpoint.)

Anyways, thanx! My logrotation was broken so was unable to trace back th=
e  =

root cause, but will report if it happens again!

On Thu, 23 Nov 2006 12:39:19 +0100, Michael McCandless  =

<lucene@mikemccandless.com> wrote:

> Aleksander M. Stensby wrote:
>> Hey, saw this old thread, and was just wondering if any of you solved=
  =

>> the problem? Same has happened to me now. Couldn't really trace back =
to  =

>> the origin of the problem, but the segments file references a segment=
  =

>> that is obviously corrupt/not complete...
>>  I thought i might remove the uncomplete segment, but then i guess th=
is  =

>> would f* up my segments file. Any taker on how to remove the segment =
in  =

>> question, and make the rest of the index work again?.. Since i guess =
 =

>> its not as straightforward to just remove the segmentname from the  =

>> segments file without changing some of the other crytic bytes aswell.=
.?
>
> I don't think the root cause was ever uncovered on this thread.
>
> Do you have any copying process to move your index from one machine to=

> another, or across mount points on the same machine, or anything?  A
> copying step has been the cause of similar corruption in past issues.
> I would really like to get to the root cause of any and all
> corruption.
>
> To recover your index, it would be fairly simple to write a tool that
> reads the segments files, removes the known bad segments, and writes
> the segments file back out.  Something like this (I haven't tested!):
>
>    Directory dir =3D FSDirectory.getDirectory("/path/to/my/index", fal=
se);
>    SegmentInfos sis =3D new SegmentInfos();
>    sis.read(dir);
>    for(int i=3D0;i<sis.size();i++) {
>      SegmentInfo si =3D (SegmentInfo) sis.elementAt(i);
>      if (si.name.equals("_XXXX")) {
>        sis.removeElementAt(i);
>        break;
>      }
>    }
>    sis.write(dir);
>
> Please make a backup copy of your index before running this in case
> it messes anything up!!
>
> And note that by removing an entire segment, many documents are now
> gone from your index.  Determining which ones are gone and must be
> reindexed is not particularly easy unless you have a way to do so in
> your application...
>
> Also note that Lucene will not delete the now un-referenced (bad)
> segment file (ie, _XXXX.cfs, and other _XXXX files like _XXXX.del if
> it exists) so you will have to do that step manually.  (The current
> "trunk" version of Lucene does in fact remove unreferenced index
> files correctly but this hasn't been released yet).
>
> Mike
>
>>  - Aleksander
>>   On Thu, 31 Aug 2006 03:42:28 +0200, Michael McCandless  =

>> <lucene@mikemccandless.com> wrote:
>>
>>> Stanislav Jordanov wrote:
>>>
>>>> For a moment I wondered what exactly do you mean by "compound file"=
?
>>>> Then I read http://lucene.apache.org/java/docs/fileformats.html and=
  =

>>>> got the idea.
>>>> I do not have access to that specific machine that all this is  =

>>>> happening at.
>>>> It is a 80x86 machine running Win 2003 server;
>>>> Sorry, but they neglected my question about the index is stored on =
a  =

>>>> Local FS or on a NFS.
>>>> I was only able to obtain a directory listing of the index dir and =
 =

>>>> guess what - there's no a /*_1j8s.cfs * /file at all!
>>>> Pitty, I can't have a look at segments file, but I guess it lists t=
he  =

>>>> _1j8s
>>>> Given these scarce resources, can you give me some further advise  =

>>>> about what has happened and what can be done to prevent it from  =

>>>> happening again?
>>>
>>> I'm assuming this is easily repeated (question from my last email) a=
nd
>>> not a transient error?  If it's transient, this could be explained b=
y
>>> locking not working properly.
>>>
>>> If it's not transient (ie, happens every time you open this index),
>>> it sounds like indeed the segments file is referencing a segment tha=
t
>>> does not exist.
>>>
>>> But, how the index got into this state is a mystery.  I don't know o=
f
>>> any existing Lucene bugs that can do this.  Furthermore, crashing
>>> an indexing process should not lead to this (it can lead to other  =

>>> things
>>> like only have a segments.new file and no segments file).
>>>
>>> Were there any earlier exceptions (before indexing hit an "improper
>>> shutdown") in your indexing process that could give a clue as to roo=
t
>>> cause?  Or for example was the machine rebooted and did windows to r=
un
>>> a "filesystem check" on rebooting this box (which can remove corrupt=

>>> files)?
>>>
>>> Mike
>>>
>>> --------------------------------------------------------------------=
-
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>    --Aleksander M. Stensby
>> Software Developer
>> Integrasco A/S
>> aleksander.stensby@integrasco.no
>> Tlf.: +47 41 22 82 72
>>  --------------------------------------------------------------------=
-
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- =

Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 12:36:26 2006
Return-Path: <java-user-return-24681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97252 invoked from network); 23 Nov 2006 12:36:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 12:36:26 -0000
Received: (qmail 10241 invoked by uid 500); 23 Nov 2006 12:36:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10053 invoked by uid 500); 23 Nov 2006 12:36:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10036 invoked by uid 99); 23 Nov 2006 12:36:27 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 04:36:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.4.36.66] (HELO mail.agderweb.no) (212.4.36.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 04:36:14 -0800
Received: from lettmelk [212.4.54.150] by mail.agderweb.no with ESMTP
  (SMTPD-8.22) id A05903AC; Thu, 23 Nov 2006 13:13:13 +0100
To: java-user@lucene.apache.org
Subject: Re: Reviving a dead index
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <44F3F64B.8030709@sirma.bg> <44F42594.3040609@mikemccandless.com> <44F58F36.6040307@sirma.bg> <44F63E84.7080402@mikemccandless.com> <op.tjgud4anoftp72@lettmelk> <45658867.90902@mikemccandless.com>
Content-Transfer-Encoding: Quoted-Printable
Date: Thu, 23 Nov 2006 13:35:46 +0100
Message-ID: <op.tjgylwzloftp72@lettmelk>
In-Reply-To: <45658867.90902@mikemccandless.com>
User-Agent: Opera Mail/9.02 (Win32)
X-Antivirus: avast! (VPS 0650-1, 11/22/2006), Outbound message
X-Antivirus-Status: Clean
X-Declude-Sender: aleksander.stensby@integrasco.no [212.4.54.150]
X-Declude-Spoolname: D90590ac40000be44.smd
X-Virus-Checked: Checked by ClamAV on apache.org

One last thing... can i be sure that the latest inserted documents in fa=
ct  =

was inserted into that broken segment? Or are they placed randomly in th=
e  =

different segments?

- Aleks

On Thu, 23 Nov 2006 12:39:19 +0100, Michael McCandless  =

<lucene@mikemccandless.com> wrote:

> Aleksander M. Stensby wrote:
>> Hey, saw this old thread, and was just wondering if any of you solved=
  =

>> the problem? Same has happened to me now. Couldn't really trace back =
to  =

>> the origin of the problem, but the segments file references a segment=
  =

>> that is obviously corrupt/not complete...
>>  I thought i might remove the uncomplete segment, but then i guess th=
is  =

>> would f* up my segments file. Any taker on how to remove the segment =
in  =

>> question, and make the rest of the index work again?.. Since i guess =
 =

>> its not as straightforward to just remove the segmentname from the  =

>> segments file without changing some of the other crytic bytes aswell.=
.?
>
> I don't think the root cause was ever uncovered on this thread.
>
> Do you have any copying process to move your index from one machine to=

> another, or across mount points on the same machine, or anything?  A
> copying step has been the cause of similar corruption in past issues.
> I would really like to get to the root cause of any and all
> corruption.
>
> To recover your index, it would be fairly simple to write a tool that
> reads the segments files, removes the known bad segments, and writes
> the segments file back out.  Something like this (I haven't tested!):
>
>    Directory dir =3D FSDirectory.getDirectory("/path/to/my/index", fal=
se);
>    SegmentInfos sis =3D new SegmentInfos();
>    sis.read(dir);
>    for(int i=3D0;i<sis.size();i++) {
>      SegmentInfo si =3D (SegmentInfo) sis.elementAt(i);
>      if (si.name.equals("_XXXX")) {
>        sis.removeElementAt(i);
>        break;
>      }
>    }
>    sis.write(dir);
>
> Please make a backup copy of your index before running this in case
> it messes anything up!!
>
> And note that by removing an entire segment, many documents are now
> gone from your index.  Determining which ones are gone and must be
> reindexed is not particularly easy unless you have a way to do so in
> your application...
>
> Also note that Lucene will not delete the now un-referenced (bad)
> segment file (ie, _XXXX.cfs, and other _XXXX files like _XXXX.del if
> it exists) so you will have to do that step manually.  (The current
> "trunk" version of Lucene does in fact remove unreferenced index
> files correctly but this hasn't been released yet).
>
> Mike
>
>>  - Aleksander
>>   On Thu, 31 Aug 2006 03:42:28 +0200, Michael McCandless  =

>> <lucene@mikemccandless.com> wrote:
>>
>>> Stanislav Jordanov wrote:
>>>
>>>> For a moment I wondered what exactly do you mean by "compound file"=
?
>>>> Then I read http://lucene.apache.org/java/docs/fileformats.html and=
  =

>>>> got the idea.
>>>> I do not have access to that specific machine that all this is  =

>>>> happening at.
>>>> It is a 80x86 machine running Win 2003 server;
>>>> Sorry, but they neglected my question about the index is stored on =
a  =

>>>> Local FS or on a NFS.
>>>> I was only able to obtain a directory listing of the index dir and =
 =

>>>> guess what - there's no a /*_1j8s.cfs * /file at all!
>>>> Pitty, I can't have a look at segments file, but I guess it lists t=
he  =

>>>> _1j8s
>>>> Given these scarce resources, can you give me some further advise  =

>>>> about what has happened and what can be done to prevent it from  =

>>>> happening again?
>>>
>>> I'm assuming this is easily repeated (question from my last email) a=
nd
>>> not a transient error?  If it's transient, this could be explained b=
y
>>> locking not working properly.
>>>
>>> If it's not transient (ie, happens every time you open this index),
>>> it sounds like indeed the segments file is referencing a segment tha=
t
>>> does not exist.
>>>
>>> But, how the index got into this state is a mystery.  I don't know o=
f
>>> any existing Lucene bugs that can do this.  Furthermore, crashing
>>> an indexing process should not lead to this (it can lead to other  =

>>> things
>>> like only have a segments.new file and no segments file).
>>>
>>> Were there any earlier exceptions (before indexing hit an "improper
>>> shutdown") in your indexing process that could give a clue as to roo=
t
>>> cause?  Or for example was the machine rebooted and did windows to r=
un
>>> a "filesystem check" on rebooting this box (which can remove corrupt=

>>> files)?
>>>
>>> Mike
>>>
>>> --------------------------------------------------------------------=
-
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>    --Aleksander M. Stensby
>> Software Developer
>> Integrasco A/S
>> aleksander.stensby@integrasco.no
>> Tlf.: +47 41 22 82 72
>>  --------------------------------------------------------------------=
-
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- =

Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 13:27:55 2006
Return-Path: <java-user-return-24682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9818 invoked from network); 23 Nov 2006 13:27:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 13:27:53 -0000
Received: (qmail 90459 invoked by uid 500); 23 Nov 2006 13:27:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90087 invoked by uid 500); 23 Nov 2006 13:27:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90076 invoked by uid 99); 23 Nov 2006 13:27:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 05:27:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 05:27:41 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by out1.messagingengine.com (Postfix) with ESMTP id 13F949E31
	for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 08:24:20 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Thu, 23 Nov 2006 08:24:20 -0500
X-Sasl-enc: gtuzpEKOm0Di1UzgTg0BaMxWzGwAWtITIsy8UahjK3c6 1164288259
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id E1B82AF0C
	for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 08:24:19 -0500 (EST)
Message-ID: <4565A0FF.3050906@mikemccandless.com>
Date: Thu, 23 Nov 2006 08:24:15 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Reviving a dead index
References: <44F3F64B.8030709@sirma.bg> <44F42594.3040609@mikemccandless.com> <44F58F36.6040307@sirma.bg> <44F63E84.7080402@mikemccandless.com> <op.tjgud4anoftp72@lettmelk> <45658867.90902@mikemccandless.com> <op.tjgylwzloftp72@lettmelk>
In-Reply-To: <op.tjgylwzloftp72@lettmelk>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Aleksander M. Stensby wrote:

 > works like a charm Michael! (only thing is that SegmentInfos /
 > SegmentInfo are final classe, (which I didnt know) so i was bugging
 > around to really find the classes:) heh.
 >
 > I was able to remove the broken segment. I must now get the MAX(id) from
 > the clean remaining segments, then just regenerate from that point on.
 > (ive indexed the ids, so thats a good pinpoint.)
 >
 > Anyways, thanx! My logrotation was broken so was unable to trace back
 > the root cause, but will report if it happens again!

Super!  Phew.  Please reply back if you make any progress on the root
cause.  If it comes down to a bug in Lucene we've got to ferret it out
and get it fixed.

> One last thing... can i be sure that the latest inserted documents in 
> fact was inserted into that broken segment? Or are they placed randomly 
> in the different segments?

Well, when documents are added they are always added into the "latest"
segment (when the writer flushes its RAMDirectory buffer).  Then, on
merging/optimizing, this segment will be merged with others before
it.  If you are certain it is the "newest" (ie, biggest name in base
36) segment(s) that you've lost, and you add your docs in increasing ID
order, then I believe getting the max(ID) that's in the index and
re-indexing the docs above that will make your index complete
again.  Best to do some serious testing to be sure though :)

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 13:38:08 2006
Return-Path: <java-user-return-24683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11562 invoked from network); 23 Nov 2006 13:38:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 13:38:06 -0000
Received: (qmail 4542 invoked by uid 500); 23 Nov 2006 13:38:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4513 invoked by uid 500); 23 Nov 2006 13:38:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4502 invoked by uid 99); 23 Nov 2006 13:38:09 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 05:38:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 05:37:57 -0800
Received: by ug-out-1314.google.com with SMTP id k40so434744ugc
        for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 05:37:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aa4YBaYkmUYQ5Z8rmvhg6pnX7EDrHJKdljlcFBIDc4QBGcT9mXeC3Q7LeKJm36/PZJebWQi8FLTbTOV090hYMJU+AoGtiYn+UtvKzAb4wNUvLlFO13/Kbj7UjmvHHAJtYfvMwxeIPJ/YtktTOgDzY54XG+tagyqcfg9riNN6RMA=
Received: by 10.82.120.15 with SMTP id s15mr1428825buc.1164289056042;
        Thu, 23 Nov 2006 05:37:36 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Thu, 23 Nov 2006 05:37:36 -0800 (PST)
Message-ID: <359a92830611230537j1307866coe4d7bc5a0e1902a3@mail.gmail.com>
Date: Thu, 23 Nov 2006 08:37:36 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie Search Question
In-Reply-To: <7506220.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47800_16188333.1164289056015"
References: <7438630.post@talk.nabble.com>
	 <29AA93ED-F339-49BB-8D37-E4DDF0D987A5@ehatchersolutions.com>
	 <7506220.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47800_16188333.1164289056015
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So why not assign a string to "text" and try it again? Or show us the code
where you expect the text variable to get a value.....

Erick

On 11/23/06, sirakov <sirakov@gmail.com> wrote:
>
>
> thanky you for the info :) i've showed and tried to use the example, but I
> get following error message
>
> Query: test
> Searching for: test
> Fields are:
> java.lang. NullPointerException
>          at java.io. String reader. <init> (Unknown Source)
>          at org.apache.lucene.demo. SearchFiles.main (SearchFiles.java
> :158)
> 15 totally matching documents
>
> Line 158 is:
>
> TokenStream tokenStream = analyzer.tokenStream (field, new string reader
> (text));
>
> The variable "text" is a "null".
>
> my question is: should I index the files differently or should I use some
> parameters?
> --
> View this message in context:
> http://www.nabble.com/Newbie-Search-Question-tf2667479.html#a7506220
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_47800_16188333.1164289056015--

From java-user-return-24684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 13:43:50 2006
Return-Path: <java-user-return-24684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12556 invoked from network); 23 Nov 2006 13:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 13:43:49 -0000
Received: (qmail 13103 invoked by uid 500); 23 Nov 2006 13:43:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13080 invoked by uid 500); 23 Nov 2006 13:43:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13066 invoked by uid 99); 23 Nov 2006 13:43:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 05:43:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 05:43:39 -0800
Received: by nf-out-0910.google.com with SMTP id n28so808179nfc
        for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 05:43:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PbwSFmurJS9+vUJJcLBXT20edRF5bGYr/YFG7qqWkgClC2fO5meThk8tNVfCtwxxZrSXX3iMXInLzUy06oDiUY1hrlvXsOXzmUUOFC0l7UFsIezaYjxY8Zz2gpsP40YV9iXo30KreZ4J56TAoPpssZlJ57w8tyYQp7M3Gh/2dZk=
Received: by 10.82.182.8 with SMTP id e8mr1043842buf.1164289397292;
        Thu, 23 Nov 2006 05:43:17 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Thu, 23 Nov 2006 05:43:17 -0800 (PST)
Message-ID: <359a92830611230543r567f1d19i46ab33421449a6a7@mail.gmail.com>
Date: Thu, 23 Nov 2006 08:43:17 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Oracle and Lucene Integration
In-Reply-To: <126142c0611230422k7cd31c2u3978bb9bd0432517@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47880_28941856.1164289397265"
References: <20061123074131.10150.qmail@web50305.mail.yahoo.com>
	 <126142c0611230422k7cd31c2u3978bb9bd0432517@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_47880_28941856.1164289397265
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think you can have much, if any, influence on the docid that Lucene
assigns. When you add a document, it's guaranteed to have an ID greater than
any already in the index. I just think (but don't depend) on it being N + 1
where N is the largest docid already in the index.

But here's the really critical part. A document ID can change. If you delete
a document and re-optimize the index (I'm pretty sure the optimization is
necessary), all the documents with docids greater than the one you deleted
will be re-assigned.

People have recommended instead, that you store things like ROWID in a new
field in the Lucene document and leave the docid alone......

Or something like that <G>...

BTW, I commend your efforts and contributions to the Lucene corpus with
this, keep up the good work!

Best
Erick

On 11/23/06, Marcelo Ochoa <marcelo.ochoa@gmail.com> wrote:
>
> Otis:
>   I am new to Lucene API and searching technologies :)
>
>                   doc.add(new Field("rowid", rowid, Field.Store.YES,
>                           Field.Index.UN_TOKENIZED));
>                   Done!!.
>
>   Also the Oracle ROWID format has a portion which can be used as the
> document id into the Lucene document, this will simplify the delete
> operation, for example, because with the rowid we can use
> reader.deleteDocument(idFromRowIDValue).
>
> http://download-east.oracle.com/docs/cd/B19306_01/server.102/b14220/datatype.htm#sthref3899
>   But I don't know how to add documents with an specific id.
>   Somebody can help me showing a code snipped with an adding operation
> using a predefined ID?
>   Rowid number start with 0 and are sequentially assigned.
>   Best regards, Marcelo.
>
> On 11/23/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > Wow, very cool, even though I don't use Oracle anywhere at the moment.
> > You probably don't want that rowid field tokenized, by the way.
> >
> > Otis
> >
> > ----- Original Message ----
> > From: Marcelo Ochoa <marcelo.ochoa@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Wednesday, November 22, 2006 8:44:58 AM
> > Subject: Re: Oracle and Lucene Integration
> >
> > Hi Mark:
> > > Very interesting.
> > >
> > > So how does this solution manage mapping Oracle primary keys to and
> from Lucene doc ids?
> >   I am storing the rowid value as a Document field, here a code sniped
> >                 Document doc = new Document();
> >                 doc.add(new Field("rowid", rowid, Field.Store.YES,
> >                           Field.Index.TOKENIZED));
> >                 Object value = rs.getObject(2);
> >                 String valueStr = null;
> >                 if (value!=null) { // Sanity checks
> >                   if (value instanceof CLOB)
> >                     valueStr =
> > ((CLOB)value).getSubString(1,(int)((CLOB)value).length());
> >                   else if (value instanceof XMLType)
> >                     valueStr =
> > ((XMLType)value).extract("//text()","").getStringVal();
> >                   else
> >                     valueStr = value.toString();
> >                   doc.add(new
> > Field(col,valueStr,Field.Store.NO,Field.Index.TOKENIZED));
> >                   writer.addDocument(doc);
> >
> >   So when I am querying I can get the rowid back using:
> >                 if (iterator.hasNext()) {
> >                     // append rowid to collection
> >                     Hit hit = (Hit) iterator.next();
> >                     try {
> >                         rid =  hit.get("rowid");
> >                         score = hit.getScore();
> >                     } catch (IOException e) {
> >                         e.printStackTrace();
> >                         throw new SQLException(e.getMessage());
> >                     }
> >                     rlist[i] = new String(rid);
> >                     slist.put(rid,new Float(score));
> >                     idx++;
> >                 } else {.............
> >   and passing the rowid to the Oracle execution plan which is
> > collecting in bacth of 2000 rowids.
> > >
> > > >> Another benefits of using the Data Cartridge API is that if the
> > > >>table T1 has insert, update or delete rows operations a
> corresponding
> > > >>Java method will be called to automatically update the Lucene Index.
> > >
> > > I suspect the tricky bit is optimizing the opening/closing of Lucene
> IndexReaders/Writers especially in the event of large batches of database
> updates.
> > > Does this API pass the transactional info which would help organize
> the batching of the Lucene reader.delete and writer.add calls?
> >   Well, I think that Oracle Text uses a Queue to store large batches,
> > because it use a ctx_sys.sync procedure to update the index ;)
> >   We can make the same solution using Oracle AQ.
> > >
> > > Cheers
> > > Mark
> >  Best regards, Marcelo.
> > --
> > Marcelo F. Ochoa
> > http://marcelo.ochoa.googlepages.com/home
> > ______________
> > Do you Know DBPrism? Look @ DB Prism's Web Site
> > http://www.dbprism.com.ar/index.html
> > More info?
> > Chapter 17 of the book "Programming the Oracle Database using Java &
> > Web Services"
> > http://www.amazon.com/gp/product/1555583296/
> > Chapter 21 of the book "Professional XML Databases" - Wrox Press
> > http://www.amazon.com/gp/product/1861003587/
> > Chapter 8 of the book "Oracle & Open Source" - O'Reilly
> > http://www.oreilly.com/catalog/oracleopen/
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Marcelo F. Ochoa
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Do you Know DBPrism? Look @ DB Prism's Web Site
> http://www.dbprism.com.ar/index.html
> More info?
> Chapter 17 of the book "Programming the Oracle Database using Java &
> Web Services"
> http://www.amazon.com/gp/product/1555583296/
> Chapter 21 of the book "Professional XML Databases" - Wrox Press
> http://www.amazon.com/gp/product/1861003587/
> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
> http://www.oreilly.com/catalog/oracleopen/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_47880_28941856.1164289397265--

From java-user-return-24685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 15:09:39 2006
Return-Path: <java-user-return-24685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37756 invoked from network); 23 Nov 2006 15:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 15:09:38 -0000
Received: (qmail 35780 invoked by uid 500); 23 Nov 2006 15:09:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35758 invoked by uid 500); 23 Nov 2006 15:09:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35747 invoked by uid 99); 23 Nov 2006 15:09:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 07:09:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of VOlenin@cihi.ca designates 205.207.78.3 as permitted sender)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 07:09:25 -0800
Received: from (tormail01.cihi.ca [10.64.1.106]) by webshield.cihi.ca with smtp
	 id 60dc_9b83d2c4_7b05_11db_8501_003048245df9;
	Thu, 23 Nov 2006 10:16:36 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Oracle and Lucene Integration
Date: Thu, 23 Nov 2006 10:08:14 -0500
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F07937F1C@tormail01.cihi.ca>
In-Reply-To: <126142c0611230422k7cd31c2u3978bb9bd0432517@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Oracle and Lucene Integration
Thread-Index: AccO+iAoVP2GI+3IT1eLz7hM5xZd4gAFsd5w
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I don't think you can define rowid on 'insert' operations (ie, when a
new entry in the table is created) - it's a 'hidden'/automatic field
Oracle maintains itself...

Vlad

-----Original Message-----
From: Marcelo Ochoa [mailto:marcelo.ochoa@gmail.com]=20
Sent: Thursday, November 23, 2006 7:23 AM
To: java-user@lucene.apache.org
Subject: Re: Oracle and Lucene Integration

Otis:
  I am new to Lucene API and searching technologies :)

                  doc.add(new Field("rowid", rowid, Field.Store.YES,
                          Field.Index.UN_TOKENIZED));
                  Done!!.

  Also the Oracle ROWID format has a portion which can be used as the
document id into the Lucene document, this will simplify the delete
operation, for example, because with the rowid we can use
reader.deleteDocument(idFromRowIDValue).
http://download-east.oracle.com/docs/cd/B19306_01/server.102/b14220/data
type.htm#sthref3899
  But I don't know how to add documents with an specific id.
  Somebody can help me showing a code snipped with an adding operation
using a predefined ID?
  Rowid number start with 0 and are sequentially assigned.
  Best regards, Marcelo.

On 11/23/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Wow, very cool, even though I don't use Oracle anywhere at the moment.
> You probably don't want that rowid field tokenized, by the way.
>
> Otis
>
> ----- Original Message ----
> From: Marcelo Ochoa <marcelo.ochoa@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, November 22, 2006 8:44:58 AM
> Subject: Re: Oracle and Lucene Integration
>
> Hi Mark:
> > Very interesting.
> >
> > So how does this solution manage mapping Oracle primary keys to and
from Lucene doc ids?
>   I am storing the rowid value as a Document field, here a code sniped
>                 Document doc =3D new Document();
>                 doc.add(new Field("rowid", rowid, Field.Store.YES,
>                           Field.Index.TOKENIZED));
>                 Object value =3D rs.getObject(2);
>                 String valueStr =3D null;
>                 if (value!=3Dnull) { // Sanity checks
>                   if (value instanceof CLOB)
>                     valueStr =3D
> ((CLOB)value).getSubString(1,(int)((CLOB)value).length());
>                   else if (value instanceof XMLType)
>                     valueStr =3D
> ((XMLType)value).extract("//text()","").getStringVal();
>                   else
>                     valueStr =3D value.toString();
>                   doc.add(new
> Field(col,valueStr,Field.Store.NO,Field.Index.TOKENIZED));
>                   writer.addDocument(doc);
>
>   So when I am querying I can get the rowid back using:
>                 if (iterator.hasNext()) {
>                     // append rowid to collection
>                     Hit hit =3D (Hit) iterator.next();
>                     try {
>                         rid =3D  hit.get("rowid");
>                         score =3D hit.getScore();
>                     } catch (IOException e) {
>                         e.printStackTrace();
>                         throw new SQLException(e.getMessage());
>                     }
>                     rlist[i] =3D new String(rid);
>                     slist.put(rid,new Float(score));
>                     idx++;
>                 } else {.............
>   and passing the rowid to the Oracle execution plan which is=20
> collecting in bacth of 2000 rowids.
> >
> > >> Another benefits of using the Data Cartridge API is that if the=20
> > >>table T1 has insert, update or delete rows operations a=20
> > >>corresponding Java method will be called to automatically update
the Lucene Index.
> >
> > I suspect the tricky bit is optimizing the opening/closing of Lucene
IndexReaders/Writers especially in the event of large batches of
database updates.
> > Does this API pass the transactional info which would help organize
the batching of the Lucene reader.delete and writer.add calls?
>   Well, I think that Oracle Text uses a Queue to store large batches,=20
> because it use a ctx_sys.sync procedure to update the index ;)
>   We can make the same solution using Oracle AQ.
> >
> > Cheers
> > Mark
>  Best regards, Marcelo.
> --
> Marcelo F. Ochoa
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Do you Know DBPrism? Look @ DB Prism's Web Site=20
> http://www.dbprism.com.ar/index.html
> More info?
> Chapter 17 of the book "Programming the Oracle Database using Java &=20
> Web Services"
> http://www.amazon.com/gp/product/1555583296/
> Chapter 21 of the book "Professional XML Databases" - Wrox Press=20
> http://www.amazon.com/gp/product/1861003587/
> Chapter 8 of the book "Oracle & Open Source" - O'Reilly=20
> http://www.oreilly.com/catalog/oracleopen/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java & Web
Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 15:58:19 2006
Return-Path: <java-user-return-24686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48057 invoked from network); 23 Nov 2006 15:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 15:58:17 -0000
Received: (qmail 15363 invoked by uid 500); 23 Nov 2006 15:58:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15338 invoked by uid 500); 23 Nov 2006 15:58:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15327 invoked by uid 99); 23 Nov 2006 15:58:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 07:58:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of marcelo.ochoa@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 07:58:07 -0800
Received: by ug-out-1314.google.com with SMTP id k40so472741ugc
        for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 07:57:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=TxZO4aIjlKiV/NJPHkGhloq05RfoGYI5bQ0nWl7xtIxcACVPvCiDXOe1aH2z2R19PE2cwnkhQ+2wN4LBbRg/gGOLOYKhdb+ydqV7T4BUDxgPRjYF1TcLN3fxPPx/YsHREXUeFturk7sESjmA6bNvPFuPN5XUOuT39VHiGDIdzn8=
Received: by 10.78.200.3 with SMTP id x3mr9215859huf.1164297464508;
        Thu, 23 Nov 2006 07:57:44 -0800 (PST)
Received: by 10.78.145.11 with HTTP; Thu, 23 Nov 2006 07:57:44 -0800 (PST)
Message-ID: <126142c0611230757i3f094268k357950376b5d4f20@mail.gmail.com>
Date: Thu, 23 Nov 2006 12:57:44 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Oracle and Lucene Integration
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F07937F1C@tormail01.cihi.ca>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <126142c0611230422k7cd31c2u3978bb9bd0432517@mail.gmail.com>
	 <373399D6389D8C42B4EAD9BE2B6B5C5F07937F1C@tormail01.cihi.ca>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Vladimir:
> I don't think you can define rowid on 'insert' operations (ie, when a
> new entry in the table is created) - it's a 'hidden'/automatic field
> Oracle maintains itself...
  The rowid is available on the Data Cartridge API, see this output from tests:
Insert. newval: 'chau' rowid: 'AAAP1EAAEAAAAS4AAD' on index: LUCENE.IT1

1 row created.

Elapsed: 00:00:00.07

  I think that the Data Cartridge bind the code to the LUCENE.IT1
object, that is the index not the table. So the event is fired when
the index is reorganized, at this time the changes on the table are
already commited, but these are my assumptions that the Oracle engine
do ;)
  The important point is that the code summited yesterday to the Jira
is working with any DML operations on the tested tables, not optimized
for bulk operations.
  The missing callbacks entry points not implemented yet are the
operations of partitioned tables which involve re-organizations into
separate Lucene indexes, they are into the TODO list too :)
  Best regards, Marcelo.

-- 
Marcelo F. Ochoa
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 16:00:26 2006
Return-Path: <java-user-return-24687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48501 invoked from network); 23 Nov 2006 16:00:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 16:00:25 -0000
Received: (qmail 18778 invoked by uid 500); 23 Nov 2006 16:00:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18750 invoked by uid 500); 23 Nov 2006 16:00:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18731 invoked by uid 99); 23 Nov 2006 16:00:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 08:00:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [207.113.241.148] (HELO iss04.interliant.com) (207.113.241.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 08:00:15 -0800
Received: from EX-008.mail.navisite.com (ex-008.interliant.com [207.113.240.188])
	by iss04.interliant.com (8.10.2/8.10.2) with ESMTP id kANFxoB01325
	for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 09:59:54 -0600 (CST)
Received: from [192.168.0.7] ([86.205.28.181]) by EX-008.mail.navisite.com over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 23 Nov 2006 09:59:48 -0600
Message-ID: <4565C56B.5050601@hibernate.org>
Date: Thu, 23 Nov 2006 16:59:39 +0100
From: Emmanuel Bernard <emmanuel@hibernate.org>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fwd: Hibernate Lucene trademark issues
References: <454F459B.7000100@hibernate.org> <52c3ddca0611112217m1ccc1798x67deae19c56ee9c7@mail.gmail.com> <4558ECAA.2050904@hibernate.org> <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com> <455F1706.50905@hibernate.org> <455F38BC.1040104@hibernate.org> <f7d99bf30611222310u1b1df16es92ecdd49a38d3f6d@mail.gmail.com>
In-Reply-To: <f7d99bf30611222310u1b1df16es92ecdd49a38d3f6d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 23 Nov 2006 15:59:49.0118 (UTC) FILETIME=[675DC9E0:01C70F18]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jin,
I'll answer your email on the hibernate dev list.
See you there :-)

Jin Yiqing wrote:
>
> Hi,Emmanuel
> i think you did a very greate job!  Since i am now working on a system 
> that
> using lucene to implement a search engine, i would like to know some more
> details about Hinbernate Search.
>
>   I have read some of the code in Hinbernate 3.2GA release, the code is
> pretty cool, but  there is one thing i doubt:
>
>   For the update operation Hibernate Search used remove & update.which 
> refer
> to Lucene's deleteDocuments method.  That's ok and i also could only find
> this way to update the index data. This will works fine when the operation
> does not have high frequency.
>
> But as i know  the remove operation in lucene only marked a tag for the
> deleted document without actually delete the data ofr index files.  We 
> know
> in some systems the data would be updated in a very high  frequency(eg. an
> traffic status query system), then it will not take a long time that the
> index will be filled with lots of expired document data,  even if the data
> update is not as fast as a traffic status, i think this problem is still
> very critical since things we stored in databases are always updating.
>
>  Is there any way to solve this in Hibernate Search?
>
>
> Richie
>
>
> 2006/11/19, Emmanuel Bernard <emmanuel@hibernate.org>:
> >
> > I forgot a couple of things.
> > I do not think that all your object properties belongs to the Index, and
> > some of them will be put in the index with information degradation (ie
> > store year/month rather than the whole date). So I do not believe there
> > is a bidirectional relationship between your domain model and your index
> > documents (for size, efficiency and accuracy purpose).
> > For that matter, Compass cannot really truly index your database backed
> > domain model and give back the object to you. Hibernate Search can
> > because it delegate the object hydration to Hibernate Core.
> >
> > Of course that's my opinions, and some people can disagree ;-)
> >
> > Emmanuel Bernard wrote:
> > >
> > > Hi,
> > > I am not really familiar with Compass I haven't really looked at the
> > > code, Hibernate Lucene (now renamed Hibernate Search) started from a
> > > user demand. I had some in depth discussions though, with some users
> > > that evaluated both Compass and Hibernate Search that helped me drive
> > > its design.
> > >
> > > Here are the arguments in favor of Hibernate Search:
> > > 1. not Yet Another API to deal with your domain model
> > > If you already use an ORM (JPA or Hibernate), you are familiar with
> > > those APIs. Using compass implies that you have to use a different set
> > > of API to play with the object lifecycle (CRUD).
> > > Hibernate Search is integrated with the org.hibernate.Query interface,
> > > and all the CUD operations on the index are triggered from the 
> Hibernate
> > > CUD operations.
> > >
> > > 2. Metadata
> > > Metadata are minimal and fit particularly well through annotations, so
> > > you don't have yet another XML representation of ther same domain 
> model
> > > (Compass might now have annotations support, you'll have to check)
> > >
> > > 3. it's all about managed objects (ie managed by the Session or the
> > > EntityManager)
> > > Hibernate Search gives you back objects managed by the Session, so any
> > > change made to them will (by default) be synchronized with the 
> database,
> > > this is the normal behavior of an ORM, but is not what you have from a
> > > Compass search.
> > > This approach fits well with the JBoss Seam approach of having all the
> > > application around the domain model and EJB 3.0
> > >
> > > 4. Not too much abstraction
> > >  From what I've heard, Compass borrow a lot of its design / classnames
> > > from Hibernate/Spring/Lucene. Compass tries to abstract those 3
> > > techlnologies (at least Hibernate and Lucene), by providing its own
> > > infrastructure.
> > > What am trying to do with Hibernate Search is to keep the 
> abstraction as
> > > light as possible. For advanced Lucene query you'll have to use pure
> > > Lucene APIs, which is possible / natural with Hibernate Search
> > >
> > >
> > > I invite you to check these links (which I expect to release soon)
> > >
> > 
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> > > and for the future (but flexible)
> > >
> > 
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00393.html
> > >
> > > HTH
> > >
> > > Emmanuel
> > >
> > > Lukas Vlcek wrote:
> > > >
> > > > Emanuael,
> > > > I would be glad to hear your answer here (on user list).
> > > > Regards,
> > > > Lukas
> > > >
> > > > ---------- Forwarded message ----------
> > > > From: Emmanuel Bernard <emmanuel@hibernate.org>
> > > > Date: Nov 13, 2006 11:07 PM
> > > > Subject: Re: Hibernate Lucene trademark issues
> > > > To: java-dev@lucene.apache.org, lukas.vlcek@gmail.com
> > > >
> > > > Hi Lukas,
> > > > I'd be happy to answer your question, but I don't think Lucene 
> dev is
> > > > the appropriate area for that kind of discussion.
> > > > let's move this discussion here
> > > > http://forum.hibernate.org/viewforum.php?f=9 (or in the Lucene User
> > list
> > > > if you want to).
> > > >
> > > > Emmanuel
> > > >
> > > > Lukas Vlcek wrote:
> > > > >
> > > > > Hi Emmanuel,
> > > > >
> > > > > I am interested in you solution. I have a plan to use lucene and
> > > > hibernate
> > > > > in my next project and search will play very important role
> > > > > (*stake-holder*
> > > > > functionality). I have heard of
> > > > > comapss<http://www.opensymphony.com/compass/>project which
> > introduces
> > > > > searching (lucene) layer on top of hibernate also.
> > > > > I haven't had a change to study it in detail yet.
> > > > >
> > > > > Do you think you could give me some high level comments about your
> > > > > motivation for implementing lucene search directly in hibernate
> > code,
> > > > > couldn't you just use compass project? Is there any fundamental
> > > > difference
> > > > > between your approach and comapss?
> > > > >
> > > > > Many thanks,
> > > > > Lukas
> > > > >
> > > > > On 11/6/06, Emmanuel Bernard <emmanuel@hibernate.org> wrote:
> > > > > >
> > > > > > Hi guys,
> > > > > > I'm Emmanuel Bernard from JBoss.
> > > > > > I'm the current lead developer of the Hibernate Lucene 
> integration
> > > > > module.
> > > > > > The goal of this project is to facilitate the integration of a
> > > search
> > > > > > capability to Hibernate based applications. And guess what, 
> I use
> > > > Lucene
> > > > > > ;-)
> > > > > >
> > > > > >
> > > > >
> > > >
> > >
> > 
> http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
> > > > > >
> > > > >
> > > >
> > >
> > 
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> > > > > >
> > > > > > I realized this week end that the 'Hibernate Lucene' name might
> > > > infringe
> > > > > > the Apache Lucene trademark policy.
> > > > > > http://www.cafepress.com/lucene/ seems to state that Lucene is a
> > > > > > trademark of the Apache Software Foundation (nice golf shirt 
> BTW)
> > > > > > But I wasn't able to find any document explaining the fair use
> > > of the
> > > > > > Lucene brand (the license as well as the notice seem to be 
> silent
> > on
> > > > > > this subject).
> > > > > >
> > > > > > Even if Lucene in not trademarked, what do you consider a fair
> > > use of
> > > > > > your brand? I'm happy to rename my project, I guess the initial
> > > choice
> > > > > > was more a tribute to your project than anything else.
> > > > > >
> > > > > > Emmanuel
> > > > > >
> > > > > > PS: please forward this email to the appropriate persons if this
> > > > is not
> > > > > > the case already (PMC or whatever)
> > > > > >
> > > > > >
> > > > > >
> > > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail: java-dev-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 23 19:32:19 2006
Return-Path: <java-user-return-24688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91602 invoked from network); 23 Nov 2006 19:32:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2006 19:32:18 -0000
Received: (qmail 58246 invoked by uid 500); 23 Nov 2006 19:32:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57758 invoked by uid 500); 23 Nov 2006 19:32:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57747 invoked by uid 99); 23 Nov 2006 19:32:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 11:32:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 11:32:07 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GnKIV-0006Bp-B3
	for java-user@lucene.apache.org; Thu, 23 Nov 2006 11:31:47 -0800
Message-ID: <7513261.post@talk.nabble.com>
Date: Thu, 23 Nov 2006 11:31:47 -0800 (PST)
From: sirakov <sirakov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie Search Question
In-Reply-To: <359a92830611230537j1307866coe4d7bc5a0e1902a3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sirakov@gmail.com
References: <7438630.post@talk.nabble.com> <29AA93ED-F339-49BB-8D37-E4DDF0D987A5@ehatchersolutions.com> <7506220.post@talk.nabble.com> <359a92830611230537j1307866coe4d7bc5a0e1902a3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Erick Erickson wrote:
> 
> So why not assign a string to "text" and try it again? Or show us the code
> where you expect the text variable to get a value.....
> 
> Erick
> 
> 

I`m sorry that was a miss from my side. 

I've tried to put the simple code into SearchFiles, between

Hits hits = searcher.search(query);

and 

String path = doc.get("path");

Here the code:

      Highlighter highlighter = new Highlighter(new QueryScorer(query));
      
      
      
      if (repeat > 0) {                           // repeat & time as
benchmark
        Date start = new Date();
        for (int i = 0; i < repeat; i++) {
          hits = searcher.search(query);
        }
        Date end = new Date();
        System.out.println("Time: "+(end.getTime()-start.getTime())+"ms");
      }

      System.out.println(hits.length() + " total matching documents");

      final int HITS_PER_PAGE = 10;
      for (int start = 0; start < hits.length(); start += HITS_PER_PAGE) {
        int end = Math.min(hits.length(), start + HITS_PER_PAGE);
        for (int i = start; i < end; i++) {

          if (raw) {                              // output raw format
            System.out.println("doc="+hits.id(i)+" score="+hits.score(i));
            continue;
          }

          Document doc = hits.doc(i);

          String text = hits.doc(i).get(field); //String field = "contents"; 		  
    	  TokenStream tokenStream = analyzer.tokenStream(field, new
StringReader(text));
    	  // Get 3 best fragments and seperate with a "..."
    	  String result = highlighter.getBestFragments(tokenStream, text, 3,
"...");
          
          
          String path = doc.get("path");
          if (path != null) {
            System.out.println((i+1) + ". " +
path);System.out.println("\t"+result);           
            String title = doc.get("title");
            if (title != null) {
              System.out.println("   Title: " + doc.get("title"));
            }
          } else {
            System.out.println((i+1) + ". " + "No path for this document");
          }
        }

The bolded text was added by me. I hope, i have made the changes in the
right file :)
-- 
View this message in context: http://www.nabble.com/Newbie-Search-Question-tf2667479.html#a7513261
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 24 02:18:40 2006
Return-Path: <java-user-return-24689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62134 invoked from network); 24 Nov 2006 02:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 02:18:40 -0000
Received: (qmail 72575 invoked by uid 500); 24 Nov 2006 02:18:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72538 invoked by uid 500); 24 Nov 2006 02:18:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72525 invoked by uid 99); 24 Nov 2006 02:18:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 18:18:41 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yiqing.jin@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 18:18:29 -0800
Received: by nf-out-0910.google.com with SMTP id n28so967863nfc
        for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 18:18:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=b+wq3X/aBnQ/hfcU+6sGB5wnxPtrpSclLj4Jrh1NA2/Rjjy5V2likZrWVdy37ZuDuSgT2kDkKr2FqAQiaxRbdN2XOiafUwkN3kLuEUz4AV8XlVd+ANI3ytsx9mKbPdQtIcpWy/ereybp4Ycvv2ZNuxaTlO/SZ9F2RR6xz54LfuQ=
Received: by 10.82.126.5 with SMTP id y5mr1512603buc.1164334687337;
        Thu, 23 Nov 2006 18:18:07 -0800 (PST)
Received: by 10.82.171.9 with HTTP; Thu, 23 Nov 2006 18:18:07 -0800 (PST)
Message-ID: <f7d99bf30611231818m3884fc08gc13a3c3e252f4ea0@mail.gmail.com>
Date: Fri, 24 Nov 2006 10:18:07 +0800
From: "Jin Yiqing" <yiqing.jin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: labels search like google mail?
In-Reply-To: <88c6a6720611230123g7e7fafa5lf384a02b369881cf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49663_30086799.1164334687313"
References: <f7d99bf30611222113t181063dahc7f1c3ee4b54008a@mail.gmail.com>
	 <88c6a6720611230123g7e7fafa5lf384a02b369881cf@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_49663_30086799.1164334687313
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You are right,. I think it's better to implement it using DB. But my project
is build on lucene and i think it would be better if i could find a way to
sovle this inside lucene. But as you have mentioned updating a lucene index
is not a easy nor fast job. you have to rebuild the term table as it is
sorted, . also you need to make sure this is transactional, that's the
hardest part. Or i think may be i could just make direct operation on lucene
index (mainly .tis file), insert a new tag-term may cost some time but add a
doc after that does not. Still how to make it transactional bothered me a
lot .

2006/11/23, Chris Lamprecht <clamprecht@gmail.com>:
>
> Sure.. using Lucene you could have a field called "labels" (or "tags", as
> everyone except google calls them), and just add a bunch of keyword field
> values to the field, one for each tag.   The tricky part might be doing
> this
> quickly -- right when the user adds a tag, updating the lucene index -- if
> your project requires this.  Or if you're using a database, it might make
> sense to just use the database instead of lucene for this particular
> feature
> (DB updates are typically more straightforward than "updating" a lucene
> document).
>
> -chris
>
> On 11/22/06, Jin Yiqing <yiqing.jin@gmail.com> wrote:
> >
> > Hi,all
> >      Maybe lots of u guys have used google mail. i noticed google mail
> has
> > a
> > good feature called labels. you could select a mail then just
> put  labels
> > on
> > it by select <more actions>-><apply label>.  The labels could
> be  created
> > by
> > users dynamicly . Then you could list your mails just by these labels,
> > very
> > fast. And one mail could have more than one label.
> >
> >      I always wondering how google did this. considering the mail amont
> > this
> > must be a search technology. Can Lucene also implement the same function
> > by
> > now?
> >
> >      i have thought about this but got no solution.  :(   So i wrote
> this
> > mail, if anyone have good suggestions i'll appreciate it very much.
> >
> >      Richie
> >
> >
>
>

------=_Part_49663_30086799.1164334687313--

From java-user-return-24690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 24 06:29:23 2006
Return-Path: <java-user-return-24690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22260 invoked from network); 24 Nov 2006 06:29:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 06:29:22 -0000
Received: (qmail 50782 invoked by uid 500); 24 Nov 2006 06:29:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50656 invoked by uid 500); 24 Nov 2006 06:29:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50645 invoked by uid 99); 24 Nov 2006 06:29:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 22:29:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of kuassi.mensah@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 23 Nov 2006 22:29:10 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1020279nfc
        for <java-user@lucene.apache.org>; Thu, 23 Nov 2006 22:28:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=cyASNqQUQEA4bl9mIuudH47mRFN1BgQuGXhjt/FoVS4Ib9G/zGzDDyZ4JeEsHKmYuX6iXNcntRqI9h7g+DjqBwm527vBaVknmxPfdixD98+koSXubjl6IOHdlSFuDyN41Vn7veL30KBieElGB2Yab1H0lbM6W4D8XZaQAlHCPuk=
Received: by 10.78.181.13 with SMTP id d13mr10006112huf.1164349728262;
        Thu, 23 Nov 2006 22:28:48 -0800 (PST)
Received: by 10.78.151.5 with HTTP; Thu, 23 Nov 2006 22:28:47 -0800 (PST)
Message-ID: <a4ab1f310611232228o2af5a251o540901a9bace9c6b@mail.gmail.com>
Date: Thu, 23 Nov 2006 22:28:47 -0800
From: "Kuassi Mensah" <kuassi.mensah@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: labels search like google mail?
Cc: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
In-Reply-To: <f7d99bf30611231818m3884fc08gc13a3c3e252f4ea0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5737_2124037.1164349727853"
References: <f7d99bf30611222113t181063dahc7f1c3ee4b54008a@mail.gmail.com>
	 <88c6a6720611230123g7e7fafa5lf384a02b369881cf@mail.gmail.com>
	 <f7d99bf30611231818m3884fc08gc13a3c3e252f4ea0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5737_2124037.1164349727853
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Marcelo (cced) has implemented Lucene within the Oracle database using the
embeded Java VM. Such implementation might adress your requirements.

Kuassi
- blog http://db360.blogspot.com/
- book http://db360.blogspot.com/2006/08/oracle-database-programming-using-java_01.html




On 11/23/06, Jin Yiqing <yiqing.jin@gmail.com> wrote:
>
> You are right,. I think it's better to implement it using DB. But my
> project
> is build on lucene and i think it would be better if i could find a way to
> sovle this inside lucene. But as you have mentioned updating a lucene
> index
> is not a easy nor fast job. you have to rebuild the term table as it is
> sorted, . also you need to make sure this is transactional, that's the
> hardest part. Or i think may be i could just make direct operation on
> lucene
> index (mainly .tis file), insert a new tag-term may cost some time but add
> a
> doc after that does not. Still how to make it transactional bothered me a
> lot .
>
> 2006/11/23, Chris Lamprecht <clamprecht@gmail.com>:
> >
> > Sure.. using Lucene you could have a field called "labels" (or "tags",
> as
> > everyone except google calls them), and just add a bunch of keyword
> field
> > values to the field, one for each tag.   The tricky part might be doing
> > this
> > quickly -- right when the user adds a tag, updating the lucene index --
> if
> > your project requires this.  Or if you're using a database, it might
> make
> > sense to just use the database instead of lucene for this particular
> > feature
> > (DB updates are typically more straightforward than "updating" a lucene
> > document).
> >
> > -chris
> >
> > On 11/22/06, Jin Yiqing <yiqing.jin@gmail.com> wrote:
> > >
> > > Hi,all
> > >      Maybe lots of u guys have used google mail. i noticed google mail
> > has
> > > a
> > > good feature called labels. you could select a mail then just
> > put  labels
> > > on
> > > it by select <more actions>-><apply label>.  The labels could
> > be  created
> > > by
> > > users dynamicly . Then you could list your mails just by these labels,
> > > very
> > > fast. And one mail could have more than one label.
> > >
> > >      I always wondering how google did this. considering the mail
> amont
> > > this
> > > must be a search technology. Can Lucene also implement the same
> function
> > > by
> > > now?
> > >
> > >      i have thought about this but got no solution.  :(   So i wrote
> > this
> > > mail, if anyone have good suggestions i'll appreciate it very much.
> > >
> > >      Richie
> > >
> > >
> >
> >
>
>

------=_Part_5737_2124037.1164349727853--

From java-user-return-24691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 24 08:23:06 2006
Return-Path: <java-user-return-24691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44629 invoked from network); 24 Nov 2006 08:23:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 08:23:05 -0000
Received: (qmail 40441 invoked by uid 500); 24 Nov 2006 08:23:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40049 invoked by uid 500); 24 Nov 2006 08:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40038 invoked by uid 99); 24 Nov 2006 08:23:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 00:23:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yiqing.jin@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 00:22:55 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1045618nfc
        for <java-user@lucene.apache.org>; Fri, 24 Nov 2006 00:22:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qEIOwp3piI0GzotXLPp3QCjkOpk+718fi3AagS2MQUNDTfipgwzHI0ATMISSBFNfRhZlgQSZ/8TQFiWUjCWFngP5mwnU1UZFsmeq7CQ6qTCdKbxM4J6ghzgICmRX5zDqc5HZaff8hwCERDxwkRmcwtv3aFF8QynEllqCBozRkd0=
Received: by 10.82.123.16 with SMTP id v16mr1545209buc.1164356553401;
        Fri, 24 Nov 2006 00:22:33 -0800 (PST)
Received: by 10.82.171.9 with HTTP; Fri, 24 Nov 2006 00:22:33 -0800 (PST)
Message-ID: <f7d99bf30611240022u37704bc2rd33b68b492491f70@mail.gmail.com>
Date: Fri, 24 Nov 2006 16:22:33 +0800
From: "Jin Yiqing" <yiqing.jin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: does anyone know of a 'smart' categorizing text pattern finder?
In-Reply-To: <02621271-05B0-4AC9-88E5-957920E8B6A8@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51019_32196161.1164356553212"
References: <373399D6389D8C42B4EAD9BE2B6B5C5F070D1529@tormail01.cihi.ca>
	 <456381A9.2000907@alias-i.com>
	 <02621271-05B0-4AC9-88E5-957920E8B6A8@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51019_32196161.1164356553212
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Does this book really exit? I googled and didn't find any introduction about
it :)

2006/11/22, Erik Hatcher <erik@ehatchersolutions.com>:
>
>
> On Nov 21, 2006, at 5:46 PM, Bob Carpenter wrote:
> > LingPipe in Action.
>
> Now that's a book I'd love to own!
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_51019_32196161.1164356553212--

From java-user-return-24692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 24 08:29:51 2006
Return-Path: <java-user-return-24692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45451 invoked from network); 24 Nov 2006 08:29:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 08:29:50 -0000
Received: (qmail 46432 invoked by uid 500); 24 Nov 2006 08:29:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45840 invoked by uid 500); 24 Nov 2006 08:29:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45829 invoked by uid 99); 24 Nov 2006 08:29:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 00:29:53 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yiqing.jin@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 00:29:41 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1047135nfc
        for <java-user@lucene.apache.org>; Fri, 24 Nov 2006 00:29:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QeYmSuBhk73gLuy83y2Jlkkey1zGM/ZcOFMIrznEkwvp5HN45NEHbJstyteYmYkuKKzTzZUUI90TLSJPYTPVLnaSnF0OIxhhVsP8ZVNBpt9ymoGqQBOuSJbmPBYQF3bef1Tt/UpZ2Vbhrmnma7WfawROqjMgFVstMgWpnLTqn6E=
Received: by 10.82.111.8 with SMTP id j8mr1539359buc.1164356958482;
        Fri, 24 Nov 2006 00:29:18 -0800 (PST)
Received: by 10.82.171.9 with HTTP; Fri, 24 Nov 2006 00:29:18 -0800 (PST)
Message-ID: <f7d99bf30611240029x1da1e44ex4f7cb314bfe141cd@mail.gmail.com>
Date: Fri, 24 Nov 2006 16:29:18 +0800
From: "Jin Yiqing" <yiqing.jin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Fwd: Hibernate Lucene trademark issues
In-Reply-To: <4565C56B.5050601@hibernate.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51091_23363824.1164356958328"
References: <454F459B.7000100@hibernate.org>
	 <52c3ddca0611112217m1ccc1798x67deae19c56ee9c7@mail.gmail.com>
	 <4558ECAA.2050904@hibernate.org>
	 <52c3ddca0611170437o36eb140cqcd344b8b4f3972e0@mail.gmail.com>
	 <455F1706.50905@hibernate.org> <455F38BC.1040104@hibernate.org>
	 <f7d99bf30611222310u1b1df16es92ecdd49a38d3f6d@mail.gmail.com>
	 <4565C56B.5050601@hibernate.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51091_23363824.1164356958328
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks.

I'm looking forward to your reply. :)


2006/11/23, Emmanuel Bernard <emmanuel@hibernate.org>:
>
> Hi Jin,
> I'll answer your email on the hibernate dev list.
> See you there :-)
>
> Jin Yiqing wrote:
> >
> > Hi,Emmanuel
> > i think you did a very greate job!  Since i am now working on a system
> > that
> > using lucene to implement a search engine, i would like to know some
> more
> > details about Hinbernate Search.
> >
> >   I have read some of the code in Hinbernate 3.2GA release, the code is
> > pretty cool, but  there is one thing i doubt:
> >
> >   For the update operation Hibernate Search used remove & update.which
> > refer
> > to Lucene's deleteDocuments method.  That's ok and i also could only
> find
> > this way to update the index data. This will works fine when the
> operation
> > does not have high frequency.
> >
> > But as i know  the remove operation in lucene only marked a tag for the
> > deleted document without actually delete the data ofr index files.  We
> > know
> > in some systems the data would be updated in a very high  frequency(eg.
> an
> > traffic status query system), then it will not take a long time that the
> > index will be filled with lots of expired document data,  even if the
> data
> > update is not as fast as a traffic status, i think this problem is still
> > very critical since things we stored in databases are always updating.
> >
> >  Is there any way to solve this in Hibernate Search?
> >
> >
> > Richie
> >
> >
> > 2006/11/19, Emmanuel Bernard <emmanuel@hibernate.org>:
> > >
> > > I forgot a couple of things.
> > > I do not think that all your object properties belongs to the Index,
> and
> > > some of them will be put in the index with information degradation (ie
> > > store year/month rather than the whole date). So I do not believe
> there
> > > is a bidirectional relationship between your domain model and your
> index
> > > documents (for size, efficiency and accuracy purpose).
> > > For that matter, Compass cannot really truly index your database
> backed
> > > domain model and give back the object to you. Hibernate Search can
> > > because it delegate the object hydration to Hibernate Core.
> > >
> > > Of course that's my opinions, and some people can disagree ;-)
> > >
> > > Emmanuel Bernard wrote:
> > > >
> > > > Hi,
> > > > I am not really familiar with Compass I haven't really looked at the
> > > > code, Hibernate Lucene (now renamed Hibernate Search) started from a
> > > > user demand. I had some in depth discussions though, with some users
> > > > that evaluated both Compass and Hibernate Search that helped me
> drive
> > > > its design.
> > > >
> > > > Here are the arguments in favor of Hibernate Search:
> > > > 1. not Yet Another API to deal with your domain model
> > > > If you already use an ORM (JPA or Hibernate), you are familiar with
> > > > those APIs. Using compass implies that you have to use a different
> set
> > > > of API to play with the object lifecycle (CRUD).
> > > > Hibernate Search is integrated with the org.hibernate.Queryinterface,
> > > > and all the CUD operations on the index are triggered from the
> > Hibernate
> > > > CUD operations.
> > > >
> > > > 2. Metadata
> > > > Metadata are minimal and fit particularly well through annotations,
> so
> > > > you don't have yet another XML representation of ther same domain
> > model
> > > > (Compass might now have annotations support, you'll have to check)
> > > >
> > > > 3. it's all about managed objects (ie managed by the Session or the
> > > > EntityManager)
> > > > Hibernate Search gives you back objects managed by the Session, so
> any
> > > > change made to them will (by default) be synchronized with the
> > database,
> > > > this is the normal behavior of an ORM, but is not what you have from
> a
> > > > Compass search.
> > > > This approach fits well with the JBoss Seam approach of having all
> the
> > > > application around the domain model and EJB 3.0
> > > >
> > > > 4. Not too much abstraction
> > > >  From what I've heard, Compass borrow a lot of its design /
> classnames
> > > > from Hibernate/Spring/Lucene. Compass tries to abstract those 3
> > > > techlnologies (at least Hibernate and Lucene), by providing its own
> > > > infrastructure.
> > > > What am trying to do with Hibernate Search is to keep the
> > abstraction as
> > > > light as possible. For advanced Lucene query you'll have to use pure
> > > > Lucene APIs, which is possible / natural with Hibernate Search
> > > >
> > > >
> > > > I invite you to check these links (which I expect to release soon)
> > > >
> > >
> >
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> > > > and for the future (but flexible)
> > > >
> > >
> >
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00393.html
> > > >
> > > > HTH
> > > >
> > > > Emmanuel
> > > >
> > > > Lukas Vlcek wrote:
> > > > >
> > > > > Emanuael,
> > > > > I would be glad to hear your answer here (on user list).
> > > > > Regards,
> > > > > Lukas
> > > > >
> > > > > ---------- Forwarded message ----------
> > > > > From: Emmanuel Bernard <emmanuel@hibernate.org>
> > > > > Date: Nov 13, 2006 11:07 PM
> > > > > Subject: Re: Hibernate Lucene trademark issues
> > > > > To: java-dev@lucene.apache.org, lukas.vlcek@gmail.com
> > > > >
> > > > > Hi Lukas,
> > > > > I'd be happy to answer your question, but I don't think Lucene
> > dev is
> > > > > the appropriate area for that kind of discussion.
> > > > > let's move this discussion here
> > > > > http://forum.hibernate.org/viewforum.php?f=9 (or in the Lucene
> User
> > > list
> > > > > if you want to).
> > > > >
> > > > > Emmanuel
> > > > >
> > > > > Lukas Vlcek wrote:
> > > > > >
> > > > > > Hi Emmanuel,
> > > > > >
> > > > > > I am interested in you solution. I have a plan to use lucene and
> > > > > hibernate
> > > > > > in my next project and search will play very important role
> > > > > > (*stake-holder*
> > > > > > functionality). I have heard of
> > > > > > comapss<http://www.opensymphony.com/compass/>project which
> > > introduces
> > > > > > searching (lucene) layer on top of hibernate also.
> > > > > > I haven't had a change to study it in detail yet.
> > > > > >
> > > > > > Do you think you could give me some high level comments about
> your
> > > > > > motivation for implementing lucene search directly in hibernate
> > > code,
> > > > > > couldn't you just use compass project? Is there any fundamental
> > > > > difference
> > > > > > between your approach and comapss?
> > > > > >
> > > > > > Many thanks,
> > > > > > Lukas
> > > > > >
> > > > > > On 11/6/06, Emmanuel Bernard <emmanuel@hibernate.org> wrote:
> > > > > > >
> > > > > > > Hi guys,
> > > > > > > I'm Emmanuel Bernard from JBoss.
> > > > > > > I'm the current lead developer of the Hibernate Lucene
> > integration
> > > > > > module.
> > > > > > > The goal of this project is to facilitate the integration of a
> > > > search
> > > > > > > capability to Hibernate based applications. And guess what,
> > I use
> > > > > Lucene
> > > > > > > ;-)
> > > > > > >
> > > > > > >
> > > > > >
> > > > >
> > > >
> > >
> >
> http://www.hibernate.org/hib_docs/annotations/reference/en/html/lucene.html
> > > > > > >
> > > > > >
> > > > >
> > > >
> > >
> >
> http://www.mail-archive.com/hibernate-dev%40lists.jboss.org/msg00392.html
> > > > > > >
> > > > > > > I realized this week end that the 'Hibernate Lucene' name
> might
> > > > > infringe
> > > > > > > the Apache Lucene trademark policy.
> > > > > > > http://www.cafepress.com/lucene/ seems to state that Lucene is
> a
> > > > > > > trademark of the Apache Software Foundation (nice golf shirt
> > BTW)
> > > > > > > But I wasn't able to find any document explaining the fair use
> > > > of the
> > > > > > > Lucene brand (the license as well as the notice seem to be
> > silent
> > > on
> > > > > > > this subject).
> > > > > > >
> > > > > > > Even if Lucene in not trademarked, what do you consider a fair
> > > > use of
> > > > > > > your brand? I'm happy to rename my project, I guess the
> initial
> > > > choice
> > > > > > > was more a tribute to your project than anything else.
> > > > > > >
> > > > > > > Emmanuel
> > > > > > >
> > > > > > > PS: please forward this email to the appropriate persons if
> this
> > > > > is not
> > > > > > > the case already (PMC or whatever)
> > > > > > >
> > > > > > >
> > > > > > >
> > > >
> ---------------------------------------------------------------------
> > > > > > > To unsubscribe, e-mail: java-dev-unsubscribe@lucene.apache.org
> > > > > > > For additional commands, e-mail:
> java-dev-help@lucene.apache.org
> > > > > > >
> > > > > > >
> > > > > >
> > > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_51091_23363824.1164356958328--

From java-user-return-24693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 24 10:56:07 2006
Return-Path: <java-user-return-24693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77612 invoked from network); 24 Nov 2006 10:56:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 10:56:06 -0000
Received: (qmail 31505 invoked by uid 500); 24 Nov 2006 10:56:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30832 invoked by uid 500); 24 Nov 2006 10:56:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30808 invoked by uid 99); 24 Nov 2006 10:56:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 02:56:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 02:55:53 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E751B30EFC19; Fri, 24 Nov 2006 05:55:31 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 344A530EFC18
	for <java-user@lucene.apache.org>; Fri, 24 Nov 2006 05:55:29 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <f7d99bf30611240022u37704bc2rd33b68b492491f70@mail.gmail.com>
References: <373399D6389D8C42B4EAD9BE2B6B5C5F070D1529@tormail01.cihi.ca> <456381A9.2000907@alias-i.com> <02621271-05B0-4AC9-88E5-957920E8B6A8@ehatchersolutions.com> <f7d99bf30611240022u37704bc2rd33b68b492491f70@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7F41FFFF-5547-475D-8515-26C83FEA8FF8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: does anyone know of a 'smart' categorizing text pattern finder?
Date: Fri, 24 Nov 2006 05:55:25 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Nov 24, 2006, at 3:22 AM, Jin Yiqing wrote:
> Does this book really exit? I googled and didn't find any  
> introduction about
> it :)


No, I'm sure Bob meant to say "Lucene in Action" in which he  
contributed a wonderful case study on bits of LingPipe.

	Erik



>
> 2006/11/22, Erik Hatcher <erik@ehatchersolutions.com>:
>>
>>
>> On Nov 21, 2006, at 5:46 PM, Bob Carpenter wrote:
>> > LingPipe in Action.
>>
>> Now that's a book I'd love to own!
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 24 11:31:45 2006
Return-Path: <java-user-return-24694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90378 invoked from network); 24 Nov 2006 11:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 11:31:43 -0000
Received: (qmail 96278 invoked by uid 500); 24 Nov 2006 11:31:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96246 invoked by uid 500); 24 Nov 2006 11:31:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96235 invoked by uid 99); 24 Nov 2006 11:31:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 03:31:44 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.81.148.192] (HELO mad.isoco.net) (62.81.148.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 03:31:32 -0800
Received: from [172.18.2.124] (lrodrigo.mad.isoco.net [172.18.2.124])
	by mad.isoco.net (Postfix) with ESMTP id 10E294FA60
	for <java-user@lucene.apache.org>; Fri, 24 Nov 2006 12:36:28 +0100 (CET)
Message-ID: <4566D7F9.6030003@isoco.com>
Date: Fri, 24 Nov 2006 12:31:05 +0100
From: Luis Rodrigo Aguado <lrodrigo@isoco.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Hit.getDocument performance
Content-Type: multipart/alternative;
 boundary="------------050707000004030702040209"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------050707000004030702040209
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

    Hi all,

    I am having a performance bottleneck that is driving me crazy. Maybe 
anyone there has a clue of the source...

    I am working with an index of 2400 pdf files. For each of them, I 
index the contents, and I store the filename and the creation date. 
Nothing else. The resulting index is about 6Mb.

    The application generates several queries for each user input, and, 
depending on the queries I launch, it may take up to 10 minutes to get 
the results!!!  It depends on the number of hits, being around 1500 docs 
the highest number of hits I have tested. After a profiling session I 
have located the Hits.getDocument as the primary source of time (and 
memory) waste.

    Is this reasonable?  Maybe I did something wrong to create the 
index?  Are there any workarounds that you imagine?

    Thanks in advance!!!

    Luis.


--------------050707000004030702040209--

From java-user-return-24695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 24 12:15:06 2006
Return-Path: <java-user-return-24695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1928 invoked from network); 24 Nov 2006 12:15:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 12:15:05 -0000
Received: (qmail 44242 invoked by uid 500); 24 Nov 2006 12:15:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43730 invoked by uid 500); 24 Nov 2006 12:15:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43719 invoked by uid 99); 24 Nov 2006 12:15:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 04:15:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.81.148.192] (HELO mad.isoco.net) (62.81.148.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 04:14:53 -0800
Received: from [172.18.2.124] (lrodrigo.mad.isoco.net [172.18.2.124])
	by mad.isoco.net (Postfix) with ESMTP id 4204F4FA60
	for <java-user@lucene.apache.org>; Fri, 24 Nov 2006 13:19:49 +0100 (CET)
Message-ID: <4566E223.5090608@isoco.com>
Date: Fri, 24 Nov 2006 13:14:27 +0100
From: Luis Rodrigo Aguado <lrodrigo@isoco.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Hit.getDocument performance
References: <4566D7F9.6030003@isoco.com>
In-Reply-To: <4566D7F9.6030003@isoco.com>
Content-Type: multipart/alternative;
 boundary="------------010201050804020702070709"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------010201050804020702070709
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

I have just read in the API doc that going through the Hits returned is 
not really adviceable. However, I am not developing the final 
application, but a middleware that accesses Lucene, so I would not want 
to take the decision to cut the number of docs returned, but let the 
application do that. Is there any way to bypass this limitation?

Thanks!


Luis Rodrigo Aguado escribió:
>    Hi all,
>
>    I am having a performance bottleneck that is driving me crazy. 
> Maybe anyone there has a clue of the source...
>
>    I am working with an index of 2400 pdf files. For each of them, I 
> index the contents, and I store the filename and the creation date. 
> Nothing else. The resulting index is about 6Mb.
>
>    The application generates several queries for each user input, and, 
> depending on the queries I launch, it may take up to 10 minutes to get 
> the results!!!  It depends on the number of hits, being around 1500 
> docs the highest number of hits I have tested. After a profiling 
> session I have located the Hits.getDocument as the primary source of 
> time (and memory) waste.
>
>    Is this reasonable?  Maybe I did something wrong to create the 
> index?  Are there any workarounds that you imagine?
>
>    Thanks in advance!!!
>
>    Luis.
>
>
> ------------------------------------------------------------------------
>
> No virus found in this incoming message.
> Checked by AVG Free Edition.
> Version: 7.5.430 / Virus Database: 268.14.14/548 - Release Date: 23/11/2006 15:22
>   

-- 

*Luis Rodrigo Aguado*

Innovation and R&D

Research Manager

lrodrigo(at)isoco.com

#T  +34913349777

C/Pedro de Valdivia, 10

28006, Madrid, Spain

* *

*iSOCO** *

            intelligent software for the networked economy

            www.isoco.com <http://www.isoco.com/>

 

Este mensaje se dirige exclusivamente a su destinatario y puede contener 
información privilegiada o confidencial. Si no es vd. el destinatario 
indicado, queda notificado de que la utilización, divulgación y/o copia 
sin autorización está prohibida en virtud de la legislación vigente. Si 
ha recibido este mensaje por error, le rogamos que nos lo comunique 
inmediatamente por esta misma vía y proceda a su destrucción.

 

This message is intended exclusively for its addressee and may contain 
information that is CONFIDENTIAL and protected by professional 
privilege. If you are not the intended recipient you are hereby notified 
that any dissemination, copy or disclosure of this communication is 
strictly prohibited by law. If this message has been received in error, 
please immediately notify us via e-mail and delete it.


--------------010201050804020702070709--

From java-user-return-24696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 24 12:46:22 2006
Return-Path: <java-user-return-24696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8853 invoked from network); 24 Nov 2006 12:46:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 12:46:21 -0000
Received: (qmail 78861 invoked by uid 500); 24 Nov 2006 12:46:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78823 invoked by uid 500); 24 Nov 2006 12:46:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78812 invoked by uid 99); 24 Nov 2006 12:46:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 04:46:24 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 24 Nov 2006 04:46:11 -0800
Received: (qmail 51785 invoked by uid 60001); 24 Nov 2006 12:45:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=WFBsSSJ/vjvIfIZoax/e6zbt28BwcRUo7oHzcIWkekMz8S5RjPjTtMFRDfS570JHHeTsYSMG/Pz47VZF6jFUYB/mXGNBZioF+1SrlQleMnbTwt3vB4MIyUXEvsAnYFeO5/jGIP9Ag6bVjddqP2Wa998bdWbTjN/YsbbtJECIcgQ=  ;
Message-ID: <20061124124549.51783.qmail@web26005.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Fri, 24 Nov 2006 12:45:49 GMT
Date: Fri, 24 Nov 2006 12:45:49 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Hit.getDocument performance
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Look in the latest SVN version - there is some new code for "Lazy field loa=
ding" i.e. not incurring the hit for retrieving *all* fields if you only wa=
nt to retrieve a subset from a document. Not used it myself yet but it may =
be applicable.=0A=0AIf you *really* want all matching docs too then I would=
n't use Hits - I think it retains a limited set of doc ids and will rerun y=
our query whenever you page your way through it's limited cache in order to=
 get the next batch. Look at the HitCollector API instead.=0A=0ATo be hones=
t though building an app which returns an unlimited volume=0Aof PDF content=
s sounds like a good candidate for OutOfMemory exceptions=0A- are the resul=
ts streamed in any way? Any buffering of the entire result could be a kille=
r.=0A=0ACheers=0AMark=0A=0A=0A----- Original Message ----=0AFrom: Luis Rodr=
igo Aguado <lrodrigo@isoco.com>=0ATo: java-user@lucene.apache.org=0ASent: F=
riday, 24 November, 2006 12:14:27 PM=0ASubject: Re: Hit.getDocument perform=
ance=0A=0AI have just read in the API doc that going through the Hits retur=
ned is =0Anot really adviceable. However, I am not developing the final =0A=
application, but a middleware that accesses Lucene, so I would not want =0A=
to take the decision to cut the number of docs returned, but let the =0Aapp=
lication do that. Is there any way to bypass this limitation?=0A=0AThanks!=
=0A=0A=0ALuis Rodrigo Aguado escribi=F3:=0A>    Hi all,=0A>=0A>    I am hav=
ing a performance bottleneck that is driving me crazy. =0A> Maybe anyone th=
ere has a clue of the source...=0A>=0A>    I am working with an index of 24=
00 pdf files. For each of them, I =0A> index the contents, and I store the =
filename and the creation date. =0A> Nothing else. The resulting index is a=
bout 6Mb.=0A>=0A>    The application generates several queries for each use=
r input, and, =0A> depending on the queries I launch, it may take up to 10 =
minutes to get =0A> the results!!!  It depends on the number of hits, being=
 around 1500 =0A> docs the highest number of hits I have tested. After a pr=
ofiling =0A> session I have located the Hits.getDocument as the primary sou=
rce of =0A> time (and memory) waste.=0A>=0A>    Is this reasonable?  Maybe =
I did something wrong to create the =0A> index?  Are there any workarounds =
that you imagine?=0A>=0A>    Thanks in advance!!!=0A>=0A>    Luis.=0A>=0A>=
=0A> ----------------------------------------------------------------------=
--=0A>=0A> No virus found in this incoming message.=0A> Checked by AVG Free=
 Edition.=0A> Version: 7.5.430 / Virus Database: 268.14.14/548 - Release Da=
te: 23/11/2006 15:22=0A>   =0A=0A-- =0A=0A*Luis Rodrigo Aguado*=0A=0AInnova=
tion and R&D=0A=0AResearch Manager=0A=0Alrodrigo(at)isoco.com=0A=0A#T  +349=
13349777=0A=0AC/Pedro de Valdivia, 10=0A=0A28006, Madrid, Spain=0A=0A* *=0A=
=0A*iSOCO** *=0A=0A            intelligent software for the networked econo=
my=0A=0A            www.isoco.com <http://www.isoco.com/>=0A=0A =0A=0AEste =
mensaje se dirige exclusivamente a su destinatario y puede contener =0Ainfo=
rmaci=F3n privilegiada o confidencial. Si no es vd. el destinatario =0Aindi=
cado, queda notificado de que la utilizaci=F3n, divulgaci=F3n y/o copia =0A=
sin autorizaci=F3n est=E1 prohibida en virtud de la legislaci=F3n vigente. =
Si =0Aha recibido este mensaje por error, le rogamos que nos lo comunique =
=0Ainmediatamente por esta misma v=EDa y proceda a su destrucci=F3n.=0A=0A =
=0A=0AThis message is intended exclusively for its addressee and may contai=
n =0Ainformation that is CONFIDENTIAL and protected by professional =0Apriv=
ilege. If you are not the intended recipient you are hereby notified =0Atha=
t any dissemination, copy or disclosure of this communication is =0Astrictl=
y prohibited by law. If this message has been received in error, =0Aplease =
immediately notify us via e-mail and delete it.=0A=0A=0A=0A=0A=0A=0A=09=0A=
=09=0A=09=09=0A___________________________________________________________ =
=0AAll new Yahoo! Mail "The new Interface is stunning in its simplicity and=
 ease of use." - PC Magazine =0Ahttp://uk.docs.yahoo.com/nowyoucan.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 24 14:01:54 2006
Return-Path: <java-user-return-24697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30922 invoked from network); 24 Nov 2006 14:01:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 14:01:53 -0000
Received: (qmail 90502 invoked by uid 500); 24 Nov 2006 14:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90293 invoked by uid 500); 24 Nov 2006 14:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90281 invoked by uid 99); 24 Nov 2006 14:01:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 06:01:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 06:01:42 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1120481nfc
        for <java-user@lucene.apache.org>; Fri, 24 Nov 2006 06:01:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iMBCg/6WjNtSYFiEmPVzbiZG/NVBcmJl6S+zfHo+fBqE/A6hh3QpP9GIPkdFlWu93eYmBlLs8NLoI4CvUT9vzYviIJ8rZt9AXtVI9eiRL40aFmMBtkPcczO5+PSXxxIdI1VxdRf34wO16PUXHXBf0VCAA/Kfn+sOuj9APDfEZZs=
Received: by 10.82.175.2 with SMTP id x2mr1596900bue.1164376880098;
        Fri, 24 Nov 2006 06:01:20 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Fri, 24 Nov 2006 06:01:20 -0800 (PST)
Message-ID: <359a92830611240601t2f9164das385be5dbaf9b3c11@mail.gmail.com>
Date: Fri, 24 Nov 2006 09:01:20 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie Search Question
In-Reply-To: <7513261.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59079_31944701.1164376880057"
References: <7438630.post@talk.nabble.com>
	 <29AA93ED-F339-49BB-8D37-E4DDF0D987A5@ehatchersolutions.com>
	 <7506220.post@talk.nabble.com>
	 <359a92830611230537j1307866coe4d7bc5a0e1902a3@mail.gmail.com>
	 <7513261.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59079_31944701.1164376880057
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If we're still dealing with StringReader(text) throwing an error.... It
really shouldn't unless the document has no field named "contents". Here's
what I'd do...

Get a copy of Luke (google luke lucene) to examine your index.
Figure out what the document ID is that you're blowing up on and look at it
in Luke to be sure that there's text in the contents field.
Watch case etc.

You shouldn't be getting a null here unless 1> your doc ID is not in your
index or 2> your document doesn't have such a field.

And how are you storing your date? Field.Store.YES? NO? COMPRESSED?

Best
Erick

On 11/23/06, sirakov <sirakov@gmail.com> wrote:
>
>
>
> Erick Erickson wrote:
> >
> > So why not assign a string to "text" and try it again? Or show us the
> code
> > where you expect the text variable to get a value.....
> >
> > Erick
> >
> >
>
> I`m sorry that was a miss from my side.
>
> I've tried to put the simple code into SearchFiles, between
>
> Hits hits = searcher.search(query);
>
> and
>
> String path = doc.get("path");
>
> Here the code:
>
>       Highlighter highlighter = new Highlighter(new QueryScorer(query));
>
>
>
>       if (repeat > 0) {                           // repeat & time as
> benchmark
>         Date start = new Date();
>         for (int i = 0; i < repeat; i++) {
>           hits = searcher.search(query);
>         }
>         Date end = new Date();
>         System.out.println("Time: "+(end.getTime()-start.getTime())+"ms");
>       }
>
>       System.out.println(hits.length() + " total matching documents");
>
>       final int HITS_PER_PAGE = 10;
>       for (int start = 0; start < hits.length(); start += HITS_PER_PAGE) {
>         int end = Math.min(hits.length(), start + HITS_PER_PAGE);
>         for (int i = start; i < end; i++) {
>
>           if (raw) {                              // output raw format
>             System.out.println("doc="+hits.id(i)+" score="+hits.score(i));
>             continue;
>           }
>
>           Document doc = hits.doc(i);
>
>           String text = hits.doc(i).get(field); //String field =
> "contents";
>           TokenStream tokenStream = analyzer.tokenStream(field, new
> StringReader(text));
>           // Get 3 best fragments and seperate with a "..."
>           String result = highlighter.getBestFragments(tokenStream, text,
> 3,
> "...");
>
>
>           String path = doc.get("path");
>           if (path != null) {
>             System.out.println((i+1) + ". " +
> path);System.out.println("\t"+result);
>             String title = doc.get("title");
>             if (title != null) {
>               System.out.println("   Title: " + doc.get("title"));
>             }
>           } else {
>             System.out.println((i+1) + ". " + "No path for this
> document");
>           }
>         }
>
> The bolded text was added by me. I hope, i have made the changes in the
> right file :)
> --
> View this message in context:
> http://www.nabble.com/Newbie-Search-Question-tf2667479.html#a7513261
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_59079_31944701.1164376880057--

From java-user-return-24698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 24 14:28:06 2006
Return-Path: <java-user-return-24698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43068 invoked from network); 24 Nov 2006 14:28:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2006 14:28:05 -0000
Received: (qmail 24679 invoked by uid 500); 24 Nov 2006 14:28:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24608 invoked by uid 500); 24 Nov 2006 14:28:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24597 invoked by uid 99); 24 Nov 2006 14:28:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 06:28:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 06:27:52 -0800
Received: by py-out-1112.google.com with SMTP id a25so507100pyi
        for <java-user@lucene.apache.org>; Fri, 24 Nov 2006 06:27:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cCNyxqFvsnsj75cwpZQ8VTrxn7gxgR5s408ICDhCkUr9AMNOrzlfcPO05sqx72JS61y83i66NlAvA3Y11cJjHeL+ew8rHa/PHLgxNKRh24mwMb8OzkVBWcU1JK2MK0SwJfy0ItN6E/aWOcXundnIJtEkMon8B+aB4qEZcnVAUrA=
Received: by 10.35.21.1 with SMTP id y1mr5959465pyi.1164378452242;
        Fri, 24 Nov 2006 06:27:32 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id c12sm50781587nzc.2006.11.24.06.27.29;
        Fri, 24 Nov 2006 06:27:31 -0800 (PST)
Message-ID: <45670155.1070902@gmail.com>
Date: Fri, 24 Nov 2006 09:27:33 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Hit.getDocument performance
References: <20061124124549.51783.qmail@web26005.mail.ukl.yahoo.com>
In-Reply-To: <20061124124549.51783.qmail@web26005.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hits will use TopDocs to return the first 100 doc ids and put them in a 
cache (normalizing their scores first if I remember correctly)...then 
when you retrieve a doc it will put that in a cache as well. If you ask 
for a doc over 100 it will execute a topdocs search again to fill the 
cache up to the doc number you requested times 2. So  you better  need 
the extra caching (does anyone ever get the same doc twice from a result 
set?) and you better not be interested in  more than the first 100 docs 
(you have to search multiple times to get docs over 100). You can use  
TopDocs instead but you wont get the score normalization or the easy 
field access...just the id's. You can take hits and rip out the caching 
and the getmoredocs, but that brings it's own issues...there is a 
priority queue that needs to be initialized...etc etc
You can also use the HitCollector API...

You'll notice that Hits uses TopDocs and that TopDocs uses HitCollector, 
so your just skipping some stuff built on top of HitCollector. Keep in 
mind you can make your own topdocs or Hits that does just what you want, 
taking ideas from how they currently use a HitCollector.

I wouldn't mind if there where an alternative to Hits that didn't do all 
the caching and re-searching. The normal paging method of re querying 
seems to go against the Hits caching idea. Caching in Hits seems to be 
nice for a single user app maybe where you would use the same hits 
object for paging...but that would seem rarer than a multi user app 
where you just re-query for paging and you don't want or use any 
caching...of course you can always just build off topdocs, but it would 
be nice to have the functionality of hits but without caching and 
researching out of the box. If you use topdocs and you want score 
normalization and easy field access it would seem that a lot of people 
will be redoing the same work.

Feel free to tell me how I don't know what I am talking about :)

- Mark

mark harwood wrote:
> Look in the latest SVN version - there is some new code for "Lazy field loading" i.e. not incurring the hit for retrieving *all* fields if you only want to retrieve a subset from a document. Not used it myself yet but it may be applicable.
>
> If you *really* want all matching docs too then I wouldn't use Hits - I think it retains a limited set of doc ids and will rerun your query whenever you page your way through it's limited cache in order to get the next batch. Look at the HitCollector API instead.
>
> To be honest though building an app which returns an unlimited volume
> of PDF contents sounds like a good candidate for OutOfMemory exceptions
> - are the results streamed in any way? Any buffering of the entire result could be a killer.
>
> Cheers
> Mark
>
>
> ----- Original Message ----
> From: Luis Rodrigo Aguado <lrodrigo@isoco.com>
> To: java-user@lucene.apache.org
> Sent: Friday, 24 November, 2006 12:14:27 PM
> Subject: Re: Hit.getDocument performance
>
> I have just read in the API doc that going through the Hits returned is 
> not really adviceable. However, I am not developing the final 
> application, but a middleware that accesses Lucene, so I would not want 
> to take the decision to cut the number of docs returned, but let the 
> application do that. Is there any way to bypass this limitation?
>
> Thanks!
>
>
> Luis Rodrigo Aguado escribió:
>   
>>    Hi all,
>>
>>    I am having a performance bottleneck that is driving me crazy. 
>> Maybe anyone there has a clue of the source...
>>
>>    I am working with an index of 2400 pdf files. For each of them, I 
>> index the contents, and I store the filename and the creation date. 
>> Nothing else. The resulting index is about 6Mb.
>>
>>    The application generates several queries for each user input, and, 
>> depending on the queries I launch, it may take up to 10 minutes to get 
>> the results!!!  It depends on the number of hits, being around 1500 
>> docs the highest number of hits I have tested. After a profiling 
>> session I have located the Hits.getDocument as the primary source of 
>> time (and memory) waste.
>>
>>    Is this reasonable?  Maybe I did something wrong to create the 
>> index?  Are there any workarounds that you imagine?
>>
>>    Thanks in advance!!!
>>
>>    Luis.
>>
>>
>> ------------------------------------------------------------------------
>>
>> No virus found in this incoming message.
>> Checked by AVG Free Edition.
>> Version: 7.5.430 / Virus Database: 268.14.14/548 - Release Date: 23/11/2006 15:22
>>   
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 25 01:43:45 2006
Return-Path: <java-user-return-24699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73668 invoked from network); 25 Nov 2006 01:43:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 01:43:44 -0000
Received: (qmail 6047 invoked by uid 500); 25 Nov 2006 01:14:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6023 invoked by uid 500); 25 Nov 2006 01:14:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6012 invoked by uid 99); 25 Nov 2006 01:14:28 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 17:14:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 17:14:15 -0800
Received: by ug-out-1314.google.com with SMTP id k40so777254ugc
        for <java-user@lucene.apache.org>; Fri, 24 Nov 2006 17:13:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=iQOCE+TTrH3rMEFmsIx5hGWgsH1PaUOxEuDuId2G6ykdZsA/vG+TKQuRQ8K3o2iuThpqwUE5K8A+ONR0BHiJIeTiYu1/s23x0UPSSo+qalxK2xX4Iwl6TQV94LyCfDAdDANsGN8ZWqq9aCqEv5wRA9djUy4rPIRWJWolYt1W9jA=
Received: by 10.66.216.20 with SMTP id o20mr8016705ugg.1164417233816;
        Fri, 24 Nov 2006 17:13:53 -0800 (PST)
Received: from ?192.168.0.100? ( [83.249.118.246])
        by mx.google.com with ESMTP id b23sm15500821ugd.2006.11.24.17.13.53;
        Fri, 24 Nov 2006 17:13:53 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <979FC3E4-AC5C-4819-80BD-DA472D60732E@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: karl wettin <karl.wettin@gmail.com>
Subject: Hierarchical classified documents
Date: Sat, 25 Nov 2006 02:14:00 +0100
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

This is an excerpt of my business object class diagram (go fixed font  
size):


  [MyObject]
      |
0..* |
      V       parent
[Namespace]<>------+
      |        0..1 |
      | 0..*        |
      +-------------+
       child


All business object instances have a unique identifier.

A namespace path could be {1/2/3/4}. Any branch in the path may  
contain documents. I need to be able to place a query that matches  
the documents in {1/2/3} without matching the documents in {1/2/3/4}.  
I also need to need to place queries that match all documents in a  
namespaces recursive.

I can see a number of possible solutions for this, but I was hoping  
for a de facto implementation.


This is the simplest thing I could think of:

  * store full namespace path as one term: "1/2/3"
  * store each namespace identity as on term: "1", "2", "3"

A more complicated implementation would be to use the latter only and  
work with span queries. It would save index size, but would probably  
be more expensive in clock ticks?

I could also limit the depth of a namespace path and store it in  
multiple namespace_branch_N fields and a namespace_leaf field. Did  
not think this one through too much.


Any experience or thoughts?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 25 03:20:12 2006
Return-Path: <java-user-return-24700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91057 invoked from network); 25 Nov 2006 03:20:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 03:20:11 -0000
Received: (qmail 67562 invoked by uid 500); 25 Nov 2006 03:20:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67526 invoked by uid 500); 25 Nov 2006 03:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67515 invoked by uid 99); 25 Nov 2006 03:20:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 19:20:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 19:20:03 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2D4655B778; Fri, 24 Nov 2006 19:19:42 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 19E3C7F403
	for <java-user@lucene.apache.org>; Fri, 24 Nov 2006 19:19:42 -0800 (PST)
Date: Fri, 24 Nov 2006 19:19:42 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Hierarchical classified documents
In-Reply-To: <979FC3E4-AC5C-4819-80BD-DA472D60732E@gmail.com>
Message-ID: <Pine.LNX.4.58.0611241917360.10285@hal.rescomp.berkeley.edu>
References: <979FC3E4-AC5C-4819-80BD-DA472D60732E@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: This is the simplest thing I could think of:
:
:   * store full namespace path as one term: "1/2/3"
:   * store each namespace identity as on term: "1", "2", "3"

I use the second approach for finding all Docs at a given node or below in
the tree ... instead of the first appraoch, have a field which just
contains the specific node (not it's parents)) a Document is located at
for doing the first type of query you described (at a node, but not below
it)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 25 05:11:31 2006
Return-Path: <java-user-return-24701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99341 invoked from network); 25 Nov 2006 05:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 05:11:30 -0000
Received: (qmail 11370 invoked by uid 500); 25 Nov 2006 05:11:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11336 invoked by uid 500); 25 Nov 2006 05:11:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11325 invoked by uid 99); 25 Nov 2006 05:11:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 21:11:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 24 Nov 2006 21:11:21 -0800
Received: by ug-out-1314.google.com with SMTP id k40so792290ugc
        for <java-user@lucene.apache.org>; Fri, 24 Nov 2006 21:10:59 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=oC24qcnVs9tY9QB2a+4hwUvsZ2+HrisjbVgk9VXxGzOK4VzrBdfFQn0Rhmc5oF8GBgJpqZ4lvJmefw5seae1ut4XzIxr8d6CP4yabTj+vkowAy1I2pYIGo9AuOq/UCRKwi79wj8pKCtDkhjciSIij6KwAFhMOjtACrN1V/U6D18=
Received: by 10.67.27.3 with SMTP id e3mr8335032ugj.1164431459286;
        Fri, 24 Nov 2006 21:10:59 -0800 (PST)
Received: from ?192.168.0.100? ( [83.249.118.246])
        by mx.google.com with ESMTP id k28sm7198092ugd.2006.11.24.21.10.58;
        Fri, 24 Nov 2006 21:10:58 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0611241917360.10285@hal.rescomp.berkeley.edu>
References: <979FC3E4-AC5C-4819-80BD-DA472D60732E@gmail.com> <Pine.LNX.4.58.0611241917360.10285@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <ECBD0972-588F-4367-9F0E-24EFE52621A3@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Hierarchical classified documents
Date: Sat, 25 Nov 2006 06:11:04 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


25 nov 2006 kl. 04.19 skrev Chris Hostetter:

>
> : This is the simplest thing I could think of:
> :
> :   * store full namespace path as one term: "1/2/3"
> :   * store each namespace identity as on term: "1", "2", "3"
>
> I use the second approach for finding all Docs at a given node or  
> below in
> the tree ... instead of the first appraoch, have a field which just
> contains the specific node (not it's parents)) a Document is  
> located at
> for doing the first type of query you described (at a node, but not  
> below
> it)

Excellent, thank you. I'll go for that.

There is however virtually no cost for me to calculate the full path,  
so I might just experiment with the span query thingy.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 25 16:13:13 2006
Return-Path: <java-user-return-24702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18207 invoked from network); 25 Nov 2006 16:13:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 16:13:12 -0000
Received: (qmail 11804 invoked by uid 500); 25 Nov 2006 16:13:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11781 invoked by uid 500); 25 Nov 2006 16:13:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11770 invoked by uid 99); 25 Nov 2006 16:13:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 08:13:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 08:12:59 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 53C3E5B770; Sat, 25 Nov 2006 08:12:38 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4F0AC7F403
	for <java-user@lucene.apache.org>; Sat, 25 Nov 2006 08:12:38 -0800 (PST)
Date: Sat, 25 Nov 2006 08:12:38 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Hierarchical classified documents
In-Reply-To: <ECBD0972-588F-4367-9F0E-24EFE52621A3@gmail.com>
Message-ID: <Pine.LNX.4.58.0611250809320.11502@hal.rescomp.berkeley.edu>
References: <979FC3E4-AC5C-4819-80BD-DA472D60732E@gmail.com>
 <Pine.LNX.4.58.0611241917360.10285@hal.rescomp.berkeley.edu>
 <ECBD0972-588F-4367-9F0E-24EFE52621A3@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



: There is however virtually no cost for me to calculate the full path,
: so I might just experiment with the span query thingy.

if you odn't mind using a span, then just reverse the ordering so the
"leaf" that the docs are at appear in the first position -- then you can
use a SpanFirst to check for exact matches.

personally ... i'd rather have a slightly bigger index then slightly
slower queries.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 25 16:21:32 2006
Return-Path: <java-user-return-24703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19568 invoked from network); 25 Nov 2006 16:21:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 16:21:32 -0000
Received: (qmail 18191 invoked by uid 500); 25 Nov 2006 16:21:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18167 invoked by uid 500); 25 Nov 2006 16:21:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18156 invoked by uid 99); 25 Nov 2006 16:21:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 08:21:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 08:21:19 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1426518nfc
        for <java-user@lucene.apache.org>; Sat, 25 Nov 2006 08:20:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=nQbxqeGkuh5flFDOlHhimmjKvl4PHr0U4CU15PwP5o8+Df3gzpi+joVMNcLxSuUrKNv50ZZSqY7rb0DOWW+z+25qVRXdTTIs5xTK4DvbzfSB+mFYgggZgP0o+iPE7KlgVd1ZUDkL+kYW94ubK5ZwA3e5/I74EvuXQDiet/S5YT0=
Received: by 10.49.91.9 with SMTP id t9mr7657474nfl.1164471657626;
        Sat, 25 Nov 2006 08:20:57 -0800 (PST)
Received: from ?192.168.0.100? ( [83.249.118.246])
        by mx.google.com with ESMTP id k23sm14493171nfc.2006.11.25.08.20.56;
        Sat, 25 Nov 2006 08:20:57 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <Pine.LNX.4.58.0611250809320.11502@hal.rescomp.berkeley.edu>
References: <979FC3E4-AC5C-4819-80BD-DA472D60732E@gmail.com> <Pine.LNX.4.58.0611241917360.10285@hal.rescomp.berkeley.edu> <ECBD0972-588F-4367-9F0E-24EFE52621A3@gmail.com> <Pine.LNX.4.58.0611250809320.11502@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5A53734D-389F-46AE-B3A7-A429F089BE6F@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Hierarchical classified documents
Date: Sat, 25 Nov 2006 17:21:05 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


25 nov 2006 kl. 17.12 skrev Chris Hostetter:

> personally ... i'd rather have a slightly bigger index then slightly
> slower queries.

Me too, usually. But I'm running this in my alternative RAM index, so  
it should be OK. That is also the reason to why I want to save thoses  
bytes. But again, the spans will only be an experiment.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 25 16:27:20 2006
Return-Path: <java-user-return-24704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21613 invoked from network); 25 Nov 2006 16:27:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 16:27:20 -0000
Received: (qmail 24137 invoked by uid 500); 25 Nov 2006 16:27:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24103 invoked by uid 500); 25 Nov 2006 16:27:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24091 invoked by uid 99); 25 Nov 2006 16:27:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 08:27:18 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.61.132.12] (HELO server1.livestoryboard.com) (209.61.132.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 08:27:06 -0800
Received: from [127.0.0.1] (livestoryboard.com [209.61.132.12] (may be forged))
	(authenticated)
	by server1.livestoryboard.com (8.11.6/8.11.6) with ESMTP id kAPGVaj29157
	for <java-user@lucene.apache.org>; Sat, 25 Nov 2006 10:31:36 -0600
Message-ID: <45686EC4.5050405@koberg.com>
Date: Sat, 25 Nov 2006 11:26:44 -0500
From: Robert Koberg <rob@koberg.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Hierarchical classified documents
References: <979FC3E4-AC5C-4819-80BD-DA472D60732E@gmail.com> <Pine.LNX.4.58.0611241917360.10285@hal.rescomp.berkeley.edu> <ECBD0972-588F-4367-9F0E-24EFE52621A3@gmail.com> <Pine.LNX.4.58.0611250809320.11502@hal.rescomp.berkeley.edu> <5A53734D-389F-46AE-B3A7-A429F089BE6F@gmail.com>
In-Reply-To: <5A53734D-389F-46AE-B3A7-A429F089BE6F@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Just noticed this thread and don't know if this has been mentioned. What 
I do is add a 'path' field with the xpath to the node. Then you first 
narrow your search by finding documents with paths like:

/node[1]/node[3]*

best,
-Rob

karl wettin wrote:
> 
> 25 nov 2006 kl. 17.12 skrev Chris Hostetter:
> 
>> personally ... i'd rather have a slightly bigger index then slightly
>> slower queries.
> 
> Me too, usually. But I'm running this in my alternative RAM index, so it 
> should be OK. That is also the reason to why I want to save thoses 
> bytes. But again, the spans will only be an experiment.
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 25 19:07:03 2006
Return-Path: <java-user-return-24705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45291 invoked from network); 25 Nov 2006 19:07:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 19:07:02 -0000
Received: (qmail 37161 invoked by uid 500); 25 Nov 2006 19:06:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37051 invoked by uid 500); 25 Nov 2006 19:06:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37034 invoked by uid 99); 25 Nov 2006 19:06:53 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 11:06:53 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of ksc@gmx.at designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 25 Nov 2006 11:06:34 -0800
Received: (qmail invoked by alias); 25 Nov 2006 19:05:14 -0000
Received: from 85-90-142-112.ADSL.ycn.com (EHLO dev01) [85.90.142.112]
  by mail.gmx.net (mp030) with SMTP; 25 Nov 2006 20:05:14 +0100
X-Authenticated: #14900499
From: "Charlie Schaubmair" <ksc@gmx.at>
To: <java-user@lucene.apache.org>
Subject: Newbie Problems
Date: Sat, 25 Nov 2006 20:05:04 +0100
Message-ID: <000601c710c4$9de78a20$6600a8c0@dev01>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0007_01C710CC.FFABF220"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AccQxJ2PGFfmZQ9CR7uYIDEqI84T3Q==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0007_01C710CC.FFABF220
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hello,
 
first of all I'm totally new to lucene.
 
I've found this article:
http://coldfusion.sys-con.com/read/42053.htm?CFID=608986
<blocked::blocked::http://coldfusion.sys-con.com/read/42053.htm?CFID=608986&
CFTOKEN=126FE5E6-9ACC-1407-B3D2BE2FEB9396C4>
&CFTOKEN=126FE5E6-9ACC-1407-B3D2BE2FEB9396C4
 
AND this is very interesting for me, because I'm a ColdFusion-Programmer.
 
This example works very well and I've also done an example with DB-Results.
 
This example only works with lucene Version 1.4.3, because when I use lucene
Version 2, then I get the error message:
The selected method Keyword was not found
 
The error happens at this line:
document.add(field.Keyword("url", urlpath))
But this works with 1.4.3!!!
 
 
My other problem was, that I want to compile lucene 1.4.3 myself, because I
want to test the support prefix queries.
I've downloaded lucene-1.4.3-src.zip extraced it, installed ANT, installed
the newest JDK 1.5.0_09 and then I run ant.
The file is compiled without any error, but when I run my Index-Script I get
this error:
org/apache/lucene/analysis/StopAnalyzer (Unsupported major.minor version
49.0)
 
So please help me.
 
br
Charlie

------=_NextPart_000_0007_01C710CC.FFABF220--


From java-user-return-24706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 25 19:30:28 2006
Return-Path: <java-user-return-24706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48119 invoked from network); 25 Nov 2006 19:30:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 19:30:28 -0000
Received: (qmail 58560 invoked by uid 500); 25 Nov 2006 19:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58265 invoked by uid 500); 25 Nov 2006 19:30:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58254 invoked by uid 99); 25 Nov 2006 19:30:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 11:30:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.176.229] (HELO web25411.mail.ukl.yahoo.com) (217.146.176.229)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 25 Nov 2006 11:30:07 -0800
Received: (qmail 3018 invoked by uid 60001); 25 Nov 2006 19:29:31 -0000
Message-ID: <20061125192931.3016.qmail@web25411.mail.ukl.yahoo.com>
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=X-YMail-OSG:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=wWX0SU16hRNY2LtCr8G7rpTXDkziPN83pSOgrZo307gxq6R56y9HzPGJuEN5u3XHhGzwBLLiqs6sjbQHFn+oczQTtHmlAhnh2od0BCZCtFEABZFDGpTT9Dg2U4EouUOOnsAZ5vT5vMlGnBB4pWZyAjv13hseA7kKeJcJgGPsNiE=;
X-YMail-OSG: .9K3OG4VM1lrnCwCIIdgaNnntqYLBDff_5_s0fHGALz8SGwqgcY3P72khy0LoTfC6vVbvm.19XMXowqigwdtrIXgQYISYZjks9ti4DQE0EZ4jXvxVHQSjnZUr_1TDQcgRKz1qzu5I76h
Received: from [84.5.145.69] by web25411.mail.ukl.yahoo.com via HTTP; Sat, 25 Nov 2006 20:29:31 CET
Date: Sat, 25 Nov 2006 20:29:31 +0100 (CET)
From: christophe leroy <hawat23@yahoo.fr>
Subject: Question about the "not" in lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I don't understand how to use "not" with Lucene. I
think that it is not a boolean not. I read the
documentation but it is not clear enough on how the
"not" works.

For example, I tried to do this request:
type:product
--> I got 100 responses. It is normal. Then, I tried
this request:
type:product AND name:test 
--> I got 1 response. It is normal too. And when I
tried this request:
type:product AND (name:test OR NOT name:test)
--> I got 1 response only. I should normally get 100
responses if the "not" was a boolean not.

Could you explain me how the "not" works?

Thank in advance,

Christophe



	

	
		
___________________________________________________________________________ 
Découvrez une nouvelle façon d'obtenir des réponses à toutes vos questions ! 
Profitez des connaissances, des opinions et des expériences des internautes sur Yahoo! Questions/Réponses 
http://fr.answers.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 25 20:55:22 2006
Return-Path: <java-user-return-24707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58554 invoked from network); 25 Nov 2006 20:55:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 20:55:21 -0000
Received: (qmail 7660 invoked by uid 500); 25 Nov 2006 20:55:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7624 invoked by uid 500); 25 Nov 2006 20:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7613 invoked by uid 99); 25 Nov 2006 20:55:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 12:55:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 12:55:12 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A02205B76E; Sat, 25 Nov 2006 12:54:51 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 81FBD7F403
	for <java-user@lucene.apache.org>; Sat, 25 Nov 2006 12:54:51 -0800 (PST)
Date: Sat, 25 Nov 2006 12:54:51 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Newbie Problems
In-Reply-To: <000601c710c4$9de78a20$6600a8c0@dev01>
Message-ID: <Pine.LNX.4.58.0611251247510.25447@hal.rescomp.berkeley.edu>
References: <000601c710c4$9de78a20$6600a8c0@dev01>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: This example only works with lucene Version 1.4.3, because when I use lucene
: Version 2, then I get the error message:
: The selected method Keyword was not found

You can find info about this in the FAQ...

http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-d09fdfc8a6335eab4e3f3dc8ac41a40a3666318e

: I've downloaded lucene-1.4.3-src.zip extraced it, installed ANT, installed
: the newest JDK 1.5.0_09 and then I run ant.
: The file is compiled without any error, but when I run my Index-Script I get
: this error:
: org/apache/lucene/analysis/StopAnalyzer (Unsupported major.minor version
: 49.0)

this is a JVM error, usually indicating that you are attempting to run
code compiled with a "newer" Javac in an "older" JVM .. are you sure that
when you execute your code you are still using your 1.5 JDK ?

(google "Unsupported major.minor version: 49.0" flor lots of examples of
this)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 25 21:08:40 2006
Return-Path: <java-user-return-24708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59894 invoked from network); 25 Nov 2006 21:08:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2006 21:08:40 -0000
Received: (qmail 13538 invoked by uid 500); 25 Nov 2006 21:08:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13500 invoked by uid 500); 25 Nov 2006 21:08:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13488 invoked by uid 99); 25 Nov 2006 21:08:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 13:08:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 13:08:30 -0800
Received: by py-out-1112.google.com with SMTP id a25so749176pyi
        for <java-user@lucene.apache.org>; Sat, 25 Nov 2006 13:07:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=BwcoahwQbl5j/PwB+IdWAmxd/jzGFq1uu1EKb+nHq8RN5qjpfIR52xF+L3Tccohe3IXvLFkPiI4riExRKb5Puc+y4VABMIySuVsCsBY4EPrK1Hc7hkdbWoTHj+stgdceB2Cw3di3M7hkPF1XVKEqF7t3CYQTrCyocnLqyNYQhbs=
Received: by 10.35.103.12 with SMTP id f12mr9411785pym.1164488856762;
        Sat, 25 Nov 2006 13:07:36 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 8sm24533105nzn.2006.11.25.13.07.34;
        Sat, 25 Nov 2006 13:07:35 -0800 (PST)
Message-ID: <4568B09C.2000606@gmail.com>
Date: Sat, 25 Nov 2006 16:07:40 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Question about the "not" in lucene
References: <20061125192931.3016.qmail@web25411.mail.ukl.yahoo.com>
In-Reply-To: <20061125192931.3016.qmail@web25411.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Personally, I think of it as not a 'not' operator, but more a 'but not' 
or 'and not' operator. Thats not totally the case I believe, but gives 
you semantics that work. Truly I think that each part of the query 
creates a score and the NOT query scores 0. That gives a different 
result than a boolean system. More than a few times it has been 
mentioned that Lucene is a scoring system and not a boolean system.

- Mark

christophe leroy wrote:
> Hello,
>
> I don't understand how to use "not" with Lucene. I
> think that it is not a boolean not. I read the
> documentation but it is not clear enough on how the
> "not" works.
>
> For example, I tried to do this request:
> type:product
> --> I got 100 responses. It is normal. Then, I tried
> this request:
> type:product AND name:test 
> --> I got 1 response. It is normal too. And when I
> tried this request:
> type:product AND (name:test OR NOT name:test)
> --> I got 1 response only. I should normally get 100
> responses if the "not" was a boolean not.
>
> Could you explain me how the "not" works?
>
> Thank in advance,
>
> Christophe
>
>
>
> 	
>
> 	
> 		
> ___________________________________________________________________________ 
> Découvrez une nouvelle façon d'obtenir des réponses à toutes vos questions ! 
> Profitez des connaissances, des opinions et des expériences des internautes sur Yahoo! Questions/Réponses 
> http://fr.answers.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 26 06:25:10 2006
Return-Path: <java-user-return-24709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35259 invoked from network); 26 Nov 2006 06:25:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2006 06:25:09 -0000
Received: (qmail 31457 invoked by uid 500); 26 Nov 2006 06:25:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31431 invoked by uid 500); 26 Nov 2006 06:25:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31420 invoked by uid 99); 26 Nov 2006 06:25:12 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 25 Nov 2006 22:25:12 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 25 Nov 2006 22:25:00 -0800
Received: (qmail 96353 invoked by uid 60001); 26 Nov 2006 06:24:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Xg83UWoIkzJOSKcQcQBtesjlImChobpKRTxxYr4xTXTknvtNc87UeW4BP4c28nYCMVqQSUcIHYKU9Q3ICCjWFznyICezD5kTaWzMK+oq6lohTdvOvfCxGUFgPOzrnS+x9pamaGW1AIyF8rTuDia7KbHu4iNrzSQHREBS/GuO724=  ;
Message-ID: <20061126062439.96351.qmail@web50311.mail.yahoo.com>
Received: from [74.65.202.166] by web50311.mail.yahoo.com via HTTP; Sat, 25 Nov 2006 22:24:39 PST
Date: Sat, 25 Nov 2006 22:24:39 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Error in QueryTermExtractor.getTermsFromBooleanQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AI just moved from 1.9.1 to 2.1-dev.  One error that seems to happe=
n a lot now is below.  I haven't had the chance to investigate yet (note th=
e time), but I thought I'd throw (no pun intended) it out there and see if =
anyone else has seen this before.=0A=0Ajava.lang.NoSuchFieldError: prohibit=
ed=0A        at org.apache.lucene.search.highlight.QueryTermExtractor.getTe=
rmsFromBooleanQuery(QueryTermExtractor.java:91)=0A        at org.apache.luc=
ene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:66=
)=0A        at org.apache.lucene.search.highlight.QueryTermExtractor.getTer=
ms(QueryTermExtractor.java:59)=0A        at org.apache.lucene.search.highli=
ght.QueryTermExtractor.getTerms(QueryTermExtractor.java:45)=0A        at or=
g.apache.lucene.search.highlight.QueryScorer.<init>(QueryScorer.java:48)=0A=
=0AThe only thing I know so far is that the field I'm passing to the highli=
ghter is actually empty, so there will be nothing to highlight, but it stil=
l shouldn't bomb.  Here is a snippet from my code:=0A=0A            TokenSt=
ream tokenStream =3D ANALYZER.tokenStream(_textFieldName, new StringReader(=
text));=0A             highlightText =3D _highlighter.getBestFragments(toke=
nStream, text, _maxNumFragmentsRequired, "...");=0A             ...=0A=0ATh=
at "text" variable holds the content of the field, and I just happen to kno=
w it's empty/blank (I currently don't store anything in that Field).  I can=
't test with a non-empty field right now to check whether that throws Query=
TermExtractor off.=0A=0AThanks,=0AOtis=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 26 11:08:24 2006
Return-Path: <java-user-return-24710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60848 invoked from network); 26 Nov 2006 11:08:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2006 11:08:24 -0000
Received: (qmail 44885 invoked by uid 500); 26 Nov 2006 11:08:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44858 invoked by uid 500); 26 Nov 2006 11:08:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44847 invoked by uid 99); 26 Nov 2006 11:08:26 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 03:08:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of karl.wettin@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 03:08:12 -0800
Received: by ug-out-1314.google.com with SMTP id k40so912460ugc
        for <java-user@lucene.apache.org>; Sun, 26 Nov 2006 03:07:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=rXEENx+MnDRDVgXpOb7pbHUOKb5YMVVtobKuZp58u/lgdJQwFziKShzLlgAMqE4nbX284E0oSSDjKQuhvuBLSSk+MfPxeR0Z1dEs6Q9deVJk8rQsTJyPX+yc4udsLH5MsoUrts62td5k6VBsZ6EDxU/1CJG/cIA7yH3vbr0VFus=
Received: by 10.67.100.17 with SMTP id c17mr10404246ugm.1164539271346;
        Sun, 26 Nov 2006 03:07:51 -0800 (PST)
Received: from ?192.168.0.100? ( [83.249.106.69])
        by mx.google.com with ESMTP id 24sm17209730ugf.2006.11.26.03.07.50;
        Sun, 26 Nov 2006 03:07:50 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <45686EC4.5050405@koberg.com>
References: <979FC3E4-AC5C-4819-80BD-DA472D60732E@gmail.com> <Pine.LNX.4.58.0611241917360.10285@hal.rescomp.berkeley.edu> <ECBD0972-588F-4367-9F0E-24EFE52621A3@gmail.com> <Pine.LNX.4.58.0611250809320.11502@hal.rescomp.berkeley.edu> <5A53734D-389F-46AE-B3A7-A429F089BE6F@gmail.com> <45686EC4.5050405@koberg.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <628ECD1C-E86A-45C8-9AC0-36544CE02AB1@gmail.com>
Content-Transfer-Encoding: 7bit
From: karl wettin <karl.wettin@gmail.com>
Subject: Re: Hierarchical classified documents
Date: Sun, 26 Nov 2006 12:07:57 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


25 nov 2006 kl. 17.26 skrev Robert Koberg:

> What I do is add a 'path' field with the xpath to the node. Then  
> you first narrow your search by finding documents with paths like:
>
> /node[1]/node[3]*

You use a wildcard query? That can turn out to be very expensive if  
you have a thousand and thousand of heirarchies. Or?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 26 11:22:50 2006
Return-Path: <java-user-return-24711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69274 invoked from network); 26 Nov 2006 11:22:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2006 11:22:50 -0000
Received: (qmail 54821 invoked by uid 500); 26 Nov 2006 11:22:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54778 invoked by uid 500); 26 Nov 2006 11:22:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54767 invoked by uid 99); 26 Nov 2006 11:22:25 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 03:22:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [209.61.132.12] (HELO server1.livestoryboard.com) (209.61.132.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 03:22:14 -0800
Received: from [127.0.0.1] (livestoryboard.com [209.61.132.12] (may be forged))
	(authenticated)
	by server1.livestoryboard.com (8.11.6/8.11.6) with ESMTP id kAQBQjj13208
	for <java-user@lucene.apache.org>; Sun, 26 Nov 2006 05:26:45 -0600
Message-ID: <456978C9.3060500@koberg.com>
Date: Sun, 26 Nov 2006 06:21:45 -0500
From: Robert Koberg <rob@koberg.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Hierarchical classified documents
References: <979FC3E4-AC5C-4819-80BD-DA472D60732E@gmail.com> <Pine.LNX.4.58.0611241917360.10285@hal.rescomp.berkeley.edu> <ECBD0972-588F-4367-9F0E-24EFE52621A3@gmail.com> <Pine.LNX.4.58.0611250809320.11502@hal.rescomp.berkeley.edu> <5A53734D-389F-46AE-B3A7-A429F089BE6F@gmail.com> <45686EC4.5050405@koberg.com> <628ECD1C-E86A-45C8-9AC0-36544CE02AB1@gmail.com>
In-Reply-To: <628ECD1C-E86A-45C8-9AC0-36544CE02AB1@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

karl wettin wrote:
> 
> 25 nov 2006 kl. 17.26 skrev Robert Koberg:
> 
>> What I do is add a 'path' field with the xpath to the node. Then you 
>> first narrow your search by finding documents with paths like:
>>
>> /node[1]/node[3]*
> 
> You use a wildcard query? That can turn out to be very expensive if you 
> have a thousand and thousand of heirarchies. Or?
> 

I think it is a valid option to have, at least for my needs.

I do it for a website hierarchy. Hopefully, a website will not have a 
very deep hierarchy :) Basically, it is presented to the user in a 
right+click context menu on a nav tree.

You /could/ use the wildcard query with the hope that the user has 
drilled down as far as possible. Or you could just search a directory 
and not go any deeper (by not including the wildcard char -- presented 
to the user as a search option).

best,
-Rob


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 26 16:58:09 2006
Return-Path: <java-user-return-24712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28576 invoked from network); 26 Nov 2006 16:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2006 16:58:08 -0000
Received: (qmail 88032 invoked by uid 500); 26 Nov 2006 16:58:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87995 invoked by uid 500); 26 Nov 2006 16:58:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87984 invoked by uid 99); 26 Nov 2006 16:58:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 08:58:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 08:57:58 -0800
Received: by ug-out-1314.google.com with SMTP id k40so945973ugc
        for <java-user@lucene.apache.org>; Sun, 26 Nov 2006 08:57:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=flWtoHPUijHjyHR1k40xWvZqlLH5SU1MGFw1tegFNS9qIkt5QKFLO3qURpSC7luuFjEhbspweUCjXXrsWYvOhElLDa6K4yuDtZfgjenlqJozjDKKlQtkHAcm/Nygug+uxvb93402AgPifVp+lqH7piAPafUvo31tupJwDNzFLaU=
Received: by 10.78.81.20 with SMTP id e20mr12417478hub.1164560256779;
        Sun, 26 Nov 2006 08:57:36 -0800 (PST)
Received: by 10.78.200.9 with HTTP; Sun, 26 Nov 2006 08:57:36 -0800 (PST)
Message-ID: <f071061b0611260857w457a6d49ucd2bdf10e4cfff40@mail.gmail.com>
Date: Sun, 26 Nov 2006 17:57:36 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory vs MemoryIndex
In-Reply-To: <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
	 <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com>
	 <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com>
	 <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com>
	 <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com>
	 <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com>
	 <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I tested this. I use a single static analyzer for all my documents,
and the caching analyzer was not working properly. I had to add a
method to clear the cache each time a new document was to be indexed,
and then it worked as expected. I have never looked into lucenes inner
working so I am not sure if what I did is correct.

I also had to comment some code cause I merged the memory stuff from
trunk with lucene 2.0.

Performance was certainly much better (4 times faster in my very gross
testing), but for my processing that operation is only a very small,
so I will keep the original way, without caching the tokens, just to
be able to use the unmodified lucene 2.0.  I found a data problem in
my tests, but as I was not going to pursue that improvement for now I
did not look into it.

thanks,
javier

On 11/23/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> Out of interest, I've checked an implementation of something like
> this into AnalyzerUtil SVN trunk:
>
>    /**
>     * Returns an analyzer wrapper that caches all tokens generated by
> the underlying child analyzer's
>     * token stream, and delivers those cached tokens on subsequent
> calls to
>     * <code>tokenStream(String fieldName, Reader reader)</code>.
>     * <p>
>     * This can help improve performance in the presence of expensive
> Analyzer / TokenFilter chains.
>     * <p>
>     * Caveats:
>     * 1) Caching only works if the methods equals() and hashCode()
> methods are properly
>     * implemented on the Reader passed to <code>tokenStream(String
> fieldName, Reader reader)</code>.
>     * 2) Caching the tokens of large Lucene documents can lead to out
> of memory exceptions.
>     * 3) The Token instances delivered by the underlying child
> analyzer must be immutable.
>     *
>     * @param child
>     *            the underlying child analyzer
>     * @return a new analyzer
>     */
>    public static Analyzer getTokenCachingAnalyzer(final Analyzer
> child) { ... }
>
>
> Check it out, and let me know if this is close to what you had in mind.
>
> Wolfgang.
>
> On Nov 22, 2006, at 9:19 AM, Wolfgang Hoschek wrote:
>
> > I've never tried it, but I guess you could write an Analyzer and
> > TokenFilter that no only feeds into IndexWriter on
> > IndexWriter.addDocument(), but as a sneaky side effect also
> > simultaneously saves its tokens into a list so that you could later
> > turn that list into another TokenStream to be added to MemoryIndex.
> > How much this might help depends on how expensive your analyzer
> > chain is. For some examples on how to set up analyzers for chains
> > of token streams, see MemoryIndex.keywordTokenStream and class
> > AnalzyerUtil in the same package.
> >
> > Wolfgang.
> >
> > On Nov 22, 2006, at 4:15 AM, jm wrote:
> >
> >> checking one last thing, just in case...
> >>
> >> as I mentioned, I have previously indexed the same document in
> >> another
> >> index (for another purpose), as I am going to use the same analyzer,
> >> would it be possible to avoid analyzing the doc again?
> >>
> >> I see IndexWriter.addDocument() returns void, so it does not seem to
> >> be an easy way to do that no?
> >>
> >> thanks
> >>
> >> On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> >>>
> >>> On Nov 21, 2006, at 12:38 PM, jm wrote:
> >>>
> >>> > Ok, thanks, I'll give MemoryIndex a go, and if that is not good
> >>> enoguh
> >>> > I will explore the other options then.
> >>>
> >>> To get started you can use something like this:
> >>>
> >>> for each document D:
> >>>      MemoryIndex index = createMemoryIndex(D, ...)
> >>>      for each query Q:
> >>>          float score = index.search(Q)
> >>>         if (score > 0.0) System.out.println("it's a match");
> >>>
> >>>
> >>>
> >>>
> >>>    private MemoryIndex createMemoryIndex(Document doc, Analyzer
> >>> analyzer) {
> >>>      MemoryIndex index = new MemoryIndex();
> >>>      Enumeration iter = doc.fields();
> >>>      while (iter.hasMoreElements()) {
> >>>        Field field = (Field) iter.nextElement();
> >>>        index.addField(field.name(), field.stringValue(), analyzer);
> >>>      }
> >>>      return index;
> >>>    }
> >>>
> >>>
> >>>
> >>> >
> >>> >
> >>> > On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> >>> >> On Nov 21, 2006, at 7:43 AM, jm wrote:
> >>> >>
> >>> >> > Hi,
> >>> >> >
> >>> >> > I have to decide between  using a RAMDirectory and
> >>> MemoryIndex, but
> >>> >> > not sure what approach will work better...
> >>> >> >
> >>> >> > I have to run many items (tens of thousands) against some
> >>> >> queries (100
> >>> >> > at most), but I have to do it one item at a time. And I already
> >>> >> have
> >>> >> > the lucene Document associated with each item, from a previous
> >>> >> > operation I perform.
> >>> >> >
> >>> >> > From what I read MemoryIndex should be faster, but apparently I
> >>> >> cannot
> >>> >> > reuse the document I already have, and I have to create a new
> >>> >> > MemoryIndex per item.
> >>> >>
> >>> >> A MemoryIndex object holds one document.
> >>> >>
> >>> >> > Using the RAMDirectory I can use only one of
> >>> >> > them, also one IndexWriter, and create a IndexSearcher and
> >>> >> IndexReader
> >>> >> > per item, for searching and removing the item each time.
> >>> >> >
> >>> >> > Any thoughts?
> >>> >>
> >>> >> The MemoryIndex impl is optimized to work efficiently without
> >>> reusing
> >>> >> the MemoryIndex object for a subsequent document. See the source
> >>> >> code. Reusing the object would not further improve performance.
> >>> >>
> >>> >> Wolfgang.
> >>> >>
> >>> >>
> >>> --------------------------------------------------------------------
> >>> -
> >>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>> >>
> >>> >>
> >>> >
> >>> >
> >>> --------------------------------------------------------------------
> >>> -
> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >>> >
> >>>
> >>>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 26 18:44:53 2006
Return-Path: <java-user-return-24713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50416 invoked from network); 26 Nov 2006 18:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2006 18:44:51 -0000
Received: (qmail 12857 invoked by uid 500); 26 Nov 2006 18:44:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12757 invoked by uid 500); 26 Nov 2006 18:44:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12746 invoked by uid 99); 26 Nov 2006 18:44:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 10:44:52 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.12.11.95] (HELO smtp006.mail.ukl.yahoo.com) (217.12.11.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 26 Nov 2006 10:44:39 -0800
Received: (qmail 88036 invoked from network); 26 Nov 2006 18:44:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=EiCMjlyLqNVVZjDTUdgSR9/Ymx7Fxr+9q0QbDYPUPZFdCJraTvZpOcgRGJG7iDLHc9PiUvHq/xb+ESkTW+OEi0I8zjFVGcnghL/4Wr3HNMLRvAJj1bCVKF6qlkR01jjN/JN4DZOqP46MN0qGHPqE2F32y4npfQv10hKfVkTcRSo=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp006.mail.ukl.yahoo.com with SMTP; 26 Nov 2006 18:44:17 -0000
X-YMail-OSG: Xr72lzEVM1mYxJzeia_FhYpdRoYHeIBHggvIuAPhN44f1w0gHMc2R6UdWzbmx49jkzpVjcP0Xne9vMg2aden1MLTYolQNmNuAMjbEIlNjVcYeCaOevjgcGCqveylzXmmp6xS_DklzPkCKIu4X4YCbIjz2gwdgTeg
Message-ID: <4569E07C.3000500@yahoo.co.uk>
Date: Sun, 26 Nov 2006 18:44:12 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Error in QueryTermExtractor.getTermsFromBooleanQuery
References: <20061126062439.96351.qmail@web50311.mail.yahoo.com>
In-Reply-To: <20061126062439.96351.qmail@web50311.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Nope, not seen that one.
Looks like the reference to no such field is in the Java instance data 
sense, not the Lucene document sense.
Class versioning issues somewhere?
That method takes a parameter called "prohibited" which is the name of 
the field reported in the error. Is the word "prohibited" a reserved 
Java word somewhere now? What JVM are you running on - 1.6?

Cheers
Mark

Otis Gospodnetic wrote:
> Hi,
>
> I just moved from 1.9.1 to 2.1-dev.  One error that seems to happen a lot now is below.  I haven't had the chance to investigate yet (note the time), but I thought I'd throw (no pun intended) it out there and see if anyone else has seen this before.
>
> java.lang.NoSuchFieldError: prohibited
>         at org.apache.lucene.search.highlight.QueryTermExtractor.getTermsFromBooleanQuery(QueryTermExtractor.java:91)
>         at org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:66)
>         at org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:59)
>         at org.apache.lucene.search.highlight.QueryTermExtractor.getTerms(QueryTermExtractor.java:45)
>         at org.apache.lucene.search.highlight.QueryScorer.<init>(QueryScorer.java:48)
>
> The only thing I know so far is that the field I'm passing to the highlighter is actually empty, so there will be nothing to highlight, but it still shouldn't bomb.  Here is a snippet from my code:
>
>             TokenStream tokenStream = ANALYZER.tokenStream(_textFieldName, new StringReader(text));
>              highlightText = _highlighter.getBestFragments(tokenStream, text, _maxNumFragmentsRequired, "...");
>              ...
>
> That "text" variable holds the content of the field, and I just happen to know it's empty/blank (I currently don't store anything in that Field).  I can't test with a non-empty field right now to check whether that throws QueryTermExtractor off.
>
> Thanks,
> Otis
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 04:47:46 2006
Return-Path: <java-user-return-24714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66822 invoked from network); 27 Nov 2006 04:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 04:47:46 -0000
Received: (qmail 21819 invoked by uid 500); 27 Nov 2006 04:47:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21793 invoked by uid 500); 27 Nov 2006 04:47:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21782 invoked by uid 99); 27 Nov 2006 04:47:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 20:47:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 20:47:36 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GoYOh-0003AW-MS
	for java-user@lucene.apache.org; Sun, 26 Nov 2006 20:47:15 -0800
Message-ID: <7554766.post@talk.nabble.com>
Date: Sun, 26 Nov 2006 20:47:15 -0800 (PST)
From: Sajid Khan <assamhelp@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: How to set query time scoring
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: assamhelp@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


     I have already set some score at the index time. And now i want to set
some score at the query time. But i am not getting any idea of how to set
the score at query time in lucene.
     Has anybody an idea how to do this?

Regards
Sajid
-- 
View this message in context: http://www.nabble.com/How-to-set-query-time-scoring-tf2709773.html#a7554766
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 05:44:37 2006
Return-Path: <java-user-return-24715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76568 invoked from network); 27 Nov 2006 05:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 05:44:36 -0000
Received: (qmail 62294 invoked by uid 500); 27 Nov 2006 05:44:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62264 invoked by uid 500); 27 Nov 2006 05:44:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62251 invoked by uid 99); 27 Nov 2006 05:44:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 21:44:39 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.199.37.133] (HELO rediff.co.in) (203.199.37.133)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 26 Nov 2006 21:44:27 -0800
Received: (qmail 10735 invoked from network); 27 Nov 2006 05:40:26 -0000
Received: from unknown (HELO bhavin) (172.16.3.42)
  by mailserver with SMTP; 27 Nov 2006 05:40:26 -0000
Message-ID: <000501c711e9$260e44f0$2a0310ac@bhavin>
Reply-To: "Bhavin Pandya" <bhavinp@rediff.co.in>
From: "Bhavin Pandya" <bhavinp@rediff.co.in>
To: <java-user@lucene.apache.org>
References: <7554766.post@talk.nabble.com>
Subject: Re: How to set query time scoring
Date: Mon, 27 Nov 2006 11:29:03 +0530
Organization: rediff.com
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org

Hi sajid,

As you already boost data at indexing time...
You can boost query at search time...
eg. If you are firing boolean query and phrasequery...you might need to 
boost phrasequery....

PhraseQuery pq = new PhraseQuery();
pq.setBoost(2.0f);

Thanks.
Bhavin pandya

----- Original Message ----- 
From: "Sajid Khan" <assamhelp@yahoo.co.in>
To: <java-user@lucene.apache.org>
Sent: Monday, November 27, 2006 10:17 AM
Subject: How to set query time scoring


>
>     I have already set some score at the index time. And now i want to set
> some score at the query time. But i am not getting any idea of how to set
> the score at query time in lucene.
>     Has anybody an idea how to do this?
>
> Regards
> Sajid
> -- 
> View this message in context: 
> http://www.nabble.com/How-to-set-query-time-scoring-tf2709773.html#a7554766
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 07:36:23 2006
Return-Path: <java-user-return-24716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97178 invoked from network); 27 Nov 2006 07:36:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 07:36:22 -0000
Received: (qmail 88001 invoked by uid 500); 27 Nov 2006 07:36:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87207 invoked by uid 500); 27 Nov 2006 07:36:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87196 invoked by uid 99); 27 Nov 2006 07:36:22 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 23:36:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 23:36:08 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gob1o-0006rz-1A
	for java-user@lucene.apache.org; Sun, 26 Nov 2006 23:35:48 -0800
Message-ID: <7555948.post@talk.nabble.com>
Date: Sun, 26 Nov 2006 23:35:48 -0800 (PST)
From: sirakov <sirakov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Newbie Search Question
In-Reply-To: <359a92830611240601t2f9164das385be5dbaf9b3c11@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sirakov@gmail.com
References: <7438630.post@talk.nabble.com> <29AA93ED-F339-49BB-8D37-E4DDF0D987A5@ehatchersolutions.com> <7506220.post@talk.nabble.com> <359a92830611230537j1307866coe4d7bc5a0e1902a3@mail.gmail.com> <7513261.post@talk.nabble.com> <359a92830611240601t2f9164das385be5dbaf9b3c11@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Erick Erickson wrote:
> 
> And how are you storing your date? Field.Store.YES? NO? COMPRESSED?
> 

I think, here is my problem...I have found this in the FileDocument.java:

doc.add(new Field("contents", new FileReader(f)));

Field.Store.YES is missing, but when I try to put this argument, i become an
error message. I'll try to found a solution for the problem, but if you have
any tips for me - please let me know :)

thanks in advance,
sirakov

-- 
View this message in context: http://www.nabble.com/Newbie-Search-Question-tf2667479.html#a7555948
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 07:40:03 2006
Return-Path: <java-user-return-24717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97801 invoked from network); 27 Nov 2006 07:40:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 07:40:02 -0000
Received: (qmail 91209 invoked by uid 500); 27 Nov 2006 07:40:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91161 invoked by uid 500); 27 Nov 2006 07:40:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91126 invoked by uid 99); 27 Nov 2006 07:40:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 23:40:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.200.106.89] (HELO HSNDA2KEXCH06.noida.headstrong.com) (203.200.106.89)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 26 Nov 2006 23:39:53 -0800
Received: from hsnda2ksexch.noida.headstrong.com ([10.100.0.102]) by HSNDA2KEXCH06.noida.headstrong.com with Microsoft SMTPSVC(5.0.2195.6713); Mon, 27 Nov 2006 13:10:42 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C711F7.5797A654"
Subject: Database searching using Lucene....
Date: Mon, 27 Nov 2006 13:10:42 +0530
Content-Transfer-Encoding: 7bit
Message-ID: <8D616EEBB30A9544B71E2FBFC32119F003060FD7@hsnda2ksexch.noida.headstrong.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Database searching using Lucene....
Thread-Index: AccR91eZVlG1MMVCQuWeiMFGkYVveQ==
From: "Inderjeet Kalra" <Inderjeet.Kalra@headstrong.com>
To: <java-user@lucene.apache.org>
Importance: normal
Priority: normal
X-OriginalArrivalTime: 27 Nov 2006 07:40:42.0901 (UTC) FILETIME=[57AEB450:01C711F7]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C711F7.5797A654
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I need some inputs on the database searching using lucene.=20

Lucene directly supports the document searching but I am unable to find
out the easy and the fastest way for database searching.=20


Which option would be better - SPs or Lucene search engine in terms of
implementation, performance and security...if anyone has already done
analysis on the same, can you please provide me the comparison matrix or
benchmarks for the same ?

=20

Thanks in advance

=20

Regards

Inderjeet



=20
***The information transmitted is intended only for the person or entity =
to which it is addressed and may contain confidential and/or privileged =
material. Any review,retransmission,dissemination or other use of, or =
taking of any action in reliance upon, this information by persons or =
entities other than the intended recipient is prohibited. If you =
received this in error, please contact the sender and delete the =
material from any computer.***

------_=_NextPart_001_01C711F7.5797A654--

From java-user-return-24718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 10:09:39 2006
Return-Path: <java-user-return-24718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45016 invoked from network); 27 Nov 2006 10:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 10:09:38 -0000
Received: (qmail 56133 invoked by uid 500); 27 Nov 2006 10:09:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56106 invoked by uid 500); 27 Nov 2006 10:09:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 6590 invoked by uid 99); 27 Nov 2006 04:24:38 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C711DB.C1D9EAA2"
Subject: Syns2Index utility: version of Lucene and Java
Date: Sun, 26 Nov 2006 23:21:45 -0500
Message-ID: <25736CAEA4C6E24DB98D768458C898E00DF720@usahm208.amer.corp.eds.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Syns2Index utility: version of Lucene and Java
Thread-Index: AccR24yn6Ue0xdmmS1q03jbPwoBQwQ==
From: "Risov, Maria" <maria.risov@eds.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Nov 2006 04:23:15.0492 (UTC) FILETIME=[C2138E40:01C711DB]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C711DB.C1D9EAA2
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I am trying to use Syns2Index utility to convert the WordNet into a =
Lucene index.  First I downloaded the latest JDK and Lucene 2.0, but =
soon realized that both were too new for compiling Syns2Index.java.  =
Next, got down to j2sdk1.4.2_13 and Lucene 1.4.3.  by deciphering error =
messages.  (I am running XP SP2)

I have copied the java\org\apache\lucene directory in the same folder as =
the Syns2Index.java file.  I have a feeling that my classpath is most =
likely set right (or at least close), but I get a huge amount of =
identical compile errors.

Command used:

D:\InfringeDetector\JavaLucene>javac -classpath "D:\Project\JavaLucene;
C:\j2sdk1.4.2_13" D:\Project\JavaLucene\org\apache\lucene\wordnet\Syns2
Index.java

Compile results (posting just a few from the bottom of my screen):

        ^
C:\j2sdk1.4.2_13\java\nio\DirectByteBuffer.java:843: cannot resolve =
symbol
symbol  : method assert (boolean)
location: class java.nio.DirectByteBuffer
        assert (off <=3D lim);
        ^
C:\j2sdk1.4.2_13\java\nio\DirectByteBuffer.java:934: cannot resolve =
symbol
symbol  : method assert (boolean)
location: class java.nio.DirectByteBuffer
        assert (off <=3D lim);
        ^
C:\j2sdk1.4.2_13\java\nio\Bits.java:642: cannot resolve symbol
symbol  : method assert (boolean)
location: class java.nio.Bits
            assert (reservedMemory > -1);
            ^
C:\j2sdk1.4.2_13\java\lang\CharacterDataLatin1.java:284: cannot resolve =
symbol
symbol  : method assert (boolean)
location: class java.lang.CharacterDataLatin1
            assert (data.length =3D=3D (256 * 2));
            ^
C:\j2sdk1.4.2_13\java\lang\CharacterData.java:956: cannot resolve symbol
symbol  : method assert (boolean)
location: class java.lang.CharacterData
            assert (data.length =3D=3D (678 * 2));
            ^
C:\j2sdk1.4.2_13\java\nio\DirectByteBufferR.java:165: cannot resolve =
symbol
symbol  : method assert (boolean)
location: class java.nio.DirectByteBufferR
        assert (pos <=3D lim);
        ^
C:\j2sdk1.4.2_13\java\nio\DirectByteBufferR.java:479: cannot resolve =
symbol
symbol  : method assert (boolean)
location: class java.nio.DirectByteBufferR
        assert (off <=3D lim);
        ^
Note: Some input files use or override a deprecated API.
Note: Recompile with -deprecation for details.
100 errors
206 warnings

I have to admit that I am fairly new to Java, but past the HelloWorld =
setups.  I have been banging my head against the wall and Google for 10 =
hours.   Please help!!!

-marie


------_=_NextPart_001_01C711DB.C1D9EAA2--

From java-user-return-24719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 10:26:16 2006
Return-Path: <java-user-return-24719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50216 invoked from network); 27 Nov 2006 10:26:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 10:26:16 -0000
Received: (qmail 82053 invoked by uid 500); 27 Nov 2006 10:26:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82029 invoked by uid 500); 27 Nov 2006 10:26:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82018 invoked by uid 99); 27 Nov 2006 10:26:18 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 02:26:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 02:26:05 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GodgG-0003gO-Rd
	for java-user@lucene.apache.org; Mon, 27 Nov 2006 02:25:44 -0800
Message-ID: <7557740.post@talk.nabble.com>
Date: Mon, 27 Nov 2006 02:25:44 -0800 (PST)
From: Sajid Khan <assamhelp@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Re: How to set query time scoring
In-Reply-To: <000501c711e9$260e44f0$2a0310ac@bhavin>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: assamhelp@yahoo.co.in
References: <7554766.post@talk.nabble.com> <000501c711e9$260e44f0$2a0310ac@bhavin>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the instant reply. More specifically i am trying to do is: 
 1) to show the results which contain the exact query phrase on top followed
by ANDed results followed by the ORed results.  
 2) introduce new parameter that uses the query phrase to influence the
ranking.

regards
Sajid


Bhavin Pandya wrote:
> 
> Hi sajid,
> 
> As you already boost data at indexing time...
> You can boost query at search time...
> eg. If you are firing boolean query and phrasequery...you might need to 
> boost phrasequery....
> 
> PhraseQuery pq = new PhraseQuery();
> pq.setBoost(2.0f);
> 
> Thanks.
> Bhavin pandya
> 
> ----- Original Message ----- 
> From: "Sajid Khan" <assamhelp@yahoo.co.in>
> To: <java-user@lucene.apache.org>
> Sent: Monday, November 27, 2006 10:17 AM
> Subject: How to set query time scoring
> 
> 
>>
>>     I have already set some score at the index time. And now i want to
>> set
>> some score at the query time. But i am not getting any idea of how to set
>> the score at query time in lucene.
>>     Has anybody an idea how to do this?
>>
>> Regards
>> Sajid
>> -- 
>> View this message in context: 
>> http://www.nabble.com/How-to-set-query-time-scoring-tf2709773.html#a7554766
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/How-to-set-query-time-scoring-tf2709773.html#a7557740
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 13:24:17 2006
Return-Path: <java-user-return-24720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22543 invoked from network); 27 Nov 2006 13:24:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 13:24:15 -0000
Received: (qmail 47085 invoked by uid 500); 27 Nov 2006 13:24:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47062 invoked by uid 500); 27 Nov 2006 13:24:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47050 invoked by uid 99); 27 Nov 2006 13:24:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 05:24:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_HELO_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [194.3.247.82] (HELO mxepar01.capgemini.com) (194.3.247.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 05:24:02 -0800
Received: from mxipar01.capgemini.com (prvmta2 [194.3.224.82])
	by mxepar01.capgemini.com (8.13.6/8.13.6) with ESMTP id kARDNZ7A018266
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 14:23:36 +0100 (MET)
Received: from prvmta2.capgemini.com (localhost [127.0.0.1])
	by mxipar01.capgemini.com (8.13.6/8.13.6) with ESMTP id kARDNYJA020004
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 14:23:34 +0100 (MET)
Received: from pasteur2.capgemini.fr (smtp.capgemini.fr [10.67.1.90])
	by prvmta2.capgemini.com (8.13.6/8.13.6) with ESMTP id kARDNYZt019973
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 14:23:34 +0100 (MET)
Received: from pasteur.capgemini.fr (localhost [127.0.0.1])
	by pasteur2.capgemini.fr (8.12.10/8.12.10) with ESMTP id kARDNWR8017230
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 14:23:32 +0100 (MET)
Received: from [10.68.154.238] ([10.68.154.238])by pasteur.capgemini.fr 
	(8.12.10/8.12.10) with ESMTP id kARDNVZ7017224for 
	<java-user@lucene.apache.org>; Mon, 27 Nov 2006 14:23:31 +0100 (MET)
Message-ID: <456AE6D4.5000305@yahoo.fr>
Date: Mon, 27 Nov 2006 14:23:32 +0100
From: hawat23 <hawat23@yahoo.fr>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Question about the "not" in lucene
References: <20061125192931.3016.qmail@web25411.mail.ukl.yahoo.com> 
	<4568B09C.2000606@gmail.com>
In-Reply-To: <4568B09C.2000606@gmail.com>
Content-Type: text/plain;
	charset=ISO-8859-1;
	format=flowed
Content-Transfer-Encoding: 8bit
X-imss-version: 2.044
X-imss-result: Passed
X-imss-scores: Clean:99.90000 C:2 M:3 S:5 R:5
X-imss-settings: Baseline:3 C:4 M:2 S:2 R:3 (0.5000 0.5000)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks you for your answer.

But, is it possible to group clauses with a "not". exemple:

type:product NOT (name:"toto" OR name:"titi") ??

Christophe

Mark Miller a écrit :
> Personally, I think of it as not a 'not' operator, but more a 'but 
> not' or 'and not' operator. Thats not totally the case I believe, but 
> gives you semantics that work. Truly I think that each part of the 
> query creates a score and the NOT query scores 0. That gives a 
> different result than a boolean system. More than a few times it has 
> been mentioned that Lucene is a scoring system and not a boolean system.
>
> - Mark
>
> christophe leroy wrote:
>> Hello,
>>
>> I don't understand how to use "not" with Lucene. I
>> think that it is not a boolean not. I read the
>> documentation but it is not clear enough on how the
>> "not" works.
>>
>> For example, I tried to do this request:
>> type:product
>> --> I got 100 responses. It is normal. Then, I tried
>> this request:
>> type:product AND name:test --> I got 1 response. It is normal too. 
>> And when I
>> tried this request:
>> type:product AND (name:test OR NOT name:test)
>> --> I got 1 response only. I should normally get 100
>> responses if the "not" was a boolean not.
>>
>> Could you explain me how the "not" works?
>>
>> Thank in advance,
>>
>> Christophe
>>
>>
>>
>>     
>>
>>     
>>        
>> ___________________________________________________________________________ 
>> Découvrez une nouvelle façon d'obtenir des réponses à toutes vos 
>> questions ! Profitez des connaissances, des opinions et des 
>> expériences des internautes sur Yahoo! Questions/Réponses 
>> http://fr.answers.yahoo.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>   
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 13:30:04 2006
Return-Path: <java-user-return-24721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24687 invoked from network); 27 Nov 2006 13:30:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 13:30:03 -0000
Received: (qmail 64102 invoked by uid 500); 27 Nov 2006 13:30:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64076 invoked by uid 500); 27 Nov 2006 13:30:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64065 invoked by uid 99); 27 Nov 2006 13:30:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 05:30:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Laurence.Hirsch@rhul.ac.uk designates 134.219.200.45 as permitted sender)
Received: from [134.219.200.45] (HELO EXIMC1.rhul.ac.uk) (134.219.200.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 05:29:54 -0800
Content-class: urn:content-classes:message
Subject: Hits length with no sorting or scoring
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C71228.2DF485A0"
Date: Mon, 27 Nov 2006 13:30:18 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <0A738FE79EB90047A7923673A8083FA6046AAEE6@ldap01.rhul.ac.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Hits length with no sorting or scoring
Thread-Index: AccSKBE/kYupvDzQQrSAqRDdFODouw==
From: "Hirsch Laurence" <Laurence.Hirsch@rhul.ac.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C71228.2DF485A0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hello,

I have an application in which we only need to know the total number of
documents matching a query.  In this case we do not need any sorting or
scoring or to store any reference to the matching documents.  Can you
tell me how to execute such a query with maximum performance?

Thanks

Laurie

------_=_NextPart_001_01C71228.2DF485A0--

From java-user-return-24722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 13:53:06 2006
Return-Path: <java-user-return-24722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29195 invoked from network); 27 Nov 2006 13:53:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 13:53:05 -0000
Received: (qmail 11871 invoked by uid 500); 27 Nov 2006 13:53:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11848 invoked by uid 500); 27 Nov 2006 13:53:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11825 invoked by uid 99); 27 Nov 2006 13:53:01 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 05:52:59 -0800
Received: by nf-out-0910.google.com with SMTP id n28so1965454nfc
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 05:51:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=f9r5758Os9W4G52Udfjtu84vLHScyEo0nEdWkRaFyIX031apa6QvJJUvlRLYb2pBSf3th6s2Vb1rwoRUKWyz70pYOk8MB+xLQZOomD2qBkcmsH3hjmOS2iPaKEhK5q2n98MrT9Iy6dX3lz4ykOMkaet+j1R2vIsD3iECZE92pRw=
Received: by 10.82.153.5 with SMTP id a5mr1977276bue.1164635468440;
        Mon, 27 Nov 2006 05:51:08 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Mon, 27 Nov 2006 05:51:07 -0800 (PST)
Message-ID: <359a92830611270551v1315f42xb468c498a04dc28a@mail.gmail.com>
Date: Mon, 27 Nov 2006 08:51:07 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Database searching using Lucene....
In-Reply-To: <8D616EEBB30A9544B71E2FBFC32119F003060FD7@hsnda2ksexch.noida.headstrong.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_85411_1952949.1164635467761"
References: <8D616EEBB30A9544B71E2FBFC32119F003060FD7@hsnda2ksexch.noida.headstrong.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_85411_1952949.1164635467761
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This has been discussed extensively on this thread, so I think you'd get the
fastest answers by searching the mail archive for database, db, etc.

The short answer is "it all depends upon what you want to accomplish and the
characteristics of your problem".....

Erick

On 11/27/06, Inderjeet Kalra <Inderjeet.Kalra@headstrong.com> wrote:
>
> Hi,
>
> I need some inputs on the database searching using lucene.
>
> Lucene directly supports the document searching but I am unable to find
> out the easy and the fastest way for database searching.
>
>
> Which option would be better - SPs or Lucene search engine in terms of
> implementation, performance and security...if anyone has already done
> analysis on the same, can you please provide me the comparison matrix or
> benchmarks for the same ?
>
>
>
> Thanks in advance
>
>
>
> Regards
>
> Inderjeet
>
>
>
>
> ***The information transmitted is intended only for the person or entity
> to which it is addressed and may contain confidential and/or privileged
> material. Any review,retransmission,dissemination or other use of, or taking
> of any action in reliance upon, this information by persons or entities
> other than the intended recipient is prohibited. If you received this in
> error, please contact the sender and delete the material from any
> computer.***
>
>

------=_Part_85411_1952949.1164635467761--

From java-user-return-24723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 14:47:43 2006
Return-Path: <java-user-return-24723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54005 invoked from network); 27 Nov 2006 14:47:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 14:47:42 -0000
Received: (qmail 59447 invoked by uid 500); 27 Nov 2006 14:47:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59404 invoked by uid 500); 27 Nov 2006 14:47:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59393 invoked by uid 99); 27 Nov 2006 14:47:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 06:47:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.184.236 as permitted sender)
Received: from [64.233.184.236] (HELO wr-out-0506.google.com) (64.233.184.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 06:47:30 -0800
Received: by wr-out-0506.google.com with SMTP id i21so194263wra
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 06:47:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=qaPDeWeGB2EYN8yN0CNU9ecORGbwBAteRf2eWMqYNquKxhNlogGVCVDNwWA6CMGmpH7XsXpFjSlBEF+l4o/ss8ZB8Inj5bDipGzC/asEKH8+egLIVw2z3KtgIYCESYsJaIwHKtpRh6aakjSApLd/suWQZZ4DEMa+Agqb2SX65tE=
Received: by 10.90.51.17 with SMTP id y17mr10013089agy.1164638827854;
        Mon, 27 Nov 2006 06:47:07 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 23sm14263902nzn.2006.11.27.06.47.04;
        Mon, 27 Nov 2006 06:47:05 -0800 (PST)
Message-ID: <456AFA6E.7020302@gmail.com>
Date: Mon, 27 Nov 2006 09:47:10 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Question about the "not" in lucene
References: <20061125192931.3016.qmail@web25411.mail.ukl.yahoo.com> 	<4568B09C.2000606@gmail.com> <456AE6D4.5000305@yahoo.fr>
In-Reply-To: <456AE6D4.5000305@yahoo.fr>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, I believe that it is entirely possible. You can nest and link 
boolean clauses all you want: your example query would be a boolean with 
two top level clauses, one required to be there and one required not to 
be there. The second top level clause would itself be a boolean query 
with two two clauses, both with a SHOULD. Now, what I think happens (I 
haven't looked myself) is that the type:product will score a document 
positively if found, but the NOT clause will score a document to 0 if 
either of it's sub-clauses are found. Those 0 scores will not return as 
hits. Now notice that if you just have "NOT(name:"toto" OR name:"tit")" 
ALL of the docs will score 0 one way or another- the docs not found will 
be 0 and docs found will be scored 0 by the NOT...so you will not get a 
result. Now if you use the special query that matches all docs, and then 
use a NOT query...the not query will work as expected...all docs will 
get a positive score, but the NOT query will 0 out those in the MUST_NOT 
clause.

I am an unclear kind of guy, so I hope that gives some help.

- Mark

hawat23 wrote:
> Thanks you for your answer.
>
> But, is it possible to group clauses with a "not". exemple:
>
> type:product NOT (name:"toto" OR name:"titi") ??
>
> Christophe
>
> Mark Miller a écrit :
>> Personally, I think of it as not a 'not' operator, but more a 'but 
>> not' or 'and not' operator. Thats not totally the case I believe, but 
>> gives you semantics that work. Truly I think that each part of the 
>> query creates a score and the NOT query scores 0. That gives a 
>> different result than a boolean system. More than a few times it has 
>> been mentioned that Lucene is a scoring system and not a boolean system.
>>
>> - Mark
>>
>> christophe leroy wrote:
>>> Hello,
>>>
>>> I don't understand how to use "not" with Lucene. I
>>> think that it is not a boolean not. I read the
>>> documentation but it is not clear enough on how the
>>> "not" works.
>>>
>>> For example, I tried to do this request:
>>> type:product
>>> --> I got 100 responses. It is normal. Then, I tried
>>> this request:
>>> type:product AND name:test --> I got 1 response. It is normal too. 
>>> And when I
>>> tried this request:
>>> type:product AND (name:test OR NOT name:test)
>>> --> I got 1 response only. I should normally get 100
>>> responses if the "not" was a boolean not.
>>>
>>> Could you explain me how the "not" works?
>>>
>>> Thank in advance,
>>>
>>> Christophe
>>>
>>>
>>>
>>>    
>>>            
>>> ___________________________________________________________________________ 
>>> Découvrez une nouvelle façon d'obtenir des réponses à toutes vos 
>>> questions ! Profitez des connaissances, des opinions et des 
>>> expériences des internautes sur Yahoo! Questions/Réponses 
>>> http://fr.answers.yahoo.com
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>   
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 17:10:41 2006
Return-Path: <java-user-return-24724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4318 invoked from network); 27 Nov 2006 17:10:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 17:10:40 -0000
Received: (qmail 81784 invoked by uid 500); 27 Nov 2006 17:10:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81746 invoked by uid 500); 27 Nov 2006 17:10:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81735 invoked by uid 99); 27 Nov 2006 17:10:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 09:10:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of suman.ghosh.1@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 09:10:27 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2010653nfc
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 09:10:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=kq4TZDTlJ76rzuSvNgvXdyslr2B2hhP8frYzdUBM7OQHUZcGVsjlKbVVd9C91clXluID0/kLTypGoqtl8uMOxMBx+iBuCBObOSHP2JzLwQWjDMlOzigAQ+DOqZSVgQpspiglGnHbgbBmRD8DW4O3P2vMQ3vEH6pKQblM2GG67Qg=
Received: by 10.49.8.15 with SMTP id l15mr10990138nfi.1164647406094;
        Mon, 27 Nov 2006 09:10:06 -0800 (PST)
Received: by 10.49.17.8 with HTTP; Mon, 27 Nov 2006 09:10:05 -0800 (PST)
Message-ID: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>
Date: Mon, 27 Nov 2006 12:10:06 -0500
From: "Suman Ghosh" <suman.ghosh.1@gmail.com>
To: java-user@lucene.apache.org
Subject: StackOverflowError while calling IndexReader.deleteDocuments(new Term())
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I was trying to build a lucene index (Lucene 2.0, JDK 5) with
approximately 150000 documents containing about 25 fields for each
document. After indexing about 45000 documents , the program crashed.
It was running as a batch job and did not log the cause of the crash.
In order to identify why the process crashed, I restarted the job
about 50 documents before the crash point so that I can identify the
problem. At this point, the program first tries to delete the document
if it's already present in the index and then adds it. As soon as I
start the program, the program aborts with a StackOverflowError while
calling indexreader.deleteDocuments(new Term()) method (even for the
document that was indexed earlier). Here is the partial stacktrace:

Exception in thread "main" java.lang.StackOverflowError
        at java.lang.ref.Reference.<init>(Reference.java:207)
        at java.lang.ref.WeakReference.<init>(WeakReference.java:40)
        at java.lang.ThreadLocal$ThreadLocalMap$Entry.<init>(ThreadLocal.java:240)
        at java.lang.ThreadLocal$ThreadLocalMap$Entry.<init>(ThreadLocal.java:235)
        at java.lang.ThreadLocal$ThreadLocalMap.getAfterMiss(ThreadLocal.java:375)
        at java.lang.ThreadLocal$ThreadLocalMap.get(ThreadLocal.java:347)
        at java.lang.ThreadLocal$ThreadLocalMap.access$000(ThreadLocal.java:225)
        at java.lang.ThreadLocal.get(ThreadLocal.java:127)
        at org.apache.lucene.index.TermInfosReader.getEnum(TermInfosReader.java:79)
        at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:139)
        at org.apache.lucene.index.SegmentTermDocs.seek(SegmentTermDocs.java:50)
        at org.apache.lucene.index.MultiTermDocs.termDocs(MultiReader.java:392)
        at org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:348)
        at org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)

The last line [at
org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)]
repeats another 1010 times before the program crashes.

I understand that without the actual index or the documents, it's
nearly impossible to narrow down the cause of the error. However, can
you please point to any theoretical reason why
org.apache.lucene.index.MultiTermDocs.next will go into an infinite
loop?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 17:38:20 2006
Return-Path: <java-user-return-24725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11396 invoked from network); 27 Nov 2006 17:38:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 17:38:19 -0000
Received: (qmail 37663 invoked by uid 500); 27 Nov 2006 17:38:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37640 invoked by uid 500); 27 Nov 2006 17:38:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37625 invoked by uid 99); 27 Nov 2006 17:38:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 09:38:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 09:38:08 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GokQN-0001de-9y
	for java-user@lucene.apache.org; Mon, 27 Nov 2006 09:37:47 -0800
Message-ID: <7564237.post@talk.nabble.com>
Date: Mon, 27 Nov 2006 09:37:47 -0800 (PST)
From: Biggy <biggy97@web.de>
To: java-user@lucene.apache.org
Subject: Re: Searching by bit masks
In-Reply-To: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: biggy97@web.de
References: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>
X-Virus-Checked: Checked by ClamAV on apache.org



i have the same problem here. I have an interest bit field, which i 
receive from the applciation backend. I have control over how the docuemtns
are built.
To be specific, the field looks like this:

ID: interest
1 : sport
2 : music
4 : film
8 : clubs

So someone interested in sports and music can be found by "interest & 3" =>
e.g. when using SQL.

I do not wish to Post-Filter the results
On to Lucene, Is there a filter which supports this kind of query ?

Someone suggested splitting the bits into fields:
> Document doc = new Document();
> doc.add("flag1", "Y");
> doc.add("flag2", "Y");
> IndexWriter.add(doc); 
Is this helpful at all ?

Code would be helpful too as i am a newbie



ltaylor.employon wrote:
> 
> Hello, 
> 
> I am currently evaluating Lucene to see if it would be appropriate to
> replace my company's current search software. So far everything has been
> looking great, however there is one requirement that I am not too
> certain about. 
> 
> What we need to do is to be able to store a bit mask specifying various
> filter flags for a document in the index and then search this field by
> specifying another bit mask with desired filters, returning documents
> that have any of the specified flags set. In other words, we are doing a
> bitwise OR on the stored filter bit mask and the specified filter bit
> mask and if it is non-zero, we want to return the document. 
> 
> Before I started toying around with various options myself, I wanted to
> see if any of you good folks in the Lucene community had some
> suggestions for an efficient way to implement this. 
> 
> We currently need to index ~8,000,000 documents. We have several filter
> flag fields, the most important of which currently has 7 possible flags
> with any combination of the flags being valid. The number of flags is
> expected to increase rather rapidly in the near future. 
> 
> My preemptive thanks for your suggestions,
> 
> 
> Lawrence Taylor
> Senior Software Engineer
> Employon
> Message was edited by: ltaylor.employon
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Searching-by-bit-masks-tf2603918.html#a7564237
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 17:42:37 2006
Return-Path: <java-user-return-24726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12935 invoked from network); 27 Nov 2006 17:42:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 17:42:37 -0000
Received: (qmail 46480 invoked by uid 500); 27 Nov 2006 17:42:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46442 invoked by uid 500); 27 Nov 2006 17:42:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46431 invoked by uid 99); 27 Nov 2006 17:42:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 09:42:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.171] (HELO smtpout.mac.com) (17.250.248.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 09:42:24 -0800
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout01/MantshX 4.0) with ESMTP id kARHg1Uw008266
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 09:42:01 -0800 (PST)
Received: from [192.168.2.6] (adsl-71-146-159-112.dsl.pltn13.sbcglobal.net [71.146.159.112])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id kARHfqqT021064
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 09:41:57 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <f071061b0611260857w457a6d49ucd2bdf10e4cfff40@mail.gmail.com>
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com> <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com> <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com> <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com> <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com> <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com> <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com> <f071061b0611260857w457a6d49ucd2bdf10e4cfff40@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <09ADDDEA-7901-468A-89B3-D17B8179AF40@mac.com>
Content-Transfer-Encoding: 7bit
From: Wolfgang Hoschek <wolfgang.hoschek@mac.com>
Subject: Re: RAMDirectory vs MemoryIndex
Date: Mon, 27 Nov 2006 09:41:49 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5446:2.3.11,1.2.37,4.0.164 definitions=2006-11-27_09:2006-11-24,2006-11-27,2006-11-27 signatures=0
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 spamscore=0 ipscore=0 adultscore=0 classifier=spam adjust=0 reason=mlx engine=3.1.0-0610180000 definitions=main-0611270012
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 26, 2006, at 8:57 AM, jm wrote:

> I tested this. I use a single static analyzer for all my documents,
> and the caching analyzer was not working properly. I had to add a
> method to clear the cache each time a new document was to be indexed,
> and then it worked as expected. I have never looked into lucenes inner
> working so I am not sure if what I did is correct.

Makes sense, I've now incorporated that as well by adding a clear()  
method and extracting the functionality into a public class  
AnalyzerUtil.TokenCachingAnalyzer.

>
> I also had to comment some code cause I merged the memory stuff from
> trunk with lucene 2.0.
>
> Performance was certainly much better (4 times faster in my very gross
> testing), but for my processing that operation is only a very small,
> so I will keep the original way, without caching the tokens, just to
> be able to use the unmodified lucene 2.0.  I found a data problem in
> my tests, but as I was not going to pursue that improvement for now I
> did not look into it.

Ok.
Wolfgang.

>
> thanks,
> javier
>
> On 11/23/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>> Out of interest, I've checked an implementation of something like
>> this into AnalyzerUtil SVN trunk:
>>
>>    /**
>>     * Returns an analyzer wrapper that caches all tokens generated by
>> the underlying child analyzer's
>>     * token stream, and delivers those cached tokens on subsequent
>> calls to
>>     * <code>tokenStream(String fieldName, Reader reader)</code>.
>>     * <p>
>>     * This can help improve performance in the presence of expensive
>> Analyzer / TokenFilter chains.
>>     * <p>
>>     * Caveats:
>>     * 1) Caching only works if the methods equals() and hashCode()
>> methods are properly
>>     * implemented on the Reader passed to <code>tokenStream(String
>> fieldName, Reader reader)</code>.
>>     * 2) Caching the tokens of large Lucene documents can lead to out
>> of memory exceptions.
>>     * 3) The Token instances delivered by the underlying child
>> analyzer must be immutable.
>>     *
>>     * @param child
>>     *            the underlying child analyzer
>>     * @return a new analyzer
>>     */
>>    public static Analyzer getTokenCachingAnalyzer(final Analyzer
>> child) { ... }
>>
>>
>> Check it out, and let me know if this is close to what you had in  
>> mind.
>>
>> Wolfgang.
>>
>> On Nov 22, 2006, at 9:19 AM, Wolfgang Hoschek wrote:
>>
>> > I've never tried it, but I guess you could write an Analyzer and
>> > TokenFilter that no only feeds into IndexWriter on
>> > IndexWriter.addDocument(), but as a sneaky side effect also
>> > simultaneously saves its tokens into a list so that you could later
>> > turn that list into another TokenStream to be added to MemoryIndex.
>> > How much this might help depends on how expensive your analyzer
>> > chain is. For some examples on how to set up analyzers for chains
>> > of token streams, see MemoryIndex.keywordTokenStream and class
>> > AnalzyerUtil in the same package.
>> >
>> > Wolfgang.
>> >
>> > On Nov 22, 2006, at 4:15 AM, jm wrote:
>> >
>> >> checking one last thing, just in case...
>> >>
>> >> as I mentioned, I have previously indexed the same document in
>> >> another
>> >> index (for another purpose), as I am going to use the same  
>> analyzer,
>> >> would it be possible to avoid analyzing the doc again?
>> >>
>> >> I see IndexWriter.addDocument() returns void, so it does not  
>> seem to
>> >> be an easy way to do that no?
>> >>
>> >> thanks
>> >>
>> >> On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>> >>>
>> >>> On Nov 21, 2006, at 12:38 PM, jm wrote:
>> >>>
>> >>> > Ok, thanks, I'll give MemoryIndex a go, and if that is not good
>> >>> enoguh
>> >>> > I will explore the other options then.
>> >>>
>> >>> To get started you can use something like this:
>> >>>
>> >>> for each document D:
>> >>>      MemoryIndex index = createMemoryIndex(D, ...)
>> >>>      for each query Q:
>> >>>          float score = index.search(Q)
>> >>>         if (score > 0.0) System.out.println("it's a match");
>> >>>
>> >>>
>> >>>
>> >>>
>> >>>    private MemoryIndex createMemoryIndex(Document doc, Analyzer
>> >>> analyzer) {
>> >>>      MemoryIndex index = new MemoryIndex();
>> >>>      Enumeration iter = doc.fields();
>> >>>      while (iter.hasMoreElements()) {
>> >>>        Field field = (Field) iter.nextElement();
>> >>>        index.addField(field.name(), field.stringValue(),  
>> analyzer);
>> >>>      }
>> >>>      return index;
>> >>>    }
>> >>>
>> >>>
>> >>>
>> >>> >
>> >>> >
>> >>> > On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>> >>> >> On Nov 21, 2006, at 7:43 AM, jm wrote:
>> >>> >>
>> >>> >> > Hi,
>> >>> >> >
>> >>> >> > I have to decide between  using a RAMDirectory and
>> >>> MemoryIndex, but
>> >>> >> > not sure what approach will work better...
>> >>> >> >
>> >>> >> > I have to run many items (tens of thousands) against some
>> >>> >> queries (100
>> >>> >> > at most), but I have to do it one item at a time. And I  
>> already
>> >>> >> have
>> >>> >> > the lucene Document associated with each item, from a  
>> previous
>> >>> >> > operation I perform.
>> >>> >> >
>> >>> >> > From what I read MemoryIndex should be faster, but  
>> apparently I
>> >>> >> cannot
>> >>> >> > reuse the document I already have, and I have to create a  
>> new
>> >>> >> > MemoryIndex per item.
>> >>> >>
>> >>> >> A MemoryIndex object holds one document.
>> >>> >>
>> >>> >> > Using the RAMDirectory I can use only one of
>> >>> >> > them, also one IndexWriter, and create a IndexSearcher and
>> >>> >> IndexReader
>> >>> >> > per item, for searching and removing the item each time.
>> >>> >> >
>> >>> >> > Any thoughts?
>> >>> >>
>> >>> >> The MemoryIndex impl is optimized to work efficiently without
>> >>> reusing
>> >>> >> the MemoryIndex object for a subsequent document. See the  
>> source
>> >>> >> code. Reusing the object would not further improve  
>> performance.
>> >>> >>
>> >>> >> Wolfgang.
>> >>> >>
>> >>> >>
>> >>>  
>> --------------------------------------------------------------------
>> >>> -
>> >>> >> To unsubscribe, e-mail: java-user- 
>> unsubscribe@lucene.apache.org
>> >>> >> For additional commands, e-mail: java-user- 
>> help@lucene.apache.org
>> >>> >>
>> >>> >>
>> >>> >
>> >>> >
>> >>>  
>> --------------------------------------------------------------------
>> >>> -
>> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >>> > For additional commands, e-mail: java-user- 
>> help@lucene.apache.org
>> >>> >
>> >>>
>> >>>
>> >>
>> >>  
>> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >
>> >
>> >  
>> ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 17:58:08 2006
Return-Path: <java-user-return-24727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17763 invoked from network); 27 Nov 2006 17:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 17:58:08 -0000
Received: (qmail 73368 invoked by uid 500); 27 Nov 2006 17:58:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73337 invoked by uid 500); 27 Nov 2006 17:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73326 invoked by uid 99); 27 Nov 2006 17:58:08 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 09:58:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 09:57:57 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1223255ugc
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 09:57:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=iOqLWwr+NJfuTEpks0kpcpwnHtdLCePWTpktSHCjuAwtCjrfd3u+5r7JGwVeAd53Eu00xAoyqahokwbUfYDAxaJBl4iucsdRC9pv0O577qMJZVOADCQRz301Dn/loviy+NBBwv+hN/r7ghkaZSg9bU4gj01IuTSCEgJOqkOgVNc=
Received: by 10.78.50.5 with SMTP id x5mr13449446hux.1164650253913;
        Mon, 27 Nov 2006 09:57:33 -0800 (PST)
Received: by 10.78.200.9 with HTTP; Mon, 27 Nov 2006 09:57:33 -0800 (PST)
Message-ID: <f071061b0611270957h64f45b65ga89a79654193d104@mail.gmail.com>
Date: Mon, 27 Nov 2006 18:57:33 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory vs MemoryIndex
In-Reply-To: <09ADDDEA-7901-468A-89B3-D17B8179AF40@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
	 <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com>
	 <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com>
	 <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com>
	 <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com>
	 <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com>
	 <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com>
	 <f071061b0611260857w457a6d49ucd2bdf10e4cfff40@mail.gmail.com>
	 <09ADDDEA-7901-468A-89B3-D17B8179AF40@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/27/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>
> On Nov 26, 2006, at 8:57 AM, jm wrote:
>
> > I tested this. I use a single static analyzer for all my documents,
> > and the caching analyzer was not working properly. I had to add a
> > method to clear the cache each time a new document was to be indexed,
> > and then it worked as expected. I have never looked into lucenes inner
> > working so I am not sure if what I did is correct.
>
> Makes sense, I've now incorporated that as well by adding a clear()
> method and extracting the functionality into a public class
> AnalyzerUtil.TokenCachingAnalyzer.
yes, same here, I could have posted my code, sorry,  but I was not
sure if it was even correct...
When theres is a new lucene 2.1 or whatever I'll incorporate to that
optimization into my code. thanks

>
> >
> > I also had to comment some code cause I merged the memory stuff from
> > trunk with lucene 2.0.
> >
> > Performance was certainly much better (4 times faster in my very gross
> > testing), but for my processing that operation is only a very small,
> > so I will keep the original way, without caching the tokens, just to
> > be able to use the unmodified lucene 2.0.  I found a data problem in
> > my tests, but as I was not going to pursue that improvement for now I
> > did not look into it.
>
> Ok.
> Wolfgang.
>
> >
> > thanks,
> > javier
> >
> > On 11/23/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> >> Out of interest, I've checked an implementation of something like
> >> this into AnalyzerUtil SVN trunk:
> >>
> >>    /**
> >>     * Returns an analyzer wrapper that caches all tokens generated by
> >> the underlying child analyzer's
> >>     * token stream, and delivers those cached tokens on subsequent
> >> calls to
> >>     * <code>tokenStream(String fieldName, Reader reader)</code>.
> >>     * <p>
> >>     * This can help improve performance in the presence of expensive
> >> Analyzer / TokenFilter chains.
> >>     * <p>
> >>     * Caveats:
> >>     * 1) Caching only works if the methods equals() and hashCode()
> >> methods are properly
> >>     * implemented on the Reader passed to <code>tokenStream(String
> >> fieldName, Reader reader)</code>.
> >>     * 2) Caching the tokens of large Lucene documents can lead to out
> >> of memory exceptions.
> >>     * 3) The Token instances delivered by the underlying child
> >> analyzer must be immutable.
> >>     *
> >>     * @param child
> >>     *            the underlying child analyzer
> >>     * @return a new analyzer
> >>     */
> >>    public static Analyzer getTokenCachingAnalyzer(final Analyzer
> >> child) { ... }
> >>
> >>
> >> Check it out, and let me know if this is close to what you had in
> >> mind.
> >>
> >> Wolfgang.
> >>
> >> On Nov 22, 2006, at 9:19 AM, Wolfgang Hoschek wrote:
> >>
> >> > I've never tried it, but I guess you could write an Analyzer and
> >> > TokenFilter that no only feeds into IndexWriter on
> >> > IndexWriter.addDocument(), but as a sneaky side effect also
> >> > simultaneously saves its tokens into a list so that you could later
> >> > turn that list into another TokenStream to be added to MemoryIndex.
> >> > How much this might help depends on how expensive your analyzer
> >> > chain is. For some examples on how to set up analyzers for chains
> >> > of token streams, see MemoryIndex.keywordTokenStream and class
> >> > AnalzyerUtil in the same package.
> >> >
> >> > Wolfgang.
> >> >
> >> > On Nov 22, 2006, at 4:15 AM, jm wrote:
> >> >
> >> >> checking one last thing, just in case...
> >> >>
> >> >> as I mentioned, I have previously indexed the same document in
> >> >> another
> >> >> index (for another purpose), as I am going to use the same
> >> analyzer,
> >> >> would it be possible to avoid analyzing the doc again?
> >> >>
> >> >> I see IndexWriter.addDocument() returns void, so it does not
> >> seem to
> >> >> be an easy way to do that no?
> >> >>
> >> >> thanks
> >> >>
> >> >> On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> >> >>>
> >> >>> On Nov 21, 2006, at 12:38 PM, jm wrote:
> >> >>>
> >> >>> > Ok, thanks, I'll give MemoryIndex a go, and if that is not good
> >> >>> enoguh
> >> >>> > I will explore the other options then.
> >> >>>
> >> >>> To get started you can use something like this:
> >> >>>
> >> >>> for each document D:
> >> >>>      MemoryIndex index = createMemoryIndex(D, ...)
> >> >>>      for each query Q:
> >> >>>          float score = index.search(Q)
> >> >>>         if (score > 0.0) System.out.println("it's a match");
> >> >>>
> >> >>>
> >> >>>
> >> >>>
> >> >>>    private MemoryIndex createMemoryIndex(Document doc, Analyzer
> >> >>> analyzer) {
> >> >>>      MemoryIndex index = new MemoryIndex();
> >> >>>      Enumeration iter = doc.fields();
> >> >>>      while (iter.hasMoreElements()) {
> >> >>>        Field field = (Field) iter.nextElement();
> >> >>>        index.addField(field.name(), field.stringValue(),
> >> analyzer);
> >> >>>      }
> >> >>>      return index;
> >> >>>    }
> >> >>>
> >> >>>
> >> >>>
> >> >>> >
> >> >>> >
> >> >>> > On 11/21/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> >> >>> >> On Nov 21, 2006, at 7:43 AM, jm wrote:
> >> >>> >>
> >> >>> >> > Hi,
> >> >>> >> >
> >> >>> >> > I have to decide between  using a RAMDirectory and
> >> >>> MemoryIndex, but
> >> >>> >> > not sure what approach will work better...
> >> >>> >> >
> >> >>> >> > I have to run many items (tens of thousands) against some
> >> >>> >> queries (100
> >> >>> >> > at most), but I have to do it one item at a time. And I
> >> already
> >> >>> >> have
> >> >>> >> > the lucene Document associated with each item, from a
> >> previous
> >> >>> >> > operation I perform.
> >> >>> >> >
> >> >>> >> > From what I read MemoryIndex should be faster, but
> >> apparently I
> >> >>> >> cannot
> >> >>> >> > reuse the document I already have, and I have to create a
> >> new
> >> >>> >> > MemoryIndex per item.
> >> >>> >>
> >> >>> >> A MemoryIndex object holds one document.
> >> >>> >>
> >> >>> >> > Using the RAMDirectory I can use only one of
> >> >>> >> > them, also one IndexWriter, and create a IndexSearcher and
> >> >>> >> IndexReader
> >> >>> >> > per item, for searching and removing the item each time.
> >> >>> >> >
> >> >>> >> > Any thoughts?
> >> >>> >>
> >> >>> >> The MemoryIndex impl is optimized to work efficiently without
> >> >>> reusing
> >> >>> >> the MemoryIndex object for a subsequent document. See the
> >> source
> >> >>> >> code. Reusing the object would not further improve
> >> performance.
> >> >>> >>
> >> >>> >> Wolfgang.
> >> >>> >>
> >> >>> >>
> >> >>>
> >> --------------------------------------------------------------------
> >> >>> -
> >> >>> >> To unsubscribe, e-mail: java-user-
> >> unsubscribe@lucene.apache.org
> >> >>> >> For additional commands, e-mail: java-user-
> >> help@lucene.apache.org
> >> >>> >>
> >> >>> >>
> >> >>> >
> >> >>> >
> >> >>>
> >> --------------------------------------------------------------------
> >> >>> -
> >> >>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >>> > For additional commands, e-mail: java-user-
> >> help@lucene.apache.org
> >> >>> >
> >> >>>
> >> >>>
> >> >>
> >> >>
> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >
> >> >
> >> >
> >> ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 18:17:54 2006
Return-Path: <java-user-return-24728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23142 invoked from network); 27 Nov 2006 18:17:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 18:17:54 -0000
Received: (qmail 4359 invoked by uid 500); 27 Nov 2006 18:17:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4328 invoked by uid 500); 27 Nov 2006 18:17:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4317 invoked by uid 99); 27 Nov 2006 18:17:54 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 10:17:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 10:17:43 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1229859ugc
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 10:17:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=bwHw+B5nNqjmiFsAM0bBOrF+2AUH3jZhXqvqcm4I4mCXr369Rw+jYc/J+j7Dl7XdzZjyhIkOzaFYuAmaIjrdoxoiAsMhXQfKIAt7RjftDGZi6jZiAHdGGdrFCDRcS0NusIiradRVHfqXDFcbPqeklpnFuDtlmfmnE6QpM9QEXwM=
Received: by 10.82.123.16 with SMTP id v16mr2095845buc.1164651440884;
        Mon, 27 Nov 2006 10:17:20 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Mon, 27 Nov 2006 10:17:19 -0800 (PST)
Message-ID: <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>
Date: Mon, 27 Nov 2006 13:17:19 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new Term())
In-Reply-To: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>
X-Google-Sender-Auth: 28d04b11c6cf1b2b
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/27/06, Suman Ghosh <suman.ghosh.1@gmail.com> wrote:
> The last line [at
> org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)]
> repeats another 1010 times before the program crashes.
>
> I understand that without the actual index or the documents, it's
> nearly impossible to narrow down the cause of the error. However, can
> you please point to any theoretical reason why
> org.apache.lucene.index.MultiTermDocs.next will go into an infinite
> loop?

MultiTermDocs.next() is a recursive function.  From what I can see of
it though, it shouldn't recurse greater than the number of segments in
the index.

How many segments do you have in your index?  What IndexWriter
settings have you changed (mergeFactor, maxMergeDocs, etc)?

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 18:43:38 2006
Return-Path: <java-user-return-24729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31396 invoked from network); 27 Nov 2006 18:43:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 18:43:38 -0000
Received: (qmail 47019 invoked by uid 500); 27 Nov 2006 18:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46984 invoked by uid 500); 27 Nov 2006 18:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46973 invoked by uid 99); 27 Nov 2006 18:43:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 10:43:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of suman.ghosh.1@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 10:43:27 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2033547nfc
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 10:43:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=T5IFs2AvwyPwaFdbadHPXRjTm0+bDSFqGGoZLguaROPLkmBwpqAEJh3rjfvCwX752RdABjjTVpIRUVEp8IShIYHxEMVFumVflJiBFMkTu9Kmxa6XDBdLjt8j07ZFVJNp97doFmEFxQ1xQQwWUWT4M3YUh06SIV4kAc8zaj2hYuI=
Received: by 10.48.210.16 with SMTP id i16mr3268749nfg.1164652986160;
        Mon, 27 Nov 2006 10:43:06 -0800 (PST)
Received: by 10.49.17.8 with HTTP; Mon, 27 Nov 2006 10:43:06 -0800 (PST)
Message-ID: <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>
Date: Mon, 27 Nov 2006 13:43:06 -0500
From: "Suman Ghosh" <suman.ghosh.1@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new Term())
In-Reply-To: <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>
	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Here are the values:

mergeFactor=10
maxMergeDocs=100000
minMergeDocs=100

And I see your point. At the time of the crash, I have over 5000
segments. I'll try some conservative number and try to rebuild the
index.


On 11/27/06, Yonik Seeley <yonik@apache.org> wrote:
> On 11/27/06, Suman Ghosh <suman.ghosh.1@gmail.com> wrote:
> > The last line [at
> > org.apache.lucene.index.MultiTermDocs.next(MultiReader.java:349)]
> > repeats another 1010 times before the program crashes.
> >
> > I understand that without the actual index or the documents, it's
> > nearly impossible to narrow down the cause of the error. However, can
> > you please point to any theoretical reason why
> > org.apache.lucene.index.MultiTermDocs.next will go into an infinite
> > loop?
>
> MultiTermDocs.next() is a recursive function.  From what I can see of
> it though, it shouldn't recurse greater than the number of segments in
> the index.
>
> How many segments do you have in your index?  What IndexWriter
> settings have you changed (mergeFactor, maxMergeDocs, etc)?
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 18:51:48 2006
Return-Path: <java-user-return-24730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33623 invoked from network); 27 Nov 2006 18:51:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 18:51:48 -0000
Received: (qmail 65035 invoked by uid 500); 27 Nov 2006 18:51:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65005 invoked by uid 500); 27 Nov 2006 18:51:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64994 invoked by uid 99); 27 Nov 2006 18:51:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 10:51:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 10:51:38 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2035153nfc
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 10:51:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=NXTKbn3TafHBeqP5SttMKaAidfCaNsDsv0txvXiE76fxvWet3znYJ+Lqyn/EDvQt+JcRdoPzlZeQc4kNikrbIFn+86jEJYfB7BOpV8Z1EOiyiMk5Qxf54ncutgPMpbgCz+dfdmUKnrxcq0AuMa7k28gQ+XbhKbSRzbUjfZP8ce8=
Received: by 10.82.120.15 with SMTP id s15mr2110453buc.1164653477029;
        Mon, 27 Nov 2006 10:51:17 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Mon, 27 Nov 2006 10:51:16 -0800 (PST)
Message-ID: <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com>
Date: Mon, 27 Nov 2006 13:51:16 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new Term())
In-Reply-To: <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>
	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>
	 <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>
X-Google-Sender-Auth: 63c7cdd4a4b22353
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/27/06, Suman Ghosh <suman.ghosh.1@gmail.com> wrote:
> Here are the values:
>
> mergeFactor=10
> maxMergeDocs=100000
> minMergeDocs=100
>
> And I see your point. At the time of the crash, I have over 5000
> segments. I'll try some conservative number and try to rebuild the
> index.

Although I don't see how those settings can produce 5000 segments,
I've developed a non-recursive patch you might want to try:
https://issues.apache.org/jira/browse/LUCENE-729

The patch is to the Lucene trunk (current devel version), so if you
want to stick with Lucene 2.0, you might have to patch by hand.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 18:52:21 2006
Return-Path: <java-user-return-24731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33750 invoked from network); 27 Nov 2006 18:52:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 18:52:21 -0000
Received: (qmail 66595 invoked by uid 500); 27 Nov 2006 18:52:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66568 invoked by uid 500); 27 Nov 2006 18:52:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66549 invoked by uid 99); 27 Nov 2006 18:52:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 10:52:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 10:52:10 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.8/8.13.8) with ESMTP id kARIpmJT069773
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 19:51:49 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Hits length with no sorting or scoring
Date: Mon, 27 Nov 2006 19:51:48 +0100
User-Agent: KMail/1.8.2
References: <0A738FE79EB90047A7923673A8083FA6046AAEE6@ldap01.rhul.ac.uk>
In-Reply-To: <0A738FE79EB90047A7923673A8083FA6046AAEE6@ldap01.rhul.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611271951.48350.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 27 November 2006 14:30, Hirsch Laurence wrote:
> Hello,
> 
> I have an application in which we only need to know the total number of
> documents matching a query.  In this case we do not need any sorting or
> scoring or to store any reference to the matching documents.  Can you
> tell me how to execute such a query with maximum performance?

A fairly quick way is to implement your own HitCollector to count,
and then use the appropriate methods of IndexSearcher.

If you really need maximum performance, this bit of code
avoids computing the score values and invoking the
HitCollector (untested):

// s is the IndexSearcher, query the Query
org.apache.lucene.search.Scorer scorer =
   query.weight(s).scorer(s.getIndexReader());
int count = 0;
while (scorer.next()) count++;

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 18:59:48 2006
Return-Path: <java-user-return-24732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35256 invoked from network); 27 Nov 2006 18:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 18:59:47 -0000
Received: (qmail 79717 invoked by uid 500); 27 Nov 2006 18:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79679 invoked by uid 500); 27 Nov 2006 18:59:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79668 invoked by uid 99); 27 Nov 2006 18:59:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 10:59:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of suman.ghosh.1@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 10:59:34 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2036785nfc
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 10:59:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=JKlVwlXxD9mVQwFUXyV4vDLMQOc2bfpr5L3sBm4BHvpB3316FemWtKs1bJ90FLLTAF+rjUE/GPlw1oL11CIF1z0uVVyZWsFHGW5q7Q0eamtbQg5N9SPR9uzW23O23VJrNf3CejO0ZtTnsSeLcmciIjM4jWqKPQ49SV4w5lgoX8k=
Received: by 10.49.5.2 with SMTP id h2mr11144687nfi.1164653953008;
        Mon, 27 Nov 2006 10:59:13 -0800 (PST)
Received: by 10.49.17.8 with HTTP; Mon, 27 Nov 2006 10:59:12 -0800 (PST)
Message-ID: <a6c7e1410611271059n124b952bye9fb024d3b6b2747@mail.gmail.com>
Date: Mon, 27 Nov 2006 13:59:12 -0500
From: "Suman Ghosh" <suman.ghosh.1@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new Term())
In-Reply-To: <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>
	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>
	 <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>
	 <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik,

Thanks for the pointer. I'll try the nightly build once the change is committed.

Suman

On 11/27/06, Yonik Seeley <yonik@apache.org> wrote:
> On 11/27/06, Suman Ghosh <suman.ghosh.1@gmail.com> wrote:
> > Here are the values:
> >
> > mergeFactor=10
> > maxMergeDocs=100000
> > minMergeDocs=100
> >
> > And I see your point. At the time of the crash, I have over 5000
> > segments. I'll try some conservative number and try to rebuild the
> > index.
>
> Although I don't see how those settings can produce 5000 segments,
> I've developed a non-recursive patch you might want to try:
> https://issues.apache.org/jira/browse/LUCENE-729
>
> The patch is to the Lucene trunk (current devel version), so if you
> want to stick with Lucene 2.0, you might have to patch by hand.
>
>
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search server
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 19:01:16 2006
Return-Path: <java-user-return-24733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35663 invoked from network); 27 Nov 2006 19:01:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 19:01:14 -0000
Received: (qmail 82984 invoked by uid 500); 27 Nov 2006 19:01:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82949 invoked by uid 500); 27 Nov 2006 19:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82938 invoked by uid 99); 27 Nov 2006 19:01:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:01:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.175] (HELO smtpout.mac.com) (17.250.248.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 11:01:04 -0800
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout05/MantshX 4.0) with ESMTP id kARJ0dQE028251
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 11:00:40 -0800 (PST)
Received: from [192.168.2.6] (adsl-71-146-159-112.dsl.pltn13.sbcglobal.net [71.146.159.112])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id kARJ0V7n025178
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 11:00:36 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <f071061b0611270957h64f45b65ga89a79654193d104@mail.gmail.com>
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com> <0F1C6C7E-55DE-437B-B22B-E1FC5A113C97@mac.com> <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com> <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com> <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com> <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com> <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com> <f071061b0611260857w457a6d49ucd2bdf10e4cfff40@mail.gmail.com> <09ADDDEA-7901-468A-89B3-D17B8179AF40@mac.com> <f071061b0611270957h64f45b65ga89a79654193d104@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <03CC5E58-59CD-490D-BC53-4C2B2E58F3F9@mac.com>
Content-Transfer-Encoding: 7bit
From: Wolfgang Hoschek <wolfgang.hoschek@mac.com>
Subject: Re: RAMDirectory vs MemoryIndex
Date: Mon, 27 Nov 2006 11:00:29 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5446:2.3.11,1.2.37,4.0.164 definitions=2006-11-27_09:2006-11-24,2006-11-27,2006-11-27 signatures=0
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 spamscore=0 ipscore=0 adultscore=0 classifier=spam adjust=0 reason=mlx engine=3.1.0-0610180000 definitions=main-0611270013
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 27, 2006, at 9:57 AM, jm wrote:

> On 11/27/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>>
>> On Nov 26, 2006, at 8:57 AM, jm wrote:
>>
>> > I tested this. I use a single static analyzer for all my documents,
>> > and the caching analyzer was not working properly. I had to add a
>> > method to clear the cache each time a new document was to be  
>> indexed,
>> > and then it worked as expected. I have never looked into lucenes  
>> inner
>> > working so I am not sure if what I did is correct.
>>
>> Makes sense, I've now incorporated that as well by adding a clear()
>> method and extracting the functionality into a public class
>> AnalyzerUtil.TokenCachingAnalyzer.
> yes, same here, I could have posted my code, sorry,  but I was not
> sure if it was even correct...
> When theres is a new lucene 2.1 or whatever I'll incorporate to that
> optimization into my code. thanks


Actually, now I'm considering reverting back to the version without a  
public clear() method. The rationale is that this would be less  
complex and more consistent with the AnalyzerUtil design (simple  
methods generating simple anonymous analyzer wrappers). If desired,  
you can still (re)use a single static "child" analyzer instance. It's  
cheap and easy to create a new caching analyzer on top of the static  
analyzer, and to do so before each document. The old one will simply  
be gc'd.

Let me know if that'd work for you.

Wolfgang.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 20:01:25 2006
Return-Path: <java-user-return-24734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51903 invoked from network); 27 Nov 2006 20:01:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 20:01:24 -0000
Received: (qmail 18094 invoked by uid 500); 27 Nov 2006 20:01:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18069 invoked by uid 500); 27 Nov 2006 20:01:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18058 invoked by uid 99); 27 Nov 2006 20:01:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:01:24 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:01:12 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2049857nfc
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 12:00:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JsxS8/MjGwfJe8uRyjyR5LbMrDnih0i6iWGU+v3YOjHCsO5vMC2Bm08WXVpZmJ/G2RLyGqU7eD6ASPjm9nNPRexWGNk70Qf1J5klnm+e3LGoAX7w44XSuMU7h1r7+f+N/Tt2HjKgKKX62tLrgV9iWeYu/DD5qh3vJI+FdvFTCrU=
Received: by 10.82.107.15 with SMTP id f15mr4841buc.1164657650158;
        Mon, 27 Nov 2006 12:00:50 -0800 (PST)
Received: by 10.82.181.9 with HTTP; Mon, 27 Nov 2006 12:00:50 -0800 (PST)
Message-ID: <359a92830611271200v60daddddyb6a53d4e4a5b0602@mail.gmail.com>
Date: Mon, 27 Nov 2006 15:00:50 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching by bit masks
In-Reply-To: <7564237.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_91525_24008683.1164657650025"
References: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>
	 <7564237.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_91525_24008683.1164657650025
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, you really have the code already <G>. From the top...

1> there's no good way to support searching bitfields If you wanted, you
could probably store it as a small integer and then search on it, but that's
waaay too complicated than you want.

2> Add the fields like you have the snippet from, something like
Document doc = new Document.
if (bitsfromdb & 1) {
    doc.add("sport", "y");
}
if (bitsfromdb & 2) {
    doc.add("music", "y");
}
.
.
.
IndexWriter.add(doc);



Now, when searching, search on things like new Term("sport", "y"))..... and
you'll only get the documents that correspond to the 2s bit being set.

Watch out for capitalization. Y may not be equivalent to y. It depends on
the analyzer you use at index AND search time.

You can or as many of these together as you want. In your example, you could
have up to 4 sub-clauses just for the bitmask-equivalents.

NOTE: the documents won't all have the same fields. A document may not have,
for instance, the "sports" field. This is OK in Lucene, but not the first
thing folks with their DB hat on think of....

Get a copy of Luke (google lucene luke) and get familiar with it for
examining your index and the effects of various analyzers. Really, really,
really get a copy of Luke. Really.

Do you have a copy of "Lucene In Action"? If not, I highly recommend it. It
has tons of useful examples as well as a good introduction to many of the
concepts. It's written to the 1.4 codebase, so be warned that there are some
incompatibilities that are, for the most part, minor.


Best
Erick
On 11/27/06, Biggy <biggy97@web.de> wrote:
>
>
>
> i have the same problem here. I have an interest bit field, which i
> receive from the applciation backend. I have control over how the
> docuemtns
> are built.
> To be specific, the field looks like this:
>
> ID: interest
> 1 : sport
> 2 : music
> 4 : film
> 8 : clubs
>
> So someone interested in sports and music can be found by "interest & 3"
> =>
> e.g. when using SQL.
>
> I do not wish to Post-Filter the results
> On to Lucene, Is there a filter which supports this kind of query ?
>
> Someone suggested splitting the bits into fields:
> > Document doc = new Document();
> > doc.add("flag1", "Y");
> > doc.add("flag2", "Y");
> > IndexWriter.add(doc);
> Is this helpful at all ?
>
> Code would be helpful too as i am a newbie
>
>
>
> ltaylor.employon wrote:
> >
> > Hello,
> >
> > I am currently evaluating Lucene to see if it would be appropriate to
> > replace my company's current search software. So far everything has been
> > looking great, however there is one requirement that I am not too
> > certain about.
> >
> > What we need to do is to be able to store a bit mask specifying various
> > filter flags for a document in the index and then search this field by
> > specifying another bit mask with desired filters, returning documents
> > that have any of the specified flags set. In other words, we are doing a
> > bitwise OR on the stored filter bit mask and the specified filter bit
> > mask and if it is non-zero, we want to return the document.
> >
> > Before I started toying around with various options myself, I wanted to
> > see if any of you good folks in the Lucene community had some
> > suggestions for an efficient way to implement this.
> >
> > We currently need to index ~8,000,000 documents. We have several filter
> > flag fields, the most important of which currently has 7 possible flags
> > with any combination of the flags being valid. The number of flags is
> > expected to increase rather rapidly in the near future.
> >
> > My preemptive thanks for your suggestions,
> >
> >
> > Lawrence Taylor
> > Senior Software Engineer
> > Employon
> > Message was edited by: ltaylor.employon
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Searching-by-bit-masks-tf2603918.html#a7564237
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_91525_24008683.1164657650025--

From java-user-return-24735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 20:17:44 2006
Return-Path: <java-user-return-24735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56798 invoked from network); 27 Nov 2006 20:17:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 20:17:43 -0000
Received: (qmail 50669 invoked by uid 500); 27 Nov 2006 20:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50648 invoked by uid 500); 27 Nov 2006 20:17:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50637 invoked by uid 99); 27 Nov 2006 20:17:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:17:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:17:31 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1268949ugc
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 12:17:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nev8UO6UhGdKcBcE+bRcQfqipx8qc8Rq65KRDIKZKcxDowjwgGII6gWGiGNLZ0ReARAnEuQtwcNInar3kyOJIHrnf8cjxSTyO3zU5O8U4U6T+nP8b1wmIWo0gS3SnVsmrwqRWkwthRzvZqZndbtFNTOLc5yJXR4VkfiNXYM3/m4=
Received: by 10.78.200.3 with SMTP id x3mr13621675huf.1164658629731;
        Mon, 27 Nov 2006 12:17:09 -0800 (PST)
Received: by 10.78.200.9 with HTTP; Mon, 27 Nov 2006 12:17:09 -0800 (PST)
Message-ID: <f071061b0611271217k4d73a3bdoda19e9ae57c1858d@mail.gmail.com>
Date: Mon, 27 Nov 2006 21:17:09 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory vs MemoryIndex
In-Reply-To: <03CC5E58-59CD-490D-BC53-4C2B2E58F3F9@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
	 <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com>
	 <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com>
	 <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com>
	 <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com>
	 <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com>
	 <f071061b0611260857w457a6d49ucd2bdf10e4cfff40@mail.gmail.com>
	 <09ADDDEA-7901-468A-89B3-D17B8179AF40@mac.com>
	 <f071061b0611270957h64f45b65ga89a79654193d104@mail.gmail.com>
	 <03CC5E58-59CD-490D-BC53-4C2B2E58F3F9@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

yes that would be ok for my, as long as I can reuse my child analyzer.

On 11/27/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>
> On Nov 27, 2006, at 9:57 AM, jm wrote:
>
> > On 11/27/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> >>
> >> On Nov 26, 2006, at 8:57 AM, jm wrote:
> >>
> >> > I tested this. I use a single static analyzer for all my documents,
> >> > and the caching analyzer was not working properly. I had to add a
> >> > method to clear the cache each time a new document was to be
> >> indexed,
> >> > and then it worked as expected. I have never looked into lucenes
> >> inner
> >> > working so I am not sure if what I did is correct.
> >>
> >> Makes sense, I've now incorporated that as well by adding a clear()
> >> method and extracting the functionality into a public class
> >> AnalyzerUtil.TokenCachingAnalyzer.
> > yes, same here, I could have posted my code, sorry,  but I was not
> > sure if it was even correct...
> > When theres is a new lucene 2.1 or whatever I'll incorporate to that
> > optimization into my code. thanks
>
>
> Actually, now I'm considering reverting back to the version without a
> public clear() method. The rationale is that this would be less
> complex and more consistent with the AnalyzerUtil design (simple
> methods generating simple anonymous analyzer wrappers). If desired,
> you can still (re)use a single static "child" analyzer instance. It's
> cheap and easy to create a new caching analyzer on top of the static
> analyzer, and to do so before each document. The old one will simply
> be gc'd.
>
> Let me know if that'd work for you.
>
> Wolfgang.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 20:24:22 2006
Return-Path: <java-user-return-24736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64225 invoked from network); 27 Nov 2006 20:24:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 20:24:21 -0000
Received: (qmail 65034 invoked by uid 500); 27 Nov 2006 20:24:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64698 invoked by uid 500); 27 Nov 2006 20:24:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64687 invoked by uid 99); 27 Nov 2006 20:24:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:24:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jmuguruza@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO nz-out-0102.google.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:24:09 -0800
Received: by nz-out-0102.google.com with SMTP id i1so722660nzh
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 12:23:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nev8UO6UhGdKcBcE+bRcQfqipx8qc8Rq65KRDIKZKcxDowjwgGII6gWGiGNLZ0ReARAnEuQtwcNInar3kyOJIHrnf8cjxSTyO3zU5O8U4U6T+nP8b1wmIWo0gS3SnVsmrwqRWkwthRzvZqZndbtFNTOLc5yJXR4VkfiNXYM3/m4=
Received: by 10.78.200.3 with SMTP id x3mr13621675huf.1164658629731;
        Mon, 27 Nov 2006 12:17:09 -0800 (PST)
Received: by 10.78.200.9 with HTTP; Mon, 27 Nov 2006 12:17:09 -0800 (PST)
Message-ID: <f071061b0611271217k4d73a3bdoda19e9ae57c1858d@mail.gmail.com>
Date: Mon, 27 Nov 2006 21:17:09 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RAMDirectory vs MemoryIndex
In-Reply-To: <03CC5E58-59CD-490D-BC53-4C2B2E58F3F9@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com>
	 <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com>
	 <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com>
	 <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com>
	 <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com>
	 <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com>
	 <f071061b0611260857w457a6d49ucd2bdf10e4cfff40@mail.gmail.com>
	 <09ADDDEA-7901-468A-89B3-D17B8179AF40@mac.com>
	 <f071061b0611270957h64f45b65ga89a79654193d104@mail.gmail.com>
	 <03CC5E58-59CD-490D-BC53-4C2B2E58F3F9@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org

yes that would be ok for my, as long as I can reuse my child analyzer.

On 11/27/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>
> On Nov 27, 2006, at 9:57 AM, jm wrote:
>
> > On 11/27/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
> >>
> >> On Nov 26, 2006, at 8:57 AM, jm wrote:
> >>
> >> > I tested this. I use a single static analyzer for all my documents,
> >> > and the caching analyzer was not working properly. I had to add a
> >> > method to clear the cache each time a new document was to be
> >> indexed,
> >> > and then it worked as expected. I have never looked into lucenes
> >> inner
> >> > working so I am not sure if what I did is correct.
> >>
> >> Makes sense, I've now incorporated that as well by adding a clear()
> >> method and extracting the functionality into a public class
> >> AnalyzerUtil.TokenCachingAnalyzer.
> > yes, same here, I could have posted my code, sorry,  but I was not
> > sure if it was even correct...
> > When theres is a new lucene 2.1 or whatever I'll incorporate to that
> > optimization into my code. thanks
>
>
> Actually, now I'm considering reverting back to the version without a
> public clear() method. The rationale is that this would be less
> complex and more consistent with the AnalyzerUtil design (simple
> methods generating simple anonymous analyzer wrappers). If desired,
> you can still (re)use a single static "child" analyzer instance. It's
> cheap and easy to create a new caching analyzer on top of the static
> analyzer, and to do so before each document. The old one will simply
> be gc'd.
>
> Let me know if that'd work for you.
>
> Wolfgang.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 20:28:36 2006
Return-Path: <java-user-return-24737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65620 invoked from network); 27 Nov 2006 20:28:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 20:28:35 -0000
Received: (qmail 81643 invoked by uid 500); 27 Nov 2006 20:28:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81616 invoked by uid 500); 27 Nov 2006 20:28:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81605 invoked by uid 99); 27 Nov 2006 20:28:35 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:28:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [17.250.248.181] (HELO smtpout.mac.com) (17.250.248.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:28:21 -0800
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout11/MantshX 4.0) with ESMTP id kARKRxNt022620
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 12:27:59 -0800 (PST)
Received: from [192.168.2.6] ([71.146.159.112])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id kARKRtcj004298
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 12:27:56 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <f071061b0611271217k4d73a3bdoda19e9ae57c1858d@mail.gmail.com>
References: <f071061b0611210743t483e13dfhaba3667ab05bf961@mail.gmail.com> <f071061b0611211238v1d08bd4eh99df86bcc7adfde0@mail.gmail.com> <373BD0C9-5EFA-456C-8153-443BBB6FA454@mac.com> <f071061b0611220415l66936c8cye04baebecace6cd1@mail.gmail.com> <78370DE5-A7CA-4FAE-8D1E-4CD671FF3D53@mac.com> <5BA53890-C8A6-4BE2-BFE7-B64BACBCC64C@mac.com> <f071061b0611260857w457a6d49ucd2bdf10e4cfff40@mail.gmail.com> <09ADDDEA-7901-468A-89B3-D17B8179AF40@mac.com> <f071061b0611270957h64f45b65ga89a79654193d104@mail.gmail.com> <03CC5E58-59CD-490D-BC53-4C2B2E58F3F9@mac.com> <f071061b0611271217k4d73a3bdoda19e9ae57c1858d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1FA67A84-4ABE-4C78-AD38-A408F2E3CAE0@mac.com>
Content-Transfer-Encoding: 7bit
From: Wolfgang Hoschek <wolfgang.hoschek@mac.com>
Subject: Re: RAMDirectory vs MemoryIndex
Date: Mon, 27 Nov 2006 12:27:33 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Brightmail-Tracker: AAAAAA==
X-Brightmail-scanned: yes
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5446:2.3.11,1.2.37,4.0.164 definitions=2006-11-27_09:2006-11-24,2006-11-27,2006-11-27 signatures=0
X-Proofpoint-Spam-Details: rule=notspam policy=default score=0 spamscore=0 ipscore=0 adultscore=0 classifier=spam adjust=0 reason=mlx engine=3.1.0-0610180000 definitions=main-0611270019
X-Virus-Checked: Checked by ClamAV on apache.org

Ok. I reverted back to the version without a public clear() method.
Wolfgang.

On Nov 27, 2006, at 12:17 PM, jm wrote:

> yes that would be ok for my, as long as I can reuse my child analyzer.
>
> On 11/27/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>>
>> On Nov 27, 2006, at 9:57 AM, jm wrote:
>>
>> > On 11/27/06, Wolfgang Hoschek <wolfgang.hoschek@mac.com> wrote:
>> >>
>> >> On Nov 26, 2006, at 8:57 AM, jm wrote:
>> >>
>> >> > I tested this. I use a single static analyzer for all my  
>> documents,
>> >> > and the caching analyzer was not working properly. I had to  
>> add a
>> >> > method to clear the cache each time a new document was to be
>> >> indexed,
>> >> > and then it worked as expected. I have never looked into lucenes
>> >> inner
>> >> > working so I am not sure if what I did is correct.
>> >>
>> >> Makes sense, I've now incorporated that as well by adding a  
>> clear()
>> >> method and extracting the functionality into a public class
>> >> AnalyzerUtil.TokenCachingAnalyzer.
>> > yes, same here, I could have posted my code, sorry,  but I was not
>> > sure if it was even correct...
>> > When theres is a new lucene 2.1 or whatever I'll incorporate to  
>> that
>> > optimization into my code. thanks
>>
>>
>> Actually, now I'm considering reverting back to the version without a
>> public clear() method. The rationale is that this would be less
>> complex and more consistent with the AnalyzerUtil design (simple
>> methods generating simple anonymous analyzer wrappers). If desired,
>> you can still (re)use a single static "child" analyzer instance. It's
>> cheap and easy to create a new caching analyzer on top of the static
>> analyzer, and to do so before each document. The old one will simply
>> be gc'd.
>>
>> Let me know if that'd work for you.
>>
>> Wolfgang.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 20:42:21 2006
Return-Path: <java-user-return-24738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69117 invoked from network); 27 Nov 2006 20:42:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 20:42:21 -0000
Received: (qmail 4892 invoked by uid 500); 27 Nov 2006 20:42:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4859 invoked by uid 500); 27 Nov 2006 20:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4739 invoked by uid 99); 27 Nov 2006 20:42:03 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:42:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.37] (HELO smtp-vbr17.xs4all.nl) (194.109.24.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 12:41:38 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr17.xs4all.nl (8.13.8/8.13.8) with ESMTP id kARKeqwI080225
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 21:40:52 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Querying performance decrease in 1.9.1 and 2.0.0
Date: Mon, 27 Nov 2006 21:40:51 +0100
User-Agent: KMail/1.8.2
References: <45632010.1070407@sirma.bg> <200611211933.46040.paul.elschot@xs4all.nl> <45640FB7.90209@sirma.bg>
In-Reply-To: <45640FB7.90209@sirma.bg>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611272140.51730.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Stanislav,

On Wednesday 22 November 2006 09:52, Stanislav Jordanov wrote:
> Paul,
> We are working on delivering the next release by the end of the week so 
> I have to take care of 2 or 3 issues before I try the nightly build.
> I promise to try it and report the results here.

I have made a first attempt at restoring the old query performance here:
http://issues.apache.org/jira/browse/LUCENE-730

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 21:37:52 2006
Return-Path: <java-user-return-24739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81795 invoked from network); 27 Nov 2006 21:37:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 21:37:51 -0000
Received: (qmail 7040 invoked by uid 500); 27 Nov 2006 21:37:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6954 invoked by uid 500); 27 Nov 2006 21:37:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6933 invoked by uid 99); 27 Nov 2006 21:37:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 13:37:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 13:37:26 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by out1.messagingengine.com (Postfix) with ESMTP id 72112A240
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 16:37:06 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by db2.internal (MEProxy); Mon, 27 Nov 2006 16:37:06 -0500
X-Sasl-enc: HDCiORaoUFvxPZI4vFa2ituyn+9dNXwmjPkAPB+5wDoS 1164663426
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 36D3315102
	for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 16:37:06 -0500 (EST)
Message-ID: <456B5A7B.8040303@mikemccandless.com>
Date: Mon, 27 Nov 2006 16:36:59 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new
 Term())
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>	 <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>	 <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com> <a6c7e1410611271059n124b952bye9fb024d3b6b2747@mail.gmail.com>
In-Reply-To: <a6c7e1410611271059n124b952bye9fb024d3b6b2747@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Suman Ghosh wrote:

> On 11/27/06, Yonik Seeley <yonik@apache.org> wrote:
>> On 11/27/06, Suman Ghosh <suman.ghosh.1@gmail.com> wrote:
>> > Here are the values:
>> >
>> > mergeFactor=10
>> > maxMergeDocs=100000
>> > minMergeDocs=100
>> >
>> > And I see your point. At the time of the crash, I have over 5000
>> > segments. I'll try some conservative number and try to rebuild the
>> > index.
>>
>> Although I don't see how those settings can produce 5000 segments,
>> I've developed a non-recursive patch you might want to try:
>> https://issues.apache.org/jira/browse/LUCENE-729

Suman, I'd really like to understand how you're getting so many
segments in your index.  Is this (getting 5000 segments) easy to
reproduce?  Are you closing / reopening your writer every so often (eg
to delete documents or something)?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 27 23:30:42 2006
Return-Path: <java-user-return-24740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11542 invoked from network); 27 Nov 2006 23:30:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2006 23:30:41 -0000
Received: (qmail 38881 invoked by uid 500); 27 Nov 2006 23:30:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38845 invoked by uid 500); 27 Nov 2006 23:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 92827 invoked by uid 99); 27 Nov 2006 22:11:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Message-ID: <456B6331.1050005@nuix.com>
Date: Tue, 28 Nov 2006 09:14:09 +1100
From: Daniel Noll <daniel@nuix.com>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 3.0a1 (Windows/20061123)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Searching by bit masks
References: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>	 <7564237.post@talk.nabble.com> <359a92830611271200v60daddddyb6a53d4e4a5b0602@mail.gmail.com>
In-Reply-To: <359a92830611271200v60daddddyb6a53d4e4a5b0602@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> Well, you really have the code already <G>. From the top...
> 
> 1> there's no good way to support searching bitfields If you wanted, you
> could probably store it as a small integer and then search on it, but 
> that's
> waaay too complicated than you want.
> 
> 2> Add the fields like you have the snippet from, something like
> Document doc = new Document.
> if (bitsfromdb & 1) {
>    doc.add("sport", "y");
> }
> if (bitsfromdb & 2) {
>    doc.add("music", "y");
> }

Beware that if there are a large number of bits, this is going to impact 
memory usage due to there being more fields.

Perhaps a better way would be to use a single "bits" field and store the 
words "sport", "music", ... in that field.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://nuix.com/                               Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 03:25:04 2006
Return-Path: <java-user-return-24741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75902 invoked from network); 28 Nov 2006 03:25:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 03:25:03 -0000
Received: (qmail 72409 invoked by uid 500); 28 Nov 2006 03:25:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72365 invoked by uid 500); 28 Nov 2006 03:25:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72354 invoked by uid 99); 28 Nov 2006 03:25:06 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 19:25:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of suman.ghosh.1@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 27 Nov 2006 19:24:54 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2139349nfc
        for <java-user@lucene.apache.org>; Mon, 27 Nov 2006 19:24:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=KhCdELoFn/d6kERgbLooUjCyCVEWyixAwJaaUD+cKQaiaC+xR9En4IlQTg4GdyYCab1clvXq768Ts4z/wG8GX/pxfa2cTG+zIVnZwdTNQEPN5GzoiR03RKGuZt4PdsaSljULd/dPdNT+iFJR084o/C6FKLO9jRqwY+9JWU9/VAk=
Received: by 10.48.162.12 with SMTP id k12mr214880nfe.1164684272575;
        Mon, 27 Nov 2006 19:24:32 -0800 (PST)
Received: by 10.49.17.8 with HTTP; Mon, 27 Nov 2006 19:24:32 -0800 (PST)
Message-ID: <a6c7e1410611271924y221da4f4y734bfbaf053d7138@mail.gmail.com>
Date: Mon, 27 Nov 2006 22:24:32 -0500
From: "Suman Ghosh" <suman.ghosh.1@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new Term())
In-Reply-To: <456B5A7B.8040303@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>
	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>
	 <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>
	 <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com>
	 <a6c7e1410611271059n124b952bye9fb024d3b6b2747@mail.gmail.com>
	 <456B5A7B.8040303@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Mike,
I've not tried it yet, but I think the problem can be reproduced.
However, it'll take a few hours to reach that threshhold since my code
also needs to extract text from some very large PDF documents to store
in the index.

I'll post the pseudo-code of my code tomorrow. Maybe that'll help
point to mistakes I'm making in the logic.

Suman

On 11/27/06, Michael McCandless <lucene@mikemccandless.com> wrote:
> Suman Ghosh wrote:
>
> > On 11/27/06, Yonik Seeley <yonik@apache.org> wrote:
> >> On 11/27/06, Suman Ghosh <suman.ghosh.1@gmail.com> wrote:
> >> > Here are the values:
> >> >
> >> > mergeFactor=10
> >> > maxMergeDocs=100000
> >> > minMergeDocs=100
> >> >
> >> > And I see your point. At the time of the crash, I have over 5000
> >> > segments. I'll try some conservative number and try to rebuild the
> >> > index.
> >>
> >> Although I don't see how those settings can produce 5000 segments,
> >> I've developed a non-recursive patch you might want to try:
> >> https://issues.apache.org/jira/browse/LUCENE-729
>
> Suman, I'd really like to understand how you're getting so many
> segments in your index.  Is this (getting 5000 segments) easy to
> reproduce?  Are you closing / reopening your writer every so often (eg
> to delete documents or something)?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 09:54:39 2006
Return-Path: <java-user-return-24742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72318 invoked from network); 28 Nov 2006 09:54:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 09:54:39 -0000
Received: (qmail 44370 invoked by uid 500); 28 Nov 2006 09:54:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44347 invoked by uid 500); 28 Nov 2006 09:54:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44336 invoked by uid 99); 28 Nov 2006 09:54:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 01:54:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 01:54:13 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gozeg-0006Ec-2P
	for java-user@lucene.apache.org; Tue, 28 Nov 2006 01:53:34 -0800
Message-ID: <7576286.post@talk.nabble.com>
Date: Tue, 28 Nov 2006 01:53:34 -0800 (PST)
From: Biggy <biggy97@web.de>
To: java-user@lucene.apache.org
Subject: Re: Searching by bit masks
In-Reply-To: <456B6331.1050005@nuix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: biggy97@web.de
References: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net> <7564237.post@talk.nabble.com> <359a92830611271200v60daddddyb6a53d4e4a5b0602@mail.gmail.com> <456B6331.1050005@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org



OK here what i've come up with - After reading your suggestions
- bit set from DB stays untouched
- only one field shall be used to store interest field bits in the document:
"interest". Saves disk space.
- The bits shall be not be converted to readable string but added as values
separated by space " "
====Code Below====
-----------------
public Document getDocument(int db_interest_bits)
{
   String interest_string ="";
   // sport
   if (db_interest_bits & 1) {
       interest_string +="1"+" "; // empty space as delimiter
   }
   // music
   if (bitsfromdb & 2) {
       interest_string +="2"+" "; // empty space as delimiter
   } 

   Document doc = new Document(); 
   doc.add("interest", interest_string); 
   // how do i tell Lucene to separate tokens on search ?

   return doc;
}
---------------

FURTHERMORE - i realized that almost all potential values are often set
i.e.
sport music film
sport music
sport music film
sport music film
sport music
music

So i was thinking : How about doing the reverse when it comes to building
the index ?
I would onyl store the fields that are not set.
The search would be a negation.

Example Values ofd interest:
1. "no_film" => Only a film is not set
2. "no_sport no_film" => film and sport are not set
3. "" => all values are set since this is a negation


It follows, searching for people interested in music:
=> search for NOT no_music

QUESTION
How does the perfomance of a negative search NOT compare to a normal one
I.E. 
"NOT no_music" vs "music" search under the premise that most interest flags
are set ?



---------

Daniel Noll-3 wrote:
> 
> Erick Erickson wrote:
>> Well, you really have the code already <G>. From the top...
>> 
>> 1> there's no good way to support searching bitfields If you wanted, you
>> could probably store it as a small integer and then search on it, but 
>> that's
>> waaay too complicated than you want.
>> 
>> 2> Add the fields like you have the snippet from, something like
>> Document doc = new Document.
>> if (bitsfromdb & 1) {
>>    doc.add("sport", "y");
>> }
>> if (bitsfromdb & 2) {
>>    doc.add("music", "y");
>> }
> 
> Beware that if there are a large number of bits, this is going to impact 
> memory usage due to there being more fields.
> 
> Perhaps a better way would be to use a single "bits" field and store the 
> words "sport", "music", ... in that field.
> 
> Daniel
> 
> 
> -- 
> Daniel Noll
> 
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> Web: http://nuix.com/                               Fax: +61 2 9212 6902
> 
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Searching-by-bit-masks-tf2603918.html#a7576286
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 11:13:34 2006
Return-Path: <java-user-return-24743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93881 invoked from network); 28 Nov 2006 11:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 11:13:31 -0000
Received: (qmail 76311 invoked by uid 500); 28 Nov 2006 11:13:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75966 invoked by uid 500); 28 Nov 2006 11:13:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75955 invoked by uid 99); 28 Nov 2006 11:13:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 03:13:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [62.213.161.130] (HELO redhat.sirma.bg) (62.213.161.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 03:13:21 -0800
Received: from [192.168.128.211] (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with ESMTP id kASBCwER016604
	for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 13:12:59 +0200
Message-ID: <456C19BA.5000901@sirma.bg>
Date: Tue, 28 Nov 2006 13:12:58 +0200
From: Stanislav Jordanov <stenly@sirma.bg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Querying performance decrease in 1.9.1 and 2.0.0
References: <45632010.1070407@sirma.bg> <45632EB9.6060806@sirma.bg> <c68e39170611210859l4619f169l35ad1c2e2fb08bb0@mail.gmail.com> <200611211933.46040.paul.elschot@xs4all.nl> <45640FB7.90209@sirma.bg>
In-Reply-To: <45640FB7.90209@sirma.bg>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked by ClamAV on apache.org

Paul,
we are using a slightly modified version of Lucene,
so in order to run the performance tests on a nightly build, I need 
Lucene's sources, not the compiled classes.
Is there a nice and easy way to get them?

Stanislav


Stanislav Jordanov wrote:
> Paul,
> We are working on delivering the next release by the end of the week 
> so I have to take care of 2 or 3 issues before I try the nightly build.
> I promise to try it and report the results here.
>
> Best,
> Stanislav
>
> Paul Elschot wrote:
>> Stanislav,
>>
>> Could you also try a nightly build to test the later performance 
>> improvement
>> on BooleanScorer2?  The nightly builds are here:
>> http://people.apache.org/builds/lucene/java/nightly/
>> The jar is called lucene-core-nightly.jar in the .tar.gz build.
>>
>> It's not likely that this is faster than the 1.4 BooleanScorer, but 
>> one never knows.
>>
>> Regards,
>> Paul Elschot
>>
>>
>> On Tuesday 21 November 2006 17:59, Yonik Seeley wrote:
>>  
>>> On 11/21/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
>>>    
>>>> Switch to the old scorer (via BooleanQuery.setUseScorer14(true) )
>>>> solved the performance issue - now Lucene 1.9.1 & 2.0.0 perform on the
>>>> same load test just as 1.4.3 does
>>>>
>>>> Thanks a lot Yonik!
>>>>
>>>> Any chance there exists a non-professional explanation what's the
>>>> difference between old and new boolean scorers?
>>>>       
>>> The original BooleanScorer was a bucket-based scorer that could
>>> deliver docs out of order and thus restricted how it could be used.
>>> It also had a limitation of 32 required or prohibited clauses (because
>>> of an int bitmask).
>>>
>>> BooleanScorer2 removes these limitations, and uses skipTo() where
>>> applicable on sub-scorers.
>>>
>>> -Yonik
>>> http://incubator.apache.org/solr Solr, the open-source Lucene search 
>>> server
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>     
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>   
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 13:46:39 2006
Return-Path: <java-user-return-24744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56602 invoked from network); 28 Nov 2006 13:46:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 13:46:38 -0000
Received: (qmail 52922 invoked by uid 500); 28 Nov 2006 13:46:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52847 invoked by uid 500); 28 Nov 2006 13:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52813 invoked by uid 99); 28 Nov 2006 13:46:36 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 05:46:36 -0800
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 05:46:24 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2259558nfc
        for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 05:46:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PA+WV5Ikn0BQrD+v/DrxlqE+TRyD8o3b7vTY5YSWsICbx5KyWGQGsyJyk3WIFKANl5mcvaQ8uibDg2PD1yeGxVegXbDMJN6we68drwI8Ud95FkMqrCYZnDbWLUcy1QuEnegoIeYWzt+YMfj/2KF32eo3sQSaIU1m0qTcoXV+2bE=
Received: by 10.82.190.2 with SMTP id n2mr165005buf.1164721562076;
        Tue, 28 Nov 2006 05:46:02 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 28 Nov 2006 05:46:01 -0800 (PST)
Message-ID: <359a92830611280546s32b87768t33ffc2a197098046@mail.gmail.com>
Date: Tue, 28 Nov 2006 08:46:02 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching by bit masks
In-Reply-To: <7576286.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3037_2462119.1164721562033"
References: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>
	 <7564237.post@talk.nabble.com>
	 <359a92830611271200v60daddddyb6a53d4e4a5b0602@mail.gmail.com>
	 <456B6331.1050005@nuix.com> <7576286.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3037_2462119.1164721562033
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Lucene will automatically separate tokens during index and search if you use
the right analyzer. See the various classes that implement Analyzer. I don't
know if you really wanted to use the numeric literals, but I wouldn't. The
analyzers that do the most for you (automatically break up on spaces,
lowercase, etc) often ignore numbers. Just in case you were thinking about
doing it that way....

I would NOT store the inverse and then use NOT. the NOT operator doesn't
behave as you expect, it's not a strict boolean operator. See the thread
titled *Another problem with the QueryParser *in this list. And anything
else Chris or Yonik or ...  has to say on the subject. This is a source of
considerable confusion. For instance, you can't query on just the phrase
"NOT no_music". Not to mention what happens if/when a user can actually NOT
in the query.

In general, I *strongly* recommend doing it the simple, intuitive way first.
Only get fancy if you actually have something to gain. Here, you're talking
about some storage savings. Maybe (have you checked how big your index will
be? Will this approach be enough to matter? How do you know?). You're
creating code that will confuse not only yourself but whoever has to get
into this code later.

By rushing in and doing an optimization (which you neither  *know* nor can
reasonably expect to gain you anything measurable since you don't know the
internals of Lucene well enough to predict. Neither do I BTW...) you're
creating complexity which you don't know is necessary. I'd only go there if
doing it the straight-forward way shows performance issues. I'd also bet
that any performance issues you see are not related to this issue......

Best
Erick

On 11/28/06, Biggy <biggy97@web.de> wrote:
>
>
>
> OK here what i've come up with - After reading your suggestions
> - bit set from DB stays untouched
> - only one field shall be used to store interest field bits in the
> document:
> "interest". Saves disk space.
> - The bits shall be not be converted to readable string but added as
> values
> separated by space " "
> ====Code Below====
> -----------------
> public Document getDocument(int db_interest_bits)
> {
>    String interest_string ="";
>    // sport
>    if (db_interest_bits & 1) {
>        interest_string +="1"+" "; // empty space as delimiter
>    }
>    // music
>    if (bitsfromdb & 2) {
>        interest_string +="2"+" "; // empty space as delimiter
>    }
>
>    Document doc = new Document();
>    doc.add("interest", interest_string);
>    // how do i tell Lucene to separate tokens on search ?
>
>    return doc;
> }
> ---------------
>
> FURTHERMORE - i realized that almost all potential values are often set
> i.e.
> sport music film
> sport music
> sport music film
> sport music film
> sport music
> music
>
> So i was thinking : How about doing the reverse when it comes to building
> the index ?
> I would onyl store the fields that are not set.
> The search would be a negation.
>
> Example Values ofd interest:
> 1. "no_film" => Only a film is not set
> 2. "no_sport no_film" => film and sport are not set
> 3. "" => all values are set since this is a negation
>
>
> It follows, searching for people interested in music:
> => search for NOT no_music
>
> QUESTION
> How does the perfomance of a negative search NOT compare to a normal one
> I.E.
> "NOT no_music" vs "music" search under the premise that most interest
> flags
> are set ?
>
>
>
> ---------
>
> Daniel Noll-3 wrote:
> >
> > Erick Erickson wrote:
> >> Well, you really have the code already <G>. From the top...
> >>
> >> 1> there's no good way to support searching bitfields If you wanted,
> you
> >> could probably store it as a small integer and then search on it, but
> >> that's
> >> waaay too complicated than you want.
> >>
> >> 2> Add the fields like you have the snippet from, something like
> >> Document doc = new Document.
> >> if (bitsfromdb & 1) {
> >>    doc.add("sport", "y");
> >> }
> >> if (bitsfromdb & 2) {
> >>    doc.add("music", "y");
> >> }
> >
> > Beware that if there are a large number of bits, this is going to impact
> > memory usage due to there being more fields.
> >
> > Perhaps a better way would be to use a single "bits" field and store the
> > words "sport", "music", ... in that field.
> >
> > Daniel
> >
> >
> > --
> > Daniel Noll
> >
> > Nuix Pty Ltd
> > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> > Web: http://nuix.com/                               Fax: +61 2 9212 6902
> >
> > This message is intended only for the named recipient. If you are not
> > the intended recipient you are notified that disclosing, copying,
> > distributing or taking any action in reliance on the contents of this
> > message or attachment is strictly prohibited.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Searching-by-bit-masks-tf2603918.html#a7576286
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3037_2462119.1164721562033--

From java-user-return-24745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 16:02:02 2006
Return-Path: <java-user-return-24745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14049 invoked from network); 28 Nov 2006 16:02:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 16:02:01 -0000
Received: (qmail 663 invoked by uid 500); 28 Nov 2006 16:02:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 629 invoked by uid 500); 28 Nov 2006 16:02:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 618 invoked by uid 99); 28 Nov 2006 16:02:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 08:02:02 -0800
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SOMETHING_FOR_ADULTS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 08:01:49 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Gp5Og-0002N2-Hm
	for java-user@lucene.apache.org; Tue, 28 Nov 2006 08:01:26 -0800
Message-ID: <7581771.post@talk.nabble.com>
Date: Tue, 28 Nov 2006 08:01:26 -0800 (PST)
From: Biggy <biggy97@web.de>
To: java-user@lucene.apache.org
Subject: Re: Searching by bit masks
In-Reply-To: <359a92830611280546s32b87768t33ffc2a197098046@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: biggy97@web.de
References: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net> <7564237.post@talk.nabble.com> <359a92830611271200v60daddddyb6a53d4e4a5b0602@mail.gmail.com> <456B6331.1050005@nuix.com> <7576286.post@talk.nabble.com> <359a92830611280546s32b87768t33ffc2a197098046@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


The background of this is also separating content according to domains

Example: 
- pictureA (marked as a "joke" #flag :1)
- pictureB (marked as a "adult picture" #flag: 2)
Site1: Users allowed to view everything (pictureA, pictureB )
Site2: Users allowed to view everything except pictureB (no adult content)

This szenario, for instance means a query from each site via sql could be
Site1: ... status & 3 ; // all pictures (joke,adult)
Site2:...  not (status & 1) ; // no adult stuff

PROBLEMS
Because the business rules are a negation - everything except this and that.
We have a problem
adding new content types. Adding a new picture type means changing the whole
picture flags with the new status. 

So backward compatibility is not possible.

That's why i thought with Lucene, i could search using "NOT"
That is: Give me all non-adult pictures in case of Site2

Any suggestions to overcome this flag problem, without changing the DB
status and re-indexing everything on new picture types.

thanks for good advice thus far



Erick Erickson wrote:
> 
> Lucene will automatically separate tokens during index and search if you
> use
> the right analyzer. See the various classes that implement Analyzer. I
> don't
> know if you really wanted to use the numeric literals, but I wouldn't. The
> analyzers that do the most for you (automatically break up on spaces,
> lowercase, etc) often ignore numbers. Just in case you were thinking about
> doing it that way....
> 
> I would NOT store the inverse and then use NOT. the NOT operator doesn't
> behave as you expect, it's not a strict boolean operator. See the thread
> titled *Another problem with the QueryParser *in this list. And anything
> else Chris or Yonik or ...  has to say on the subject. This is a source of
> considerable confusion. For instance, you can't query on just the phrase
> "NOT no_music". Not to mention what happens if/when a user can actually
> NOT
> in the query.
> 
> In general, I *strongly* recommend doing it the simple, intuitive way
> first.
> Only get fancy if you actually have something to gain. Here, you're
> talking
> about some storage savings. Maybe (have you checked how big your index
> will
> be? Will this approach be enough to matter? How do you know?). You're
> creating code that will confuse not only yourself but whoever has to get
> into this code later.
> 
> By rushing in and doing an optimization (which you neither  *know* nor can
> reasonably expect to gain you anything measurable since you don't know the
> internals of Lucene well enough to predict. Neither do I BTW...) you're
> creating complexity which you don't know is necessary. I'd only go there
> if
> doing it the straight-forward way shows performance issues. I'd also bet
> that any performance issues you see are not related to this issue......
> 
> Best
> Erick
> 
> On 11/28/06, Biggy <biggy97@web.de> wrote:
>>
>>
>>
>> OK here what i've come up with - After reading your suggestions
>> - bit set from DB stays untouched
>> - only one field shall be used to store interest field bits in the
>> document:
>> "interest". Saves disk space.
>> - The bits shall be not be converted to readable string but added as
>> values
>> separated by space " "
>> ====Code Below====
>> -----------------
>> public Document getDocument(int db_interest_bits)
>> {
>>    String interest_string ="";
>>    // sport
>>    if (db_interest_bits & 1) {
>>        interest_string +="1"+" "; // empty space as delimiter
>>    }
>>    // music
>>    if (bitsfromdb & 2) {
>>        interest_string +="2"+" "; // empty space as delimiter
>>    }
>>
>>    Document doc = new Document();
>>    doc.add("interest", interest_string);
>>    // how do i tell Lucene to separate tokens on search ?
>>
>>    return doc;
>> }
>> ---------------
>>
>> FURTHERMORE - i realized that almost all potential values are often set
>> i.e.
>> sport music film
>> sport music
>> sport music film
>> sport music film
>> sport music
>> music
>>
>> So i was thinking : How about doing the reverse when it comes to building
>> the index ?
>> I would onyl store the fields that are not set.
>> The search would be a negation.
>>
>> Example Values ofd interest:
>> 1. "no_film" => Only a film is not set
>> 2. "no_sport no_film" => film and sport are not set
>> 3. "" => all values are set since this is a negation
>>
>>
>> It follows, searching for people interested in music:
>> => search for NOT no_music
>>
>> QUESTION
>> How does the perfomance of a negative search NOT compare to a normal one
>> I.E.
>> "NOT no_music" vs "music" search under the premise that most interest
>> flags
>> are set ?
>>
>>
>>
>> ---------
>>
>> Daniel Noll-3 wrote:
>> >
>> > Erick Erickson wrote:
>> >> Well, you really have the code already <G>. From the top...
>> >>
>> >> 1> there's no good way to support searching bitfields If you wanted,
>> you
>> >> could probably store it as a small integer and then search on it, but
>> >> that's
>> >> waaay too complicated than you want.
>> >>
>> >> 2> Add the fields like you have the snippet from, something like
>> >> Document doc = new Document.
>> >> if (bitsfromdb & 1) {
>> >>    doc.add("sport", "y");
>> >> }
>> >> if (bitsfromdb & 2) {
>> >>    doc.add("music", "y");
>> >> }
>> >
>> > Beware that if there are a large number of bits, this is going to
>> impact
>> > memory usage due to there being more fields.
>> >
>> > Perhaps a better way would be to use a single "bits" field and store
>> the
>> > words "sport", "music", ... in that field.
>> >
>> > Daniel
>> >
>> >
>> > --
>> > Daniel Noll
>> >
>> > Nuix Pty Ltd
>> > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280
>> 0699
>> > Web: http://nuix.com/                               Fax: +61 2 9212
>> 6902
>> >
>> > This message is intended only for the named recipient. If you are not
>> > the intended recipient you are notified that disclosing, copying,
>> > distributing or taking any action in reliance on the contents of this
>> > message or attachment is strictly prohibited.
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Searching-by-bit-masks-tf2603918.html#a7576286
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Searching-by-bit-masks-tf2603918.html#a7581771
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 16:33:33 2006
Return-Path: <java-user-return-24746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28202 invoked from network); 28 Nov 2006 16:33:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 16:33:31 -0000
Received: (qmail 98137 invoked by uid 500); 28 Nov 2006 16:33:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98090 invoked by uid 500); 28 Nov 2006 16:33:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98079 invoked by uid 99); 28 Nov 2006 16:33:32 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 08:33:32 -0800
X-ASF-Spam-Status: No, hits=3.1 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SOMETHING_FOR_ADULTS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 08:33:20 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1586110ugc
        for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 08:32:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Xt0JG6QNjLmDLKwimYiD+UT+G8qxYzJDGestqck0tUFExfi7pfoc7wc+z03FBX4L6XfECI789LxuQoeOqc0Tx8Jo/FP0t5wpvJ2I3c143pIT9tgQvDeMjkGKIPRChjSl+lfItK9mrPzl5eZNjveDMO9ydQ4t8a3/F3SJAVyIhU8=
Received: by 10.82.126.5 with SMTP id y5mr203445buc.1164731577189;
        Tue, 28 Nov 2006 08:32:57 -0800 (PST)
Received: by 10.82.162.20 with HTTP; Tue, 28 Nov 2006 08:32:56 -0800 (PST)
Message-ID: <359a92830611280832t74e7fe63j7989ae76852d831@mail.gmail.com>
Date: Tue, 28 Nov 2006 11:32:56 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching by bit masks
In-Reply-To: <7581771.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6488_25207309.1164731576819"
References: <5780D033175834459D174EF240286AF601C84E31@EXVBE012-3.exch012.intermedia.net>
	 <7564237.post@talk.nabble.com>
	 <359a92830611271200v60daddddyb6a53d4e4a5b0602@mail.gmail.com>
	 <456B6331.1050005@nuix.com> <7576286.post@talk.nabble.com>
	 <359a92830611280546s32b87768t33ffc2a197098046@mail.gmail.com>
	 <7581771.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6488_25207309.1164731576819
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could store a value for each flag then be careful about what analyzers
you use. For instance, using WhitespaceAnalyzer (index AND search) and doing
your own casing. That is, make sure you lowercase as necessary (NOTE:
operators AND, OR NOT must not be lowercased if you send them through
queryparser) when you index and when you query.

Doc field for these is "flag"
Doc 1 has tokens indexed "joke=y", "adult=n" (input stream is "joke=y
adult=n")
Doc 2 has tokens indexed "joke=y", "adult=y"

Now your query for site 1 looks like "joke=y" AND "adult=y" (looking at flag
field)
and site 2 is "joke=y" AND "adult=n" (ditto)

Non jokes would just be "joke=n"

etc.....

Note especially that if you used, say, StandardAnalyzer, you'd get tokens
"joke", "y", "n", "adult" in your flag field for doc1 and "joke", "y",
"adult" for doc 2, which is not what you want at all.

This will certainly increase your size a bit. Do you have any idea how big
your indexes are going to be? If storing each field makes the index grow
from, say, 500M to 550M, you won't care. If you're storing a bazillion
documents and it'll bloat your index from 10G to 20G, you probably do. One
pertinent question is "how many fields do you expect to store per
document?"...

Best
Erick

On 11/28/06, Biggy <biggy97@web.de> wrote:
>
>
> The background of this is also separating content according to domains
>
> Example:
> - pictureA (marked as a "joke" #flag :1)
> - pictureB (marked as a "adult picture" #flag: 2)
> Site1: Users allowed to view everything (pictureA, pictureB )
> Site2: Users allowed to view everything except pictureB (no adult content)
>
> This szenario, for instance means a query from each site via sql could be
> Site1: ... status & 3 ; // all pictures (joke,adult)
> Site2:...  not (status & 1) ; // no adult stuff
>
> PROBLEMS
> Because the business rules are a negation - everything except this and
> that.
> We have a problem
> adding new content types. Adding a new picture type means changing the
> whole
> picture flags with the new status.
>
> So backward compatibility is not possible.
>
> That's why i thought with Lucene, i could search using "NOT"
> That is: Give me all non-adult pictures in case of Site2
>
> Any suggestions to overcome this flag problem, without changing the DB
> status and re-indexing everything on new picture types.
>
> thanks for good advice thus far
>
>
>
> Erick Erickson wrote:
> >
> > Lucene will automatically separate tokens during index and search if you
> > use
> > the right analyzer. See the various classes that implement Analyzer. I
> > don't
> > know if you really wanted to use the numeric literals, but I wouldn't.
> The
> > analyzers that do the most for you (automatically break up on spaces,
> > lowercase, etc) often ignore numbers. Just in case you were thinking
> about
> > doing it that way....
> >
> > I would NOT store the inverse and then use NOT. the NOT operator doesn't
> > behave as you expect, it's not a strict boolean operator. See the thread
> > titled *Another problem with the QueryParser *in this list. And anything
> > else Chris or Yonik or ...  has to say on the subject. This is a source
> of
> > considerable confusion. For instance, you can't query on just the phrase
> > "NOT no_music". Not to mention what happens if/when a user can actually
> > NOT
> > in the query.
> >
> > In general, I *strongly* recommend doing it the simple, intuitive way
> > first.
> > Only get fancy if you actually have something to gain. Here, you're
> > talking
> > about some storage savings. Maybe (have you checked how big your index
> > will
> > be? Will this approach be enough to matter? How do you know?). You're
> > creating code that will confuse not only yourself but whoever has to get
> > into this code later.
> >
> > By rushing in and doing an optimization (which you neither  *know* nor
> can
> > reasonably expect to gain you anything measurable since you don't know
> the
> > internals of Lucene well enough to predict. Neither do I BTW...) you're
> > creating complexity which you don't know is necessary. I'd only go there
> > if
> > doing it the straight-forward way shows performance issues. I'd also bet
> > that any performance issues you see are not related to this issue......
> >
> > Best
> > Erick
> >
> > On 11/28/06, Biggy <biggy97@web.de> wrote:
> >>
> >>
> >>
> >> OK here what i've come up with - After reading your suggestions
> >> - bit set from DB stays untouched
> >> - only one field shall be used to store interest field bits in the
> >> document:
> >> "interest". Saves disk space.
> >> - The bits shall be not be converted to readable string but added as
> >> values
> >> separated by space " "
> >> ====Code Below====
> >> -----------------
> >> public Document getDocument(int db_interest_bits)
> >> {
> >>    String interest_string ="";
> >>    // sport
> >>    if (db_interest_bits & 1) {
> >>        interest_string +="1"+" "; // empty space as delimiter
> >>    }
> >>    // music
> >>    if (bitsfromdb & 2) {
> >>        interest_string +="2"+" "; // empty space as delimiter
> >>    }
> >>
> >>    Document doc = new Document();
> >>    doc.add("interest", interest_string);
> >>    // how do i tell Lucene to separate tokens on search ?
> >>
> >>    return doc;
> >> }
> >> ---------------
> >>
> >> FURTHERMORE - i realized that almost all potential values are often set
> >> i.e.
> >> sport music film
> >> sport music
> >> sport music film
> >> sport music film
> >> sport music
> >> music
> >>
> >> So i was thinking : How about doing the reverse when it comes to
> building
> >> the index ?
> >> I would onyl store the fields that are not set.
> >> The search would be a negation.
> >>
> >> Example Values ofd interest:
> >> 1. "no_film" => Only a film is not set
> >> 2. "no_sport no_film" => film and sport are not set
> >> 3. "" => all values are set since this is a negation
> >>
> >>
> >> It follows, searching for people interested in music:
> >> => search for NOT no_music
> >>
> >> QUESTION
> >> How does the perfomance of a negative search NOT compare to a normal
> one
> >> I.E.
> >> "NOT no_music" vs "music" search under the premise that most interest
> >> flags
> >> are set ?
> >>
> >>
> >>
> >> ---------
> >>
> >> Daniel Noll-3 wrote:
> >> >
> >> > Erick Erickson wrote:
> >> >> Well, you really have the code already <G>. From the top...
> >> >>
> >> >> 1> there's no good way to support searching bitfields If you wanted,
> >> you
> >> >> could probably store it as a small integer and then search on it,
> but
> >> >> that's
> >> >> waaay too complicated than you want.
> >> >>
> >> >> 2> Add the fields like you have the snippet from, something like
> >> >> Document doc = new Document.
> >> >> if (bitsfromdb & 1) {
> >> >>    doc.add("sport", "y");
> >> >> }
> >> >> if (bitsfromdb & 2) {
> >> >>    doc.add("music", "y");
> >> >> }
> >> >
> >> > Beware that if there are a large number of bits, this is going to
> >> impact
> >> > memory usage due to there being more fields.
> >> >
> >> > Perhaps a better way would be to use a single "bits" field and store
> >> the
> >> > words "sport", "music", ... in that field.
> >> >
> >> > Daniel
> >> >
> >> >
> >> > --
> >> > Daniel Noll
> >> >
> >> > Nuix Pty Ltd
> >> > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280
> >> 0699
> >> > Web: http://nuix.com/                               Fax: +61 2 9212
> >> 6902
> >> >
> >> > This message is intended only for the named recipient. If you are not
> >> > the intended recipient you are notified that disclosing, copying,
> >> > distributing or taking any action in reliance on the contents of this
> >> > message or attachment is strictly prohibited.
> >> >
> >> > ---------------------------------------------------------------------
> >> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> >
> >>
> >> --
> >> View this message in context:
> >> http://www.nabble.com/Searching-by-bit-masks-tf2603918.html#a7576286
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Searching-by-bit-masks-tf2603918.html#a7581771
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6488_25207309.1164731576819--

From java-user-return-24747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 16:45:18 2006
Return-Path: <java-user-return-24747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33588 invoked from network); 28 Nov 2006 16:45:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 16:45:17 -0000
Received: (qmail 53839 invoked by uid 500); 28 Nov 2006 16:44:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53790 invoked by uid 500); 28 Nov 2006 16:44:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53747 invoked by uid 99); 28 Nov 2006 16:44:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 08:44:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 08:44:21 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id kASGhbTf034537
	for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 17:43:38 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Querying performance decrease in 1.9.1 and 2.0.0
Date: Tue, 28 Nov 2006 17:43:37 +0100
User-Agent: KMail/1.8.2
References: <45632010.1070407@sirma.bg> <45640FB7.90209@sirma.bg> <456C19BA.5000901@sirma.bg>
In-Reply-To: <456C19BA.5000901@sirma.bg>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611281743.37546.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 28 November 2006 12:12, Stanislav Jordanov wrote:
> Paul,
> we are using a slightly modified version of Lucene,
> so in order to run the performance tests on a nightly build, I need 
> Lucene's sources, not the compiled classes.
> Is there a nice and easy way to get them?

The sources are also in the nightly build .tgz iirc.
In case you can compile your modifications into a separate
jar, the easiest way is to put that jar on the class path before
the lucene jar, and then you don't need the sources.
That compilation could also use the latest lucene jar, btw.

However, in case you want try this patch:
http://issues.apache.org/jira/browse/LUCENE-730
it just as much work to checkout the source code from the svn trunk.
The checkout command is here:
http://lucene.apache.org/java/docs/releases.html
You'll also need ant then.

I think it is time to continue to java-dev.

Regards,
Paul Elschot

> 
> Stanislav
> 
> 
> Stanislav Jordanov wrote:
> > Paul,
> > We are working on delivering the next release by the end of the week 
> > so I have to take care of 2 or 3 issues before I try the nightly build.
> > I promise to try it and report the results here.
> >
> > Best,
> > Stanislav
> >
> > Paul Elschot wrote:
> >> Stanislav,
> >>
> >> Could you also try a nightly build to test the later performance 
> >> improvement
> >> on BooleanScorer2?  The nightly builds are here:
> >> http://people.apache.org/builds/lucene/java/nightly/
> >> The jar is called lucene-core-nightly.jar in the .tar.gz build.
> >>
> >> It's not likely that this is faster than the 1.4 BooleanScorer, but 
> >> one never knows.
> >>
> >> Regards,
> >> Paul Elschot
> >>
> >>
> >> On Tuesday 21 November 2006 17:59, Yonik Seeley wrote:
> >>  
> >>> On 11/21/06, Stanislav Jordanov <stenly@sirma.bg> wrote:
> >>>    
> >>>> Switch to the old scorer (via BooleanQuery.setUseScorer14(true) )
> >>>> solved the performance issue - now Lucene 1.9.1 & 2.0.0 perform on the
> >>>> same load test just as 1.4.3 does
> >>>>
> >>>> Thanks a lot Yonik!
> >>>>
> >>>> Any chance there exists a non-professional explanation what's the
> >>>> difference between old and new boolean scorers?
> >>>>       
> >>> The original BooleanScorer was a bucket-based scorer that could
> >>> deliver docs out of order and thus restricted how it could be used.
> >>> It also had a limitation of 32 required or prohibited clauses (because
> >>> of an int bitmask).
> >>>
> >>> BooleanScorer2 removes these limitations, and uses skipTo() where
> >>> applicable on sub-scorers.
> >>>
> >>> -Yonik
> >>> http://incubator.apache.org/solr Solr, the open-source Lucene search 
> >>> server
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>     
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>   
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 17:34:56 2006
Return-Path: <java-user-return-24748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53591 invoked from network); 28 Nov 2006 17:34:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 17:34:56 -0000
Received: (qmail 5121 invoked by uid 500); 28 Nov 2006 17:34:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5083 invoked by uid 500); 28 Nov 2006 17:34:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5072 invoked by uid 99); 28 Nov 2006 17:34:57 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 09:34:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of suman.ghosh.1@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 09:34:44 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2314102nfc
        for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 09:34:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=W+eOGgw4ijzBlsHZ6TAmkHFA5u+wlQEWq+QepeEvd6jvt3bFoM4RqwfDmyaXpfHgokTd+2gD9Iem+3wIei+CyT27dqYAYAGAJb+u2aX9Q1JqThjdVzP/pCmHR5yaj4pz4iNT2/auFl/YLezU88LxCxfVM9rXWLH7h73XoJSXdGk=
Received: by 10.49.10.3 with SMTP id n3mr12794572nfi.1164735262285;
        Tue, 28 Nov 2006 09:34:22 -0800 (PST)
Received: by 10.49.17.8 with HTTP; Tue, 28 Nov 2006 09:34:22 -0800 (PST)
Message-ID: <a6c7e1410611280934t70b76b47gbd46a12ecc4ea70c@mail.gmail.com>
Date: Tue, 28 Nov 2006 12:34:22 -0500
From: "Suman Ghosh" <suman.ghosh.1@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new Term())
In-Reply-To: <456B5A7B.8040303@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20623_7438984.1164735262157"
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>
	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>
	 <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>
	 <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com>
	 <a6c7e1410611271059n124b952bye9fb024d3b6b2747@mail.gmail.com>
	 <456B5A7B.8040303@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20623_7438984.1164735262157
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Mike,

Below is the pseudo code of the application. A few implementation
points to understand the pseudo-code:

  - We have a home grown threadpool class that allows us to index
    multiple documents in parallel. We usually submit 200 jobs to the
    pool (2-3 worker threads usually for the pool). Once these jobs are
    finished, we submit the next set of jobs.
  - All metadata for a document comes from a Oracle database. We
    retrieve the metadata in form of an XML document.
  - The indexing routine is designed with incremental indexing in
    mind. We intend to perform full index build once and continue
    with incremental indexing from that point onwards (on the
    average 200-300 document modified/added each day).

Here is the pseudo-code. Please feel free to point out any implementation
issues that might cause the problem.

====================BEGIN===========================
Initialization:
  get database connection
  get threadpool instance

IndexBuilder:
  for (;;) {
      get next 200 documents (from database) to be indexed. Values
      returned are a key for the document and the metadata xml

      exit if no more document available

      // first remove the documents (to be updated) from the
      // index instead of deleting and inserting them one after
      // another
      get IndexReader instance
      for all these documents {
          use reader.deleteDocuments(new Term("KEY", document key))
      }
      finally close the IndexReader instance

      // Now add these documents to the index
      get IndexWriter instance and
          set MergeFactor = 10
          set MaxMergeDocs = 100000
          set MaxFieldLength = 500000

      for all these documents {
          add a job to the threadpool with indexwriter instance
            and document metadata
      }
      and wait till jobs are finished

      finally close the IndexWriter instance
  } //end for

  get indexwriter instance and
      optimize index
  finally close the IndexWriter instance

housekeeping:
    finally close threadpool and database connection

Threadpool job:

    read individual metadata from XML and  construct a Lucene
    Document object

    Determine if there is an associated file for the document (
    usually PDF/WORD/EXCEL/PPT). If so, extract text out of that
    document and put it in a field called FULLTEXT for specific
    searching.

    Use the indexwriter instance (supplied with the job) to add
    the document to the Lucene index

====================END===========================

Thanks,

Suman


On 11/27/06, Michael McCandless <lucene@mikemccandless.com> wrote:
> Suman Ghosh wrote:
>
> > On 11/27/06, Yonik Seeley <yonik@apache.org> wrote:
> >> On 11/27/06, Suman Ghosh <suman.ghosh.1@gmail.com> wrote:
> >> > Here are the values:
> >> >
> >> > mergeFactor=10
> >> > maxMergeDocs=100000
> >> > minMergeDocs=100
> >> >
> >> > And I see your point. At the time of the crash, I have over 5000
> >> > segments. I'll try some conservative number and try to rebuild the
> >> > index.
> >>
> >> Although I don't see how those settings can produce 5000 segments,
> >> I've developed a non-recursive patch you might want to try:
> >> https://issues.apache.org/jira/browse/LUCENE-729
>
> Suman, I'd really like to understand how you're getting so many
> segments in your index.  Is this (getting 5000 segments) easy to
> reproduce?  Are you closing / reopening your writer every so often (eg
> to delete documents or something)?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_20623_7438984.1164735262157--

From java-user-return-24749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 17:41:13 2006
Return-Path: <java-user-return-24749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56208 invoked from network); 28 Nov 2006 17:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 17:41:11 -0000
Received: (qmail 27173 invoked by uid 500); 28 Nov 2006 17:41:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27144 invoked by uid 500); 28 Nov 2006 17:41:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27133 invoked by uid 99); 28 Nov 2006 17:41:13 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 09:41:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 09:41:02 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2315620nfc
        for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 09:40:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=fmDOm8FwMm+tdMuRbfRmmh3ojJ1px2gcbJ0BBDvmQ8d/7gQCvgCzWJKQKdKSj/Cmk91QJW+iXvXR72w9vyuUBhSqgCr4vvnHVSuoWqEpC1uo65TEjTZON9I6UoN1jDYLw/0CYGa4AEpUIV5QfB41OzfzMgJIeMfaPBj9+gh0q10=
Received: by 10.82.129.8 with SMTP id b8mr215356bud.1164735640938;
        Tue, 28 Nov 2006 09:40:40 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Tue, 28 Nov 2006 09:40:35 -0800 (PST)
Message-ID: <c68e39170611280940g7b42a1bcyc52ef5062069e1a3@mail.gmail.com>
Date: Tue, 28 Nov 2006 12:40:35 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new Term())
In-Reply-To: <456B5A7B.8040303@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>
	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>
	 <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>
	 <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com>
	 <a6c7e1410611271059n124b952bye9fb024d3b6b2747@mail.gmail.com>
	 <456B5A7B.8040303@mikemccandless.com>
X-Google-Sender-Auth: f29bba33711ab9a0
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/27/06, Michael McCandless <lucene@mikemccandless.com> wrote:
> Suman Ghosh wrote:
>
> > On 11/27/06, Yonik Seeley <yonik@apache.org> wrote:
> >> On 11/27/06, Suman Ghosh <suman.ghosh.1@gmail.com> wrote:
> >> > Here are the values:
> >> >
> >> > mergeFactor=10
> >> > maxMergeDocs=100000
> >> > minMergeDocs=100
> >> >
> >> > And I see your point. At the time of the crash, I have over 5000
> >> > segments. I'll try some conservative number and try to rebuild the
> >> > index.
> >>
> >> Although I don't see how those settings can produce 5000 segments,
> >> I've developed a non-recursive patch you might want to try:
> >> https://issues.apache.org/jira/browse/LUCENE-729
>
> Suman, I'd really like to understand how you're getting so many
> segments in your index.  Is this (getting 5000 segments) easy to
> reproduce?  Are you closing / reopening your writer every so often (eg
> to delete documents or something)?

Actually, in previous versions of Lucene, it *was* possible to get way
too many first level segments because of the wonky logic when the
IndexWriter was closed.  That has been fixed in the trunk with the new
merge policy, and you will never see more than mergeFactor first level
segments.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 17:45:35 2006
Return-Path: <java-user-return-24750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57230 invoked from network); 28 Nov 2006 17:45:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 17:45:34 -0000
Received: (qmail 34881 invoked by uid 500); 28 Nov 2006 17:45:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34853 invoked by uid 500); 28 Nov 2006 17:45:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34842 invoked by uid 99); 28 Nov 2006 17:45:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 09:45:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of Laurence.Hirsch@rhul.ac.uk designates 134.219.200.45 as permitted sender)
Received: from [134.219.200.45] (HELO EXIMC1.rhul.ac.uk) (134.219.200.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 09:45:22 -0800
Subject: RE: Hits length with no sorting or scoring
Date: Tue, 28 Nov 2006 17:45:42 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Message-ID: <0A738FE79EB90047A7923673A8083FA6046AAFFB@exch15.rhul.ac.uk>
Content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
X-MS-TNEF-Correlator: 
Thread-Topic: Hits length with no sorting or scoring
Thread-Index: AccSVUu71u8xYcDDS4GGE4chie1n4gAv2YlA
From: "Hirsch Laurence" <Laurence.Hirsch@rhul.ac.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

The code works very well,

Thanks,

Laurie

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl]=20
Sent: 27 November 2006 18:52
To: java-user@lucene.apache.org
Subject: Re: Hits length with no sorting or scoring

On Monday 27 November 2006 14:30, Hirsch Laurence wrote:
> Hello,
>=20
> I have an application in which we only need to know the total number
of
> documents matching a query.  In this case we do not need any sorting
or
> scoring or to store any reference to the matching documents.  Can you
> tell me how to execute such a query with maximum performance?

A fairly quick way is to implement your own HitCollector to count,
and then use the appropriate methods of IndexSearcher.

If you really need maximum performance, this bit of code
avoids computing the score values and invoking the
HitCollector (untested):

// s is the IndexSearcher, query the Query
org.apache.lucene.search.Scorer scorer =3D
   query.weight(s).scorer(s.getIndexReader());
int count =3D 0;
while (scorer.next()) count++;

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 18:43:09 2006
Return-Path: <java-user-return-24751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78580 invoked from network); 28 Nov 2006 18:43:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:43:08 -0000
Received: (qmail 82301 invoked by uid 500); 28 Nov 2006 18:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82275 invoked by uid 500); 28 Nov 2006 18:43:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82257 invoked by uid 99); 28 Nov 2006 18:43:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:43:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:42:57 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by out1.messagingengine.com (Postfix) with ESMTP id 0AC7748C6C
	for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 13:42:38 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Tue, 28 Nov 2006 13:42:38 -0500
X-Sasl-enc: 0d6PgLmVZBE7Mm1Z43DcxNXXFh44jID6CSvnH5sirOZT 1164739357
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id D08B64D83
	for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 13:42:37 -0500 (EST)
Message-ID: <456C8317.2060203@mikemccandless.com>
Date: Tue, 28 Nov 2006 13:42:31 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new
 Term())
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>	 <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>	 <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com>	 <a6c7e1410611271059n124b952bye9fb024d3b6b2747@mail.gmail.com>	 <456B5A7B.8040303@mikemccandless.com> <c68e39170611280940g7b42a1bcyc52ef5062069e1a3@mail.gmail.com>
In-Reply-To: <c68e39170611280940g7b42a1bcyc52ef5062069e1a3@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik Seeley wrote:

> Actually, in previous versions of Lucene, it *was* possible to get way
> too many first level segments because of the wonky logic when the
> IndexWriter was closed.  That has been fixed in the trunk with the new
> merge policy, and you will never see more than mergeFactor first level
> segments.

Ahhh, OK.  Suman, it seems likely that this is what you are hitting.
Since you are planning on trying the nightly build of Lucene with the
fix for LUCENE-729 (now committed), can you watch & see if indeed
you no longer see 5000+ segments being created?  Would be nice to be
sure that this is in fact the cause of your 5000+ segments.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 18:47:48 2006
Return-Path: <java-user-return-24752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79719 invoked from network); 28 Nov 2006 18:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:47:46 -0000
Received: (qmail 91798 invoked by uid 500); 28 Nov 2006 18:47:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91623 invoked by uid 500); 28 Nov 2006 18:47:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91612 invoked by uid 99); 28 Nov 2006 18:47:48 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:47:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:47:35 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by out1.messagingengine.com (Postfix) with ESMTP id A22B648E11
	for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 13:47:15 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Tue, 28 Nov 2006 13:47:15 -0500
X-Sasl-enc: qcrHpzr1wodmSF5XorCN07TJMZ9rFtGpZAhi1nDRcY1t 1164739635
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 5D34ACE32
	for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 13:47:15 -0500 (EST)
Message-ID: <456C842D.1040709@mikemccandless.com>
Date: Tue, 28 Nov 2006 13:47:09 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new
 Term())
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>	 <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>	 <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com>	 <a6c7e1410611271059n124b952bye9fb024d3b6b2747@mail.gmail.com>	 <456B5A7B.8040303@mikemccandless.com> <a6c7e1410611280934t70b76b47gbd46a12ecc4ea70c@mail.gmail.com>
In-Reply-To: <a6c7e1410611280934t70b76b47gbd46a12ecc4ea70c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


This looks correct to me.  It's good you are doing the deletes
"in bulk" up front for each batch of documents.  So I guess you
hit the error (& 5000 segments files) while processing batches
of 200 docs (because you then optimize in the end)?

Do you search this index while it's building, or, only in the
end (after optimize)?

Mike

Suman Ghosh wrote:
> Mike,
> 
> Below is the pseudo code of the application. A few implementation
> points to understand the pseudo-code:
> 
>  - We have a home grown threadpool class that allows us to index
>    multiple documents in parallel. We usually submit 200 jobs to the
>    pool (2-3 worker threads usually for the pool). Once these jobs are
>    finished, we submit the next set of jobs.
>  - All metadata for a document comes from a Oracle database. We
>    retrieve the metadata in form of an XML document.
>  - The indexing routine is designed with incremental indexing in
>    mind. We intend to perform full index build once and continue
>    with incremental indexing from that point onwards (on the
>    average 200-300 document modified/added each day).
> 
> Here is the pseudo-code. Please feel free to point out any implementation
> issues that might cause the problem.
> 
> ====================BEGIN===========================
> Initialization:
>  get database connection
>  get threadpool instance
> 
> IndexBuilder:
>  for (;;) {
>      get next 200 documents (from database) to be indexed. Values
>      returned are a key for the document and the metadata xml
> 
>      exit if no more document available
> 
>      // first remove the documents (to be updated) from the
>      // index instead of deleting and inserting them one after
>      // another
>      get IndexReader instance
>      for all these documents {
>          use reader.deleteDocuments(new Term("KEY", document key))
>      }
>      finally close the IndexReader instance
> 
>      // Now add these documents to the index
>      get IndexWriter instance and
>          set MergeFactor = 10
>          set MaxMergeDocs = 100000
>          set MaxFieldLength = 500000
> 
>      for all these documents {
>          add a job to the threadpool with indexwriter instance
>            and document metadata
>      }
>      and wait till jobs are finished
> 
>      finally close the IndexWriter instance
>  } //end for
> 
>  get indexwriter instance and
>      optimize index
>  finally close the IndexWriter instance
> 
> housekeeping:
>    finally close threadpool and database connection
> 
> Threadpool job:
> 
>    read individual metadata from XML and  construct a Lucene
>    Document object
> 
>    Determine if there is an associated file for the document (
>    usually PDF/WORD/EXCEL/PPT). If so, extract text out of that
>    document and put it in a field called FULLTEXT for specific
>    searching.
> 
>    Use the indexwriter instance (supplied with the job) to add
>    the document to the Lucene index
> 
> ====================END===========================

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 18:57:48 2006
Return-Path: <java-user-return-24753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82374 invoked from network); 28 Nov 2006 18:57:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 18:57:46 -0000
Received: (qmail 9121 invoked by uid 500); 28 Nov 2006 18:57:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9087 invoked by uid 500); 28 Nov 2006 18:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9076 invoked by uid 99); 28 Nov 2006 18:57:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:57:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 10:57:36 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 15BCF5B77C; Tue, 28 Nov 2006 10:57:16 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 06C677F403
	for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 10:57:16 -0800 (PST)
Date: Tue, 28 Nov 2006 10:57:16 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Syns2Index utility: version of Lucene and Java
In-Reply-To: <25736CAEA4C6E24DB98D768458C898E00DF720@usahm208.amer.corp.eds.com>
Message-ID: <Pine.LNX.4.58.0611281051590.1939@hal.rescomp.berkeley.edu>
References: <25736CAEA4C6E24DB98D768458C898E00DF720@usahm208.amer.corp.eds.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


1) I don't really know anything about Syns2Index - but the errors you
cited don't seem to have anything to do with Lucene ...  your compiler
appears to be complaining about assert statements within the core java
system classes ... which is a little strainge.  you said you are psat the
HellowWorld stage ... have you tried compiling a HellowWorld app in this
current environment (ie: delete the lucene code youv'e got and put a
simple HelloWorld class in the same directory and compile it hte same
way) ???

2) the first link i saw when searching for Syns2Index to see what
it was is...
www.netlikon.de/docs/lucene-2.0.0/docs/api/org/apache/lucene/wordnet/Syns2Index.html

...which is how i discovered that Syns2Index is part of the wordnet
contrib and ships with Lucene ... so you shouldn't need to compile
anything ... just use the wordnet jar that comes with your lucene-2.0
distribution.


: Date: Sun, 26 Nov 2006 23:21:45 -0500
: From: "Risov, Maria" <maria.risov@eds.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Syns2Index utility: version of Lucene and Java
:
: I am trying to use Syns2Index utility to convert the WordNet into a Lucene index.  First I downloaded the latest JDK and Lucene 2.0, but soon realized that both were too new for compiling Syns2Index.java.  Next, got down to j2sdk1.4.2_13 and Lucene 1.4.3.  by deciphering error messages.  (I am running XP SP2)
:
: I have copied the java\org\apache\lucene directory in the same folder as the Syns2Index.java file.  I have a feeling that my classpath is most likely set right (or at least close), but I get a huge amount of identical compile errors.
:
: Command used:
:
: D:\InfringeDetector\JavaLucene>javac -classpath "D:\Project\JavaLucene;
: C:\j2sdk1.4.2_13" D:\Project\JavaLucene\org\apache\lucene\wordnet\Syns2
: Index.java
:
: Compile results (posting just a few from the bottom of my screen):
:
:         ^
: C:\j2sdk1.4.2_13\java\nio\DirectByteBuffer.java:843: cannot resolve symbol
: symbol  : method assert (boolean)
: location: class java.nio.DirectByteBuffer
:         assert (off <= lim);
:         ^
: C:\j2sdk1.4.2_13\java\nio\DirectByteBuffer.java:934: cannot resolve symbol
: symbol  : method assert (boolean)
: location: class java.nio.DirectByteBuffer
:         assert (off <= lim);
:         ^
: C:\j2sdk1.4.2_13\java\nio\Bits.java:642: cannot resolve symbol
: symbol  : method assert (boolean)
: location: class java.nio.Bits
:             assert (reservedMemory > -1);
:             ^
: C:\j2sdk1.4.2_13\java\lang\CharacterDataLatin1.java:284: cannot resolve symbol
: symbol  : method assert (boolean)
: location: class java.lang.CharacterDataLatin1
:             assert (data.length == (256 * 2));
:             ^
: C:\j2sdk1.4.2_13\java\lang\CharacterData.java:956: cannot resolve symbol
: symbol  : method assert (boolean)
: location: class java.lang.CharacterData
:             assert (data.length == (678 * 2));
:             ^
: C:\j2sdk1.4.2_13\java\nio\DirectByteBufferR.java:165: cannot resolve symbol
: symbol  : method assert (boolean)
: location: class java.nio.DirectByteBufferR
:         assert (pos <= lim);
:         ^
: C:\j2sdk1.4.2_13\java\nio\DirectByteBufferR.java:479: cannot resolve symbol
: symbol  : method assert (boolean)
: location: class java.nio.DirectByteBufferR
:         assert (off <= lim);
:         ^
: Note: Some input files use or override a deprecated API.
: Note: Recompile with -deprecation for details.
: 100 errors
: 206 warnings
:
: I have to admit that I am fairly new to Java, but past the HelloWorld setups.  I have been banging my head against the wall and Google for 10 hours.   Please help!!!
:
: -marie
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 20:52:41 2006
Return-Path: <java-user-return-24754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26529 invoked from network); 28 Nov 2006 20:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 20:52:40 -0000
Received: (qmail 81928 invoked by uid 500); 28 Nov 2006 20:52:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81885 invoked by uid 500); 28 Nov 2006 20:52:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81874 invoked by uid 99); 28 Nov 2006 20:52:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 12:52:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of suman.ghosh.1@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 12:52:29 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2360267nfc
        for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 12:52:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dFmGMfKRNKTdJMwlBN1ripMjRTU2Wq45KFlGKevxV8qd7vk+FvHsFnBJZkDtBlM9PNEX8FLvwO4bnLhSRQQ0uELiI9b8+D//J7XktoNJP+mnDCUGlWcOFkoHiYhls0HiJSOfzQROmqPBocdKC1Hv1mb98Yke69gTOQzLzxdwScQ=
Received: by 10.48.48.13 with SMTP id v13mr5185261nfv.1164747127092;
        Tue, 28 Nov 2006 12:52:07 -0800 (PST)
Received: by 10.49.17.8 with HTTP; Tue, 28 Nov 2006 12:52:06 -0800 (PST)
Message-ID: <a6c7e1410611281252n735eaa55x637b29ad2f2ed7ec@mail.gmail.com>
Date: Tue, 28 Nov 2006 15:52:06 -0500
From: "Suman Ghosh" <suman.ghosh.1@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new Term())
In-Reply-To: <456C842D.1040709@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26379_8858090.1164747126621"
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>
	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>
	 <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>
	 <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com>
	 <a6c7e1410611271059n124b952bye9fb024d3b6b2747@mail.gmail.com>
	 <456B5A7B.8040303@mikemccandless.com>
	 <a6c7e1410611280934t70b76b47gbd46a12ecc4ea70c@mail.gmail.com>
	 <456C842D.1040709@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26379_8858090.1164747126621
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The search functionality must be available during the index build. Since a
relatively small number of documents are being affected (and also we plan to
perform the build during a period of time we know to be relatively quiet
from last 2 years site access data) during the build process, we hope that
the build process will not cause any search issue.

If you have any advice as to a better approach for incremental build and
index optimization, I'll really appreciate if you could share it.

Thanks

Suman

On 11/28/06, Michael McCandless <lucene@mikemccandless.com> wrote:
>
>
> This looks correct to me.  It's good you are doing the deletes
> "in bulk" up front for each batch of documents.  So I guess you
> hit the error (& 5000 segments files) while processing batches
> of 200 docs (because you then optimize in the end)?
>
> Do you search this index while it's building, or, only in the
> end (after optimize)?
>
> Mike
>
> Suman Ghosh wrote:
> > Mike,
> >
> > Below is the pseudo code of the application. A few implementation
> > points to understand the pseudo-code:
> >
> >  - We have a home grown threadpool class that allows us to index
> >    multiple documents in parallel. We usually submit 200 jobs to the
> >    pool (2-3 worker threads usually for the pool). Once these jobs are
> >    finished, we submit the next set of jobs.
> >  - All metadata for a document comes from a Oracle database. We
> >    retrieve the metadata in form of an XML document.
> >  - The indexing routine is designed with incremental indexing in
> >    mind. We intend to perform full index build once and continue
> >    with incremental indexing from that point onwards (on the
> >    average 200-300 document modified/added each day).
> >
> > Here is the pseudo-code. Please feel free to point out any
> implementation
> > issues that might cause the problem.
> >
> > ====================BEGIN===========================
> > Initialization:
> >  get database connection
> >  get threadpool instance
> >
> > IndexBuilder:
> >  for (;;) {
> >      get next 200 documents (from database) to be indexed. Values
> >      returned are a key for the document and the metadata xml
> >
> >      exit if no more document available
> >
> >      // first remove the documents (to be updated) from the
> >      // index instead of deleting and inserting them one after
> >      // another
> >      get IndexReader instance
> >      for all these documents {
> >          use reader.deleteDocuments(new Term("KEY", document key))
> >      }
> >      finally close the IndexReader instance
> >
> >      // Now add these documents to the index
> >      get IndexWriter instance and
> >          set MergeFactor = 10
> >          set MaxMergeDocs = 100000
> >          set MaxFieldLength = 500000
> >
> >      for all these documents {
> >          add a job to the threadpool with indexwriter instance
> >            and document metadata
> >      }
> >      and wait till jobs are finished
> >
> >      finally close the IndexWriter instance
> >  } //end for
> >
> >  get indexwriter instance and
> >      optimize index
> >  finally close the IndexWriter instance
> >
> > housekeeping:
> >    finally close threadpool and database connection
> >
> > Threadpool job:
> >
> >    read individual metadata from XML and  construct a Lucene
> >    Document object
> >
> >    Determine if there is an associated file for the document (
> >    usually PDF/WORD/EXCEL/PPT). If so, extract text out of that
> >    document and put it in a field called FULLTEXT for specific
> >    searching.
> >
> >    Use the indexwriter instance (supplied with the job) to add
> >    the document to the Lucene index
> >
> > ====================END===========================
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26379_8858090.1164747126621--

From java-user-return-24755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 21:31:46 2006
Return-Path: <java-user-return-24755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38380 invoked from network); 28 Nov 2006 21:31:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 21:31:45 -0000
Received: (qmail 79147 invoked by uid 500); 28 Nov 2006 21:31:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78979 invoked by uid 500); 28 Nov 2006 21:31:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78968 invoked by uid 99); 28 Nov 2006 21:31:46 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 13:31:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [144.92.197.211] (HELO smtpauth.wiscmail.wisc.edu) (144.92.197.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 13:31:33 -0800
Received: from avs-daemon.smtpauth2.wiscmail.wisc.edu by
 smtpauth2.wiscmail.wisc.edu
 (Sun Java System Messaging Server 6.2-7.05 (built Sep  5 2006))
 id <0J9G00I0HMFY6L00@smtpauth2.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Tue, 28 Nov 2006 15:31:10 -0600 (CST)
Received: from Hathor ([144.92.136.11]) by smtpauth2.wiscmail.wisc.edu
 (Sun Java System Messaging Server 6.2-7.05 (built Sep  5 2006))
 with ESMTPSA id <0J9G0015RMFMEFL0@smtpauth2.wiscmail.wisc.edu> for
 java-user@lucene.apache.org; Tue, 28 Nov 2006 15:30:58 -0600 (CST)
Date: Tue, 28 Nov 2006 15:31:00 -0600
From: Michael Rusch <mcrusch@facstaff.wisc.edu>
Subject: multiple keyword fields vs. multiple-token field
To: Lucene Users <java-user@lucene.apache.org>
Message-id: <003401c71334$7ff3cde0$0d1aa8c0@gel.local>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Mailer: Microsoft Outlook, Build 10.0.6626
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Importance: Normal
X-Priority: 3 (Normal)
X-MSMail-priority: Normal
X-Spam-Report: AuthenticatedSender=yes, SenderIP=144.92.136.11
X-Spam-PmxInfo: Server=avs-5, Version=5.2.1.279297,
 Antispam-Engine: 2.5.0.283055, Antispam-Data: 2006.11.28.131432,
 SenderIP=144.92.136.11
X-Virus-Checked: Checked by ClamAV on apache.org

I have documents that can be referred to by multiple identifiers (and I want
to store the identifiers separate from the main indexed content).  I'm
wondering if I should put each identifier in it's own keyword field, or have
one tokenized field with all of the identifiers in it.  What I'm talking
about is something like this:

"Identifier" is a keyword field
Add field Identifier="ABCD"
Add field Identifier="WXYZ"

Or

Identifiers is a tokenized, indexed, unstored field
Add field Identifiers="ABCD WXYZ"

It would seem that either would work, but I was wondering if there was a
"standard" way or if anybody had thoughts on relative advantages or
disadvantages (or is it half of one/six dozen of the other and I should just
pick one and go with it).

Michael.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 21:40:18 2006
Return-Path: <java-user-return-24756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40581 invoked from network); 28 Nov 2006 21:40:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 21:40:18 -0000
Received: (qmail 5200 invoked by uid 500); 28 Nov 2006 21:40:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5171 invoked by uid 500); 28 Nov 2006 21:40:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5160 invoked by uid 99); 28 Nov 2006 21:40:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 13:40:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 13:40:07 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BA32F30EFC16; Tue, 28 Nov 2006 16:39:46 -0500 (EST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 7A43930EFC16
	for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 16:39:44 -0500 (EST)
In-Reply-To: <003401c71334$7ff3cde0$0d1aa8c0@gel.local>
References: <003401c71334$7ff3cde0$0d1aa8c0@gel.local>
Mime-Version: 1.0 (Apple Message framework v752.3)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <32455B17-0CDC-4B5A-ACFE-A7A70CC1ED5A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: multiple keyword fields vs. multiple-token field
Date: Tue, 28 Nov 2006 16:39:43 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Nov 28, 2006, at 4:31 PM, Michael Rusch wrote:

> I have documents that can be referred to by multiple identifiers  
> (and I want
> to store the identifiers separate from the main indexed content).  I'm
> wondering if I should put each identifier in it's own keyword  
> field, or have
> one tokenized field with all of the identifiers in it.  What I'm  
> talking
> about is something like this:
>
> "Identifier" is a keyword field
> Add field Identifier="ABCD"
> Add field Identifier="WXYZ"
>
> Or
>
> Identifiers is a tokenized, indexed, unstored field
> Add field Identifiers="ABCD WXYZ"
>
> It would seem that either would work, but I was wondering if there  
> was a
> "standard" way or if anybody had thoughts on relative advantages or
> disadvantages (or is it half of one/six dozen of the other and I  
> should just
> pick one and go with it).

There really is no difference in these approaches for identifiers.   
Different field instances have a positional gap feature, but that  
wouldn't be a consideration for TermQuery's on these identifiers.  I  
recommend the multiple keyword field approach, to avoid having to  
deal with analysis (in case identifiers have special characters, etc).
	
	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 22:12:06 2006
Return-Path: <java-user-return-24757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49926 invoked from network); 28 Nov 2006 22:12:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 22:12:05 -0000
Received: (qmail 64143 invoked by uid 500); 28 Nov 2006 22:12:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64119 invoked by uid 500); 28 Nov 2006 22:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64108 invoked by uid 99); 28 Nov 2006 22:12:07 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 14:12:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [217.160.213.79] (HELO p15137266.pureserver.info) (217.160.213.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 14:11:54 -0800
Received: (qmail 5218 invoked from network); 28 Nov 2006 23:11:31 +0100
Received: from unknown (HELO acer4529571627) (87.139.105.110)
  by emedea.de with SMTP; 28 Nov 2006 23:11:31 +0100
From: "Kai R. Emde" <emde@emedea.de>
To: <java-user@lucene.apache.org>
Subject: BUG ? - lucene multisearcher / sorting
Date: Tue, 28 Nov 2006 23:09:00 +0100
Message-ID: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAABfNx9wSmtUmMsEs+vysifsKAAAAQAAAAexJBIo48FU2vtTh87GKKKQEAAAAA@emedea.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
=20
we have one problem with the sort routine. We use the multisearcher =
function
over severall index.
The result will be sorted by the booknumber, but the produced list isn't
sorted correct. There are 300 hits from book a, then 150 from book b, 95
hits book 3, but then there are 1,2,3 hits of book a, 1 hit of book b.=20
Is there a general problem?=20
=20
Thank's for a reply,
=20
best regards=20

kai



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 28 22:42:03 2006
Return-Path: <java-user-return-24758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58133 invoked from network); 28 Nov 2006 22:42:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2006 22:42:03 -0000
Received: (qmail 18692 invoked by uid 500); 28 Nov 2006 22:42:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18658 invoked by uid 500); 28 Nov 2006 22:42:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18647 invoked by uid 99); 28 Nov 2006 22:42:05 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 14:42:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 28 Nov 2006 14:41:52 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by out1.messagingengine.com (Postfix) with ESMTP id B2188479A7
	for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 17:41:31 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Tue, 28 Nov 2006 17:41:31 -0500
X-Sasl-enc: ziGlH6tai4nnjWk9Z1pXgq54/QwOo3+/bGuk7b+IYWSn 1164753691
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 7C7BBD664
	for <java-user@lucene.apache.org>; Tue, 28 Nov 2006 17:41:31 -0500 (EST)
Message-ID: <456CBB14.9040504@mikemccandless.com>
Date: Tue, 28 Nov 2006 17:41:24 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StackOverflowError while calling IndexReader.deleteDocuments(new
 Term())
References: <a6c7e1410611270910m792e3cadqe09234abbb74c5a5@mail.gmail.com>	 <c68e39170611271017w74d2d6a0g5b08d5cda38ca40d@mail.gmail.com>	 <a6c7e1410611271043n13a0f0d7r80d69d62c4861f9a@mail.gmail.com>	 <c68e39170611271051j2909f9dh9fe0a1d287563378@mail.gmail.com>	 <a6c7e1410611271059n124b952bye9fb024d3b6b2747@mail.gmail.com>	 <456B5A7B.8040303@mikemccandless.com>	 <a6c7e1410611280934t70b76b47gbd46a12ecc4ea70c@mail.gmail.com>	 <456C842D.1040709@mikemccandless.com> <a6c7e1410611281252n735eaa55x637b29ad2f2ed7ec@mail.gmail.com>
In-Reply-To: <a6c7e1410611281252n735eaa55x637b29ad2f2ed7ec@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Suman Ghosh wrote:
> The search functionality must be available during the index build. Since a
> relatively small number of documents are being affected (and also we 
> plan to
> perform the build during a period of time we know to be relatively quiet
> from last 2 years site access data) during the build process, we hope that
> the build process will not cause any search issue.
> 
> If you have any advice as to a better approach for incremental build and
> index optimization, I'll really appreciate if you could share it.

OK a few more questions/notes :)

Is your index mounted on a local filesystem (and searchers are running
in the same JVM, or different JVM on the same machine)?  Or is index
in a remote filesystem like NFS?  If it's NFS you should look at this
issue:

   http://issues.apache.org/jira/browse/LUCENE-673

What's your policy on reopening the readers (so they see the latest
changes to the index)?  You should probably take care not to re-open
"at a bad time" (eg, after the deletes were done but before the new
docs were added) else that searcher will be missing those 200 docs
until it next re-opens...

Actually I'm still confused: at what point do you see an index with
5000 segments?  Is it your initial full build of the index?  In this
case, you are not doing any deletes, and, you are using a single
IndexWriter (with multiple threads), just calling "addDocument" many
times?

Oh I see: are you using that loop to build your initial index as well?

In which case, you re-open the writer every 200 docs.  One simple
thing you could do instead is: if this is the first full build of your
index, deletes should not be necessary, so you can skip the deletes
and use a single writer instance (ie, don't close/open it every 200
docs).  Likely this will work around the 5000+ segments issue and not
require you to try running with the trunk (still I'd like to know if
upgrading to trunk correctly fixes the 5000+ segments).

Since you don't have many docs changing per day, once you get your
full index built (and get through the 5000+ segments issue) I think
you won't hit that issue again since you optimize after adding a few
hundred docs.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 08:37:28 2006
Return-Path: <java-user-return-24759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33952 invoked from network); 29 Nov 2006 08:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 08:37:27 -0000
Received: (qmail 40578 invoked by uid 500); 29 Nov 2006 08:37:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40550 invoked by uid 500); 29 Nov 2006 08:37:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40537 invoked by uid 99); 29 Nov 2006 08:37:17 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 00:37:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of jprogramista@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 00:37:05 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1834387ugc
        for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 00:36:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=qN+zLMj2uDOhLXkYO2Tzr9XUZ3tvsiGsg7FgOwikVYCCuLGGgsGyBPV+OMETt07WXCV1kRP6FYK7/2qJQgUWqJMXrfVvnK1wGAW90sSRVt0TgNrNpbssgg8nt56yMyrdlNjLC1uTYuZpnAsA1/pgtWLbGw7UF11nmzagPa97CfI=
Received: by 10.78.185.16 with SMTP id i16mr1823336huf.1164789403100;
        Wed, 29 Nov 2006 00:36:43 -0800 (PST)
Received: by 10.78.148.13 with HTTP; Wed, 29 Nov 2006 00:36:43 -0800 (PST)
Message-ID: <af75a3a20611290036o5e275d0cna15cf65e0725c4d5@mail.gmail.com>
Date: Wed, 29 Nov 2006 09:36:43 +0100
From: "Java Programmer" <jprogramista@gmail.com>
To: java-user@lucene.apache.org
Subject: Writing and searching same time
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
I have trouble with writing and searching on lucene index same time,
all I did so far is making a class which has 2 methods:
private String indexLocation;
	
public void addDocument(int id,String title, String body) throws IOException{
		IndexWriter indexWriter = new IndexWriter(indexLocation, new
SimpleAnalyzer(), false);
		Document doc = new Document();
		doc.add(new Field("id",Integer.toString(id),Store.YES,Index.NO));
		doc.add(new Field("title",title,Store.NO,Index.TOKENIZED));
		doc.add(new Field("body",body,Store.NO,Index.TOKENIZED));
		indexWriter.addDocument(doc);
		indexWriter.close();
}
	
public List<Integer> search(String query) throws IOException, ParseException{
		IndexSearcher indexSearcher = new IndexSearcher(indexLocation);
		MultiFieldQueryParser queryparser = new MultiFieldQueryParser(new
String[]{"title","body"}, new SimpleAnalyzer());
		Query q = queryparser.parse(query);
		Hits hits = indexSearcher.search(q);
		Iterator it = hits.iterator();
		List<Integer> output = new ArrayList<Integer>();
		while(it.hasNext()){
			output.add(Integer.parseInt(((Hit)it.next()).getDocument().get("id")));
		}
		indexSearcher.close();
		return output;
}
What I don't like is that I have in each method opening IndexWriter
and IndexSearcher, I try to open them once and keep opened throught
whole lifecycle of application (which would be very long cause it
would be search for news working as webservice), but when I wasn't
close IndexWriter then IndexSearcher wasn't seen any new documents in
index. Next step was keeping IndexWriter open and reopen only
IndexSearcher but in this case also IndexSearcher was seen old index
without new documents. So my final version is this above, but could it
be better, without closing IndexWriter after each addition, and
opening IndexSearcher before each search query? What is the best
pattern of doing such systems?

Another question: do I need provide any synchronization on
indexWriter.addDocument(doc) method? I see that it isn't synchronized,
so maybe programmer need to do it himself?

Best regards,
Adr

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 09:04:36 2006
Return-Path: <java-user-return-24760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52832 invoked from network); 29 Nov 2006 09:04:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 09:04:36 -0000
Received: (qmail 80351 invoked by uid 500); 29 Nov 2006 09:04:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80324 invoked by uid 500); 29 Nov 2006 09:04:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80313 invoked by uid 99); 29 Nov 2006 09:04:37 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 01:04:37 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_RFC_POST,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [63.240.77.84] (HELO sccrmhc14.comcast.net) (63.240.77.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 01:04:24 -0800
Received: from ximpleware (c-24-6-90-145.hsd1.ca.comcast.net[24.6.90.145])
          by comcast.net (sccrmhc14) with SMTP
          id <20061129090402014006chn4e>; Wed, 29 Nov 2006 09:04:03 +0000
Message-ID: <017d01c71395$4b2a32a0$0d02a8c0@ximpleware>
From: "Jimmy Zhang" <crackeur@comcast.net>
To: <java-user@lucene.apache.org>
References: <af75a3a20611290036o5e275d0cna15cf65e0725c4d5@mail.gmail.com>
Subject: [ANN]VTD-XML 1.8
Date: Wed, 29 Nov 2006 01:03:49 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2962
X-Virus-Checked: Checked by ClamAV on apache.org

Version 1.8 of VTD-XML is now released. The new features are:

·        XMLModifier is a easy to use class that takes advantage of the
incremental update capability offered by VTD-XML

·        XPath built-in functions are now almost complete

·        This release added encoding support for iso-8859-2~10, windows code
page 1250~1258

·        Added various functions to autoPilot that evaluate XPath to string,
number and boolean

·        This release also fixes a number of XPath bugs related to string
handling

To download the latest release please visit http://vtd-xml.sf.net



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 10:18:37 2006
Return-Path: <java-user-return-24761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75357 invoked from network); 29 Nov 2006 10:18:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 10:18:36 -0000
Received: (qmail 32041 invoked by uid 500); 29 Nov 2006 10:18:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32015 invoked by uid 500); 29 Nov 2006 10:18:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32004 invoked by uid 99); 29 Nov 2006 10:18:38 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 02:18:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of simon.willnauer@googlemail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 02:18:26 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1858675ugc
        for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 02:17:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=P8BvssiFpcXzKFJ73OUgTdbfIad74ELvNsS32QUE+/z4Qu8jSdHJhGeRqwMpAMcO8fITwPazOM+MnjlF9g0LtR36/0b2/TGp9wB5kz4Z+y+H9tjS1wFExNaZM+b+2DoXWxpiAnLkWSXJ18ro06TAryDQboLJq8vYY2FAYj69YoM=
Received: by 10.67.91.6 with SMTP id t6mr3023245ugl.1164795457561;
        Wed, 29 Nov 2006 02:17:37 -0800 (PST)
Received: by 10.67.22.17 with HTTP; Wed, 29 Nov 2006 02:17:37 -0800 (PST)
Message-ID: <f18c9dde0611290217gf21fbe3j7a0a4a13f5d56f2f@mail.gmail.com>
Date: Wed, 29 Nov 2006 11:17:37 +0100
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Writing and searching same time
In-Reply-To: <af75a3a20611290036o5e275d0cna15cf65e0725c4d5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <af75a3a20611290036o5e275d0cna15cf65e0725c4d5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/29/06, Java Programmer <jprogramista@gmail.com> wrote:
> Hello,
> I have trouble with writing and searching on lucene index same time,
> all I did so far is making a class which has 2 methods:
> private String indexLocation;
>
> public void addDocument(int id,String title, String body) throws IOException{
>                 IndexWriter indexWriter = new IndexWriter(indexLocation, new
> SimpleAnalyzer(), false);
>                 Document doc = new Document();
>                 doc.add(new Field("id",Integer.toString(id),Store.YES,Index.NO));
>                 doc.add(new Field("title",title,Store.NO,Index.TOKENIZED));
>                 doc.add(new Field("body",body,Store.NO,Index.TOKENIZED));
>                 indexWriter.addDocument(doc);
>                 indexWriter.close();
> }
>
> public List<Integer> search(String query) throws IOException, ParseException{
>                 IndexSearcher indexSearcher = new IndexSearcher(indexLocation);
>                 MultiFieldQueryParser queryparser = new MultiFieldQueryParser(new
> String[]{"title","body"}, new SimpleAnalyzer());
>                 Query q = queryparser.parse(query);
>                 Hits hits = indexSearcher.search(q);
>                 Iterator it = hits.iterator();
>                 List<Integer> output = new ArrayList<Integer>();
>                 while(it.hasNext()){
>                         output.add(Integer.parseInt(((Hit)it.next()).getDocument().get("id")));
>                 }
>                 indexSearcher.close();
>                 return output;
> }
> What I don't like is that I have in each method opening IndexWriter
> and IndexSearcher, I try to open them once and keep opened throught
> whole lifecycle of application (which would be very long cause it
> would be search for news working as webservice), but when I wasn't
> close IndexWriter then IndexSearcher wasn't seen any new documents in
> index. Next step was keeping IndexWriter open and reopen only
> IndexSearcher but in this case also IndexSearcher was seen old index
> without new documents. So my final version is this above, but could it
> be better, without closing IndexWriter after each addition, and
> opening IndexSearcher before each search query? What is the best
> pattern of doing such systems?

Hi there, it's quiet a good Idea to keep IndexWriter/Reader(Searcher)
open as long as possible. A quiet nice patter is used by solr and
gdata-server. The indexwriter will be closed after a certain amount of
document have been added to the index or if an timeout exceeded
without any updates inserts. As soon as the writers close method is
called a new index searcher will be opened and released to the
application. If you work in a webapp e.g. in a multithreaded env. you
shout track the references of you searcher to close it if nobody uses
it anymore.
Keeping Searchers and Writers open will result in a much better
performance if it is considerable to have updates and insert invisible
to the searcher for a certain amount of time.

Have a look at this:
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/gdata-server/src/java/org/apache/lucene/gdata/search/index/GDataIndexer.java

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/gdata-server/src/java/org/apache/lucene/gdata/utils/ReferenceCounter.java
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/gdata-server/src/java/org/apache/lucene/gdata/search/index/IndexController.java
--> private ReferenceCounter<IndexSearcher>
getNewServiceSearcher(final Directory dir)



>
> Another question: do I need provide any synchronization on
> indexWriter.addDocument(doc) method? I see that it isn't synchronized,
> so maybe programmer need to do it himself?
>
> Best regards,
> Adr
You could queue the document to add to the index to keep your
indexwriter busy. Might be a good idea anyway.

best regards simon
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 10:48:31 2006
Return-Path: <java-user-return-24762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82000 invoked from network); 29 Nov 2006 10:48:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 10:48:30 -0000
Received: (qmail 75721 invoked by uid 500); 29 Nov 2006 10:48:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75149 invoked by uid 500); 29 Nov 2006 10:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75138 invoked by uid 99); 29 Nov 2006 10:48:31 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yogieric.dev@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 02:48:28 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1865541ugc
        for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 02:45:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=Tvemd/rXJ4O4w9V0Kw7+nhODEjYUK/iZ4N2LzA1wmjxiZOlWPcNKW4b3D+a6hJgNHaPJXTHuOUGJ2ApOmkSCqVXOluXgtihmroSflpdedo60OZcgbOSk2GgLZ1r0fA1J7IepbPrOngrnMgiY2LWErAId+npYiOnFVAAbNreYGlQ=
Received: by 10.78.134.12 with SMTP id h12mr2001410hud.1164797153382;
        Wed, 29 Nov 2006 02:45:53 -0800 (PST)
Received: from ?192.168.0.5? ( [68.167.206.190])
        by mx.google.com with ESMTP id y1sm865839hua.2006.11.29.02.45.51;
        Wed, 29 Nov 2006 02:45:52 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <0120754D-1694-4597-84ED-20ED712EEBDF@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Eric Brown <yogieric.dev@gmail.com>
Subject: How important is closing an IndexSearcher/IndexModifier on application exit?
Date: Wed, 29 Nov 2006 02:45:38 -0800
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm the only application accessing my index. Is there any chance the  
lucene index might remain in a locked state if I don't call close()  
my IndexSearcher or IndexModifier on applicaiton exit?

I'm several layers down in a webapp, so using Runtime.addShutdownHook 
() is unreliable if my webapp is undeployed by my container. And  
using finalizers for this seems unreliable. I don't have access to  
the ServletContext. I suppose I would write some kind of lifecycle  
thing.

Cheers,
Eric


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 10:50:14 2006
Return-Path: <java-user-return-24763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82449 invoked from network); 29 Nov 2006 10:50:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 10:50:13 -0000
Received: (qmail 78222 invoked by uid 500); 29 Nov 2006 10:50:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78194 invoked by uid 500); 29 Nov 2006 10:50:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78183 invoked by uid 99); 29 Nov 2006 10:50:15 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yogieric.dev@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 02:50:12 -0800
Received: by ug-out-1314.google.com with SMTP id k40so1866069ugc
        for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 02:48:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=N4tO7Caq9TJCDQ7q9ROYJQW/zsRlblWjn6e07VntIDaJ0nBtWumQzc8XniWQNczz1yHPO4D862uxQruo3/rN6JZSCAQ7VuBwYqFO0de3oigyqyoudDA1O7x7mz+IqWhpfXlN3hyjp7BFsYW2QV2T69rWzc2++nU/oLd9/RSQg2M=
Received: by 10.78.158.11 with SMTP id g11mr1992761hue.1164796867582;
        Wed, 29 Nov 2006 02:41:07 -0800 (PST)
Received: from ?192.168.0.5? ( [68.167.206.190])
        by mx.google.com with ESMTP id 32sm24362928hui.2006.11.29.02.41.05;
        Wed, 29 Nov 2006 02:41:06 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <4CF50745-6C6F-488F-A097-FED36978A5C6@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Eric Brown <yogieric.dev@gmail.com>
Subject: Cached Hits / closing IndexSearcher after add/delete w/IndexModifier
Date: Wed, 29 Nov 2006 02:40:38 -0800
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

I'm using lucene as a backend for my webservices that provide add,  
remove and search operations. When I add or remove documents via  
IndexModifier, I believe I'm supposed to close the IndexSearcher I  
use for query requests. However, I cache Hits and I believe the  
javadocs indicate closing an IndexSearcher will invalidate the cached  
Hits such that trying to retrieve a doc may throw an exception. So my  
solution is to wrap the IndexSearcher in another class with a  
finalizer that closes the IndexSearcher when all the Hits dereference  
it. My question is whether my cached hits have a solid reference to  
IndexSearcher such that I can rely on it being closed only after I  
expire the Hits from the cache?

Also, should I keep one IndexModifier open for the life of my service/ 
application or should I open and close it when I get new requests to  
add or remove documents? (I don't really have control over batching  
unfortunately -- though I've certainly pointed it out.)

Thanks,
Eric


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 17:33:40 2006
Return-Path: <java-user-return-24764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47900 invoked from network); 29 Nov 2006 17:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 17:33:38 -0000
Received: (qmail 56607 invoked by uid 500); 29 Nov 2006 17:33:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56573 invoked by uid 500); 29 Nov 2006 17:33:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56562 invoked by uid 99); 29 Nov 2006 17:33:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 09:33:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [199.228.142.115] (HELO plmler8.mail.eds.com) (199.228.142.115)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 09:33:25 -0800
Received: from plmlir5.mail.eds.com (plmlir5-2.mail.eds.com [199.228.142.135])
	by plmler8.mail.eds.com (8.13.8/8.12.10) with ESMTP id kATHX3Cx003566
	for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 11:33:04 -0600
Received: from plmlir5.mail.eds.com (localhost [127.0.0.1])
	by plmlir5.mail.eds.com (8.13.8/8.12.10) with ESMTP id kATHWadI005896
	for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 11:32:36 -0600
Received: from usplm016.amer.corp.eds.com ([148.94.166.9])
	by plmlir5.mail.eds.com (8.13.8/8.12.10) with ESMTP id kATHWZMt005783
	for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 11:32:36 -0600
Received: from usahm208.amer.corp.eds.com ([130.175.198.40]) by usplm016.amer.corp.eds.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 29 Nov 2006 11:32:36 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Syns2Index utility: version of Lucene and Java
Date: Wed, 29 Nov 2006 12:32:34 -0500
Message-ID: <25736CAEA4C6E24DB98D768458C898E0367C92@usahm208.amer.corp.eds.com>
In-reply-to: <Pine.LNX.4.58.0611281051590.1939@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Syns2Index utility: version of Lucene and Java
Thread-Index: AccTH2FilLjWRg6WRc2F5ZkNA7fWTwAupyCg
From: "Risov, Maria" <maria.risov@eds.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Nov 2006 17:32:36.0256 (UTC) FILETIME=[5C1E2200:01C713DC]
X-Virus-Checked: Checked by ClamAV on apache.org

Chris,
Thanks so much both for the pointer and the sanity check!

Oddly enough, I read the same Syns2Index piece of documentation as you
suggested very early in the search process.  What I did get wrong was
the actual download package, not realizing that *.java and *.class files
would not be packaged together.  (Typical newbie problem!).  By that
time, I already had the Syns2Index.java file, but downloaded from a
different site (http://www.tropo.com/techno/java/lucene/wordnet.html )
and did not catch that they were not of the same version.  So this time,
I found the Syns2Index.class that came with the latest Lucene package
(http://www.apache.org/dyn/closer.cgi/lucene/java/ ), made sure it ran
with the corresponding Lucene library...and it worked!  I am still not
sure what happened to my Java environment, but it may takes some time to
figure out.  For the rest of my project, I successfully use the
Lucene.Net port and C#, but it was great to get my feet wet in the Java
case.

Thanks again!

-marie


-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Tuesday, November 28, 2006 1:57 PM
To: java-user@lucene.apache.org
Subject: Re: Syns2Index utility: version of Lucene and Java


1) I don't really know anything about Syns2Index - but the errors you
cited don't seem to have anything to do with Lucene ...  your compiler
appears to be complaining about assert statements within the core java
system classes ... which is a little strainge.  you said you are psat
the HellowWorld stage ... have you tried compiling a HellowWorld app in
this current environment (ie: delete the lucene code youv'e got and put
a simple HelloWorld class in the same directory and compile it hte same
way) ???

2) the first link i saw when searching for Syns2Index to see what it was
is...
www.netlikon.de/docs/lucene-2.0.0/docs/api/org/apache/lucene/wordnet/Syn
s2Index.html

...which is how i discovered that Syns2Index is part of the wordnet
contrib and ships with Lucene ... so you shouldn't need to compile
anything ... just use the wordnet jar that comes with your lucene-2.0
distribution.


: Date: Sun, 26 Nov 2006 23:21:45 -0500
: From: "Risov, Maria" <maria.risov@eds.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Syns2Index utility: version of Lucene and Java
:
: I am trying to use Syns2Index utility to convert the WordNet into a
Lucene index.  First I downloaded the latest JDK and Lucene 2.0, but
soon realized that both were too new for compiling Syns2Index.java.
Next, got down to j2sdk1.4.2_13 and Lucene 1.4.3.  by deciphering error
messages.  (I am running XP SP2)
:
: I have copied the java\org\apache\lucene directory in the same folder
as the Syns2Index.java file.  I have a feeling that my classpath is most
likely set right (or at least close), but I get a huge amount of
identical compile errors.
:
: Command used:
:
: D:\InfringeDetector\JavaLucene>javac -classpath
"D:\Project\JavaLucene;
: C:\j2sdk1.4.2_13"
D:\Project\JavaLucene\org\apache\lucene\wordnet\Syns2
: Index.java
:
: Compile results (posting just a few from the bottom of my screen):
:
:         ^
: C:\j2sdk1.4.2_13\java\nio\DirectByteBuffer.java:843: cannot resolve
symbol
: symbol  : method assert (boolean)
: location: class java.nio.DirectByteBuffer
:         assert (off <=3D lim);
:         ^
: C:\j2sdk1.4.2_13\java\nio\DirectByteBuffer.java:934: cannot resolve
symbol
: symbol  : method assert (boolean)
: location: class java.nio.DirectByteBuffer
:         assert (off <=3D lim);
:         ^
: C:\j2sdk1.4.2_13\java\nio\Bits.java:642: cannot resolve symbol
: symbol  : method assert (boolean)
: location: class java.nio.Bits
:             assert (reservedMemory > -1);
:             ^
: C:\j2sdk1.4.2_13\java\lang\CharacterDataLatin1.java:284: cannot
resolve symbol
: symbol  : method assert (boolean)
: location: class java.lang.CharacterDataLatin1
:             assert (data.length =3D=3D (256 * 2));
:             ^
: C:\j2sdk1.4.2_13\java\lang\CharacterData.java:956: cannot resolve
symbol
: symbol  : method assert (boolean)
: location: class java.lang.CharacterData
:             assert (data.length =3D=3D (678 * 2));
:             ^
: C:\j2sdk1.4.2_13\java\nio\DirectByteBufferR.java:165: cannot resolve
symbol
: symbol  : method assert (boolean)
: location: class java.nio.DirectByteBufferR
:         assert (pos <=3D lim);
:         ^
: C:\j2sdk1.4.2_13\java\nio\DirectByteBufferR.java:479: cannot resolve
symbol
: symbol  : method assert (boolean)
: location: class java.nio.DirectByteBufferR
:         assert (off <=3D lim);
:         ^
: Note: Some input files use or override a deprecated API.
: Note: Recompile with -deprecation for details.
: 100 errors
: 206 warnings
:
: I have to admit that I am fairly new to Java, but past the HelloWorld
setups.  I have been banging my head against the wall and Google for 10
hours.   Please help!!!
:
: -marie
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 19:16:48 2006
Return-Path: <java-user-return-24765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86120 invoked from network); 29 Nov 2006 19:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 19:16:47 -0000
Received: (qmail 30041 invoked by uid 500); 29 Nov 2006 19:16:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30016 invoked by uid 500); 29 Nov 2006 19:16:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30004 invoked by uid 99); 29 Nov 2006 19:16:49 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:16:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 11:16:37 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2636534nfc
        for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 11:16:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=QlqFw5oBR6kC0cJfbmYtbZZXmCojQV7RifPlOmr8u/OyTVGIoncvEf/jpSdt8KoUIYS1JV2aHsf1BjBuuzbbAPnoFQ+r/T0q/DGbUBYGUA6M+QAZShEolxd3urHWT7DZT+ZE3bLEpzboCN32ApYWPe0op/P8Qvuh9Mq0XqZgKnA=
Received: by 10.82.190.2 with SMTP id n2mr658734buf.1164827775222;
        Wed, 29 Nov 2006 11:16:15 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Wed, 29 Nov 2006 11:16:15 -0800 (PST)
Message-ID: <c68e39170611291116i23b2a9d6w2f76a92734257cdf@mail.gmail.com>
Date: Wed, 29 Nov 2006 14:16:15 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Cached Hits / closing IndexSearcher after add/delete w/IndexModifier
In-Reply-To: <4CF50745-6C6F-488F-A097-FED36978A5C6@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4CF50745-6C6F-488F-A097-FED36978A5C6@gmail.com>
X-Google-Sender-Auth: 3428c884a529ad90
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/29/06, Eric Brown <yogieric.dev@gmail.com> wrote:
> I'm using lucene as a backend for my webservices that provide add,
> remove and search operations. When I add or remove documents via
> IndexModifier, I believe I'm supposed to close the IndexSearcher I
> use for query requests. However, I cache Hits and I believe the
> javadocs indicate closing an IndexSearcher will invalidate the cached
> Hits such that trying to retrieve a doc may throw an exception. So my
> solution is to wrap the IndexSearcher in another class with a
> finalizer that closes the IndexSearcher when all the Hits dereference
> it. My question is whether my cached hits have a solid reference to
> IndexSearcher such that I can rely on it being closed only after I
> expire the Hits from the cache?

Yes, they do.

> Also, should I keep one IndexModifier open for the life of my service/
> application or should I open and close it when I get new requests to
> add or remove documents? (I don't really have control over batching
> unfortunately -- though I've certainly pointed it out.)

IndexModifier currently has very low performance with mixed adds and deletes.
You can keep the same one over the lifetime of the app though.

If you haven't seen it, another alternative that might fit your needs is Solr.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 20:33:42 2006
Return-Path: <java-user-return-24766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18537 invoked from network); 29 Nov 2006 20:33:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 20:33:40 -0000
Received: (qmail 51009 invoked by uid 500); 29 Nov 2006 20:33:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50970 invoked by uid 500); 29 Nov 2006 20:33:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50959 invoked by uid 99); 29 Nov 2006 20:33:43 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 12:33:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yogieric.dev@gmail.com designates 64.233.184.232 as permitted sender)
Received: from [64.233.184.232] (HELO wr-out-0506.google.com) (64.233.184.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 12:33:29 -0800
Received: by wr-out-0506.google.com with SMTP id i21so764374wra
        for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 12:33:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=N4dbK6knPAf3c6tPxe390xr4oArMnbVW+hlmTRH+aWlEg02miG47WyrpLVF16/31IPXfNeazYYkXp5mxxy+hkijCcN65f12D0c2Z+Rbfe8qk+65uwbhnJclPQ9xi7F5m144zM+1AKq9gr+CBIRmm9gRwICQw47w+Le4uCBn7CP0=
Received: by 10.78.17.4 with SMTP id 4mr2645945huq.1164832387901;
        Wed, 29 Nov 2006 12:33:07 -0800 (PST)
Received: from ?192.168.103.168? ( [75.5.124.98])
        by mx.google.com with ESMTP id 3sm22115385huc.2006.11.29.12.33.05;
        Wed, 29 Nov 2006 12:33:07 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <c68e39170611291116i23b2a9d6w2f76a92734257cdf@mail.gmail.com>
References: <4CF50745-6C6F-488F-A097-FED36978A5C6@gmail.com> <c68e39170611291116i23b2a9d6w2f76a92734257cdf@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <160AE042-8A1F-4350-BA16-42AC4311BC7C@gmail.com>
Content-Transfer-Encoding: 7bit
From: Eric Brown <yogieric.dev@gmail.com>
Subject: Re: Cached Hits / closing IndexSearcher after add/delete w/IndexModifier
Date: Wed, 29 Nov 2006 12:32:51 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Yonik,

On Nov 29, 2006, at 11:16 AM, Yonik Seeley wrote:
> On 11/29/06, Eric Brown <yogieric.dev@gmail.com> wrote:
[snip]
>> Also, should I keep one IndexModifier open for the life of my  
>> service/
>> application or should I open and close it when I get new requests to
>> add or remove documents? (I don't really have control over batching
>> unfortunately -- though I've certainly pointed it out.)
>
> IndexModifier currently has very low performance with mixed adds  
> and deletes.
> You can keep the same one over the lifetime of the app though.

Assuming I call flush() after every operation (they won't be that  
frequent), if I don't call close() when my application shuts down,  
will I run into locking issues when I restart my application?

> If you haven't seen it, another alternative that might fit your  
> needs is Solr.

I just took a look. It looks very applicable and I'll look at it  
seriously for subsequent roll-outs of our site. For the short-term  
I'm too tight for time to change direction.

Thanks!
Eric


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 22:02:54 2006
Return-Path: <java-user-return-24767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49631 invoked from network); 29 Nov 2006 22:02:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 22:02:53 -0000
Received: (qmail 87918 invoked by uid 500); 29 Nov 2006 22:02:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87883 invoked by uid 500); 29 Nov 2006 22:02:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87872 invoked by uid 99); 29 Nov 2006 22:02:55 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 14:02:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 14:02:44 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2673470nfc
        for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 14:02:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=YIUY4oa1HGcbr3o1J2pwwfkFaIrjUqF31kqkhhDhbyDMuj5VBkem63NNhfp8gTuHuMkl7jIEHFPlCNKt3sU45z3l3cUTQ4M5curQJBxSJQP5cFSI6eFQjYmHDkDI28+AhL2ule5aswcKeZB2B8QhFt8qqgDmaOALYqNgM1Pmasg=
Received: by 10.82.105.13 with SMTP id d13mr688033buc.1164837742847;
        Wed, 29 Nov 2006 14:02:22 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Wed, 29 Nov 2006 14:02:17 -0800 (PST)
Message-ID: <c68e39170611291402q2fc1a0a3j857dcfb6047d6375@mail.gmail.com>
Date: Wed, 29 Nov 2006 17:02:17 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Cached Hits / closing IndexSearcher after add/delete w/IndexModifier
In-Reply-To: <160AE042-8A1F-4350-BA16-42AC4311BC7C@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4CF50745-6C6F-488F-A097-FED36978A5C6@gmail.com>
	 <c68e39170611291116i23b2a9d6w2f76a92734257cdf@mail.gmail.com>
	 <160AE042-8A1F-4350-BA16-42AC4311BC7C@gmail.com>
X-Google-Sender-Auth: 999e680c2de3e8b1
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/29/06, Eric Brown <yogieric.dev@gmail.com> wrote:
> > IndexModifier currently has very low performance with mixed adds
> > and deletes.
> > You can keep the same one over the lifetime of the app though.
>
> Assuming I call flush() after every operation (they won't be that
> frequent), if I don't call close() when my application shuts down,
> will I run into locking issues when I restart my application?

IndexWriter has a finalizer, bug finalizers aren't guaranteed to be run AFAIK.
There is a JVM shutdown hook you could use to clean up though.
You could also use native locks (in the current lucene devel version).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 22:07:14 2006
Return-Path: <java-user-return-24768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50705 invoked from network); 29 Nov 2006 22:07:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 22:07:13 -0000
Received: (qmail 97792 invoked by uid 500); 29 Nov 2006 22:07:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97767 invoked by uid 500); 29 Nov 2006 22:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97756 invoked by uid 99); 29 Nov 2006 22:07:15 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 14:07:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 14:07:04 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2674618nfc
        for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 14:06:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=KHY5cIMGS6z/7nyr6sj2CdDsOcJiYWmh3kiS8RgFrTuYyUbq96PR4WT7mI69dBySR+9uex/guuyPH4xMFBsuQBd0Vd9dKAWEJaMItdk1M/cZ03QRxoA0PKhEpwOijapp/5ndAWpv7mk0Fi2K1moeMZyPQjQme31ylYYxRvmvQEo=
Received: by 10.82.131.1 with SMTP id e1mr690939bud.1164838002621;
        Wed, 29 Nov 2006 14:06:42 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Wed, 29 Nov 2006 14:06:37 -0800 (PST)
Message-ID: <c68e39170611291406x4d1d051bkd41dbeedbcd54657@mail.gmail.com>
Date: Wed, 29 Nov 2006 17:06:37 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Cached Hits / closing IndexSearcher after add/delete w/IndexModifier
In-Reply-To: <c68e39170611291402q2fc1a0a3j857dcfb6047d6375@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4CF50745-6C6F-488F-A097-FED36978A5C6@gmail.com>
	 <c68e39170611291116i23b2a9d6w2f76a92734257cdf@mail.gmail.com>
	 <160AE042-8A1F-4350-BA16-42AC4311BC7C@gmail.com>
	 <c68e39170611291402q2fc1a0a3j857dcfb6047d6375@mail.gmail.com>
X-Google-Sender-Auth: e295cd4012c415f7
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/29/06, Yonik Seeley <yonik@apache.org> wrote:
> On 11/29/06, Eric Brown <yogieric.dev@gmail.com> wrote:
> > > IndexModifier currently has very low performance with mixed adds
> > > and deletes.
> > > You can keep the same one over the lifetime of the app though.
> >
> > Assuming I call flush() after every operation (they won't be that
> > frequent), if I don't call close() when my application shuts down,
> > will I run into locking issues when I restart my application?
>
> IndexWriter has a finalizer, bug finalizers aren't guaranteed to be run AFAIK.
> There is a JVM shutdown hook you could use to clean up though.
> You could also use native locks (in the current lucene devel version).

System.runFinalizersOnExit(true) is also an option.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 22:56:39 2006
Return-Path: <java-user-return-24769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64408 invoked from network); 29 Nov 2006 22:56:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 22:56:39 -0000
Received: (qmail 95897 invoked by uid 500); 29 Nov 2006 22:56:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95613 invoked by uid 500); 29 Nov 2006 22:56:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95602 invoked by uid 99); 29 Nov 2006 22:56:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 14:56:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of markrmiller@gmail.com designates 64.233.162.224 as permitted sender)
Received: from [64.233.162.224] (HELO nz-out-0102.google.com) (64.233.162.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 14:56:28 -0800
Received: by nz-out-0102.google.com with SMTP id i1so1178851nzh
        for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 14:56:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=h6FjghFAdhFXtKdILDnQvEgijLjaskKCAkWHx8nvKmBJ2oIxgE/e5t8vmfjHZXmZYh50/ZJlfv6STH74wVX/R2elyh+c9vrPBHrZ5APnhx9Z8YkMFxY/+KIwNqiENlO02zAq4eohmLbJpUIwnBLpNhaFSnjg/ATO+cZdAKTliyE=
Received: by 10.35.111.14 with SMTP id o14mr5072586pym.1164840967321;
        Wed, 29 Nov 2006 14:56:07 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.114.42])
        by mx.google.com with ESMTP id 24sm16694242nzn.2006.11.29.14.56.04;
        Wed, 29 Nov 2006 14:56:06 -0800 (PST)
Message-ID: <456E1005.4040200@gmail.com>
Date: Wed, 29 Nov 2006 17:56:05 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Cached Hits / closing IndexSearcher after add/delete w/IndexModifier
References: <4CF50745-6C6F-488F-A097-FED36978A5C6@gmail.com> <c68e39170611291116i23b2a9d6w2f76a92734257cdf@mail.gmail.com> <160AE042-8A1F-4350-BA16-42AC4311BC7C@gmail.com>
In-Reply-To: <160AE042-8A1F-4350-BA16-42AC4311BC7C@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If you haven't seen the following option you might want to check it out. It uses reference counting to keep track of writers/searchers/etc(I think solr does as well).
Has worked great for everything I have thrown at it other than need some tweaks to its multisearcher support. Also is a good
base for adding the ability to 'warm' searchers.

The oversimplified gist is: When a writer is closed, new searchers are opened for the index.


BEGIN QUOTE:

You can download the source here:

http://www.blizzy.de/lucene/lucene-indexaccess-0.1.0.zip


Using LuceneIndexAccessor is incredibly simple:


Directory directory = ...
Analyzer analyzer = ...

// somewhere near program start
IIndexAccessProvider accessProvider =
        new IndexAccessProvider(directory, analyzer);
ILuceneIndexAccessor accessor = new LuceneIndexAccessor(accessProvider);
accessor.open();


IndexWriter writer = null;
try {
        writer = accessor.getWriter();

        // use writer...
} catch (IOException e) {
        // ...
} finally {
        accessor.release(write);
}


// somewhere near program exit
accessor.close();



Eric Brown wrote:
> Hi Yonik,
>
> On Nov 29, 2006, at 11:16 AM, Yonik Seeley wrote:
>> On 11/29/06, Eric Brown <yogieric.dev@gmail.com> wrote:
> [snip]
>>> Also, should I keep one IndexModifier open for the life of my service/
>>> application or should I open and close it when I get new requests to
>>> add or remove documents? (I don't really have control over batching
>>> unfortunately -- though I've certainly pointed it out.)
>>
>> IndexModifier currently has very low performance with mixed adds and 
>> deletes.
>> You can keep the same one over the lifetime of the app though.
>
> Assuming I call flush() after every operation (they won't be that 
> frequent), if I don't call close() when my application shuts down, 
> will I run into locking issues when I restart my application?
>
>> If you haven't seen it, another alternative that might fit your needs 
>> is Solr.
>
> I just took a look. It looks very applicable and I'll look at it 
> seriously for subsequent roll-outs of our site. For the short-term I'm 
> too tight for time to change direction.
>
> Thanks!
> Eric
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 29 23:22:52 2006
Return-Path: <java-user-return-24770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71218 invoked from network); 29 Nov 2006 23:22:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2006 23:22:51 -0000
Received: (qmail 57572 invoked by uid 500); 29 Nov 2006 23:22:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57534 invoked by uid 500); 29 Nov 2006 23:22:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57523 invoked by uid 99); 29 Nov 2006 23:22:52 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:22:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 15:22:39 -0800
Received: (qmail 3344 invoked from network); 29 Nov 2006 23:22:16 -0000
Received: from unknown (HELO p5496e2d3.dip.t-dialin.net) ([pbs]695637@[84.150.226.211])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 29 Nov 2006 23:22:16 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: BUG ? - lucene multisearcher / sorting
Date: Thu, 30 Nov 2006 00:22:49 +0100
User-Agent: KMail/1.8.2
References: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAABfNx9wSmtUmMsEs+vysifsKAAAAQAAAAexJBIo48FU2vtTh87GKKKQEAAAAA@emedea.de>
In-Reply-To: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAABfNx9wSmtUmMsEs+vysifsKAAAAQAAAAexJBIo48FU2vtTh87GKKKQEAAAAA@emedea.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611300022.49804@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 28 November 2006 23:09, Kai R. Emde wrote:

> we have one problem with the sort routine. We use the multisearcher
> function over severall index.

Does that also happens when you're not using MultiSearcher? Could you post 
a small test case that demonstrates this problem? To my knowledge, there's 
no known bug (but lucene 1.4 had problems with relevance sorting when 
using MultiSearcher).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 00:12:56 2006
Return-Path: <java-user-return-24771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83026 invoked from network); 30 Nov 2006 00:12:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 00:12:55 -0000
Received: (qmail 24697 invoked by uid 500); 30 Nov 2006 00:13:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23613 invoked by uid 500); 30 Nov 2006 00:12:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23602 invoked by uid 99); 30 Nov 2006 00:12:59 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:12:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 16:12:46 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by out1.messagingengine.com (Postfix) with ESMTP id E0EF948F99
	for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 19:12:26 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by db2.internal (MEProxy); Wed, 29 Nov 2006 19:12:26 -0500
X-Sasl-enc: iTXaI5e6Eco7F9Y905Ydpd+tV378dsjkYs33e3ATJx+n 1164845546
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 97ACF1CAA9
	for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 19:12:26 -0500 (EST)
Message-ID: <456E21E7.3020101@mikemccandless.com>
Date: Wed, 29 Nov 2006 19:12:23 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Caused by: java.io.IOException: The handle is invalid
References: <0D6A3C278F4DC346B98DF4D2F1397E8115690FF6@UREXCHVS3.ur.com> <451AFA02.40703@mikemccandless.com>
In-Reply-To: <451AFA02.40703@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
> Van Nguyen wrote:
>> I'm running this on Windows 2003 server (NTFS).  The Java VM version is
>> 1.5.0_06.  This exception is not consistent, but it is not intermittent
>> either.  It does not throw it at any particular point while rebuilding
>> the index, but it will throw this exception at some point (it could be
>> 1/3 way through... or it could be 95% done). 
>> At first... I thought I might have a bad sector somewhere on my hard
>> drive, so I partitioned a hard drive (known to be good) to be only
>> 500mb... knowing this particular index is only 250mb.  Using the server
>> version of the jvm.dll will cause this error somewhere during program.
>> Using the client version, it builds w/o any errors.
> 
> I am at a loss on this one.
> 
> That function that writes the segments file is quite simple -- it opens 
> a "segments.new", writes a smallish number of bytes, then closes it, 
> then renames it to "segments".  Your exception happens in the close (in 
> a finally clause).  I don't get why server version of the JRE would do 
> this but the client version would not.
> 
> Do you have any interesting customizations in how you are using Lucene?
> 
> Mike

Hi,

It's been 2 months since this thread, but, in a separate JIRA issue:

     http://issues.apache.org/jira/browse/LUCENE-669

We see an IOException very similar to the one at the start of this
thread.  It's due to a bug in Lucene (and we believe also a bug in the
JVM -- but this is sort of speculation) where Lucene is closing an
already closed RandomAccessFile in a finalize() method.

Anyway, Van, if you are still here then you may want to test the patch
on that issue above (just committed to the trunk version of Lucene) to
see if it fixes your issue!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 01:14:33 2006
Return-Path: <java-user-return-24772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95578 invoked from network); 30 Nov 2006 01:14:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 01:14:32 -0000
Received: (qmail 84586 invoked by uid 500); 30 Nov 2006 01:14:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84548 invoked by uid 500); 30 Nov 2006 01:14:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84537 invoked by uid 99); 30 Nov 2006 01:14:33 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 17:14:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 17:13:45 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2713596nfc
        for <java-user@lucene.apache.org>; Wed, 29 Nov 2006 17:13:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=Mf6gjuZcZ1ifaHAnL1uHgi6dFTkFNpisO4ef2k3SlCTvxd1SGX1DLoE6OJdwtN5N1/j/rx2yb1A4vKq4ta6dRzAui90Y6IedaRMjfivFm/lLeT58EmRymPnBqZYGhG3RPMzZOOXiZDKwXXWqY6khSxV/dyQgd1kdTGIiUcaexUQ=
Received: by 10.82.111.8 with SMTP id j8mr720420buc.1164849184926;
        Wed, 29 Nov 2006 17:13:04 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Wed, 29 Nov 2006 17:13:04 -0800 (PST)
Message-ID: <c68e39170611291713n30a0b47al761438955b7e8fbd@mail.gmail.com>
Date: Wed, 29 Nov 2006 20:13:04 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Cached Hits / closing IndexSearcher after add/delete w/IndexModifier
In-Reply-To: <456E1005.4040200@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4CF50745-6C6F-488F-A097-FED36978A5C6@gmail.com>
	 <c68e39170611291116i23b2a9d6w2f76a92734257cdf@mail.gmail.com>
	 <160AE042-8A1F-4350-BA16-42AC4311BC7C@gmail.com>
	 <456E1005.4040200@gmail.com>
X-Google-Sender-Auth: 99c97c6562a77e7d
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/29/06, Mark Miller <markrmiller@gmail.com> wrote:
> If you haven't seen the following option you might want to check it out. It uses reference counting to keep track of writers/searchers/etc(I think solr does as well).

Right, Solr uses reference counting... relying on GC will get out
out-of-filehandle exceptions.
http://svn.apache.org/viewvc/incubator/solr/trunk/src/java/org/apache/solr/util/RefCounted.java?view=markup


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 07:02:13 2006
Return-Path: <java-user-return-24773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69276 invoked from network); 30 Nov 2006 07:02:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 07:02:12 -0000
Received: (qmail 24407 invoked by uid 500); 30 Nov 2006 07:02:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24371 invoked by uid 500); 30 Nov 2006 07:02:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24360 invoked by uid 99); 30 Nov 2006 07:02:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 29 Nov 2006 23:02:14 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 29 Nov 2006 23:02:02 -0800
Received: (qmail 62181 invoked by uid 60001); 30 Nov 2006 07:01:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DFgBvQmvlkTF6v07H5xTAdDDva+TGY7cc1DVUHPZ7waYO05f5fZ0NlqJN6z91Us4PwAHH3N/IybKSuXonEXWzZAMFim3eU/cnAiFf/Qqb1xwOgwvkG1mgBP0uyOiy/yvFqs29OnfmME7c0p9R+KJwVrV9FfHmvE/UxyLqIfW3GM=  ;
Message-ID: <20061130070141.62179.qmail@web50310.mail.yahoo.com>
Received: from [74.65.202.166] by web50310.mail.yahoo.com via HTTP; Wed, 29 Nov 2006 23:01:41 PST
Date: Wed, 29 Nov 2006 23:01:41 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: 2.1-dev memory leak?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AIs anyone running Lucene trunk/HEAD version in a serious productio=
n system?  Anyone noticed any memory leaks?=0A=0AI'm asking because I recen=
tly bravely went from 1.9.1 to 2.1-dev (trunk from about a week ago) and al=
l of a sudden my application that was previosly consuming about 1.5GB (-Xmx=
1500m) now consumes 2.2GB, and blows up after it exhausts the whole heap an=
d the GC can't make any more room there after running for about 3-6 hours a=
nd handling several tens of thousands of queries.=0A=0AI'd love to go back =
to 2.0.0, or even back to 1.9.1 and run that for a while and just double-ch=
eck that it really is the the Lucene upgrade that is the source of the leak=
, but unfortunately because of LUCENE-701 (lockless commits), I can't go ba=
ck that easily without reindexing...=0A=0AMoreover, I just looked at CHANGE=
S.txt from 1.9.1 to present, and I think the biggest change since then was =
LUCENE-701.=0ALUCENE-672 (segment merge policy) was also pretty big, but fr=
om what I can tell, the memory leak is somewhere in the search part, not in=
dexing part.  There have been a number of other search-time optimizations s=
ince 2.0.0, so it's hard to tell what the cause is.  Of course, it could tu=
rn out to be a leak in my own code, but I'm pretty sure my changes were lim=
ited to removal of deprecated methods, so I can start using 2.1.=0A=0A     =
   IndexDescriptor indexDescriptor =3D getIndexDescriptorFromCache(indexID)=
;=0A=0A        try {=0A            // if this is a known index=0A          =
  if (indexDescriptor !=3D null) {=0A                cacheHits++;=0A       =
         // if the index has changed since this Searcher was created, make =
a new Searcher=0A                long currentVersion =3D IndexReader.getCur=
rentVersion(indexID);=0A                if (currentVersion > indexDescripto=
r.lastKnownVersion) {=0A                    hitButChanged++;=0A            =
        // modified index detected=0A                    indexDescriptor.la=
stKnownVersion =3D currentVersion;=0A                    indexDescriptor.se=
archer =3D new LuceneSearcher(new File(indexID));=0A                }=0A   =
             else {=0A                    // index not modified, reusing se=
archer=0A                }=0A            }=0A            // if this is a ne=
w index=0A            else {=0A                cacheMisses++;=0A           =
     File indexDir =3D validateIndex(indexID);=0A                indexDescr=
iptor =3D new IndexDescriptor();=0A                indexDescriptor.indexDir=
 =3D indexDir;=0A                indexDescriptor.lastKnownVersion =3D Index=
Reader.getCurrentVersion(indexDir);=0A                indexDescriptor.searc=
her =3D new LuceneSearcher(indexDir);=0A            }=0A            return =
cacheIndexDescriptor(indexDescriptor);=0A        }=0A        catch (IOExcep=
tion e) {=0A            throw new SearcherException("Cannot open index: " +=
 indexID, e);=0A        }=0A=0ASo this is just caching of "IndexDescriptor"=
 objects, which have "LuceneSearcher" objects in them.=0AThe cache is a sma=
ll LRU cache with max size of 37.  The app actually consists of a few tens =
of thousands of Lucene indices, so this small cache results in only 20% cac=
he hit ratio.=0A=0AAnd then the LuceneSearcher ctor looks like this:=0A=0A =
   LuceneSearcher(File indexDir) throws IOException {=0A        _indexDir =
=3D FSDirectory.getDirectory(indexDir, false);=0A        _searcher =3D new =
IndexSearcher(_indexDir);=0A    }=0A=0AThis _searcher (IndexSearcher) is th=
en used in various search methods of this class.=0AThere are no close() cal=
ls anywhere.  In other words, I don't explicitly close IndexSearchers, I ju=
st let them get GC collected. =0AThis stuff has been working for well for 1=
-2 years, and I just started exhausting the JVM heap about a week ago when =
I went from 1.9.1 to 2.1-dev.=0AAny other overly brave/crazy souls out ther=
e who are running the bleeding edge version in production environment?=0ATh=
is is running on FedoraCore3 under JDK 1.5_09 (latest 1.5).=0A=0AThanks,=0A=
Otis=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 10:34:59 2006
Return-Path: <java-user-return-24774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26603 invoked from network); 30 Nov 2006 10:34:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 10:34:58 -0000
Received: (qmail 64586 invoked by uid 500); 30 Nov 2006 10:34:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64516 invoked by uid 500); 30 Nov 2006 10:34:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64475 invoked by uid 99); 30 Nov 2006 10:34:58 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 02:34:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 02:34:45 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GpjFJ-0004um-E0
	for java-user@lucene.apache.org; Thu, 30 Nov 2006 02:34:25 -0800
Message-ID: <7616977.post@talk.nabble.com>
Date: Thu, 30 Nov 2006 02:34:25 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Multiple query criteria search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys,

   I m actually trying on search indeces by entering multiple queries, for
instance, I have 4 textboxes with search criterias such as AND, OR, NOT and
Exact phrase. I m using queryParser operator and then add the query into
booleanquery, therefore I dont think my search result was correct.

   Is there any other better way to do so?

   Thank you.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/Multiple-query-criteria-search-tf2730837.html#a7616977
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 10:48:39 2006
Return-Path: <java-user-return-24775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29622 invoked from network); 30 Nov 2006 10:48:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 10:48:38 -0000
Received: (qmail 91282 invoked by uid 500); 30 Nov 2006 10:48:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91165 invoked by uid 500); 30 Nov 2006 10:48:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91154 invoked by uid 99); 30 Nov 2006 10:48:40 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 02:48:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 02:48:28 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GpjSZ-0006j2-U7
	for java-user@lucene.apache.org; Thu, 30 Nov 2006 02:48:07 -0800
Message-ID: <7617155.post@talk.nabble.com>
Date: Thu, 30 Nov 2006 02:48:07 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: indexing performance issue
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi guys,

   I have posted this question before and this time I found that it could be
pdfbox problem and this pdfbox I downloaded doesn't use the log4j.jar. To
index the app 2.13mb pdf file took me 17s and total time to upload a file is
18s.

   So, is there any way or others software than pdfbox to solve the
performance issue.

   Thanks.


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/indexing-performance-issue-tf2730895.html#a7617155
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 11:52:22 2006
Return-Path: <java-user-return-24776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52380 invoked from network); 30 Nov 2006 11:52:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 11:52:21 -0000
Received: (qmail 73403 invoked by uid 500); 30 Nov 2006 11:52:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73364 invoked by uid 500); 30 Nov 2006 11:52:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73353 invoked by uid 99); 30 Nov 2006 11:52:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 03:52:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 03:52:11 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by out1.messagingengine.com (Postfix) with ESMTP id C68A349A26
	for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 06:51:51 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by db2.internal (MEProxy); Thu, 30 Nov 2006 06:51:51 -0500
X-Sasl-enc: lgSQMbmEqzrfp7mnna3tfbnwd3uvLQZKpcvQ18icikaM 1164887511
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 80658141C0
	for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 06:51:51 -0500 (EST)
Message-ID: <456EC5D4.1040203@mikemccandless.com>
Date: Thu, 30 Nov 2006 06:51:48 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: 2.1-dev memory leak?
References: <20061130070141.62179.qmail@web50310.mail.yahoo.com>
In-Reply-To: <20061130070141.62179.qmail@web50310.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:
> Hi,
> 
> Is anyone running Lucene trunk/HEAD version in a serious production system?  Anyone noticed any memory leaks?
> 
> I'm asking because I recently bravely went from 1.9.1 to 2.1-dev (trunk from about a week ago) and all of a sudden my application that was previosly consuming about 1.5GB (-Xmx1500m) now consumes 2.2GB, and blows up after it exhausts the whole heap and the GC can't make any more room there after running for about 3-6 hours and handling several tens of thousands of queries.

Whoa, I'm sorry to hear this Otis :(

> I'd love to go back to 2.0.0, or even back to 1.9.1 and run that for a while and just double-check that it really is the the Lucene upgrade that is the source of the leak, but unfortunately because of LUCENE-701 (lockless commits), I can't go back that easily without reindexing...
> 
> Moreover, I just looked at CHANGES.txt from 1.9.1 to present, and I think the biggest change since then was LUCENE-701.

The file-format changes for lockless commits are small enough that
making a tool to back-convert a lockless format index into a
pre-lockless format index (so that Lucene 2.0 can read/write to it) is
fairly simple.

OK I coded up a first version.  I will open a JIRA issue and attach a
patch.

We clearly need to also get to the bottom of where the memory leak is,
but I think first priority is to stabilize your production
environment.  Hopefully this tool can at least get you back up in
production and then also enable us to narrow down where the memory
leak is.

Please tread carefully though: it makes me very nervous that this tool
I just created would be used in your production environment!
Obviously first test it in a sandbox, running against your production
index(es).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 15:31:51 2006
Return-Path: <java-user-return-24777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35620 invoked from network); 30 Nov 2006 15:31:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 15:31:49 -0000
Received: (qmail 8254 invoked by uid 500); 30 Nov 2006 15:31:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8229 invoked by uid 500); 30 Nov 2006 15:31:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8218 invoked by uid 99); 30 Nov 2006 15:31:50 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 07:31:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a11.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 07:31:35 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.dreamhost.com (Postfix) with ESMTP id 47E7CB80CB
	for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 07:31:09 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <7617155.post@talk.nabble.com>
References: <7617155.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <95301727-3233-4D98-BD79-44490038E433@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: indexing performance issue
Date: Thu, 30 Nov 2006 10:31:04 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/docs/contributions.html lists several  
PDF alternatives, but I can't speak to their performance.  I am sure  
if you googled PDF converters you could find a fair number of hits.

Perhaps w/ some more details about your app we might be able to find  
a workaround.  We often convert PDFs as a one time offline task  
(which doesn't get around the fact that you need to do it) so that  
they don't get in the way when indexing (and reindexing), but we  
generally deal w/ fixed collections, which may not be your case.

-Grant

On Nov 30, 2006, at 5:48 AM, spinergywmy wrote:

>
> Hi guys,
>
>    I have posted this question before and this time I found that it  
> could be
> pdfbox problem and this pdfbox I downloaded doesn't use the  
> log4j.jar. To
> index the app 2.13mb pdf file took me 17s and total time to upload  
> a file is
> 18s.
>
>    So, is there any way or others software than pdfbox to solve the
> performance issue.
>
>    Thanks.
>
>
> regards,
> Wooi Meng
> -- 
> View this message in context: http://www.nabble.com/indexing- 
> performance-issue-tf2730895.html#a7617155
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 15:54:51 2006
Return-Path: <java-user-return-24778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44591 invoked from network); 30 Nov 2006 15:54:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 15:54:50 -0000
Received: (qmail 55004 invoked by uid 500); 30 Nov 2006 15:54:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54977 invoked by uid 500); 30 Nov 2006 15:54:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54966 invoked by uid 99); 30 Nov 2006 15:54:51 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 07:54:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 07:54:38 -0800
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1GpoEs-0002Ue-0K
	for java-user@lucene.apache.org; Thu, 30 Nov 2006 07:54:18 -0800
Message-ID: <7621903.post@talk.nabble.com>
Date: Thu, 30 Nov 2006 07:54:17 -0800 (PST)
From: spinergywmy <spinergywmy@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: indexing performance issue
In-Reply-To: <95301727-3233-4D98-BD79-44490038E433@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spinergywmy@gmail.com
References: <7617155.post@talk.nabble.com> <95301727-3233-4D98-BD79-44490038E433@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Grant,

   Thanks for the tips. I will take ur adviced and look into the link that u
send to me.

   For my scenario will be every time the users upload the single file, I
need to index that particular file. Previously was because the previous
version of pdfbox integrate with log4j.jar file and I believe is the
log4j.jar cause the indexing performance and takes up a lot of memory
resources. However, the latest version of pdfbox doesn't need to integrate
with log4j.jar, and I thought that will actually speed up the indexing
performance but the result was no.

   Please correct me if I'm wrong.

   Thanks


regards,
Wooi Meng
-- 
View this message in context: http://www.nabble.com/indexing-performance-issue-tf2730895.html#a7621903
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 18:56:52 2006
Return-Path: <java-user-return-24779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14403 invoked from network); 30 Nov 2006 18:56:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 18:56:51 -0000
Received: (qmail 47156 invoked by uid 500); 30 Nov 2006 18:56:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47097 invoked by uid 500); 30 Nov 2006 18:56:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47069 invoked by uid 99); 30 Nov 2006 18:56:47 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 10:56:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a11.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 10:56:34 -0800
Received: from [192.168.0.2] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.dreamhost.com (Postfix) with ESMTP id 3934EB8046
	for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 10:56:06 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <7621903.post@talk.nabble.com>
References: <7617155.post@talk.nabble.com> <95301727-3233-4D98-BD79-44490038E433@apache.org> <7621903.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A665E6A6-4715-43A3-9073-BDAF6213E825@apache.org>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@apache.org>
Subject: Re: indexing performance issue
Date: Thu, 30 Nov 2006 13:56:03 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 30, 2006, at 10:54 AM, spinergywmy wrote:

>
> Hi Grant,
>
>    Thanks for the tips. I will take ur adviced and look into the  
> link that u
> send to me.
>
>    For my scenario will be every time the users upload the single  
> file, I
> need to index that particular file. Previously was because the  
> previous
> version of pdfbox integrate with log4j.jar file and I believe is the
> log4j.jar cause the indexing performance and takes up a lot of memory
> resources. However, the latest version of pdfbox doesn't need to  
> integrate
> with log4j.jar, and I thought that will actually speed up the indexing
> performance but the result was no.
>

I would isolate PDFBox and do some performance testing on it, then  
submit your questions on the PDFBox forums, as they will know better  
about PDFBox performance.

Good luck,
Grant


--------------------------
Grant Ingersoll
Center for Natural Language Processing
http://www.cnlp.org

Read the Lucene Java FAQ at http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 22:24:19 2006
Return-Path: <java-user-return-24780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83288 invoked from network); 30 Nov 2006 22:24:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 22:24:18 -0000
Received: (qmail 52774 invoked by uid 500); 30 Nov 2006 22:24:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52728 invoked by uid 500); 30 Nov 2006 22:24:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52716 invoked by uid 99); 30 Nov 2006 22:24:19 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:24:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:24:07 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E18B25B773; Thu, 30 Nov 2006 14:23:46 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DDC8E7F403
	for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 14:23:46 -0800 (PST)
Date: Thu, 30 Nov 2006 14:23:46 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Multiple query criteria search
In-Reply-To: <7616977.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0611301422130.10503@hal.rescomp.berkeley.edu>
References: <7616977.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:    I m actually trying on search indeces by entering multiple queries, for
: instance, I have 4 textboxes with search criterias such as AND, OR, NOT and
: Exact phrase. I m using queryParser operator and then add the query into
: booleanquery, therefore I dont think my search result was correct.

your approach of running hte input into each text box through a query
parser and then combining hte resulting queries into a single BooleanQuery
is a very sound and good approach ... i can't comment on the specifc
correctness of how you implimented it hower, so if your results aren't
what you expect I would look at the boolena que toString and make sure
what you are constructing matches what you thought you were constructing.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 22:54:42 2006
Return-Path: <java-user-return-24781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89506 invoked from network); 30 Nov 2006 22:54:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 22:54:41 -0000
Received: (qmail 8893 invoked by uid 500); 30 Nov 2006 22:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8853 invoked by uid 500); 30 Nov 2006 22:54:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8842 invoked by uid 99); 30 Nov 2006 22:54:42 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 14:54:42 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Nov 2006 14:54:29 -0800
Received: (qmail 92278 invoked by uid 60001); 30 Nov 2006 22:54:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=TqyF/MATSunHuniJRmrycuQOyeIEnkxuCNIzFxYy2d4pfdGEHKJ/f/13Np9aT5hgJbEf2cKUq385WT5vd7KmpwPr4hL9f3BlWPYGhM0sE5a/0K8wvj7q6Zalh7bZM5lSvEfIPIn4tSPlJKYdVWqhDgAnYweoWrsSkOT7oq+umck=  ;
Message-ID: <20061130225408.92276.qmail@web50308.mail.yahoo.com>
Received: from [74.65.202.166] by web50308.mail.yahoo.com via HTTP; Thu, 30 Nov 2006 14:54:08 PST
Date: Thu, 30 Nov 2006 14:54:08 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: 2.1-dev memory leak?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=0A=0AWow, that was fast - java-user support is just as fast as I heard!=
 ;)=0AI'll try your patch shortly. Like I said, the bug may be in my applic=
ation.  Here is a clue.  Memory usage increases with the number of open fil=
es (file descriptors) on the system, and lsof gives:=0A=0ACOMMAND     PID  =
  USER   FD      TYPE     DEVICE      SIZE       NODE NAME=0A...=0Ajava    =
  24476   xxx *562r      REG      253,0    657314    8470761 /xxx/users/1/1=
-home/link/index/_20k.cfs=0Ajava      24476   xxx *894r      REG      253,0=
    657314    8470761 /xxx/users/1/1-home/link/index/_20k.cfs=0Ajava      2=
4476   xxx *078r      REG      253,0    657314    8470761 /xxx/users/1/1-ho=
me/link/index/_20k.cfs=0Ajava      24476   xxx *648r      REG      253,0   =
 657314    8470761 /xxx/users/1/1-home/link/index/_20k.cfs=0A...=0A=0AIf I'=
m reading this right, this tells me that this same file has been opened a n=
umber of different times (note the FD column, all file descriptors are diff=
erent).  This must correspond to multiple new IndexSearcher(...) calls, no?=
  Multiple new IndexSearcher(...) calls on the same index are okay in my ca=
se - because the system has tens of thousands of separate indices, it can't=
 keep all IndexSearchers open at all times, so I use the LRU algo to keep o=
nly recently used IndexSearchers open.  The other ones I "let go" without a=
n explicit close() call.  The assumption is that the old IndexSearchers "ex=
pire", that they get garbage collected, as I'm no longer holding references=
 to them.=0AIff I understand this correctly, the fact that I see these open=
 file descriptors all pointing to the same index file tells me that the old=
 IndexSearchers are just hanging around and are not getting cleaned up.=0A=
=0AI can also see the number of file descriptors increasing with time:=0A=
=0A$ /usr/sbin/lsof | grep -c '/1-home/link/index/_20k.cfs'=0A14=0A$ /usr/s=
bin/lsof | grep -c '/1-home/link/index/_20k.cfs'=0A23=0A=0AThis may still n=
ot point to my app having the bug, but it points to something not releasing=
 IndexSearcher/IndexReader, as that is not getting GCed as before.  I did n=
ot change my logic for creating new IndexSearchers (inlined in my previous =
email).  On the other hand, this app has recently started getting a lot mor=
e search action, so perhaps it's just that the GC is not cleaning things up=
 fast enough....=0AI happen to have an lsof output from the same system fro=
m July.  I see the same thing there - a number of FDs open and pointing to =
the same .cfs index file.  Perhaps it's just that the JVM GC was able to cl=
ean things up then, and now it can't, because the CPU is maxed out.... real=
ly maxed out.=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Michael Mc=
Candless <lucene@mikemccandless.com>=0ATo: java-user@lucene.apache.org=0ASe=
nt: Thursday, November 30, 2006 6:51:48 AM=0ASubject: Re: 2.1-dev memory le=
ak?=0A=0AOtis Gospodnetic wrote:=0A> Hi,=0A> =0A> Is anyone running Lucene =
trunk/HEAD version in a serious production system?  Anyone noticed any memo=
ry leaks?=0A> =0A> I'm asking because I recently bravely went from 1.9.1 to=
 2.1-dev (trunk from about a week ago) and all of a sudden my application t=
hat was previosly consuming about 1.5GB (-Xmx1500m) now consumes 2.2GB, and=
 blows up after it exhausts the whole heap and the GC can't make any more r=
oom there after running for about 3-6 hours and handling several tens of th=
ousands of queries.=0A=0AWhoa, I'm sorry to hear this Otis :(=0A=0A> I'd lo=
ve to go back to 2.0.0, or even back to 1.9.1 and run that for a while and =
just double-check that it really is the the Lucene upgrade that is the sour=
ce of the leak, but unfortunately because of LUCENE-701 (lockless commits),=
 I can't go back that easily without reindexing...=0A> =0A> Moreover, I jus=
t looked at CHANGES.txt from 1.9.1 to present, and I think the biggest chan=
ge since then was LUCENE-701.=0A=0AThe file-format changes for lockless com=
mits are small enough that=0Amaking a tool to back-convert a lockless forma=
t index into a=0Apre-lockless format index (so that Lucene 2.0 can read/wri=
te to it) is=0Afairly simple.=0A=0AOK I coded up a first version.  I will o=
pen a JIRA issue and attach a=0Apatch.=0A=0AWe clearly need to also get to =
the bottom of where the memory leak is,=0Abut I think first priority is to =
stabilize your production=0Aenvironment.  Hopefully this tool can at least =
get you back up in=0Aproduction and then also enable us to narrow down wher=
e the memory=0Aleak is.=0A=0APlease tread carefully though: it makes me ver=
y nervous that this tool=0AI just created would be used in your production =
environment!=0AObviously first test it in a sandbox, running against your p=
roduction=0Aindex(es).=0A=0AMike=0A=0A-------------------------------------=
--------------------------------=0ATo unsubscribe, e-mail: java-user-unsubs=
cribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 23:04:19 2006
Return-Path: <java-user-return-24782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91841 invoked from network); 30 Nov 2006 23:04:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 23:04:19 -0000
Received: (qmail 25548 invoked by uid 500); 30 Nov 2006 23:04:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25514 invoked by uid 500); 30 Nov 2006 23:04:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25503 invoked by uid 99); 30 Nov 2006 23:04:20 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:04:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (herse.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:04:09 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F1A9C5B764; Thu, 30 Nov 2006 15:03:48 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E8F497F403
	for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 15:03:48 -0800 (PST)
Date: Thu, 30 Nov 2006 15:03:48 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: 2.1-dev memory leak?
In-Reply-To: <20061130225408.92276.qmail@web50308.mail.yahoo.com>
Message-ID: <Pine.LNX.4.58.0611301456580.10503@hal.rescomp.berkeley.edu>
References: <20061130225408.92276.qmail@web50308.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: IndexSearchers open.  The other ones I "let go" without an explicit
: close() call.  The assumption is that the old IndexSearchers "expire",
: that they get garbage collected, as I'm no longer holding references to
: them.

yeah ... that just seems really bad in general, i would try to explicitly
close any searcher your purge from your cache.

: getting GCed as before.  I did not change my logic for creating new
: IndexSearchers (inlined in my previous email).  On the other hand, this
: app has recently started getting a lot more search action, so perhaps
: it's just that the GC is not cleaning things up fast enough....

: I happen to have an lsof output from the same system from July.  I see
: the same thing there - a number of FDs open and pointing to the same
: .cfs index file.  Perhaps it's just that the JVM GC was able to clean
: things up then, and now it can't, because the CPU is maxed out....
: really maxed out.

yeah ... i think you may just be running ino a GC quirk ... with the old
code you didn't need to explicitly close things because they got GCed fast
enough, and now ... not so much.  There was a bug in the last few days
looking at calling close() in a finalizer where Michael noticed some
really odd GC/finalizer behavior just depending on wether a boolean that
was never used was set in a finalizer or not ... ghosts in the machine
dude, gremlins and things.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 23:07:22 2006
Return-Path: <java-user-return-24783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92645 invoked from network); 30 Nov 2006 23:07:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 23:07:21 -0000
Received: (qmail 33631 invoked by uid 500); 30 Nov 2006 23:07:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33599 invoked by uid 500); 30 Nov 2006 23:07:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33588 invoked by uid 99); 30 Nov 2006 23:07:23 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:07:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:07:12 -0800
Received: by nf-out-0910.google.com with SMTP id n28so2980008nfc
        for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 15:06:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=dIgrAw/wVhyaFLQePQaPfxmtVEHzTG7PA5Y3MKXoDwNAvp4ZjdAAN1P4SlPqR9yRZ10RlubqdsxlxZ1AuDa4cXkMlWOR+6qRBOvKNctLOSMxkpip25v8rt/G4ObrCpNpZpUKQdHd3SbCMm9LP5wkaR+V76lBy/K0M84qyrI9F/c=
Received: by 10.82.113.6 with SMTP id l6mr934928buc.1164928010514;
        Thu, 30 Nov 2006 15:06:50 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Thu, 30 Nov 2006 15:06:50 -0800 (PST)
Message-ID: <c68e39170611301506v38c1b501q92dc7d02c877eb7@mail.gmail.com>
Date: Thu, 30 Nov 2006 18:06:50 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: 2.1-dev memory leak?
In-Reply-To: <Pine.LNX.4.58.0611301456580.10503@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061130225408.92276.qmail@web50308.mail.yahoo.com>
	 <Pine.LNX.4.58.0611301456580.10503@hal.rescomp.berkeley.edu>
X-Google-Sender-Auth: ab7eedc9d9ca8d18
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/30/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> : IndexSearchers open.  The other ones I "let go" without an explicit
> : close() call.  The assumption is that the old IndexSearchers "expire",
> : that they get garbage collected, as I'm no longer holding references to
> : them.
>
> yeah ... that just seems really bad in general, i would try to explicitly
> close any searcher your purge from your cache.

Yeah, GC may kick off when memory gets low, but the GC system
unfortunately doesn't know anything about when file descriptors get
low.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 23:26:38 2006
Return-Path: <java-user-return-24784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97830 invoked from network); 30 Nov 2006 23:26:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 23:26:33 -0000
Received: (qmail 65304 invoked by uid 500); 30 Nov 2006 23:26:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65273 invoked by uid 500); 30 Nov 2006 23:26:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65262 invoked by uid 99); 30 Nov 2006 23:26:34 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:26:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:26:21 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by out1.messagingengine.com (Postfix) with ESMTP id 647D448F95
	for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 18:26:01 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Thu, 30 Nov 2006 18:26:01 -0500
X-Sasl-enc: Xsd+tQ1nKWoNDAdC3cy8LHu/l1vfSDk5GxgXceHms8gm 1164929161
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 32B98114A3
	for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 18:26:01 -0500 (EST)
Message-ID: <456F6884.2030508@mikemccandless.com>
Date: Thu, 30 Nov 2006 18:25:56 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: 2.1-dev memory leak?
References: <20061130225408.92276.qmail@web50308.mail.yahoo.com>	 <Pine.LNX.4.58.0611301456580.10503@hal.rescomp.berkeley.edu> <c68e39170611301506v38c1b501q92dc7d02c877eb7@mail.gmail.com>
In-Reply-To: <c68e39170611301506v38c1b501q92dc7d02c877eb7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik Seeley wrote:
> On 11/30/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>> : IndexSearchers open.  The other ones I "let go" without an explicit
>> : close() call.  The assumption is that the old IndexSearchers "expire",
>> : that they get garbage collected, as I'm no longer holding references to
>> : them.
>>
>> yeah ... that just seems really bad in general, i would try to explicitly
>> close any searcher your purge from your cache.
> 
> Yeah, GC may kick off when memory gets low, but the GC system
> unfortunately doesn't know anything about when file descriptors get
> low.

I actually ran some stress tests to explore this.  Admittedly, they
are very stressful tests (open searcher, do 10 searches, don't close
it, repeat).  And I definitely found GC would not kick in "often"
enough because I would quickly exhaust file descriptors.

Then, the scary thing is, when I called System.gc explicitly after
creating each searcher, I still exhausted descriptors, which is really
weird!  I think System.gc is not guaranteed to have called all
finalizers before returning, but, I expected the explicit calls to
at least close enough of them to stay under the limit.

I tested this in 1.9.1, 1.9.2, 2.0.0, and trunk, and all of these
versions would run out of descriptors.  So I'm at a loss so far on
where the regression is here ...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 30 23:32:41 2006
Return-Path: <java-user-return-24785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 242 invoked from network); 30 Nov 2006 23:32:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2006 23:32:40 -0000
Received: (qmail 75917 invoked by uid 500); 30 Nov 2006 23:32:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75891 invoked by uid 500); 30 Nov 2006 23:32:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75880 invoked by uid 99); 30 Nov 2006 23:32:41 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:32:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 15:32:29 -0800
Received: from db2.internal (db2.internal [10.202.2.12])
	by out1.messagingengine.com (Postfix) with ESMTP id E79D949263
	for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 18:32:08 -0500 (EST)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by db2.internal (MEProxy); Thu, 30 Nov 2006 18:32:08 -0500
X-Sasl-enc: KB8uOuqkPzsfiQb0OEaQuyGLC9d3DIAI8h/ngTIumsLk 1164929528
Received: from [10.17.4.90] (pool-72-70-33-214.bstnma.fios.verizon.net [72.70.33.214])
	by mail.messagingengine.com (Postfix) with ESMTP id 62748B617
	for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 18:32:08 -0500 (EST)
Message-ID: <456F69F4.3050906@mikemccandless.com>
Date: Thu, 30 Nov 2006 18:32:04 -0500
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.8 (Windows/20061025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: 2.1-dev memory leak?
References: <20061130225408.92276.qmail@web50308.mail.yahoo.com>
In-Reply-To: <20061130225408.92276.qmail@web50308.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:

> Wow, that was fast - java-user support is just as fast as I heard! ;)

Well let's withhold judgment until we see if that tool really works
correctly :)

> I'll try your patch shortly. Like I said, the bug may be in my application.  Here is a clue.  Memory usage increases with the number of open files (file descriptors) on the system, and lsof gives:
> 
> COMMAND     PID    USER   FD      TYPE     DEVICE      SIZE       NODE NAME
> ...
> java      24476   xxx *562r      REG      253,0    657314    8470761 /xxx/users/1/1-home/link/index/_20k.cfs
> java      24476   xxx *894r      REG      253,0    657314    8470761 /xxx/users/1/1-home/link/index/_20k.cfs
> java      24476   xxx *078r      REG      253,0    657314    8470761 /xxx/users/1/1-home/link/index/_20k.cfs
> java      24476   xxx *648r      REG      253,0    657314    8470761 /xxx/users/1/1-home/link/index/_20k.cfs
> ...
> 
> If I'm reading this right, this tells me that this same file has been opened a number of different times (note the FD column, all file descriptors are different).  This must correspond to multiple new IndexSearcher(...) calls, no?  Multiple new IndexSearcher(...) calls on the same index are okay in my case - because the system has tens of thousands of separate indices, it can't keep all IndexSearchers open at all times, so I use the LRU algo to keep only recently used IndexSearchers open.  The other ones I "let go" without an explicit close() call.  The assumption is that the old IndexSearchers "expire", that they get garbage collected, as I'm no longer holding references to them.
> Iff I understand this correctly, the fact that I see these open file descriptors all pointing to the same index file tells me that the old IndexSearchers are just hanging around and are not getting cleaned up.
> 
> I can also see the number of file descriptors increasing with time:
> 
> $ /usr/sbin/lsof | grep -c '/1-home/link/index/_20k.cfs'
> 14
> $ /usr/sbin/lsof | grep -c '/1-home/link/index/_20k.cfs'
> 23
> 
> This may still not point to my app having the bug, but it points to something not releasing IndexSearcher/IndexReader, as that is not getting GCed as before.  I did not change my logic for creating new IndexSearchers (inlined in my previous email).  On the other hand, this app has recently started getting a lot more search action, so perhaps it's just that the GC is not cleaning things up fast enough....
> I happen to have an lsof output from the same system from July.  I see the same thing there - a number of FDs open and pointing to the same .cfs index file.  Perhaps it's just that the JVM GC was able to clean things up then, and now it can't, because the CPU is maxed out.... really maxed out.

Otis, one more thing you could try is to call
SegmentInfos.setInfoStream(System.out).  This will cause lockless to
print details whenever it has to retry loading a segments_N file (just
in case something is going horribly wrong...).  This should only happen
when there is contention (writer committing just as reader is opening)
which depending on your application may or may not ever happen.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 00:11:20 2006
Return-Path: <java-user-return-24786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8321 invoked from network); 1 Dec 2006 00:11:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 00:11:18 -0000
Received: (qmail 6907 invoked by uid 500); 1 Dec 2006 00:11:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6872 invoked by uid 500); 1 Dec 2006 00:11:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6861 invoked by uid 99); 1 Dec 2006 00:11:21 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 16:11:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 16:11:10 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kB10AbxM014671
	for <java-user@lucene.apache.org>; Fri, 1 Dec 2006 02:10:37 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mc12aa87; 1 Dec 2006 02:10:00 +0200
Message-ID: <456F7302.6000805@teamware.com>
Date: Fri, 01 Dec 2006 11:10:42 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: indexing performance issue
References: <7617155.post@talk.nabble.com> <95301727-3233-4D98-BD79-44490038E433@apache.org> <7621903.post@talk.nabble.com> <A665E6A6-4715-43A3-9073-BDAF6213E825@apache.org>
In-Reply-To: <A665E6A6-4715-43A3-9073-BDAF6213E825@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 01 Dec 2006 02:10:38 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:
> 
> On Nov 30, 2006, at 10:54 AM, spinergywmy wrote:
> 
>>    For my scenario will be every time the users upload the single file, I
>> need to index that particular file. Previously was because the previous
>> version of pdfbox integrate with log4j.jar file and I believe is the
>> log4j.jar cause the indexing performance and takes up a lot of memory
>> resources. However, the latest version of pdfbox doesn't need to 
>> integrate
>> with log4j.jar, and I thought that will actually speed up the indexing
>> performance but the result was no.
>>
> 
> I would isolate PDFBox and do some performance testing on it, then 
> submit your questions on the PDFBox forums, as they will know better 
> about PDFBox performance.


I had a performance problem when I first started with PDFbox, which I raised on 
the PDFbox forum

http://sourceforge.net/forum/message.php?msg_id=3947448

but then I debugged it to the logging issue (logging appears on, but no 
appenders).  I've not tried the non log4j version so don't know if that is free 
of the problem.  After I disabled the logging correctly, performance was 
comparable to the other Java offerings I tried.

Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 00:45:15 2006
Return-Path: <java-user-return-24787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14999 invoked from network); 1 Dec 2006 00:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 00:45:14 -0000
Received: (qmail 54638 invoked by uid 500); 1 Dec 2006 00:45:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54605 invoked by uid 500); 1 Dec 2006 00:45:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54594 invoked by uid 99); 1 Dec 2006 00:45:14 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 16:45:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 16:45:03 -0800
Received: from nimitz (nimitz.teamw.com [10.142.128.10])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id kB10ibki016855
	for <java-user@lucene.apache.org>; Fri, 1 Dec 2006 02:44:37 +0200
Received: from [10.142.3.10] ([10.142.3.10]) by nimitz with ESMTP
	 id mc1289rb; 1 Dec 2006 02:44:00 +0200
Message-ID: <456F7AFA.9000501@teamware.com>
Date: Fri, 01 Dec 2006 11:44:42 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 1.5 (Windows/20051201)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: indexing performance issue
References: <7617155.post@talk.nabble.com>
In-Reply-To: <7617155.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Fri, 01 Dec 2006 02:44:37 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

spinergywmy wrote:
>    I have posted this question before and this time I found that it could be
> pdfbox problem and this pdfbox I downloaded doesn't use the log4j.jar. To
> index the app 2.13mb pdf file took me 17s and total time to upload a file is
> 18s.

Re: PFDBox.

I have a 2.5Mb test file that extracts in ~4 seconds.  CPU is AMD athlon 3500+ 
at 2200MHz.  While converting it creates 4.7MB file in temp directory 
(pdfboxnnnnn.tmp).

Another 3.7MB test file takes over 20 seconds to extract and it creates 15MB 
temp file.

It seems dependent on the data, but Cygwin's PDFtotext also has similar 
performance profile over the two documents.  I would revert to the PDFBox forum 
to continue the discussion.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 01:30:10 2006
Return-Path: <java-user-return-24788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24732 invoked from network); 1 Dec 2006 01:30:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 01:30:08 -0000
Received: (qmail 349 invoked by uid 500); 1 Dec 2006 01:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 311 invoked by uid 500); 1 Dec 2006 01:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 300 invoked by uid 99); 1 Dec 2006 01:30:11 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 17:30:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of vnguyen@ur.com designates 63.241.148.49 as permitted sender)
Received: from [63.241.148.49] (HELO iris.ur.com) (63.241.148.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 17:29:59 -0800
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by iris.ur.com with ESMTP; 01 Dec 2006 01:30:42 +0000
X-OriginatingIP: 10.6.134.35
X-InternalServer: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 30 Nov 2006 20:28:06 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C714E8.2AD644BC"
Subject: any ides on this type of analyzer?
Date: Thu, 30 Nov 2006 20:25:18 -0500
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E811742E620@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: any ides on this type of analyzer?
Thread-Index: AccU549+QEOVoPWWToegfMa6B7JUew==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Dec 2006 01:28:06.0323 (UTC) FILETIME=[F3C6A030:01C714E7]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C714E8.2AD644BC
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I've been trying to brainstorm on this but could not figure out a way to
go about this.

=20

Let's say I'm searching for "batman".  I want results that include:

=20

batman

bat man

bat-man

etc.

=20

or if I search screwdriver, I would want results to include:

=20

screwdriver

screw drivers

etc.

=20

I've tried using the SnowballAnalyzer.  I've thought about creating a
"SynonymAnalyzer" as described in the Lucene In Action book (but that
would mean I would have to know all the synonyms for each word I need to
index - at this point I do not).  Any suggestions on how to go about
this?

=20

Van


------_=_NextPart_001_01C714E8.2AD644BC--

From java-user-return-24789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 01:35:37 2006
Return-Path: <java-user-return-24789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25925 invoked from network); 1 Dec 2006 01:35:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 01:35:36 -0000
Received: (qmail 6165 invoked by uid 500); 1 Dec 2006 01:35:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5811 invoked by uid 500); 1 Dec 2006 01:35:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5800 invoked by uid 99); 1 Dec 2006 01:35:39 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 17:35:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [38.99.0.71] (HELO mail.guba.com) (38.99.0.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 17:35:27 -0800
Received: (qmail 30246 invoked from network); 1 Dec 2006 01:35:06 -0000
Received: from adsl-67-126-47-209.dsl.pltn13.pacbell.net (HELO ?192.168.213.232?) (smtp@67.126.47.209)
  by mail.guba.com with ESMTPA; 1 Dec 2006 01:35:06 -0000
From: Dennis Watson <dennis@guba.com>
Organization: Guba.com
To: java-user@lucene.apache.org
Subject: Re: any ides on this type of analyzer?
Date: Thu, 30 Nov 2006 17:35:38 -0800
User-Agent: KMail/1.8.2
References: <0D6A3C278F4DC346B98DF4D2F1397E811742E620@UREXCHVS3.ur.com>
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E811742E620@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200611301735.38926.dennis@guba.com>
X-Virus-Checked: Checked by ClamAV on apache.org

NGramAnalyzer should do this.  I think there is one in the contribs area or in 
LUA.


Dennis


On Thursday 30 November 2006 17:25, Van Nguyen wrote:
> I've been trying to brainstorm on this but could not figure out a way to
> go about this.
>
>
>
> Let's say I'm searching for "batman".  I want results that include:
>
>
>
> batman
>
> bat man
>
> bat-man
>
> etc.
>
>
>
> or if I search screwdriver, I would want results to include:
>
>
>
> screwdriver
>
> screw drivers
>
> etc.
>
>
>
> I've tried using the SnowballAnalyzer.  I've thought about creating a
> "SynonymAnalyzer" as described in the Lucene In Action book (but that
> would mean I would have to know all the synonyms for each word I need to
> index - at this point I do not).  Any suggestions on how to go about
> this?
>
>
>
> Van

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 02:07:21 2006
Return-Path: <java-user-return-24790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31127 invoked from network); 1 Dec 2006 02:07:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 02:07:21 -0000
Received: (qmail 21656 invoked by uid 500); 1 Dec 2006 02:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21619 invoked by uid 500); 1 Dec 2006 02:07:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21607 invoked by uid 99); 1 Dec 2006 02:07:24 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 18:07:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: domain of yseeley@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 18:07:12 -0800
Received: by nf-out-0910.google.com with SMTP id n28so3009064nfc
        for <java-user@lucene.apache.org>; Thu, 30 Nov 2006 18:06:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=kyjfnGIDGYmDhbhMgGYQw0PXmPwpEZKiaUiyjsnQwP1zDxZR9JwVopArE2ZAerHff/NJd5/+BL3+sou8UQ8MA9uP+05D+Lu00WSxZKmNdCDFU5SSvkgYdCrq8OtEwSSsdiirDGWK7HzgD7RcXuL5IWR2zQFzhYKOiuQJxbiyOys=
Received: by 10.82.139.17 with SMTP id m17mr956106bud.1164938810548;
        Thu, 30 Nov 2006 18:06:50 -0800 (PST)
Received: by 10.82.149.12 with HTTP; Thu, 30 Nov 2006 18:06:50 -0800 (PST)
Message-ID: <c68e39170611301806h69e3a654pb11b1135e0efad44@mail.gmail.com>
Date: Thu, 30 Nov 2006 21:06:50 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: 2.1-dev memory leak?
In-Reply-To: <456F6884.2030508@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20061130225408.92276.qmail@web50308.mail.yahoo.com>
	 <Pine.LNX.4.58.0611301456580.10503@hal.rescomp.berkeley.edu>
	 <c68e39170611301506v38c1b501q92dc7d02c877eb7@mail.gmail.com>
	 <456F6884.2030508@mikemccandless.com>
X-Google-Sender-Auth: b77896d7563f8979
X-Virus-Checked: Checked by ClamAV on apache.org

On 11/30/06, Michael McCandless <lucene@mikemccandless.com> wrote:
> I tested this in 1.9.1, 1.9.2, 2.0.0, and trunk, and all of these
> versions would run out of descriptors.  So I'm at a loss so far on
> where the regression is here ...

Right... no regression, just a Java limitation.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 05:16:43 2006
Return-Path: <java-user-return-24791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67963 invoked from network); 1 Dec 2006 05:16:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 05:16:42 -0000
Received: (qmail 80664 invoked by uid 500); 1 Dec 2006 05:16:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80630 invoked by uid 500); 1 Dec 2006 05:16:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80619 invoked by uid 99); 1 Dec 2006 05:16:44 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 21:16:44 -0800
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Nov 2006 21:16:32 -0800
Received: (qmail 6329 invoked by uid 60001); 1 Dec 2006 05:16:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=5a/jfOsDdVnLo4T0qGn4kOdc0fNVlCM+zAQNfpWCMn9rkkjw/4K7VhwuqMfiUieSIqugcq4JmEs5FvNjQQH2eJWT4MgBmFSfXQsIjMt7nZ/n4S5XH2cIZ7hcaj90Pf5BAsju5YNoryzO+2W1UqXpeXYYDq6xVHIMuMsTBuXsE7Y=  ;
Message-ID: <20061201051611.6327.qmail@web50303.mail.yahoo.com>
Received: from [74.65.202.166] by web50303.mail.yahoo.com via HTTP; Thu, 30 Nov 2006 21:16:11 PST
Date: Thu, 30 Nov 2006 21:16:11 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: 2.1-dev memory leak?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, in this case, I'm running out of memory, and open file descriptors ar=
e, I think, just an indicator that IndexSearchers are not getting closed pr=
operly.  I've already increased the open file descriptors limit, but I'm li=
mited to 2GB of RAM on a 32-bit box.=0A=0AI'll try explicitly closing searc=
hers now....some number of minutes later - bingo, that takes care of the le=
ak.=0A=0AFor the curious, this is what I think happened (the app in questio=
n is http://www.simpy.com/ ).  The app was burning the CPU like crazy (imag=
ine nearly double-digit load).  The IO didn't seem crazy (vmstat/iostat did=
n't show much bi/bo).  Still, after some digging around the source code, I =
found a place where I was just going through a few thousand Hits on each se=
arch against one particular Lucene index.  I fixed that problem (nothing to=
 do with IndexSearcher opening/closing), and at the same time I upgraded to=
 Lucene 2.1-dev.  This fix doubled the performance of the whole service.  I=
nstead of handling N requests/second, it was now handling 2-3*N requests/se=
cond.  The CPU is still running pretty hot, but the service is handling mor=
e search traffic.  My guess is that this increase in performance and throug=
hput simply increased the number of different Lucene indices (there are ten=
s of thousands of them per box) being searches, and exposed an issue that w=
as either hidden before, or that the JVM was able to handle before, and now=
 it no longer could.  I wish I had a little better grip on what exactly hap=
pened here, but I've got a stable application again.=0A=0AThanks for the he=
lp!=0A=0AOtis=0A=0A----- Original Message ----=0AFrom: Yonik Seeley <yonik@=
apache.org>=0ATo: java-user@lucene.apache.org=0ASent: Thursday, November 30=
, 2006 6:06:50 PM=0ASubject: Re: 2.1-dev memory leak?=0A=0AOn 11/30/06, Chr=
is Hostetter <hossman_lucene@fucit.org> wrote:=0A> : IndexSearchers open.  =
The other ones I "let go" without an explicit=0A> : close() call.  The assu=
mption is that the old IndexSearchers "expire",=0A> : that they get garbage=
 collected, as I'm no longer holding references to=0A> : them.=0A>=0A> yeah=
 ... that just seems really bad in general, i would try to explicitly=0A> c=
lose any searcher your purge from your cache.=0A=0AYeah, GC may kick off wh=
en memory gets low, but the GC system=0Aunfortunately doesn't know anything=
 about when file descriptors get=0Alow.=0A=0A-Yonik=0Ahttp://incubator.apac=
he.org/solr Solr, the open-source Lucene search server=0A=0A---------------=
------------------------------------------------------=0ATo unsubscribe, e-=
mail: java-user-unsubscribe@lucene.apache.org=0AFor additional commands, e-=
mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 05:32:02 2006
Return-Path: <java-user-return-24792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71452 invoked from network); 1 Dec 2006 05:32:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 05:32:01 -0000
Received: (qmail 91807 invoked by uid 500); 1 Dec 2006 05:32:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91775 invoked by uid 500); 1 Dec 2006 05:32:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91763 invoked by uid 99); 1 Dec 2006 05:32:02 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 21:32:02 -0800
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 30 Nov 2006 21:31:49 -0800
Received: (qmail 85463 invoked by uid 60001); 1 Dec 2006 05:31:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ImTVFG9zX5FnhTj3w1eTAHE2FKzavOEkqTEdndhoGCO/fYxoAML38F2dkWJRbn2oYT0AqswtfdUXty+jgEwxAq9xRcfOMEyVQYw2D+0oWZhLOTvLyKVXc213g+UTqoZ/eZNpp1s0ywxNNxGxXO8vD7xrR1TcooOof5d8lFsyCX0=  ;
Message-ID: <20061201053128.85461.qmail@web50305.mail.yahoo.com>
Received: from [74.65.202.166] by web50305.mail.yahoo.com via HTTP; Thu, 30 Nov 2006 21:31:28 PST
Date: Thu, 30 Nov 2006 21:31:28 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: 2.1-dev memory leak?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=ascii
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,=0A=0AThanks for looking into this.  I think your stress test may m=
atch my production environment.=0AI think System.gc() never guarantees anyt=
hing will happen, it's just a hint.=0A=0AI've got the following in one of m=
y classes now.  Maybe you can stick it in your stress test and look at that=
 last number at the bottom of this snippet.=0A=0A    private static final M=
emoryMXBean bean =3D ManagementFactory.getMemoryMXBean();=0A...=0A        L=
OG.info("Bean: " + bean);=0A        LOG.info("Heap memory usage: " + bean.g=
etHeapMemoryUsage());=0A        LOG.info("Non-heap memory usage: " + bean.g=
etNonHeapMemoryUsage());=0A        LOG.info("Objects pending finalization: =
" + bean.getObjectPendingFinalizationCount());=0A        long freeMemBefore=
 =3D Runtime.getRuntime().freeMemory();=0A        LOG.info("Running garbage=
 collector via bean...");=0A        bean.gc();=0A        long freeMemAfter =
=3D Runtime.getRuntime().freeMemory();=0A        LOG.info("Total Memory    =
  : " + Runtime.getRuntime().totalMemory());=0A        LOG.info("Max Memory=
        : " + Runtime.getRuntime().maxMemory());=0A        LOG.info("Free M=
emory Before: " + freeMemBefore);=0A        LOG.info("Free Memory After : "=
 + freeMemAfter);=0A        long memDelta =3D freeMemAfter-freeMemBefore;=
=0A        LOG.info("Free Memory Now   : " + memDelta);=0A        LOG.info(=
"Heap memory usage: " + bean.getHeapMemoryUsage());=0A        LOG.info("Non=
-heap memory usage: " + bean.getNonHeapMemoryUsage());=0A        LOG.info("=
Objects pending finalization: " + bean.getObjectPendingFinalizationCount())=
;=0A=0AOtis=0A=0A=0A----- Original Message ----=0AFrom: Michael McCandless =
<lucene@mikemccandless.com>=0ATo: java-user@lucene.apache.org=0ASent: Thurs=
day, November 30, 2006 6:25:56 PM=0ASubject: Re: 2.1-dev memory leak?=0A=0A=
Yonik Seeley wrote:=0A> On 11/30/06, Chris Hostetter <hossman_lucene@fucit.=
org> wrote:=0A>> : IndexSearchers open.  The other ones I "let go" without =
an explicit=0A>> : close() call.  The assumption is that the old IndexSearc=
hers "expire",=0A>> : that they get garbage collected, as I'm no longer hol=
ding references to=0A>> : them.=0A>>=0A>> yeah ... that just seems really b=
ad in general, i would try to explicitly=0A>> close any searcher your purge=
 from your cache.=0A> =0A> Yeah, GC may kick off when memory gets low, but =
the GC system=0A> unfortunately doesn't know anything about when file descr=
iptors get=0A> low.=0A=0AI actually ran some stress tests to explore this. =
 Admittedly, they=0Aare very stressful tests (open searcher, do 10 searches=
, don't close=0Ait, repeat).  And I definitely found GC would not kick in "=
often"=0Aenough because I would quickly exhaust file descriptors.=0A=0AThen=
, the scary thing is, when I called System.gc explicitly after=0Acreating e=
ach searcher, I still exhausted descriptors, which is really=0Aweird!  I th=
ink System.gc is not guaranteed to have called all=0Afinalizers before retu=
rning, but, I expected the explicit calls to=0Aat least close enough of the=
m to stay under the limit.=0A=0AI tested this in 1.9.1, 1.9.2, 2.0.0, and t=
runk, and all of these=0Aversions would run out of descriptors.  So I'm at =
a loss so far on=0Awhere the regression is here ...=0A=0AMike=0A=0A--------=
-------------------------------------------------------------=0ATo unsubscr=
ibe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional comma=
nds, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-24793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 01 07:17:10 2006
Return-Path: <java-user-return-24793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90404 invoked from network); 1 Dec 2006 07:17:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2006 07:17:09 -0000
Received: (qmail 85509 invoked by uid 500); 1 Dec 2006 07:17:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85045 invoked by uid 500); 1 Dec 2006 07:17:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85034 invoked by uid 99); 1 Dec 2006 07:17:10 -0000
Received: from herse.apache.org (HELO herse.apache.org) (140.211.11.133)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 23:17:10 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (herse.apache.org: local policy)
Received: from [203.200.106.89] (HELO HSNDA2KEXCH06.noida.headstrong.com) (203.200.106.89)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 30 Nov 2006 23:16:59 -0800
Received: from hsnda2ksexch.noida.headstrong.com ([10.100.0.102]) by HSNDA2KEXCH06.noida.headstrong.com with Microsoft SMTPSVC(5.0.2195.6713); Fri, 1 Dec 2006 12:47:49 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1807
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C71518.CE99E063"
Subject: Full text searching on documents saved in database as BLOB
Date: Fri, 1 Dec 2006 12:47:49 +0530
Content-Transfer-Encoding: 7bit
Message-ID: <8D616EEBB30A9544B71E2FBFC32119F00305CFCD@hsnda2ksexch.noida.headstrong.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Full text searching on documents saved in database as BLOB
Thread-Index: AccVGM54lrNCMtetT+SRxO+qe88bIg==
From: "Inderjeet Kalra" <Inderjeet.Kalra@headstrong.com>
To: <java-user@lucene.apache.org>
Importance: normal
Priority: normal
X-OriginalArrivalTime: 01 Dec 2006 07:17:49.0394 (UTC) FILETIME=[CEA92B20:01C71518]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C71518.CE99E063
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I have a query related to the full text searching on documents saved in
database as BLOB. In our application, we are planning to save our
documents in the database as BLOB and we have a requirement of searching
a document on it's meta data and the content of the document i.e. search
within document.=20

=20

Will Lucene serve our purpose, I have gone through the Lucene FAQs and
various issues on the site but I am unable to find any references to the
documents saved in the database as BLOB.

=20

1. How can I search on the metadata of the document saved in the
database as BLOB

2. How can I search on the content of the document i.e. search within
the document saved in the database as BLOB

=20

If anyone has implemented the same functionality, can you suggest me any
sample code so that i can start using lucene for the same.

=20

There is another search engine i.e. Oracle Text search engine which also
does the same but which one is better ?

=20

Thanks & Regards

Inderjeet

=20



=20
***The information transmitted is intended only for the person or entity =
to which it is addressed and may contain confidential and/or privileged =
material. Any review,retransmission,dissemination or other use of, or =
taking of any action in reliance upon, this information by persons or =
entities other than the intended recipient is prohibited. If you =
received this in error, please contact the sender and delete the =
material from any computer.***

------_=_NextPart_001_01C71518.CE99E063--

