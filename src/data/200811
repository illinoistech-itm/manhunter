From java-user-return-36938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 01 05:39:52 2008
Return-Path: <java-user-return-36938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21693 invoked from network); 1 Nov 2008 05:39:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2008 05:39:52 -0000
Received: (qmail 15152 invoked by uid 500); 1 Nov 2008 05:39:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15122 invoked by uid 500); 1 Nov 2008 05:39:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15111 invoked by uid 99); 1 Nov 2008 05:39:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 31 Oct 2008 22:39:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Nov 2008 05:38:36 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1587864rvb.5
        for <java-user@lucene.apache.org>; Fri, 31 Oct 2008 22:39:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:x-mailer:mime-version:content-type
         :content-transfer-encoding;
        bh=T6yBXtc+LfHbFgpfr3xwf5F4vXfURscQ7oa5MNvD7uE=;
        b=M0z/NgFVQ7pubNxeui8UOOpzIHJJ5tkf3ogPBuGJwlcem65KDfxJtHfgmR6ekXbRGG
         +LG8OPOe1gmuintGykIpKm5eLcXhK3gx8W6EgHLE+YGsLlu1715SmcFmNkjSGVLTepke
         dw+pO/xUUK/cc5eSii2/BASIGxsgECFQ/POsM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:x-mailer:mime-version:content-type
         :content-transfer-encoding;
        b=INDzPqtWnnvr2ckcWFTlrpcAMB5/NxYo51SOPdPiCJPLRctU/dcWAgnUEBEhKLaMJK
         0tl27eF1AI5Hj+qEPRwNSWYjwBDzUQoRun9AWEB+4yHjQKcVpRQtBbOn4gBHoX7BQFbc
         jiKXeoObjh232zkIAr/QkXyfBgkzl7mi2i09E=
Received: by 10.141.151.18 with SMTP id d18mr7204382rvo.75.1225517947417;
        Fri, 31 Oct 2008 22:39:07 -0700 (PDT)
Received: from zim ([189.107.137.13])
        by mx.google.com with ESMTPS id f21sm11212949rvb.5.2008.10.31.22.39.06
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 31 Oct 2008 22:39:07 -0700 (PDT)
Date: Sat, 1 Nov 2008 03:39:04 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Benchmarking my indexer
Message-Id: <20081101033904.6f2bc6df.almeidaraf@gmail.com>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I did an indexer that parses some files and indexes them using lucene. I
want to benchmark the whole thing, so I'd like to count the tokens
being indexed so I can calculate the average number of indexed tokens
per second. Is there a way to count the number of tokens on a document?
While I'm at it, I will also need to calculate the amount of memory my
java program used (peak, avg, etc), what java tool would you suggest me
to figure that out?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 01 17:03:47 2008
Return-Path: <java-user-return-36939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44764 invoked from network); 1 Nov 2008 17:03:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2008 17:03:47 -0000
Received: (qmail 47487 invoked by uid 500); 1 Nov 2008 17:03:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47444 invoked by uid 500); 1 Nov 2008 17:03:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47433 invoked by uid 99); 1 Nov 2008 17:03:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Nov 2008 10:03:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.191] (HELO n73.bullet.mail.sp1.yahoo.com) (98.136.44.191)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 01 Nov 2008 17:02:27 +0000
Received: from [216.252.122.219] by n73.bullet.mail.sp1.yahoo.com with NNFMP; 01 Nov 2008 17:03:07 -0000
Received: from [69.147.65.165] by t4.bullet.sp1.yahoo.com with NNFMP; 01 Nov 2008 17:03:07 -0000
Received: from [127.0.0.1] by omp500.mail.sp1.yahoo.com with NNFMP; 01 Nov 2008 17:03:07 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 423693.77446.bm@omp500.mail.sp1.yahoo.com
Received: (qmail 9042 invoked by uid 60001); 1 Nov 2008 17:03:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=VOZ90M3ebrc4EArws+kChLPcixy93cqXogm+Zhz88lO5+dn0CJEslkBCGuy9jeewypS2UrOLeQr6W+z0DlVknaVxk29sJgvjcJdsBioNNU/hvy/os1vDrX/WkjyNGhMgIrHk8DHtjko8wNkNV1eaTZLa4RFIAliw4ScDPShGi9Q=;
X-YMail-OSG: YZgoQjwVM1ldZi6MO_V74gmC2b5skWRB_n3bjTv3ZG6dRVEqzGfPfUKQ9tL6psbTHYHaBeVQ4T7NQrDmCGxa8njant057MdCC.J_yFkBHheJoAvKjSzDD8izaPL.BInz78_X4uO1K.pbVA2K4dVba4N2
Received: from [93.96.69.199] by web45106.mail.sp1.yahoo.com via HTTP; Sat, 01 Nov 2008 10:03:07 PDT
X-Mailer: YahooMailWebService/0.7.247.3
Date: Sat, 1 Nov 2008 10:03:07 -0700 (PDT)
From: semelak ss <semelak_14@yahoo.com>
Reply-To: semelak_14@yahoo.com
Subject: Re: Exact Phrase Query
To: java-user@lucene.apache.org
In-Reply-To: <741099.69873.qm@web45107.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <321794.7426.qm@web45106.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

When using Luke,, searching for the followings gives me hits now:
"insurer storm"
The synatx of the query as parsed by Luke is :
word:"insurer storm"

The code I am using is as follows:
----------------------
_searcher = new IndexSearcher(INDEX_DIR);
_parser = new QueryParser("word", new WhitespaceAnalyzer());
Query q = _parser.parse(query);
System.out.println(q.toString()); // this outputs ->  word:"insurer storm"
TopDocs vv= _searcher.search(q, 1);
Hits tmph = _searcher.search(q);
---------------------------------

both vv and tmph give no results (their size is 0)



--- On Fri, 10/31/08, semelak ss <semelak_14@yahoo.com> wrote:

> From: semelak ss <semelak_14@yahoo.com>
> Subject: Re: Exact Phrase Query
> To: java-user@lucene.apache.org
> Date: Friday, October 31, 2008, 9:41 AM
> For indexing, I use the following:
> ===========
> writer = new IndexWriter(INDEX_DIR,new
> WhitespaceAnalyzer(),true
> ,IndexWriter.MaxFieldLength.UNLIMITED);
> Document doc = new Document();            
> String tmpword = this.getProperForm(word1, word2);
> doc.add(new Field("WORDS", tmpword,
> Field.Store.YES, Field.Index.TOKENIZED));
> doc.add(new Field("score", Double.toString(score)
> , Field.Store.YES, Field.Index.NO));
> writer.addDocument(adoc);
> ============
> 
> For searching,, I use the following (query =
> "homeowner work" gives no hits ,,
> "homeowner" gives results):
> ============
> _searcher = new IndexSearcher(INDEX_DIR);
> _parser = new QueryParser("WORDS", new
> WhitespaceAnalyzer());
> q = _parser.parse(query);
> Hits tmph = _searcher.search(q);
> 
> ============
> 
> A sample document (contained in the index) is the
> following:
> 
> filed: value
> -----: -----
> WORDS:"homeowners work"
> score: 0.1515417
> 
> 
> Also, please note that I tried using Luke to browse the
> index and the fields seem to be filled out with words just
> as expected. Searching, however, with exact phrases yield no
> answer. Searching with single words gives hits.
> 
> 
> 
> 
> --- On Fri, 10/31/08, Erick Erickson
> <erickerickson@gmail.com> wrote:
> 
> > From: Erick Erickson <erickerickson@gmail.com>
> > Subject: Re: Exact Phrase Query
> > To: java-user@lucene.apache.org, semelak_14@yahoo.com
> > Date: Friday, October 31, 2008, 5:57 AM
> > You need to give us more information for meaningful
> replies,
> > like
> > the analyzers you use when indexing and searching, the
> > exact
> > query you use, perhaps the snippets of the code, etc.
> > 
> > That said, things to check:
> > Get a copy of Luke and examine your index. You can
> even
> > run queries through that tool and see what gets sent
> to the
> > database and what responses you get with those
> analyzers.
> > 
> > Make sure you're analyzers at query and index time
> are
> > doing
> > what you expect. Query.toString() is your friend. If
> you
> > don't
> > take the time to understand analyzers, you'll
> spend
> > lots of time
> > spinning your wheels.
> > 
> > And you really should wait more than 9 minutes before
> > pinging
> > the list....
> > 
> > Best
> > Erick
> > 
> > 
> > 
> > On Fri, Oct 31, 2008 at 8:44 AM, semelak ss
> > <semelak_14@yahoo.com> wrote:
> > 
> > > I have documents containing multiple words in the
> the
> > field "word"
> > > for example, one of the documents contain in the
> field
> > "word" the
> > > following:
> > > homeowners work
> > >
> > > When searching for single words (i.e. homewoners
> ) I
> > get hits.
> > >
> > > However, searching for the exact phrase
> > "homeowners work" gives me no
> > > hits!! I use the double quotes when searching for
> > exact phrases.
> > >
> > > Any idea why ??
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >
> > >
> 
> 
>       
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org


      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 01 22:33:35 2008
Return-Path: <java-user-return-36940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73566 invoked from network); 1 Nov 2008 22:33:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Nov 2008 22:33:34 -0000
Received: (qmail 26590 invoked by uid 500); 1 Nov 2008 22:33:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26563 invoked by uid 500); 1 Nov 2008 22:33:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26552 invoked by uid 99); 1 Nov 2008 22:33:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Nov 2008 15:33:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.46] (HELO n58.bullet.mail.sp1.yahoo.com) (98.136.44.46)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 01 Nov 2008 22:32:14 +0000
Received: from [216.252.122.219] by n58.bullet.mail.sp1.yahoo.com with NNFMP; 01 Nov 2008 22:31:37 -0000
Received: from [69.147.65.164] by t4.bullet.sp1.yahoo.com with NNFMP; 01 Nov 2008 22:31:37 -0000
Received: from [127.0.0.1] by omp409.mail.sp1.yahoo.com with NNFMP; 01 Nov 2008 22:31:37 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 421316.20462.bm@omp409.mail.sp1.yahoo.com
Received: (qmail 86654 invoked by uid 60001); 1 Nov 2008 22:31:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=FRX6hpWMx4wJpEzk0tl0gx4NLu4jfs8MLonp7smysMoUPyNlar95ab9gyLc6ZpKMuz0hpREXCFU47qWK5nfWM7MGeiFN7Oezeu/joyxjwubRYeUQ41iOdH5igKDG4T7AjpdtRMlfSaaQw2xhL12HfyXbpSWFSPq87gGeKOFrAak=;
X-YMail-OSG: _1c_MksVM1nqnDZBkzxLqHAqJRv_IT6j5NVTQjAYdwSpMD9nFK7t5pnZnVJW6f5CyJeIyrgX5rKszWpLjAen0e0cJ1nXD1_HE84uKmvymkfjiqoPLwimq3JQI._wk8Dy87eVrYdENMuNFnSYWBzye.D7
Received: from [93.96.69.199] by web45105.mail.sp1.yahoo.com via HTTP; Sat, 01 Nov 2008 15:31:37 PDT
X-Mailer: YahooMailWebService/0.7.247.3
Date: Sat, 1 Nov 2008 15:31:37 -0700 (PDT)
From: semelak ss <semelak_14@yahoo.com>
Reply-To: semelak_14@yahoo.com
Subject: Re: Exact Phrase Query
To: java-user@lucene.apache.org
In-Reply-To: <321794.7426.qm@web45106.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <292008.85046.qm@web45105.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I am not entirely sure if this can be the cause, but here is something I thought might be related:
The idea is have an index containing documents where each document has a combination of two words : word1 and word2 and a score for these two words.
The index would be searched first if the two words exist, and if not the score would be computed on the fly and then added to the index. This process would be repeated thousands of times for thousands of words.

Hence, I have an indexwriter and a searcher
--------------------
RAMDirectory ramDir = new RAMDirectory(INDEX_DIR);
IndexWriter  ramWriter = new IndexWriter(ramDir, new WhitespaceAnalyzer(), true,IndexWriter.MaxFieldLength.UNLIMITED);
writer = new IndexWriter(INDEX_DIR,new WhitespaceAnalyzer(),true ,IndexWriter.MaxFieldLength.UNLIMITED);

FSDirectory fsdir = FSDirectory.getDirectory(INDEX_DIR);
IndexReader ir = IndexReader.open(fsdir);
_searcher = new IndexSearcher(ir);
--------------------

The indexWriter is closed near the end of the program (it's open while searching for words combinations ).

When using Luke,, I was able to search successfully for exact phrases. My guess is that the problem I am facing has something to do with the indexWriter, but I can not pinpoint the exact cause of the problem.


--- On Sat, 11/1/08, semelak ss <semelak_14@yahoo.com> wrote:

> From: semelak ss <semelak_14@yahoo.com>
> Subject: Re: Exact Phrase Query
> To: java-user@lucene.apache.org
> Date: Saturday, November 1, 2008, 10:03 AM
> When using Luke,, searching for the followings gives me hits
> now:
> "insurer storm"
> The synatx of the query as parsed by Luke is :
> word:"insurer storm"
> 
> The code I am using is as follows:
> ----------------------
> _searcher = new IndexSearcher(INDEX_DIR);
> _parser = new QueryParser("word", new
> WhitespaceAnalyzer());
> Query q = _parser.parse(query);
> System.out.println(q.toString()); // this outputs -> 
> word:"insurer storm"
> TopDocs vv= _searcher.search(q, 1);
> Hits tmph = _searcher.search(q);
> ---------------------------------
> 
> both vv and tmph give no results (their size is 0)
> 
> 
> 
> --- On Fri, 10/31/08, semelak ss
> <semelak_14@yahoo.com> wrote:
> 
> > From: semelak ss <semelak_14@yahoo.com>
> > Subject: Re: Exact Phrase Query
> > To: java-user@lucene.apache.org
> > Date: Friday, October 31, 2008, 9:41 AM
> > For indexing, I use the following:
> > ===========
> > writer = new IndexWriter(INDEX_DIR,new
> > WhitespaceAnalyzer(),true
> > ,IndexWriter.MaxFieldLength.UNLIMITED);
> > Document doc = new Document();            
> > String tmpword = this.getProperForm(word1, word2);
> > doc.add(new Field("WORDS", tmpword,
> > Field.Store.YES, Field.Index.TOKENIZED));
> > doc.add(new Field("score",
> Double.toString(score)
> > , Field.Store.YES, Field.Index.NO));
> > writer.addDocument(adoc);
> > ============
> > 
> > For searching,, I use the following (query =
> > "homeowner work" gives no hits ,,
> > "homeowner" gives results):
> > ============
> > _searcher = new IndexSearcher(INDEX_DIR);
> > _parser = new QueryParser("WORDS", new
> > WhitespaceAnalyzer());
> > q = _parser.parse(query);
> > Hits tmph = _searcher.search(q);
> > 
> > ============
> > 
> > A sample document (contained in the index) is the
> > following:
> > 
> > filed: value
> > -----: -----
> > WORDS:"homeowners work"
> > score: 0.1515417
> > 
> > 
> > Also, please note that I tried using Luke to browse
> the
> > index and the fields seem to be filled out with words
> just
> > as expected. Searching, however, with exact phrases
> yield no
> > answer. Searching with single words gives hits.
> > 
> > 
> > 
> > 
> > --- On Fri, 10/31/08, Erick Erickson
> > <erickerickson@gmail.com> wrote:
> > 
> > > From: Erick Erickson
> <erickerickson@gmail.com>
> > > Subject: Re: Exact Phrase Query
> > > To: java-user@lucene.apache.org,
> semelak_14@yahoo.com
> > > Date: Friday, October 31, 2008, 5:57 AM
> > > You need to give us more information for
> meaningful
> > replies,
> > > like
> > > the analyzers you use when indexing and
> searching, the
> > > exact
> > > query you use, perhaps the snippets of the code,
> etc.
> > > 
> > > That said, things to check:
> > > Get a copy of Luke and examine your index. You
> can
> > even
> > > run queries through that tool and see what gets
> sent
> > to the
> > > database and what responses you get with those
> > analyzers.
> > > 
> > > Make sure you're analyzers at query and index
> time
> > are
> > > doing
> > > what you expect. Query.toString() is your friend.
> If
> > you
> > > don't
> > > take the time to understand analyzers, you'll
> > spend
> > > lots of time
> > > spinning your wheels.
> > > 
> > > And you really should wait more than 9 minutes
> before
> > > pinging
> > > the list....
> > > 
> > > Best
> > > Erick
> > > 
> > > 
> > > 
> > > On Fri, Oct 31, 2008 at 8:44 AM, semelak ss
> > > <semelak_14@yahoo.com> wrote:
> > > 
> > > > I have documents containing multiple words
> in the
> > the
> > > field "word"
> > > > for example, one of the documents contain in
> the
> > field
> > > "word" the
> > > > following:
> > > > homeowners work
> > > >
> > > > When searching for single words (i.e.
> homewoners
> > ) I
> > > get hits.
> > > >
> > > > However, searching for the exact phrase
> > > "homeowners work" gives me no
> > > > hits!! I use the double quotes when
> searching for
> > > exact phrases.
> > > >
> > > > Any idea why ??
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > >
> > > >
> > 
> > 
> >       
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> 
> 
>       
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org


      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 02 00:07:15 2008
Return-Path: <java-user-return-36941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89802 invoked from network); 2 Nov 2008 00:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2008 00:07:15 -0000
Received: (qmail 57714 invoked by uid 500); 2 Nov 2008 00:07:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57685 invoked by uid 500); 2 Nov 2008 00:07:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57674 invoked by uid 99); 2 Nov 2008 00:07:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Nov 2008 17:07:14 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 00:05:57 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1886561rvb.5
        for <java-user@lucene.apache.org>; Sat, 01 Nov 2008 17:06:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=MrWS1oo0stxHQVIozb55g6IKELJTuZpN5T81AmZ/xnA=;
        b=iVY9tFlwNQSLmjMdDFaoHcmsv4Tm4rJAOYyCvxCEYRYx2vnjl1DAkltqXXo+goTRNa
         EHMar4oB3DyqZODyrcYMvKx3f4AQjcoOp1nj+Q2M59wT3iMCc0ZM91MtEDEPvaG8BUfG
         0yrfGeLmXmNx5WBNGLA+pCk2uIu4rNQynHbDQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=cBYgbc2vnBd6gxe0kIUBwp2XuP7fW0Laj/2Y4Nx1c7dg3387S/1rd+MbiUHjUdf39a
         Gr/tyL+DUAcwiUqelalNWHf7BnsRINSkdPnB1Xg7JMnbwY0XJhlshYlgPy5g06twGbzC
         z4rT0GDFWznxZuc7OGel1R47uJ4DEXoL4ZIXo=
Received: by 10.141.133.14 with SMTP id k14mr7819009rvn.127.1225584388014;
        Sat, 01 Nov 2008 17:06:28 -0700 (PDT)
Received: by 10.141.136.21 with HTTP; Sat, 1 Nov 2008 17:06:27 -0700 (PDT)
Message-ID: <359a92830811011706l5b14e13y62a92e383515fb39@mail.gmail.com>
Date: Sat, 1 Nov 2008 20:06:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, semelak_14@yahoo.com
Subject: Re: Exact Phrase Query
In-Reply-To: <292008.85046.qm@web45105.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2819_5076628.1225584387999"
References: <321794.7426.qm@web45106.mail.sp1.yahoo.com>
	 <292008.85046.qm@web45105.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2819_5076628.1225584387999
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

ahhhh, finally. I'm almost completely sure you can't *write* to a
RAMDirectory
and expect the underlying FSDir to be updated. The intent of RAMDirectorys
is to *read* in an index from disk and keep it in memory. Essentially I
believe
that your RAMDirecotry constructor is taking a snapshot of the underlying
disk index, modifying that in-memory copy, and throwing it away without
ever writing it to disk. I wouldn't expect opening the FSDirectory after
writing
to the RAMDirectory to find anything. Ever.

If you really need the RAMDir, I suspect you'll have to open an FS-based
writer as well as a RAM-based writer, and write to both when necessary.
You'll probably also have to open/search your RAM-based index as the
faster alternative to re-opening the FS-based index. Either way, reopening
the index is probably expensive, are you sure you need to? Is there a way
to keep your information in an internal data structure for some period of
time?

Best
Erick



On Sat, Nov 1, 2008 at 6:31 PM, semelak ss <semelak_14@yahoo.com> wrote:

> I am not entirely sure if this can be the cause, but here is something I
> thought might be related:
> The idea is have an index containing documents where each document has a
> combination of two words : word1 and word2 and a score for these two words.
> The index would be searched first if the two words exist, and if not the
> score would be computed on the fly and then added to the index. This process
> would be repeated thousands of times for thousands of words.
>
> Hence, I have an indexwriter and a searcher
> --------------------
> RAMDirectory ramDir = new RAMDirectory(INDEX_DIR);
> IndexWriter  ramWriter = new IndexWriter(ramDir, new WhitespaceAnalyzer(),
> true,IndexWriter.MaxFieldLength.UNLIMITED);
> writer = new IndexWriter(INDEX_DIR,new WhitespaceAnalyzer(),true
> ,IndexWriter.MaxFieldLength.UNLIMITED);
>
> FSDirectory fsdir = FSDirectory.getDirectory(INDEX_DIR);
> IndexReader ir = IndexReader.open(fsdir);
> _searcher = new IndexSearcher(ir);
> --------------------
>
> The indexWriter is closed near the end of the program (it's open while
> searching for words combinations ).
>
> When using Luke,, I was able to search successfully for exact phrases. My
> guess is that the problem I am facing has something to do with the
> indexWriter, but I can not pinpoint the exact cause of the problem.
>
>
> --- On Sat, 11/1/08, semelak ss <semelak_14@yahoo.com> wrote:
>
> > From: semelak ss <semelak_14@yahoo.com>
> > Subject: Re: Exact Phrase Query
> > To: java-user@lucene.apache.org
> > Date: Saturday, November 1, 2008, 10:03 AM
> > When using Luke,, searching for the followings gives me hits
> > now:
> > "insurer storm"
> > The synatx of the query as parsed by Luke is :
> > word:"insurer storm"
> >
> > The code I am using is as follows:
> > ----------------------
> > _searcher = new IndexSearcher(INDEX_DIR);
> > _parser = new QueryParser("word", new
> > WhitespaceAnalyzer());
> > Query q = _parser.parse(query);
> > System.out.println(q.toString()); // this outputs ->
> > word:"insurer storm"
> > TopDocs vv= _searcher.search(q, 1);
> > Hits tmph = _searcher.search(q);
> > ---------------------------------
> >
> > both vv and tmph give no results (their size is 0)
> >
> >
> >
> > --- On Fri, 10/31/08, semelak ss
> > <semelak_14@yahoo.com> wrote:
> >
> > > From: semelak ss <semelak_14@yahoo.com>
> > > Subject: Re: Exact Phrase Query
> > > To: java-user@lucene.apache.org
> > > Date: Friday, October 31, 2008, 9:41 AM
> > > For indexing, I use the following:
> > > ===========
> > > writer = new IndexWriter(INDEX_DIR,new
> > > WhitespaceAnalyzer(),true
> > > ,IndexWriter.MaxFieldLength.UNLIMITED);
> > > Document doc = new Document();
> > > String tmpword = this.getProperForm(word1, word2);
> > > doc.add(new Field("WORDS", tmpword,
> > > Field.Store.YES, Field.Index.TOKENIZED));
> > > doc.add(new Field("score",
> > Double.toString(score)
> > > , Field.Store.YES, Field.Index.NO));
> > > writer.addDocument(adoc);
> > > ============
> > >
> > > For searching,, I use the following (query =
> > > "homeowner work" gives no hits ,,
> > > "homeowner" gives results):
> > > ============
> > > _searcher = new IndexSearcher(INDEX_DIR);
> > > _parser = new QueryParser("WORDS", new
> > > WhitespaceAnalyzer());
> > > q = _parser.parse(query);
> > > Hits tmph = _searcher.search(q);
> > >
> > > ============
> > >
> > > A sample document (contained in the index) is the
> > > following:
> > >
> > > filed: value
> > > -----: -----
> > > WORDS:"homeowners work"
> > > score: 0.1515417
> > >
> > >
> > > Also, please note that I tried using Luke to browse
> > the
> > > index and the fields seem to be filled out with words
> > just
> > > as expected. Searching, however, with exact phrases
> > yield no
> > > answer. Searching with single words gives hits.
> > >
> > >
> > >
> > >
> > > --- On Fri, 10/31/08, Erick Erickson
> > > <erickerickson@gmail.com> wrote:
> > >
> > > > From: Erick Erickson
> > <erickerickson@gmail.com>
> > > > Subject: Re: Exact Phrase Query
> > > > To: java-user@lucene.apache.org,
> > semelak_14@yahoo.com
> > > > Date: Friday, October 31, 2008, 5:57 AM
> > > > You need to give us more information for
> > meaningful
> > > replies,
> > > > like
> > > > the analyzers you use when indexing and
> > searching, the
> > > > exact
> > > > query you use, perhaps the snippets of the code,
> > etc.
> > > >
> > > > That said, things to check:
> > > > Get a copy of Luke and examine your index. You
> > can
> > > even
> > > > run queries through that tool and see what gets
> > sent
> > > to the
> > > > database and what responses you get with those
> > > analyzers.
> > > >
> > > > Make sure you're analyzers at query and index
> > time
> > > are
> > > > doing
> > > > what you expect. Query.toString() is your friend.
> > If
> > > you
> > > > don't
> > > > take the time to understand analyzers, you'll
> > > spend
> > > > lots of time
> > > > spinning your wheels.
> > > >
> > > > And you really should wait more than 9 minutes
> > before
> > > > pinging
> > > > the list....
> > > >
> > > > Best
> > > > Erick
> > > >
> > > >
> > > >
> > > > On Fri, Oct 31, 2008 at 8:44 AM, semelak ss
> > > > <semelak_14@yahoo.com> wrote:
> > > >
> > > > > I have documents containing multiple words
> > in the
> > > the
> > > > field "word"
> > > > > for example, one of the documents contain in
> > the
> > > field
> > > > "word" the
> > > > > following:
> > > > > homeowners work
> > > > >
> > > > > When searching for single words (i.e.
> > homewoners
> > > ) I
> > > > get hits.
> > > > >
> > > > > However, searching for the exact phrase
> > > > "homeowners work" gives me no
> > > > > hits!! I use the double quotes when
> > searching for
> > > > exact phrases.
> > > > >
> > > > > Any idea why ??
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail:
> > > > java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:
> > > > java-user-help@lucene.apache.org
> > > > >
> > > > >
> > >
> > >
> > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2819_5076628.1225584387999--

From java-user-return-36942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 02 12:12:29 2008
Return-Path: <java-user-return-36942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36790 invoked from network); 2 Nov 2008 12:12:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2008 12:12:28 -0000
Received: (qmail 81606 invoked by uid 500); 2 Nov 2008 12:12:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81580 invoked by uid 500); 2 Nov 2008 12:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81569 invoked by uid 99); 2 Nov 2008 12:12:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 04:12:26 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 12:11:10 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 696F3109F31
	for <java-user@lucene.apache.org>; Sun,  2 Nov 2008 04:11:21 -0800 (PST)
Message-Id: <42D6517E-5B16-4B1F-9EDE-D91FE6EC1F5D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20081101033904.6f2bc6df.almeidaraf@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Benchmarking my indexer
Date: Sun, 2 Nov 2008 07:11:20 -0500
References: <20081101033904.6f2bc6df.almeidaraf@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 1, 2008, at 1:39 AM, Rafael Cunha de Almeida wrote:

> Hello,
>
> I did an indexer that parses some files and indexes them using  
> lucene. I
> want to benchmark the whole thing, so I'd like to count the tokens
> being indexed so I can calculate the average number of indexed tokens
> per second. Is there a way to count the number of tokens on a  
> document?

I think you would have to add a "CountingTokenFilter", that you write  
and manage as you add documents.  Or, you could just take the total #  
of tokens / by the number of docs and use the average.  That can be  
obtained w/o writing a new TokenFilter.


>
> While I'm at it, I will also need to calculate the amount of memory my
> java program used (peak, avg, etc), what java tool would you suggest  
> me
> to figure that out?


Would JConsole work: http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html 
   help?  I'm not sure what people use here

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 02 15:27:08 2008
Return-Path: <java-user-return-36943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60977 invoked from network); 2 Nov 2008 15:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2008 15:27:06 -0000
Received: (qmail 57082 invoked by uid 500); 2 Nov 2008 15:27:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57050 invoked by uid 500); 2 Nov 2008 15:27:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57035 invoked by uid 99); 2 Nov 2008 15:27:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 07:27:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.40] (HELO n60.bullet.mail.sp1.yahoo.com) (98.136.44.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 02 Nov 2008 15:25:47 +0000
Received: from [216.252.122.218] by n60.bullet.mail.sp1.yahoo.com with NNFMP; 02 Nov 2008 15:26:27 -0000
Received: from [69.147.84.88] by t3.bullet.sp1.yahoo.com with NNFMP; 02 Nov 2008 15:26:27 -0000
Received: from [127.0.0.1] by omp204.mail.sp1.yahoo.com with NNFMP; 02 Nov 2008 15:26:27 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 567664.87015.bm@omp204.mail.sp1.yahoo.com
Received: (qmail 30959 invoked by uid 60001); 2 Nov 2008 15:26:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=CMr1FH/mOAc1u4Dm3k9X1GXo6dZ9CLJPQQr8ETfKLHAjyiYdRKfRoIfgRu2eAlEvYjn4Ivso8UlcFknRshWYCWstw+kkIiTHIRtMIXxJp8jb0JNRC1tlfQTt22t3jJYHjdHBK1Xj2VnLcM5ImzRSjfltbWFxYmW+MGE2xyk6300=;
X-YMail-OSG: v5XVjdIVM1mnDm7NXkeTamy4wuJYrv6MeDS3mWdT4efyxavaSN2QgStx6OC4Cf.tgqXXofDyHNEI8FK5ZMylJR4p0PSDKSsvgl0ubknO6SLSl10WRID4ZiCEc9L_ah0iFRz1qIvCkzKRcTnAqa2Gq.aI
Received: from [93.96.69.199] by web45115.mail.sp1.yahoo.com via HTTP; Sun, 02 Nov 2008 07:26:26 PST
X-Mailer: YahooMailWebService/0.7.247.3
Date: Sun, 2 Nov 2008 07:26:26 -0800 (PST)
From: semelak ss <semelak_14@yahoo.com>
Reply-To: semelak_14@yahoo.com
Subject: Re: Exact Phrase Query
To: java-user@lucene.apache.org
In-Reply-To: <359a92830811011706l5b14e13y62a92e383515fb39@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <317359.19308.qm@web45115.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I was in a hurry when copying and pasting the code. What I've been using is only writer. RamWriter was never used as it never really worked (thanks to you, I now understand the reason).

The above is not really related to the problem I was facing. I modified my code so that an indexreader/indexwriter is opened right before the words comparison takes place and is closed right after. (currently not using RamDir due to the problems faced earlier)

Considering that the program is basically a loop that does thousands and thousands of comparison, this is definitely not the most efficient way of handling things.

I would appreciate any input in this regard on how to improve the efficiency. 



--- On Sat, 11/1/08, Erick Erickson <erickerickson@gmail.com> wrote:

> From: Erick Erickson <erickerickson@gmail.com>
> Subject: Re: Exact Phrase Query
> To: java-user@lucene.apache.org, semelak_14@yahoo.com
> Date: Saturday, November 1, 2008, 5:06 PM
> ahhhh, finally. I'm almost completely sure you can't
> *write* to a
> RAMDirectory
> and expect the underlying FSDir to be updated. The intent
> of RAMDirectorys
> is to *read* in an index from disk and keep it in memory.
> Essentially I
> believe
> that your RAMDirecotry constructor is taking a snapshot of
> the underlying
> disk index, modifying that in-memory copy, and throwing it
> away without
> ever writing it to disk. I wouldn't expect opening the
> FSDirectory after
> writing
> to the RAMDirectory to find anything. Ever.
> 
> If you really need the RAMDir, I suspect you'll have to
> open an FS-based
> writer as well as a RAM-based writer, and write to both
> when necessary.
> You'll probably also have to open/search your RAM-based
> index as the
> faster alternative to re-opening the FS-based index. Either
> way, reopening
> the index is probably expensive, are you sure you need to?
> Is there a way
> to keep your information in an internal data structure for
> some period of
> time?
> 
> Best
> Erick
> 
> 
> 
> On Sat, Nov 1, 2008 at 6:31 PM, semelak ss
> <semelak_14@yahoo.com> wrote:
> 
> > I am not entirely sure if this can be the cause, but
> here is something I
> > thought might be related:
> > The idea is have an index containing documents where
> each document has a
> > combination of two words : word1 and word2 and a score
> for these two words.
> > The index would be searched first if the two words
> exist, and if not the
> > score would be computed on the fly and then added to
> the index. This process
> > would be repeated thousands of times for thousands of
> words.
> >
> > Hence, I have an indexwriter and a searcher
> > --------------------
> > RAMDirectory ramDir = new RAMDirectory(INDEX_DIR);
> > IndexWriter  ramWriter = new IndexWriter(ramDir, new
> WhitespaceAnalyzer(),
> > true,IndexWriter.MaxFieldLength.UNLIMITED);
> > writer = new IndexWriter(INDEX_DIR,new
> WhitespaceAnalyzer(),true
> > ,IndexWriter.MaxFieldLength.UNLIMITED);
> >
> > FSDirectory fsdir =
> FSDirectory.getDirectory(INDEX_DIR);
> > IndexReader ir = IndexReader.open(fsdir);
> > _searcher = new IndexSearcher(ir);
> > --------------------
> >
> > The indexWriter is closed near the end of the program
> (it's open while
> > searching for words combinations ).
> >
> > When using Luke,, I was able to search successfully
> for exact phrases. My
> > guess is that the problem I am facing has something to
> do with the
> > indexWriter, but I can not pinpoint the exact cause of
> the problem.
> >
> >
> > --- On Sat, 11/1/08, semelak ss
> <semelak_14@yahoo.com> wrote:
> >
> > > From: semelak ss <semelak_14@yahoo.com>
> > > Subject: Re: Exact Phrase Query
> > > To: java-user@lucene.apache.org
> > > Date: Saturday, November 1, 2008, 10:03 AM
> > > When using Luke,, searching for the followings
> gives me hits
> > > now:
> > > "insurer storm"
> > > The synatx of the query as parsed by Luke is :
> > > word:"insurer storm"
> > >
> > > The code I am using is as follows:
> > > ----------------------
> > > _searcher = new IndexSearcher(INDEX_DIR);
> > > _parser = new QueryParser("word", new
> > > WhitespaceAnalyzer());
> > > Query q = _parser.parse(query);
> > > System.out.println(q.toString()); // this outputs
> ->
> > > word:"insurer storm"
> > > TopDocs vv= _searcher.search(q, 1);
> > > Hits tmph = _searcher.search(q);
> > > ---------------------------------
> > >
> > > both vv and tmph give no results (their size is
> 0)
> > >
> > >
> > >
> > > --- On Fri, 10/31/08, semelak ss
> > > <semelak_14@yahoo.com> wrote:
> > >
> > > > From: semelak ss
> <semelak_14@yahoo.com>
> > > > Subject: Re: Exact Phrase Query
> > > > To: java-user@lucene.apache.org
> > > > Date: Friday, October 31, 2008, 9:41 AM
> > > > For indexing, I use the following:
> > > > ===========
> > > > writer = new IndexWriter(INDEX_DIR,new
> > > > WhitespaceAnalyzer(),true
> > > > ,IndexWriter.MaxFieldLength.UNLIMITED);
> > > > Document doc = new Document();
> > > > String tmpword = this.getProperForm(word1,
> word2);
> > > > doc.add(new Field("WORDS",
> tmpword,
> > > > Field.Store.YES, Field.Index.TOKENIZED));
> > > > doc.add(new Field("score",
> > > Double.toString(score)
> > > > , Field.Store.YES, Field.Index.NO));
> > > > writer.addDocument(adoc);
> > > > ============
> > > >
> > > > For searching,, I use the following (query =
> > > > "homeowner work" gives no hits ,,
> > > > "homeowner" gives results):
> > > > ============
> > > > _searcher = new IndexSearcher(INDEX_DIR);
> > > > _parser = new QueryParser("WORDS",
> new
> > > > WhitespaceAnalyzer());
> > > > q = _parser.parse(query);
> > > > Hits tmph = _searcher.search(q);
> > > >
> > > > ============
> > > >
> > > > A sample document (contained in the index)
> is the
> > > > following:
> > > >
> > > > filed: value
> > > > -----: -----
> > > > WORDS:"homeowners work"
> > > > score: 0.1515417
> > > >
> > > >
> > > > Also, please note that I tried using Luke to
> browse
> > > the
> > > > index and the fields seem to be filled out
> with words
> > > just
> > > > as expected. Searching, however, with exact
> phrases
> > > yield no
> > > > answer. Searching with single words gives
> hits.
> > > >
> > > >
> > > >
> > > >
> > > > --- On Fri, 10/31/08, Erick Erickson
> > > > <erickerickson@gmail.com> wrote:
> > > >
> > > > > From: Erick Erickson
> > > <erickerickson@gmail.com>
> > > > > Subject: Re: Exact Phrase Query
> > > > > To: java-user@lucene.apache.org,
> > > semelak_14@yahoo.com
> > > > > Date: Friday, October 31, 2008, 5:57 AM
> > > > > You need to give us more information
> for
> > > meaningful
> > > > replies,
> > > > > like
> > > > > the analyzers you use when indexing and
> > > searching, the
> > > > > exact
> > > > > query you use, perhaps the snippets of
> the code,
> > > etc.
> > > > >
> > > > > That said, things to check:
> > > > > Get a copy of Luke and examine your
> index. You
> > > can
> > > > even
> > > > > run queries through that tool and see
> what gets
> > > sent
> > > > to the
> > > > > database and what responses you get
> with those
> > > > analyzers.
> > > > >
> > > > > Make sure you're analyzers at query
> and index
> > > time
> > > > are
> > > > > doing
> > > > > what you expect. Query.toString() is
> your friend.
> > > If
> > > > you
> > > > > don't
> > > > > take the time to understand analyzers,
> you'll
> > > > spend
> > > > > lots of time
> > > > > spinning your wheels.
> > > > >
> > > > > And you really should wait more than 9
> minutes
> > > before
> > > > > pinging
> > > > > the list....
> > > > >
> > > > > Best
> > > > > Erick
> > > > >
> > > > >
> > > > >
> > > > > On Fri, Oct 31, 2008 at 8:44 AM,
> semelak ss
> > > > > <semelak_14@yahoo.com> wrote:
> > > > >
> > > > > > I have documents containing
> multiple words
> > > in the
> > > > the
> > > > > field "word"
> > > > > > for example, one of the documents
> contain in
> > > the
> > > > field
> > > > > "word" the
> > > > > > following:
> > > > > > homeowners work
> > > > > >
> > > > > > When searching for single words
> (i.e.
> > > homewoners
> > > > ) I
> > > > > get hits.
> > > > > >
> > > > > > However, searching for the exact
> phrase
> > > > > "homeowners work" gives me no
> > > > > > hits!! I use the double quotes
> when
> > > searching for
> > > > > exact phrases.
> > > > > >
> > > > > > Any idea why ??
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > > >
> > >
> ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> > > > > java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> > > > java-user-help@lucene.apache.org
> > >
> > >
> > >
> > >
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >


      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 02 15:53:48 2008
Return-Path: <java-user-return-36944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67013 invoked from network); 2 Nov 2008 15:53:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2008 15:53:47 -0000
Received: (qmail 66678 invoked by uid 500); 2 Nov 2008 15:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66648 invoked by uid 500); 2 Nov 2008 15:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66637 invoked by uid 99); 2 Nov 2008 15:53:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 07:53:47 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hadi4i@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 15:52:32 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2090041rvb.5
        for <java-user@lucene.apache.org>; Sun, 02 Nov 2008 07:53:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=n7T7hBymyQeh2uhoQC1kj+eMulmW6crjMcL7NtEIexI=;
        b=iRTKLKl7nmavLGTfDOTDnO6PRf0MvVDGI14lGeuA7Lnp2LYrlpH6VDNMuGf3cyrP2f
         CXM8gwXdHzTvtZajiCQUlaI/PwrcgvDyXp8Kx+BWTwZEVRjYGmc+yGiZQtNGSt5aldZb
         wbZC297WD8GNZi3n1VRjasUrBflwDvdcijLgI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Xk4fje+reXNZMPs915OUbsixaIN++wdIh3PThTLqemtgjuHwXBNqEdXXJjDdozH2rF
         WP85iQL93XZBK1ro6iYffvui2N3Ilgdj4+UsETla37eME3CoxUQDk4vbdw+KRtsmNBNr
         bE2OA91mhqRGQ15RL03f6pV6GTUucu8G0jKAY=
Received: by 10.141.13.16 with SMTP id q16mr8233245rvi.99.1225641193608;
        Sun, 02 Nov 2008 07:53:13 -0800 (PST)
Received: by 10.140.166.5 with HTTP; Sun, 2 Nov 2008 07:53:13 -0800 (PST)
Message-ID: <18df68a40811020753s11e627cbr6e7610b04acc2240@mail.gmail.com>
Date: Sun, 2 Nov 2008 19:23:13 +0330
From: "Hadi Forghani" <hadi4i@gmail.com>
To: java-user@lucene.apache.org
Subject: addDocument vs addIndexes
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34215_6505276.1225641193607"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34215_6505276.1225641193607
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi friends
merge N document to an existing index is better than add N document to an
existing index?
in the other word, has IndexWriter.addIndexesNoOptimize less I/O than
IndexWriter.addDocument?
thanks

------=_Part_34215_6505276.1225641193607--

From java-user-return-36945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 02 16:04:32 2008
Return-Path: <java-user-return-36945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68873 invoked from network); 2 Nov 2008 16:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2008 16:04:32 -0000
Received: (qmail 70454 invoked by uid 500); 2 Nov 2008 16:04:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70419 invoked by uid 500); 2 Nov 2008 16:04:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70408 invoked by uid 99); 2 Nov 2008 16:04:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 08:04:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.48] (HELO n76.bullet.mail.sp1.yahoo.com) (98.136.44.48)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 02 Nov 2008 16:03:11 +0000
Received: from [216.252.122.217] by n76.bullet.mail.sp1.yahoo.com with NNFMP; 02 Nov 2008 16:03:52 -0000
Received: from [69.147.65.153] by t2.bullet.sp1.yahoo.com with NNFMP; 02 Nov 2008 16:03:52 -0000
Received: from [127.0.0.1] by omp401.mail.sp1.yahoo.com with NNFMP; 02 Nov 2008 16:03:52 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 78308.38310.bm@omp401.mail.sp1.yahoo.com
Received: (qmail 49592 invoked by uid 60001); 2 Nov 2008 16:03:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=1EjahXjmAfsQigSjMzKhzgTxYGiUT99iveVJMs5wX+T0i01ecyKVhJTkeulKwSVHw9clt1fBzjv7Rlb10UyE7XWtxQDY5WvhS+a9bAbCMKD+HSmJgbf1OgYomNJeYqkCMxVBNTps2WMPhgkUanqyNBMR0sGO1xBc1Qt+FmG6y5Q=;
X-YMail-OSG: 6lBZee4VM1kwIn1ywTOlJ_N4cf29xres.bKxClME6sBtyqvRoUGs_aB1itvTT9CCxM3CBg8y7efwNhEvlCZ1grL28IDrJwrCIELbJUoXaqauJTwdTSH_csmGBGU8YWYt20S17k_n687NNSeTmB6AbLXE
Received: from [93.96.69.199] by web45114.mail.sp1.yahoo.com via HTTP; Sun, 02 Nov 2008 08:03:51 PST
X-Mailer: YahooMailWebService/0.7.247.3
Date: Sun, 2 Nov 2008 08:03:51 -0800 (PST)
From: semelak ss <semelak_14@yahoo.com>
Reply-To: semelak_14@yahoo.com
Subject: Re: Exact Phrase Query
To: java-user@lucene.apache.org
In-Reply-To: <317359.19308.qm@web45115.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <955198.49566.qm@web45114.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Also, is there a way to pass a null or no tokenizer when writing to the index the field "words" ?? I have no need for tokenizing the words and the exact query will always be known. 

To understand better the problem, when are performing words comparison in large number of text documents. Each word in each sentence is compared with the rest of the words in the other sentences. A similarity score is computed for each pair and stored in the index for fast retrieval in the future (computation of the score is resource intensive). What we used to do is construct a matrix and store the words in alphabetical order (for binary search) and then load the words when the program is launched. Due to the size of the files generated, the update was a real struggle.

Thus, we decided to use Lucene and store a score for each pair of words. Updates should be much easier and faster, however improving the search is something we're looking into. We are new to Lucene, and would appreciate any input in this regard. 

Knowing that the document would contain only two fields : score and words and that no tokenization is needed, what would be the most efficient way for implementing this index using Lucene ? 


--- On Sun, 11/2/08, semelak ss <semelak_14@yahoo.com> wrote:

> From: semelak ss <semelak_14@yahoo.com>
> Subject: Re: Exact Phrase Query
> To: java-user@lucene.apache.org
> Date: Sunday, November 2, 2008, 7:26 AM
> I was in a hurry when copying and pasting the code. What
> I've been using is only writer. RamWriter was never used
> as it never really worked (thanks to you, I now understand
> the reason).
> 
> The above is not really related to the problem I was
> facing. I modified my code so that an
> indexreader/indexwriter is opened right before the words
> comparison takes place and is closed right after. (currently
> not using RamDir due to the problems faced earlier)
> 
> Considering that the program is basically a loop that does
> thousands and thousands of comparison, this is definitely
> not the most efficient way of handling things.
> 
> I would appreciate any input in this regard on how to
> improve the efficiency. 
> 
> 
> 
> --- On Sat, 11/1/08, Erick Erickson
> <erickerickson@gmail.com> wrote:
> 
> > From: Erick Erickson <erickerickson@gmail.com>
> > Subject: Re: Exact Phrase Query
> > To: java-user@lucene.apache.org, semelak_14@yahoo.com
> > Date: Saturday, November 1, 2008, 5:06 PM
> > ahhhh, finally. I'm almost completely sure you
> can't
> > *write* to a
> > RAMDirectory
> > and expect the underlying FSDir to be updated. The
> intent
> > of RAMDirectorys
> > is to *read* in an index from disk and keep it in
> memory.
> > Essentially I
> > believe
> > that your RAMDirecotry constructor is taking a
> snapshot of
> > the underlying
> > disk index, modifying that in-memory copy, and
> throwing it
> > away without
> > ever writing it to disk. I wouldn't expect opening
> the
> > FSDirectory after
> > writing
> > to the RAMDirectory to find anything. Ever.
> > 
> > If you really need the RAMDir, I suspect you'll
> have to
> > open an FS-based
> > writer as well as a RAM-based writer, and write to
> both
> > when necessary.
> > You'll probably also have to open/search your
> RAM-based
> > index as the
> > faster alternative to re-opening the FS-based index.
> Either
> > way, reopening
> > the index is probably expensive, are you sure you need
> to?
> > Is there a way
> > to keep your information in an internal data structure
> for
> > some period of
> > time?
> > 
> > Best
> > Erick
> > 
> > 
> > 
> > On Sat, Nov 1, 2008 at 6:31 PM, semelak ss
> > <semelak_14@yahoo.com> wrote:
> > 
> > > I am not entirely sure if this can be the cause,
> but
> > here is something I
> > > thought might be related:
> > > The idea is have an index containing documents
> where
> > each document has a
> > > combination of two words : word1 and word2 and a
> score
> > for these two words.
> > > The index would be searched first if the two
> words
> > exist, and if not the
> > > score would be computed on the fly and then added
> to
> > the index. This process
> > > would be repeated thousands of times for
> thousands of
> > words.
> > >
> > > Hence, I have an indexwriter and a searcher
> > > --------------------
> > > RAMDirectory ramDir = new
> RAMDirectory(INDEX_DIR);
> > > IndexWriter  ramWriter = new IndexWriter(ramDir,
> new
> > WhitespaceAnalyzer(),
> > > true,IndexWriter.MaxFieldLength.UNLIMITED);
> > > writer = new IndexWriter(INDEX_DIR,new
> > WhitespaceAnalyzer(),true
> > > ,IndexWriter.MaxFieldLength.UNLIMITED);
> > >
> > > FSDirectory fsdir =
> > FSDirectory.getDirectory(INDEX_DIR);
> > > IndexReader ir = IndexReader.open(fsdir);
> > > _searcher = new IndexSearcher(ir);
> > > --------------------
> > >
> > > The indexWriter is closed near the end of the
> program
> > (it's open while
> > > searching for words combinations ).
> > >
> > > When using Luke,, I was able to search
> successfully
> > for exact phrases. My
> > > guess is that the problem I am facing has
> something to
> > do with the
> > > indexWriter, but I can not pinpoint the exact
> cause of
> > the problem.
> > >
> > >
> > > --- On Sat, 11/1/08, semelak ss
> > <semelak_14@yahoo.com> wrote:
> > >
> > > > From: semelak ss
> <semelak_14@yahoo.com>
> > > > Subject: Re: Exact Phrase Query
> > > > To: java-user@lucene.apache.org
> > > > Date: Saturday, November 1, 2008, 10:03 AM
> > > > When using Luke,, searching for the
> followings
> > gives me hits
> > > > now:
> > > > "insurer storm"
> > > > The synatx of the query as parsed by Luke is
> :
> > > > word:"insurer storm"
> > > >
> > > > The code I am using is as follows:
> > > > ----------------------
> > > > _searcher = new IndexSearcher(INDEX_DIR);
> > > > _parser = new QueryParser("word",
> new
> > > > WhitespaceAnalyzer());
> > > > Query q = _parser.parse(query);
> > > > System.out.println(q.toString()); // this
> outputs
> > ->
> > > > word:"insurer storm"
> > > > TopDocs vv= _searcher.search(q, 1);
> > > > Hits tmph = _searcher.search(q);
> > > > ---------------------------------
> > > >
> > > > both vv and tmph give no results (their size
> is
> > 0)
> > > >
> > > >
> > > >
> > > > --- On Fri, 10/31/08, semelak ss
> > > > <semelak_14@yahoo.com> wrote:
> > > >
> > > > > From: semelak ss
> > <semelak_14@yahoo.com>
> > > > > Subject: Re: Exact Phrase Query
> > > > > To: java-user@lucene.apache.org
> > > > > Date: Friday, October 31, 2008, 9:41 AM
> > > > > For indexing, I use the following:
> > > > > ===========
> > > > > writer = new IndexWriter(INDEX_DIR,new
> > > > > WhitespaceAnalyzer(),true
> > > > > ,IndexWriter.MaxFieldLength.UNLIMITED);
> > > > > Document doc = new Document();
> > > > > String tmpword =
> this.getProperForm(word1,
> > word2);
> > > > > doc.add(new Field("WORDS",
> > tmpword,
> > > > > Field.Store.YES,
> Field.Index.TOKENIZED));
> > > > > doc.add(new Field("score",
> > > > Double.toString(score)
> > > > > , Field.Store.YES, Field.Index.NO));
> > > > > writer.addDocument(adoc);
> > > > > ============
> > > > >
> > > > > For searching,, I use the following
> (query =
> > > > > "homeowner work" gives no
> hits ,,
> > > > > "homeowner" gives results):
> > > > > ============
> > > > > _searcher = new
> IndexSearcher(INDEX_DIR);
> > > > > _parser = new
> QueryParser("WORDS",
> > new
> > > > > WhitespaceAnalyzer());
> > > > > q = _parser.parse(query);
> > > > > Hits tmph = _searcher.search(q);
> > > > >
> > > > > ============
> > > > >
> > > > > A sample document (contained in the
> index)
> > is the
> > > > > following:
> > > > >
> > > > > filed: value
> > > > > -----: -----
> > > > > WORDS:"homeowners work"
> > > > > score: 0.1515417
> > > > >
> > > > >
> > > > > Also, please note that I tried using
> Luke to
> > browse
> > > > the
> > > > > index and the fields seem to be filled
> out
> > with words
> > > > just
> > > > > as expected. Searching, however, with
> exact
> > phrases
> > > > yield no
> > > > > answer. Searching with single words
> gives
> > hits.
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > --- On Fri, 10/31/08, Erick Erickson
> > > > > <erickerickson@gmail.com> wrote:
> > > > >
> > > > > > From: Erick Erickson
> > > > <erickerickson@gmail.com>
> > > > > > Subject: Re: Exact Phrase Query
> > > > > > To: java-user@lucene.apache.org,
> > > > semelak_14@yahoo.com
> > > > > > Date: Friday, October 31, 2008,
> 5:57 AM
> > > > > > You need to give us more
> information
> > for
> > > > meaningful
> > > > > replies,
> > > > > > like
> > > > > > the analyzers you use when
> indexing and
> > > > searching, the
> > > > > > exact
> > > > > > query you use, perhaps the
> snippets of
> > the code,
> > > > etc.
> > > > > >
> > > > > > That said, things to check:
> > > > > > Get a copy of Luke and examine
> your
> > index. You
> > > > can
> > > > > even
> > > > > > run queries through that tool and
> see
> > what gets
> > > > sent
> > > > > to the
> > > > > > database and what responses you
> get
> > with those
> > > > > analyzers.
> > > > > >
> > > > > > Make sure you're analyzers at
> query
> > and index
> > > > time
> > > > > are
> > > > > > doing
> > > > > > what you expect. Query.toString()
> is
> > your friend.
> > > > If
> > > > > you
> > > > > > don't
> > > > > > take the time to understand
> analyzers,
> > you'll
> > > > > spend
> > > > > > lots of time
> > > > > > spinning your wheels.
> > > > > >
> > > > > > And you really should wait more
> than 9
> > minutes
> > > > before
> > > > > > pinging
> > > > > > the list....
> > > > > >
> > > > > > Best
> > > > > > Erick
> > > > > >
> > > > > >
> > > > > >
> > > > > > On Fri, Oct 31, 2008 at 8:44 AM,
> > semelak ss
> > > > > > <semelak_14@yahoo.com>
> wrote:
> > > > > >
> > > > > > > I have documents containing
> > multiple words
> > > > in the
> > > > > the
> > > > > > field "word"
> > > > > > > for example, one of the
> documents
> > contain in
> > > > the
> > > > > field
> > > > > > "word" the
> > > > > > > following:
> > > > > > > homeowners work
> > > > > > >
> > > > > > > When searching for single
> words
> > (i.e.
> > > > homewoners
> > > > > ) I
> > > > > > get hits.
> > > > > > >
> > > > > > > However, searching for the
> exact
> > phrase
> > > > > > "homeowners work" gives
> me no
> > > > > > > hits!! I use the double
> quotes
> > when
> > > > searching for
> > > > > > exact phrases.
> > > > > > >
> > > > > > > Any idea why ??
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > >
> > > > >
> > > >
> >
> ---------------------------------------------------------------------
> > > > > > > To unsubscribe, e-mail:
> > > > > >
> java-user-unsubscribe@lucene.apache.org
> > > > > > > For additional commands,
> e-mail:
> > > > > > java-user-help@lucene.apache.org
> > > > > > >
> > > > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:
> > > > > java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> > > > java-user-help@lucene.apache.org
> > >
> > >
> > >
> > >
> > >
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >
> > >
> 
> 
>       
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org


      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 02 20:12:45 2008
Return-Path: <java-user-return-36946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60071 invoked from network); 2 Nov 2008 20:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2008 20:12:45 -0000
Received: (qmail 16898 invoked by uid 500); 2 Nov 2008 20:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16859 invoked by uid 500); 2 Nov 2008 20:12:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16847 invoked by uid 99); 2 Nov 2008 20:12:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 12:12:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 20:11:25 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2167456rvb.5
        for <java-user@lucene.apache.org>; Sun, 02 Nov 2008 12:11:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=bz1eq4KL8ZIAflfqi1Cy+Nz1Ix4hqHAcTU8POy4n3FE=;
        b=GyhKJfLobQhP/tXRRVA5RVDcQ+5LXGHY3IUgy5E6zRv/oOEyDXA/Th10keIfHgw0kG
         CnZIupPv51UkUqAIrtcgl59SnBVr3THjOdbhkSp2X6NGVa7VMuN5mzab7dHPoZAvoH6B
         X6Ky93RfBaebHNIYSltNgR2n9nbgPwVVVoujg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=tnI6tTnwaj2AP87VmRPSPmx4sZMuK4Bp3liu93UL8k8jSSiKJ1Q5Jv4LGJL67JubcA
         V4T8k2aR4/rvfFG+PkvqtvXbcvM5OMh1tHYaDv+h6EbVSlJyMz7TkOER0GNUzPl76GRD
         kOtThFOnOaGSag9rJjbtPm5JLyiUDgPJJ6ZTc=
Received: by 10.141.163.12 with SMTP id q12mr8372166rvo.265.1225656717114;
        Sun, 02 Nov 2008 12:11:57 -0800 (PST)
Received: by 10.141.136.21 with HTTP; Sun, 2 Nov 2008 12:11:57 -0800 (PST)
Message-ID: <359a92830811021211y5d4a6772ld8479e4c7acdd6b4@mail.gmail.com>
Date: Sun, 2 Nov 2008 15:11:57 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, semelak_14@yahoo.com
Subject: Re: Exact Phrase Query
In-Reply-To: <955198.49566.qm@web45114.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5910_25201745.1225656717102"
References: <317359.19308.qm@web45115.mail.sp1.yahoo.com>
	 <955198.49566.qm@web45114.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5910_25201745.1225656717102
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sorry, but I've really run out of patience here. You have consistently
stated only
part of the problem, never posting enough information to allow me to answer
helpfully. You haven't even taken the time to proofread your posts, which
has wasted my (limited, volunteer) time.

In the future, please consider the fact that people trying to help with your

problem are volunteering their time and respect that fact by making a
greater effort to make it easy and efficient for us to help with what is,
after all, *your* problem.

Best
Erick

On Sun, Nov 2, 2008 at 11:03 AM, semelak ss <semelak_14@yahoo.com> wrote:

> Also, is there a way to pass a null or no tokenizer when writing to the
> index the field "words" ?? I have no need for tokenizing the words and the
> exact query will always be known.
>
> To understand better the problem, when are performing words comparison in
> large number of text documents. Each word in each sentence is compared with
> the rest of the words in the other sentences. A similarity score is computed
> for each pair and stored in the index for fast retrieval in the future
> (computation of the score is resource intensive). What we used to do is
> construct a matrix and store the words in alphabetical order (for binary
> search) and then load the words when the program is launched. Due to the
> size of the files generated, the update was a real struggle.
>
> Thus, we decided to use Lucene and store a score for each pair of words.
> Updates should be much easier and faster, however improving the search is
> something we're looking into. We are new to Lucene, and would appreciate any
> input in this regard.
>
> Knowing that the document would contain only two fields : score and words
> and that no tokenization is needed, what would be the most efficient way for
> implementing this index using Lucene ?
>
>
> --- On Sun, 11/2/08, semelak ss <semelak_14@yahoo.com> wrote:
>
> > From: semelak ss <semelak_14@yahoo.com>
> > Subject: Re: Exact Phrase Query
> > To: java-user@lucene.apache.org
> > Date: Sunday, November 2, 2008, 7:26 AM
> > I was in a hurry when copying and pasting the code. What
> > I've been using is only writer. RamWriter was never used
> > as it never really worked (thanks to you, I now understand
> > the reason).
> >
> > The above is not really related to the problem I was
> > facing. I modified my code so that an
> > indexreader/indexwriter is opened right before the words
> > comparison takes place and is closed right after. (currently
> > not using RamDir due to the problems faced earlier)
> >
> > Considering that the program is basically a loop that does
> > thousands and thousands of comparison, this is definitely
> > not the most efficient way of handling things.
> >
> > I would appreciate any input in this regard on how to
> > improve the efficiency.
> >
> >
> >
> > --- On Sat, 11/1/08, Erick Erickson
> > <erickerickson@gmail.com> wrote:
> >
> > > From: Erick Erickson <erickerickson@gmail.com>
> > > Subject: Re: Exact Phrase Query
> > > To: java-user@lucene.apache.org, semelak_14@yahoo.com
> > > Date: Saturday, November 1, 2008, 5:06 PM
> > > ahhhh, finally. I'm almost completely sure you
> > can't
> > > *write* to a
> > > RAMDirectory
> > > and expect the underlying FSDir to be updated. The
> > intent
> > > of RAMDirectorys
> > > is to *read* in an index from disk and keep it in
> > memory.
> > > Essentially I
> > > believe
> > > that your RAMDirecotry constructor is taking a
> > snapshot of
> > > the underlying
> > > disk index, modifying that in-memory copy, and
> > throwing it
> > > away without
> > > ever writing it to disk. I wouldn't expect opening
> > the
> > > FSDirectory after
> > > writing
> > > to the RAMDirectory to find anything. Ever.
> > >
> > > If you really need the RAMDir, I suspect you'll
> > have to
> > > open an FS-based
> > > writer as well as a RAM-based writer, and write to
> > both
> > > when necessary.
> > > You'll probably also have to open/search your
> > RAM-based
> > > index as the
> > > faster alternative to re-opening the FS-based index.
> > Either
> > > way, reopening
> > > the index is probably expensive, are you sure you need
> > to?
> > > Is there a way
> > > to keep your information in an internal data structure
> > for
> > > some period of
> > > time?
> > >
> > > Best
> > > Erick
> > >
> > >
> > >
> > > On Sat, Nov 1, 2008 at 6:31 PM, semelak ss
> > > <semelak_14@yahoo.com> wrote:
> > >
> > > > I am not entirely sure if this can be the cause,
> > but
> > > here is something I
> > > > thought might be related:
> > > > The idea is have an index containing documents
> > where
> > > each document has a
> > > > combination of two words : word1 and word2 and a
> > score
> > > for these two words.
> > > > The index would be searched first if the two
> > words
> > > exist, and if not the
> > > > score would be computed on the fly and then added
> > to
> > > the index. This process
> > > > would be repeated thousands of times for
> > thousands of
> > > words.
> > > >
> > > > Hence, I have an indexwriter and a searcher
> > > > --------------------
> > > > RAMDirectory ramDir = new
> > RAMDirectory(INDEX_DIR);
> > > > IndexWriter  ramWriter = new IndexWriter(ramDir,
> > new
> > > WhitespaceAnalyzer(),
> > > > true,IndexWriter.MaxFieldLength.UNLIMITED);
> > > > writer = new IndexWriter(INDEX_DIR,new
> > > WhitespaceAnalyzer(),true
> > > > ,IndexWriter.MaxFieldLength.UNLIMITED);
> > > >
> > > > FSDirectory fsdir =
> > > FSDirectory.getDirectory(INDEX_DIR);
> > > > IndexReader ir = IndexReader.open(fsdir);
> > > > _searcher = new IndexSearcher(ir);
> > > > --------------------
> > > >
> > > > The indexWriter is closed near the end of the
> > program
> > > (it's open while
> > > > searching for words combinations ).
> > > >
> > > > When using Luke,, I was able to search
> > successfully
> > > for exact phrases. My
> > > > guess is that the problem I am facing has
> > something to
> > > do with the
> > > > indexWriter, but I can not pinpoint the exact
> > cause of
> > > the problem.
> > > >
> > > >
> > > > --- On Sat, 11/1/08, semelak ss
> > > <semelak_14@yahoo.com> wrote:
> > > >
> > > > > From: semelak ss
> > <semelak_14@yahoo.com>
> > > > > Subject: Re: Exact Phrase Query
> > > > > To: java-user@lucene.apache.org
> > > > > Date: Saturday, November 1, 2008, 10:03 AM
> > > > > When using Luke,, searching for the
> > followings
> > > gives me hits
> > > > > now:
> > > > > "insurer storm"
> > > > > The synatx of the query as parsed by Luke is
> > :
> > > > > word:"insurer storm"
> > > > >
> > > > > The code I am using is as follows:
> > > > > ----------------------
> > > > > _searcher = new IndexSearcher(INDEX_DIR);
> > > > > _parser = new QueryParser("word",
> > new
> > > > > WhitespaceAnalyzer());
> > > > > Query q = _parser.parse(query);
> > > > > System.out.println(q.toString()); // this
> > outputs
> > > ->
> > > > > word:"insurer storm"
> > > > > TopDocs vv= _searcher.search(q, 1);
> > > > > Hits tmph = _searcher.search(q);
> > > > > ---------------------------------
> > > > >
> > > > > both vv and tmph give no results (their size
> > is
> > > 0)
> > > > >
> > > > >
> > > > >
> > > > > --- On Fri, 10/31/08, semelak ss
> > > > > <semelak_14@yahoo.com> wrote:
> > > > >
> > > > > > From: semelak ss
> > > <semelak_14@yahoo.com>
> > > > > > Subject: Re: Exact Phrase Query
> > > > > > To: java-user@lucene.apache.org
> > > > > > Date: Friday, October 31, 2008, 9:41 AM
> > > > > > For indexing, I use the following:
> > > > > > ===========
> > > > > > writer = new IndexWriter(INDEX_DIR,new
> > > > > > WhitespaceAnalyzer(),true
> > > > > > ,IndexWriter.MaxFieldLength.UNLIMITED);
> > > > > > Document doc = new Document();
> > > > > > String tmpword =
> > this.getProperForm(word1,
> > > word2);
> > > > > > doc.add(new Field("WORDS",
> > > tmpword,
> > > > > > Field.Store.YES,
> > Field.Index.TOKENIZED));
> > > > > > doc.add(new Field("score",
> > > > > Double.toString(score)
> > > > > > , Field.Store.YES, Field.Index.NO));
> > > > > > writer.addDocument(adoc);
> > > > > > ============
> > > > > >
> > > > > > For searching,, I use the following
> > (query =
> > > > > > "homeowner work" gives no
> > hits ,,
> > > > > > "homeowner" gives results):
> > > > > > ============
> > > > > > _searcher = new
> > IndexSearcher(INDEX_DIR);
> > > > > > _parser = new
> > QueryParser("WORDS",
> > > new
> > > > > > WhitespaceAnalyzer());
> > > > > > q = _parser.parse(query);
> > > > > > Hits tmph = _searcher.search(q);
> > > > > >
> > > > > > ============
> > > > > >
> > > > > > A sample document (contained in the
> > index)
> > > is the
> > > > > > following:
> > > > > >
> > > > > > filed: value
> > > > > > -----: -----
> > > > > > WORDS:"homeowners work"
> > > > > > score: 0.1515417
> > > > > >
> > > > > >
> > > > > > Also, please note that I tried using
> > Luke to
> > > browse
> > > > > the
> > > > > > index and the fields seem to be filled
> > out
> > > with words
> > > > > just
> > > > > > as expected. Searching, however, with
> > exact
> > > phrases
> > > > > yield no
> > > > > > answer. Searching with single words
> > gives
> > > hits.
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > > --- On Fri, 10/31/08, Erick Erickson
> > > > > > <erickerickson@gmail.com> wrote:
> > > > > >
> > > > > > > From: Erick Erickson
> > > > > <erickerickson@gmail.com>
> > > > > > > Subject: Re: Exact Phrase Query
> > > > > > > To: java-user@lucene.apache.org,
> > > > > semelak_14@yahoo.com
> > > > > > > Date: Friday, October 31, 2008,
> > 5:57 AM
> > > > > > > You need to give us more
> > information
> > > for
> > > > > meaningful
> > > > > > replies,
> > > > > > > like
> > > > > > > the analyzers you use when
> > indexing and
> > > > > searching, the
> > > > > > > exact
> > > > > > > query you use, perhaps the
> > snippets of
> > > the code,
> > > > > etc.
> > > > > > >
> > > > > > > That said, things to check:
> > > > > > > Get a copy of Luke and examine
> > your
> > > index. You
> > > > > can
> > > > > > even
> > > > > > > run queries through that tool and
> > see
> > > what gets
> > > > > sent
> > > > > > to the
> > > > > > > database and what responses you
> > get
> > > with those
> > > > > > analyzers.
> > > > > > >
> > > > > > > Make sure you're analyzers at
> > query
> > > and index
> > > > > time
> > > > > > are
> > > > > > > doing
> > > > > > > what you expect. Query.toString()
> > is
> > > your friend.
> > > > > If
> > > > > > you
> > > > > > > don't
> > > > > > > take the time to understand
> > analyzers,
> > > you'll
> > > > > > spend
> > > > > > > lots of time
> > > > > > > spinning your wheels.
> > > > > > >
> > > > > > > And you really should wait more
> > than 9
> > > minutes
> > > > > before
> > > > > > > pinging
> > > > > > > the list....
> > > > > > >
> > > > > > > Best
> > > > > > > Erick
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > On Fri, Oct 31, 2008 at 8:44 AM,
> > > semelak ss
> > > > > > > <semelak_14@yahoo.com>
> > wrote:
> > > > > > >
> > > > > > > > I have documents containing
> > > multiple words
> > > > > in the
> > > > > > the
> > > > > > > field "word"
> > > > > > > > for example, one of the
> > documents
> > > contain in
> > > > > the
> > > > > > field
> > > > > > > "word" the
> > > > > > > > following:
> > > > > > > > homeowners work
> > > > > > > >
> > > > > > > > When searching for single
> > words
> > > (i.e.
> > > > > homewoners
> > > > > > ) I
> > > > > > > get hits.
> > > > > > > >
> > > > > > > > However, searching for the
> > exact
> > > phrase
> > > > > > > "homeowners work" gives
> > me no
> > > > > > > > hits!! I use the double
> > quotes
> > > when
> > > > > searching for
> > > > > > > exact phrases.
> > > > > > > >
> > > > > > > > Any idea why ??
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > >
> > > > >
> > >
> > ---------------------------------------------------------------------
> > > > > > > > To unsubscribe, e-mail:
> > > > > > >
> > java-user-unsubscribe@lucene.apache.org
> > > > > > > > For additional commands,
> > e-mail:
> > > > > > > java-user-help@lucene.apache.org
> > > > > > > >
> > > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > >
> > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail:
> > > > > > java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> > > > > > java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:
> > > > > java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > >
> > > >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5910_25201745.1225656717102--

From java-user-return-36947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 02 20:30:30 2008
Return-Path: <java-user-return-36947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62632 invoked from network); 2 Nov 2008 20:30:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2008 20:30:30 -0000
Received: (qmail 26558 invoked by uid 500); 2 Nov 2008 20:30:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26532 invoked by uid 500); 2 Nov 2008 20:30:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26519 invoked by uid 99); 2 Nov 2008 20:30:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 12:30:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.44.50] (HELO n66.bullet.mail.sp1.yahoo.com) (98.136.44.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 02 Nov 2008 20:29:09 +0000
Received: from [216.252.122.219] by n66.bullet.mail.sp1.yahoo.com with NNFMP; 02 Nov 2008 20:28:32 -0000
Received: from [69.147.65.153] by t4.bullet.sp1.yahoo.com with NNFMP; 02 Nov 2008 20:28:32 -0000
Received: from [127.0.0.1] by omp401.mail.sp1.yahoo.com with NNFMP; 02 Nov 2008 20:28:32 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 406486.80535.bm@omp401.mail.sp1.yahoo.com
Received: (qmail 25933 invoked by uid 60001); 2 Nov 2008 20:28:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=x2tvgAcG3q1XD1MtuLBDKQ1ow441xI4dpakGh1ewm44vIPS8eB0LXuPTZQnMfWFT7rne7m1FhapgwFybeFbW2E5vBAQCqvm1yc6iXiIc3vYtVebvHYfhe5NE0vb6NX5XvFZjeMkslB96OwJa1kx1aNUxaSNYq1R8N19TMaALN6s=;
X-YMail-OSG: EpTqhGgVM1lUGAMksysmV4T1oNwk83RH3FWSrbRsGtfFngho8kI0S7L6lfChwv_IMLYpdwCqLc4oqax3ziTemLrqpwT9_q7TkX7CMOqJ0muDbsA.1H8Vebk0CMYFnTqefgtqgXm6xYdJiemdAmNOTnEg
Received: from [93.96.69.199] by web45108.mail.sp1.yahoo.com via HTTP; Sun, 02 Nov 2008 12:28:32 PST
X-Mailer: YahooMailWebService/0.7.247.3
Date: Sun, 2 Nov 2008 12:28:32 -0800 (PST)
From: semelak ss <semelak_14@yahoo.com>
Reply-To: semelak_14@yahoo.com
Subject: Re: Exact Phrase Query
To: java-user@lucene.apache.org
In-Reply-To: <359a92830811021211y5d4a6772ld8479e4c7acdd6b4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <277430.25194.qm@web45108.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Erick,

If it weren't for your help and kind response, I would be struggling now with the initial problem I had. The solution to that problem turned out to be the one you mentioned in your response (indexwriters/indexreaders both being opened at the same time).

The problem I mentioned in my last response is different from the initial question I posted. It's really a request for thoughts and people inputs on how to improve searching given the structure of the data described in my last response.

Again, I appreciate your help (and I am not saying this because I am looking forward to your response.) 


--- On Sun, 11/2/08, Erick Erickson <erickerickson@gmail.com> wrote:

> From: Erick Erickson <erickerickson@gmail.com>
> Subject: Re: Exact Phrase Query
> To: java-user@lucene.apache.org, semelak_14@yahoo.com
> Date: Sunday, November 2, 2008, 12:11 PM
> Sorry, but I've really run out of patience here. You
> have consistently
> stated only
> part of the problem, never posting enough information to
> allow me to answer
> helpfully. You haven't even taken the time to proofread
> your posts, which
> has wasted my (limited, volunteer) time.
> 
> In the future, please consider the fact that people trying
> to help with your
> 
> problem are volunteering their time and respect that fact
> by making a
> greater effort to make it easy and efficient for us to help
> with what is,
> after all, *your* problem.
> 
> Best
> Erick
> 
> On Sun, Nov 2, 2008 at 11:03 AM, semelak ss
> <semelak_14@yahoo.com> wrote:
> 
> > Also, is there a way to pass a null or no tokenizer
> when writing to the
> > index the field "words" ?? I have no need
> for tokenizing the words and the
> > exact query will always be known.
> >
> > To understand better the problem, when are performing
> words comparison in
> > large number of text documents. Each word in each
> sentence is compared with
> > the rest of the words in the other sentences. A
> similarity score is computed
> > for each pair and stored in the index for fast
> retrieval in the future
> > (computation of the score is resource intensive). What
> we used to do is
> > construct a matrix and store the words in alphabetical
> order (for binary
> > search) and then load the words when the program is
> launched. Due to the
> > size of the files generated, the update was a real
> struggle.
> >
> > Thus, we decided to use Lucene and store a score for
> each pair of words.
> > Updates should be much easier and faster, however
> improving the search is
> > something we're looking into. We are new to
> Lucene, and would appreciate any
> > input in this regard.
> >
> > Knowing that the document would contain only two
> fields : score and words
> > and that no tokenization is needed, what would be the
> most efficient way for
> > implementing this index using Lucene ?
> >
> >
> > --- On Sun, 11/2/08, semelak ss
> <semelak_14@yahoo.com> wrote:
> >
> > > From: semelak ss <semelak_14@yahoo.com>
> > > Subject: Re: Exact Phrase Query
> > > To: java-user@lucene.apache.org
> > > Date: Sunday, November 2, 2008, 7:26 AM
> > > I was in a hurry when copying and pasting the
> code. What
> > > I've been using is only writer. RamWriter was
> never used
> > > as it never really worked (thanks to you, I now
> understand
> > > the reason).
> > >
> > > The above is not really related to the problem I
> was
> > > facing. I modified my code so that an
> > > indexreader/indexwriter is opened right before
> the words
> > > comparison takes place and is closed right after.
> (currently
> > > not using RamDir due to the problems faced
> earlier)
> > >
> > > Considering that the program is basically a loop
> that does
> > > thousands and thousands of comparison, this is
> definitely
> > > not the most efficient way of handling things.
> > >
> > > I would appreciate any input in this regard on
> how to
> > > improve the efficiency.
> > >
> > >
> > >
> > > --- On Sat, 11/1/08, Erick Erickson
> > > <erickerickson@gmail.com> wrote:
> > >
> > > > From: Erick Erickson
> <erickerickson@gmail.com>
> > > > Subject: Re: Exact Phrase Query
> > > > To: java-user@lucene.apache.org,
> semelak_14@yahoo.com
> > > > Date: Saturday, November 1, 2008, 5:06 PM
> > > > ahhhh, finally. I'm almost completely
> sure you
> > > can't
> > > > *write* to a
> > > > RAMDirectory
> > > > and expect the underlying FSDir to be
> updated. The
> > > intent
> > > > of RAMDirectorys
> > > > is to *read* in an index from disk and keep
> it in
> > > memory.
> > > > Essentially I
> > > > believe
> > > > that your RAMDirecotry constructor is taking
> a
> > > snapshot of
> > > > the underlying
> > > > disk index, modifying that in-memory copy,
> and
> > > throwing it
> > > > away without
> > > > ever writing it to disk. I wouldn't
> expect opening
> > > the
> > > > FSDirectory after
> > > > writing
> > > > to the RAMDirectory to find anything. Ever.
> > > >
> > > > If you really need the RAMDir, I suspect
> you'll
> > > have to
> > > > open an FS-based
> > > > writer as well as a RAM-based writer, and
> write to
> > > both
> > > > when necessary.
> > > > You'll probably also have to open/search
> your
> > > RAM-based
> > > > index as the
> > > > faster alternative to re-opening the
> FS-based index.
> > > Either
> > > > way, reopening
> > > > the index is probably expensive, are you
> sure you need
> > > to?
> > > > Is there a way
> > > > to keep your information in an internal data
> structure
> > > for
> > > > some period of
> > > > time?
> > > >
> > > > Best
> > > > Erick
> > > >
> > > >
> > > >
> > > > On Sat, Nov 1, 2008 at 6:31 PM, semelak ss
> > > > <semelak_14@yahoo.com> wrote:
> > > >
> > > > > I am not entirely sure if this can be
> the cause,
> > > but
> > > > here is something I
> > > > > thought might be related:
> > > > > The idea is have an index containing
> documents
> > > where
> > > > each document has a
> > > > > combination of two words : word1 and
> word2 and a
> > > score
> > > > for these two words.
> > > > > The index would be searched first if
> the two
> > > words
> > > > exist, and if not the
> > > > > score would be computed on the fly and
> then added
> > > to
> > > > the index. This process
> > > > > would be repeated thousands of times
> for
> > > thousands of
> > > > words.
> > > > >
> > > > > Hence, I have an indexwriter and a
> searcher
> > > > > --------------------
> > > > > RAMDirectory ramDir = new
> > > RAMDirectory(INDEX_DIR);
> > > > > IndexWriter  ramWriter = new
> IndexWriter(ramDir,
> > > new
> > > > WhitespaceAnalyzer(),
> > > > >
> true,IndexWriter.MaxFieldLength.UNLIMITED);
> > > > > writer = new IndexWriter(INDEX_DIR,new
> > > > WhitespaceAnalyzer(),true
> > > > > ,IndexWriter.MaxFieldLength.UNLIMITED);
> > > > >
> > > > > FSDirectory fsdir =
> > > > FSDirectory.getDirectory(INDEX_DIR);
> > > > > IndexReader ir =
> IndexReader.open(fsdir);
> > > > > _searcher = new IndexSearcher(ir);
> > > > > --------------------
> > > > >
> > > > > The indexWriter is closed near the end
> of the
> > > program
> > > > (it's open while
> > > > > searching for words combinations ).
> > > > >
> > > > > When using Luke,, I was able to search
> > > successfully
> > > > for exact phrases. My
> > > > > guess is that the problem I am facing
> has
> > > something to
> > > > do with the
> > > > > indexWriter, but I can not pinpoint the
> exact
> > > cause of
> > > > the problem.
> > > > >
> > > > >
> > > > > --- On Sat, 11/1/08, semelak ss
> > > > <semelak_14@yahoo.com> wrote:
> > > > >
> > > > > > From: semelak ss
> > > <semelak_14@yahoo.com>
> > > > > > Subject: Re: Exact Phrase Query
> > > > > > To: java-user@lucene.apache.org
> > > > > > Date: Saturday, November 1, 2008,
> 10:03 AM
> > > > > > When using Luke,, searching for
> the
> > > followings
> > > > gives me hits
> > > > > > now:
> > > > > > "insurer storm"
> > > > > > The synatx of the query as parsed
> by Luke is
> > > :
> > > > > > word:"insurer storm"
> > > > > >
> > > > > > The code I am using is as follows:
> > > > > > ----------------------
> > > > > > _searcher = new
> IndexSearcher(INDEX_DIR);
> > > > > > _parser = new
> QueryParser("word",
> > > new
> > > > > > WhitespaceAnalyzer());
> > > > > > Query q = _parser.parse(query);
> > > > > > System.out.println(q.toString());
> // this
> > > outputs
> > > > ->
> > > > > > word:"insurer storm"
> > > > > > TopDocs vv= _searcher.search(q,
> 1);
> > > > > > Hits tmph = _searcher.search(q);
> > > > > > ---------------------------------
> > > > > >
> > > > > > both vv and tmph give no results
> (their size
> > > is
> > > > 0)
> > > > > >
> > > > > >
> > > > > >
> > > > > > --- On Fri, 10/31/08, semelak ss
> > > > > > <semelak_14@yahoo.com>
> wrote:
> > > > > >
> > > > > > > From: semelak ss
> > > > <semelak_14@yahoo.com>
> > > > > > > Subject: Re: Exact Phrase
> Query
> > > > > > > To:
> java-user@lucene.apache.org
> > > > > > > Date: Friday, October 31,
> 2008, 9:41 AM
> > > > > > > For indexing, I use the
> following:
> > > > > > > ===========
> > > > > > > writer = new
> IndexWriter(INDEX_DIR,new
> > > > > > > WhitespaceAnalyzer(),true
> > > > > > >
> ,IndexWriter.MaxFieldLength.UNLIMITED);
> > > > > > > Document doc = new
> Document();
> > > > > > > String tmpword =
> > > this.getProperForm(word1,
> > > > word2);
> > > > > > > doc.add(new
> Field("WORDS",
> > > > tmpword,
> > > > > > > Field.Store.YES,
> > > Field.Index.TOKENIZED));
> > > > > > > doc.add(new
> Field("score",
> > > > > > Double.toString(score)
> > > > > > > , Field.Store.YES,
> Field.Index.NO));
> > > > > > > writer.addDocument(adoc);
> > > > > > > ============
> > > > > > >
> > > > > > > For searching,, I use the
> following
> > > (query =
> > > > > > > "homeowner work"
> gives no
> > > hits ,,
> > > > > > > "homeowner" gives
> results):
> > > > > > > ============
> > > > > > > _searcher = new
> > > IndexSearcher(INDEX_DIR);
> > > > > > > _parser = new
> > > QueryParser("WORDS",
> > > > new
> > > > > > > WhitespaceAnalyzer());
> > > > > > > q = _parser.parse(query);
> > > > > > > Hits tmph =
> _searcher.search(q);
> > > > > > >
> > > > > > > ============
> > > > > > >
> > > > > > > A sample document (contained
> in the
> > > index)
> > > > is the
> > > > > > > following:
> > > > > > >
> > > > > > > filed: value
> > > > > > > -----: -----
> > > > > > > WORDS:"homeowners
> work"
> > > > > > > score: 0.1515417
> > > > > > >
> > > > > > >
> > > > > > > Also, please note that I
> tried using
> > > Luke to
> > > > browse
> > > > > > the
> > > > > > > index and the fields seem to
> be filled
> > > out
> > > > with words
> > > > > > just
> > > > > > > as expected. Searching,
> however, with
> > > exact
> > > > phrases
> > > > > > yield no
> > > > > > > answer. Searching with single
> words
> > > gives
> > > > hits.
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > > --- On Fri, 10/31/08, Erick
> Erickson
> > > > > > >
> <erickerickson@gmail.com> wrote:
> > > > > > >
> > > > > > > > From: Erick Erickson
> > > > > > <erickerickson@gmail.com>
> > > > > > > > Subject: Re: Exact
> Phrase Query
> > > > > > > > To:
> java-user@lucene.apache.org,
> > > > > > semelak_14@yahoo.com
> > > > > > > > Date: Friday, October
> 31, 2008,
> > > 5:57 AM
> > > > > > > > You need to give us more
> > > information
> > > > for
> > > > > > meaningful
> > > > > > > replies,
> > > > > > > > like
> > > > > > > > the analyzers you use
> when
> > > indexing and
> > > > > > searching, the
> > > > > > > > exact
> > > > > > > > query you use, perhaps
> the
> > > snippets of
> > > > the code,
> > > > > > etc.
> > > > > > > >
> > > > > > > > That said, things to
> check:
> > > > > > > > Get a copy of Luke and
> examine
> > > your
> > > > index. You
> > > > > > can
> > > > > > > even
> > > > > > > > run queries through that
> tool and
> > > see
> > > > what gets
> > > > > > sent
> > > > > > > to the
> > > > > > > > database and what
> responses you
> > > get
> > > > with those
> > > > > > > analyzers.
> > > > > > > >
> > > > > > > > Make sure you're
> analyzers at
> > > query
> > > > and index
> > > > > > time
> > > > > > > are
> > > > > > > > doing
> > > > > > > > what you expect.
> Query.toString()
> > > is
> > > > your friend.
> > > > > > If
> > > > > > > you
> > > > > > > > don't
> > > > > > > > take the time to
> understand
> > > analyzers,
> > > > you'll
> > > > > > > spend
> > > > > > > > lots of time
> > > > > > > > spinning your wheels.
> > > > > > > >
> > > > > > > > And you really should
> wait more
> > > than 9
> > > > minutes
> > > > > > before
> > > > > > > > pinging
> > > > > > > > the list....
> > > > > > > >
> > > > > > > > Best
> > > > > > > > Erick
> > > > > > > >
> > > > > > > >
> > > > > > > >
> > > > > > > > On Fri, Oct 31, 2008 at
> 8:44 AM,
> > > > semelak ss
> > > > > > > >
> <semelak_14@yahoo.com>
> > > wrote:
> > > > > > > >
> > > > > > > > > I have documents
> containing
> > > > multiple words
> > > > > > in the
> > > > > > > the
> > > > > > > > field "word"
> > > > > > > > > for example, one of
> the
> > > documents
> > > > contain in
> > > > > > the
> > > > > > > field
> > > > > > > > "word" the
> > > > > > > > > following:
> > > > > > > > > homeowners work
> > > > > > > > >
> > > > > > > > > When searching for
> single
> > > words
> > > > (i.e.
> > > > > > homewoners
> > > > > > > ) I
> > > > > > > > get hits.
> > > > > > > > >
> > > > > > > > > However, searching
> for the
> > > exact
> > > > phrase
> > > > > > > > "homeowners
> work" gives
> > > me no
> > > > > > > > > hits!! I use the
> double
> > > quotes
> > > > when
> > > > > > searching for
> > > > > > > > exact phrases.
> > > > > > > > >
> > > > > > > > > Any idea why ??
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > >
> > > >
> > >
> ---------------------------------------------------------------------
> > > > > > > > > To unsubscribe,
> e-mail:
> > > > > > > >
> > > java-user-unsubscribe@lucene.apache.org
> > > > > > > > > For additional
> commands,
> > > e-mail:
> > > > > > > >
> java-user-help@lucene.apache.org
> > > > > > > > >
> > > > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > > >
> > > > > >
> > > >
> > >
> ---------------------------------------------------------------------
> > > > > > > To unsubscribe, e-mail:
> > > > > > >
> java-user-unsubscribe@lucene.apache.org
> > > > > > > For additional commands,
> e-mail:
> > > > > > >
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > >
> > >
> ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail:
> > > > > >
> java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> > > > > > java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail:
> > > > java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:
> > > > java-user-help@lucene.apache.org
> > > > >
> > > > >
> > >
> > >
> > >
> > >
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >


      


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 02 23:07:50 2008
Return-Path: <java-user-return-36948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31570 invoked from network); 2 Nov 2008 23:07:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2008 23:07:50 -0000
Received: (qmail 21636 invoked by uid 500); 2 Nov 2008 23:07:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21603 invoked by uid 500); 2 Nov 2008 23:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21592 invoked by uid 99); 2 Nov 2008 23:07:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 15:07:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 23:06:34 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2219800rvb.5
        for <java-user@lucene.apache.org>; Sun, 02 Nov 2008 15:07:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:in-reply-to:references:x-mailer:mime-version
         :content-type:content-transfer-encoding;
        bh=pIbTBuPVQ2CJGYLqjwzMSLKUGZRK+DFFEBalktnLzvM=;
        b=u53N/W9W+GGO7aJXiwviVNY/2sWqP6uQEn4XfUoErF6eIILANnkqpteUpoOeCKwdcD
         cJdpQWXjiNpblmkpCBj4sXpRS5P5qne2rIS6PBKxHsy6DONUy9C/zNjr2+e4IoUGR0cC
         02YN6foJ3TiQfzMXd8z2EY0cXrY9LPfoXsUX0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:in-reply-to:references:x-mailer
         :mime-version:content-type:content-transfer-encoding;
        b=A2LrhP5YFqdkS2EfSelGpAy9olxhxEtzb6QAiAkEt2mneYTUuKEQp6l6HjVhTnpuum
         1tXbPQ9k4x2f8W9vbdbntFVYTpSFx3y3U8j5X/EBNZzLiYYMojsUXWqL+dTJom1KsjXz
         rUTqqUdx/e+2KYyurhXp25k17tJybKSH8TdyM=
Received: by 10.141.84.17 with SMTP id m17mr8495350rvl.48.1225667225489;
        Sun, 02 Nov 2008 15:07:05 -0800 (PST)
Received: from zim ([189.107.137.13])
        by mx.google.com with ESMTPS id b39sm10267904rvf.0.2008.11.02.15.07.04
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 02 Nov 2008 15:07:05 -0800 (PST)
Date: Sun, 2 Nov 2008 21:06:56 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Benchmarking my indexer
Message-Id: <20081102210656.a9e33c12.almeidaraf@gmail.com>
In-Reply-To: <42D6517E-5B16-4B1F-9EDE-D91FE6EC1F5D@apache.org>
References: <20081101033904.6f2bc6df.almeidaraf@gmail.com>
	<42D6517E-5B16-4B1F-9EDE-D91FE6EC1F5D@apache.org>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, 2 Nov 2008 07:11:20 -0500
Grant Ingersoll <gsingers@apache.org> wrote:

> 
> On Nov 1, 2008, at 1:39 AM, Rafael Cunha de Almeida wrote:
> 
> > Hello,
> >
> > I did an indexer that parses some files and indexes them using  
> > lucene. I
> > want to benchmark the whole thing, so I'd like to count the tokens
> > being indexed so I can calculate the average number of indexed tokens
> > per second. Is there a way to count the number of tokens on a  
> > document?
> 
> I think you would have to add a "CountingTokenFilter", that you write  
> and manage as you add documents.  Or, you could just take the total #  
> of tokens / by the number of docs and use the average.  That can be  
> obtained w/o writing a new TokenFilter.

How would I obtain the total number of tokens on an index? I couldn't
find that statistic anywhere. I looked for it on IndexWritter,
IndexReader and IndexSearcher classes. Is there maybe some tool I'd run
on a index or something like that?
> 
> >
> > While I'm at it, I will also need to calculate the amount of memory my
> > java program used (peak, avg, etc), what java tool would you suggest  
> > me
> > to figure that out?
> 
> 
> Would JConsole work: http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html 
>    help?  I'm not sure what people use here
> 

Will look into it :-)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 02 23:53:58 2008
Return-Path: <java-user-return-36949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38542 invoked from network); 2 Nov 2008 23:53:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Nov 2008 23:53:57 -0000
Received: (qmail 40536 invoked by uid 500); 2 Nov 2008 23:53:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40507 invoked by uid 500); 2 Nov 2008 23:53:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40496 invoked by uid 99); 2 Nov 2008 23:53:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 15:53:58 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 23:52:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kwmkz-0008Lg-9P
	for java-user@lucene.apache.org; Sun, 02 Nov 2008 15:53:21 -0800
Message-ID: <20295306.post@talk.nabble.com>
Date: Sun, 2 Nov 2008 15:53:21 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching over multiple fields using XML document
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear fellow Java/Lucene developers:

I am trying to search an xml document over multiple fields.  The index I
created using the SAX method.  I am trying to search shakespeare's "Hamlet"
over the <speaker> and <lines> tags for words that the user is looking for. 
I am thinking of using the MultiFieldQueryParser however, I also read that a
better alternative would be to combine the various fields together.  In the
book, "Lucene in Action", the author writes:

"A synthetic 'contents' field in our test environment uses this scheme to
put author and subjects together:

doc.add(Field.UnStored("contents", author + " " + subjects));

We used a space (" ") between author and subjects to separate words for the
analyzer."

I am not sure I fully understand what the author is referring to here.  In
my situation I have the following:

public void endElement(String uri, String localName, String qName) throws
SAXException{
		
		try {
			
			if(qName.equals("REFERENCE")){
				Field reference = new Field(qName, elementBuffer.toString(),
Field.Store.YES, Field.Index.NO, Field.TermVector.NO);
				doc.add(reference);
			}
			
			else if(qName.equals("SPEAKER")){
				Field speaker = new Field(qName, elementBuffer.toString(),
Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.YES);
				speaker.setBoost(2.0f);
				doc.add(speaker);
			}
			else if(qName.equals("LINES")){
				Field lines = new Field(qName, elementBuffer.toString(),
Field.Store.YES, Field.Index.TOKENIZED, Field.TermVector.YES);
				lines.setBoost(1.0f);
				doc.add(lines);
				indexWriter.addDocument(doc);				
			}
			
			else{
				return;
			}
				
		} catch (CorruptIndexException e) {
			e.printStackTrace();
		} catch (IOException e) {
			e.printStackTrace();
		}

		
		
	}


How would I combine the fields together into one synthetic field here so
that in my searcher code, I would search over one field, yet retrieve the
results from the several fields that the keyword is found and show that to
the user?

All I want to do, is allow a user to search an xml document over multiple
fields and return the results with the keywords they are searching for,
highlighted in the results list, just as google does when searching for
websites.   At this point, I am able to do a simple/fuzzy/wildcard search
over one field in the xml document, but would like to extend this
functionality over multiple fields.  Any ideas?

Thanks in advance to all who reply.
Sincerely;
Fayyaz
-- 
View this message in context: http://www.nabble.com/Searching-over-multiple-fields-using-XML-document-tp20295306p20295306.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 03:43:34 2008
Return-Path: <java-user-return-36950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34650 invoked from network); 3 Nov 2008 03:43:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 03:43:34 -0000
Received: (qmail 27975 invoked by uid 500); 3 Nov 2008 03:43:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27951 invoked by uid 500); 3 Nov 2008 03:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27940 invoked by uid 99); 3 Nov 2008 03:43:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 19:43:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 03:42:14 +0000
Received: from thumbsucker.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id C6DCC1631E84
	for <java-user@lucene.apache.org>; Sun,  2 Nov 2008 21:42:54 -0600 (CST)
Message-Id: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
From: Justus Pendleton <jpendleton@atlassian.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Performance of never optimizing
Date: Mon, 3 Nov 2008 14:42:52 +1100
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Howdy,

I have a couple of questions regarding some Lucene benchmarking and  
what the results mean[3]. (Skip to the numbered list at the end if you  
don't want to read the lengthy exegesis :)

I'm a developer for JIRA[1]. We are currently trying to get a better  
understanding of Lucene, and our use of it, to cope with the needs of  
our larger customers. These "large" indexes are only a couple hundred  
thousand documents but our problem is compounded by the fact that they  
have a relatively high rate of modification (=delete+insert of new  
document) and our users expect these modification to show up in query  
results pretty much instantly.

Our current default behaviour is a merge factor of 4. We perform an  
optimization on the index every 4000 additions. We also perform an  
optimize at midnight. Our fundamental problem is that these  
optimizations are locking the index for unacceptably long periods of  
time, something that we want to resolve for our next major release,  
hopefully without undermining search performance too badly.

In the Lucene javadoc there is a comment, and a link to a mailing list  
discussion[2], that suggests applications such as JIRA should never  
perform optimize but should instead set their merge factor very low.

In an attempt to understand the impact of a) lowering the merge factor  
from 4 to 2 and b) never, ever optimizing on an index (over the course  
of years and millions of additions/updates) I wanted to try to  
benchmark Lucene.

I used the contrib/benchmark framework and wrote a small algorithm  
that adds documents to an index (using the Reuters doc generator),  
does a search, does an optimize, then does another search. All the  
pretty pictures can be seen at:

   http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs

I have several questions, hopefully they aren't overwhelming in their  
quantity :-/

1. Why does the merge factor of 4 appear to be faster than the merge  
factor of 2?

2. Why does non-optimized searching appear to be faster than optimized  
searching once the index hits ~500,000 documents?

3. There appears to be a fairly sizable performance drop across the  
board around 450,000 documents. Why is that?

4. Searching performance appears to decrease towards a fairly  
pessimistic 20 searches per second (for a relatively simple search).  
Is this really what we should expect long-term from Lucene?

5. Does my benchmark even make sense? I am far from an expert on  
benchmarking so it is possible I'm not measuring what I think I am  
measuring.

Thanks in advance for any insight you can provide. This is an area  
that we very much want to understand better as Lucene is a key part of  
JIRA's success,

Cheers,
Justus
JIRA Developer

[1]: http://www.atlassian.com
[2]: http://www.gossamer-threads.com/lists/lucene/java-dev/47895
[3]: http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 05:28:14 2008
Return-Path: <java-user-return-36951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69634 invoked from network); 3 Nov 2008 05:28:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 05:28:14 -0000
Received: (qmail 77297 invoked by uid 500); 3 Nov 2008 05:28:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77267 invoked by uid 500); 3 Nov 2008 05:28:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77256 invoked by uid 99); 3 Nov 2008 05:28:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 21:28:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 03 Nov 2008 05:26:54 +0000
Received: (qmail 10719 invoked by uid 60001); 3 Nov 2008 05:27:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=2eASACwldNFU7PUH9GCUzEJxWOlu4NResGSUgkcrh9mfUGHRAYDJcdqH9jct8LuPIbkRA3jQhyl7ax7zYu6y9cGr1nKw+NPWBkA/d9FPwTI+b+nuO6nIczksuJdQ/EVr9ghZCbHOy5Zam6KEvUMXa8dF+kPrq+QOFJqv4mUVwdQ=;
X-YMail-OSG: LbBeeWYVM1m3ifB6mNJtVuPFzs2xJBJy4ScKSlXuhu1hCFynpfdNoYv_7ylezaRMZp89DnDxpCOOi.n84L8yIW596..uyeBvooLro5Qjg42UiqcxuWIqu9_Rjstl_eWXyTPQfCakJyyRekN3IaFiqScAemar5m.JxAqGyLr11DI5HzW.66ZL1Bm6iA--
Received: from [72.227.164.48] by web50303.mail.re2.yahoo.com via HTTP; Sun, 02 Nov 2008 21:27:34 PST
X-Mailer: YahooMailRC/1155.20 YahooMailWebService/0.7.260.1
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
Date: Sun, 2 Nov 2008 21:27:34 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Performance of never optimizing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <563763.10674.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

 
Very quick comments.


----- Original Message ----
> From: Justus Pendleton <jpendleton@atlassian.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, November 2, 2008 10:42:52 PM
> Subject: Performance of never optimizing
> 
> Howdy,
> 
> I have a couple of questions regarding some Lucene benchmarking and what the 
> results mean[3]. (Skip to the numbered list at the end if you don't want to read 
> the lengthy exegesis :)
> 
> I'm a developer for JIRA[1]. We are currently trying to get a better 
> understanding of Lucene, and our use of it, to cope with the needs of our larger 
> customers. These "large" indexes are only a couple hundred thousand documents 
> but our problem is compounded by the fact that they have a relatively high rate 
> of modification (=delete+insert of new document) and our users expect these 
> modification to show up in query results pretty much instantly.


This will be a tough call with large indices - there is no real-time search in Lucene yet.

> Our current default behaviour is a merge factor of 4. We perform an optimization 
> on the index every 4000 additions. We also perform an optimize at midnight. Our 


I wouldn't optimize every 4000 additions - you are killing IO, rewriting the whole index, while trying to provide fast searches, plus you are locking the index for other modifications.

> fundamental problem is that these optimizations are locking the index for 
> unacceptably long periods of time, something that we want to resolve for our 
> next major release, hopefully without undermining search performance too badly.


Why are you optimizing?  Trying to make the search faster?  I would try to avoid optimizing during high usage periods.

> In the Lucene javadoc there is a comment, and a link to a mailing list 
> discussion[2], that suggests applications such as JIRA should never perform 
> optimize but should instead set their merge factor very low.


Right, you can let Lucene merge segments.

> In an attempt to understand the impact of a) lowering the merge factor from 4 to 
> 2 and b) never, ever optimizing on an index (over the course of years and 
> millions of additions/updates) I wanted to try to benchmark Lucene.


One thing that you might not have tried is the constant re-opening of the IndexReader, which you'll need to do if you want to see index changes instantly.

> I used the contrib/benchmark framework and wrote a small algorithm that adds 
> documents to an index (using the Reuters doc generator), does a search, does an 
> optimize, then does another search. All the pretty pictures can be seen at:


So you indexed once and then measured search performance?  Or did you measure indexing performance?  I can't quite tell from your email.
And in one case you optimized before searching and in the other you did not optimize?

>   http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs
> 
> I have several questions, hopefully they aren't overwhelming in their quantity 
> :-/
> 
> 1. Why does the merge factor of 4 appear to be faster than the merge factor of 
> 2?


Faster for indexing or searching?  If indexing, then it's because 4 means fewer segment merges than 2.  If searching, then I don't know, unless you had indexing and searching happening in parallel, which then means less IO for 4.

Did you index fit in RAM, by the way?

> 2. Why does non-optimized searching appear to be faster than optimized searching 
> once the index hits ~500,000 documents?


Not sure without seeing the index/machine.
It sounds like you were measuring search performance while at the same time increasing the index size by incrementally adding more docs?

> 3. There appears to be a fairly sizable performance drop across the board around 
> 450,000 documents. Why is that?

Something to do with Lucene merging index segments around that point?  At this point I'm assuming you were measuring search speed while indexing.


> 4. Searching performance appears to decrease towards a fairly pessimistic 20 
> searches per second (for a relatively simple search). Is this really what we 
> should expect long-term from Lucene?


20 reqs/sec sounds very low.  How large is your index, how much RAM, and how about heap size?
What were your queries like? random?  from log?

> 5. Does my benchmark even make sense? I am far from an expert on benchmarking so 
> it is possible I'm not measuring what I think I am measuring.


I'm confused by what exactly you did and measured, but it could just be that I'm tired.

> Thanks in advance for any insight you can provide. This is an area that we very 
> much want to understand better as Lucene is a key part of JIRA's success,

>
> [1]: http://www.atlassian.com
> [2]: http://www.gossamer-threads.com/lists/lucene/java-dev/47895
> [3]: http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 05:50:12 2008
Return-Path: <java-user-return-36952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79191 invoked from network); 3 Nov 2008 05:50:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 05:50:12 -0000
Received: (qmail 93368 invoked by uid 500); 3 Nov 2008 05:50:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93328 invoked by uid 500); 3 Nov 2008 05:50:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93317 invoked by uid 99); 3 Nov 2008 05:50:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 21:50:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 05:48:55 +0000
Received: from thumbsucker.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id E9D6D1631E84
	for <java-user@lucene.apache.org>; Sun,  2 Nov 2008 23:49:34 -0600 (CST)
Message-Id: <BE5BC366-41CB-4D1F-8B82-DD99B5964A65@atlassian.com>
From: Justus Pendleton <jpendleton@atlassian.com>
To: java-user@lucene.apache.org
In-Reply-To: <563763.10674.qm@web50303.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Performance of never optimizing
Date: Mon, 3 Nov 2008 16:49:32 +1100
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com> <563763.10674.qm@web50303.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 03/11/2008, at 4:27 PM, Otis Gospodnetic wrote:
> Why are you optimizing?  Trying to make the search faster?  I would  
> try to avoid optimizing during high usage periods.

I assume that the original, long-ago, decision to optimize was made to  
improve searching performance.

> One thing that you might not have tried is the constant re-opening  
> of the IndexReader, which you'll need to do if you want to see index  
> changes instantly.

We do keep track of when the index has been updated and re-open  
IndexReaders so that they see the updates instantly.

>>
> So you indexed once and then measured search performance?  Or did  
> you measure indexing performance?  I can't quite tell from your email.
> And in one case you optimized before searching and in the other you  
> did not optimize?

Yes, I indexed once and then measured search performance. (The actual  
algorithm used can be seen at http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs) 
  For my current purposes I don't care about indexing performance.

>> 1. Why does the merge factor of 4 appear to be faster than the  
>> merge factor of
>> 2?
>
>
> Faster for indexing or searching?  If indexing, then it's because 4  
> means fewer segment merges than 2.  If searching, then I don't know,  
> unless you had indexing and searching happening in parallel, which  
> then means less IO for 4.

For searching. The index and search should not have been happening in  
parallel. However, multiple searches are occurring in parallel.

> Did you index fit in RAM, by the way?

The machine has, I believe, 4 GB of RAM and the benchmark suite  
reports than 700 MB were used, so it does appear to have fit into RAM.

>> 2. Why does non-optimized searching appear to be faster than  
>> optimized searching
>> once the index hits ~500,000 documents?
>
>
> Not sure without seeing the index/machine.

The machine is an 8-core Mac Pro. If you'd like, I can provide the  
indexes online somewhere. Or if you can provide pointers on what to  
look for, I'm more than happy to investigate this myself.

>
> It sounds like you were measuring search performance while at the  
> same time increasing the index size by incrementally adding more docs?

No documents were being added to the index while the searching was  
being performed. I was trying to measure only the search performance.

> 20 reqs/sec sounds very low.  How large is your index, how much RAM,  
> and how about heap size?
> What were your queries like? random?  from log?

The queries were generated by the ReutersQueryMaker. I am not sure  
what the heap size used as various stages were. (I ran the benchmarks  
over the weekend; they took several days.)

> I'm confused by what exactly you did and measured, but it could just  
> be that I'm tired.

My apologies for not being clearer in my initial email. I appreciate  
the help,

Cheers,
Justus


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 05:59:29 2008
Return-Path: <java-user-return-36953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84501 invoked from network); 3 Nov 2008 05:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 05:59:29 -0000
Received: (qmail 2916 invoked by uid 500); 3 Nov 2008 05:59:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2693 invoked by uid 500); 3 Nov 2008 05:59:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2682 invoked by uid 99); 3 Nov 2008 05:59:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Nov 2008 21:59:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 05:58:09 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1350588tic.11
        for <java-user@lucene.apache.org>; Sun, 02 Nov 2008 21:58:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=ZOOhBpE11iikYv7CiyPGFsUiFKLq1pcQ5fZuyp8r34I=;
        b=O7GXWcuztaXaip8gYEUrvzTbLID0LQDgNkl3ncOavW/b57+Rlkzr5bGLWkJxbOatmL
         IVpCJbM6sL4rn1kzldGKxaKwO1lxuY8q1yRW+vkrK3ERVEoO9rCQqmumNmY++N5d78qZ
         3vcL/2nvOY97f9tT4PuRTN8ok3F3Vp8XmSuYs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=mhKtRAWygUUVEOP7XTXqbUEM8c2+e3nTs/4cSksijIC1pknwGpDd6bPGVA90PlEtGL
         DTtn7k4UzxVTVUdZKNHxC81uQO82HVSBzqP0Fl7Nph9I3uH7yvT42KqX5mSbv4n2gmfY
         mrmAQxUK8SKLYzf3lYZzZULBF2Bo6BsKAna2I=
Received: by 10.110.43.18 with SMTP id q18mr10799656tiq.16.1225691928425;
        Sun, 02 Nov 2008 21:58:48 -0800 (PST)
Received: from ?192.168.1.100? (c-71-202-137-198.hsd1.ca.comcast.net [71.202.137.198])
        by mx.google.com with ESMTPS id 14sm12536233tim.11.2008.11.02.21.58.45
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 02 Nov 2008 21:58:47 -0800 (PST)
Message-ID: <490E9309.1090300@gmail.com>
Date: Sun, 02 Nov 2008 21:58:33 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance of never optimizing
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
In-Reply-To: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Justus,

I had met with very similar problems as JIRA has, which has high 
modification and on a large data volume. It's a pretty common use case 
for Lucene.

The way I dealt with high rate of modification is to create a secondary 
in-memory index. And only persist documents older than a period of time.
So searching will need to combine results from two indexes. It's a bit 
complicated when creating the index, but it's worth well to save the 
extra IO-heavy merging and to improve response time, especially the 
ability to search right away with just added documents.

BTW: JIRA is great!

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got 2.6 Million Euro funding!

Justus Pendleton wrote:
> Howdy,
>
> I have a couple of questions regarding some Lucene benchmarking and 
> what the results mean[3]. (Skip to the numbered list at the end if you 
> don't want to read the lengthy exegesis :)
>
> I'm a developer for JIRA[1]. We are currently trying to get a better 
> understanding of Lucene, and our use of it, to cope with the needs of 
> our larger customers. These "large" indexes are only a couple hundred 
> thousand documents but our problem is compounded by the fact that they 
> have a relatively high rate of modification (=delete+insert of new 
> document) and our users expect these modification to show up in query 
> results pretty much instantly.
>
> Our current default behaviour is a merge factor of 4. We perform an 
> optimization on the index every 4000 additions. We also perform an 
> optimize at midnight. Our fundamental problem is that these 
> optimizations are locking the index for unacceptably long periods of 
> time, something that we want to resolve for our next major release, 
> hopefully without undermining search performance too badly.
>
> In the Lucene javadoc there is a comment, and a link to a mailing list 
> discussion[2], that suggests applications such as JIRA should never 
> perform optimize but should instead set their merge factor very low.
>
> In an attempt to understand the impact of a) lowering the merge factor 
> from 4 to 2 and b) never, ever optimizing on an index (over the course 
> of years and millions of additions/updates) I wanted to try to 
> benchmark Lucene.
>
> I used the contrib/benchmark framework and wrote a small algorithm 
> that adds documents to an index (using the Reuters doc generator), 
> does a search, does an optimize, then does another search. All the 
> pretty pictures can be seen at:
>
>   http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs
>
> I have several questions, hopefully they aren't overwhelming in their 
> quantity :-/
>
> 1. Why does the merge factor of 4 appear to be faster than the merge 
> factor of 2?
>
> 2. Why does non-optimized searching appear to be faster than optimized 
> searching once the index hits ~500,000 documents?
>
> 3. There appears to be a fairly sizable performance drop across the 
> board around 450,000 documents. Why is that?
>
> 4. Searching performance appears to decrease towards a fairly 
> pessimistic 20 searches per second (for a relatively simple search). 
> Is this really what we should expect long-term from Lucene?
>
> 5. Does my benchmark even make sense? I am far from an expert on 
> benchmarking so it is possible I'm not measuring what I think I am 
> measuring.
>
> Thanks in advance for any insight you can provide. This is an area 
> that we very much want to understand better as Lucene is a key part of 
> JIRA's success,
>
> Cheers,
> Justus
> JIRA Developer
>
> [1]: http://www.atlassian.com
> [2]: http://www.gossamer-threads.com/lists/lucene/java-dev/47895
> [3]: http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 10:43:54 2008
Return-Path: <java-user-return-36954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1854 invoked from network); 3 Nov 2008 10:43:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 10:43:54 -0000
Received: (qmail 91805 invoked by uid 500); 3 Nov 2008 10:43:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91778 invoked by uid 500); 3 Nov 2008 10:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91766 invoked by uid 99); 3 Nov 2008 10:43:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 02:43:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [213.133.51.241] (HELO mail.hippo.nl) (213.133.51.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 10:42:31 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Performance of never optimizing
Date: Mon, 3 Nov 2008 11:43:10 +0100
Message-ID: <F8E386B54CE3E6408F3A32ABB9A7908A015CB103@hai02.hippointern.lan>
In-Reply-To: <490E9309.1090300@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Performance of never optimizing
Thread-Index: Ack9eVXvnZxmDXOzSiWdhQfBMgNtpgAJidDQ
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com> <490E9309.1090300@gmail.com>
From: "Ard Schrijvers" <a.schrijvers@onehippo.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello Justus, Chris and Otis,

IIRC Ocean [1] by Jason Rutherglen addresses the issue for real time
searches on large data sets. A conceptually comparable implementation is
done for Jackrabbit, where you can see an enlighting picture over here
[2]. In short:=20

1) IndexReaders are opened only once and *never* reopened
(ReadOnlyIndexReader)
2) Deletions are persisted in the CommittableIndexReader and reflected
in a in memory BitSet (which is combined with the ReadOnlyIndexReader to
reflect deletions: note that deletions are thus reflected without
re-openening an index reader)
3) New documents are added to an in memory index
4) Searching is done in the CombinedIndexReader combining (1), (2) and
(3)
5) Index merging works similar to normal segment merging within one
single lucene index.

This mechanism helps you with instant reflection of changes without
having to reopen index readers.

Hope this helps.

Regards Ard

[1]
http://wiki.apache.org/lucene-java/OceanRealtimeSearch?highlight=3D(GData=
)
[2] http://jackrabbit.apache.org/index-readers.html

>=20
> Hi, Justus,
>=20
> I had met with very similar problems as JIRA has, which has=20
> high modification and on a large data volume. It's a pretty=20
> common use case for Lucene.
>=20
> The way I dealt with high rate of modification is to create a=20
> secondary in-memory index. And only persist documents older=20
> than a period of time.
> So searching will need to combine results from two indexes.=20
> It's a bit complicated when creating the index, but it's=20
> worth well to save the extra IO-heavy merging and to improve=20
> response time, especially the ability to search right away=20
> with just added documents.
>=20
> BTW: JIRA is great!
>=20
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:=20
> http://wiki.dbsight.com/index.php?title=3DCreate_Lucene_Database
> _Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per=20
> request) got 2.6 Million Euro funding!
>=20
> Justus Pendleton wrote:
> > Howdy,
> >
> > I have a couple of questions regarding some Lucene benchmarking and=20
> > what the results mean[3]. (Skip to the numbered list at the=20
> end if you=20
> > don't want to read the lengthy exegesis :)
> >
> > I'm a developer for JIRA[1]. We are currently trying to get=20
> a better=20
> > understanding of Lucene, and our use of it, to cope with=20
> the needs of=20
> > our larger customers. These "large" indexes are only a=20
> couple hundred=20
> > thousand documents but our problem is compounded by the=20
> fact that they=20
> > have a relatively high rate of modification (=3Ddelete+insert of new
> > document) and our users expect these modification to show=20
> up in query=20
> > results pretty much instantly.
> >
> > Our current default behaviour is a merge factor of 4. We perform an=20
> > optimization on the index every 4000 additions. We also perform an=20
> > optimize at midnight. Our fundamental problem is that these=20
> > optimizations are locking the index for unacceptably long=20
> periods of=20
> > time, something that we want to resolve for our next major release,=20
> > hopefully without undermining search performance too badly.
> >
> > In the Lucene javadoc there is a comment, and a link to a=20
> mailing list=20
> > discussion[2], that suggests applications such as JIRA should never=20
> > perform optimize but should instead set their merge factor very low.
> >
> > In an attempt to understand the impact of a) lowering the=20
> merge factor=20
> > from 4 to 2 and b) never, ever optimizing on an index (over=20
> the course=20
> > of years and millions of additions/updates) I wanted to try to=20
> > benchmark Lucene.
> >
> > I used the contrib/benchmark framework and wrote a small algorithm=20
> > that adds documents to an index (using the Reuters doc generator),=20
> > does a search, does an optimize, then does another search. All the=20
> > pretty pictures can be seen at:
> >
> >   http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs
> >
> > I have several questions, hopefully they aren't=20
> overwhelming in their=20
> > quantity :-/
> >
> > 1. Why does the merge factor of 4 appear to be faster than=20
> the merge=20
> > factor of 2?
> >
> > 2. Why does non-optimized searching appear to be faster=20
> than optimized=20
> > searching once the index hits ~500,000 documents?
> >
> > 3. There appears to be a fairly sizable performance drop across the=20
> > board around 450,000 documents. Why is that?
> >
> > 4. Searching performance appears to decrease towards a fairly=20
> > pessimistic 20 searches per second (for a relatively simple search).
> > Is this really what we should expect long-term from Lucene?
> >
> > 5. Does my benchmark even make sense? I am far from an expert on=20
> > benchmarking so it is possible I'm not measuring what I think I am=20
> > measuring.
> >
> > Thanks in advance for any insight you can provide. This is an area=20
> > that we very much want to understand better as Lucene is a=20
> key part of=20
> > JIRA's success,
> >
> > Cheers,
> > Justus
> > JIRA Developer
> >
> > [1]: http://www.atlassian.com
> > [2]: http://www.gossamer-threads.com/lists/lucene/java-dev/47895
> > [3]: http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 12:08:06 2008
Return-Path: <java-user-return-36955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21942 invoked from network); 3 Nov 2008 12:08:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 12:08:06 -0000
Received: (qmail 68149 invoked by uid 500); 3 Nov 2008 12:08:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68116 invoked by uid 500); 3 Nov 2008 12:08:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68105 invoked by uid 99); 3 Nov 2008 12:08:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 04:08:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.178.250 as permitted sender)
Received: from [64.233.178.250] (HELO hs-out-0708.google.com) (64.233.178.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 12:06:46 +0000
Received: by hs-out-0708.google.com with SMTP id 4so1294493hsl.5
        for <java-user@lucene.apache.org>; Mon, 03 Nov 2008 04:07:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=mcI397CsV3XkMektn+kAVLd2klEkdJRQgZwWVT5X9Fs=;
        b=uosyRFAPnoVwsz2Fmbw0tmqPSlygi8pD+dSE45lByQoAyeLei5Z34CuEZTFIM7TXXi
         NqyLIZp0jCijgDJw4kfRXNersaKY8ybmCqtDek+NxeoarceRfRbTqWU79Crdgr2bpmU5
         LaSMbGHStVQ+xo6Yp7MSJLYDhz/kGuoylz3TQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=mHKr2Np2ljjdvtX2gXgr1+0rVAEtNBzEcg8TfcNg+NmpsFx7f+uxdjko44X+Evnoil
         l0bl3U0BOFBNXM/omdy1jDCXemq4luH/SaxxMos5nuLgPDOMf30/BXH+BcsR6wbsafWK
         zWLBDjndKB517zyKICQ3c/6+5klMfZtiIsY0Y=
Received: by 10.90.93.8 with SMTP id q8mr13703agb.38.1225714046661;
        Mon, 03 Nov 2008 04:07:26 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 5sm9677316agc.29.2008.11.03.04.07.25
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 03 Nov 2008 04:07:25 -0800 (PST)
Message-ID: <490EE97C.1030905@gmail.com>
Date: Mon, 03 Nov 2008 07:07:24 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance of never optimizing
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
In-Reply-To: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Am I missing your benchmark algorithm somewhere? We need it. Something 
doesn't make sense.

- Mark


Justus Pendleton wrote:
> Howdy,
>
> I have a couple of questions regarding some Lucene benchmarking and 
> what the results mean[3]. (Skip to the numbered list at the end if you 
> don't want to read the lengthy exegesis :)
>
> I'm a developer for JIRA[1]. We are currently trying to get a better 
> understanding of Lucene, and our use of it, to cope with the needs of 
> our larger customers. These "large" indexes are only a couple hundred 
> thousand documents but our problem is compounded by the fact that they 
> have a relatively high rate of modification (=delete+insert of new 
> document) and our users expect these modification to show up in query 
> results pretty much instantly.
>
> Our current default behaviour is a merge factor of 4. We perform an 
> optimization on the index every 4000 additions. We also perform an 
> optimize at midnight. Our fundamental problem is that these 
> optimizations are locking the index for unacceptably long periods of 
> time, something that we want to resolve for our next major release, 
> hopefully without undermining search performance too badly.
>
> In the Lucene javadoc there is a comment, and a link to a mailing list 
> discussion[2], that suggests applications such as JIRA should never 
> perform optimize but should instead set their merge factor very low.
>
> In an attempt to understand the impact of a) lowering the merge factor 
> from 4 to 2 and b) never, ever optimizing on an index (over the course 
> of years and millions of additions/updates) I wanted to try to 
> benchmark Lucene.
>
> I used the contrib/benchmark framework and wrote a small algorithm 
> that adds documents to an index (using the Reuters doc generator), 
> does a search, does an optimize, then does another search. All the 
> pretty pictures can be seen at:
>
>   http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs
>
> I have several questions, hopefully they aren't overwhelming in their 
> quantity :-/
>
> 1. Why does the merge factor of 4 appear to be faster than the merge 
> factor of 2?
>
> 2. Why does non-optimized searching appear to be faster than optimized 
> searching once the index hits ~500,000 documents?
>
> 3. There appears to be a fairly sizable performance drop across the 
> board around 450,000 documents. Why is that?
>
> 4. Searching performance appears to decrease towards a fairly 
> pessimistic 20 searches per second (for a relatively simple search). 
> Is this really what we should expect long-term from Lucene?
>
> 5. Does my benchmark even make sense? I am far from an expert on 
> benchmarking so it is possible I'm not measuring what I think I am 
> measuring.
>
> Thanks in advance for any insight you can provide. This is an area 
> that we very much want to understand better as Lucene is a key part of 
> JIRA's success,
>
> Cheers,
> Justus
> JIRA Developer
>
> [1]: http://www.atlassian.com
> [2]: http://www.gossamer-threads.com/lists/lucene/java-dev/47895
> [3]: http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 12:35:52 2008
Return-Path: <java-user-return-36956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35099 invoked from network); 3 Nov 2008 12:35:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 12:35:51 -0000
Received: (qmail 97166 invoked by uid 500); 3 Nov 2008 12:35:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97126 invoked by uid 500); 3 Nov 2008 12:35:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97114 invoked by uid 99); 3 Nov 2008 12:35:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 04:35:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 12:34:36 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.291.1; Mon, 3 Nov 2008 13:34:54 +0100
Subject: Re: Performance of never optimizing
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Mon, 3 Nov 2008 13:34:56 +0100
Message-ID: <1225715696.6789.22.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2008-11-03 at 04:42 +0100, Justus Pendleton wrote:
> 1. Why does the merge factor of 4 appear to be faster than the merge
> factor of 2?

Because you alternate between updating the index and searching? With 4
segments, chances are that most of the segment-data will be unchanged
between searches, meaning that part of it will be in the disk-cache.

This is tied to question #4.

> 2. Why does non-optimized searching appear to be faster than optimized
> searching once the index hits ~500,000 documents?

Same reason as above?

> 4. Searching performance appears to decrease towards a fairly
> pessimistic 20 searches per second (for a relatively simple search).
> Is this really what we should expect long-term from Lucene?

Quick guess: You do not perform a proper warm up before measuring.

> 5. Does my benchmark even make sense? I am far from an expert on
> benchmarking so it is possible I'm not measuring what I think I am
> measuring.

You need to provide more details. Maybe a bit of pseudo-code (or real
code, if it's not too big) would help.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 12:52:04 2008
Return-Path: <java-user-return-36957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39206 invoked from network); 3 Nov 2008 12:52:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 12:52:04 -0000
Received: (qmail 11684 invoked by uid 500); 3 Nov 2008 12:52:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11653 invoked by uid 500); 3 Nov 2008 12:52:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11642 invoked by uid 99); 3 Nov 2008 12:52:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 04:52:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.106 as permitted sender)
Received: from [65.55.111.106] (HELO blu0-omc2-s31.blu0.hotmail.com) (65.55.111.106)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 12:50:44 +0000
Received: from BLU149-W19 ([65.55.111.72]) by blu0-omc2-s31.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 3 Nov 2008 04:51:04 -0800
Message-ID: <BLU149-W199037E49261A4011CF84AB91D0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_c3d42a88-e45c-40c4-81e7-b0aa2fee7dad_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Read all the data from an index
Date: Mon, 3 Nov 2008 07:51:03 -0500
Importance: Normal
In-Reply-To: <490ABC9A.7080201@getopt.org>
References: <BLU149-W32AB003904D7CB3141E4CB9210@phx.gbl>
	 <359a92830810301309u6f787bfepd0a0783b1663875a@mail.gmail.com>
	 <BLU149-W24E80A4C2A7E31710F2F70B9210@phx.gbl>
 <359a92830810301657m42f727peb56b9f8bc7ec219@mail.gmail.com>
 <490ABC9A.7080201@getopt.org>
MIME-Version: 1.0
X-OriginalArrivalTime: 03 Nov 2008 12:51:04.0014 (UTC) FILETIME=[D4C84EE0:01C93DB2]
X-Virus-Checked: Checked by ClamAV on apache.org

--_c3d42a88-e45c-40c4-81e7-b0aa2fee7dad_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Thank you both for your help.

> Date: Fri=2C 31 Oct 2008 09:06:50 +0100
> From: ab@getopt.org
> To: java-user@lucene.apache.org
> Subject: Re: Read all the data from an index
>=20
> Erick Erickson wrote:
> > I'm not sure what *could* be easier than looping with IndexSearcher.doc=
()=2C
> > looping from 1 to maxDoc. Of course you'll have to pay some attention t=
o
> > whether you get a document back or not=2C and I'm not quite sure whethe=
r you'd
> > have to worry about getting deleted documents. But I don't think either=
 of
> > these
> > really count if the index was optimized
>=20
> Document numbers start at 0. You will never get a document marked=20
> "deleted" from either IndexReader or IndexSearcher.
>=20
> Why use IndexSearcher and not IndexReader?
>=20
> IndexReader reader =3D IndexReader.open(....)=3B
>=20
> for (int i =3D 0=3B i < reader.maxDoc()=3B i++) {
> 	if (reader.isDeleted(i)) {
> 		continue=3B
> 	}
> 	Document doc =3D reader.document(i)=3B
> 	...
> }
>=20
> Hint: if you have an unoptimized index with deleted documents=2C and you=
=20
> want to retrieve also the content of these deleted documents=2C call firs=
t=20
> IndexReader.undeleteAll().
>=20
> --=20
> Best regards=2C
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval=2C Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix=2C System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe=2C e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands=2C e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
Want to read Hotmail messages in Outlook? The Wordsmiths show you how.
http://windowslive.com/connect/post/wedowindowslive.spaces.live.com-Blog-cn=
s!20EE04FBC541789!167.entry?ocid=3DTXT_TAGLM_WL_hotmail_092008=

--_c3d42a88-e45c-40c4-81e7-b0aa2fee7dad_--

From java-user-return-36958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 16:08:31 2008
Return-Path: <java-user-return-36958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78641 invoked from network); 3 Nov 2008 16:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 16:08:30 -0000
Received: (qmail 75829 invoked by uid 500); 3 Nov 2008 16:08:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75791 invoked by uid 500); 3 Nov 2008 16:08:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75780 invoked by uid 99); 3 Nov 2008 16:08:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 08:08:29 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 16:07:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kx1y4-00025G-CB
	for java-user@lucene.apache.org; Mon, 03 Nov 2008 08:07:52 -0800
Message-ID: <20305354.post@talk.nabble.com>
Date: Mon, 3 Nov 2008 08:07:52 -0800 (PST)
From: JulieSoko <julie.sokolowski@saic.com>
To: java-user@lucene.apache.org
Subject: No segment files found/ Searcher error
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: julie.sokolowski@saic.com
X-Virus-Checked: Checked by ClamAV on apache.org


I am narrowing down this problem that I have had for a week now...   I am
using lucene version 2.3.1 and 64 bit java versio 1.5.0-12-b04 running on 
Linux box.  We are merging indexes every 60 seconds and there are 1..*
searches occuring at anytime on the indexes.  The problem is that we will
get an Input /Output error trying to read the index for a search randomly...
say every 5th search.  I have posted the error before, but have narrowed it
down, I believe, to a merge issue.  

This is the error that a searcher will output at random times:
 java.io.IOException: Input/output error
 java.io.RandomAccessFile.readBytes(Native Method)
 java.io.RandomAccessFile.read(RandomAccessFile.java:315)
 at
org.apache.lucene.store.FSDirecotry$FSIndexInput.readInternal(FSDirectory.java:550)
 at
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java:131)
 at
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240)
at
org.apache.lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
152)
at
org.apache.lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
152)
at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:123)
at org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:154)
at
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:223)
at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:217)
at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:678)
at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:87)
at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
at
org.apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:311)
at org.apache.lucene.search.Searcher.search(Searcher.java:178) 


******************************************************************************
NOW, when I get the above Exception, I check the index using the
CheckIndex.check method... As part of the check , this exception is thrown:


Error: could not read any segments file in directory
java.io.FileNotFoundException: no segments* file found in
org.apache.lucen.store.FSDirectory@appfs/rt10/jetty/20081103 
    at
org.apache.lucene.index.SegmentInfos$findSegmentsFile.run(SegementInfos.java:587)
 .....

Is there any point in the merging of indexes that the segment files are
removed?   If I rerun the search, right after this error occurs, the search
is ok... I do open a new IndexSearcher...   

The IndexWriter code is this:
   IndexWriter combinedWriter = new IndexWriter(currentMergeDir, new
StandardAnalyzer());
   combinedWriter.addIndexes(dirToMerge);
   combinedWriter.flush();
   combinedWriter.close();


As you can see above, each time there is a merge a new IndexWriter is
created, indexes added, flushed and closed.
I know you are not supposed to have synchronization issues between writing
and flushing , but could there be an issue when you are creating a new
searcher at the instant where the files are merged and there are no segments
in a dir???

Thanks,
Julie








-- 
View this message in context: http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20305354.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 18:44:27 2008
Return-Path: <java-user-return-36959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83572 invoked from network); 3 Nov 2008 18:44:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 18:44:27 -0000
Received: (qmail 96637 invoked by uid 500); 3 Nov 2008 18:44:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96593 invoked by uid 500); 3 Nov 2008 18:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96481 invoked by uid 99); 3 Nov 2008 18:44:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 10:44:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 18:43:09 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 3C3F171C3FC; Mon,  3 Nov 2008 10:43:50 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 390D571C394
	for <java-user@lucene.apache.org>; Mon,  3 Nov 2008 10:43:50 -0800 (PST)
Date: Mon, 3 Nov 2008 10:43:50 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <20263342.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0811031043180.25398@radix.cryptio.net>
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
 <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com>
 <4908FAA4.9070809@gmail.com> <20263342.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I'm having a similar problem with my application, although we are using
: lucene 2.3.2. The problem we have is that we are required to sort on most of
: the fields (20 at least). Is there any way of changing the cache being used?

there is a patch in Jira that takes a completley different approach
towards dealing with sorting by using the *stored* values of the documents
that match...

https://issues.apache.org/jira/browse/LUCENE-769

...in theory it's "better" for use cases where:

  1) you are confident you are going to get back a "small" result set in
     proportion to the total size of your index.
  2) you need to support sorting on "lots" of fields and don't have enough
     ram for all of the FieldCaches of those fields

So far the only person to test it out (and post comments) is the patch
submitter, but if other people report success it might be worth adding as
a contrib.

(Disclaimer: it looks like the patch was updated after my last 
review/comments.  i have not read, nor claim any opinion about the 
currently attached patch)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 18:59:23 2008
Return-Path: <java-user-return-36960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89665 invoked from network); 3 Nov 2008 18:59:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 18:59:23 -0000
Received: (qmail 21398 invoked by uid 500); 3 Nov 2008 18:59:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21371 invoked by uid 500); 3 Nov 2008 18:59:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21360 invoked by uid 99); 3 Nov 2008 18:59:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 10:59:21 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 18:58:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kx4dR-0002Jy-03
	for java-user@lucene.apache.org; Mon, 03 Nov 2008 10:58:45 -0800
Message-ID: <20308455.post@talk.nabble.com>
Date: Mon, 3 Nov 2008 10:58:44 -0800 (PST)
From: stephenlindauer <sdlyr8@gmail.com>
To: java-user@lucene.apache.org
Subject: Sort search by weight of search term
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: sdlyr8@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I have a lucene search and I want to implement a way to sort the search by
giving one search term more importance than another and sort it by the
scores i'm getting. What would be the best way to do something like this?
-- 
View this message in context: http://www.nabble.com/Sort-search-by-weight-of-search-term-tp20308455p20308455.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 19:40:52 2008
Return-Path: <java-user-return-36961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4257 invoked from network); 3 Nov 2008 19:40:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 19:40:52 -0000
Received: (qmail 83754 invoked by uid 500); 3 Nov 2008 19:40:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83726 invoked by uid 500); 3 Nov 2008 19:40:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83715 invoked by uid 99); 3 Nov 2008 19:40:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 11:40:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 19:39:36 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-2022-JP"
Content-Transfer-Encoding: 7bit
Subject: How to use TermFreqVector to search similar documents, and the BooksLikeThis example
Date: Mon, 3 Nov 2008 14:39:54 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B430315FE59@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to use TermFreqVector to search similar documents, and the BooksLikeThis example
Thread-Index: Ack96/HKEKCPQXOtTLG8rnIMyu+9fQ==
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I'd like to find documents that are similar to the one I have
in the index (or the one I am abuot to add, if there is no
similar document... I prefer this way if possible).

If I understand it correctly, I should be able to use
TermFreqVector for this. I wanted to tell Lucene,
"search for similar Documents whose TermFrequencyVectorv
have angle less than 5 degree with the Document I have".

I was hoping BooksLikeThis example found in Lucene In Action
(1st Edition) provides such example.  But this one seems
to create a regular array of all the Terms found in the
Vector and issue a regular search.  I don't see a place
where I can set the similar-ness of the documents I want etc.

Is there any way I can tell how similar documents
I want using term frequency vector?

--------
Basis Technology Corporation, San Francisco
T. "Kuro" Kurosaka

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 20:57:03 2008
Return-Path: <java-user-return-36962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42352 invoked from network); 3 Nov 2008 20:57:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 20:57:03 -0000
Received: (qmail 78160 invoked by uid 500); 3 Nov 2008 20:57:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78121 invoked by uid 500); 3 Nov 2008 20:57:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78110 invoked by uid 99); 3 Nov 2008 20:57:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 12:57:01 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 20:55:42 +0000
Received: by yw-out-2324.google.com with SMTP id 3so964515ywj.5
        for <java-user@lucene.apache.org>; Mon, 03 Nov 2008 12:56:12 -0800 (PST)
Received: by 10.90.120.17 with SMTP id s17mr447575agc.101.1225745772541;
        Mon, 03 Nov 2008 12:56:12 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm10538252agc.14.2008.11.03.12.56.11
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 03 Nov 2008 12:56:11 -0800 (PST)
Message-Id: <C7F56D9D-4F08-4D36-BDAE-B2700E67D761@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20305354.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: No segment files found/ Searcher error
Date: Mon, 3 Nov 2008 15:56:10 -0500
References: <20305354.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Did you resolve the issue where you were closing the IndexSearcher  
while searches were still running?

That's where we got to on the last thread:

     http://www.nabble.com/Lucene-Input-Output-error-to20156805.html

Mike

JulieSoko wrote:

>
> I am narrowing down this problem that I have had for a week now...    
> I am
> using lucene version 2.3.1 and 64 bit java versio 1.5.0-12-b04  
> running on
> Linux box.  We are merging indexes every 60 seconds and there are 1..*
> searches occuring at anytime on the indexes.  The problem is that we  
> will
> get an Input /Output error trying to read the index for a search  
> randomly...
> say every 5th search.  I have posted the error before, but have  
> narrowed it
> down, I believe, to a merge issue.
>
> This is the error that a searcher will output at random times:
> java.io.IOException: Input/output error
> java.io.RandomAccessFile.readBytes(Native Method)
> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
> at
> org.apache.lucene.store.FSDirecotry 
> $FSIndexInput.readInternal(FSDirectory.java:550)
> at
> org 
> .apache 
> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java: 
> 131)
> at
> org.apache.lucene.index.CompoundFileReader 
> $CSIndexInput.readInternal(CompoundFileReader.java:240)
> at
> org 
> .apache 
> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
> 152)
> at
> org 
> .apache 
> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
> 152)
> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
> at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java: 
> 123)
> at  
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java: 
> 154)
> at
> org 
> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java: 
> 223)
> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java: 
> 217)
> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java: 
> 678)
> at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java: 
> 87)
> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
> at
> org 
> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java: 
> 311)
> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>
>
> ******************************************************************************
> NOW, when I get the above Exception, I check the index using the
> CheckIndex.check method... As part of the check , this exception is  
> thrown:
>
>
> Error: could not read any segments file in directory
> java.io.FileNotFoundException: no segments* file found in
> org.apache.lucen.store.FSDirectory@appfs/rt10/jetty/20081103
>    at
> org.apache.lucene.index.SegmentInfos 
> $findSegmentsFile.run(SegementInfos.java:587)
> .....
>
> Is there any point in the merging of indexes that the segment files  
> are
> removed?   If I rerun the search, right after this error occurs, the  
> search
> is ok... I do open a new IndexSearcher...
>
> The IndexWriter code is this:
>   IndexWriter combinedWriter = new IndexWriter(currentMergeDir, new
> StandardAnalyzer());
>   combinedWriter.addIndexes(dirToMerge);
>   combinedWriter.flush();
>   combinedWriter.close();
>
>
> As you can see above, each time there is a merge a new IndexWriter is
> created, indexes added, flushed and closed.
> I know you are not supposed to have synchronization issues between  
> writing
> and flushing , but could there be an issue when you are creating a new
> searcher at the instant where the files are merged and there are no  
> segments
> in a dir???
>
> Thanks,
> Julie
>
>
>
>
>
>
>
>
> -- 
> View this message in context: http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20305354.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 21:38:28 2008
Return-Path: <java-user-return-36963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71595 invoked from network); 3 Nov 2008 21:38:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 21:38:28 -0000
Received: (qmail 49886 invoked by uid 500); 3 Nov 2008 21:38:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49857 invoked by uid 500); 3 Nov 2008 21:38:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49802 invoked by uid 99); 3 Nov 2008 21:38:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 13:38:23 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 21:37:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kx77K-0002z7-5a
	for java-user@lucene.apache.org; Mon, 03 Nov 2008 13:37:46 -0800
Message-ID: <20311386.post@talk.nabble.com>
Date: Mon, 3 Nov 2008 13:37:46 -0800 (PST)
From: PabloS <pablo.a.saavedra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <Pine.LNX.4.62.0811031043180.25398@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pablo.a.saavedra@gmail.com
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com> <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com> <4908FAA4.9070809@gmail.com> <20263342.post@talk.nabble.com> <Pine.LNX.4.62.0811031043180.25398@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks hossman, but I've already 'solved' the problem without the need to
patch lucene. I had to code a bit around Lucene's visibility restrictions
but I've managed to completely skip the field caching mechanism and add
ehcache to it.

At the moment it seems to be working quite well, although not as fast as it
was when lucene performed the caching.

Thanks a lot for the info anyway.
Regards.

hossman wrote:
> 
> 
> : I'm having a similar problem with my application, although we are using
> : lucene 2.3.2. The problem we have is that we are required to sort on
> most of
> : the fields (20 at least). Is there any way of changing the cache being
> used?
> 
> there is a patch in Jira that takes a completley different approach
> towards dealing with sorting by using the *stored* values of the documents
> that match...
> 
> https://issues.apache.org/jira/browse/LUCENE-769
> 
> ...in theory it's "better" for use cases where:
> 
>   1) you are confident you are going to get back a "small" result set in
>      proportion to the total size of your index.
>   2) you need to support sorting on "lots" of fields and don't have enough
>      ram for all of the FieldCaches of those fields
> 
> So far the only person to test it out (and post comments) is the patch
> submitter, but if other people report success it might be worth adding as
> a contrib.
> 
> (Disclaimer: it looks like the patch was updated after my last 
> review/comments.  i have not read, nor claim any opinion about the 
> currently attached patch)
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-tp20236834p20311386.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 21:45:24 2008
Return-Path: <java-user-return-36964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77273 invoked from network); 3 Nov 2008 21:45:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 21:45:23 -0000
Received: (qmail 62145 invoked by uid 500); 3 Nov 2008 21:45:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62115 invoked by uid 500); 3 Nov 2008 21:45:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62104 invoked by uid 99); 3 Nov 2008 21:45:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 13:45:23 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 21:44:04 +0000
Received: by yx-out-2324.google.com with SMTP id 3so980696yxj.5
        for <java-user@lucene.apache.org>; Mon, 03 Nov 2008 13:44:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=0Um32adG3s7gGveKfoqtmFuz+qXOSToSSCzouGcVffY=;
        b=nanPXJf9+ixYJcUNMh+LPFP1AXpdvegSrK1f2wVq3TpmUzh+CORsR/rFSr/UvxvqcG
         FqjrVKsxCTlXc3lGyGU+nosGB0D71DUjYbqW40zgZ9g59WANcD7IWfirFh3j+X81tY7H
         YJoYX2bZnp+fYkFFCHEX+JipGR+lNcB3/ZomE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=rQ1CW3q4Bt3s62fbAVvC+we+LuceCtn5xgbKj6A7aSEVdKh/H4srdnO8bTs0nMbEov
         nRywCYSX+0Ts7OwEzbVyuqA68fYG250G0hkPqqBuMBmTX27p42DWlWSyNx133uU1zdD1
         KNoUkJEyccX5KCDHh0588oqou/xghdo2l/yrk=
Received: by 10.100.108.2 with SMTP id g2mr206254anc.94.1225748685123;
        Mon, 03 Nov 2008 13:44:45 -0800 (PST)
Received: by 10.100.135.17 with HTTP; Mon, 3 Nov 2008 13:44:44 -0800 (PST)
Message-ID: <847931a70811031344x28e4c080w5a83f38dba64e31b@mail.gmail.com>
Date: Mon, 3 Nov 2008 14:44:44 -0700
From: "Todd Benge" <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <20311386.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
	 <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com>
	 <4908FAA4.9070809@gmail.com> <20263342.post@talk.nabble.com>
	 <Pine.LNX.4.62.0811031043180.25398@radix.cryptio.net>
	 <20311386.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Pablo,

Would you mind adding a little more detail about how you're working
around the problem?

I'm still evaluating our different options so am interested in what you did.

Todd

On Mon, Nov 3, 2008 at 2:37 PM, PabloS <pablo.a.saavedra@gmail.com> wrote:
>
> Thanks hossman, but I've already 'solved' the problem without the need to
> patch lucene. I had to code a bit around Lucene's visibility restrictions
> but I've managed to completely skip the field caching mechanism and add
> ehcache to it.
>
> At the moment it seems to be working quite well, although not as fast as it
> was when lucene performed the caching.
>
> Thanks a lot for the info anyway.
> Regards.
>
> hossman wrote:
>>
>>
>> : I'm having a similar problem with my application, although we are using
>> : lucene 2.3.2. The problem we have is that we are required to sort on
>> most of
>> : the fields (20 at least). Is there any way of changing the cache being
>> used?
>>
>> there is a patch in Jira that takes a completley different approach
>> towards dealing with sorting by using the *stored* values of the documents
>> that match...
>>
>> https://issues.apache.org/jira/browse/LUCENE-769
>>
>> ...in theory it's "better" for use cases where:
>>
>>   1) you are confident you are going to get back a "small" result set in
>>      proportion to the total size of your index.
>>   2) you need to support sorting on "lots" of fields and don't have enough
>>      ram for all of the FieldCaches of those fields
>>
>> So far the only person to test it out (and post comments) is the patch
>> submitter, but if other people report success it might be worth adding as
>> a contrib.
>>
>> (Disclaimer: it looks like the patch was updated after my last
>> review/comments.  i have not read, nor claim any opinion about the
>> currently attached patch)
>>
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context: http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-tp20236834p20311386.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 22:25:36 2008
Return-Path: <java-user-return-36965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10454 invoked from network); 3 Nov 2008 22:25:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 22:25:36 -0000
Received: (qmail 30088 invoked by uid 500); 3 Nov 2008 22:25:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30060 invoked by uid 500); 3 Nov 2008 22:25:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30049 invoked by uid 99); 3 Nov 2008 22:25:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 14:25:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of matthew.deloria@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 22:24:19 +0000
Received: by ug-out-1314.google.com with SMTP id c2so64962ugf.23
        for <java-user@lucene.apache.org>; Mon, 03 Nov 2008 14:24:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=nafyjL40CoEPTocBh4Up29+dGA1JDsQwpMc+SVXCqvc=;
        b=oTEsR+zvyH+X49yjXYmCzKZuCbha5FADVvqVpniTkNYWnVjpQGaNZIVwXkAnBY4HD5
         q5PohmXbs8xp0ITDGO60WL6TwJCxeloN06sTJVCite/6eJqcqq4QH1G4TTJDtzK0TMWL
         e+mtpIXDu6Zkq4m12WzzmwzVE3tYNbGrq4/84=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=eI9MwYYf7qjPxItEAzSdlfVIJOWuevBF/WKRJRCnVwA28OKORl1BgqSPP+chmNtRwz
         snoJtsevQiZQOXuYMUEGV+iz+9OCGA9OCc2lFIBkMQHlxm+hY1ksDstlmqNoxRzHtkwN
         c8o13CPTOjvWn5W5jo/YFxAec28yOIYI2ddVk=
Received: by 10.103.137.19 with SMTP id p19mr297271mun.108.1225751091251;
        Mon, 03 Nov 2008 14:24:51 -0800 (PST)
Received: by 10.103.169.7 with HTTP; Mon, 3 Nov 2008 14:24:51 -0800 (PST)
Message-ID: <a057f2cf0811031424x49dd98ddw8d682119e58dc606@mail.gmail.com>
Date: Mon, 3 Nov 2008 17:24:51 -0500
From: "Matthew DeLoria" <matthew.deloria@gmail.com>
To: java-user@lucene.apache.org
Subject: Reading from an IndexWriter
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62841_11464642.1225751091243"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62841_11464642.1225751091243
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I had a question about more about Best Practices and reading from an
IndexWriter.

Currently, we have an index which we call the master index. This index, in
itself, represents our data model. Many clients can access this index.

However, we have importer and updating clients which essentially add to this
index periodically. These tasks can have specific logic where we can grab
specific documents, update some of the data, and call
writer.updateDocument(..). We also allow the adding of documents. Each of
these tasks however, may depend on data we are adding to the writer at the
same time.

For example, I could say writer.addDocument() and a second later I may need
to do a query for this very document I just added. Currently, we have a temp
directory where all the writing is occurring. We have a searcher that
searches this index. Now, for this searcher to see the writes that occurring
to this temp index, it needs to be reconstructed each time we need to do a
search which is very very inefficient, as this could happen very frequently.
Consider the situation where I add a document and then need to get this
document immediately after. The searcher would need to be closed and the
reader reopened. I will also have to call a commit (or flush) on the writer
before doing this. Unfortunantly, we can't have our TempDirectory be a ram
directory exclusively because we can't guarantee how much memory each client
will have.

So my question is, is there a way I can read what documents are sitting in
the writer without having to do this painful flush/reopen? I know this is
not how Lucene is intended to work but in our case it would be very very
helpful if we could do the reading and writing from the same
IndexWriter/Reader so we wouldn't have to keep doing this reopen / flush
call.

Second, if nothing like this is possible, is the way I am doing it above the
best possible way - (Calling flush on the writer, calling reopen on the
indexreader, and reconstructing the searcher)

I am using Lucene 2.3.2 currently.

Thanks!
m

-- 
Matthew P. DeLoria
matthew.deloria@gmail.com

------=_Part_62841_11464642.1225751091243--

From java-user-return-36966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 22:38:22 2008
Return-Path: <java-user-return-36966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14350 invoked from network); 3 Nov 2008 22:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 22:38:22 -0000
Received: (qmail 44426 invoked by uid 500); 3 Nov 2008 22:38:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44389 invoked by uid 500); 3 Nov 2008 22:38:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44378 invoked by uid 99); 3 Nov 2008 22:38:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 14:38:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 22:37:03 +0000
Received: from thumbsucker.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id 5BDEB1631E84
	for <java-user@lucene.apache.org>; Mon,  3 Nov 2008 16:37:14 -0600 (CST)
Message-Id: <5727B78A-9FB9-4CC4-A437-1F4BE55835CF@atlassian.com>
From: Justus Pendleton <jpendleton@atlassian.com>
To: java-user@lucene.apache.org
In-Reply-To: <490EE97C.1030905@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Performance of never optimizing
Date: Tue, 4 Nov 2008 09:37:11 +1100
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com> <490EE97C.1030905@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 03/11/2008, at 11:07 PM, Mark Miller wrote:

> Am I missing your benchmark algorithm somewhere? We need it.  
> Something doesn't make sense.

I thought I had included in at[1] before but apparently not, my  
apologies for that. I have updated that wiki page. I'll also reproduce  
it here:

{ "Rounds"

     ResetSystemErase
     { CreateIndex >
     { AddDoc > : NUM_DOCS
     { CloseIndex >

     [ "UnoptSearch" Search > : 100
     { "Optimize" OpenIndex Optimize CloseIndex }
     [ "OptSearch" Search > : 100

     NewRound

} : 6

NUM_DOCS increases by 5,000 for each iteration.

What constitutes a "proper warm up before measuring"?

>> [1]: http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs


Cheers,
Justus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 22:41:23 2008
Return-Path: <java-user-return-36967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15551 invoked from network); 3 Nov 2008 22:41:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 22:41:23 -0000
Received: (qmail 54845 invoked by uid 500); 3 Nov 2008 22:41:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54812 invoked by uid 500); 3 Nov 2008 22:41:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54801 invoked by uid 99); 3 Nov 2008 22:41:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 14:41:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 22:40:07 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2784551rvb.5
        for <java-user@lucene.apache.org>; Mon, 03 Nov 2008 14:40:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=D5F21/Wye7RDTwKQr1AJAll6rPQNjgnKdUDUfxDcVGk=;
        b=wSd81P95FFJF5gjsgJ7pw8IEz9xt+321JQGS6o3DrnJ210V+H5/5vIRgA2Nu3qmGDs
         BIIdfG5WFOeRVWRnraVM0jSJaR9bcV9GGLUH2QNyzL6ZR7plHV5eUyzJyeLFrGxKUE2E
         dngfCyngRGXfWXdMJkTNvCWRadXEffgOtvKRU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=XB06FmlKypXrz092X9qMjQi595ha0XUeByytcG6N5xGr2MT3OHD2faxcKCAF51IkOl
         noHOrEy57u8BU8LfT5b7PtgABFg1tbgCg/F0SeEnbXVwnbsK1FW9h0GDTv/5GOvkC4Sc
         ARrVlLsmP0se4Cii0zjBrW16Br1mFZn0V3SsI=
Received: by 10.140.132.8 with SMTP id f8mr389545rvd.206.1225752048498;
        Mon, 03 Nov 2008 14:40:48 -0800 (PST)
Received: by 10.141.136.21 with HTTP; Mon, 3 Nov 2008 14:40:48 -0800 (PST)
Message-ID: <359a92830811031440k542e637sd5518096ab0a369d@mail.gmail.com>
Date: Mon, 3 Nov 2008 17:40:48 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reading from an IndexWriter
In-Reply-To: <a057f2cf0811031424x49dd98ddw8d682119e58dc606@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19966_12799534.1225752048505"
References: <a057f2cf0811031424x49dd98ddw8d682119e58dc606@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19966_12799534.1225752048505
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

One thing that others have tried is to keep a RAMindex that you
use for your modifications. That is, an index that *only* has your
mods, not your original index. But, and here's the key, when you
update, you update BOTH your RAM and FS based indexes.

When searching, you search BOTH indexes, giving precedence
to anything in your RAM index. Which, since it should
be much, much smaller than your FS-based one should re-open
quickly.

So here's the rough outline

At time T, you open both your FS and RAM indexes, the RAM
index is empty.

Any modifications happen to both indexes. Note that no
searches of your FS based index will show any of these
modifications until you re-open your searchers

Any searches look in your already-opened FS index and open
a NEW searcher on your RAM index and searches *that*
index as well.

At time T + X, you decide to go through the pain of re-opening your
FSbased dir, so you close both your indexes and start over.

You'll have to dance fancy on a few points:
> I'm unsure what serves your need best when updating an existing
   document. Do you add it to your RAM-based index first and *then*
   update it? Just add it and do a delete pass on your FS-based
   index when you close them both down?
> your Lucene doc IDs will be wonky, it's unclear (probably, in fact
   unavoidable) that an updated document in your RAM index will NOT
   have the same Lucene ID as the exact copy in your FS-based index,
   assuming you've chosen to copy it over.
> Relevance may be an issue. Your relevance scores in your RAM-based
   index will be "interesting", and probably won't correlate real well to
the
   relevance scores in your FS-based index.

I don't think any of these are insurmountable, but a lot depends upon your
requirements..

Best
Erick

P.S. this topic has been discussed in the mail archives, but I don't
remember
the topic. You might get lucky searching for something like "real time
updates"

On Mon, Nov 3, 2008 at 5:24 PM, Matthew DeLoria
<matthew.deloria@gmail.com>wrote:

> I had a question about more about Best Practices and reading from an
> IndexWriter.
>
> Currently, we have an index which we call the master index. This index, in
> itself, represents our data model. Many clients can access this index.
>
> However, we have importer and updating clients which essentially add to
> this
> index periodically. These tasks can have specific logic where we can grab
> specific documents, update some of the data, and call
> writer.updateDocument(..). We also allow the adding of documents. Each of
> these tasks however, may depend on data we are adding to the writer at the
> same time.
>
> For example, I could say writer.addDocument() and a second later I may need
> to do a query for this very document I just added. Currently, we have a
> temp
> directory where all the writing is occurring. We have a searcher that
> searches this index. Now, for this searcher to see the writes that
> occurring
> to this temp index, it needs to be reconstructed each time we need to do a
> search which is very very inefficient, as this could happen very
> frequently.
> Consider the situation where I add a document and then need to get this
> document immediately after. The searcher would need to be closed and the
> reader reopened. I will also have to call a commit (or flush) on the writer
> before doing this. Unfortunantly, we can't have our TempDirectory be a ram
> directory exclusively because we can't guarantee how much memory each
> client
> will have.
>
> So my question is, is there a way I can read what documents are sitting in
> the writer without having to do this painful flush/reopen? I know this is
> not how Lucene is intended to work but in our case it would be very very
> helpful if we could do the reading and writing from the same
> IndexWriter/Reader so we wouldn't have to keep doing this reopen / flush
> call.
>
> Second, if nothing like this is possible, is the way I am doing it above
> the
> best possible way - (Calling flush on the writer, calling reopen on the
> indexreader, and reconstructing the searcher)
>
> I am using Lucene 2.3.2 currently.
>
> Thanks!
> m
>
> --
> Matthew P. DeLoria
> matthew.deloria@gmail.com
>

------=_Part_19966_12799534.1225752048505--

From java-user-return-36968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 03 22:47:50 2008
Return-Path: <java-user-return-36968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18197 invoked from network); 3 Nov 2008 22:47:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Nov 2008 22:47:50 -0000
Received: (qmail 68667 invoked by uid 500); 3 Nov 2008 22:47:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68625 invoked by uid 500); 3 Nov 2008 22:47:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68614 invoked by uid 99); 3 Nov 2008 22:47:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 14:47:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Nov 2008 22:46:30 +0000
Received: by yw-out-2324.google.com with SMTP id 3so986768ywj.5
        for <java-user@lucene.apache.org>; Mon, 03 Nov 2008 14:47:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=yfdqQ22gC/01L1WFfn2TXnBaPHN3e5kVxF1nBUV0b7M=;
        b=UG3sRx0mvl5FHO9UdZcjuFhcQN8nPtfja/Qf3a5MheMTdfySKoatm6hq8WopHJW/Ae
         qiDCh+aZuAsao+YC1oVP0itOi/b1bMASiLYUzYjIaoxDiB+j44K0TlPeIpGPhk+mPU3a
         waLaMqrg8V25b7LinBgC2wEPjy45HZ4ubsXM4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=G+P07EmLFjvfFkbJ8Moq6H0DQDZw6eG5A7zUfUL8Yto8nldnodoLOyRU7hBrBTQ+eV
         YPBTN0NNkpGaQCptuK4gKzQpEhkJ7cA0pASqjM61mts3H/2QNzW+7WHkab3NscvSJjm6
         0Sdm9340DLbmxSd4i251/HHCw7kc1z3ISdVv8=
Received: by 10.90.104.20 with SMTP id b20mr557262agc.50.1225752431554;
        Mon, 03 Nov 2008 14:47:11 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 5sm10667686agc.29.2008.11.03.14.47.10
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 03 Nov 2008 14:47:10 -0800 (PST)
Message-ID: <490F7F6D.4080905@gmail.com>
Date: Mon, 03 Nov 2008 17:47:09 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Performance of never optimizing
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com> <490EE97C.1030905@gmail.com> <5727B78A-9FB9-4CC4-A437-1F4BE55835CF@atlassian.com>
In-Reply-To: <5727B78A-9FB9-4CC4-A437-1F4BE55835CF@atlassian.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Been a while since I've been in the benchmark stuff, so I am going to 
take some time to look at this when I get a chance, but off the cuff I 
think you are open and closing the reader for each search. Try using the 
openreader task before the 100 searches and then the closereader task. 
That will ensure you are reusing the same reader for each search. Hope 
to analyze further soon.

- Mark

Justus Pendleton wrote:
> On 03/11/2008, at 11:07 PM, Mark Miller wrote:
>
>> Am I missing your benchmark algorithm somewhere? We need it. 
>> Something doesn't make sense.
>
> I thought I had included in at[1] before but apparently not, my 
> apologies for that. I have updated that wiki page. I'll also reproduce 
> it here:
>
> { "Rounds"
>
>     ResetSystemErase
>     { CreateIndex >
>     { AddDoc > : NUM_DOCS
>     { CloseIndex >
>
>     [ "UnoptSearch" Search > : 100
>     { "Optimize" OpenIndex Optimize CloseIndex }
>     [ "OptSearch" Search > : 100
>
>     NewRound
>
> } : 6
>
> NUM_DOCS increases by 5,000 for each iteration.
>
> What constitutes a "proper warm up before measuring"?
>
>>> [1]: http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs
>
>
> Cheers,
> Justus
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 08:14:55 2008
Return-Path: <java-user-return-36969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65320 invoked from network); 4 Nov 2008 08:14:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 08:14:55 -0000
Received: (qmail 19818 invoked by uid 500); 4 Nov 2008 08:14:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19607 invoked by uid 500); 4 Nov 2008 08:14:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19596 invoked by uid 99); 4 Nov 2008 08:14:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 00:14:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 08:13:35 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.291.1; Tue, 4 Nov 2008 09:14:14 +0100
Subject: Re: Performance of never optimizing
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <5727B78A-9FB9-4CC4-A437-1F4BE55835CF@atlassian.com>
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
	 <490EE97C.1030905@gmail.com>
	 <5727B78A-9FB9-4CC4-A437-1F4BE55835CF@atlassian.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Tue, 4 Nov 2008 09:14:21 +0100
Message-ID: <1225786461.6789.34.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2008-11-03 at 23:37 +0100, Justus Pendleton wrote:
> What constitutes a "proper warm up before measuring"?

The simplest way is to do a number of searches before you start
measuring. The first searches are always very slow, compared to later
searches.

If you look at http://wiki.statsbiblioteket.dk/summa/Hardware and scroll
down to the headline "Warming up" you will see a graph of response-times
for our setup (a 37GB index and logged queries). For SSDs, we reach 2/3
of peak performance after 1,000 queries. For conventional harddisks, we
need 15,000 queries. Your mileage will wary.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 12:32:46 2008
Return-Path: <java-user-return-36970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49650 invoked from network); 4 Nov 2008 12:32:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 12:32:46 -0000
Received: (qmail 38812 invoked by uid 500); 4 Nov 2008 12:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38777 invoked by uid 500); 4 Nov 2008 12:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38766 invoked by uid 99); 4 Nov 2008 12:32:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 04:32:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zjclay@gmail.com designates 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 12:31:28 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1793434tic.11
        for <java-user@lucene.apache.org>; Tue, 04 Nov 2008 04:31:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:subject:from:to:content-type
         :date:message-id:mime-version:x-mailer:content-transfer-encoding;
        bh=0HR5KmtWIuc0HwnHn8R80lk3sOpaOrKQiwXL+HFwbZE=;
        b=qPz2zDCmy3aRSCgJFw9AdrHt+5sy8jipH1dM2wcTta8CiKmUOfamPZSr9e/Ed68rFS
         BySkb7/Jquah9xvjSvcqItIouZqEZzptoNQ4YglFgwC7X4YIfNgfbGsSrG2qEtAW4/4k
         CrI2lpKIYAywIuO7Y3Ne3cBLJdOoxOno14Nh4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=subject:from:to:content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        b=e/9hLmo2SpMDn47qbsAYgacJEAi71dEq2cXvt9XRfLdAIsyA9/G9C+A3dizEaXs8bz
         mOQ+zPDqF3dJZ2QZSAOHWmbPFGKGEeAN2nCsNWuktQsNMRTurmFQtGUxcqtgVb8AG+/9
         k1+kodnPRTBY2ewzDqK6xfUqdpcfP2bEH/C5o=
Received: by 10.110.53.19 with SMTP id b19mr1314802tia.12.1225801919217;
        Tue, 04 Nov 2008 04:31:59 -0800 (PST)
Received: from ?192.168.18.2? ([61.171.119.240])
        by mx.google.com with ESMTPS id a4sm3684349tib.4.2008.11.04.04.31.54
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 04 Nov 2008 04:31:57 -0800 (PST)
Subject: Can lucene search from multi-index directory like using FK in
 database?
From: Clay Zhong <zjclay@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Tue, 04 Nov 2008 20:31:53 +0800
Message-Id: <1225801913.6280.3.camel@clay-laptop>
Mime-Version: 1.0
X-Mailer: Evolution 2.24.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Guys,

I meet some problems when using Lucene 2.3.2. After a lot of research, I
still can't find any ways to solve them. Hope you can give me some
advice..

1. Can I search different document from multi-index when they have
connections like FK in database?
For example,
Index Dir 1 (User): Field id, Field departmentId
Index Dir 2 (Department): Field id, Field location
How can I get all user that location is USA?
Well, I can index location into User, or search from Department first to
get departmentId. But they're really terrible, is there a better way?

2. How can I search from multi-index with one query? It's different from
using MultiSearcher.
For example, there's two fields, 'title' and 'content', when I search
'Java and Lucene', how can I get documents which contains 'Java' in
'title' and 'lucene' in 'content'? (not only 'Java and Lucene' in one
field). I can add a field contains both 'title' and 'content', but
that's really really bad solution....

That's all my questions, thanks for your patient.

Best Wishes
Clay Zhong


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 13:05:44 2008
Return-Path: <java-user-return-36971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56322 invoked from network); 4 Nov 2008 13:05:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 13:05:43 -0000
Received: (qmail 63034 invoked by uid 500); 4 Nov 2008 13:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62616 invoked by uid 500); 4 Nov 2008 13:05:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62604 invoked by uid 99); 4 Nov 2008 13:05:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 05:05:41 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 13:04:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KxLai-0002Md-FH
	for java-user@lucene.apache.org; Tue, 04 Nov 2008 05:05:04 -0800
Message-ID: <20321842.post@talk.nabble.com>
Date: Tue, 4 Nov 2008 05:05:04 -0800 (PST)
From: JulieSoko <julie.sokolowski@saic.com>
To: java-user@lucene.apache.org
Subject: Re: No segment files found/ Searcher error
In-Reply-To: <C7F56D9D-4F08-4D36-BDAE-B2700E67D761@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: julie.sokolowski@saic.com
References: <20305354.post@talk.nabble.com> <C7F56D9D-4F08-4D36-BDAE-B2700E67D761@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes, I am leaving the searchers open for all indexes except for the current
day.  The index for the current day is constantly being updated and if I
happen to have the Input/Output error/no segment files found error while
searching the current day then that searcher will continue to return the i/o
error from the point on i.e. is not usable again.  So, I am now recreating
and closing the searcher for the current day only.... Each individual user
will have a new searcher for the current day for each query.   



Michael McCandless-2 wrote:
> 
> 
> Did you resolve the issue where you were closing the IndexSearcher  
> while searches were still running?
> 
> That's where we got to on the last thread:
> 
>      http://www.nabble.com/Lucene-Input-Output-error-to20156805.html
> 
> Mike
> 
> JulieSoko wrote:
> 
>>
>> I am narrowing down this problem that I have had for a week now...    
>> I am
>> using lucene version 2.3.1 and 64 bit java versio 1.5.0-12-b04  
>> running on
>> Linux box.  We are merging indexes every 60 seconds and there are 1..*
>> searches occuring at anytime on the indexes.  The problem is that we  
>> will
>> get an Input /Output error trying to read the index for a search  
>> randomly...
>> say every 5th search.  I have posted the error before, but have  
>> narrowed it
>> down, I believe, to a merge issue.
>>
>> This is the error that a searcher will output at random times:
>> java.io.IOException: Input/output error
>> java.io.RandomAccessFile.readBytes(Native Method)
>> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>> at
>> org.apache.lucene.store.FSDirecotry 
>> $FSIndexInput.readInternal(FSDirectory.java:550)
>> at
>> org 
>> .apache 
>> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java: 
>> 131)
>> at
>> org.apache.lucene.index.CompoundFileReader 
>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>> at
>> org 
>> .apache 
>> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
>> 152)
>> at
>> org 
>> .apache 
>> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
>> 152)
>> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
>> at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java: 
>> 123)
>> at  
>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java: 
>> 154)
>> at
>> org 
>> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java: 
>> 223)
>> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java: 
>> 217)
>> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java: 
>> 678)
>> at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java: 
>> 87)
>> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
>> at
>> org 
>> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java: 
>> 311)
>> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>>
>>
>> ******************************************************************************
>> NOW, when I get the above Exception, I check the index using the
>> CheckIndex.check method... As part of the check , this exception is  
>> thrown:
>>
>>
>> Error: could not read any segments file in directory
>> java.io.FileNotFoundException: no segments* file found in
>> org.apache.lucen.store.FSDirectory@appfs/rt10/jetty/20081103
>>    at
>> org.apache.lucene.index.SegmentInfos 
>> $findSegmentsFile.run(SegementInfos.java:587)
>> .....
>>
>> Is there any point in the merging of indexes that the segment files  
>> are
>> removed?   If I rerun the search, right after this error occurs, the  
>> search
>> is ok... I do open a new IndexSearcher...
>>
>> The IndexWriter code is this:
>>   IndexWriter combinedWriter = new IndexWriter(currentMergeDir, new
>> StandardAnalyzer());
>>   combinedWriter.addIndexes(dirToMerge);
>>   combinedWriter.flush();
>>   combinedWriter.close();
>>
>>
>> As you can see above, each time there is a merge a new IndexWriter is
>> created, indexes added, flushed and closed.
>> I know you are not supposed to have synchronization issues between  
>> writing
>> and flushing , but could there be an issue when you are creating a new
>> searcher at the instant where the files are merged and there are no  
>> segments
>> in a dir???
>>
>> Thanks,
>> Julie
>>
>>
>>
>>
>>
>>
>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20305354.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20321842.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 13:12:57 2008
Return-Path: <java-user-return-36972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59952 invoked from network); 4 Nov 2008 13:12:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 13:12:57 -0000
Received: (qmail 79891 invoked by uid 500); 4 Nov 2008 13:12:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79861 invoked by uid 500); 4 Nov 2008 13:12:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79850 invoked by uid 99); 4 Nov 2008 13:12:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 05:12:56 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 13:11:38 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1282318qwi.53
        for <java-user@lucene.apache.org>; Tue, 04 Nov 2008 05:12:08 -0800 (PST)
Received: by 10.214.9.8 with SMTP id 8mr1643848qai.89.1225804328250;
        Tue, 04 Nov 2008 05:12:08 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 9sm7905833ywf.2.2008.11.04.05.12.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 04 Nov 2008 05:12:06 -0800 (PST)
Message-Id: <7BE9BB4E-FE34-43D3-B045-5E421A9E05A1@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20321842.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: No segment files found/ Searcher error
Date: Tue, 4 Nov 2008 08:12:04 -0500
References: <20305354.post@talk.nabble.com> <C7F56D9D-4F08-4D36-BDAE-B2700E67D761@mikemccandless.com> <20321842.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


So it sounds like the Input/Output error was in fact because you were  
closing the IndexSearcher while an in-flight query was still using it?

Or... are you still seeing that error now that you've switched to  
opening a new IndexSearcher for the current day for every query?

It's very costly, in general, to open a new IndexSearcher per query.   
It's better to share a single searcher, and then reopen it  
periodically, taking care to leave the old one open until all queries  
have finished with it.  But it's possible in your app that this added  
cost isn't important.

Mike

JulieSoko wrote:

>
> Yes, I am leaving the searchers open for all indexes except for the  
> current
> day.  The index for the current day is constantly being updated and  
> if I
> happen to have the Input/Output error/no segment files found error  
> while
> searching the current day then that searcher will continue to return  
> the i/o
> error from the point on i.e. is not usable again.  So, I am now  
> recreating
> and closing the searcher for the current day only.... Each  
> individual user
> will have a new searcher for the current day for each query.
>
>
>
> Michael McCandless-2 wrote:
>>
>>
>> Did you resolve the issue where you were closing the IndexSearcher
>> while searches were still running?
>>
>> That's where we got to on the last thread:
>>
>>     http://www.nabble.com/Lucene-Input-Output-error-to20156805.html
>>
>> Mike
>>
>> JulieSoko wrote:
>>
>>>
>>> I am narrowing down this problem that I have had for a week now...
>>> I am
>>> using lucene version 2.3.1 and 64 bit java versio 1.5.0-12-b04
>>> running on
>>> Linux box.  We are merging indexes every 60 seconds and there are  
>>> 1..*
>>> searches occuring at anytime on the indexes.  The problem is that we
>>> will
>>> get an Input /Output error trying to read the index for a search
>>> randomly...
>>> say every 5th search.  I have posted the error before, but have
>>> narrowed it
>>> down, I believe, to a merge issue.
>>>
>>> This is the error that a searcher will output at random times:
>>> java.io.IOException: Input/output error
>>> java.io.RandomAccessFile.readBytes(Native Method)
>>> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>>> at
>>> org.apache.lucene.store.FSDirecotry
>>> $FSIndexInput.readInternal(FSDirectory.java:550)
>>> at
>>> org
>>> .apache
>>> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java:
>>> 131)
>>> at
>>> org.apache.lucene.index.CompoundFileReader
>>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>>> at
>>> org
>>> .apache
>>> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
>>> 152)
>>> at
>>> org
>>> .apache
>>> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
>>> 152)
>>> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>>> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
>>> at  
>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:
>>> 123)
>>> at
>>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:
>>> 154)
>>> at
>>> org
>>> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:
>>> 223)
>>> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:
>>> 217)
>>> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:
>>> 678)
>>> at  
>>> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:
>>> 87)
>>> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
>>> at
>>> org
>>> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:
>>> 311)
>>> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>>>
>>>
>>> ******************************************************************************
>>> NOW, when I get the above Exception, I check the index using the
>>> CheckIndex.check method... As part of the check , this exception is
>>> thrown:
>>>
>>>
>>> Error: could not read any segments file in directory
>>> java.io.FileNotFoundException: no segments* file found in
>>> org.apache.lucen.store.FSDirectory@appfs/rt10/jetty/20081103
>>>   at
>>> org.apache.lucene.index.SegmentInfos
>>> $findSegmentsFile.run(SegementInfos.java:587)
>>> .....
>>>
>>> Is there any point in the merging of indexes that the segment files
>>> are
>>> removed?   If I rerun the search, right after this error occurs, the
>>> search
>>> is ok... I do open a new IndexSearcher...
>>>
>>> The IndexWriter code is this:
>>>  IndexWriter combinedWriter = new IndexWriter(currentMergeDir, new
>>> StandardAnalyzer());
>>>  combinedWriter.addIndexes(dirToMerge);
>>>  combinedWriter.flush();
>>>  combinedWriter.close();
>>>
>>>
>>> As you can see above, each time there is a merge a new IndexWriter  
>>> is
>>> created, indexes added, flushed and closed.
>>> I know you are not supposed to have synchronization issues between
>>> writing
>>> and flushing , but could there be an issue when you are creating a  
>>> new
>>> searcher at the instant where the files are merged and there are no
>>> segments
>>> in a dir???
>>>
>>> Thanks,
>>> Julie
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20305354.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20321842.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 13:59:07 2008
Return-Path: <java-user-return-36973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85214 invoked from network); 4 Nov 2008 13:59:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 13:59:07 -0000
Received: (qmail 44430 invoked by uid 500); 4 Nov 2008 13:59:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44400 invoked by uid 500); 4 Nov 2008 13:59:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44389 invoked by uid 99); 4 Nov 2008 13:59:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 05:59:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.198.237 as permitted sender)
Received: from [209.85.198.237] (HELO rv-out-0506.google.com) (209.85.198.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 13:57:51 +0000
Received: by rv-out-0506.google.com with SMTP id g9so1491191rvb.7
        for <java-user@lucene.apache.org>; Tue, 04 Nov 2008 05:58:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=eMybhF6wKxsP/m+YnbuA+dzah4P/TEhqHWd5MRFAgI8=;
        b=ZsXRZQOunWVFQY/6wsspPKHE3nvvS4EWtgY5fmlekXOABXhrRySGh5fLvhtjBRRRyX
         pQm87dMmU0JYiMY4ft3hO6A5956KNdIs1rCLCQIbLHExvQFaceK/T9lNth4uPWVvk+9R
         n2BU/I0OnM0nsArgpuoPRzlcSztUxxTN7dLJI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=nk+lLsiwGLsgXWZeaNgzd3t2NqVO8/ByzPRNcwaPdHzzwFVR0DTyo5mCNm+LG19shH
         bXuyYYwiGAntCm9adX1Mr8v+/psP0nl6HNPbIVwrjtpVAaCH1qbV6x1GLbNhBy8QUQ9w
         pntOiT/yE/d2lmyfZKdINDBKPZNjyaRMiJ4LA=
Received: by 10.141.113.6 with SMTP id q6mr883669rvm.36.1225807113241;
        Tue, 04 Nov 2008 05:58:33 -0800 (PST)
Received: by 10.141.136.21 with HTTP; Tue, 4 Nov 2008 05:58:33 -0800 (PST)
Message-ID: <359a92830811040558j7633b794jd031a8e47327158f@mail.gmail.com>
Date: Tue, 4 Nov 2008 08:58:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can lucene search from multi-index directory like using FK in database?
In-Reply-To: <1225801913.6280.3.camel@clay-laptop>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26359_32699195.1225807113235"
References: <1225801913.6280.3.camel@clay-laptop>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26359_32699195.1225807113235
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below

On Tue, Nov 4, 2008 at 7:31 AM, Clay Zhong <zjclay@gmail.com> wrote:

> Hi Guys,
>
> I meet some problems when using Lucene 2.3.2. After a lot of research, I
> still can't find any ways to solve them. Hope you can give me some
> advice..
>
> 1. Can I search different document from multi-index when they have
> connections like FK in database?
> For example,
> Index Dir 1 (User): Field id, Field departmentId
> Index Dir 2 (Department): Field id, Field location
> How can I get all user that location is USA?
> Well, I can index location into User, or search from Department first to
> get departmentId. But they're really terrible, is there a better way?
>

Whenever you start thinking this way, step back, take a deep
breath and remember that Lucene is a *text search* engine, not a
database engine. Forget all you know about data normalization
and construct your index so you do NOT have any conception of
foreign keys. De-normalize your data so you can do this
kind of thing with simple queries. Yes, this takes more room and
it may not be reasonable. But unless and until you *know* you'll
have space/performance problems, this should be your first
approach.

If that doesn't work, think about hybrid solutions where you put your
text in a Lucene index and the data you really, really do need to
use in a RDBMS way in a real-live database. If you search the
archives you'll see this discussed in some detail.


>
> 2. How can I search from multi-index with one query? It's different from
> using MultiSearcher.
> For example, there's two fields, 'title' and 'content', when I search
> 'Java and Lucene', how can I get documents which contains 'Java' in
> 'title' and 'lucene' in 'content'? (not only 'Java and Lucene' in one
> field). I can add a field contains both 'title' and 'content', but
> that's really really bad solution....
>

+title:java +content:lucene

should do the trick, but you'll have to write your own code to know
that the phrase "java and lucene" should be broken up this way.

Best
Erick


>
> That's all my questions, thanks for your patient.
>
> Best Wishes
> Clay Zhong
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26359_32699195.1225807113235--

From java-user-return-36974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 14:14:48 2008
Return-Path: <java-user-return-36974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95033 invoked from network); 4 Nov 2008 14:14:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 14:14:48 -0000
Received: (qmail 62582 invoked by uid 500); 4 Nov 2008 14:14:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62555 invoked by uid 500); 4 Nov 2008 14:14:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62544 invoked by uid 99); 4 Nov 2008 14:14:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 06:14:48 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of daizhoul@cn.ibm.com designates 202.81.18.154 as permitted sender)
Received: from [202.81.18.154] (HELO ausmtp05.au.ibm.com) (202.81.18.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 14:13:30 +0000
Received: from d23relay03.au.ibm.com (d23relay03.au.ibm.com [202.81.18.234])
	by ausmtp05.au.ibm.com (8.13.8/8.13.8) with ESMTP id mA4EDtUW4476936
	for <java-user@lucene.apache.org>; Wed, 5 Nov 2008 01:13:55 +1100
Received: from d23av01.au.ibm.com (d23av01.au.ibm.com [9.190.234.96])
	by d23relay03.au.ibm.com (8.13.8/8.13.8/NCO v9.1) with ESMTP id mA4E6WFI1782004
	for <java-user@lucene.apache.org>; Wed, 5 Nov 2008 01:06:32 +1100
Received: from d23av01.au.ibm.com (loopback [127.0.0.1])
	by d23av01.au.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id mA4E6TtV020641
	for <java-user@lucene.apache.org>; Wed, 5 Nov 2008 01:06:29 +1100
Received: from d23m0016.cn.ibm.com (d23m0016.cn.ibm.com [9.181.32.76])
	by d23av01.au.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id mA4E6STT020628
	for <java-user@lucene.apache.org>; Wed, 5 Nov 2008 01:06:29 +1100
Subject: AUTO: Zhou Lin Dai is out of the office. (returning 2008-11-10)
From: Zhou Lin Dai <daizhoul@cn.ibm.com>
To: java-user@lucene.apache.org
Message-ID: <OFC6F8C4D3.F01BD1AD-ON482574F7.004D10A4-482574F7.004D10A5@cn.ibm.com>
Date: Tue, 4 Nov 2008 22:01:45 +0800
X-MIMETrack: Serialize by Router on d23m0016/23/M/IBM(Release 7.0.2FP3HF80 | July 14, 2008) at
 04/11/2008 22:01:47
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=C7BBFE64DFDE96348f9e8a93df938690918cC7BBFE64DFDE9634"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=C7BBFE64DFDE96348f9e8a93df938690918cC7BBFE64DFDE9634
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable



I am out of the office until 2008-11-10..

Raja (He Kun Wang) will be my backup during my leave. I will check emai=
ls
at night. For anything emergent, you can call my cell phone (86) 131 62=
90
0375.


Note: This is an automated response to your message Can lucene search f=
rom
multi-index directory like using FK in database? sent on 4/11/08 20:31:=
53.
This is the only notification you will receive while this person is awa=
y.=

--0__=C7BBFE64DFDE96348f9e8a93df938690918cC7BBFE64DFDE9634--


From java-user-return-36975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 14:43:10 2008
Return-Path: <java-user-return-36975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7561 invoked from network); 4 Nov 2008 14:43:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 14:43:10 -0000
Received: (qmail 95725 invoked by uid 500); 4 Nov 2008 14:43:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95698 invoked by uid 500); 4 Nov 2008 14:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95679 invoked by uid 99); 4 Nov 2008 14:43:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 06:43:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.217.17 as permitted sender)
Received: from [209.85.217.17] (HELO mail-gx0-f17.google.com) (209.85.217.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 14:41:51 +0000
Received: by gxk10 with SMTP id 10so1543263gxk.4
        for <java-user@lucene.apache.org>; Tue, 04 Nov 2008 06:42:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=9Vwm8EZWfodrr0zhtpMKMuvRSZnxjO82U73SUBzYTSo=;
        b=v18Ow0xx7Wo/gNr1IKuLMvFdnNHFPzYFhJB9QRaGuQwre1m/wP8ABZCDYaZCb7HXEG
         aXiPGoZJlAc3vAS1M3i9Acsu2ZFT1onHf2QdPbxlQu8ffQ/ViBWAQ76/ShYNNPhQm4c6
         AUJcLVXN18mcrGuLwZNYBKS/RzWdZY/gN6ipk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=CIV1nSEbbMULnMnSEZqasg6dc5Hsdy5f1tiAxJyBbpGOcZ6/PxoUBmunvucu5QSIDm
         S3M1dxU3YsHgNHOW9OPNrTTDo5hAiybROrvG15qjYh37CNUHLp5jpD4zZKCsRbT7uGj/
         +2xP6VUJzc22JOz2/dA1oIBOA72u89bxy/X2Y=
Received: by 10.150.143.5 with SMTP id q5mr2526469ybd.171.1225809752581;
        Tue, 04 Nov 2008 06:42:32 -0800 (PST)
Received: by 10.150.150.18 with HTTP; Tue, 4 Nov 2008 06:42:32 -0800 (PST)
Message-ID: <e994873a0811040642k3d41a0feo6f89e3388492aba9@mail.gmail.com>
Date: Tue, 4 Nov 2008 09:42:32 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user <java-user@lucene.apache.org>
Subject: BoostingTermQuery scoring
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44387_21329480.1225809752574"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44387_21329480.1225809752574
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm using BoostingTermQuery to boost the score of documents with terms
containing payloads (boost value > 1). I'd like to change the scoring
behavior such that if a query contains multiple BoostingTermQuery terms
(either required or optional), documents containing more matching terms with
payloads always score higher than documents with fewer terms with payloads.
Currently, if one of the terms has a high IDF weight and contains a boosting
payload but no payloads on other matching terms, it may score higher than
docs with other matching terms with payloads and lower IDF.

I think what I need is a way to increase the weight of a matching term in
BoostingSpanScorer.score() if 'payloadsSeen > 0', but I don't see how to do
this. Any suggestions?

Thanks,
Peter

------=_Part_44387_21329480.1225809752574--

From java-user-return-36976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 15:11:19 2008
Return-Path: <java-user-return-36976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54648 invoked from network); 4 Nov 2008 15:11:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 15:11:19 -0000
Received: (qmail 29107 invoked by uid 500); 4 Nov 2008 15:11:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29082 invoked by uid 500); 4 Nov 2008 15:11:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29066 invoked by uid 99); 4 Nov 2008 15:11:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 07:11:18 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 15:09:59 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KxNYG-00089I-DA
	for java-user@lucene.apache.org; Tue, 04 Nov 2008 07:10:40 -0800
Message-ID: <20324150.post@talk.nabble.com>
Date: Tue, 4 Nov 2008 07:10:40 -0800 (PST)
From: JulieSoko <julie.sokolowski@saic.com>
To: java-user@lucene.apache.org
Subject: Re: No segment files found/ Searcher error
In-Reply-To: <7BE9BB4E-FE34-43D3-B045-5E421A9E05A1@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: julie.sokolowski@saic.com
References: <20305354.post@talk.nabble.com> <C7F56D9D-4F08-4D36-BDAE-B2700E67D761@mikemccandless.com> <20321842.post@talk.nabble.com> <7BE9BB4E-FE34-43D3-B045-5E421A9E05A1@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I have seen the error all along... I've tried several different designs...
This problem has always occurred on the current day where the index is
constantly being merged.   I am opening one searcher for up to 59 days and
leaving them open but for the current day only, each user get's their own
new searcher.  It is not shared.  Orginally, I was sharing the searcher for
the current day but when the I/O error occurred, the searcher was not usable
again.  i.e. the I/O error returned for every search.  I did not close the
searcher in that design.  So as a fix for the moment, I open a new searcher
for each user/query, for the current day only, and then close it once it is
done.  I do this so that when the I/O error occurs, I let the user know that
there was a "internal processor error" and they need to resubmit the
query... i.e. getting another searcher. 
  Now, when the i/o error occurs, I run a CheckIndex.check on the current
directory/index and then this error is thrown - the "no segments found
error".   


Michael McCandless-2 wrote:
> 
> 
> So it sounds like the Input/Output error was in fact because you were  
> closing the IndexSearcher while an in-flight query was still using it?
> 
> Or... are you still seeing that error now that you've switched to  
> opening a new IndexSearcher for the current day for every query?
> 
> It's very costly, in general, to open a new IndexSearcher per query.   
> It's better to share a single searcher, and then reopen it  
> periodically, taking care to leave the old one open until all queries  
> have finished with it.  But it's possible in your app that this added  
> cost isn't important.
> 
> Mike
> 
> JulieSoko wrote:
> 
>>
>> Yes, I am leaving the searchers open for all indexes except for the  
>> current
>> day.  The index for the current day is constantly being updated and  
>> if I
>> happen to have the Input/Output error/no segment files found error  
>> while
>> searching the current day then that searcher will continue to return  
>> the i/o
>> error from the point on i.e. is not usable again.  So, I am now  
>> recreating
>> and closing the searcher for the current day only.... Each  
>> individual user
>> will have a new searcher for the current day for each query.
>>
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> Did you resolve the issue where you were closing the IndexSearcher
>>> while searches were still running?
>>>
>>> That's where we got to on the last thread:
>>>
>>>     http://www.nabble.com/Lucene-Input-Output-error-to20156805.html
>>>
>>> Mike
>>>
>>> JulieSoko wrote:
>>>
>>>>
>>>> I am narrowing down this problem that I have had for a week now...
>>>> I am
>>>> using lucene version 2.3.1 and 64 bit java versio 1.5.0-12-b04
>>>> running on
>>>> Linux box.  We are merging indexes every 60 seconds and there are  
>>>> 1..*
>>>> searches occuring at anytime on the indexes.  The problem is that we
>>>> will
>>>> get an Input /Output error trying to read the index for a search
>>>> randomly...
>>>> say every 5th search.  I have posted the error before, but have
>>>> narrowed it
>>>> down, I believe, to a merge issue.
>>>>
>>>> This is the error that a searcher will output at random times:
>>>> java.io.IOException: Input/output error
>>>> java.io.RandomAccessFile.readBytes(Native Method)
>>>> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>>>> at
>>>> org.apache.lucene.store.FSDirecotry
>>>> $FSIndexInput.readInternal(FSDirectory.java:550)
>>>> at
>>>> org
>>>> .apache
>>>> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java:
>>>> 131)
>>>> at
>>>> org.apache.lucene.index.CompoundFileReader
>>>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>>>> at
>>>> org
>>>> .apache
>>>> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
>>>> 152)
>>>> at
>>>> org
>>>> .apache
>>>> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
>>>> 152)
>>>> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>>>> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
>>>> at  
>>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:
>>>> 123)
>>>> at
>>>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:
>>>> 154)
>>>> at
>>>> org
>>>> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:
>>>> 223)
>>>> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:
>>>> 217)
>>>> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:
>>>> 678)
>>>> at  
>>>> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:
>>>> 87)
>>>> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
>>>> at
>>>> org
>>>> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:
>>>> 311)
>>>> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>>>>
>>>>
>>>> ******************************************************************************
>>>> NOW, when I get the above Exception, I check the index using the
>>>> CheckIndex.check method... As part of the check , this exception is
>>>> thrown:
>>>>
>>>>
>>>> Error: could not read any segments file in directory
>>>> java.io.FileNotFoundException: no segments* file found in
>>>> org.apache.lucen.store.FSDirectory@appfs/rt10/jetty/20081103
>>>>   at
>>>> org.apache.lucene.index.SegmentInfos
>>>> $findSegmentsFile.run(SegementInfos.java:587)
>>>> .....
>>>>
>>>> Is there any point in the merging of indexes that the segment files
>>>> are
>>>> removed?   If I rerun the search, right after this error occurs, the
>>>> search
>>>> is ok... I do open a new IndexSearcher...
>>>>
>>>> The IndexWriter code is this:
>>>>  IndexWriter combinedWriter = new IndexWriter(currentMergeDir, new
>>>> StandardAnalyzer());
>>>>  combinedWriter.addIndexes(dirToMerge);
>>>>  combinedWriter.flush();
>>>>  combinedWriter.close();
>>>>
>>>>
>>>> As you can see above, each time there is a merge a new IndexWriter  
>>>> is
>>>> created, indexes added, flushed and closed.
>>>> I know you are not supposed to have synchronization issues between
>>>> writing
>>>> and flushing , but could there be an issue when you are creating a  
>>>> new
>>>> searcher at the instant where the files are merged and there are no
>>>> segments
>>>> in a dir???
>>>>
>>>> Thanks,
>>>> Julie
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> -- 
>>>> View this message in context:
>>>> http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20305354.html
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context:
>> http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20321842.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20324150.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 16:22:20 2008
Return-Path: <java-user-return-36977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79636 invoked from network); 4 Nov 2008 16:22:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 16:22:19 -0000
Received: (qmail 26295 invoked by uid 500); 4 Nov 2008 16:22:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26268 invoked by uid 500); 4 Nov 2008 16:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26257 invoked by uid 99); 4 Nov 2008 16:22:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 08:22:17 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 16:20:59 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1332220qwi.53
        for <java-user@lucene.apache.org>; Tue, 04 Nov 2008 08:21:39 -0800 (PST)
Received: by 10.214.45.16 with SMTP id s16mr1898892qas.373.1225815699209;
        Tue, 04 Nov 2008 08:21:39 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm3763382qwb.7.2008.11.04.08.21.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 04 Nov 2008 08:21:37 -0800 (PST)
Message-Id: <9EAC5C78-C001-4D2C-9A66-ECF33D78E716@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20324150.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: No segment files found/ Searcher error
Date: Tue, 4 Nov 2008 11:21:35 -0500
References: <20305354.post@talk.nabble.com> <C7F56D9D-4F08-4D36-BDAE-B2700E67D761@mikemccandless.com> <20321842.post@talk.nabble.com> <7BE9BB4E-FE34-43D3-B045-5E421A9E05A1@mikemccandless.com> <20324150.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you post some code of the merging process that adds documents to  
the current day's index?

It is definitely spooky that CheckIndex reports it cannot find any  
segments file.  The message in that exception should end with "...:  
files: XXX", ie, it says it could not find any segments_N files and  
then lists all the files in the directory.  I don't see this part in  
your exception below (maybe you just didn't copy it), so can you check  
next time it happens what files it said were in the directory?

Are you sure you are closing the searcher after you're done with it?

When opening a new searcher for the daily index do you ever see an  
exception?  Or it's only when running a search?

Mike

JulieSoko wrote:

>
> I have seen the error all along... I've tried several different  
> designs...
> This problem has always occurred on the current day where the index is
> constantly being merged.   I am opening one searcher for up to 59  
> days and
> leaving them open but for the current day only, each user get's  
> their own
> new searcher.  It is not shared.  Orginally, I was sharing the  
> searcher for
> the current day but when the I/O error occurred, the searcher was  
> not usable
> again.  i.e. the I/O error returned for every search.  I did not  
> close the
> searcher in that design.  So as a fix for the moment, I open a new  
> searcher
> for each user/query, for the current day only, and then close it  
> once it is
> done.  I do this so that when the I/O error occurs, I let the user  
> know that
> there was a "internal processor error" and they need to resubmit the
> query... i.e. getting another searcher.
>  Now, when the i/o error occurs, I run a CheckIndex.check on the  
> current
> directory/index and then this error is thrown - the "no segments found
> error".
>
>
> Michael McCandless-2 wrote:
>>
>>
>> So it sounds like the Input/Output error was in fact because you were
>> closing the IndexSearcher while an in-flight query was still using  
>> it?
>>
>> Or... are you still seeing that error now that you've switched to
>> opening a new IndexSearcher for the current day for every query?
>>
>> It's very costly, in general, to open a new IndexSearcher per query.
>> It's better to share a single searcher, and then reopen it
>> periodically, taking care to leave the old one open until all queries
>> have finished with it.  But it's possible in your app that this added
>> cost isn't important.
>>
>> Mike
>>
>> JulieSoko wrote:
>>
>>>
>>> Yes, I am leaving the searchers open for all indexes except for the
>>> current
>>> day.  The index for the current day is constantly being updated and
>>> if I
>>> happen to have the Input/Output error/no segment files found error
>>> while
>>> searching the current day then that searcher will continue to return
>>> the i/o
>>> error from the point on i.e. is not usable again.  So, I am now
>>> recreating
>>> and closing the searcher for the current day only.... Each
>>> individual user
>>> will have a new searcher for the current day for each query.
>>>
>>>
>>>
>>> Michael McCandless-2 wrote:
>>>>
>>>>
>>>> Did you resolve the issue where you were closing the IndexSearcher
>>>> while searches were still running?
>>>>
>>>> That's where we got to on the last thread:
>>>>
>>>>    http://www.nabble.com/Lucene-Input-Output-error-to20156805.html
>>>>
>>>> Mike
>>>>
>>>> JulieSoko wrote:
>>>>
>>>>>
>>>>> I am narrowing down this problem that I have had for a week now...
>>>>> I am
>>>>> using lucene version 2.3.1 and 64 bit java versio 1.5.0-12-b04
>>>>> running on
>>>>> Linux box.  We are merging indexes every 60 seconds and there are
>>>>> 1..*
>>>>> searches occuring at anytime on the indexes.  The problem is  
>>>>> that we
>>>>> will
>>>>> get an Input /Output error trying to read the index for a search
>>>>> randomly...
>>>>> say every 5th search.  I have posted the error before, but have
>>>>> narrowed it
>>>>> down, I believe, to a merge issue.
>>>>>
>>>>> This is the error that a searcher will output at random times:
>>>>> java.io.IOException: Input/output error
>>>>> java.io.RandomAccessFile.readBytes(Native Method)
>>>>> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>>>>> at
>>>>> org.apache.lucene.store.FSDirecotry
>>>>> $FSIndexInput.readInternal(FSDirectory.java:550)
>>>>> at
>>>>> org
>>>>> .apache
>>>>> .lucene 
>>>>> .store.BufferedIndexInput.readBytes(BufferedInputInput.java:
>>>>> 131)
>>>>> at
>>>>> org.apache.lucene.index.CompoundFileReader
>>>>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>>>>> at
>>>>> org
>>>>> .apache
>>>>> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
>>>>> 152)
>>>>> at
>>>>> org
>>>>> .apache
>>>>> .lucene 
>>>>> .instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
>>>>> 152)
>>>>> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>>>>> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
>>>>> at
>>>>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:
>>>>> 123)
>>>>> at
>>>>> org 
>>>>> .apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:
>>>>> 154)
>>>>> at
>>>>> org
>>>>> .apache 
>>>>> .lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:
>>>>> 223)
>>>>> at  
>>>>> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:
>>>>> 217)
>>>>> at  
>>>>> org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:
>>>>> 678)
>>>>> at
>>>>> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:
>>>>> 87)
>>>>> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
>>>>> at
>>>>> org
>>>>> .apache 
>>>>> .lucene.search.MultiSearcher.createWeight(MultiSearcher.java:
>>>>> 311)
>>>>> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>>>>>
>>>>>
>>>>> ******************************************************************************
>>>>> NOW, when I get the above Exception, I check the index using the
>>>>> CheckIndex.check method... As part of the check , this exception  
>>>>> is
>>>>> thrown:
>>>>>
>>>>>
>>>>> Error: could not read any segments file in directory
>>>>> java.io.FileNotFoundException: no segments* file found in
>>>>> org.apache.lucen.store.FSDirectory@appfs/rt10/jetty/20081103
>>>>>  at
>>>>> org.apache.lucene.index.SegmentInfos
>>>>> $findSegmentsFile.run(SegementInfos.java:587)
>>>>> .....
>>>>>
>>>>> Is there any point in the merging of indexes that the segment  
>>>>> files
>>>>> are
>>>>> removed?   If I rerun the search, right after this error occurs,  
>>>>> the
>>>>> search
>>>>> is ok... I do open a new IndexSearcher...
>>>>>
>>>>> The IndexWriter code is this:
>>>>> IndexWriter combinedWriter = new IndexWriter(currentMergeDir, new
>>>>> StandardAnalyzer());
>>>>> combinedWriter.addIndexes(dirToMerge);
>>>>> combinedWriter.flush();
>>>>> combinedWriter.close();
>>>>>
>>>>>
>>>>> As you can see above, each time there is a merge a new IndexWriter
>>>>> is
>>>>> created, indexes added, flushed and closed.
>>>>> I know you are not supposed to have synchronization issues between
>>>>> writing
>>>>> and flushing , but could there be an issue when you are creating a
>>>>> new
>>>>> searcher at the instant where the files are merged and there are  
>>>>> no
>>>>> segments
>>>>> in a dir???
>>>>>
>>>>> Thanks,
>>>>> Julie
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> -- 
>>>>> View this message in context:
>>>>> http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20305354.html
>>>>> Sent from the Lucene - Java Users mailing list archive at
>>>>> Nabble.com.
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20321842.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20324150.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 17:18:25 2008
Return-Path: <java-user-return-36978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10376 invoked from network); 4 Nov 2008 17:18:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 17:18:25 -0000
Received: (qmail 55861 invoked by uid 500); 4 Nov 2008 17:18:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55827 invoked by uid 500); 4 Nov 2008 17:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55816 invoked by uid 99); 4 Nov 2008 17:18:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 09:18:24 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 17:17:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KxPUC-0005vx-GT
	for java-user@lucene.apache.org; Tue, 04 Nov 2008 09:14:36 -0800
Message-ID: <20326783.post@talk.nabble.com>
Date: Tue, 4 Nov 2008 09:14:36 -0800 (PST)
From: PabloS <pablo.a.saavedra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <847931a70811031344x28e4c080w5a83f38dba64e31b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: pablo.a.saavedra@gmail.com
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com> <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com> <4908FAA4.9070809@gmail.com> <20263342.post@talk.nabble.com> <Pine.LNX.4.62.0811031043180.25398@radix.cryptio.net> <20311386.post@talk.nabble.com> <847931a70811031344x28e4c080w5a83f38dba64e31b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Sure Todd,

the idea basically consist in the following:

- Subclassing FIeldSortedHitQueue and calling support with an empty
SortField array: this disables caching because the comparators are retrieved
during construction
- Creating a new SortComparatorSource that creates the sort comparators
similarly to FieldCacheImpl but without performing any caching
- Creating a new HitCollector that behaves just like TopFieldDocCollector
but uses my custom FieldSortedHitQueue. The tricky part was creating a
TopFieldDoc instance (which has default visibility constructor. I managed to
do it creating an empty TopFieldDocCollector, asking the TopFieldDocs and
modifiying that instance.
- Overriding the Searcher's search(Weight, Filter, int, Sort) so it uses my
HitCollector (I use the Hits class, which internally calls that method)

That way, you completely override field caching and you'll suffer the
performance consequences. What I did was making the SortComparatorSource a
spring bean and adding a caching interceptor to it. You an plug your
favorite cache library in, in my case ehcache.

I hope you find this useful.
Regards.


tbenge wrote:
> 
> Pablo,
> 
> Would you mind adding a little more detail about how you're working
> around the problem?
> 
> I'm still evaluating our different options so am interested in what you
> did.
> 
> Todd
> 
> On Mon, Nov 3, 2008 at 2:37 PM, PabloS <pablo.a.saavedra@gmail.com> wrote:
>>
>> Thanks hossman, but I've already 'solved' the problem without the need to
>> patch lucene. I had to code a bit around Lucene's visibility restrictions
>> but I've managed to completely skip the field caching mechanism and add
>> ehcache to it.
>>
>> At the moment it seems to be working quite well, although not as fast as
>> it
>> was when lucene performed the caching.
>>
>> Thanks a lot for the info anyway.
>> Regards.
>>
>> hossman wrote:
>>>
>>>
>>> : I'm having a similar problem with my application, although we are
>>> using
>>> : lucene 2.3.2. The problem we have is that we are required to sort on
>>> most of
>>> : the fields (20 at least). Is there any way of changing the cache being
>>> used?
>>>
>>> there is a patch in Jira that takes a completley different approach
>>> towards dealing with sorting by using the *stored* values of the
>>> documents
>>> that match...
>>>
>>> https://issues.apache.org/jira/browse/LUCENE-769
>>>
>>> ...in theory it's "better" for use cases where:
>>>
>>>   1) you are confident you are going to get back a "small" result set in
>>>      proportion to the total size of your index.
>>>   2) you need to support sorting on "lots" of fields and don't have
>>> enough
>>>      ram for all of the FieldCaches of those fields
>>>
>>> So far the only person to test it out (and post comments) is the patch
>>> submitter, but if other people report success it might be worth adding
>>> as
>>> a contrib.
>>>
>>> (Disclaimer: it looks like the patch was updated after my last
>>> review/comments.  i have not read, nor claim any opinion about the
>>> currently attached patch)
>>>
>>>
>>>
>>>
>>> -Hoss
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-tp20236834p20311386.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-tp20236834p20326783.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 04 17:37:47 2008
Return-Path: <java-user-return-36979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25498 invoked from network); 4 Nov 2008 17:37:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Nov 2008 17:37:47 -0000
Received: (qmail 79025 invoked by uid 500); 4 Nov 2008 17:37:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78989 invoked by uid 500); 4 Nov 2008 17:37:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78978 invoked by uid 99); 4 Nov 2008 17:37:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 09:37:46 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 17:36:27 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1144826ywj.5
        for <java-user@lucene.apache.org>; Tue, 04 Nov 2008 09:36:57 -0800 (PST)
Received: by 10.100.140.20 with SMTP id n20mr866031and.135.1225820217221;
        Tue, 04 Nov 2008 09:36:57 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id d21sm1059698and.6.2008.11.04.09.36.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 04 Nov 2008 09:36:56 -0800 (PST)
Message-Id: <D40B78BA-8539-4899-A1D5-D51BB6723253@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Performance of never optimizing
Date: Tue, 4 Nov 2008 12:36:45 -0500
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


If possible, you should try to use a larger corpus (eg Wikipedia)  
rather than multiply Reuters by N, which creates unnatural term  
frequency distribution.

The graphs are hard to read because of the spline interpolation.   
Maybe you could overlay X's where there is a real datapoint?

After the 6 rounds at each doc count, how do you then derive the  
number to put on the graph?

It's best to use a real query log, if possible, to run the queries.   
If you are expecting your production machines to have plenty of RAM to  
hold the index, then you should definitely run the queries through  
once, discard it, to get all stuff loaded in RAM including the OS  
caching all required data in its IO cache.

Not opening/closing a reader per search should change the graphs quite  
a bit (for the better) and hopefully change some of the odd things you  
are seeing (in the questions below).

Mike

Justus Pendleton wrote:

> Howdy,
>
> I have a couple of questions regarding some Lucene benchmarking and  
> what the results mean[3]. (Skip to the numbered list at the end if  
> you don't want to read the lengthy exegesis :)
>
> I'm a developer for JIRA[1]. We are currently trying to get a better  
> understanding of Lucene, and our use of it, to cope with the needs  
> of our larger customers. These "large" indexes are only a couple  
> hundred thousand documents but our problem is compounded by the fact  
> that they have a relatively high rate of modification (=delete 
> +insert of new document) and our users expect these modification to  
> show up in query results pretty much instantly.
>
> Our current default behaviour is a merge factor of 4. We perform an  
> optimization on the index every 4000 additions. We also perform an  
> optimize at midnight. Our fundamental problem is that these  
> optimizations are locking the index for unacceptably long periods of  
> time, something that we want to resolve for our next major release,  
> hopefully without undermining search performance too badly.
>
> In the Lucene javadoc there is a comment, and a link to a mailing  
> list discussion[2], that suggests applications such as JIRA should  
> never perform optimize but should instead set their merge factor  
> very low.
>
> In an attempt to understand the impact of a) lowering the merge  
> factor from 4 to 2 and b) never, ever optimizing on an index (over  
> the course of years and millions of additions/updates) I wanted to  
> try to benchmark Lucene.
>
> I used the contrib/benchmark framework and wrote a small algorithm  
> that adds documents to an index (using the Reuters doc generator),  
> does a search, does an optimize, then does another search. All the  
> pretty pictures can be seen at:
>
>  http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs
>
> I have several questions, hopefully they aren't overwhelming in  
> their quantity :-/
>
> 1. Why does the merge factor of 4 appear to be faster than the merge  
> factor of 2?
>
> 2. Why does non-optimized searching appear to be faster than  
> optimized searching once the index hits ~500,000 documents?
>
> 3. There appears to be a fairly sizable performance drop across the  
> board around 450,000 documents. Why is that?
>
> 4. Searching performance appears to decrease towards a fairly  
> pessimistic 20 searches per second (for a relatively simple search).  
> Is this really what we should expect long-term from Lucene?
>
> 5. Does my benchmark even make sense? I am far from an expert on  
> benchmarking so it is possible I'm not measuring what I think I am  
> measuring.
>
> Thanks in advance for any insight you can provide. This is an area  
> that we very much want to understand better as Lucene is a key part  
> of JIRA's success,
>
> Cheers,
> Justus
> JIRA Developer
>
> [1]: http://www.atlassian.com
> [2]: http://www.gossamer-threads.com/lists/lucene/java-dev/47895
> [3]: http://confluence.atlassian.com/display/JIRACOM/Lucene+graphs
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 00:46:30 2008
Return-Path: <java-user-return-36980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42177 invoked from network); 5 Nov 2008 00:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 00:46:29 -0000
Received: (qmail 89992 invoked by uid 500); 5 Nov 2008 00:46:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89955 invoked by uid 500); 5 Nov 2008 00:46:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89944 invoked by uid 99); 5 Nov 2008 00:46:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 16:46:28 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 00:45:09 +0000
Received: by an-out-0708.google.com with SMTP id b2so370442ana.5
        for <java-user@lucene.apache.org>; Tue, 04 Nov 2008 16:45:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=VMVZPWcOYZlFBhjzndJHKezTzk3qFHwl06GogTOuOUA=;
        b=CaqrxKVUXXWaMXooAIHFHbLqdFdxitrteXIZ3/F8teyy71c+BkLVGV2W8D0BCu+aJj
         G2jr50uIr9eKfFubk6GQIpGUgp+VeH+TAzjgMJmIW93tEr+5knIJ1okIIC6sex10a757
         K+6UpevRAb9lMDAcrKwr2SlDomVVZsI0HZ0m0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=WIusWB+vCJFMlzdH9amL/MYxdM9ovcAMv/73GYZ/o8j+x0TVuFrr3g5qF2bWwHDLmg
         9/XFmEY4hHyyKT8pZaK5LFWGoHRFpAWOkXvkLPPlHYYWlrVIJvcuFvzuV4t9eSr9DzUx
         eRwKtwYtmqQ3BTqImOKs/csk2HZoXMOoOIAbc=
Received: by 10.101.1.16 with SMTP id d16mr158643ani.66.1225845940997;
        Tue, 04 Nov 2008 16:45:40 -0800 (PST)
Received: by 10.100.135.17 with HTTP; Tue, 4 Nov 2008 16:45:40 -0800 (PST)
Message-ID: <847931a70811041645g3bd1438dk88da9d743249032e@mail.gmail.com>
Date: Tue, 4 Nov 2008 17:45:40 -0700
From: "Todd Benge" <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <20326783.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
	 <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com>
	 <4908FAA4.9070809@gmail.com> <20263342.post@talk.nabble.com>
	 <Pine.LNX.4.62.0811031043180.25398@radix.cryptio.net>
	 <20311386.post@talk.nabble.com>
	 <847931a70811031344x28e4c080w5a83f38dba64e31b@mail.gmail.com>
	 <20326783.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Pablo.

I'll be flying to New Orleans tomorrow for ApacheCon and would love
the opportunity to talk with others about architectures others are
using.

Todd



On 11/4/08, PabloS <pablo.a.saavedra@gmail.com> wrote:
>
> Sure Todd,
>
> the idea basically consist in the following:
>
> - Subclassing FIeldSortedHitQueue and calling support with an empty
> SortField array: this disables caching because the comparators are retrieved
> during construction
> - Creating a new SortComparatorSource that creates the sort comparators
> similarly to FieldCacheImpl but without performing any caching
> - Creating a new HitCollector that behaves just like TopFieldDocCollector
> but uses my custom FieldSortedHitQueue. The tricky part was creating a
> TopFieldDoc instance (which has default visibility constructor. I managed to
> do it creating an empty TopFieldDocCollector, asking the TopFieldDocs and
> modifiying that instance.
> - Overriding the Searcher's search(Weight, Filter, int, Sort) so it uses my
> HitCollector (I use the Hits class, which internally calls that method)
>
> That way, you completely override field caching and you'll suffer the
> performance consequences. What I did was making the SortComparatorSource a
> spring bean and adding a caching interceptor to it. You an plug your
> favorite cache library in, in my case ehcache.
>
> I hope you find this useful.
> Regards.
>
>
> tbenge wrote:
>>
>> Pablo,
>>
>> Would you mind adding a little more detail about how you're working
>> around the problem?
>>
>> I'm still evaluating our different options so am interested in what you
>> did.
>>
>> Todd
>>
>> On Mon, Nov 3, 2008 at 2:37 PM, PabloS <pablo.a.saavedra@gmail.com> wrote:
>>>
>>> Thanks hossman, but I've already 'solved' the problem without the need to
>>> patch lucene. I had to code a bit around Lucene's visibility restrictions
>>> but I've managed to completely skip the field caching mechanism and add
>>> ehcache to it.
>>>
>>> At the moment it seems to be working quite well, although not as fast as
>>> it
>>> was when lucene performed the caching.
>>>
>>> Thanks a lot for the info anyway.
>>> Regards.
>>>
>>> hossman wrote:
>>>>
>>>>
>>>> : I'm having a similar problem with my application, although we are
>>>> using
>>>> : lucene 2.3.2. The problem we have is that we are required to sort on
>>>> most of
>>>> : the fields (20 at least). Is there any way of changing the cache being
>>>> used?
>>>>
>>>> there is a patch in Jira that takes a completley different approach
>>>> towards dealing with sorting by using the *stored* values of the
>>>> documents
>>>> that match...
>>>>
>>>> https://issues.apache.org/jira/browse/LUCENE-769
>>>>
>>>> ...in theory it's "better" for use cases where:
>>>>
>>>>   1) you are confident you are going to get back a "small" result set in
>>>>      proportion to the total size of your index.
>>>>   2) you need to support sorting on "lots" of fields and don't have
>>>> enough
>>>>      ram for all of the FieldCaches of those fields
>>>>
>>>> So far the only person to test it out (and post comments) is the patch
>>>> submitter, but if other people report success it might be worth adding
>>>> as
>>>> a contrib.
>>>>
>>>> (Disclaimer: it looks like the patch was updated after my last
>>>> review/comments.  i have not read, nor claim any opinion about the
>>>> currently attached patch)
>>>>
>>>>
>>>>
>>>>
>>>> -Hoss
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>> --
>>> View this message in context:
>>> http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-tp20236834p20311386.html
>>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> --
> View this message in context:
> http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-tp20236834p20326783.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Sent from Gmail for mobile | mobile.google.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 01:51:15 2008
Return-Path: <java-user-return-36981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80190 invoked from network); 5 Nov 2008 01:51:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 01:51:15 -0000
Received: (qmail 42243 invoked by uid 500); 5 Nov 2008 01:51:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42203 invoked by uid 500); 5 Nov 2008 01:51:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42192 invoked by uid 99); 5 Nov 2008 01:51:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 17:51:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pablo.a.saavedra@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 01:49:56 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3795225wfc.20
        for <java-user@lucene.apache.org>; Tue, 04 Nov 2008 17:50:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ZS3kTikWBPREbzJaXVN10Ip1Xz/7jgRAecU2dujeffA=;
        b=KcirHwcX+ZyvIIJp0VuWpsDRGS65TxtDyEyE7T5aQJi9aI8dSy0x0dlr00jQ37vuTo
         fDHu41noABxi069xwLQzdtdeT9eOJG0lrbgbahXXsnMFGwxXbdd4VKo6flIp8WrBc1O2
         mP3uBEmIlk6gHJWh4nTQ8OxB73nJU3qtcg0vk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wGyTLbaW8O44mwjVYkDEEvlmXXYVZ16w0+bC3RzdtgswRjQjbPOk3JOnyf1a+RwBqc
         /XYrACHC1PwAOY3WtgnxjgfKVhOyUhpSL9p9rlhePdBOwQYrsgB2kL6TztJ6uFkPzzMv
         ByADEhGvmZTpEfsKk6+mt9vk5uJu4YocG3vaE=
Received: by 10.142.142.14 with SMTP id p14mr137109wfd.139.1225849837682;
        Tue, 04 Nov 2008 17:50:37 -0800 (PST)
Received: by 10.142.240.12 with HTTP; Tue, 4 Nov 2008 17:50:37 -0800 (PST)
Message-ID: <954597c90811041750x221bc974pe867e729c12d5a4f@mail.gmail.com>
Date: Tue, 4 Nov 2008 23:50:37 -0200
From: "Pablo Saavedra" <pablo.a.saavedra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory Problems Lucene 2.4 / Tomcat
In-Reply-To: <847931a70811041645g3bd1438dk88da9d743249032e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6231_24395053.1225849837670"
References: <847931a70810291503w377778a0xcd5e8b3185ae567a@mail.gmail.com>
	 <847931a70810291643l2cf6293am6e618012ba3e5fe6@mail.gmail.com>
	 <4908FAA4.9070809@gmail.com> <20263342.post@talk.nabble.com>
	 <Pine.LNX.4.62.0811031043180.25398@radix.cryptio.net>
	 <20311386.post@talk.nabble.com>
	 <847931a70811031344x28e4c080w5a83f38dba64e31b@mail.gmail.com>
	 <20326783.post@talk.nabble.com>
	 <847931a70811041645g3bd1438dk88da9d743249032e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6231_24395053.1225849837670
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I hope that helps, if you find anything interesting do post it somewhere.
I'm afraid I'm a little bit far away from New Orleans at the moment.

Regards.

2008/11/4 Todd Benge <todd.benge@gmail.com>

> Thanks Pablo.
>
> I'll be flying to New Orleans tomorrow for ApacheCon and would love
> the opportunity to talk with others about architectures others are
> using.
>
> Todd
>
>
>
> On 11/4/08, PabloS <pablo.a.saavedra@gmail.com> wrote:
> >
> > Sure Todd,
> >
> > the idea basically consist in the following:
> >
> > - Subclassing FIeldSortedHitQueue and calling support with an empty
> > SortField array: this disables caching because the comparators are
> retrieved
> > during construction
> > - Creating a new SortComparatorSource that creates the sort comparators
> > similarly to FieldCacheImpl but without performing any caching
> > - Creating a new HitCollector that behaves just like TopFieldDocCollector
> > but uses my custom FieldSortedHitQueue. The tricky part was creating a
> > TopFieldDoc instance (which has default visibility constructor. I managed
> to
> > do it creating an empty TopFieldDocCollector, asking the TopFieldDocs and
> > modifiying that instance.
> > - Overriding the Searcher's search(Weight, Filter, int, Sort) so it uses
> my
> > HitCollector (I use the Hits class, which internally calls that method)
> >
> > That way, you completely override field caching and you'll suffer the
> > performance consequences. What I did was making the SortComparatorSource
> a
> > spring bean and adding a caching interceptor to it. You an plug your
> > favorite cache library in, in my case ehcache.
> >
> > I hope you find this useful.
> > Regards.
> >
> >
> > tbenge wrote:
> >>
> >> Pablo,
> >>
> >> Would you mind adding a little more detail about how you're working
> >> around the problem?
> >>
> >> I'm still evaluating our different options so am interested in what you
> >> did.
> >>
> >> Todd
> >>
> >> On Mon, Nov 3, 2008 at 2:37 PM, PabloS <pablo.a.saavedra@gmail.com>
> wrote:
> >>>
> >>> Thanks hossman, but I've already 'solved' the problem without the need
> to
> >>> patch lucene. I had to code a bit around Lucene's visibility
> restrictions
> >>> but I've managed to completely skip the field caching mechanism and add
> >>> ehcache to it.
> >>>
> >>> At the moment it seems to be working quite well, although not as fast
> as
> >>> it
> >>> was when lucene performed the caching.
> >>>
> >>> Thanks a lot for the info anyway.
> >>> Regards.
> >>>
> >>> hossman wrote:
> >>>>
> >>>>
> >>>> : I'm having a similar problem with my application, although we are
> >>>> using
> >>>> : lucene 2.3.2. The problem we have is that we are required to sort
> on
> >>>> most of
> >>>> : the fields (20 at least). Is there any way of changing the cache
> being
> >>>> used?
> >>>>
> >>>> there is a patch in Jira that takes a completley different approach
> >>>> towards dealing with sorting by using the *stored* values of the
> >>>> documents
> >>>> that match...
> >>>>
> >>>> https://issues.apache.org/jira/browse/LUCENE-769
> >>>>
> >>>> ...in theory it's "better" for use cases where:
> >>>>
> >>>>   1) you are confident you are going to get back a "small" result set
> in
> >>>>      proportion to the total size of your index.
> >>>>   2) you need to support sorting on "lots" of fields and don't have
> >>>> enough
> >>>>      ram for all of the FieldCaches of those fields
> >>>>
> >>>> So far the only person to test it out (and post comments) is the patch
> >>>> submitter, but if other people report success it might be worth adding
> >>>> as
> >>>> a contrib.
> >>>>
> >>>> (Disclaimer: it looks like the patch was updated after my last
> >>>> review/comments.  i have not read, nor claim any opinion about the
> >>>> currently attached patch)
> >>>>
> >>>>
> >>>>
> >>>>
> >>>> -Hoss
> >>>>
> >>>>
> >>>> ---------------------------------------------------------------------
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>
> >>> --
> >>> View this message in context:
> >>>
> http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-tp20236834p20311386.html
> >>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> > --
> > View this message in context:
> >
> http://www.nabble.com/OutOfMemory-Problems-Lucene-2.4---Tomcat-tp20236834p20326783.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> --
> Sent from Gmail for mobile | mobile.google.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6231_24395053.1225849837670--

From java-user-return-36982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 06:05:14 2008
Return-Path: <java-user-return-36982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83215 invoked from network); 5 Nov 2008 06:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 06:05:14 -0000
Received: (qmail 79125 invoked by uid 500); 5 Nov 2008 06:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79102 invoked by uid 500); 5 Nov 2008 06:05:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79091 invoked by uid 99); 5 Nov 2008 06:05:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Nov 2008 22:05:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.246.22.40] (HELO mail.atlassian.com) (63.246.22.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 06:03:57 +0000
Received: from thumbsucker.sydney.atlassian.com (unknown [203.63.130.33])
	by mail.atlassian.com (Postfix) with ESMTP id 150D81631E84
	for <java-user@lucene.apache.org>; Wed,  5 Nov 2008 00:04:36 -0600 (CST)
Message-Id: <2E3FBFD3-A2EE-47AF-8538-43D3F73C8D7B@atlassian.com>
From: Justus Pendleton <jpendleton@atlassian.com>
To: java-user@lucene.apache.org
In-Reply-To: <D40B78BA-8539-4899-A1D5-D51BB6723253@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Performance of never optimizing
Date: Wed, 5 Nov 2008 17:04:34 +1100
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com> <D40B78BA-8539-4899-A1D5-D51BB6723253@mikemccandless.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 05/11/2008, at 4:36 AM, Michael McCandless wrote:
> If possible, you should try to use a larger corpus (eg Wikipedia)  
> rather than multiply Reuters by N, which creates unnatural term  
> frequency distribution.

I'll replicate the tests with the wikipedia corpus over the next few  
days and regenerate the graphs to show the data points in addition to  
the curves. The data I am using comes from the output on the benchmark  
framework:

      [java] Operation                       round mrg   runCnt    
recsPerRun        rec/s  elapsedSec    avgUsedMem    avgTotalMem
      [java] UnoptSearch_100_Par     0       2               
1                 100        230.4               0.43         
29,517,680        44,834,816

I am plotting the "rec/s" which I am (possibly mistakenly)  
interpreting to mean "searches per second" as I asked for 100 searches  
and it took 0.43 seconds to perform them all.

> It's best to use a real query log, if possible, to run the queries.   
> If you are expecting your production machines to have plenty of RAM  
> to hold the index, then you should definitely run the queries  
> through once, discard it, to get all stuff loaded in RAM including  
> the OS caching all required data in its IO cache.
>
> Not opening/closing a reader per search should change the graphs  
> quite a bit (for the better) and hopefully change some of the odd  
> things you are seeing (in the questions below).

I don't believe our large users to have enough memory for Lucene  
indexes to fit in RAM. (Especially given we use quite a bit of RAM for  
other stuff.) I think we also close readers pretty frequently  
(whenever any user updates a JIRA issue, which I am assuming happening  
nearly constantly when you've got thousands of users). I was trying to  
mimic our usage as closely as I could to see whether Lucene behaves  
pathologically poorly given our current architecture. There have been  
some excellent suggestions about using in-memory indexes for recent  
updates but changes of that kind are, unfortunately, currently outside  
of my purview :-(

Given that our current usage may be suboptimal :-/ does anyone have  
any ideas about what may be causing the anomalies I identified earlier?

Cheers,
Justus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 10:07:42 2008
Return-Path: <java-user-return-36983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90656 invoked from network); 5 Nov 2008 10:07:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 10:07:42 -0000
Received: (qmail 40213 invoked by uid 500); 5 Nov 2008 10:07:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40174 invoked by uid 500); 5 Nov 2008 10:07:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40162 invoked by uid 99); 5 Nov 2008 10:07:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 02:07:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.134.190 as permitted sender)
Received: from [209.85.134.190] (HELO mu-out-0910.google.com) (209.85.134.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 10:06:24 +0000
Received: by mu-out-0910.google.com with SMTP id i10so3837444mue.5
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 02:06:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=HqB5PB95yLaxXBLMeazfViX0cUVySiPrnqsuhaUh+n0=;
        b=YZjR2tuTBJg89Xs24tYS2Xr3AFRo8p3mxufrXdfUBXHXjpCdCjPWrvmVfZFmomC0qX
         Z0aPlIopn3F3VxHLppVgDyEsLtIYoVRI/7su5e/77TSs/vjLTAjWeBpwpukOcxSaAldn
         30cC0G8hORT/fXjYgQGxPDuf6jk1mIfJpG68s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=USp6H78dOsCeHIIgc2RZQF6/Cz0YP4H4dS3KzhFcpJ4Dwy+TUrY/1QCPJBGn/Qledt
         980tI2E7guk8WM+ohT8YWmA0Jvrn8taS+5p8t/IufrSsaVxLQm9WiyV0RBOQ3At70gl+
         l7GmGPu4uw2lwMORz9muHoebW7kof7y557kPQ=
Received: by 10.103.93.18 with SMTP id v18mr253452mul.43.1225879614526;
        Wed, 05 Nov 2008 02:06:54 -0800 (PST)
Received: by 10.103.208.13 with HTTP; Wed, 5 Nov 2008 02:06:54 -0800 (PST)
Message-ID: <a823853a0811050206r43d0d1d7x456132e978a4a525@mail.gmail.com>
Date: Wed, 5 Nov 2008 19:06:54 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: How to use Sort cass in Lucene 2.4.0?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4107_32172610.1225879614535"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4107_32172610.1225879614535
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

aGkuCkkgaGF2ZSBhIHF1ZXN0aW9uIDopCgpJbiBsdWNlbmUgMi4zLlggSSBkaWQgdXNlIFNvcnQg
Y2xhc3MgbGlrZSB0aGlzLi4KClNvcnQgc29ydCA9IG5ldyBTb3J0KCJGSUVMRE5BTUUiLCB0cnVl
KTsKSGl0cyBoaXRzID0gc2VhcmNoZXIuc2VhcmNoKHF1ZXJ5LCBzb3J0KTsKCmJ1dCwgaW4gbHVj
ZW5lIDIuNC4wIHNlYXJjaChRdWVyeSwgU29ydCkgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIEkgd2Fz
CnNlYXJjaGVkIEFQSSwgc28gSSBmb3VuZCB0aGlzIG1ldGhvZApzZWFyY2gocXVlcnksIGZpbHRl
ciwgbiwgc29ydCkKCkNvdWxkIG9uZSBvZiB5b3UgcG9pbnQgbWUgdG8gYW4gZXhhbXBsZSBvZiBj
b2RlIGZvciBxdWVyeWluZyB3aXRob3V0IHVzaW5nCnRoZSBkZXByZWNhdGVkIG1ldGhvZCBzZWFy
Y2gocXVlcnksIHNvcnQpPwoKYW5kIGFuIGV4YW1wbGUgb2YgY29kZSBmb3IgbWV0aG9kIHNlYXJj
aChxdWVyeSwgZmlsdGVyLCBuLCBzb3J0KS4gOikKClRoYW5rcy4gOikKCgotLSAKREVWv+u9xApo
dHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5LmNvbQo=
------=_Part_4107_32172610.1225879614535--

From java-user-return-36984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 14:47:43 2008
Return-Path: <java-user-return-36984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5539 invoked from network); 5 Nov 2008 14:47:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 14:47:43 -0000
Received: (qmail 50630 invoked by uid 500); 5 Nov 2008 14:47:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49906 invoked by uid 500); 5 Nov 2008 14:47:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49895 invoked by uid 99); 5 Nov 2008 14:47:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 06:47:41 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 14:46:23 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kxjey-0006zU-RY
	for java-user@lucene.apache.org; Wed, 05 Nov 2008 06:47:04 -0800
Message-ID: <20343051.post@talk.nabble.com>
Date: Wed, 5 Nov 2008 06:47:04 -0800 (PST)
From: Tomer Gabel <tomer@tomergabel.com>
To: java-user@lucene.apache.org
Subject: Re: Performance of never optimizing
In-Reply-To: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tomer@tomergabel.com
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Justus Pendleton-2 wrote:
> 
> 1. Why does the merge factor of 4 appear to be faster than the merge  
> factor of 2?
> 
> 2. Why does non-optimized searching appear to be faster than optimized  
> searching once the index hits ~500,000 documents?
> 
> 3. There appears to be a fairly sizable performance drop across the  
> board around 450,000 documents. Why is that?
> 

Hi Justus,

1. Higher merge factor => more segments. Lucene (which version are you
using, by the way?) only keeps a single file handle per physical file per
index reader; if your benchmark is multi-threaded, more concurrently active
segments would mean more file handles. Since you're using an 8-core Mac Pro
I also assume you have some sort of RAID setup, which means your storage
subsystem can physically handle more than one concurrent request, which can
only come into play with multiple segments.

2. Same explanation as above - an optimized index has only one segment, and
contention on the file handle can actually becomes a bottleneck past a
certain threshold. A merge factor of 2 leaves you with very few segments
even for a non-optimized index, which is why the performance of a
non-optimized, 2-factor index is very close to that of the optimized index.
The optimal merge-factor in this case will probably be a function of the
complexity of your RAID setup (NAS devices can easily utilize dozens of
physical drives, giving a measurable benefit to multiple concurrently active
segments), but I expect your setup won't seriously benefit from an increase
in the merge factor because it probably uses 4 or less physical drives. 

3. This is trickier; my guess is that until that point most of the
term-frequency data (.frq) is small enough to be kept fully in the disk read
cache, and beyond that point considerably more I/O is actually performed by
the storage subsystem. This can be probably be measured with tools available
in the OS of your choice, if you wish to corroborate this theory (I'd
certainly be interested in the results).

Best of luck,
Tomer



-----
--

http://www.tomergabel.com Tomer Gabel 


-- 
View this message in context: http://www.nabble.com/Performance-of-never-optimizing-tp20296914p20343051.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 15:18:37 2008
Return-Path: <java-user-return-36985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37364 invoked from network); 5 Nov 2008 15:18:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 15:18:36 -0000
Received: (qmail 15492 invoked by uid 500); 5 Nov 2008 15:18:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15451 invoked by uid 500); 5 Nov 2008 15:18:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15440 invoked by uid 99); 5 Nov 2008 15:18:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 07:18:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.228 as permitted sender)
Received: from [209.85.198.228] (HELO rv-out-0506.google.com) (209.85.198.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 15:17:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so40013rvb.5
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 07:18:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=hAcek3jpVkT6tT3oV2WLxQyppsfIaXglSTzUVIbPm5M=;
        b=psw+2gefH2612pVjAj0XyzPPNw3gPczgPVJEoIQUQUnyfkiibAjgBq2MUjzQmOsYES
         uIcfTO82r5IMq6xeRywHl1BeRa2T98xiz+SzFgDgKuHDOY5GAiyBIHmlSfhe+9Z3kJra
         T4Cr5QlChCg3BrVnvQ3qny8tgOhNswQ0+D7Jc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=NhSXmqsTljHZw1i3TnTidXy10+DfXV9znSvHONf3cJjYU2nJaCuPxIOF2HbZrSx10E
         4TXOlbRCidihVMcaH9kpq8jXv4f40Yg/Q6iilbT4c/wfFqvFWZ+5t41bPtZYO8XKTEWD
         Gmq9yS75NLZydTPaNl9Ffi5cVGqIXPFwWWM8Y=
Received: by 10.141.62.15 with SMTP id p15mr464948rvk.92.1225898282080;
        Wed, 05 Nov 2008 07:18:02 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Wed, 5 Nov 2008 07:18:02 -0800 (PST)
Message-ID: <c68e39170811050718v77880c0s8f3fa13d62a5cdc8@mail.gmail.com>
Date: Wed, 5 Nov 2008 10:18:02 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Performance of never optimizing
In-Reply-To: <20343051.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com>
	 <20343051.post@talk.nabble.com>
X-Google-Sender-Auth: 91904194fc495c00
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Nov 5, 2008 at 9:47 AM, Tomer Gabel <tomer@tomergabel.com> wrote:
> 1. Higher merge factor => more segments.

Right, and it's also important to note that it's only "on average"
more segments.
The number of segments go up and down with merging, so at particular
points in time, an index with a higher merge factor may have fewer
segments (or as small as 1 segment, equivalent to an optimized index).

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 15:37:09 2008
Return-Path: <java-user-return-36986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47638 invoked from network); 5 Nov 2008 15:37:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 15:37:08 -0000
Received: (qmail 47369 invoked by uid 500); 5 Nov 2008 15:37:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47341 invoked by uid 500); 5 Nov 2008 15:37:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47330 invoked by uid 99); 5 Nov 2008 15:37:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 07:37:09 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 15:35:51 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KxkQp-0000bG-Tk
	for java-user@lucene.apache.org; Wed, 05 Nov 2008 07:36:31 -0800
Message-ID: <20343211.post@talk.nabble.com>
Date: Wed, 5 Nov 2008 07:36:31 -0800 (PST)
From: JulieSoko <julie.sokolowski@saic.com>
To: java-user@lucene.apache.org
Subject: Re: No segment files found/ Searcher error
In-Reply-To: <20305354.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: julie.sokolowski@saic.com
References: <20305354.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yesterday, when typing a reply I noticed an error ... the CheckIndex.check
was not checking a good directory.. so the segments not found error was not
correct.  I apologize.  I made the correction and this is the correct error
that occurs when an i/o error is thrown.  I ran the CheckIndex.check method
after the i/o exception was caught:

Segments file=segments_296 numSegments=1 version=FORMAT_SHARED_DOC_STORE
[Lucene 2.3]
     1 of 1: name=+1dq docCount=1788454
     compund=true
     numFiles=1
     size (MB) = 331.125
     no deletions
     test: open reader....... OK
     test: fields, norms...... OK [4 fields]
     test: terms, freq, prox...2008-11-05 15:12:33,357 INFO Cache:195 -
Purging 0 of 4 Cached results.
2008-11-05 15:12:33,358 INFO Cache: 196 - 956018816 of 1073676288 bytes of
memory are currently free
OK [3409802 terms; 19311204 terms/docs pairs; 19842525 tokens]
    test: stored fields....... Wed Nov 05 15:12:59 UTC 2008: Purging Query
Cache 0 of 9 query cached results.
Wed Nov 05 15:12:59 UTC 2008: 955521656 of 1073676288 bytes of memory are
currently free.
FAILED
    WARNING: would remove reference to this segment (-fix was not
specified); full exception:
java.io.IOException: Input/Output error
   at java.io.RandomAccessfile.readBytes(Native Method)
   at java.io.RandomAccessFile.read(RandomAccessfile.java:315)
   at
org.apache.lucene.store.FSDirectory$FSIndexInput.readInternal(FSDirectory.java:550)
   at
org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java:131)
   at
org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240)
  at
org.apache.lucene.store.BufferedIndexInput.refill(bufferedIndexInput.java:152)
  at
org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
  at org.apache.lucene.store.IndexInput.readChars(IndexInput.java:126)
  at org.apache.lucene.store.IndexInput.readString(IndexInput.java:112)
  at org.apache.lucene.index.FieldsReader.addfield(FieldsReader.java:324)
  at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:166)
  at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)
  at org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
  at org.apache.lucene.index.CheckIndex.check(checkIndex.java:234)
  at
gminer.rest.content.RestContentSearchServlet.doGet(RestContentSearchServlet.java:269)
  .................. continues on  and then

WARNING: 1 broken segments detected
WARNING: 1788454 documents would be lost if -fix were specified

NOTE: would write new segments file [-fix was not specified]

************************************************
Then I wrote out the return status from the check method call and it was "
false".

The Normal Input/Output error follows... 

NOW, I am leaving the IndexSearcher open for the current day and if I
resubmit the query... the query will most likely work the 2nd time... Is
there something to be done to the index so that there are not the errors
above?  

I appreciate all your help.
Julie









JulieSoko wrote:
> 
> I am narrowing down this problem that I have had for a week now...   I am
> using lucene version 2.3.1 and 64 bit java versio 1.5.0-12-b04 running on 
> Linux box.  We are merging indexes every 60 seconds and there are 1..*
> searches occuring at anytime on the indexes.  The problem is that we will
> get an Input /Output error trying to read the index for a search
> randomly... say every 5th search.  I have posted the error before, but
> have narrowed it down, I believe, to a merge issue.  
> 
> This is the error that a searcher will output at random times:
>  java.io.IOException: Input/output error
>  java.io.RandomAccessFile.readBytes(Native Method)
>  java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>  at
> org.apache.lucene.store.FSDirecotry$FSIndexInput.readInternal(FSDirectory.java:550)
>  at
> org.apache.lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java:131)
>  at
> org.apache.lucene.index.CompoundFileReader$CSIndexInput.readInternal(CompoundFileReader.java:240)
> at
> org.apache.lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
> 152)
> at
> org.apache.lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
> 152)
> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
> at org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:123)
> at
> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java:154)
> at
> org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:223)
> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:217)
> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:678)
> at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:87)
> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
> at
> org.apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java:311)
> at org.apache.lucene.search.Searcher.search(Searcher.java:178) 
> 
> 
> ******************************************************************************
> NOW, when I get the above Exception, I check the index using the
> CheckIndex.check method... As part of the check , this exception is
> thrown:
> 
> 
> Error: could not read any segments file in directory
> java.io.FileNotFoundException: no segments* file found in
> org.apache.lucen.store.FSDirectory@appfs/rt10/jetty/20081103 
>     at
> org.apache.lucene.index.SegmentInfos$findSegmentsFile.run(SegementInfos.java:587)
>  .....
> 
> Is there any point in the merging of indexes that the segment files are
> removed?   If I rerun the search, right after this error occurs, the
> search is ok... I do open a new IndexSearcher...   
> 
> The IndexWriter code is this:
>    IndexWriter combinedWriter = new IndexWriter(currentMergeDir, new
> StandardAnalyzer());
>    combinedWriter.addIndexes(dirToMerge);
>    combinedWriter.flush();
>    combinedWriter.close();
> 
> 
> As you can see above, each time there is a merge a new IndexWriter is
> created, indexes added, flushed and closed.
> I know you are not supposed to have synchronization issues between writing
> and flushing , but could there be an issue when you are creating a new
> searcher at the instant where the files are merged and there are no
> segments in a dir???
> 
> Thanks,
> Julie
> 
> 
> 
> 
> 
> 
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20343211.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 16:23:45 2008
Return-Path: <java-user-return-36987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61894 invoked from network); 5 Nov 2008 16:23:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 16:23:44 -0000
Received: (qmail 18823 invoked by uid 500); 5 Nov 2008 16:23:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18801 invoked by uid 500); 5 Nov 2008 16:23:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18790 invoked by uid 99); 5 Nov 2008 16:23:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 08:23:44 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 16:22:27 +0000
Received: by qw-out-2122.google.com with SMTP id 5so47612qwi.53
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 08:23:07 -0800 (PST)
Received: by 10.214.149.13 with SMTP id w13mr818974qad.123.1225902187264;
        Wed, 05 Nov 2008 08:23:07 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 5sm14770qwh.2.2008.11.05.08.23.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 05 Nov 2008 08:23:06 -0800 (PST)
Message-Id: <EC946E22-8DA5-4160-B595-9D82AF33E724@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20343051.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Performance of never optimizing
Date: Wed, 5 Nov 2008 11:23:03 -0500
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com> <20343051.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Tomer Gabel wrote:

> Since you're using an 8-core Mac Pro
> I also assume you have some sort of RAID setup, which means your  
> storage
> subsystem can physically handle more than one concurrent request,  
> which can
> only come into play with multiple segments.

This is an important point: a multi-segment index naturally allows for
utilizing IO concurrency with multiple searches against a single
IndexReader.  It's actually a reason against optimizing, strangely
enough.

However, as of Lucene 2.4 there's a new directory impl NIOFSDirectory
that on Unix should eliminate that bias (on Windows it will be slower,
due to problems with Sun JREs impl of nio APIs specific to Windows).
Also, you can and should open read-only IndexReaders since that also
removes further internal locking.  If you do test these please report  
back on
what difference they made...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 16:29:45 2008
Return-Path: <java-user-return-36988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63585 invoked from network); 5 Nov 2008 16:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 16:29:45 -0000
Received: (qmail 28157 invoked by uid 500); 5 Nov 2008 16:29:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28122 invoked by uid 500); 5 Nov 2008 16:29:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28111 invoked by uid 99); 5 Nov 2008 16:29:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 08:29:45 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 16:28:27 +0000
Received: by qw-out-2122.google.com with SMTP id 5so49967qwi.53
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 08:29:07 -0800 (PST)
Received: by 10.214.59.11 with SMTP id h11mr829031qaa.292.1225902547177;
        Wed, 05 Nov 2008 08:29:07 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm19234qwd.4.2008.11.05.08.29.05
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 05 Nov 2008 08:29:06 -0800 (PST)
Message-Id: <8ED17CE7-A122-4BAA-8DEB-394BA76827B8@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <2E3FBFD3-A2EE-47AF-8538-43D3F73C8D7B@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Performance of never optimizing
Date: Wed, 5 Nov 2008 11:29:03 -0500
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com> <D40B78BA-8539-4899-A1D5-D51BB6723253@mikemccandless.com> <2E3FBFD3-A2EE-47AF-8538-43D3F73C8D7B@atlassian.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Justus Pendleton wrote:

> On 05/11/2008, at 4:36 AM, Michael McCandless wrote:
>> If possible, you should try to use a larger corpus (eg Wikipedia)  
>> rather than multiply Reuters by N, which creates unnatural term  
>> frequency distribution.
>
> I'll replicate the tests with the wikipedia corpus over the next few  
> days and regenerate the graphs to show the data points in addition  
> to the curves. The data I am using comes from the output on the  
> benchmark framework:
>
>     [java] Operation                       round mrg   runCnt    
> recsPerRun        rec/s  elapsedSec    avgUsedMem    avgTotalMem
>     [java] UnoptSearch_100_Par     0       2               
> 1                 100        230.4               0.43         
> 29,517,680        44,834,816
>
> I am plotting the "rec/s" which I am (possibly mistakenly)  
> interpreting to mean "searches per second" as I asked for 100  
> searches and it took 0.43 seconds to perform them all.

That is the right interpretation, but you get 6 such numbers for each
of your data points (6 rounds), so I was wondering how you then digest
that to 1 number.  EG discard worst & best 2 outliers and average the
rest?  Or, pick the best one.

Also I would not trust any test that took only 0.43 seconds to run.
It's too risky that random measurement costs/overhead are skewing the
results.

>> It's best to use a real query log, if possible, to run the  
>> queries.  If you are expecting your production machines to have  
>> plenty of RAM to hold the index, then you should definitely run the  
>> queries through once, discard it, to get all stuff loaded in RAM  
>> including the OS caching all required data in its IO cache.
>>
>> Not opening/closing a reader per search should change the graphs  
>> quite a bit (for the better) and hopefully change some of the odd  
>> things you are seeing (in the questions below).
>
> I don't believe our large users to have enough memory for Lucene  
> indexes to fit in RAM. (Especially given we use quite a bit of RAM  
> for other stuff.) I think we also close readers pretty frequently  
> (whenever any user updates a JIRA issue, which I am assuming  
> happening nearly constantly when you've got thousands of users). I  
> was trying to mimic our usage as closely as I could to see whether  
> Lucene behaves pathologically poorly given our current architecture.  
> There have been some excellent suggestions about using in-memory  
> indexes for recent updates but changes of that kind are,  
> unfortunately, currently outside of my purview :-(

This is a very important test criteria to decide up front, because you
have to carefully design the test to "be too large for RAM" if that's
the goal.  EG searching the same few queries over and over is not
right, since the necessary pages are quickly cached in the OS's IO
cache and you get fabulous results after that.

Are you using the default ReutersQueryMaker to provide queries?  When
you switch to Wikipedia you should also switch QueryMaker, maybe to
FileBasedQueryMaker to load a file that you pre-populate with a rich
"typical" set of queries.  But it's best to get real queries people  
do... phrase
queries, single terms, many terms, etc.

Maybe you could talk to Apache infra about using their Jira instance
(and possibly query logs, but that may be overly optimistic)?  It
should be a fairly large test case?

Also you should fix the test so that searcher is reopened only as
often as is "typical" for Jira, not once per query which your current
algo is doing.  I guess guestimate how many searches are done between
updates to issues?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 16:34:14 2008
Return-Path: <java-user-return-36989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65773 invoked from network); 5 Nov 2008 16:34:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 16:34:14 -0000
Received: (qmail 40336 invoked by uid 500); 5 Nov 2008 16:34:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40309 invoked by uid 500); 5 Nov 2008 16:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40283 invoked by uid 99); 5 Nov 2008 16:34:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 08:34:13 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 16:32:54 +0000
Received: by qw-out-2122.google.com with SMTP id 5so51601qwi.53
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 08:33:35 -0800 (PST)
Received: by 10.65.214.19 with SMTP id r19mr923463qbq.20.1225902814390;
        Wed, 05 Nov 2008 08:33:34 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id p27sm122461qbp.16.2008.11.05.08.33.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 05 Nov 2008 08:33:33 -0800 (PST)
Message-Id: <29311DF8-77A1-4FB7-B766-6C725B475BEC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <563763.10674.qm@web50303.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Performance of never optimizing
Date: Wed, 5 Nov 2008 11:33:31 -0500
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com> <563763.10674.qm@web50303.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Otis Gospodnetic wrote:

>> Our current default behaviour is a merge factor of 4. We perform an  
>> optimization
>> on the index every 4000 additions. We also perform an optimize at  
>> midnight. Our
>
> I wouldn't optimize every 4000 additions - you are killing IO,  
> rewriting the whole index, while trying to provide fast searches,  
> plus you are locking the index for other modifications.


One small clarification: optimize can run in the BG.  It doesn't block
other IndexWriter operations.  EG you can continue adding & deleting
docs.  Optimize() just guarantees that those segments that existed at
the start will be merged together.  Other segments that are flushed
after optimize had started will not be merged.

Of course, optimize is tremendously IO intensive so this may still
block out searches if the performance becomes hideously bad because
the IO system is saturated.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 18:04:58 2008
Return-Path: <java-user-return-36990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14117 invoked from network); 5 Nov 2008 18:04:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 18:04:57 -0000
Received: (qmail 85796 invoked by uid 500); 5 Nov 2008 18:04:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85763 invoked by uid 500); 5 Nov 2008 18:04:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85752 invoked by uid 99); 5 Nov 2008 18:04:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 10:04:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 18:03:38 +0000
Received: by yx-out-2324.google.com with SMTP id 3so70762yxj.5
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 10:04:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=e92NguU9/jybDm/NOsT8AKy9EMgu/Rd0umaXVTSsFq8=;
        b=lxl5xWposSfpm+mmRaykvvTh42P9Y8hupnsOVUuedX+IhwItxGIQtHz5Vu4as0sH8U
         EjyiJyf5GCaD8XA1rulsFUgHFh/jfffQZh6LHSka26m7U/ejfVnyGY1o+2vnKCdqMe8s
         bgTCHcapWqn6VOoUEDlU69Ws5pCBoxR2pJd1U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=sNvKdeRI9LSm23cUpZk15a2pgrURIlzZZoHwhq9R21pK18OJJGEDYnzBeUB5ZSosxh
         QlnZHzhz6Z6yxrpd1iEl7af4F47CefcCyDPKClCOD17oZpIm2ueMi3NYjZmMy2t3nBqD
         6JXKvNjHo1CLa54kEzfaZx1itZQ/ddsluME1A=
Received: by 10.150.123.18 with SMTP id v18mr2125364ybc.60.1225908259875;
        Wed, 05 Nov 2008 10:04:19 -0800 (PST)
Received: by 10.150.177.5 with HTTP; Wed, 5 Nov 2008 10:04:19 -0800 (PST)
Message-ID: <847931a70811051004j518a8b3fk4eb6446bd9f510ad@mail.gmail.com>
Date: Wed, 5 Nov 2008 11:04:19 -0700
From: "Todd Benge" <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to use Sort cass in Lucene 2.4.0?
In-Reply-To: <a823853a0811050206r43d0d1d7x456132e978a4a525@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <a823853a0811050206r43d0d1d7x456132e978a4a525@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

SSB0aGluayBpdCdzIGxpa2UgdGhpczoKClNvcnQgc29ydCA9IG5ldyBTb3J0KCJGSUVMRE5BTUUi
LCB0cnVlKTsKVG9wRmllbGREb2NzIGRvY3MgID0gc2VhcmNoZXIuc2VhcmNoZXIocXVlcnksIG51
bGwsIG4sIHNvcnQpOyAvLyBuIGlzCnRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHlvdSB3YW50IHRv
IHJldHJpZXZlCgpTY29yZURvY1tdIGhpdHMgPSBkb2NzLnNjb3JlRG9jczsKZm9yIChpbnQgaSA9
IDA7IGk8ZG9jcy50b3RhbEhpdHM7IGkrKyApIHsKICAgICBEb2N1bWVudCBkb2MgPSBzZWFyY2hl
ci5kb2MoaGl0c1tpXS5kb2MpOwp9CgpIb3BlIHRoaXMgaGVscHMuCgpUb2RkCgoKMjAwOC8xMS81
IMDlv+u8riA8bmVlZDRzcGRAZ21haWwuY29tPjoKPiBoaS4KPiBJIGhhdmUgYSBxdWVzdGlvbiA6
KQo+Cj4gSW4gbHVjZW5lIDIuMy5YIEkgZGlkIHVzZSBTb3J0IGNsYXNzIGxpa2UgdGhpcy4uCj4K
PiBTb3J0IHNvcnQgPSBuZXcgU29ydCgiRklFTEROQU1FIiwgdHJ1ZSk7Cj4gSGl0cyBoaXRzID0g
c2VhcmNoZXIuc2VhcmNoKHF1ZXJ5LCBzb3J0KTsKPgo+IGJ1dCwgaW4gbHVjZW5lIDIuNC4wIHNl
YXJjaChRdWVyeSwgU29ydCkgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIEkgd2FzCj4gc2VhcmNoZWQg
QVBJLCBzbyBJIGZvdW5kIHRoaXMgbWV0aG9kCj4gc2VhcmNoKHF1ZXJ5LCBmaWx0ZXIsIG4sIHNv
cnQpCj4KPiBDb3VsZCBvbmUgb2YgeW91IHBvaW50IG1lIHRvIGFuIGV4YW1wbGUgb2YgY29kZSBm
b3IgcXVlcnlpbmcgd2l0aG91dCB1c2luZwo+IHRoZSBkZXByZWNhdGVkIG1ldGhvZCBzZWFyY2go
cXVlcnksIHNvcnQpPwo+Cj4gYW5kIGFuIGV4YW1wbGUgb2YgY29kZSBmb3IgbWV0aG9kIHNlYXJj
aChxdWVyeSwgZmlsdGVyLCBuLCBzb3J0KS4gOikKPgo+IFRoYW5rcy4gOikKPgo+Cj4gLS0KPiBE
RVa/673ECj4gaHR0cDovL2RldnlvbmdzaWsudGlzdG9yeS5jb20KPgo=


From java-user-return-36991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 18:09:47 2008
Return-Path: <java-user-return-36991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17675 invoked from network); 5 Nov 2008 18:09:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 18:09:47 -0000
Received: (qmail 92133 invoked by uid 500); 5 Nov 2008 18:09:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92094 invoked by uid 500); 5 Nov 2008 18:09:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92083 invoked by uid 99); 5 Nov 2008 18:09:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 10:09:46 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 18:08:23 +0000
Received: by yw-out-2324.google.com with SMTP id 3so72375ywj.5
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 10:09:02 -0800 (PST)
Received: by 10.65.121.14 with SMTP id y14mr1050539qbm.37.1225908541559;
        Wed, 05 Nov 2008 10:09:01 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id k29sm351457qba.7.2008.11.05.10.08.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 05 Nov 2008 10:09:00 -0800 (PST)
Message-Id: <7EEE94FE-CC6A-4BEC-9F6A-5B665F54ADBD@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20343211.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: No segment files found/ Searcher error
Date: Wed, 5 Nov 2008 13:08:58 -0500
References: <20305354.post@talk.nabble.com> <20343211.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


If you are able to leave the IndexSearcher open, and resubmit the  
query, and most likely it works the 2nd time around, it really seems  
like something intermittent is going wrong with your IO system.

That exception from CheckIndex is just happening when Lucene is trying  
to read bytes from the stored fields files.

Is there anything in the machine's system logs indicating problems?

What OS / filesystem is that again?

Mike

JulieSoko wrote:

>
> Yesterday, when typing a reply I noticed an error ... the  
> CheckIndex.check
> was not checking a good directory.. so the segments not found error  
> was not
> correct.  I apologize.  I made the correction and this is the  
> correct error
> that occurs when an i/o error is thrown.  I ran the CheckIndex.check  
> method
> after the i/o exception was caught:
>
> Segments file=segments_296 numSegments=1  
> version=FORMAT_SHARED_DOC_STORE
> [Lucene 2.3]
>     1 of 1: name=+1dq docCount=1788454
>     compund=true
>     numFiles=1
>     size (MB) = 331.125
>     no deletions
>     test: open reader....... OK
>     test: fields, norms...... OK [4 fields]
>     test: terms, freq, prox...2008-11-05 15:12:33,357 INFO Cache:195 -
> Purging 0 of 4 Cached results.
> 2008-11-05 15:12:33,358 INFO Cache: 196 - 956018816 of 1073676288  
> bytes of
> memory are currently free
> OK [3409802 terms; 19311204 terms/docs pairs; 19842525 tokens]
>    test: stored fields....... Wed Nov 05 15:12:59 UTC 2008: Purging  
> Query
> Cache 0 of 9 query cached results.
> Wed Nov 05 15:12:59 UTC 2008: 955521656 of 1073676288 bytes of  
> memory are
> currently free.
> FAILED
>    WARNING: would remove reference to this segment (-fix was not
> specified); full exception:
> java.io.IOException: Input/Output error
>   at java.io.RandomAccessfile.readBytes(Native Method)
>   at java.io.RandomAccessFile.read(RandomAccessfile.java:315)
>   at
> org.apache.lucene.store.FSDirectory 
> $FSIndexInput.readInternal(FSDirectory.java:550)
>   at
> org 
> .apache 
> .lucene.store.BufferedIndexInput.readBytes(BufferedIndexInput.java: 
> 131)
>   at
> org.apache.lucene.index.CompoundFileReader 
> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>  at
> org 
> .apache 
> .lucene.store.BufferedIndexInput.refill(bufferedIndexInput.java:152)
>  at
> org 
> .apache 
> .lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:38)
>  at org.apache.lucene.store.IndexInput.readChars(IndexInput.java:126)
>  at org.apache.lucene.store.IndexInput.readString(IndexInput.java:112)
>  at org.apache.lucene.index.FieldsReader.addfield(FieldsReader.java: 
> 324)
>  at org.apache.lucene.index.FieldsReader.doc(FieldsReader.java:166)
>  at  
> org.apache.lucene.index.SegmentReader.document(SegmentReader.java:659)
>  at org.apache.lucene.index.IndexReader.document(IndexReader.java:525)
>  at org.apache.lucene.index.CheckIndex.check(checkIndex.java:234)
>  at
> gminer 
> .rest 
> .content 
> .RestContentSearchServlet.doGet(RestContentSearchServlet.java:269)
>  .................. continues on  and then
>
> WARNING: 1 broken segments detected
> WARNING: 1788454 documents would be lost if -fix were specified
>
> NOTE: would write new segments file [-fix was not specified]
>
> ************************************************
> Then I wrote out the return status from the check method call and it  
> was "
> false".
>
> The Normal Input/Output error follows...
>
> NOW, I am leaving the IndexSearcher open for the current day and if I
> resubmit the query... the query will most likely work the 2nd  
> time... Is
> there something to be done to the index so that there are not the  
> errors
> above?
>
> I appreciate all your help.
> Julie
>
>
>
>
>
>
>
>
>
> JulieSoko wrote:
>>
>> I am narrowing down this problem that I have had for a week  
>> now...   I am
>> using lucene version 2.3.1 and 64 bit java versio 1.5.0-12-b04  
>> running on
>> Linux box.  We are merging indexes every 60 seconds and there are  
>> 1..*
>> searches occuring at anytime on the indexes.  The problem is that  
>> we will
>> get an Input /Output error trying to read the index for a search
>> randomly... say every 5th search.  I have posted the error before,  
>> but
>> have narrowed it down, I believe, to a merge issue.
>>
>> This is the error that a searcher will output at random times:
>> java.io.IOException: Input/output error
>> java.io.RandomAccessFile.readBytes(Native Method)
>> java.io.RandomAccessFile.read(RandomAccessFile.java:315)
>> at
>> org.apache.lucene.store.FSDirecotry 
>> $FSIndexInput.readInternal(FSDirectory.java:550)
>> at
>> org 
>> .apache 
>> .lucene.store.BufferedIndexInput.readBytes(BufferedInputInput.java: 
>> 131)
>> at
>> org.apache.lucene.index.CompoundFileReader 
>> $CSIndexInput.readInternal(CompoundFileReader.java:240)
>> at
>> org 
>> .apache 
>> .lucene.instoreBufferedIndexInput.refill(BufferedIndexInput.java:
>> 152)
>> at
>> org 
>> .apache 
>> .lucene.instoreBufferedIndexInput.readByte(BufferedIndexInput.java:
>> 152)
>> at org.lucene.store.IndexInput.readVInt(IndexInput.java:76)
>> at org.apache.lucene.index.TermBuffer.read(TermBuffer.java:63)
>> at  
>> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java: 
>> 123)
>> at
>> org.apache.lucene.index.SegmentTermEnum.scanTo(SegmentTermEnum.java: 
>> 154)
>> at
>> org 
>> .apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java: 
>> 223)
>> at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java: 
>> 217)
>> at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java: 
>> 678)
>> at  
>> org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:87)
>> at org.apache.lucene.search.Searcher.docFreqs(searcher.java:118)
>> at
>> org 
>> .apache.lucene.search.MultiSearcher.createWeight(MultiSearcher.java: 
>> 311)
>> at org.apache.lucene.search.Searcher.search(Searcher.java:178)
>>
>>
>> ******************************************************************************
>> NOW, when I get the above Exception, I check the index using the
>> CheckIndex.check method... As part of the check , this exception is
>> thrown:
>>
>>
>> Error: could not read any segments file in directory
>> java.io.FileNotFoundException: no segments* file found in
>> org.apache.lucen.store.FSDirectory@appfs/rt10/jetty/20081103
>>    at
>> org.apache.lucene.index.SegmentInfos 
>> $findSegmentsFile.run(SegementInfos.java:587)
>> .....
>>
>> Is there any point in the merging of indexes that the segment files  
>> are
>> removed?   If I rerun the search, right after this error occurs, the
>> search is ok... I do open a new IndexSearcher...
>>
>> The IndexWriter code is this:
>>   IndexWriter combinedWriter = new IndexWriter(currentMergeDir, new
>> StandardAnalyzer());
>>   combinedWriter.addIndexes(dirToMerge);
>>   combinedWriter.flush();
>>   combinedWriter.close();
>>
>>
>> As you can see above, each time there is a merge a new IndexWriter is
>> created, indexes added, flushed and closed.
>> I know you are not supposed to have synchronization issues between  
>> writing
>> and flushing , but could there be an issue when you are creating a  
>> new
>> searcher at the instant where the files are merged and there are no
>> segments in a dir???
>>
>> Thanks,
>> Julie
>>
>>
>>
>>
>>
>>
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/No-segment-files-found--Searcher-error-tp20305354p20343211.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 18:09:47 2008
Return-Path: <java-user-return-36992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17717 invoked from network); 5 Nov 2008 18:09:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 18:09:47 -0000
Received: (qmail 93195 invoked by uid 500); 5 Nov 2008 18:09:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93162 invoked by uid 500); 5 Nov 2008 18:09:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93137 invoked by uid 99); 5 Nov 2008 18:09:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 10:09:50 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 18:08:32 +0000
Received: from [10.30.1.98] (unknown [63.85.187.2])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 6B935734B0
	for <java-user@lucene.apache.org>; Wed,  5 Nov 2008 10:09:13 -0800 (PST)
Message-Id: <43E23D7F-E45F-4BD7-A858-CA86DFE139C8@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <847931a70811051004j518a8b3fk4eb6446bd9f510ad@mail.gmail.com>
Content-Type: text/plain; charset=EUC-KR; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: How to use Sort cass in Lucene 2.4.0?
Date: Wed, 5 Nov 2008 12:09:11 -0600
References: <a823853a0811050206r43d0d1d7x456132e978a4a525@mail.gmail.com> <847931a70811051004j518a8b3fk4eb6446bd9f510ad@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 5, 2008, at 12:04 PM, Todd Benge wrote:

> I think it's like this:
>
> Sort sort =3D new Sort("FIELDNAME", true);
> TopFieldDocs docs  =3D searcher.searcher(query, null, n, sort); // n =
is
> the number of documents you want to retrieve
>
> ScoreDoc[] hits =3D docs.scoreDocs;
> for (int i =3D 0; i<docs.totalHits; i++ ) {


FYI: totalHits is the total number of matches and may be different =20
from the actual length of the docs.scoreDocs[] array, so this should be

i < hits.length

Otherwise, looks good.

>
>     Document doc =3D searcher.doc(hits[i].doc);
> }
>
> Hope this helps.
>
> Todd
>
>
> 2008/11/5 =C0=E5=BF=EB=BC=AE <need4spd@gmail.com>:
>> hi.
>> I have a question :)
>>
>> In lucene 2.3.X I did use Sort class like this..
>>
>> Sort sort =3D new Sort("FIELDNAME", true);
>> Hits hits =3D searcher.search(query, sort);
>>
>> but, in lucene 2.4.0 search(Query, Sort) method is deprecated. I was
>> searched API, so I found this method
>> search(query, filter, n, sort)
>>
>> Could one of you point me to an example of code for querying =20
>> without using
>> the deprecated method search(query, sort)?
>>
>> and an example of code for method search(query, filter, n, sort). :)
>>
>> Thanks. :)
>>
>>
>> --
>> DEV=BF=EB=BD=C4
>> http://devyongsik.tistory.com
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 18:14:19 2008
Return-Path: <java-user-return-36993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20154 invoked from network); 5 Nov 2008 18:14:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 18:14:19 -0000
Received: (qmail 97439 invoked by uid 500); 5 Nov 2008 18:14:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97405 invoked by uid 500); 5 Nov 2008 18:14:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97394 invoked by uid 99); 5 Nov 2008 18:14:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 10:14:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of todd.benge@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 18:13:00 +0000
Received: by yw-out-2324.google.com with SMTP id 3so73480ywj.5
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 10:13:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=3kVnavh4N7j3FZkWegpR5jibNQdMedfmx8zPZ/IvVVY=;
        b=vwDZDUhxac7XDqY4nAfGb8wRqavoutRHqMBzOTfvAvCU+7lYQfmLXvLyrqY9OJgZ6g
         NXG8Z8ez2xgAnJxbWNYmH4GEOOY4x86BdXkAsqHtJ11QdhUyMYvpgbL/67fXjAV37KK3
         tsjT4pLAVQbiReZrcoeMNpwOu7SWuevdbuJOU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=FEOjJXVke3/rFgh3a0iPekgFWIQxjTAX+gpY+R20ptfluGgJJgQrJallD5lFKl2wqr
         dQ18qEbwzxaFVyKkFp955zynxG1XWsxTfSkQ9TpkFqSvD29aAOr2UsVRs29DBA9NnB7r
         G8sb1XlyAWDQMb/YIP9Rxgosnfa6oQY3iRPLE=
Received: by 10.151.41.21 with SMTP id t21mr2112461ybj.146.1225908796690;
        Wed, 05 Nov 2008 10:13:16 -0800 (PST)
Received: by 10.150.177.5 with HTTP; Wed, 5 Nov 2008 10:13:16 -0800 (PST)
Message-ID: <847931a70811051013r724e297ei7fb3f5d38c4f0db6@mail.gmail.com>
Date: Wed, 5 Nov 2008 11:13:16 -0700
From: "Todd Benge" <todd.benge@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to use Sort cass in Lucene 2.4.0?
In-Reply-To: <43E23D7F-E45F-4BD7-A858-CA86DFE139C8@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <a823853a0811050206r43d0d1d7x456132e978a4a525@mail.gmail.com>
	 <847931a70811051004j518a8b3fk4eb6446bd9f510ad@mail.gmail.com>
	 <43E23D7F-E45F-4BD7-A858-CA86DFE139C8@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

WXVwIC0gZ29vZmVkIHRoYXQgdXAuCgpUaGFua3MsCgpUb2RkCgoyMDA4LzExLzUgR3JhbnQgSW5n
ZXJzb2xsIDxnc2luZ2Vyc0BhcGFjaGUub3JnPjoKPgo+IE9uIE5vdiA1LCAyMDA4LCBhdCAxMjow
NCBQTSwgVG9kZCBCZW5nZSB3cm90ZToKPgo+PiBJIHRoaW5rIGl0J3MgbGlrZSB0aGlzOgo+Pgo+
PiBTb3J0IHNvcnQgPSBuZXcgU29ydCgiRklFTEROQU1FIiwgdHJ1ZSk7Cj4+IFRvcEZpZWxkRG9j
cyBkb2NzICA9IHNlYXJjaGVyLnNlYXJjaGVyKHF1ZXJ5LCBudWxsLCBuLCBzb3J0KTsgLy8gbiBp
cwo+PiB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB5b3Ugd2FudCB0byByZXRyaWV2ZQo+Pgo+PiBT
Y29yZURvY1tdIGhpdHMgPSBkb2NzLnNjb3JlRG9jczsKPj4gZm9yIChpbnQgaSA9IDA7IGk8ZG9j
cy50b3RhbEhpdHM7IGkrKyApIHsKPgo+Cj4gRllJOiB0b3RhbEhpdHMgaXMgdGhlIHRvdGFsIG51
bWJlciBvZiBtYXRjaGVzIGFuZCBtYXkgYmUgZGlmZmVyZW50IGZyb20gdGhlCj4gYWN0dWFsIGxl
bmd0aCBvZiB0aGUgZG9jcy5zY29yZURvY3NbXSBhcnJheSwgc28gdGhpcyBzaG91bGQgYmUKPgo+
IGkgPCBoaXRzLmxlbmd0aAo+Cj4gT3RoZXJ3aXNlLCBsb29rcyBnb29kLgo+Cj4+Cj4+ICAgIERv
Y3VtZW50IGRvYyA9IHNlYXJjaGVyLmRvYyhoaXRzW2ldLmRvYyk7Cj4+IH0KPj4KPj4gSG9wZSB0
aGlzIGhlbHBzLgo+Pgo+PiBUb2RkCj4+Cj4+Cj4+IDIwMDgvMTEvNSDA5b/rvK4gPG5lZWQ0c3Bk
QGdtYWlsLmNvbT46Cj4+Pgo+Pj4gaGkuCj4+PiBJIGhhdmUgYSBxdWVzdGlvbiA6KQo+Pj4KPj4+
IEluIGx1Y2VuZSAyLjMuWCBJIGRpZCB1c2UgU29ydCBjbGFzcyBsaWtlIHRoaXMuLgo+Pj4KPj4+
IFNvcnQgc29ydCA9IG5ldyBTb3J0KCJGSUVMRE5BTUUiLCB0cnVlKTsKPj4+IEhpdHMgaGl0cyA9
IHNlYXJjaGVyLnNlYXJjaChxdWVyeSwgc29ydCk7Cj4+Pgo+Pj4gYnV0LCBpbiBsdWNlbmUgMi40
LjAgc2VhcmNoKFF1ZXJ5LCBTb3J0KSBtZXRob2QgaXMgZGVwcmVjYXRlZC4gSSB3YXMKPj4+IHNl
YXJjaGVkIEFQSSwgc28gSSBmb3VuZCB0aGlzIG1ldGhvZAo+Pj4gc2VhcmNoKHF1ZXJ5LCBmaWx0
ZXIsIG4sIHNvcnQpCj4+Pgo+Pj4gQ291bGQgb25lIG9mIHlvdSBwb2ludCBtZSB0byBhbiBleGFt
cGxlIG9mIGNvZGUgZm9yIHF1ZXJ5aW5nIHdpdGhvdXQKPj4+IHVzaW5nCj4+PiB0aGUgZGVwcmVj
YXRlZCBtZXRob2Qgc2VhcmNoKHF1ZXJ5LCBzb3J0KT8KPj4+Cj4+PiBhbmQgYW4gZXhhbXBsZSBv
ZiBjb2RlIGZvciBtZXRob2Qgc2VhcmNoKHF1ZXJ5LCBmaWx0ZXIsIG4sIHNvcnQpLiA6KQo+Pj4K
Pj4+IFRoYW5rcy4gOikKPj4+Cj4+Pgo+Pj4gLS0KPj4+IERFVr/rvcQKPj4+IGh0dHA6Ly9kZXZ5
b25nc2lrLnRpc3RvcnkuY29tCj4+Pgo+Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmli
ZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3Ig
YWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hl
Lm9yZwo+Cj4K


From java-user-return-36994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 20:12:03 2008
Return-Path: <java-user-return-36994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65648 invoked from network); 5 Nov 2008 20:12:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 20:12:03 -0000
Received: (qmail 22912 invoked by uid 500); 5 Nov 2008 20:12:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22876 invoked by uid 500); 5 Nov 2008 20:12:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22865 invoked by uid 99); 5 Nov 2008 20:12:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 12:12:02 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 20:10:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kxoir-000395-0I
	for java-user@lucene.apache.org; Wed, 05 Nov 2008 12:11:25 -0800
Message-ID: <20348816.post@talk.nabble.com>
Date: Wed, 5 Nov 2008 12:11:25 -0800 (PST)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: memory leak getting docs
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey there, I have posted about this problem before but I think I didn't
explain mysql very well.
I'll try to explain my problem inside the context:
I get ids from a database and I look for the documents in an index that
correspon to each id. There is just one match for every id. One I have the
docuement, I have to modify some fields. What I do is to create a new doc,
copy the fields of the old doc doing the modifications, delete the old doc
from the index and add the new.
I have to do it for about 5.000 documents.
My problem is that when I ejecute the app it starts increasing the memory
use until 700Mb or even more.
I have realized that the memory leak apperars when getting the docuements.
I leave here the piece of code I use to do that... any advice would be
really helpful coz it's driving me mad.

private Document getDocumentData(String id) {
        IndexSearcher searcher = null ;
        IndexReader reader = null;
        Document doc = null ;
        TermDocs td = null;
        
        try {
            
            searcher = new IndexSearcher(path_my_index) ;
            reader=searcher.getIndexReader();
     
            td=reader.termDocs(new Term(GlobalFields.ID,id)) ;
           
            if(td.next())
            {
                doc = reader.document(td.doc()) ;  
            }
            if(td != null)
            {
                td.close() ;
            }
            td=null;
        } catch (Exception ex) {
            logger.error("Troubles geting data: " + ex.getMessage()) ;
            logger.error("Stack: " + ErrorStack.getError(ex)) ;
        } finally {
           if(searcher != null) {
                try {
                    reader.close() ;
                    searcher.close() ;
                    reader = null ;
                    searcher = null ;
                } catch(Exception e){} ;
                    reader = null ;
                    searcher = null ;
            }  
        } 
        return doc ;
    }

This functions is called for every doc which I have to get the information
PD: If I call manually the garbage collector at the end of the function the
memory leak never apears... but the app runs really slow!!
Thanks in advanced

Marc


-- 
View this message in context: http://www.nabble.com/memory-leak-getting-docs-tp20348816p20348816.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 20:22:07 2008
Return-Path: <java-user-return-36995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67254 invoked from network); 5 Nov 2008 20:22:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 20:22:07 -0000
Received: (qmail 30784 invoked by uid 500); 5 Nov 2008 20:22:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30761 invoked by uid 500); 5 Nov 2008 20:22:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30750 invoked by uid 99); 5 Nov 2008 20:22:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 12:22:06 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of brunogiovs@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 20:20:47 +0000
Received: by wa-out-1112.google.com with SMTP id n4so100488wag.5
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 12:21:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Gi/ZYLlSdqHjhK1IBIOzGI90U4B6oLQ5LtAl444Kv1s=;
        b=lKQMBm6ZcTcfzGtkmXxB3EhAQRmJcCn1lBTqz7pbS9MXvxxFDdw717r2Co/kDKL3Pj
         GYZHiunRFg2mboRpxEE7R9Om6Vr0OyvQSZnWt4h1vfq0xBuMNJ5Cqs0V3WcWrRKGofrW
         S1fovMXkiNTuHFF+I2nSxdeq2gHQwvHfoL//I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=e9vUtDXAsIbUkLszskiN6hfKNRohMLnXTzkmfX2K7N88LMcwHwKHS7wnUl0Q8UayB5
         QA7imJmK2ug0Ni3EwsRYNIp9OBfBmZ/r7e0vRE3vXLZkZGBcnsdPpi6FtMEttGtnI7bk
         Di/S02yHzJ8LFdWNiy2IxbCxC8yWyS20furZE=
Received: by 10.114.137.16 with SMTP id k16mr39462wad.189.1225916489246;
        Wed, 05 Nov 2008 12:21:29 -0800 (PST)
Received: by 10.142.178.18 with HTTP; Wed, 5 Nov 2008 12:21:29 -0800 (PST)
Message-ID: <eda101550811051221w479850bbpfca2b53ec3834ffe@mail.gmail.com>
Date: Wed, 5 Nov 2008 15:21:29 -0500
From: "bruno da silva" <brunogiovs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: memory leak getting docs
In-Reply-To: <20348816.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16727_4302699.1225916489243"
References: <20348816.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16727_4302699.1225916489243
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Marc
I'd suggest you create the IndexSearcher outside of your method and pass the
indexreader as a parameter ...

like : private Document getDocumentData(IndexReader reader, String id)

you don't have a memory leak you have a intensive use of memory..



On Wed, Nov 5, 2008 at 3:11 PM, Marc Sturlese <marc.sturlese@gmail.com>wrote:

>
> Hey there, I have posted about this problem before but I think I didn't
> explain mysql very well.
> I'll try to explain my problem inside the context:
> I get ids from a database and I look for the documents in an index that
> correspon to each id. There is just one match for every id. One I have the
> docuement, I have to modify some fields. What I do is to create a new doc,
> copy the fields of the old doc doing the modifications, delete the old doc
> from the index and add the new.
> I have to do it for about 5.000 documents.
> My problem is that when I ejecute the app it starts increasing the memory
> use until 700Mb or even more.
> I have realized that the memory leak apperars when getting the docuements.
> I leave here the piece of code I use to do that... any advice would be
> really helpful coz it's driving me mad.
>
> private Document getDocumentData(String id) {
>        IndexSearcher searcher = null ;
>        IndexReader reader = null;
>        Document doc = null ;
>        TermDocs td = null;
>
>        try {
>
>            searcher = new IndexSearcher(path_my_index) ;
>            reader=searcher.getIndexReader();
>
>            td=reader.termDocs(new Term(GlobalFields.ID,id)) ;
>
>            if(td.next())
>            {
>                doc = reader.document(td.doc()) ;
>            }
>            if(td != null)
>            {
>                td.close() ;
>            }
>            td=null;
>        } catch (Exception ex) {
>            logger.error("Troubles geting data: " + ex.getMessage()) ;
>            logger.error("Stack: " + ErrorStack.getError(ex)) ;
>        } finally {
>           if(searcher != null) {
>                try {
>                    reader.close() ;
>                    searcher.close() ;
>                    reader = null ;
>                    searcher = null ;
>                } catch(Exception e){} ;
>                    reader = null ;
>                    searcher = null ;
>            }
>        }
>        return doc ;
>    }
>
> This functions is called for every doc which I have to get the information
> PD: If I call manually the garbage collector at the end of the function the
> memory leak never apears... but the app runs really slow!!
> Thanks in advanced
>
> Marc
>
>
> --
> View this message in context:
> http://www.nabble.com/memory-leak-getting-docs-tp20348816p20348816.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Bruno da Silva

Consultant
Abilis Solutions
1407 de la Montagne
Montreal, Quebec
H3G 1Z3
Cell: 514 - 572 3453
bdasilva@abilis.ca

------=_Part_16727_4302699.1225916489243--

From java-user-return-36996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 21:39:06 2008
Return-Path: <java-user-return-36996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96386 invoked from network); 5 Nov 2008 21:39:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 21:39:06 -0000
Received: (qmail 8295 invoked by uid 500); 5 Nov 2008 21:39:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8256 invoked by uid 500); 5 Nov 2008 21:39:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8245 invoked by uid 99); 5 Nov 2008 21:39:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 13:39:05 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 21:37:46 +0000
Received: by nf-out-0910.google.com with SMTP id g16so140253nfd.15
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 13:38:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=YhDt6TlOaqan1xsopxwZdYWPM7hEZW7dQVPN0p1wio0=;
        b=utqU/AeBhHatj9Nyza1G7PTPCQ1NwET8SVYTNAstWlJ9mzymstZC27oR9bzDUD1yU4
         GEr0Lqqoe6eigFtVfpHLKGfxux3K7RGE34pgRb6GOq3Txyj2cRFJ+LVaxG7kCtOiUfHs
         nkTeXx4YkS2yT8aa1qf299nORI9HcnmBYfR4M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ulRJvrN8EUxRMwK4O3lAbnkVSg9herL3VDZCkWYGOoMWdvMqz4BcSecOufX2O5hlLv
         zPXn6qHsnR04x2XAT9NMiNQObcL42q1q3F9H8Hf6P7j0EyMSAX0OfClMDr8YSgHqBVZs
         SjTFLzD0XVkS4xKhDbuOwywk+4K2JjNXMa4Ek=
Received: by 10.86.79.19 with SMTP id c19mr1722110fgb.26.1225921102692;
        Wed, 05 Nov 2008 13:38:22 -0800 (PST)
Received: by 10.86.83.2 with HTTP; Wed, 5 Nov 2008 13:38:22 -0800 (PST)
Message-ID: <359a92830811051338j504d6b45ya3a1ed6c2b2df9a2@mail.gmail.com>
Date: Wed, 5 Nov 2008 16:38:22 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: memory leak getting docs
In-Reply-To: <eda101550811051221w479850bbpfca2b53ec3834ffe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10122_24464399.1225921102682"
References: <20348816.post@talk.nabble.com>
	 <eda101550811051221w479850bbpfca2b53ec3834ffe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10122_24464399.1225921102682
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That's also why your app runs so slowly, opening an IndexReader
is a very expensive operation, doing it for every doc is exceedingly
bad...

Best
Erick

On Wed, Nov 5, 2008 at 3:21 PM, bruno da silva <brunogiovs@gmail.com> wrote:

> Hello Marc
> I'd suggest you create the IndexSearcher outside of your method and pass
> the
> indexreader as a parameter ...
>
> like : private Document getDocumentData(IndexReader reader, String id)
>
> you don't have a memory leak you have a intensive use of memory..
>
>
>
> On Wed, Nov 5, 2008 at 3:11 PM, Marc Sturlese <marc.sturlese@gmail.com
> >wrote:
>
> >
> > Hey there, I have posted about this problem before but I think I didn't
> > explain mysql very well.
> > I'll try to explain my problem inside the context:
> > I get ids from a database and I look for the documents in an index that
> > correspon to each id. There is just one match for every id. One I have
> the
> > docuement, I have to modify some fields. What I do is to create a new
> doc,
> > copy the fields of the old doc doing the modifications, delete the old
> doc
> > from the index and add the new.
> > I have to do it for about 5.000 documents.
> > My problem is that when I ejecute the app it starts increasing the memory
> > use until 700Mb or even more.
> > I have realized that the memory leak apperars when getting the
> docuements.
> > I leave here the piece of code I use to do that... any advice would be
> > really helpful coz it's driving me mad.
> >
> > private Document getDocumentData(String id) {
> >        IndexSearcher searcher = null ;
> >        IndexReader reader = null;
> >        Document doc = null ;
> >        TermDocs td = null;
> >
> >        try {
> >
> >            searcher = new IndexSearcher(path_my_index) ;
> >            reader=searcher.getIndexReader();
> >
> >            td=reader.termDocs(new Term(GlobalFields.ID,id)) ;
> >
> >            if(td.next())
> >            {
> >                doc = reader.document(td.doc()) ;
> >            }
> >            if(td != null)
> >            {
> >                td.close() ;
> >            }
> >            td=null;
> >        } catch (Exception ex) {
> >            logger.error("Troubles geting data: " + ex.getMessage()) ;
> >            logger.error("Stack: " + ErrorStack.getError(ex)) ;
> >        } finally {
> >           if(searcher != null) {
> >                try {
> >                    reader.close() ;
> >                    searcher.close() ;
> >                    reader = null ;
> >                    searcher = null ;
> >                } catch(Exception e){} ;
> >                    reader = null ;
> >                    searcher = null ;
> >            }
> >        }
> >        return doc ;
> >    }
> >
> > This functions is called for every doc which I have to get the
> information
> > PD: If I call manually the garbage collector at the end of the function
> the
> > memory leak never apears... but the app runs really slow!!
> > Thanks in advanced
> >
> > Marc
> >
> >
> > --
> > View this message in context:
> > http://www.nabble.com/memory-leak-getting-docs-tp20348816p20348816.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Bruno da Silva
>
> Consultant
> Abilis Solutions
> 1407 de la Montagne
> Montreal, Quebec
> H3G 1Z3
> Cell: 514 - 572 3453
> bdasilva@abilis.ca
>

------=_Part_10122_24464399.1225921102682--

From java-user-return-36997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 05 21:48:23 2008
Return-Path: <java-user-return-36997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1137 invoked from network); 5 Nov 2008 21:48:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Nov 2008 21:48:23 -0000
Received: (qmail 15832 invoked by uid 500); 5 Nov 2008 21:48:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15798 invoked by uid 500); 5 Nov 2008 21:48:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15787 invoked by uid 99); 5 Nov 2008 21:48:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 13:48:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.89.192.138] (HELO postoffice2.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 21:47:05 +0000
X-ASG-Debug-ID: 1225921648-62e900020000-H1Y1KX
X-Barracuda-URL: http://postoffice2.aconex.com:8000/cgi-bin/mark.cgi
Received: from postoffice.aconex.com (localhost [127.0.0.1])
	by postoffice2.aconex.com (Spam Firewall) with ESMTP id C5AE46527CE
	for <java-user@lucene.apache.org>; Thu,  6 Nov 2008 08:47:28 +1100 (EST)
Received: from postoffice.aconex.com (postoffice.yarra.acx [192.168.102.1]) by postoffice2.aconex.com with ESMTP id 8oVPsfJwnHIm1DFD for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 08:47:28 +1100 (EST)
Received: from [192.168.5.7] (melho0.aconex.com [203.89.192.141])
	by postoffice.aconex.com (Postfix) with ESMTP id C912192C310
	for <java-user@lucene.apache.org>; Thu,  6 Nov 2008 08:39:55 +1100 (EST)
Message-Id: <7EA0B010-02F9-4BFD-9E3D-CBDDAFB14439@aconex.com>
From: Paul Smith <psmith@aconex.com>
To: java-user@lucene.apache.org
In-Reply-To: <2E3FBFD3-A2EE-47AF-8538-43D3F73C8D7B@atlassian.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
X-ASG-Orig-Subj: Re: Performance of never optimizing
Subject: Re: Performance of never optimizing
Date: Thu, 6 Nov 2008 08:47:28 +1100
References: <A47FACB7-8C8D-4CEE-976F-707FB93B9645@atlassian.com> <D40B78BA-8539-4899-A1D5-D51BB6723253@mikemccandless.com> <2E3FBFD3-A2EE-47AF-8538-43D3F73C8D7B@atlassian.com>
X-Mailer: Apple Mail (2.929.2)
X-Barracuda-Connect: postoffice.yarra.acx[192.168.102.1]
X-Barracuda-Start-Time: 1225921648
X-Barracuda-Virus-Scanned: by Aconex Staff Email Spam Firewall at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org

>>
>
> I don't believe our large users to have enough memory for Lucene  
> indexes to fit in RAM. (Especially given we use quite a bit of RAM  
> for other stuff.) I think we also close readers pretty frequently  
> (whenever any user updates a JIRA issue, which I am assuming  
> happening nearly constantly when you've got thousands of users). I  
> was trying to mimic our usage as closely as I could to see whether  
> Lucene behaves pathologically poorly given our current architecture.  
> There have been some excellent suggestions about using in-memory  
> indexes for recent updates but changes of that kind are,  
> unfortunately, currently outside of my purview :-(
>
> Given that our current usage may be suboptimal :-/ does anyone have  
> any ideas about what may be causing the anomalies I identified  
> earlier?


We have exactly the same problem JIRA has only even bigger I think..   
We have large projects with 10's of millions of documents and mail  
items.  Our requirement was a 5 second refresh time (that is, an  
update (add, delete, or update) can take no longer than 5 seconds  
before a subsequent search can see it.  Worse, we have a large number  
of fields customers need to sort by, so tearing down a 15Gb index with  
a dozen sorting fields every 5 seconds and rebuilding the  
FieldSortedHitQueue's is clearly not going to work.. :)

We solved this by having a virtual index made up of an 'archive' and a  
'work' index, and then run a multi-reader over the 2.  All updates  
(adds, updates, deletes) are done as a delete to the Archive index,  
and then an add/update to the work index.  Every week during a lull we  
merge the 2 into a new archive index directory and 'switch' to it  
(blocking updates while we optimize and switch).  This means the work  
sub-index can be refreshed every 5 seconds because it is small and we  
'pin' the archive index in memory by doing... well.. a fairly  
egregious hack to be honest.  We actually have to do updates to the  
Archive to satisfy the delete, but doing that normally would require a  
total refresh for that delete to be made visible.  We accomplish that  
by allowing the delete to go to the disk (via deleted segment) but  
also we apply the deletes in memory as well so that can be seen.  This  
way the most up-to-date data can be seen in the work index.

This gives the best of both worlds, a really warmed up large archive  
index, and a smaller work index ( no more than a weeks worth of  
updates) that we can refresh every 5 seconds.  The tear down/warm up  
cycle appears to be fine for us for the work index and we can satisfy  
searches very quickly.

It would be really nice if Lucene could allow deletes to be done  
against a live IndexReader without flushing anything else out.

cheers,

Paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-36998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 00:50:25 2008
Return-Path: <java-user-return-36998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4459 invoked from network); 6 Nov 2008 00:50:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 00:50:25 -0000
Received: (qmail 3652 invoked by uid 500); 6 Nov 2008 00:50:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3618 invoked by uid 500); 6 Nov 2008 00:50:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3607 invoked by uid 99); 6 Nov 2008 00:50:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 16:50:25 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.109.255.67] (HELO mail68.messagelabs.com) (193.109.255.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Nov 2008 00:49:08 +0000
X-VirusChecked: Checked
X-Env-Sender: ulrich.vachon@vidal.fr
X-Msg-Ref: server-12.tower-68.messagelabs.com!1225932586!96875733!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [217.109.82.230]
Received: (qmail 18762 invoked from network); 6 Nov 2008 00:49:46 -0000
Received: from unknown (HELO localhost.localdomain) (217.109.82.230)
  by server-12.tower-68.messagelabs.com with SMTP; 6 Nov 2008 00:49:46 -0000
Received: from srv-exch01.france.groupe.intra (srv-exch01.france.groupe.intra [172.16.50.5])
	by localhost.localdomain (Postfix) with ESMTP id 3A8E737E96
	for <java-user@lucene.apache.org>; Thu,  6 Nov 2008 02:01:20 +0100 (CET)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C93FA9.8FEF7987"
Subject: =?iso-8859-1?Q?RE=A0=3A_Can_lucene_search_from_multi-index_directory_like?=
	=?iso-8859-1?Q?_using_FK_in_database=3F?=
Date: Thu, 6 Nov 2008 01:49:45 +0100
Message-ID: <B652D70ACFDB7F42B79D1997ACBFBFE1080AB8@srv-exch01.france.groupe.intra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <B652D70ACFDB7F42B79D1997ACBFBFE1080AB8@srv-exch01.france.groupe.intra>
Thread-Topic: Can lucene search from multi-index directory like using FK in database?
Thread-Index: Ack+eXK57vXJQ9p5SxuPxkRx8Wf/0QBLwJEu
References: <1225801913.6280.3.camel@clay-laptop>
From: "Ulrich Vachon" <ulrich.vachon@vidal.fr>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C93FA9.8FEF7987
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,

Erik has right, Lucene is not a RDBMS. If you want mix both world, you =
can use tools dedicated like Hibernate Search or Compass.

Ulrich VACHON

-------- Message d'origine--------
De: Clay Zhong [mailto:zjclay@gmail.com]
Date: mar. 04/11/2008 13:31
=C0: java-user@lucene.apache.org
Objet : Can lucene search from multi-index directory like using FK in =
database?
=20
Hi Guys,

I meet some problems when using Lucene 2.3.2. After a lot of research, I
still can't find any ways to solve them. Hope you can give me some
advice..

1. Can I search different document from multi-index when they have
connections like FK in database?
For example,
Index Dir 1 (User): Field id, Field departmentId
Index Dir 2 (Department): Field id, Field location
How can I get all user that location is USA?
Well, I can index location into User, or search from Department first to
get departmentId. But they're really terrible, is there a better way?

2. How can I search from multi-index with one query? It's different from
using MultiSearcher.
For example, there's two fields, 'title' and 'content', when I search
'Java and Lucene', how can I get documents which contains 'Java' in
'title' and 'lucene' in 'content'? (not only 'Java and Lucene' in one
field). I can add a field contains both 'title' and 'content', but
that's really really bad solution....

That's all my questions, thanks for your patient.

Best Wishes
Clay Zhong


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


______________________________________________________________________
Cet e-mail a =E9t=E9 scann=E9 par MessageLabs Email Security System.
Pour plus d'informations, visitez http://www.messagelabs.com/email
______________________________________________________________________



------_=_NextPart_001_01C93FA9.8FEF7987
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C93FA9.8FEF7987--

From java-user-return-36999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 02:24:35 2008
Return-Path: <java-user-return-36999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63414 invoked from network); 6 Nov 2008 02:24:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 02:24:35 -0000
Received: (qmail 71861 invoked by uid 500); 6 Nov 2008 02:24:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71836 invoked by uid 500); 6 Nov 2008 02:24:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71815 invoked by uid 99); 6 Nov 2008 02:24:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 18:24:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 02:22:57 +0000
Received: by mu-out-0910.google.com with SMTP id i10so276834mue.5
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 18:23:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=qNstiEqng1kIS95VUgSf/h6tMlzZCEjiO5fGkcJI6Hk=;
        b=xPKa0+zemcJw+eFWTFXx0bfZkEKpN6P98csOu5IH15BkN60xoUCTId4a/TBLJVOJFx
         hH14sZQkyVoanku3AU4yugrjaAphSREmWENG25b/gyQ7GeiaB7PNckI2c2xctQt2/Q3p
         wu+WaYNoxAqTf5l32EBwiNhHHi3DjRTPm+i2I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wIePEDsgtUCMsIE9jEQtGhhlcChOGeOeRpoocnINUireSxyCN9lafz2h4i2mJkHZFf
         EXi52RoMKtdH9BVece+//6qqGx6/JFcLpuYg472vgavocsjL3SsMffVTE2Zxsg0HpZ5p
         pZwgkOOcpKGAf4cekjQn7cQJ0yWUfGbEqM4s8=
Received: by 10.103.52.7 with SMTP id e7mr758273muk.52.1225938208264;
        Wed, 05 Nov 2008 18:23:28 -0800 (PST)
Received: by 10.103.208.13 with HTTP; Wed, 5 Nov 2008 18:23:28 -0800 (PST)
Message-ID: <a823853a0811051823m6d7f19b6rcdaf9447020f4690@mail.gmail.com>
Date: Thu, 6 Nov 2008 11:23:28 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to use Sort cass in Lucene 2.4.0?
In-Reply-To: <847931a70811051013r724e297ei7fb3f5d38c4f0db6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16492_3614679.1225938208241"
References: <a823853a0811050206r43d0d1d7x456132e978a4a525@mail.gmail.com>
	 <847931a70811051004j518a8b3fk4eb6446bd9f510ad@mail.gmail.com>
	 <43E23D7F-E45F-4BD7-A858-CA86DFE139C8@apache.org>
	 <847931a70811051013r724e297ei7fb3f5d38c4f0db6@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16492_3614679.1225938208241
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmsgeW91IHZlcnkgbXVjaC4KSXQncyByZWFsbHkgdXNlZnVsbCBzYW1wbGUgY29kZSBmb3Ig
bWUuIDopCgpUaGFua3MuCgpKYW5nLgoKCjA4LiAxMS4gNiwgVG9kZCBCZW5nZSA8dG9kZC5iZW5n
ZUBnbWFpbC5jb20+tNTAzCDA27y6Ogo+Cj4gWXVwIC0gZ29vZmVkIHRoYXQgdXAuCj4KPiBUaGFu
a3MsCj4KPiBUb2RkCj4KPiAyMDA4LzExLzUgR3JhbnQgSW5nZXJzb2xsIDxnc2luZ2Vyc0BhcGFj
aGUub3JnPjoKPiA+Cj4gPiBPbiBOb3YgNSwgMjAwOCwgYXQgMTI6MDQgUE0sIFRvZGQgQmVuZ2Ug
d3JvdGU6Cj4gPgo+ID4+IEkgdGhpbmsgaXQncyBsaWtlIHRoaXM6Cj4gPj4KPiA+PiBTb3J0IHNv
cnQgPSBuZXcgU29ydCgiRklFTEROQU1FIiwgdHJ1ZSk7Cj4gPj4gVG9wRmllbGREb2NzIGRvY3Mg
ID0gc2VhcmNoZXIuc2VhcmNoZXIocXVlcnksIG51bGwsIG4sIHNvcnQpOyAvLyBuIGlzCj4gPj4g
dGhlIG51bWJlciBvZiBkb2N1bWVudHMgeW91IHdhbnQgdG8gcmV0cmlldmUKPiA+Pgo+ID4+IFNj
b3JlRG9jW10gaGl0cyA9IGRvY3Muc2NvcmVEb2NzOwo+ID4+IGZvciAoaW50IGkgPSAwOyBpPGRv
Y3MudG90YWxIaXRzOyBpKysgKSB7Cj4gPgo+ID4KPiA+IEZZSTogdG90YWxIaXRzIGlzIHRoZSB0
b3RhbCBudW1iZXIgb2YgbWF0Y2hlcyBhbmQgbWF5IGJlIGRpZmZlcmVudCBmcm9tCj4gdGhlCj4g
PiBhY3R1YWwgbGVuZ3RoIG9mIHRoZSBkb2NzLnNjb3JlRG9jc1tdIGFycmF5LCBzbyB0aGlzIHNo
b3VsZCBiZQo+ID4KPiA+IGkgPCBoaXRzLmxlbmd0aAo+ID4KPiA+IE90aGVyd2lzZSwgbG9va3Mg
Z29vZC4KPiA+Cj4gPj4KPiA+PiAgICBEb2N1bWVudCBkb2MgPSBzZWFyY2hlci5kb2MoaGl0c1tp
XS5kb2MpOwo+ID4+IH0KPiA+Pgo+ID4+IEhvcGUgdGhpcyBoZWxwcy4KPiA+Pgo+ID4+IFRvZGQK
PiA+Pgo+ID4+Cj4gPj4gMjAwOC8xMS81IMDlv+u8riA8bmVlZDRzcGRAZ21haWwuY29tPjoKPiA+
Pj4KPiA+Pj4gaGkuCj4gPj4+IEkgaGF2ZSBhIHF1ZXN0aW9uIDopCj4gPj4+Cj4gPj4+IEluIGx1
Y2VuZSAyLjMuWCBJIGRpZCB1c2UgU29ydCBjbGFzcyBsaWtlIHRoaXMuLgo+ID4+Pgo+ID4+PiBT
b3J0IHNvcnQgPSBuZXcgU29ydCgiRklFTEROQU1FIiwgdHJ1ZSk7Cj4gPj4+IEhpdHMgaGl0cyA9
IHNlYXJjaGVyLnNlYXJjaChxdWVyeSwgc29ydCk7Cj4gPj4+Cj4gPj4+IGJ1dCwgaW4gbHVjZW5l
IDIuNC4wIHNlYXJjaChRdWVyeSwgU29ydCkgbWV0aG9kIGlzIGRlcHJlY2F0ZWQuIEkgd2FzCj4g
Pj4+IHNlYXJjaGVkIEFQSSwgc28gSSBmb3VuZCB0aGlzIG1ldGhvZAo+ID4+PiBzZWFyY2gocXVl
cnksIGZpbHRlciwgbiwgc29ydCkKPiA+Pj4KPiA+Pj4gQ291bGQgb25lIG9mIHlvdSBwb2ludCBt
ZSB0byBhbiBleGFtcGxlIG9mIGNvZGUgZm9yIHF1ZXJ5aW5nIHdpdGhvdXQKPiA+Pj4gdXNpbmcK
PiA+Pj4gdGhlIGRlcHJlY2F0ZWQgbWV0aG9kIHNlYXJjaChxdWVyeSwgc29ydCk/Cj4gPj4+Cj4g
Pj4+IGFuZCBhbiBleGFtcGxlIG9mIGNvZGUgZm9yIG1ldGhvZCBzZWFyY2gocXVlcnksIGZpbHRl
ciwgbiwgc29ydCkuIDopCj4gPj4+Cj4gPj4+IFRoYW5rcy4gOikKPiA+Pj4KPiA+Pj4KPiA+Pj4g
LS0KPiA+Pj4gREVWv+u9xAo+ID4+PiBodHRwOi8vZGV2eW9uZ3Npay50aXN0b3J5LmNvbQo+ID4+
Pgo+ID4KPiA+Cj4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiA+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGph
dmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+ID4gRm9yIGFkZGl0aW9uYWwg
Y29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPiA+Cj4g
Pgo+CgoKCi0tIApERVa/673ECmh0dHA6Ly9kZXZ5b25nc2lrLnRpc3RvcnkuY29tCg==
------=_Part_16492_3614679.1225938208241--

From java-user-return-37000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 03:14:10 2008
Return-Path: <java-user-return-37000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96139 invoked from network); 6 Nov 2008 03:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 03:14:10 -0000
Received: (qmail 98671 invoked by uid 500); 6 Nov 2008 03:14:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98640 invoked by uid 500); 6 Nov 2008 03:14:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98629 invoked by uid 99); 6 Nov 2008 03:14:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 19:14:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 03:12:52 +0000
Received: by wf-out-1314.google.com with SMTP id 28so378380wfc.20
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 19:13:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:in-reply-to:references:x-mailer:mime-version
         :content-type:content-transfer-encoding;
        bh=AQ8m5Hg6+Kft5FGw4OwuE6TjeMN1a85RTR0oJtAsPbs=;
        b=uU/gKZXaCa06Bkyooa1LQpXwN/ZGz7OitzT/1NMzGxZVNpgGn/JmcPFvOJ/eD0lzpi
         vaPMsiLeFRBhtFLipvH7k/5zfldj9uMzbVU40cQBZncmV7OU27rEUwJr8WpPN/LkF6ER
         w+/vvk6KHdS/GmIMo2CuF1NxBv/So26qX9QmE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:in-reply-to:references:x-mailer
         :mime-version:content-type:content-transfer-encoding;
        b=CTS3UOTVSZSrCjn17vDdFggTx1W9sABkGDmv+dMujlmi3QcswCMGJ7+z0pXbXmRtg+
         RQcP2+/FcRG7qSOh2CXp2Usdmk1ba1hnrBFGnuwjyTCySsDFiyaUV/6ZfKOMFJeyUvr6
         sLsQHvraWLCZmeMQLeS63u4OH3YZEjsB8vdMo=
Received: by 10.142.188.4 with SMTP id l4mr187722wff.19.1225941213975;
        Wed, 05 Nov 2008 19:13:33 -0800 (PST)
Received: from zim ([189.107.137.13])
        by mx.google.com with ESMTPS id 30sm1358945wfd.1.2008.11.05.19.13.32
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 05 Nov 2008 19:13:33 -0800 (PST)
Date: Thu, 6 Nov 2008 01:13:23 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Benchmarking my indexer
Message-Id: <20081106011323.cef6984d.almeidaraf@gmail.com>
In-Reply-To: <20081102210656.a9e33c12.almeidaraf@gmail.com>
References: <20081101033904.6f2bc6df.almeidaraf@gmail.com>
	<42D6517E-5B16-4B1F-9EDE-D91FE6EC1F5D@apache.org>
	<20081102210656.a9e33c12.almeidaraf@gmail.com>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, 2 Nov 2008 21:06:56 -0200
Rafael Cunha de Almeida <almeidaraf@gmail.com> wrote:

> On Sun, 2 Nov 2008 07:11:20 -0500
> Grant Ingersoll <gsingers@apache.org> wrote:
> 
> > 
> > On Nov 1, 2008, at 1:39 AM, Rafael Cunha de Almeida wrote:
> > 
> > > Hello,
> > >
> > > I did an indexer that parses some files and indexes them using  
> > > lucene. I
> > > want to benchmark the whole thing, so I'd like to count the tokens
> > > being indexed so I can calculate the average number of indexed tokens
> > > per second. Is there a way to count the number of tokens on a  
> > > document?
> > 
> > I think you would have to add a "CountingTokenFilter", that you write  
> > and manage as you add documents.  Or, you could just take the total #  
> > of tokens / by the number of docs and use the average.  That can be  
> > obtained w/o writing a new TokenFilter.
> 
> How would I obtain the total number of tokens on an index? I couldn't
> find that statistic anywhere. I looked for it on IndexWritter,
> IndexReader and IndexSearcher classes. Is there maybe some tool I'd run
> on a index or something like that?

I'm using PerFieldAnalyzerWrapper, so I tried writing the following
Analyzer to count the tokens:

	import org.apache.lucene.analysis.PerFieldAnalyzerWrapper;
	import org.apache.lucene.analysis.TokenStream;
	import org.apache.lucene.analysis.Analyzer;

	import java.io.Reader;


	public class CounterAnalyzer extends PerFieldAnalyzerWrapper
	{
	    public CounterAnalyzer(Analyzer a)
	    {
		super(a);
	    }

	    public TokenStream tokenStream(String field, Reader reader)
	    {
		return new CounterFilter(super.tokenStream(field,
reader)); }
	}

the CounterFilter is implemented as:
	import org.apache.lucene.document.NumberTools;

	import org.apache.lucene.analysis.TokenFilter;
	import org.apache.lucene.analysis.Token;
	import org.apache.lucene.analysis.TokenStream;


	import java.io.IOException;

	public final class CounterFilter extends TokenFilter
	{
	    public CounterFilter(TokenStream in)
	    {
		super(in);
	    }

	    public Token next(Token t) throws IOException
	    {
		assert t != null;

		Token nt = input.next(t);
		if (nt == null)
		    return null;
		System.out.println("1");
		return nt;
	    }

	}

my idea was to pipe the output to an awk script that would count the
number of 1s. But, to my surprise, the tokenStream method of the
analyzer wasn't even called during the indexing. Could someone instruct
me into how should I count the number of tokens on an index?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 04:04:45 2008
Return-Path: <java-user-return-37001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57443 invoked from network); 6 Nov 2008 04:04:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 04:04:44 -0000
Received: (qmail 17592 invoked by uid 500); 6 Nov 2008 04:04:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17557 invoked by uid 500); 6 Nov 2008 04:04:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17546 invoked by uid 99); 6 Nov 2008 04:04:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Nov 2008 20:04:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.142.187 as permitted sender)
Received: from [209.85.142.187] (HELO ti-out-0910.google.com) (209.85.142.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 04:03:25 +0000
Received: by ti-out-0910.google.com with SMTP id b8so187059tic.11
        for <java-user@lucene.apache.org>; Wed, 05 Nov 2008 20:03:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=GrBOtCNlJQZVtiTNf96/TPA3W519AZopqnVaPJXNysM=;
        b=RzRNQmABu1kmgcLVoTLoKaL5S1NiW7BZVzSmoBwXuWF3Ij6JLxSEw8nvRNyXZpFVhh
         4/oo2g06jQFd9T6OqoDR4DDCv0RbZl+tOILVAltqcoWjoLzCWCTP59xCWIV0ZUyfzXFu
         tHe2/VB9VR7/BXKYVk2oRTVxAVqJp8u/OhiRU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Wq3TfOMObDlzfdb8sn2WGw3JcXtPtKLiIDasRw9Fw+7SP92Jb/NvMPxh/n3H4VhUv2
         stYGI6w3mSBX6qtqpzJBUFrQplM6imvXgOGRtY1l9s3d/kQBHj09m3+b+d1kP4g40Lg9
         w1aRhFSxpMcVtK8ticTrX4bGAB9IY/JE/1zRY=
Received: by 10.110.15.9 with SMTP id 9mr1584246tio.48.1225944235969;
        Wed, 05 Nov 2008 20:03:55 -0800 (PST)
Received: from ?192.168.1.100? (c-71-202-137-198.hsd1.ca.comcast.net [71.202.137.198])
        by mx.google.com with ESMTPS id i9sm2126524tid.9.2008.11.05.20.03.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 05 Nov 2008 20:03:55 -0800 (PST)
Message-ID: <49126CA4.8090401@gmail.com>
Date: Wed, 05 Nov 2008 20:03:48 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Can lucene search from multi-index directory like using FK in
 database?
References: <1225801913.6280.3.camel@clay-laptop>
In-Reply-To: <1225801913.6280.3.camel@clay-laptop>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

These are common problems. In general, mapping database tables into 
Lucene Documents is not always good for performance. You may need to 
flatten objects to fit Lucene's shoes.

My answers are here respectively.

1. You have two alternatives here:
    1) create an index to contain both User and Field Location 
information. This is more efficient, but you will need to create a new 
index structure. But Lucene is just an "index", do not use it to mimic 
database structure.
    2) use your "terrible way" to retrieve department_id first, then to 
get the user_ids. This approach may not be that bad, although less 
performant.

2. You will need to create a little query parser to distribute words 
into two fields.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: 
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) 
got 2.6 Million Euro funding!


Clay Zhong wrote:
> Hi Guys,
>
> I meet some problems when using Lucene 2.3.2. After a lot of research, I
> still can't find any ways to solve them. Hope you can give me some
> advice..
>
> 1. Can I search different document from multi-index when they have
> connections like FK in database?
> For example,
> Index Dir 1 (User): Field id, Field departmentId
> Index Dir 2 (Department): Field id, Field location
> How can I get all user that location is USA?
> Well, I can index location into User, or search from Department first to
> get departmentId. But they're really terrible, is there a better way?
>
> 2. How can I search from multi-index with one query? It's different from
> using MultiSearcher.
> For example, there's two fields, 'title' and 'content', when I search
> 'Java and Lucene', how can I get documents which contains 'Java' in
> 'title' and 'lucene' in 'content'? (not only 'Java and Lucene' in one
> field). I can add a field contains both 'title' and 'content', but
> that's really really bad solution....
>
> That's all my questions, thanks for your patient.
>
> Best Wishes
> Clay Zhong
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 09:19:22 2008
Return-Path: <java-user-return-37002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8293 invoked from network); 6 Nov 2008 09:19:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 09:19:22 -0000
Received: (qmail 94317 invoked by uid 500); 6 Nov 2008 09:19:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94287 invoked by uid 500); 6 Nov 2008 09:19:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94276 invoked by uid 99); 6 Nov 2008 09:19:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 01:19:22 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 09:18:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Ky10n-00078Q-4V
	for java-user@lucene.apache.org; Thu, 06 Nov 2008 01:18:45 -0800
Message-ID: <20357552.post@talk.nabble.com>
Date: Thu, 6 Nov 2008 01:18:45 -0800 (PST)
From: Dora <julien.barret@gmail.com>
To: java-user@lucene.apache.org
Subject: Can Lucene tells which field matched ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: julien.barret@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi 

I am new to Lucene and working on a search module for some XML data:

I need to provide a "search all" able to look in all xml fields.
Apparently Lucene (2.4.0) does not provide such a "search all" facility, and
I have to build a query with my search field associated to all available XML
elements.

Assuming that I am searching in a address book (fictive example for
illustration) which is made of contacts (my lucene documents) containing
several fields like name, address, city, ...
 
So my search for "paul" inside my addressbook will look like:
name:paul OR address:paul OR city:paul and so on... 

Lucene will then tell me which contacts match my query, but is there a way
to know which field(s) matched the request ?
The goal is to display the XML with the matching fields highlighted.

I did not found anything like this in Lucene, so I seems that the only way
is to perform a additional search field by field...

So if I have 100 fields per document (I told you my address book was a
fictive example, the XML I am working on are a little bit more complex), and
get 100 results that I want ot display in a list, this mean that I would
need to perform 10000 additional searches request... 

Please tell me that there is a better way to do the job...
-- 
View this message in context: http://www.nabble.com/Can-Lucene-tells-which-field-matched---tp20357552p20357552.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 10:35:39 2008
Return-Path: <java-user-return-37003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60204 invoked from network); 6 Nov 2008 10:35:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 10:35:39 -0000
Received: (qmail 79656 invoked by uid 500); 6 Nov 2008 10:35:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79619 invoked by uid 500); 6 Nov 2008 10:35:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79592 invoked by uid 99); 6 Nov 2008 10:35:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 02:35:36 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [83.247.21.92] (HELO mail.local.wis.nl) (83.247.21.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Nov 2008 10:34:18 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Can Lucene tells which field matched ?
Date: Thu, 6 Nov 2008 11:34:31 +0100
Message-ID: <50CA25BD6EEA954FA592C097399942E319CF51E4@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Can Lucene tells which field matched ?
Thread-Index: Ack/8LE1XCFJB61uQs2x7ojf8mHaDwACTAHw
References: <20357552.post@talk.nabble.com>
From: "Daan de Wit" <d.de.wit@wis.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have implemented such a solution using the query explanation.
IndexSearcher has an explain(Query query, int document) method that
returns an Explanation object, on the Explanation object you can ask if
it is a match with #isMatch(). You still need to repeat this for each
found document though.

Daan

> -----Original Message-----
> From: Dora [mailto:julien.barret@gmail.com]
> Sent: donderdag 6 november 2008 10:19
> To: java-user@lucene.apache.org
> Subject: Can Lucene tells which field matched ?
>=20
>=20
> Hi
>=20
> I am new to Lucene and working on a search module for some XML data:
>=20
> I need to provide a "search all" able to look in all xml fields.
> Apparently Lucene (2.4.0) does not provide such a "search all"
facility,
> and
> I have to build a query with my search field associated to all
available
> XML
> elements.
>=20
> Assuming that I am searching in a address book (fictive example for
> illustration) which is made of contacts (my lucene documents)
containing
> several fields like name, address, city, ...
>=20
> So my search for "paul" inside my addressbook will look like:
> name:paul OR address:paul OR city:paul and so on...
>=20
> Lucene will then tell me which contacts match my query, but is there a
way
> to know which field(s) matched the request ?
> The goal is to display the XML with the matching fields highlighted.
>=20
> I did not found anything like this in Lucene, so I seems that the only
way
> is to perform a additional search field by field...
>=20
> So if I have 100 fields per document (I told you my address book was a
> fictive example, the XML I am working on are a little bit more
complex),
> and
> get 100 results that I want ot display in a list, this mean that I
would
> need to perform 10000 additional searches request...
>=20
> Please tell me that there is a better way to do the job...
> --
> View this message in context: http://www.nabble.com/Can-Lucene-tells-
> which-field-matched---tp20357552p20357552.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 10:51:21 2008
Return-Path: <java-user-return-37004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63898 invoked from network); 6 Nov 2008 10:51:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 10:51:21 -0000
Received: (qmail 97812 invoked by uid 500); 6 Nov 2008 10:51:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97787 invoked by uid 500); 6 Nov 2008 10:51:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97776 invoked by uid 99); 6 Nov 2008 10:51:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 02:51:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of francisco.borges@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 10:50:05 +0000
Received: by fg-out-1718.google.com with SMTP id l27so416950fgb.27
        for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 02:50:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=blKiRoXn8CVBFDoF35ZRSNGDuazxusKnjmKgDbbwoFM=;
        b=L5wA50TLr/fKpyNT8xXMBsem9oNBQ3aVVGEgneuDVKI3f5DzKsui+hMZdQInhgNg2Y
         ZwJ0B58QEzOwl5av/fYlFlCvoFc5xMxnxcW9rEUb4iNpQqnyiJTfX5Sbv/U58rA2dPox
         hfY6qAlMJ5ks+w9Wf2rkDKR1dEPcc4gARuvz8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=pMi1FTwlcr8IJ16NseGGlEhhLIztCicvWz20oL+v/HmtjsjNb+R74yxutoPzRKDwLT
         fMy3ukojoOtWkiEtrdDyykgUGY/zOEK1SQ6fiLOqmnlKzLI7Ij2EPb/gI6oH5hpCEQPd
         SX2zbzKOjR2STdpz39lVAZvfJeyd7QQTlaBBk=
Received: by 10.181.201.18 with SMTP id d18mr609797bkq.125.1225968646108;
        Thu, 06 Nov 2008 02:50:46 -0800 (PST)
Received: by 10.180.238.20 with HTTP; Thu, 6 Nov 2008 02:50:46 -0800 (PST)
Message-ID: <f950edef0811060250k3efb27dbkfad217fad7a36023@mail.gmail.com>
Date: Thu, 6 Nov 2008 11:50:46 +0100
From: "Francisco Borges" <francisco.borges@gmail.com>
To: java-user@lucene.apache.org
Subject: possible score value
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25287_4878832.1225968646097"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25287_4878832.1225968646097
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I have been going through the scoring documentation and code.

I had the expectation that Lucene would enforce a score value between [0,1].
But from what I can grasp from the code and docs, score values can be
greater than one.

Does Lucene considers score values greater than 1 as valid?

Kind regards,
-- 
Francisco

------=_Part_25287_4878832.1225968646097--

From java-user-return-37005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 10:57:47 2008
Return-Path: <java-user-return-37005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64847 invoked from network); 6 Nov 2008 10:57:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 10:57:47 -0000
Received: (qmail 1939 invoked by uid 500); 6 Nov 2008 10:57:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1898 invoked by uid 500); 6 Nov 2008 10:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1887 invoked by uid 99); 6 Nov 2008 10:57:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 02:57:47 -0800
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.109.255.67] (HELO mail68.messagelabs.com) (193.109.255.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Nov 2008 10:56:28 +0000
X-VirusChecked: Checked
X-Env-Sender: ulrich.vachon@vidal.fr
X-Msg-Ref: server-3.tower-68.messagelabs.com!1225968907!90215038!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [217.109.82.230]
Received: (qmail 14978 invoked from network); 6 Nov 2008 10:55:08 -0000
Received: from unknown (HELO localhost.localdomain) (217.109.82.230)
  by server-3.tower-68.messagelabs.com with SMTP; 6 Nov 2008 10:55:08 -0000
Received: from srv-exch01.france.groupe.intra (srv-exch01.france.groupe.intra [172.16.50.5])
	by localhost.localdomain (Postfix) with ESMTP id 3579637E96
	for <java-user@lucene.apache.org>; Thu,  6 Nov 2008 12:06:44 +0100 (CET)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Can Lucene tells which field matched ?
Date: Thu, 6 Nov 2008 11:55:07 +0100
Message-ID: <B652D70ACFDB7F42B79D1997ACBFBFE11C6452@srv-exch01.france.groupe.intra>
In-Reply-To: <50CA25BD6EEA954FA592C097399942E319CF51E4@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Can Lucene tells which field matched ?
Thread-Index: Ack/8LE1XCFJB61uQs2x7ojf8mHaDwACTAHwAAELyTA=
References: <20357552.post@talk.nabble.com> <50CA25BD6EEA954FA592C097399942E319CF51E4@CM1.wis.local>
From: "Ulrich Vachon" <ulrich.vachon@vidal.fr>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Daan,

Can we have an exemple of your implementation?

Thx
Ulrich VACHON=20

-----Message d'origine-----
De : Daan de Wit [mailto:d.de.wit@wis.nl]=20
Envoy=E9 : jeudi 6 novembre 2008 11:35
=C0 : java-user@lucene.apache.org
Objet : RE: Can Lucene tells which field matched ?

Hi,

I have implemented such a solution using the query explanation.
IndexSearcher has an explain(Query query, int document) method that =
returns an Explanation object, on the Explanation object you can ask if =
it is a match with #isMatch(). You still need to repeat this for each =
found document though.

Daan

> -----Original Message-----
> From: Dora [mailto:julien.barret@gmail.com]
> Sent: donderdag 6 november 2008 10:19
> To: java-user@lucene.apache.org
> Subject: Can Lucene tells which field matched ?
>=20
>=20
> Hi
>=20
> I am new to Lucene and working on a search module for some XML data:
>=20
> I need to provide a "search all" able to look in all xml fields.
> Apparently Lucene (2.4.0) does not provide such a "search all"
facility,
> and
> I have to build a query with my search field associated to all
available
> XML
> elements.
>=20
> Assuming that I am searching in a address book (fictive example for
> illustration) which is made of contacts (my lucene documents)
containing
> several fields like name, address, city, ...
>=20
> So my search for "paul" inside my addressbook will look like:
> name:paul OR address:paul OR city:paul and so on...
>=20
> Lucene will then tell me which contacts match my query, but is there a
way
> to know which field(s) matched the request ?
> The goal is to display the XML with the matching fields highlighted.
>=20
> I did not found anything like this in Lucene, so I seems that the only
way
> is to perform a additional search field by field...
>=20
> So if I have 100 fields per document (I told you my address book was a =

> fictive example, the XML I am working on are a little bit more
complex),
> and
> get 100 results that I want ot display in a list, this mean that I
would
> need to perform 10000 additional searches request...
>=20
> Please tell me that there is a better way to do the job...
> --
> View this message in context: http://www.nabble.com/Can-Lucene-tells-
> which-field-matched---tp20357552p20357552.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


______________________________________________________________________
Cet e-mail a =E9t=E9 scann=E9 par MessageLabs Email Security System.
Pour plus d'informations, visitez http://www.messagelabs.com/email =
______________________________________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 10:59:42 2008
Return-Path: <java-user-return-37006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65058 invoked from network); 6 Nov 2008 10:59:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 10:59:40 -0000
Received: (qmail 4673 invoked by uid 500); 6 Nov 2008 10:59:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4640 invoked by uid 500); 6 Nov 2008 10:59:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4629 invoked by uid 99); 6 Nov 2008 10:59:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 02:59:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 10:58:24 +0000
Received: by wf-out-1314.google.com with SMTP id 28so573585wfc.20
        for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 02:59:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=4HYvwkqtBjU8pFfwpz9kJfiQX4gEPLu+LyBQF11LgOs=;
        b=hDybAexxxqOa+X2nZ0d8L5UE7mJbeSFstdUNT6YQAWXUz6oujccAzMBXhRg0TCaYKZ
         NBUonr25BtdD6IVrgsvMwyH4gaBoC4hDtE/eHUgVJFbz7CDhC4yNxHJccBLTUnXKXkQt
         cVWRaRtR+vOHu7sfeb4c92mRd89ixPVD+EFLc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=bDpmpWjlA2OwWk8S2BhxsFpr5zGeQ98hpnVEVMA0Zh2cFkNtNySYOeze88/p/2nQ2b
         Gaytfoymu/Mng5XbE0LhsYA2IA4lBnKi2rtlG484iazyhG+Fo6nfSo+jV6pcSAVV2aHO
         1x5/FhUkax/Y2K/NZfm3gdaDSIVss1zB0UkWA=
Received: by 10.142.177.5 with SMTP id z5mr390779wfe.40.1225969145970;
        Thu, 06 Nov 2008 02:59:05 -0800 (PST)
Received: by 10.142.113.16 with HTTP; Thu, 6 Nov 2008 02:59:05 -0800 (PST)
Message-ID: <867513fe0811060259g114e2878tf0910b1d2b534335@mail.gmail.com>
Date: Thu, 6 Nov 2008 16:29:05 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: possible score value
In-Reply-To: <f950edef0811060250k3efb27dbkfad217fad7a36023@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20990_2430588.1225969145964"
References: <f950edef0811060250k3efb27dbkfad217fad7a36023@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20990_2430588.1225969145964
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Fransisco,

Did you come across :
      scoreNorm = 1.0f / topDocs.getMaxScore();
or something of this sort in Hits?
As per my knowledge, the initial score is more than 1 but finally the scores
get divided by the maxScore of the matched doc set. i.e. Setting an upper
limit of 1 (for the max scorer).
Hope this clarifies things! :)

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Thu, Nov 6, 2008 at 4:20 PM, Francisco Borges <francisco.borges@gmail.com
> wrote:

> Hello,
>
> I have been going through the scoring documentation and code.
>
> I had the expectation that Lucene would enforce a score value between
> [0,1].
> But from what I can grasp from the code and docs, score values can be
> greater than one.
>
> Does Lucene considers score values greater than 1 as valid?
>
> Kind regards,
> --
> Francisco
>

------=_Part_20990_2430588.1225969145964--

From java-user-return-37007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 11:14:23 2008
Return-Path: <java-user-return-37007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68913 invoked from network); 6 Nov 2008 11:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 11:14:23 -0000
Received: (qmail 21030 invoked by uid 500); 6 Nov 2008 11:14:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20989 invoked by uid 500); 6 Nov 2008 11:14:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20978 invoked by uid 99); 6 Nov 2008 11:14:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 03:14:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of francisco.borges@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 11:13:04 +0000
Received: by fk-out-0910.google.com with SMTP id 18so581435fkq.5
        for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 03:13:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=D9LzzDbCEip9dSEaCyLXY59CezOraezhLgc8fqP1JvA=;
        b=NYHVhMuy1oAOnLoJig9X7p7derW8/oYLkPh/YQIvfEC8ZIiz4iQWOhG2PW7CGsZNxJ
         IqBSm7Lbl1TEYgPeoZG5VIKQrVL3SeFy98GPzwLjKRhi1DKlRbO3SPiNuX+gVUFRGWU4
         qhpD52gdPuyMYniDK0Tlhzuni5T0V/UQwPoU8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Qp1VXZ5YPGSpj+WpVzNEUFaC2LAifAeIb7p2ZsmMDomhlagIrpy7XRbDY3QJ9g34aK
         Fh74cz3h4NhXE1dv0WpCOjRlpjOz9tXuu/qayswlupGTvv1xoA/D20iWkCl1dyZobiTU
         bNN/xXYAs1zf9R3hj69NeTtM3V8kVhw0Pd5Kg=
Received: by 10.181.139.10 with SMTP id r10mr624081bkn.11.1225970015559;
        Thu, 06 Nov 2008 03:13:35 -0800 (PST)
Received: by 10.180.238.20 with HTTP; Thu, 6 Nov 2008 03:13:35 -0800 (PST)
Message-ID: <f950edef0811060313teff5d3ewf7eb1bba55e68c46@mail.gmail.com>
Date: Thu, 6 Nov 2008 12:13:35 +0100
From: "Francisco Borges" <francisco.borges@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: possible score value
In-Reply-To: <867513fe0811060259g114e2878tf0910b1d2b534335@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25575_18982437.1225970015553"
References: <f950edef0811060250k3efb27dbkfad217fad7a36023@mail.gmail.com>
	 <867513fe0811060259g114e2878tf0910b1d2b534335@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25575_18982437.1225970015553
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello Anshum,

No, I hadn't seen that. I had only gone through Similarity, and Weight
classes and worked through their calculations.

Thank you very much for the clarification!

Kind regards,
Francisco

On Thu, Nov 6, 2008 at 11:59 AM, Anshum <anshumg@gmail.com> wrote:

> Hi Fransisco,
>
> Did you come across :
>      scoreNorm = 1.0f / topDocs.getMaxScore();
> or something of this sort in Hits?
> As per my knowledge, the initial score is more than 1 but finally the
> scores
> get divided by the maxScore of the matched doc set. i.e. Setting an upper
> limit of 1 (for the max scorer).
> Hope this clarifies things! :)
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Thu, Nov 6, 2008 at 4:20 PM, Francisco Borges <
> francisco.borges@gmail.com
> > wrote:
>
> > Hello,
> >
> > I have been going through the scoring documentation and code.
> >
> > I had the expectation that Lucene would enforce a score value between
> > [0,1].
> > But from what I can grasp from the code and docs, score values can be
> > greater than one.
> >
> > Does Lucene considers score values greater than 1 as valid?
> >
> > Kind regards,
> > --
> > Francisco
> >
>



-- 
Francisco

------=_Part_25575_18982437.1225970015553--

From java-user-return-37008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 12:11:41 2008
Return-Path: <java-user-return-37008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77604 invoked from network); 6 Nov 2008 12:11:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 12:11:41 -0000
Received: (qmail 60977 invoked by uid 500); 6 Nov 2008 12:11:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60949 invoked by uid 500); 6 Nov 2008 12:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60938 invoked by uid 99); 6 Nov 2008 12:11:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 04:11:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.202.226.200] (HELO gate.abas.de) (212.202.226.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 12:10:25 +0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.0/8.14.0) with ESMTP id mA6CB5xC019384
	for <java-user@lucene.apache.org>; Thu, 6 Nov 2008 13:11:05 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 5/gate.abas.de/smtp-gw/mscan; Thu Nov  6 13:11:05 2008
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: Can Lucene tells which field matched ?
Date: Thu, 6 Nov 2008 13:10:51 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <20357552.post@talk.nabble.com>
In-Reply-To: <20357552.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811061310.51669.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 06 November 2008 10:18:45 Dora wrote:

> Lucene will then tell me which contacts match my query, but is there
> a way to know which field(s) matched the request ?
> The goal is to display the XML with the matching fields highlighted.

I think org.apache.lucene.search.highlight.Highlighter will do the job.

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 13:01:16 2008
Return-Path: <java-user-return-37009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95745 invoked from network); 6 Nov 2008 13:01:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 13:01:16 -0000
Received: (qmail 20990 invoked by uid 500); 6 Nov 2008 13:01:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20755 invoked by uid 500); 6 Nov 2008 13:01:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20744 invoked by uid 99); 6 Nov 2008 13:01:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 05:01:16 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 12:59:59 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 9DA1E87135
	for <java-user@lucene.apache.org>; Thu,  6 Nov 2008 05:00:10 -0800 (PST)
Message-Id: <6DA15CC7-01F9-4DF1-AEAD-D92CAACDA9F8@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <e994873a0811040642k3d41a0feo6f89e3388492aba9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: BoostingTermQuery scoring
Date: Thu, 6 Nov 2008 08:00:08 -0500
References: <e994873a0811040642k3d41a0feo6f89e3388492aba9@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Not sure, but it sounds like you are interested in a higher level  
Query, kind of like the BooleanQuery, but then part of it sounds like  
it is per document, right?  Is it that you want to deal with multiple  
payloads in a document, or multiple BTQs in a bigger query?
On Nov 4, 2008, at 9:42 AM, Peter Keegan wrote:

> I'm using BoostingTermQuery to boost the score of documents with terms
> containing payloads (boost value > 1). I'd like to change the scoring
> behavior such that if a query contains multiple BoostingTermQuery  
> terms
> (either required or optional), documents containing more matching  
> terms with
> payloads always score higher than documents with fewer terms with  
> payloads.
> Currently, if one of the terms has a high IDF weight and contains a  
> boosting
> payload but no payloads on other matching terms, it may score higher  
> than
> docs with other matching terms with payloads and lower IDF.
>
> I think what I need is a way to increase the weight of a matching  
> term in
> BoostingSpanScorer.score() if 'payloadsSeen > 0', but I don't see  
> how to do
> this. Any suggestions?
>
> Thanks,
> Peter

--------------------------
Grant Ingersoll


Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 16:55:33 2008
Return-Path: <java-user-return-37010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10649 invoked from network); 6 Nov 2008 16:55:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 16:55:33 -0000
Received: (qmail 45498 invoked by uid 500); 6 Nov 2008 16:55:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45468 invoked by uid 500); 6 Nov 2008 16:55:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45457 invoked by uid 99); 6 Nov 2008 16:55:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 08:55:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 16:54:17 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: What does Sort.RELEVANCE do?
Date: Thu, 6 Nov 2008 11:52:46 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B4303160116@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: What does Sort.RELEVANCE do?
Thread-Index: AclAMBgAFaYJ5serRUGv3Kx3OIgkeg==
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I can specify Sort.RELEVANCE to Searcher.search as in:

hits =3D searcher.search(q, Sort.RELEVANCE); // Using deprecated method =
to
make it short

What is the real effect of specifying the Sort argument like this?

Does Sort.RELEVANCE sorts the hits in order of the score
shown in Sect. 3.3 "Understanding Lucene scoring"
of Lucene In Action? If I use the search method without
a sort argument, is it equivalent of specifying
Sort.INDEXORDER?

----
T. "Kuro" Kurosaka, Basis Technology
San Francisco, California, U.S.A.
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 17:10:00 2008
Return-Path: <java-user-return-37011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17182 invoked from network); 6 Nov 2008 17:10:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 17:10:00 -0000
Received: (qmail 68221 invoked by uid 500); 6 Nov 2008 17:10:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68190 invoked by uid 500); 6 Nov 2008 17:10:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68179 invoked by uid 99); 6 Nov 2008 17:10:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 09:10:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 17:08:44 +0000
Received: by rv-out-0506.google.com with SMTP id f6so727869rvb.5
        for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 09:09:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=Pg9hkYr5EiUsrZX+RBSqqGc3EcM2b1XNiDMF9UJYO74=;
        b=GJMeZ5LRX9iKQtj9ub1CYA5ztsJztkbyRjDqWoEiC/FgAWPRrrNjzdCRfTYqOe7nCp
         bVjLT3uInMBO+TelvMMb/Xme0frjJdPBylzyt+Zh1QV9INPAl8dbEFWFII/JA/tJ7poB
         Z8UTfEJCS2j9quBs7B8c2NkfUkJucyGDq5/LA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=UfehoQbeWjyUvaBaPyND++IMhdV5FOiuY9VCfpOILNZmRhDrWHLoquzflY4liaBrze
         0Q4CjzJ2VYK8pyPLmeC7xZkg/OwtXOhazTQyv3Lz/aVNChWCSVfSDz/cLYlnJnJa5k/Q
         R4ZXnQbTeaLh0o8tLUsSpnMKxqzIpYUNXa2l4=
Received: by 10.141.69.1 with SMTP id w1mr1315521rvk.215.1225991366811;
        Thu, 06 Nov 2008 09:09:26 -0800 (PST)
Received: by 10.141.68.16 with HTTP; Thu, 6 Nov 2008 09:09:26 -0800 (PST)
Message-ID: <5e76f3840811060909t6f172bb1r4b4d59f57579d29b@mail.gmail.com>
Date: Thu, 6 Nov 2008 12:09:26 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: "Global" Field question (thread-safe)?
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I have a use case where I want all of my documents to have - in
addition to their other fields - a  single field=value.
An example use is where I have multiple Lucene indexes that I search
in parallel, but still need to distinguish them.
Index 1: All documents have: source="a1"
Index 2: All documents have: source="a2"

This is a common use case that has previously been discussed on this list.

The particular question I have is: when I am indexing, can I create a
single Field and use it for all Documents? Note I am in a
multithreaded environment, so many Documents are created and will have
this same Field added to them, and subsequently indexed.

So are their any threading issues with this particular usage?

thanks,

Glen

-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 18:09:54 2008
Return-Path: <java-user-return-37012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61085 invoked from network); 6 Nov 2008 18:09:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 18:09:54 -0000
Received: (qmail 37486 invoked by uid 500); 6 Nov 2008 18:09:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37455 invoked by uid 500); 6 Nov 2008 18:09:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37439 invoked by uid 99); 6 Nov 2008 18:09:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 10:09:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 209.85.217.18 as permitted sender)
Received: from [209.85.217.18] (HELO mail-gx0-f18.google.com) (209.85.217.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 18:08:37 +0000
Received: by gxk11 with SMTP id 11so210414gxk.5
        for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 10:08:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=dpXmiZFLZM+FhHwvDXZzbxatzMs7FYFWBRipraggzzQ=;
        b=uAg9W25WA43GwxLfLfBkjzoBtqMlKkghvicAsNzglFzkZvi+HtaOd+N6ihDnUZ4mn9
         3Q8w2KjOkuandXX4FioyDNWe3zT89RuOzyJVga4FjKWlsEuj8YGZ5yOYiRwOLXz0rKqQ
         FKFZ0yWkxJ3Sc8z2geN3mdd3tfW6WfmRL8uMY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=UYKcrAzNu2G60JUOGeueSlLHoViSE63XyqHAxrky/+mI0T23qjE/BjfiMC+T8JRv9r
         Ch+ziA4GMAO0CVYfpGMb/AYOwxEaDn4I0kh+2jEc8O54L1xLwwrzDxxBbFT9i/3lZJUA
         1Vb7bB9GGReSEyFUBhpzsmlSU/uvaG2QgAHtU=
Received: by 10.150.181.7 with SMTP id d7mr1810489ybf.230.1225994898240;
        Thu, 06 Nov 2008 10:08:18 -0800 (PST)
Received: by 10.150.150.18 with HTTP; Thu, 6 Nov 2008 10:08:18 -0800 (PST)
Message-ID: <e994873a0811061008u7a8e4557o158ee858b696ff29@mail.gmail.com>
Date: Thu, 6 Nov 2008 13:08:18 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BoostingTermQuery scoring
In-Reply-To: <6DA15CC7-01F9-4DF1-AEAD-D92CAACDA9F8@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19466_5399028.1225994898266"
References: <e994873a0811040642k3d41a0feo6f89e3388492aba9@mail.gmail.com>
	 <6DA15CC7-01F9-4DF1-AEAD-D92CAACDA9F8@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19466_5399028.1225994898266
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Let me give some background on the problem behind my question.

Our index contains many fields (title, body, date, city, etc). Most queries
search all fields, but for best performance, we create an additional
'contents' field that contains all terms from all fields so that only one
field needs to be searched. Some fields, like title and city, are boosted by
a factor of 5. In order to make term boosting work, we create an additional
field 'boost' that contains all the terms from the boosted fields (title,
city).

Then, at search time, a query for "petroleum engineer" gets rewritten to:
(+contents:petroleum +contents:engineer) (+boost:petroleum +boost:engineer).
Note that the two clauses are OR'd so that a term that exists in both fields
will get a higher weight in the 'boost' field. This works quite well at
boosting documents with terms that exist in the boosted fields. However, it
doesn't work properly if excluded terms are added, for example:

(+contents:petroleum +contents:engineer -contents:drilling)
(+boost:petroleum +boost:engineer -boost:drilling)

If a document contains the term 'drilling' in the 'body' field, but not in
the 'title' or 'city' field, a false hit occurs.

Enter payloads and 'BoostingTermQuery'. At indexing time, as terms are added
to the 'contents' field, they are assigned a payload (value=5) if the term
also exists in one of the boosted fields. The 'scorePayload' method in our
Similarity class returns the payload value as a score. The query no longer
contains the 'boost' fields and is simply:

+contents:petroleum +contents:engineer -contents:drilling

The goal is to make the payload technique behavior similar to the 'boost'
field technique. The problem is that relevance scores of the top hits are
sometimes quite different. The reason is that the IDF values for a given
term in the 'boost' field is often much higher than the same term in the
'contents' field. This makes sense because the 'boost' field contains a
fairly small subset of the 'contents' field. Even with a payload of '5', a
low IDF in the 'contents' field usually erases the effect of the payload.

I have found a fairly simple (albeit inelegant) solution that seems to work.
The 'boost' field is still created as before, but it is only used to compute
IDF values for the weight class 'BoostingTermQuery.BoostingTermWeight. I had
to make this class 'public' so that I could override the IDF value as
follows:

public class MNSBoostingTermQuery extends BoostingTermQuery {
  public MNSBoostingTermQuery(Term term) {
    super(term);
  }
  protected class MNSBoostingTermWeight extends
BoostingTermQuery.BoostingTermWeight {
    public MNSBoostingTermWeight(BoostingTermQuery query, Searcher searcher)
throws IOException {
      super(query, searcher);
      java.util.HashSet<Term> newTerms = new java.util.HashSet<Term>();
      // Recompute IDF based on 'boost' field
      Iterator i = terms.iterator();
      Term term=null;
      while (i.hasNext()) {
        term = (Term)i.next();
        newTerms.add(new Term("boost", term.text()));
      }
      this.idf = this.query.getSimilarity(searcher).idf(newTerms, searcher);
    }
  }
}

Any thoughts about a better implementation are welcome.

Peter




On Thu, Nov 6, 2008 at 8:00 AM, Grant Ingersoll <gsingers@apache.org> wrote:

> Not sure, but it sounds like you are interested in a higher level Query,
> kind of like the BooleanQuery, but then part of it sounds like it is per
> document, right?  Is it that you want to deal with multiple payloads in a
> document, or multiple BTQs in a bigger query?
>
> On Nov 4, 2008, at 9:42 AM, Peter Keegan wrote:
>
>  I'm using BoostingTermQuery to boost the score of documents with terms
>> containing payloads (boost value > 1). I'd like to change the scoring
>> behavior such that if a query contains multiple BoostingTermQuery terms
>> (either required or optional), documents containing more matching terms
>> with
>> payloads always score higher than documents with fewer terms with
>> payloads.
>> Currently, if one of the terms has a high IDF weight and contains a
>> boosting
>> payload but no payloads on other matching terms, it may score higher than
>> docs with other matching terms with payloads and lower IDF.
>>
>> I think what I need is a way to increase the weight of a matching term in
>> BoostingSpanScorer.score() if 'payloadsSeen > 0', but I don't see how to
>> do
>> this. Any suggestions?
>>
>> Thanks,
>> Peter
>>
>
> --------------------------
> Grant Ingersoll
>
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19466_5399028.1225994898266--

From java-user-return-37013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 19:46:43 2008
Return-Path: <java-user-return-37013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96986 invoked from network); 6 Nov 2008 19:46:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 19:46:43 -0000
Received: (qmail 39327 invoked by uid 500); 6 Nov 2008 19:46:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39298 invoked by uid 500); 6 Nov 2008 19:46:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39286 invoked by uid 99); 6 Nov 2008 19:46:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 11:46:42 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.186] (HELO rn-out-0910.google.com) (64.233.170.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 19:45:24 +0000
Received: by rn-out-0910.google.com with SMTP id j71so637223rne.4
        for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 11:45:55 -0800 (PST)
Received: by 10.151.107.8 with SMTP id j8mr1964863ybm.119.1226000755122;
        Thu, 06 Nov 2008 11:45:55 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id i27sm3467239elf.4.2008.11.06.11.45.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 06 Nov 2008 11:45:54 -0800 (PST)
Message-Id: <A8520AD5-96BD-468D-B490-15FADE222C76@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <5e76f3840811060909t6f172bb1r4b4d59f57579d29b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: "Global" Field question (thread-safe)?
Date: Thu, 6 Nov 2008 14:45:52 -0500
References: <5e76f3840811060909t6f172bb1r4b4d59f57579d29b@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


The field never changes across all docs?  If so, this will work fine.

Mike

Glen Newton wrote:

> I have a use case where I want all of my documents to have - in
> addition to their other fields - a  single field=value.
> An example use is where I have multiple Lucene indexes that I search
> in parallel, but still need to distinguish them.
> Index 1: All documents have: source="a1"
> Index 2: All documents have: source="a2"
>
> This is a common use case that has previously been discussed on this  
> list.
>
> The particular question I have is: when I am indexing, can I create a
> single Field and use it for all Documents? Note I am in a
> multithreaded environment, so many Documents are created and will have
> this same Field added to them, and subsequently indexed.
>
> So are their any threading issues with this particular usage?
>
> thanks,
>
> Glen
>
> -- 
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 19:49:32 2008
Return-Path: <java-user-return-37014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97946 invoked from network); 6 Nov 2008 19:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 19:49:32 -0000
Received: (qmail 48608 invoked by uid 500); 6 Nov 2008 19:49:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48583 invoked by uid 500); 6 Nov 2008 19:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48572 invoked by uid 99); 6 Nov 2008 19:49:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 11:49:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 19:48:15 +0000
Received: by yw-out-2324.google.com with SMTP id 3so312550ywj.5
        for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 11:48:55 -0800 (PST)
Received: by 10.150.143.5 with SMTP id q5mr1962367ybd.85.1226000935688;
        Thu, 06 Nov 2008 11:48:55 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id n26sm2636548ele.19.2008.11.06.11.48.54
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 06 Nov 2008 11:48:54 -0800 (PST)
Message-Id: <C5362827-BD67-4D8B-8C73-13F76D1472EC@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B4303160116@mail3.basistech.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: What does Sort.RELEVANCE do?
Date: Thu, 6 Nov 2008 14:48:53 -0500
References: <E95FD77F0171D14DA1EEE0A785E92B4303160116@mail3.basistech.net>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Section 5.1.2 of LIA also explains this.

Sort.RELEVANCE sorts by relevance score, descending, breaking ties by  
sorting by doc ID, ascending, and s the default if you don't specify a  
sort order.

Sort.INDEXORDER sorts only by doc ID, which is not the default sort.

Mike

Teruhiko Kurosaka wrote:

> I can specify Sort.RELEVANCE to Searcher.search as in:
>
> hits = searcher.search(q, Sort.RELEVANCE); // Using deprecated  
> method to
> make it short
>
> What is the real effect of specifying the Sort argument like this?
>
> Does Sort.RELEVANCE sorts the hits in order of the score
> shown in Sect. 3.3 "Understanding Lucene scoring"
> of Lucene In Action? If I use the search method without
> a sort argument, is it equivalent of specifying
> Sort.INDEXORDER?
>
> ----
> T. "Kuro" Kurosaka, Basis Technology
> San Francisco, California, U.S.A.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 21:01:57 2008
Return-Path: <java-user-return-37015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24134 invoked from network); 6 Nov 2008 21:01:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 21:01:57 -0000
Received: (qmail 62232 invoked by uid 500); 6 Nov 2008 21:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62080 invoked by uid 500); 6 Nov 2008 21:01:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62069 invoked by uid 99); 6 Nov 2008 21:01:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 13:01:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 21:00:39 +0000
Received: by rv-out-0506.google.com with SMTP id f6so835065rvb.5
        for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 13:01:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=xtIhELlAUTPNWZIR39j4OpyoYG8mFVciNf3VTMKmTcI=;
        b=DEPrbBD5uFjNxwCtf/+b1Yq4lrh7/8J1CPxO3eJzVTvNkaMn3sjXJZ3vTnaXJdWmWX
         EQ/NC9nWug+SbqsGBHk89B3UumIIE+SCiPeLEALquWnpcBXaxOUfxvAWMXU09KnX4rnT
         Kuqc96x7/l7HPJ4+/mCnUcsD5vvkyJk8Vw3WA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=qn1q46WG/cqqOMrbBdKy/2sOGswg0QzTLi3H5jkYj+ZuObnJ0ZpLPrmHPLmvTnhxma
         3Jxv0KK/tlFFQzd4KZk5uyKIOacgqKnu0dsTAVUjddjL+Xe4PfcKFWAw5zZ9vD2f7+0p
         6O+Z0Hhu30IRXRiiAyb+lyf0Zai1AkPywYVis=
Received: by 10.140.187.10 with SMTP id k10mr1450794rvf.264.1226005281654;
        Thu, 06 Nov 2008 13:01:21 -0800 (PST)
Received: by 10.141.68.16 with HTTP; Thu, 6 Nov 2008 13:01:21 -0800 (PST)
Message-ID: <5e76f3840811061301y4cb07fa2s90b6ba5c4d03651d@mail.gmail.com>
Date: Thu, 6 Nov 2008 16:01:21 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: "Global" Field question (thread-safe)?
In-Reply-To: <A8520AD5-96BD-468D-B490-15FADE222C76@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e76f3840811060909t6f172bb1r4b4d59f57579d29b@mail.gmail.com>
	 <A8520AD5-96BD-468D-B490-15FADE222C76@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks!  :-)

2008/11/6 Michael McCandless <lucene@mikemccandless.com>:
>
> The field never changes across all docs?  If so, this will work fine.
>
> Mike
>
> Glen Newton wrote:
>
>> I have a use case where I want all of my documents to have - in
>> addition to their other fields - a  single field=value.
>> An example use is where I have multiple Lucene indexes that I search
>> in parallel, but still need to distinguish them.
>> Index 1: All documents have: source="a1"
>> Index 2: All documents have: source="a2"
>>
>> This is a common use case that has previously been discussed on this list.
>>
>> The particular question I have is: when I am indexing, can I create a
>> single Field and use it for all Documents? Note I am in a
>> multithreaded environment, so many Documents are created and will have
>> this same Field added to them, and subsequently indexed.
>>
>> So are their any threading issues with this particular usage?
>>
>> thanks,
>>
>> Glen
>>
>> --
>>
>> -
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 21:25:57 2008
Return-Path: <java-user-return-37016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32902 invoked from network); 6 Nov 2008 21:25:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 21:25:57 -0000
Received: (qmail 91050 invoked by uid 500); 6 Nov 2008 21:25:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91013 invoked by uid 500); 6 Nov 2008 21:25:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90988 invoked by uid 99); 6 Nov 2008 21:25:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 13:25:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 21:24:40 +0000
Received: by rn-out-0910.google.com with SMTP id j71so676352rne.4
        for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 13:25:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=fHJeS/kw7qMVfCJqir5NhukHAcf84LTfhC4JMh+4EV0=;
        b=pqKPVagTceVAYfPZtGX70eLathd2CFbEPJVN1HOD+d9btpVtRfCP2mAbkWPYX5CHNO
         hjabp7qjGcOgmnprnjsIUhL9DVry90msFe2VUAube4TC/tiYA8uh7UDSREGmYcsLpQVN
         3TguS5jVzLQZi2ILikCAAO5x3sJ6z8Im1bf40=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=GMV5nrgVrOkwanmbNvpRVSyYchlk097hWjuYS0gwWSGDKCDdw0I3xE6LbH2g5Z7Mkr
         rE9MKoXrV7rH2Wbj8wQy5ZHpt+a+fF2W0+Nlc60jO2yY6y5m3sOyqKUrbjv/qohccSHr
         EfULkD2KDEkO2e6i/VfWb2yPpRhzIxAoDOlcI=
Received: by 10.150.204.12 with SMTP id b12mr2110773ybg.208.1226006711523;
        Thu, 06 Nov 2008 13:25:11 -0800 (PST)
Received: by 10.150.150.18 with HTTP; Thu, 6 Nov 2008 13:25:11 -0800 (PST)
Message-ID: <e994873a0811061325ra53c6c7s7353818311178f3d@mail.gmail.com>
Date: Thu, 6 Nov 2008 16:25:11 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BoostingTermQuery scoring
In-Reply-To: <e994873a0811061008u7a8e4557o158ee858b696ff29@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21539_15122181.1226006711548"
References: <e994873a0811040642k3d41a0feo6f89e3388492aba9@mail.gmail.com>
	 <6DA15CC7-01F9-4DF1-AEAD-D92CAACDA9F8@apache.org>
	 <e994873a0811061008u7a8e4557o158ee858b696ff29@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21539_15122181.1226006711548
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I've discovered another flaw in using this technique:

(+contents:petroleum +contents:engineer +contents:refinery)
(+boost:petroleum +boost:engineer +boost:refinery)

It's possible that the first clause will produce a matching doc and none of
the terms in the second clause are used to score that doc. Yet another
reason to use BoostingTermQuery.

Peter


On Thu, Nov 6, 2008 at 1:08 PM, Peter Keegan <peterlkeegan@gmail.com> wrote:

> Let me give some background on the problem behind my question.
>
> Our index contains many fields (title, body, date, city, etc). Most queries
> search all fields, but for best performance, we create an additional
> 'contents' field that contains all terms from all fields so that only one
> field needs to be searched. Some fields, like title and city, are boosted by
> a factor of 5. In order to make term boosting work, we create an additional
> field 'boost' that contains all the terms from the boosted fields (title,
> city).
>
> Then, at search time, a query for "petroleum engineer" gets rewritten to:
> (+contents:petroleum +contents:engineer) (+boost:petroleum +boost:engineer).
> Note that the two clauses are OR'd so that a term that exists in both fields
> will get a higher weight in the 'boost' field. This works quite well at
> boosting documents with terms that exist in the boosted fields. However, it
> doesn't work properly if excluded terms are added, for example:
>
> (+contents:petroleum +contents:engineer -contents:drilling)
> (+boost:petroleum +boost:engineer -boost:drilling)
>
> If a document contains the term 'drilling' in the 'body' field, but not in
> the 'title' or 'city' field, a false hit occurs.
>
> Enter payloads and 'BoostingTermQuery'. At indexing time, as terms are
> added to the 'contents' field, they are assigned a payload (value=5) if the
> term also exists in one of the boosted fields. The 'scorePayload' method in
> our Similarity class returns the payload value as a score. The query no
> longer contains the 'boost' fields and is simply:
>
> +contents:petroleum +contents:engineer -contents:drilling
>
> The goal is to make the payload technique behavior similar to the 'boost'
> field technique. The problem is that relevance scores of the top hits are
> sometimes quite different. The reason is that the IDF values for a given
> term in the 'boost' field is often much higher than the same term in the
> 'contents' field. This makes sense because the 'boost' field contains a
> fairly small subset of the 'contents' field. Even with a payload of '5', a
> low IDF in the 'contents' field usually erases the effect of the payload.
>
> I have found a fairly simple (albeit inelegant) solution that seems to
> work. The 'boost' field is still created as before, but it is only used to
> compute IDF values for the weight class
> 'BoostingTermQuery.BoostingTermWeight. I had to make this class 'public' so
> that I could override the IDF value as follows:
>
> public class MNSBoostingTermQuery extends BoostingTermQuery {
>   public MNSBoostingTermQuery(Term term) {
>     super(term);
>   }
>   protected class MNSBoostingTermWeight extends
> BoostingTermQuery.BoostingTermWeight {
>     public MNSBoostingTermWeight(BoostingTermQuery query, Searcher
> searcher) throws IOException {
>       super(query, searcher);
>       java.util.HashSet<Term> newTerms = new java.util.HashSet<Term>();
>       // Recompute IDF based on 'boost' field
>       Iterator i = terms.iterator();
>       Term term=null;
>       while (i.hasNext()) {
>         term = (Term)i.next();
>         newTerms.add(new Term("boost", term.text()));
>       }
>       this.idf = this.query.getSimilarity(searcher).idf(newTerms,
> searcher);
>     }
>   }
> }
>
> Any thoughts about a better implementation are welcome.
>
> Peter
>
>
>
>
>
> On Thu, Nov 6, 2008 at 8:00 AM, Grant Ingersoll <gsingers@apache.org>wrote:
>
>> Not sure, but it sounds like you are interested in a higher level Query,
>> kind of like the BooleanQuery, but then part of it sounds like it is per
>> document, right?  Is it that you want to deal with multiple payloads in a
>> document, or multiple BTQs in a bigger query?
>>
>> On Nov 4, 2008, at 9:42 AM, Peter Keegan wrote:
>>
>>  I'm using BoostingTermQuery to boost the score of documents with terms
>>> containing payloads (boost value > 1). I'd like to change the scoring
>>> behavior such that if a query contains multiple BoostingTermQuery terms
>>> (either required or optional), documents containing more matching terms
>>> with
>>> payloads always score higher than documents with fewer terms with
>>> payloads.
>>> Currently, if one of the terms has a high IDF weight and contains a
>>> boosting
>>> payload but no payloads on other matching terms, it may score higher than
>>> docs with other matching terms with payloads and lower IDF.
>>>
>>> I think what I need is a way to increase the weight of a matching term in
>>> BoostingSpanScorer.score() if 'payloadsSeen > 0', but I don't see how to
>>> do
>>> this. Any suggestions?
>>>
>>> Thanks,
>>> Peter
>>>
>>
>> --------------------------
>> Grant Ingersoll
>>
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_21539_15122181.1226006711548--

From java-user-return-37017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 06 23:57:33 2008
Return-Path: <java-user-return-37017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95348 invoked from network); 6 Nov 2008 23:57:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Nov 2008 23:57:33 -0000
Received: (qmail 48876 invoked by uid 500); 6 Nov 2008 23:57:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48848 invoked by uid 500); 6 Nov 2008 23:57:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48837 invoked by uid 99); 6 Nov 2008 23:57:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 15:57:33 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.20.21] (HELO mx2.syr.edu) (128.230.20.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 23:56:15 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx2.syr.edu (8.14.3/8.14.3) with ESMTP id mA6Nuu2P031096
	for <java-user@lucene.apache.org>; Thu, 6 Nov 2008 18:56:57 -0500
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Thu, 6 Nov 2008 18:56:56 -0500
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Thu, 6 Nov 2008 18:56:57 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: BoostingTermQuery scoring
Date: Thu, 6 Nov 2008 18:56:55 -0500
Message-ID: <9294E20AED46934EA459020706463F94EF42D9@SUEXCL-02.ad.syr.edu>
In-Reply-To: <e994873a0811061008u7a8e4557o158ee858b696ff29@mail.gmail.com>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: BoostingTermQuery scoring
Thread-Index: AclAOuJOFMjarXwqRzSdZ0onir+1JgABeguA
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Nov 2008 23:56:57.0318 (UTC) FILETIME=[5A0BF060:01C9406B]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2008-11-06_11:2008-11-06,2008-11-06,2008-11-06 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Peter,

On 11/06/2008 at 4:25 PM, Peter Keegan wrote:
> I've discovered another flaw in using this technique:
>=20
> (+contents:petroleum +contents:engineer +contents:refinery)
> (+boost:petroleum +boost:engineer +boost:refinery)
>=20
> It's possible that the first clause will produce a matching
> doc and none of the terms in the second clause are used to
> score that doc. Yet another reason to use BoostingTermQuery.

I think you could address this, without BTQ, using something like:

  boost:(+petroleum +engineer +refinery)
  (+contents:(+petroleum +engineer +refinery)
   +((*:* -boost:petroleum)
     (*:* -boost:engineer)
     (*:* -boost:refinery)))

The last three lines gives you the set of documents that are missing at =
least one of the terms in the "boost" field.  The *:* thingy, indicating =
a MatchAllDocsQuery, is necessary to get all documents that don't have a =
given term; Lucene's (sub-)query document exclusion operation needs a =
non-empty set on which to operate.

On 11/06/2008 at 1:08 PM, Peter Keegan wrote:
> Then, at search time, a query for "petroleum engineer" gets rewritten
> to: (+contents:petroleum +contents:engineer) (+boost:petroleum
> +boost:engineer). Note that the two clauses are OR'd so that a term =
that
> exists in both fields will get a higher weight in the 'boost' field.
> This works quite well at boosting documents with terms that exist in =
the
> boosted fields. However, it doesn't work properly if excluded terms =
are
> added, for example:
>=20
> (+contents:petroleum +contents:engineer -contents:drilling)
> (+boost:petroleum +boost:engineer -boost:drilling)
>=20
> If a document contains the term 'drilling' in the 'body'
> field, but not in the 'title' or 'city' field, a false hit occurs.

I think you could address this problem like this:

  +(boost:(+petroleum +engineer)
    (+contents:(+petroleum +engineer)
     +((*:* -boost:petroleum)
       (*:* -boost:engineer))))
  -contents:drilling

You don't have to include "-boost:drilling", because this condition is =
entailed by "-contents:drilling".

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 00:43:50 2008
Return-Path: <java-user-return-37018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20412 invoked from network); 7 Nov 2008 00:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 00:43:49 -0000
Received: (qmail 83206 invoked by uid 500); 7 Nov 2008 00:43:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83171 invoked by uid 500); 7 Nov 2008 00:43:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83160 invoked by uid 99); 7 Nov 2008 00:43:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 16:43:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 00:42:33 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 5174C42019
	for <java-user@lucene.apache.org>; Thu,  6 Nov 2008 17:42:44 -0700 (MST)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Ylt+JnRPv9X7 for <java-user@lucene.apache.org>;
	Thu,  6 Nov 2008 17:42:38 -0700 (MST)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 414C241016
	for <java-user@lucene.apache.org>; Thu,  6 Nov 2008 17:42:38 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C94071.BBEC97BA"
Subject: Boosting results
Date: Thu, 6 Nov 2008 17:42:35 -0700
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Boosting results
Thread-Index: AclAcbo6Z5NAb/ljSZSERubdPPX3KQ==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C94071.BBEC97BA
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm interested in comments on the following problem. =20

=20

I have a set of documents.  They fall into 3 categories.  Call these
categories A, B, and C.  Each document has an indexed, non-tokenized
field called "category" which contains A, B, or C (they are mutually
exclusive categories). =20

=20

All of the documents contain a field called "body" which contains a
bunch of text.  This field is indexed and tokenized.

=20

So, I want to do a search which looks something like:

=20

(category:A OR category:B) AND body:fred

=20

I want all of the category A documents to come before the category B
documents.  Effectively, I want to have the category A documents first
(sorted by relevancy) and then the category B documents after (sorted by
relevancy).

=20

I thought I could do this by boosting the category portion of the query,
but that doesn't seem to work consistently.  I was setting the boost on
the category A term to 1.0 and the boost on the category B term to 0.0.

=20

Any thoughts how to skin this?

=20

Scott


------_=_NextPart_001_01C94071.BBEC97BA--

From java-user-return-37019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 01:00:10 2008
Return-Path: <java-user-return-37019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25106 invoked from network); 7 Nov 2008 01:00:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 01:00:07 -0000
Received: (qmail 98718 invoked by uid 500); 7 Nov 2008 01:00:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98683 invoked by uid 500); 7 Nov 2008 01:00:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98671 invoked by uid 99); 7 Nov 2008 01:00:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Nov 2008 17:00:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 00:58:50 +0000
Received: by fg-out-1718.google.com with SMTP id l27so757742fgb.27
        for <java-user@lucene.apache.org>; Thu, 06 Nov 2008 16:59:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=c1lmV0QUg3IsOiMs4fp97EfkbBNk7as9mo7PVUzijCI=;
        b=aDsyAU/OUl6U5ssjNW4Ib9p6jQgOYawX0BjY7fWKcDnEXxMSMKeNwh1MTHYLqbpbTA
         BUqZO/HaiEcPL2wucIcP8BxGGsJV6gVdRHoDtt6kaQhcD3Gu1Y+vsSKikWM+D+jiluhY
         XjtgyMMPZyfzIwPdxntNc10KAnpgym0ntMg1w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Xdm65VzsHAWMqrMnBlsqQhdLv6GabUysorVQh4HlIkMA/Z//uOkuIp8QVgaQqIY507
         myNjjZksTLFp4btt37Epj4hAPWBAr6A4wJkFP51vMZXHvVl6zwiWqrje7LAU3pddRQEa
         3Ps0FMSSDaGrvZ+z17gOWHgG+eDJ6frbOBBPM=
Received: by 10.86.9.8 with SMTP id 8mr3346491fgi.48.1226019571174;
        Thu, 06 Nov 2008 16:59:31 -0800 (PST)
Received: by 10.86.83.2 with HTTP; Thu, 6 Nov 2008 16:59:31 -0800 (PST)
Message-ID: <359a92830811061659h23288854wcecb99bace01f449@mail.gmail.com>
Date: Thu, 6 Nov 2008 19:59:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting results
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22568_20584509.1226019571138"
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22568_20584509.1226019571138
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It seems to me that the easiest thing would be to fire two queries and
then just concatenate the results

category:A AND body:fred

category:B AND body:fred


If you really, really didn't want to fire two queries, you could create
filters on category A and category B and make a couple of
passes through your results seeing if the returned documents were in
the filter, but you'd still concatenate the results. Actually in your
specific example you could make one filter on A.....

You could also consider a custom scorer that, added 1,000,000 to every
category A document.

How much were you boosting by? What happens if you boost by a very large
factor?
As in ridiculously large?

Best
Erick

On Thu, Nov 6, 2008 at 7:42 PM, Scott Smith <ssmith@mainstreamdata.com>wrote:

> I'm interested in comments on the following problem.
>
>
>
> I have a set of documents.  They fall into 3 categories.  Call these
> categories A, B, and C.  Each document has an indexed, non-tokenized
> field called "category" which contains A, B, or C (they are mutually
> exclusive categories).
>
>
>
> All of the documents contain a field called "body" which contains a
> bunch of text.  This field is indexed and tokenized.
>
>
>
> So, I want to do a search which looks something like:
>
>
>
> (category:A OR category:B) AND body:fred
>
>
>
> I want all of the category A documents to come before the category B
> documents.  Effectively, I want to have the category A documents first
> (sorted by relevancy) and then the category B documents after (sorted by
> relevancy).
>
>
>
> I thought I could do this by boosting the category portion of the query,
> but that doesn't seem to work consistently.  I was setting the boost on
> the category A term to 1.0 and the boost on the category B term to 0.0.
>
>
>
> Any thoughts how to skin this?
>
>
>
> Scott
>
>

------=_Part_22568_20584509.1226019571138--

From java-user-return-37020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 09:59:02 2008
Return-Path: <java-user-return-37020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41106 invoked from network); 7 Nov 2008 09:59:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 09:59:01 -0000
Received: (qmail 87296 invoked by uid 500); 7 Nov 2008 09:59:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87229 invoked by uid 500); 7 Nov 2008 09:59:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87218 invoked by uid 99); 7 Nov 2008 09:59:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 01:59:01 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.246] (HELO hs-out-0708.google.com) (64.233.178.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 09:57:44 +0000
Received: by hs-out-0708.google.com with SMTP id 4so478780hsl.5
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 01:58:25 -0800 (PST)
Received: by 10.150.152.17 with SMTP id z17mr3223232ybd.196.1226051904890;
        Fri, 07 Nov 2008 01:58:24 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id m71sm3299246rnd.3.2008.11.07.01.58.23
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 07 Nov 2008 01:58:23 -0800 (PST)
Message-Id: <73AB9015-EF24-4D17-BA46-246BF85739BF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830811061659h23288854wcecb99bace01f449@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Boosting results
Date: Fri, 7 Nov 2008 04:58:22 -0500
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <359a92830811061659h23288854wcecb99bace01f449@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Couldn't you just do a single Query that sorts first by category and  
second by relevance?

Mike

Erick Erickson wrote:

> It seems to me that the easiest thing would be to fire two queries and
> then just concatenate the results
>
> category:A AND body:fred
>
> category:B AND body:fred
>
>
> If you really, really didn't want to fire two queries, you could  
> create
> filters on category A and category B and make a couple of
> passes through your results seeing if the returned documents were in
> the filter, but you'd still concatenate the results. Actually in your
> specific example you could make one filter on A.....
>
> You could also consider a custom scorer that, added 1,000,000 to every
> category A document.
>
> How much were you boosting by? What happens if you boost by a very  
> large
> factor?
> As in ridiculously large?
>
> Best
> Erick
>
> On Thu, Nov 6, 2008 at 7:42 PM, Scott Smith  
> <ssmith@mainstreamdata.com>wrote:
>
>> I'm interested in comments on the following problem.
>>
>>
>>
>> I have a set of documents.  They fall into 3 categories.  Call these
>> categories A, B, and C.  Each document has an indexed, non-tokenized
>> field called "category" which contains A, B, or C (they are mutually
>> exclusive categories).
>>
>>
>>
>> All of the documents contain a field called "body" which contains a
>> bunch of text.  This field is indexed and tokenized.
>>
>>
>>
>> So, I want to do a search which looks something like:
>>
>>
>>
>> (category:A OR category:B) AND body:fred
>>
>>
>>
>> I want all of the category A documents to come before the category B
>> documents.  Effectively, I want to have the category A documents  
>> first
>> (sorted by relevancy) and then the category B documents after  
>> (sorted by
>> relevancy).
>>
>>
>>
>> I thought I could do this by boosting the category portion of the  
>> query,
>> but that doesn't seem to work consistently.  I was setting the  
>> boost on
>> the category A term to 1.0 and the boost on the category B term to  
>> 0.0.
>>
>>
>>
>> Any thoughts how to skin this?
>>
>>
>>
>> Scott
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 12:59:50 2008
Return-Path: <java-user-return-37021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99072 invoked from network); 7 Nov 2008 12:59:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 12:59:50 -0000
Received: (qmail 86085 invoked by uid 500); 7 Nov 2008 12:59:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85849 invoked by uid 500); 7 Nov 2008 12:59:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85837 invoked by uid 99); 7 Nov 2008 12:59:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 04:59:50 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 12:58:33 +0000
Received: by ug-out-1314.google.com with SMTP id c2so1316157ugf.23
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 04:59:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=xLRALtTgtJgYvVFefU0kJ33o0n3BWlhidK9buhNkm98=;
        b=OlKBk00J+pFQvLlcM3Mf6xw/HSr5bgH/z43CbB1uIw3P6fgGBuGLAKsWQh5Egxprpn
         kDY0BkXnlR7aA2u4JuuYl9//Ch4FEA9usaSrgL2bQa94bRUUVfPssM8dB9uj+5aPAFj/
         XSgzNXMKOHVofXZHFZaoDE+eHg8RrmsWgE6gs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gGZ3B5vyDBcFbjTq0nreiVq9VND1IWbpdWrdl/4jPh9IBRxH76CAMGlcFElhpx3HDe
         Zb47RlQ4qUiNJnFpKwRPdcvqSUzEhQ2Tuw3TOAYIB98K4FkEyDkfoC0RiQxaWj35pdLM
         5KMRbplXzJVgt52cKKgTBMaMh+qCNUr7kHTag=
Received: by 10.86.53.8 with SMTP id b8mr3950231fga.58.1226062744573;
        Fri, 07 Nov 2008 04:59:04 -0800 (PST)
Received: by 10.86.83.2 with HTTP; Fri, 7 Nov 2008 04:59:04 -0800 (PST)
Message-ID: <359a92830811070459k3c1d733fi3ccb3c3a7caeb361@mail.gmail.com>
Date: Fri, 7 Nov 2008 07:59:04 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting results
In-Reply-To: <73AB9015-EF24-4D17-BA46-246BF85739BF@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26809_20305608.1226062744575"
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com>
	 <359a92830811061659h23288854wcecb99bace01f449@mail.gmail.com>
	 <73AB9015-EF24-4D17-BA46-246BF85739BF@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26809_20305608.1226062744575
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

duuuuh, sorting. I absolutely love it when I overlook the obvious <G>.

Erick@ThatSlappingSoundYouHearIsMyHandAgainstMyForehead

On Fri, Nov 7, 2008 at 4:58 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Couldn't you just do a single Query that sorts first by category and second
> by relevance?
>
> Mike
>
>
> Erick Erickson wrote:
>
>  It seems to me that the easiest thing would be to fire two queries and
>> then just concatenate the results
>>
>> category:A AND body:fred
>>
>> category:B AND body:fred
>>
>>
>> If you really, really didn't want to fire two queries, you could create
>> filters on category A and category B and make a couple of
>> passes through your results seeing if the returned documents were in
>> the filter, but you'd still concatenate the results. Actually in your
>> specific example you could make one filter on A.....
>>
>> You could also consider a custom scorer that, added 1,000,000 to every
>> category A document.
>>
>> How much were you boosting by? What happens if you boost by a very large
>> factor?
>> As in ridiculously large?
>>
>> Best
>> Erick
>>
>> On Thu, Nov 6, 2008 at 7:42 PM, Scott Smith <ssmith@mainstreamdata.com
>> >wrote:
>>
>>  I'm interested in comments on the following problem.
>>>
>>>
>>>
>>> I have a set of documents.  They fall into 3 categories.  Call these
>>> categories A, B, and C.  Each document has an indexed, non-tokenized
>>> field called "category" which contains A, B, or C (they are mutually
>>> exclusive categories).
>>>
>>>
>>>
>>> All of the documents contain a field called "body" which contains a
>>> bunch of text.  This field is indexed and tokenized.
>>>
>>>
>>>
>>> So, I want to do a search which looks something like:
>>>
>>>
>>>
>>> (category:A OR category:B) AND body:fred
>>>
>>>
>>>
>>> I want all of the category A documents to come before the category B
>>> documents.  Effectively, I want to have the category A documents first
>>> (sorted by relevancy) and then the category B documents after (sorted by
>>> relevancy).
>>>
>>>
>>>
>>> I thought I could do this by boosting the category portion of the query,
>>> but that doesn't seem to work consistently.  I was setting the boost on
>>> the category A term to 1.0 and the boost on the category B term to 0.0.
>>>
>>>
>>>
>>> Any thoughts how to skin this?
>>>
>>>
>>>
>>> Scott
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26809_20305608.1226062744575--

From java-user-return-37022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 15:55:46 2008
Return-Path: <java-user-return-37022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85869 invoked from network); 7 Nov 2008 15:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 15:55:44 -0000
Received: (qmail 99588 invoked by uid 500); 7 Nov 2008 15:55:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99556 invoked by uid 500); 7 Nov 2008 15:55:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99545 invoked by uid 99); 7 Nov 2008 15:55:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 07:55:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of matthew.deloria@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 15:54:27 +0000
Received: by ey-out-2122.google.com with SMTP id 6so539664eyi.53
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 07:54:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WjFCU/NV7nmGhmMd+Tud515xggmgEsLIeBA6owPryrs=;
        b=BSQJVuETyX6OpYjRijHYam7np/xq8v3A5rqwvOSRj8EhrViVIL4FJiENozRhCL5TVF
         mgJqnYHspBsElRaLPAGmBJEMOqGHnHRUutoUKySiYrgFlik71KMU8IoEY3um/tIrKjfD
         ayiQri2TgxXaqMfElbyKEZiVla5FKd1fttZbw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=go4flNCYwMaKOwOv5ROsCMuR8PLSgksLst9+Eama6N3DaelgxX585UtJWTJuplfxaX
         AdYPs+rCFuL8JvfEtZz0LWViC7N0oocBSwAHpujKilCREzv+o1zlxIliRTBUfMmj2AQA
         DA55MzR4ugoQQ2OBMdorZEs/u+4vGqfN4wB+A=
Received: by 10.103.165.18 with SMTP id s18mr1866102muo.124.1226073298571;
        Fri, 07 Nov 2008 07:54:58 -0800 (PST)
Received: by 10.103.169.7 with HTTP; Fri, 7 Nov 2008 07:54:58 -0800 (PST)
Message-ID: <a057f2cf0811070754i35b49cc2jacbf2ac0a70cc978@mail.gmail.com>
Date: Fri, 7 Nov 2008 10:54:58 -0500
From: "Matthew DeLoria" <matthew.deloria@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting results
In-Reply-To: <359a92830811070459k3c1d733fi3ccb3c3a7caeb361@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_45574_16685334.1226073298559"
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com>
	 <359a92830811061659h23288854wcecb99bace01f449@mail.gmail.com>
	 <73AB9015-EF24-4D17-BA46-246BF85739BF@mikemccandless.com>
	 <359a92830811070459k3c1d733fi3ccb3c3a7caeb361@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_45574_16685334.1226073298559
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This actually brings up an interesting question, and something I have been
curious about.

In this case, does it make more sense to do Boosting by Category, or to do
sorting? From what I understand, Lucene sorting involves putting the
relevant fields into memory, and then executing a sort.

Is this how sorting actually works in Lucene? If so, is it even a good idea
considering the large data sets in Lucene? What would really be the
difference between sorting and boosting?

M

On Fri, Nov 7, 2008 at 7:59 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> duuuuh, sorting. I absolutely love it when I overlook the obvious <G>.
>
> Erick@ThatSlappingSoundYouHearIsMyHandAgainstMyForehead
>
> On Fri, Nov 7, 2008 at 4:58 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
> >
> > Couldn't you just do a single Query that sorts first by category and
> second
> > by relevance?
> >
> > Mike
> >
> >
> > Erick Erickson wrote:
> >
> >  It seems to me that the easiest thing would be to fire two queries and
> >> then just concatenate the results
> >>
> >> category:A AND body:fred
> >>
> >> category:B AND body:fred
> >>
> >>
> >> If you really, really didn't want to fire two queries, you could create
> >> filters on category A and category B and make a couple of
> >> passes through your results seeing if the returned documents were in
> >> the filter, but you'd still concatenate the results. Actually in your
> >> specific example you could make one filter on A.....
> >>
> >> You could also consider a custom scorer that, added 1,000,000 to every
> >> category A document.
> >>
> >> How much were you boosting by? What happens if you boost by a very large
> >> factor?
> >> As in ridiculously large?
> >>
> >> Best
> >> Erick
> >>
> >> On Thu, Nov 6, 2008 at 7:42 PM, Scott Smith <ssmith@mainstreamdata.com
> >> >wrote:
> >>
> >>  I'm interested in comments on the following problem.
> >>>
> >>>
> >>>
> >>> I have a set of documents.  They fall into 3 categories.  Call these
> >>> categories A, B, and C.  Each document has an indexed, non-tokenized
> >>> field called "category" which contains A, B, or C (they are mutually
> >>> exclusive categories).
> >>>
> >>>
> >>>
> >>> All of the documents contain a field called "body" which contains a
> >>> bunch of text.  This field is indexed and tokenized.
> >>>
> >>>
> >>>
> >>> So, I want to do a search which looks something like:
> >>>
> >>>
> >>>
> >>> (category:A OR category:B) AND body:fred
> >>>
> >>>
> >>>
> >>> I want all of the category A documents to come before the category B
> >>> documents.  Effectively, I want to have the category A documents first
> >>> (sorted by relevancy) and then the category B documents after (sorted
> by
> >>> relevancy).
> >>>
> >>>
> >>>
> >>> I thought I could do this by boosting the category portion of the
> query,
> >>> but that doesn't seem to work consistently.  I was setting the boost on
> >>> the category A term to 1.0 and the boost on the category B term to 0.0.
> >>>
> >>>
> >>>
> >>> Any thoughts how to skin this?
> >>>
> >>>
> >>>
> >>> Scott
> >>>
> >>>
> >>>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



-- 
Matthew P. DeLoria
matthew.deloria@gmail.com

------=_Part_45574_16685334.1226073298559--

From java-user-return-37023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 16:18:17 2008
Return-Path: <java-user-return-37023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94992 invoked from network); 7 Nov 2008 16:18:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 16:18:17 -0000
Received: (qmail 30312 invoked by uid 500); 7 Nov 2008 16:18:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30283 invoked by uid 500); 7 Nov 2008 16:18:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30272 invoked by uid 99); 7 Nov 2008 16:18:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 08:18:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ssmith@mainstreamdata.com designates 209.63.42.201 as permitted sender)
Received: from [209.63.42.201] (HELO nexus1.mainstreamdata.com) (209.63.42.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 16:17:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id A767127015
	for <java-user@lucene.apache.org>; Fri,  7 Nov 2008 09:17:11 -0700 (MST)
X-Virus-Scanned: Debian amavisd-new at nexus1.mainstreamdata.com
Received: from nexus1.mainstreamdata.com ([127.0.0.1])
	by localhost (nexus1.mainstreamdata.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id lSAY8mVF9EbN for <java-user@lucene.apache.org>;
	Fri,  7 Nov 2008 09:17:05 -0700 (MST)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by nexus1.mainstreamdata.com (Postfix) with ESMTP id 7070027010
	for <java-user@lucene.apache.org>; Fri,  7 Nov 2008 09:17:05 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Boosting results
Date: Fri, 7 Nov 2008 09:17:04 -0700
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB403C1D322@exchange.slc.mainstreamdata.com>
In-Reply-To: <359a92830811070459k3c1d733fi3ccb3c3a7caeb361@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Boosting results
Thread-Index: AclA2Ly+8MQbEtEBS1mBpzyV16s9+AAFpHqw
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <359a92830811061659h23288854wcecb99bace01f449@mail.gmail.com> <73AB9015-EF24-4D17-BA46-246BF85739BF@mikemccandless.com> <359a92830811070459k3c1d733fi3ccb3c3a7caeb361@mail.gmail.com>
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Well, it's not like sorting hadn't occurred to me.  Unfortunately, what
I recalled was that you could only sort results on one field (I do date
sorted searches all the time in my application).  I should have gone
back and looked.  My memory failed me as I can see that you can sort on
multiple fields and "score" (aka relevancy) is one of the pseudo fields.
That'll work.

Thanks.

Scott

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Friday, November 07, 2008 5:59 AM
To: java-user@lucene.apache.org
Subject: Re: Boosting results

duuuuh, sorting. I absolutely love it when I overlook the obvious <G>.

Erick@ThatSlappingSoundYouHearIsMyHandAgainstMyForehead

On Fri, Nov 7, 2008 at 4:58 AM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Couldn't you just do a single Query that sorts first by category and
second
> by relevance?
>
> Mike
>
>
> Erick Erickson wrote:
>
>  It seems to me that the easiest thing would be to fire two queries
and
>> then just concatenate the results
>>
>> category:A AND body:fred
>>
>> category:B AND body:fred
>>
>>
>> If you really, really didn't want to fire two queries, you could
create
>> filters on category A and category B and make a couple of
>> passes through your results seeing if the returned documents were in
>> the filter, but you'd still concatenate the results. Actually in your
>> specific example you could make one filter on A.....
>>
>> You could also consider a custom scorer that, added 1,000,000 to
every
>> category A document.
>>
>> How much were you boosting by? What happens if you boost by a very
large
>> factor?
>> As in ridiculously large?
>>
>> Best
>> Erick
>>
>> On Thu, Nov 6, 2008 at 7:42 PM, Scott Smith
<ssmith@mainstreamdata.com
>> >wrote:
>>
>>  I'm interested in comments on the following problem.
>>>
>>>
>>>
>>> I have a set of documents.  They fall into 3 categories.  Call these
>>> categories A, B, and C.  Each document has an indexed, non-tokenized
>>> field called "category" which contains A, B, or C (they are mutually
>>> exclusive categories).
>>>
>>>
>>>
>>> All of the documents contain a field called "body" which contains a
>>> bunch of text.  This field is indexed and tokenized.
>>>
>>>
>>>
>>> So, I want to do a search which looks something like:
>>>
>>>
>>>
>>> (category:A OR category:B) AND body:fred
>>>
>>>
>>>
>>> I want all of the category A documents to come before the category B
>>> documents.  Effectively, I want to have the category A documents
first
>>> (sorted by relevancy) and then the category B documents after
(sorted by
>>> relevancy).
>>>
>>>
>>>
>>> I thought I could do this by boosting the category portion of the
query,
>>> but that doesn't seem to work consistently.  I was setting the boost
on
>>> the category A term to 1.0 and the boost on the category B term to
0.0.
>>>
>>>
>>>
>>> Any thoughts how to skin this?
>>>
>>>
>>>
>>> Scott
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 17:47:02 2008
Return-Path: <java-user-return-37024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54049 invoked from network); 7 Nov 2008 17:47:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 17:47:02 -0000
Received: (qmail 63392 invoked by uid 500); 7 Nov 2008 17:47:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63365 invoked by uid 500); 7 Nov 2008 17:47:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63354 invoked by uid 99); 7 Nov 2008 17:47:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 09:47:02 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 17:45:43 +0000
Received: by yx-out-2324.google.com with SMTP id 3so530386yxj.5
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 09:46:24 -0800 (PST)
Received: by 10.65.54.9 with SMTP id g9mr4281304qbk.28.1226079983944;
        Fri, 07 Nov 2008 09:46:23 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id s12sm5990265qbs.9.2008.11.07.09.46.19
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 07 Nov 2008 09:46:20 -0800 (PST)
Message-Id: <C6710C8E-2574-49B2-BE94-C5F6C3FD7BA6@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <a057f2cf0811070754i35b49cc2jacbf2ac0a70cc978@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Boosting results
Date: Fri, 7 Nov 2008 12:46:17 -0500
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <359a92830811061659h23288854wcecb99bace01f449@mail.gmail.com> <73AB9015-EF24-4D17-BA46-246BF85739BF@mikemccandless.com> <359a92830811070459k3c1d733fi3ccb3c3a7caeb361@mail.gmail.com> <a057f2cf0811070754i35b49cc2jacbf2ac0a70cc978@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


This is a good point.

Sorting populates the field cache (internal to Lucene) for that field,  
meaning it loads all values for all docs and holds them in memory.   
This makes the first query slow, and, consumes RAM, in proportion to  
how large your index is.

Whereas boosting should be able to achieve the use case without these  
limitations.

Mike

Matthew DeLoria wrote:

> This actually brings up an interesting question, and something I  
> have been
> curious about.
>
> In this case, does it make more sense to do Boosting by Category, or  
> to do
> sorting? From what I understand, Lucene sorting involves putting the
> relevant fields into memory, and then executing a sort.
>
> Is this how sorting actually works in Lucene? If so, is it even a  
> good idea
> considering the large data sets in Lucene? What would really be the
> difference between sorting and boosting?
>
> M
>
> On Fri, Nov 7, 2008 at 7:59 AM, Erick Erickson <erickerickson@gmail.com 
> >wrote:
>
>> duuuuh, sorting. I absolutely love it when I overlook the obvious  
>> <G>.
>>
>> Erick@ThatSlappingSoundYouHearIsMyHandAgainstMyForehead
>>
>> On Fri, Nov 7, 2008 at 4:58 AM, Michael McCandless <
>> lucene@mikemccandless.com> wrote:
>>
>>>
>>> Couldn't you just do a single Query that sorts first by category and
>> second
>>> by relevance?
>>>
>>> Mike
>>>
>>>
>>> Erick Erickson wrote:
>>>
>>> It seems to me that the easiest thing would be to fire two queries  
>>> and
>>>> then just concatenate the results
>>>>
>>>> category:A AND body:fred
>>>>
>>>> category:B AND body:fred
>>>>
>>>>
>>>> If you really, really didn't want to fire two queries, you could  
>>>> create
>>>> filters on category A and category B and make a couple of
>>>> passes through your results seeing if the returned documents were  
>>>> in
>>>> the filter, but you'd still concatenate the results. Actually in  
>>>> your
>>>> specific example you could make one filter on A.....
>>>>
>>>> You could also consider a custom scorer that, added 1,000,000 to  
>>>> every
>>>> category A document.
>>>>
>>>> How much were you boosting by? What happens if you boost by a  
>>>> very large
>>>> factor?
>>>> As in ridiculously large?
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Thu, Nov 6, 2008 at 7:42 PM, Scott Smith <ssmith@mainstreamdata.com
>>>>> wrote:
>>>>
>>>> I'm interested in comments on the following problem.
>>>>>
>>>>>
>>>>>
>>>>> I have a set of documents.  They fall into 3 categories.  Call  
>>>>> these
>>>>> categories A, B, and C.  Each document has an indexed, non- 
>>>>> tokenized
>>>>> field called "category" which contains A, B, or C (they are  
>>>>> mutually
>>>>> exclusive categories).
>>>>>
>>>>>
>>>>>
>>>>> All of the documents contain a field called "body" which  
>>>>> contains a
>>>>> bunch of text.  This field is indexed and tokenized.
>>>>>
>>>>>
>>>>>
>>>>> So, I want to do a search which looks something like:
>>>>>
>>>>>
>>>>>
>>>>> (category:A OR category:B) AND body:fred
>>>>>
>>>>>
>>>>>
>>>>> I want all of the category A documents to come before the  
>>>>> category B
>>>>> documents.  Effectively, I want to have the category A documents  
>>>>> first
>>>>> (sorted by relevancy) and then the category B documents after  
>>>>> (sorted
>> by
>>>>> relevancy).
>>>>>
>>>>>
>>>>>
>>>>> I thought I could do this by boosting the category portion of the
>> query,
>>>>> but that doesn't seem to work consistently.  I was setting the  
>>>>> boost on
>>>>> the category A term to 1.0 and the boost on the category B term  
>>>>> to 0.0.
>>>>>
>>>>>
>>>>>
>>>>> Any thoughts how to skin this?
>>>>>
>>>>>
>>>>>
>>>>> Scott
>>>>>
>>>>>
>>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>
>
>
> -- 
> Matthew P. DeLoria
> matthew.deloria@gmail.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 17:53:31 2008
Return-Path: <java-user-return-37025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58369 invoked from network); 7 Nov 2008 17:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 17:53:31 -0000
Received: (qmail 76581 invoked by uid 500); 7 Nov 2008 17:53:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76547 invoked by uid 500); 7 Nov 2008 17:53:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76536 invoked by uid 99); 7 Nov 2008 17:53:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 09:53:31 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 131.246.120.220 is neither permitted nor denied by domain of christian.reuschling@gmail.com)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 17:52:13 +0000
Received: from dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id mA7HqmtY009178
	for <java-user@lucene.apache.org>; Fri, 7 Nov 2008 18:52:48 +0100
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id mA7Hqm7O007453
	for <java-user@lucene.apache.org>; Fri, 7 Nov 2008 18:52:48 +0100 (CET)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id mA7Hql4h017811
	for <java-user@lucene.apache.org>; Fri, 7 Nov 2008 18:52:48 +0100 (CET)
Message-ID: <49148062.1090307@gmail.com>
Date: Fri, 07 Nov 2008 18:52:34 +0100
From: Christian Reuschling <christian.reuschling@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080922)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: term offsets wrong depending on analyzer
X-Enigmail-Version: 0.95.7
OpenPGP: id=AF96660F;
	url=hkp://wwwkeys.eu.pgp.net
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig5B30323C95FFD3D212C95A15"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig5B30323C95FFD3D212C95A15
Content-Type: multipart/mixed;
 boundary="------------040509020001070905010103"

This is a multi-part message in MIME format.
--------------040509020001070905010103
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hi Guys,

I currently have a bug of wrong term offset values for fields analyzed
with KeywordAnalyzer (and also unanalyzed fields, whereby I assume that
the code may be the same)

The offset of a field seems to be incremented by the entry length of the
previously analyzed field.

I had a look into the code of KeywordAnalyzer - and have seen it don't se=
ts
the offsets in any case. I wrote my own Analyzer based on KeywordAnalyzer=

and added the two lines

            reusableToken.setStartOffset(0);
            reusableToken.setEndOffset(upto);

inside KeywordTokenizer.next(..). It seems to work now (at least the one =
scenario
with the KeywordAnalyzer)

I created a snippet that reproduce both situations, see attachement.

This snippet also demonstrates another bug I found for term offsets accor=
ding
to fields with multiple values. According to the Analyzer, several letter=
s will
recognized as delimiter for Tokenization. In the case these delimiters ar=
e at
the end of the first value inside a field, the offsets of all following f=
ield
values are decremented by the count of these delimiters.. it seems the of=
fset
calculation forgets them.

This makes highlighting of hits from values up to the second one impossib=
le.
Currently I have a workaround where I count the Analyzer-specific delimit=
ers at
the end of all values, and adjust the offsets given from Lucene with thes=
e. It
works, but isn't nice of course.

These situations appear with the current 2.4RC2


I hope this will help a little, greetings


Christian Reuschling

--------------040509020001070905010103
Content-Type: text/x-java;
 name="TestAnalyzers.java"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline;
 filename="TestAnalyzers.java"

package org.dynaq;

import org.apache.lucene.analysis.KeywordAnalyzer;
import org.apache.lucene.analysis.PerFieldAnalyzerWrapper;
import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.TermPositionVector;
import org.apache.lucene.index.TermVectorOffsetInfo;
import org.apache.lucene.store.FSDirectory;

public class TestAnalyzers
{
   =20
    public static void main(String[] args) throws Exception
    {
        String strIndexPath =3D "/home/reuschling/test";
        String strOurTestFieldAnalyzed =3D "ourTestField_analyzed";
        String strOurTestFieldUnanalyzed =3D "ourTestField_unanalyzed";
        String strOurTestField2Tokenize =3D "ourTestField_2tokenize";



        //First we write in a field with value length 4 - twice, each ana=
lyzed and unanalyzed

        PerFieldAnalyzerWrapper analyzer =3D new PerFieldAnalyzerWrapper(=
new KeywordAnalyzer());
        analyzer.addAnalyzer(strOurTestField2Tokenize, new WhitespaceAnal=
yzer());
        IndexWriter writer =3D new IndexWriter(strIndexPath, analyzer, tr=
ue, IndexWriter.MaxFieldLength.UNLIMITED);

        Document doc =3D new Document();

        Field field2AddAnalyzed =3D
                new Field(strOurTestFieldAnalyzed, "four", Field.Store.YE=
S, Field.Index.ANALYZED, Field.TermVector.WITH_POSITIONS_OFFSETS);
        doc.add(field2AddAnalyzed);
        doc.add(field2AddAnalyzed);

        Field field2AddUnanalyzed =3D
                new Field(strOurTestFieldUnanalyzed, "four", Field.Store.=
YES, Field.Index.NOT_ANALYZED, Field.TermVector.WITH_POSITIONS_OFFSETS);
        doc.add(field2AddUnanalyzed);
        doc.add(field2AddUnanalyzed);

        //note that there are trailing whitespaces
        Field field2AddTokenized =3D
                new Field(strOurTestField2Tokenize, "1 2     ", Field.Sto=
re.YES, Field.Index.ANALYZED,
                        Field.TermVector.WITH_POSITIONS_OFFSETS);
        doc.add(field2AddTokenized);
        doc.add(field2AddTokenized);



        writer.addDocument(doc);

        writer.commit();
        writer.close();

        //Now we read out the calculated term offsets
        IndexReader reader =3D IndexReader.open(FSDirectory.getDirectory(=
strIndexPath), true);

        System.out.println("Analyzed. Field value(twice) \"four\". Someth=
ing appears, Offsets are not set inside KeywordAnalyzer.");

        TermPositionVector termPositionVector =3D (TermPositionVector) re=
ader.getTermFreqVector(0, strOurTestFieldAnalyzed);

        TermVectorOffsetInfo[] termOffsets =3D termPositionVector.getOffs=
ets(0);
        int[] termPositions =3D termPositionVector.getTermPositions(0);


        for (int iTermPosIndex =3D 0; iTermPosIndex < termPositions.lengt=
h; iTermPosIndex++)
        {
            System.out.println("TermPosition: " + termPositions[iTermPosI=
ndex]);
            System.out.println("TermOffset: " + termOffsets[iTermPosIndex=
].getStartOffset() + "-" + termOffsets[iTermPosIndex].getEndOffset());
        }

       =20
        System.out.println("\nUnanalyzed. Field value(twice) \"four\". It=
 seems the first value is calculated twice for the second one.");

        termPositionVector =3D (TermPositionVector) reader.getTermFreqVec=
tor(0, strOurTestFieldUnanalyzed);

        termOffsets =3D termPositionVector.getOffsets(0);
        termPositions =3D termPositionVector.getTermPositions(0);


        for (int iTermPosIndex =3D 0; iTermPosIndex < termPositions.lengt=
h; iTermPosIndex++)
        {
            System.out.println("TermPosition: " + termPositions[iTermPosI=
ndex]);
            System.out.println("TermOffset: " + termOffsets[iTermPosIndex=
].getStartOffset() + "-" + termOffsets[iTermPosIndex].getEndOffset());
        }

       =20
        System.out.println("\nTokenized with ending delimiter letters. Fi=
eld value (twice): \"1 2     \"\nThese are the offsets for \"1\" (whitesp=
aceanalyzer as example)");

        termPositionVector =3D (TermPositionVector) reader.getTermFreqVec=
tor(0, strOurTestField2Tokenize);

        termOffsets =3D termPositionVector.getOffsets(0);
        termPositions =3D termPositionVector.getTermPositions(0);


        for (int iTermPosIndex =3D 0; iTermPosIndex < termPositions.lengt=
h; iTermPosIndex++)
        {
            System.out.println("TermPosition: " + termPositions[iTermPosI=
ndex]);
            System.out.println("TermOffset: " + termOffsets[iTermPosIndex=
].getStartOffset() + "-" + termOffsets[iTermPosIndex].getEndOffset());
        }

       =20
        reader.close();

    }
   =20

}

--------------040509020001070905010103--

--------------enig5B30323C95FFD3D212C95A15
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)
Comment: Using GnuPG with SUSE - http://enigmail.mozdev.org

iEYEARECAAYFAkkUgG8ACgkQ6EqMXq+WZg9hEwCfb7rZpPqHjaF2c4HQapagVNjQ
hp8An0Y8ozdMrcGYtmw4PyaCdCufJ356
=pFhX
-----END PGP SIGNATURE-----

--------------enig5B30323C95FFD3D212C95A15--

From java-user-return-37026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 18:00:33 2008
Return-Path: <java-user-return-37026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62850 invoked from network); 7 Nov 2008 18:00:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 18:00:32 -0000
Received: (qmail 90924 invoked by uid 500); 7 Nov 2008 18:00:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90895 invoked by uid 500); 7 Nov 2008 18:00:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90884 invoked by uid 99); 7 Nov 2008 18:00:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 10:00:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 17:59:15 +0000
Received: by yx-out-2324.google.com with SMTP id 3so533352yxj.5
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 09:59:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=HT0akWg4O7f+NjKXZERe+dd30HpK7RL6Q0UoZ07q0S0=;
        b=GqoyTwcEp9fK0KeqwZgwfHx8a3jPzxd/GN+i79SgpbaI9Y612h/Ny6H7jZXYFNYeab
         6GR5dOxv8OZt6MKnBkgsUa7BUdT3Q0+1Ht1z0VrYhvYH7sNxYiMOgpABu7HwZSIkEHk5
         fY/NREXphBMb06hlZWFbIzVeNjX9bSHr7GUm8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pR8MtIqwGxmhTyFlk0Dsd1UiqK48vPPEyc50JZHgQl1cN2iDM5TQPfHEZyaYOuug2s
         SmFK2odwcy77CszK5Xr14NNZG5MyTymYB9uT/1LHcMZLD2zcoi1QAW9EJgcDj2raZHE0
         /CXrruUYcfFipKggVw7oeFpG06btsIXUl438k=
Received: by 10.150.140.16 with SMTP id n16mr3930104ybd.144.1226080787463;
        Fri, 07 Nov 2008 09:59:47 -0800 (PST)
Received: by 10.150.150.18 with HTTP; Fri, 7 Nov 2008 09:59:47 -0800 (PST)
Message-ID: <e994873a0811070959m526c19fcrb9469ed78062df5f@mail.gmail.com>
Date: Fri, 7 Nov 2008 12:59:47 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting results
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB403C1D322@exchange.slc.mainstreamdata.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31145_6845186.1226080787465"
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com>
	 <359a92830811061659h23288854wcecb99bace01f449@mail.gmail.com>
	 <73AB9015-EF24-4D17-BA46-246BF85739BF@mikemccandless.com>
	 <359a92830811070459k3c1d733fi3ccb3c3a7caeb361@mail.gmail.com>
	 <55F9EF953014514EB6BEE1F5198CEEB403C1D322@exchange.slc.mainstreamdata.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31145_6845186.1226080787465
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you sort first by score, keep in mind that the raw scores are very
precise and you could see many unique values in the result set. The
secondary sort field would only be used to break equal scores. We had to use
a custom comparator to 'smooth out' the scores to allow the second field to
take effect.

Peter


On Fri, Nov 7, 2008 at 11:17 AM, Scott Smith <ssmith@mainstreamdata.com>wrote:

> Well, it's not like sorting hadn't occurred to me.  Unfortunately, what
> I recalled was that you could only sort results on one field (I do date
> sorted searches all the time in my application).  I should have gone
> back and looked.  My memory failed me as I can see that you can sort on
> multiple fields and "score" (aka relevancy) is one of the pseudo fields.
> That'll work.
>
> Thanks.
>
> Scott
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: Friday, November 07, 2008 5:59 AM
> To: java-user@lucene.apache.org
> Subject: Re: Boosting results
>
> duuuuh, sorting. I absolutely love it when I overlook the obvious <G>.
>
> Erick@ThatSlappingSoundYouHearIsMyHandAgainstMyForehead
>
> On Fri, Nov 7, 2008 at 4:58 AM, Michael McCandless <
> lucene@mikemccandless.com> wrote:
>
> >
> > Couldn't you just do a single Query that sorts first by category and
> second
> > by relevance?
> >
> > Mike
> >
> >
> > Erick Erickson wrote:
> >
> >  It seems to me that the easiest thing would be to fire two queries
> and
> >> then just concatenate the results
> >>
> >> category:A AND body:fred
> >>
> >> category:B AND body:fred
> >>
> >>
> >> If you really, really didn't want to fire two queries, you could
> create
> >> filters on category A and category B and make a couple of
> >> passes through your results seeing if the returned documents were in
> >> the filter, but you'd still concatenate the results. Actually in your
> >> specific example you could make one filter on A.....
> >>
> >> You could also consider a custom scorer that, added 1,000,000 to
> every
> >> category A document.
> >>
> >> How much were you boosting by? What happens if you boost by a very
> large
> >> factor?
> >> As in ridiculously large?
> >>
> >> Best
> >> Erick
> >>
> >> On Thu, Nov 6, 2008 at 7:42 PM, Scott Smith
> <ssmith@mainstreamdata.com
> >> >wrote:
> >>
> >>  I'm interested in comments on the following problem.
> >>>
> >>>
> >>>
> >>> I have a set of documents.  They fall into 3 categories.  Call these
> >>> categories A, B, and C.  Each document has an indexed, non-tokenized
> >>> field called "category" which contains A, B, or C (they are mutually
> >>> exclusive categories).
> >>>
> >>>
> >>>
> >>> All of the documents contain a field called "body" which contains a
> >>> bunch of text.  This field is indexed and tokenized.
> >>>
> >>>
> >>>
> >>> So, I want to do a search which looks something like:
> >>>
> >>>
> >>>
> >>> (category:A OR category:B) AND body:fred
> >>>
> >>>
> >>>
> >>> I want all of the category A documents to come before the category B
> >>> documents.  Effectively, I want to have the category A documents
> first
> >>> (sorted by relevancy) and then the category B documents after
> (sorted by
> >>> relevancy).
> >>>
> >>>
> >>>
> >>> I thought I could do this by boosting the category portion of the
> query,
> >>> but that doesn't seem to work consistently.  I was setting the boost
> on
> >>> the category A term to 1.0 and the boost on the category B term to
> 0.0.
> >>>
> >>>
> >>>
> >>> Any thoughts how to skin this?
> >>>
> >>>
> >>>
> >>> Scott
> >>>
> >>>
> >>>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31145_6845186.1226080787465--

From java-user-return-37027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 18:33:10 2008
Return-Path: <java-user-return-37027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88335 invoked from network); 7 Nov 2008 18:33:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 18:33:10 -0000
Received: (qmail 49297 invoked by uid 500); 7 Nov 2008 18:33:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49270 invoked by uid 500); 7 Nov 2008 18:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49255 invoked by uid 99); 7 Nov 2008 18:33:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 10:33:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 18:31:52 +0000
Received: by yx-out-2324.google.com with SMTP id 3so540938yxj.5
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 10:32:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=0UpjqHpPKfHpuw7gx1/hdLig85VDkt2WmmnM5nXofV4=;
        b=dDP87qiz698TEVgfajewWWU2zMN/FWAplwKqIJC8PY5LMI3IyDmTWOi/E5EWkfJ2eN
         qiVQZPVAEYSMA0EnRWWVJvKK7HlA7NYSpTFTb47u9TtyUnQR23ieIrrLObr5Uyo0G7kl
         wK2Woc9J4sIFw5DyTwsAWJkn4GLHhUiD4QD/w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=xjTVMgpGfgzC45p+pl1L5a21eH1CVC721nD9rlUQq71LWNzlCrl/8+S6ovaVlTIZju
         jgz9L7F0P2Y0jjkZH5jLZ5F3nSMLOBUm6oMmD5yO0azczodqsq4O3kn+RwlWMJI8NbZI
         g29lkAfWAPywaikRJpBygaVybS2Hom0aVEnKc=
Received: by 10.151.149.14 with SMTP id b14mr3984936ybo.113.1226082744456;
        Fri, 07 Nov 2008 10:32:24 -0800 (PST)
Received: by 10.150.150.18 with HTTP; Fri, 7 Nov 2008 10:32:24 -0800 (PST)
Message-ID: <e994873a0811071032p3f0549afvf9827b0542a4dc55@mail.gmail.com>
Date: Fri, 7 Nov 2008 13:32:24 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BoostingTermQuery scoring
In-Reply-To: <9294E20AED46934EA459020706463F94EF42D9@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31301_21408605.1226082744462"
References: <e994873a0811061008u7a8e4557o158ee858b696ff29@mail.gmail.com>
	 <9294E20AED46934EA459020706463F94EF42D9@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_31301_21408605.1226082744462
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 boost:(+petroleum +engineer +refinery)
 (+contents:(+petroleum +engineer +refinery)
  +((*:* -boost:petroleum)
    (*:* -boost:engineer)
    (*:* -boost:refinery)))

That's an interesting solution. Would this result in many more documents
being visited by the scorer, possibly impacting performance? (I haven't
tried it yet).

Thanks,
Peter



On Thu, Nov 6, 2008 at 6:56 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hi Peter,
>
> On 11/06/2008 at 4:25 PM, Peter Keegan wrote:
> > I've discovered another flaw in using this technique:
> >
> > (+contents:petroleum +contents:engineer +contents:refinery)
> > (+boost:petroleum +boost:engineer +boost:refinery)
> >
> > It's possible that the first clause will produce a matching
> > doc and none of the terms in the second clause are used to
> > score that doc. Yet another reason to use BoostingTermQuery.
>
> I think you could address this, without BTQ, using something like:
>
>  boost:(+petroleum +engineer +refinery)
>  (+contents:(+petroleum +engineer +refinery)
>   +((*:* -boost:petroleum)
>     (*:* -boost:engineer)
>     (*:* -boost:refinery)))
>
> The last three lines gives you the set of documents that are missing at
> least one of the terms in the "boost" field.  The *:* thingy, indicating a
> MatchAllDocsQuery, is necessary to get all documents that don't have a given
> term; Lucene's (sub-)query document exclusion operation needs a non-empty
> set on which to operate.
>
> On 11/06/2008 at 1:08 PM, Peter Keegan wrote:
> > Then, at search time, a query for "petroleum engineer" gets rewritten
> > to: (+contents:petroleum +contents:engineer) (+boost:petroleum
> > +boost:engineer). Note that the two clauses are OR'd so that a term that
> > exists in both fields will get a higher weight in the 'boost' field.
> > This works quite well at boosting documents with terms that exist in the
> > boosted fields. However, it doesn't work properly if excluded terms are
> > added, for example:
> >
> > (+contents:petroleum +contents:engineer -contents:drilling)
> > (+boost:petroleum +boost:engineer -boost:drilling)
> >
> > If a document contains the term 'drilling' in the 'body'
> > field, but not in the 'title' or 'city' field, a false hit occurs.
>
> I think you could address this problem like this:
>
>  +(boost:(+petroleum +engineer)
>    (+contents:(+petroleum +engineer)
>     +((*:* -boost:petroleum)
>       (*:* -boost:engineer))))
>  -contents:drilling
>
> You don't have to include "-boost:drilling", because this condition is
> entailed by "-contents:drilling".
>
> Steve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_31301_21408605.1226082744462--

From java-user-return-37028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 19:04:18 2008
Return-Path: <java-user-return-37028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 614 invoked from network); 7 Nov 2008 19:04:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 19:04:17 -0000
Received: (qmail 94510 invoked by uid 500); 7 Nov 2008 19:04:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94471 invoked by uid 500); 7 Nov 2008 19:04:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94460 invoked by uid 99); 7 Nov 2008 19:04:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 11:04:17 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 19:02:59 +0000
Received: by qw-out-2122.google.com with SMTP id 5so776790qwi.53
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 11:03:40 -0800 (PST)
Received: by 10.214.242.4 with SMTP id p4mr4536355qah.252.1226084620593;
        Fri, 07 Nov 2008 11:03:40 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm1330065qwk.1.2008.11.07.11.03.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 07 Nov 2008 11:03:39 -0800 (PST)
Message-Id: <A55FF337-E86E-42D9-8EFC-4A5356F6C8A8@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <49148062.1090307@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: term offsets wrong depending on analyzer
Date: Fri, 7 Nov 2008 14:03:37 -0500
References: <49148062.1090307@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for raising these!

For the 1st issue (KeywordTokenizer fails to set start/end offset on
its token), I think we add your two lines to fix it.  I'll open an
issue for this.

The 2nd issue (if same field name has more than one NOT_ANALYZED
instance in a doc then the offsets are double counted).  This is a
real issue, newly introduced in 2.4 (I think).  I'll open an issue &
fix it.

The 3rd issue (the last skipped chars of an analyzed string field are
skipped when computing offsets) is trickier... another example (raised
in a past thread) is if the StopFilter filters out some token(s) on
the end, then the offsets are skipped as well.  I think to fix this
one we really should introduce a new method "getEndOffset()" into
TokenStream to provide the right end offset.  For back-compat, maybe
the default impl should return -1 which means "use the end offset of
the last token"?  I'll open an issue for this one too.

Mike

Christian Reuschling wrote:

> Hi Guys,
>
> I currently have a bug of wrong term offset values for fields analyzed
> with KeywordAnalyzer (and also unanalyzed fields, whereby I assume  
> that
> the code may be the same)
>
> The offset of a field seems to be incremented by the entry length of  
> the
> previously analyzed field.
>
> I had a look into the code of KeywordAnalyzer - and have seen it  
> don't sets
> the offsets in any case. I wrote my own Analyzer based on  
> KeywordAnalyzer
> and added the two lines
>
>            reusableToken.setStartOffset(0);
>            reusableToken.setEndOffset(upto);
>
> inside KeywordTokenizer.next(..). It seems to work now (at least the  
> one scenario
> with the KeywordAnalyzer)
>
> I created a snippet that reproduce both situations, see attachement.
>
> This snippet also demonstrates another bug I found for term offsets  
> according
> to fields with multiple values. According to the Analyzer, several  
> letters will
> recognized as delimiter for Tokenization. In the case these  
> delimiters are at
> the end of the first value inside a field, the offsets of all  
> following field
> values are decremented by the count of these delimiters.. it seems  
> the offset
> calculation forgets them.
>
> This makes highlighting of hits from values up to the second one  
> impossible.
> Currently I have a workaround where I count the Analyzer-specific  
> delimiters at
> the end of all values, and adjust the offsets given from Lucene with  
> these. It
> works, but isn't nice of course.
>
> These situations appear with the current 2.4RC2
>
>
> I hope this will help a little, greetings
>
>
> Christian Reuschling
> package org.dynaq;
>
> import org.apache.lucene.analysis.KeywordAnalyzer;
> import org.apache.lucene.analysis.PerFieldAnalyzerWrapper;
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.TermPositionVector;
> import org.apache.lucene.index.TermVectorOffsetInfo;
> import org.apache.lucene.store.FSDirectory;
>
> public class TestAnalyzers
> {
>
>    public static void main(String[] args) throws Exception
>    {
>        String strIndexPath = "/home/reuschling/test";
>        String strOurTestFieldAnalyzed = "ourTestField_analyzed";
>        String strOurTestFieldUnanalyzed = "ourTestField_unanalyzed";
>        String strOurTestField2Tokenize = "ourTestField_2tokenize";
>
>
>
>        //First we write in a field with value length 4 - twice, each  
> analyzed and unanalyzed
>
>        PerFieldAnalyzerWrapper analyzer = new  
> PerFieldAnalyzerWrapper(new KeywordAnalyzer());
>        analyzer.addAnalyzer(strOurTestField2Tokenize, new  
> WhitespaceAnalyzer());
>        IndexWriter writer = new IndexWriter(strIndexPath, analyzer,  
> true, IndexWriter.MaxFieldLength.UNLIMITED);
>
>        Document doc = new Document();
>
>        Field field2AddAnalyzed =
>                new Field(strOurTestFieldAnalyzed, "four",  
> Field.Store.YES, Field.Index.ANALYZED,  
> Field.TermVector.WITH_POSITIONS_OFFSETS);
>        doc.add(field2AddAnalyzed);
>        doc.add(field2AddAnalyzed);
>
>        Field field2AddUnanalyzed =
>                new Field(strOurTestFieldUnanalyzed, "four",  
> Field.Store.YES, Field.Index.NOT_ANALYZED,  
> Field.TermVector.WITH_POSITIONS_OFFSETS);
>        doc.add(field2AddUnanalyzed);
>        doc.add(field2AddUnanalyzed);
>
>        //note that there are trailing whitespaces
>        Field field2AddTokenized =
>                new Field(strOurTestField2Tokenize, "1 2     ",  
> Field.Store.YES, Field.Index.ANALYZED,
>                        Field.TermVector.WITH_POSITIONS_OFFSETS);
>        doc.add(field2AddTokenized);
>        doc.add(field2AddTokenized);
>
>
>
>        writer.addDocument(doc);
>
>        writer.commit();
>        writer.close();
>
>        //Now we read out the calculated term offsets
>        IndexReader reader =  
> IndexReader.open(FSDirectory.getDirectory(strIndexPath), true);
>
>        System.out.println("Analyzed. Field value(twice) \"four\".  
> Something appears, Offsets are not set inside KeywordAnalyzer.");
>
>        TermPositionVector termPositionVector = (TermPositionVector)  
> reader.getTermFreqVector(0, strOurTestFieldAnalyzed);
>
>        TermVectorOffsetInfo[] termOffsets =  
> termPositionVector.getOffsets(0);
>        int[] termPositions = termPositionVector.getTermPositions(0);
>
>
>        for (int iTermPosIndex = 0; iTermPosIndex <  
> termPositions.length; iTermPosIndex++)
>        {
>            System.out.println("TermPosition: " +  
> termPositions[iTermPosIndex]);
>            System.out.println("TermOffset: " +  
> termOffsets[iTermPosIndex].getStartOffset() + "-" +  
> termOffsets[iTermPosIndex].getEndOffset());
>        }
>
>
>        System.out.println("\nUnanalyzed. Field value(twice) \"four 
> \". It seems the first value is calculated twice for the second  
> one.");
>
>        termPositionVector = (TermPositionVector)  
> reader.getTermFreqVector(0, strOurTestFieldUnanalyzed);
>
>        termOffsets = termPositionVector.getOffsets(0);
>        termPositions = termPositionVector.getTermPositions(0);
>
>
>        for (int iTermPosIndex = 0; iTermPosIndex <  
> termPositions.length; iTermPosIndex++)
>        {
>            System.out.println("TermPosition: " +  
> termPositions[iTermPosIndex]);
>            System.out.println("TermOffset: " +  
> termOffsets[iTermPosIndex].getStartOffset() + "-" +  
> termOffsets[iTermPosIndex].getEndOffset());
>        }
>
>
>        System.out.println("\nTokenized with ending delimiter  
> letters. Field value (twice): \"1 2     \"\nThese are the offsets  
> for \"1\" (whitespaceanalyzer as example)");
>
>        termPositionVector = (TermPositionVector)  
> reader.getTermFreqVector(0, strOurTestField2Tokenize);
>
>        termOffsets = termPositionVector.getOffsets(0);
>        termPositions = termPositionVector.getTermPositions(0);
>
>
>        for (int iTermPosIndex = 0; iTermPosIndex <  
> termPositions.length; iTermPosIndex++)
>        {
>            System.out.println("TermPosition: " +  
> termPositions[iTermPosIndex]);
>            System.out.println("TermOffset: " +  
> termOffsets[iTermPosIndex].getStartOffset() + "-" +  
> termOffsets[iTermPosIndex].getEndOffset());
>        }
>
>
>        reader.close();
>
>    }
>
>
> }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 20:29:24 2008
Return-Path: <java-user-return-37029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31009 invoked from network); 7 Nov 2008 20:29:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 20:29:24 -0000
Received: (qmail 92969 invoked by uid 500); 7 Nov 2008 20:29:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92938 invoked by uid 500); 7 Nov 2008 20:29:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92927 invoked by uid 99); 7 Nov 2008 20:29:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 12:29:24 -0800
X-ASF-Spam-Status: No, hits=4.5 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,HTML_MESSAGE,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.1.38 as permitted sender)
Received: from [64.18.1.38] (HELO psmtp.com) (64.18.1.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 07 Nov 2008 20:28:05 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by exprod6ob117.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSRSkckD2cp9BeuOckA9HzyZcHBySOD6q@postini.com; Fri, 07 Nov 2008 12:28:47 PST
Received: from d01smtp06.Mi8.com ([172.16.1.239]) by Outbound01.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 7 Nov 2008 15:26:25 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by d01smtp06.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 7 Nov 2008 15:26:25 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.104]) with Microsoft Exchange Server HTTP-DAV ;
 Fri,  7 Nov 2008 20:26:25 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Fri, 07 Nov 2008 12:26:22 -0800
Subject: Term numbering and range filtering
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C539E46E.1195%tsturge@hi5.com>
Thread-Topic: Term numbering and range filtering
Thread-Index: AclBFxk5NF04ic85dUu977IUyCu9IA==
Mime-version: 1.0
Content-type: multipart/alternative;
	boundary="B_3308905583_123885350"
X-OriginalArrivalTime: 07 Nov 2008 20:26:25.0635 (UTC) FILETIME=[1B63D330:01C94117]
X-Virus-Checked: Checked by ClamAV on apache.org

--B_3308905583_123885350
Content-type: text/plain;
	charset="ISO-8859-1"
Content-transfer-encoding: quoted-printable

Hi,

I=B9m wondering if there is any easy technique to number the terms in an inde=
x
(By number I mean map a sequence of terms to a contiguous range of integers
and map terms to these numbers efficiently)

Looking at the Term class and the .tis/.tii index format it appears that th=
e
terms are stored in an ordered and prefix-compressed format, but while ther=
e
are pointers from a term to the .frq and .prx files, neither is really
suitable as a sequence number.

The reason I have this question is that I am writing a multi-filter for
single term fields. My index contains many fields for which each document
contains a single term (e.g. date, zipcode, country) and I need to perform
range queries or set matches over these fields, many of which are very
inclusive (they match >10% of the total documents)

A cached RangeFilter works well when there are a small number of potential
options (e.g. for countries) but when there are many options (consider a
date range or a set of zipcodes) there are too many potential choices to
cache each possibility and it is too inefficient to build a filter on the
fly for each query (as you have to visit 10% of documents to build the
filter despite the query itself matching 0.1%)

Therefore I was considering building a int[reader.maxDocs()] array for each
field and putting into it the term number for each document. This relies on
the fact that each document contains only a single term for this field, but
with it I should be able to quickly construct a =B3multi-filter=B2 (that is,
something that iterates the array and checks that the term is in the range
or set).

Right now it looks like I can do some very ugly surgery and perhaps use the
offset to the prx file even though it is not contiguous. But I=B9m hoping
there is a better technique that I=B9m just not seeing right now.

Thanks,

Tim

--B_3308905583_123885350--


From java-user-return-37030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 21:28:12 2008
Return-Path: <java-user-return-37030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53039 invoked from network); 7 Nov 2008 21:28:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 21:28:12 -0000
Received: (qmail 60031 invoked by uid 500); 7 Nov 2008 21:28:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59998 invoked by uid 500); 7 Nov 2008 21:28:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59987 invoked by uid 99); 7 Nov 2008 21:28:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 13:28:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chadmichaeldavis@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 21:26:56 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1672355fkq.5
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 13:27:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=99O00DSfsLyxMJLzWqeMs34pVeirpxP7NPROWvQ9o3Y=;
        b=tt6y5i4XWmu3R11K2hM2KciB58qpnTUKWo+F8mANNwiDtVdKgCZsKI+PcMrIbEIsPK
         dmiODofAOJhr4RYvu6l3AvpN3GUUJl5tj5C3/BZDmL97/HEhafdhm+6w9GsdUUWzflsD
         dY7IxIVXvWzmxf5LwS5RiA9nbr4i+ImYs9tdM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=x1B8TZwTdWO6z8j+X68GSMoPuZWwFN0pYx41dObrj7RjswkW4MmogHO4BPsaZh4KGI
         0pA7nwSw8oOsrT8PPEv46uGwVM6bTnVf+nUarsI5UzS1S2l2wxARASmf/MF7rzxZxYqG
         uR8kyBhhlFDYB6IkSGdJ6v1eH9xUTi2rchB9Y=
Received: by 10.187.179.19 with SMTP id g19mr840565fap.49.1226093258125;
        Fri, 07 Nov 2008 13:27:38 -0800 (PST)
Received: by 10.187.190.19 with HTTP; Fri, 7 Nov 2008 13:27:38 -0800 (PST)
Message-ID: <4fe4c4f50811071327w770f50c2r20fccf9f6b529ebc@mail.gmail.com>
Date: Fri, 7 Nov 2008 14:27:38 -0700
From: ChadDavis <chadmichaeldavis@gmail.com>
To: java-user@lucene.apache.org
Subject: searchable archives
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46651_25640025.1226093258112"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46651_25640025.1226093258112
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey,

Is this list available somewhere that you can search the entire archives at
one time?

Thanks,
Chad

------=_Part_46651_25640025.1226093258112--

From java-user-return-37031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 21:33:52 2008
Return-Path: <java-user-return-37031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59448 invoked from network); 7 Nov 2008 21:33:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 21:33:52 -0000
Received: (qmail 69555 invoked by uid 500); 7 Nov 2008 21:33:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69280 invoked by uid 500); 7 Nov 2008 21:33:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69265 invoked by uid 99); 7 Nov 2008 21:33:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 13:33:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.111.84 as permitted sender)
Received: from [65.55.111.84] (HELO blu0-omc2-s9.blu0.hotmail.com) (65.55.111.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 21:32:31 +0000
Received: from BLU149-W19 ([65.55.111.72]) by blu0-omc2-s9.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 7 Nov 2008 13:33:13 -0800
Message-ID: <BLU149-W19A520BD29DE8BFEB1B17BB9190@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_84589dff-16d0-4ae0-b3fb-f20de139ea66_"
X-Originating-IP: [137.103.1.90]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: searchable archives
Date: Fri, 7 Nov 2008 16:33:13 -0500
Importance: Normal
In-Reply-To: <4fe4c4f50811071327w770f50c2r20fccf9f6b529ebc@mail.gmail.com>
References: <4fe4c4f50811071327w770f50c2r20fccf9f6b529ebc@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 07 Nov 2008 21:33:13.0049 (UTC) FILETIME=[6FFEAC90:01C94120]
X-Virus-Checked: Checked by ClamAV on apache.org

--_84589dff-16d0-4ae0-b3fb-f20de139ea66_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


http://www.gossamer-threads.com/lists/lucene/java-user/

> Date: Fri=2C 7 Nov 2008 14:27:38 -0700
> From: chadmichaeldavis@gmail.com
> To: java-user@lucene.apache.org
> Subject: searchable archives
>=20
> Hey=2C
>=20
> Is this list available somewhere that you can search the entire archives =
at
> one time?
>=20
> Thanks=2C
> Chad

_________________________________________________________________
Stay up to date on your PC=2C the Web=2C and your mobile phone with Windows=
 Live
http://clk.atdmt.com/MRT/go/119462413/direct/01/=

--_84589dff-16d0-4ae0-b3fb-f20de139ea66_--

From java-user-return-37032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 21:36:55 2008
Return-Path: <java-user-return-37032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60751 invoked from network); 7 Nov 2008 21:36:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 21:36:54 -0000
Received: (qmail 75444 invoked by uid 500); 7 Nov 2008 21:36:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75419 invoked by uid 500); 7 Nov 2008 21:36:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75408 invoked by uid 99); 7 Nov 2008 21:36:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 13:36:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chadmichaeldavis@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 21:35:37 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1214398fgb.27
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 13:36:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=PDPDUKHL4IK0m97LeXse/lFdnFoTMWylkO+bPu+xx9U=;
        b=seyO+kPMHBQInXwgSssYzh7KUVBmmI7t/aWoKs6eHispGZtGKUUTrgekQW3IFPmjr6
         9eW00E41r+2e8HDkw1favInY1R9wCd0hoTTPUZkLvJ474x7J0GLGoA9S75daK351UiQL
         qXeComGg5Pv38oxKGVLaVWiMReiOBQn0HOMk8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=B0ejrJm4ICY2WIgkMDNVGJCqnRNQ5xlgzHcuMP57HQwgOvS1+6FOTYZdbr/wgBUUtr
         kMhQAzmzOSPpdKOKYcK9Z8KDP9TkToc7qqU/UBYEWLNVz82+/3VIzulCwr9gHwozlhpJ
         sS0V9pT71YjYAvIkMXeLUXK+v9NP6lrMI4h5E=
Received: by 10.187.183.7 with SMTP id k7mr843812fap.43.1226093778537;
        Fri, 07 Nov 2008 13:36:18 -0800 (PST)
Received: by 10.187.190.19 with HTTP; Fri, 7 Nov 2008 13:36:18 -0800 (PST)
Message-ID: <4fe4c4f50811071336h4e4ecffaqccb7c3efb64d8bb8@mail.gmail.com>
Date: Fri, 7 Nov 2008 14:36:18 -0700
From: ChadDavis <chadmichaeldavis@gmail.com>
To: java-user@lucene.apache.org
Subject: Store versus Index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46807_22783495.1226093778529"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46807_22783495.1226093778529
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I just need a little confirmation of my understanding here.

If i say that a field is to be stored, the entire thing is written to the
index.  It might also be indexed in a tokenized fasion if i also specify
that.

What are the advantages to storing a field then?
So you can search for that field?
Just so you can retrieve that field's value when you get a hit on the
document via another field?

Also along thes lines, if i don't "store" a field, can I still do my search
based upon that field?

------=_Part_46807_22783495.1226093778529--

From java-user-return-37033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 21:39:39 2008
Return-Path: <java-user-return-37033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64227 invoked from network); 7 Nov 2008 21:39:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 21:39:38 -0000
Received: (qmail 83584 invoked by uid 500); 7 Nov 2008 21:39:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83326 invoked by uid 500); 7 Nov 2008 21:39:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83315 invoked by uid 99); 7 Nov 2008 21:39:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 13:39:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chadmichaeldavis@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 21:38:22 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1683283fkq.5
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 13:38:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=yw/eeyTlqyyXetGbZXmj6giyL3HbtiHtxKsnaAZEAZk=;
        b=wfRLnC0kL7QoqCWtiJ1UklOwVDFZHxFAoNyh7OV8vv6V2QX61fqqhIVZYmUj6rRhNc
         fo4GgQXWjlIjcVkX7w0HbQxF24Y2RXGemFUxNc4wUnITYJ2Rx5mSNm6dGvQjplcfLxSy
         XjcFZ+DM5BXxfQmukl7qlhIvAbxCtUMGnPaqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=tXnepQnGincK8CXCULOYCm3mkIl4hGfhJq9/IPXE0Gt8IcVymHvOft40r3kcZ+jFok
         MoAPDJXx8iKKbrFh8qUvYpaA+8bgpb1x0zYTn6JaaS+F7UdsJ0d8ATXY1XKPRHSYd7dI
         +8QhkGE9A3FdodCPy9DOJr/EvM2o7xQw50ILY=
Received: by 10.187.173.6 with SMTP id a6mr838863fap.83.1226093934157;
        Fri, 07 Nov 2008 13:38:54 -0800 (PST)
Received: by 10.187.190.19 with HTTP; Fri, 7 Nov 2008 13:38:54 -0800 (PST)
Message-ID: <4fe4c4f50811071338y798b52adi10489fd865a23fe9@mail.gmail.com>
Date: Fri, 7 Nov 2008 14:38:54 -0700
From: ChadDavis <chadmichaeldavis@gmail.com>
To: java-user@lucene.apache.org
Subject: changes
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46848_7070259.1226093934156"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46848_7070259.1226093934156
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm upgrading from a very old version of lucene to 2.4  I tried to research
all the possible changes, this included reading the change file from the 2.4
version, which appears to reach back through all of the versions.  However,
I'm finding major API changes that aren't documented in that file.  For
example, Field.Keyword() is gone.  Shouldn't I find this in that change log?

------=_Part_46848_7070259.1226093934156--

From java-user-return-37034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 22:12:06 2008
Return-Path: <java-user-return-37034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91028 invoked from network); 7 Nov 2008 22:12:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 22:12:06 -0000
Received: (qmail 48801 invoked by uid 500); 7 Nov 2008 22:12:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48764 invoked by uid 500); 7 Nov 2008 22:12:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48753 invoked by uid 99); 7 Nov 2008 22:12:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 14:12:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 22:10:46 +0000
Received: by qw-out-2122.google.com with SMTP id 5so834161qwi.53
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 14:11:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=22u83gRZ7/9ujnCmsCxxs+o/W+qz0qRzHf2Dt4kSXaA=;
        b=uBaYFiwF/dJpHkpxISPUBHRZI1LDLjJBflZETAIbS77jsiJY4M2/1uJ92XX+AIb6cL
         LlzNWSqb5fIFlxYMplG5MEgJ/5eguCqw2LP1UeB334fLa0pGPXB4vOD4tAiPmJRwxVLT
         CC43rKT/+9nArQEWOI0AZCBTx3xRMjSWi/6n0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=TeV2XPRfJQfCvoxspt6gF7GCWLDB75vuYbQf4Jhk/RGUd2lF79iAxzek70vy0nonKs
         zZHbOVDZIdFcxzbWeSmHWnclihYCj4hDRIf1hhw5zzgWZsXfdWBe1s6yl7CsQMr7XXJY
         wuhG+FeFZyHyAEFSCDqXOgIcvr065oRZzmHXQ=
Received: by 10.214.182.15 with SMTP id e15mr4829296qaf.314.1226095888543;
        Fri, 07 Nov 2008 14:11:28 -0800 (PST)
Received: from ?10.18.141.7? ([32.160.195.228])
        by mx.google.com with ESMTPS id 6sm4501652ywp.3.2008.11.07.14.11.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 07 Nov 2008 14:11:27 -0800 (PST)
Message-Id: <EEC76FA9-DB55-42BA-A2FC-C1B59DD2D1BA@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <BLU149-W19A520BD29DE8BFEB1B17BB9190@phx.gbl>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5F136)
Mime-Version: 1.0 (iPhone Mail 5F136)
Subject: Re: searchable archives
Date: Fri, 7 Nov 2008 16:11:18 -0600
References: <4fe4c4f50811071327w770f50c2r20fccf9f6b529ebc@mail.gmail.com> <BLU149-W19A520BD29DE8BFEB1B17BB9190@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

Or nabble or markmail


- Mark


On Nov 7, 2008, at 3:33 PM, Dragon Fly <dragon-fly999@hotmail.com>  
wrote:

>
> http://www.gossamer-threads.com/lists/lucene/java-user/
>
>> Date: Fri, 7 Nov 2008 14:27:38 -0700
>> From: chadmichaeldavis@gmail.com
>> To: java-user@lucene.apache.org
>> Subject: searchable archives
>>
>> Hey,
>>
>> Is this list available somewhere that you can search the entire  
>> archives at
>> one time?
>>
>> Thanks,
>> Chad
>
> _________________________________________________________________
> Stay up to date on your PC, the Web, and your mobile phone with  
> Windows Live
> http://clk.atdmt.com/MRT/go/119462413/direct/01/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 07 22:15:19 2008
Return-Path: <java-user-return-37035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92677 invoked from network); 7 Nov 2008 22:15:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Nov 2008 22:15:18 -0000
Received: (qmail 52603 invoked by uid 500); 7 Nov 2008 22:15:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52561 invoked by uid 500); 7 Nov 2008 22:15:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52545 invoked by uid 99); 7 Nov 2008 22:15:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 14:15:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 22:14:01 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1361493rvb.5
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 14:14:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=TYrSgHBM4Wqfm6nl4DSEOK+2VQzZ7YapqBQq82679fI=;
        b=QSIj1HpDiU1WB0EwXJNzl2LjLHWHuZsDeXjc491QAYiqnjd6OYqRlI9DmwA4EYnOpU
         FK/Phsu8db6zD+wuSulJrenD2NBS+pDprXFWALaMRX09+lcVC/M8S4HMjDIGBBuMwLhy
         g3IerYhYYKUlAp//pCVovZ63apfCepDAOx9CM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=lg3gsgXU1uZxsFtdFGK7RhNGHmPsshDVOxjnHjCxfURYjstmx7Fzmk9J29kpohe5Kq
         jhmgGz8Mo2ys+Bnpxg72uwqEDsqEYoSuGvhTQ/i84SWu6HxTJa9dAZyIBiWlXBnAWVXZ
         OAkdmcpCRwC7bx+llhoW7L3kU7URiCLgsiUbA=
Received: by 10.140.141.16 with SMTP id o16mr2045222rvd.138.1226096074226;
        Fri, 07 Nov 2008 14:14:34 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Fri, 7 Nov 2008 14:14:34 -0800 (PST)
Message-ID: <c68e39170811071414s2656d0d2h85d275216cae448c@mail.gmail.com>
Date: Fri, 7 Nov 2008 17:14:34 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Store versus Index
In-Reply-To: <4fe4c4f50811071336h4e4ecffaqccb7c3efb64d8bb8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4fe4c4f50811071336h4e4ecffaqccb7c3efb64d8bb8@mail.gmail.com>
X-Google-Sender-Auth: e2a26079b1748017
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Nov 7, 2008 at 4:36 PM, ChadDavis <chadmichaeldavis@gmail.com> wrote:
> I just need a little confirmation of my understanding here.
>
> If i say that a field is to be stored, the entire thing is written to the
> index.  It might also be indexed in a tokenized fasion if i also specify
> that.

Right.

> What are the advantages to storing a field then?
> So you can search for that field?

Only if it is indexed.... it has nothing to do with it being stored.

> Just so you can retrieve that field's value when you get a hit on the
> document via another field?

Correct.

> Also along thes lines, if i don't "store" a field, can I still do my search
> based upon that field?

Yes.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 01:05:15 2008
Return-Path: <java-user-return-37036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58548 invoked from network); 8 Nov 2008 01:05:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 01:05:14 -0000
Received: (qmail 87441 invoked by uid 500); 8 Nov 2008 01:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87419 invoked by uid 500); 8 Nov 2008 01:05:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87408 invoked by uid 99); 8 Nov 2008 01:05:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 17:05:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.239 as permitted sender)
Received: from [209.85.198.239] (HELO rv-out-0506.google.com) (209.85.198.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 01:03:56 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1430769rvb.5
        for <java-user@lucene.apache.org>; Fri, 07 Nov 2008 17:04:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:x-mailer:mime-version:content-type
         :content-transfer-encoding;
        bh=USddUas6begSa4idbplAtWSuJ0PmbYcsKNiBCMlm8BI=;
        b=GrHxhNIy8lSQj2GcDDASeJmI/HUbbGVQaSMHzp+2TpjlMiI3HZCV84zjzj0/Qx4Z+3
         GpCsxou5iDs88PZzOGqnc+5bCx+0kJvrFgQ/m/2YIk4ewa7TjOmQSa0rhJ+jjav9p1Pc
         NGkEGtRK0maNIhwmRG7xjuI4MJoKsvntGc99M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:x-mailer:mime-version:content-type
         :content-transfer-encoding;
        b=qjoJs+W0IGRFLBdC4O/zoc/GqW0yM8l5n/9mjHLuifkbQa1kCo3B1HXHhkj47EPvdM
         00uxgKG6v44C0RQwODOhtUJu2og4f3tl1dLZbi2DuWtoBiybPK9ni9BPuhEVHFEZyJJG
         KPm5H6yWHFb6UPsD7WjK27xZtvUh2ynGddjjw=
Received: by 10.140.164.1 with SMTP id m1mr2115272rve.212.1226106268993;
        Fri, 07 Nov 2008 17:04:28 -0800 (PST)
Received: from zim ([189.107.137.13])
        by mx.google.com with ESMTPS id f21sm10690327rvb.5.2008.11.07.17.04.26
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 07 Nov 2008 17:04:28 -0800 (PST)
Date: Fri, 7 Nov 2008 23:04:16 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene and JSP
Message-Id: <20081107230416.4ca466cb.almeidaraf@gmail.com>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I'm writing my first JSP application, so this may be too much of a
newbie question, in which case I hope you can refer me to documentation
which can help me out.

How do I keep only one IndexSearcher open for all the searches on my
website?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 04:41:57 2008
Return-Path: <java-user-return-37037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27168 invoked from network); 8 Nov 2008 04:41:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 04:41:57 -0000
Received: (qmail 86681 invoked by uid 500); 8 Nov 2008 04:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86646 invoked by uid 500); 8 Nov 2008 04:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86635 invoked by uid 99); 8 Nov 2008 04:41:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Nov 2008 20:41:56 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 04:40:37 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KyfdP-0001Cf-5m
	for java-user@lucene.apache.org; Fri, 07 Nov 2008 20:41:19 -0800
Message-ID: <20392978.post@talk.nabble.com>
Date: Fri, 7 Nov 2008 20:41:19 -0800 (PST)
From: lamino <yalamino@yahoo.fr>
To: java-user@lucene.apache.org
Subject: Strange behaviour of FrenchAnalyzer when using accents
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: yalamino@yahoo.fr
X-Virus-Checked: Checked by ClamAV on apache.org


Greetings,

I'm getting a strange behaviour when using the FrenchAnalyzer.

Calling the same class (Searcher.java, see below) from a JSP file and from =
a
Java class, gives differents results when the query contains accents !

Notice the different value of the query object :

q =3D "secr=C3=A9taire"

If calling from main.jsp  query =3D text:secr=C3=A9tair
If calling from main.java query =3D text:secretair


Source code (Search.java, Main.jsp, Main.java) :

public void search() {

        String q =3D "secr=C3=A9taire";
        String indexDirectory =3D "c:\\temp\\accent\\index2";
  =20
        try {
            IndexSearcher searcher =3D new IndexSearcher(indexDirectory);
            QueryParser parser =3D new QueryParser("text", new
FrenchAnalyzer());
            Query query =3D parser.parse(q);
            Hits hits =3D searcher.search(query);
          =20
            System.out.println(query);
          =20
        =20
            System.out.println("Results for  '" + q + "': " +
hits.length());
          =20
            Iterator iter =3D hits.iterator();
            while (iter.hasNext()) {
                Hit hit =3D (Hit) iter.next();
                Document doc =3D hit.getDocument();
            }
          =20
        } catch (Exception e) {
        }
  =20
    }=20

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3DMain.jsp=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

<%           =20
            Search s =3D new Search();                                     =
                  =20
            s.search();      =20
%>

OUPUT :
text:secr=C3=A9tair
Results for  'secr=C3=A9taire': 0


=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3DMain.java=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


public class Main {
  =20
    public static void main(String[] args) {                               =
                   =20
 =20
        Search s =3D new Search();        =20
        s.search();
          =20
    }          =20
}

OUTPUT :=20
text:secretair
Results for  'secr=C3=A9taire': 1

I will appreciate your help, thank you in advance.

Lamine

--=20
View this message in context: http://www.nabble.com/Strange-behaviour-of-Fr=
enchAnalyzer-when-using-accents-tp20392978p20392978.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 10:54:29 2008
Return-Path: <java-user-return-37038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62947 invoked from network); 8 Nov 2008 10:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 10:54:28 -0000
Received: (qmail 15801 invoked by uid 500); 8 Nov 2008 10:54:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15770 invoked by uid 500); 8 Nov 2008 10:54:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15759 invoked by uid 99); 8 Nov 2008 10:54:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 02:54:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 10:53:11 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1442248fgb.27
        for <java-user@lucene.apache.org>; Sat, 08 Nov 2008 02:53:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=SLB8U3Y0Zc6RBXLdmPil6WgB5h7840fB37lJjkLufnM=;
        b=pXSDCp5uQGG3RiXsWuqUWlp1p5WVVlI76MKXAsO8o2cChCSi/L4TtctkvFnIv6Upr2
         XawDYm9FUeBvmsT/gAwy8UNWJnyq9za3aUryC+MGg4dfx98V+1amy2Pgcqnp7dFkCPog
         grK6i/oiJZlpfxzznk7YftUiMcZ4ASND1OffM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=VexNO9oee75C1A1EMWo6wsvsdma2g5CxwAoYOfBjrvexYr/Lxhl3KkPPmzliBWmHmG
         2D4eyWIzVKm99E56A3RzjIbRcao5BzXPTHyIGnQFkPL5qoGAEM0k86PLzg4We6gUq9s4
         812zIGN1FLTGpgBDdm5+zs6FAK9qO9Xy5UxvY=
Received: by 10.86.53.8 with SMTP id b8mr4899537fga.58.1226141623382;
        Sat, 08 Nov 2008 02:53:43 -0800 (PST)
Received: by 10.86.94.8 with HTTP; Sat, 8 Nov 2008 02:53:43 -0800 (PST)
Message-ID: <a4d7dcf50811080253w624552daw9d50ccc888516cb8@mail.gmail.com>
Date: Sat, 8 Nov 2008 10:53:43 +0000
From: "=?WINDOWS-1252?Q?Mindaugas_=8Eak=9Aauskas?=" <mindas@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and JSP
In-Reply-To: <20081107230416.4ca466cb.almeidaraf@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20081107230416.4ca466cb.almeidaraf@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> How do I keep only one IndexSearcher open for all the searches on my
> website?

In order to keep your IndexSearcher open, simply do not close it and
serve the reference to the same object instance for different HTTP
request clients.

This can easily be achieved using Singleton wrapper around
IndexSearcher which would be sitting somewhere in your backend server
API.

m.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 11:45:02 2008
Return-Path: <java-user-return-37039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68174 invoked from network); 8 Nov 2008 11:45:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 11:45:02 -0000
Received: (qmail 35430 invoked by uid 500); 8 Nov 2008 11:45:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35294 invoked by uid 500); 8 Nov 2008 11:45:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35276 invoked by uid 99); 8 Nov 2008 11:45:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 03:45:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.28 as permitted sender)
Received: from [80.67.29.28] (HELO smtprelay11.ispgateway.de) (80.67.29.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 11:43:40 +0000
Received: from [91.37.232.18] (helo=p5b25e812.dip.t-dialin.net)
	by smtprelay11.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KymEm-0002pP-8m
	for java-user@lucene.apache.org; Sat, 08 Nov 2008 12:44:20 +0100
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Strange behaviour of FrenchAnalyzer when using accents
Date: Sat, 8 Nov 2008 12:45:26 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <20392978.post@talk.nabble.com>
In-Reply-To: <20392978.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200811081245.26473@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Samstag, 8. November 2008, lamino wrote:

> =C2=A0 =C2=A0 =C2=A0 =C2=A0 String q =3D "secr=C3=A9taire";

Does it help if you escape it like this: "secr\u00e9taire"? The java=20
compiler might interpret non-ASCII chars differently, depending on the=20
environment it runs in.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 11:46:09 2008
Return-Path: <java-user-return-37040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68249 invoked from network); 8 Nov 2008 11:46:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 11:46:09 -0000
Received: (qmail 38117 invoked by uid 500); 8 Nov 2008 11:46:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37574 invoked by uid 500); 8 Nov 2008 11:46:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37563 invoked by uid 99); 8 Nov 2008 11:46:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 03:46:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of shishir.jain@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 11:44:51 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2027292fkq.5
        for <java-user@lucene.apache.org>; Sat, 08 Nov 2008 03:45:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=vkWGwXDTv2+JPULELPR/HVv0ESV0o+YxroGRs8VcHgo=;
        b=KZoZKPraZJ0wYZp6wlwYFlUhtVsRRy974d8/pqBzm0S76jxJbd4uncPfldIQzlUgv/
         dGZbdj9zT51Q294C2yxzvPO7luf7IKrT49ZQKj/ixC67p1AGXlVWzm0smCt4exy1bVA5
         A97NE8C3fMl+Nx71AvL1xQpyzbXCXLf9aiEoM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=JKB7/2aj+z1Oi5YsxTMKg3Rap0y5aerAdheI0iGzzavI5HA/+PDrDh/4yNwVZAc7Cd
         d+VbqXYFZeOuv51mXziYG/N+gbh8jymBGr0OJ0WUVmx1HPEt9E6exheFfv7DXAKDrKE1
         V5tgqxcUiiTY0LhrvlSXOxmBuBFJI7b4ta9e4=
Received: by 10.181.36.9 with SMTP id o9mr1358843bkj.148.1226144722820;
        Sat, 08 Nov 2008 03:45:22 -0800 (PST)
Received: by 10.180.232.12 with HTTP; Sat, 8 Nov 2008 03:45:22 -0800 (PST)
Message-ID: <3b467c090811080345u720a83a5i882dea5d99d3805d@mail.gmail.com>
Date: Sat, 8 Nov 2008 17:15:22 +0530
From: "Shishir Jain" <shishir.jain@gmail.com>
To: java-user@lucene.apache.org
Subject: Multisearcher
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_60867_8945245.1226144722807"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_60867_8945245.1226144722807
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Doc1: Field1, Field2
Doc2: Field1, Field2

If I create Index such that Field1 is stored in index1 and Field2 is stored
in index2.

Can I use Multisearcher to search for Field1 in index1 and Field2 index2 and
get the merged results?

Thanks & Regards,
Shishir Jain

------=_Part_60867_8945245.1226144722807--

From java-user-return-37041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 12:01:25 2008
Return-Path: <java-user-return-37041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70189 invoked from network); 8 Nov 2008 12:01:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 12:01:25 -0000
Received: (qmail 43259 invoked by uid 500); 8 Nov 2008 12:01:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43214 invoked by uid 500); 8 Nov 2008 12:01:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43203 invoked by uid 99); 8 Nov 2008 12:01:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 04:01:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 12:00:07 +0000
Received: by yw-out-2324.google.com with SMTP id 3so796056ywj.5
        for <java-user@lucene.apache.org>; Sat, 08 Nov 2008 04:00:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=fyhUu7qLRWtjiasxeMCVtvoVNHCmpy/57K7L0VaUkDs=;
        b=DOG4BHn4Itfii2ya4k6pt9ZGEj9bzQTbfiiFwOHy6ociiaBPZGxenIpGzgv0rCHzXP
         S56IowrejMx30k0wbCbBsPYqWKTD5eGcLod5u5/ioUF15V8IRrsQ3nKX0aogARqA8JEG
         30MyJ2+OxFcVsaoSh3I8N0HJA5vSJHX8ZO8vU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=WwdZ5PCuGXahRe/kwKTEEbb0oqR8prgBlNIzMqbBoSw/80NHEKyQLzxak457w9+KeO
         44zyL9n+mFj4uOdrWdBmZRuNDAB0S4WCJ5Q9Eyjj5mRCNqs716wjl85B4onNhTerSAOr
         Ea4UWVLLNDXJ9h/xuCum14S5S9L55ChLmYxqg=
Received: by 10.150.52.10 with SMTP id z10mr5535262ybz.125.1226145649479;
        Sat, 08 Nov 2008 04:00:49 -0800 (PST)
Received: from ?10.13.58.5? ([166.195.65.217])
        by mx.google.com with ESMTPS id m10sm5319268rnd.15.2008.11.08.04.00.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 08 Nov 2008 04:00:48 -0800 (PST)
Message-Id: <E47CDEF7-7661-44EA-9D3C-B0292B5A48A4@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <3b467c090811080345u720a83a5i882dea5d99d3805d@mail.gmail.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5F136)
Mime-Version: 1.0 (iPhone Mail 5F136)
Subject: Re: Multisearcher
Date: Sat, 8 Nov 2008 06:00:39 -0600
References: <3b467c090811080345u720a83a5i882dea5d99d3805d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Not out of the box, but it's fairly trivial to copy multisesscher and  
modify it so that a different query goes to each suvsearcher.

- Mark


On Nov 8, 2008, at 5:45 AM, "Shishir Jain" <shishir.jain@gmail.com>  
wrote:

> Hi,
>
> Doc1: Field1, Field2
> Doc2: Field1, Field2
>
> If I create Index such that Field1 is stored in index1 and Field2 is  
> stored
> in index2.
>
> Can I use Multisearcher to search for Field1 in index1 and Field2  
> index2 and
> get the merged results?
>
> Thanks & Regards,
> Shishir Jain

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 16:45:55 2008
Return-Path: <java-user-return-37042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53304 invoked from network); 8 Nov 2008 16:45:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 16:45:55 -0000
Received: (qmail 91858 invoked by uid 500); 8 Nov 2008 16:45:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91818 invoked by uid 500); 8 Nov 2008 16:45:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91807 invoked by uid 99); 8 Nov 2008 16:45:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 08:45:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 16:44:35 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1Kyqw0-00087N-PD
	for java-user@lucene.apache.org; Sat, 08 Nov 2008 08:45:16 -0800
Message-ID: <20397820.post@talk.nabble.com>
Date: Sat, 8 Nov 2008 08:45:16 -0800 (PST)
From: lamino <yalamino@yahoo.fr>
To: java-user@lucene.apache.org
Subject: Re: Strange behaviour of FrenchAnalyzer when using accents
In-Reply-To: <200811081245.26473@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: yalamino@yahoo.fr
References: <20392978.post@talk.nabble.com> <200811081245.26473@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org


No it doesn't, still gettig the same output... :-(



Daniel Naber-10 wrote:
>=20
> On Samstag, 8. November 2008, lamino wrote:
>=20
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0 String q =3D "secr=C3=A9taire";
>=20
> Does it help if you escape it like this: "secr\u00e9taire"? The java=20
> compiler might interpret non-ASCII chars differently, depending on the=20
> environment it runs in.
>=20
> Regards
>  Daniel
>=20
> --=20
> http://www.danielnaber.de
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

--=20
View this message in context: http://www.nabble.com/Strange-behaviour-of-Fr=
enchAnalyzer-when-using-accents-tp20392978p20397820.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 18:06:30 2008
Return-Path: <java-user-return-37043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87087 invoked from network); 8 Nov 2008 18:06:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 18:06:30 -0000
Received: (qmail 43607 invoked by uid 500); 8 Nov 2008 18:06:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42633 invoked by uid 500); 8 Nov 2008 18:06:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42622 invoked by uid 99); 8 Nov 2008 18:06:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 10:06:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucene@nitwit.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 18:05:12 +0000
Received: from [85.178.237.105] (helo=server.localdomain)
	by smtprelay04.ispgateway.de with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucene@nitwit.de>)
	id 1KysBW-00065Y-Q7
	for java-user@lucene.apache.org; Sat, 08 Nov 2008 19:05:22 +0100
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 3622F729E4B
	for <java-user@lucene.apache.org>; Sat,  8 Nov 2008 19:06:16 +0100 (CET)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: How to combine filter in Lucene 2.4?
Date: Sat, 8 Nov 2008 19:06:15 +0100
User-Agent: KMail/1.9.9
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811081906.15739.lucene@nitwit.de>
X-Df-Sender: [pbs]171152
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

Since Filter.bits() is deprecated and replaced by getDocIdSet() now I wonder 
how I am supposed to combine (AND) filters (for facets).

I worked around this issue by extending Filter and let getDocIdSet() return an 
OpenBitSet to ensure that this implementation is used everywhere and casting 
to OpenBitSet will work but this is really not clean code.

Thanks
Timo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 20:05:51 2008
Return-Path: <java-user-return-37044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16498 invoked from network); 8 Nov 2008 20:05:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 20:05:51 -0000
Received: (qmail 95902 invoked by uid 500); 8 Nov 2008 20:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95870 invoked by uid 500); 8 Nov 2008 20:05:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95859 invoked by uid 99); 8 Nov 2008 20:05:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 12:05:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 20:04:33 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1831887rvb.5
        for <java-user@lucene.apache.org>; Sat, 08 Nov 2008 12:05:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:in-reply-to:references:x-mailer:mime-version
         :content-type:content-transfer-encoding;
        bh=+aD6XbrspowMKs6BILluhMWG0ze7qnmy4jtHelKuExg=;
        b=f9fgJz3Sdaw3JM/CctDk55lzXnn1SZ9h7nDGWdMeEpyFAvboL1qUPVz/DtjQpDGiPy
         6K3Zgosj9lF0PUVqS/YaMnuUoDP6Q3CahoSC5xa1lQF1vFH8ApTpLIhBf/Cw97s8BRaL
         oYwJ6gR72RLBYLAk/wNzzfNmZpo7VJKMmehnM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:in-reply-to:references:x-mailer
         :mime-version:content-type:content-transfer-encoding;
        b=el4A26k8vi1diHfiDhePQ/OBY66HDdWdPc8XAY9RHhCI8sVxQwm51pU3qFgFwr5Vss
         pYZ9tAIpje+fuVEmJ4NtYpfM0QfhcRdKsojMw3yBOnVyMduFdFY2eCzuIvqQXHGqsJ6v
         hY+09m9b9LgmRk1axOyFkkiqClwcSxr+d8Gtg=
Received: by 10.141.23.7 with SMTP id a7mr2589597rvj.256.1226174706138;
        Sat, 08 Nov 2008 12:05:06 -0800 (PST)
Received: from zim ([189.107.137.13])
        by mx.google.com with ESMTPS id k2sm13981211rvb.1.2008.11.08.12.05.04
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 08 Nov 2008 12:05:05 -0800 (PST)
Date: Sat, 8 Nov 2008 18:04:54 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and JSP
Message-Id: <20081108180454.83f53e05.almeidaraf@gmail.com>
In-Reply-To: <a4d7dcf50811080253w624552daw9d50ccc888516cb8@mail.gmail.com>
References: <20081107230416.4ca466cb.almeidaraf@gmail.com>
	<a4d7dcf50811080253w624552daw9d50ccc888516cb8@mail.gmail.com>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, 8 Nov 2008 10:53:43 +0000
"Mindaugas akauskas" <mindas@gmail.com> wrote:

> > How do I keep only one IndexSearcher open for all the searches on my
> > website?
> 
> In order to keep your IndexSearcher open, simply do not close it and
> serve the reference to the same object instance for different HTTP
> request clients.
> 
> This can easily be achieved using Singleton wrapper around
> IndexSearcher which would be sitting somewhere in your backend server
> API.
> 
> m.

Yeah, I was worried because all the documentation I read didn't tell me
how to control when the servlet is loaded and when it's unloaded. So I
thought that, since I had no control, maybe the server would reload the
servlet more times than it should. But experimenting with tomcat5.5
revealed that it's not really common for the servlet to be reloaded.

I was a bit to worried about the costs of opening more than one
IndexSearcher at the same time and reopening it a few times (I only
reindex stuff once per semester). Now I realise that I was being too
worried about that, you just shouldn't reopen IndexSearcher too often,
but it's completely fine to reopen it every now and then. I was just
being paranoid :-P.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 21:12:50 2008
Return-Path: <java-user-return-37045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27067 invoked from network); 8 Nov 2008 21:12:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 21:12:50 -0000
Received: (qmail 29032 invoked by uid 500); 8 Nov 2008 21:12:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28998 invoked by uid 500); 8 Nov 2008 21:12:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28987 invoked by uid 99); 8 Nov 2008 21:12:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 13:12:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 21:11:32 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.13.8/8.13.8) with ESMTP id mA8LCDCB038953
	for <java-user@lucene.apache.org>; Sat, 8 Nov 2008 22:12:13 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: How to combine filter in Lucene 2.4?
Date: Sat, 8 Nov 2008 22:12:12 +0100
User-Agent: KMail/1.9.10
References: <200811081906.15739.lucene@nitwit.de>
In-Reply-To: <200811081906.15739.lucene@nitwit.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811082212.13110.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Timo,

You may be looking for class OpenBitSetDisi in the util package,
it was made for boolean filter operations on OpenBitSets.
Also have a look at the contrib modules, OpenBitSetDisi is
used there in two classes that do (precisely?) what you need:
contrib/miscellaneous/**/ChainedFilter
contrib/queries/**/BooleanFilter

Regards,
Paul Elschot

Op Saturday 08 November 2008 19:06:15 schreef Timo Nentwig:
> Hi!
>
> Since Filter.bits() is deprecated and replaced by getDocIdSet() now I
> wonder how I am supposed to combine (AND) filters (for facets).
>
> I worked around this issue by extending Filter and let getDocIdSet()
> return an OpenBitSet to ensure that this implementation is used
> everywhere and casting to OpenBitSet will work but this is really not
> clean code.
>
> Thanks
> Timo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 08 21:43:20 2008
Return-Path: <java-user-return-37046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39627 invoked from network); 8 Nov 2008 21:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Nov 2008 21:43:20 -0000
Received: (qmail 42325 invoked by uid 500); 8 Nov 2008 21:43:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42294 invoked by uid 500); 8 Nov 2008 21:43:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42283 invoked by uid 99); 8 Nov 2008 21:43:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 13:43:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.230 as permitted sender)
Received: from [209.85.198.230] (HELO rv-out-0506.google.com) (209.85.198.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Nov 2008 21:42:02 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1870402rvb.5
        for <java-user@lucene.apache.org>; Sat, 08 Nov 2008 13:42:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:in-reply-to:references:x-mailer:mime-version
         :content-type:content-transfer-encoding;
        bh=Qiox6PIiIj1NJFEZsao3NLdUt5lfMqqkbwusjvAqcEo=;
        b=JHnX87BZVuT0hnbo21SfoiJI45NyqRJaFX+dy+5seUFNTO/T7IHVQDuahn1OnoP8ln
         Ab3oSY29nCw52vDHUoHBlwHZUbq0InG7/+7vZ34tx+9jdmNc/BYGITnoNyrtCqHjBh2l
         zE6f9Vns2l8Vox3bDytTUge40xJqiyonc2wnw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:in-reply-to:references:x-mailer
         :mime-version:content-type:content-transfer-encoding;
        b=a9+zaYaiU9eyk32xPhjgYEMDTJYEYyj0HbaqBb1C925EC5aGTXVQ08IT+HiOEa/FmF
         +6PcNjGozCM9UNMyqt3+BImiHVIWSzcjQepDEGBZya8CUN1Iw/qyWOZRnZIn/aqxV7X3
         438Cc3bd32eQeSdQhlP5FJ0phwDJPnmly3MmQ=
Received: by 10.140.147.5 with SMTP id u5mr2628020rvd.14.1226180554958;
        Sat, 08 Nov 2008 13:42:34 -0800 (PST)
Received: from zim ([189.107.137.13])
        by mx.google.com with ESMTPS id l31sm14287095rvb.2.2008.11.08.13.42.33
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 08 Nov 2008 13:42:34 -0800 (PST)
Date: Sat, 8 Nov 2008 19:42:23 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can Lucene tells which field matched ?
Message-Id: <20081108194223.650d9bdf.almeidaraf@gmail.com>
In-Reply-To: <20357552.post@talk.nabble.com>
References: <20357552.post@talk.nabble.com>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 6 Nov 2008 01:18:45 -0800 (PST)
Dora <julien.barret@gmail.com> wrote:

> 
> Hi 
> 
> I am new to Lucene and working on a search module for some XML data:
> 
> I need to provide a "search all" able to look in all xml fields.
> Apparently Lucene (2.4.0) does not provide such a "search all" facility, and
> I have to build a query with my search field associated to all available XML
> elements.
> 
> Assuming that I am searching in a address book (fictive example for
> illustration) which is made of contacts (my lucene documents) containing
> several fields like name, address, city, ...
>  
> So my search for "paul" inside my addressbook will look like:
> name:paul OR address:paul OR city:paul and so on... 
> 
> Lucene will then tell me which contacts match my query, but is there a way
> to know which field(s) matched the request ?
> The goal is to display the XML with the matching fields highlighted.
> 
> I did not found anything like this in Lucene, so I seems that the only way
> is to perform a additional search field by field...
> 
> So if I have 100 fields per document (I told you my address book was a
> fictive example, the XML I am working on are a little bit more complex), and
> get 100 results that I want ot display in a list, this mean that I would
> need to perform 10000 additional searches request... 
> 
> Please tell me that there is a better way to do the job...

My case is more or less similar, but I don't have that many fields. I
have been using MultiQueryFieldParser and then Highlighter to figure
out which fields have a match and then I get the relevant fragment with
the right term highlighter.

I have a question for you, though. Are you parsing the XML for each
document after you get the results of a query or are you using stored
fields? What XML parser are you using?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 08:25:15 2008
Return-Path: <java-user-return-37047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41184 invoked from network); 9 Nov 2008 08:25:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 08:25:14 -0000
Received: (qmail 58183 invoked by uid 500); 9 Nov 2008 08:25:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58146 invoked by uid 500); 9 Nov 2008 08:25:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58135 invoked by uid 99); 9 Nov 2008 08:25:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 00:25:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of noble.paul@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 08:23:56 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1050276nfd.15
        for <java-user@lucene.apache.org>; Sun, 09 Nov 2008 00:24:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=2kXXSHIX4kG1ckycdJa7a25knubzl7uGINTEM4mdw2k=;
        b=rZvbWJEopis1Lx3UFqekcmv14umRtQp8NTyqmalUuoiFjPDzie2nTIiDwuLikiumov
         MA3kR/1IPLealH2PGZPSFd8PPb5UdqIDVDv/MdFc8+JeJ4H8/NgEuSlO8RSKs90n8enC
         cBb7+asR6jt8XmO/oD02pC40GRe2+adl8chkQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=Ws1N6K6YSMzrcL8BrH1RMxf89w9Bz3bL02GGPDUtuxCY4FkQYD3XUyBH9m3wZiWSQf
         sj3u2E3LGhTOrCjwO+1lebTKRh6cOmG2CgCz0qtdSELGl3ZQ/StfqS7QS+/XtkOWhlDM
         +rwnNxQfg//q7Y54079hDBJHX3wv6inLT/okw=
Received: by 10.210.12.18 with SMTP id 18mr6211645ebl.42.1226219069145;
        Sun, 09 Nov 2008 00:24:29 -0800 (PST)
Received: by 10.210.60.3 with HTTP; Sun, 9 Nov 2008 00:24:29 -0800 (PST)
Message-ID: <5e76b0ad0811090024o569f0753j8aae33a961f907aa@mail.gmail.com>
Date: Sun, 9 Nov 2008 13:54:29 +0530
From: "=?UTF-8?B?Tm9ibGUgUGF1bCDgtKg=?= =?UTF-8?B?4LWL4LSs4LS/4LSz4LWN4oCNIOCkqOCli+CkrOCljeCks+CljQ==?=" <noble.paul@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and JSP
In-Reply-To: <20081108180454.83f53e05.almeidaraf@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=WINDOWS-1252
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20081107230416.4ca466cb.almeidaraf@gmail.com>
	 <a4d7dcf50811080253w624552daw9d50ccc888516cb8@mail.gmail.com>
	 <20081108180454.83f53e05.almeidaraf@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You can use a ContextListener in a servlet engine (like Tomcat) .
ContextListener has callback methods for init an destroy. You may open
an IndexSearcher in the init and store it in the ServletContext by a
name and every servlet can use that. When the app is stopped you get a
calllback and you can close the searcher
--Noble

On Sun, Nov 9, 2008 at 1:34 AM, Rafael Cunha de Almeida
<almeidaraf@gmail.com> wrote:
> On Sat, 8 Nov 2008 10:53:43 +0000
> "Mindaugas =8Eak=9Aauskas" <mindas@gmail.com> wrote:
>
>> > How do I keep only one IndexSearcher open for all the searches on my
>> > website?
>>
>> In order to keep your IndexSearcher open, simply do not close it and
>> serve the reference to the same object instance for different HTTP
>> request clients.
>>
>> This can easily be achieved using Singleton wrapper around
>> IndexSearcher which would be sitting somewhere in your backend server
>> API.
>>
>> m.
>
> Yeah, I was worried because all the documentation I read didn't tell me
> how to control when the servlet is loaded and when it's unloaded. So I
> thought that, since I had no control, maybe the server would reload the
> servlet more times than it should. But experimenting with tomcat5.5
> revealed that it's not really common for the servlet to be reloaded.
>
> I was a bit to worried about the costs of opening more than one
> IndexSearcher at the same time and reopening it a few times (I only
> reindex stuff once per semester). Now I realise that I was being too
> worried about that, you just shouldn't reopen IndexSearcher too often,
> but it's completely fine to reopen it every now and then. I was just
> being paranoid :-P.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
--Noble Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 09:34:41 2008
Return-Path: <java-user-return-37048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79385 invoked from network); 9 Nov 2008 09:34:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 09:34:41 -0000
Received: (qmail 80678 invoked by uid 500); 9 Nov 2008 09:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80638 invoked by uid 500); 9 Nov 2008 09:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80627 invoked by uid 99); 9 Nov 2008 09:34:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 01:34:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucene@nitwit.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 09:33:22 +0000
Received: from [85.178.237.105] (helo=server.localdomain)
	by smtprelay04.ispgateway.de with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucene@nitwit.de>)
	id 1Kz6gE-0003ni-VS; Sun, 09 Nov 2008 10:34:03 +0100
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 11F09729B36;
	Sun,  9 Nov 2008 10:34:59 +0100 (CET)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: Re: How to combine filter in Lucene 2.4?
Date: Sun, 9 Nov 2008 10:34:58 +0100
User-Agent: KMail/1.9.9
Cc: Paul Elschot <paul.elschot@xs4all.nl>
References: <200811081906.15739.lucene@nitwit.de> <200811082212.13110.paul.elschot@xs4all.nl>
In-Reply-To: <200811082212.13110.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811091034.58815.lucene@nitwit.de>
X-Df-Sender: [pbs]171152
X-Virus-Checked: Checked by ClamAV on apache.org

On Saturday 08 November 2008 22:12:12 Paul Elschot wrote:
> Timo,
>
> You may be looking for class OpenBitSetDisi in the util package,
> it was made for boolean filter operations on OpenBitSets.
> Also have a look at the contrib modules, OpenBitSetDisi is

Okay, this is the third solution that is actually it's the only solution
when looking at the interface: iterate over both BitSets/Filters and compare 
doc-by-doc. I didn't take this into account, because this can't be nearly as 
fast as OpenBitSet.intersect() or union, respectively, can it?

> used there in two classes that do (precisely?) what you need:
> contrib/miscellaneous/**/ChainedFilter
> contrib/queries/**/BooleanFilter
>
> Regards,
> Paul Elschot
>
> Op Saturday 08 November 2008 19:06:15 schreef Timo Nentwig:
> > Hi!
> >
> > Since Filter.bits() is deprecated and replaced by getDocIdSet() now I
> > wonder how I am supposed to combine (AND) filters (for facets).
> >
> > I worked around this issue by extending Filter and let getDocIdSet()
> > return an OpenBitSet to ensure that this implementation is used
> > everywhere and casting to OpenBitSet will work but this is really not
> > clean code.
> >
> > Thanks
> > Timo
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 10:57:24 2008
Return-Path: <java-user-return-37049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36597 invoked from network); 9 Nov 2008 10:57:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 10:57:24 -0000
Received: (qmail 98480 invoked by uid 500); 9 Nov 2008 10:57:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98443 invoked by uid 500); 9 Nov 2008 10:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98432 invoked by uid 99); 9 Nov 2008 10:57:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 02:57:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.183.152] (HELO n4a.bullet.ukl.yahoo.com) (217.146.183.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 09 Nov 2008 10:56:04 +0000
Received: from [217.12.4.215] by n4.bullet.ukl.yahoo.com with NNFMP; 09 Nov 2008 10:56:44 -0000
Received: from [87.248.111.151] by t2.bullet.ukl.yahoo.com with NNFMP; 09 Nov 2008 10:56:44 -0000
Received: from [127.0.0.1] by omp208.mail.ukl.yahoo.com with NNFMP; 09 Nov 2008 10:56:44 -0000
X-Yahoo-Newman-Id: 716204.24468.bm@omp208.mail.ukl.yahoo.com
Received: (qmail 15181 invoked from network); 9 Nov 2008 10:56:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=sH+TRbzr0meuCw7+UY68s+BM5Y5IE4HgY6wrgAk/075Ji+Sv206y2z/2c0gYYulLndcFbvXJ4IbiPOtPqR9dZROBtzVz3Av71HdfEKOF0BAkHUfIHz2nLwn4hCNzdmIemBl25q2DWPJqie3PpyUSbcK6fLFZc2ulrHbLvfk4M8E=  ;
Received: from unknown (HELO ?192.168.2.50?) (markharw00d@194.106.34.5 with plain)
  by smtp103.mail.ukl.yahoo.com with SMTP; 9 Nov 2008 10:56:44 -0000
X-YMail-OSG: aYHlLRUVM1k0rT6aDGIGnOPghhlqPg2TSUupR7FBw9aXeTdXKgZ7LcIUWIo0NOlIcpGkwJpwErTMMPoxduR7n60OPCxQCL3mYMwCx0O0WYOJZaeVQoY0cOA0gXUryZhgPvh9ChmbI1WbM31V8dTKAcz82U_JmqEEEZfuIiXhoGKYu_CamEsys1nlo7aC
X-Yahoo-Newman-Property: ymail-3
Message-ID: <4916C1E5.3010904@yahoo.co.uk>
Date: Sun, 09 Nov 2008 10:56:37 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to combine filter in Lucene 2.4?
References: <200811081906.15739.lucene@nitwit.de> <200811082212.13110.paul.elschot@xs4all.nl> <200811091034.58815.lucene@nitwit.de>
In-Reply-To: <200811091034.58815.lucene@nitwit.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 >>this can't be nearly as fast as OpenBitSet.intersect() or union, 
respectively, can it?

I had a similar concern but it doesn't seem that bad:

   
https://issues.apache.org/jira/browse/LUCENE-1187?focusedCommentId=12596546#action_12596546

The above test showed a slight improvement using bitset.or when it was 
recognised both docidsets were OpenBitSets. This optimisation is now in 
BooleanFilter.

Cheers
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 11:25:17 2008
Return-Path: <java-user-return-37050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48763 invoked from network); 9 Nov 2008 11:25:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 11:25:17 -0000
Received: (qmail 11386 invoked by uid 500); 9 Nov 2008 11:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11333 invoked by uid 500); 9 Nov 2008 11:25:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11321 invoked by uid 99); 9 Nov 2008 11:25:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 03:25:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 11:23:58 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id mA9BOd9L016015
	for <java-user@lucene.apache.org>; Sun, 9 Nov 2008 12:24:39 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: How to combine filter in Lucene 2.4?
Date: Sun, 9 Nov 2008 12:24:40 +0100
User-Agent: KMail/1.9.10
References: <200811081906.15739.lucene@nitwit.de> <200811091034.58815.lucene@nitwit.de> <4916C1E5.3010904@yahoo.co.uk>
In-Reply-To: <4916C1E5.3010904@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811091224.41001.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Sunday 09 November 2008 11:56:37 schreef markharw00d:
>  >>this can't be nearly as fast as OpenBitSet.intersect() or union,
>
> respectively, can it?
>
> I had a similar concern but it doesn't seem that bad:
>
>
> https://issues.apache.org/jira/browse/LUCENE-1187?focusedCommentId=12
>596546#action_12596546
>
> The above test showed a slight improvement using bitset.or when it
> was recognised both docidsets were OpenBitSets. This optimisation is
> now in BooleanFilter.

Further to that, the current implementation of 
OpenBitSetDISI.inPlaceAnd() is not optimal, although it
should work just fine. A patch for a performance
improvement will follow.

Regards,
Paul Elschot


>
> Cheers
> Mark
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 20:09:15 2008
Return-Path: <java-user-return-37051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27861 invoked from network); 9 Nov 2008 20:09:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 20:09:15 -0000
Received: (qmail 56081 invoked by uid 500); 9 Nov 2008 20:09:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56044 invoked by uid 500); 9 Nov 2008 20:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56033 invoked by uid 99); 9 Nov 2008 20:09:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 12:09:16 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 20:07:57 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1206249ywj.5
        for <java-user@lucene.apache.org>; Sun, 09 Nov 2008 12:08:39 -0800 (PST)
Received: by 10.90.99.3 with SMTP id w3mr5393625agb.27.1226261318310;
        Sun, 09 Nov 2008 12:08:38 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm6838140agd.37.2008.11.09.12.08.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 09 Nov 2008 12:08:37 -0800 (PST)
Message-Id: <D5BFF273-6769-47F2-9BD8-0BEDDC06F44D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4fe4c4f50811071338y798b52adi10489fd865a23fe9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: changes
Date: Sun, 9 Nov 2008 15:08:36 -0500
References: <4fe4c4f50811071338y798b52adi10489fd865a23fe9@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes you should have found this in the CHANGES.txt: we try hard to  
document all changes as we commit them.

I looked and also could not find it.  I'm not sure why it's missing  
(it was before my time!).

Mike

ChadDavis wrote:

> I'm upgrading from a very old version of lucene to 2.4  I tried to  
> research
> all the possible changes, this included reading the change file from  
> the 2.4
> version, which appears to reach back through all of the versions.   
> However,
> I'm finding major API changes that aren't documented in that file.   
> For
> example, Field.Keyword() is gone.  Shouldn't I find this in that  
> change log?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 20:24:36 2008
Return-Path: <java-user-return-37052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32178 invoked from network); 9 Nov 2008 20:24:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 20:24:35 -0000
Received: (qmail 63491 invoked by uid 500); 9 Nov 2008 20:24:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63453 invoked by uid 500); 9 Nov 2008 20:24:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63442 invoked by uid 99); 9 Nov 2008 20:24:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 12:24:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 20:23:18 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1332421qwi.53
        for <java-user@lucene.apache.org>; Sun, 09 Nov 2008 12:23:59 -0800 (PST)
Received: by 10.214.114.21 with SMTP id m21mr5872668qac.109.1226262239562;
        Sun, 09 Nov 2008 12:23:59 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 9sm8288198yws.5.2008.11.09.12.23.57
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 09 Nov 2008 12:23:58 -0800 (PST)
Message-Id: <93F80A5D-A6C3-4873-92D2-2E7CE568023A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <C539E46E.1195%tsturge@hi5.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Term numbering and range filtering
Date: Sun, 9 Nov 2008 15:23:56 -0500
References: <C539E46E.1195%tsturge@hi5.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Conceivably, TermInfosReader could track the sequence number of each =20
term.

A seek/skipTo would know which sequence number it just jumped too, =20
because the index is regular (every 128 terms by default), and then =20
each next() call could increment that.  Then retrieving this number =20
would be as costly as calling eg IndexReader.docFreq(Term) is now.

But I'm not sure how a multi-segment index  would work, ie how would =20
MultiSegmentReader compute this for its terms?  Or maybe you'd just do =20=

this per-segment?

Mike

Tim Sturge wrote:

> Hi,
>
> I=92m wondering if there is any easy technique to number the terms in =20=

> an index
> (By number I mean map a sequence of terms to a contiguous range of =20
> integers
> and map terms to these numbers efficiently)
>
> Looking at the Term class and the .tis/.tii index format it appears =20=

> that the
> terms are stored in an ordered and prefix-compressed format, but =20
> while there
> are pointers from a term to the .frq and .prx files, neither is really
> suitable as a sequence number.
>
> The reason I have this question is that I am writing a multi-filter =20=

> for
> single term fields. My index contains many fields for which each =20
> document
> contains a single term (e.g. date, zipcode, country) and I need to =20
> perform
> range queries or set matches over these fields, many of which are very
> inclusive (they match >10% of the total documents)
>
> A cached RangeFilter works well when there are a small number of =20
> potential
> options (e.g. for countries) but when there are many options =20
> (consider a
> date range or a set of zipcodes) there are too many potential =20
> choices to
> cache each possibility and it is too inefficient to build a filter =20
> on the
> fly for each query (as you have to visit 10% of documents to build the
> filter despite the query itself matching 0.1%)
>
> Therefore I was considering building a int[reader.maxDocs()] array =20
> for each
> field and putting into it the term number for each document. This =20
> relies on
> the fact that each document contains only a single term for this =20
> field, but
> with it I should be able to quickly construct a =93multi-filter=94 =
(that =20
> is,
> something that iterates the array and checks that the term is in the =20=

> range
> or set).
>
> Right now it looks like I can do some very ugly surgery and perhaps =20=

> use the
> offset to the prx file even though it is not contiguous. But I=92m =20
> hoping
> there is a better technique that I=92m just not seeing right now.
>
> Thanks,
>
> Tim


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 21:00:03 2008
Return-Path: <java-user-return-37053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46166 invoked from network); 9 Nov 2008 21:00:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 21:00:02 -0000
Received: (qmail 89430 invoked by uid 500); 9 Nov 2008 21:00:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89399 invoked by uid 500); 9 Nov 2008 21:00:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89388 invoked by uid 99); 9 Nov 2008 21:00:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 13:00:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chadmichaeldavis@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 20:58:44 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2033250fgb.27
        for <java-user@lucene.apache.org>; Sun, 09 Nov 2008 12:59:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NunI+7VZEa2B69l1EvewQPX5XLICALHflhJf5wZRCtw=;
        b=S9q9lI0Ttn1wPtMWl6w+l4Nf+YoBChB5OZ3eVosTJLg+Xh8FSGr+h3p1aprkm4KnM6
         XnHiEv0uQLpzOSV6wGDQeUBp6PQkZzCbUeCTQh4rjfOikBFrAsQFJk8U+wfQZsfIN87t
         k1UC2YHsRVKzDOnbWIVQyaambGdWuQniYaBcQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZcMmBcYi7mWUe0VHFnfA5qgJR6cQGvZ9lDHuIGaCnxz4r3DxbBNc2YQ9uQrJ4ond6y
         BTiSrNDcnGGWUaBaXMNK8JxFb2s1XX4RT9HesISUQ7AGVQkuTEBKBY0EiHjKa/6pjaYI
         NXu3HfUX7oKUdETcYHOZ9Oe/yl54+womsK5+Y=
Received: by 10.187.179.19 with SMTP id g19mr1500913fap.49.1226264365739;
        Sun, 09 Nov 2008 12:59:25 -0800 (PST)
Received: by 10.187.190.19 with HTTP; Sun, 9 Nov 2008 12:59:25 -0800 (PST)
Message-ID: <4fe4c4f50811091259u493455a8geb9431bbc00ea8dd@mail.gmail.com>
Date: Sun, 9 Nov 2008 13:59:25 -0700
From: ChadDavis <chadmichaeldavis@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: changes
In-Reply-To: <D5BFF273-6769-47F2-9BD8-0BEDDC06F44D@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61746_6810068.1226264365739"
References: <4fe4c4f50811071338y798b52adi10489fd865a23fe9@mail.gmail.com>
	 <D5BFF273-6769-47F2-9BD8-0BEDDC06F44D@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61746_6810068.1226264365739
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There were several big ommissions.

On Sun, Nov 9, 2008 at 1:08 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Yes you should have found this in the CHANGES.txt: we try hard to document
> all changes as we commit them.
>
> I looked and also could not find it.  I'm not sure why it's missing (it was
> before my time!).
>
> Mike
>
>
> ChadDavis wrote:
>
>  I'm upgrading from a very old version of lucene to 2.4  I tried to
>> research
>> all the possible changes, this included reading the change file from the
>> 2.4
>> version, which appears to reach back through all of the versions.
>>  However,
>> I'm finding major API changes that aren't documented in that file.  For
>> example, Field.Keyword() is gone.  Shouldn't I find this in that change
>> log?
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_61746_6810068.1226264365739--

From java-user-return-37054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 22:23:51 2008
Return-Path: <java-user-return-37054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79079 invoked from network); 9 Nov 2008 22:23:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 22:23:51 -0000
Received: (qmail 45321 invoked by uid 500); 9 Nov 2008 22:23:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45277 invoked by uid 500); 9 Nov 2008 22:23:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45266 invoked by uid 99); 9 Nov 2008 22:23:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 14:23:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.7 as permitted sender)
Received: from [80.67.29.7] (HELO smtprelay07.ispgateway.de) (80.67.29.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 22:22:30 +0000
Received: from [91.37.215.167] (helo=p5b25d7a7.dip.t-dialin.net)
	by smtprelay07.ispgateway.de with esmtpsa (TLSv1:AES256-SHA:256)
	(Exim 4.68)
	(envelope-from <lucenelist2007@danielnaber.de>)
	id 1KzIg4-0006dX-Ep
	for java-user@lucene.apache.org; Sun, 09 Nov 2008 23:22:40 +0100
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: changes
Date: Sun, 9 Nov 2008 23:23:57 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <4fe4c4f50811071338y798b52adi10489fd865a23fe9@mail.gmail.com>
In-Reply-To: <4fe4c4f50811071338y798b52adi10489fd865a23fe9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200811092323.57355@danielnaber.de>
X-Df-Sender: 695637
X-Virus-Checked: Checked by ClamAV on apache.org

On Freitag, 7. November 2008, ChadDavis wrote:

> =C2=A0For
> example, Field.Keyword() is gone. =C2=A0Shouldn't I find this in that cha=
nge
> log?

This was removed between 1.9 and 2.0. The plan was that users upgrade to=20
1.9, fix the deprecation warnings and only then go to 2.0. Thus no every=20
method is mentioned in the change log. It just says "Several methods and=20
fields have been deprecated. The API documentation contains information=20
about the recommended replacements. It is planned that most of the=20
deprecated methods and fields will be removed in Lucene 2.0."

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 22:28:51 2008
Return-Path: <java-user-return-37055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79575 invoked from network); 9 Nov 2008 22:28:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 22:28:51 -0000
Received: (qmail 49421 invoked by uid 500); 9 Nov 2008 22:28:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49394 invoked by uid 500); 9 Nov 2008 22:28:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49383 invoked by uid 99); 9 Nov 2008 22:28:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 14:28:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chadmichaeldavis@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 22:27:34 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2067522fgb.27
        for <java-user@lucene.apache.org>; Sun, 09 Nov 2008 14:28:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=X0klHSeGsIyOBxt54jgeMijGQ0Krg3MZ4miImkXB9Oc=;
        b=D4rJf6ofYNO57FXva+ydSbUn20AOkOgeoFawD9v7dfVMVTsXj0VPemObURUFr6E+vF
         h51tboe1uVuRo3+MDiYsgtN/2MYXjVYbwdRoyQFOF7Kg83LKycreFk8qgW8OJN36sHSe
         HqglYqxHflRab/r/x15gPfwWdjVooflAVyIms=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=BiR3jJAHn0T+wm8SzAv9oLHlrCo27O0D9btB3mzKO/aZ5MlJFuXa6+PNssR44Ril2K
         deWvPjAK6wwVVm2oue+H4siRPXt7vuBfwcN9pOHjlb1Vi4OlNbMpFmldYTv2rvVMUogA
         g7C4OJt3WieFMu/NPkuMMX1/704VHrIJQYp+o=
Received: by 10.187.247.15 with SMTP id z15mr1512794far.6.1226269696094;
        Sun, 09 Nov 2008 14:28:16 -0800 (PST)
Received: by 10.187.190.19 with HTTP; Sun, 9 Nov 2008 14:28:16 -0800 (PST)
Message-ID: <4fe4c4f50811091428n717c0b2j99a3086fc87c5e7b@mail.gmail.com>
Date: Sun, 9 Nov 2008 15:28:16 -0700
From: ChadDavis <chadmichaeldavis@gmail.com>
To: java-user@lucene.apache.org
Subject: ScoreDoc
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62261_4218614.1226269696092"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62261_4218614.1226269696092
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The sample code uses a ScoreDoc array to hold the hits.

    ScoreDoc[] hits = collector.topDocs().scoreDocs;

But the JavaDoc says "Expert: Returned by low-level search
implementations."  Why would the tutorial sample code use an "expert" api?

------=_Part_62261_4218614.1226269696092--

From java-user-return-37056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 22:36:47 2008
Return-Path: <java-user-return-37056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80726 invoked from network); 9 Nov 2008 22:36:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 22:36:46 -0000
Received: (qmail 58327 invoked by uid 500); 9 Nov 2008 22:36:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58012 invoked by uid 500); 9 Nov 2008 22:36:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58001 invoked by uid 99); 9 Nov 2008 22:36:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 14:36:47 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chadmichaeldavis@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 22:35:29 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2069995fgb.27
        for <java-user@lucene.apache.org>; Sun, 09 Nov 2008 14:36:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=n83npa0UEzc53aE5PIEInNqV+/4VPiRZfjEY0gYxI0s=;
        b=sPRVRH4cuOxkROg44EoC1giXN52vQBTl1GHfYFU4uhndKNwOJ27eSf3sRbOq9UP5z0
         HxpKkKGWsrbIuZlMb2dmqVCIkdEX2J4jfJSS8q//2V+yLFCKd2eZnzupOEP5anaZfIRd
         gfC/A5mnlTSWU362+GxRZriIo4b4gC+TOmM2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=t/kSnQm62l0U1ze6lBKapw1QmY2fmrDZ1Debdi2cT9qkaOqqfFvhciNf14pq4iN/rO
         vmVzNu0USEGVX2J9Rux6eERU8tTLnAmhh7nYQBKnV6frZbehfA5Y6HhUUpxFNIGIhLIQ
         Nacz1LiujkIWXRvxEktygD7UlpYyyF6F/zowE=
Received: by 10.187.190.6 with SMTP id s6mr1512599fap.29.1226270161519;
        Sun, 09 Nov 2008 14:36:01 -0800 (PST)
Received: by 10.187.190.19 with HTTP; Sun, 9 Nov 2008 14:36:01 -0800 (PST)
Message-ID: <4fe4c4f50811091436j10091c24la9ed9e59a3ad5ca1@mail.gmail.com>
Date: Sun, 9 Nov 2008 15:36:01 -0700
From: ChadDavis <chadmichaeldavis@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ScoreDoc
In-Reply-To: <4fe4c4f50811091428n717c0b2j99a3086fc87c5e7b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62322_23178179.1226270161519"
References: <4fe4c4f50811091428n717c0b2j99a3086fc87c5e7b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62322_23178179.1226270161519
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In fact, the search method used to populate the collector used in that
sample code also claims to be low level.  It suggests using the
IndexSearcher.search( query ) method instead, but that method is deprecated.

Lower-level search API.
>
> HitCollector.collect(int,float) is called for every matching document.
>
> Applications should only use this if they need *all* of the matching
> documents. The high-level search API (Searcher.search(Query)) is usually
> more efficient, as it skips non-high-scoring hits.
>
> Note: The score passed to this method is a raw score. In other words, the
> score will not necessarily be a float whose value is between 0 and 1.
>
Is this just stale documentation ?

On Sun, Nov 9, 2008 at 3:28 PM, ChadDavis <chadmichaeldavis@gmail.com>wrote:

> The sample code uses a ScoreDoc array to hold the hits.
>
>     ScoreDoc[] hits = collector.topDocs().scoreDocs;
>
> But the JavaDoc says "Expert: Returned by low-level search
> implementations."  Why would the tutorial sample code use an "expert" api?
>
>
>

------=_Part_62322_23178179.1226270161519--

From java-user-return-37057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 22:58:17 2008
Return-Path: <java-user-return-37057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83606 invoked from network); 9 Nov 2008 22:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 22:58:17 -0000
Received: (qmail 67766 invoked by uid 500); 9 Nov 2008 22:58:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67720 invoked by uid 500); 9 Nov 2008 22:58:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67709 invoked by uid 99); 9 Nov 2008 22:58:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 14:58:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 22:56:59 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1221201yxj.5
        for <java-user@lucene.apache.org>; Sun, 09 Nov 2008 14:57:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=xQeZzf3PUkxSrhooIcSeM7IavpKytVZGIGPV+7H8PBg=;
        b=U+EPPTncD71CvSHrX0u9Ue4cVFK3b7Vq9p57Ie3hnajMbFA8jfOxYJAr/GIwZ2X9k+
         tucXqOBxl7w2ygCV7tdQO/g5VuMciVqUImCZ7hzv1ZdvpYQckpYa4V01moEcJ+PaWg89
         wEKitkdYDNDVPSHhH+Il8EoBZ72FEDRDQXoIM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=GTT3GDwx5lJ1XQxZVm5DClKKaCN8YlJLym5UmmuBz61AaSj6m8qevPp6NhjF7wK5n5
         KYM0hswLgrHNxj7c1PBYMrukNsl0aAyVzGKbImEPJzK9RV422lqIURKhdB1u6qeFNMLD
         GlZq2XreqBaB+VlHnuKBvEBQ9IOqKUE2rXHF0=
Received: by 10.90.74.9 with SMTP id w9mr827438aga.93.1226271461403;
        Sun, 09 Nov 2008 14:57:41 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 36sm7055217aga.10.2008.11.09.14.57.40
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 09 Nov 2008 14:57:40 -0800 (PST)
Message-ID: <49176AE5.4000100@gmail.com>
Date: Sun, 09 Nov 2008 17:57:41 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: ScoreDoc
References: <4fe4c4f50811091428n717c0b2j99a3086fc87c5e7b@mail.gmail.com> <4fe4c4f50811091436j10091c24la9ed9e59a3ad5ca1@mail.gmail.com>
In-Reply-To: <4fe4c4f50811091436j10091c24la9ed9e59a3ad5ca1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Their is definitely some stale javadoc in Lucene here and there. All of 
what your talking about has been shaken up recently with the deprecation 
of Hits. Hits used to pretty much be considered the non-expert API, but 
its been tossed in favor of the TopDoc API's.

The HitCollector stuff has been marked expert because a lot of people 
get into trouble using something that hits every doc in the index on a 
search, not just the matching docs from the search. If you don't 
understand whats going on, you can, and many have, make some pretty slow 
code. The expert stuff just means, understand whats going on before you 
start to play here ;) I don't necessarily think it doesn't belong in a 
tutorial - assuming the guy who wrote the tutorial understood what he 
was doing.

As for the stale java-doc though, I'm sure patches would be welcome ;) 
Its a group of volunteers all scratching their own itches here, so its 
likely you will find things like that. Best bet is to pitch in when you 
see it, and I'm sure one of the commiters will apply your patch if its 
appropriate.

- Mark

ChadDavis wrote:
> In fact, the search method used to populate the collector used in that
> sample code also claims to be low level.  It suggests using the
> IndexSearcher.search( query ) method instead, but that method is deprecated.
>
> Lower-level search API.
>   
>> HitCollector.collect(int,float) is called for every matching document.
>>
>> Applications should only use this if they need *all* of the matching
>> documents. The high-level search API (Searcher.search(Query)) is usually
>> more efficient, as it skips non-high-scoring hits.
>>
>> Note: The score passed to this method is a raw score. In other words, the
>> score will not necessarily be a float whose value is between 0 and 1.
>>
>>     
> Is this just stale documentation ?
>
> On Sun, Nov 9, 2008 at 3:28 PM, ChadDavis <chadmichaeldavis@gmail.com>wrote:
>
>   
>> The sample code uses a ScoreDoc array to hold the hits.
>>
>>     ScoreDoc[] hits = collector.topDocs().scoreDocs;
>>
>> But the JavaDoc says "Expert: Returned by low-level search
>> implementations."  Why would the tutorial sample code use an "expert" api?
>>
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 09 23:05:56 2008
Return-Path: <java-user-return-37058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85207 invoked from network); 9 Nov 2008 23:05:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Nov 2008 23:05:56 -0000
Received: (qmail 74119 invoked by uid 500); 9 Nov 2008 23:05:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74092 invoked by uid 500); 9 Nov 2008 23:05:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74080 invoked by uid 99); 9 Nov 2008 23:05:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 15:05:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.18 as permitted sender)
Received: from [209.85.217.18] (HELO mail-gx0-f18.google.com) (209.85.217.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 23:04:38 +0000
Received: by gxk11 with SMTP id 11so13901gxk.5
        for <java-user@lucene.apache.org>; Sun, 09 Nov 2008 15:05:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=VRrupJxMef+RxB99h2DuuNRrQKMAh8PD+NQkfEXiw8k=;
        b=A4yR/LsIxwbJfj/s9EiBwsPlLdxPcnDCThSbdYVpjhE22r70/XIdZ6jIIlwQjJJy34
         ogNjksT/kIxEX0b/Q1A+vSbrB1+FvsFB84FNpTzLQZYZ2FVtApYtLwLOZ14qrCzM7Cfi
         gAReNoBKR8hnAcEBwLVrJwv50egsZKIKorrlk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=a4ABFyO+0O1Q2kxOVnr1odg69v1bDmLJEmPJMuIehZsXN+P6Q092GqdGaONtqEH5rH
         ckiY/fZiPs9ZwvAF34Rje2dm0T9nagsUg2Hn0xki+TI6LeZP07cLMeZs3YSHM43dAw/s
         MaKWsNin+xo9DkqbKViJdzZfwPJRb6Vmg8vrM=
Received: by 10.90.70.6 with SMTP id s6mr5469498aga.48.1226271920205;
        Sun, 09 Nov 2008 15:05:20 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 39sm7053929agb.23.2008.11.09.15.05.19
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 09 Nov 2008 15:05:19 -0800 (PST)
Message-ID: <49176CAF.9060609@gmail.com>
Date: Sun, 09 Nov 2008 18:05:19 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: ScoreDoc
References: <4fe4c4f50811091428n717c0b2j99a3086fc87c5e7b@mail.gmail.com> <4fe4c4f50811091436j10091c24la9ed9e59a3ad5ca1@mail.gmail.com> <49176AE5.4000100@gmail.com>
In-Reply-To: <49176AE5.4000100@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Excuse me. Some unchecked logic there concerning HitCollector. A 
HitCollector hits all matching documents, not all documents. Sometimes 
that can be a lot. With TopDocs, you only ask for the Top scoring 
documents, which is usually a lesser number than all matching docs, and 
generally what people are interested in rather than all matching docs. 
Sorry for the confusion there - need to double check what I write...

Mark Miller wrote:
> Their is definitely some stale javadoc in Lucene here and there. All 
> of what your talking about has been shaken up recently with the 
> deprecation of Hits. Hits used to pretty much be considered the 
> non-expert API, but its been tossed in favor of the TopDoc API's.
>
> The HitCollector stuff has been marked expert because a lot of people 
> get into trouble using something that hits every doc in the index on a 
> search, not just the matching docs from the search. If you don't 
> understand whats going on, you can, and many have, make some pretty 
> slow code. The expert stuff just means, understand whats going on 
> before you start to play here ;) I don't necessarily think it doesn't 
> belong in a tutorial - assuming the guy who wrote the tutorial 
> understood what he was doing.
>
> As for the stale java-doc though, I'm sure patches would be welcome ;) 
> Its a group of volunteers all scratching their own itches here, so its 
> likely you will find things like that. Best bet is to pitch in when 
> you see it, and I'm sure one of the commiters will apply your patch if 
> its appropriate.
>
> - Mark
>
> ChadDavis wrote:
>> In fact, the search method used to populate the collector used in that
>> sample code also claims to be low level.  It suggests using the
>> IndexSearcher.search( query ) method instead, but that method is 
>> deprecated.
>>
>> Lower-level search API.
>>  
>>> HitCollector.collect(int,float) is called for every matching document.
>>>
>>> Applications should only use this if they need *all* of the matching
>>> documents. The high-level search API (Searcher.search(Query)) is 
>>> usually
>>> more efficient, as it skips non-high-scoring hits.
>>>
>>> Note: The score passed to this method is a raw score. In other 
>>> words, the
>>> score will not necessarily be a float whose value is between 0 and 1.
>>>
>>>     
>> Is this just stale documentation ?
>>
>> On Sun, Nov 9, 2008 at 3:28 PM, ChadDavis 
>> <chadmichaeldavis@gmail.com>wrote:
>>
>>  
>>> The sample code uses a ScoreDoc array to hold the hits.
>>>
>>>     ScoreDoc[] hits = collector.topDocs().scoreDocs;
>>>
>>> But the JavaDoc says "Expert: Returned by low-level search
>>> implementations."  Why would the tutorial sample code use an 
>>> "expert" api?
>>>
>>>
>>>
>>>     
>>
>>   
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 05:34:02 2008
Return-Path: <java-user-return-37059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92777 invoked from network); 10 Nov 2008 05:34:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 05:34:02 -0000
Received: (qmail 60211 invoked by uid 500); 10 Nov 2008 05:34:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60184 invoked by uid 500); 10 Nov 2008 05:34:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60173 invoked by uid 99); 10 Nov 2008 05:34:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 21:34:03 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 05:32:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1KzPOv-0003p9-4S
	for java-user@lucene.apache.org; Sun, 09 Nov 2008 21:33:25 -0800
Message-ID: <20414568.post@talk.nabble.com>
Date: Sun, 9 Nov 2008 21:33:25 -0800 (PST)
From: fernanvi <fernandovillar2000@hotmail.com>
To: java-user@lucene.apache.org
Subject: Get a Document by id
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fernandovillar2000@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello.
I am trying to obtain a Document to work directly on it.
I have already the id number, but I do not know obtain like the object
Document from this number id.
...
			
while (td.next()) {
int docNum = td.doc();// document number
.....

I need get the docNum Document.

Thanks
-- 
View this message in context: http://www.nabble.com/Get-a-Document-by-id-tp20414568p20414568.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 05:52:13 2008
Return-Path: <java-user-return-37060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 919 invoked from network); 10 Nov 2008 05:52:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 05:52:13 -0000
Received: (qmail 67489 invoked by uid 500); 10 Nov 2008 05:52:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67452 invoked by uid 500); 10 Nov 2008 05:52:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67441 invoked by uid 99); 10 Nov 2008 05:52:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 21:52:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 05:50:52 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2194781fgb.27
        for <java-user@lucene.apache.org>; Sun, 09 Nov 2008 21:51:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=cZwuWsTJNWReNiPLurSa4eYCw3imrkZitGGjzfKtt3M=;
        b=Kd/r+g7AmeYIJBiCKi3p0eOjRKKvUmAAPgDHTDdVGhQLd0psE+Tyc9rx9t77LtRs/F
         D/w8jX5/MONaPtLu7/Qa103nEybuj/UPYIL4HimKs1On+W64j3FhXmCAb/rYHgJ2/IAR
         kUsn5f6sRHJKYtmU7LWAgdyI+Y3lVms4D40zQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=jGMkCL48S18+uWUA/47NxNX7OklX/Rdyf+KDk7481qu0nBqCs99AzNve8RseqhPiuE
         ZiMZeyofTMckd1XkG20BE3NnLEbeR9cy2fcuwkm+ITl/fuGYQg4xg5QbN2Y6KOiTnSlA
         T7Uh/Q0g0x2NFCLMCq4MI18x8i0+o/n2i9IZU=
Received: by 10.103.12.8 with SMTP id p8mr3452959mui.44.1226296294255;
        Sun, 09 Nov 2008 21:51:34 -0800 (PST)
Received: by 10.103.225.1 with HTTP; Sun, 9 Nov 2008 21:51:34 -0800 (PST)
Message-ID: <295da8fe0811092151q31d15e74r20cb12d3e4ebedfa@mail.gmail.com>
Date: Mon, 10 Nov 2008 11:21:34 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Get a Document by id
In-Reply-To: <20414568.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74370_23367116.1226296294256"
References: <20414568.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74370_23367116.1226296294256
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

if you have the document number then you can get the document by using
searcher = getSearcher();
document = searcher.doc(document number);

Prabin


On Mon, Nov 10, 2008 at 11:03 AM, fernanvi
<fernandovillar2000@hotmail.com>wrote:

>
> Hello.
> I am trying to obtain a Document to work directly on it.
> I have already the id number, but I do not know obtain like the object
> Document from this number id.
> ...
>
> while (td.next()) {
> int docNum = td.doc();// document number
> .....
>
> I need get the docNum Document.
>
> Thanks
> --
> View this message in context:
> http://www.nabble.com/Get-a-Document-by-id-tp20414568p20414568.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_74370_23367116.1226296294256--

From java-user-return-37061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 06:22:48 2008
Return-Path: <java-user-return-37061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21108 invoked from network); 10 Nov 2008 06:22:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 06:22:48 -0000
Received: (qmail 85775 invoked by uid 500); 10 Nov 2008 06:22:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85729 invoked by uid 500); 10 Nov 2008 06:22:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85718 invoked by uid 99); 10 Nov 2008 06:22:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Nov 2008 22:22:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.8.213] (HELO web110313.mail.gq1.yahoo.com) (67.195.8.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Nov 2008 06:21:30 +0000
Received: (qmail 88294 invoked by uid 60001); 10 Nov 2008 06:21:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=hBzbo5wx/pKwpiG0CEwpsdBnf3zaRyxQcIENEIw7JeDh7nv4lCsKxANtqzLRdd+K2mhQ5Utdb1PsUXglCG06M2MzaMk+QDD3RR22mG72eYa4d+6wU7XTDRRN9+nQSSNq6w7BlUrRoVBCD6lL1Y4VuL8E15LyfXPbJlPxpsIYqqY=;
X-YMail-OSG: 9oFini8VM1kLBSFNrrw1I..g3dClpMn0i2XVjvsPgUDxymoljAMv8W26ozwIkMu4A8DXOQLk7PPPnVUIoKs1wBZaxPEDHEYB6g6ufHY49olXSCWRtCb2L2G.F1XYVqL0kX8Qm6ylasUetQUFNXCCQ0.tPy581WsLohatqcA3XGATRQRWRVUnkdtEAQ--
Received: from [116.197.178.83] by web110313.mail.gq1.yahoo.com via HTTP; Sun, 09 Nov 2008 22:21:09 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Sun, 9 Nov 2008 22:21:09 -0800 (PST)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Reply-To: techcool.kumar@yahoo.com
Subject: Order the index by timestamp field and Get n documents
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <962306.88258.qm@web110313.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
   In my index, there is a field called timestamp which is long value of date. I am  trying to get sort all documents by timestamp and get N documents. 
I am trying to find a way to create a query like "timestamp > 0" and then order the result by timestamp and get N fields. However I am not able to do that. Suggest me the best way. Or there are any lowlevel method available for the same.

I am using Lucene 2.3.1 and looking into method search(Weight weight, Filter filter, int nDocs, Sort sort) in IndexSearcher. Trying to know how to create a Weight object.

Anyway, I would really appreciate your suggestion....

-RB


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 11:35:50 2008
Return-Path: <java-user-return-37062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38671 invoked from network); 10 Nov 2008 11:35:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 11:35:49 -0000
Received: (qmail 84431 invoked by uid 500); 10 Nov 2008 11:35:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84148 invoked by uid 500); 10 Nov 2008 11:35:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83589 invoked by uid 99); 10 Nov 2008 11:35:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 03:35:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.202.226.200] (HELO gate.abas.de) (212.202.226.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 11:34:23 +0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.0/8.14.0) with ESMTP id mAABYXs5018966
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 12:34:33 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 5/gate.abas.de/smtp-gw/mscan; Mon Nov 10 12:34:33 2008
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: Boosting results
Date: Mon, 10 Nov 2008 12:34:24 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <a057f2cf0811070754i35b49cc2jacbf2ac0a70cc978@mail.gmail.com> <C6710C8E-2574-49B2-BE94-C5F6C3FD7BA6@mikemccandless.com>
In-Reply-To: <C6710C8E-2574-49B2-BE94-C5F6C3FD7BA6@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200811101234.24671.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 07 November 2008 18:46:17 Michael McCandless wrote:
>
> Sorting populates the field cache (internal to Lucene) for that
> field, =A0 meaning it loads all values for all docs and holds them in
> memory. This makes the first query slow, and, consumes RAM, in
> proportion to how large your index is.

Can you direct me to the API how to access these cached values?
I'd like to have a function like: "List all unique values of the=20
categories (A, B, C...) for documents that match this query".

i.e. for a query "text:john" show up categories=3D(A,B)

Doc 1: category=3DA text=3Djohn
Doc 2: category=3DB text=3Dmary
Doc 3: category=3DB text=3Djohn
Doc 4: category=3DC text=3Dmary

This is intended for search refinement (I use about 200 categories).
Sorry for hijacking this thread.

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 12:01:29 2008
Return-Path: <java-user-return-37063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44598 invoked from network); 10 Nov 2008 12:01:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 12:01:28 -0000
Received: (qmail 17255 invoked by uid 500); 10 Nov 2008 12:01:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16878 invoked by uid 500); 10 Nov 2008 12:01:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16867 invoked by uid 99); 10 Nov 2008 12:01:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 04:01:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.8.203] (HELO web110303.mail.gq1.yahoo.com) (67.195.8.203)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Nov 2008 12:00:09 +0000
Received: (qmail 53319 invoked by uid 60001); 10 Nov 2008 12:00:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=isTJYw7UHBV/VK25jrRi6koZperxvbbACTtUQSeof0Umw1kxANk1lj1BKXG+JIXTwsH8d30tJZTKO6OSXFQ/NH1zgEv4Q55kWAk3k2U4OpghpYuJtyStzOkUyJlWAuSg5RPtC8a2OMhr6Ml1wyInP6Dury+L+k0L+Rjj+bk8+Ks=;
X-YMail-OSG: mhzDKBgVM1kntFAE5.8i7hMoDIkAY48L5429fg.ZKP0V3edm0uU8sA0hHtbuve_1ZTlYZsy8fV8AEa1dqj23kjHrGnjMQavOswA2MC.acTp5mIUKGdTN1zL82sMfDCxaZOy0rLV8bfLIGyR9xNMfFa27iJdJMTXNeyXBUgaYKCKaBHigYi3ehqOC1i9V6q_VAylXuYgW8MM7G74-
Received: from [116.197.178.83] by web110303.mail.gq1.yahoo.com via HTTP; Mon, 10 Nov 2008 04:00:50 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Mon, 10 Nov 2008 04:00:50 -0800 (PST)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Reply-To: techcool.kumar@yahoo.com
Subject: Re: Order the index by timestamp field and Get n documents
To: java-user@lucene.apache.org
In-Reply-To: <962306.88258.qm@web110313.mail.gq1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <807889.52342.qm@web110303.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Could able to do that using range query

String end = "253373251260000";//i.e. 11/30/9999, assume that this is max end date

Term endTerm = new Term("timestamp",end);
RangeQuery rangeQuery = new RangeQuery(null,endTerm,true);
		
Sort sort = new Sort("timestamp",true);
Filter dupFilter = new DuplicateFilter("id");
Hits hits = searcher.search(rangeQuery,dupFilter,sort);




--- On Mon, 11/10/08, Cool The Breezer <techcool.kumar@yahoo.com> wrote:

> From: Cool The Breezer <techcool.kumar@yahoo.com>
> Subject: Order the index by timestamp field and Get n documents
> To: java-user@lucene.apache.org
> Date: Monday, November 10, 2008, 1:21 AM
> Hi,
>    In my index, there is a field called timestamp which is
> long value of date. I am  trying to get sort all documents
> by timestamp and get N documents. 
> I am trying to find a way to create a query like
> "timestamp > 0" and then order the result by
> timestamp and get N fields. However I am not able to do
> that. Suggest me the best way. Or there are any lowlevel
> method available for the same.
> 
> I am using Lucene 2.3.1 and looking into method
> search(Weight weight, Filter filter, int nDocs, Sort sort)
> in IndexSearcher. Trying to know how to create a Weight
> object.
> 
> Anyway, I would really appreciate your suggestion....
> 
> -RB
> 
> 
>       
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 12:56:27 2008
Return-Path: <java-user-return-37064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65575 invoked from network); 10 Nov 2008 12:56:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 12:56:27 -0000
Received: (qmail 69504 invoked by uid 500); 10 Nov 2008 12:56:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69470 invoked by uid 500); 10 Nov 2008 12:56:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69459 invoked by uid 99); 10 Nov 2008 12:56:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 04:56:27 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 12:55:08 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1531581qwi.53
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 04:55:39 -0800 (PST)
Received: by 10.215.12.12 with SMTP id p12mr6428323qai.354.1226321739735;
        Mon, 10 Nov 2008 04:55:39 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm9016620ywo.7.2008.11.10.04.55.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 10 Nov 2008 04:55:32 -0800 (PST)
Message-Id: <F9A5F87E-1574-401A-989F-025D85CB5E22@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <200811101234.24671.wzzelfzzel@abas.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Boosting results
Date: Mon, 10 Nov 2008 07:55:31 -0500
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <a057f2cf0811070754i35b49cc2jacbf2ac0a70cc978@mail.gmail.com> <C6710C8E-2574-49B2-BE94-C5F6C3FD7BA6@mikemccandless.com> <200811101234.24671.wzzelfzzel@abas.de>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Well .. the FieldCache API is documented here (for 2.4.0):

     http://lucene.apache.org/java/2_4_0/api/core/org/apache/lucene/search/FieldCache.html

EG you can load ints (for example) like this:

     FieldCache.DEFAULT.getInts(reader, "myfield");

This returns an array mapping docID --> int value for that field.  You  
need to ensure that field has only 1 token per document (and that it  
parses to an int, for this example).

But: it's slow to load a field for the first time.  LUCENE-1231  
(column-stride fields) aims to greatly speed up the load time.

It's also memory-consuming.

Finally, you might want to instead look at Solr, which provides facet  
counting out of the box, rather than roll your own...

Mike

Stefan Trcek wrote:

> On Friday 07 November 2008 18:46:17 Michael McCandless wrote:
>>
>> Sorting populates the field cache (internal to Lucene) for that
>> field,   meaning it loads all values for all docs and holds them in
>> memory. This makes the first query slow, and, consumes RAM, in
>> proportion to how large your index is.
>
> Can you direct me to the API how to access these cached values?
> I'd like to have a function like: "List all unique values of the
> categories (A, B, C...) for documents that match this query".
>
> i.e. for a query "text:john" show up categories=(A,B)
>
> Doc 1: category=A text=john
> Doc 2: category=B text=mary
> Doc 3: category=B text=john
> Doc 4: category=C text=mary
>
> This is intended for search refinement (I use about 200 categories).
> Sorry for hijacking this thread.
>
> Stefan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 13:26:56 2008
Return-Path: <java-user-return-37065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76473 invoked from network); 10 Nov 2008 13:26:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 13:26:55 -0000
Received: (qmail 97322 invoked by uid 500); 10 Nov 2008 13:26:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97028 invoked by uid 500); 10 Nov 2008 13:26:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97017 invoked by uid 99); 10 Nov 2008 13:26:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 05:26:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.53] (HELO smtp2.bedag.ch) (192.112.254.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Nov 2008 13:25:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp2.bedag.ch (Postfix) with ESMTP id BA0C973986
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 14:25:47 +0100 (CET)
X-Quarantine-ID: <6pJlrk7-4HSY>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C94337.D5F93436"
Subject: Highlighter and Phrase Queries
Date: Mon, 10 Nov 2008 14:25:44 +0100
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB02A4C74A@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Highlighter and Phrase Queries
Thread-Index: AclDN9X0+JKLFpl+SQypHnVpwf50OA==
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Nov 2008 13:25:45.0033 (UTC) FILETIME=[D60EDB90:01C94337]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C94337.D5F93436
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi@all

=20

I am searching for a solution to make the Highlighter run property in
combination with phrase queries.

=20

I want to highlight text with a phrase query like "windows printserver",
the following highlighted:

=20

"windows printservers" are good blah blah "windows" manages
"printserver" blah blah, so the phrases

and the single terms are highlighted, but I just want to highlight the
phrases. How could this be done?

=20

Thanks in advance

=20

Mirko

=20


------_=_NextPart_001_01C94337.D5F93436--

From java-user-return-37066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 13:45:41 2008
Return-Path: <java-user-return-37066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85324 invoked from network); 10 Nov 2008 13:45:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 13:45:41 -0000
Received: (qmail 22109 invoked by uid 500); 10 Nov 2008 13:45:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22069 invoked by uid 500); 10 Nov 2008 13:45:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22058 invoked by uid 99); 10 Nov 2008 13:45:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 05:45:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 13:44:22 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1546948qwi.53
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 05:44:54 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=G9creyMO+iz+U0/KgFzgInUShtg4mdvevKlwlGOsqqE=;
        b=dOG+Wfm0hbq31LfPtuh3qEzNGGBWM1yzXZuNnXpJEOAD0auoEq/2Q8o8AlXf1yIhes
         PAcjEKMceJXWbe2z6Un6/T0BlVEbxw9FRYN8znnErVLTRpQCmt4vvMh7NqqcENkEb72P
         83si1Prx9dT9eEumPHApZLkh/zIv6h5OsXFPU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=q2OfLXzgKZGyydTwGTnr80EX/NLpaTURCYnHfTKSdrv7wcjdmJ/5yIAZ1iDy2zWhpw
         5zr2gqwRZWVEPJOuTUoWGfOyBHYEL9X0sZmho+e7Of4inf+5df9ldmAuZXj2sylQGvRZ
         ZmdEYs97x0t6Lxpn869W/dNG8zsWyJIrhLHsE=
Received: by 10.214.148.20 with SMTP id v20mr6482587qad.71.1226324694693;
        Mon, 10 Nov 2008 05:44:54 -0800 (PST)
Received: from ?10.159.154.75? ([32.142.219.227])
        by mx.google.com with ESMTPS id 5sm2420303qwg.9.2008.11.10.05.44.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 10 Nov 2008 05:44:54 -0800 (PST)
Message-Id: <99695E91-C7CB-4D6C-A8DD-300BB842FE18@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB02A4C74A@A99A-EMS-01VS2.ad.bedag.ch>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5F136)
Mime-Version: 1.0 (iPhone Mail 5F136)
Subject: Re: Highlighter and Phrase Queries
Date: Mon, 10 Nov 2008 08:44:45 -0500
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C74A@A99A-EMS-01VS2.ad.bedag.ch>
X-Virus-Checked: Checked by ClamAV on apache.org

Check out the SpanScorer.

- Mark


On Nov 10, 2008, at 8:25 AM, "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch 
 > wrote:

> Hi@all
>
>
>
> I am searching for a solution to make the Highlighter run property in
> combination with phrase queries.
>
>
>
> I want to highlight text with a phrase query like "windows  
> printserver",
> the following highlighted:
>
>
>
> "windows printservers" are good blah blah "windows" manages
> "printserver" blah blah, so the phrases
>
> and the single terms are highlighted, but I just want to highlight the
> phrases. How could this be done?
>
>
>
> Thanks in advance
>
>
>
> Mirko
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 13:58:53 2008
Return-Path: <java-user-return-37067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91612 invoked from network); 10 Nov 2008 13:58:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 13:58:53 -0000
Received: (qmail 43269 invoked by uid 500); 10 Nov 2008 13:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43240 invoked by uid 500); 10 Nov 2008 13:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43229 invoked by uid 99); 10 Nov 2008 13:58:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 05:58:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 13:57:34 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1414677yxj.5
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 05:58:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=VPFW9hANJcgkdG7Q/dedSmOQj9nrYX52m+acsRfzUwI=;
        b=bd5VCuMrsABOZvLhU/tI39aqzJjm1X4Lj+SUoO3oKEOkaIuApnEUy8j94DZhoEG90q
         UTV9+nUZHyBKqjrRZN6TwRKxPeFcmGAfyNaKA1lTV1SC+p+Pm6ARbFYZy+Vm9LiS3Y8D
         TmWcDaS6rHQ2P/2Rzk0J1bjzL/XFO7/HnVeGs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=L1Sv3/SaWuQkEznO3cmFIwfrphzN59hQLSxCBIyD9KHm488NWBWWowno57I7MDMN71
         mmXakMAD9D7gi9xdXttMBRK4NsjZZjKw102l5cQMavm066QONMinoOl/FEGtp9A7mPGd
         zIRvz9wUpt72nIKV9+Pr9o99PxQWgH23iY50M=
Received: by 10.90.97.16 with SMTP id u16mr2959802agb.52.1226325495139;
        Mon, 10 Nov 2008 05:58:15 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 1sm8024104agb.20.2008.11.10.05.58.14
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 10 Nov 2008 05:58:14 -0800 (PST)
Message-ID: <49183DF7.1060505@gmail.com>
Date: Mon, 10 Nov 2008 08:58:15 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boosting results
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <a057f2cf0811070754i35b49cc2jacbf2ac0a70cc978@mail.gmail.com> <C6710C8E-2574-49B2-BE94-C5F6C3FD7BA6@mikemccandless.com> <200811101234.24671.wzzelfzzel@abas.de> <F9A5F87E-1574-401A-989F-025D85CB5E22@mikemccandless.com>
In-Reply-To: <F9A5F87E-1574-401A-989F-025D85CB5E22@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
>
> But: it's slow to load a field for the first time.  LUCENE-1231 
> (column-stride fields) aims to greatly speed up the load time.
Test it out though. In some recent testing I was doing it was *way* 
faster than I thought it would be based on what I had been reading. Of 
course if every term is unique, its going to be worse, but even with 
like 10 mil docs and a few hundred thousand uniques, either I was doing 
something wrong, or even on my 4200rpm laptop hd, it loaded like nothing 
(of course even a second load and then a search is much slower than just 
a warmed search though). Was hoping to see some advantage with a payload 
implementation with LUCENE-831, but really didn't seem to...
>
> It's also memory-consuming.
>
> Finally, you might want to instead look at Solr, which provides facet 
> counting out of the box, rather than roll your own...
>
> Mike
>
> Stefan Trcek wrote:
>
>> On Friday 07 November 2008 18:46:17 Michael McCandless wrote:
>>>
>>> Sorting populates the field cache (internal to Lucene) for that
>>> field,   meaning it loads all values for all docs and holds them in
>>> memory. This makes the first query slow, and, consumes RAM, in
>>> proportion to how large your index is.
>>
>> Can you direct me to the API how to access these cached values?
>> I'd like to have a function like: "List all unique values of the
>> categories (A, B, C...) for documents that match this query".
>>
>> i.e. for a query "text:john" show up categories=(A,B)
>>
>> Doc 1: category=A text=john
>> Doc 2: category=B text=mary
>> Doc 3: category=B text=john
>> Doc 4: category=C text=mary
>>
>> This is intended for search refinement (I use about 200 categories).
>> Sorry for hijacking this thread.
>>
>> Stefan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 14:34:33 2008
Return-Path: <java-user-return-37068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11067 invoked from network); 10 Nov 2008 14:34:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 14:34:32 -0000
Received: (qmail 87269 invoked by uid 500); 10 Nov 2008 14:34:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86237 invoked by uid 500); 10 Nov 2008 14:34:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86226 invoked by uid 99); 10 Nov 2008 14:34:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 06:34:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.53] (HELO smtp2.bedag.ch) (192.112.254.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Nov 2008 14:33:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp2.bedag.ch (Postfix) with ESMTP id 405C573999
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 15:33:24 +0100 (CET)
X-Quarantine-ID: <2p+9KcqIiycd>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: Highlighter and Phrase Queries
Date: Mon, 10 Nov 2008 15:33:21 +0100
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB02A4C74B@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Highlighter and Phrase Queries
Thread-Index: AclDOqJZJaBZsSRRRG6DQfRA0o3NFwABphfQ
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C74A@A99A-EMS-01VS2.ad.bedag.ch> <99695E91-C7CB-4D6C-A8DD-300BB842FE18@gmail.com>
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Nov 2008 14:33:21.0680 (UTC) FILETIME=[48021100:01C94341]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

Thank you for your response.
Are there examples available?

Regards
Mirko

-----Urspr=FCngliche Nachricht-----
Von: Mark Miller [mailto:markrmiller@gmail.com]=20
Gesendet: Montag, 10. November 2008 14:45
An: java-user@lucene.apache.org
Betreff: Re: Highlighter and Phrase Queries

Check out the SpanScorer.

- Mark


On Nov 10, 2008, at 8:25 AM, "Sertic Mirko, Bedag" =
<Mirko.Sertic@bedag.ch=20
 > wrote:

> Hi@all
>
>
>
> I am searching for a solution to make the Highlighter run property in
> combination with phrase queries.
>
>
>
> I want to highlight text with a phrase query like "windows =20
> printserver",
> the following highlighted:
>
>
>
> "windows printservers" are good blah blah "windows" manages
> "printserver" blah blah, so the phrases
>
> and the single terms are highlighted, but I just want to highlight the
> phrases. How could this be done?
>
>
>
> Thanks in advance
>
>
>
> Mirko
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 14:38:16 2008
Return-Path: <java-user-return-37069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12739 invoked from network); 10 Nov 2008 14:38:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 14:38:16 -0000
Received: (qmail 92597 invoked by uid 500); 10 Nov 2008 14:38:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92563 invoked by uid 500); 10 Nov 2008 14:38:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92552 invoked by uid 99); 10 Nov 2008 14:38:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 06:38:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.12 as permitted sender)
Received: from [209.85.217.12] (HELO mail-gx0-f12.google.com) (209.85.217.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 14:36:58 +0000
Received: by gxk5 with SMTP id 5so113127gxk.5
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 06:37:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=qVNi4+GHSENir4A6MxhZzb43L4/1EqN3jMQYKlvbVpc=;
        b=bdBNM+416NL/RmKmNed4Gd83Xg44sBi3E26XqiU0XjyKZbFbXp7yW6bcp15eLANz3I
         458jo5UT1kujGt4VitYyDwLnVUPNJquf1xle6XSQixIDPz6k8Y+PHa2bVitDoAaglQUv
         odndLqepSlItbDqF7VG9EkGB3sd3DYygsTeeQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=NspO7lCLOByE+VJD/e6OdQfSaftuZ3daFFoFpJLAwSJFutn+UMF2R/KTyDZT4gWx+F
         J7RLijOzvUl0VxPJmaZUWIpHQ0vQBfO08qbgl4h0HhH9TNtEwHsdG2Yam41QJQfpF6rX
         bj084k8ZbNMj82nydjv/QFHG/BTnVXEAGBO2I=
Received: by 10.90.53.5 with SMTP id b5mr6036688aga.74.1226327859517;
        Mon, 10 Nov 2008 06:37:39 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 9sm8094046agc.31.2008.11.10.06.37.38
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 10 Nov 2008 06:37:38 -0800 (PST)
Message-ID: <49184733.9050706@gmail.com>
Date: Mon, 10 Nov 2008 09:37:39 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: Highlighter and Phrase Queries
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C74A@A99A-EMS-01VS2.ad.bedag.ch> <99695E91-C7CB-4D6C-A8DD-300BB842FE18@gmail.com> <1D3D7943573BD14FB024A9654EB43CCB02A4C74B@A99A-EMS-01VS2.ad.bedag.ch>
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB02A4C74B@A99A-EMS-01VS2.ad.bedag.ch>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Check out the unit tests for the highlighter and there are a bunch of 
examples.

Its pretty much the same as using the standard scorer, except that it 
requires a cached token filter so that the tokenstream can be read more 
than once.

Once you pass in the SpanScorer to the Highlighter though, it works just 
like the non phrase/span aware Highlighter.


- Mark


Sertic Mirko, Bedag wrote:
> Hi
>
> Thank you for your response.
> Are there examples available?
>
> Regards
> Mirko
>
> -----Ursprngliche Nachricht-----
> Von: Mark Miller [mailto:markrmiller@gmail.com] 
> Gesendet: Montag, 10. November 2008 14:45
> An: java-user@lucene.apache.org
> Betreff: Re: Highlighter and Phrase Queries
>
> Check out the SpanScorer.
>
> - Mark
>
>
> On Nov 10, 2008, at 8:25 AM, "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch 
>  > wrote:
>
>   
>> Hi@all
>>
>>
>>
>> I am searching for a solution to make the Highlighter run property in
>> combination with phrase queries.
>>
>>
>>
>> I want to highlight text with a phrase query like "windows  
>> printserver",
>> the following highlighted:
>>
>>
>>
>> "windows printservers" are good blah blah "windows" manages
>> "printserver" blah blah, so the phrases
>>
>> and the single terms are highlighted, but I just want to highlight the
>> phrases. How could this be done?
>>
>>
>>
>> Thanks in advance
>>
>>
>>
>> Mirko
>>
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 14:59:46 2008
Return-Path: <java-user-return-37070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21475 invoked from network); 10 Nov 2008 14:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 14:59:46 -0000
Received: (qmail 40638 invoked by uid 500); 10 Nov 2008 14:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40608 invoked by uid 500); 10 Nov 2008 14:59:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40597 invoked by uid 99); 10 Nov 2008 14:59:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 06:59:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.53] (HELO smtp2.bedag.ch) (192.112.254.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Nov 2008 14:58:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp2.bedag.ch (Postfix) with ESMTP id DA9147398E
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 15:59:09 +0100 (CET)
X-Quarantine-ID: <CnMK4P5b6o-8>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: AW: Highlighter and Phrase Queries
Date: Mon, 10 Nov 2008 15:59:07 +0100
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB02A4C74C@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: AW: Highlighter and Phrase Queries
Thread-Index: AclDQffZHrPjzEP4QRyEtvDBCpcrKAAAsZ3Q
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C74A@A99A-EMS-01VS2.ad.bedag.ch> <99695E91-C7CB-4D6C-A8DD-300BB842FE18@gmail.com> <1D3D7943573BD14FB024A9654EB43CCB02A4C74B@A99A-EMS-01VS2.ad.bedag.ch> <49184733.9050706@gmail.com>
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Nov 2008 14:59:07.0250 (UTC) FILETIME=[E13D5520:01C94344]
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, i will do.

I guess it will also work with BooleanQueries and combined =
Term/Wildcard/Phrase Queries?

-----Urspr=FCngliche Nachricht-----
Von: Mark Miller [mailto:markrmiller@gmail.com]=20
Gesendet: Montag, 10. November 2008 15:38
An: java-user@lucene.apache.org
Betreff: Re: AW: Highlighter and Phrase Queries

Check out the unit tests for the highlighter and there are a bunch of=20
examples.

Its pretty much the same as using the standard scorer, except that it=20
requires a cached token filter so that the tokenstream can be read more=20
than once.

Once you pass in the SpanScorer to the Highlighter though, it works just =

like the non phrase/span aware Highlighter.


- Mark


Sertic Mirko, Bedag wrote:
> Hi
>
> Thank you for your response.
> Are there examples available?
>
> Regards
> Mirko
>
> -----Urspr=FCngliche Nachricht-----
> Von: Mark Miller [mailto:markrmiller@gmail.com]=20
> Gesendet: Montag, 10. November 2008 14:45
> An: java-user@lucene.apache.org
> Betreff: Re: Highlighter and Phrase Queries
>
> Check out the SpanScorer.
>
> - Mark
>
>
> On Nov 10, 2008, at 8:25 AM, "Sertic Mirko, Bedag" =
<Mirko.Sertic@bedag.ch=20
>  > wrote:
>
>  =20
>> Hi@all
>>
>>
>>
>> I am searching for a solution to make the Highlighter run property in
>> combination with phrase queries.
>>
>>
>>
>> I want to highlight text with a phrase query like "windows =20
>> printserver",
>> the following highlighted:
>>
>>
>>
>> "windows printservers" are good blah blah "windows" manages
>> "printserver" blah blah, so the phrases
>>
>> and the single terms are highlighted, but I just want to highlight =
the
>> phrases. How could this be done?
>>
>>
>>
>> Thanks in advance
>>
>>
>>
>> Mirko
>>
>>
>>
>>    =20
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 15:02:25 2008
Return-Path: <java-user-return-37071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29042 invoked from network); 10 Nov 2008 15:02:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 15:02:25 -0000
Received: (qmail 45344 invoked by uid 500); 10 Nov 2008 15:02:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45312 invoked by uid 500); 10 Nov 2008 15:02:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45285 invoked by uid 99); 10 Nov 2008 15:02:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 07:02:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 15:01:05 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id EDA5871C445; Mon, 10 Nov 2008 07:01:15 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id E5B3D71C3A4
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 07:01:15 -0800 (PST)
Date: Mon, 10 Nov 2008 07:01:15 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: possible score value
In-Reply-To: <867513fe0811060259g114e2878tf0910b1d2b534335@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0811100657400.18000@radix.cryptio.net>
References: <f950edef0811060250k3efb27dbkfad217fad7a36023@mail.gmail.com>
 <867513fe0811060259g114e2878tf0910b1d2b534335@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Did you come across :
:       scoreNorm = 1.0f / topDocs.getMaxScore();
: or something of this sort in Hits?
: As per my knowledge, the initial score is more than 1 but finally the scores
: get divided by the maxScore of the matched doc set. i.e. Setting an upper
: limit of 1 (for the max scorer).

that code results in a "psuedo-normalization" that generally isn't 
meaningful -- mainly because it's normalized relative the highest scoring 
doc for that query against that index, not any absolute highest possible 
score for that query, or absolute highest possible score for that index.

scores aren't comparable from one query to the next, so normalizing 
between0 and 1 won't tell you anything meaningful -- a "normalized" score 
of "1" from query A isn't neccesarily better then a normalized score of 
0.9 from query B.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 15:03:14 2008
Return-Path: <java-user-return-37072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31947 invoked from network); 10 Nov 2008 15:03:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 15:03:13 -0000
Received: (qmail 48460 invoked by uid 500); 10 Nov 2008 15:03:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48436 invoked by uid 500); 10 Nov 2008 15:03:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48425 invoked by uid 99); 10 Nov 2008 15:03:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 07:03:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.170.184 as permitted sender)
Received: from [64.233.170.184] (HELO rn-out-0910.google.com) (64.233.170.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 15:01:55 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1768410rne.4
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 07:02:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=MKhKqkqWkwe15ESnPf542hJkE86vFFuSZQCxiY+9nlA=;
        b=GqCDMMLxMWQbRwQFEll865TSE2t7RH7lzJnNnABuoKzUEQB7ogWfsgdcvtuhFbPwe0
         jFsOYZzaDXqv5PC9bh6Mvh9sV62VpMrJ7aLyH7FOBfk4ekA/pdNswLu0sHntd4ABa4hS
         WE8gtaQZzsa37hQRyzjYuM8ZgA2ozf8eRDobg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=UVl4nsjWEkS9kKWQhcxIq1SuKj60y4/AFcvCxQsAZm0IlT5iIp8GQFPi3fvIfth9PR
         9rGNRIvQCAIqwgSO2pYvu+x+10/xBqwmsB9yAtGxq/vSpzlGIMrvoyxRRk8jqfSOz0qI
         uyYubCQ6MS+957vjl1GWnsUMikOp7+gapz+SQ=
Received: by 10.90.30.13 with SMTP id d13mr6108137agd.43.1226329357664;
        Mon, 10 Nov 2008 07:02:37 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm8116364agd.33.2008.11.10.07.02.36
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 10 Nov 2008 07:02:36 -0800 (PST)
Message-ID: <49184D0D.6060803@gmail.com>
Date: Mon, 10 Nov 2008 10:02:37 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: AW: Highlighter and Phrase Queries
References: <1D3D7943573BD14FB024A9654EB43CCB02A4C74A@A99A-EMS-01VS2.ad.bedag.ch> <99695E91-C7CB-4D6C-A8DD-300BB842FE18@gmail.com> <1D3D7943573BD14FB024A9654EB43CCB02A4C74B@A99A-EMS-01VS2.ad.bedag.ch> <49184733.9050706@gmail.com> <1D3D7943573BD14FB024A9654EB43CCB02A4C74C@A99A-EMS-01VS2.ad.bedag.ch>
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB02A4C74C@A99A-EMS-01VS2.ad.bedag.ch>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Right, it will work the same as the standard Highlighter except that it 
highlights spans and phrase queries based on position.

Sertic Mirko, Bedag wrote:
> Ok, i will do.
>
> I guess it will also work with BooleanQueries and combined Term/Wildcard/Phrase Queries?
>
> -----Ursprngliche Nachricht-----
> Von: Mark Miller [mailto:markrmiller@gmail.com] 
> Gesendet: Montag, 10. November 2008 15:38
> An: java-user@lucene.apache.org
> Betreff: Re: AW: Highlighter and Phrase Queries
>
> Check out the unit tests for the highlighter and there are a bunch of 
> examples.
>
> Its pretty much the same as using the standard scorer, except that it 
> requires a cached token filter so that the tokenstream can be read more 
> than once.
>
> Once you pass in the SpanScorer to the Highlighter though, it works just 
> like the non phrase/span aware Highlighter.
>
>
> - Mark
>
>
> Sertic Mirko, Bedag wrote:
>   
>> Hi
>>
>> Thank you for your response.
>> Are there examples available?
>>
>> Regards
>> Mirko
>>
>> -----Ursprngliche Nachricht-----
>> Von: Mark Miller [mailto:markrmiller@gmail.com] 
>> Gesendet: Montag, 10. November 2008 14:45
>> An: java-user@lucene.apache.org
>> Betreff: Re: Highlighter and Phrase Queries
>>
>> Check out the SpanScorer.
>>
>> - Mark
>>
>>
>> On Nov 10, 2008, at 8:25 AM, "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch 
>>  > wrote:
>>
>>   
>>     
>>> Hi@all
>>>
>>>
>>>
>>> I am searching for a solution to make the Highlighter run property in
>>> combination with phrase queries.
>>>
>>>
>>>
>>> I want to highlight text with a phrase query like "windows  
>>> printserver",
>>> the following highlighted:
>>>
>>>
>>>
>>> "windows printservers" are good blah blah "windows" manages
>>> "printserver" blah blah, so the phrases
>>>
>>> and the single terms are highlighted, but I just want to highlight the
>>> phrases. How could this be done?
>>>
>>>
>>>
>>> Thanks in advance
>>>
>>>
>>>
>>> Mirko
>>>
>>>
>>>
>>>     
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>   
>>     
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 15:17:37 2008
Return-Path: <java-user-return-37073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48905 invoked from network); 10 Nov 2008 15:17:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 15:17:36 -0000
Received: (qmail 68221 invoked by uid 500); 10 Nov 2008 15:17:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68189 invoked by uid 500); 10 Nov 2008 15:17:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68176 invoked by uid 99); 10 Nov 2008 15:17:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 07:17:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a8.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 15:16:14 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a8.g.dreamhost.com (Postfix) with ESMTP id BEF0B10A037
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 07:16:26 -0800 (PST)
Message-Id: <D8002EC7-006C-44E4-9C49-31FF37EFD43C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: [Announce] Call For Papers opens for ApacheCon US 2009
Date: Mon, 10 Nov 2008 10:16:25 -0500
References: <1226099157.6923.3.camel@kenny>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

If you have only 30 seconds to read this;

        Join us in celebrating the ASF's 10th Anniversary at ApacheCon!

        The Call for Papers is now open for ApacheCon US 2009, taking
        place 2-6
        November in Oakland, California. Proposals are being accepted at
        http://us.apachecon.com/c/acus2009/cfp/ and can be revised at
        anytime until
        the submissions closing deadline of 28 February 2009.

        In addition, sponsorship opportunities for both ApacheCon EU
        2009/Amsterdam
        and ApacheCon US 2009/Oakland are available. Please contact
        Delia Frees at
        delia@apachecon.com for further information.

        Please, read on...

        *******

        ApacheCon Celebrates the ASF's 10th Anniversary in Oakland,
        California,
        2-6 November 2009

        Call for Papers Opens for ApacheCon US 2009

        The Apache Software Foundation (ASF) invites submissions to its
        official
        user and developer conference, taking place 2-6 November 2009 at
        the Oakland
        Convention Center and Marriott Hotel. ApacheCon serves as a
        forum for
        showcasing the ASF's latest projects, members, and community
        initiatives.
        Offering unparalleled educational opportunities, ApacheCon's
        presentations,
        hands-on trainings, and sessions address key technology,
        development,
        business/community, and licensing issues in Open Source.

        The wide range of activities offered at ApacheCon promotes the
        exchange of
        ideas amongst ASF Members, committers, innovators, developers,
        vendors, and
        users interested in the future of Open Source technology. The
        conference
        program includes peer-reviewed sessions, trainings/workshops,
        and select
        invited keynote presentations and speakers.

        Conference Themes and Topics

        Building on ten years of success, ApacheCon returns to the Bay
        Area for the
        10th anniversary of the Apache Software Foundation. Comprising
        some of the
        most active and recognized developers in the Open Source
        community,
        ApacheCon provides an influential platform for dialogue between
        Open Source
        developers and users, traversing a wide range of ideas,
        expertise, and
        personalities.

        ApacheCon welcomes submissions across many fields, geographic
        locations, and
        areas of development. The breadth of the Apache community lends
        itself to
        conference content that is somewhat loosely-structured, with
        common themes
        of interest addressing groundbreaking technologies and emerging
        trends, best
        practices (from development to deployment), case studies and
        lessons learned
        (tips, tools, and tricks). In addition, ApacheCon will continue
        to offer its
        highly popular, two-day intensive trainings; certifications of
        completion
        will be distributed to those who fulfill all the training
        requirements.

        Topics appropriate for submission are manifold, and may include
        but are not
        restricted to: Apache HTTP server (installation, configuration,
        migration,
        and more); ASF-wide projects (including Lucene, Hadoop,
        Jackrabbit, and
        Maven); Scripting languages and dynamic content (such as Java,
        Perl, Python,
        Ruby, XSL, and PHP); Security and e-commerce (performance
        tuning, load
        balancing and high availability); New technologies (including
        broader
        initiatives such as Web Services and Web 2.0); ASF-Incubated
        projects (such
        as Sling, UIMA, and Shindig); and Business/Community issues
        (Open Source
        driven business models, open development, enterprise adoption,
        and more).

        Submission Guidelines

        Submissions must include; =96 Session title - Speaker name -
        Speaker biography
        - Session description - Format and duration - Audience expertise
        level

        Full details are available online on the CFP page at [WWW]
        http://us.apachecon.com/c/acus2009/cfp/

        Types of Presentations; - Trainings/Workshops - General Sessions
        - Case
        Studies/Industry Profiles - Corporate Showcases & Demonstrations
        - Fast
        Feather (short) sessions - Birds of a Feather discussions -
        Invited
        Keynotes/Panels/Speakers

        Pre-Conference Trainings/Workshops

        Held on the first two days of the conference (2-3 November
        2009), ApacheCon
        trainings are available at a registration fee beyond the regular
        conference
        fee. Proposals may be submitted for half-day (3 hours), full-day
        (6 hours),
        or two-day (12 hours) training sessions. These proposed
        tutorials should be
        aimed at providing in-depth, hands-on development experience or
        related
        continuing education. Training submissions are welcome at
        beginner,
        intermediate, and expert levels.

        General Sessions include presentations on practical development
        applications, insight into high-interest projects, best
        practices and key
        advances, overcoming implementation challenges, and industry
        innovations.
        Especially welcome are submissions that extend participants'
        understanding
        the role of ASF projects and their influence on the Open Source
        community at
        large. General Sessions are scheduled for 50 minutes and are
        accessible to
        all conference delegates.

        Case Study/Industry Profile

        Practitioners are invited to submit presentations that focus on
        how
        implementing particular ASF technologies led to improved
        products/solutions,
        service offerings, changes in work practices, among other
        successes.
        Proposals that highlight overcoming interesting challenges in
        application
        design and developing innovative frameworks using multiple ASF
        projects are
        particularly encouraged. NOTE: Marketing-oriented submissions
        aimed at
        promoting specific organizations or products will not be
        accepted.

        Invited Keynotes/Panels/Speakers

        Each conference the ApacheCon Planning team invites select
        presenters
        dealing with engaging, dialectical, and challenging subjects to
        present in
        keynote and/or panel formats. Topics include cutting-edge
        technology
        development, industry leadership, hot or emerging trends,
        opinions on
        controversial issues, insight on technology paradigms, and
        contrasting
        viewpoints in complementary professional areas. Those interested
        in
        suggesting a candidate for an invited speaker opportunity should
        submit a
        brief proposal with the speaker's name, affiliation,
        background/bio,
        overview of topics of interest, and contact information.

        Birds of a Feather (BoF) sessions and Fast Feather Track talks
        are selected
        by separate processes, nearer to the beginning of the
        conference.

        Proposals are now being accepted at
        http://us.apachecon.com/c/acus2009/cfp/
        and can be revised at anytime until the submissions closing
        deadline of 28
        February 2009.

        In addition, sponsorship opportunities for both ApacheCon EU
        2009/Amsterdam
        and ApacheCon US 2009/Oakland are available. Please contact
        Delia Frees at
        delia@apachecon.com for further information.

        ApacheCon US 2009 is co-produced by the Apache Software
        Foundation and Stone
        Circle Productions. The ApacheCon Planning team comprises ASF
        Members from
        all over the world working on a wholly-volunteer basis. For more
        information, visit http://us.apachecon.com/c/acus2009/
--=20
Thorsten Scherler
thorsten.at.apache.org
Open Source Java                      consulting, training and solutions


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 18:21:41 2008
Return-Path: <java-user-return-37074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51834 invoked from network); 10 Nov 2008 18:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 18:21:40 -0000
Received: (qmail 67859 invoked by uid 500); 10 Nov 2008 18:21:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67826 invoked by uid 500); 10 Nov 2008 18:21:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67815 invoked by uid 99); 10 Nov 2008 18:21:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 10:21:40 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.13.43 as permitted sender)
Received: from [64.18.13.43] (HELO chip2og53.obsmtp.com) (64.18.13.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Nov 2008 18:20:20 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by chip2ob53.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSRh7Aeskz634JjV2/PM9zU7rkrj2P58H@postini.com; Mon, 10 Nov 2008 10:21:03 PST
Received: from d01smtp06.Mi8.com ([172.16.1.239]) by Outbound02.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 10 Nov 2008 13:18:41 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by d01smtp06.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 10 Nov 2008 13:18:41 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.118]) with Microsoft Exchange Server HTTP-DAV ;
 Mon, 10 Nov 2008 18:18:40 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Mon, 10 Nov 2008 10:18:38 -0800
Subject: Re: Term numbering and range filtering
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C53DBAFE.127E%tsturge@hi5.com>
Thread-Topic: Term numbering and range filtering
Thread-Index: AclDYMBcCRlzmQmnr06r3d/FMFKsOw==
In-Reply-To: <93F80A5D-A6C3-4873-92D2-2E7CE568023A@mikemccandless.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="ISO-8859-1"
Content-transfer-encoding: quoted-printable
X-OriginalArrivalTime: 10 Nov 2008 18:18:41.0070 (UTC) FILETIME=[C23144E0:01C94360]
X-TM-AS-Product-Ver: SMEX-7.0.0.1345-5.5.1027-16272.001
X-TM-AS-Result: No--30.494200-8.000000-31
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, that is a significant issue. What I'm coming to realize is that either
I will end up with something like

class MultiFilter {
   String field;
   private int[] termInDoc;
   Map<Term,int> termToInt;
   ...
}

which can be entirely built on the current lucene APIs but has significantl=
y
more overhead (the termToInt mapping in particular and the need to construc=
t
the mapping and array on startup)


Or I can go deep into the guts and add a data file per-segment with a forma=
t
something like

int version
int numFields
(int fieldNum, long offset) ^ numFields
(int termForDoc) ^ (maxDocs * numFields)

and add something to FieldInfo  like  boolean storeMultiFilter;
and FieldInfos something like STORE_MULTIFILTER =3D 0x40; I'd need to add
an int termNum to the .tis file as well.

This is clearly a lot more work than the first solution, but it is a lot
nicer to deal with as well. Is this interesting to anyone other than me?

Tim




On 11/9/08 12:23 PM, "Michael McCandless" <lucene@mikemccandless.com> wrote=
:

>=20
> Conceivably, TermInfosReader could track the sequence number of each
> term.
>=20
> A seek/skipTo would know which sequence number it just jumped too,
> because the index is regular (every 128 terms by default), and then
> each next() call could increment that.  Then retrieving this number
> would be as costly as calling eg IndexReader.docFreq(Term) is now.
>=20
> But I'm not sure how a multi-segment index  would work, ie how would
> MultiSegmentReader compute this for its terms?  Or maybe you'd just do
> this per-segment?
>=20
> Mike
>=20
> Tim Sturge wrote:
>=20
>> Hi,
>>=20
>> I=B9m wondering if there is any easy technique to number the terms in
>> an index
>> (By number I mean map a sequence of terms to a contiguous range of
>> integers
>> and map terms to these numbers efficiently)
>>=20
>> Looking at the Term class and the .tis/.tii index format it appears
>> that the
>> terms are stored in an ordered and prefix-compressed format, but
>> while there
>> are pointers from a term to the .frq and .prx files, neither is really
>> suitable as a sequence number.
>>=20
>> The reason I have this question is that I am writing a multi-filter
>> for
>> single term fields. My index contains many fields for which each
>> document
>> contains a single term (e.g. date, zipcode, country) and I need to
>> perform
>> range queries or set matches over these fields, many of which are very
>> inclusive (they match >10% of the total documents)
>>=20
>> A cached RangeFilter works well when there are a small number of
>> potential
>> options (e.g. for countries) but when there are many options
>> (consider a
>> date range or a set of zipcodes) there are too many potential
>> choices to
>> cache each possibility and it is too inefficient to build a filter
>> on the
>> fly for each query (as you have to visit 10% of documents to build the
>> filter despite the query itself matching 0.1%)
>>=20
>> Therefore I was considering building a int[reader.maxDocs()] array
>> for each
>> field and putting into it the term number for each document. This
>> relies on
>> the fact that each document contains only a single term for this
>> field, but
>> with it I should be able to quickly construct a =B3multi-filter=B2 (that
>> is,
>> something that iterates the array and checks that the term is in the
>> range
>> or set).
>>=20
>> Right now it looks like I can do some very ugly surgery and perhaps
>> use the
>> offset to the prx file even though it is not contiguous. But I=B9m
>> hoping
>> there is a better technique that I=B9m just not seeing right now.
>>=20
>> Thanks,
>>=20
>> Tim
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 18:55:02 2008
Return-Path: <java-user-return-37075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66238 invoked from network); 10 Nov 2008 18:55:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 18:55:02 -0000
Received: (qmail 8378 invoked by uid 500); 10 Nov 2008 18:55:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8347 invoked by uid 500); 10 Nov 2008 18:55:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8336 invoked by uid 99); 10 Nov 2008 18:55:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 10:55:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 18:53:43 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id mAAIsNZu066705
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 19:54:23 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Term numbering and range filtering
Date: Mon, 10 Nov 2008 19:54:23 +0100
User-Agent: KMail/1.9.10
References: <C53DBAFE.127E%tsturge@hi5.com>
In-Reply-To: <C53DBAFE.127E%tsturge@hi5.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200811101954.24244.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Tim,

I didn't follow all the details, so this may be somewhat off,
but did you consider using TermVectors?

Regards,
Paul Elschot


Op Monday 10 November 2008 19:18:38 schreef Tim Sturge:
> Yes, that is a significant issue. What I'm coming to realize is that
> either I will end up with something like
>
> class MultiFilter {
>    String field;
>    private int[] termInDoc;
>    Map<Term,int> termToInt;
>    ...
> }
>
> which can be entirely built on the current lucene APIs but has
> significantly more overhead (the termToInt mapping in particular and
> the need to construct the mapping and array on startup)
>
>
> Or I can go deep into the guts and add a data file per-segment with a
> format something like
>
> int version
> int numFields
> (int fieldNum, long offset) ^ numFields
> (int termForDoc) ^ (maxDocs * numFields)
>
> and add something to FieldInfo  like  boolean storeMultiFilter;
> and FieldInfos something like STORE_MULTIFILTER =3D 0x40; I'd need to
> add an int termNum to the .tis file as well.
>
> This is clearly a lot more work than the first solution, but it is a
> lot nicer to deal with as well. Is this interesting to anyone other
> than me?
>
> Tim
>
> On 11/9/08 12:23 PM, "Michael McCandless" <lucene@mikemccandless.com>=20
wrote:
> > Conceivably, TermInfosReader could track the sequence number of
> > each term.
> >
> > A seek/skipTo would know which sequence number it just jumped too,
> > because the index is regular (every 128 terms by default), and then
> > each next() call could increment that.  Then retrieving this number
> > would be as costly as calling eg IndexReader.docFreq(Term) is now.
> >
> > But I'm not sure how a multi-segment index  would work, ie how
> > would MultiSegmentReader compute this for its terms?  Or maybe
> > you'd just do this per-segment?
> >
> > Mike
> >
> > Tim Sturge wrote:
> >> Hi,
> >>
> >> I=B9m wondering if there is any easy technique to number the terms
> >> in an index
> >> (By number I mean map a sequence of terms to a contiguous range of
> >> integers
> >> and map terms to these numbers efficiently)
> >>
> >> Looking at the Term class and the .tis/.tii index format it
> >> appears that the
> >> terms are stored in an ordered and prefix-compressed format, but
> >> while there
> >> are pointers from a term to the .frq and .prx files, neither is
> >> really suitable as a sequence number.
> >>
> >> The reason I have this question is that I am writing a
> >> multi-filter for
> >> single term fields. My index contains many fields for which each
> >> document
> >> contains a single term (e.g. date, zipcode, country) and I need to
> >> perform
> >> range queries or set matches over these fields, many of which are
> >> very inclusive (they match >10% of the total documents)
> >>
> >> A cached RangeFilter works well when there are a small number of
> >> potential
> >> options (e.g. for countries) but when there are many options
> >> (consider a
> >> date range or a set of zipcodes) there are too many potential
> >> choices to
> >> cache each possibility and it is too inefficient to build a filter
> >> on the
> >> fly for each query (as you have to visit 10% of documents to build
> >> the filter despite the query itself matching 0.1%)
> >>
> >> Therefore I was considering building a int[reader.maxDocs()] array
> >> for each
> >> field and putting into it the term number for each document. This
> >> relies on
> >> the fact that each document contains only a single term for this
> >> field, but
> >> with it I should be able to quickly construct a =B3multi-filter=B2
> >> (that is,
> >> something that iterates the array and checks that the term is in
> >> the range
> >> or set).
> >>
> >> Right now it looks like I can do some very ugly surgery and
> >> perhaps use the
> >> offset to the prx file even though it is not contiguous. But I=B9m
> >> hoping
> >> there is a better technique that I=B9m just not seeing right now.
> >>
> >> Thanks,
> >>
> >> Tim
> >
> > -------------------------------------------------------------------
> >-- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 19:23:30 2008
Return-Path: <java-user-return-37076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74732 invoked from network); 10 Nov 2008 19:23:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 19:23:30 -0000
Received: (qmail 34325 invoked by uid 500); 10 Nov 2008 19:23:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34291 invoked by uid 500); 10 Nov 2008 19:23:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34279 invoked by uid 99); 10 Nov 2008 19:23:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 11:23:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chadmichaeldavis@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 19:22:13 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3472629fkq.5
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 11:22:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=egfesAhtLb1fYobnZaluV2rBV4uwo0tI+3RrGUapJ2w=;
        b=NhNUEElKa+22VHf0i0rk+RKO9ictqz8y7vaYnptxG43z6ittkXbd1m4AzjLKNiRJwN
         136lvcbtEhEQLTDIL70nSJaLAHXFs34eB6VvDPfYlOcWHrOlbe3m2GXKa1IWND4a62aa
         /zJP/uNcSy1vYmFhxSz72MItjETsgLZGLkFZI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=jFeKSmW8LNdW0+TMu7gSn3Sinceg9TA/uKTPTGylgrTksjNw/2Ui1ZZADhxiF1zT0Q
         1A0aT1s2RMg7Loke7vl9iGoahpPKV9Ig5s0gVq7TKd3NZweb03fI+bTeR+0Z6QwuYfb9
         /Kb8QVDLIdgJt9dAngZ53fd+MMwPQi3A6H1OI=
Received: by 10.187.226.5 with SMTP id d5mr2110622far.36.1226344965418;
        Mon, 10 Nov 2008 11:22:45 -0800 (PST)
Received: by 10.187.190.19 with HTTP; Mon, 10 Nov 2008 11:22:45 -0800 (PST)
Message-ID: <4fe4c4f50811101122o6caf954haa2ece2f48f4277c@mail.gmail.com>
Date: Mon, 10 Nov 2008 12:22:45 -0700
From: ChadDavis <chadmichaeldavis@gmail.com>
To: java-user@lucene.apache.org
Subject: incremental update of index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_76912_8075491.1226344965414"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_76912_8075491.1226344965414
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

In the FAQ's it says that you have to do a manual incremental update:

How do I update a document or a set of documents that are already indexed?
>
> There is no direct update procedure in Lucene. To update an index
> incrementally you must first *delete* the documents that were updated, and
> *then re-add* them to the index.
>

How do I determine the existing document that matches the document I am
updating?

------=_Part_76912_8075491.1226344965414--

From java-user-return-37077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 19:43:27 2008
Return-Path: <java-user-return-37077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83489 invoked from network); 10 Nov 2008 19:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 19:43:27 -0000
Received: (qmail 61816 invoked by uid 500); 10 Nov 2008 19:43:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61586 invoked by uid 500); 10 Nov 2008 19:43:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61575 invoked by uid 99); 10 Nov 2008 19:43:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 11:43:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.202.226.200] (HELO gate.abas.de) (212.202.226.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 19:42:09 +0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.0/8.14.0) with ESMTP id mAAJgKRl025897
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 20:42:20 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 5/gate.abas.de/smtp-gw/mscan; Mon Nov 10 20:42:20 2008
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: Boosting results
Date: Mon, 10 Nov 2008 20:42:05 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <200811101234.24671.wzzelfzzel@abas.de> <F9A5F87E-1574-401A-989F-025D85CB5E22@mikemccandless.com>
In-Reply-To: <F9A5F87E-1574-401A-989F-025D85CB5E22@mikemccandless.com>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200811102042.05672.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 10 November 2008 13:55:31 Michael McCandless wrote:
>
> Finally, you might want to instead look at Solr, which provides facet
> counting out of the box, rather than roll your own...

Doooh - new api, but it's facet counting sounds good.

Any starting points for moving from plain lucene to Solr in a smooth 
way? I doubt whether it is possible to integrate the facet counting 
part of Solr into my plain lucene application?

For searching: Do I have to have a Solr server (servlet engine) running 
or will EmbeddedSolrServer and SolrQuery do the job?

For indexing: Can I use a ready to use lucene index in Solr?

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 19:52:46 2008
Return-Path: <java-user-return-37078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88318 invoked from network); 10 Nov 2008 19:52:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 19:52:43 -0000
Received: (qmail 71655 invoked by uid 500); 10 Nov 2008 19:52:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71619 invoked by uid 500); 10 Nov 2008 19:52:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71608 invoked by uid 99); 10 Nov 2008 19:52:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 11:52:44 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 19:51:26 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1121098eyi.53
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 11:52:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=gWtdo1inClhHEcBPs+lUA1WjzLeKTMSAr3gM5OE1V2w=;
        b=A2js8KUUTNmcc7/HBQXGwlWnjK53o19gECpCAYLDn0UzrDyJCbU68iqVHK40C2WGuj
         BjNfs13JrozzKw18WQBwrcM4Y/DQrwdhMfNol77gdHA8g7WUsjbXtw54jDcxefgiRxTM
         v4eCvbB18J1hCtVkbG9kBEM4c0ZlaU6hgfHJE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hq0JCiTAcZVYLGrY7cponUAeJ9XmTiBS5h7N4hyJK4Fd6UiMQWPIZJz5PjkCkd+zzO
         VsKVlbrwlrA1MJsdK6Z8dCYlja6YoKEsXhkTYnB3o0q/qk1xln6NriGm4ZJo3dXOPlDg
         z+JZBKPgEq67G2jeslEUFOViJTMSmHp9RJvtY=
Received: by 10.86.84.5 with SMTP id h5mr7524417fgb.49.1226346728227;
        Mon, 10 Nov 2008 11:52:08 -0800 (PST)
Received: by 10.86.83.2 with HTTP; Mon, 10 Nov 2008 11:52:08 -0800 (PST)
Message-ID: <359a92830811101152n60a66802s58a57e5509ee75af@mail.gmail.com>
Date: Mon, 10 Nov 2008 14:52:08 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: incremental update of index
In-Reply-To: <4fe4c4f50811101122o6caf954haa2ece2f48f4277c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34984_31976208.1226346728228"
References: <4fe4c4f50811101122o6caf954haa2ece2f48f4277c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34984_31976208.1226346728228
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You have to have indexed something that uniquely identifies the
document in order to know what the old one is. Really, this is
the same question as updating, isn't it? If you could update
a document in place, you'd have to know what document
that was. If you know that information, you know which
document to delete.

Note that lucene has no built-in document recognition. If I
add the same document to the index twice, Lucene will
happily consider them two *separate* documents. You have
to code your own notion of document meta-id (as distinct
from the Lucene doc id). It could be the URL, the file path
on disk, a document ID from your organization... the
possibilities are endless. Which is why Lucene can't do that
for you.

Best
Erick

On Mon, Nov 10, 2008 at 2:22 PM, ChadDavis <chadmichaeldavis@gmail.com>wrote:

> In the FAQ's it says that you have to do a manual incremental update:
>
> How do I update a document or a set of documents that are already indexed?
> >
> > There is no direct update procedure in Lucene. To update an index
> > incrementally you must first *delete* the documents that were updated,
> and
> > *then re-add* them to the index.
> >
>
> How do I determine the existing document that matches the document I am
> updating?
>

------=_Part_34984_31976208.1226346728228--

From java-user-return-37079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 19:54:13 2008
Return-Path: <java-user-return-37079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88896 invoked from network); 10 Nov 2008 19:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 19:54:10 -0000
Received: (qmail 74130 invoked by uid 500); 10 Nov 2008 19:54:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73843 invoked by uid 500); 10 Nov 2008 19:54:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73832 invoked by uid 99); 10 Nov 2008 19:54:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 11:54:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 19:52:52 +0000
Received: from michael-wechners-mac-mini.local (4-119.77-83.cust.bluewin.ch [83.77.119.4])
	by server1.example.com (Postfix) with ESMTP id 5E43F10C9BB
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 21:05:08 +0100 (CET)
Message-ID: <49189116.5090601@wyona.com>
Date: Mon, 10 Nov 2008 20:52:54 +0100
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: performance/scalability issues re filtering of protected search results
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

We have about 1 mio documents and growing within a hierarchical order (3 
to 20 deep) and about 3000 people accessing these nodes, whereas some 
people have access to certain branches and other people to other 
branches and some branches are shared. The access control of these nodes 
is changing every day and also contains shortcuts  which allows people 
to glimpse into parts of branches which they otherwise do not have 
access to.

Currently we have one index for all nodes, which is ok 
peformance/scalability wise, but before displaying the results we need 
to filter based on the access privileges each user has, which is very 
bad peformance wise, because it might be that the first 10K hits are all 
protected re this user and hence it can take a very long time that one 
finally finds a result that the user is actually allowed to see.

We were thinking about introducing an index for each user which only 
contains the documents a user is actually is allowed to see, but this 
doesn't scale well either if the user number is growing.

Any hints how other people are approaching such a situation would be 
very much appreciated.

Thanks

Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 19:56:50 2008
Return-Path: <java-user-return-37080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91610 invoked from network); 10 Nov 2008 19:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 19:56:50 -0000
Received: (qmail 83751 invoked by uid 500); 10 Nov 2008 19:56:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83724 invoked by uid 500); 10 Nov 2008 19:56:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83713 invoked by uid 99); 10 Nov 2008 19:56:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 11:56:50 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.145 as permitted sender)
Received: from [32.97.182.145] (HELO e5.ny.us.ibm.com) (32.97.182.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 19:55:30 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e5.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id mAAJr3cB026267
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 14:53:03 -0500
Received: from d01av01.pok.ibm.com (d01av01.pok.ibm.com [9.56.224.215])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v9.1) with ESMTP id mAAJr30f165480
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 14:53:03 -0500
Received: from d01av01.pok.ibm.com (loopback [127.0.0.1])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id mAAJr3LJ013022
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 14:53:03 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av01.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id mAAJr3lJ013017
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 14:53:03 -0500
In-Reply-To: <4fe4c4f50811101122o6caf954haa2ece2f48f4277c@mail.gmail.com>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: incremental update of index
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF94950608.89A287D4-ON852574FD.006CD937-852574FD.006D2826@us.ibm.com>
Date: Mon, 10 Nov 2008 14:53:02 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V85_10262008HFIGS1|October
 26, 2008) at 11/10/2008 14:53:02,
	Serialize complete at 11/10/2008 14:53:02
Content-Type: multipart/alternative; boundary="=_alternative 006D27E9852574FD_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 006D27E9852574FD_=
Content-Type: text/plain; charset="US-ASCII"

ChadDavis <chadmichaeldavis@gmail.com> wrote on 11/10/2008 02:22:45 PM:

> In the FAQ's it says that you have to do a manual incremental update:
> 
> How do I update a document or a set of documents that are already 
indexed?
> >
> > There is no direct update procedure in Lucene. To update an index
> > incrementally you must first *delete* the documents that were updated, 
and
> > *then re-add* them to the index.
> >
> 
> How do I determine the existing document that matches the document I am
> updating?

Most applications of this sort include a unique identifier for a document, 
so
that it is easy to delete the document (by issuing a query on the 
identifier)

--=_alternative 006D27E9852574FD_=--

From java-user-return-37081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 20:06:48 2008
Return-Path: <java-user-return-37081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99157 invoked from network); 10 Nov 2008 20:06:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 20:06:48 -0000
Received: (qmail 98085 invoked by uid 500); 10 Nov 2008 20:06:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98053 invoked by uid 500); 10 Nov 2008 20:06:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98039 invoked by uid 99); 10 Nov 2008 20:06:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 12:06:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.162.176 as permitted sender)
Received: from [209.85.162.176] (HELO el-out-1112.google.com) (209.85.162.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 20:05:30 +0000
Received: by el-out-1112.google.com with SMTP id p32so1241747elf.14
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 12:06:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=lf8NgGx59DoJ5wsTxPPdoYIDHNUkqL7ity8IzNRur/c=;
        b=DWMsoEitu0suyr6iO4tp5HfQ97BwTH2EiFzi5kuDYQkpB0F4//m673dHJiSM+fBLAc
         CzyswSfrlvmNsvBBkL4V16M/aQnCpFY9ckWCR+pHEcXVjGAzk86gg7H/U4Xx34qLNU0o
         QJqWNi6kYK7gG8+pBZhCgXbHSJZurQF89CQvU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=v6qBNIcUtoU/kQnsqWNQTpJRyxDBCGhFDzS58Hgcvv/0eejSbTcJr8dnay1iK4F0/w
         Pi1LDNYNiinCoHrTG5g/6IgHDvIkyoCzzr1NtYb9f9PCyyJjG0NmMQrN6v+5vCNENf+G
         4rxn5ywoAHOfJfrDMjWuz2Y+rULQK1tIIKDOk=
Received: by 10.86.100.19 with SMTP id x19mr3454671fgb.18.1226347561435;
        Mon, 10 Nov 2008 12:06:01 -0800 (PST)
Received: by 10.86.83.2 with HTTP; Mon, 10 Nov 2008 12:06:01 -0800 (PST)
Message-ID: <359a92830811101206k64e5bcd6i87b2d444ed84bee@mail.gmail.com>
Date: Mon, 10 Nov 2008 15:06:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: performance/scalability issues re filtering of protected search results
In-Reply-To: <49189116.5090601@wyona.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35105_25470476.1226347561346"
References: <49189116.5090601@wyona.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35105_25470476.1226347561346
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This has been discussed more than a few times, I suggest you take
a look at the searchable archive for things like privileges, access
privileges, etc. You'll find lots of information faster that way...

Best
Erick

On Mon, Nov 10, 2008 at 2:52 PM, Michael Wechner
<michael.wechner@wyona.com>wrote:

> Hi
>
> We have about 1 mio documents and growing within a hierarchical order (3 to
> 20 deep) and about 3000 people accessing these nodes, whereas some people
> have access to certain branches and other people to other branches and some
> branches are shared. The access control of these nodes is changing every day
> and also contains shortcuts  which allows people to glimpse into parts of
> branches which they otherwise do not have access to.
>
> Currently we have one index for all nodes, which is ok
> peformance/scalability wise, but before displaying the results we need to
> filter based on the access privileges each user has, which is very bad
> peformance wise, because it might be that the first 10K hits are all
> protected re this user and hence it can take a very long time that one
> finally finds a result that the user is actually allowed to see.
>
> We were thinking about introducing an index for each user which only
> contains the documents a user is actually is allowed to see, but this
> doesn't scale well either if the user number is growing.
>
> Any hints how other people are approaching such a situation would be very
> much appreciated.
>
> Thanks
>
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_35105_25470476.1226347561346--

From java-user-return-37082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 20:07:52 2008
Return-Path: <java-user-return-37082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 126 invoked from network); 10 Nov 2008 20:07:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 20:07:51 -0000
Received: (qmail 1309 invoked by uid 500); 10 Nov 2008 20:07:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 968 invoked by uid 500); 10 Nov 2008 20:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 949 invoked by uid 99); 10 Nov 2008 20:07:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 12:07:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chadmichaeldavis@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 20:06:34 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1404040nfd.15
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 12:07:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=D6Q/BTkIjIvhnVFmQKTEpXxqsVTLh5mpWfebO+GzQok=;
        b=PYyLJLp8ePtzSvxWrZqCwxCwjT7Q4B8JdkIqUE8j465JvVXd6Yt+4SHxk5Tu5R9I4x
         di8cX4n558q+Nhdamaj6qupgdRvvM+B72OWkmiF9ZrQos+E0qlLageTzvTieIkDcpMgK
         h7e/qRWuh6eXooHRDNUkXr/LYDFGb9zfA2oPQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=yHIP1hJvpuadYZfepUDcAqVF9gmrFcZzZr5wVbpoe+aNslwGUMcHSUsbgEb8nCWCU9
         I9NCNax1/RgeK24mK2RHiAJFUic1Lp+GQCXojaIOWekJfCMBhaNTqdkFRZ/ajQGJjZ/3
         0ad8KxTdaKsPhLjWE0sMEPXrpPnjzC7tZkNMw=
Received: by 10.187.166.4 with SMTP id t4mr2156987fao.2.1226347636620;
        Mon, 10 Nov 2008 12:07:16 -0800 (PST)
Received: by 10.187.190.19 with HTTP; Mon, 10 Nov 2008 12:07:16 -0800 (PST)
Message-ID: <4fe4c4f50811101207o41aa31dbsf9803e0714fd47d@mail.gmail.com>
Date: Mon, 10 Nov 2008 13:07:16 -0700
From: ChadDavis <chadmichaeldavis@gmail.com>
To: java-user@lucene.apache.org
Subject: autoCommit
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78026_15177095.1226347636610"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78026_15177095.1226347636610
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The FAQ's have this index performance tip:

Use autoCommit=false when you open your IndexWriter
>
> In Lucene 2.3 there are substantial optimizations for Documents that use
> stored fields and term vectors, to save merging of these very large index
> files. You should see the best gains by using autoCommit=false for a single
> long-running session of IndexWriter. Note however that searchers will not
> see any of the changes flushed by this IndexWriter until it is closed; if
> that is important you should stick with autoCommit=true instead or
> periodically close and re-open the writer


But when I look at the API, there's no way to set autoCommit to false,
except via deprecated constrctors.

Is this tip deprecated?

------=_Part_78026_15177095.1226347636610--

From java-user-return-37083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 20:09:40 2008
Return-Path: <java-user-return-37083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1676 invoked from network); 10 Nov 2008 20:09:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 20:09:40 -0000
Received: (qmail 5362 invoked by uid 500); 10 Nov 2008 20:09:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4975 invoked by uid 500); 10 Nov 2008 20:09:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4964 invoked by uid 99); 10 Nov 2008 20:09:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 12:09:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chadmichaeldavis@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 20:08:22 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1124711eyi.53
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 12:09:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=HMcIlIorb0zQSL8nCCXXXzI2oVnKibLtQn/p91SMfAY=;
        b=Wc3C4Oxc/ebiUWPQMMf2dA5biKX5NKt2JrwDNuF00ld0riohYCMNxNJoH0zI8fPFeC
         s/unMe8BV2oJOhOyc9lDM6Ioq+obZUiLIcqrEL8fudoU3CL4bnOwMa6CK4ABaR+idjRM
         jaeJisNvS+byL5ixrIvcbmadFFlgwI7BJqhcI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=a1GE6BqmOSOE0k7KZkqpI90YBIuraWlL1Mq8/P4LhLoFteUboIVF2RlkbM3gz75lPh
         +gllMhjB3VUIMdpwC8xQ6cKDaLOhC0m9m5SwnzmNwYH2x1uC8InfBGWzKFFcJ5AhHJpP
         fX/hfbKyyJ1e4yu9Zy3IqrZYMXSGg9lIP/+VY=
Received: by 10.187.204.16 with SMTP id g16mr2154915faq.14.1226347744085;
        Mon, 10 Nov 2008 12:09:04 -0800 (PST)
Received: by 10.187.190.19 with HTTP; Mon, 10 Nov 2008 12:09:04 -0800 (PST)
Message-ID: <4fe4c4f50811101209w6f8fd107ga743d06cc02e9398@mail.gmail.com>
Date: Mon, 10 Nov 2008 13:09:04 -0700
From: ChadDavis <chadmichaeldavis@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: incremental update of index
In-Reply-To: <359a92830811101152n60a66802s58a57e5509ee75af@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78095_27067422.1226347744084"
References: <4fe4c4f50811101122o6caf954haa2ece2f48f4277c@mail.gmail.com>
	 <359a92830811101152n60a66802s58a57e5509ee75af@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78095_27067422.1226347744084
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That's what I thought.

So, that leads me to  . . .  is it necessarily all that much faster to index
in an incremental update fashion, rather than just clobbering the old index?

On Mon, Nov 10, 2008 at 12:52 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> You have to have indexed something that uniquely identifies the
> document in order to know what the old one is. Really, this is
> the same question as updating, isn't it? If you could update
> a document in place, you'd have to know what document
> that was. If you know that information, you know which
> document to delete.
>
> Note that lucene has no built-in document recognition. If I
> add the same document to the index twice, Lucene will
> happily consider them two *separate* documents. You have
> to code your own notion of document meta-id (as distinct
> from the Lucene doc id). It could be the URL, the file path
> on disk, a document ID from your organization... the
> possibilities are endless. Which is why Lucene can't do that
> for you.
>
> Best
> Erick
>
> On Mon, Nov 10, 2008 at 2:22 PM, ChadDavis <chadmichaeldavis@gmail.com
> >wrote:
>
> > In the FAQ's it says that you have to do a manual incremental update:
> >
> > How do I update a document or a set of documents that are already
> indexed?
> > >
> > > There is no direct update procedure in Lucene. To update an index
> > > incrementally you must first *delete* the documents that were updated,
> > and
> > > *then re-add* them to the index.
> > >
> >
> > How do I determine the existing document that matches the document I am
> > updating?
> >
>

------=_Part_78095_27067422.1226347744084--

From java-user-return-37084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 20:12:57 2008
Return-Path: <java-user-return-37084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3734 invoked from network); 10 Nov 2008 20:12:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 20:12:57 -0000
Received: (qmail 11934 invoked by uid 500); 10 Nov 2008 20:12:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11908 invoked by uid 500); 10 Nov 2008 20:12:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11897 invoked by uid 99); 10 Nov 2008 20:12:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 12:12:57 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 20:11:38 +0000
Received: by qw-out-2122.google.com with SMTP id 5so1671727qwi.53
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 12:12:20 -0800 (PST)
Received: by 10.214.241.1 with SMTP id o1mr7158839qah.201.1226347939949;
        Mon, 10 Nov 2008 12:12:19 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm9978033ywp.3.2008.11.10.12.12.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 10 Nov 2008 12:12:18 -0800 (PST)
Message-Id: <A4A7E5F6-5C65-45FE-B917-FE0D9913F56B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4fe4c4f50811101207o41aa31dbsf9803e0714fd47d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: autoCommit
Date: Mon, 10 Nov 2008 15:12:16 -0500
References: <4fe4c4f50811101207o41aa31dbsf9803e0714fd47d@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Actually, all non-deprecated ctors of IndexWriter set autoCommit to  
false.  Ie, in 3.0 autoCommit false will become the only option.

Mike

ChadDavis wrote:

> The FAQ's have this index performance tip:
>
> Use autoCommit=false when you open your IndexWriter
>>
>> In Lucene 2.3 there are substantial optimizations for Documents  
>> that use
>> stored fields and term vectors, to save merging of these very large  
>> index
>> files. You should see the best gains by using autoCommit=false for  
>> a single
>> long-running session of IndexWriter. Note however that searchers  
>> will not
>> see any of the changes flushed by this IndexWriter until it is  
>> closed; if
>> that is important you should stick with autoCommit=true instead or
>> periodically close and re-open the writer
>
>
> But when I look at the API, there's no way to set autoCommit to false,
> except via deprecated constrctors.
>
> Is this tip deprecated?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 20:14:55 2008
Return-Path: <java-user-return-37085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4931 invoked from network); 10 Nov 2008 20:14:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 20:14:55 -0000
Received: (qmail 16958 invoked by uid 500); 10 Nov 2008 20:14:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16927 invoked by uid 500); 10 Nov 2008 20:14:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16916 invoked by uid 99); 10 Nov 2008 20:14:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 12:14:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chadmichaeldavis@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 20:13:37 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1405730nfd.15
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 12:14:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=BE/d32I7gfiYufIitxEH4HAVnAaL0nH3aCKuS/jCHys=;
        b=Pefr2GOEhvqIE/jbIT7lOjT4CQazRx7Mx9w9VXnoO+/CnuREqJjp8jOXKOLTdFz4HE
         hXJiFcwqhnCFc01o1banjwOqPJSooEE2RH4hSiHqyzVFkj6Pp1cdsffX2dIhfILWomQd
         pkbeZ56vdPqxW9oRW0KOqv0JIyyPS2Yi9hcpk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gn8Tx9e9pP3exqGXjhLviF7eWVxb6l0rIwCi1yBgPrW7NdK23LuaCb3duC6MtN/KcQ
         NEgLymFx76xvilBS00YELgyy2hZXZr6LKUM0sumhsa2iHH0eJL+3aryn7Ue+izQN7xNh
         QJVw/iLa5dt8ZNc+vU5rPZilCYeIbFQkkEiQo=
Received: by 10.187.179.4 with SMTP id g4mr2164612fap.24.1226348058808;
        Mon, 10 Nov 2008 12:14:18 -0800 (PST)
Received: by 10.187.190.19 with HTTP; Mon, 10 Nov 2008 12:14:18 -0800 (PST)
Message-ID: <4fe4c4f50811101214x5c8142f5nde5714471f87754f@mail.gmail.com>
Date: Mon, 10 Nov 2008 13:14:18 -0700
From: ChadDavis <chadmichaeldavis@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: autoCommit
In-Reply-To: <A4A7E5F6-5C65-45FE-B917-FE0D9913F56B@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_78240_8526177.1226348058807"
References: <4fe4c4f50811101207o41aa31dbsf9803e0714fd47d@mail.gmail.com>
	 <A4A7E5F6-5C65-45FE-B917-FE0D9913F56B@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_78240_8526177.1226348058807
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

That's easy.  Thanks.

On Mon, Nov 10, 2008 at 1:12 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

>
> Actually, all non-deprecated ctors of IndexWriter set autoCommit to false.
>  Ie, in 3.0 autoCommit false will become the only option.
>
> Mike
>
>
> ChadDavis wrote:
>
>  The FAQ's have this index performance tip:
>>
>> Use autoCommit=false when you open your IndexWriter
>>
>>>
>>> In Lucene 2.3 there are substantial optimizations for Documents that use
>>> stored fields and term vectors, to save merging of these very large index
>>> files. You should see the best gains by using autoCommit=false for a
>>> single
>>> long-running session of IndexWriter. Note however that searchers will not
>>> see any of the changes flushed by this IndexWriter until it is closed; if
>>> that is important you should stick with autoCommit=true instead or
>>> periodically close and re-open the writer
>>>
>>
>>
>> But when I look at the API, there's no way to set autoCommit to false,
>> except via deprecated constrctors.
>>
>> Is this tip deprecated?
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_78240_8526177.1226348058807--

From java-user-return-37086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 21:22:01 2008
Return-Path: <java-user-return-37086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37392 invoked from network); 10 Nov 2008 21:22:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 21:22:01 -0000
Received: (qmail 23905 invoked by uid 500); 10 Nov 2008 21:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23866 invoked by uid 500); 10 Nov 2008 21:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23844 invoked by uid 99); 10 Nov 2008 21:22:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 13:22:00 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.13.197 as permitted sender)
Received: from [64.18.13.197] (HELO chip2og59.obsmtp.com) (64.18.13.197)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Nov 2008 21:20:40 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by chip2ob59.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSRil0jw0pPX0lDlWtXWydnBquKJ1M/wQ@postini.com; Mon, 10 Nov 2008 13:21:23 PST
Received: from D01SMTP04.Mi8.com ([172.16.1.243]) by Outbound01.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 10 Nov 2008 16:21:21 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by D01SMTP04.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 10 Nov 2008 16:21:21 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.118]) with Microsoft Exchange Server HTTP-DAV ;
 Mon, 10 Nov 2008 21:21:21 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Mon, 10 Nov 2008 13:21:20 -0800
Subject: Re: Term numbering and range filtering
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C53DE5D0.12A3%tsturge@hi5.com>
Thread-Topic: Term numbering and range filtering
Thread-Index: AclDekY5+rsioeKVA0yEZsHH1Yv19Q==
In-Reply-To: <200811101954.24244.paul.elschot@xs4all.nl>
Mime-version: 1.0
Content-type: text/plain;
	charset="ISO-8859-1"
Content-transfer-encoding: quoted-printable
X-OriginalArrivalTime: 10 Nov 2008 21:21:21.0701 (UTC) FILETIME=[473CD550:01C9437A]
X-TM-AS-Product-Ver: SMEX-7.0.0.1345-5.5.1027-16272.002
X-TM-AS-Result: No--29.964600-8.000000-31
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm -- I hadn't thought about that so I took a quick look at the term
vector support.=20

What I'm really looking for is a compact but performant representation of
a set of filters on the same (one term field). Using term vectors would
mean an algorithm similar to:

String myfield;
String myterm;
TermVector tv;
for (int i =3D 0 ;  i < maxDoc ; i++) {
    tv =3D reader.getTermFreqVector(i,country)
    if (tv.indexOf(myterm) !=3D -1) {
          // include this doc...
        }
}

The key thing I am looking to achieve here is performance comparable to
filters. I suspect getTermFremVector() is not efficient enough but I'll giv=
e
it a try.

Tim


On 11/10/08 10:54 AM, "Paul Elschot" <paul.elschot@xs4all.nl> wrote:

> Tim,
>=20
> I didn't follow all the details, so this may be somewhat off,
> but did you consider using TermVectors?
>=20
> Regards,
> Paul Elschot
>=20
>=20
> Op Monday 10 November 2008 19:18:38 schreef Tim Sturge:
>> Yes, that is a significant issue. What I'm coming to realize is that
>> either I will end up with something like
>>=20
>> class MultiFilter {
>>    String field;
>>    private int[] termInDoc;
>>    Map<Term,int> termToInt;
>>    ...
>> }
>>=20
>> which can be entirely built on the current lucene APIs but has
>> significantly more overhead (the termToInt mapping in particular and
>> the need to construct the mapping and array on startup)
>>=20
>>=20
>> Or I can go deep into the guts and add a data file per-segment with a
>> format something like
>>=20
>> int version
>> int numFields
>> (int fieldNum, long offset) ^ numFields
>> (int termForDoc) ^ (maxDocs * numFields)
>>=20
>> and add something to FieldInfo  like  boolean storeMultiFilter;
>> and FieldInfos something like STORE_MULTIFILTER =3D 0x40; I'd need to
>> add an int termNum to the .tis file as well.
>>=20
>> This is clearly a lot more work than the first solution, but it is a
>> lot nicer to deal with as well. Is this interesting to anyone other
>> than me?
>>=20
>> Tim
>>=20
>> On 11/9/08 12:23 PM, "Michael McCandless" <lucene@mikemccandless.com>
> wrote:
>>> Conceivably, TermInfosReader could track the sequence number of
>>> each term.
>>>=20
>>> A seek/skipTo would know which sequence number it just jumped too,
>>> because the index is regular (every 128 terms by default), and then
>>> each next() call could increment that.  Then retrieving this number
>>> would be as costly as calling eg IndexReader.docFreq(Term) is now.
>>>=20
>>> But I'm not sure how a multi-segment index  would work, ie how
>>> would MultiSegmentReader compute this for its terms?  Or maybe
>>> you'd just do this per-segment?
>>>=20
>>> Mike
>>>=20
>>> Tim Sturge wrote:
>>>> Hi,
>>>>=20
>>>> I=B9m wondering if there is any easy technique to number the terms
>>>> in an index
>>>> (By number I mean map a sequence of terms to a contiguous range of
>>>> integers
>>>> and map terms to these numbers efficiently)
>>>>=20
>>>> Looking at the Term class and the .tis/.tii index format it
>>>> appears that the
>>>> terms are stored in an ordered and prefix-compressed format, but
>>>> while there
>>>> are pointers from a term to the .frq and .prx files, neither is
>>>> really suitable as a sequence number.
>>>>=20
>>>> The reason I have this question is that I am writing a
>>>> multi-filter for
>>>> single term fields. My index contains many fields for which each
>>>> document
>>>> contains a single term (e.g. date, zipcode, country) and I need to
>>>> perform
>>>> range queries or set matches over these fields, many of which are
>>>> very inclusive (they match >10% of the total documents)
>>>>=20
>>>> A cached RangeFilter works well when there are a small number of
>>>> potential
>>>> options (e.g. for countries) but when there are many options
>>>> (consider a
>>>> date range or a set of zipcodes) there are too many potential
>>>> choices to
>>>> cache each possibility and it is too inefficient to build a filter
>>>> on the
>>>> fly for each query (as you have to visit 10% of documents to build
>>>> the filter despite the query itself matching 0.1%)
>>>>=20
>>>> Therefore I was considering building a int[reader.maxDocs()] array
>>>> for each
>>>> field and putting into it the term number for each document. This
>>>> relies on
>>>> the fact that each document contains only a single term for this
>>>> field, but
>>>> with it I should be able to quickly construct a =B3multi-filter=B2
>>>> (that is,
>>>> something that iterates the array and checks that the term is in
>>>> the range
>>>> or set).
>>>>=20
>>>> Right now it looks like I can do some very ugly surgery and
>>>> perhaps use the
>>>> offset to the prx file even though it is not contiguous. But I=B9m
>>>> hoping
>>>> there is a better technique that I=B9m just not seeing right now.
>>>>=20
>>>> Thanks,
>>>>=20
>>>> Tim
>>>=20
>>> -------------------------------------------------------------------
>>> -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 21:46:11 2008
Return-Path: <java-user-return-37087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55826 invoked from network); 10 Nov 2008 21:46:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 21:46:11 -0000
Received: (qmail 56764 invoked by uid 500); 10 Nov 2008 21:46:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56191 invoked by uid 500); 10 Nov 2008 21:46:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56180 invoked by uid 99); 10 Nov 2008 21:46:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 13:46:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 21:44:53 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2528326fgb.27
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 13:45:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=lafcwzHnwCdptpAHjjUcpRzGJHU3afrSasNE0URSjrQ=;
        b=bn15LWCQaBnp0Vm8j/CIJFsqi4Shb3DQuTZgpNeCs96iXbiBRiQ6fOILv/ELn3UV4X
         bH4O+kMPoQzvuHNkRvnqkWy7Qssa+A+BkY4rVAe2M95jlMi87t6m2XJN15IumaI/S11K
         YT33hBCG4ZhZX5RY5ijnlpSVxMgpiW45SIVIo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=lyD6kaOjUfbeflHQSLDlSpaYYpvf6+Sf+LjC4jfB0kGtLUC/XkromTAIFQ7xJLJ/cC
         2HcH8eUd8Q/Z0haaAT46rIP59QE9eEdcApoWUGc/k9XpnVh6JfdvaC2nuAHA+xyKQoCK
         sTHQ6BH6pLhD/Eeh7RaNNOu8UQ5bJHV+D5kGM=
Received: by 10.181.226.19 with SMTP id d19mr2248387bkr.35.1226353535464;
        Mon, 10 Nov 2008 13:45:35 -0800 (PST)
Received: by 10.86.83.2 with HTTP; Mon, 10 Nov 2008 13:45:35 -0800 (PST)
Message-ID: <359a92830811101345r2dd29da9lacdf96db14138fbc@mail.gmail.com>
Date: Mon, 10 Nov 2008 16:45:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: incremental update of index
In-Reply-To: <4fe4c4f50811101209w6f8fd107ga743d06cc02e9398@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36387_19635774.1226353535465"
References: <4fe4c4f50811101122o6caf954haa2ece2f48f4277c@mail.gmail.com>
	 <359a92830811101152n60a66802s58a57e5509ee75af@mail.gmail.com>
	 <4fe4c4f50811101209w6f8fd107ga743d06cc02e9398@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36387_19635774.1226353535465
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It all depends on how many updates you're doing, which
you haven't told us <G>.

If a large majority of your index is being updated, there's
no particular reason to update, I'd build a new one.

Best
Erick

On Mon, Nov 10, 2008 at 3:09 PM, ChadDavis <chadmichaeldavis@gmail.com>wrote:

> That's what I thought.
>
> So, that leads me to  . . .  is it necessarily all that much faster to
> index
> in an incremental update fashion, rather than just clobbering the old
> index?
>
> On Mon, Nov 10, 2008 at 12:52 PM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > You have to have indexed something that uniquely identifies the
> > document in order to know what the old one is. Really, this is
> > the same question as updating, isn't it? If you could update
> > a document in place, you'd have to know what document
> > that was. If you know that information, you know which
> > document to delete.
> >
> > Note that lucene has no built-in document recognition. If I
> > add the same document to the index twice, Lucene will
> > happily consider them two *separate* documents. You have
> > to code your own notion of document meta-id (as distinct
> > from the Lucene doc id). It could be the URL, the file path
> > on disk, a document ID from your organization... the
> > possibilities are endless. Which is why Lucene can't do that
> > for you.
> >
> > Best
> > Erick
> >
> > On Mon, Nov 10, 2008 at 2:22 PM, ChadDavis <chadmichaeldavis@gmail.com
> > >wrote:
> >
> > > In the FAQ's it says that you have to do a manual incremental update:
> > >
> > > How do I update a document or a set of documents that are already
> > indexed?
> > > >
> > > > There is no direct update procedure in Lucene. To update an index
> > > > incrementally you must first *delete* the documents that were
> updated,
> > > and
> > > > *then re-add* them to the index.
> > > >
> > >
> > > How do I determine the existing document that matches the document I am
> > > updating?
> > >
> >
>

------=_Part_36387_19635774.1226353535465--

From java-user-return-37088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 21:59:28 2008
Return-Path: <java-user-return-37088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64154 invoked from network); 10 Nov 2008 21:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 21:59:28 -0000
Received: (qmail 74163 invoked by uid 500); 10 Nov 2008 21:59:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73425 invoked by uid 500); 10 Nov 2008 21:59:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73414 invoked by uid 99); 10 Nov 2008 21:59:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 13:59:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 21:58:10 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr1.xs4all.nl (8.13.8/8.13.8) with ESMTP id mAALwmvt089437
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 22:58:52 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Term numbering and range filtering
Date: Mon, 10 Nov 2008 22:58:51 +0100
User-Agent: KMail/1.9.10
References: <C53DE5D0.12A3%tsturge@hi5.com>
In-Reply-To: <C53DE5D0.12A3%tsturge@hi5.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811102258.51411.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Monday 10 November 2008 22:21:20 schreef Tim Sturge:
> Hmmm -- I hadn't thought about that so I took a quick look at the
> term vector support.
>
> What I'm really looking for is a compact but performant
> representation of a set of filters on the same (one term field).
> Using term vectors would mean an algorithm similar to:
>
> String myfield;
> String myterm;
> TermVector tv;
> for (int i = 0 ;  i < maxDoc ; i++) {
>     tv = reader.getTermFreqVector(i,country)
>     if (tv.indexOf(myterm) != -1) {
>           // include this doc...
>         }
> }
>
> The key thing I am looking to achieve here is performance comparable
> to filters. I suspect getTermFremVector() is not efficient enough but
> I'll give it a try.
>

Better use a TermDocs on myterm for this, have a look at the code of
RangeFilter.

Filters are normally created from a slower query by setting a bit in an 
OpenBitSet at "include this doc". Then they are reused for their speed.

Filter caching could help. In case memory becomes a problem
and the filters are sparse enough, try and use SortedVIntList
as the underlying data structure in the cache. (Sparse enough means
less than 1 in 8 of all docs available the index reader.)
See also LUCENE-1296 for caching another data structure than the
one used to collect the filtered docs.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 22:26:42 2008
Return-Path: <java-user-return-37089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86749 invoked from network); 10 Nov 2008 22:26:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 22:26:42 -0000
Received: (qmail 11909 invoked by uid 500); 10 Nov 2008 22:26:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11883 invoked by uid 500); 10 Nov 2008 22:26:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11872 invoked by uid 99); 10 Nov 2008 22:26:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 14:26:42 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.13.43 as permitted sender)
Received: from [64.18.13.43] (HELO chip2og53.obsmtp.com) (64.18.13.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Nov 2008 22:25:22 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by chip2ob53.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSRi0+/ek/dtTAFw90SqI1lqOP5s4OslB@postini.com; Mon, 10 Nov 2008 14:26:05 PST
Received: from d01smtp03.Mi8.com ([172.16.1.24]) by Outbound01.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 10 Nov 2008 17:26:03 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by d01smtp03.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 10 Nov 2008 17:26:03 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.118]) with Microsoft Exchange Server HTTP-DAV ;
 Mon, 10 Nov 2008 22:26:02 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Mon, 10 Nov 2008 14:26:00 -0800
Subject: Re: Term numbering and range filtering
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C53DF4F8.12B0%tsturge@hi5.com>
Thread-Topic: Term numbering and range filtering
Thread-Index: AclDg07iAp1tCzI+mkSjIfSIPpLDvw==
In-Reply-To: <200811102258.51411.paul.elschot@xs4all.nl>
Mime-version: 1.0
Content-type: text/plain;
	charset="ISO-8859-1"
Content-transfer-encoding: quoted-printable
X-OriginalArrivalTime: 10 Nov 2008 22:26:03.0351 (UTC) FILETIME=[50E19E70:01C94383]
X-Virus-Checked: Checked by ClamAV on apache.org

I think we've gone around in a loop here. It's exactly due to the inadequac=
y
of cached filters that I'm considering what I'm doing.

Here's the section from my first email that is most illuminating:
"
The reason I have this question is that I am writing a multi-filter for
single term fields. My index contains many fields for which each document
contains a single term (e.g. date, zipcode, country) and I need to perform
range queries or set matches over these fields, many of which are very
inclusive (they match >10% of the total documents)

A cached RangeFilter works well when there are a small number of potential
options (e.g. for countries) but when there are many options (consider a
date range or a set of zipcodes) there are too many potential choices to
cache each possibility and it is too inefficient to build a filter on the
fly for each query (as you have to visit 10% of documents to build the
filter despite the query itself matching 0.1%)

Therefore I was considering building a int[reader.maxDocs()] array for each
field and putting into it the term number for each document. This relies on
the fact that each document contains only a single term for this field, but
with it I should be able to quickly construct a =B3multi-filter=B2 (that is,
something that iterates the array and checks that the term is in the range
or set).
"

Does this help explain my rationale? The reason I'm posting here is that I
imagine there are lots of people with this issue. In particular date ranges
seem to be something that lots of people use but Lucene implements fairly
poorly.

Tim

On 11/10/08 1:58 PM, "Paul Elschot" <paul.elschot@xs4all.nl> wrote:

> Op Monday 10 November 2008 22:21:20 schreef Tim Sturge:
>> Hmmm -- I hadn't thought about that so I took a quick look at the
>> term vector support.
>>=20
>> What I'm really looking for is a compact but performant
>> representation of a set of filters on the same (one term field).
>> Using term vectors would mean an algorithm similar to:
>>=20
>> String myfield;
>> String myterm;
>> TermVector tv;
>> for (int i =3D 0 ;  i < maxDoc ; i++) {
>>     tv =3D reader.getTermFreqVector(i,country)
>>     if (tv.indexOf(myterm) !=3D -1) {
>>           // include this doc...
>>         }
>> }
>>=20
>> The key thing I am looking to achieve here is performance comparable
>> to filters. I suspect getTermFremVector() is not efficient enough but
>> I'll give it a try.
>>=20
>=20
> Better use a TermDocs on myterm for this, have a look at the code of
> RangeFilter.
>=20
> Filters are normally created from a slower query by setting a bit in an
> OpenBitSet at "include this doc". Then they are reused for their speed.
>=20
> Filter caching could help. In case memory becomes a problem
> and the filters are sparse enough, try and use SortedVIntList
> as the underlying data structure in the cache. (Sparse enough means
> less than 1 in 8 of all docs available the index reader.)
> See also LUCENE-1296 for caching another data structure than the
> one used to collect the filtered docs.
>=20
> Regards,
> Paul Elschot
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 22:58:24 2008
Return-Path: <java-user-return-37090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1563 invoked from network); 10 Nov 2008 22:58:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 22:58:24 -0000
Received: (qmail 42795 invoked by uid 500); 10 Nov 2008 22:58:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42764 invoked by uid 500); 10 Nov 2008 22:58:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42753 invoked by uid 99); 10 Nov 2008 22:58:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 14:58:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of artur.tomusiak@hannonhill.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 22:57:05 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3557283fkq.5
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 14:57:46 -0800 (PST)
Received: by 10.187.198.8 with SMTP id a8mr2262551faq.4.1226356238037;
        Mon, 10 Nov 2008 14:30:38 -0800 (PST)
Received: from ?10.0.1.149? ([69.15.214.217])
        by mx.google.com with ESMTPS id g28sm1090492fkg.8.2008.11.10.14.30.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 10 Nov 2008 14:30:37 -0800 (PST)
Message-ID: <4918B609.9060300@hannonhill.com>
Date: Mon, 10 Nov 2008 17:30:33 -0500
From: Artur Tomusiak <artur.tomusiak@hannonhill.com>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: How to make Lucene search for parts of terms?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

We are using a MultiFieldQueryParser and we have problems with making 
Lucene find parts of words. So that for example searching for "a" will 
find all the results that contain "a" in it, not only as a separate 
token, but even inside of the tokens (like word "make").

We tried putting wildcards around each search term but then we were 
unable to reconstruct the original query because keywords like "AND" or 
"OR" are not considered search terms. Also, our analyzer was including 
special characters, like '(' as parts of the terms.

Do you know the best way of making this work? We are looking for a way 
that would search correctly even more advanced queries, like:

(a OR b) AND c

This should end up finding all results that contain letter 'c' and 
either 'a' or 'b' in any of the fields (please remember that we are 
using MultiFieldQueryParser).

In the example above, based on our code, wrapping every term in 
wildcards ended up with this query:

*(a* *b)* *c*

while we would expect something like this:

(*a* OR *b*) AND *c*

Do you know the best way of accomplishing it?

Thank you,
Artur Tomusiak

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 23:03:51 2008
Return-Path: <java-user-return-37091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3817 invoked from network); 10 Nov 2008 23:03:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 23:03:51 -0000
Received: (qmail 53097 invoked by uid 500); 10 Nov 2008 23:03:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53072 invoked by uid 500); 10 Nov 2008 23:03:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53061 invoked by uid 99); 10 Nov 2008 23:03:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 15:03:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of patrek@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 23:02:33 +0000
Received: by ey-out-2122.google.com with SMTP id 6so1156594eyi.53
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 15:03:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=+2X8AwBVI/sOnjJ+v1+/eQ75lkqV1xdd9BNu/8q9bzQ=;
        b=ljAtG7+2OeEEPHIL8YNpSpozAg1l+qT6zpXlJS61zTJqzuly1iHU8pbhXVPWKeKsKK
         xThoLCqyM9Zks5PjdNN38ZUok4M3Jz8+9vVKg1swJ6eGJrlcQqzzBy5MKWTi4dpRHn9e
         Vm2x/CB1+e7QHsVHCaWqqSpuyqyWM9qqqcOUo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=xhw5joChj1FtFk1KOyhCXTDBWD2ZJ9PvIszKNnDdn1pVYTz5M1gOqpk/mrDG9CSYYl
         S3XDyEYm63sviP21GWA1bMNR07Isc7ac46nt7DFZ90Pxs397ffeyTyn/268fseIgbaW0
         3i4vr5kbDpGFCSDpX9FCjG4Ksi3Z4+zaM4K7M=
Received: by 10.210.23.3 with SMTP id 3mr4571493ebw.198.1226358185670;
        Mon, 10 Nov 2008 15:03:05 -0800 (PST)
Received: by 10.210.18.3 with HTTP; Mon, 10 Nov 2008 15:03:05 -0800 (PST)
Message-ID: <48b038c60811101503v15db23bau4fd115dbaf8f5f2e@mail.gmail.com>
Date: Mon, 10 Nov 2008 18:03:05 -0500
From: "Patrick Turcotte" <patrek@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to make Lucene search for parts of terms?
In-Reply-To: <4918B609.9060300@hannonhill.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4918B609.9060300@hannonhill.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Take a look at the ngram classes (probably in contrib, don't remember
for sure right now).

Patrick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 10 23:52:26 2008
Return-Path: <java-user-return-37092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17587 invoked from network); 10 Nov 2008 23:52:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Nov 2008 23:52:26 -0000
Received: (qmail 97622 invoked by uid 500); 10 Nov 2008 23:52:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97600 invoked by uid 500); 10 Nov 2008 23:52:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97589 invoked by uid 99); 10 Nov 2008 23:52:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 15:52:26 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [63.231.195.116] (HELO mpls-qmqp-05.inet.qwest.net) (63.231.195.116)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 23:51:06 +0000
Received: from mpls-pop-10.inet.qwest.net (mpls-pop-10.inet.qwest.net [63.231.195.10])
	by mpls-qmqp-05.inet.qwest.net (Postfix) with QMQP id 121F262781D
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 23:51:47 +0000 (UTC)
Received: from unknown (HELO MOBILE) (71.39.253.44)
  by mpls-pop-10.inet.qwest.net with SMTP; 10 Nov 2008 23:51:46 -0000
From: "Jeff Capone" <jeff_capone@leafnetworks.net>
To: <java-user@lucene.apache.org>
Subject: Feasibility question
Date: Mon, 10 Nov 2008 16:51:20 -0700
Message-ID: <9B7E81FB8C074519BDBAF3A093CE2F2C@MOBILE>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AclDjzqkc3BxedRFSD6bYFI7Ch7I0Q==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Checked: Checked by ClamAV on apache.org

Has anyone deployed Lucene to index log files?  I have seen some articles 
about how RackSpace used Lucene and Hadoop for log processing, but I have 
not seen any details on the implementation.  

To get my required analytics, I think I would need to treat each line of 
the Apache log files as a document and I though I would treat each field as 
a key word to minimize processing. 

Assuming you have clusters operating on independent datasets (so I guess it 
would scale linearly) and you want to process Terabytes of logs per day, 
is such a solution even feasible?

Thank you,

Jeff Capone


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 01:19:53 2008
Return-Path: <java-user-return-37093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57633 invoked from network); 11 Nov 2008 01:19:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 01:19:50 -0000
Received: (qmail 77215 invoked by uid 500); 11 Nov 2008 01:19:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77177 invoked by uid 500); 11 Nov 2008 01:19:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77166 invoked by uid 99); 11 Nov 2008 01:19:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 17:19:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 01:18:31 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A8C0130EFC18; Mon, 10 Nov 2008 18:18:43 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (va-76-1-139-108.dhcp.embarqhsd.net [76.1.139.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7F56730EFC16
	for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 18:18:40 -0700 (MST)
Message-Id: <12D90D7D-A53A-4DE9-B966-E48015BF369B@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <200811102042.05672.wzzelfzzel@abas.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Boosting results
Date: Mon, 10 Nov 2008 20:18:39 -0500
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <200811101234.24671.wzzelfzzel@abas.de> <F9A5F87E-1574-401A-989F-025D85CB5E22@mikemccandless.com> <200811102042.05672.wzzelfzzel@abas.de>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.0 required=5.0 tests=BAYES_00,
	DNS_FROM_SECURITYSAGE,RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Nov 10, 2008, at 2:42 PM, Stefan Trcek wrote:
> On Monday 10 November 2008 13:55:31 Michael McCandless wrote:
>>
>> Finally, you might want to instead look at Solr, which provides facet
>> counting out of the box, rather than roll your own...
>
> Doooh - new api, but it's facet counting sounds good.
>
> Any starting points for moving from plain lucene to Solr in a smooth
> way? I doubt whether it is possible to integrate the facet counting
> part of Solr into my plain lucene application?

The integration won't be too painful... the main thing is that Solr  
requires* some configuration files, literally on the filesystem, in  
order to fire up and be happy.  And you'll need to craft Solr's  
schema.xml to jive with how you indexed with pure Lucene.

> For searching: Do I have to have a Solr server (servlet engine)  
> running
> or will EmbeddedSolrServer and SolrQuery do the job?

That'll do the job, without a servlet engine.  But a servlet engine  
can be mighty handy when you need to go to distributed search,  
replication, etc.  But one can use Solr very much like using Lucene,  
API-only (but with config files).

> For indexing: Can I use a ready to use lucene index in Solr?

Yup, see above.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 01:45:17 2008
Return-Path: <java-user-return-37094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74007 invoked from network); 11 Nov 2008 01:45:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 01:45:16 -0000
Received: (qmail 96530 invoked by uid 500); 11 Nov 2008 01:45:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96494 invoked by uid 500); 11 Nov 2008 01:45:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96483 invoked by uid 99); 11 Nov 2008 01:45:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 17:45:16 -0800
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.1.187 as permitted sender)
Received: from [64.18.1.187] (HELO exprod6og104.obsmtp.com) (64.18.1.187)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 Nov 2008 01:43:55 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by exprod6ob104.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSRji+P8w2RSWtwjtMMoRiX9lrSya0bB/@postini.com; Mon, 10 Nov 2008 17:44:38 PST
Received: from d01smtp03.Mi8.com ([172.16.1.24]) by Outbound02.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 10 Nov 2008 20:42:15 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by d01smtp03.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 10 Nov 2008 20:42:15 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.118]) with Microsoft Exchange Server HTTP-DAV ;
 Tue, 11 Nov 2008 01:42:15 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Mon, 10 Nov 2008 17:42:14 -0800
Subject: Re: Term numbering and range filtering
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C53E22F6.12C9%tsturge@hi5.com>
Thread-Topic: Term numbering and range filtering
Thread-Index: AclDg07iAp1tCzI+mkSjIfSIPpLDvwAG2nZZ
In-Reply-To: <C53DF4F8.12B0%tsturge@hi5.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="ISO-8859-1"
Content-transfer-encoding: quoted-printable
X-OriginalArrivalTime: 11 Nov 2008 01:42:15.0632 (UTC) FILETIME=[B9B52500:01C9439E]
X-Virus-Checked: Checked by ClamAV on apache.org

Reading this I realize how unclear it is, so let me give a concrete example=
:

I want to do a search restricting users by age range. So someone can ask fo=
r
the users 18-35, 40-60 etc.

Here are the options I considered:

1) construct a RangeQuery. This is a 20-40 clause boolean subquery in an
otherwise 1 or 2 clause query and I'd like to avoid that. It also has
scoring artifacts I wish to avoid (I don't want users to rank higher just
because we have less users of that particular age).

2) construct a ConstantScoreRangeQuery. Then I'm forced to iterate all the
users in the age range for each query. This was cost-prohibitive.

3) cache filters for each age range. Problem is there are 50 starting point=
s
and 50 ending points and caching 2500 filters is unrealistic.

4) cache filters for each age, and or them together for each query (there's
stuff in contrib that does this.) This is best so far, but does require
caching 50 filters and doing 20 bitset ors per query on an 8MB bitset.

So what I thought would be interesting is

5) build an array of bytes where the n-th byte contains the age of user n.
Given the range it's fairly trivial to make this behave like a filter (ie
it's relatively easy to implement next() and skipTo() efficiently and
trivial to decide if a document is in the range or not.)

Then I realized this approach would make sense not just for ages, but also
for countries, date ranges and zip code sets, so I thought I'd ask if anyon=
e
had tried it before.

Part of me assumes that someone must have done this already; so either
there's an implementation out there already or there's a good reason I don'=
t
see that this is entirely impractical. So I'm interested to get feedback.

Tim




On 11/10/08 2:26 PM, "Tim Sturge" <tsturge@hi5.com> wrote:

> I think we've gone around in a loop here. It's exactly due to the inadequ=
acy
> of cached filters that I'm considering what I'm doing.
>=20
> Here's the section from my first email that is most illuminating:
> "
> The reason I have this question is that I am writing a multi-filter for s=
ingle
> term fields. My index contains many fields for which each document contai=
ns a
> single term (e.g. date, zipcode, country) and I need to perform range que=
ries
> or set matches over these fields, many of which are very inclusive (they =
match
> >10% of the total documents)
>=20
> A cached RangeFilter works well when there are a small number of potentia=
l
> options (e.g. for countries) but when there are many options (consider a =
date
> range or a set of zipcodes) there are too many potential choices to cache=
 each
> possibility and it is too inefficient to build a filter on the fly for ea=
ch
> query (as you have to visit 10% of documents to build the filter despite =
the
> query itself matching 0.1%)
>=20
> Therefore I was considering building a int[reader.maxDocs()] array for ea=
ch
> field and putting into it the term number for each document. This relies =
on
> the fact that each document contains only a single term for this field, b=
ut
> with it I should be able to quickly construct a =B3multi-filter=B2 (that is,
> something that iterates the array and checks that the term is in the rang=
e or
> set).
> "
>=20
> Does this help explain my rationale? The reason I'm posting here is that =
I
> imagine there are lots of people with this issue. In particular date rang=
es
> seem to be something that lots of people use but Lucene implements fairly
> poorly.
>=20
> Tim
>=20
> On 11/10/08 1:58 PM, "Paul Elschot" <paul.elschot@xs4all.nl> wrote:
>=20
>> Op Monday 10 November 2008 22:21:20 schreef Tim Sturge:
>>> Hmmm -- I hadn't thought about that so I took a quick look at the
>>> term vector support.
>>>=20
>>> What I'm really looking for is a compact but performant
>>> representation of a set of filters on the same (one term field).
>>> Using term vectors would mean an algorithm similar to:
>>>=20
>>> String myfield;
>>> String myterm;
>>> TermVector tv;
>>> for (int i =3D 0 ;  i < maxDoc ; i++) {
>>>     tv =3D reader.getTermFreqVector(i,country)
>>>     if (tv.indexOf(myterm) !=3D -1) {
>>>           // include this doc...
>>>         }
>>> }
>>>=20
>>> The key thing I am looking to achieve here is performance comparable
>>> to filters. I suspect getTermFremVector() is not efficient enough but
>>> I'll give it a try.
>>>=20
>>=20
>> Better use a TermDocs on myterm for this, have a look at the code of
>> RangeFilter.
>>=20
>> Filters are normally created from a slower query by setting a bit in an
>> OpenBitSet at "include this doc". Then they are reused for their speed.
>>=20
>> Filter caching could help. In case memory becomes a problem
>> and the filters are sparse enough, try and use SortedVIntList
>> as the underlying data structure in the cache. (Sparse enough means
>> less than 1 in 8 of all docs available the index reader.)
>> See also LUCENE-1296 for caching another data structure than the
>> one used to collect the filtered docs.
>>=20
>> Regards,
>> Paul Elschot
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 05:16:19 2008
Return-Path: <java-user-return-37095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38640 invoked from network); 11 Nov 2008 05:16:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 05:16:18 -0000
Received: (qmail 24813 invoked by uid 500); 11 Nov 2008 05:16:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24770 invoked by uid 500); 11 Nov 2008 05:16:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24753 invoked by uid 99); 11 Nov 2008 05:16:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 21:16:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of need4spd@gmail.com designates 66.249.90.178 as permitted sender)
Received: from [66.249.90.178] (HELO ik-out-1112.google.com) (66.249.90.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 05:14:59 +0000
Received: by ik-out-1112.google.com with SMTP id c29so2278110ika.5
        for <java-user@lucene.apache.org>; Mon, 10 Nov 2008 21:15:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=wKFCvZ8L+tfA1AorJZSurUFDgjUJK951c6TdM2NA5iE=;
        b=LrxsCt+5P7XlIEnBKnCkUcwv8fdO+wYgXqCYJt2Tw1ZqKJJVmNwDuBBfX9MYxfih4D
         hBV80cpgRXSYITKEKH+GOklUdA6HsLabF6pqY/Y4wkCYl+7nsO+7f9arsQxzs02EwqLg
         D1OI4Qgu8+Jgv409wOS+g5Pr53hbvmhUDTHO0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=H2i3El+mGOmdhP70P372i9pxoc2W6Vy8futU2rYFWhzYbAnubhvvHnD5/5FGzWF5eP
         X7myDG1UXUddSoECtNclwMq8V+1e8slC8Tf+p9SwYVR6MPXiKhLmfLQQv7uXZXhTtSQD
         znwAezTvchHEA3PbEjdA5IM6WOb4I3oOUckls=
Received: by 10.103.251.3 with SMTP id d3mr4248505mus.72.1226380530860;
        Mon, 10 Nov 2008 21:15:30 -0800 (PST)
Received: by 10.103.226.10 with HTTP; Mon, 10 Nov 2008 21:15:30 -0800 (PST)
Message-ID: <a823853a0811102115h7d12f57v12484718fede40e1@mail.gmail.com>
Date: Tue, 11 Nov 2008 14:15:30 +0900
From: "=?EUC-KR?B?wOW/67yu?=" <need4spd@gmail.com>
To: java-user@lucene.apache.org
Subject: deprecated method Token class constructor
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27809_12772891.1226380530849"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27809_12772891.1226380530849
Content-Type: text/plain; charset=EUC-KR
Content-Transfer-Encoding: base64
Content-Disposition: inline

aGkgOikKZmlyc3QsIGknbSBzb3JyeSBmb3IgbXkgYmFkIEVuZ2xpc2guLgoKSSBoYXZlIGEgcXVl
c3Rpb24uCkluIGx1Y2VuZSAyLjQuMCAsIFRva2VuIGNsYXNzIGNvbnN0cnVjdG9yICBwdWJsaWMg
VG9rZW4oU3RyaW5nIHRleHQsIGludApzdGFydCwgaW50IGVuZCwgaW50IGZsYWdzKSBpcyBkZXBy
ZWNhdGVkLgpJIHdhbnQgdG8ga25vdyB3aHkuLi4uIGFuZApXaGF0IGNvbnN0cnVjdG9yIGlzIHRo
ZSBzdWJzdGl0dXRpb24gZm9yIHRoaXMgZGVwcmVjYXRlZCBjb25zdHJ1Y3Rvcj8KCk1heSBJIHVz
ZSBsaWtlIHRoaXM/ClRva2VuIHRva2VuID0gbmV3IFRva2VuKFN0cmluZy50b0NoYXJBcnJheSgp
LCAxLDEsIndvcmQiKTsKCgpUaGFua3MuIDopCi0tIApERVa/673ECmh0dHA6Ly9kZXZ5b25nc2lr
LnRpc3RvcnkuY29tCg==
------=_Part_27809_12772891.1226380530849--

From java-user-return-37096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 06:03:22 2008
Return-Path: <java-user-return-37096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67829 invoked from network); 11 Nov 2008 06:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 06:03:22 -0000
Received: (qmail 62900 invoked by uid 500); 11 Nov 2008 06:03:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62872 invoked by uid 500); 11 Nov 2008 06:03:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62861 invoked by uid 99); 11 Nov 2008 06:03:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Nov 2008 22:03:23 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=SPF_PASS,WHOIS_DMNBYPROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of michael.wechner@wyona.com designates 195.226.6.75 as permitted sender)
Received: from [195.226.6.75] (HELO server1.example.com) (195.226.6.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 06:02:02 +0000
Received: from michael-wechners-mac-mini.local (236-115.76-83.cust.bluewin.ch [83.76.115.236])
	by server1.example.com (Postfix) with ESMTP id 4C0EE10C952
	for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 07:14:19 +0100 (CET)
Message-ID: <49191FDC.9010507@wyona.com>
Date: Tue, 11 Nov 2008 07:02:04 +0100
From: Michael Wechner <michael.wechner@wyona.com>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: performance/scalability issues re filtering of protected search
 results
References: <49189116.5090601@wyona.com> <359a92830811101206k64e5bcd6i87b2d444ed84bee@mail.gmail.com>
In-Reply-To: <359a92830811101206k64e5bcd6i87b2d444ed84bee@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson schrieb:
> This has been discussed more than a few times, I suggest you take
> a look at the searchable archive for things like privileges, access
> privileges, etc. You'll find lots of information faster that way...
>   
You mean Erik Hatcher's answer re SecurityFilter
http://archives.devshed.com/forums/apache-92/lucene-vs-sql-database-1416862.html

or Eugene Dzhurinsky's post where he is also asking re pre-filtering

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3c20051005080100.GD457@jdevoff.zssm.zp.ua%3e
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3C20051005113829.GA59420@jdevoff.zssm.zp.ua%3E
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3c20051005125619.GC59420@jdevoff.zssm.zp.ua%3e

and Erik keeps suggesting to use a filter

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3c20051005101406125.00000003632@huixp%3e

whereas Hui also points out that filters are a problem re 
peformance/scalability

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200510.mbox/%3c20051005101406125.00000003632@huixp%3e

I actually searched quite a bit before my post, but didn't find an 
answer which was really answering the performance/scalability issues.
But if it was answered before and somebody knows about it, then I would 
very much appreciate any concrete URLs/pointers.

Thanks

Michael
> Best
> Erick
>
> On Mon, Nov 10, 2008 at 2:52 PM, Michael Wechner
> <michael.wechner@wyona.com>wrote:
>
>   
>> Hi
>>
>> We have about 1 mio documents and growing within a hierarchical order (3 to
>> 20 deep) and about 3000 people accessing these nodes, whereas some people
>> have access to certain branches and other people to other branches and some
>> branches are shared. The access control of these nodes is changing every day
>> and also contains shortcuts  which allows people to glimpse into parts of
>> branches which they otherwise do not have access to.
>>
>> Currently we have one index for all nodes, which is ok
>> peformance/scalability wise, but before displaying the results we need to
>> filter based on the access privileges each user has, which is very bad
>> peformance wise, because it might be that the first 10K hits are all
>> protected re this user and hence it can take a very long time that one
>> finally finds a result that the user is actually allowed to see.
>>
>> We were thinking about introducing an index for each user which only
>> contains the documents a user is actually is allowed to see, but this
>> doesn't scale well either if the user number is growing.
>>
>> Any hints how other people are approaching such a situation would be very
>> much appreciated.
>>
>> Thanks
>>
>> Michael
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 10:28:02 2008
Return-Path: <java-user-return-37097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1130 invoked from network); 11 Nov 2008 10:28:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 10:28:02 -0000
Received: (qmail 93111 invoked by uid 500); 11 Nov 2008 10:28:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93075 invoked by uid 500); 11 Nov 2008 10:28:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93064 invoked by uid 99); 11 Nov 2008 10:28:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 02:28:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 Nov 2008 10:26:43 +0000
Received: (qmail 17470 invoked by uid 60001); 11 Nov 2008 10:27:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=y34uoZo89iNNkVUy1iW0IlYmJ7Uil6KTYI65bBHd1bY3oOr+BObISepcpAoWJ4be1ypO7AfXrEwyGDwM12iKU5YSfpRbQqgLUDqfRTB8eNJYQGN+ZoXyUNxVftpwNiWcvUy3vbQdO7Zi2kTvcBYGAf5sa+7faV7iuwAZOI5HVvk=;
X-YMail-OSG: fDws0BcVM1lPMjzg6eJuf9hIk9ZXT1RhsfDTZh9Vl0wd3dOXjyNvL7lwKiPcYSUlK0ENmbK7YFbbGlXuGh1mhUmmWNhx_rJSrnA2zYX.UC9jmduORjbMVbuoxdxYQFMiamHuTAchcEWJJ2_FxSRmyu0U9eSDu06NPzMsyKf6
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Tue, 11 Nov 2008 10:27:24 GMT
X-Mailer: YahooMailRC/1155.29 YahooMailWebService/0.7.260.1
Date: Tue, 11 Nov 2008 10:27:24 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Using DeletionPolicy to roll back to previous commit point
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <276743.17125.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Probably a question for Mike M.=0AIs it possible/sensible to use IndexDelet=
ionPolicy to remove the *newest* commit points (as opposed to the usual sce=
nario of deleting old commit points). =0A=0A=0AI experimented with this: =
=0A=0A    class RollbackDeletionPolicy implements IndexDeletionPolicy=0A   =
 {=0A        public void onCommit(List commits) throws IOException {=0A    =
    }=0A=0A        public void onInit(List commits) throws IOException {=0A=
            IndexCommit commit=3D(IndexCommit)commits.get(commits.size()-1)=
;=0A            commit.delete();            =0A        }        =0A    }=0A=
=0A....=0A=0AAnd opening and closing a writer...=0A=0A  void myRollback()=
=0A  {=0A        IndexWriter w=3Dnew IndexWriter(dir,analyzer, new Rollback=
DeletionPolicy(),=0A                                     MaxFieldLength.UNL=
IMITED);=0A        w.close();=0A  }=0A=0A=0AThis mostly worked but segments=
.gen was not updated to reflect the regression in the list of active segmen=
ts. Is there an API somewhere to reinstate the segments.gen file?=0AI assum=
e I  would also need to take care to close all readers before attempting a =
rollback-to-earlier-commitpoint.=0A=0ACheers,=0AMark=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 10:30:23 2008
Return-Path: <java-user-return-37098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2213 invoked from network); 11 Nov 2008 10:30:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 10:30:23 -0000
Received: (qmail 96669 invoked by uid 500); 11 Nov 2008 10:30:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96629 invoked by uid 500); 11 Nov 2008 10:30:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96600 invoked by uid 99); 11 Nov 2008 10:30:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 02:30:21 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 10:28:59 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1646094ywj.5
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 02:29:31 -0800 (PST)
Received: by 10.90.28.12 with SMTP id b12mr7035775agb.115.1226399370106;
        Tue, 11 Nov 2008 02:29:30 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm9771639aga.13.2008.11.11.02.29.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 11 Nov 2008 02:29:29 -0800 (PST)
Message-Id: <BA2693E1-0225-4A1B-9384-F6DB9A98114E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <C53E22F6.12C9%tsturge@hi5.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Term numbering and range filtering
Date: Tue, 11 Nov 2008 05:29:27 -0500
References: <C53E22F6.12C9%tsturge@hi5.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

The other part of your proposal was to somehow "number" term text such
that term range comparisons can be implemented fast int comparison.

I like the idea of building dynamic filters on top of a
"column-stride" array of field values.  You could extend it to be a
real Scorer, too.  EG I could imagine holding a "last changed"
column-stride array, and then building a Scorer on top of that which
returns a "recency score", and then using function query to multiply
that with the actual relevance score.

Maybe the right place for this to land is function queries, since they
are already creating queries based on DocValues (=3D a column-stride
store)?  But your change would extend function queries to also be able
to do filtering based on the DocValues (today function queries can
only alter the score, I think).

However, this approach is still a linear O(maxDocID) search.  It
should have a very low constant in front, since 1) it's all in RAM and
2) if you number term-text then you're using much faster int
comparison, not String comparison.  Also, once LUCENE-1231
(column-stride fields) is in, loading your column-stride array should
be much faster than it is today with FieldCache.

Yet another option, which gives faster than linear performance for
Term range searching, are the ideas in this paper for enabling
efficient range searching:

   http://fontoura.org/papers/paramsearch.pdf

However that'd be quite a bit deeper change to Lucene.

Mike

Tim Sturge wrote:

> Reading this I realize how unclear it is, so let me give a concrete =20=

> example:
>
> I want to do a search restricting users by age range. So someone can =20=

> ask for
> the users 18-35, 40-60 etc.
>
> Here are the options I considered:
>
> 1) construct a RangeQuery. This is a 20-40 clause boolean subquery =20
> in an
> otherwise 1 or 2 clause query and I'd like to avoid that. It also has
> scoring artifacts I wish to avoid (I don't want users to rank higher =20=

> just
> because we have less users of that particular age).
>
> 2) construct a ConstantScoreRangeQuery. Then I'm forced to iterate =20
> all the
> users in the age range for each query. This was cost-prohibitive.
>
> 3) cache filters for each age range. Problem is there are 50 =20
> starting points
> and 50 ending points and caching 2500 filters is unrealistic.
>
> 4) cache filters for each age, and or them together for each query =20
> (there's
> stuff in contrib that does this.) This is best so far, but does =20
> require
> caching 50 filters and doing 20 bitset ors per query on an 8MB bitset.
>
> So what I thought would be interesting is
>
> 5) build an array of bytes where the n-th byte contains the age of =20
> user n.
> Given the range it's fairly trivial to make this behave like a =20
> filter (ie
> it's relatively easy to implement next() and skipTo() efficiently and
> trivial to decide if a document is in the range or not.)
>
> Then I realized this approach would make sense not just for ages, =20
> but also
> for countries, date ranges and zip code sets, so I thought I'd ask =20
> if anyone
> had tried it before.
>
> Part of me assumes that someone must have done this already; so either
> there's an implementation out there already or there's a good reason =20=

> I don't
> see that this is entirely impractical. So I'm interested to get =20
> feedback.
>
> Tim
>
>
>
>
> On 11/10/08 2:26 PM, "Tim Sturge" <tsturge@hi5.com> wrote:
>
>> I think we've gone around in a loop here. It's exactly due to the =20
>> inadequacy
>> of cached filters that I'm considering what I'm doing.
>>
>> Here's the section from my first email that is most illuminating:
>> "
>> The reason I have this question is that I am writing a multi-filter =20=

>> for single
>> term fields. My index contains many fields for which each document =20=

>> contains a
>> single term (e.g. date, zipcode, country) and I need to perform =20
>> range queries
>> or set matches over these fields, many of which are very inclusive =20=

>> (they match
>>> 10% of the total documents)
>>
>> A cached RangeFilter works well when there are a small number of =20
>> potential
>> options (e.g. for countries) but when there are many options =20
>> (consider a date
>> range or a set of zipcodes) there are too many potential choices to =20=

>> cache each
>> possibility and it is too inefficient to build a filter on the fly =20=

>> for each
>> query (as you have to visit 10% of documents to build the filter =20
>> despite the
>> query itself matching 0.1%)
>>
>> Therefore I was considering building a int[reader.maxDocs()] array =20=

>> for each
>> field and putting into it the term number for each document. This =20
>> relies on
>> the fact that each document contains only a single term for this =20
>> field, but
>> with it I should be able to quickly construct a =93multi-=20
>> filter=94 (that is,
>> something that iterates the array and checks that the term is in =20
>> the range or
>> set).
>> "
>>
>> Does this help explain my rationale? The reason I'm posting here is =20=

>> that I
>> imagine there are lots of people with this issue. In particular =20
>> date ranges
>> seem to be something that lots of people use but Lucene implements =20=

>> fairly
>> poorly.
>>
>> Tim
>>
>> On 11/10/08 1:58 PM, "Paul Elschot" <paul.elschot@xs4all.nl> wrote:
>>
>>> Op Monday 10 November 2008 22:21:20 schreef Tim Sturge:
>>>> Hmmm -- I hadn't thought about that so I took a quick look at the
>>>> term vector support.
>>>>
>>>> What I'm really looking for is a compact but performant
>>>> representation of a set of filters on the same (one term field).
>>>> Using term vectors would mean an algorithm similar to:
>>>>
>>>> String myfield;
>>>> String myterm;
>>>> TermVector tv;
>>>> for (int i =3D 0 ;  i < maxDoc ; i++) {
>>>>    tv =3D reader.getTermFreqVector(i,country)
>>>>    if (tv.indexOf(myterm) !=3D -1) {
>>>>          // include this doc...
>>>>        }
>>>> }
>>>>
>>>> The key thing I am looking to achieve here is performance =20
>>>> comparable
>>>> to filters. I suspect getTermFremVector() is not efficient enough =20=

>>>> but
>>>> I'll give it a try.
>>>>
>>>
>>> Better use a TermDocs on myterm for this, have a look at the code of
>>> RangeFilter.
>>>
>>> Filters are normally created from a slower query by setting a bit =20=

>>> in an
>>> OpenBitSet at "include this doc". Then they are reused for their =20
>>> speed.
>>>
>>> Filter caching could help. In case memory becomes a problem
>>> and the filters are sparse enough, try and use SortedVIntList
>>> as the underlying data structure in the cache. (Sparse enough means
>>> less than 1 in 8 of all docs available the index reader.)
>>> See also LUCENE-1296 for caching another data structure than the
>>> one used to collect the filtered docs.
>>>
>>> Regards,
>>> Paul Elschot
>>>
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 11:12:10 2008
Return-Path: <java-user-return-37099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17593 invoked from network); 11 Nov 2008 11:12:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 11:12:10 -0000
Received: (qmail 42988 invoked by uid 500); 11 Nov 2008 11:12:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42953 invoked by uid 500); 11 Nov 2008 11:12:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42942 invoked by uid 99); 11 Nov 2008 11:12:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 03:12:08 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.18] (HELO mail-gx0-f18.google.com) (209.85.217.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 11:10:48 +0000
Received: by gxk11 with SMTP id 11so24600gxk.5
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 03:11:30 -0800 (PST)
Received: by 10.90.87.7 with SMTP id k7mr7077987agb.85.1226401889734;
        Tue, 11 Nov 2008 03:11:29 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 30sm1645253hso.16.2008.11.11.03.11.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 11 Nov 2008 03:11:28 -0800 (PST)
Message-Id: <DCEBCD3E-C3D7-4984-A8D7-7D6A55E146F8@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <C53DBAFE.127E%tsturge@hi5.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Term numbering and range filtering
Date: Tue, 11 Nov 2008 06:11:27 -0500
References: <C53DBAFE.127E%tsturge@hi5.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


It seems like for many of your examples (age, zip code, country),
simply computing & storing the mapping yourself (your first option
below) would actually be viable?

Also: I think in fact you never need to merge the term numbering for
many segments during searching?  Ie, the search runs one IndexReader
at a time, so your term numbering only needs to run in the context of
a single IndeReader?

If merging-for-searching is not necessary then I think this ("get term
number" for a single segment) is a straightforward extension to
TermInfosReader and then you can accomplish forward (Term -> number)
mappping via TermInfosReader without holding an all-in-ram map (it
will cost you a seek to look up the number of a term though, but, seek
will soonish be much lower cost, with SSDs, so...).

Also, if the reverse mapping is ever needed (I think it may not be?)
TermInfosReader could also be extended to seek by term number.

And... the way FieldCache API works now is actually good for your use
case, because it enums the Terms in order, and then for each Term
enums all docs having that Term.  You could extend that to increment
the term counter as its loading.

Whereas LUCENE-1231 (column stride fields) wouldn't initially make
this ("translate term text to term number while loading") possible,
though maybe we should in fact make that an option (which is I think
the same as your 2nd option below).

So I think the separable idea of using term numbers, both in the index
format when storing column-stride fields, and then in RAM for fast
RAM-based range filtering/scoring, makes alot of sense.

It will get tricky when you need a different Collator than simple Java
String comparisons, but LUCENE-1435 is already working towards letting
you use a different Collator per-field.

Mike

Tim Sturge wrote:

> Yes, that is a significant issue. What I'm coming to realize is that =20=

> either
> I will end up with something like
>
> class MultiFilter {
>   String field;
>   private int[] termInDoc;
>   Map<Term,int> termToInt;
>   ...
> }
>
> which can be entirely built on the current lucene APIs but has =20
> significantly
> more overhead (the termToInt mapping in particular and the need to =20
> construct
> the mapping and array on startup)
>
>
> Or I can go deep into the guts and add a data file per-segment with =20=

> a format
> something like
>
> int version
> int numFields
> (int fieldNum, long offset) ^ numFields
> (int termForDoc) ^ (maxDocs * numFields)
>
> and add something to FieldInfo  like  boolean storeMultiFilter;
> and FieldInfos something like STORE_MULTIFILTER =3D 0x40; I'd need to =20=

> add
> an int termNum to the .tis file as well.
>
> This is clearly a lot more work than the first solution, but it is a =20=

> lot
> nicer to deal with as well. Is this interesting to anyone other than =20=

> me?
>
> Tim
>
>
>
>
> On 11/9/08 12:23 PM, "Michael McCandless" =20
> <lucene@mikemccandless.com> wrote:
>
>>
>> Conceivably, TermInfosReader could track the sequence number of each
>> term.
>>
>> A seek/skipTo would know which sequence number it just jumped too,
>> because the index is regular (every 128 terms by default), and then
>> each next() call could increment that.  Then retrieving this number
>> would be as costly as calling eg IndexReader.docFreq(Term) is now.
>>
>> But I'm not sure how a multi-segment index  would work, ie how would
>> MultiSegmentReader compute this for its terms?  Or maybe you'd just =20=

>> do
>> this per-segment?
>>
>> Mike
>>
>> Tim Sturge wrote:
>>
>>> Hi,
>>>
>>> I=92m wondering if there is any easy technique to number the terms =
in
>>> an index
>>> (By number I mean map a sequence of terms to a contiguous range of
>>> integers
>>> and map terms to these numbers efficiently)
>>>
>>> Looking at the Term class and the .tis/.tii index format it appears
>>> that the
>>> terms are stored in an ordered and prefix-compressed format, but
>>> while there
>>> are pointers from a term to the .frq and .prx files, neither is =20
>>> really
>>> suitable as a sequence number.
>>>
>>> The reason I have this question is that I am writing a multi-filter
>>> for
>>> single term fields. My index contains many fields for which each
>>> document
>>> contains a single term (e.g. date, zipcode, country) and I need to
>>> perform
>>> range queries or set matches over these fields, many of which are =20=

>>> very
>>> inclusive (they match >10% of the total documents)
>>>
>>> A cached RangeFilter works well when there are a small number of
>>> potential
>>> options (e.g. for countries) but when there are many options
>>> (consider a
>>> date range or a set of zipcodes) there are too many potential
>>> choices to
>>> cache each possibility and it is too inefficient to build a filter
>>> on the
>>> fly for each query (as you have to visit 10% of documents to build =20=

>>> the
>>> filter despite the query itself matching 0.1%)
>>>
>>> Therefore I was considering building a int[reader.maxDocs()] array
>>> for each
>>> field and putting into it the term number for each document. This
>>> relies on
>>> the fact that each document contains only a single term for this
>>> field, but
>>> with it I should be able to quickly construct a =93multi-filter=94 =
(that
>>> is,
>>> something that iterates the array and checks that the term is in the
>>> range
>>> or set).
>>>
>>> Right now it looks like I can do some very ugly surgery and perhaps
>>> use the
>>> offset to the prx file even though it is not contiguous. But I=92m
>>> hoping
>>> there is a better technique that I=92m just not seeing right now.
>>>
>>> Thanks,
>>>
>>> Tim
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 13:33:22 2008
Return-Path: <java-user-return-37100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67339 invoked from network); 11 Nov 2008 13:33:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 13:33:22 -0000
Received: (qmail 37176 invoked by uid 500); 11 Nov 2008 13:33:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37146 invoked by uid 500); 11 Nov 2008 13:33:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37135 invoked by uid 99); 11 Nov 2008 13:33:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 05:33:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.202.226.200] (HELO gate.abas.de) (212.202.226.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 13:32:03 +0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.0/8.14.0) with ESMTP id mABDWhGN020644
	for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 14:32:43 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 5/gate.abas.de/smtp-gw/mscan; Tue Nov 11 14:32:43 2008
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: Boosting results
Date: Tue, 11 Nov 2008 14:32:36 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <200811102042.05672.wzzelfzzel@abas.de> <12D90D7D-A53A-4DE9-B966-E48015BF369B@ehatchersolutions.com>
In-Reply-To: <12D90D7D-A53A-4DE9-B966-E48015BF369B@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200811111432.36812.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 11 November 2008 02:18:39 Erik Hatcher wrote:
>
> The integration won't be too painful... the main thing is that Solr
> requires* some configuration files, literally on the filesystem, in
> order to fire up and be happy.  And you'll need to craft Solr's
> schema.xml to jive with how you indexed with pure Lucene.

Thanks Erik, I will give Solr a try. A list of files and classes I have=20
to use or supply to Solr will be appreciated. For now it is
=2D EmbeddedSolrServer
=2D SolrQuery
=2D schema.xml

> That'll do the job, without a servlet engine. =A0But a servlet engine =A0
> can be mighty handy when you need to go to distributed search, =A0
> replication, etc. =A0But one can use Solr very much like using Lucene,
> API-only (but with config files).

Yes - for additional tasks you may use additional software or services,=20
but I do not like to bloat the project for nothing.

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 13:34:20 2008
Return-Path: <java-user-return-37101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67854 invoked from network); 11 Nov 2008 13:34:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 13:34:19 -0000
Received: (qmail 39405 invoked by uid 500); 11 Nov 2008 13:34:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39375 invoked by uid 500); 11 Nov 2008 13:34:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39364 invoked by uid 99); 11 Nov 2008 13:34:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 05:34:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.202.226.200] (HELO gate.abas.de) (212.202.226.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 13:33:01 +0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.0/8.14.0) with ESMTP id mABDXDqN002703
	for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 14:33:13 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 5/gate.abas.de/smtp-gw/mscan; Tue Nov 11 14:33:13 2008
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: Boosting results
Date: Tue, 11 Nov 2008 14:33:04 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <F9A5F87E-1574-401A-989F-025D85CB5E22@mikemccandless.com> <49183DF7.1060505@gmail.com>
In-Reply-To: <49183DF7.1060505@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200811111433.04610.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

On Monday 10 November 2008 14:58:15 Mark Miller wrote:
> > But: it's slow to load a field for the first time. =A0LUCENE-1231
> > (column-stride fields) aims to greatly speed up the load time.
>
> Test it out though. In some recent testing I was doing it was *way*
> faster than I thought it would be based on what I had been reading.
> Of course if every term is unique, its going to be worse, but even
> with like 10 mil docs and a few hundred thousand uniques, either I
> was doing something wrong, or even on my 4200rpm laptop hd, it loaded
> like nothing (of course even a second load and then a search is much
> slower than just a warmed search though). Was hoping to see some
> advantage with a payload implementation with LUCENE-831, but really
> didn't seem to...

Currently I have 50 mil docs maximum, but usually 5 mil or less, so this=20
seems to work for me, too.

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 13:48:10 2008
Return-Path: <java-user-return-37102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77355 invoked from network); 11 Nov 2008 13:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 13:48:10 -0000
Received: (qmail 56840 invoked by uid 500); 11 Nov 2008 13:48:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56801 invoked by uid 500); 11 Nov 2008 13:48:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56789 invoked by uid 99); 11 Nov 2008 13:48:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 05:48:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 13:46:50 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 163AE30EFC18; Tue, 11 Nov 2008 06:47:33 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (unknown [138.210.0.224])
	by ehatchersolutions.com (Postfix) with ESMTP id 5116730EFC16
	for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 06:47:32 -0700 (MST)
Message-Id: <53E10004-C4FB-4632-8954-7DF0BD2856E5@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <200811111432.36812.wzzelfzzel@abas.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Boosting results
Date: Tue, 11 Nov 2008 08:47:31 -0500
References: <55F9EF953014514EB6BEE1F5198CEEB403C1D276@exchange.slc.mainstreamdata.com> <200811102042.05672.wzzelfzzel@abas.de> <12D90D7D-A53A-4DE9-B966-E48015BF369B@ehatchersolutions.com> <200811111432.36812.wzzelfzzel@abas.de>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.1 required=5.0 tests=BAYES_00,
	DNS_FROM_SECURITYSAGE autolearn=no version=3.1.1


On Nov 11, 2008, at 8:32 AM, Stefan Trcek wrote:

> On Tuesday 11 November 2008 02:18:39 Erik Hatcher wrote:
>>
>> The integration won't be too painful... the main thing is that Solr
>> requires* some configuration files, literally on the filesystem, in
>> order to fire up and be happy.  And you'll need to craft Solr's
>> schema.xml to jive with how you indexed with pure Lucene.
>
> Thanks Erik, I will give Solr a try. A list of files and classes I  
> have
> to use or supply to Solr will be appreciated. For now it is
> - EmbeddedSolrServer
> - SolrQuery
> - schema.xml

Yeah, it'll look something like this: <http://svn.apache.org/repos/asf/lucene/solr/branches/solr-ruby-refactoring/examples/solrjruby.rb 
 >

That's JRuby code, but is easily translatable into pure Java.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 18:47:04 2008
Return-Path: <java-user-return-37103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69764 invoked from network); 11 Nov 2008 18:47:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 18:47:04 -0000
Received: (qmail 43265 invoked by uid 500); 11 Nov 2008 18:47:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42961 invoked by uid 500); 11 Nov 2008 18:47:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42950 invoked by uid 99); 11 Nov 2008 18:47:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 10:47:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 18:45:42 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.8/8.13.8) with ESMTP id mABIkNLM027812
	for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 19:46:23 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Term numbering and range filtering
Date: Tue, 11 Nov 2008 19:46:22 +0100
User-Agent: KMail/1.9.10
References: <C53E22F6.12C9%tsturge@hi5.com> <BA2693E1-0225-4A1B-9384-F6DB9A98114E@mikemccandless.com>
In-Reply-To: <BA2693E1-0225-4A1B-9384-F6DB9A98114E@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="windows-1252"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811111946.22609.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Tuesday 11 November 2008 11:29:27 schreef Michael McCandless:
>
> The other part of your proposal was to somehow "number" term text
> such that term range comparisons can be implemented fast int
> comparison.
...
>
>    http://fontoura.org/papers/paramsearch.pdf
>
> However that'd be quite a bit deeper change to Lucene.

The cheap version is hierarchical prefixing here:

http://wiki.apache.org/jakarta-lucene/DateRangeQueries

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 20:56:28 2008
Return-Path: <java-user-return-37104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32802 invoked from network); 11 Nov 2008 20:56:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 20:56:28 -0000
Received: (qmail 61702 invoked by uid 500); 11 Nov 2008 20:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61671 invoked by uid 500); 11 Nov 2008 20:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61660 invoked by uid 99); 11 Nov 2008 20:56:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 12:56:28 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 20:55:07 +0000
Received: by yw-out-2324.google.com with SMTP id 3so47537ywj.5
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 12:55:48 -0800 (PST)
Received: by 10.100.254.15 with SMTP id b15mr3534269ani.35.1226436948259;
        Tue, 11 Nov 2008 12:55:48 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id y56sm2717607hsb.19.2008.11.11.12.55.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 11 Nov 2008 12:55:47 -0800 (PST)
Message-Id: <1D6FD93A-B6CE-4879-9454-0AF0CFA31BB1@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <200811111946.22609.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Term numbering and range filtering
Date: Tue, 11 Nov 2008 15:55:45 -0500
References: <C53E22F6.12C9%tsturge@hi5.com> <BA2693E1-0225-4A1B-9384-F6DB9A98114E@mikemccandless.com> <200811111946.22609.paul.elschot@xs4all.nl>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Also, one nice optimization we could do with the "term number column- 
stride array" is do bit packing (borrowing from the PFOR code)  
dynamically.

Ie since we know there are X unique terms in this segment, when  
populating the array that maps docID to term number we could use  
exactly the right number of bits.  Enumerated fields with not many  
unique values (eg, country, state) would take relatively little RAM.   
With LUCENE-1231, where the fields are stored column stride on disk,  
we could do this packing during index such that loading at search time  
is very fast.

Mike

Paul Elschot wrote:

> Op Tuesday 11 November 2008 11:29:27 schreef Michael McCandless:
>>
>> The other part of your proposal was to somehow "number" term text
>> such that term range comparisons can be implemented fast int
>> comparison.
> ...
>>
>>   http://fontoura.org/papers/paramsearch.pdf
>>
>> However that'd be quite a bit deeper change to Lucene.
>
> The cheap version is hierarchical prefixing here:
>
> http://wiki.apache.org/jakarta-lucene/DateRangeQueries
>
> Regards,
> Paul Elschot
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 21:16:04 2008
Return-Path: <java-user-return-37105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41994 invoked from network); 11 Nov 2008 21:16:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 21:16:03 -0000
Received: (qmail 90757 invoked by uid 500); 11 Nov 2008 21:16:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90731 invoked by uid 500); 11 Nov 2008 21:16:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90720 invoked by uid 99); 11 Nov 2008 21:16:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 13:16:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 21:14:40 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id mABLEqt9009399
	for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 22:14:53 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Term numbering and range filtering
Date: Tue, 11 Nov 2008 22:14:53 +0100
User-Agent: KMail/1.9.10
References: <C53E22F6.12C9%tsturge@hi5.com> <200811111946.22609.paul.elschot@xs4all.nl> <1D6FD93A-B6CE-4879-9454-0AF0CFA31BB1@mikemccandless.com>
In-Reply-To: <1D6FD93A-B6CE-4879-9454-0AF0CFA31BB1@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811112214.54049.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Tuesday 11 November 2008 21:55:45 schreef Michael McCandless:
> Also, one nice optimization we could do with the "term number column-
> stride array" is do bit packing (borrowing from the PFOR code)
> dynamically.
>
> Ie since we know there are X unique terms in this segment, when
> populating the array that maps docID to term number we could use
> exactly the right number of bits.  Enumerated fields with not many
> unique values (eg, country, state) would take relatively little RAM.
> With LUCENE-1231, where the fields are stored column stride on disk,
> we could do this packing during index such that loading at search
> time is very fast.

Perhaps we'd better continue this at LUCENE-1231 or LUCENE-1410.
I think what you're referring to is PDICT, which has frame exceptions
for values that occur infrequently.

Regards,
Paul Elschot


>
> Mike
>
> Paul Elschot wrote:
> > Op Tuesday 11 November 2008 11:29:27 schreef Michael McCandless:
> >> The other part of your proposal was to somehow "number" term text
> >> such that term range comparisons can be implemented fast int
> >> comparison.
> >
> > ...
> >
> >>   http://fontoura.org/papers/paramsearch.pdf
> >>
> >> However that'd be quite a bit deeper change to Lucene.
> >
> > The cheap version is hierarchical prefixing here:
> >
> > http://wiki.apache.org/jakarta-lucene/DateRangeQueries
> >
> > Regards,
> > Paul Elschot
> >
> > -------------------------------------------------------------------
> >-- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 21:27:54 2008
Return-Path: <java-user-return-37106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52916 invoked from network); 11 Nov 2008 21:27:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 21:27:54 -0000
Received: (qmail 15076 invoked by uid 500); 11 Nov 2008 21:27:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15043 invoked by uid 500); 11 Nov 2008 21:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15000 invoked by uid 99); 11 Nov 2008 21:27:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 13:27:52 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.182] (HELO el-out-1112.google.com) (209.85.162.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 21:26:32 +0000
Received: by el-out-1112.google.com with SMTP id p32so69689elf.14
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 13:27:14 -0800 (PST)
Received: by 10.150.225.10 with SMTP id x10mr12533777ybg.78.1226438834412;
        Tue, 11 Nov 2008 13:27:14 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id j13sm10178386rne.4.2008.11.11.13.27.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 11 Nov 2008 13:27:13 -0800 (PST)
Message-Id: <EDCB729C-C03A-4A24-9072-B198B6520F2D@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <200811112214.54049.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Term numbering and range filtering
Date: Tue, 11 Nov 2008 16:27:12 -0500
References: <C53E22F6.12C9%tsturge@hi5.com> <200811111946.22609.paul.elschot@xs4all.nl> <1D6FD93A-B6CE-4879-9454-0AF0CFA31BB1@mikemccandless.com> <200811112214.54049.paul.elschot@xs4all.nl>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Paul Elschot wrote:

> Op Tuesday 11 November 2008 21:55:45 schreef Michael McCandless:
>> Also, one nice optimization we could do with the "term number column-
>> stride array" is do bit packing (borrowing from the PFOR code)
>> dynamically.
>>
>> Ie since we know there are X unique terms in this segment, when
>> populating the array that maps docID to term number we could use
>> exactly the right number of bits.  Enumerated fields with not many
>> unique values (eg, country, state) would take relatively little RAM.
>> With LUCENE-1231, where the fields are stored column stride on disk,
>> we could do this packing during index such that loading at search
>> time is very fast.
>
> Perhaps we'd better continue this at LUCENE-1231 or LUCENE-1410.
> I think what you're referring to is PDICT, which has frame exceptions
> for values that occur infrequently.

Yes let's move the discussion to Jira.

Actually I was referring to simple bit-packing.

For encoding array of compact enum terms (eg city, state, color, zip)  
I'm guessing the exceptions logic won't buy us much and would hurt  
seeking needed for column-stride fields.  But we should certainly test  
it.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 22:00:27 2008
Return-Path: <java-user-return-37107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83754 invoked from network); 11 Nov 2008 22:00:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 22:00:27 -0000
Received: (qmail 82927 invoked by uid 500); 11 Nov 2008 22:00:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82898 invoked by uid 500); 11 Nov 2008 22:00:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82879 invoked by uid 99); 11 Nov 2008 22:00:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 14:00:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dbichko@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 21:59:00 +0000
Received: by fk-out-0910.google.com with SMTP id 18so94119fkq.5
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 13:59:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=h4l2F7GahtHRHAdeMH1nKV2NsjuckLSebQenLtmw3LY=;
        b=DEWMxv0PTrxM/Llk5371qvHLh9nMvOezybAMALrh15oRljnwKBfjIpKDQyCItVlYux
         m6Tv1maVjAm7cjwfY0wSE5a1neUWfjgSqpLnjR9YRIoVto7D/roTg6OZE5Qe+3ap/PIS
         QaNULeVoLSpDiKGMD5fmg8HjLSWOqysQ0Y/6I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=gqMLbdoQvFm2YfIsRU1Aj6CZ1alB3H01G7LH2wzBJjjZ6K0kTOaeT9YqEvhujXht6l
         o/Z1ptuBwwrcfzU6opWMZ4CwwnoKwN6/9tzCt3tS4Ab+1meQyV9stm92MVhheRjy6sFn
         C87lsIdAMFAkixOvpAf7fTTwyeTRTPFCYDUfM=
Received: by 10.181.60.14 with SMTP id n14mr2652987bkk.23.1226440781837;
        Tue, 11 Nov 2008 13:59:41 -0800 (PST)
Received: by 10.181.30.6 with HTTP; Tue, 11 Nov 2008 13:59:41 -0800 (PST)
Message-ID: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>
Date: Tue, 11 Nov 2008 16:59:41 -0500
From: "Dmitri Bichko" <dbichko@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexSearcher and multi-threaded performance
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm pretty new to Lucene, so please bear with me if this has been
covered before.

The wiki suggests sharing a single IndexSearcher between threads for
best performance
(http://wiki.apache.org/lucene-java/ImproveSearchingSpeed).  I've
tested running the same set of queries with: multiple threads sharing
the same searcher, with a separate searcher for each thread, both
shared/private with a RAMDirectory in-memory index, and (just for fun)
in multiple JVMs running concurrently (the results are in milliseconds
to complete the whole job):

threads  multi-jvm  shared  per-thread  ram-shared  ram-thread
      1      72997   70883       72573       60308       60012
      2      33147   48762       35973       25498       25734
      4      16229   46828       21267       13127       27164
      6      13088   47240       14028        9858       29917
      8       9775   47020       10983        8948       10440
     10       8721   50132       11334        9587       11355
     12       7290   49002       11798        9832
     16       9365   47099       12338       11296

The shared searcher indeed behaves better with a ram-based index, but
what's going on with the disk-based one?  It's basically not scaling
beyond two threads. Am I just doing something completely wrong here?

The test consists of about 1,500 Boolean OR queries with 1-10
PhraseQueries each, with 1-20 Terms per PhraseQuery.  I'm using a
HitCollector to count the hits, so I'm not retrieving any results.
The index is about 5GB and 20 million documents.

This is running on a 8 x quad-core Opteron machine with plenty of RAM to spare.

Any idea why I would see this behaviour?

Thanks,
Dmitri

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 22:11:47 2008
Return-Path: <java-user-return-37108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93174 invoked from network); 11 Nov 2008 22:11:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 22:11:46 -0000
Received: (qmail 9659 invoked by uid 500); 11 Nov 2008 22:11:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9555 invoked by uid 500); 11 Nov 2008 22:11:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9544 invoked by uid 99); 11 Nov 2008 22:11:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 14:11:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.19 as permitted sender)
Received: from [209.85.217.19] (HELO mail-gx0-f19.google.com) (209.85.217.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 22:10:27 +0000
Received: by gxk12 with SMTP id 12so389361gxk.4
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 14:11:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=n0ORHL8QptSRqSihxoROtA16u2lwPzPNA8efUOENVUE=;
        b=eUVRUXoDHGVOKJbCJRiM4hnEcWyqoW1msTbi8Aq9QcJxZtHvl6CNXeGhI4TURVh2eH
         SYgatBPa37hTtbAQezFti/Qlqgagmz4MCt/fg3uG1Yzpj4u6zft437JXBTcm+OJP+1a1
         l0uHuFni54cDlMheKkfFrJxdWdiHSR9T8prBk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=bTSKv0UGLUOiNPK5BQOYaCJolp/WskscRRygBTTa+Y9ucMeeMrnO5r4S2MSzMNnWvW
         wJQ3P7C1zvHc1aJWgv1dLFrhJdc3BKlDw+jeBsmROrbQ9peUZ6dDWuQFD/JkT2/9OU0g
         JPyVtkJROyo2fmLOtkjAgpFFtCvs4aOgeGDyg=
Received: by 10.90.91.9 with SMTP id o9mr5239140agb.94.1226441378108;
        Tue, 11 Nov 2008 14:09:38 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 39sm10848126agb.23.2008.11.11.14.09.37
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 11 Nov 2008 14:09:37 -0800 (PST)
Message-ID: <491A02A4.5020108@gmail.com>
Date: Tue, 11 Nov 2008 17:09:40 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>
In-Reply-To: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Nice! An 8 core machine with a test ready to go!

How about trying the read only mode that was added to 2.4 on your 
IndexReader?

And if you you are on unix and could try trunk and use the new 
NIOFSDirectory implementation...that would be awesome.

Those two additions are our current hope for what your seeing...would be 
nice to know if we need to try for more (or if we need to petition the 
smart people that work on that stuff to try for more ;) ).

- Mark

Dmitri Bichko wrote:
> Hi,
>
> I'm pretty new to Lucene, so please bear with me if this has been
> covered before.
>
> The wiki suggests sharing a single IndexSearcher between threads for
> best performance
> (http://wiki.apache.org/lucene-java/ImproveSearchingSpeed).  I've
> tested running the same set of queries with: multiple threads sharing
> the same searcher, with a separate searcher for each thread, both
> shared/private with a RAMDirectory in-memory index, and (just for fun)
> in multiple JVMs running concurrently (the results are in milliseconds
> to complete the whole job):
>
> threads  multi-jvm  shared  per-thread  ram-shared  ram-thread
>       1      72997   70883       72573       60308       60012
>       2      33147   48762       35973       25498       25734
>       4      16229   46828       21267       13127       27164
>       6      13088   47240       14028        9858       29917
>       8       9775   47020       10983        8948       10440
>      10       8721   50132       11334        9587       11355
>      12       7290   49002       11798        9832
>      16       9365   47099       12338       11296
>
> The shared searcher indeed behaves better with a ram-based index, but
> what's going on with the disk-based one?  It's basically not scaling
> beyond two threads. Am I just doing something completely wrong here?
>
> The test consists of about 1,500 Boolean OR queries with 1-10
> PhraseQueries each, with 1-20 Terms per PhraseQuery.  I'm using a
> HitCollector to count the hits, so I'm not retrieving any results.
> The index is about 5GB and 20 million documents.
>
> This is running on a 8 x quad-core Opteron machine with plenty of RAM to spare.
>
> Any idea why I would see this behaviour?
>
> Thanks,
> Dmitri
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 22:16:50 2008
Return-Path: <java-user-return-37109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97176 invoked from network); 11 Nov 2008 22:16:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 22:16:50 -0000
Received: (qmail 17514 invoked by uid 500); 11 Nov 2008 22:16:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17486 invoked by uid 500); 11 Nov 2008 22:16:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17475 invoked by uid 99); 11 Nov 2008 22:16:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 14:16:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 22:15:31 +0000
Received: by yx-out-2324.google.com with SMTP id 3so62982yxj.5
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 14:16:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=A2ouXC7x2DjsIW8R0f4T1f210gnTp7MNXb6UQTwbbPQ=;
        b=s/uAvf0Y0/lU0Q3S9WY708JuM4bFE4G8TCZ/rI53Dp4wTPhnvA3JFGn/RR0mTTBlvy
         nMu9P+H2w3D2RxPLkRSZOu1M0YMnjtyeTEXoK1rExBIqP8erBifMSG868BiU3lr1EVPW
         pLkf2gXTD4onuv36s4hHv9+LastGBhOkUGIas=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=N35j0hlkEuHS3ml52HJ9eWC2ka4bVGCYWWhwUpPkNCEY+Y714pzROFEspJMp+wXThA
         xCNiOsum4NApAn2CHoMrh6TQlc2B8ZmWUvts5BY+1pir3l0RY3MNApVTD+di2bAV0UZs
         BKZzXP6gyl8rx9rLgQ1IIv5JDTsUq4gvycs/U=
Received: by 10.90.50.5 with SMTP id x5mr7706001agx.92.1226441773662;
        Tue, 11 Nov 2008 14:16:13 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 1sm10868117agb.20.2008.11.11.14.16.12
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 11 Nov 2008 14:16:13 -0800 (PST)
Message-ID: <491A0430.7020302@gmail.com>
Date: Tue, 11 Nov 2008 17:16:16 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com> <491A02A4.5020108@gmail.com>
In-Reply-To: <491A02A4.5020108@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


>
> And if you you are on unix and could try trunk and use the new 
> NIOFSDirectory implementation...that would be awesome.
Woah...that made 2.4 too. A 2.4 release will allow both optimizations. 
Many thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 22:41:31 2008
Return-Path: <java-user-return-37110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11845 invoked from network); 11 Nov 2008 22:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 22:41:31 -0000
Received: (qmail 61981 invoked by uid 500); 11 Nov 2008 22:41:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61955 invoked by uid 500); 11 Nov 2008 22:41:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61944 invoked by uid 99); 11 Nov 2008 22:41:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 14:41:31 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 22:40:12 +0000
Received: by qw-out-2122.google.com with SMTP id 5so72948qwi.53
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 14:40:54 -0800 (PST)
Received: by 10.214.78.7 with SMTP id a7mr9092397qab.118.1226443253853;
        Tue, 11 Nov 2008 14:40:53 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm12429891ywi.1.2008.11.11.14.40.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 11 Nov 2008 14:40:53 -0800 (PST)
Message-Id: <2DA1602E-72C8-454F-948B-CBEF408BB9E8@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IndexSearcher and multi-threaded performance
Date: Tue, 11 Nov 2008 17:40:51 -0500
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Nice results, thanks!

The poor disk-based scaling may be fixed by NIOFSDirectory, if you are  
on Unix.  If you are on Windows it won't help (and will likely be  
worse than FSDirectory), because of an apparently bug in Sun's JVM on  
Windows whereby NIO positional file reads seem to share a lock under  
the hood.

The poor ram-thread result  for 4 & 6 threads is odd.  Those numbers  
ought to be at least as good as ram-shared.  Is it possible those  
columns are swapped?  Because the ram-shared case should have been  
hurt by using a non-read-only IndexReader.

Mike

Dmitri Bichko wrote:

> Hi,
>
> I'm pretty new to Lucene, so please bear with me if this has been
> covered before.
>
> The wiki suggests sharing a single IndexSearcher between threads for
> best performance
> (http://wiki.apache.org/lucene-java/ImproveSearchingSpeed).  I've
> tested running the same set of queries with: multiple threads sharing
> the same searcher, with a separate searcher for each thread, both
> shared/private with a RAMDirectory in-memory index, and (just for fun)
> in multiple JVMs running concurrently (the results are in milliseconds
> to complete the whole job):
>
> threads  multi-jvm  shared  per-thread  ram-shared  ram-thread
>      1      72997   70883       72573       60308       60012
>      2      33147   48762       35973       25498       25734
>      4      16229   46828       21267       13127       27164
>      6      13088   47240       14028        9858       29917
>      8       9775   47020       10983        8948       10440
>     10       8721   50132       11334        9587       11355
>     12       7290   49002       11798        9832
>     16       9365   47099       12338       11296
>
> The shared searcher indeed behaves better with a ram-based index, but
> what's going on with the disk-based one?  It's basically not scaling
> beyond two threads. Am I just doing something completely wrong here?
>
> The test consists of about 1,500 Boolean OR queries with 1-10
> PhraseQueries each, with 1-20 Terms per PhraseQuery.  I'm using a
> HitCollector to count the hits, so I'm not retrieving any results.
> The index is about 5GB and 20 million documents.
>
> This is running on a 8 x quad-core Opteron machine with plenty of  
> RAM to spare.
>
> Any idea why I would see this behaviour?
>
> Thanks,
> Dmitri
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 11 22:59:03 2008
Return-Path: <java-user-return-37111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19545 invoked from network); 11 Nov 2008 22:59:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Nov 2008 22:59:03 -0000
Received: (qmail 95699 invoked by uid 500); 11 Nov 2008 22:59:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95669 invoked by uid 500); 11 Nov 2008 22:59:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95658 invoked by uid 99); 11 Nov 2008 22:59:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 14:59:02 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 22:57:43 +0000
Received: by an-out-0708.google.com with SMTP id b2so68328ana.5
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 14:58:14 -0800 (PST)
Received: by 10.100.142.4 with SMTP id p4mr3625778and.23.1226444294335;
        Tue, 11 Nov 2008 14:58:14 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b29sm11405840ana.33.2008.11.11.14.58.12
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 11 Nov 2008 14:58:13 -0800 (PST)
Message-Id: <FCE1F5B7-DB94-4236-B6E5-96A7FC778432@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <49148062.1090307@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: term offsets wrong depending on analyzer
Date: Tue, 11 Nov 2008 17:58:11 -0500
References: <49148062.1090307@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Just to followup... I opened these three issues:

   https://issues.apache.org/jira/browse/LUCENE-1441 (fixed in 2.9)
   https://issues.apache.org/jira/browse/LUCENE-1442 (fixed in 2.9)
   https://issues.apache.org/jira/browse/LUCENE-1448 (still iterating)

Mike

Christian Reuschling wrote:

> Hi Guys,
>
> I currently have a bug of wrong term offset values for fields analyzed
> with KeywordAnalyzer (and also unanalyzed fields, whereby I assume  
> that
> the code may be the same)
>
> The offset of a field seems to be incremented by the entry length of  
> the
> previously analyzed field.
>
> I had a look into the code of KeywordAnalyzer - and have seen it  
> don't sets
> the offsets in any case. I wrote my own Analyzer based on  
> KeywordAnalyzer
> and added the two lines
>
>            reusableToken.setStartOffset(0);
>            reusableToken.setEndOffset(upto);
>
> inside KeywordTokenizer.next(..). It seems to work now (at least the  
> one scenario
> with the KeywordAnalyzer)
>
> I created a snippet that reproduce both situations, see attachement.
>
> This snippet also demonstrates another bug I found for term offsets  
> according
> to fields with multiple values. According to the Analyzer, several  
> letters will
> recognized as delimiter for Tokenization. In the case these  
> delimiters are at
> the end of the first value inside a field, the offsets of all  
> following field
> values are decremented by the count of these delimiters.. it seems  
> the offset
> calculation forgets them.
>
> This makes highlighting of hits from values up to the second one  
> impossible.
> Currently I have a workaround where I count the Analyzer-specific  
> delimiters at
> the end of all values, and adjust the offsets given from Lucene with  
> these. It
> works, but isn't nice of course.
>
> These situations appear with the current 2.4RC2
>
>
> I hope this will help a little, greetings
>
>
> Christian Reuschling
> package org.dynaq;
>
> import org.apache.lucene.analysis.KeywordAnalyzer;
> import org.apache.lucene.analysis.PerFieldAnalyzerWrapper;
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.TermPositionVector;
> import org.apache.lucene.index.TermVectorOffsetInfo;
> import org.apache.lucene.store.FSDirectory;
>
> public class TestAnalyzers
> {
>
>    public static void main(String[] args) throws Exception
>    {
>        String strIndexPath = "/home/reuschling/test";
>        String strOurTestFieldAnalyzed = "ourTestField_analyzed";
>        String strOurTestFieldUnanalyzed = "ourTestField_unanalyzed";
>        String strOurTestField2Tokenize = "ourTestField_2tokenize";
>
>
>
>        //First we write in a field with value length 4 - twice, each  
> analyzed and unanalyzed
>
>        PerFieldAnalyzerWrapper analyzer = new  
> PerFieldAnalyzerWrapper(new KeywordAnalyzer());
>        analyzer.addAnalyzer(strOurTestField2Tokenize, new  
> WhitespaceAnalyzer());
>        IndexWriter writer = new IndexWriter(strIndexPath, analyzer,  
> true, IndexWriter.MaxFieldLength.UNLIMITED);
>
>        Document doc = new Document();
>
>        Field field2AddAnalyzed =
>                new Field(strOurTestFieldAnalyzed, "four",  
> Field.Store.YES, Field.Index.ANALYZED,  
> Field.TermVector.WITH_POSITIONS_OFFSETS);
>        doc.add(field2AddAnalyzed);
>        doc.add(field2AddAnalyzed);
>
>        Field field2AddUnanalyzed =
>                new Field(strOurTestFieldUnanalyzed, "four",  
> Field.Store.YES, Field.Index.NOT_ANALYZED,  
> Field.TermVector.WITH_POSITIONS_OFFSETS);
>        doc.add(field2AddUnanalyzed);
>        doc.add(field2AddUnanalyzed);
>
>        //note that there are trailing whitespaces
>        Field field2AddTokenized =
>                new Field(strOurTestField2Tokenize, "1 2     ",  
> Field.Store.YES, Field.Index.ANALYZED,
>                        Field.TermVector.WITH_POSITIONS_OFFSETS);
>        doc.add(field2AddTokenized);
>        doc.add(field2AddTokenized);
>
>
>
>        writer.addDocument(doc);
>
>        writer.commit();
>        writer.close();
>
>        //Now we read out the calculated term offsets
>        IndexReader reader =  
> IndexReader.open(FSDirectory.getDirectory(strIndexPath), true);
>
>        System.out.println("Analyzed. Field value(twice) \"four\".  
> Something appears, Offsets are not set inside KeywordAnalyzer.");
>
>        TermPositionVector termPositionVector = (TermPositionVector)  
> reader.getTermFreqVector(0, strOurTestFieldAnalyzed);
>
>        TermVectorOffsetInfo[] termOffsets =  
> termPositionVector.getOffsets(0);
>        int[] termPositions = termPositionVector.getTermPositions(0);
>
>
>        for (int iTermPosIndex = 0; iTermPosIndex <  
> termPositions.length; iTermPosIndex++)
>        {
>            System.out.println("TermPosition: " +  
> termPositions[iTermPosIndex]);
>            System.out.println("TermOffset: " +  
> termOffsets[iTermPosIndex].getStartOffset() + "-" +  
> termOffsets[iTermPosIndex].getEndOffset());
>        }
>
>
>        System.out.println("\nUnanalyzed. Field value(twice) \"four 
> \". It seems the first value is calculated twice for the second  
> one.");
>
>        termPositionVector = (TermPositionVector)  
> reader.getTermFreqVector(0, strOurTestFieldUnanalyzed);
>
>        termOffsets = termPositionVector.getOffsets(0);
>        termPositions = termPositionVector.getTermPositions(0);
>
>
>        for (int iTermPosIndex = 0; iTermPosIndex <  
> termPositions.length; iTermPosIndex++)
>        {
>            System.out.println("TermPosition: " +  
> termPositions[iTermPosIndex]);
>            System.out.println("TermOffset: " +  
> termOffsets[iTermPosIndex].getStartOffset() + "-" +  
> termOffsets[iTermPosIndex].getEndOffset());
>        }
>
>
>        System.out.println("\nTokenized with ending delimiter  
> letters. Field value (twice): \"1 2     \"\nThese are the offsets  
> for \"1\" (whitespaceanalyzer as example)");
>
>        termPositionVector = (TermPositionVector)  
> reader.getTermFreqVector(0, strOurTestField2Tokenize);
>
>        termOffsets = termPositionVector.getOffsets(0);
>        termPositions = termPositionVector.getTermPositions(0);
>
>
>        for (int iTermPosIndex = 0; iTermPosIndex <  
> termPositions.length; iTermPosIndex++)
>        {
>            System.out.println("TermPosition: " +  
> termPositions[iTermPosIndex]);
>            System.out.println("TermOffset: " +  
> termOffsets[iTermPosIndex].getStartOffset() + "-" +  
> termOffsets[iTermPosIndex].getEndOffset());
>        }
>
>
>        reader.close();
>
>    }
>
>
> }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 00:56:47 2008
Return-Path: <java-user-return-37112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58001 invoked from network); 12 Nov 2008 00:56:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 00:56:47 -0000
Received: (qmail 12326 invoked by uid 500); 12 Nov 2008 00:56:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12286 invoked by uid 500); 12 Nov 2008 00:56:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12275 invoked by uid 99); 12 Nov 2008 00:56:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 16:56:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dbichko@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 00:55:27 +0000
Received: by fg-out-1718.google.com with SMTP id l27so195423fgb.27
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 16:56:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=SuZI7S+LOPDScNPUR0jSmgcOErp/HTwdlFY6qLQxgCI=;
        b=OlJD6dLPvf5TfGWwR2+gfC9xkJVWx//zr+xNE43f+GOOxg4QX5js+LE+PWzUnfNNEo
         284ZIvf4s52Ud254HnhqV9WGjwIfHIaOwxl/zEA1E86yS8xaM4ToLZPhrQy0lGAi8zgq
         BVYEvYoVvD9+gR0MJS803uWRtqDxA6QymVR/k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=gTLLXarz/kZu5jayKKJOT8ZuY5kiZ29Q+NPP/1rwo9t7VZZ19UhdoTm3MVaGSDKuuQ
         qTdycyfgjNAyFt14jB6fQKSxgi3KpviIWnVEkjo0FNQGWsgh1Nb1Yne3a3NDiFnDl9XI
         ULGfJOorx/H67GHUHpKQ8B33XbCQL/oYr7mig=
Received: by 10.181.52.14 with SMTP id e14mr2677305bkk.99.1226451370100;
        Tue, 11 Nov 2008 16:56:10 -0800 (PST)
Received: by 10.181.30.6 with HTTP; Tue, 11 Nov 2008 16:56:10 -0800 (PST)
Message-ID: <74d027a50811111656i275cfe94j40e5d137eaea1fca@mail.gmail.com>
Date: Tue, 11 Nov 2008 19:56:10 -0500
From: "Dmitri Bichko" <dbichko@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
In-Reply-To: <2DA1602E-72C8-454F-948B-CBEF408BB9E8@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>
	 <2DA1602E-72C8-454F-948B-CBEF408BB9E8@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I re-ran the no-readonly ram tests:

	thread	shared
1	64043	53610
2	26999	25260
3	27173	17265
4	22205	13222
5	20795	11098
6	17593	9852
7	17163	8987
8	17275	9052
9	19392	10266
10	27809	10397
11	25987	10724
12	26550	10832

The pattern is the same, but the difference at 4 and 6 is less
pronounced - it was probably just a hiccup (I'm not using terribly
sophisticated test methodology here), it's also possible I didn't give
the JVM enough RAM (this run was with 16GB, just to be on the safe
side).

Still, looks like the extra resource management overhead for
ram-thread beats whatever lock-contention ram-shared introduces.

I'm rerunning everything with readonly set and nio, I'll post the
results once it's done.

Cheers,
Dmitri

On Tue, Nov 11, 2008 at 5:40 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> Nice results, thanks!
>
> The poor disk-based scaling may be fixed by NIOFSDirectory, if you are on
> Unix.  If you are on Windows it won't help (and will likely be worse than
> FSDirectory), because of an apparently bug in Sun's JVM on Windows whereby
> NIO positional file reads seem to share a lock under the hood.
>
> The poor ram-thread result  for 4 & 6 threads is odd.  Those numbers ought
> to be at least as good as ram-shared.  Is it possible those columns are
> swapped?  Because the ram-shared case should have been hurt by using a
> non-read-only IndexReader.
>
> Mike
>
> Dmitri Bichko wrote:
>
>> Hi,
>>
>> I'm pretty new to Lucene, so please bear with me if this has been
>> covered before.
>>
>> The wiki suggests sharing a single IndexSearcher between threads for
>> best performance
>> (http://wiki.apache.org/lucene-java/ImproveSearchingSpeed).  I've
>> tested running the same set of queries with: multiple threads sharing
>> the same searcher, with a separate searcher for each thread, both
>> shared/private with a RAMDirectory in-memory index, and (just for fun)
>> in multiple JVMs running concurrently (the results are in milliseconds
>> to complete the whole job):
>>
>> threads  multi-jvm  shared  per-thread  ram-shared  ram-thread
>>     1      72997   70883       72573       60308       60012
>>     2      33147   48762       35973       25498       25734
>>     4      16229   46828       21267       13127       27164
>>     6      13088   47240       14028        9858       29917
>>     8       9775   47020       10983        8948       10440
>>    10       8721   50132       11334        9587       11355
>>    12       7290   49002       11798        9832
>>    16       9365   47099       12338       11296
>>
>> The shared searcher indeed behaves better with a ram-based index, but
>> what's going on with the disk-based one?  It's basically not scaling
>> beyond two threads. Am I just doing something completely wrong here?
>>
>> The test consists of about 1,500 Boolean OR queries with 1-10
>> PhraseQueries each, with 1-20 Terms per PhraseQuery.  I'm using a
>> HitCollector to count the hits, so I'm not retrieving any results.
>> The index is about 5GB and 20 million documents.
>>
>> This is running on a 8 x quad-core Opteron machine with plenty of RAM to
>> spare.
>>
>> Any idea why I would see this behaviour?
>>
>> Thanks,
>> Dmitri
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 02:14:17 2008
Return-Path: <java-user-return-37113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3630 invoked from network); 12 Nov 2008 02:14:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 02:14:17 -0000
Received: (qmail 87055 invoked by uid 500); 12 Nov 2008 02:14:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87015 invoked by uid 500); 12 Nov 2008 02:14:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87003 invoked by uid 99); 12 Nov 2008 02:14:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 18:14:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dbichko@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 02:12:57 +0000
Received: by fk-out-0910.google.com with SMTP id 18so184212fkq.5
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 18:13:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=3BQYH+ZRWXp9RTwnSw/mkVKvGtaERVEeegSVIvSVdxk=;
        b=Ezw2W2jH0YQcNyU1GfZtrpEEKbXud7JLOPOhTodGaWTJh25CcmEIujc9z/Qos2s49e
         baDBBwTuqBOft006jAKT34gpqFsPYKaNkEJ87AzgcjAnETCl5DfZc63/Vts2pmhctzRo
         hdsTMYJafHGyOY4c+OPbtxnU1vEWW5g3OYCoU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=ipA+7hsVpZJWVIwX0n8WMFUknnze+jyvAd7VFkFDp35TjZNumZot9l0itLBf95hs2A
         L6Vjlmu/iubFu8ullOUjD+EstmvuQ+lzmDIQ/6QxvcgNSGxGwOd3ih4iDwBz4LecIHib
         NZHhKWyH91vof7SST1mhAbfsPYKxEsw9I/FUw=
Received: by 10.180.222.1 with SMTP id u1mr2692850bkg.62.1226456009588;
        Tue, 11 Nov 2008 18:13:29 -0800 (PST)
Received: by 10.181.30.6 with HTTP; Tue, 11 Nov 2008 18:13:29 -0800 (PST)
Message-ID: <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com>
Date: Tue, 11 Nov 2008 21:13:29 -0500
From: "Dmitri Bichko" <dbichko@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
In-Reply-To: <491A02A4.5020108@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>
	 <491A02A4.5020108@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

32 cores, actually :)

I reran the test with readonly turned on (I changed how the time is
measured a little, it should be more consistent):

	fs-thread	ram-thread	fs-shared	ram-shared
1	71877	54739	73986	61595
2	34949	26735	43719	28935
3	25581	26885	38412	19624
4	20511	31742	38712	15059
5	19235	24345	39685	12509
6	16775	26896	39592	10841
7	17147	18296	46678	10183
8	18327	19043	39886	10048
9	16885	18721	40342	9483
10	17832	30757	44706	10975
11	17251	21199	39947	9704
12	17267	36284	40208	10996

I can't seem to get NIOFSDirectory working, though.  Calling
NIOFSDirectory.getDirectory("foo") just returns an FSDirectory.

Any ideas?

Cheers,
Dmitri

On Tue, Nov 11, 2008 at 5:09 PM, Mark Miller <markrmiller@gmail.com> wrote:
> Nice! An 8 core machine with a test ready to go!
>
> How about trying the read only mode that was added to 2.4 on your
> IndexReader?
>
> And if you you are on unix and could try trunk and use the new
> NIOFSDirectory implementation...that would be awesome.
>
> Those two additions are our current hope for what your seeing...would be
> nice to know if we need to try for more (or if we need to petition the smart
> people that work on that stuff to try for more ;) ).
>
> - Mark
>
> Dmitri Bichko wrote:
>>
>> Hi,
>>
>> I'm pretty new to Lucene, so please bear with me if this has been
>> covered before.
>>
>> The wiki suggests sharing a single IndexSearcher between threads for
>> best performance
>> (http://wiki.apache.org/lucene-java/ImproveSearchingSpeed).  I've
>> tested running the same set of queries with: multiple threads sharing
>> the same searcher, with a separate searcher for each thread, both
>> shared/private with a RAMDirectory in-memory index, and (just for fun)
>> in multiple JVMs running concurrently (the results are in milliseconds
>> to complete the whole job):
>>
>> threads  multi-jvm  shared  per-thread  ram-shared  ram-thread
>>      1      72997   70883       72573       60308       60012
>>      2      33147   48762       35973       25498       25734
>>      4      16229   46828       21267       13127       27164
>>      6      13088   47240       14028        9858       29917
>>      8       9775   47020       10983        8948       10440
>>     10       8721   50132       11334        9587       11355
>>     12       7290   49002       11798        9832
>>     16       9365   47099       12338       11296
>>
>> The shared searcher indeed behaves better with a ram-based index, but
>> what's going on with the disk-based one?  It's basically not scaling
>> beyond two threads. Am I just doing something completely wrong here?
>>
>> The test consists of about 1,500 Boolean OR queries with 1-10
>> PhraseQueries each, with 1-20 Terms per PhraseQuery.  I'm using a
>> HitCollector to count the hits, so I'm not retrieving any results.
>> The index is about 5GB and 20 million documents.
>>
>> This is running on a 8 x quad-core Opteron machine with plenty of RAM to
>> spare.
>>
>> Any idea why I would see this behaviour?
>>
>> Thanks,
>> Dmitri
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 02:36:24 2008
Return-Path: <java-user-return-37114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19834 invoked from network); 12 Nov 2008 02:36:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 02:36:23 -0000
Received: (qmail 636 invoked by uid 500); 12 Nov 2008 02:36:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 589 invoked by uid 500); 12 Nov 2008 02:36:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 573 invoked by uid 99); 12 Nov 2008 02:36:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 18:36:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.170.188 as permitted sender)
Received: from [64.233.170.188] (HELO rn-out-0910.google.com) (64.233.170.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 02:35:04 +0000
Received: by rn-out-0910.google.com with SMTP id j71so194887rne.4
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 18:35:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=WAWSTiACmFRV+2mqPXbHv3uPhMWZvp55pCM0WikBHNc=;
        b=JI/rJ6C5mItpcD6aAWW51mQb8ueRM7Ss8WjQ4qQrgperUcc7U0BBL0ABwssdBZjYSC
         OAaoS6U9X2CAWIFet4MdfPozSmeaeY2LjA2Mg0PmUfJnsnRC8B8pIsx84ZF6ENlC062a
         d2RA0nctmBWHH4dKKwfMccYN1rvrJwZcJPP/M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=v08U4nFYFAZsNq520sSMOKwmOPnf3/R/drv8MRjtkxChSgKJhAhUe4KkvuJGClkLwG
         pQcIoVnjY2zMQAU+A58gI4vg8/CMGhVl2sQV+MdtrTgGx+gYTFCTRuTZDCZxVhEZ+4RT
         hAwVNVliLiT4DBU2SPpQHnJYloUES1/8aVku8=
Received: by 10.90.67.10 with SMTP id p10mr1851290aga.71.1226457336514;
        Tue, 11 Nov 2008 18:35:36 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 20sm11048371agd.35.2008.11.11.18.35.35
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 11 Nov 2008 18:35:36 -0800 (PST)
Message-ID: <491A40FB.8050501@gmail.com>
Date: Tue, 11 Nov 2008 21:35:39 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>	 <491A02A4.5020108@gmail.com> <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com>
In-Reply-To: <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dmitri Bichko wrote:
> 32 cores, actually :)
>   
Glossed over that - even better! Killer machine to be able to test this on.
> I reran the test with readonly turned on (I changed how the time is
> measured a little, it should be more consistent):
>
> 	fs-thread	ram-thread	fs-shared	ram-shared
> 1	71877	54739	73986	61595
> 2	34949	26735	43719	28935
> 3	25581	26885	38412	19624
> 4	20511	31742	38712	15059
> 5	19235	24345	39685	12509
> 6	16775	26896	39592	10841
> 7	17147	18296	46678	10183
> 8	18327	19043	39886	10048
> 9	16885	18721	40342	9483
> 10	17832	30757	44706	10975
> 11	17251	21199	39947	9704
> 12	17267	36284	40208	10996
>
> I can't seem to get NIOFSDirectory working, though.  Calling
> NIOFSDirectory.getDirectory("foo") just returns an FSDirectory.
>   
Thats a good point, and points out a bug in solr trunk for me. Frankly I 
don't see how its done. There is no code I can see/find to use it rather 
than FSDirectory. Still assuming there must be a way, but I don't see it...

- Mark
> Any ideas?
>
> Cheers,
> Dmitri
>
> On Tue, Nov 11, 2008 at 5:09 PM, Mark Miller <markrmiller@gmail.com> wrote:
>   
>> Nice! An 8 core machine with a test ready to go!
>>
>> How about trying the read only mode that was added to 2.4 on your
>> IndexReader?
>>
>> And if you you are on unix and could try trunk and use the new
>> NIOFSDirectory implementation...that would be awesome.
>>
>> Those two additions are our current hope for what your seeing...would be
>> nice to know if we need to try for more (or if we need to petition the smart
>> people that work on that stuff to try for more ;) ).
>>
>> - Mark
>>
>> Dmitri Bichko wrote:
>>     
>>> Hi,
>>>
>>> I'm pretty new to Lucene, so please bear with me if this has been
>>> covered before.
>>>
>>> The wiki suggests sharing a single IndexSearcher between threads for
>>> best performance
>>> (http://wiki.apache.org/lucene-java/ImproveSearchingSpeed).  I've
>>> tested running the same set of queries with: multiple threads sharing
>>> the same searcher, with a separate searcher for each thread, both
>>> shared/private with a RAMDirectory in-memory index, and (just for fun)
>>> in multiple JVMs running concurrently (the results are in milliseconds
>>> to complete the whole job):
>>>
>>> threads  multi-jvm  shared  per-thread  ram-shared  ram-thread
>>>      1      72997   70883       72573       60308       60012
>>>      2      33147   48762       35973       25498       25734
>>>      4      16229   46828       21267       13127       27164
>>>      6      13088   47240       14028        9858       29917
>>>      8       9775   47020       10983        8948       10440
>>>     10       8721   50132       11334        9587       11355
>>>     12       7290   49002       11798        9832
>>>     16       9365   47099       12338       11296
>>>
>>> The shared searcher indeed behaves better with a ram-based index, but
>>> what's going on with the disk-based one?  It's basically not scaling
>>> beyond two threads. Am I just doing something completely wrong here?
>>>
>>> The test consists of about 1,500 Boolean OR queries with 1-10
>>> PhraseQueries each, with 1-20 Terms per PhraseQuery.  I'm using a
>>> HitCollector to count the hits, so I'm not retrieving any results.
>>> The index is about 5GB and 20 million documents.
>>>
>>> This is running on a 8 x quad-core Opteron machine with plenty of RAM to
>>> spare.
>>>
>>> Any idea why I would see this behaviour?
>>>
>>> Thanks,
>>> Dmitri
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 02:44:29 2008
Return-Path: <java-user-return-37115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26302 invoked from network); 12 Nov 2008 02:44:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 02:44:28 -0000
Received: (qmail 9374 invoked by uid 500); 12 Nov 2008 02:44:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9337 invoked by uid 500); 12 Nov 2008 02:44:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9325 invoked by uid 99); 12 Nov 2008 02:44:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 18:44:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 02:43:10 +0000
Received: by yx-out-2324.google.com with SMTP id 3so97889yxj.5
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 18:43:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=IvnTk4Pumlyld/JNLb14Jql9t6t54bF8eztWNXEpcfQ=;
        b=FPcelrduSLk5Od/Y0K45u2W85XZE/ihx38OHH2jr5XhoDxrn2eRNuDApMmfiscyDoY
         zjVoOeQuPeW5qeG2aILQ/Az8HrmDRNgRukqeWIIeE7gc/w7ukKmraW7Q9eAkqUrAbz9/
         lcHvroXZxeVJ0zqfJUvOdnN0LeHtGqgWaMCUQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=NGjwQmtfi18E7GL37IGvQWFkx9AVVGxONWFWuXU8qFGwZ8SMgHundQk8uWF9Pub9EY
         xRzs62WxH55X7X/ZNZn2ycGjf9U/aXTqcm4HmLsU7ZsoRsuHhahmSwJ8Qfg/qA4PDtuA
         PAki/4mh1eaNlzH1+qMI2jUs25pGFWuopamT8=
Received: by 10.90.99.6 with SMTP id w6mr7856810agb.81.1226457822938;
        Tue, 11 Nov 2008 18:43:42 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 20sm11039044agb.38.2008.11.11.18.43.42
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 11 Nov 2008 18:43:42 -0800 (PST)
Message-ID: <491A42E1.2030208@gmail.com>
Date: Tue, 11 Nov 2008 21:43:45 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>	 <491A02A4.5020108@gmail.com> <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com> <491A40FB.8050501@gmail.com>
In-Reply-To: <491A40FB.8050501@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Mark Miller wrote:
> Thats a good point, and points out a bug in solr trunk for me. Frankly 
> I don't see how its done. There is no code I can see/find to use it 
> rather than FSDirectory. Still assuming there must be a way, but I 
> don't see it...
>
Ah - brain freeze. What else is new :) You have to set the system 
property to change implementations: org.apache.lucene.FSDirectory.class 
is the property, set it to the class. Been a long time...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 03:18:42 2008
Return-Path: <java-user-return-37116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41239 invoked from network); 12 Nov 2008 03:18:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 03:18:41 -0000
Received: (qmail 33787 invoked by uid 500); 12 Nov 2008 03:18:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33746 invoked by uid 500); 12 Nov 2008 03:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33730 invoked by uid 99); 12 Nov 2008 03:18:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 19:18:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zzzhc.starfire@gmail.com designates 209.85.142.185 as permitted sender)
Received: from [209.85.142.185] (HELO ti-out-0910.google.com) (209.85.142.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 03:17:23 +0000
Received: by ti-out-0910.google.com with SMTP id b8so96034tic.11
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 19:17:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=dD4AwX+7gLUjUGWvpU1nyIqiJYWLHzzuSqXIK8/hPro=;
        b=J3O+Of3mnLZlMyRZdfYleMb5QmO1GXsIz2/zl2EADLEKXD8pKNrmkb+X9hNUTD/Gz3
         dp4fanYv5vA5cCUlROlmSC9jByhrZJq8+RnVQcuY6b5AAJYTQ+4xNrYhzjTIqTP/IlM2
         Rf0oGpCe6vlsiMjmkT+U5GQEIhobIs25vRyBk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vT5Xt2IVn3vADzpHA5aiH8HahlD/qSy4Ccl9av7+RvPi4fIPODsIEGWO+GKK7mY/Nl
         FkNJuSbi+vtRilyDGg1AGi4OrkIJLqHrGWTLOztNZcIIDamHsBIsghWlsmgorjb5xCKu
         G0fWNaAvc7CIsKGtv71SLu+RzW8TXrAXzb1zI=
Received: by 10.110.49.6 with SMTP id w6mr10321413tiw.9.1226459875542;
        Tue, 11 Nov 2008 19:17:55 -0800 (PST)
Received: by 10.110.47.20 with HTTP; Tue, 11 Nov 2008 19:17:55 -0800 (PST)
Message-ID: <4397aa520811111917n62782964x1601e01a7e4e67b2@mail.gmail.com>
Date: Wed, 12 Nov 2008 11:17:55 +0800
From: "=?GB2312?B?u8azyQ==?=" <zzzhc.starfire@gmail.com>
To: java-user@lucene.apache.org, techcool.kumar@yahoo.com
Subject: Re: Order the index by timestamp field and Get n documents
In-Reply-To: <807889.52342.qm@web110303.mail.gq1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_92861_11389549.1226459875523"
References: <962306.88258.qm@web110313.mail.gq1.yahoo.com>
	 <807889.52342.qm@web110303.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_92861_11389549.1226459875523
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you should use NumberTools to format timestamp first, otherwise sort
will not work correctly

On Mon, Nov 10, 2008 at 8:00 PM, Cool The Breezer
<techcool.kumar@yahoo.com>wrote:

> Could able to do that using range query
>
> String end = "253373251260000";//i.e. 11/30/9999, assume that this is max
> end date
>
> Term endTerm = new Term("timestamp",end);
> RangeQuery rangeQuery = new RangeQuery(null,endTerm,true);
>
> Sort sort = new Sort("timestamp",true);
> Filter dupFilter = new DuplicateFilter("id");
> Hits hits = searcher.search(rangeQuery,dupFilter,sort);
>
>
>
>
> --- On Mon, 11/10/08, Cool The Breezer <techcool.kumar@yahoo.com> wrote:
>
> > From: Cool The Breezer <techcool.kumar@yahoo.com>
> > Subject: Order the index by timestamp field and Get n documents
> > To: java-user@lucene.apache.org
> > Date: Monday, November 10, 2008, 1:21 AM
> > Hi,
> >    In my index, there is a field called timestamp which is
> > long value of date. I am  trying to get sort all documents
> > by timestamp and get N documents.
> > I am trying to find a way to create a query like
> > "timestamp > 0" and then order the result by
> > timestamp and get N fields. However I am not able to do
> > that. Suggest me the best way. Or there are any lowlevel
> > method available for the same.
> >
> > I am using Lucene 2.3.1 and looking into method
> > search(Weight weight, Filter filter, int nDocs, Sort sort)
> > in IndexSearcher. Trying to know how to create a Weight
> > object.
> >
> > Anyway, I would really appreciate your suggestion....
> >
> > -RB
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_92861_11389549.1226459875523--

From java-user-return-37117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 03:26:51 2008
Return-Path: <java-user-return-37117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44067 invoked from network); 12 Nov 2008 03:26:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 03:26:51 -0000
Received: (qmail 43205 invoked by uid 500); 12 Nov 2008 03:26:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42511 invoked by uid 500); 12 Nov 2008 03:26:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42497 invoked by uid 99); 12 Nov 2008 03:26:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 19:26:52 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 03:25:30 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L06Mu-0007tp-NN
	for java-user@lucene.apache.org; Tue, 11 Nov 2008 19:26:12 -0800
Message-ID: <20453434.post@talk.nabble.com>
Date: Tue, 11 Nov 2008 19:26:12 -0800 (PST)
From: Santosh Urs <santoshurs@gmail.com>
To: java-user@lucene.apache.org
Subject: Grouping of Boolean opeartors in Lucene..?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: santoshurs@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


How can i use multiple Boolean operators in a search query.?

For example , from the search text field , i usually get the queries which
looks like

Any (word or phrase) and ( a list of URI's)
example::   rice land  http\://www.wtr.org/wordlist#c_2379
http\://www.wtr.org/wordlist#c_65748 http\://www.wtr.org/wordlist#c_7612
here the search term or phrase is = rice land
URIs are= http\://www.wtr.org/wordlist#c_2379
http\://www.wtr.org/wordlist#c_65748 http\://www.wtr.org/wordlist#c_7612

Now the way i want to build the Query is::

rice land AND ( http\://www.wtr.org/wordlist#c_2379 OR
http\://www.wtr.org/wordlist#c_65748 OR http\://www.wtr.org/wordlist#c_7612
)

i tried this-

try {
	if (queryString != null && fields != null) {
                  PerFieldAnalyzerWrapper perFieldAnalyzer =
					new PerFieldAnalyzerWrapper(analyzer);
                perFieldAnalyzer.addAnalyzer("conceptURI", new
KeywordAnalyzer());

MultiFieldQueryParser mfqp = new MultiFieldQueryParser(
						fields, perFieldAnalyzer);
if (queryString.contains("http") && !queryString.startsWith("http")) {

String orgQuery =queryString.substring(0, queryString.indexOf("http"));
					String uri=queryString.substring(queryString.indexOf("http"),
queryString.length());

uri = uri.trim();
					String[] uris = uri.split(" ");
					String tempUri="";
					for (int i = 0; i < uris.length; i++) {
						if(i== uris.length-1){
							tempUri =  tempUri + uris[i];
						}else {
							tempUri =  tempUri + uris[i]+QueryParser.OR_OPERATOR;
						}
					}

query = mfqp.parse(orgQuery+ QueryParser.AND_OPERATOR+ tempUri );



 is this is the correct way to  form a Query..?? Are there any other
methods?

-- 
View this message in context: http://www.nabble.com/Grouping-of-Boolean-opeartors-in-Lucene..--tp20453434p20453434.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 03:38:20 2008
Return-Path: <java-user-return-37118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49654 invoked from network); 12 Nov 2008 03:38:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 03:38:19 -0000
Received: (qmail 57029 invoked by uid 500); 12 Nov 2008 03:38:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56989 invoked by uid 500); 12 Nov 2008 03:38:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56978 invoked by uid 99); 12 Nov 2008 03:38:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 19:38:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dipshrestha@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 03:37:02 +0000
Received: by rv-out-0506.google.com with SMTP id f6so213342rvb.5
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 19:37:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=VvzFEOWZjR3icOZ1r86p4V2My+NOgBGJ1XchIcXwR1c=;
        b=nRYOOjK3SMosIeIgxD3yxzLMZ1RkWW8nTwqnCbVP4zPBPyEwwF1PS+3yh4RyDDTijE
         8ZGsseCDkYZFkGrMsm13+r4fjgRd0Hp0lBTDGMnr4gTQ9aN7sEUD6b72H/0CKdCSc1Ht
         NU8O42umU/3GrVgmdW2la2c67kFv7vSAf+ehs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=OLlbiufcygv7tBf9Pbkh7MuWqUndMe3MIVAAzdxL8xW6kOgvXS7o20mJKa9uMk0nyC
         DqgFCroYbKD7b1tfA+2PDPd8qTsm9V8z5RIQc5D2+ywTHUX1MPY1zpu6lsUN1FzaVUHi
         QedPsAAU7OWV7xkMyI7S3w5CM1cxXekftvp/k=
Received: by 10.142.50.15 with SMTP id x15mr3315564wfx.80.1226461065689;
        Tue, 11 Nov 2008 19:37:45 -0800 (PST)
Received: by 10.143.156.15 with HTTP; Tue, 11 Nov 2008 19:37:45 -0800 (PST)
Message-ID: <aec6319e0811111937h7661b850p28e9407c8216b765@mail.gmail.com>
Date: Wed, 12 Nov 2008 12:37:45 +0900
From: dipesh <dipshrestha@gmail.com>
To: java-user@lucene.apache.org
Subject: Parsing MSWord
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_609_1808174.1226461065669"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_609_1808174.1226461065669
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,
I wanted to know if there are classes in Lucene that support parsing MSWord
documents.
Many thanks,
Dipesh

----------------------------------------
"Help Ever Hurt Never"- Baba

------=_Part_609_1808174.1226461065669--

From java-user-return-37119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 03:53:44 2008
Return-Path: <java-user-return-37119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59266 invoked from network); 12 Nov 2008 03:53:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 03:53:44 -0000
Received: (qmail 74842 invoked by uid 500); 12 Nov 2008 03:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73793 invoked by uid 500); 12 Nov 2008 03:53:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73781 invoked by uid 99); 12 Nov 2008 03:53:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 19:53:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.196.97.66] (HELO web56707.mail.re3.yahoo.com) (66.196.97.66)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Nov 2008 03:52:25 +0000
Received: (qmail 83966 invoked by uid 60001); 12 Nov 2008 03:52:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=NP5RnBty06W1mbuGhjOQ2OJyDgGDVRlpj+sJeBiNHAaAz3UcsV9uPmdbAp4oRt+X0vGe0G+FxmzARW6xYdK58A3jxndRjY45oHTNLiGlFOoax1yjt7NclRS+JLuDUltATkfiFaKjINOHoewPD0PgPLsM+YsfLf4tfq6LFNE8uPM=;
X-YMail-OSG: jktO7dgVM1nrWYQ19w7AfwzmRzTKT8KPSgdlGVpR.SHKUmenAGB12KXQifejSGaLdL_24ZYtEpXHSjpJpl34ZGf5LPqhVgZDp2k8RITAxLdMt9KBI.hARWsVk9aM5globnuvnFCahlxITMmiWEKd9MXZY3RLk42OkgW28ececf3fPnBrxZTikYzC_ME9
Received: from [68.39.7.164] by web56707.mail.re3.yahoo.com via HTTP; Tue, 11 Nov 2008 19:52:07 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Tue, 11 Nov 2008 19:52:07 -0800 (PST)
From: Dave Newton <newton.dave@yahoo.com>
Reply-To: newton.dave@yahoo.com
Subject: Re: Parsing MSWord
To: java-user@lucene.apache.org
In-Reply-To: <aec6319e0811111937h7661b850p28e9407c8216b765@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <696343.83630.qm@web56707.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--- On Tue, 11/11/08, dipesh wrote:
> I wanted to know if there are classes in Lucene that support 
> parsing MSWord documents.

Searching the web might help:

http://www.google.com/search?q=lucene+%2Bword

The Apache Tika project (http://incubator.apache.org/tika/) might also be of interest.

Dave


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 04:13:28 2008
Return-Path: <java-user-return-37120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69196 invoked from network); 12 Nov 2008 04:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 04:13:27 -0000
Received: (qmail 87891 invoked by uid 500); 12 Nov 2008 04:13:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87864 invoked by uid 500); 12 Nov 2008 04:13:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87853 invoked by uid 99); 12 Nov 2008 04:13:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 20:13:26 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 04:12:04 +0000
Received: by ey-out-2122.google.com with SMTP id 6so94396eyi.53
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 20:12:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KL1OaOrmBIyeMfc6A36pwepBvOFBz0Kf7RGmVRSge9U=;
        b=ZU8ELfQBAZGDzi+r1JbJUZdpkpvQQpZrWUMa/mnmJsMSIVOTEcefKhJYVqzIArBE6F
         W6506cU3UdxFTb9oG8dZ9y34rlvgjS+C6DnlKOzCXYMK5p+opBY1ZOcHj2WDcwF0uQFC
         C04jmzvinopdSvjszWf7R/vg/BgL1/HFreDBo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=YWWGu02q5KP0C5zpv26NM6bJYaIHg1lQjQeFlpERQ7G5FMktURpXbojkAKLTD3ufln
         Tiam/p5DeALKt5UFkJmE3b2ieAUyOJa/TaYYgW5LgqjXgUVztSaZ6cqC0C3yyljKy4DJ
         LmcP8QyT+7C21513iJhezT4nCorw03DI6sB/0=
Received: by 10.103.245.18 with SMTP id x18mr5012508mur.62.1226463165337;
        Tue, 11 Nov 2008 20:12:45 -0800 (PST)
Received: by 10.103.225.1 with HTTP; Tue, 11 Nov 2008 20:12:45 -0800 (PST)
Message-ID: <295da8fe0811112012t3f9aaa1ft649995c7ec5750d2@mail.gmail.com>
Date: Wed, 12 Nov 2008 09:42:45 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Grouping of Boolean opeartors in Lucene..?
In-Reply-To: <20453434.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_228_1225329.1226463165318"
References: <20453434.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_228_1225329.1226463165318
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
   You can use Boolean query for the same.
Boolean query is meant for having a series of queries with boolean operators
defined.
For eg.
  lets say you have 3 diff queries A, B, C and you want a final query which
behaves as  A && (B || C)
BooleanQuery query = new BooleanQuery();
BooleanQuery temp = new BooleanQuery();
temp.add(B, Occur.SHOULD); //Occur.SHOULD is equvalent to OR operator
temp.add(C, Occur.SHOULD);
query.add(A, Occur.MUST); //Occur.MUST is equivalent to an AND operator
query.add(temp, Occur.Must);

Now "query" = A && (B || C)

Go through lucene documentation about Boolean query

Hope it helps.

Prabin


On Wed, Nov 12, 2008 at 8:56 AM, Santosh Urs <santoshurs@gmail.com> wrote:

>
> How can i use multiple Boolean operators in a search query.?
>
> For example , from the search text field , i usually get the queries which
> looks like
>
> Any (word or phrase) and ( a list of URI's)
> example::   rice land  http\://www.wtr.org/wordlist#c_2379
> http\://www.wtr.org/wordlist#c_65748 http\://www.wtr.org/wordlist#c_7612
> here the search term or phrase is = rice land
> URIs are= http\://www.wtr.org/wordlist#c_2379
> http\://www.wtr.org/wordlist#c_65748 http\://www.wtr.org/wordlist#c_7612
>
> Now the way i want to build the Query is::
>
> rice land AND ( http\://www.wtr.org/wordlist#c_2379 OR
> http\://www.wtr.org/wordlist#c_65748 OR http\://
> www.wtr.org/wordlist#c_7612
> )
>
> i tried this-
>
> try {
>        if (queryString != null && fields != null) {
>                  PerFieldAnalyzerWrapper perFieldAnalyzer =
>                                        new
> PerFieldAnalyzerWrapper(analyzer);
>                perFieldAnalyzer.addAnalyzer("conceptURI", new
> KeywordAnalyzer());
>
> MultiFieldQueryParser mfqp = new MultiFieldQueryParser(
>                                                fields, perFieldAnalyzer);
> if (queryString.contains("http") && !queryString.startsWith("http")) {
>
> String orgQuery =queryString.substring(0, queryString.indexOf("http"));
>                                        String
> uri=queryString.substring(queryString.indexOf("http"),
> queryString.length());
>
> uri = uri.trim();
>                                        String[] uris = uri.split(" ");
>                                        String tempUri="";
>                                        for (int i = 0; i < uris.length;
> i++) {
>                                                if(i== uris.length-1){
>                                                        tempUri =  tempUri +
> uris[i];
>                                                }else {
>                                                        tempUri =  tempUri +
> uris[i]+QueryParser.OR_OPERATOR;
>                                                }
>                                        }
>
> query = mfqp.parse(orgQuery+ QueryParser.AND_OPERATOR+ tempUri );
>
>
>
>  is this is the correct way to  form a Query..?? Are there any other
> methods?
>
> --
> View this message in context:
> http://www.nabble.com/Grouping-of-Boolean-opeartors-in-Lucene..--tp20453434p20453434.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_228_1225329.1226463165318--

From java-user-return-37121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 04:22:33 2008
Return-Path: <java-user-return-37121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73113 invoked from network); 12 Nov 2008 04:22:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 04:22:32 -0000
Received: (qmail 91850 invoked by uid 500); 12 Nov 2008 04:22:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91818 invoked by uid 500); 12 Nov 2008 04:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91807 invoked by uid 99); 12 Nov 2008 04:22:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 20:22:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [65.89.232.7] (HELO thebluezone.net) (65.89.232.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 04:21:14 +0000
Received: from localhost (localhost [127.0.0.1])
	by thebluezone.net (Postfix) with ESMTP id E69A5286BD8
	for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 21:21:55 -0700 (MST)
Received: from thebluezone.net ([127.0.0.1])
	by localhost (mail1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 32169-01 for <java-user@lucene.apache.org>;
	Tue, 11 Nov 2008 21:21:54 -0700 (MST)
Received: from desktop (unknown [65.89.233.61])
	by thebluezone.net (Postfix) with ESMTP id 16E94286C00
	for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 21:21:54 -0700 (MST)
From: "John Griffin" <jgriffin@thebluezone.net>
To: <java-user@lucene.apache.org>
References: <aec6319e0811111937h7661b850p28e9407c8216b765@mail.gmail.com>
Subject: RE: Parsing MSWord
Date: Tue, 11 Nov 2008 21:21:24 -0700
Message-ID: <56EC3695AEFA415688820DA91DA21A49@desktop>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
In-Reply-To: <aec6319e0811111937h7661b850p28e9407c8216b765@mail.gmail.com>
Thread-Index: AclEeCaIWGye1alYSkyzhbmxZ1kqkAABeepQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5579
X-Virus-Scanned: by thebluezone.net
X-Virus-Checked: Checked by ClamAV on apache.org

Dipesh,

Start here.

http://poi.apache.org/

John G.

-----Original Message-----
From: dipesh [mailto:dipshrestha@gmail.com] 
Sent: Tuesday, November 11, 2008 8:38 PM
To: java-user@lucene.apache.org
Subject: Parsing MSWord

Hello,
I wanted to know if there are classes in Lucene that support parsing MSWord
documents.
Many thanks,
Dipesh

----------------------------------------
"Help Ever Hurt Never"- Baba


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 04:36:55 2008
Return-Path: <java-user-return-37122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77349 invoked from network); 12 Nov 2008 04:36:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 04:36:54 -0000
Received: (qmail 544 invoked by uid 500); 12 Nov 2008 04:36:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 507 invoked by uid 500); 12 Nov 2008 04:36:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 494 invoked by uid 99); 12 Nov 2008 04:36:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 20:36:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dipshrestha@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 04:35:37 +0000
Received: by rv-out-0506.google.com with SMTP id f6so232432rvb.5
        for <java-user@lucene.apache.org>; Tue, 11 Nov 2008 20:36:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=gc1nSCrgswgScOoFK2iXp819FzktO7+Oarm3uZXBvwQ=;
        b=WJVEO3MPdY3MqHmHWys87C007QkTpB9oPywYAHD+6kayQOeCFubQshdNpzim2V2ugO
         70UgCw5t+0e05e1IvuRuVv8YFs6bElwaJYcBQde0677pCxwBBtF9WSi5oVo8VSEdzCE7
         iJzc2Svi1ieN+7KrOtTwdR71MfOb9S/SyzHF8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OycMy1iDFjV5zb20Gphg5MUz6hBPURh/tZS8ONxJeNDszZ967hVFRh6IXYBmI5hGSH
         8063BNm+ckJch/HuLFb2RoyFWkMzCkfn4wTOttv8Ixhbd5AB91YsWZF4IF/xFWa1BUHc
         vDn8r3ddAdWwNr5rPs/jBCzDll7ljGkrNSRB4=
Received: by 10.142.140.14 with SMTP id n14mr3343489wfd.292.1226464570911;
        Tue, 11 Nov 2008 20:36:10 -0800 (PST)
Received: by 10.143.156.15 with HTTP; Tue, 11 Nov 2008 20:36:10 -0800 (PST)
Message-ID: <aec6319e0811112036s26f054aau392329468973a043@mail.gmail.com>
Date: Wed, 12 Nov 2008 13:36:10 +0900
From: dipesh <dipshrestha@gmail.com>
To: java-user@lucene.apache.org, newton.dave@yahoo.com
Subject: Re: Parsing MSWord
In-Reply-To: <696343.83630.qm@web56707.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1190_30115359.1226464570899"
References: <aec6319e0811111937h7661b850p28e9407c8216b765@mail.gmail.com>
	 <696343.83630.qm@web56707.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1190_30115359.1226464570899
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you,
It was really helpful. I also found some similar work being done in the
Nutch project.
Regards,
Dipesh


On Wed, Nov 12, 2008 at 12:52 PM, Dave Newton <newton.dave@yahoo.com> wrote:

> --- On Tue, 11/11/08, dipesh wrote:
> > I wanted to know if there are classes in Lucene that support
> > parsing MSWord documents.
>
> Searching the web might help:
>
> http://www.google.com/search?q=lucene+%2Bword
>
> The Apache Tika project (http://incubator.apache.org/tika/) might also be
> of interest.
>
> Dave
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
----------------------------------------
"Help Ever Hurt Never"- Baba

------=_Part_1190_30115359.1226464570899--

From java-user-return-37123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 04:47:46 2008
Return-Path: <java-user-return-37123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80805 invoked from network); 12 Nov 2008 04:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 04:47:46 -0000
Received: (qmail 7826 invoked by uid 500); 12 Nov 2008 04:47:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7788 invoked by uid 500); 12 Nov 2008 04:47:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7777 invoked by uid 99); 12 Nov 2008 04:47:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 20:47:46 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 04:46:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L07dC-0002ER-OG
	for java-user@lucene.apache.org; Tue, 11 Nov 2008 20:47:06 -0800
Message-ID: <20454155.post@talk.nabble.com>
Date: Tue, 11 Nov 2008 20:47:06 -0800 (PST)
From: Santosh Urs <santoshurs@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Grouping of Boolean opeartors in Lucene..?
In-Reply-To: <295da8fe0811112012t3f9aaa1ft649995c7ec5750d2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: santoshurs@gmail.com
References: <20453434.post@talk.nabble.com> <295da8fe0811112012t3f9aaa1ft649995c7ec5750d2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Prabin,

Thanks for suggestion . it worked for me.. Thanks

I'm not aware of Boolean Query , since I'm new to lucene technology 
i modified the code like this..

BooleanQuery textQuery = new BooleanQuery();
					BooleanQuery uriQuery = new BooleanQuery();
					
					query2 = mfqp2.parse(orgQuery);
					textQuery.add(query2, Occur.MUST);
					
					for (int i = 0; i < uris.length; i++) {
						query1 = mfqp2.parse(uris[i]);
						uriQuery.add(query1, Occur.SHOULD);
					}
					
					System.out.println("uriQuery====:"+ uriQuery);
					
					textQuery.add(uriQuery, Occur.MUST);

Now its working fine... Thanks....

prabin meitei wrote:
> 
> Hi,
>    You can use Boolean query for the same.
> Boolean query is meant for having a series of queries with boolean
> operators
> defined.
> For eg.
>   lets say you have 3 diff queries A, B, C and you want a final query
> which
> behaves as  A && (B || C)
> BooleanQuery query = new BooleanQuery();
> BooleanQuery temp = new BooleanQuery();
> temp.add(B, Occur.SHOULD); //Occur.SHOULD is equvalent to OR operator
> temp.add(C, Occur.SHOULD);
> query.add(A, Occur.MUST); //Occur.MUST is equivalent to an AND operator
> query.add(temp, Occur.Must);
> 
> Now "query" = A && (B || C)
> 
> Go through lucene documentation about Boolean query
> 
> Hope it helps.
> 
> Prabin
> 
> 
> On Wed, Nov 12, 2008 at 8:56 AM, Santosh Urs <santoshurs@gmail.com> wrote:
> 
>>
>> How can i use multiple Boolean operators in a search query.?
>>
>> For example , from the search text field , i usually get the queries
>> which
>> looks like
>>
>> Any (word or phrase) and ( a list of URI's)
>> example::   rice land  http\://www.wtr.org/wordlist#c_2379
>> http\://www.wtr.org/wordlist#c_65748 http\://www.wtr.org/wordlist#c_7612
>> here the search term or phrase is = rice land
>> URIs are= http\://www.wtr.org/wordlist#c_2379
>> http\://www.wtr.org/wordlist#c_65748 http\://www.wtr.org/wordlist#c_7612
>>
>> Now the way i want to build the Query is::
>>
>> rice land AND ( http\://www.wtr.org/wordlist#c_2379 OR
>> http\://www.wtr.org/wordlist#c_65748 OR http\://
>> www.wtr.org/wordlist#c_7612
>> )
>>
>> i tried this-
>>
>> try {
>>        if (queryString != null && fields != null) {
>>                  PerFieldAnalyzerWrapper perFieldAnalyzer =
>>                                        new
>> PerFieldAnalyzerWrapper(analyzer);
>>                perFieldAnalyzer.addAnalyzer("conceptURI", new
>> KeywordAnalyzer());
>>
>> MultiFieldQueryParser mfqp = new MultiFieldQueryParser(
>>                                                fields, perFieldAnalyzer);
>> if (queryString.contains("http") && !queryString.startsWith("http")) {
>>
>> String orgQuery =queryString.substring(0, queryString.indexOf("http"));
>>                                        String
>> uri=queryString.substring(queryString.indexOf("http"),
>> queryString.length());
>>
>> uri = uri.trim();
>>                                        String[] uris = uri.split(" ");
>>                                        String tempUri="";
>>                                        for (int i = 0; i < uris.length;
>> i++) {
>>                                                if(i== uris.length-1){
>>                                                        tempUri =  tempUri
>> +
>> uris[i];
>>                                                }else {
>>                                                        tempUri =  tempUri
>> +
>> uris[i]+QueryParser.OR_OPERATOR;
>>                                                }
>>                                        }
>>
>> query = mfqp.parse(orgQuery+ QueryParser.AND_OPERATOR+ tempUri );
>>
>>
>>
>>  is this is the correct way to  form a Query..?? Are there any other
>> methods?
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Grouping-of-Boolean-opeartors-in-Lucene..--tp20453434p20453434.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Grouping-of-Boolean-opeartors-in-Lucene..--tp20453434p20454155.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 05:19:29 2008
Return-Path: <java-user-return-37124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89286 invoked from network); 12 Nov 2008 05:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 05:19:29 -0000
Received: (qmail 29767 invoked by uid 500); 12 Nov 2008 05:19:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29730 invoked by uid 500); 12 Nov 2008 05:19:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29719 invoked by uid 99); 12 Nov 2008 05:19:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Nov 2008 21:19:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Nov 2008 05:18:09 +0000
Received: (qmail 43540 invoked by uid 60001); 12 Nov 2008 05:17:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=h92uRYHeCSAtI+BcUgy1lcR3hEPQm+YUF3RqY5PRP7Vughgykak4+8c7S2OXynQoJAfcDW6T6r4qX20FMZy5NLS922xucyLdFCoas85A8Wqo6XZ9uCpFDMVXHgcAy0W1CQLgUGxr7tozzxTlTb5SN6093Q5JrBnK7TUuHLIv4/A=;
X-YMail-OSG: EBNrShcVM1kUytdbF8yQTYmmgZ8YnsCJl4AFZxo9YVMMzXbAvWVnSPtlTPiq3j6uZWoBzszAUjyC51M9_M67q6dbB8fH9_GOIPGMeCErK1DH9dafbLULjmR3P4.gP0aEqqP9u7hAmDe7IGB_ldkej5GN3cJpD_yxSAfSAz7R_0EM_EKxttt6OMW6tA--
Received: from [72.227.164.48] by web50305.mail.re2.yahoo.com via HTTP; Tue, 11 Nov 2008 21:17:51 PST
X-Mailer: YahooMailRC/1155.29 YahooMailWebService/0.7.260.1
References: <9B7E81FB8C074519BDBAF3A093CE2F2C@MOBILE>
Date: Tue, 11 Nov 2008 21:17:51 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Feasibility question
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1872265316-1226467071=:43280"
Message-ID: <150628.43280.qm@web50305.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1872265316-1226467071=:43280
Content-Type: text/plain; charset=us-ascii

Yes, I think it is.  I think the only catch will be those log timestamps, how fine you really need them to be, and if you want them very fine what happens when you do range queries on timestamps.  If you have a pile of log files lying around, it should be pretty easy to get them indexed.  You don't even have to write a client for searching the resulting index, just point something like Luke to it, or even Solr.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch




________________________________
From: Jeff Capone <jeff_capone@leafnetworks.net>
To: java-user@lucene.apache.org
Sent: Monday, November 10, 2008 6:51:20 PM
Subject: Feasibility question

Has anyone deployed Lucene to index log files?  I have seen some articles 
about how RackSpace used Lucene and Hadoop for log processing, but I have 
not seen any details on the implementation.  

To get my required analytics, I think I would need to treat each line of 
the Apache log files as a document and I though I would treat each field as 
a key word to minimize processing. 

Assuming you have clusters operating on independent datasets (so I guess it 
would scale linearly) and you want to process Terabytes of logs per day, 
is such a solution even feasible?

Thank you,

Jeff Capone


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0-1872265316-1226467071=:43280--

From java-user-return-37125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 08:27:01 2008
Return-Path: <java-user-return-37125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89134 invoked from network); 12 Nov 2008 08:27:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 08:27:01 -0000
Received: (qmail 67860 invoked by uid 500); 12 Nov 2008 08:27:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67833 invoked by uid 500); 12 Nov 2008 08:27:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67822 invoked by uid 99); 12 Nov 2008 08:27:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 00:27:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [192.112.254.53] (HELO smtp2.bedag.ch) (192.112.254.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Nov 2008 08:25:39 +0000
Received: from localhost (localhost [127.0.0.1])
	by smtp2.bedag.ch (Postfix) with ESMTP id DB48B73986
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 09:25:49 +0100 (CET)
X-Quarantine-ID: <NQd06EAHrr74>
X-Virus-Scanned: Scanned
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: AW: Parsing MSWord
Date: Wed, 12 Nov 2008 09:25:47 +0100
Message-ID: <1D3D7943573BD14FB024A9654EB43CCB02A4C753@A99A-EMS-01VS2.ad.bedag.ch>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Parsing MSWord
Thread-Index: AclEeBsIWKAMbEsZRJmdwhUCiXtN9QAJ+Gaw
References: <aec6319e0811111937h7661b850p28e9407c8216b765@mail.gmail.com>
From: "Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Nov 2008 08:25:47.0272 (UTC) FILETIME=[4361F880:01C944A0]
X-Virus-Checked: Checked by ClamAV on apache.org

SGkNCg0KWW91IGNhbiBhbHNvIHVzZSBhIHRvb2wgY2FsbGVkICJhbnRpd29yZCIgdG8gZXh0cmFj
dCB0aGUgdGV4dCBmcm9tIGEgLmRvYyBmaWxlLCBhbmQgdGhlbg0KZ2l2ZSB0aGUgdGV4dCB0byBs
dWNlbmUuDQoNClNlZSBoZXJlIDogaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BbnRpd29y
ZA0KDQpSZWdhcmRzDQpNaXJrbw0KDQotLS0tLVVyc3Byw7xuZ2xpY2hlIE5hY2hyaWNodC0tLS0t
DQpWb246IGRpcGVzaCBbbWFpbHRvOmRpcHNocmVzdGhhQGdtYWlsLmNvbV0gDQpHZXNlbmRldDog
TWl0dHdvY2gsIDEyLiBOb3ZlbWJlciAyMDA4IDA0OjM4DQpBbjogamF2YS11c2VyQGx1Y2VuZS5h
cGFjaGUub3JnDQpCZXRyZWZmOiBQYXJzaW5nIE1TV29yZA0KDQpIZWxsbywNCkkgd2FudGVkIHRv
IGtub3cgaWYgdGhlcmUgYXJlIGNsYXNzZXMgaW4gTHVjZW5lIHRoYXQgc3VwcG9ydCBwYXJzaW5n
IE1TV29yZA0KZG9jdW1lbnRzLg0KTWFueSB0aGFua3MsDQpEaXBlc2gNCg0KLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KIkhlbHAgRXZlciBIdXJ0IE5ldmVyIi0gQmFi
YQ0K


From java-user-return-37126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 08:40:59 2008
Return-Path: <java-user-return-37126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93692 invoked from network); 12 Nov 2008 08:40:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 08:40:59 -0000
Received: (qmail 80544 invoked by uid 500); 12 Nov 2008 08:40:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80516 invoked by uid 500); 12 Nov 2008 08:40:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80505 invoked by uid 99); 12 Nov 2008 08:40:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 00:40:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.aristov@gmail.com designates 209.85.200.174 as permitted sender)
Received: from [209.85.200.174] (HELO wf-out-1314.google.com) (209.85.200.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 08:39:39 +0000
Received: by wf-out-1314.google.com with SMTP id 28so319075wfc.20
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 00:40:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=NJLpT9Q9b3Zo9Fnli0yUSUcl4AqYT44UmpVSM2Vk5TU=;
        b=iKUypVZVRHziz6CbfPk2mrAnaQw93fPDQShfoyGvRdaOYcYG27gd8FrK9TJc7HIltx
         MEsq7BncJgW/kl8DUzhzwrIGoj4Us9DiytBiAyQ0lxbdaF9lIDYJCeRYY7bOV94i+3BY
         l1ZXSnIHkaCxrGLTqoQMX5MLOKHOHC/XN41+I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=oPRdNwQqwNfz6Y2cIzbPG2YuiOpuuPCUSPGDKiqjy1VaDng2TiZbjVlJeVQuycYn31
         I3PqwDT0/eSTqtJn8CyjRrAdliNek2B3LRgHSFex3XTjzUbXEAlE9dQdSMIUHFEs/o4B
         7SOnYBYqXAtezAqBLJHZFuqjkOewv3/jac7o0=
Received: by 10.142.177.5 with SMTP id z5mr3426144wfe.240.1226479222614;
        Wed, 12 Nov 2008 00:40:22 -0800 (PST)
Received: by 10.142.104.5 with HTTP; Wed, 12 Nov 2008 00:40:22 -0800 (PST)
Message-ID: <11975c90811120040u2674325bhe5180279dcaa2dcb@mail.gmail.com>
Date: Wed, 12 Nov 2008 11:40:22 +0300
From: "Alexander Aristov" <alexander.aristov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Parsing MSWord
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB02A4C753@A99A-EMS-01VS2.ad.bedag.ch>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4857_22707923.1226479222598"
References: <aec6319e0811111937h7661b850p28e9407c8216b765@mail.gmail.com>
	 <1D3D7943573BD14FB024A9654EB43CCB02A4C753@A99A-EMS-01VS2.ad.bedag.ch>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4857_22707923.1226479222598
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Antiword would be hard to inject into Nutch as it is not Java based. It wil=
l
reqier native calls.

Alexander

2008/11/12 Sertic Mirko, Bedag <Mirko.Sertic@bedag.ch>

> Hi
>
> You can also use a tool called "antiword" to extract the text from a .doc
> file, and then
> give the text to lucene.
>
> See here : http://en.wikipedia.org/wiki/Antiword
>
> Regards
> Mirko
>
> -----Urspr=FCngliche Nachricht-----
> Von: dipesh [mailto:dipshrestha@gmail.com]
> Gesendet: Mittwoch, 12. November 2008 04:38
> An: java-user@lucene.apache.org
> Betreff: Parsing MSWord
>
> Hello,
> I wanted to know if there are classes in Lucene that support parsing MSWo=
rd
> documents.
> Many thanks,
> Dipesh
>
> ----------------------------------------
> "Help Ever Hurt Never"- Baba
>



--=20
Best Regards
Alexander Aristov

------=_Part_4857_22707923.1226479222598--

From java-user-return-37127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 09:51:20 2008
Return-Path: <java-user-return-37127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35736 invoked from network); 12 Nov 2008 09:51:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 09:51:19 -0000
Received: (qmail 56470 invoked by uid 500); 12 Nov 2008 09:51:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56435 invoked by uid 500); 12 Nov 2008 09:51:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56424 invoked by uid 99); 12 Nov 2008 09:51:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 01:51:18 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 09:49:59 +0000
Received: by yx-out-2324.google.com with SMTP id 3so129454yxj.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 01:50:41 -0800 (PST)
Received: by 10.90.119.20 with SMTP id r20mr8120671agc.4.1226483441163;
        Wed, 12 Nov 2008 01:50:41 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm568473agd.33.2008.11.12.01.50.39
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 01:50:40 -0800 (PST)
Message-Id: <AFD31066-A80D-4E38-BA86-C4102535277B@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <491A42E1.2030208@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IndexSearcher and multi-threaded performance
Date: Wed, 12 Nov 2008 04:50:38 -0500
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>	 <491A02A4.5020108@gmail.com> <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com> <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


I think we really should open up a non-static way to choose a  
different FSDirectory impl?  EG maybe add optional Class to  
FSDirectory.getDirectory?  Or maybe give NIOFSDirectory a public  
ctor?  Or something?

Mike

Mark Miller wrote:

> Mark Miller wrote:
>> Thats a good point, and points out a bug in solr trunk for me.  
>> Frankly I don't see how its done. There is no code I can see/find  
>> to use it rather than FSDirectory. Still assuming there must be a  
>> way, but I don't see it...
>>
> Ah - brain freeze. What else is new :) You have to set the system  
> property to change implementations:  
> org.apache.lucene.FSDirectory.class is the property, set it to the  
> class. Been a long time...
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 11:08:48 2008
Return-Path: <java-user-return-37128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76225 invoked from network); 12 Nov 2008 11:08:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 11:08:48 -0000
Received: (qmail 50739 invoked by uid 500); 12 Nov 2008 11:08:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50706 invoked by uid 500); 12 Nov 2008 11:08:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50695 invoked by uid 99); 12 Nov 2008 11:08:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 03:08:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.92.26 as permitted sender)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 11:07:27 +0000
Received: by qw-out-2122.google.com with SMTP id 5so195181qwi.53
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 03:08:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:x-mailer
         :mime-version:subject:date:references;
        bh=Gdj/I2kSUkKwaspyhh0XhIqgXJUpHmlVUwxwENMp/s4=;
        b=NNd1WNdt7w0rE6gv8KpL40TsRzJOCfAnWTWKWmpJLt6syVE5xJHP43r8HzqozSxVim
         EoncYwIzPx6EalioQrb/frMHPNEI3/VS23ttPL2F48yKMgykrazAKh05486lD3lMZsH+
         hH1qowXu/QRilcHAlvJ0WhgMu1H/qVdcBtsmI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:x-mailer:mime-version:subject:date
         :references;
        b=WGxkm43CP8bQC06wyIsbVTFTRWCvBJFxyp4e3EvU7Bwq+7f0iBbwTJ/KuV2ZJOLAdO
         WdzN5FxwCmUoHPtbqG7PBFRNEYz+1iF4Oz9DTaaCwEY/N83GTy3Ia1RamobOiIvGO5nV
         9MlP3Pb2SzM3HTpATT+1UIEuS1a1VsdOt+1F0=
Received: by 10.214.216.9 with SMTP id o9mr9452956qag.202.1226488080889;
        Wed, 12 Nov 2008 03:08:00 -0800 (PST)
Received: from ?10.155.25.104? ([32.141.124.39])
        by mx.google.com with ESMTPS id 6sm12450508ywn.0.2008.11.12.03.07.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 03:08:00 -0800 (PST)
Message-Id: <D01BFCBE-803A-450A-B9C1-FAA26033653F@gmail.com>
From: Mark Miller <markrmiller@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <AFD31066-A80D-4E38-BA86-C4102535277B@mikemccandless.com>
Content-Type: text/plain;
	charset=us-ascii;
	format=flowed;
	delsp=yes
Content-Transfer-Encoding: 7bit
X-Mailer: iPhone Mail (5F136)
Mime-Version: 1.0 (iPhone Mail 5F136)
Subject: Re: IndexSearcher and multi-threaded performance
Date: Wed, 12 Nov 2008 06:07:54 -0500
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>	 <491A02A4.5020108@gmail.com> <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com> <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com> <AFD31066-A80D-4E38-BA86-C4102535277B@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

+1

- Mark


On Nov 12, 2008, at 4:50 AM, Michael McCandless <lucene@mikemccandless.com 
 > wrote:

>
> I think we really should open up a non-static way to choose a  
> different FSDirectory impl?  EG maybe add optional Class to  
> FSDirectory.getDirectory?  Or maybe give NIOFSDirectory a public  
> ctor?  Or something?
>
> Mike
>
> Mark Miller wrote:
>
>> Mark Miller wrote:
>>> Thats a good point, and points out a bug in solr trunk for me.  
>>> Frankly I don't see how its done. There is no code I can see/find  
>>> to use it rather than FSDirectory. Still assuming there must be a  
>>> way, but I don't see it...
>>>
>> Ah - brain freeze. What else is new :) You have to set the system  
>> property to change implementations:  
>> org.apache.lucene.FSDirectory.class is the property, set it to the  
>> class. Been a long time...
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 12:03:06 2008
Return-Path: <java-user-return-37129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88343 invoked from network); 12 Nov 2008 12:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 12:03:06 -0000
Received: (qmail 28263 invoked by uid 500); 12 Nov 2008 12:03:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27894 invoked by uid 500); 12 Nov 2008 12:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27883 invoked by uid 99); 12 Nov 2008 12:03:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 04:03:05 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 12:01:46 +0000
Received: by yw-out-2324.google.com with SMTP id 3so141741ywj.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 04:02:27 -0800 (PST)
Received: by 10.100.131.13 with SMTP id e13mr3864296and.57.1226491347452;
        Wed, 12 Nov 2008 04:02:27 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c29sm7971410anc.9.2008.11.12.04.02.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 04:02:26 -0800 (PST)
Message-Id: <0964693B-3ABC-4635-B031-1B3E3AE6C280@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <D01BFCBE-803A-450A-B9C1-FAA26033653F@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IndexSearcher and multi-threaded performance
Date: Wed, 12 Nov 2008 07:02:24 -0500
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>	 <491A02A4.5020108@gmail.com> <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com> <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com> <AFD31066-A80D-4E38-BA86-C4102535277B@mikemccandless.com> <D01BFCBE-803A-450A-B9C1-FAA26033653F@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Any takers for pulling a patch together...?

Mike

Mark Miller wrote:

> +1
>
> - Mark
>
>
> On Nov 12, 2008, at 4:50 AM, Michael McCandless <lucene@mikemccandless.com 
> > wrote:
>
>>
>> I think we really should open up a non-static way to choose a  
>> different FSDirectory impl?  EG maybe add optional Class to  
>> FSDirectory.getDirectory?  Or maybe give NIOFSDirectory a public  
>> ctor?  Or something?
>>
>> Mike
>>
>> Mark Miller wrote:
>>
>>> Mark Miller wrote:
>>>> Thats a good point, and points out a bug in solr trunk for me.  
>>>> Frankly I don't see how its done. There is no code I can see/find  
>>>> to use it rather than FSDirectory. Still assuming there must be a  
>>>> way, but I don't see it...
>>>>
>>> Ah - brain freeze. What else is new :) You have to set the system  
>>> property to change implementations:  
>>> org.apache.lucene.FSDirectory.class is the property, set it to the  
>>> class. Been a long time...
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 12:20:37 2008
Return-Path: <java-user-return-37130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99062 invoked from network); 12 Nov 2008 12:20:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 12:20:37 -0000
Received: (qmail 55330 invoked by uid 500); 12 Nov 2008 12:20:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55296 invoked by uid 500); 12 Nov 2008 12:20:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55284 invoked by uid 99); 12 Nov 2008 12:20:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 04:20:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 12:19:18 +0000
Received: by gxk3 with SMTP id 3so164102gxk.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 04:20:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=VhaTiXSvOL1V11WCzDsI++GYzn4pda40SbACSFcsGXo=;
        b=V8fdY66Qnu/dWrm6FV9KzaUcTjbHRysAihwqoUxbpTOStQmR5excag5p2XjcvUQ+/K
         XxP88OUVh3suAEDjcKj39s3xx9+Mvven+HKMYtWgPSNSCfJ8T0ovRrgxLARLW3yhVyj0
         1zMETNpMoucunMkqq2WRqtbIk75pviB/acMiQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=OgBtj0b1b1CjNxlDZ5wB1BoGPeF0kfWYZWd1IbDhOkzAUdb5wDr98f4u1uCCw2b8e0
         YdqG9gQG7XUCCM+s6ZOVM+jWcmT7VNYmiZUHR3Od+gyQ6yq9hrXt8pjcjkmiF8jlrlyP
         Yobr2u96s9NbrcxNPn3f9YZfVWT97A64w2TMA=
Received: by 10.90.89.18 with SMTP id m18mr322931agb.96.1226492086755;
        Wed, 12 Nov 2008 04:14:46 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm11321968agd.33.2008.11.12.04.14.45
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 04:14:46 -0800 (PST)
Message-ID: <491AC8BA.4070600@gmail.com>
Date: Wed, 12 Nov 2008 07:14:50 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>	 <491A02A4.5020108@gmail.com> <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com> <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com> <AFD31066-A80D-4E38-BA86-C4102535277B@mikemccandless.com> <D01BFCBE-803A-450A-B9C1-FAA26033653F@gmail.com> <0964693B-3ABC-4635-B031-1B3E3AE6C280@mikemccandless.com>
In-Reply-To: <0964693B-3ABC-4635-B031-1B3E3AE6C280@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm thinking about it, so if someone else doesn't get something together 
before I have some free time...

Its just not clear to me at the moment how best to do it.

Michael McCandless wrote:
>
> Any takers for pulling a patch together...?
>
> Mike
>
> Mark Miller wrote:
>
>> +1
>>
>> - Mark
>>
>>
>> On Nov 12, 2008, at 4:50 AM, Michael McCandless 
>> <lucene@mikemccandless.com> wrote:
>>
>>>
>>> I think we really should open up a non-static way to choose a 
>>> different FSDirectory impl?  EG maybe add optional Class to 
>>> FSDirectory.getDirectory?  Or maybe give NIOFSDirectory a public 
>>> ctor?  Or something?
>>>
>>> Mike
>>>
>>> Mark Miller wrote:
>>>
>>>> Mark Miller wrote:
>>>>> Thats a good point, and points out a bug in solr trunk for me. 
>>>>> Frankly I don't see how its done. There is no code I can see/find 
>>>>> to use it rather than FSDirectory. Still assuming there must be a 
>>>>> way, but I don't see it...
>>>>>
>>>> Ah - brain freeze. What else is new :) You have to set the system 
>>>> property to change implementations: 
>>>> org.apache.lucene.FSDirectory.class is the property, set it to the 
>>>> class. Been a long time...
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 13:29:32 2008
Return-Path: <java-user-return-37131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22585 invoked from network); 12 Nov 2008 13:29:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 13:29:32 -0000
Received: (qmail 46627 invoked by uid 500); 12 Nov 2008 13:29:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46596 invoked by uid 500); 12 Nov 2008 13:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46585 invoked by uid 99); 12 Nov 2008 13:29:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 05:29:32 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gresh@us.ibm.com designates 32.97.182.144 as permitted sender)
Received: from [32.97.182.144] (HELO e4.ny.us.ibm.com) (32.97.182.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 13:28:10 +0000
Received: from d01relay04.pok.ibm.com (d01relay04.pok.ibm.com [9.56.227.236])
	by e4.ny.us.ibm.com (8.13.8/8.13.8) with ESMTP id mACDPiHc015142
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 08:25:44 -0500
Received: from d01av04.pok.ibm.com (d01av04.pok.ibm.com [9.56.224.64])
	by d01relay04.pok.ibm.com (8.13.8/8.13.8/NCO v9.1) with ESMTP id mACDPiUd117398
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 08:25:44 -0500
Received: from d01av04.pok.ibm.com (loopback [127.0.0.1])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id mACDPi3t016904
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 08:25:44 -0500
Received: from d01ml605.pok.ibm.com (d01ml605.pok.ibm.com [9.56.227.91])
	by d01av04.pok.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id mACDPiRd016901
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 08:25:44 -0500
In-Reply-To: <1D3D7943573BD14FB024A9654EB43CCB02A4C753@A99A-EMS-01VS2.ad.bedag.ch>
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Re: AW: Parsing MSWord
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
From: Donna L Gresh <gresh@us.ibm.com>
Message-ID: <OF7689ECED.B3395FA6-ON852574FF.0049A4D7-852574FF.0049B258@us.ibm.com>
Date: Wed, 12 Nov 2008 08:25:43 -0500
X-MIMETrack: Serialize by Router on D01ML605/01/M/IBM(Build V85_10262008HFIGS1|October
 26, 2008) at 11/12/2008 08:25:43,
	Serialize complete at 11/12/2008 08:25:43
Content-Type: multipart/alternative; boundary="=_alternative 0049B202852574FF_="
X-Virus-Checked: Checked by ClamAV on apache.org

--=_alternative 0049B202852574FF_=
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable

Check out POI; that's what I use

http://poi.apache.org/


"Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch> wrote on 11/12/2008 03:25:47 =

AM:

> Hi
>=20
> You can also use a tool called "antiword" to extract the text from a
> .doc file, and then
> give the text to lucene.
>=20
> See here : http://en.wikipedia.org/wiki/Antiword
>=20
> Regards
> Mirko
>=20
> -----Urspr=FCngliche Nachricht-----
> Von: dipesh [mailto:dipshrestha@gmail.com]=20
> Gesendet: Mittwoch, 12. November 2008 04:38
> An: java-user@lucene.apache.org
> Betreff: Parsing MSWord
>=20
> Hello,
> I wanted to know if there are classes in Lucene that support parsing=20
MSWord
> documents.
> Many thanks,
> Dipesh
>=20
> ----------------------------------------
> "Help Ever Hurt Never"- Baba

--=_alternative 0049B202852574FF_=--

From java-user-return-37132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 14:03:53 2008
Return-Path: <java-user-return-37132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48045 invoked from network); 12 Nov 2008 14:03:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 14:03:53 -0000
Received: (qmail 86983 invoked by uid 500); 12 Nov 2008 14:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86954 invoked by uid 500); 12 Nov 2008 14:03:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86943 invoked by uid 99); 12 Nov 2008 14:03:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 06:03:53 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 131.246.120.220 is neither permitted nor denied by domain of christian.reuschling@gmail.com)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 14:02:33 +0000
Received: from dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id mACDx8DJ010367
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 14:59:08 +0100
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id mACDx9aR003150
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 14:59:09 +0100 (CET)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id mACDx6MC025493
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 14:59:08 +0100 (CET)
Message-ID: <491AE11D.60307@gmail.com>
Date: Wed, 12 Nov 2008 14:58:53 +0100
From: Christian Reuschling <christian.reuschling@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080922)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: 1:n queries again
X-Enigmail-Version: 0.95.7
OpenPGP: id=AF96660F;
	url=hkp://wwwkeys.eu.pgp.net
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig6BC87D8941552C6258A2053F"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig6BC87D8941552C6258A2053F
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hello Friends,

In order to offer some simple 1:n matching, currently we create several, =
counted
attributes and expand our queries that we search inside each attribute, e=
=2Eg.:

Query 'attName:myTerm'  =3D> Query 'attName1:myTerm attName2:myTerm'

This is not the fastest way, and sometimes not easy to handle - also we h=
ave to
consider the 1:n attributes during indexing, and must remember the highes=
t 'n'
for query expansion. We get very big queries.


Currently I have some other scenario in mind, but I'm not sure how I can =
achieve
this. The idea is to write all n datasets into one attribute, with a spec=
ialized
start and end delimiter term, e.g.:

document entry for attName:
"startDelimiter myterm1 myterm2 endDelimiter startDelimiter myterm3 myter=
m4 endDelimiter"

When I look to this, it would go somehow into the direction of a PhraseQu=
ery,
where I can search e.g. for

attName:"startDelimiter myterm1 myterm2 endDelimiter"
but the query
attName:"startDelimiter myterm1 myterm4 endDelimiter"

would not match.

The only thing that lacks now is that the queries
attName:"startDelimiter myterm1 endDelimiter"
attName:"startDelimiter myterm2 myterm1 endDelimiter"

also should match - which of course isn't possible with the current Phras=
eQuery
implementation.

Best would be some construct like attName:"startDelimiter (myterm1 myterm=
2) endDelimiter"

Whereby the stuff inside the brackets would be a standard BooleanQuery, b=
ut only
applied inside the range of the delimiters. Is this somehow possible, or =
do I
have to write my own Query implementation - and what would be the best wa=
y in this case.


Thanks in advance

Christian Reuschling


--------------enig6BC87D8941552C6258A2053F
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)
Comment: Using GnuPG with SUSE - http://enigmail.mozdev.org

iEYEARECAAYFAkka4SoACgkQ6EqMXq+WZg9USwCeLHeog/71lFwd19Xbnrx0rnT+
PtUAnRZ8nVUXV93l2kSICy5l5e1OErYo
=s1hT
-----END PGP SIGNATURE-----

--------------enig6BC87D8941552C6258A2053F--

From java-user-return-37133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 14:17:57 2008
Return-Path: <java-user-return-37133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59816 invoked from network); 12 Nov 2008 14:17:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 14:17:57 -0000
Received: (qmail 16085 invoked by uid 500); 12 Nov 2008 14:17:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16057 invoked by uid 500); 12 Nov 2008 14:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16046 invoked by uid 99); 12 Nov 2008 14:17:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 06:17:58 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [85.158.138.131] (HELO mail186.messagelabs.com) (85.158.138.131)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 14:16:38 +0000
X-VirusChecked: Checked
X-Env-Sender: wzzelfzzel@abas.de
X-Msg-Ref: server-13.tower-186.messagelabs.com!1226499319!14088526!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [212.202.226.200]
Received: (qmail 4130 invoked from network); 12 Nov 2008 14:15:19 -0000
Received: from gate.abas.de (HELO gate.abas.de) (212.202.226.200)
  by server-13.tower-186.messagelabs.com with AES256-SHA encrypted SMTP; 12 Nov 2008 14:15:19 -0000
Received: from gate.abas.de (localhost [127.0.0.1])
	by gate.abas.de (8.14.0/8.14.0) with ESMTP id mACEFIjU007936
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 15:15:18 +0100 (CET)
Received: (from localhost) by gate.abas.de (MSCAN) id 5/gate.abas.de/smtp-gw/mscan; Wed Nov 12 15:15:18 2008
From: Stefan Trcek <wzzelfzzel@abas.de>
To: java-user@lucene.apache.org
Subject: Re: 1:n queries again
Date: Wed, 12 Nov 2008 15:15:16 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <491AE11D.60307@gmail.com>
In-Reply-To: <491AE11D.60307@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811121515.16261.wzzelfzzel@abas.de>
X-ABAS-MAIL-MARK: added by mailmarker.abas.de
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 12 November 2008 14:58:53 Christian Reuschling wrote:
> In order to offer some simple 1:n matching, currently we create
> several, counted attributes and expand our queries that we search
> inside each attribute, e.g.:

I use one attribute (Field) multiple times.

Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 14:47:07 2008
Return-Path: <java-user-return-37134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82864 invoked from network); 12 Nov 2008 14:47:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 14:47:07 -0000
Received: (qmail 76807 invoked by uid 500); 12 Nov 2008 14:47:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75834 invoked by uid 500); 12 Nov 2008 14:47:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75822 invoked by uid 99); 12 Nov 2008 14:47:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 06:47:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 14:45:48 +0000
Received: by ey-out-2122.google.com with SMTP id 6so184707eyi.53
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 06:46:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=pL6K6bCj/meawJQAvZEpVbfVZPx7Yc6SSrbkbw3GZeg=;
        b=WXECpvIsk54PANLjdH9Qp0TvBnC2IGNDroMP7YYwZ1nYMk/o3DjiGOmuColgamV9AC
         FP5LWQgHOhDFU2WJlv82s9no1koYqP7fy/NmPcdbFDoSHoToFljrqzCPy1NUILUrn2gM
         lRtTvYv/u9TUasDvoOFSqeYbx69nh5mFKx0dU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=JK208U9mjEQKSpkMUfLx0E5PwSs5e2EmN3Jz0PVa16TRUSeH7q5IjdOdl7VRjfdvlC
         8/ZTyqvvA7BJAvn8y4kI3gH8zcziF2Zi6sZRWQslFoiIV+pXQfaydYfmmHsDWfB4vibv
         qdMyJQR7R2/TQt9dUswZh2MKNiVjSgMXX98P8=
Received: by 10.86.53.8 with SMTP id b8mr9235383fga.58.1226501190481;
        Wed, 12 Nov 2008 06:46:30 -0800 (PST)
Received: by 10.86.86.4 with HTTP; Wed, 12 Nov 2008 06:46:30 -0800 (PST)
Message-ID: <359a92830811120646n54eb368en77ba26d72d612274@mail.gmail.com>
Date: Wed, 12 Nov 2008 09:46:30 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 1:n queries again
In-Reply-To: <491AE11D.60307@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5328_5473369.1226501190454"
References: <491AE11D.60307@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5328_5473369.1226501190454
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It's entirely unclear to me whether facets could help, since I haven't used
them, I've
seen these mentioned on the SOLR user list, it may bear investigating.

To expand on Stefan's point. I think his solution will work for you quite
well, but
there are a couple of tricks....

The first thing to understand is that (This won't compile, but you get the
idea)

doc = new Document
doc.add("field1", "word1 word2 word3")
doc.add("field1", "word4 word5")
IndexWriter.addDocument(doc)

is perfectly legal. The single document added will have all 5 words in
"field1". But
here's the trick. If you provide your own analyzer (a trivial analyzer built
from one
of the standard ones?) that returns a number other than 1 (say 10) from
getPositionIncrementGap the "distance" between word3 and word4 will be
10 rather than 1. But the distance between word1 and word2 will be 1 as
will the distance between word2 and word3, as will the distance between
word4 and word5

How does this help, you ask? Well, SpanQuery is your friend (PhraseQuery
might work just as well in this case). Because you can now ask that all your
terms have < 10 "holes". For instance, if you made a phrase like
"word1 word2"~5 it would match, as would "word1"~5 or just word1

"word1 word3"~5 would NOT match since there  other tokens between

"word3 word4"~5 would NOT match since the distance between them is
greater than 5

Note that using 10 is arbitrary, you probably really want to use something
much
larger, say 100 larger than the maximum number of terms you expect. The only
thing you need to watch at all is that the total length of all the terms and
all
the gaps doesn't exceed MAX_INT (MAX_INT / 2? I don't know whether the
integers are signed).....

What's really happening here is that the "gap" is taking the place of your
delimiters and you're making use of Phrase/SpanQuery characteristics
to return what you want.

Of course I may have completely mis-read your problem, but I'm sure you'll
let us know if that's the case <G>.


BTW, if this isn't a typo, you probably need SpanQuery since you can
specify order not being important:
attName:"startDelimiter myterm2 myterm1 endDelimiter"...should also match

Did you really mean to have myterm2 in front of myterm1?

Best
Erick

On Wed, Nov 12, 2008 at 8:58 AM, Christian Reuschling <
christian.reuschling@gmail.com> wrote:

> Hello Friends,
>
> In order to offer some simple 1:n matching, currently we create several,
> counted
> attributes and expand our queries that we search inside each attribute,
> e.g.:
>
> Query 'attName:myTerm'  => Query 'attName1:myTerm attName2:myTerm'
>
> This is not the fastest way, and sometimes not easy to handle - also we
> have to
> consider the 1:n attributes during indexing, and must remember the highest
> 'n'
> for query expansion. We get very big queries.
>
>
> Currently I have some other scenario in mind, but I'm not sure how I can
> achieve
> this. The idea is to write all n datasets into one attribute, with a
> specialized
> start and end delimiter term, e.g.:
>
> document entry for attName:
> "startDelimiter myterm1 myterm2 endDelimiter startDelimiter myterm3 myterm4
> endDelimiter"
>
> When I look to this, it would go somehow into the direction of a
> PhraseQuery,
> where I can search e.g. for
>
> attName:"startDelimiter myterm1 myterm2 endDelimiter"
> but the query
> attName:"startDelimiter myterm1 myterm4 endDelimiter"
>
> would not match.
>
> The only thing that lacks now is that the queries
> attName:"startDelimiter myterm1 endDelimiter"
> attName:"startDelimiter myterm2 myterm1 endDelimiter"
>
> also should match - which of course isn't possible with the current
> PhraseQuery
> implementation.
>
> Best would be some construct like attName:"startDelimiter (myterm1 myterm2)
> endDelimiter"
>
> Whereby the stuff inside the brackets would be a standard BooleanQuery, but
> only
> applied inside the range of the delimiters. Is this somehow possible, or do
> I
> have to write my own Query implementation - and what would be the best way
> in this case.
>
>
> Thanks in advance
>
> Christian Reuschling
>
>

------=_Part_5328_5473369.1226501190454--

From java-user-return-37135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 14:54:10 2008
Return-Path: <java-user-return-37135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88908 invoked from network); 12 Nov 2008 14:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 14:54:10 -0000
Received: (qmail 97577 invoked by uid 500); 12 Nov 2008 14:54:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97544 invoked by uid 500); 12 Nov 2008 14:54:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97533 invoked by uid 99); 12 Nov 2008 14:54:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 06:54:10 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 131.246.120.220 is neither permitted nor denied by domain of christian.reuschling@gmail.com)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 14:52:51 +0000
Received: from dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id mACEnHKN032129
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 15:49:17 +0100
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id mACEnHZ9003865
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 15:49:17 +0100 (CET)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id mACEnH75000495
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 15:49:17 +0100 (CET)
Message-ID: <491AECE3.5060000@gmail.com>
Date: Wed, 12 Nov 2008 15:49:07 +0100
From: Christian Reuschling <christian.reuschling@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080922)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: 1:n queries again
References: <491AE11D.60307@gmail.com> <200811121515.16261.wzzelfzzel@abas.de>
In-Reply-To: <200811121515.16261.wzzelfzzel@abas.de>
X-Enigmail-Version: 0.95.7
OpenPGP: id=AF96660F;
	url=hkp://wwwkeys.eu.pgp.net
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig8BC93C508F6BBB57E844983D"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig8BC93C508F6BBB57E844983D
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

But this is not the same - Lucene makes it transparent for you whether
you have one or several field entries for one attribute.
The behaviour will be the same in both of these cases:

Lucene document entry:
attName: "term1 term2"
attName: "term3 term4"
or
attName: "term1 term2 term3 term4"


For the 1:n behaviour, you need some kind of logical 'grouping' of one
dataset.

whereby a query 'term1 term4' should NOT match, 'term1 term2' must match.=


Stefan Trcek schrieb:
> On Wednesday 12 November 2008 14:58:53 Christian Reuschling wrote:
>> In order to offer some simple 1:n matching, currently we create
>> several, counted attributes and expand our queries that we search
>> inside each attribute, e.g.:
>=20
> I use one attribute (Field) multiple times.
>=20
> Stefan
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


--------------enig8BC93C508F6BBB57E844983D
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)
Comment: Using GnuPG with SUSE - http://enigmail.mozdev.org

iEYEARECAAYFAkka7O0ACgkQ6EqMXq+WZg9PUQCbBibEKjTfrXukBWJTfACteUFq
AToAoJmboOLpJA+7kyVLcEqKlwE5+BbX
=D8sJ
-----END PGP SIGNATURE-----

--------------enig8BC93C508F6BBB57E844983D--

From java-user-return-37136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 15:08:34 2008
Return-Path: <java-user-return-37136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13688 invoked from network); 12 Nov 2008 15:08:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 15:08:34 -0000
Received: (qmail 26440 invoked by uid 500); 12 Nov 2008 15:08:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25828 invoked by uid 500); 12 Nov 2008 15:08:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25817 invoked by uid 99); 12 Nov 2008 15:08:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 07:08:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Nov 2008 15:07:12 +0000
Received: (qmail 8508 invoked by uid 60001); 12 Nov 2008 15:07:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=wdBprULEPTqhfwCemYxb8PKNkoLttwbbOYy2m4QT1oKNDf5i1xLDrfHl20dyvPurLIpANRvTxQWORYR7rSTjklRL+SfJFlVS9ujAz/Jh0h8HuRrr6DmaPJmLqdeXfE9UyQU5bLMbDxx4MkWTwvfQJf9w/ybRIZp9v6yVwSK10Zg=;
X-YMail-OSG: e.RBTFcVM1l7R0rcfQ0BcYMqDjPSB1KuPEJoncXKHbE7.QxR616iNROzn1qFzPSZjR1eokCA8JVnGciZQvEiLjQiYTU8NwGtBiOi3yIgvk1.5uG2aRDp6haaB24ObNI199mBojwDf61TNA678XK2mZROMfSHZI7QH0Af_ywZ7zdzia_q_E2Yj4mn3Q--
Received: from [167.206.188.3] by web50303.mail.re2.yahoo.com via HTTP; Wed, 12 Nov 2008 07:07:54 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <491AE11D.60307@gmail.com>
Date: Wed, 12 Nov 2008 07:07:54 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: 1:n queries again
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1709134432-1226502474=:7005"
Message-ID: <790186.7005.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1709134432-1226502474=:7005
Content-Type: text/plain; charset=us-ascii

Christian,

If I understand your situation correctly, you should look at sloppy phrases and at Span family of queries.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch




________________________________
From: Christian Reuschling <christian.reuschling@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, November 12, 2008 8:58:53 AM
Subject: 1:n queries again

Hello Friends,

In order to offer some simple 1:n matching, currently we create several, counted
attributes and expand our queries that we search inside each attribute, e.g.:

Query 'attName:myTerm'  => Query 'attName1:myTerm attName2:myTerm'

This is not the fastest way, and sometimes not easy to handle - also we have to
consider the 1:n attributes during indexing, and must remember the highest 'n'
for query expansion. We get very big queries.


Currently I have some other scenario in mind, but I'm not sure how I can achieve
this. The idea is to write all n datasets into one attribute, with a specialized
start and end delimiter term, e.g.:

document entry for attName:
"startDelimiter myterm1 myterm2 endDelimiter startDelimiter myterm3 myterm4 endDelimiter"

When I look to this, it would go somehow into the direction of a PhraseQuery,
where I can search e.g. for

attName:"startDelimiter myterm1 myterm2 endDelimiter"
but the query
attName:"startDelimiter myterm1 myterm4 endDelimiter"

would not match.

The only thing that lacks now is that the queries
attName:"startDelimiter myterm1 endDelimiter"
attName:"startDelimiter myterm2 myterm1 endDelimiter"

also should match - which of course isn't possible with the current PhraseQuery
implementation.

Best would be some construct like attName:"startDelimiter (myterm1 myterm2) endDelimiter"

Whereby the stuff inside the brackets would be a standard BooleanQuery, but only
applied inside the range of the delimiters. Is this somehow possible, or do I
have to write my own Query implementation - and what would be the best way in this case.


Thanks in advance

Christian Reuschling
--0-1709134432-1226502474=:7005--

From java-user-return-37137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 15:09:49 2008
Return-Path: <java-user-return-37137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14346 invoked from network); 12 Nov 2008 15:09:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 15:09:49 -0000
Received: (qmail 31540 invoked by uid 500); 12 Nov 2008 15:09:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31370 invoked by uid 500); 12 Nov 2008 15:09:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31359 invoked by uid 99); 12 Nov 2008 15:09:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 07:09:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.re2.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Nov 2008 15:08:27 +0000
Received: (qmail 43714 invoked by uid 60001); 12 Nov 2008 15:09:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=dROWnW9l3em45PogvwXUDNuBF346GDOsIUJcPb7wn4dsUcSFrjT5JLfxSDE+97851zLQ78sOphXjLaGpKXHAib2/53KrIknltKhgtrkVbL+w44F1Pd8exEPAx84+5qu5p7RtyNIbXtZKhqwXYppjyOBUirz3GPoBzzmhVHBguQY=;
X-YMail-OSG: YIfmmTQVM1lgFR7YoK0_GcuVfTXK2MiH26NFSf_855MkBW.7YIIL8I0wRdZ2KCobA9S5IsO9zu9ls1C_1y2uWpB3rK4Tes15Q0K6pm60fC13XXHQr_991_CZAuLv.3nE69rKE2ha91g9bmqwnaQs6qoMO08gEs5R4jzrzsLGmbjYCtTjDXm2hxN6rQ--
Received: from [167.206.188.3] by web50311.mail.re2.yahoo.com via HTTP; Wed, 12 Nov 2008 07:09:10 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <OF7689ECED.B3395FA6-ON852574FF.0049A4D7-852574FF.0049B258@us.ibm.com>
Date: Wed, 12 Nov 2008 07:09:10 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: AW: Parsing MSWord
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-765251811-1226502550=:40668"
Message-ID: <414574.40668.qm@web50311.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-765251811-1226502550=:40668
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Or Tika, Lucene's cousin: http://incubator.apache.org/tika/=0A(which uses P=
OI under the hood, but goes beyond MS Word parsing)=0A=0AOtis=0A--=0ASemate=
xt -- http://sematext.com/ -- Lucene - Solr - Nutch=0A=0A=0A=0A=0A_________=
_______________________=0AFrom: Donna L Gresh <gresh@us.ibm.com>=0ATo: java=
-user@lucene.apache.org=0ASent: Wednesday, November 12, 2008 8:25:43 AM=0AS=
ubject: Re: AW: Parsing MSWord=0A=0ACheck out POI; that's what I use=0A=0Ah=
ttp://poi.apache.org/=0A=0A=0A"Sertic Mirko, Bedag" <Mirko.Sertic@bedag.ch>=
 wrote on 11/12/2008 03:25:47 =0AAM:=0A=0A> Hi=0A> =0A> You can also use a =
tool called "antiword" to extract the text from a=0A> .doc file, and then=
=0A> give the text to lucene.=0A> =0A> See here : http://en.wikipedia.org/w=
iki/Antiword=0A> =0A> Regards=0A> Mirko=0A> =0A> -----Urspr=FCngliche Nachr=
icht-----=0A> Von: dipesh [mailto:dipshrestha@gmail.com] =0A> Gesendet: Mit=
twoch, 12. November 2008 04:38=0A> An: java-user@lucene.apache.org=0A> Betr=
eff: Parsing MSWord=0A> =0A> Hello,=0A> I wanted to know if there are class=
es in Lucene that support parsing =0AMSWord=0A> documents.=0A> Many thanks,=
=0A> Dipesh=0A> =0A> ----------------------------------------=0A> "Help Eve=
r Hurt Never"- Baba=0A
--0-765251811-1226502550=:40668--

From java-user-return-37138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 15:18:20 2008
Return-Path: <java-user-return-37138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18906 invoked from network); 12 Nov 2008 15:18:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 15:18:20 -0000
Received: (qmail 49144 invoked by uid 500); 12 Nov 2008 15:18:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49115 invoked by uid 500); 12 Nov 2008 15:18:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49104 invoked by uid 99); 12 Nov 2008 15:18:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 07:18:19 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 131.246.120.220 is neither permitted nor denied by domain of christian.reuschling@gmail.com)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 15:17:00 +0000
Received: from dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id mACFHedg012336
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 16:17:41 +0100
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id mACFHfYB004272
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 16:17:41 +0100 (CET)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id mACFHe5K003447
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 16:17:41 +0100 (CET)
Message-ID: <491AF38F.8080506@gmail.com>
Date: Wed, 12 Nov 2008 16:17:35 +0100
From: Christian Reuschling <christian.reuschling@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080922)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: 1:n queries again
References: <491AE11D.60307@gmail.com> <359a92830811120646n54eb368en77ba26d72d612274@mail.gmail.com>
In-Reply-To: <359a92830811120646n54eb368en77ba26d72d612274@mail.gmail.com>
X-Enigmail-Version: 0.95.7
OpenPGP: id=AF96660F;
	url=hkp://wwwkeys.eu.pgp.net
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enigBDFCF41087BD4DD74CB893A3"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enigBDFCF41087BD4DD74CB893A3
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hello Erick,

thank you very much for this interesting idea - but I'm not sure that the=

SpanQuery will make every aspect I search for.

I think the lack is that in the case of a PhraseQuery (and I think also i=
n
the case of the SpanQuery, but I'm not sure about yet), every term must a=
ppear
inside the phrase, it is some kind of 'must' for every term.

I search for a 'should' - so the behaviour should be exactly the same as
BooleanQuery does, but only in one dataset (maybe represented as extra fi=
eld
entry with an incremented PositionIncrementGap)

In this context, it also was no typo with term2 in front of term1

At the end, I want to know a score for the overlapping between two term l=
ists,
so in the case the index entry is

> doc =3D new Document
> doc.add("field1", "word1 word2 word3")
> doc.add("field1", "word4 word5")
> IndexWriter.addDocument(doc)

also a query like field1:"word3 NewNotExistingWord word1"~5
should match.

So the semantic of this (hypothetic) query
"starDelimiter (word1 notExistingWord word3) endDelimiter"

would make it...but it is a good hint with the PositionIncrementGap. Mayb=
e
there is a possibility to combine this with BooleanQuery?




Erick Erickson schrieb:
> It's entirely unclear to me whether facets could help, since I haven't =
used
> them, I've
> seen these mentioned on the SOLR user list, it may bear investigating.
>=20
> To expand on Stefan's point. I think his solution will work for you qui=
te
> well, but
> there are a couple of tricks....
>=20
> The first thing to understand is that (This won't compile, but you get =
the
> idea)
>=20
> doc =3D new Document
> doc.add("field1", "word1 word2 word3")
> doc.add("field1", "word4 word5")
> IndexWriter.addDocument(doc)
>=20
> is perfectly legal. The single document added will have all 5 words in
> "field1". But
> here's the trick. If you provide your own analyzer (a trivial analyzer =
built
> from one
> of the standard ones?) that returns a number other than 1 (say 10) from=

> getPositionIncrementGap the "distance" between word3 and word4 will be
> 10 rather than 1. But the distance between word1 and word2 will be 1 as=

> will the distance between word2 and word3, as will the distance between=

> word4 and word5
>=20
> How does this help, you ask? Well, SpanQuery is your friend (PhraseQuer=
y
> might work just as well in this case). Because you can now ask that all=
 your
> terms have < 10 "holes". For instance, if you made a phrase like
> "word1 word2"~5 it would match, as would "word1"~5 or just word1
>=20
> "word1 word3"~5 would NOT match since there  other tokens between
>=20
> "word3 word4"~5 would NOT match since the distance between them is
> greater than 5
>=20
> Note that using 10 is arbitrary, you probably really want to use someth=
ing
> much
> larger, say 100 larger than the maximum number of terms you expect. The=
 only
> thing you need to watch at all is that the total length of all the term=
s and
> all
> the gaps doesn't exceed MAX_INT (MAX_INT / 2? I don't know whether the
> integers are signed).....
>=20
> What's really happening here is that the "gap" is taking the place of y=
our
> delimiters and you're making use of Phrase/SpanQuery characteristics
> to return what you want.
>=20
> Of course I may have completely mis-read your problem, but I'm sure you=
'll
> let us know if that's the case <G>.
>=20
>=20
> BTW, if this isn't a typo, you probably need SpanQuery since you can
> specify order not being important:
> attName:"startDelimiter myterm2 myterm1 endDelimiter"...should also mat=
ch
>=20
> Did you really mean to have myterm2 in front of myterm1?
>=20
> Best
> Erick
>=20
> On Wed, Nov 12, 2008 at 8:58 AM, Christian Reuschling <
> christian.reuschling@gmail.com> wrote:
>=20
>> Hello Friends,
>>
>> In order to offer some simple 1:n matching, currently we create severa=
l,
>> counted
>> attributes and expand our queries that we search inside each attribute=
,
>> e.g.:
>>
>> Query 'attName:myTerm'  =3D> Query 'attName1:myTerm attName2:myTerm'
>>
>> This is not the fastest way, and sometimes not easy to handle - also w=
e
>> have to
>> consider the 1:n attributes during indexing, and must remember the hig=
hest
>> 'n'
>> for query expansion. We get very big queries.
>>
>>
>> Currently I have some other scenario in mind, but I'm not sure how I c=
an
>> achieve
>> this. The idea is to write all n datasets into one attribute, with a
>> specialized
>> start and end delimiter term, e.g.:
>>
>> document entry for attName:
>> "startDelimiter myterm1 myterm2 endDelimiter startDelimiter myterm3 my=
term4
>> endDelimiter"
>>
>> When I look to this, it would go somehow into the direction of a
>> PhraseQuery,
>> where I can search e.g. for
>>
>> attName:"startDelimiter myterm1 myterm2 endDelimiter"
>> but the query
>> attName:"startDelimiter myterm1 myterm4 endDelimiter"
>>
>> would not match.
>>
>> The only thing that lacks now is that the queries
>> attName:"startDelimiter myterm1 endDelimiter"
>> attName:"startDelimiter myterm2 myterm1 endDelimiter"
>>
>> also should match - which of course isn't possible with the current
>> PhraseQuery
>> implementation.
>>
>> Best would be some construct like attName:"startDelimiter (myterm1 myt=
erm2)
>> endDelimiter"
>>
>> Whereby the stuff inside the brackets would be a standard BooleanQuery=
, but
>> only
>> applied inside the range of the delimiters. Is this somehow possible, =
or do
>> I
>> have to write my own Query implementation - and what would be the best=
 way
>> in this case.
>>
>>
>> Thanks in advance
>>
>> Christian Reuschling
>>
>>
>=20


--------------enigBDFCF41087BD4DD74CB893A3
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)
Comment: Using GnuPG with SUSE - http://enigmail.mozdev.org

iEYEARECAAYFAkka85QACgkQ6EqMXq+WZg81HwCfYxt5mQsabs3I26KFkhCAbP2/
O9QAoKY6IgF97JeA7I5RpHTwy+ObXK16
=yATx
-----END PGP SIGNATURE-----

--------------enigBDFCF41087BD4DD74CB893A3--

From java-user-return-37139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 15:36:51 2008
Return-Path: <java-user-return-37139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29644 invoked from network); 12 Nov 2008 15:36:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 15:36:51 -0000
Received: (qmail 90578 invoked by uid 500); 12 Nov 2008 15:36:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90550 invoked by uid 500); 12 Nov 2008 15:36:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90539 invoked by uid 99); 12 Nov 2008 15:36:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 07:36:51 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 15:35:32 +0000
Received: by ey-out-2122.google.com with SMTP id 6so194531eyi.53
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 07:36:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=85RKmWr127btMoAFvrb9OQGSSh7KhWWL5Jk2KDyY8Xw=;
        b=ASLviC9YQkRU2JdXjDvQCIU8+W14txzc8yFtgRG74+evlQqh2mAbl9EZNFFVpV0J62
         KlJal7y9S+lfy6scIH234Um1IuX9+S8Srb7kJvFxNzeb9alIveBD0E9NJcYqt6H8aP5f
         y+t3FD2a1eLKzVbduUsdZ/4Ap0pOtiC+IMxQs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KddZHG7ewSBtvK2FIclIXq6WHbuSfKVb3XPlx0f+Htvzhge626w2s5pV6cAbuiSGtC
         FNc25rUO8sTT0qxRfpDesYZou0WMSG74fZplPENZDFe2ndlh7Gjp4jdgeQKRdbMvq5b8
         1GG7pWw/pa9WMs0Pad7tHzyZf+2lNmWBvU54A=
Received: by 10.86.84.18 with SMTP id h18mr9227493fgb.69.1226504164666;
        Wed, 12 Nov 2008 07:36:04 -0800 (PST)
Received: by 10.86.86.4 with HTTP; Wed, 12 Nov 2008 07:36:04 -0800 (PST)
Message-ID: <359a92830811120736i41e77571i2ede2ac1b8bcdadc@mail.gmail.com>
Date: Wed, 12 Nov 2008 10:36:04 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: 1:n queries again
In-Reply-To: <491AF38F.8080506@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5740_11707651.1226504164649"
References: <491AE11D.60307@gmail.com>
	 <359a92830811120646n54eb368en77ba26d72d612274@mail.gmail.com>
	 <491AF38F.8080506@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5740_11707651.1226504164649
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Note that the SpanQuery family are Querys, so they can
be used as clauses of a BooleanQuery just fine.


Making this work will be exciting...
<<<a query like field1:"word3 NewNotExistingWord word1"~5
should match.>>>
I'm having trouble understanding the use case. I don't
understand how the user can make sense of this, but then
it may well be unique to your problem space. What does this
mean to the user? Find me any documents where any pair of
words in the phrase are within 5 of each other? Find me
all documents with *any* matching words and order them by
proximity possibly giving more weight to documents with the
most matching terms? ????


<<<I think the lack is that in the case of a PhraseQuery (and I think also
in
the case of the SpanQuery, but I'm not sure about yet), every term must
appear
inside the phrase, it is some kind of 'must' for every term.>>>

This is correct if I'm reading it right. Perhaps what's needed here
is a statement of the problem you're trying to solve, because I'm
having trouble understanding the underlying use-cases..

Best
Erick


On Wed, Nov 12, 2008 at 10:17 AM, Christian Reuschling <
christian.reuschling@gmail.com> wrote:

> Hello Erick,
>
> thank you very much for this interesting idea - but I'm not sure that the
> SpanQuery will make every aspect I search for.
>
> I think the lack is that in the case of a PhraseQuery (and I think also in
> the case of the SpanQuery, but I'm not sure about yet), every term must
> appear
> inside the phrase, it is some kind of 'must' for every term.
>
> I search for a 'should' - so the behaviour should be exactly the same as
> BooleanQuery does, but only in one dataset (maybe represented as extra
> field
> entry with an incremented PositionIncrementGap)
>
> In this context, it also was no typo with term2 in front of term1
>
> At the end, I want to know a score for the overlapping between two term
> lists,
> so in the case the index entry is
>
> > doc = new Document
> > doc.add("field1", "word1 word2 word3")
> > doc.add("field1", "word4 word5")
> > IndexWriter.addDocument(doc)
>
> also a query like field1:"word3 NewNotExistingWord word1"~5
> should match.
>
> So the semantic of this (hypothetic) query
> "starDelimiter (word1 notExistingWord word3) endDelimiter"
>
> would make it...but it is a good hint with the PositionIncrementGap. Maybe
> there is a possibility to combine this with BooleanQuery?
>
>
>
>
> Erick Erickson schrieb:
> > It's entirely unclear to me whether facets could help, since I haven't
> used
> > them, I've
> > seen these mentioned on the SOLR user list, it may bear investigating.
> >
> > To expand on Stefan's point. I think his solution will work for you quite
> > well, but
> > there are a couple of tricks....
> >
> > The first thing to understand is that (This won't compile, but you get
> the
> > idea)
> >
> > doc = new Document
> > doc.add("field1", "word1 word2 word3")
> > doc.add("field1", "word4 word5")
> > IndexWriter.addDocument(doc)
> >
> > is perfectly legal. The single document added will have all 5 words in
> > "field1". But
> > here's the trick. If you provide your own analyzer (a trivial analyzer
> built
> > from one
> > of the standard ones?) that returns a number other than 1 (say 10) from
> > getPositionIncrementGap the "distance" between word3 and word4 will be
> > 10 rather than 1. But the distance between word1 and word2 will be 1 as
> > will the distance between word2 and word3, as will the distance between
> > word4 and word5
> >
> > How does this help, you ask? Well, SpanQuery is your friend (PhraseQuery
> > might work just as well in this case). Because you can now ask that all
> your
> > terms have < 10 "holes". For instance, if you made a phrase like
> > "word1 word2"~5 it would match, as would "word1"~5 or just word1
> >
> > "word1 word3"~5 would NOT match since there  other tokens between
> >
> > "word3 word4"~5 would NOT match since the distance between them is
> > greater than 5
> >
> > Note that using 10 is arbitrary, you probably really want to use
> something
> > much
> > larger, say 100 larger than the maximum number of terms you expect. The
> only
> > thing you need to watch at all is that the total length of all the terms
> and
> > all
> > the gaps doesn't exceed MAX_INT (MAX_INT / 2? I don't know whether the
> > integers are signed).....
> >
> > What's really happening here is that the "gap" is taking the place of
> your
> > delimiters and you're making use of Phrase/SpanQuery characteristics
> > to return what you want.
> >
> > Of course I may have completely mis-read your problem, but I'm sure
> you'll
> > let us know if that's the case <G>.
> >
> >
> > BTW, if this isn't a typo, you probably need SpanQuery since you can
> > specify order not being important:
> > attName:"startDelimiter myterm2 myterm1 endDelimiter"...should also match
> >
> > Did you really mean to have myterm2 in front of myterm1?
> >
> > Best
> > Erick
> >
> > On Wed, Nov 12, 2008 at 8:58 AM, Christian Reuschling <
> > christian.reuschling@gmail.com> wrote:
> >
> >> Hello Friends,
> >>
> >> In order to offer some simple 1:n matching, currently we create several,
> >> counted
> >> attributes and expand our queries that we search inside each attribute,
> >> e.g.:
> >>
> >> Query 'attName:myTerm'  => Query 'attName1:myTerm attName2:myTerm'
> >>
> >> This is not the fastest way, and sometimes not easy to handle - also we
> >> have to
> >> consider the 1:n attributes during indexing, and must remember the
> highest
> >> 'n'
> >> for query expansion. We get very big queries.
> >>
> >>
> >> Currently I have some other scenario in mind, but I'm not sure how I can
> >> achieve
> >> this. The idea is to write all n datasets into one attribute, with a
> >> specialized
> >> start and end delimiter term, e.g.:
> >>
> >> document entry for attName:
> >> "startDelimiter myterm1 myterm2 endDelimiter startDelimiter myterm3
> myterm4
> >> endDelimiter"
> >>
> >> When I look to this, it would go somehow into the direction of a
> >> PhraseQuery,
> >> where I can search e.g. for
> >>
> >> attName:"startDelimiter myterm1 myterm2 endDelimiter"
> >> but the query
> >> attName:"startDelimiter myterm1 myterm4 endDelimiter"
> >>
> >> would not match.
> >>
> >> The only thing that lacks now is that the queries
> >> attName:"startDelimiter myterm1 endDelimiter"
> >> attName:"startDelimiter myterm2 myterm1 endDelimiter"
> >>
> >> also should match - which of course isn't possible with the current
> >> PhraseQuery
> >> implementation.
> >>
> >> Best would be some construct like attName:"startDelimiter (myterm1
> myterm2)
> >> endDelimiter"
> >>
> >> Whereby the stuff inside the brackets would be a standard BooleanQuery,
> but
> >> only
> >> applied inside the range of the delimiters. Is this somehow possible, or
> do
> >> I
> >> have to write my own Query implementation - and what would be the best
> way
> >> in this case.
> >>
> >>
> >> Thanks in advance
> >>
> >> Christian Reuschling
> >>
> >>
> >
>
>

------=_Part_5740_11707651.1226504164649--

From java-user-return-37140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 15:48:32 2008
Return-Path: <java-user-return-37140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35507 invoked from network); 12 Nov 2008 15:48:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 15:48:32 -0000
Received: (qmail 2770 invoked by uid 500); 12 Nov 2008 15:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2735 invoked by uid 500); 12 Nov 2008 15:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2724 invoked by uid 99); 12 Nov 2008 15:48:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 07:48:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 15:47:14 +0000
Received: by yw-out-2324.google.com with SMTP id 3so182094ywj.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 07:47:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=MU3z2/eAOr5Jtb1YJ9uBpKRCCUDNwan2rWIVwxEruM8=;
        b=uPu+aJOYPLHP0t/AsdjBFm1xxL8A2K5rgW1gGcP5n5CSqdPIHb0Z5en8xqBGy5zO22
         I4a43KAhcuFeYqXE3L1OkL6xtliLmiT24ACW1SrKfIQa25gZa4C9mBd0OEM5QCyn08s8
         juqxtOZ5HufXXdWkuZT5jpOmIGZvYhNWiJ5Mg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=M0HudIwW6e15mvzNF9gbQGtAe4xY3coUiRfIzLh+OPSZdCXiUJrQLDx4BVV256oLQv
         f1MJH9k5RNN9S5M+ewiirD2z1YodFSUL94t8d5Wma9bddOpktQP5eoZ3FMhVI4E6ANk1
         aR+25So9fpTB6STum5QHO1cK68Vrktd8DMbuY=
Received: by 10.100.92.2 with SMTP id p2mr1251444anb.52.1226504867834;
        Wed, 12 Nov 2008 07:47:47 -0800 (PST)
Received: by 10.100.9.2 with HTTP; Wed, 12 Nov 2008 07:47:47 -0800 (PST)
Message-ID: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
Date: Wed, 12 Nov 2008 10:47:47 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene implementation/performance question
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6616_29031017.1226504867871"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6616_29031017.1226504867871
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I hope this isn't a dumb question or anything, I'm fairly new to Lucene so
I've been picking it up as I go pretty much.  Without going into too much
detail, I need to store pages of text, and for each word on each page, store
detailed information about it.  To do this, I have 2 indexes:

1) pages: this stores the full text of the page, and identifying information
about it
2) words: this stores a single word, along with the page it was on and is
stored in the order they appear on the page

When doing a search, not only do I need to return the page it was found on,
but also the details of the matching words.  Since I couldn't think of a
better way to do it, I first search the pages index and find any matching
pages.  Then I iterate the words on those pages to find where the match
occurred.  Obviously this is costly as far as execution time goes, but at
least it only has to get done for matching pages rather than every page.
Searches still take way longer than I'd like though, and the bottleneck is
almost entirely in the code to find the matches on the page.

One simple optimization I can think of is store the pages in smaller blocks
so that the scope of the iteration is made smaller.  This is not really
ideal, since I also need the ability to narrow down results based on other
words that can/can't appear on the same page which would mean storing 3 full
copies of every word on every page (one in each of the 3 resulting indexes).

I know this isn't a Java performance forum so I'll try to keep this Lucene
related, but has anyone done anything similar to this, or have any
comments/ideas on how to improve it?  I'm in the process of trying to speed
things up since I need to perform many searches often over very large sets
of pages.  Thanks!

- Greg

------=_Part_6616_29031017.1226504867871--

From java-user-return-37141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 16:18:03 2008
Return-Path: <java-user-return-37141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53052 invoked from network); 12 Nov 2008 16:18:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 16:18:02 -0000
Received: (qmail 57924 invoked by uid 500); 12 Nov 2008 16:17:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57895 invoked by uid 500); 12 Nov 2008 16:17:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57857 invoked by uid 99); 12 Nov 2008 16:17:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 08:17:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 216.239.58.189 as permitted sender)
Received: from [216.239.58.189] (HELO gv-out-0910.google.com) (216.239.58.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 16:16:35 +0000
Received: by gv-out-0910.google.com with SMTP id p33so154509gvf.23
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 08:17:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=rolVpC+OtrMpwKrst7x40n/9+GFCAtaDd2EizRKJ55c=;
        b=tfNZsjj6kqyR3juey7Hrsojl1Y20Mbw5XFl0fREaG7igwAOi9Ln9bvej5TubyLST57
         RnLnkHKzhwLcTdBWo3ek5ji3GBnS47v12TpG+oH8tAUPyt9UDGLFELByoj9HgrqDOvS8
         S2gdmf3Z5UT8JRACDnfuU7MylMTYnd3LhOX70=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=C9ZtwG3UZGI3gnIgoUhsA1MWgGjMw262QVHIvjRXBsMDNTAcGJl8i8xvKzxb+249DB
         ysuQ6gfBxwwL20rY4dKkuwzuIXtm+VL0xnZz4QuWLGodP1yu9itcoJxG2dmAPzuNAOSf
         9Ak2yV/fo79Gj+OGaRA0bTebYufPL22x34NCU=
Received: by 10.86.84.5 with SMTP id h5mr9296274fgb.59.1226506637593;
        Wed, 12 Nov 2008 08:17:17 -0800 (PST)
Received: by 10.86.86.4 with HTTP; Wed, 12 Nov 2008 08:17:17 -0800 (PST)
Message-ID: <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com>
Date: Wed, 12 Nov 2008 11:17:17 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5857_26049316.1226506637591"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5857_26049316.1226506637591
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If I may suggest, could you expand upon what you're trying to
accomplish? Why do you care about the detailed information
about each word? The reason I'm suggesting this is "the XY
problem". That is, people often ask for details about a specific
approach when what they really need is a different approach

There are TermFrequencies, TermPositions,
TermVectorOffsetInfo and a bunch of other stuff that I don't
know the details of that may work for you if we had
a better idea of what it is you're trying to accomplish...

Best
Erick

On Wed, Nov 12, 2008 at 10:47 AM, Greg Shackles <gshackles@gmail.com> wrote:

> I hope this isn't a dumb question or anything, I'm fairly new to Lucene so
> I've been picking it up as I go pretty much.  Without going into too much
> detail, I need to store pages of text, and for each word on each page,
> store
> detailed information about it.  To do this, I have 2 indexes:
>
> 1) pages: this stores the full text of the page, and identifying
> information
> about it
> 2) words: this stores a single word, along with the page it was on and is
> stored in the order they appear on the page
>
> When doing a search, not only do I need to return the page it was found on,
> but also the details of the matching words.  Since I couldn't think of a
> better way to do it, I first search the pages index and find any matching
> pages.  Then I iterate the words on those pages to find where the match
> occurred.  Obviously this is costly as far as execution time goes, but at
> least it only has to get done for matching pages rather than every page.
> Searches still take way longer than I'd like though, and the bottleneck is
> almost entirely in the code to find the matches on the page.
>
> One simple optimization I can think of is store the pages in smaller blocks
> so that the scope of the iteration is made smaller.  This is not really
> ideal, since I also need the ability to narrow down results based on other
> words that can/can't appear on the same page which would mean storing 3
> full
> copies of every word on every page (one in each of the 3 resulting
> indexes).
>
> I know this isn't a Java performance forum so I'll try to keep this Lucene
> related, but has anyone done anything similar to this, or have any
> comments/ideas on how to improve it?  I'm in the process of trying to speed
> things up since I need to perform many searches often over very large sets
> of pages.  Thanks!
>
> - Greg
>

------=_Part_5857_26049316.1226506637591--

From java-user-return-37142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 16:48:26 2008
Return-Path: <java-user-return-37142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74352 invoked from network); 12 Nov 2008 16:48:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 16:48:25 -0000
Received: (qmail 11521 invoked by uid 500); 12 Nov 2008 16:48:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11493 invoked by uid 500); 12 Nov 2008 16:48:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11474 invoked by uid 99); 12 Nov 2008 16:48:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 08:48:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 16:47:06 +0000
Received: by yx-out-2324.google.com with SMTP id 3so198166yxj.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 08:47:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=E14mPenbmZT41VsfDGEyFM+hirkhgBVB0yjQjjz/p3c=;
        b=axRm0atzDqO0YwKsJ2N3EUGUdjjZK5eBtg5zpIZlWeICuk+89CpobnUo5XNYXvGHGH
         jzLCiYo15gU20z+L1QZAybZ7wnW2MegUkdA7hOLJxUzSuWsZGLHpg3XxJt1n5MXBqWIv
         vMIsMcdlnPnINEHXbbNeTGj074kzvNWou1oGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=JbBIQ69jFnG4jGh2OmMXvBStL0K6vFT2CJFcglX2N6foYsSxSd4PBpwgg0e4qC39+D
         r2EcNBB/AI1vHjmC9Xs5ZlCUWkq1VdQF+6Iy2K4nND7zbaxtvcS8gEnr4ewn7xbTEA/4
         TRcxLMwePaxYKudYMdXsCGip2sxbptFCUNekA=
Received: by 10.100.41.9 with SMTP id o9mr4027725ano.39.1226508459391;
        Wed, 12 Nov 2008 08:47:39 -0800 (PST)
Received: by 10.100.9.2 with HTTP; Wed, 12 Nov 2008 08:47:39 -0800 (PST)
Message-ID: <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>
Date: Wed, 12 Nov 2008 11:47:39 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7246_7297115.1226508459421"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7246_7297115.1226508459421
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,

Thanks for the response, sorry that I was somewhat vague in the reasoning
for my implementation in the first post.  I should have mentioned that the
word details are not details of the Lucene document, but are attributes
about the word that I am storing.  Some examples are position on the actual
page, color, size, bold/italic/underlined, and most importantly, the text as
it appeared on the page.  The reason the last one matters is that things
like punctuation, spacing and capitalization can vary between the result and
the search term, and can affect how I need to process the results
afterwords.  I am certainly open to the idea of a new approach if it would
improve on things, I admit I am new to Lucene so if there are options I'm
unaware of I'd love to learn about them.

Just to sum it up with an example, let's say we have a page of text that
stores "This is a page of text."  We want to search for the text "of text",
which would span multiple words in the word index.  The final result would
need to contain "of" and "text", along with the details about each as
described before.  I hope this is more helpful!

- Greg

On Wed, Nov 12, 2008 at 11:17 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> If I may suggest, could you expand upon what you're trying to
> accomplish? Why do you care about the detailed information
> about each word? The reason I'm suggesting this is "the XY
> problem". That is, people often ask for details about a specific
> approach when what they really need is a different approach
>
> There are TermFrequencies, TermPositions,
> TermVectorOffsetInfo and a bunch of other stuff that I don't
> know the details of that may work for you if we had
> a better idea of what it is you're trying to accomplish...
>
> Best
> Erick
>
> On Wed, Nov 12, 2008 at 10:47 AM, Greg Shackles <gshackles@gmail.com>
> wrote:
>
> > I hope this isn't a dumb question or anything, I'm fairly new to Lucene
> so
> > I've been picking it up as I go pretty much.  Without going into too much
> > detail, I need to store pages of text, and for each word on each page,
> > store
> > detailed information about it.  To do this, I have 2 indexes:
> >
> > 1) pages: this stores the full text of the page, and identifying
> > information
> > about it
> > 2) words: this stores a single word, along with the page it was on and is
> > stored in the order they appear on the page
> >
> > When doing a search, not only do I need to return the page it was found
> on,
> > but also the details of the matching words.  Since I couldn't think of a
> > better way to do it, I first search the pages index and find any matching
> > pages.  Then I iterate the words on those pages to find where the match
> > occurred.  Obviously this is costly as far as execution time goes, but at
> > least it only has to get done for matching pages rather than every page.
> > Searches still take way longer than I'd like though, and the bottleneck
> is
> > almost entirely in the code to find the matches on the page.
> >
> > One simple optimization I can think of is store the pages in smaller
> blocks
> > so that the scope of the iteration is made smaller.  This is not really
> > ideal, since I also need the ability to narrow down results based on
> other
> > words that can/can't appear on the same page which would mean storing 3
> > full
> > copies of every word on every page (one in each of the 3 resulting
> > indexes).
> >
> > I know this isn't a Java performance forum so I'll try to keep this
> Lucene
> > related, but has anyone done anything similar to this, or have any
> > comments/ideas on how to improve it?  I'm in the process of trying to
> speed
> > things up since I need to perform many searches often over very large
> sets
> > of pages.  Thanks!
> >
> > - Greg
> >
>

------=_Part_7246_7297115.1226508459421--

From java-user-return-37143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 17:01:37 2008
Return-Path: <java-user-return-37143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79147 invoked from network); 12 Nov 2008 17:01:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 17:01:36 -0000
Received: (qmail 40116 invoked by uid 500); 12 Nov 2008 17:01:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39840 invoked by uid 500); 12 Nov 2008 17:01:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39829 invoked by uid 99); 12 Nov 2008 17:01:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 09:01:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 17:00:17 +0000
Received: by yx-out-2324.google.com with SMTP id 3so201707yxj.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 09:00:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=4JD56fBbo+zVffnS8RI+uwOaNuuL5eiH4cOMRtwUZJY=;
        b=P1bQxxrAyfc/pcbv7bc03O3D4TN0nsbGVfycrD2vEzidhnLf5TbxAkgCnfI/52QSDx
         PYiwGp7QebUpZcjBIuF/GuCEEpFIhgyzJMT+eui/6sroY8D67HOmQanMlVv/gfayT9/9
         U7gtAsyZtNAHcYM1xs8f9vGGXY9xjm+t5XW3I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=SNhP4xdAxzFhgJEOKWxQaNCQhigQpv7pbS+VtWjftU3IFnZ6Pd4faVhY5okB9kfblR
         hd0HcDxLJKlNhNVoi06pyx+2AGh4QmeutgbkRGnB+Hxf5Tpn2oOtOLy5guE+QuDdUQKQ
         pJmboKPxqIfNMUn3X8IGbnigvqoQ30l+7pRBc=
Received: by 10.90.94.3 with SMTP id r3mr8413690agb.54.1226509259363;
        Wed, 12 Nov 2008 09:00:59 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 1sm11690596agb.20.2008.11.12.09.00.58
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 09:00:58 -0800 (PST)
Message-ID: <491B0BCF.2000302@gmail.com>
Date: Wed, 12 Nov 2008 12:01:03 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>	 <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com> <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>
In-Reply-To: <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If your new to Lucene, this might be a little much (and maybe I am not 
fully understand the problem), but you might try:

Add the attributes to the words in a payload with a PayloadAnalyzer. Do 
searching as normal. Use the new PayloadSpanUtil class to get the 
payloads for the matching words. (Think of the PayloadSpanUtil as a 
highlighter - you give it a query, it gives you the payloads to the 
terms that match). The PayloadSpanUtil class is a bit experimental, but 
I'll fix anything you run into with it.

- Mark

Greg Shackles wrote:
> Hi Erick,
>
> Thanks for the response, sorry that I was somewhat vague in the reasoning
> for my implementation in the first post.  I should have mentioned that the
> word details are not details of the Lucene document, but are attributes
> about the word that I am storing.  Some examples are position on the actual
> page, color, size, bold/italic/underlined, and most importantly, the text as
> it appeared on the page.  The reason the last one matters is that things
> like punctuation, spacing and capitalization can vary between the result and
> the search term, and can affect how I need to process the results
> afterwords.  I am certainly open to the idea of a new approach if it would
> improve on things, I admit I am new to Lucene so if there are options I'm
> unaware of I'd love to learn about them.
>
> Just to sum it up with an example, let's say we have a page of text that
> stores "This is a page of text."  We want to search for the text "of text",
> which would span multiple words in the word index.  The final result would
> need to contain "of" and "text", along with the details about each as
> described before.  I hope this is more helpful!
>
> - Greg
>
> On Wed, Nov 12, 2008 at 11:17 AM, Erick Erickson <erickerickson@gmail.com>wrote:
>
>   
>> If I may suggest, could you expand upon what you're trying to
>> accomplish? Why do you care about the detailed information
>> about each word? The reason I'm suggesting this is "the XY
>> problem". That is, people often ask for details about a specific
>> approach when what they really need is a different approach
>>
>> There are TermFrequencies, TermPositions,
>> TermVectorOffsetInfo and a bunch of other stuff that I don't
>> know the details of that may work for you if we had
>> a better idea of what it is you're trying to accomplish...
>>
>> Best
>> Erick
>>
>> On Wed, Nov 12, 2008 at 10:47 AM, Greg Shackles <gshackles@gmail.com>
>> wrote:
>>
>>     
>>> I hope this isn't a dumb question or anything, I'm fairly new to Lucene
>>>       
>> so
>>     
>>> I've been picking it up as I go pretty much.  Without going into too much
>>> detail, I need to store pages of text, and for each word on each page,
>>> store
>>> detailed information about it.  To do this, I have 2 indexes:
>>>
>>> 1) pages: this stores the full text of the page, and identifying
>>> information
>>> about it
>>> 2) words: this stores a single word, along with the page it was on and is
>>> stored in the order they appear on the page
>>>
>>> When doing a search, not only do I need to return the page it was found
>>>       
>> on,
>>     
>>> but also the details of the matching words.  Since I couldn't think of a
>>> better way to do it, I first search the pages index and find any matching
>>> pages.  Then I iterate the words on those pages to find where the match
>>> occurred.  Obviously this is costly as far as execution time goes, but at
>>> least it only has to get done for matching pages rather than every page.
>>> Searches still take way longer than I'd like though, and the bottleneck
>>>       
>> is
>>     
>>> almost entirely in the code to find the matches on the page.
>>>
>>> One simple optimization I can think of is store the pages in smaller
>>>       
>> blocks
>>     
>>> so that the scope of the iteration is made smaller.  This is not really
>>> ideal, since I also need the ability to narrow down results based on
>>>       
>> other
>>     
>>> words that can/can't appear on the same page which would mean storing 3
>>> full
>>> copies of every word on every page (one in each of the 3 resulting
>>> indexes).
>>>
>>> I know this isn't a Java performance forum so I'll try to keep this
>>>       
>> Lucene
>>     
>>> related, but has anyone done anything similar to this, or have any
>>> comments/ideas on how to improve it?  I'm in the process of trying to
>>>       
>> speed
>>     
>>> things up since I need to perform many searches often over very large
>>>       
>> sets
>>     
>>> of pages.  Thanks!
>>>
>>> - Greg
>>>
>>>       
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 17:16:18 2008
Return-Path: <java-user-return-37144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83091 invoked from network); 12 Nov 2008 17:16:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 17:16:18 -0000
Received: (qmail 62296 invoked by uid 500); 12 Nov 2008 17:16:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62268 invoked by uid 500); 12 Nov 2008 17:16:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62257 invoked by uid 99); 12 Nov 2008 17:16:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 09:16:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 209.85.132.250 as permitted sender)
Received: from [209.85.132.250] (HELO an-out-0708.google.com) (209.85.132.250)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 17:14:59 +0000
Received: by an-out-0708.google.com with SMTP id b2so197496ana.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 09:15:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=7FnH1C0bJxRdlZJTE1bFZXvI3DbcsMf0rXaKy8ooOBI=;
        b=lv+eRp8N/kymA1HjhxI96SrKHbFPWkFt0hPbeRQAbz0ER/j9O2oJXF69qK7Tql75iL
         U7j+J4zbsfbCzQbEo2F/yEhiYfpa0LmT+4ZhV84ZlQ3cG0qVHcASmoxachwelAIhBlHd
         9fEKXsBdvabYaG8tdrnh+kjI3D+ZCgm+Ucs9c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pCMqJJjZHv+cxhtUCb2yeE8y8M8y0aaX03T+vwFXwcZ96fhX98NQ3jcX2X8trYmOeD
         aZSvaIL9oqcil3jpMB4Fx7xDS2EHZjK9Q9iUJvhJNjjkfNTsZ25re/myjpXdEdmRSbWV
         maonaACpCfYJFqBucw+XOl/1Y/1o6DByERb5c=
Received: by 10.100.37.20 with SMTP id k20mr4061496ank.5.1226510132409;
        Wed, 12 Nov 2008 09:15:32 -0800 (PST)
Received: by 10.100.9.2 with HTTP; Wed, 12 Nov 2008 09:15:32 -0800 (PST)
Message-ID: <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>
Date: Wed, 12 Nov 2008 12:15:32 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <491B0BCF.2000302@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7568_238726.1226510132405"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com>
	 <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>
	 <491B0BCF.2000302@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7568_238726.1226510132405
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hey Mark,

This sounds very interesting.  Is there any documentation or examples I
could see?  I did a quick search but didn't really find much.  It might just
be that I don't know how payloads work in Lucene, but I'm not sure how I
would see this actually doing what I need.  My reasoning is this...you'd
have an index that stores all the text for a particular page.  Would you be
able to attach payload information to individual words on that page?  In my
head it seems like that would be the job of a second index, which is exactly
why I added the word index.

Any details you can give would be great as I need to keep moving on this
project quickly.  I will also say that I'm somewhat wary of using an
experimental class since this is a really important project that really
won't be able to wait on a lot of development cycles to get the class fully
working.  That said, if it can give me serious speed improvements it's
definitely worth considering.

- Greg


On Wed, Nov 12, 2008 at 12:01 PM, Mark Miller <markrmiller@gmail.com> wrote:

> If your new to Lucene, this might be a little much (and maybe I am not
> fully understand the problem), but you might try:
>
> Add the attributes to the words in a payload with a PayloadAnalyzer. Do
> searching as normal. Use the new PayloadSpanUtil class to get the payloads
> for the matching words. (Think of the PayloadSpanUtil as a highlighter - you
> give it a query, it gives you the payloads to the terms that match). The
> PayloadSpanUtil class is a bit experimental, but I'll fix anything you run
> into with it.
>
> - Mark
>
>
> Greg Shackles wrote:
>
>> Hi Erick,
>>
>> Thanks for the response, sorry that I was somewhat vague in the reasoning
>> for my implementation in the first post.  I should have mentioned that the
>> word details are not details of the Lucene document, but are attributes
>> about the word that I am storing.  Some examples are position on the
>> actual
>> page, color, size, bold/italic/underlined, and most importantly, the text
>> as
>> it appeared on the page.  The reason the last one matters is that things
>> like punctuation, spacing and capitalization can vary between the result
>> and
>> the search term, and can affect how I need to process the results
>> afterwords.  I am certainly open to the idea of a new approach if it would
>> improve on things, I admit I am new to Lucene so if there are options I'm
>> unaware of I'd love to learn about them.
>>
>> Just to sum it up with an example, let's say we have a page of text that
>> stores "This is a page of text."  We want to search for the text "of
>> text",
>> which would span multiple words in the word index.  The final result would
>> need to contain "of" and "text", along with the details about each as
>> described before.  I hope this is more helpful!
>>
>> - Greg
>>
>> On Wed, Nov 12, 2008 at 11:17 AM, Erick Erickson <erickerickson@gmail.com
>> >wrote:
>>
>>
>>
>>> If I may suggest, could you expand upon what you're trying to
>>> accomplish? Why do you care about the detailed information
>>> about each word? The reason I'm suggesting this is "the XY
>>> problem". That is, people often ask for details about a specific
>>> approach when what they really need is a different approach
>>>
>>> There are TermFrequencies, TermPositions,
>>> TermVectorOffsetInfo and a bunch of other stuff that I don't
>>> know the details of that may work for you if we had
>>> a better idea of what it is you're trying to accomplish...
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Nov 12, 2008 at 10:47 AM, Greg Shackles <gshackles@gmail.com>
>>> wrote:
>>>
>>>
>>>
>>>> I hope this isn't a dumb question or anything, I'm fairly new to Lucene
>>>>
>>>>
>>> so
>>>
>>>
>>>> I've been picking it up as I go pretty much.  Without going into too
>>>> much
>>>> detail, I need to store pages of text, and for each word on each page,
>>>> store
>>>> detailed information about it.  To do this, I have 2 indexes:
>>>>
>>>> 1) pages: this stores the full text of the page, and identifying
>>>> information
>>>> about it
>>>> 2) words: this stores a single word, along with the page it was on and
>>>> is
>>>> stored in the order they appear on the page
>>>>
>>>> When doing a search, not only do I need to return the page it was found
>>>>
>>>>
>>> on,
>>>
>>>
>>>> but also the details of the matching words.  Since I couldn't think of a
>>>> better way to do it, I first search the pages index and find any
>>>> matching
>>>> pages.  Then I iterate the words on those pages to find where the match
>>>> occurred.  Obviously this is costly as far as execution time goes, but
>>>> at
>>>> least it only has to get done for matching pages rather than every page.
>>>> Searches still take way longer than I'd like though, and the bottleneck
>>>>
>>>>
>>> is
>>>
>>>
>>>> almost entirely in the code to find the matches on the page.
>>>>
>>>> One simple optimization I can think of is store the pages in smaller
>>>>
>>>>
>>> blocks
>>>
>>>
>>>> so that the scope of the iteration is made smaller.  This is not really
>>>> ideal, since I also need the ability to narrow down results based on
>>>>
>>>>
>>> other
>>>
>>>
>>>> words that can/can't appear on the same page which would mean storing 3
>>>> full
>>>> copies of every word on every page (one in each of the 3 resulting
>>>> indexes).
>>>>
>>>> I know this isn't a Java performance forum so I'll try to keep this
>>>>
>>>>
>>> Lucene
>>>
>>>
>>>> related, but has anyone done anything similar to this, or have any
>>>> comments/ideas on how to improve it?  I'm in the process of trying to
>>>>
>>>>
>>> speed
>>>
>>>
>>>> things up since I need to perform many searches often over very large
>>>>
>>>>
>>> sets
>>>
>>>
>>>> of pages.  Thanks!
>>>>
>>>> - Greg
>>>>
>>>>
>>>>
>>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7568_238726.1226510132405--

From java-user-return-37145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 17:53:11 2008
Return-Path: <java-user-return-37145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8842 invoked from network); 12 Nov 2008 17:53:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 17:53:11 -0000
Received: (qmail 44073 invoked by uid 500); 12 Nov 2008 17:53:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43819 invoked by uid 500); 12 Nov 2008 17:53:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43808 invoked by uid 99); 12 Nov 2008 17:53:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 09:53:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 17:51:48 +0000
Received: by yx-out-2324.google.com with SMTP id 3so215446yxj.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 09:52:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=FBS4IuiS4CMYfYeyl6TZpjjpkzXV+KhaXSUj0kFXkXY=;
        b=Vde5i6sjItlsd5nzGFctCvwIAsbYYIcMvMNuP+/iryfeuWTigFczXhSwl31eTuKBn2
         3/AIXpkY+T/1YjKL1bWbW5D5Wdb022kNDcTMA/DvtCMh1xtqtYgT666nUjbcoWbMmbbP
         Ww0qMC1mr3S5TEPB9/FP6VRBrzTkmhpBEV5v8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=iAlx/kAZBGXJ2k+CmWGthF17HoSQ0k39OoB3MMYRJYRWXvRcnhOwiULCsZB++BG+v9
         PUKVE6klBQ4w1DdIIHPjfgEf8kTuraH/BP13xJE/2+685ywxLnQxnCNBabFwCHPQ3n2f
         NgK5iixwvq0q4Lb2TY3WNj/KgxqCRiwZ4HjjY=
Received: by 10.90.86.9 with SMTP id j9mr8439600agb.46.1226512341407;
        Wed, 12 Nov 2008 09:52:21 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm11739496aga.13.2008.11.12.09.52.20
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 09:52:20 -0800 (PST)
Message-ID: <491B17D8.4090209@gmail.com>
Date: Wed, 12 Nov 2008 12:52:24 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>	 <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com>	 <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>	 <491B0BCF.2000302@gmail.com> <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>
In-Reply-To: <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Here is a great power point on payloads from Michael Busch: 
www.us.apachecon.com/us2007/downloads/AdvancedIndexing*Lucene*.ppt. 
Essentially, you can store metadata at each term position, so its an 
excellent place to store attributes of the term - they are very fast to 
load, efficient, etc.

You can check out the spans test classes for a small example using the 
PayloadSpanUtil...its actually fairly simple and short, and the main 
reason I consider it experimental is that it hasn't really been used too 
much to my knowledge (who knows though). If you have a problem, you'll 
know quickly and I'll fix quickly. It should work fine though. Overall, 
the approach wouldn't take that much code, so I don't think youd be out 
a lot of time.

The PayloadSpanUtil takes an IndexReader and a query and returns the 
payloads for the terms in the IndexReader that match the query. If you 
end up with multiple docs in the IndexReader, be sure to isolate the 
query down to the exact doc you want the payloads from (the Span scoring 
mode of the highlighter actually puts the doc in a fast MemoryIndex 
which only holds one doc, and uses an IndexReader from the MemoryIndex).

Greg Shackles wrote:
> Hey Mark,
>
> This sounds very interesting.  Is there any documentation or examples I
> could see?  I did a quick search but didn't really find much.  It might just
> be that I don't know how payloads work in Lucene, but I'm not sure how I
> would see this actually doing what I need.  My reasoning is this...you'd
> have an index that stores all the text for a particular page.  Would you be
> able to attach payload information to individual words on that page?  In my
> head it seems like that would be the job of a second index, which is exactly
> why I added the word index.
>
> Any details you can give would be great as I need to keep moving on this
> project quickly.  I will also say that I'm somewhat wary of using an
> experimental class since this is a really important project that really
> won't be able to wait on a lot of development cycles to get the class fully
> working.  That said, if it can give me serious speed improvements it's
> definitely worth considering.
>
> - Greg
>
>
> On Wed, Nov 12, 2008 at 12:01 PM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> If your new to Lucene, this might be a little much (and maybe I am not
>> fully understand the problem), but you might try:
>>
>> Add the attributes to the words in a payload with a PayloadAnalyzer. Do
>> searching as normal. Use the new PayloadSpanUtil class to get the payloads
>> for the matching words. (Think of the PayloadSpanUtil as a highlighter - you
>> give it a query, it gives you the payloads to the terms that match). The
>> PayloadSpanUtil class is a bit experimental, but I'll fix anything you run
>> into with it.
>>
>> - Mark
>>
>>
>> Greg Shackles wrote:
>>
>>     
>>> Hi Erick,
>>>
>>> Thanks for the response, sorry that I was somewhat vague in the reasoning
>>> for my implementation in the first post.  I should have mentioned that the
>>> word details are not details of the Lucene document, but are attributes
>>> about the word that I am storing.  Some examples are position on the
>>> actual
>>> page, color, size, bold/italic/underlined, and most importantly, the text
>>> as
>>> it appeared on the page.  The reason the last one matters is that things
>>> like punctuation, spacing and capitalization can vary between the result
>>> and
>>> the search term, and can affect how I need to process the results
>>> afterwords.  I am certainly open to the idea of a new approach if it would
>>> improve on things, I admit I am new to Lucene so if there are options I'm
>>> unaware of I'd love to learn about them.
>>>
>>> Just to sum it up with an example, let's say we have a page of text that
>>> stores "This is a page of text."  We want to search for the text "of
>>> text",
>>> which would span multiple words in the word index.  The final result would
>>> need to contain "of" and "text", along with the details about each as
>>> described before.  I hope this is more helpful!
>>>
>>> - Greg
>>>
>>> On Wed, Nov 12, 2008 at 11:17 AM, Erick Erickson <erickerickson@gmail.com
>>>       
>>>> wrote:
>>>>         
>>>
>>>       
>>>> If I may suggest, could you expand upon what you're trying to
>>>> accomplish? Why do you care about the detailed information
>>>> about each word? The reason I'm suggesting this is "the XY
>>>> problem". That is, people often ask for details about a specific
>>>> approach when what they really need is a different approach
>>>>
>>>> There are TermFrequencies, TermPositions,
>>>> TermVectorOffsetInfo and a bunch of other stuff that I don't
>>>> know the details of that may work for you if we had
>>>> a better idea of what it is you're trying to accomplish...
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Wed, Nov 12, 2008 at 10:47 AM, Greg Shackles <gshackles@gmail.com>
>>>> wrote:
>>>>
>>>>
>>>>
>>>>         
>>>>> I hope this isn't a dumb question or anything, I'm fairly new to Lucene
>>>>>
>>>>>
>>>>>           
>>>> so
>>>>
>>>>
>>>>         
>>>>> I've been picking it up as I go pretty much.  Without going into too
>>>>> much
>>>>> detail, I need to store pages of text, and for each word on each page,
>>>>> store
>>>>> detailed information about it.  To do this, I have 2 indexes:
>>>>>
>>>>> 1) pages: this stores the full text of the page, and identifying
>>>>> information
>>>>> about it
>>>>> 2) words: this stores a single word, along with the page it was on and
>>>>> is
>>>>> stored in the order they appear on the page
>>>>>
>>>>> When doing a search, not only do I need to return the page it was found
>>>>>
>>>>>
>>>>>           
>>>> on,
>>>>
>>>>
>>>>         
>>>>> but also the details of the matching words.  Since I couldn't think of a
>>>>> better way to do it, I first search the pages index and find any
>>>>> matching
>>>>> pages.  Then I iterate the words on those pages to find where the match
>>>>> occurred.  Obviously this is costly as far as execution time goes, but
>>>>> at
>>>>> least it only has to get done for matching pages rather than every page.
>>>>> Searches still take way longer than I'd like though, and the bottleneck
>>>>>
>>>>>
>>>>>           
>>>> is
>>>>
>>>>
>>>>         
>>>>> almost entirely in the code to find the matches on the page.
>>>>>
>>>>> One simple optimization I can think of is store the pages in smaller
>>>>>
>>>>>
>>>>>           
>>>> blocks
>>>>
>>>>
>>>>         
>>>>> so that the scope of the iteration is made smaller.  This is not really
>>>>> ideal, since I also need the ability to narrow down results based on
>>>>>
>>>>>
>>>>>           
>>>> other
>>>>
>>>>
>>>>         
>>>>> words that can/can't appear on the same page which would mean storing 3
>>>>> full
>>>>> copies of every word on every page (one in each of the 3 resulting
>>>>> indexes).
>>>>>
>>>>> I know this isn't a Java performance forum so I'll try to keep this
>>>>>
>>>>>
>>>>>           
>>>> Lucene
>>>>
>>>>
>>>>         
>>>>> related, but has anyone done anything similar to this, or have any
>>>>> comments/ideas on how to improve it?  I'm in the process of trying to
>>>>>
>>>>>
>>>>>           
>>>> speed
>>>>
>>>>
>>>>         
>>>>> things up since I need to perform many searches often over very large
>>>>>
>>>>>
>>>>>           
>>>> sets
>>>>
>>>>
>>>>         
>>>>> of pages.  Thanks!
>>>>>
>>>>> - Greg
>>>>>
>>>>>
>>>>>
>>>>>           
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 19:06:18 2008
Return-Path: <java-user-return-37146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44759 invoked from network); 12 Nov 2008 19:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 19:06:18 -0000
Received: (qmail 49739 invoked by uid 500); 12 Nov 2008 19:06:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49576 invoked by uid 500); 12 Nov 2008 19:06:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49565 invoked by uid 99); 12 Nov 2008 19:06:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 11:06:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sven.carlberg@gmail.com designates 209.85.162.177 as permitted sender)
Received: from [209.85.162.177] (HELO el-out-1112.google.com) (209.85.162.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 19:04:57 +0000
Received: by el-out-1112.google.com with SMTP id p32so316956elf.14
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 11:05:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=vwi6TNW81RYfvZdfRnyatnjQ1bCF2p8bdvbvqlrWWiU=;
        b=k1/whce4gdJ4uNmHYFwpv9Kzq8nnOe7IZCuCu2Ely7ICL9icVDnJcKY+wuz6tA9zdD
         0oznqV6xnqY3WrfAj4bsJtqE0yLXLhpqswPVfc/34lnFCCbFUbLP8ed40bK4ILOtm0s1
         0gitt0ty9NoldaOe6pg8x8DKld3VuwBnO/7mQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=AUsZU+cJ8jdxLAH6eVrfN2kuUt4n2RFuUJr0jPHo+Nkp//gOuSqAFQQrxNstjC0jXU
         bNqsHnMZB/gl+ESnm4oQQjCq7WagF/IsBkPohQGMky3uDzwR+KFfikGZMk+XaRq+bZEy
         ytyJLoRT4+P4n2Nrkx3UJtzKDG8FuDGGcJRrs=
Received: by 10.151.43.19 with SMTP id v19mr14578882ybj.19.1226516729906;
        Wed, 12 Nov 2008 11:05:29 -0800 (PST)
Received: from ?192.168.1.210? (pool-96-231-23-56.washdc.fios.verizon.net [96.231.23.56])
        by mx.google.com with ESMTPS id m71sm10989989rnd.3.2008.11.12.11.05.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 11:05:28 -0800 (PST)
Message-ID: <491B2994.3060201@gmail.com>
Date: Wed, 12 Nov 2008 14:08:04 -0500
From: Sven <sven.carlberg@gmail.com>
User-Agent: Thunderbird 1.5.0.13 (X11/20070824)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: How to get the terms within 5 words of another term?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone,

I have a term "foo" and I want to count all the occurrences of all the 
terms that are within 5 words of "foo" in all the documents which 
contain "foo".  For simplicity sake, this is only for a single field.  
So if I have 3 documents (each with a single field) that look like this:

Once upon a time, foo lived far, far away in a magical kingdom.

"The Life and Time of the Hero Called Foo" is, by far, the best novel 
about spam I have ever read.

I theorize that over time, foo will gradually move far away from bar.

I would like to generate a list of terms and hits based on their 
proximity to "foo" in all the documents.  So I'll end up with something 
like:

far : 4
time : 3
away : 2

Any help would be greatly appreciated.

Thanks much!
-Sven


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 19:07:33 2008
Return-Path: <java-user-return-37147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45290 invoked from network); 12 Nov 2008 19:07:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 19:07:33 -0000
Received: (qmail 55733 invoked by uid 500); 12 Nov 2008 19:07:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55705 invoked by uid 500); 12 Nov 2008 19:07:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55680 invoked by uid 99); 12 Nov 2008 19:07:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 11:07:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 19:06:06 +0000
Received: by yw-out-2324.google.com with SMTP id 3so233434ywj.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 11:06:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=nR2pogkVPM9vdiAxegj0tHqkPHOeSDjHZhW7k5yqOrc=;
        b=XLQt81Lrbik0G+6nP3SECUOBBe71eJjp2iTx6Xscw8ag661zYQoeKpNrYZrotXLoOP
         RaQDie+6AfLWIH2eGZEyq0hfeIy+q1wNeT25yhi1YwA5IyIynno3RTCkpJzltAyF7giX
         SLwTxmHkTfwQyvDJfH/8dc/rkvf3YTvLzqUnE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Q174EPAdQQ8CZcy62nMfuD5KHXP2qR+CTUczNH5ueuvkXCUQLK599VfYJnC2614LA9
         3kPkv7LCLCH9L5lXNnorfdiP4lEVlAPDEE4wXnoTf07W+uI2RciKPLWhco2KVJQc4uzA
         sOpEAUxraomDzZfOEJSGABVK6fPcYN4Cl9hcA=
Received: by 10.100.107.17 with SMTP id f17mr4125972anc.51.1226516809327;
        Wed, 12 Nov 2008 11:06:49 -0800 (PST)
Received: by 10.100.9.2 with HTTP; Wed, 12 Nov 2008 11:06:49 -0800 (PST)
Message-ID: <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
Date: Wed, 12 Nov 2008 14:06:49 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <491B17D8.4090209@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9094_26043769.1226516809312"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com>
	 <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>
	 <491B0BCF.2000302@gmail.com>
	 <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>
	 <491B17D8.4090209@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9094_26043769.1226516809312
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks!  This all actually sounds promising, I just want to make sure I'm
thinking about this correctly.  Does this make sense?

Indexing process:

1) Get list of all words for a page and their attributes, stored in some
sort of data structure
2) Concatenate the text from those words (space separated) into a string
that represents the entire page
3) When adding the page document to the index, run it through a custom
analyzer that attaches the payloads to the tokens
  * this would have to follow along in the word list from #1 to get the
payload information for each token
  * would also have to tokenize the word we are storing to see how many
Lucene tokens it would translate to (to make sure the right payloads go with
the right tokens)

I haven't totally analyzed the searching process yet since I want to get my
head around the storage part first, but I imagine that would be the easier
part anyway.  Does this approach sound reasonable?

My other concern is your comment about isolating results.  If I'm reading it
correctly, it means that I'd have to do the search in multiple passes, one
to get the individual docs containing the matches, and then one query for
each of those to get the payloads within them?

Thanks again for your help on this one.

- Greg


On Wed, Nov 12, 2008 at 12:52 PM, Mark Miller <markrmiller@gmail.com> wrote:

> Here is a great power point on payloads from Michael Busch:
> www.us.apachecon.com/us2007/downloads/AdvancedIndexing*Lucene*.ppt.
> Essentially, you can store metadata at each term position, so its an
> excellent place to store attributes of the term - they are very fast to
> load, efficient, etc.
>
> You can check out the spans test classes for a small example using the
> PayloadSpanUtil...its actually fairly simple and short, and the main reason
> I consider it experimental is that it hasn't really been used too much to my
> knowledge (who knows though). If you have a problem, you'll know quickly and
> I'll fix quickly. It should work fine though. Overall, the approach wouldn't
> take that much code, so I don't think youd be out a lot of time.
>
> The PayloadSpanUtil takes an IndexReader and a query and returns the
> payloads for the terms in the IndexReader that match the query. If you end
> up with multiple docs in the IndexReader, be sure to isolate the query down
> to the exact doc you want the payloads from (the Span scoring mode of the
> highlighter actually puts the doc in a fast MemoryIndex which only holds one
> doc, and uses an IndexReader from the MemoryIndex).
>
>
> Greg Shackles wrote:
>
>> Hey Mark,
>>
>> This sounds very interesting.  Is there any documentation or examples I
>> could see?  I did a quick search but didn't really find much.  It might
>> just
>> be that I don't know how payloads work in Lucene, but I'm not sure how I
>> would see this actually doing what I need.  My reasoning is this...you'd
>> have an index that stores all the text for a particular page.  Would you
>> be
>> able to attach payload information to individual words on that page?  In
>> my
>> head it seems like that would be the job of a second index, which is
>> exactly
>> why I added the word index.
>>
>> Any details you can give would be great as I need to keep moving on this
>> project quickly.  I will also say that I'm somewhat wary of using an
>> experimental class since this is a really important project that really
>> won't be able to wait on a lot of development cycles to get the class
>> fully
>> working.  That said, if it can give me serious speed improvements it's
>> definitely worth considering.
>>
>> - Greg
>>
>>
>> On Wed, Nov 12, 2008 at 12:01 PM, Mark Miller <markrmiller@gmail.com>
>> wrote:
>>
>>
>>
>>> If your new to Lucene, this might be a little much (and maybe I am not
>>> fully understand the problem), but you might try:
>>>
>>> Add the attributes to the words in a payload with a PayloadAnalyzer. Do
>>> searching as normal. Use the new PayloadSpanUtil class to get the
>>> payloads
>>> for the matching words. (Think of the PayloadSpanUtil as a highlighter -
>>> you
>>> give it a query, it gives you the payloads to the terms that match). The
>>> PayloadSpanUtil class is a bit experimental, but I'll fix anything you
>>> run
>>> into with it.
>>>
>>> - Mark
>>>
>>>
>>> Greg Shackles wrote:
>>>
>>>
>>>
>>>> Hi Erick,
>>>>
>>>> Thanks for the response, sorry that I was somewhat vague in the
>>>> reasoning
>>>> for my implementation in the first post.  I should have mentioned that
>>>> the
>>>> word details are not details of the Lucene document, but are attributes
>>>> about the word that I am storing.  Some examples are position on the
>>>> actual
>>>> page, color, size, bold/italic/underlined, and most importantly, the
>>>> text
>>>> as
>>>> it appeared on the page.  The reason the last one matters is that things
>>>> like punctuation, spacing and capitalization can vary between the result
>>>> and
>>>> the search term, and can affect how I need to process the results
>>>> afterwords.  I am certainly open to the idea of a new approach if it
>>>> would
>>>> improve on things, I admit I am new to Lucene so if there are options
>>>> I'm
>>>> unaware of I'd love to learn about them.
>>>>
>>>> Just to sum it up with an example, let's say we have a page of text that
>>>> stores "This is a page of text."  We want to search for the text "of
>>>> text",
>>>> which would span multiple words in the word index.  The final result
>>>> would
>>>> need to contain "of" and "text", along with the details about each as
>>>> described before.  I hope this is more helpful!
>>>>
>>>> - Greg
>>>>
>>>> On Wed, Nov 12, 2008 at 11:17 AM, Erick Erickson <
>>>> erickerickson@gmail.com
>>>>
>>>>
>>>>> wrote:
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>>> If I may suggest, could you expand upon what you're trying to
>>>>> accomplish? Why do you care about the detailed information
>>>>> about each word? The reason I'm suggesting this is "the XY
>>>>> problem". That is, people often ask for details about a specific
>>>>> approach when what they really need is a different approach
>>>>>
>>>>> There are TermFrequencies, TermPositions,
>>>>> TermVectorOffsetInfo and a bunch of other stuff that I don't
>>>>> know the details of that may work for you if we had
>>>>> a better idea of what it is you're trying to accomplish...
>>>>>
>>>>> Best
>>>>> Erick
>>>>>
>>>>> On Wed, Nov 12, 2008 at 10:47 AM, Greg Shackles <gshackles@gmail.com>
>>>>> wrote:
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> I hope this isn't a dumb question or anything, I'm fairly new to
>>>>>> Lucene
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> so
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> I've been picking it up as I go pretty much.  Without going into too
>>>>>> much
>>>>>> detail, I need to store pages of text, and for each word on each page,
>>>>>> store
>>>>>> detailed information about it.  To do this, I have 2 indexes:
>>>>>>
>>>>>> 1) pages: this stores the full text of the page, and identifying
>>>>>> information
>>>>>> about it
>>>>>> 2) words: this stores a single word, along with the page it was on and
>>>>>> is
>>>>>> stored in the order they appear on the page
>>>>>>
>>>>>> When doing a search, not only do I need to return the page it was
>>>>>> found
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> on,
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> but also the details of the matching words.  Since I couldn't think of
>>>>>> a
>>>>>> better way to do it, I first search the pages index and find any
>>>>>> matching
>>>>>> pages.  Then I iterate the words on those pages to find where the
>>>>>> match
>>>>>> occurred.  Obviously this is costly as far as execution time goes, but
>>>>>> at
>>>>>> least it only has to get done for matching pages rather than every
>>>>>> page.
>>>>>> Searches still take way longer than I'd like though, and the
>>>>>> bottleneck
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> is
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> almost entirely in the code to find the matches on the page.
>>>>>>
>>>>>> One simple optimization I can think of is store the pages in smaller
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> blocks
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> so that the scope of the iteration is made smaller.  This is not
>>>>>> really
>>>>>> ideal, since I also need the ability to narrow down results based on
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> other
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> words that can/can't appear on the same page which would mean storing
>>>>>> 3
>>>>>> full
>>>>>> copies of every word on every page (one in each of the 3 resulting
>>>>>> indexes).
>>>>>>
>>>>>> I know this isn't a Java performance forum so I'll try to keep this
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> Lucene
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> related, but has anyone done anything similar to this, or have any
>>>>>> comments/ideas on how to improve it?  I'm in the process of trying to
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> speed
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> things up since I need to perform many searches often over very large
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> sets
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> of pages.  Thanks!
>>>>>>
>>>>>> - Greg
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9094_26043769.1226516809312--

From java-user-return-37148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 19:23:51 2008
Return-Path: <java-user-return-37148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50295 invoked from network); 12 Nov 2008 19:23:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 19:23:50 -0000
Received: (qmail 91430 invoked by uid 500); 12 Nov 2008 19:23:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91407 invoked by uid 500); 12 Nov 2008 19:23:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91395 invoked by uid 99); 12 Nov 2008 19:23:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 11:23:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.162.183 as permitted sender)
Received: from [209.85.162.183] (HELO el-out-1112.google.com) (209.85.162.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 19:22:27 +0000
Received: by el-out-1112.google.com with SMTP id p32so322646elf.14
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 11:23:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=n1A09C5sKuRboJFbBP1vbysED+ozRjXuRQv4bLnbmCs=;
        b=Vh8T5dez/BNACBHalIwg88gbfP2nc57xCAsBGoswML4vi301PsrOWVJV+sD+qCB2cJ
         Oo2mwh1LL7t6LkUA4Tsp05BCQouWGmNOF9xQTnR5ahntiHMQEdilV9OzMhASBVN/C8PR
         TAuB2/vtZ4NWhz2PPqSQyOpG8BXQrYlUKVQD0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=WOsQiNqZifeEy1asg7cFLeDP4JGEAIWvBFgHlyOSTap/6Aae2iriqGQyAOjkyCRv3d
         BZQHGIbR2BON7snXxcQFQ1AENqG8Mvr5VweR1TCjFdeBtHKF6np8ti8EVhaoK2zvGAp9
         O/A1UDsISvPKdqzQAHDuWyusUKQYnPHnXiT5s=
Received: by 10.90.28.12 with SMTP id b12mr8496036agb.115.1226517780263;
        Wed, 12 Nov 2008 11:23:00 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm11859366agc.14.2008.11.12.11.22.55
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 11:22:55 -0800 (PST)
Message-ID: <491B2D13.8090006@gmail.com>
Date: Wed, 12 Nov 2008 14:22:59 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>	 <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com>	 <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>	 <491B0BCF.2000302@gmail.com>	 <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>	 <491B17D8.4090209@gmail.com> <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
In-Reply-To: <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Greg Shackles wrote:
> Thanks!  This all actually sounds promising, I just want to make sure I'm
> thinking about this correctly.  Does this make sense?
>
> Indexing process:
>
> 1) Get list of all words for a page and their attributes, stored in some
> sort of data structure
> 2) Concatenate the text from those words (space separated) into a string
> that represents the entire page
> 3) When adding the page document to the index, run it through a custom
> analyzer that attaches the payloads to the tokens
>   * this would have to follow along in the word list from #1 to get the
> payload information for each token
>   * would also have to tokenize the word we are storing to see how many
> Lucene tokens it would translate to (to make sure the right payloads go with
> the right tokens)
>   
Right, sounds like you have it spot on. That second * from 3 looks like 
a possible tricky part.
> I haven't totally analyzed the searching process yet since I want to get my
> head around the storage part first, but I imagine that would be the easier
> part anyway.  Does this approach sound reasonable?
>   
Sounds good.
> My other concern is your comment about isolating results.  If I'm reading it
> correctly, it means that I'd have to do the search in multiple passes, one
> to get the individual docs containing the matches, and then one query for
> each of those to get the payloads within them?
>   
Right...you'd do it essentially how Highlighting works...you do the 
search to get the docs of interest, and then redo the search somewhat to 
get the highlights/payloads for an individual doc at a time. You are 
redoing some work, but if you think about, getting that info for every 
match (there could be tons) doesn't make much since when someone might 
just look at the top couple results, or say 10 at a time. Depends on 
your usecase if its feasible or not though. Most find it efficient 
enough to do highlighting with, so I'm assuming it should be good enough 
here.
> Thanks again for your help on this one.
>
> - Greg
>
>
> On Wed, Nov 12, 2008 at 12:52 PM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> Here is a great power point on payloads from Michael Busch:
>> www.us.apachecon.com/us2007/downloads/AdvancedIndexing*Lucene*.ppt.
>> Essentially, you can store metadata at each term position, so its an
>> excellent place to store attributes of the term - they are very fast to
>> load, efficient, etc.
>>
>> You can check out the spans test classes for a small example using the
>> PayloadSpanUtil...its actually fairly simple and short, and the main reason
>> I consider it experimental is that it hasn't really been used too much to my
>> knowledge (who knows though). If you have a problem, you'll know quickly and
>> I'll fix quickly. It should work fine though. Overall, the approach wouldn't
>> take that much code, so I don't think youd be out a lot of time.
>>
>> The PayloadSpanUtil takes an IndexReader and a query and returns the
>> payloads for the terms in the IndexReader that match the query. If you end
>> up with multiple docs in the IndexReader, be sure to isolate the query down
>> to the exact doc you want the payloads from (the Span scoring mode of the
>> highlighter actually puts the doc in a fast MemoryIndex which only holds one
>> doc, and uses an IndexReader from the MemoryIndex).
>>
>>
>> Greg Shackles wrote:
>>
>>     
>>> Hey Mark,
>>>
>>> This sounds very interesting.  Is there any documentation or examples I
>>> could see?  I did a quick search but didn't really find much.  It might
>>> just
>>> be that I don't know how payloads work in Lucene, but I'm not sure how I
>>> would see this actually doing what I need.  My reasoning is this...you'd
>>> have an index that stores all the text for a particular page.  Would you
>>> be
>>> able to attach payload information to individual words on that page?  In
>>> my
>>> head it seems like that would be the job of a second index, which is
>>> exactly
>>> why I added the word index.
>>>
>>> Any details you can give would be great as I need to keep moving on this
>>> project quickly.  I will also say that I'm somewhat wary of using an
>>> experimental class since this is a really important project that really
>>> won't be able to wait on a lot of development cycles to get the class
>>> fully
>>> working.  That said, if it can give me serious speed improvements it's
>>> definitely worth considering.
>>>
>>> - Greg
>>>
>>>
>>> On Wed, Nov 12, 2008 at 12:01 PM, Mark Miller <markrmiller@gmail.com>
>>> wrote:
>>>
>>>
>>>
>>>       
>>>> If your new to Lucene, this might be a little much (and maybe I am not
>>>> fully understand the problem), but you might try:
>>>>
>>>> Add the attributes to the words in a payload with a PayloadAnalyzer. Do
>>>> searching as normal. Use the new PayloadSpanUtil class to get the
>>>> payloads
>>>> for the matching words. (Think of the PayloadSpanUtil as a highlighter -
>>>> you
>>>> give it a query, it gives you the payloads to the terms that match). The
>>>> PayloadSpanUtil class is a bit experimental, but I'll fix anything you
>>>> run
>>>> into with it.
>>>>
>>>> - Mark
>>>>
>>>>
>>>> Greg Shackles wrote:
>>>>
>>>>
>>>>
>>>>         
>>>>> Hi Erick,
>>>>>
>>>>> Thanks for the response, sorry that I was somewhat vague in the
>>>>> reasoning
>>>>> for my implementation in the first post.  I should have mentioned that
>>>>> the
>>>>> word details are not details of the Lucene document, but are attributes
>>>>> about the word that I am storing.  Some examples are position on the
>>>>> actual
>>>>> page, color, size, bold/italic/underlined, and most importantly, the
>>>>> text
>>>>> as
>>>>> it appeared on the page.  The reason the last one matters is that things
>>>>> like punctuation, spacing and capitalization can vary between the result
>>>>> and
>>>>> the search term, and can affect how I need to process the results
>>>>> afterwords.  I am certainly open to the idea of a new approach if it
>>>>> would
>>>>> improve on things, I admit I am new to Lucene so if there are options
>>>>> I'm
>>>>> unaware of I'd love to learn about them.
>>>>>
>>>>> Just to sum it up with an example, let's say we have a page of text that
>>>>> stores "This is a page of text."  We want to search for the text "of
>>>>> text",
>>>>> which would span multiple words in the word index.  The final result
>>>>> would
>>>>> need to contain "of" and "text", along with the details about each as
>>>>> described before.  I hope this is more helpful!
>>>>>
>>>>> - Greg
>>>>>
>>>>> On Wed, Nov 12, 2008 at 11:17 AM, Erick Erickson <
>>>>> erickerickson@gmail.com
>>>>>
>>>>>
>>>>>           
>>>>>> wrote:
>>>>>>
>>>>>>
>>>>>>             
>>>>>
>>>>>           
>>>>>> If I may suggest, could you expand upon what you're trying to
>>>>>> accomplish? Why do you care about the detailed information
>>>>>> about each word? The reason I'm suggesting this is "the XY
>>>>>> problem". That is, people often ask for details about a specific
>>>>>> approach when what they really need is a different approach
>>>>>>
>>>>>> There are TermFrequencies, TermPositions,
>>>>>> TermVectorOffsetInfo and a bunch of other stuff that I don't
>>>>>> know the details of that may work for you if we had
>>>>>> a better idea of what it is you're trying to accomplish...
>>>>>>
>>>>>> Best
>>>>>> Erick
>>>>>>
>>>>>> On Wed, Nov 12, 2008 at 10:47 AM, Greg Shackles <gshackles@gmail.com>
>>>>>> wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> I hope this isn't a dumb question or anything, I'm fairly new to
>>>>>>> Lucene
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> so
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> I've been picking it up as I go pretty much.  Without going into too
>>>>>>> much
>>>>>>> detail, I need to store pages of text, and for each word on each page,
>>>>>>> store
>>>>>>> detailed information about it.  To do this, I have 2 indexes:
>>>>>>>
>>>>>>> 1) pages: this stores the full text of the page, and identifying
>>>>>>> information
>>>>>>> about it
>>>>>>> 2) words: this stores a single word, along with the page it was on and
>>>>>>> is
>>>>>>> stored in the order they appear on the page
>>>>>>>
>>>>>>> When doing a search, not only do I need to return the page it was
>>>>>>> found
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> on,
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> but also the details of the matching words.  Since I couldn't think of
>>>>>>> a
>>>>>>> better way to do it, I first search the pages index and find any
>>>>>>> matching
>>>>>>> pages.  Then I iterate the words on those pages to find where the
>>>>>>> match
>>>>>>> occurred.  Obviously this is costly as far as execution time goes, but
>>>>>>> at
>>>>>>> least it only has to get done for matching pages rather than every
>>>>>>> page.
>>>>>>> Searches still take way longer than I'd like though, and the
>>>>>>> bottleneck
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> is
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> almost entirely in the code to find the matches on the page.
>>>>>>>
>>>>>>> One simple optimization I can think of is store the pages in smaller
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> blocks
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> so that the scope of the iteration is made smaller.  This is not
>>>>>>> really
>>>>>>> ideal, since I also need the ability to narrow down results based on
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> other
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> words that can/can't appear on the same page which would mean storing
>>>>>>> 3
>>>>>>> full
>>>>>>> copies of every word on every page (one in each of the 3 resulting
>>>>>>> indexes).
>>>>>>>
>>>>>>> I know this isn't a Java performance forum so I'll try to keep this
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> Lucene
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> related, but has anyone done anything similar to this, or have any
>>>>>>> comments/ideas on how to improve it?  I'm in the process of trying to
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> speed
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> things up since I need to perform many searches often over very large
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>>>> sets
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>             
>>>>>>> of pages.  Thanks!
>>>>>>>
>>>>>>> - Greg
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>               
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>         
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 19:24:13 2008
Return-Path: <java-user-return-37149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50672 invoked from network); 12 Nov 2008 19:24:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 19:24:12 -0000
Received: (qmail 93893 invoked by uid 500); 12 Nov 2008 19:24:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93862 invoked by uid 500); 12 Nov 2008 19:24:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93851 invoked by uid 99); 12 Nov 2008 19:24:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 11:24:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sven.carlberg@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 19:22:53 +0000
Received: by yw-out-2324.google.com with SMTP id 3so237395ywj.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 11:23:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=vwi6TNW81RYfvZdfRnyatnjQ1bCF2p8bdvbvqlrWWiU=;
        b=MzVMMY1BfUxgxGdHNRR38DnR0PLy9Y6z1KqcKWBCsSsTDsZVE9kc3D+tMFKGCYkWyX
         2LUw1k1UKSboxCm0/ZPhMNyLcbUisvjetnU+IPlCx5SKlemCz7Gl0XqOkQpq4hXL2gT2
         Y8u/uuEdSN58uepLFUFa3vnegEdipRpaYLjY4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=flWuPqLMVKk7Mv10fJ7kWWVisPCEsiXQkOm444U1LbtG5CYt35NmURj/er3cV26hMc
         EftNDHlfZ4zz9Z0lLS9MfB41rXYmVJSZcQtV2Gk7QFJ/EjkrkOblEtnEk2l85BaNO5GM
         jcQ84h2S2+TR5+euCcfNfcw/05Q+0Xd3YVtA4=
Received: by 10.151.112.10 with SMTP id p10mr7398382ybm.17.1226517816776;
        Wed, 12 Nov 2008 11:23:36 -0800 (PST)
Received: from ?192.168.1.210? (pool-96-231-23-56.washdc.fios.verizon.net [96.231.23.56])
        by mx.google.com with ESMTPS id m56sm11043999rnd.1.2008.11.12.11.23.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 11:23:35 -0800 (PST)
Message-ID: <491B2DD2.3030602@gmail.com>
Date: Wed, 12 Nov 2008 14:26:10 -0500
From: Sven <sven.carlberg@gmail.com>
User-Agent: Thunderbird 1.5.0.13 (X11/20070824)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: How to get the terms within 5 words of another term?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everyone,

I have a term "foo" and I want to count all the occurrences of all the
terms that are within 5 words of "foo" in all the documents which
contain "foo".  For simplicity sake, this is only for a single field.
So if I have 3 documents (each with a single field) that look like this:

Once upon a time, foo lived far, far away in a magical kingdom.

"The Life and Time of the Hero Called Foo" is, by far, the best novel
about spam I have ever read.

I theorize that over time, foo will gradually move far away from bar.

I would like to generate a list of terms and hits based on their
proximity to "foo" in all the documents.  So I'll end up with something
like:

far : 4
time : 3
away : 2

Any help would be greatly appreciated.

Thanks much!
-Sven



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 19:31:13 2008
Return-Path: <java-user-return-37150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53298 invoked from network); 12 Nov 2008 19:31:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 19:31:12 -0000
Received: (qmail 8550 invoked by uid 500); 12 Nov 2008 19:31:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8521 invoked by uid 500); 12 Nov 2008 19:31:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8510 invoked by uid 99); 12 Nov 2008 19:31:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 11:31:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.76.150.252] (HELO smtp-01.piensasolutions.com) (217.76.150.252)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 19:29:53 +0000
Received: from [192.168.0.131] (cm123157.red83-165.mundo-r.com [83.165.123.157])
	by smtp-01.piensasolutions.com (Postfix) with ESMTP id C8D72C1900
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 20:30:34 +0100 (CET)
Subject: About counting term hits
From: "Fco. Mario Barcala" =?ISO-8859-1?Q?Rodr=EDguez?= <lbarcala@freeresearch.org>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Wed, 12 Nov 2008 20:30:23 +0100
Message-Id: <1226518223.11268.6.camel@tambre>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello:

I am new to LUCENE and I am testing some issues about it. I can retrieve
the number of documents which satisfies a query, but I don't find how to
obtain the number of terms which match it.

For example, if I search for the word "house", I want to obtain the
number of times the word occurs (not the number of documents).

Is it possible to do it in LUCENE?

Thanks in advance,

  Mario Barcala


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 19:53:49 2008
Return-Path: <java-user-return-37151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59156 invoked from network); 12 Nov 2008 19:53:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 19:53:48 -0000
Received: (qmail 60507 invoked by uid 500); 12 Nov 2008 19:53:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59543 invoked by uid 500); 12 Nov 2008 19:53:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59532 invoked by uid 99); 12 Nov 2008 19:53:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 11:53:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 19:52:30 +0000
Received: by yw-out-2324.google.com with SMTP id 3so244736ywj.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 11:53:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=GRak+8vR9SMaEx4Q7KyVidrdxdVP31rLqYCEwtn9GPg=;
        b=Z5zfZiGMQUE2P9nKpRxAsBeE6c/3DXhnHswkPemAavTDDS4LQ0c4iAHb/GaFi96nm9
         mAkUmxvbrFdZ4Z4VMzH1pJasX9QDGAuneRJRT6WD8SRoZyn2x6N82Anuipxh3oZUut2d
         ZPvkyzHJOmoVbGdbrPSnc93YP47kzQj0qhghY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=P10BuVQwDu6MVPx8ru8jDadPe+dEyPIyFRJQQakKZ/XUP65vkpy9p60Im3N3O0nhBF
         1ziDcIS+DFHnWyvtoMQbgfGUMHayJ6AboTQC7cywAZIzOveilDTfnGNWjZd0BMXHABIr
         yTzEgtWQahMy5c4uYZ8tYZA+A2PuKYX2pPsG0=
Received: by 10.100.125.12 with SMTP id x12mr4159393anc.4.1226519592899;
        Wed, 12 Nov 2008 11:53:12 -0800 (PST)
Received: by 10.100.9.2 with HTTP; Wed, 12 Nov 2008 11:53:12 -0800 (PST)
Message-ID: <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
Date: Wed, 12 Nov 2008 14:53:12 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <491B2D13.8090006@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9936_23963788.1226519592895"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com>
	 <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>
	 <491B0BCF.2000302@gmail.com>
	 <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>
	 <491B17D8.4090209@gmail.com>
	 <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
	 <491B2D13.8090006@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9936_23963788.1226519592895
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> Right, sounds like you have it spot on. That second * from 3 looks like a
> possible tricky part.


I agree that it will be the tricky part but I think as long as I'm careful
with counting as I iterate through it should be ok (I probably just doomed
myself by saying that...)

Right...you'd do it essentially how Highlighting works...you do the search
> to get the docs of interest, and then redo the search somewhat to get the
> highlights/payloads for an individual doc at a time. You are redoing some
> work, but if you think about, getting that info for every match (there could
> be tons) doesn't make much since when someone might just look at the top
> couple results, or say 10 at a time. Depends on your usecase if its feasible
> or not though. Most find it efficient enough to do highlighting with, so I'm
> assuming it should be good enough here.


In my case I actually need all of the results, no matter how many there
are.  I imagine my use case is somewhat different than what Lucene is
typically used for, but if performance is good for payloads then I would
suspect this method would prove to be pretty quick overall (especially
compared to the old way I was doing it).  I think this is the route I'm
going to go, so I will report back with progress as it goes.

- Greg

------=_Part_9936_23963788.1226519592895--

From java-user-return-37152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 21:02:25 2008
Return-Path: <java-user-return-37152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93664 invoked from network); 12 Nov 2008 21:02:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 21:02:25 -0000
Received: (qmail 67891 invoked by uid 500); 12 Nov 2008 21:02:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67864 invoked by uid 500); 12 Nov 2008 21:02:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67846 invoked by uid 99); 12 Nov 2008 21:02:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 13:02:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dbichko@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 21:01:07 +0000
Received: by mu-out-0910.google.com with SMTP id i10so526988mue.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 13:01:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=1T1G5x0WxF5NTHDTfSJvPem561EhpRvo01K/AXpdukc=;
        b=JeoxzhfAtLp2FtUyytre7tdfQonzwHZisKyaTLo6dFKRaaC/db3kBHGf7WmPELHJhb
         5P4H0T1p5xT2wadQuyn2nWHWHWGxucCke3fpbrKZTxJ/wPEPU0FaA81GKFhl6zePDv0C
         meGElNQjAuj4Yhzuh2dv99tOBs7uFEAR3pnow=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=DNZDCFdcmHM+BfM29g8G+0Gb1Q5jzlKfcxpX7dJcaFDSjrfetWN1VhnmUXx/JnLX/l
         QAyF96CicJFsxM4fwbiozzq/dueQSugHZ4l6RkWY0yapltrWsDKlI/E6TCL7sHSWaIjs
         PDPWVqEIMWy7GLxItxgYEaNiK3kZK+Vwkz/Ds=
Received: by 10.181.134.11 with SMTP id l11mr2975857bkn.18.1226523710202;
        Wed, 12 Nov 2008 13:01:50 -0800 (PST)
Received: by 10.181.30.6 with HTTP; Wed, 12 Nov 2008 13:01:50 -0800 (PST)
Message-ID: <74d027a50811121301k9ccc0d0k56513e6551d46d53@mail.gmail.com>
Date: Wed, 12 Nov 2008 16:01:50 -0500
From: "Dmitri Bichko" <dbichko@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
In-Reply-To: <491A42E1.2030208@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>
	 <491A02A4.5020108@gmail.com>
	 <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com>
	 <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Nice!

At 8 threads nio-shared catches up with ram-shared.  Here's the complete table:

	fs-thread	nio-thread	ram-thread	fs-shared	nio-shared	ram-shared
1	71877	70461	54739	73986	72155	61595
2	34949	34945	26735	43719	33019	28935
3	25581	28732	26885	38412	23383	19624
4	20511	21235	31742	38712	18000	15059
5	19235	21060	24345	39685	14636	12509
6	16775	17685	26896	39592	12649	10841
7	17147	18766	18296	46678	11201	10183
8	18327	17588	19043	39886	10439	10048
9	16885	16483	18721	40342	9455	9483
10	17832	17428	30757	44706	8947	10975
11	17251	16405	21199	39947	8597	9704
12	17267	17967	36284	40208	8462	10996

And it behaves very well with more threads:

	nio-shared
1	71066
2	33206
3	22824
4	18168
5	15198
6	13086
7	11616
8	10698
9	9919
10	9657
11	9409
12	8977
13	9210
14	8757
15	9282
16	9260
17	9010
18	8230
19	8439
20	8486
21	8631
22	8417
23	8154
24	8685
25	7878
26	8398
27	8265
28	8266
29	7951
30	8606
31	8385
32	8630

That solves it for me, but I do see a fair amount of free time on this
machine - if there are other things you want to benchmark, I'd be
happy to do it.

Cheers,
Dmitri

On Tue, Nov 11, 2008 at 9:43 PM, Mark Miller <markrmiller@gmail.com> wrote:
> Mark Miller wrote:
>>
>> Thats a good point, and points out a bug in solr trunk for me. Frankly I
>> don't see how its done. There is no code I can see/find to use it rather
>> than FSDirectory. Still assuming there must be a way, but I don't see it...
>>
> Ah - brain freeze. What else is new :) You have to set the system property
> to change implementations: org.apache.lucene.FSDirectory.class is the
> property, set it to the class. Been a long time...
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 21:04:06 2008
Return-Path: <java-user-return-37153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94589 invoked from network); 12 Nov 2008 21:04:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 21:04:06 -0000
Received: (qmail 73044 invoked by uid 500); 12 Nov 2008 21:04:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73017 invoked by uid 500); 12 Nov 2008 21:04:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73006 invoked by uid 99); 12 Nov 2008 21:04:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 13:04:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dbichko@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 21:02:47 +0000
Received: by fk-out-0910.google.com with SMTP id 18so597065fkq.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 13:03:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=seqVC4On9boTUhpa6w2xFbjqJ3tsNPOLFxEtq3JBsuE=;
        b=A8fDEdf+lsSgnWVNZ7ApN8kG5QV5k0qA2xvyLeX19Qvq3XytmwroA/IiE3jfgzkOyr
         y/yns0GcCCUwHiomeuZu5r8pCaNoayFNNPkcxrQOLGq9QiIbITCD3N5biPJ92DVNzP/c
         paGlc6OabPZpbM58zoeBS7L/sZBzvH4zABBeQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=mAJ63LPJ6De4zJCSuS77LD60JscRwmy8o4dyv6iHL2qQuiHa369mbG8koqYT+tJhHX
         CCGqFRjlVbTaASKHjSjMKR+DWNlXOKnj0esnmvpfnf4iu2P5/7PJNquWoabAvUeV4NKF
         G/gd7qG5p/tBSTzEXHNlW0z/2LTTUEHLgg20s=
Received: by 10.181.203.13 with SMTP id f13mr2961676bkq.168.1226523799864;
        Wed, 12 Nov 2008 13:03:19 -0800 (PST)
Received: by 10.181.30.6 with HTTP; Wed, 12 Nov 2008 13:03:19 -0800 (PST)
Message-ID: <74d027a50811121303g22deaa3k162c2d13d09abfcb@mail.gmail.com>
Date: Wed, 12 Nov 2008 16:03:19 -0500
From: "Dmitri Bichko" <dbichko@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
In-Reply-To: <AFD31066-A80D-4E38-BA86-C4102535277B@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>
	 <491A02A4.5020108@gmail.com>
	 <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com>
	 <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com>
	 <AFD31066-A80D-4E38-BA86-C4102535277B@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>From the user perspective: a public constructor would be the most
obvious, and would be consistent with RAMDirectory.

Dmitri

On Wed, Nov 12, 2008 at 4:50 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
>
> I think we really should open up a non-static way to choose a different
> FSDirectory impl?  EG maybe add optional Class to FSDirectory.getDirectory?
>  Or maybe give NIOFSDirectory a public ctor?  Or something?
>
> Mike
>
> Mark Miller wrote:
>
>> Mark Miller wrote:
>>>
>>> Thats a good point, and points out a bug in solr trunk for me. Frankly I
>>> don't see how its done. There is no code I can see/find to use it rather
>>> than FSDirectory. Still assuming there must be a way, but I don't see it...
>>>
>> Ah - brain freeze. What else is new :) You have to set the system property
>> to change implementations: org.apache.lucene.FSDirectory.class is the
>> property, set it to the class. Been a long time...
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 22:01:50 2008
Return-Path: <java-user-return-37154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37981 invoked from network); 12 Nov 2008 22:01:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 22:01:50 -0000
Received: (qmail 55817 invoked by uid 500); 12 Nov 2008 22:01:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55473 invoked by uid 500); 12 Nov 2008 22:01:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55455 invoked by uid 99); 12 Nov 2008 22:01:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 14:01:50 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 22:00:29 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 08C7371C46C; Wed, 12 Nov 2008 14:00:43 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 0028571C454
	for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 14:00:42 -0800 (PST)
Date: Wed, 12 Nov 2008 14:00:42 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
In-Reply-To: <74d027a50811121303g22deaa3k162c2d13d09abfcb@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0811121345530.471@radix.cryptio.net>
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com> 
 <491A02A4.5020108@gmail.com>  <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com>
  <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com> 
 <AFD31066-A80D-4E38-BA86-C4102535277B@mikemccandless.com>
 <74d027a50811121303g22deaa3k162c2d13d09abfcb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: >From the user perspective: a public constructor would be the most
: obvious, and would be consistent with RAMDirectory.

A lot of the cases where system properties are currently used can't 
really be solved this way because the client isn't the one constructing 
the object.  SegmentReader's IMPL for example needs to be set "globally" 
so that the correct concrete class is used when a MultiSegmentReader goes 
to open each segment.

In the case of FSDirectory.getDirectory a static cache f Directory objects 
is maintained to ensure only one Directory object exists at any given time 
per File.

: > I think we really should open up a non-static way to choose a different
: > FSDirectory impl?  EG maybe add optional Class to FSDirectory.getDirectory?
: >  Or maybe give NIOFSDirectory a public ctor?  Or something?

A factory/provider pattern could work, but that makes the above mentioned 
caching complicated (what if one call to getDirectory for /tmp/index wants 
an NIOFSDirectory and another wants a MyFSDirectory?)

since the choice of FSDirectory varient is largly going to be based on OS, 
I can't think of any reason why a static setter method wouldn't be good 
enough in this particular case.

past discussion about alternate options for clients to control things 
these things beyond using system properties...

http://issues.apache.org/jira/browse/LUCENE-636
http://www.nabble.com/Back-Compatibility-to14918202.html#a15027970
 ...and some replies.

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 22:13:07 2008
Return-Path: <java-user-return-37155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48940 invoked from network); 12 Nov 2008 22:13:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 22:13:06 -0000
Received: (qmail 84495 invoked by uid 500); 12 Nov 2008 22:13:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84470 invoked by uid 500); 12 Nov 2008 22:13:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84459 invoked by uid 99); 12 Nov 2008 22:13:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 14:13:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 22:11:48 +0000
Received: by rv-out-0506.google.com with SMTP id f6so598428rvb.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 14:12:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=E5pABxGr5mtye3M8XjhjNhnog4htNp3HRIqGJL66yyM=;
        b=evYItZVZkXd/TJkhWgoOZ3rG6EkcY6QERPrW7mevVaqryVUBjCVkIAMzYQety84vbb
         TrVhpmqG9TZ7oA4QhfA1eD/BCctK9t+3hDpf6NrUXgJDblxqsq6qjYgKoONYQRBhc/il
         fpNurj2yK/6yDgFn9OVATKCRIfpL/hnK2bo5U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=X4yzqXqqB6mlAh3bAaDshUACC/XfwEc1VgY1/sSOlJnPTT5TBqBBZcfoa5liM9V/Sn
         AQPeOmcqMbmcs6e4Lk5miRoVhPtVyeDgeOygghZ2tCjU/zjp6Xb1kHu06tDDGtoAVJC9
         btVXgsLzibmYKwXWaRDNJPb4UODty+aU7AewA=
Received: by 10.140.187.10 with SMTP id k10mr5117018rvf.264.1226527951715;
        Wed, 12 Nov 2008 14:12:31 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Wed, 12 Nov 2008 14:12:31 -0800 (PST)
Message-ID: <c68e39170811121412l73ce06d0r2388e286593810a9@mail.gmail.com>
Date: Wed, 12 Nov 2008 17:12:31 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
In-Reply-To: <Pine.LNX.4.62.0811121345530.471@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com>
	 <491A02A4.5020108@gmail.com>
	 <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com>
	 <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com>
	 <AFD31066-A80D-4E38-BA86-C4102535277B@mikemccandless.com>
	 <74d027a50811121303g22deaa3k162c2d13d09abfcb@mail.gmail.com>
	 <Pine.LNX.4.62.0811121345530.471@radix.cryptio.net>
X-Google-Sender-Auth: c60cddb5c570fe7e
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Nov 12, 2008 at 5:00 PM, Chris Hostetter
<hossman_lucene@fucit.org> wrote:
> since the choice of FSDirectory varient is largly going to be based on OS,
> I can't think of any reason why a static setter method wouldn't be good
> enough in this particular case.

https://issues.apache.org/jira/browse/LUCENE-1451

A custom subclass of FSDirectory could perhaps do something
interesting... and something that you would want for some indicies and
not for others.  If it's not too painful to allow it, perhaps we
should.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 22:32:00 2008
Return-Path: <java-user-return-37156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65719 invoked from network); 12 Nov 2008 22:31:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 22:31:59 -0000
Received: (qmail 19264 invoked by uid 500); 12 Nov 2008 22:31:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19233 invoked by uid 500); 12 Nov 2008 22:31:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19222 invoked by uid 99); 12 Nov 2008 22:31:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 14:31:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.26] (HELO qw-out-2122.google.com) (74.125.92.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 22:30:38 +0000
Received: by qw-out-2122.google.com with SMTP id 5so382701qwi.53
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 14:31:20 -0800 (PST)
Received: by 10.214.148.19 with SMTP id v19mr10385529qad.351.1226529080153;
        Wed, 12 Nov 2008 14:31:20 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 5sm3652466qwg.9.2008.11.12.14.31.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 14:31:19 -0800 (PST)
Message-Id: <45E63187-F681-4D94-BBEA-31E8AE6CEC3E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <74d027a50811121301k9ccc0d0k56513e6551d46d53@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IndexSearcher and multi-threaded performance
Date: Wed, 12 Nov 2008 17:31:17 -0500
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com> <491A02A4.5020108@gmail.com> <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com> <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com> <74d027a50811121301k9ccc0d0k56513e6551d46d53@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Good!

In fact now we see similar slowness with nio-thread vs nio-shared as  
we see for RAM-thread vs RAM-shared.  Ie, for both RAM and NIO you get  
better performance sharing a single reader than reader-per-thread.   
This is odd -- I would have expected that with infinite RAM reader-per- 
thread would always be as fast or faster than a shared reader.  It's  
particularly interesting that the RAM case shows it worse than the NIO  
case.

Maybe it's because in the reader-per-thread case the CPU's cache is  
less effective since things like norms & deleted docs are now  
replicated in memory?

Mike

Dmitri Bichko wrote:

> Nice!
>
> At 8 threads nio-shared catches up with ram-shared.  Here's the  
> complete table:
>
> 	fs-thread	nio-thread	ram-thread	fs-shared	nio-shared	ram-shared
> 1	71877	70461	54739	73986	72155	61595
> 2	34949	34945	26735	43719	33019	28935
> 3	25581	28732	26885	38412	23383	19624
> 4	20511	21235	31742	38712	18000	15059
> 5	19235	21060	24345	39685	14636	12509
> 6	16775	17685	26896	39592	12649	10841
> 7	17147	18766	18296	46678	11201	10183
> 8	18327	17588	19043	39886	10439	10048
> 9	16885	16483	18721	40342	9455	9483
> 10	17832	17428	30757	44706	8947	10975
> 11	17251	16405	21199	39947	8597	9704
> 12	17267	17967	36284	40208	8462	10996
>
> And it behaves very well with more threads:
>
> 	nio-shared
> 1	71066
> 2	33206
> 3	22824
> 4	18168
> 5	15198
> 6	13086
> 7	11616
> 8	10698
> 9	9919
> 10	9657
> 11	9409
> 12	8977
> 13	9210
> 14	8757
> 15	9282
> 16	9260
> 17	9010
> 18	8230
> 19	8439
> 20	8486
> 21	8631
> 22	8417
> 23	8154
> 24	8685
> 25	7878
> 26	8398
> 27	8265
> 28	8266
> 29	7951
> 30	8606
> 31	8385
> 32	8630
>
> That solves it for me, but I do see a fair amount of free time on this
> machine - if there are other things you want to benchmark, I'd be
> happy to do it.
>
> Cheers,
> Dmitri
>
> On Tue, Nov 11, 2008 at 9:43 PM, Mark Miller <markrmiller@gmail.com>  
> wrote:
>> Mark Miller wrote:
>>>
>>> Thats a good point, and points out a bug in solr trunk for me.  
>>> Frankly I
>>> don't see how its done. There is no code I can see/find to use it  
>>> rather
>>> than FSDirectory. Still assuming there must be a way, but I don't  
>>> see it...
>>>
>> Ah - brain freeze. What else is new :) You have to set the system  
>> property
>> to change implementations: org.apache.lucene.FSDirectory.class is the
>> property, set it to the class. Been a long time...
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 12 22:34:30 2008
Return-Path: <java-user-return-37157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67174 invoked from network); 12 Nov 2008 22:34:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Nov 2008 22:34:30 -0000
Received: (qmail 21547 invoked by uid 500); 12 Nov 2008 22:34:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21227 invoked by uid 500); 12 Nov 2008 22:34:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21216 invoked by uid 99); 12 Nov 2008 22:34:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 14:34:30 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 22:33:10 +0000
Received: by qw-out-2122.google.com with SMTP id 5so383263qwi.53
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 14:33:43 -0800 (PST)
Received: by 10.214.60.5 with SMTP id i5mr10396033qaa.168.1226529222963;
        Wed, 12 Nov 2008 14:33:42 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm3669236qwb.7.2008.11.12.14.33.41
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 14:33:42 -0800 (PST)
Message-Id: <864B6C73-8DA9-45DF-9F55-FCC4EC60EB53@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170811121412l73ce06d0r2388e286593810a9@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: IndexSearcher and multi-threaded performance
Date: Wed, 12 Nov 2008 17:33:39 -0500
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com> <491A02A4.5020108@gmail.com> <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com> <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com> <AFD31066-A80D-4E38-BA86-C4102535277B@mikemccandless.com> <74d027a50811121303g22deaa3k162c2d13d09abfcb@mail.gmail.com> <Pine.LNX.4.62.0811121345530.471@radix.cryptio.net> <c68e39170811121412l73ce06d0r2388e286593810a9@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Also, by OS is the one reason we can think of now, but that doesn't  
mean there aren't other reasons.

EG, who knows -- maybe for small indexes NIO doesn't help but for  
large ones it does (just an example) and so you'd want non-static  
choice.

Mike

Yonik Seeley wrote:

> On Wed, Nov 12, 2008 at 5:00 PM, Chris Hostetter
> <hossman_lucene@fucit.org> wrote:
>> since the choice of FSDirectory varient is largly going to be based  
>> on OS,
>> I can't think of any reason why a static setter method wouldn't be  
>> good
>> enough in this particular case.
>
> https://issues.apache.org/jira/browse/LUCENE-1451
>
> A custom subclass of FSDirectory could perhaps do something
> interesting... and something that you would want for some indicies and
> not for others.  If it's not too painful to allow it, perhaps we
> should.
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 02:03:09 2008
Return-Path: <java-user-return-37158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75821 invoked from network); 13 Nov 2008 02:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 02:03:08 -0000
Received: (qmail 64024 invoked by uid 500); 13 Nov 2008 02:03:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63996 invoked by uid 500); 13 Nov 2008 02:03:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63985 invoked by uid 99); 13 Nov 2008 02:03:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 18:03:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dipshrestha@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 02:01:50 +0000
Received: by rv-out-0506.google.com with SMTP id f6so678348rvb.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 18:02:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=pmax8Wt2zHk7psGHk1O6yMRRyIXOOMA7kVm/kKmve88=;
        b=o8Yark7/Zkwa/T7MYTn9VpLbpdUUlqqtN0OT4W7lyR+4JTMdkwe3UHHm7bam1AVM4z
         zzVKqpNVH0UYJ+uOtD6qX76BsQCbBcfPajJFE9FlRcW30y8IPo3OHZNeOtEC1gGdzl51
         o9cDZJal6Jg4uN+5Ke02ugiFG4K3UEs/4uJyU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Bm+kg6gkiOIy6W7z5xkCNYwhteilllhAHyowfoI8Lg9Wyd0WgwHK99BVYsTyLPghgy
         5L/7HZMBqCSdxQEFpMJmDfK1A0rG4UpMYaxpYGNuk2vKaMhcEtXCZAvhGFgFdWpDwAPZ
         +UqRen8REb6VqLwYUTiF8z69YkGsq+DvUpCPs=
Received: by 10.142.187.8 with SMTP id k8mr3666192wff.261.1226541754140;
        Wed, 12 Nov 2008 18:02:34 -0800 (PST)
Received: by 10.143.156.15 with HTTP; Wed, 12 Nov 2008 18:02:34 -0800 (PST)
Message-ID: <aec6319e0811121802m60e5df39j3d15336442a171fe@mail.gmail.com>
Date: Thu, 13 Nov 2008 11:02:34 +0900
From: dipesh <dipshrestha@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get the terms within 5 words of another term?
In-Reply-To: <491B2DD2.3030602@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26957_2263435.1226541754145"
References: <491B2DD2.3030602@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_26957_2263435.1226541754145
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You might want to look at the TermPositionVector. For it to work I think the
TermVector themselves have to be stored with option  TermVector.YES

regards,
Dipesh



On Thu, Nov 13, 2008 at 4:26 AM, Sven <sven.carlberg@gmail.com> wrote:

> Hi everyone,
>
> I have a term "foo" and I want to count all the occurrences of all the
> terms that are within 5 words of "foo" in all the documents which
> contain "foo".  For simplicity sake, this is only for a single field.
> So if I have 3 documents (each with a single field) that look like this:
>
> Once upon a time, foo lived far, far away in a magical kingdom.
>
> "The Life and Time of the Hero Called Foo" is, by far, the best novel
> about spam I have ever read.
>
> I theorize that over time, foo will gradually move far away from bar.
>
> I would like to generate a list of terms and hits based on their
> proximity to "foo" in all the documents.  So I'll end up with something
> like:
>
> far : 4
> time : 3
> away : 2
>
> Any help would be greatly appreciated.
>
> Thanks much!
> -Sven
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
----------------------------------------
"Help Ever Hurt Never"- Baba

------=_Part_26957_2263435.1226541754145--

From java-user-return-37159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 02:27:18 2008
Return-Path: <java-user-return-37159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92551 invoked from network); 13 Nov 2008 02:27:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 02:27:16 -0000
Received: (qmail 80030 invoked by uid 500); 13 Nov 2008 02:27:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79999 invoked by uid 500); 13 Nov 2008 02:27:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79988 invoked by uid 99); 13 Nov 2008 02:27:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 18:27:16 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dipshrestha@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 02:25:58 +0000
Received: by rv-out-0506.google.com with SMTP id f6so686784rvb.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 18:26:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=H2+MP1B3kXKiTgdRlpc/2mKMcAMdSyIG9TGOWxM2UPU=;
        b=yFlnG5553hMLhI5WoDicOKMHMOf+FjGHmIUv2DE/vWGITiNWhT/ufHelyzGQZt6Ll6
         FnhuY9BdRNc1nEklAkvEwulzZSXOJEubsJekT4MsOhsY/IZZPM/iyJtDg8/k5Tbb9Ldn
         Wbadhlkpi9YXYx3BD1Rgo77cM2LuW4hB4Sci8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=xx/leZzKmkG+BVJiAoM23360tAVWAyIwwKgV/+Z6YcNkx/BvgXLbSt8qqkCqpYxvv/
         LjFLJ0ze0XeVl8hWmLinIolaFBpcwzGr1PrAj00NoO3zxJDHb0mOhCxWPgGJSZcizutV
         n+Bm9Vv8nkZTKjIlpiAzFsp1UVJIbLvHdRilU=
Received: by 10.143.166.10 with SMTP id t10mr3685406wfo.210.1226543202519;
        Wed, 12 Nov 2008 18:26:42 -0800 (PST)
Received: by 10.143.156.15 with HTTP; Wed, 12 Nov 2008 18:26:42 -0800 (PST)
Message-ID: <aec6319e0811121826x2c707cb4u7f954c38111debd1@mail.gmail.com>
Date: Thu, 13 Nov 2008 11:26:42 +0900
From: dipesh <dipshrestha@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: About counting term hits
In-Reply-To: <1226518223.11268.6.camel@tambre>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27271_3678093.1226543202517"
References: <1226518223.11268.6.camel@tambre>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27271_3678093.1226543202517
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

eWVzIGl0cyBxdWl0ZSBwb3NzaWJsZS4KMS55b3UgbmVlZCB0byBjcmVhdGUgdGVybSB3aGljaCB5
b3UgbmVlZCB0byBzZWFyY2guCmVnLgpUZXJtIHRlcm0gPSBuZXcgVGVybSgieW91cmZpZWxkIiwi
eW91cndvcmQiKTsKCjIuIHRoZW4gY3JlYXRlIGEgVGVybURvYyBlbnVtLgpUZXJtRG9jcyBwcm92
aWRlcyBhbiBpbnRlcmZhY2UgZm9yIGVudW1lcmF0aW5nIDxkb2N1bWVudCwgZnJlcXVlbmN5PiBw
YWlycwpmb3IgYSB0ZXJtLgoKVGVybURvY3MgdCA9IG5ldwpGaWx0ZXJJbmRleFJlYWRlcihJbmRl
eFJlYWRlci5vcGVuKCJ5b3VpbmRleCIpKS50ZXJtRG9jcyh0ZXJtKTsKCjMuSXRlcmF0ZSB0aHJv
dWdoIGVhY2ggb2YgdGhlIHRlcm1zIGFuZCBjb3VudCB0aGUgb2NjdXJyZW5jZS4KaW50IGNvdW50
ID0gMDsKIHdoaWxlKHRkLm5leHQoKSl7CiAgICAgICAgICAgICAgICAgICAgY291bnQrPXRkLmZy
ZXEoKSk7CiAgfQoKSG9wZSBpdCBoZWxwZWQsClJlZ2FyZHMsCkRpcGVzaAoKT24gVGh1LCBOb3Yg
MTMsIDIwMDggYXQgNDozMCBBTSwgRmNvLiBNYXJpbyBCYXJjYWxhIFJvZHLDrWd1ZXogPApsYmFy
Y2FsYUBmcmVlcmVzZWFyY2gub3JnPiB3cm90ZToKCj4gSGVsbG86Cj4KPiBJIGFtIG5ldyB0byBM
VUNFTkUgYW5kIEkgYW0gdGVzdGluZyBzb21lIGlzc3VlcyBhYm91dCBpdC4gSSBjYW4gcmV0cmll
dmUKPiB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB3aGljaCBzYXRpc2ZpZXMgYSBxdWVyeSwgYnV0
IEkgZG9uJ3QgZmluZCBob3cgdG8KPiBvYnRhaW4gdGhlIG51bWJlciBvZiB0ZXJtcyB3aGljaCBt
YXRjaCBpdC4KPgo+IEZvciBleGFtcGxlLCBpZiBJIHNlYXJjaCBmb3IgdGhlIHdvcmQgImhvdXNl
IiwgSSB3YW50IHRvIG9idGFpbiB0aGUKPiBudW1iZXIgb2YgdGltZXMgdGhlIHdvcmQgb2NjdXJz
IChub3QgdGhlIG51bWJlciBvZiBkb2N1bWVudHMpLgo+Cj4gSXMgaXQgcG9zc2libGUgdG8gZG8g
aXQgaW4gTFVDRU5FPwo+Cj4gVGhhbmtzIGluIGFkdmFuY2UsCj4KPiAgTWFyaW8gQmFyY2FsYQo+
Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4KCgotLSAKLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoiSGVscCBFdmVyIEh1cnQgTmV2ZXIiLSBC
YWJhCg==
------=_Part_27271_3678093.1226543202517--

From java-user-return-37160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 05:00:53 2008
Return-Path: <java-user-return-37160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31820 invoked from network); 13 Nov 2008 05:00:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 05:00:53 -0000
Received: (qmail 90345 invoked by uid 500); 13 Nov 2008 05:00:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90307 invoked by uid 500); 13 Nov 2008 05:00:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90296 invoked by uid 99); 13 Nov 2008 05:00:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Nov 2008 21:00:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.227 as permitted sender)
Received: from [209.85.198.227] (HELO rv-out-0506.google.com) (209.85.198.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 04:59:33 +0000
Received: by rv-out-0506.google.com with SMTP id f6so734081rvb.5
        for <java-user@lucene.apache.org>; Wed, 12 Nov 2008 21:00:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:x-mailer:mime-version:content-type
         :content-transfer-encoding;
        bh=ZcDca4NQbhSceY4hfbrUcLFfZwpu55VRemnUI128cGE=;
        b=WN/oviOiNM6LeY4sRi9zDtfKTBc/rn6Hf/wqDDqFVYB4xqwo7qTzY+fO7rZ+LBA1Nn
         +W7G/pM0G09vrhaXBMMlbLrkBYFBx4lfAF1cOxSOtNmNkCuh4ywJ6fuD99Twat1agMbL
         CeLRS8/euZKGPj6SttYHkdbHekCYKfMVmOJkI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:x-mailer:mime-version:content-type
         :content-transfer-encoding;
        b=Pk47TNlxpN29BRhF3mZVZhdGlNpc6NbcxRzFjYXoljU7vkKHsd2w87JVEjgwpN2RpJ
         3hEw0cFDWTiEmRYX6tcFA2eLMhQ4EWQ+FforhDpbGYxuKGsuOwS2GV7ZfDSlEViooDpx
         wDI/thDKvZOBDW1U8Vdl243PMKqlUQ9mEEEUg=
Received: by 10.140.170.12 with SMTP id s12mr5258921rve.67.1226552417092;
        Wed, 12 Nov 2008 21:00:17 -0800 (PST)
Received: from localhost ([189.107.137.13])
        by mx.google.com with ESMTPS id f21sm30376065rvb.5.2008.11.12.21.00.15
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 12 Nov 2008 21:00:16 -0800 (PST)
Date: Thu, 13 Nov 2008 03:00:02 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Using AND with MultiFieldQueryParser
Message-Id: <20081113030002.1049d0ed.almeidaraf@gmail.com>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I used an Analyzer which removes stopwords when indexing, then I wanted
to do an AND search using MultiFieldQueryParser. So I did this:
	word1 AND stopword AND word2
I thought the stopword would be ignored by the searcher (I use the same
Analyzer to index and search). But instead, I get no results whenever I
have a stopword like that. If I remove the stopword, giving me:
	word1 AND word2
then the search is sucessful. Is that the expected behaviour? Am I
doing something wrong?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 08:36:30 2008
Return-Path: <java-user-return-37161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27879 invoked from network); 13 Nov 2008 08:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 08:36:30 -0000
Received: (qmail 48384 invoked by uid 500); 13 Nov 2008 08:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47971 invoked by uid 500); 13 Nov 2008 08:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47960 invoked by uid 99); 13 Nov 2008 08:36:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 00:36:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.76.150.237] (HELO slcb179.piensasolutions.com) (217.76.150.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 08:35:12 +0000
Received: from mail.freeresearch.org (localhost.localdomain [127.0.0.1])
	by slcb179.piensasolutions.com (Postfix) with ESMTP id 7F8089A91F4
	for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 09:35:24 +0100 (CET)
Received: from 193.145.220.56
        (SquirrelMail authenticated user baw947c)
        by mail.freeresearch.org with HTTP;
        Thu, 13 Nov 2008 09:35:24 +0100 (CET)
Message-ID: <49054.193.145.220.56.1226565324.squirrel@mail.freeresearch.org>
In-Reply-To: <aec6319e0811121826x2c707cb4u7f954c38111debd1@mail.gmail.com>
References: <1226518223.11268.6.camel@tambre>
    <aec6319e0811121826x2c707cb4u7f954c38111debd1@mail.gmail.com>
Date: Thu, 13 Nov 2008 09:35:24 +0100 (CET)
Subject: Re: About counting term hits
From: lbarcala@freeresearch.org
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4-1.FC3
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

> yes its quite possible.
> 1.you need to create term which you need to search.
> eg.
> Term term = new Term("yourfield","yourword");
>
> 2. then create a TermDoc enum.
> TermDocs provides an interface for enumerating <document, frequency> pairs
> for a term.
>
> TermDocs t = new
> FilterIndexReader(IndexReader.open("youindex")).termDocs(term);
>
> 3.Iterate through each of the terms and count the occurrence.
> int count = 0;
>  while(td.next()){
>                     count+=td.freq());
>   }
>

This helps but, what about combining this with a search criteria? I mean
to obtain the number of times the term "house" occurs in document between
year 1999 and 2005 (another field of documents). I don't find anything
related in classes used by you.

>> Hello:
>>
>> I am new to LUCENE and I am testing some issues about it. I can retrieve
>> the number of documents which satisfies a query, but I don't find how to
>> obtain the number of terms which match it.
>>
>> For example, if I search for the word "house", I want to obtain the
>> number of times the word occurs (not the number of documents).
>>
>> Is it possible to do it in LUCENE?
>>
>> Thanks in advance,
>>
>>  Mario Barcala
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> ----------------------------------------
> "Help Ever Hurt Never"- Baba
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 09:24:47 2008
Return-Path: <java-user-return-37162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46629 invoked from network); 13 Nov 2008 09:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 09:24:47 -0000
Received: (qmail 1618 invoked by uid 500); 13 Nov 2008 09:24:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1476 invoked by uid 500); 13 Nov 2008 09:24:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1465 invoked by uid 99); 13 Nov 2008 09:24:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 01:24:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 72.14.204.224 as permitted sender)
Received: from [72.14.204.224] (HELO qb-out-0506.google.com) (72.14.204.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 09:23:27 +0000
Received: by qb-out-0506.google.com with SMTP id e11so789240qba.27
        for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 01:24:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=mDXg5rlbaM+qHgMVWfQm73yMdQ6xmiBBZOiL2Hve1qw=;
        b=VokPNV1GvFXX1OkUy7oOl4YbCN1f4da/RTozyF2i0hqLzF1RjOJ2GhRJ1ivB8HA2OC
         Y6AAfi3+0vIhkz4Ln7STRMODG0W7B3mAwYfbDTGvhlWIAxKA37a+JyP2L0vGnJyqklwu
         N5WFnbzwQs1i2UYdMjCIaBFmDvkwanjA805bc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=qU2gdMLlEDoEKOlzp9CGKZS0gy93ggE+yN8aS+Cnj0pxdNjP/NKicCdYcF0A9moOqy
         PAIpLRKev4Iej6oFAT89EqaUmsNjNjDBBKWEETUuUUkBpNXSNvewxJeen87jnGuxZGwq
         nNQkSIgLE0EExbYGlJD9GyKEyu7XCXz0cFskU=
Received: by 10.141.3.17 with SMTP id f17mr5388375rvi.130.1226568239811;
        Thu, 13 Nov 2008 01:23:59 -0800 (PST)
Received: by 10.141.28.19 with HTTP; Thu, 13 Nov 2008 01:23:59 -0800 (PST)
Message-ID: <295da8fe0811130123xd248daaue9050a96f25d5d0@mail.gmail.com>
Date: Thu, 13 Nov 2008 14:53:59 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using AND with MultiFieldQueryParser
In-Reply-To: <20081113030002.1049d0ed.almeidaraf@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2473_22431497.1226568239778"
References: <20081113030002.1049d0ed.almeidaraf@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2473_22431497.1226568239778
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
>From whatever you have written you are trying to write a query
*word1 AND stopword AND word2
*this means that the result should contain all of word1, word2 and the
stopword.

Since you have already removed the stopword during index time you will never
find any document matching your query. (this is expected behaviour)
you can possibly use word1 OR stopword OR word2 (depends on what you want in
the result)
 If you can clarify more about what you want in the result we can discuss on
what can be done.

Prabin

On Thu, Nov 13, 2008 at 10:30 AM, Rafael Cunha de Almeida <
almeidaraf@gmail.com> wrote:

> Hello,
>
> I used an Analyzer which removes stopwords when indexing, then I wanted
> to do an AND search using MultiFieldQueryParser. So I did this:
>        word1 AND stopword AND word2
> I thought the stopword would be ignored by the searcher (I use the same
> Analyzer to index and search). But instead, I get no results whenever I
> have a stopword like that. If I remove the stopword, giving me:
>        word1 AND word2
> then the search is sucessful. Is that the expected behaviour? Am I
> doing something wrong?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2473_22431497.1226568239778--

From java-user-return-37163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 09:43:38 2008
Return-Path: <java-user-return-37163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58189 invoked from network); 13 Nov 2008 09:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 09:43:37 -0000
Received: (qmail 24491 invoked by uid 500); 13 Nov 2008 09:43:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24462 invoked by uid 500); 13 Nov 2008 09:43:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24450 invoked by uid 99); 13 Nov 2008 09:43:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 01:43:37 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 09:42:18 +0000
Received: by rv-out-0506.google.com with SMTP id f6so817059rvb.5
        for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 01:43:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=mZx+wN7zYHXf31TdWcct3uXSX57HwKpM0GPxjqb7F90=;
        b=l3E16DNj165m02N314Q82js8hSFhgNzsUFESTKouMIhpEr/EMBB/SrqmaomBM+mEcB
         rIN5mG2GpQgSKRtJgPUgzY9qsb8nBVXD/+KGUfsKebbrgXNUibZqilg/2CkzkWOpgM34
         qoPnYKc938eU0dGwjJUHIvYHGjX0x/NZFdOpA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=hoCuxqicBsMmPZmm7QA7JEIYFw7tiyNUFgDHtnPWOts1DhfCipdnoTYVbyO0q4cUAm
         NEAo/kvSEuKqBUgcVZqgxjLZo9E0igkNjfyDUj6s08mL335pokVemnBHJ7NcOPc4mCO9
         L4DmrVZuLodeVZYiPdntWLVR9YwkTI+rDbnyA=
Received: by 10.140.127.20 with SMTP id z20mr5393857rvc.100.1226569381894;
        Thu, 13 Nov 2008 01:43:01 -0800 (PST)
Received: by 10.140.126.17 with HTTP; Thu, 13 Nov 2008 01:43:01 -0800 (PST)
Message-ID: <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
Date: Thu, 13 Nov 2008 11:43:01 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3238_6169435.1226569381898"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com>
	 <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>
	 <491B0BCF.2000302@gmail.com>
	 <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>
	 <491B17D8.4090209@gmail.com>
	 <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
	 <491B2D13.8090006@gmail.com>
	 <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3238_6169435.1226569381898
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
I have the same need - to obtain "attributes" for terms stored in some
field. I also need all the results and can't take just the first few docs.

I'm using an older version of lucene and the method i'm using right now is
this:
1. Store the words as usual in some field.
2. Store the attributesof each word in another field aligned with the words.
If you have several types of information, create a field for each type.
3. In order to retrieve the information, run a span query of the words
field.
4. use the positions of the spans to "jump" directly to the stored metadata
field.

This seems cumbersome but it works quite well and quite fast. You don't have
to do several passes - just iterate on the spans. you can easily add as many
attributes to the word as you want as long as they are aligned to the words
fields. The problems are that you are restricted to span queries and that
you have get all the attributes fields for each document and split the
fields before being able to jump to the right position.

However, Mark's suggestion to use PayloadSpanUtil might greatly improve my
solution if for each span we could have the payload information without
running another search. I saw some discussions about extending the Spans
class to include the combined payloads of the terms in each span, but I
don't think it was implemented.

Eran.

On Wed, Nov 12, 2008 at 9:53 PM, Greg Shackles <gshackles@gmail.com> wrote:

> >
> > Right, sounds like you have it spot on. That second * from 3 looks like a
> > possible tricky part.
>
>
> I agree that it will be the tricky part but I think as long as I'm careful
> with counting as I iterate through it should be ok (I probably just doomed
> myself by saying that...)
>
> Right...you'd do it essentially how Highlighting works...you do the search
> > to get the docs of interest, and then redo the search somewhat to get the
> > highlights/payloads for an individual doc at a time. You are redoing some
> > work, but if you think about, getting that info for every match (there
> could
> > be tons) doesn't make much since when someone might just look at the top
> > couple results, or say 10 at a time. Depends on your usecase if its
> feasible
> > or not though. Most find it efficient enough to do highlighting with, so
> I'm
> > assuming it should be good enough here.
>
>
> In my case I actually need all of the results, no matter how many there
> are.  I imagine my use case is somewhat different than what Lucene is
> typically used for, but if performance is good for payloads then I would
> suspect this method would prove to be pretty quick overall (especially
> compared to the old way I was doing it).  I think this is the route I'm
> going to go, so I will report back with progress as it goes.
>
> - Greg
>

------=_Part_3238_6169435.1226569381898--

From java-user-return-37164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 12:45:00 2008
Return-Path: <java-user-return-37164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44338 invoked from network); 13 Nov 2008 12:45:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 12:45:00 -0000
Received: (qmail 47569 invoked by uid 500); 13 Nov 2008 12:45:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47545 invoked by uid 500); 13 Nov 2008 12:45:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47529 invoked by uid 99); 13 Nov 2008 12:45:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 04:45:00 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 131.246.120.220 is neither permitted nor denied by domain of christian.reuschling@gmail.com)
Received: from [131.246.120.220] (HELO mailgw1.uni-kl.de) (131.246.120.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 12:43:40 +0000
Received: from dfki.uni-kl.de (dfki-1002.dfki.uni-kl.de [131.246.195.2])
	by mailgw1.uni-kl.de (8.13.8/8.13.8/Debian-3) with ESMTP id mADCeK5J028110
	for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 13:40:20 +0100
Received: from serv-4100.kl.dfki.de (serv-4100.kl.dfki.de [192.168.41.180])
	by dfki.uni-kl.de (8.13.8+Sun/8.11.4) with ESMTP id mADCeKbK015702
	for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 13:40:21 +0100 (CET)
Received: from [192.168.41.166] (pc-4176.kl.dfki.de [192.168.41.166])
	by serv-4100.kl.dfki.de (8.13.8+Sun/8.13.8) with ESMTP id mADCeJwC014360
	for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 13:40:20 +0100 (CET)
Message-ID: <491C2028.7050006@gmail.com>
Date: Thu, 13 Nov 2008 13:40:08 +0100
From: Christian Reuschling <christian.reuschling@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080922)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: 1:n queries again
References: <491AE11D.60307@gmail.com>	 <359a92830811120646n54eb368en77ba26d72d612274@mail.gmail.com>	 <491AF38F.8080506@gmail.com> <359a92830811120736i41e77571i2ede2ac1b8bcdadc@mail.gmail.com>
In-Reply-To: <359a92830811120736i41e77571i2ede2ac1b8bcdadc@mail.gmail.com>
X-Enigmail-Version: 0.95.7
OpenPGP: id=AF96660F;
	url=hkp://wwwkeys.eu.pgp.net
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig111477717B351AD584606710"
X-Virus-Checked: Checked by ClamAV on apache.org

--------------enig111477717B351AD584606710
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hello Eric,

our use case is to match feature vectors extracted from pictures in
a performant way with Lucene.

For this, interesting points of a picture will be derived, and each
of them is described by an own vector. So we have one picture, but
several feature vectors (1:n)

When I now want to search (similar) interesting points in the set
of feature vectors, I create a query with one term for each vector
entry.

E.g:

Picture represented by a document inside an index:

Interesting point 1: feature1Value0.5 feature2Value0.8
Interesting point 2: feature1Value0.5 feature2Value0.7


Query picture interesting point: feature1Value0.5 feature2Value0.7

The idea is to create a lucene document with

field:"startDelimiter feature1Value0.5 feature2Value0.8 endDelimiter star=
tDelimiter feature1Value0.6 feature2Value1.0 endDelimiter"

So I have two interesting points representing a picture, which is represe=
nted by a lucene document.

I now want to search for "startDelimiter (feature1Value0.5 feature2Value0=
=2E7) endDelimiter" and hopefully
get a ranking

score for interesting point 1: 0.5 (half match)
score for interesting point 2: 1.0 (full match)
average score for document     0.75(or sum of 1.5)

=2E..when I look at this now and think about this, the chance is high tha=
t lucene makes this ranking with
standard behaviour because of the higher TF value for 'feature1Value0.5'.=
=2Eso indeed my fictive
query would make no real difference for ranking..which is fantastic :)

When I think about standard 1:n queries, all of you are right, there an '=
AND' behaviour is needed -
so the span queries are adequate, with the positionIncrementGap trick.


Thank you guys, your answers really helped me a lot!


Christian






Erick Erickson schrieb:
> Note that the SpanQuery family are Querys, so they can
> be used as clauses of a BooleanQuery just fine.
>=20
>=20
> Making this work will be exciting...
> <<<a query like field1:"word3 NewNotExistingWord word1"~5
> should match.>>>
> I'm having trouble understanding the use case. I don't
> understand how the user can make sense of this, but then
> it may well be unique to your problem space. What does this
> mean to the user? Find me any documents where any pair of
> words in the phrase are within 5 of each other? Find me
> all documents with *any* matching words and order them by
> proximity possibly giving more weight to documents with the
> most matching terms? ????
>=20
>=20
> <<<I think the lack is that in the case of a PhraseQuery (and I think a=
lso
> in
> the case of the SpanQuery, but I'm not sure about yet), every term must=

> appear
> inside the phrase, it is some kind of 'must' for every term.>>>
>=20
> This is correct if I'm reading it right. Perhaps what's needed here
> is a statement of the problem you're trying to solve, because I'm
> having trouble understanding the underlying use-cases..
>=20
> Best
> Erick
>=20
>=20
> On Wed, Nov 12, 2008 at 10:17 AM, Christian Reuschling <
> christian.reuschling@gmail.com> wrote:
>=20
>> Hello Erick,
>>
>> thank you very much for this interesting idea - but I'm not sure that =
the
>> SpanQuery will make every aspect I search for.
>>
>> I think the lack is that in the case of a PhraseQuery (and I think als=
o in
>> the case of the SpanQuery, but I'm not sure about yet), every term mus=
t
>> appear
>> inside the phrase, it is some kind of 'must' for every term.
>>
>> I search for a 'should' - so the behaviour should be exactly the same =
as
>> BooleanQuery does, but only in one dataset (maybe represented as extra=

>> field
>> entry with an incremented PositionIncrementGap)
>>
>> In this context, it also was no typo with term2 in front of term1
>>
>> At the end, I want to know a score for the overlapping between two ter=
m
>> lists,
>> so in the case the index entry is
>>
>>> doc =3D new Document
>>> doc.add("field1", "word1 word2 word3")
>>> doc.add("field1", "word4 word5")
>>> IndexWriter.addDocument(doc)
>> also a query like field1:"word3 NewNotExistingWord word1"~5
>> should match.
>>
>> So the semantic of this (hypothetic) query
>> "starDelimiter (word1 notExistingWord word3) endDelimiter"
>>
>> would make it...but it is a good hint with the PositionIncrementGap. M=
aybe
>> there is a possibility to combine this with BooleanQuery?
>>
>>
>>
>>
>> Erick Erickson schrieb:
>>> It's entirely unclear to me whether facets could help, since I haven'=
t
>> used
>>> them, I've
>>> seen these mentioned on the SOLR user list, it may bear investigating=
=2E
>>>
>>> To expand on Stefan's point. I think his solution will work for you q=
uite
>>> well, but
>>> there are a couple of tricks....
>>>
>>> The first thing to understand is that (This won't compile, but you ge=
t
>> the
>>> idea)
>>>
>>> doc =3D new Document
>>> doc.add("field1", "word1 word2 word3")
>>> doc.add("field1", "word4 word5")
>>> IndexWriter.addDocument(doc)
>>>
>>> is perfectly legal. The single document added will have all 5 words i=
n
>>> "field1". But
>>> here's the trick. If you provide your own analyzer (a trivial analyze=
r
>> built
>>> from one
>>> of the standard ones?) that returns a number other than 1 (say 10) fr=
om
>>> getPositionIncrementGap the "distance" between word3 and word4 will b=
e
>>> 10 rather than 1. But the distance between word1 and word2 will be 1 =
as
>>> will the distance between word2 and word3, as will the distance betwe=
en
>>> word4 and word5
>>>
>>> How does this help, you ask? Well, SpanQuery is your friend (PhraseQu=
ery
>>> might work just as well in this case). Because you can now ask that a=
ll
>> your
>>> terms have < 10 "holes". For instance, if you made a phrase like
>>> "word1 word2"~5 it would match, as would "word1"~5 or just word1
>>>
>>> "word1 word3"~5 would NOT match since there  other tokens between
>>>
>>> "word3 word4"~5 would NOT match since the distance between them is
>>> greater than 5
>>>
>>> Note that using 10 is arbitrary, you probably really want to use
>> something
>>> much
>>> larger, say 100 larger than the maximum number of terms you expect. T=
he
>> only
>>> thing you need to watch at all is that the total length of all the te=
rms
>> and
>>> all
>>> the gaps doesn't exceed MAX_INT (MAX_INT / 2? I don't know whether th=
e
>>> integers are signed).....
>>>
>>> What's really happening here is that the "gap" is taking the place of=

>> your
>>> delimiters and you're making use of Phrase/SpanQuery characteristics
>>> to return what you want.
>>>
>>> Of course I may have completely mis-read your problem, but I'm sure
>> you'll
>>> let us know if that's the case <G>.
>>>
>>>
>>> BTW, if this isn't a typo, you probably need SpanQuery since you can
>>> specify order not being important:
>>> attName:"startDelimiter myterm2 myterm1 endDelimiter"...should also m=
atch
>>>
>>> Did you really mean to have myterm2 in front of myterm1?
>>>
>>> Best
>>> Erick
>>>
>>> On Wed, Nov 12, 2008 at 8:58 AM, Christian Reuschling <
>>> christian.reuschling@gmail.com> wrote:
>>>
>>>> Hello Friends,
>>>>
>>>> In order to offer some simple 1:n matching, currently we create seve=
ral,
>>>> counted
>>>> attributes and expand our queries that we search inside each attribu=
te,
>>>> e.g.:
>>>>
>>>> Query 'attName:myTerm'  =3D> Query 'attName1:myTerm attName2:myTerm'=

>>>>
>>>> This is not the fastest way, and sometimes not easy to handle - also=
 we
>>>> have to
>>>> consider the 1:n attributes during indexing, and must remember the
>> highest
>>>> 'n'
>>>> for query expansion. We get very big queries.
>>>>
>>>>
>>>> Currently I have some other scenario in mind, but I'm not sure how I=
 can
>>>> achieve
>>>> this. The idea is to write all n datasets into one attribute, with a=

>>>> specialized
>>>> start and end delimiter term, e.g.:
>>>>
>>>> document entry for attName:
>>>> "startDelimiter myterm1 myterm2 endDelimiter startDelimiter myterm3
>> myterm4
>>>> endDelimiter"
>>>>
>>>> When I look to this, it would go somehow into the direction of a
>>>> PhraseQuery,
>>>> where I can search e.g. for
>>>>
>>>> attName:"startDelimiter myterm1 myterm2 endDelimiter"
>>>> but the query
>>>> attName:"startDelimiter myterm1 myterm4 endDelimiter"
>>>>
>>>> would not match.
>>>>
>>>> The only thing that lacks now is that the queries
>>>> attName:"startDelimiter myterm1 endDelimiter"
>>>> attName:"startDelimiter myterm2 myterm1 endDelimiter"
>>>>
>>>> also should match - which of course isn't possible with the current
>>>> PhraseQuery
>>>> implementation.
>>>>
>>>> Best would be some construct like attName:"startDelimiter (myterm1
>> myterm2)
>>>> endDelimiter"
>>>>
>>>> Whereby the stuff inside the brackets would be a standard BooleanQue=
ry,
>> but
>>>> only
>>>> applied inside the range of the delimiters. Is this somehow possible=
, or
>> do
>>>> I
>>>> have to write my own Query implementation - and what would be the be=
st
>> way
>>>> in this case.
>>>>
>>>>
>>>> Thanks in advance
>>>>
>>>> Christian Reuschling
>>>>
>>>>
>>
>=20


--------------enig111477717B351AD584606710
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.9 (GNU/Linux)
Comment: Using GnuPG with SUSE - http://enigmail.mozdev.org

iEYEARECAAYFAkkcIDMACgkQ6EqMXq+WZg+pCACfcBpGEDtRnz+p+8xrOq+eb2QF
7o8AniicZk21CIodg2bsvPCL+J4EQJdX
=0ECk
-----END PGP SIGNATURE-----

--------------enig111477717B351AD584606710--

From java-user-return-37165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 15:03:00 2008
Return-Path: <java-user-return-37165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36898 invoked from network); 13 Nov 2008 15:03:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 15:03:00 -0000
Received: (qmail 94823 invoked by uid 500); 13 Nov 2008 15:02:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94684 invoked by uid 500); 13 Nov 2008 15:02:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94667 invoked by uid 99); 13 Nov 2008 15:02:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 07:02:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.re2.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Nov 2008 15:01:34 +0000
Received: (qmail 40241 invoked by uid 60001); 13 Nov 2008 15:01:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=mOBK1crdmrzxienmZ7a+mOUQaKUj/H5maKyqFt7Nts8e4l1oLK1gQjaOFof3GTQS3Fw9jLNtH0s3P0q8Q0UkcUglCubDVZQpwinoWI1KhNhVatDjcmk/igORENji0A5ocMNxuDTGcajeVXXj7oCkU/FYrXRUoWfZItVfiLHkNVI=;
X-YMail-OSG: QfP9wEAVM1mesiCy7mrNLj2IeBMiJOwn0EY6puI16G0Jd.ilc_S18REPGanm2mIPxZlYYPmHDirMUOk0XVL0xbSMbHolB2.WiOYfY6aa7OCUHe7_9Z4CE.HrFWusNDnDhXuKbnxmSD05UmTWRJJQ41q3YPIi.6p.Lh5cZtiqOUqEQ8ktMM.bIWDuZg--
Received: from [167.206.188.3] by web50309.mail.re2.yahoo.com via HTTP; Thu, 13 Nov 2008 07:01:17 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <1226518223.11268.6.camel@tambre>    <aec6319e0811121826x2c707cb4u7f954c38111debd1@mail.gmail.com> <49054.193.145.220.56.1226565324.squirrel@mail.freeresearch.org>
Date: Thu, 13 Nov 2008 07:01:17 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: About counting term hits
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1766194730-1226588477=:38640"
Message-ID: <255673.38640.qm@web50309.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1766194730-1226588477=:38640
Content-Type: text/plain; charset=us-ascii

Mario,

Does this help:
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/index/TermFreqVector.html

Plus:
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/index/IndexReader.html#method_summary
(look for "getTerm.Freq...")

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch




________________________________
From: "lbarcala@freeresearch.org" <lbarcala@freeresearch.org>
To: java-user@lucene.apache.org
Sent: Thursday, November 13, 2008 3:35:24 AM
Subject: Re: About counting term hits

> yes its quite possible.
> 1.you need to create term which you need to search.
> eg.
> Term term = new Term("yourfield","yourword");
>
> 2. then create a TermDoc enum.
> TermDocs provides an interface for enumerating <document, frequency> pairs
> for a term.
>
> TermDocs t = new
> FilterIndexReader(IndexReader.open("youindex")).termDocs(term);
>
> 3.Iterate through each of the terms and count the occurrence.
> int count = 0;
>  while(td.next()){
>                     count+=td.freq());
>   }
>

This helps but, what about combining this with a search criteria? I mean
to obtain the number of times the term "house" occurs in document between
year 1999 and 2005 (another field of documents). I don't find anything
related in classes used by you.

>> Hello:
>>
>> I am new to LUCENE and I am testing some issues about it. I can retrieve
>> the number of documents which satisfies a query, but I don't find how to
>> obtain the number of terms which match it.
>>
>> For example, if I search for the word "house", I want to obtain the
>> number of times the word occurs (not the number of documents).
>>
>> Is it possible to do it in LUCENE?
>>
>> Thanks in advance,
>>
>>  Mario Barcala
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> ----------------------------------------
> "Help Ever Hurt Never"- Baba
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0-1766194730-1226588477=:38640--

From java-user-return-37166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 16:07:00 2008
Return-Path: <java-user-return-37166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58658 invoked from network); 13 Nov 2008 16:07:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 16:07:00 -0000
Received: (qmail 30661 invoked by uid 500); 13 Nov 2008 16:07:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30633 invoked by uid 500); 13 Nov 2008 16:07:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30622 invoked by uid 99); 13 Nov 2008 16:07:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 08:07:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sven.carlberg@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 16:05:40 +0000
Received: by yw-out-2324.google.com with SMTP id 3so399099ywj.5
        for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 08:06:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=fPBYd0OpcGnrVDB4F0HQ5bFWwdey1OEoHvX/wnhsT/s=;
        b=FKnEd9clsMrh0FN0iGpbIfJzLpHjnpbE/pevGBA9DhqivUQL/sgO9ybfqjLYsi8HX0
         Ux12pD7ZTENT8X/Kmead+U0SfixHpnVK0HOx41xWiQjI/D3D7F7BfnsAafQiC+nAOLLx
         r2Iug+yqBFKB499voeqfTzR1iFlHgrKMnd1Es=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=ZVywihITQHeTAJCnlD/6r8WqFn0CjjXJUN8FZYDHJ+CQXGuzYBQUKvThC31Y7sj2f9
         GAfZFkXSzSWJdD6qrVjiB5qyHV8P60RPyChJ/noilZi9vFFF+R9n2OdvQ+E0SDU9evOw
         xFHF+qc8wEdP2G8HwILpuSOXDqSML/9CAKd0o=
Received: by 10.90.28.20 with SMTP id b20mr9226355agb.53.1226592373564;
        Thu, 13 Nov 2008 08:06:13 -0800 (PST)
Received: from ?192.168.1.210? (pool-96-231-23-56.washdc.fios.verizon.net [96.231.23.56])
        by mx.google.com with ESMTPS id 52sm5111711hsf.1.2008.11.13.08.06.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 13 Nov 2008 08:06:11 -0800 (PST)
Message-ID: <491C510F.8040005@gmail.com>
Date: Thu, 13 Nov 2008 11:08:47 -0500
From: Sven <sven.carlberg@gmail.com>
User-Agent: Thunderbird 1.5.0.13 (X11/20070824)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: constructing a mini-index with just the number of hits for a term
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

First - I apologize for the double post on my earlier email.  The first 
time I sent it I received an error message from support@magentanews.com 
saying that I should instead send email to java-user@meltwater.com so I 
thought it did not go through. 

My question is this - is there a way to use the Lucene/Solr 
infrastructure to create a mini-index that simply contains a lookup 
table of terms and the number of times they have appeared? 

I do not need to record which documents have them nor do I need to know 
where in the documents they appear.  There could be (and probably will 
be) more than 2^32 terms, however.  I'm not sure if that makes a 
difference to the Lucene backend, but thought it might be relevant. 

This question coincides with my earlier question about counting the 
times a given term is associated with another term.  I figure that this 
would be more easily accomplished by making the mini-index described 
above alongside the normal index when a document is indexed.  For 
example, when scanning:

Bravely bold Sir Robin, brought forth from Camelot.  He was not afraid 
to die!  Oh, brave Sir Robin!

In addition to the normal indexing function of Lucene, I would like to 
write something on the backend to also index:

bravely|bold
bravely|sir
bravely|robin
bravely|brought
bravely|forth
bold|sir
bold|robin
bold|brought
bold|forth
bold|camelot  ("from" being a stop word)
...and so on

I only need to keep a running total of each "bravely|bold" term, 
however, since the number of terms will be quite large and keeping track 
of the document/termpositions would translate to a lot of wasted HD space. 

If such a thing is not already in place, could someone let me know if 
there are some tutorials, documentation, or presentations that describe 
the inner workings of Lucene and the theories/implementation at work for 
the actual file formats, structures, data manipulations, etc?  (The 
javadocs don't go into this kind of detail.)  I'm sure I can sift 
through the code and eventually make sense of it, but if there is 
documentation out there, I'd prefer to peruse that first.  My thought 
being that I can simply generate my own kind of hash for each combined 
term and write it out to a custom file structure similar to Lucene - but 
the specifics of how to (optimally) do so are not plain to me yet. 

Thanks again!
-Sven


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 16:36:24 2008
Return-Path: <java-user-return-37167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70106 invoked from network); 13 Nov 2008 16:36:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 16:36:24 -0000
Received: (qmail 80065 invoked by uid 500); 13 Nov 2008 16:36:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80026 invoked by uid 500); 13 Nov 2008 16:36:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80015 invoked by uid 99); 13 Nov 2008 16:36:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 08:36:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.76.150.237] (HELO slcb179.piensasolutions.com) (217.76.150.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 16:35:03 +0000
Received: from mail.freeresearch.org (localhost.localdomain [127.0.0.1])
	by slcb179.piensasolutions.com (Postfix) with ESMTP id CCA489A8524
	for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 17:35:13 +0100 (CET)
Received: from 83.165.123.157
        (SquirrelMail authenticated user baw947c)
        by mail.freeresearch.org with HTTP;
        Thu, 13 Nov 2008 17:35:13 +0100 (CET)
Message-ID: <57465.83.165.123.157.1226594113.squirrel@mail.freeresearch.org>
In-Reply-To: <255673.38640.qm@web50309.mail.re2.yahoo.com>
References: <1226518223.11268.6.camel@tambre>   
    <aec6319e0811121826x2c707cb4u7f954c38111debd1@mail.gmail.com>
    <49054.193.145.220.56.1226565324.squirrel@mail.freeresearch.org>
    <255673.38640.qm@web50309.mail.re2.yahoo.com>
Date: Thu, 13 Nov 2008 17:35:13 +0100 (CET)
Subject: Re: About counting term hits
From: lbarcala@freeresearch.org
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4-1.FC3
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

> Mario,
>
> Does this help:
> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/index/TermFreqVector.html
>
> Plus:
> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/index/IndexReader.html#method_summary
> (look for "getTerm.Freq...")
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>

So, if I undertand the solution, the main steps to do what I propose is:

1) To obtain the documents which match the query (documents which include
the word "house")
2) To loop throw matching documents to access the IndexReader for
obtaining their term frequencies.
3) To obtain from TermFreqVector the frequencies of the Term ("house") to
calculate the result.

And, if it is a very frequent query and there are much documents (> 10.000),
would LUCENE solve it in a reasonable time? A query might match several
hundred documents.

Thank you,

  Mario Barcala

>>> Hello:
>>>
>>> I am new to LUCENE and I am testing some issues about it. I can
>>> retrieve
>>> the number of documents which satisfies a query, but I don't find how
>>> to
>>> obtain the number of terms which match it.
>>>
>>> For example, if I search for the word "house", I want to obtain the
>>> number of times the word occurs (not the number of documents).
>>>
>>> Is it possible to do it in LUCENE?
>>>
>>> Thanks in advance,
>>>
>>>  Mario Barcala
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> --
>> ----------------------------------------
>> "Help Ever Hurt Never"- Baba
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 16:52:08 2008
Return-Path: <java-user-return-37168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78043 invoked from network); 13 Nov 2008 16:52:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 16:52:08 -0000
Received: (qmail 9562 invoked by uid 500); 13 Nov 2008 16:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9222 invoked by uid 500); 13 Nov 2008 16:52:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9211 invoked by uid 99); 13 Nov 2008 16:52:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 08:52:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 16:50:48 +0000
Received: by rv-out-0506.google.com with SMTP id f6so968431rvb.5
        for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 08:51:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:in-reply-to:references:x-mailer:mime-version
         :content-type:content-transfer-encoding;
        bh=2AXRZ3yR/iQrgCabYDLKBguIcOMb5vuEN9I1jlTb6xU=;
        b=wg+t+sT+zyppBkWw4xDBnymMlfO6cA0a/XEYqkse8r0cZ3xtLWlg18VfDL6vjzJBjK
         dXtYYlzvDAguOJ+F3nR4e1j9KRAifuGa36BiON97ruLT6z2f2rgwt9JBBsnyTG6nmTSh
         NOZVRsswR3DQNONI0OaPESn+qPGpcOlT0+xPk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:in-reply-to:references:x-mailer
         :mime-version:content-type:content-transfer-encoding;
        b=cHgxSW2WsIKIKMI+NGJSlJWYCITr6weML9AWrX9RHMiK5FWx3s2zK0yhklSe1H+Yrn
         lf32QWOJl50XqiaBmVDsbr4GgvSFDQD7/LHn1K6GJCP1319GhHzAJq45L+0qRkK9+Llc
         8NOj+MTuduOOYxr0CeXbg4S9mbUTX8oTAv6HE=
Received: by 10.141.180.5 with SMTP id h5mr5576453rvp.238.1226595082828;
        Thu, 13 Nov 2008 08:51:22 -0800 (PST)
Received: from localhost ([189.107.137.13])
        by mx.google.com with ESMTPS id b8sm31773979rvf.3.2008.11.13.08.51.21
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 13 Nov 2008 08:51:22 -0800 (PST)
Date: Thu, 13 Nov 2008 14:51:08 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using AND with MultiFieldQueryParser
Message-Id: <20081113145108.1144bd5a.almeidaraf@gmail.com>
In-Reply-To: <295da8fe0811130123xd248daaue9050a96f25d5d0@mail.gmail.com>
References: <20081113030002.1049d0ed.almeidaraf@gmail.com>
	<295da8fe0811130123xd248daaue9050a96f25d5d0@mail.gmail.com>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 13 Nov 2008 14:53:59 +0530
"prabin meitei" <prabin.meitei@gmail.com> wrote:

> Hi,
> From whatever you have written you are trying to write a query
> *word1 AND stopword AND word2
> *this means that the result should contain all of word1, word2 and the
> stopword.
> 
> Since you have already removed the stopword during index time you will never
> find any document matching your query. (this is expected behaviour)
> you can possibly use word1 OR stopword OR word2 (depends on what you want in
> the result)
>  If you can clarify more about what you want in the result we can discuss on
> what can be done.

I wanted MultiFieldQueryParser to ignore any stopword the user may type
in. In that particular case I'd like the result to be word1 AND word2. I
thought that was what would happen because I pass the Analyzer to
MultiFieldQueryParser, so I expected the parser to ignore stopwords for
fields which the analyzer drops stopwords (I use PerFieldAnalyzerWrapper
analyzer).

> On Thu, Nov 13, 2008 at 10:30 AM, Rafael Cunha de Almeida <
> almeidaraf@gmail.com> wrote:
> 
> > Hello,
> >
> > I used an Analyzer which removes stopwords when indexing, then I wanted
> > to do an AND search using MultiFieldQueryParser. So I did this:
> >        word1 AND stopword AND word2
> > I thought the stopword would be ignored by the searcher (I use the same
> > Analyzer to index and search). But instead, I get no results whenever I
> > have a stopword like that. If I remove the stopword, giving me:
> >        word1 AND word2
> > then the search is sucessful. Is that the expected behaviour? Am I
> > doing something wrong?
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 17:13:00 2008
Return-Path: <java-user-return-37169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85904 invoked from network); 13 Nov 2008 17:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 17:13:00 -0000
Received: (qmail 50120 invoked by uid 500); 13 Nov 2008 17:13:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49749 invoked by uid 500); 13 Nov 2008 17:13:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49738 invoked by uid 99); 13 Nov 2008 17:13:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 09:13:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.222.209.11] (HELO mirkwood.informatics.jax.org) (209.222.209.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 17:11:37 +0000
Received: from [127.0.0.1] (corona [209.222.209.245])
	by mirkwood.informatics.jax.org (8.13.8/8.13.8) with ESMTP id mADHCHI1008801
	for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 12:12:18 -0500 (EST)
	(envelope-from mhall@informatics.jax.org)
Message-ID: <491C5FF1.5080206@informatics.jax.org>
Date: Thu, 13 Nov 2008 12:12:17 -0500
From: Matthew Hall <mhall@informatics.jax.org>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using AND with MultiFieldQueryParser
References: <20081113030002.1049d0ed.almeidaraf@gmail.com>	<295da8fe0811130123xd248daaue9050a96f25d5d0@mail.gmail.com> <20081113145108.1144bd5a.almeidaraf@gmail.com>
In-Reply-To: <20081113145108.1144bd5a.almeidaraf@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-PMX-Version: 5.4.6.353000, Antispam-Engine: 2.6.1.350677, Antispam-Data: 2008.11.13.170135
X-PerlMx-Spam: Gauge=IIIIIII, Probability=8%, Report='BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, __BOUNCE_CHALLENGE_SUBJ 0, __CANPHARM_UNSUB 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __FRAUD_419_BODY_WEBMAIL 0, __FRAUD_419_WEBMAIL 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __USER_AGENT 0'
X-Virus-Checked: Checked by ClamAV on apache.org

Which Analyzer have you assigned per field?

The PerFieldAnalyzerWrapper uses a default analyzer (the one you passed 
during its construction), and then you assign specific analyzers to each 
field that you want to have special treatment.

For example:

        PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(
                new StandardAnalyzer());
        aWrapper.addAnalyzer("data", new MGIAnalyzer());
        aWrapper.addAnalyzer("sdata", new StemmedMGIAnalyzer());

Now, for the fields in question, have you assigned an Analyzer that 
doesn't actually use stopwords? (there are several available in core)  
Or are you perchance using a custom Analyzer that doesn't process stop 
words?

Could you possibly post your Initialization code for this?  If so I 
think we could be of more help to you.

Matt

Rafael Cunha de Almeida wrote:
> On Thu, 13 Nov 2008 14:53:59 +0530
> "prabin meitei" <prabin.meitei@gmail.com> wrote:
>
>   
>> Hi,
>> From whatever you have written you are trying to write a query
>> *word1 AND stopword AND word2
>> *this means that the result should contain all of word1, word2 and the
>> stopword.
>>
>> Since you have already removed the stopword during index time you will never
>> find any document matching your query. (this is expected behaviour)
>> you can possibly use word1 OR stopword OR word2 (depends on what you want in
>> the result)
>>  If you can clarify more about what you want in the result we can discuss on
>> what can be done.
>>     
>
> I wanted MultiFieldQueryParser to ignore any stopword the user may type
> in. In that particular case I'd like the result to be word1 AND word2. I
> thought that was what would happen because I pass the Analyzer to
> MultiFieldQueryParser, so I expected the parser to ignore stopwords for
> fields which the analyzer drops stopwords (I use PerFieldAnalyzerWrapper
> analyzer).
>
>   
>> On Thu, Nov 13, 2008 at 10:30 AM, Rafael Cunha de Almeida <
>> almeidaraf@gmail.com> wrote:
>>
>>     
>>> Hello,
>>>
>>> I used an Analyzer which removes stopwords when indexing, then I wanted
>>> to do an AND search using MultiFieldQueryParser. So I did this:
>>>        word1 AND stopword AND word2
>>> I thought the stopword would be ignored by the searcher (I use the same
>>> Analyzer to index and search). But instead, I get no results whenever I
>>> have a stopword like that. If I remove the stopword, giving me:
>>>        word1 AND word2
>>> then the search is sucessful. Is that the expected behaviour? Am I
>>> doing something wrong?
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 13 23:13:35 2008
Return-Path: <java-user-return-37170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1912 invoked from network); 13 Nov 2008 23:13:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Nov 2008 23:13:35 -0000
Received: (qmail 88211 invoked by uid 500); 13 Nov 2008 23:13:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88173 invoked by uid 500); 13 Nov 2008 23:13:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88162 invoked by uid 99); 13 Nov 2008 23:13:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 15:13:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Nov 2008 23:12:11 +0000
Received: (qmail 96397 invoked by uid 60001); 13 Nov 2008 23:11:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=B0PXRSypkAdjtRnMLnW8h8HCjQqfirnbHn/SSarQ4YdghAVxeF4sn8mdR0S+6GWw30WJNIqmIh2yHktsPAPjjCqLGI5aZd1vZ8iyG1E0DJPO79fniD3ParhTn9+yLaSx4aKtf6jzP7uJ4LZxtxfoiEZFBWL9gZZDz/XKLtnzOK4=;
X-YMail-OSG: 3ARwleIVM1k.uBLVkGtgFPtmZP28RVwIlurohHaxKNK5kTh1gpcJMOZlHyQHFLSBGmwonmYyduwovB6QfQsqWiNPON7s_BgzqLSrmpGZKzh7rCHZaSh_eeYdzrJs75.WD4BW1.2YZnzUeEjBiGGf3a1036lk0kD3xSwiUvVpQk3CbFBXGQs4ecWXLg--
Received: from [167.206.188.3] by web50306.mail.re2.yahoo.com via HTTP; Thu, 13 Nov 2008 15:11:53 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <1226518223.11268.6.camel@tambre>       <aec6319e0811121826x2c707cb4u7f954c38111debd1@mail.gmail.com>    <49054.193.145.220.56.1226565324.squirrel@mail.freeresearch.org>    <255673.38640.qm@web50309.mail.re2.yahoo.com> <57465.83.165.123.157.1226594113.squirrel@mail.freeresearch.org>
Date: Thu, 13 Nov 2008 15:11:53 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: About counting term hits
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-121500619-1226617913=:96353"
Message-ID: <266961.96353.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-121500619-1226617913=:96353
Content-Type: text/plain; charset=us-ascii

The more Documents you have to look at the slower it will be, but it may still be fast enough - it's impossible to tell without considering index size, query volume, hardware, number of hits/Docs, etc.


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch




________________________________
From: "lbarcala@freeresearch.org" <lbarcala@freeresearch.org>
To: java-user@lucene.apache.org
Sent: Thursday, November 13, 2008 11:35:13 AM
Subject: Re: About counting term hits

> Mario,
>
> Does this help:
> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/index/TermFreqVector.html
>
> Plus:
> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/index/IndexReader.html#method_summary
> (look for "getTerm.Freq...")
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>

So, if I undertand the solution, the main steps to do what I propose is:

1) To obtain the documents which match the query (documents which include
the word "house")
2) To loop throw matching documents to access the IndexReader for
obtaining their term frequencies.
3) To obtain from TermFreqVector the frequencies of the Term ("house") to
calculate the result.

And, if it is a very frequent query and there are much documents (> 10.000),
would LUCENE solve it in a reasonable time? A query might match several
hundred documents.

Thank you,

  Mario Barcala

>>> Hello:
>>>
>>> I am new to LUCENE and I am testing some issues about it. I can
>>> retrieve
>>> the number of documents which satisfies a query, but I don't find how
>>> to
>>> obtain the number of terms which match it.
>>>
>>> For example, if I search for the word "house", I want to obtain the
>>> number of times the word occurs (not the number of documents).
>>>
>>> Is it possible to do it in LUCENE?
>>>
>>> Thanks in advance,
>>>
>>>  Mario Barcala
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> --
>> ----------------------------------------
>> "Help Ever Hurt Never"- Baba
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0-121500619-1226617913=:96353--

From java-user-return-37171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 01:54:07 2008
Return-Path: <java-user-return-37171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76928 invoked from network); 14 Nov 2008 01:54:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 01:54:07 -0000
Received: (qmail 34220 invoked by uid 500); 14 Nov 2008 01:54:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34127 invoked by uid 500); 14 Nov 2008 01:54:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34107 invoked by uid 99); 14 Nov 2008 01:54:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 17:54:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 01:52:40 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id mAE1qfm09023;
	Thu, 13 Nov 2008 19:52:41 -0600
Message-ID: <491CD9CD.5090908@getopt.org>
Date: Fri, 14 Nov 2008 02:52:13 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: undisclosed-recipients:;
Subject: [ANN] Luke 0.9 released
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I'm happy to announce that the new release of Luke - the Lucene Index 
Toolbox - is available for download (or WebStart use) here:

	http://www.getopt.org/luke

Changes in v. 0.9:
------------------
This release adds many functionality enhancements and advanced features 
available in Lucene 2.4.

* New features and improvements:
   o Added new tools:
     + Check Index - checks Lucene indexes for problems, and can fix some
       of them. This is a GUI front-end to the Lucene CheckIndex tool.

     + Export to XML - exports index data and metadata to an XML file.
       This is available both from the GUI and from the command-line.

   o Significantly improved Optimize and Cleanup tools.

   o Added ability to set norms on any indexed field in a document, or a 
range of documents.

   o Delete multiple documents by specifying ranges of document numbers.

   o Added support for new field functionality: omitTF and binary fields.

   o Improve the low-level information about the index, including format 
version.

   o Show interesting details about IndexCommit points and associated files.

   o Add short explanations of index files' functions.

   o Improve document reconstruction - now the information from 
TermFreqVector can be used if available. Also, DocReconstructor can be 
used outside of Luke.

   o Significantly improved advanced search options - QueryParser 
settings, Similarity and HitCollector settings.

   o Read-only functionality is supported directly in IndexReader.

* Bug fixes:
A lot of effort went into refactoring the code, moving away if possible 
from the spaghetti code influenced by Thinlet and into a modular design. 
Still much needs to be done here. :(

This means that there are likely many more bugs than in the previous 
release, although I tested all functionality to make sure that there is 
no data loss.

HOWEVER, if you work with precious data, it's always a good idea to use 
the "Read-only" option.

As usually, bug reports or suggestions for improvements, or even better 
patches, are welcome!

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 06:40:08 2008
Return-Path: <java-user-return-37172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96930 invoked from network); 14 Nov 2008 06:40:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 06:40:08 -0000
Received: (qmail 34372 invoked by uid 500); 14 Nov 2008 06:40:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34339 invoked by uid 500); 14 Nov 2008 06:40:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34328 invoked by uid 99); 14 Nov 2008 06:40:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 22:40:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [12.11.148.84] (HELO irp2.ptc.com) (12.11.148.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 06:38:46 +0000
X-IronPort-AV: E=Sophos;i="4.33,601,1220241600"; 
   d="scan'208";a="28505749"
Received: from unknown (HELO HQ-EX3FE2.ptcnet.ptc.com) ([132.253.201.63])
  by irp2.ptc.com with ESMTP; 14 Nov 2008 01:39:30 -0500
Received: from HQ-MAIL3.ptcnet.ptc.com ([132.253.202.91]) by HQ-EX3FE2.ptcnet.ptc.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 14 Nov 2008 01:39:29 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Scoped Search and Facets generation using Lucene
Date: Fri, 14 Nov 2008 01:39:28 -0500
Message-ID: <5E3DE97916D44040A00CFCC4CE5847DB08568F88@HQ-MAIL3.ptcnet.ptc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoped Search and Facets generation using Lucene
thread-index: AclGI74b6EiMOT/PTcCALeZ51WTgAA==
From: "Bapat, Mayur" <mbapat@ptc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Nov 2008 06:39:29.0852 (UTC) FILETIME=[BEF867C0:01C94623]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Does Lucene support Scoped Searches? My intention is to index an XML
String and search for a matching element/attribute value from that XML
by specifying scope(path).
Also is there any direct support for Facets building in Lucene?=20

Regards,
Mayur

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 07:50:17 2008
Return-Path: <java-user-return-37173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24998 invoked from network); 14 Nov 2008 07:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 07:50:16 -0000
Received: (qmail 78805 invoked by uid 500); 14 Nov 2008 07:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78776 invoked by uid 500); 14 Nov 2008 07:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78765 invoked by uid 99); 14 Nov 2008 07:50:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Nov 2008 23:50:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mouryaravi@gmail.com designates 209.85.142.188 as permitted sender)
Received: from [209.85.142.188] (HELO ti-out-0910.google.com) (209.85.142.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 07:48:55 +0000
Received: by ti-out-0910.google.com with SMTP id b8so904056tic.11
        for <java-user@lucene.apache.org>; Thu, 13 Nov 2008 23:49:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :content-type:content-transfer-encoding:mime-version:subject:date
         :x-mailer;
        bh=tWqGbYvDtsbMK00tExnQ1O8M++yYpwluXWrJRYq6DJc=;
        b=KMK9prFcUwkS5AA2wRjyqVk+4tvy0GzmKE3K7FQLbaGhW1RGlwcr4oUl42hNqfXBZI
         1KWEBIXM5BewZYpoxQrAzELnQJWV8/kYet2JtazOPSngqhbg2PBwgCd1LGnhJrFFAykw
         XRwfFOedgjX7MMg9y7dVQKSP6Hp0Uj5DTiud4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:content-type:content-transfer-encoding
         :mime-version:subject:date:x-mailer;
        b=YPXSFwLYgRLocL/jaIaVyExfxXgLERHM4d5fkDb4H9jdpUOsw9EKQf3+iwo3vTUGHm
         c/KpxM1BhZdTJ3u5zkfREvfSYT/jUzINFixLO6eLn/b9+BK/thODPalIGrkf66jfqWMQ
         2phPInlgghQsR+ipl4ZiqWSqBRd7qHjTNsZUE=
Received: by 10.110.109.12 with SMTP id h12mr712808tic.56.1226648978369;
        Thu, 13 Nov 2008 23:49:38 -0800 (PST)
Received: from ?117.195.133.164? ([117.195.133.164])
        by mx.google.com with ESMTPS id d1sm906449tid.15.2008.11.13.23.49.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 13 Nov 2008 23:49:37 -0800 (PST)
Message-Id: <85E2F8AA-2469-4A3C-8A9A-A9CCD9D2218B@gmail.com>
From: Ravi L <mouryaravi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Storing part of the field
Date: Fri, 14 Nov 2008 13:19:24 +0530
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am simple question.

I want a string to be indexed, but stored part of that string.

For example, if my string is "foo bar", I want to index whole  
string("foo bar") but store the first 3 characters("foo") of it. How  
can I do this with the lucene APIs?


thanks
ravi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 08:02:57 2008
Return-Path: <java-user-return-37174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28562 invoked from network); 14 Nov 2008 08:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 08:02:57 -0000
Received: (qmail 96669 invoked by uid 500); 14 Nov 2008 08:02:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96639 invoked by uid 500); 14 Nov 2008 08:02:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96628 invoked by uid 99); 14 Nov 2008 08:02:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 00:02:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.233 as permitted sender)
Received: from [209.85.198.233] (HELO rv-out-0506.google.com) (209.85.198.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 08:01:37 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1275279rvb.5
        for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 00:02:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=m7qLj3/uHu9fNV7JQX6ZzDTOovVdBtW8n3Ux7L5Anh0=;
        b=wkIr9ANTUaBOtu4vWyl7ArpEIQAvMqV7qYQi1DO44kozeGpFO3txIp9BrjJht2WQ7M
         MnCYB8c5QDamksl8OaB1ra1cGB3G8ktR1k9d4PuJeqUKg/oVi+ytK3p7nU2cLJ8gfCg6
         ZMHc5mStD7IyCmbtBVlxPYFORIV1RkEPV00Hc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=g7Hj7ekitNGjutrNd1QPt3eIv/8OtUaQ4sS9g71nOoV80i4q6k0yYnx2OSM62qCR8e
         2Vjk419BMlMnXE7kb/Z/MmtvmUYyI1H1+UGQZ5/YA3BAWSOtsCnCA6+Ko/DhI4ympg7X
         pg/IMudXECcyWgyBblE3Qc4mpD5ZqDXa2i0Cw=
Received: by 10.142.199.10 with SMTP id w10mr269526wff.332.1226649731273;
        Fri, 14 Nov 2008 00:02:11 -0800 (PST)
Received: by 10.142.106.1 with HTTP; Fri, 14 Nov 2008 00:02:11 -0800 (PST)
Message-ID: <867513fe0811140002u40a3e7b7y7f9061b7a6e33c3@mail.gmail.com>
Date: Fri, 14 Nov 2008 13:32:11 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Storing part of the field
In-Reply-To: <85E2F8AA-2469-4A3C-8A9A-A9CCD9D2218B@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8159_2456133.1226649731264"
References: <85E2F8AA-2469-4A3C-8A9A-A9CCD9D2218B@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8159_2456133.1226649731264
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Ravi,
In that case, you could have 2 fields. One of them would be indexed (i.e.
"foo bar") and you could use the other only to store as per your logic.
Hope this solves your purpose.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Fri, Nov 14, 2008 at 1:19 PM, Ravi L <mouryaravi@gmail.com> wrote:

> Hi,
>
> I am simple question.
>
> I want a string to be indexed, but stored part of that string.
>
> For example, if my string is "foo bar", I want to index whole string("foo
> bar") but store the first 3 characters("foo") of it. How can I do this with
> the lucene APIs?
>
>
> thanks
> ravi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8159_2456133.1226649731264--

From java-user-return-37175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 08:04:53 2008
Return-Path: <java-user-return-37175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29272 invoked from network); 14 Nov 2008 08:04:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 08:04:53 -0000
Received: (qmail 99205 invoked by uid 500); 14 Nov 2008 08:04:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99172 invoked by uid 500); 14 Nov 2008 08:04:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99159 invoked by uid 99); 14 Nov 2008 08:04:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 00:04:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [12.11.148.84] (HELO irp2.ptc.com) (12.11.148.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 08:03:31 +0000
X-IronPort-AV: E=Sophos;i="4.33,602,1220241600"; 
   d="scan'208";a="28508239"
Received: from unknown (HELO hq-ex3fe3.ptcnet.ptc.com) ([132.253.201.67])
  by irp2.ptc.com with ESMTP; 14 Nov 2008 03:04:14 -0500
Received: from HQ-MAIL3.ptcnet.ptc.com ([132.253.202.91]) by hq-ex3fe3.ptcnet.ptc.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 14 Nov 2008 03:04:13 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Scoped Search and Facets generation using Lucene
Date: Fri, 14 Nov 2008 03:04:12 -0500
Message-ID: <5E3DE97916D44040A00CFCC4CE5847DB08568FCA@HQ-MAIL3.ptcnet.ptc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoped Search and Facets generation using Lucene
thread-index: AclGI74b6EiMOT/PTcCALeZ51WTgAAAC8O/g
From: "Bapat, Mayur" <mbapat@ptc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Nov 2008 08:04:13.0906 (UTC) FILETIME=[954D7B20:01C9462F]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Does Lucene support Scoped Searches? My intention is to index an XML
String and search for a matching element/attribute value from that XML
by specifying scope(path).
Also is there any direct support for Facets building in Lucene?=20

Regards,
Mayur

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 08:07:50 2008
Return-Path: <java-user-return-37176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30437 invoked from network); 14 Nov 2008 08:07:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 08:07:50 -0000
Received: (qmail 3445 invoked by uid 500); 14 Nov 2008 08:07:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3412 invoked by uid 500); 14 Nov 2008 08:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3401 invoked by uid 99); 14 Nov 2008 08:07:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 00:07:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mouryaravi@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 08:06:29 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1306834wfc.20
        for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 00:07:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=kgdzi6yINRS9Lm+6Z0cJRelNxDnpMGwXbSj2IC9zaPM=;
        b=azbQKprBXVuAeG6t+/QJgFOc5QOM+u4Gon6s8+433v4Q3rj0o62WTth/ZwKXgtvJVZ
         6SoJgxnXmLM04kvCm6pKiWysbEFSziN6mbuakCdfGjj8OdqRP2bc2JvURLQlyPGRBoYS
         dpO6DTpzHXlpfmdOjJ6MrE4FmYhTKTAK+zqN4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=TtZDSgTSBcvT3qoUvCJdRweVCG1fFjAFRbjtSjQ07cb6IsZS+MPX56iwm15fZ6rro1
         ONdTBNesrNj19vfLaoq4EbHjjpXEgg1ZppSqmb/mvxZNg6B3FQo60mMj80KIYC0R2ASM
         AjPBk3w4CVwCBA94yWp30H6dqdWdEz+Q2pYM0=
Received: by 10.142.147.15 with SMTP id u15mr273665wfd.226.1226650021485;
        Fri, 14 Nov 2008 00:07:01 -0800 (PST)
Received: from ?117.195.133.164? ([117.195.133.164])
        by mx.google.com with ESMTPS id 22sm580775wfg.30.2008.11.14.00.06.57
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 14 Nov 2008 00:07:01 -0800 (PST)
Message-Id: <9A47D66B-94DE-4BD3-B549-1371538DB540@gmail.com>
From: Ravi L <mouryaravi@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <867513fe0811140002u40a3e7b7y7f9061b7a6e33c3@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: Storing part of the field
Date: Fri, 14 Nov 2008 13:36:48 +0530
References: <85E2F8AA-2469-4A3C-8A9A-A9CCD9D2218B@gmail.com> <867513fe0811140002u40a3e7b7y7f9061b7a6e33c3@mail.gmail.com>
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Anshum!

This can be possible. But, I am searching for is to do this with only  
one field.


thanks
ravi
On 14-Nov-08, at 1:32 PM, Anshum wrote:

> Hi Ravi,
> In that case, you could have 2 fields. One of them would be indexed  
> (i.e.
> "foo bar") and you could use the other only to store as per your  
> logic.
> Hope this solves your purpose.
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Fri, Nov 14, 2008 at 1:19 PM, Ravi L <mouryaravi@gmail.com> wrote:
>
>> Hi,
>>
>> I am simple question.
>>
>> I want a string to be indexed, but stored part of that string.
>>
>> For example, if my string is "foo bar", I want to index whole  
>> string("foo
>> bar") but store the first 3 characters("foo") of it. How can I do  
>> this with
>> the lucene APIs?
>>
>>
>> thanks
>> ravi
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 10:30:13 2008
Return-Path: <java-user-return-37177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82114 invoked from network); 14 Nov 2008 10:30:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 10:30:13 -0000
Received: (qmail 56071 invoked by uid 500); 14 Nov 2008 10:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56030 invoked by uid 500); 14 Nov 2008 10:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56019 invoked by uid 99); 14 Nov 2008 10:30:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 02:30:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 Nov 2008 10:28:48 +0000
Received: (qmail 61122 invoked by uid 60001); 14 Nov 2008 10:29:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=vg+Y84g2aAUAm7Vxv9LyEmT5Qtv6oDARkqu3aEthwbvUYTBnT3o2uTMIy2xyb5sRAb5wPPnFR4bFfwyW8ALpSMh6jMgHcHtpUY2NPu40nu+uwBZSnVREPqeEkOSdigqWfME7+tlVeb9Ak8gZg6AGs+FZ7qrKzOeZb9h1qMgiax0=;
X-YMail-OSG: FBGaphsVM1mprJgOAXWbeUuwFaQmtn1qheq60.CLNMkYOcvcNi9F_lf7YrHpF3wv28OngdS02E6Hz6meZSVMaR2UALAXn8Ntz2Vj1Q3UMFSnj.jPrP9yfGsZJFgJtkObSF9KCM.xzbCQH3yufxDVeoqxbkkHq4sa7qkrtIeJ4EhwGFhMjTIdrvT8.eC9
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Fri, 14 Nov 2008 10:29:29 GMT
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <491CD9CD.5090908@getopt.org>
Date: Fri, 14 Nov 2008 10:29:29 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: [ANN] Luke 0.9 released
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <36239.60678.qm@web26002.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Andrzej,=0A=0AThanks for the update. Looks like you've been busy adding =
some great new features!=0A=0AI think you may have a bug in opening an inde=
x with prior commit points, though. I want to keep these in my index and so=
 I opened it in Luke selecting the "open read only" and "keep all commit po=
ints" checkboxes.=0AI can see in the code that under these conditions you t=
ake care to use a "KeepAllDeletionPolicy" but line 176 of IndexGate.java is=
 hardcoded with a "KeepOnlyLastCommitDeletionPolicy".=0AThis wiped my prior=
 commit points (No worries - it was only a test index).=0AThe call stack le=
ading to this code was:=0A   Luke.showFiles=0A       Luke.getIndexDeletable=
Names=0A          IndexGate.GetDeletableFiles=0A=0AThe fix could be to pass=
 the policy through this stack but may "opening read only" should mean just=
 that and NO deletes at all are ever done - regardless?=0A=0ACheers,=0AMark=
=0A=0A=0A=0A=0A----- Original Message ----=0AFrom: Andrzej Bialecki <ab@get=
opt.org>=0ASent: Friday, 14 November, 2008 1:52:13=0ASubject: [ANN] Luke 0.=
9 released=0A=0AHi all,=0A=0AI'm happy to announce that the new release of =
Luke - the Lucene Index Toolbox - is available for download (or WebStart us=
e) here:=0A=0A    http://www.getopt.org/luke=0A=0AChanges in v. 0.9:=0A----=
--------------=0AThis release adds many functionality enhancements and adva=
nced features available in Lucene 2.4.=0A=0A* New features and improvements=
:=0A  o Added new tools:=0A    + Check Index - checks Lucene indexes for pr=
oblems, and can fix some=0A      of them. This is a GUI front-end to the Lu=
cene CheckIndex tool.=0A=0A    + Export to XML - exports index data and met=
adata to an XML file.=0A      This is available both from the GUI and from =
the command-line.=0A=0A  o Significantly improved Optimize and Cleanup tool=
s.=0A=0A  o Added ability to set norms on any indexed field in a document, =
or a range of documents.=0A=0A  o Delete multiple documents by specifying r=
anges of document numbers.=0A=0A  o Added support for new field functionali=
ty: omitTF and binary fields.=0A=0A  o Improve the low-level information ab=
out the index, including format version.=0A=0A  o Show interesting details =
about IndexCommit points and associated files.=0A=0A  o Add short explanati=
ons of index files' functions.=0A=0A  o Improve document reconstruction - n=
ow the information from TermFreqVector can be used if available. Also, DocR=
econstructor can be used outside of Luke.=0A=0A  o Significantly improved a=
dvanced search options - QueryParser settings, Similarity and HitCollector =
settings.=0A=0A  o Read-only functionality is supported directly in IndexRe=
ader.=0A=0A* Bug fixes:=0AA lot of effort went into refactoring the code, m=
oving away if possible from the spaghetti code influenced by Thinlet and in=
to a modular design. Still much needs to be done here. :(=0A=0AThis means t=
hat there are likely many more bugs than in the previous release, although =
I tested all functionality to make sure that there is no data loss.=0A=0AHO=
WEVER, if you work with precious data, it's always a good idea to use the "=
Read-only" option.=0A=0AAs usually, bug reports or suggestions for improvem=
ents, or even better patches, are welcome!=0A=0A-- Best regards,=0AAndrzej =
Bialecki     <><=0A___. ___ ___ ___ _ _   _________________________________=
_=0A[__ || __|__/|__||\/|  Information Retrieval, Semantic Web=0A___|||__||=
  \|  ||  |  Embedded Unix, System Integration=0Ahttp://www.sigram.com  Con=
tact: info at sigram dot com=0A=0A=0A--------------------------------------=
-------------------------------=0ATo unsubscribe, e-mail: java-user-unsubsc=
ribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lu=
cene.apache.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 10:48:56 2008
Return-Path: <java-user-return-37178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88853 invoked from network); 14 Nov 2008 10:48:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 10:48:56 -0000
Received: (qmail 88149 invoked by uid 500); 14 Nov 2008 10:48:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88121 invoked by uid 500); 14 Nov 2008 10:48:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88110 invoked by uid 99); 14 Nov 2008 10:48:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 02:48:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 10:47:32 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id mAEAlIp02483
	for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 04:47:18 -0600
Message-ID: <491D5727.4010600@getopt.org>
Date: Fri, 14 Nov 2008 11:47:03 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [ANN] Luke 0.9 released
References: <491CD9CD.5090908@getopt.org> <36239.60678.qm@web26002.mail.ukl.yahoo.com>
In-Reply-To: <36239.60678.qm@web26002.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

mark harwood wrote:
> Hi Andrzej,
> 
> Thanks for the update. Looks like you've been busy adding some great
> new features!
> 
> I think you may have a bug in opening an index with prior commit
> points, though. I want to keep these in my index and so I opened it
> in Luke selecting the "open read only" and "keep all commit points"
> checkboxes. I can see in the code that under these conditions you
> take care to use a "KeepAllDeletionPolicy" but line 176 of
> IndexGate.java is hardcoded with a
> "KeepOnlyLastCommitDeletionPolicy". This wiped my prior commit points
> (No worries - it was only a test index).

Sorry about that - I'm glad it was disposable data. BTW, if you have a 
small test index with multiple commit points could you please send it to 
me off the list?

> The call stack leading to this code was: Luke.showFiles 
> Luke.getIndexDeletableNames IndexGate.GetDeletableFiles
> 
> The fix could be to pass the policy through this stack but may
> "opening read only" should mean just that and NO deletes at all are
> ever done - regardless?

Theoretically when you open a read-only IndexReader you can't delete 
anything using that IndexReader, but in practice Luke directly accesses 
the underlying Directory in many other places ... I forgot about the use 
of IndexFileDeleter - and indeed passing the read-only flag here can 
solve this, because then I can always use KeepAllDeletionPolicy when 
opening read-only.

Thanks for the report!

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 11:02:47 2008
Return-Path: <java-user-return-37179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93197 invoked from network); 14 Nov 2008 11:02:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 11:02:47 -0000
Received: (qmail 13139 invoked by uid 500); 14 Nov 2008 11:02:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12786 invoked by uid 500); 14 Nov 2008 11:02:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12774 invoked by uid 99); 14 Nov 2008 11:02:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 03:02:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.217] (HELO web26006.mail.ukl.yahoo.com) (217.12.10.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 Nov 2008 11:01:24 +0000
Received: (qmail 36902 invoked by uid 60001); 14 Nov 2008 11:01:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=l6IXyTxY7DCBm+ET0SE/n/aIJwfX9B2EGz92ZbsIhX3XX481uZ5w9YPRxRvc3quE21afxA9CdH1kwP9f502NHUyO49c7d2nULeBejvBEDtDJAhpa+rSqbTvwzKLpdFUCUNrSGvGJ0PTdl06a7YtCB2FB48wdBBE9KPBKpe7eNhU=;
X-YMail-OSG: ogULQUIVM1mrelsAA_SBWKmBFbJXhMBtEfNh8LRji2I.lCTwSgQfNw.jd_t_4xpbHgLk25Sxp320_tZtOmo0FcRXvbFwLRYegSwxS5ovkKxbOKqWr2YJ3odtryU_w52YzfYEiGfLFsbBUuUXoC98yTOV6S3ZOt5G9KpkdvT6opfuM1Mv6vtftBTWuIyR
Received: from [193.36.230.96] by web26006.mail.ukl.yahoo.com via HTTP; Fri, 14 Nov 2008 11:01:05 GMT
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <491CD9CD.5090908@getopt.org> <36239.60678.qm@web26002.mail.ukl.yahoo.com> <491D5727.4010600@getopt.org>
Date: Fri, 14 Nov 2008 11:01:05 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: [ANN] Luke 0.9 released
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <477227.36701.qm@web26006.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

>>BTW, if you have a small test index with multiple commit points could you=
 please send it to me off the list?=0A=0ASee the "setup" method in the juni=
t test "TestTransactionRollbackCapability2" attached here: https://issues.a=
pache.org/jira/browse/LUCENE-1449=0A=0ACheers,=0AMark=0A=0A=0A=0A----- Orig=
inal Message ----=0AFrom: Andrzej Bialecki <ab@getopt.org>=0ATo: java-user@=
lucene.apache.org=0ASent: Friday, 14 November, 2008 10:47:03=0ASubject: Re:=
 [ANN] Luke 0.9 released=0A=0Amark harwood wrote:=0A> Hi Andrzej,=0A> =0A> =
Thanks for the update. Looks like you've been busy adding some great=0A> ne=
w features!=0A> =0A> I think you may have a bug in opening an index with pr=
ior commit=0A> points, though. I want to keep these in my index and so I op=
ened it=0A> in Luke selecting the "open read only" and "keep all commit poi=
nts"=0A> checkboxes. I can see in the code that under these conditions you=
=0A> take care to use a "KeepAllDeletionPolicy" but line 176 of=0A> IndexGa=
te.java is hardcoded with a=0A> "KeepOnlyLastCommitDeletionPolicy". This wi=
ped my prior commit points=0A> (No worries - it was only a test index).=0A=
=0ASorry about that - I'm glad it was disposable data. BTW, if you have a s=
mall test index with multiple commit points could you please send it to me =
off the list?=0A=0A> The call stack leading to this code was: Luke.showFile=
s Luke.getIndexDeletableNames IndexGate.GetDeletableFiles=0A> =0A> The fix =
could be to pass the policy through this stack but may=0A> "opening read on=
ly" should mean just that and NO deletes at all are=0A> ever done - regardl=
ess?=0A=0ATheoretically when you open a read-only IndexReader you can't del=
ete anything using that IndexReader, but in practice Luke directly accesses=
 the underlying Directory in many other places ... I forgot about the use o=
f IndexFileDeleter - and indeed passing the read-only flag here can solve t=
his, because then I can always use KeepAllDeletionPolicy when opening read-=
only.=0A=0AThanks for the report!=0A=0A-- Best regards,=0AAndrzej Bialecki =
    <><=0A___. ___ ___ ___ _ _   __________________________________=0A[__ |=
| __|__/|__||\/|  Information Retrieval, Semantic Web=0A___|||__||  \|  || =
 |  Embedded Unix, System Integration=0Ahttp://www.sigram.com  Contact: inf=
o at sigram dot com=0A=0A=0A-----------------------------------------------=
----------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@luce=
ne.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.apac=
he.org=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 13:09:04 2008
Return-Path: <java-user-return-37180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31631 invoked from network); 14 Nov 2008 13:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 13:09:04 -0000
Received: (qmail 52469 invoked by uid 500); 14 Nov 2008 13:09:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52422 invoked by uid 500); 14 Nov 2008 13:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52411 invoked by uid 99); 14 Nov 2008 13:09:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 05:09:04 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.90.177 as permitted sender)
Received: from [66.249.90.177] (HELO ik-out-1112.google.com) (66.249.90.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 13:07:43 +0000
Received: by ik-out-1112.google.com with SMTP id c29so1171717ika.5
        for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 05:08:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SjYsqmgQ8j8+nWJLzm8fRmOv4zAB7QggUQATISj8z8c=;
        b=wija0VShOzR/D0TqPnN4jv3Aj0H9Sk/+xTyr6FzK23J/1Cmkhg87goeIu5crek9DjR
         4TyTJRcPAJImryt2dUhNn+v+XKd4Vc3YnS7CLgqT/U8ItlB8MWSOV0ryu6OFrA8Ys7Sa
         gfW8hqL5dqkOiCbvZUARgOcVVWsUIV8s9/rEE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=SNBklFl5P6xTsnlPEt53M1xsaF3tlcdimPiqGYt9Bosx1yxchD1g7thVITx1kdPTcp
         6L8TaBvtDANC0QOZVxcQ7wu0DE5YmPRP+CSdXEjoRtXxt+t52J7RboZCO++xpEoYbQxV
         EhRD6gjpYT8MLGD6Gr7aZGzF/CM8O4jKDoPRM=
Received: by 10.86.79.19 with SMTP id c19mr594618fgb.41.1226668106158;
        Fri, 14 Nov 2008 05:08:26 -0800 (PST)
Received: by 10.86.86.4 with HTTP; Fri, 14 Nov 2008 05:08:26 -0800 (PST)
Message-ID: <359a92830811140508s2336e905he705e63f58ce6117@mail.gmail.com>
Date: Fri, 14 Nov 2008 08:08:26 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Storing part of the field
In-Reply-To: <9A47D66B-94DE-4BD3-B549-1371538DB540@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2314_23788157.1226668106140"
References: <85E2F8AA-2469-4A3C-8A9A-A9CCD9D2218B@gmail.com>
	 <867513fe0811140002u40a3e7b7y7f9061b7a6e33c3@mail.gmail.com>
	 <9A47D66B-94DE-4BD3-B549-1371538DB540@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2314_23788157.1226668106140
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As far as I know you can't do this with just one field. Why do you
care? Storing two fields, one indexed but not stored and one stored
but not indexed shouldn't use very many resources.

Best
Erick

On Fri, Nov 14, 2008 at 3:06 AM, Ravi L <mouryaravi@gmail.com> wrote:

> Thanks Anshum!
>
> This can be possible. But, I am searching for is to do this with only one
> field.
>
>
> thanks
> ravi
>
> On 14-Nov-08, at 1:32 PM, Anshum wrote:
>
>  Hi Ravi,
>> In that case, you could have 2 fields. One of them would be indexed (i.e.
>> "foo bar") and you could use the other only to store as per your logic.
>> Hope this solves your purpose.
>>
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Fri, Nov 14, 2008 at 1:19 PM, Ravi L <mouryaravi@gmail.com> wrote:
>>
>>  Hi,
>>>
>>> I am simple question.
>>>
>>> I want a string to be indexed, but stored part of that string.
>>>
>>> For example, if my string is "foo bar", I want to index whole string("foo
>>> bar") but store the first 3 characters("foo") of it. How can I do this
>>> with
>>> the lucene APIs?
>>>
>>>
>>> thanks
>>> ravi
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2314_23788157.1226668106140--

From java-user-return-37181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 15:50:48 2008
Return-Path: <java-user-return-37181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11746 invoked from network); 14 Nov 2008 15:50:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 15:50:48 -0000
Received: (qmail 35240 invoked by uid 500); 14 Nov 2008 15:50:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35209 invoked by uid 500); 14 Nov 2008 15:50:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35187 invoked by uid 99); 14 Nov 2008 15:50:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 07:50:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.188] (HELO rn-out-0910.google.com) (64.233.170.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 15:49:24 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1269608rne.4
        for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 07:49:57 -0800 (PST)
Received: by 10.90.120.17 with SMTP id s17mr829200agc.101.1226677796930;
        Fri, 14 Nov 2008 07:49:56 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 17sm966964hsq.18.2008.11.14.07.49.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 14 Nov 2008 07:49:55 -0800 (PST)
Message-Id: <B8A11542-5CB4-4107-91BE-498C9BEF977A@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <57465.83.165.123.157.1226594113.squirrel@mail.freeresearch.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: About counting term hits
X-Priority: 3 (Normal)
Date: Fri, 14 Nov 2008 10:49:50 -0500
References: <1226518223.11268.6.camel@tambre>    <aec6319e0811121826x2c707cb4u7f954c38111debd1@mail.gmail.com> <49054.193.145.220.56.1226565324.squirrel@mail.freeresearch.org> <255673.38640.qm@web50309.mail.re2.yahoo.com> <57465.83.165.123.157.1226594113.squirrel@mail.freeresearch.org>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


I think to do this efficiently you'd need to modify Lucene's builtin  
query classes (eg TermQuery) such that during the scoring process, in  
addition to simply computing its contribution to the document's score,  
it would also record further information like total number of  
occurrences of each term, which docs had which terms, etc.

I don't think there's a simple efficient way to do this with Lucene  
today, though if your result sets are small enough term vectors might  
be fine.

Mike

lbarcala@freeresearch.org wrote:

>> Mario,
>>
>> Does this help:
>> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/index/TermFreqVector.html
>>
>> Plus:
>> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/index/IndexReader.html#method_summary
>> (look for "getTerm.Freq...")
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>
> So, if I undertand the solution, the main steps to do what I propose  
> is:
>
> 1) To obtain the documents which match the query (documents which  
> include
> the word "house")
> 2) To loop throw matching documents to access the IndexReader for
> obtaining their term frequencies.
> 3) To obtain from TermFreqVector the frequencies of the Term  
> ("house") to
> calculate the result.
>
> And, if it is a very frequent query and there are much documents (>  
> 10.000),
> would LUCENE solve it in a reasonable time? A query might match  
> several
> hundred documents.
>
> Thank you,
>
>  Mario Barcala
>
>>>> Hello:
>>>>
>>>> I am new to LUCENE and I am testing some issues about it. I can
>>>> retrieve
>>>> the number of documents which satisfies a query, but I don't find  
>>>> how
>>>> to
>>>> obtain the number of terms which match it.
>>>>
>>>> For example, if I search for the word "house", I want to obtain the
>>>> number of times the word occurs (not the number of documents).
>>>>
>>>> Is it possible to do it in LUCENE?
>>>>
>>>> Thanks in advance,
>>>>
>>>> Mario Barcala
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>>
>>> --
>>> ----------------------------------------
>>> "Help Ever Hurt Never"- Baba
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 16:41:16 2008
Return-Path: <java-user-return-37182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29430 invoked from network); 14 Nov 2008 16:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 16:41:15 -0000
Received: (qmail 40078 invoked by uid 500); 14 Nov 2008 16:41:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40050 invoked by uid 500); 14 Nov 2008 16:41:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40039 invoked by uid 99); 14 Nov 2008 16:41:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 08:41:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 16:39:56 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Phrase query-like query that doesn't requre all the terms?
Date: Fri, 14 Nov 2008 11:40:17 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43032BD4A8@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase query-like query that doesn't requre all the terms?
Thread-Index: AclGd60joz39+DjiQuWP40GkkZ3g+w==
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

PhraseQuery requires all the terms in the phrase
exists in the field being searched.  I am looking
for a more permissible version of PhraseQuery which
is sensitive to the order of the terms but
allows missing terms, which would lower the score
but still matches.

For example, query "DEF GHI" would match with
"DEF GHI"
"ABC DEF GHI JKL"
"XYZ DEF GHI"
"DEF GHI XYZ"
with relatively high score, but it would also
match with:
"DEF"
"GHI"
"DEF XYZ"
etc. with lower scores.
This would NOT match (or severely penalizes the score)=20
with:
"GHI DEF" (out of order)
"ABC XYZ" (no terms)

Is there any such Query class or other way to achieve
the similar effect?=20
----
T. "Kuro" Kurosaka, Basis Technology
San Francisco, California, U.S.A.
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 16:50:01 2008
Return-Path: <java-user-return-37183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31633 invoked from network); 14 Nov 2008 16:50:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 16:50:01 -0000
Received: (qmail 55513 invoked by uid 500); 14 Nov 2008 16:50:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55482 invoked by uid 500); 14 Nov 2008 16:50:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55456 invoked by uid 99); 14 Nov 2008 16:50:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 08:50:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 16:48:41 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1456901rvb.5
        for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 08:49:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=QDnTROXYt/nPDMkUeDi7ARlzdTGksyn9Ww9mjimn2aE=;
        b=a7ujhnM74muy6r3x65woDhlrdZg4UPsf3cQ2OpYkylN3oH/d9aAC8nPo4C3x160MdN
         gmeW+5HDmUFkbPv29Df4FPkATFLoDKrj047r6f1yn2QIWANomUl0Ps+/LZvcBxi6lLwx
         M0/5tRqsNs7qWb/j/yX7S6l4Gq2tvYLuj8+dM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=XTF9NCSdQVkyFda3MG7K+u7Iyy4o6u90ku71FuyVVzUVe/IixaRA63m2l3tts/iPcB
         ee9a2nLT1LkvqAXogNwTFJ4dVavNofjNyqJTwpUGBGgI0HT3tjSIdvYddUWzzXaVFl13
         hQUTOHco9f+ctAzp2MTwlKlbbEHnznYLa962E=
Received: by 10.140.187.10 with SMTP id k10mr623868rvf.264.1226681364492;
        Fri, 14 Nov 2008 08:49:24 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Fri, 14 Nov 2008 08:49:24 -0800 (PST)
Message-ID: <c68e39170811140849u779e930ex41b067ffe4d22805@mail.gmail.com>
Date: Fri, 14 Nov 2008 11:49:24 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Phrase query-like query that doesn't requre all the terms?
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43032BD4A8@mail3.basistech.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <E95FD77F0171D14DA1EEE0A785E92B43032BD4A8@mail3.basistech.net>
X-Google-Sender-Auth: b71b998cd6c8b891
X-Virus-Checked: Checked by ClamAV on apache.org

Solr's dismax parser can generate queries that do most of this... it's
a combination of term queries and sloppy phrase queries.

Simplest example:
+(DEF GHI) "DEF GHI"~10^5

The only thing that it doesn't work for is the terms out of order
(they will still be matched).  You could use span queries if you
really need that ordering, but sloppy phrase queries already penalize
the out-of-order since it's a bigger edit distance (but it won't be a
"severe" penalty).

-Yonik

On Fri, Nov 14, 2008 at 11:40 AM, Teruhiko Kurosaka <Kuro@basistech.com> wrote:
> PhraseQuery requires all the terms in the phrase
> exists in the field being searched.  I am looking
> for a more permissible version of PhraseQuery which
> is sensitive to the order of the terms but
> allows missing terms, which would lower the score
> but still matches.
>
> For example, query "DEF GHI" would match with
> "DEF GHI"
> "ABC DEF GHI JKL"
> "XYZ DEF GHI"
> "DEF GHI XYZ"
> with relatively high score, but it would also
> match with:
> "DEF"
> "GHI"
> "DEF XYZ"
> etc. with lower scores.
> This would NOT match (or severely penalizes the score)
> with:
> "GHI DEF" (out of order)
> "ABC XYZ" (no terms)
>
> Is there any such Query class or other way to achieve
> the similar effect?
> ----
> T. "Kuro" Kurosaka, Basis Technology
> San Francisco, California, U.S.A.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 16:54:40 2008
Return-Path: <java-user-return-37184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33468 invoked from network); 14 Nov 2008 16:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 16:54:40 -0000
Received: (qmail 61689 invoked by uid 500); 14 Nov 2008 16:54:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61657 invoked by uid 500); 14 Nov 2008 16:54:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61646 invoked by uid 99); 14 Nov 2008 16:54:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 08:54:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.re2.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 Nov 2008 16:53:17 +0000
Received: (qmail 19895 invoked by uid 60001); 14 Nov 2008 16:53:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=D8HfBqvB37WIgH0ujAqckNcpj+UuwVNEBCyCT+fexELM+oBe4lnaUgFfLt+cvDIB5h0/jo6zok+bmy78VWLWSe1JFQw/K3xxd5utlyhGWs7IzuRH7/phxoUzaEik70rsZVl3kdnFMP5pCjuUa6ZxV+PFCb3o2ob5fcQxRHdc+/8=;
X-YMail-OSG: bILzQA8VM1lRS7tcorqRtPuwI4LyDGXz3sKRVtiy4j8vePuBBZ.CsehW2e.FtdY5.CcDuRLJRsr.e3IQGfdvi4khkx2lknciotqgTvjRDRra.Jk8lwUcaSSxqakTtdBpYHuK6OIHuQzpIT77i11IfVaDb.piCh_SN86Qqv7VXWOigQPgMaoP5M.bLA--
Received: from [167.206.188.3] by web50310.mail.re2.yahoo.com via HTTP; Fri, 14 Nov 2008 08:52:59 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <5E3DE97916D44040A00CFCC4CE5847DB08568FCA@HQ-MAIL3.ptcnet.ptc.com>
Date: Fri, 14 Nov 2008 08:52:59 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Scoped Search and Facets generation using Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-869378238-1226681579=:17668"
Message-ID: <5032.17668.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-869378238-1226681579=:17668
Content-Type: text/plain; charset=us-ascii

Hi Mayur,

Solr has built-in support for facets.  I don't understand what you mean by scoped searches.  Could you please give a concrete example?


Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch




________________________________
From: "Bapat, Mayur" <mbapat@ptc.com>
To: java-user@lucene.apache.org
Sent: Friday, November 14, 2008 3:04:12 AM
Subject: Scoped Search and Facets generation using Lucene

Hi,

Does Lucene support Scoped Searches? My intention is to index an XML
String and search for a matching element/attribute value from that XML
by specifying scope(path).
Also is there any direct support for Facets building in Lucene? 

Regards,
Mayur

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0-869378238-1226681579=:17668--

From java-user-return-37185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 16:59:16 2008
Return-Path: <java-user-return-37185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34716 invoked from network); 14 Nov 2008 16:59:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 16:59:15 -0000
Received: (qmail 66921 invoked by uid 500); 14 Nov 2008 16:59:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66886 invoked by uid 500); 14 Nov 2008 16:59:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66875 invoked by uid 99); 14 Nov 2008 16:59:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 08:59:15 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [150.148.0.65] (HELO ironport4.fda.gov) (150.148.0.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 16:57:55 +0000
X-SBRS: None
X-MID: 114025743
Received: from fmd3tj001.fda.gov ([10.160.10.76])
  by ironport4.fda.gov with ESMTP; 14 Nov 2008 11:57:36 -0500
Received: from FMD3VS012.fda.gov ([10.160.10.63]) by FMD3TJ001.fda.gov with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 14 Nov 2008 11:57:36 -0500
X-MIMEOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Multi -threaded indexing of large number of PDF documents
Date: Fri, 14 Nov 2008 11:57:35 -0500
Message-ID: <F8A04958BB57B64096F9BE6B9572564304C73B25@FMD3VS012.fda.gov>
In-Reply-To: <F8A04958BB57B64096F9BE6B9572564304C73B00@FMD3VS012.fda.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Multi -threaded indexing of large number of PDF documents
Thread-Index: Ack15uRvG0lpXHM+RNeHeHx/J+upiwAALBggBCQaECA=
References: <F8A04958BB57B64096F9BE6B9572564304C73AFC@FMD3VS012.fda.gov> <4900A823.50804@gmail.com> <5e76f3840810231048n59ae85dfl1edfa0c2c5396a87@mail.gmail.com> <4900CC48.8070008@gmail.com> <73373D67-F701-4165-B668-893683AA612E@mikemccandless.com> <5e76f3840810231257u57ef4017qcbf916928ffc123a@mail.gmail.com> <16F4CE0A-68D2-4CA8-8ADC-6D3AE42DC0C1@mikemccandless.com> <F8A04958BB57B64096F9BE6B9572564304C73AFF@FMD3VS012.fda.gov> <1224859369.6523.49.camel@pc286> <F8A04958BB57B64096F9BE6B9572564304C73B00@FMD3VS012.fda.gov>
From: "Sudarsan, Sithu D." <Sithu.Sudarsan@fda.hhs.gov>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Nov 2008 16:57:36.0781 (UTC) FILETIME=[1880ABD0:01C9467A]
X-Virus-Checked: Checked by ClamAV on apache.org

=20
Hi All,

Based on your valuable inputs, we tried a few experiments with number of
threads. The observation is, if the number of threads are one less than
the number of cores (we have 'main' as a separate thread. Essentially,
including 'main' number of threads equal to number of cores), the
indexing performance reaches the optimum level, with maximum CPU
utilization. We have tried with Windows XP as well as CentOS.=20

As regards to number of documents to be indexed and size of the
documents, there seems to be some correlation  between the two. But we
are yet to ascertain the same.

At this point, we are writing to a single IndexWriter. Have not tried
comparing using multiple writers and merge them to benchmark the
performance.

Sincerely,
Sithu D Sudarsan

sithu.sudarsan@fda.hhs.gov
sdsudarsan@ualr.edu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 17:06:18 2008
Return-Path: <java-user-return-37186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38000 invoked from network); 14 Nov 2008 17:06:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 17:06:18 -0000
Received: (qmail 76099 invoked by uid 500); 14 Nov 2008 17:06:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75806 invoked by uid 500); 14 Nov 2008 17:06:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75795 invoked by uid 99); 14 Nov 2008 17:06:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 09:06:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 17:04:59 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Phrase query-like query that doesn't requre all the terms?
Date: Fri, 14 Nov 2008 12:05:20 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43032BD4B8@mail3.basistech.net>
In-Reply-To: <c68e39170811140849u779e930ex41b067ffe4d22805@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Phrase query-like query that doesn't requre all the terms?
Thread-Index: AclGeQsA4irJ8374TLGBZ/40jlNPMgAAS9PA
References: <E95FD77F0171D14DA1EEE0A785E92B43032BD4A8@mail3.basistech.net> <c68e39170811140849u779e930ex41b067ffe4d22805@mail.gmail.com>
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Yonik,=20
Thank you for your reply.
My problem with Phrase Query is that it requires
existence of all the terms in documents.  I want them more
permissible.  I want it to match with lower score.
Does dismax also requires all the terms?

> Solr's dismax parser can generate queries that do most of=20
> this... it's a combination of term queries and sloppy phrase queries.
>=20
> Simplest example:
> +(DEF GHI) "DEF GHI"~10^5
>=20
> The only thing that it doesn't work for is the terms out of=20
> order (they will still be matched).  You could use span=20
> queries if you really need that ordering, but sloppy phrase=20
> queries already penalize the out-of-order since it's a bigger=20
> edit distance (but it won't be a "severe" penalty).

----
T. "Kuro" Kurosaka, Basis Technology
San Francisco, California, U.S.A.
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 17:09:20 2008
Return-Path: <java-user-return-37187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39121 invoked from network); 14 Nov 2008 17:09:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 17:09:20 -0000
Received: (qmail 82463 invoked by uid 500); 14 Nov 2008 17:09:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82420 invoked by uid 500); 14 Nov 2008 17:09:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82409 invoked by uid 99); 14 Nov 2008 17:09:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 09:09:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mouryaravi@gmail.com designates 209.85.142.191 as permitted sender)
Received: from [209.85.142.191] (HELO ti-out-0910.google.com) (209.85.142.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 17:07:59 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1023731tic.11
        for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 09:08:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=ESVc1qEUXjiPje/O+4zFNvtZxnpJ2ikrMZw8J+ZeZwQ=;
        b=uVv+6paO7XsHZqqnOFbqkcV1GTeo9/EQnXUhNAU2N1aBRq8oHsdj00Sx7DUKA//BSl
         U48XhKzJRUHjla1fbJAm3Q2/H0gshkQZ8+WjDsWxON4Qi2qwLUfDh9mLyCRXGcM3MHm3
         AdCytCqcRiVjdvhATqPNcfH5PKhkZ/hrnMzxo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=Y/anyCssdwmj7i/HW75UdwwW8prEORbahFRnK7aVUYqcNn/DG9xFLlfvT9rxF4lW1P
         ujPDYM6O2UyzxvrMEwr7btGgxNq/F7hyuRNAkHnNs2lFrOLzsXcGEbliAyrARaPP97Xp
         Hi0jpyBpqTYmptqY+MRiUg81JxzvB69Ak2Sx8=
Received: by 10.110.49.2 with SMTP id w2mr1394219tiw.3.1226682511800;
        Fri, 14 Nov 2008 09:08:31 -0800 (PST)
Received: from ?117.195.137.82? ([117.195.137.82])
        by mx.google.com with ESMTPS id 22sm1377667tim.7.2008.11.14.09.08.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 14 Nov 2008 09:08:31 -0800 (PST)
Message-Id: <3594262A-B42D-4096-8EEE-2ECE8A291DC9@gmail.com>
From: Ravi L <mouryaravi@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <359a92830811140508s2336e905he705e63f58ce6117@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v928.1)
Subject: Re: Storing part of the field
Date: Fri, 14 Nov 2008 22:38:20 +0530
References: <85E2F8AA-2469-4A3C-8A9A-A9CCD9D2218B@gmail.com> <867513fe0811140002u40a3e7b7y7f9061b7a6e33c3@mail.gmail.com> <9A47D66B-94DE-4BD3-B549-1371538DB540@gmail.com> <359a92830811140508s2336e905he705e63f58ce6117@mail.gmail.com>
X-Mailer: Apple Mail (2.928.1)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erick!

The application which uses the index expects this in same field. So,  
can't use two fields.

Any ways, Thank you guys for quick your responses!


thanks
ravi

On 14-Nov-08, at 6:38 PM, Erick Erickson wrote:

> As far as I know you can't do this with just one field. Why do you
> care? Storing two fields, one indexed but not stored and one stored
> but not indexed shouldn't use very many resources.
>
> Best
> Erick
>
> On Fri, Nov 14, 2008 at 3:06 AM, Ravi L <mouryaravi@gmail.com> wrote:
>
>> Thanks Anshum!
>>
>> This can be possible. But, I am searching for is to do this with  
>> only one
>> field.
>>
>>
>> thanks
>> ravi
>>
>> On 14-Nov-08, at 1:32 PM, Anshum wrote:
>>
>> Hi Ravi,
>>> In that case, you could have 2 fields. One of them would be  
>>> indexed (i.e.
>>> "foo bar") and you could use the other only to store as per your  
>>> logic.
>>> Hope this solves your purpose.
>>>
>>> --
>>> Anshum Gupta
>>> Naukri Labs!
>>> http://ai-cafe.blogspot.com
>>>
>>> The facts expressed here belong to everybody, the opinions to me.  
>>> The
>>> distinction is yours to draw............
>>>
>>>
>>> On Fri, Nov 14, 2008 at 1:19 PM, Ravi L <mouryaravi@gmail.com>  
>>> wrote:
>>>
>>> Hi,
>>>>
>>>> I am simple question.
>>>>
>>>> I want a string to be indexed, but stored part of that string.
>>>>
>>>> For example, if my string is "foo bar", I want to index whole  
>>>> string("foo
>>>> bar") but store the first 3 characters("foo") of it. How can I do  
>>>> this
>>>> with
>>>> the lucene APIs?
>>>>
>>>>
>>>> thanks
>>>> ravi
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 17:49:53 2008
Return-Path: <java-user-return-37188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64352 invoked from network); 14 Nov 2008 17:49:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 17:49:53 -0000
Received: (qmail 41230 invoked by uid 500); 14 Nov 2008 17:49:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41205 invoked by uid 500); 14 Nov 2008 17:49:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41194 invoked by uid 99); 14 Nov 2008 17:49:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 09:49:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 17:48:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L12kC-0001Q3-2v
	for java-user@lucene.apache.org; Fri, 14 Nov 2008 09:46:08 -0800
Message-ID: <20505283.post@talk.nabble.com>
Date: Fri, 14 Nov 2008 09:46:08 -0800 (PST)
From: Britske <gbrits@gmail.com>
To: java-user@lucene.apache.org
Subject: LUCENE-831 (complete cache overhaul) -> mem use
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gbrits@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, 

I recently saw activity on LUCENE-831 (Complete overhaul of FieldCache
API/Implementation) which I have interest in. 
I posted previously on this with my concern that given the current default
cache I sometimes get OOM-errors because I have a lot of fields which are
sorted on, which ultimately causes the fieldcache to grow greater then
available RAM. 

ultimately I want to subclass the new pluggable Fieldcache of lucene-831 to
offload to disk (using ehcache or memcachedB or something) but havn't found
the time yet. 

What I would like to know for now is if perhaps the newly implemented
standard cache in LUCENE-831 uses another strategy of caching than the
standard Fieldcache in Lucene. 

i.e: The normal cache consumes memory while generating a fieldcache for
every document in lucene even though the document hasn't got that field set. 

Since my documents are very sparse in these fields I want to sort on it
would differ a_lot when documents that don't have the field in question set
don't add up in the used memory. 

So am I lucky? Or would I indeed have to cook up something myself? 
Thanks and best regards,

Geert-Jan


-- 
View this message in context: http://www.nabble.com/LUCENE-831-%28complete-cache-overhaul%29--%3E-mem-use-tp20505283p20505283.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 17:58:09 2008
Return-Path: <java-user-return-37189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70007 invoked from network); 14 Nov 2008 17:58:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 17:58:09 -0000
Received: (qmail 55050 invoked by uid 500); 14 Nov 2008 17:58:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55009 invoked by uid 500); 14 Nov 2008 17:58:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54998 invoked by uid 99); 14 Nov 2008 17:58:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 09:58:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 17:56:48 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1481142rvb.5
        for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 09:57:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=nGKUODDzkGNV6rwl9km2KXmpXUuXEFX+M3jox2TiZok=;
        b=qTLb4fhigKGvjwnhJgu17tvTIBZ3RmxhW+8fly2ntNd1E1LYneeh52QSwqg3l7mf2v
         7WNxMLelBeq6NqACjpFp65Dej4tmiXBcfmT1qoG28SoAZIC+2SLd8ZmxyPAmVhkCq1au
         XI+IFM+utS+jb/KRBk/jFNoKAi5cjTch75pYg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=un5xb02G/RVSoppkiQHVU74o5kkc4t+zIkTrtBVsQI9XBUCpUIRrYjMejO9hzSetvA
         EWAiuSR0xWaI3H/cD7pI8XE10P3U6bmm30EXcq0bxQAb+4oq9MhgSs7TAQK0fADWn63d
         P7hI7cI6ADYMUx4czpceD/SM+JyznKW1DN26E=
Received: by 10.140.158.4 with SMTP id g4mr669812rve.160.1226685452476;
        Fri, 14 Nov 2008 09:57:32 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Fri, 14 Nov 2008 09:57:32 -0800 (PST)
Message-ID: <c68e39170811140957lb6763e3qe4fbe6df9e1de4e0@mail.gmail.com>
Date: Fri, 14 Nov 2008 12:57:32 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Phrase query-like query that doesn't requre all the terms?
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43032BD4B8@mail3.basistech.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <E95FD77F0171D14DA1EEE0A785E92B43032BD4A8@mail3.basistech.net>
	 <c68e39170811140849u779e930ex41b067ffe4d22805@mail.gmail.com>
	 <E95FD77F0171D14DA1EEE0A785E92B43032BD4B8@mail3.basistech.net>
X-Google-Sender-Auth: a2f51a74b5760d8e
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Nov 14, 2008 at 12:05 PM, Teruhiko Kurosaka <Kuro@basistech.com> wrote:
> My problem with Phrase Query is that it requires
> existence of all the terms in documents.  I want them more
> permissible.  I want it to match with lower score.
> Does dismax also requires all the terms?

The mandatory part +(DEF GHI) selects documents with either term and
scores higher if both terms are present.  The sloppy phrase query part
"DEF GHI"~10^5 is optional and only contributes to the score when both
terms appear near each other (and scores higher the closer together
they are).

-Yonik


>> Solr's dismax parser can generate queries that do most of
>> this... it's a combination of term queries and sloppy phrase queries.
>>
>> Simplest example:
>> +(DEF GHI) "DEF GHI"~10^5
>>
>> The only thing that it doesn't work for is the terms out of
>> order (they will still be matched).  You could use span
>> queries if you really need that ordering, but sloppy phrase
>> queries already penalize the out-of-order since it's a bigger
>> edit distance (but it won't be a "severe" penalty).
>
> ----
> T. "Kuro" Kurosaka, Basis Technology
> San Francisco, California, U.S.A.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 18:11:22 2008
Return-Path: <java-user-return-37190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79080 invoked from network); 14 Nov 2008 18:11:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 18:11:22 -0000
Received: (qmail 72633 invoked by uid 500); 14 Nov 2008 18:11:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72607 invoked by uid 500); 14 Nov 2008 18:11:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72596 invoked by uid 99); 14 Nov 2008 18:11:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 10:11:23 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pablo.a.saavedra@gmail.com designates 209.85.200.171 as permitted sender)
Received: from [209.85.200.171] (HELO wf-out-1314.google.com) (209.85.200.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 18:10:02 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1521581wfc.20
        for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 10:10:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=SYam+mXoDLWHackcmVRiWOwhrgD3I3hJZV691g/Zrr4=;
        b=AkfqVzli+OkSX3Pe8Mdi6ti9Dxdb03tTAT2wBXYlt+4y9nm9ozSkT8ZRnxYcqXVarZ
         2kjg/nDdGUzUvLeJBwgqgpYBbPQ+8s9Hsxrb2rO2yddYQdSL9+WU5eO+PmrJIzMPoOJR
         trg3e+OBt4sVgTOlLi81Vrt4+hjF8cMor04WI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=B/ft7FvmJsQjuZzHU3Cq4gn2wNWtQKUw/Lvzp6oQpUCEArEgHetFE+UC3mT6WJiSAF
         E2+94ByNGn/3t224SydvfwyfuioTzVR1wtzaQBUj+/fUD5EFiu2qLkUQh+FQgl6NB3YE
         0E6OmEXLeHY/ch5VnByWAo6jYhnRclbQ9NWQI=
Received: by 10.142.224.5 with SMTP id w5mr521256wfg.243.1226685643902;
        Fri, 14 Nov 2008 10:00:43 -0800 (PST)
Received: by 10.142.136.10 with HTTP; Fri, 14 Nov 2008 10:00:43 -0800 (PST)
Message-ID: <954597c90811141000l5a42e44dj6812df960621c926@mail.gmail.com>
Date: Fri, 14 Nov 2008 16:00:43 -0200
From: "Pablo Saavedra" <pablo.a.saavedra@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-831 (complete cache overhaul) -> mem use
In-Reply-To: <20505283.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16003_4196087.1226685643877"
References: <20505283.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16003_4196087.1226685643877
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have the same problem with cache and too many sorted fields, and had to
implement a big workaround to be able to plug my own cache implementation in
lucene 2.3.2. What I'd really like to see in the new cache implementation is
easier pluggability and extension of the lucene classes, which is currently
not possible due to visibility issues.

My 2 cents.

2008/11/14 Britske <gbrits@gmail.com>

>
> Hi,
>
> I recently saw activity on LUCENE-831 (Complete overhaul of FieldCache
> API/Implementation) which I have interest in.
> I posted previously on this with my concern that given the current default
> cache I sometimes get OOM-errors because I have a lot of fields which are
> sorted on, which ultimately causes the fieldcache to grow greater then
> available RAM.
>
> ultimately I want to subclass the new pluggable Fieldcache of lucene-831 to
> offload to disk (using ehcache or memcachedB or something) but havn't found
> the time yet.
>
> What I would like to know for now is if perhaps the newly implemented
> standard cache in LUCENE-831 uses another strategy of caching than the
> standard Fieldcache in Lucene.
>
> i.e: The normal cache consumes memory while generating a fieldcache for
> every document in lucene even though the document hasn't got that field
> set.
>
> Since my documents are very sparse in these fields I want to sort on it
> would differ a_lot when documents that don't have the field in question set
> don't add up in the used memory.
>
> So am I lucky? Or would I indeed have to cook up something myself?
> Thanks and best regards,
>
> Geert-Jan
>
>
> --
> View this message in context:
> http://www.nabble.com/LUCENE-831-%28complete-cache-overhaul%29--%3E-mem-use-tp20505283p20505283.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16003_4196087.1226685643877--

From java-user-return-37191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 18:59:27 2008
Return-Path: <java-user-return-37191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 680 invoked from network); 14 Nov 2008 18:59:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 18:59:26 -0000
Received: (qmail 41144 invoked by uid 500); 14 Nov 2008 18:59:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41121 invoked by uid 500); 14 Nov 2008 18:59:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41107 invoked by uid 99); 14 Nov 2008 18:59:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 10:59:25 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 18:58:05 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1234093fgb.27
        for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 10:58:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=nUU3nTfRgbZAHegUQYOb08f1CXhKffwzprmUYaUhf7k=;
        b=gbk3hEnjZSNOYb7I7NNZ+NsX1z+ZvB7f2vvsahfnEC2/EZPR9yRyWJtTVvOpxLJ+4V
         RGzV6iG/Wq8S3KSn9QFYnXZkTz5K8zjpkxA8Sna27Lawx6fqsHRFLaqW+qzda1t5BOy2
         GTeIsUgPuvrU8z2+HRIo4ZTFZ1kfWbsqp18zU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=pzkwqM/i7pUCWSy3QyoRnXSWap+e+ldpVAXzuMFTCdwkn7lKuaHZhALDwkvKf8jTAW
         WsZGjSUQktJTFmB2ueI0tkXNWbEcr0YadWQpBCNYZd1Ju6Sfn6r4aHkizcN52bdiGXQj
         NFCp0C6spJ/YfVqViDLCKnUGxvlkrC0gxQbxE=
Received: by 10.86.4.2 with SMTP id 2mr820687fgd.4.1226689127895;
        Fri, 14 Nov 2008 10:58:47 -0800 (PST)
Received: by 10.86.86.4 with HTTP; Fri, 14 Nov 2008 10:58:47 -0800 (PST)
Message-ID: <359a92830811141058t1f61351euf7d88d2af5420dba@mail.gmail.com>
Date: Fri, 14 Nov 2008 13:58:47 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Storing part of the field
In-Reply-To: <3594262A-B42D-4096-8EEE-2ECE8A291DC9@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5398_20114803.1226689127885"
References: <85E2F8AA-2469-4A3C-8A9A-A9CCD9D2218B@gmail.com>
	 <867513fe0811140002u40a3e7b7y7f9061b7a6e33c3@mail.gmail.com>
	 <9A47D66B-94DE-4BD3-B549-1371538DB540@gmail.com>
	 <359a92830811140508s2336e905he705e63f58ce6117@mail.gmail.com>
	 <3594262A-B42D-4096-8EEE-2ECE8A291DC9@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5398_20114803.1226689127885
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hmmmm, I don't understand payloads, but it seems to me that it *might*
apply. Search the mail list for "payload" and/or look at the docs. Payloads
were added after the last time I had to really dig into Lucene.

But from what I've seen going by on the thread, it may be what you need.
But then I could be remembering from the SOLR thread too <G>....

FWIW
Erick

On Fri, Nov 14, 2008 at 12:08 PM, Ravi L <mouryaravi@gmail.com> wrote:

> Thanks Erick!
>
> The application which uses the index expects this in same field. So, can't
> use two fields.
>
> Any ways, Thank you guys for quick your responses!
>
>
> thanks
> ravi
>
>
> On 14-Nov-08, at 6:38 PM, Erick Erickson wrote:
>
>  As far as I know you can't do this with just one field. Why do you
>> care? Storing two fields, one indexed but not stored and one stored
>> but not indexed shouldn't use very many resources.
>>
>> Best
>> Erick
>>
>> On Fri, Nov 14, 2008 at 3:06 AM, Ravi L <mouryaravi@gmail.com> wrote:
>>
>>  Thanks Anshum!
>>>
>>> This can be possible. But, I am searching for is to do this with only one
>>> field.
>>>
>>>
>>> thanks
>>> ravi
>>>
>>> On 14-Nov-08, at 1:32 PM, Anshum wrote:
>>>
>>> Hi Ravi,
>>>
>>>> In that case, you could have 2 fields. One of them would be indexed
>>>> (i.e.
>>>> "foo bar") and you could use the other only to store as per your logic.
>>>> Hope this solves your purpose.
>>>>
>>>> --
>>>> Anshum Gupta
>>>> Naukri Labs!
>>>> http://ai-cafe.blogspot.com
>>>>
>>>> The facts expressed here belong to everybody, the opinions to me. The
>>>> distinction is yours to draw............
>>>>
>>>>
>>>> On Fri, Nov 14, 2008 at 1:19 PM, Ravi L <mouryaravi@gmail.com> wrote:
>>>>
>>>> Hi,
>>>>
>>>>>
>>>>> I am simple question.
>>>>>
>>>>> I want a string to be indexed, but stored part of that string.
>>>>>
>>>>> For example, if my string is "foo bar", I want to index whole
>>>>> string("foo
>>>>> bar") but store the first 3 characters("foo") of it. How can I do this
>>>>> with
>>>>> the lucene APIs?
>>>>>
>>>>>
>>>>> thanks
>>>>> ravi
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5398_20114803.1226689127885--

From java-user-return-37192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 20:27:22 2008
Return-Path: <java-user-return-37192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28863 invoked from network); 14 Nov 2008 20:27:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 20:27:21 -0000
Received: (qmail 42505 invoked by uid 500); 14 Nov 2008 20:27:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42473 invoked by uid 500); 14 Nov 2008 20:27:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42461 invoked by uid 99); 14 Nov 2008 20:27:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 12:27:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 20:25:59 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1387030rne.4
        for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 12:26:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=J77sAAHxSmXCEEl8XwmgJBxGQ5/nXbsPznDisCTHTYc=;
        b=Iro3eiOwmp4q9axkgSJSU5xt53/4eBfaxSjmXIR3d97sRS6OPZ8ATI9wQtrK/SRqfy
         bPIHB/HXzkHJddQ53dE0Fbw5HJCwot4qGvzRU8uwbDx4iXpMaFMWytGQrskfRW23aFS7
         JSVyHXe63M39UGEIKLOoOTOwbdIYx8DuZo7kE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=vq/AFpyCZpl+ECQfM1ztM6hDvvNZWH1FPVx16InC4dSr1VtOUKaO2Pn45lSQK30bFZ
         ab3Aeomrj+ffbcEleE74iDs3FY4F8jWCEuNvHZS9XeHbNzTQ2dF+l22a0pY9sztZPBRV
         uqeoNpW2BUvfZbSxQcREBQMcU3cSgNlC5Szhc=
Received: by 10.90.27.10 with SMTP id a10mr1050126aga.31.1226694402676;
        Fri, 14 Nov 2008 12:26:42 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 7sm862218agc.14.2008.11.14.12.26.41
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 14 Nov 2008 12:26:41 -0800 (PST)
Message-ID: <491DDF01.9080407@gmail.com>
Date: Fri, 14 Nov 2008 15:26:41 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: LUCENE-831 (complete cache overhaul) -> mem use
References: <20505283.post@talk.nabble.com>
In-Reply-To: <20505283.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Its hard to predict the future of LUCENE-831. I would bet that it will 
end up in Lucene at some point in one form or another, but its hard to 
say if that form will be whats in the available patches (I'm a contrib 
committer so I won't have any real say in that, so take that prediction 
with a grain of salt). It has strong ties to other issues and a 
committer hasn't really had their whack at it yet.

Having said that though, LUCENE-831 allows for two types for dealing 
with field values: either the old style int/string/long/etc arrays, or 
for a small speed hit and faster reopens, an ArrayObject type that is 
basically an Object that can provide access to one or two real or 
virtual arrays. So technically you could use an ArrayObject that had a 
sparse implementation behind it. Unfortunately, you would have to 
implement new CachKeys to do this. Trivial to do, but reveals our 
LUCENE-831 problem of exponential cachkey increases with every new 
little option/idea and the juggling of which to use. I havn't thought 
about it, but I'm hoping an API tweak can alleviate some of this.

- Mark

Britske wrote:
> Hi, 
>
> I recently saw activity on LUCENE-831 (Complete overhaul of FieldCache
> API/Implementation) which I have interest in. 
> I posted previously on this with my concern that given the current default
> cache I sometimes get OOM-errors because I have a lot of fields which are
> sorted on, which ultimately causes the fieldcache to grow greater then
> available RAM. 
>
> ultimately I want to subclass the new pluggable Fieldcache of lucene-831 to
> offload to disk (using ehcache or memcachedB or something) but havn't found
> the time yet. 
>
> What I would like to know for now is if perhaps the newly implemented
> standard cache in LUCENE-831 uses another strategy of caching than the
> standard Fieldcache in Lucene. 
>
> i.e: The normal cache consumes memory while generating a fieldcache for
> every document in lucene even though the document hasn't got that field set. 
>
> Since my documents are very sparse in these fields I want to sort on it
> would differ a_lot when documents that don't have the field in question set
> don't add up in the used memory. 
>
> So am I lucky? Or would I indeed have to cook up something myself? 
> Thanks and best regards,
>
> Geert-Jan
>
>
>   
I'm

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 21:54:58 2008
Return-Path: <java-user-return-37193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63296 invoked from network); 14 Nov 2008 21:54:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 21:54:58 -0000
Received: (qmail 11683 invoked by uid 500); 14 Nov 2008 21:54:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11651 invoked by uid 500); 14 Nov 2008 21:54:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11640 invoked by uid 99); 14 Nov 2008 21:54:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 13:54:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 21:53:38 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6F2B571C47D; Fri, 14 Nov 2008 13:54:22 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4671371C3B8
	for <java-user@lucene.apache.org>; Fri, 14 Nov 2008 13:54:22 -0800 (PST)
Date: Fri, 14 Nov 2008 13:54:22 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Storing part of the field
In-Reply-To: <3594262A-B42D-4096-8EEE-2ECE8A291DC9@gmail.com>
Message-ID: <Pine.LNX.4.62.0811141352300.31035@radix.cryptio.net>
References: <85E2F8AA-2469-4A3C-8A9A-A9CCD9D2218B@gmail.com>
 <867513fe0811140002u40a3e7b7y7f9061b7a6e33c3@mail.gmail.com>
 <9A47D66B-94DE-4BD3-B549-1371538DB540@gmail.com>
 <359a92830811140508s2336e905he705e63f58ce6117@mail.gmail.com>
 <3594262A-B42D-4096-8EEE-2ECE8A291DC9@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: The application which uses the index expects this in same field. So, can't use
: two fields.

be carefully about termiology here ... there are 
"org.apache.lucene.document.Field" objects, and then there are "fields" or 
"field names"

you can index a Document containing multiple "Field" objects that 
have the same name but differnet contents (one indexed, and one stored), 
and then as far as your client is concerned there is only one "Field" when 
it does the search.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 14 22:01:35 2008
Return-Path: <java-user-return-37194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67354 invoked from network); 14 Nov 2008 22:01:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Nov 2008 22:01:34 -0000
Received: (qmail 20004 invoked by uid 500); 14 Nov 2008 22:01:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19974 invoked by uid 500); 14 Nov 2008 22:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19962 invoked by uid 99); 14 Nov 2008 22:01:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 14:01:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.163] (HELO web50711.mail.re2.yahoo.com) (206.190.38.163)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 Nov 2008 22:00:14 +0000
Received: (qmail 82418 invoked by uid 60001); 14 Nov 2008 21:59:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=uElmMcLLn6PPQxdbIPWMwa3cSmywZMvGcZkNRrJ1tz+lb5vMnjJtRm8jp2DRpa+hAvsMONRGA+tzClMRtdwlEWws1PNtqbj2vDi7Zgv6h4TrYout7FKFHffxLcpdFbC2GzQ5ZVDnhwVcxlb2h60IbTg5LLAvhsdqHcSrwO6L4ro=;
X-YMail-OSG: 08qy4g8VM1lQKZyUSfFae88h7AnCLqaF2BIRV.oAGRK9cDVxol_gxWJwuXZArMU9RctSydNWfaVDZDcCZO2whuLVcBSlUeDHi9xCIGORp4ubfc1Zd.OFNKTEm2Iucx56zn.o
Received: from [98.216.104.214] by web50711.mail.re2.yahoo.com via HTTP; Fri, 14 Nov 2008 13:59:57 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <20505283.post@talk.nabble.com> <491DDF01.9080407@gmail.com>
Date: Fri, 14 Nov 2008 13:59:57 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Extremely Large Strings Comparison (slightly off-topic)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <535223.79139.qm@web50711.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

hi I need to compare two Base64 representation strings of some MIME content that I am storing within a Lucene index. I need to efficiently compare them to find the closest match to a query Base64 string , post Lucene query.

I am not sure of the best way to approach this, could I compare the hashes and compute their similarity? Levenshtein distance seems hard because of the size of ths strings and seems inefficient? Is there any other method you could suggest?

n.b: The idea is to not to determine exact match or not, it is to compute a similarity metric. for example

John & Johnson (closer)
vs,
John & Jimmy (farther)

tia,
Aaron


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 15 00:55:14 2008
Return-Path: <java-user-return-37195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14075 invoked from network); 15 Nov 2008 00:55:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2008 00:55:14 -0000
Received: (qmail 54094 invoked by uid 500); 15 Nov 2008 00:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54070 invoked by uid 500); 15 Nov 2008 00:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54059 invoked by uid 99); 15 Nov 2008 00:55:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Nov 2008 16:55:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.39.227] (HELO web50712.mail.re2.yahoo.com) (206.190.39.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 15 Nov 2008 00:53:53 +0000
Received: (qmail 21908 invoked by uid 60001); 15 Nov 2008 00:53:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=I/olRp7yxag0NBFvHrJZeGn7a+xpeoP8eDWmrDwQoFvKPUXVhPm9GsD1LvIF/OL8U/c8f1x20urQLY1DMAHWY2Wq+qlGc1/h5HokwJcjGaglLIVMwLZmOkYMOogYgd/Pu9p7f/i0tIz33YXXl286aZttuWnkqLqJtgOBZdQrbL4=;
X-YMail-OSG: opBiptUVM1mX1BMDJ_Uq72zynJTBWMcTOdk972L4Z45obCpEDaCTGrbojITX2g_EbBRshkrG9K1cQR8wosO_64piEMvEFmTwtsNRaqsu2Kw2afCJUZgp5R3EZWiGr4KAJeNxVoCCTV2hI.YaSw15z1O8fatTPHl8C2LAMWJCZfmnan1NRjmx7CA1ogKF
Received: from [98.216.104.214] by web50712.mail.re2.yahoo.com via HTTP; Fri, 14 Nov 2008 16:53:35 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <20505283.post@talk.nabble.com> <491DDF01.9080407@gmail.com> <535223.79139.qm@web50711.mail.re2.yahoo.com> <CAB3A74869088D4D97E016C9BE77F6BF013446B2F3@ex01.corp.attivio.com>
Date: Fri, 14 Nov 2008 16:53:35 -0800 (PST)
From: Aaron Schon <aaron_schon@yahoo.com>
Subject: Re: Extremely Large Strings Comparison (slightly off-topic)
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <943297.20398.qm@web50712.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for responding Jonathan. I will look into k-grams approach. =0A=0ATh=
e objects could differ by small local changes. To provide some business con=
text, the application requires indexing email messages and attachments. If =
the attachments differ by some threshold (users making edits/reviews), the =
attachment needs to be flagged and major/minor versioned.=0A=0AThanks=0AAS=
=0A=0A=0A----- Original Message ----=0AFrom: Jonathan Young <JYoung@attivio=
.com>=0ATo: Aaron Schon <Aaron_Schon@yahoo.com>=0ASent: Friday, November 14=
, 2008 5:52:17 PM=0ASubject: RE: Extremely Large Strings Comparison (slight=
ly off-topic)=0A=0AAaron - Although a na=EFve implementation of a Levenshte=
in distance metric takes O(n*m) time, if you are willing to bound the maxim=
um distance by k << n,m (e.g. if you aren't interested in distances greater=
 than k) then the distance calculation can take O(k*min(n,m)).=0A=0AAnother=
 approach would be to use shingles or k-grams from the original document.  =
I believe Lucene has some support for that.=0A=0AIt depends a lot on the wa=
ys in which you expect the two strings to differ.  The fact that it is Base=
64-encoded MIME content doesn't matter - are they actually objects which ar=
e going to have small local changes, or are there likely to be changes whic=
h cascade (e.g. if the data is compressed).=0A=0AI hope this helps,=0A=0A--=
- Jonathan=0A=0A-----Original Message-----=0AFrom: Aaron Schon [mailto:aaro=
n_schon@yahoo.com]=0ASent: Friday, November 14, 2008 5:00 PM=0ATo: java-use=
r@lucene.apache.org=0ASubject: Extremely Large Strings Comparison (slightly=
 off-topic)=0A=0Ahi I need to compare two Base64 representation strings of =
some MIME content that I am storing within a Lucene index. I need to effici=
ently compare them to find the closest match to a query Base64 string , pos=
t Lucene query.=0A=0AI am not sure of the best way to approach this, could =
I compare the hashes and compute their similarity? Levenshtein distance see=
ms hard because of the size of ths strings and seems inefficient? Is there =
any other method you could suggest?=0A=0An.b: The idea is to not to determi=
ne exact match or not, it is to compute a similarity metric. for example=0A=
=0AJohn & Johnson (closer)=0Avs,=0AJohn & Jimmy (farther)=0A=0Atia,=0AAaron=
=0A=0A=0A=0A=0A------------------------------------------------------------=
---------=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0AFor additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=
=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 15 13:35:46 2008
Return-Path: <java-user-return-37196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48917 invoked from network); 15 Nov 2008 13:35:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2008 13:35:46 -0000
Received: (qmail 45505 invoked by uid 500); 15 Nov 2008 13:35:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45466 invoked by uid 500); 15 Nov 2008 13:35:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45455 invoked by uid 99); 15 Nov 2008 13:35:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 05:35:46 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 13:34:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L1LFn-0000Q2-4R
	for java-user@lucene.apache.org; Sat, 15 Nov 2008 05:31:59 -0800
Message-ID: <20515498.post@talk.nabble.com>
Date: Sat, 15 Nov 2008 05:31:59 -0800 (PST)
From: Britske <gbrits@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-831 (complete cache overhaul) -> mem use
In-Reply-To: <954597c90811141000l5a42e44dj6812df960621c926@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gbrits@gmail.com
References: <20505283.post@talk.nabble.com> <954597c90811141000l5a42e44dj6812df960621c926@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


But isn't this pluggability / visibility issues resolved with using
lucene-831? Or did you roll-your-own before 831 was available? 


PabloS wrote:
> 
> I have the same problem with cache and too many sorted fields, and had to
> implement a big workaround to be able to plug my own cache implementation
> in
> lucene 2.3.2. What I'd really like to see in the new cache implementation
> is
> easier pluggability and extension of the lucene classes, which is
> currently
> not possible due to visibility issues.
> 
> My 2 cents.
> 
> 2008/11/14 Britske <gbrits@gmail.com>
> 
>>
>> Hi,
>>
>> I recently saw activity on LUCENE-831 (Complete overhaul of FieldCache
>> API/Implementation) which I have interest in.
>> I posted previously on this with my concern that given the current
>> default
>> cache I sometimes get OOM-errors because I have a lot of fields which are
>> sorted on, which ultimately causes the fieldcache to grow greater then
>> available RAM.
>>
>> ultimately I want to subclass the new pluggable Fieldcache of lucene-831
>> to
>> offload to disk (using ehcache or memcachedB or something) but havn't
>> found
>> the time yet.
>>
>> What I would like to know for now is if perhaps the newly implemented
>> standard cache in LUCENE-831 uses another strategy of caching than the
>> standard Fieldcache in Lucene.
>>
>> i.e: The normal cache consumes memory while generating a fieldcache for
>> every document in lucene even though the document hasn't got that field
>> set.
>>
>> Since my documents are very sparse in these fields I want to sort on it
>> would differ a_lot when documents that don't have the field in question
>> set
>> don't add up in the used memory.
>>
>> So am I lucky? Or would I indeed have to cook up something myself?
>> Thanks and best regards,
>>
>> Geert-Jan
>>
>>
>> --
>> View this message in context:
>> http://www.nabble.com/LUCENE-831-%28complete-cache-overhaul%29--%3E-mem-use-tp20505283p20505283.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/LUCENE-831-%28complete-cache-overhaul%29--%3E-mem-use-tp20505283p20515498.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 15 13:44:46 2008
Return-Path: <java-user-return-37197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53205 invoked from network); 15 Nov 2008 13:44:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2008 13:44:46 -0000
Received: (qmail 53060 invoked by uid 500); 15 Nov 2008 13:44:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53032 invoked by uid 500); 15 Nov 2008 13:44:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53021 invoked by uid 99); 15 Nov 2008 13:44:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 05:44:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 13:43:26 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L1LRY-0000pF-TF
	for java-user@lucene.apache.org; Sat, 15 Nov 2008 05:44:09 -0800
Message-ID: <20515617.post@talk.nabble.com>
Date: Sat, 15 Nov 2008 05:44:08 -0800 (PST)
From: Britske <gbrits@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-831 (complete cache overhaul) -> mem use
In-Reply-To: <491DDF01.9080407@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gbrits@gmail.com
References: <20505283.post@talk.nabble.com> <491DDF01.9080407@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


That ArrayObject suggestion makes sense to me. It amost seemed to be as if
you were referring as this option (or at least the interfaces needed to
implement this) were already available as 1 out of 2 options available in
831? 

Could you give me a hint at were I have to be looking to extend what you're
suggesting? 
a new Cache, CacheFactory and Cachekey implementaiton for all types of
cachekeys? This may sound a bit ignorant, but it would be my first time to
get my head around the internals of an api instead of merely using it to
imbed in a client application so any help is highly appreciated.  

Thanks for your help,

Geert-Jan



markrmiller wrote:
> 
> Its hard to predict the future of LUCENE-831. I would bet that it will 
> end up in Lucene at some point in one form or another, but its hard to 
> say if that form will be whats in the available patches (I'm a contrib 
> committer so I won't have any real say in that, so take that prediction 
> with a grain of salt). It has strong ties to other issues and a 
> committer hasn't really had their whack at it yet.
> 
> Having said that though, LUCENE-831 allows for two types for dealing 
> with field values: either the old style int/string/long/etc arrays, or 
> for a small speed hit and faster reopens, an ArrayObject type that is 
> basically an Object that can provide access to one or two real or 
> virtual arrays. So technically you could use an ArrayObject that had a 
> sparse implementation behind it. Unfortunately, you would have to 
> implement new CachKeys to do this. Trivial to do, but reveals our 
> LUCENE-831 problem of exponential cachkey increases with every new 
> little option/idea and the juggling of which to use. I havn't thought 
> about it, but I'm hoping an API tweak can alleviate some of this.
> 
> - Mark
> 
> Britske wrote:
>> Hi, 
>>
>> I recently saw activity on LUCENE-831 (Complete overhaul of FieldCache
>> API/Implementation) which I have interest in. 
>> I posted previously on this with my concern that given the current
>> default
>> cache I sometimes get OOM-errors because I have a lot of fields which are
>> sorted on, which ultimately causes the fieldcache to grow greater then
>> available RAM. 
>>
>> ultimately I want to subclass the new pluggable Fieldcache of lucene-831
>> to
>> offload to disk (using ehcache or memcachedB or something) but havn't
>> found
>> the time yet. 
>>
>> What I would like to know for now is if perhaps the newly implemented
>> standard cache in LUCENE-831 uses another strategy of caching than the
>> standard Fieldcache in Lucene. 
>>
>> i.e: The normal cache consumes memory while generating a fieldcache for
>> every document in lucene even though the document hasn't got that field
>> set. 
>>
>> Since my documents are very sparse in these fields I want to sort on it
>> would differ a_lot when documents that don't have the field in question
>> set
>> don't add up in the used memory. 
>>
>> So am I lucky? Or would I indeed have to cook up something myself? 
>> Thanks and best regards,
>>
>> Geert-Jan
>>
>>
>>   
> I'm
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/LUCENE-831-%28complete-cache-overhaul%29--%3E-mem-use-tp20505283p20515617.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 15 14:41:57 2008
Return-Path: <java-user-return-37198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78676 invoked from network); 15 Nov 2008 14:41:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2008 14:41:56 -0000
Received: (qmail 92479 invoked by uid 500); 15 Nov 2008 14:41:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92441 invoked by uid 500); 15 Nov 2008 14:41:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92430 invoked by uid 99); 15 Nov 2008 14:41:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 06:41:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 14:40:35 +0000
Received: by yx-out-2324.google.com with SMTP id 3so736334yxj.5
        for <java-user@lucene.apache.org>; Sat, 15 Nov 2008 06:41:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=YUdXmhrTgi19YGSoLmM2b7eImlA698nAtrHxWMFYlYY=;
        b=N6YXQgZH880uWBzjzePMdp30zGmvnAcxy4IcrtoYpGG2WP6aS0AYwEThAw9h7EqvJE
         5zz9ByfxFmsko29TP/xWvYBAfcG9o4CRhTcLUQUKOGqT/rUsp6W0sN+s6D8+UbzXIMRM
         uGiIcN4yR5yGwEOnUIjFcRhTte/tv+5OfbWDE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Dt1DiEsfV2ruSCwkBj/Zo+0byZpaQfUp2sGUNitCT5VXuSThNnhfeKxRqxerHtBov9
         +ULYNzkvqK7jPVSrS+UDV9z6C1HyVf/viC5ocz8T29B+K4tMfZZLFNhu+GYShEPXsDFK
         1MmAieIYyqnGQwrhmKDGSPP7kOtSJfrfbvk5Q=
Received: by 10.90.120.17 with SMTP id s17mr1506624agc.101.1226760068577;
        Sat, 15 Nov 2008 06:41:08 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 1sm1484536agb.20.2008.11.15.06.41.07
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 15 Nov 2008 06:41:07 -0800 (PST)
Message-ID: <491EDF83.6040304@gmail.com>
Date: Sat, 15 Nov 2008 09:41:07 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: LUCENE-831 (complete cache overhaul) -> mem use
References: <20505283.post@talk.nabble.com> <491DDF01.9080407@gmail.com> <20515617.post@talk.nabble.com>
In-Reply-To: <20515617.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Like I said, its pretty easy to add this, but its also going to suck. 
Kind of exposes the fact that its missing the right extensibility at the 
moment. Things are still a bit ugly overall.


Your going to need new CacheKeys for the data types you want to support. 
A CacheKey builds and provides access to the field data and is simply:


*public* *abstract* *class* CacheKey {

*public* *abstract* CacheData buildData(IndexReader r);

*public* *abstract* *boolean* equals(Object o);

*public* *abstract* *int* hashCode();

*public* *boolean* isMergable();

*public* CacheData mergeData(*int*[] starts, CacheData[] data) ;

*public* *boolean* usesObjectArray();


For a sparse storage implementation you would use an object array, so 
have usesObjectArray return true and isMergable can then be false and 
you dont have to support the mergeData method.


In buildData you will load your object array and return it. Here is an 
array backed IntObjectArrayCacheKey build method:

*public* CacheData buildData(IndexReader reader) *throws* IOException {

   *final* *int*[] retArray = getIntArray(reader);

   ObjectArray fieldValues = *new* ObjectArray() {

     *public* Object get(*int* index) {

       *return* *new* Integer(retArray[index]);

     }

   };

   *return* *new* CacheData(fieldValues);

}


*protected* *int*[] getIntArray(IndexReader reader) *throws* IOException {

   *final* *int*[] retArray = *new* *int*[reader.maxDoc()];

   TermDocs termDocs = reader.termDocs();

   TermEnum termEnum = reader.terms(*new* Term(field, ""));

   *try* {

     *do* {

       Term term = termEnum.term();

       *if* (term == *null* || term.field() != field)
*        break*;
*     
      int* termval = parser.parseInt(term.text());

       termDocs.seek(termEnum);

       *while* (termDocs.next()) {
        retArray[termDocs.doc()] = termval;
      }

     } *while* (termEnum.next());

   } *finally* {

     termDocs.close();

     termEnum.close();

   }

   *return* retArray;

}


So it should be fairly straightforward to return a sparse implementation 
backed object array from your new CacheKey (SparseIntObjectArrayCacheKey 
or something).

Now some more ugliness: You can turn on the ObjectArray cachekeys by 
setting the system property 'use.object.array.sort' to true. This will 
cause FieldSortedHitQueue to return ScoreDocComparators that use the 
standard ObjectArray CacheKeys, IntObjectArrayCacheKey, 
FloatObjectArrayCacheKey, etc.The method that builds each comparator 
type knows what type to build for and whether to use primitive arrays or 
ObjectArrays ie (from FieldSortedHitQueue):


*static* ScoreDocComparator comparatorDoubleOA(*final* IndexReader 
reader, *final* String fieldname)


does this (it has to provide the CacheKey and know the return type):


*final* ObjectArray fieldOrder = (ObjectArray) 
reader.getCachedData(*new* 
DoubleObjectArrayCacheKey(field)).getCachePayload();


So you have to either change all of the ObjectArray comparator builders 
to use your CacheKeys:


*final* ObjectArray fieldOrder = (ObjectArray) 
reader.getCachedData(*new* 
SparseIntObjectArrayCacheKey(field)).getCachePayload();


Or you have to add more options in 
FieldSortedHitQueue.CacheEntry.buildData(IndexReader reader) and more 
static comparator builders in FieldSortedHitQueue that use the right 
CacheKeys. Obviously not very extensibility friendly at the moment. I'm 
sure with some thought, things could be much better. If you decided to 
jump into any of this, let me know if you have any suggestions, feedback.


- Mark



Britske wrote:
> That ArrayObject suggestion makes sense to me. It amost seemed to be as if
> you were referring as this option (or at least the interfaces needed to
> implement this) were already available as 1 out of 2 options available in
> 831? 
>
> Could you give me a hint at were I have to be looking to extend what you're
> suggesting? 
> a new Cache, CacheFactory and Cachekey implementaiton for all types of
> cachekeys? This may sound a bit ignorant, but it would be my first time to
> get my head around the internals of an api instead of merely using it to
> imbed in a client application so any help is highly appreciated.  
>
> Thanks for your help,
>
> Geert-Jan
>
>
>
> markrmiller wrote:
>   
>> Its hard to predict the future of LUCENE-831. I would bet that it will 
>> end up in Lucene at some point in one form or another, but its hard to 
>> say if that form will be whats in the available patches (I'm a contrib 
>> committer so I won't have any real say in that, so take that prediction 
>> with a grain of salt). It has strong ties to other issues and a 
>> committer hasn't really had their whack at it yet.
>>
>> Having said that though, LUCENE-831 allows for two types for dealing 
>> with field values: either the old style int/string/long/etc arrays, or 
>> for a small speed hit and faster reopens, an ArrayObject type that is 
>> basically an Object that can provide access to one or two real or 
>> virtual arrays. So technically you could use an ArrayObject that had a 
>> sparse implementation behind it. Unfortunately, you would have to 
>> implement new CachKeys to do this. Trivial to do, but reveals our 
>> LUCENE-831 problem of exponential cachkey increases with every new 
>> little option/idea and the juggling of which to use. I havn't thought 
>> about it, but I'm hoping an API tweak can alleviate some of this.
>>
>> - Mark
>>
>> Britske wrote:
>>     
>>> Hi, 
>>>
>>> I recently saw activity on LUCENE-831 (Complete overhaul of FieldCache
>>> API/Implementation) which I have interest in. 
>>> I posted previously on this with my concern that given the current
>>> default
>>> cache I sometimes get OOM-errors because I have a lot of fields which are
>>> sorted on, which ultimately causes the fieldcache to grow greater then
>>> available RAM. 
>>>
>>> ultimately I want to subclass the new pluggable Fieldcache of lucene-831
>>> to
>>> offload to disk (using ehcache or memcachedB or something) but havn't
>>> found
>>> the time yet. 
>>>
>>> What I would like to know for now is if perhaps the newly implemented
>>> standard cache in LUCENE-831 uses another strategy of caching than the
>>> standard Fieldcache in Lucene. 
>>>
>>> i.e: The normal cache consumes memory while generating a fieldcache for
>>> every document in lucene even though the document hasn't got that field
>>> set. 
>>>
>>> Since my documents are very sparse in these fields I want to sort on it
>>> would differ a_lot when documents that don't have the field in question
>>> set
>>> don't add up in the used memory. 
>>>
>>> So am I lucky? Or would I indeed have to cook up something myself? 
>>> Thanks and best regards,
>>>
>>> Geert-Jan
>>>
>>>
>>>   
>>>       
>> I'm
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 15 15:07:07 2008
Return-Path: <java-user-return-37199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84945 invoked from network); 15 Nov 2008 15:07:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2008 15:07:07 -0000
Received: (qmail 3855 invoked by uid 500); 15 Nov 2008 15:07:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3815 invoked by uid 500); 15 Nov 2008 15:07:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3804 invoked by uid 99); 15 Nov 2008 15:07:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 07:07:08 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 15:05:46 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L1MjF-0003v0-LZ
	for java-user@lucene.apache.org; Sat, 15 Nov 2008 07:06:29 -0800
Message-ID: <20516307.post@talk.nabble.com>
Date: Sat, 15 Nov 2008 07:06:29 -0800 (PST)
From: Britske <gbrits@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: LUCENE-831 (complete cache overhaul) -> mem use
In-Reply-To: <491EDF83.6040304@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: gbrits@gmail.com
References: <20505283.post@talk.nabble.com> <491DDF01.9080407@gmail.com> <20515617.post@talk.nabble.com> <491EDF83.6040304@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks Mark , 

this gets me moving. I will look into it somewhere soon.

Geert-Jan



markrmiller wrote:
> 
> Like I said, its pretty easy to add this, but its also going to suck. 
> Kind of exposes the fact that its missing the right extensibility at the 
> moment. Things are still a bit ugly overall.
> 
> 
> Your going to need new CacheKeys for the data types you want to support. 
> A CacheKey builds and provides access to the field data and is simply:
> 
> 
> *public* *abstract* *class* CacheKey {
> 
> *public* *abstract* CacheData buildData(IndexReader r);
> 
> *public* *abstract* *boolean* equals(Object o);
> 
> *public* *abstract* *int* hashCode();
> 
> *public* *boolean* isMergable();
> 
> *public* CacheData mergeData(*int*[] starts, CacheData[] data) ;
> 
> *public* *boolean* usesObjectArray();
> 
> 
> For a sparse storage implementation you would use an object array, so 
> have usesObjectArray return true and isMergable can then be false and 
> you dont have to support the mergeData method.
> 
> 
> In buildData you will load your object array and return it. Here is an 
> array backed IntObjectArrayCacheKey build method:
> 
> *public* CacheData buildData(IndexReader reader) *throws* IOException {
> 
>    *final* *int*[] retArray = getIntArray(reader);
> 
>    ObjectArray fieldValues = *new* ObjectArray() {
> 
>      *public* Object get(*int* index) {
> 
>        *return* *new* Integer(retArray[index]);
> 
>      }
> 
>    };
> 
>    *return* *new* CacheData(fieldValues);
> 
> }
> 
> 
> *protected* *int*[] getIntArray(IndexReader reader) *throws* IOException {
> 
>    *final* *int*[] retArray = *new* *int*[reader.maxDoc()];
> 
>    TermDocs termDocs = reader.termDocs();
> 
>    TermEnum termEnum = reader.terms(*new* Term(field, ""));
> 
>    *try* {
> 
>      *do* {
> 
>        Term term = termEnum.term();
> 
>        *if* (term == *null* || term.field() != field)
> *        break*;
> *     
>       int* termval = parser.parseInt(term.text());
> 
>        termDocs.seek(termEnum);
> 
>        *while* (termDocs.next()) {
>         retArray[termDocs.doc()] = termval;
>       }
> 
>      } *while* (termEnum.next());
> 
>    } *finally* {
> 
>      termDocs.close();
> 
>      termEnum.close();
> 
>    }
> 
>    *return* retArray;
> 
> }
> 
> 
> So it should be fairly straightforward to return a sparse implementation 
> backed object array from your new CacheKey (SparseIntObjectArrayCacheKey 
> or something).
> 
> Now some more ugliness: You can turn on the ObjectArray cachekeys by 
> setting the system property 'use.object.array.sort' to true. This will 
> cause FieldSortedHitQueue to return ScoreDocComparators that use the 
> standard ObjectArray CacheKeys, IntObjectArrayCacheKey, 
> FloatObjectArrayCacheKey, etc.The method that builds each comparator 
> type knows what type to build for and whether to use primitive arrays or 
> ObjectArrays ie (from FieldSortedHitQueue):
> 
> 
> *static* ScoreDocComparator comparatorDoubleOA(*final* IndexReader 
> reader, *final* String fieldname)
> 
> 
> does this (it has to provide the CacheKey and know the return type):
> 
> 
> *final* ObjectArray fieldOrder = (ObjectArray) 
> reader.getCachedData(*new* 
> DoubleObjectArrayCacheKey(field)).getCachePayload();
> 
> 
> So you have to either change all of the ObjectArray comparator builders 
> to use your CacheKeys:
> 
> 
> *final* ObjectArray fieldOrder = (ObjectArray) 
> reader.getCachedData(*new* 
> SparseIntObjectArrayCacheKey(field)).getCachePayload();
> 
> 
> Or you have to add more options in 
> FieldSortedHitQueue.CacheEntry.buildData(IndexReader reader) and more 
> static comparator builders in FieldSortedHitQueue that use the right 
> CacheKeys. Obviously not very extensibility friendly at the moment. I'm 
> sure with some thought, things could be much better. If you decided to 
> jump into any of this, let me know if you have any suggestions, feedback.
> 
> 
> - Mark
> 
> 
> 
> Britske wrote:
>> That ArrayObject suggestion makes sense to me. It amost seemed to be as
>> if
>> you were referring as this option (or at least the interfaces needed to
>> implement this) were already available as 1 out of 2 options available in
>> 831? 
>>
>> Could you give me a hint at were I have to be looking to extend what
>> you're
>> suggesting? 
>> a new Cache, CacheFactory and Cachekey implementaiton for all types of
>> cachekeys? This may sound a bit ignorant, but it would be my first time
>> to
>> get my head around the internals of an api instead of merely using it to
>> imbed in a client application so any help is highly appreciated.  
>>
>> Thanks for your help,
>>
>> Geert-Jan
>>
>>
>>
>> markrmiller wrote:
>>   
>>> Its hard to predict the future of LUCENE-831. I would bet that it will 
>>> end up in Lucene at some point in one form or another, but its hard to 
>>> say if that form will be whats in the available patches (I'm a contrib 
>>> committer so I won't have any real say in that, so take that prediction 
>>> with a grain of salt). It has strong ties to other issues and a 
>>> committer hasn't really had their whack at it yet.
>>>
>>> Having said that though, LUCENE-831 allows for two types for dealing 
>>> with field values: either the old style int/string/long/etc arrays, or 
>>> for a small speed hit and faster reopens, an ArrayObject type that is 
>>> basically an Object that can provide access to one or two real or 
>>> virtual arrays. So technically you could use an ArrayObject that had a 
>>> sparse implementation behind it. Unfortunately, you would have to 
>>> implement new CachKeys to do this. Trivial to do, but reveals our 
>>> LUCENE-831 problem of exponential cachkey increases with every new 
>>> little option/idea and the juggling of which to use. I havn't thought 
>>> about it, but I'm hoping an API tweak can alleviate some of this.
>>>
>>> - Mark
>>>
>>> Britske wrote:
>>>     
>>>> Hi, 
>>>>
>>>> I recently saw activity on LUCENE-831 (Complete overhaul of FieldCache
>>>> API/Implementation) which I have interest in. 
>>>> I posted previously on this with my concern that given the current
>>>> default
>>>> cache I sometimes get OOM-errors because I have a lot of fields which
>>>> are
>>>> sorted on, which ultimately causes the fieldcache to grow greater then
>>>> available RAM. 
>>>>
>>>> ultimately I want to subclass the new pluggable Fieldcache of
>>>> lucene-831
>>>> to
>>>> offload to disk (using ehcache or memcachedB or something) but havn't
>>>> found
>>>> the time yet. 
>>>>
>>>> What I would like to know for now is if perhaps the newly implemented
>>>> standard cache in LUCENE-831 uses another strategy of caching than the
>>>> standard Fieldcache in Lucene. 
>>>>
>>>> i.e: The normal cache consumes memory while generating a fieldcache for
>>>> every document in lucene even though the document hasn't got that field
>>>> set. 
>>>>
>>>> Since my documents are very sparse in these fields I want to sort on it
>>>> would differ a_lot when documents that don't have the field in question
>>>> set
>>>> don't add up in the used memory. 
>>>>
>>>> So am I lucky? Or would I indeed have to cook up something myself? 
>>>> Thanks and best regards,
>>>>
>>>> Geert-Jan
>>>>
>>>>
>>>>   
>>>>       
>>> I'm
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>     
>>
>>   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/LUCENE-831-%28complete-cache-overhaul%29--%3E-mem-use-tp20505283p20516307.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 15 17:40:04 2008
Return-Path: <java-user-return-37200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45720 invoked from network); 15 Nov 2008 17:40:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Nov 2008 17:40:03 -0000
Received: (qmail 76625 invoked by uid 500); 15 Nov 2008 17:40:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76595 invoked by uid 500); 15 Nov 2008 17:40:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76584 invoked by uid 99); 15 Nov 2008 17:40:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 09:40:04 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a18.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 17:38:42 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a18.g.dreamhost.com (Postfix) with ESMTP id E7BD75B4ED
	for <java-user@lucene.apache.org>; Sat, 15 Nov 2008 09:39:24 -0800 (PST)
Message-Id: <992025CA-85FD-40E5-8184-172E0ECB9001@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <491C510F.8040005@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: constructing a mini-index with just the number of hits for a term
Date: Sat, 15 Nov 2008 12:39:24 -0500
References: <491C510F.8040005@gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you share what the actual problem is that you are trying to  
solve?  It might help put things in context for me.  I'm guessing you  
are doing some type of co-occurrence analysis, but...

More below.

On Nov 13, 2008, at 11:08 AM, Sven wrote:

> First - I apologize for the double post on my earlier email.  The  
> first time I sent it I received an error message from support@magentanews.com 
>  saying that I should instead send email to java-user@meltwater.com  
> so I thought it did not go through.
> My question is this - is there a way to use the Lucene/Solr  
> infrastructure to create a mini-index that simply contains a lookup  
> table of terms and the number of times they have appeared?

This could be possible.  I think I would create documents with  
Index.ANALYZED, and Store.NO.  Then, you just need to use the TermEnum  
and TermDocs to access the information that you need.  In a sense, you  
are just creating the term dictionary.  You could also turn off  
storing of NORMS, which will save too.

>
> I do not need to record which documents have them nor do I need to  
> know where in the documents they appear.  There could be (and  
> probably will be) more than 2^32 terms, however.

2^32 unique terms or 2^32 total terms?

>  I'm not sure if that makes a difference to the Lucene backend, but  
> thought it might be relevant.
> This question coincides with my earlier question about counting the  
> times a given term is associated with another term.  I figure that  
> this would be more easily accomplished by making the mini-index  
> described above alongside the normal index when a document is  
> indexed.  For example, when scanning:
>
> Bravely bold Sir Robin, brought forth from Camelot.  He was not  
> afraid to die!  Oh, brave Sir Robin!
>
> In addition to the normal indexing function of Lucene, I would like  
> to write something on the backend to also index:
>
> bravely|bold
> bravely|sir
> bravely|robin
> bravely|brought
> bravely|forth
> bold|sir
> bold|robin
> bold|brought
> bold|forth
> bold|camelot  ("from" being a stop word)
> ...and so on
>
> I only need to keep a running total of each "bravely|bold" term,  
> however, since the number of terms will be quite large and keeping  
> track of the document/termpositions would translate to a lot of  
> wasted HD space.

For this, I think you will have to hook into the Analyzer process.   
The other thing to do is just try keeping the document/term positions,  
it may not actually be as bad as you think in terms of space.

>
> If such a thing is not already in place, could someone let me know  
> if there are some tutorials, documentation, or presentations that  
> describe the inner workings of Lucene and the theories/ 
> implementation at work for the actual file formats, structures, data  
> manipulations, etc?  (The javadocs don't go into this kind of  
> detail.)  I'm sure I can sift through the code and eventually make  
> sense of it, but if there is documentation out there, I'd prefer to  
> peruse that first.  My thought being that I can simply generate my  
> own kind of hash for each combined term and write it out to a custom  
> file structure similar to Lucene - but the specifics of how to  
> (optimally) do so are not plain to me yet.
> Thanks again!
> -Sven
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 16 01:37:03 2008
Return-Path: <java-user-return-37201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88370 invoked from network); 16 Nov 2008 01:37:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2008 01:37:03 -0000
Received: (qmail 6736 invoked by uid 500); 16 Nov 2008 01:37:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6704 invoked by uid 500); 16 Nov 2008 01:37:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6691 invoked by uid 99); 16 Nov 2008 01:37:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Nov 2008 17:37:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 01:35:43 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 5546A71C49B; Sat, 15 Nov 2008 17:35:57 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 51FAE71C44B
	for <java-user@lucene.apache.org>; Sat, 15 Nov 2008 17:35:57 -0800 (PST)
Date: Sat, 15 Nov 2008 17:35:57 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: About counting term hits
In-Reply-To: <B8A11542-5CB4-4107-91BE-498C9BEF977A@mikemccandless.com>
Message-ID: <Pine.LNX.4.62.0811151722180.19253@radix.cryptio.net>
References: <1226518223.11268.6.camel@tambre>   
 <aec6319e0811121826x2c707cb4u7f954c38111debd1@mail.gmail.com>
 <49054.193.145.220.56.1226565324.squirrel@mail.freeresearch.org>
 <255673.38640.qm@web50309.mail.re2.yahoo.com>
 <57465.83.165.123.157.1226594113.squirrel@mail.freeresearch.org>
 <B8A11542-5CB4-4107-91BE-498C9BEF977A@mikemccandless.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: I think to do this efficiently you'd need to modify Lucene's builtin query
: classes (eg TermQuery) such that during the scoring process, in addition to
: simply computing its contribution to the document's score, it would also
: record further information like total number of occurrences of each term,
: which docs had which terms, etc.

Unless you don't care about the score at all, just the total count.  In 
which case you can use a custom Similarity to make the score for a doc be 
the count (ignore idf, norms, queryNorm, etc...)  Then use a hit collector 
that sums the counts for every doc matched.  

that should be as efficient as possible (it's certianly only one pass) but 
you might be able to optimize it by using your other criteria 
(date range or whatever) in a Filter to generate a BitSet, then fetch a 
TermDocs instance for your term, and iterate through the docs summing up 
the frequencies (you can use skipTo(set.nextSetBit()) to optimize away 
non-matching docs)

(at least i'm pretty sure that would work)

Another nuance to this question...

: > > > > I am new to LUCENE and I am testing some issues about it. I can
: > > > > retrieve
: > > > > the number of documents which satisfies a query, but I don't find how
: > > > > to
: > > > > obtain the number of terms which match it.

The words "term" and "query" mean very specific, and independent, things 
in lucene, ... but Mario seems to be using them interchangably -- if you 
want to know how often a Term filtered appears in all docs matching some 
criteria, then all of the techniques described so far should work.

but if you want to count the occurances of a more complicated Query (like: 
how many times does the phrase "Mario Barcala" appear in docs from 
199-2003) the situation gets more complicated ... for that you would want 
ot use something like a SpanQuery and iterate through the Spans (counting 
them as you go)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 16 10:28:54 2008
Return-Path: <java-user-return-37202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67688 invoked from network); 16 Nov 2008 10:28:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2008 10:28:54 -0000
Received: (qmail 41449 invoked by uid 500); 16 Nov 2008 10:28:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41414 invoked by uid 500); 16 Nov 2008 10:28:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41403 invoked by uid 99); 16 Nov 2008 10:28:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 02:28:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 10:27:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L1erX-0007vt-0a
	for java-user@lucene.apache.org; Sun, 16 Nov 2008 02:28:15 -0800
Message-ID: <20523960.post@talk.nabble.com>
Date: Sun, 16 Nov 2008 02:28:15 -0800 (PST)
From: Tomer Gabel <tomer@tomergabel.com>
To: java-user@lucene.apache.org
Subject: Re: Order the index by timestamp field and Get n documents
In-Reply-To: <962306.88258.qm@web110313.mail.gq1.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tomer@tomergabel.com
References: <962306.88258.qm@web110313.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Possibly the fastest way to do this is to use a sortable timestamp field
(e.g. padded long) and use a TermEnumerator, which always gives a
lexicographically-sorted enumeration. Since you'd probably prefer a "most
recent" policy you may need to come up with a reverse-timestamp scheme (e.g.
instead of zero-padded "milliseconds since epoch" you may prefer zero-padded
"milliseconds 'till year 3000" values).

Lucene doesn't handle this type of queries very efficiently, however, so you
may prefer an SQL database instead (or in addition).
--TG

 


Cool The Breezer wrote:
> 
> Hi,
>    In my index, there is a field called timestamp which is long value of
> date. I am  trying to get sort all documents by timestamp and get N
> documents. 
> I am trying to find a way to create a query like "timestamp > 0" and then
> order the result by timestamp and get N fields. However I am not able to
> do that. Suggest me the best way. Or there are any lowlevel method
> available for the same.
> 
> I am using Lucene 2.3.1 and looking into method search(Weight weight,
> Filter filter, int nDocs, Sort sort) in IndexSearcher. Trying to know how
> to create a Weight object.
> 
> Anyway, I would really appreciate your suggestion....
> 
> -RB
> 
> 
>       
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


-----
--

http://www.tomergabel.com Tomer Gabel 


-- 
View this message in context: http://www.nabble.com/Order-the-index-by-timestamp-field-and-Get-n-documents-tp20414870p20523960.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 16 13:37:15 2008
Return-Path: <java-user-return-37203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38179 invoked from network); 16 Nov 2008 13:37:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2008 13:37:15 -0000
Received: (qmail 11859 invoked by uid 500); 16 Nov 2008 13:37:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11817 invoked by uid 500); 16 Nov 2008 13:37:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11806 invoked by uid 99); 16 Nov 2008 13:37:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 05:37:15 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.163.178.138] (HELO web34306.mail.mud.yahoo.com) (66.163.178.138)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Nov 2008 13:35:53 +0000
Received: (qmail 76236 invoked by uid 60001); 16 Nov 2008 13:36:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=ZWId+YBhDxTRowz2VT/I7SLqKxLX+xdRJKgL+6mkpuX4R1xTZIdvxuQzzhnNeahp3ECQNceebFxymXhXbDfu7Zxt3ysQYJRShX61gY8D/ld/OwdgTwKh/I8MmgItex0Zeuysrlh8r/t4kQ4mOl39yBw92nOznehhmSaKEpz5Ktw=;
X-YMail-OSG: 0xQA9CgVM1kBBANwjAh2tcijdBDJPjsV0Muw1oaIAErG4bn7zEYfEMlPM4DiDlwLcEe4lM10dddtD3CMcvgUH2QYbF6vZDKqTzny3QoYj4GTk0oxA7IA2oaHvreV4JhL25YhMxkQISc9JXoGeydXg4QDWcvLtV7066LUngQ-
Received: from [98.198.138.243] by web34306.mail.mud.yahoo.com via HTTP; Sun, 16 Nov 2008 05:36:36 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
Date: Sun, 16 Nov 2008 05:36:36 -0800 (PST)
From: Zhibin Mai <zbmai@yahoo.com>
Subject: how to estimate how much memory is required to support the large index search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-348092019-1226842596=:75162"
Message-ID: <776612.75162.qm@web34306.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-348092019-1226842596=:75162
Content-Type: text/plain; charset=us-ascii

Hello,

I
am a beginner on using lucene. We developed an application to
create and search index using lucene 2.3.1. We would like to know how
to estimate how much memory is required to support 
the index search given an index.

Recently,
the size of the index has reached to about 200GB with 197M of documents
and 223M of terms. Our application starts having intermittent
"OutOfMemoryError: Java heap space" when we use
it to search the index. We use JProfiler to get the following memory allocation when we do one keyword search:

char[]                                                        332MB
org.apache.lucene.index.TermInfo            194MB
java.lang.String                                        146MB
org.apache.lucene.index.Term                99,823KB
org.apache.lucene.index.Term                24,956KB
org.apache.lucene.index.TermInfo[]        24,956KB

byte[]                                                    188MB
long[]                                                    49,912KB

The memory allocation for the first 6 types of objects does not change when we change the search criteria. Could you please give me some advice what major factors will affect the memory allocation
and how those factors will affect the memory usage precisely on search? Is it possible to reduce the memory usage on search?


Thank you,


Zhibin



      
--0-348092019-1226842596=:75162--

From java-user-return-37204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 16 15:41:17 2008
Return-Path: <java-user-return-37204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2245 invoked from network); 16 Nov 2008 15:41:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2008 15:41:17 -0000
Received: (qmail 99134 invoked by uid 500); 16 Nov 2008 15:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99094 invoked by uid 500); 16 Nov 2008 15:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99083 invoked by uid 99); 16 Nov 2008 15:41:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 07:41:17 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Nov 2008 15:39:55 +0000
Received: (qmail 51678 invoked from network); 16 Nov 2008 15:39:35 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.3?) (68.48.101.76)
  by relay03.pair.com with SMTP; 16 Nov 2008 15:39:35 -0000
X-pair-Authenticated: 68.48.101.76
Subject: InstantiatedIndex help
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Date: Sun, 16 Nov 2008 10:39:43 -0500
Message-Id: <1226849983.12418.8.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi gang,
   I am trying to trace the 2.4 API to create an InstantiatedIndex, but
its rather difficult to connect directory,reader,search,index etc just
reading the javadocs. 

    I have a (POI - plain old index) directory already and want to
create a faster InstantiatedIndex and IndexSearcher to query it like
before. What's the proper order to do this? 

Also, if anyone has any empirical data on the performance or reliability
of InstantiatedIndex, I'd be curious.

Thanks for the tips!
Darren


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 16 15:51:26 2008
Return-Path: <java-user-return-37205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5517 invoked from network); 16 Nov 2008 15:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2008 15:51:26 -0000
Received: (qmail 16129 invoked by uid 500); 16 Nov 2008 15:51:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16091 invoked by uid 500); 16 Nov 2008 15:51:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16080 invoked by uid 99); 16 Nov 2008 15:51:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 07:51:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 15:50:04 +0000
Received: by yx-out-2324.google.com with SMTP id 3so827997yxj.5
        for <java-user@lucene.apache.org>; Sun, 16 Nov 2008 07:50:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=82l2EGMVzPJ1JrD4HrDWqxqwL7sSrUs2iBe8tdLN/kE=;
        b=d0+6FFh2t9RbHPLIUZwKYqWV7nmnjj8HYqNHoH+AJWN0CjGt+N5rM8rZ+dPBVzYolV
         RIso6YdVvhNE9tWfyTIdiS9yYooRFKdXN7Ey4YvfBpBi2qx+FyvUhEt8jVXsYVjLPq3U
         rPc62D+tK+j2pp/ouG4gdrhS9V6+cLjc3NWT8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=ocQsgxeBtT7JXFe63Ku3+W8jlMNatiU5JDC3MF9SU9hYhC1KBA6xu21bVcPLmM8rVm
         wv4x2K97O7hwi/43rVfJ/z3mQpXxMiNeJJGtQJWsewm/aOgZIFMRD8CjtcNUl3a4pEHQ
         3j1x8JSkO7/6eTmP7vjyZiEz6BZs+o+S1dXRc=
Received: by 10.90.30.13 with SMTP id d13mr2116605agd.3.1226850638602;
        Sun, 16 Nov 2008 07:50:38 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 20sm2201051agb.38.2008.11.16.07.50.37
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 16 Nov 2008 07:50:38 -0800 (PST)
Message-ID: <4920414F.5000601@gmail.com>
Date: Sun, 16 Nov 2008 10:50:39 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: InstantiatedIndex help
References: <1226849983.12418.8.camel@nuraku>
In-Reply-To: <1226849983.12418.8.camel@nuraku>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Check out the docs at: 
http://lucene.apache.org/java/2_4_0/api/contrib-instantiated/index.html

There is a performance graph there to check  out.

The code should be fairly straightforward - you can make an 
InstantiatedIndex thats empty, or seed it with an IndexReader. Then you 
can make an InstantiatedReader or Writer, which take the 
InstantiatedIndex as a constructor arg.

You should be able to just wrap that InstantiatedReader in a regular 
Searcher.

Darren Govoni wrote:
> Hi gang,
>    I am trying to trace the 2.4 API to create an InstantiatedIndex, but
> its rather difficult to connect directory,reader,search,index etc just
> reading the javadocs. 
>
>     I have a (POI - plain old index) directory already and want to
> create a faster InstantiatedIndex and IndexSearcher to query it like
> before. What's the proper order to do this? 
>
> Also, if anyone has any empirical data on the performance or reliability
> of InstantiatedIndex, I'd be curious.
>
> Thanks for the tips!
> Darren
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 16 16:05:01 2008
Return-Path: <java-user-return-37206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10277 invoked from network); 16 Nov 2008 16:05:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2008 16:05:00 -0000
Received: (qmail 23210 invoked by uid 500); 16 Nov 2008 16:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23175 invoked by uid 500); 16 Nov 2008 16:05:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23160 invoked by uid 99); 16 Nov 2008 16:05:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 08:05:02 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Nov 2008 16:03:40 +0000
Received: (qmail 54306 invoked from network); 16 Nov 2008 16:03:23 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.3?) (68.48.101.76)
  by relay03.pair.com with SMTP; 16 Nov 2008 16:03:23 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: InstantiatedIndex help
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <4920414F.5000601@gmail.com>
References: <1226849983.12418.8.camel@nuraku>  <4920414F.5000601@gmail.com>
Content-Type: text/plain
Date: Sun, 16 Nov 2008 11:03:31 -0500
Message-Id: <1226851411.12418.15.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mark,
  Thanks for the tips. Here's what I will try (psuedo-code)

    endirectory = RAMDirectory("index/dictionary.en")
    ensearcher = IndexSearcher(endirectory)
    // Adding these
    reader = ensearcher.getIndexReader()
    iindex = InstantiatedIndex(reader)
    ireader = iindex.indexReaderFactory()
    isearcher = IndexSearcher(ireader)

Kind of round about way to get an InstantiatedIndex I guess,but maybe
there's a briefer way?

Thank you.
Darren

On Sun, 2008-11-16 at 10:50 -0500, Mark Miller wrote:
> Check out the docs at: 
> http://lucene.apache.org/java/2_4_0/api/contrib-instantiated/index.html
> 
> There is a performance graph there to check  out.
> 
> The code should be fairly straightforward - you can make an 
> InstantiatedIndex thats empty, or seed it with an IndexReader. Then you 
> can make an InstantiatedReader or Writer, which take the 
> InstantiatedIndex as a constructor arg.
> 
> You should be able to just wrap that InstantiatedReader in a regular 
> Searcher.
> 
> Darren Govoni wrote:
> > Hi gang,
> >    I am trying to trace the 2.4 API to create an InstantiatedIndex, but
> > its rather difficult to connect directory,reader,search,index etc just
> > reading the javadocs. 
> >
> >     I have a (POI - plain old index) directory already and want to
> > create a faster InstantiatedIndex and IndexSearcher to query it like
> > before. What's the proper order to do this? 
> >
> > Also, if anyone has any empirical data on the performance or reliability
> > of InstantiatedIndex, I'd be curious.
> >
> > Thanks for the tips!
> > Darren
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 16 16:47:08 2008
Return-Path: <java-user-return-37207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23816 invoked from network); 16 Nov 2008 16:47:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2008 16:47:08 -0000
Received: (qmail 48681 invoked by uid 500); 16 Nov 2008 16:47:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48646 invoked by uid 500); 16 Nov 2008 16:47:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48635 invoked by uid 99); 16 Nov 2008 16:47:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 08:47:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.170.187 as permitted sender)
Received: from [64.233.170.187] (HELO rn-out-0910.google.com) (64.233.170.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 16:45:46 +0000
Received: by rn-out-0910.google.com with SMTP id j71so1752227rne.4
        for <java-user@lucene.apache.org>; Sun, 16 Nov 2008 08:46:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=dXXgqGrs2Jfz8pgeO4vAOjsuXIvk7sY3oXgi+f7LnV4=;
        b=kWK4RHEaPAUAIVZcQ6N4yTSYmtSii0uh8OeTnq5j1nPcVmYinVpS/Euxt7S/zL/p1N
         MIfZ6YSvfWYas+70ljIi4nmO7VqGjmPP6RhVRbLHjli7YDHnhnZnVrHgPTr0SsqAl3Eo
         zbA+5vLsy9oqMeeg5hQsa4fe6l7rjFq3elIJM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=S3VEQrF9o0hUP4xEjA/q1SFblr2yQOnrkpuUGnDHKEUgl0QpqPyVJr8ia1L/rtxKM5
         Ygubs6XlaI+tv+FRzyvR0R/pdip5cdp5He/R6SVoPKjBKDIDiCvyMQHSzCJKauBneWKH
         qo1aF9B2M3ivVQrIyHpcxnSb/+LWP7jOna2RI=
Received: by 10.90.65.5 with SMTP id n5mr2135972aga.14.1226853980544;
        Sun, 16 Nov 2008 08:46:20 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 20sm2233049agb.38.2008.11.16.08.46.19
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 16 Nov 2008 08:46:20 -0800 (PST)
Message-ID: <49204E5D.6010101@gmail.com>
Date: Sun, 16 Nov 2008 11:46:21 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: InstantiatedIndex help
References: <1226849983.12418.8.camel@nuraku>  <4920414F.5000601@gmail.com> <1226851411.12418.15.camel@nuraku>
In-Reply-To: <1226851411.12418.15.camel@nuraku>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Can you start with an empty index? Then how about:

// Adding these

    iindex = InstantiatedIndex()
    ireader = iindex.indexReaderFactory()
    isearcher = IndexSearcher(ireader)

If you want a copy from another IndexReader though, you have to get that reader from somewhere right?

- Mark 



Darren Govoni wrote:
> Hi Mark,
>   Thanks for the tips. Here's what I will try (psuedo-code)
>
>     endirectory = RAMDirectory("index/dictionary.en")
>     ensearcher = IndexSearcher(endirectory)
>     // Adding these
>     reader = ensearcher.getIndexReader()
>     iindex = InstantiatedIndex(reader)
>     ireader = iindex.indexReaderFactory()
>     isearcher = IndexSearcher(ireader)
>
> Kind of round about way to get an InstantiatedIndex I guess,but maybe
> there's a briefer way?
>
> Thank you.
> Darren
>
> On Sun, 2008-11-16 at 10:50 -0500, Mark Miller wrote:
>   
>> Check out the docs at: 
>> http://lucene.apache.org/java/2_4_0/api/contrib-instantiated/index.html
>>
>> There is a performance graph there to check  out.
>>
>> The code should be fairly straightforward - you can make an 
>> InstantiatedIndex thats empty, or seed it with an IndexReader. Then you 
>> can make an InstantiatedReader or Writer, which take the 
>> InstantiatedIndex as a constructor arg.
>>
>> You should be able to just wrap that InstantiatedReader in a regular 
>> Searcher.
>>
>> Darren Govoni wrote:
>>     
>>> Hi gang,
>>>    I am trying to trace the 2.4 API to create an InstantiatedIndex, but
>>> its rather difficult to connect directory,reader,search,index etc just
>>> reading the javadocs. 
>>>
>>>     I have a (POI - plain old index) directory already and want to
>>> create a faster InstantiatedIndex and IndexSearcher to query it like
>>> before. What's the proper order to do this? 
>>>
>>> Also, if anyone has any empirical data on the performance or reliability
>>> of InstantiatedIndex, I'd be curious.
>>>
>>> Thanks for the tips!
>>> Darren
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>   
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>     
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 16 17:38:13 2008
Return-Path: <java-user-return-37208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48297 invoked from network); 16 Nov 2008 17:38:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Nov 2008 17:38:13 -0000
Received: (qmail 80319 invoked by uid 500); 16 Nov 2008 17:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80294 invoked by uid 500); 16 Nov 2008 17:38:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80283 invoked by uid 99); 16 Nov 2008 17:38:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 09:38:14 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Nov 2008 17:36:52 +0000
Received: (qmail 67597 invoked from network); 16 Nov 2008 17:37:33 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.3?) (68.48.101.76)
  by relay03.pair.com with SMTP; 16 Nov 2008 17:37:33 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: InstantiatedIndex help
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <49204E5D.6010101@gmail.com>
References: <1226849983.12418.8.camel@nuraku>  <4920414F.5000601@gmail.com>
	 <1226851411.12418.15.camel@nuraku>  <49204E5D.6010101@gmail.com>
Content-Type: text/plain
Date: Sun, 16 Nov 2008 12:37:42 -0500
Message-Id: <1226857062.12418.20.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah. That makes sense. Its not too hard to wrap those extra steps so I
can end up with something simpler too. Like:

iindex = InstantiatedIndex("path/to/my/index")

I'm lazy so the intermediate hoops to jump through clutter my code.
Hehe.

:)

Darren

On Sun, 2008-11-16 at 11:46 -0500, Mark Miller wrote:
> Can you start with an empty index? Then how about:
> 
> // Adding these
> 
>     iindex = InstantiatedIndex()
>     ireader = iindex.indexReaderFactory()
>     isearcher = IndexSearcher(ireader)
> 
> If you want a copy from another IndexReader though, you have to get that reader from somewhere right?
> 
> - Mark 
> 
> 
> 
> Darren Govoni wrote:
> > Hi Mark,
> >   Thanks for the tips. Here's what I will try (psuedo-code)
> >
> >     endirectory = RAMDirectory("index/dictionary.en")
> >     ensearcher = IndexSearcher(endirectory)
> >     // Adding these
> >     reader = ensearcher.getIndexReader()
> >     iindex = InstantiatedIndex(reader)
> >     ireader = iindex.indexReaderFactory()
> >     isearcher = IndexSearcher(ireader)
> >
> > Kind of round about way to get an InstantiatedIndex I guess,but maybe
> > there's a briefer way?
> >
> > Thank you.
> > Darren
> >
> > On Sun, 2008-11-16 at 10:50 -0500, Mark Miller wrote:
> >   
> >> Check out the docs at: 
> >> http://lucene.apache.org/java/2_4_0/api/contrib-instantiated/index.html
> >>
> >> There is a performance graph there to check  out.
> >>
> >> The code should be fairly straightforward - you can make an 
> >> InstantiatedIndex thats empty, or seed it with an IndexReader. Then you 
> >> can make an InstantiatedReader or Writer, which take the 
> >> InstantiatedIndex as a constructor arg.
> >>
> >> You should be able to just wrap that InstantiatedReader in a regular 
> >> Searcher.
> >>
> >> Darren Govoni wrote:
> >>     
> >>> Hi gang,
> >>>    I am trying to trace the 2.4 API to create an InstantiatedIndex, but
> >>> its rather difficult to connect directory,reader,search,index etc just
> >>> reading the javadocs. 
> >>>
> >>>     I have a (POI - plain old index) directory already and want to
> >>> create a faster InstantiatedIndex and IndexSearcher to query it like
> >>> before. What's the proper order to do this? 
> >>>
> >>> Also, if anyone has any empirical data on the performance or reliability
> >>> of InstantiatedIndex, I'd be curious.
> >>>
> >>> Thanks for the tips!
> >>> Darren
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>   
> >>>       
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>     
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 00:38:23 2008
Return-Path: <java-user-return-37209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9409 invoked from network); 17 Nov 2008 00:38:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 00:38:23 -0000
Received: (qmail 55294 invoked by uid 500); 17 Nov 2008 00:38:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55253 invoked by uid 500); 17 Nov 2008 00:38:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55242 invoked by uid 99); 17 Nov 2008 00:38:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 16:38:23 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.68.5.17] (HELO relay03.pair.com) (209.68.5.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 Nov 2008 00:37:01 +0000
Received: (qmail 28237 invoked from network); 17 Nov 2008 00:37:42 -0000
Received: from 68.48.101.76 (HELO ?192.168.2.3?) (68.48.101.76)
  by relay03.pair.com with SMTP; 17 Nov 2008 00:37:42 -0000
X-pair-Authenticated: 68.48.101.76
Subject: Re: InstantiatedIndex help + first impression
From: Darren Govoni <darren@ontrenet.com>
To: java-user@lucene.apache.org
In-Reply-To: <1226857062.12418.20.camel@nuraku>
References: <1226849983.12418.8.camel@nuraku>  <4920414F.5000601@gmail.com>
	 <1226851411.12418.15.camel@nuraku>  <49204E5D.6010101@gmail.com>
	 <1226857062.12418.20.camel@nuraku>
Content-Type: text/plain
Date: Sun, 16 Nov 2008 19:37:51 -0500
Message-Id: <1226882271.27571.4.camel@nuraku>
Mime-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

After I switched to InstantiatedIndex from RAMDirectory (but using the
reader from my RAMDirectory to create the InstantiatedIndex), I see a
less than 25% (.25) improvement in speed. Nowhere near the 100x (100.00)
speed mentioned in the documentation. Probably I am doing something
wrong. 

I am using too, a fuzzy query. e.g. "word:house~0.80" but I'd expect the
improvement to be because of physical representation (memory graph) and
mostly unaffected by the query. no?

Could there be some lazy loading going on in RAMDirectory that prevents
InstantiatedIndex from building out its graph and getting the expected
speed?

thanks to anyone who can verify this.


On Sun, 2008-11-16 at 12:37 -0500, Darren Govoni wrote:
> Yeah. That makes sense. Its not too hard to wrap those extra steps so I
> can end up with something simpler too. Like:
> 
> iindex = InstantiatedIndex("path/to/my/index")
> 
> I'm lazy so the intermediate hoops to jump through clutter my code.
> Hehe.
> 
> :)
> 
> Darren
> 
> On Sun, 2008-11-16 at 11:46 -0500, Mark Miller wrote:
> > Can you start with an empty index? Then how about:
> > 
> > // Adding these
> > 
> >     iindex = InstantiatedIndex()
> >     ireader = iindex.indexReaderFactory()
> >     isearcher = IndexSearcher(ireader)
> > 
> > If you want a copy from another IndexReader though, you have to get that reader from somewhere right?
> > 
> > - Mark 
> > 
> > 
> > 
> > Darren Govoni wrote:
> > > Hi Mark,
> > >   Thanks for the tips. Here's what I will try (psuedo-code)
> > >
> > >     endirectory = RAMDirectory("index/dictionary.en")
> > >     ensearcher = IndexSearcher(endirectory)
> > >     // Adding these
> > >     reader = ensearcher.getIndexReader()
> > >     iindex = InstantiatedIndex(reader)
> > >     ireader = iindex.indexReaderFactory()
> > >     isearcher = IndexSearcher(ireader)
> > >
> > > Kind of round about way to get an InstantiatedIndex I guess,but maybe
> > > there's a briefer way?
> > >
> > > Thank you.
> > > Darren
> > >
> > > On Sun, 2008-11-16 at 10:50 -0500, Mark Miller wrote:
> > >   
> > >> Check out the docs at: 
> > >> http://lucene.apache.org/java/2_4_0/api/contrib-instantiated/index.html
> > >>
> > >> There is a performance graph there to check  out.
> > >>
> > >> The code should be fairly straightforward - you can make an 
> > >> InstantiatedIndex thats empty, or seed it with an IndexReader. Then you 
> > >> can make an InstantiatedReader or Writer, which take the 
> > >> InstantiatedIndex as a constructor arg.
> > >>
> > >> You should be able to just wrap that InstantiatedReader in a regular 
> > >> Searcher.
> > >>
> > >> Darren Govoni wrote:
> > >>     
> > >>> Hi gang,
> > >>>    I am trying to trace the 2.4 API to create an InstantiatedIndex, but
> > >>> its rather difficult to connect directory,reader,search,index etc just
> > >>> reading the javadocs. 
> > >>>
> > >>>     I have a (POI - plain old index) directory already and want to
> > >>> create a faster InstantiatedIndex and IndexSearcher to query it like
> > >>> before. What's the proper order to do this? 
> > >>>
> > >>> Also, if anyone has any empirical data on the performance or reliability
> > >>> of InstantiatedIndex, I'd be curious.
> > >>>
> > >>> Thanks for the tips!
> > >>> Darren
> > >>>
> > >>>
> > >>> ---------------------------------------------------------------------
> > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>
> > >>>   
> > >>>       
> > >> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>
> > >>     
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >   
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 05:48:10 2008
Return-Path: <java-user-return-37210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35842 invoked from network); 17 Nov 2008 05:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 05:48:10 -0000
Received: (qmail 651 invoked by uid 500); 17 Nov 2008 05:48:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 621 invoked by uid 500); 17 Nov 2008 05:48:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 610 invoked by uid 99); 17 Nov 2008 05:48:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Nov 2008 21:48:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of alexander.aristov@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 05:46:48 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2406748wfc.20
        for <java-user@lucene.apache.org>; Sun, 16 Nov 2008 21:47:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Qf3Nfcz+YJuZFtMIV/0X4dEIRBv4W3nXWxqETBqO+KQ=;
        b=GuPd3+XN2FgtLIvYM6Z6lf3OuAwpdRcV0lm1PniO2rndNrTl7Rf2FauMad8XC5KHyX
         kenvhnAhI22sr4b6JfEXsUM+z0Bjcu+LKwlYXMgN4KOIoWemXTvlgJXGXdLAWVmUSNam
         DtoyQzuE83Bs6cYFzgiBQ8Guc+fPm1PTuLLUE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=nqjlwvmUBwz1kaF9lYorBkrXBKmqMucSEXXB4xoLl2XWrywqOrlLzfmfCWHAWSoLUp
         GutJVlsw79e/FMvkpEJumsGGnw8fLFUFWsjr3cVbwgCzg3Tx7g3Q5ohaco+JH2YU7TLS
         Jl0ME7CqD45cY+OY5N9ZjvwEgZjlmiVdiEEcE=
Received: by 10.142.188.4 with SMTP id l4mr1807595wff.51.1226900843530;
        Sun, 16 Nov 2008 21:47:23 -0800 (PST)
Received: by 10.142.104.5 with HTTP; Sun, 16 Nov 2008 21:47:23 -0800 (PST)
Message-ID: <11975c90811162147g629b4e0fy2083320ccd76cbe0@mail.gmail.com>
Date: Mon, 17 Nov 2008 08:47:23 +0300
From: "Alexander Aristov" <alexander.aristov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Scoped Search and Facets generation using Lucene
In-Reply-To: <5032.17668.qm@web50310.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_54431_13019562.1226900843523"
References: <5E3DE97916D44040A00CFCC4CE5847DB08568FCA@HQ-MAIL3.ptcnet.ptc.com>
	 <5032.17668.qm@web50310.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_54431_13019562.1226900843523
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you mean using XPath then Nutch doesn't support this. You should develop
it yourself.

Alexander

2008/11/14 Otis Gospodnetic <otis_gospodnetic@yahoo.com>

> Hi Mayur,
>
> Solr has built-in support for facets.  I don't understand what you mean by
> scoped searches.  Could you please give a concrete example?
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
>
> ________________________________
> From: "Bapat, Mayur" <mbapat@ptc.com>
> To: java-user@lucene.apache.org
> Sent: Friday, November 14, 2008 3:04:12 AM
> Subject: Scoped Search and Facets generation using Lucene
>
> Hi,
>
> Does Lucene support Scoped Searches? My intention is to index an XML
> String and search for a matching element/attribute value from that XML
> by specifying scope(path).
> Also is there any direct support for Facets building in Lucene?
>
> Regards,
> Mayur
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 
Best Regards
Alexander Aristov

------=_Part_54431_13019562.1226900843523--

From java-user-return-37211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 08:26:28 2008
Return-Path: <java-user-return-37211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94124 invoked from network); 17 Nov 2008 08:26:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 08:26:27 -0000
Received: (qmail 23522 invoked by uid 500); 17 Nov 2008 08:26:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23477 invoked by uid 500); 17 Nov 2008 08:26:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23466 invoked by uid 99); 17 Nov 2008 08:26:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 00:26:28 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.54] (HELO pebbles.fastcom.no) (62.73.241.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 08:25:03 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by pebbles.fastcom.no (Postfix) with ESMTP id 656188FED
	for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 09:25:09 +0100 (NFT)
Date: Mon, 17 Nov 2008 09:25:11 +0100
To: java-user@lucene.apache.org
Subject: Re: Scoped Search and Facets generation using Lucene
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <5E3DE97916D44040A00CFCC4CE5847DB08568FCA@HQ-MAIL3.ptcnet.ptc.com>
 <5032.17668.qm@web50310.mail.re2.yahoo.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.ukq8b9wyoftp72@melkor>
In-Reply-To: <5032.17668.qm@web50310.mail.re2.yahoo.com>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

I think that the closest you get to "scoped" search in your case would be  
to use filters. (If you index your paths, or if the documents have some  
standarized format, I assume you could just use one field per element in  
your document.)

Maybe you could say a bit about you document structure? (If your question  
is a XML specific parsing question, the Lucene mailing list isn't really  
right place...)

- Aleksander


On Fri, 14 Nov 2008 17:52:59 +0100, Otis Gospodnetic  
<otis_gospodnetic@yahoo.com> wrote:

> Hi Mayur,
>
> Solr has built-in support for facets.  I don't understand what you mean  
> by scoped searches.  Could you please give a concrete example?
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
>
> ________________________________
> From: "Bapat, Mayur" <mbapat@ptc.com>
> To: java-user@lucene.apache.org
> Sent: Friday, November 14, 2008 3:04:12 AM
> Subject: Scoped Search and Facets generation using Lucene
>
> Hi,
>
> Does Lucene support Scoped Searches? My intention is to index an XML
> String and search for a matching element/attribute value from that XML
> by specifying scope(path).
> Also is there any direct support for Facets building in Lucene?
>
> Regards,
> Mayur
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



-- 
Aleksander M. Stensby
Senior software developer
Integrasco A/S
www.integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 08:31:46 2008
Return-Path: <java-user-return-37212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95501 invoked from network); 17 Nov 2008 08:31:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 08:31:46 -0000
Received: (qmail 27021 invoked by uid 500); 17 Nov 2008 08:31:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26985 invoked by uid 500); 17 Nov 2008 08:31:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26974 invoked by uid 99); 17 Nov 2008 08:31:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 00:31:47 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.56] (HELO mta.tdcsong.no) (62.73.241.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 08:30:23 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by mta.tdcsong.no (Postfix) with ESMTP id 39394406A
	for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 09:31:02 +0100 (CET)
Date: Mon, 17 Nov 2008 09:31:04 +0100
To: java-user@lucene.apache.org
Subject: Re: how to estimate how much memory is required to support the large
 index search
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <776612.75162.qm@web34306.mail.mud.yahoo.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.ukq8l2zuoftp72@melkor>
In-Reply-To: <776612.75162.qm@web34306.mail.mud.yahoo.com>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

One major factor that may result in heap space problems is if you are  
doing any form of sorting when searching. Do you have any form of default  
sort in your application? Also, the type of field used for sorting is  
important with regard to memory consumption.

This issue has been discussed before on the list. (You can search the  
archive for sorting and memory consumption.)

- Aleksander

On Sun, 16 Nov 2008 14:36:36 +0100, Zhibin Mai <zbmai@yahoo.com> wrote:

> Hello,
>
> I
> am a beginner on using lucene. We developed an application to
> create and search index using lucene 2.3.1. We would like to know how
> to estimate how much memory is required to support
> the index search given an index.
>
> Recently,
> the size of the index has reached to about 200GB with 197M of documents
> and 223M of terms. Our application starts having intermittent
> "OutOfMemoryError: Java heap space" when we use
> it to search the index. We use JProfiler to get the following memory  
> allocation when we do one keyword search:
>
> char[]                                                        332MB
> org.apache.lucene.index.TermInfo            194MB
> java.lang.String                                        146MB
> org.apache.lucene.index.Term                99,823KB
> org.apache.lucene.index.Term                24,956KB
> org.apache.lucene.index.TermInfo[]        24,956KB
>
> byte[]                                                    188MB
> long[]                                                    49,912KB
>
> The memory allocation for the first 6 types of objects does not change  
> when we change the search criteria. Could you please give me some advice  
> what major factors will affect the memory allocation
> and how those factors will affect the memory usage precisely on search?  
> Is it possible to reduce the memory usage on search?
>
>
> Thank you,
>
>
> Zhibin
>
>
>



-- 
Aleksander M. Stensby
Senior software developer
Integrasco A/S
www.integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 12:33:07 2008
Return-Path: <java-user-return-37213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91731 invoked from network); 17 Nov 2008 12:33:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 12:33:07 -0000
Received: (qmail 70101 invoked by uid 500); 17 Nov 2008 12:33:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70066 invoked by uid 500); 17 Nov 2008 12:33:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70054 invoked by uid 99); 17 Nov 2008 12:33:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 04:33:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 12:31:43 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2425690rvb.5
        for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 04:32:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=4lJz8yzKNX4yfIW/zKMRIElCb0FA35fdqLmrVZf02ug=;
        b=mGebg62+P+wPWo/N5rjiYRokw6gA+RNpanDJXStKdadhrD1mVmxyjnZh+PeeZDaIgg
         JhuRVWB6YTnvHaWWFaZqXDlIz/Iesf6XB38+G+DLlq/1tDm7uj5C9ptVSz5jYnC3NfF2
         dV2AwfW8MVj9wcc0vaiS0Fa6KAnBLuKDpp9ko=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=uItnBzxhsi8ksXcsrGyrJYHjTO6f4KA6T74VF442vw4b0wypHBb0RKJLUHy52JD3Tf
         mWqoesy7kYgWTmFGRfm7bqwUix/8py5q+0rRdOyHWJAVg/u2wA3xZAi2ksw7hvuLtyyQ
         M1eip/a6PrTfNYF8owsojPGUh1EGsECHFzy00=
Received: by 10.142.69.20 with SMTP id r20mr1952402wfa.188.1226925138441;
        Mon, 17 Nov 2008 04:32:18 -0800 (PST)
Received: by 10.143.40.11 with HTTP; Mon, 17 Nov 2008 04:32:18 -0800 (PST)
Message-ID: <5e76f3840811170432v435995eap30ee6db2393d8967@mail.gmail.com>
Date: Mon, 17 Nov 2008 07:32:18 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org
Subject: Software Announcement: LuSql: Database to Lucene indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

LuSql is a simple but powerful tool for building Lucene indexes from
relational databases. It is a command-line Java application for the
construction of a Lucene index from an arbitrary SQL query of a
JDBC-accessible SQL database. It allows a user to control a number of
parameters, including the SQL query to use, individual
indexing/storage/term-vector nature of fields, analyzer, stop word
list, and other tuning parameters. In its default mode it uses
threading to take advantage of multiple cores.

LuSql can handle complex queries, allows for additional per record
sub-queries, and has a plug-in architecture for arbitrary Lucene
document manipulation. Its only dependencies are three Apache Commons
libraries, the Lucene core itself, and a JDBC driver.

LuSql has been extensively tested, including a large 6+ million
full-text & metadata journal article document collection, producing an
86GB Lucene index in ~13 hours.

http://lab.cisti-icist.nrc-cnrc.gc.ca/cistilabswiki/index.php/LuSql

Glen Newton

-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 12:50:44 2008
Return-Path: <java-user-return-37214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99915 invoked from network); 17 Nov 2008 12:50:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 12:50:44 -0000
Received: (qmail 95780 invoked by uid 500); 17 Nov 2008 12:50:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95537 invoked by uid 500); 17 Nov 2008 12:50:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95526 invoked by uid 99); 17 Nov 2008 12:50:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 04:50:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [12.11.148.84] (HELO irp2.ptc.com) (12.11.148.84)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 12:49:19 +0000
X-IronPort-AV: E=Sophos;i="4.33,618,1220241600"; 
   d="scan'208";a="28607739"
Received: from unknown (HELO hq-ex3fe3.ptcnet.ptc.com) ([132.253.201.67])
  by irp2.ptc.com with ESMTP; 17 Nov 2008 07:49:50 -0500
Received: from HQ-MAIL3.ptcnet.ptc.com ([132.253.202.90]) by hq-ex3fe3.ptcnet.ptc.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 17 Nov 2008 07:49:50 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Scoped Search and Facets generation using Lucene
Date: Mon, 17 Nov 2008 07:49:51 -0500
Message-ID: <5E3DE97916D44040A00CFCC4CE5847DB08569A0C@HQ-MAIL3.ptcnet.ptc.com>
In-Reply-To: <op.ukq8b9wyoftp72@melkor>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoped Search and Facets generation using Lucene
thread-index: AclIjjA8xsSmFpIDQwCsfahXTMLRFAAFrPJA
References: <5E3DE97916D44040A00CFCC4CE5847DB08568FCA@HQ-MAIL3.ptcnet.ptc.com> <5032.17668.qm@web50310.mail.re2.yahoo.com> <op.ukq8b9wyoftp72@melkor>
From: "Bapat, Mayur" <mbapat@ptc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Nov 2008 12:49:50.0916 (UTC) FILETIME=[FAFEF040:01C948B2]
X-Virus-Checked: Checked by ClamAV on apache.org

My xml format similar to as follows -

<?xml version=3D"1.0" encoding=3D"UTF-8" ?><Attributes><IBA8909
type=3D"float">0.0</IBA8909><IBA8654 type=3D"float">0.0</IBA8654><folder
type=3D"double">8254</folder><inheritedDomain
type=3D"string">true</inheritedDomain><iterationInfo.branchId
type=3D"double">8438</iterationInfo.branchId><Part
type=3D"double">12771</Part><member
type=3D"double">8443</member><IBA8608
type=3D"string">Ver-dir(TOP)</IBA8608><IBA9119
type=3D"float">0.0</IBA9119><genericType
type=3D"string">standard</genericType><name
type=3D"string">A001</name><versionInfo.identifier.versionId
type=3D"string">A</versionInfo.identifier.versionId><thePersistInfo.updat=
e
Count
type=3D"double">3</thePersistInfo.updateCount><IBA8929
type=3D"string">Carbon
film</IBA8929><iterationInfo.creator
type=3D"double">10</iterationInfo.creator><iterationInfo.note
type=3D"string">just
classified</iterationInfo.note><IBA8950 =
type=3D"float">0</IBA8950><IBA8794
type=3D"string">default</IBA8794><defaultTraceCode
type=3D"string">0</defaultTraceCode><IBA8866
type=3D"double">0</IBA8866><IBA8897
type=3D"float">0.0</IBA8897><name
type=3D"string">TRIMMER</name><versionInfo.identifier.versionSortId
type=3D"string">000001</versionInfo.identifier.versionSortId><number
type=3D"string">0000000001</number><iterationInfo.state
type=3D"string">ctrld</iterationInfo.state><IBA8925
type=3D"float">0</IBA8925><IBA8754
type=3D"float">0.0</IBA8754><IBA9097 =
type=3D"float">0.0</IBA9097><IBA9123
type=3D"float">0.0</IBA9123><thePersistInfo.createStamp
type=3D"datetime">2008-07-16T08:34:20</thePersistInfo.createStamp><state.=
s
tate
type=3D"string">INWORK</state.state><masterReference
type=3D"double">8436</masterReference><IBA8839
type=3D"float">0.0</IBA8839><thePersistInfo.updateStamp
type=3D"datetime">2008-08-01T10:44:35</thePersistInfo.updateStamp><IBA877=
6
type=3D"string">True</IBA8776><view type=3D"double">2931</view><IBA8653
type=3D"float">0.0</IBA8653><IBA8802
type=3D"float">0.0</IBA8802><organizationReference
type=3D"double">856</organizationReference><partType
type=3D"string">separable</partType><IBA8786
type=3D"float">0.0</IBA8786><checkoutInfo.state
type=3D"string">c/i</checkoutInfo.state><thePersistInfo.markForDelete
type=3D"double">0</thePersistInfo.markForDelete><IBA8733
type=3D"string">0</IBA8733><state.atGate
type=3D"string">false</state.atGate><iterationInfo.latest
type=3D"string">true</iterationInfo.latest><IBA8800
type=3D"double">0</IBA8800><Part
type=3D"string">IBRTYPE|Part~~WCP|22037|1</Part><IBA9062
type=3D"float">0.0</IBA9062><thePersistInfo.modifyStamp
type=3D"datetime">2008-08-01T10:44:35</thePersistInfo.modifyStamp><iterat=
i
onInfo.predecessor
type=3D"double">8440</iterationInfo.predecessor><IBA9035
type=3D"string">Industry</IBA9035><IBA8806 =
type=3D"float">0</IBA8806><source
type=3D"string">make</source><state.lifeCycleId
type=3D"double">6193</state.lifeCycleId><IBA8827
type=3D"string">Through.Hole</IBA8827><iterationInfo.modifier
type=3D"double">10</iterationInfo.modifier><IBA8798
type=3D"double">0</IBA8798><IBA8825
type=3D"string">1</IBA8825><IBA8992 type=3D"string">Open
type</IBA8992><IBA8949
type=3D"string">Yes</IBA8949><versionInfo.identifier.versionLevel
type=3D"double">1</versionInfo.identifier.versionLevel><defaultUnit
type=3D"string">ea</defaultUnit><containerReference
type=3D"double">8212</containerReference><endItem
type=3D"string">false</endItem><IBA8796
type=3D"string">1</IBA8796><folderingInfo.cabinet
type=3D"double">8254</folderingInfo.cabinet><domainRef
type=3D"double">8216</domainRef><IBA9060
type=3D"float">0.0</IBA9060><iterationInfo.identifier.iterationId
type=3D"string">2</iterationInfo.identifier.iterationId><IBA8080
type=3D"string">sizeCode</IBA8080><IBA8891
type=3D"float">0.0</IBA8891><IBA8804
type=3D"float">0</IBA8804><IBA9005
type=3D"float">0.0</IBA9005><checkoutInfo.derivedFrom
type=3D"double">8440</checkoutInfo.derivedFrom></Attributes>

and I am interested in finding a document by giving a scope like -=20
find a document with IBA8949=3DYes AND IBA8802=3D0.0 and
iterationInfo.predecessor=3DOR.

It looks like for each element from this XML, I need to create a field
for the index document and create a search query accordingly.




-----Original Message-----
From: Aleksander M. Stensby [mailto:aleksander.stensby@integrasco.no]=20
Sent: Monday, November 17, 2008 1:55 PM
To: java-user@lucene.apache.org
Subject: Re: Scoped Search and Facets generation using Lucene

I think that the closest you get to "scoped" search in your case would
be to use filters. (If you index your paths, or if the documents have
some standarized format, I assume you could just use one field per
element in your document.)

Maybe you could say a bit about you document structure? (If your
question is a XML specific parsing question, the Lucene mailing list
isn't really right place...)

- Aleksander


On Fri, 14 Nov 2008 17:52:59 +0100, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:

> Hi Mayur,
>
> Solr has built-in support for facets.  I don't understand what you=20
> mean by scoped searches.  Could you please give a concrete example?
>
>
> Otis
> --
> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>
>
>
>
> ________________________________
> From: "Bapat, Mayur" <mbapat@ptc.com>
> To: java-user@lucene.apache.org
> Sent: Friday, November 14, 2008 3:04:12 AM
> Subject: Scoped Search and Facets generation using Lucene
>
> Hi,
>
> Does Lucene support Scoped Searches? My intention is to index an XML=20
> String and search for a matching element/attribute value from that XML

> by specifying scope(path).
> Also is there any direct support for Facets building in Lucene?
>
> Regards,
> Mayur
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



--
Aleksander M. Stensby
Senior software developer
Integrasco A/S
www.integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 12:59:06 2008
Return-Path: <java-user-return-37215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3140 invoked from network); 17 Nov 2008 12:59:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 12:59:06 -0000
Received: (qmail 4180 invoked by uid 500); 17 Nov 2008 12:59:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3891 invoked by uid 500); 17 Nov 2008 12:59:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3880 invoked by uid 99); 17 Nov 2008 12:59:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 04:59:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.190 as permitted sender)
Received: from [209.85.142.190] (HELO ti-out-0910.google.com) (209.85.142.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 12:57:46 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1696838tic.11
        for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 04:58:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:x-google-sender-auth;
        bh=BamGDrotZWMxyaEICHoZDzibgC5lHNxsIH1T7DXnqCQ=;
        b=knspmZ0n+SOd/L24dI/LWsu3too+SkPuSyfFCFPEHNLVIE1fV0Np7rOlK2/pP8JwX6
         Bz2x4EBSInkcei8jaTCWWhtLqN2brZ2GnAKp7K/uT7QHcWJeu2feKWQQHX3oD5MKQMEJ
         WEup+2TO5NyPVM1NOqnPjPQ62bVIpOtcVOxEE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :x-google-sender-auth;
        b=tbGfmHhzh4hi3EeDg1uu+ft7l5wKIr4dBLtvZUNtaT8N5h+xBBoIT+eH0ay171KZQ1
         kWgqzQG5tqo4T2VNT4MjmyX5vp+nl/o5vGHVQpnnE4iPB6eeR57QokWM/aQsvpFYYIvp
         1IaWkUAp39DIx6RRm2wpSauE1qF0uOEGOPS2o=
Received: by 10.110.63.6 with SMTP id l6mr5114617tia.50.1226926709927;
        Mon, 17 Nov 2008 04:58:29 -0800 (PST)
Received: by 10.110.50.16 with HTTP; Mon, 17 Nov 2008 04:58:29 -0800 (PST)
Message-ID: <6fc71b230811170458j133d71d0v884a7c15975157ea@mail.gmail.com>
Date: Mon, 17 Nov 2008 18:28:29 +0530
From: "Aditi Goyal" <aditig20@gmail.com>
Sender: aditigupta20@gmail.com
To: java-user@lucene.apache.org
Subject: Searching across multiple fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57962_25831601.1226926709920"
X-Google-Sender-Auth: 3027656b50ec97c5
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57962_25831601.1226926709920
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Lets say I have an index with the following fields:
field1, field2, field3 and field4 where all the fields can have same values.

Now I want to search a document where "basket" and "apple" are part of the
whole document but "orange" is not.

I have tried using MultiFieldQueryParser but it is not showing correct
results.

I typed the command ("basket" AND "apple") NOT "orange" for the
MultiFieldQueryParser

query = lucene.MultiFieldQueryParser.parse(command, fields, shoulds,
analyzer )
hits = self.searcher.search(query)


Am I doing something wrong? Please help.

Thanks,
Aditi

------=_Part_57962_25831601.1226926709920--

From java-user-return-37216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 13:01:54 2008
Return-Path: <java-user-return-37216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4796 invoked from network); 17 Nov 2008 13:01:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 13:01:54 -0000
Received: (qmail 7966 invoked by uid 500); 17 Nov 2008 13:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7938 invoked by uid 500); 17 Nov 2008 13:01:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7927 invoked by uid 99); 17 Nov 2008 13:01:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 05:01:55 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aditigupta20@gmail.com designates 209.85.142.186 as permitted sender)
Received: from [209.85.142.186] (HELO ti-out-0910.google.com) (209.85.142.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 13:00:33 +0000
Received: by ti-out-0910.google.com with SMTP id b8so1697796tic.11
        for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 05:01:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=OiZU3n+EtOemNkK+w83VliNkvM7PfBybqZDeGRJNwYI=;
        b=aKGaHwwFpx5Y/enmGLwdCJRg21agE/MkmynMKdYManFwCUvPmP54ELojZ8nXjDfbfL
         6icNIIGbIHJVECzwSZbjDs3W/LopDXKxuDJBJM+CQ7ovIvOzoUryqjpVawYV2bJHTxve
         pTOmYkUo0jj4dxrNwuOtWBBQJ6tiYOwnHOkTo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=uBE9319CBTo8m/eoi/dfBMvp3XvB/RN0TGKFV6YTAdAhEGH/Tlh5UF5vZqDgwwPDp6
         h1B2maHjUzCJYJDwfouVh6T+uLtcW+VJaQ/DUbBzUV/GKD9Nwl+c7R8AZCACtzyZaHO3
         b+4uUyD/oesG6Eh3GPmuVjWZWwiW299A7XdT4=
Received: by 10.110.5.3 with SMTP id 3mr5140647tie.46.1226926867810;
        Mon, 17 Nov 2008 05:01:07 -0800 (PST)
Received: by 10.110.50.16 with HTTP; Mon, 17 Nov 2008 05:01:07 -0800 (PST)
Message-ID: <6fc71b230811170501k6531ed88kb194cf83278b3358@mail.gmail.com>
Date: Mon, 17 Nov 2008 18:31:07 +0530
From: "Aditi Goyal" <aditigupta20@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching across multiple fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58014_8149375.1226926867812"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58014_8149375.1226926867812
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

Lets say I have an index with the following fields:
field1, field2, field3 and field4 where all the fields can have same values.

Now I want to search a document where "basket" and "apple" are part of the
whole document but "orange" is not.

I have tried using MultiFieldQueryParser but it is not showing correct
results.

I typed the command ("basket" AND "apple") NOT "orange" for the
MultiFieldQueryParser

query = lucene.MultiFieldQueryParser.parse(command, fields, shoulds,
analyzer )
hits = self.searcher.search(query)


Am I doing something wrong? Please help.

Thanks,
Aditi

------=_Part_58014_8149375.1226926867812--

From java-user-return-37217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 13:06:34 2008
Return-Path: <java-user-return-37217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7163 invoked from network); 17 Nov 2008 13:06:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 13:06:34 -0000
Received: (qmail 16445 invoked by uid 500); 17 Nov 2008 13:06:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16419 invoked by uid 500); 17 Nov 2008 13:06:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16408 invoked by uid 99); 17 Nov 2008 13:06:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 05:06:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 72.14.252.159 as permitted sender)
Received: from [72.14.252.159] (HELO po-out-1718.google.com) (72.14.252.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 13:05:08 +0000
Received: by po-out-1718.google.com with SMTP id b23so4222754poe.0
        for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 05:05:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=CppXDxqz1YwJ9eMPNEuRk2Hyx48SfshsQR5CfnMPECM=;
        b=SsqRFwhNaS8eDS1DGShdxlz89m+RrgottAYtAuprF0CDYYatLIaqKhM/wU0VV43huv
         G0HIeP1dLuCHI+DEJ741lO8860wP8xJv4CvaRFH9MtfeVA6ipVziiqCugoOVMD26bSzi
         9vJA7PtzknYYVoiG38LAnfB8ALvtp0z2O8EGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=H8nB5t1XrPGGioHHKmvZLU8fk/b0PJ/Yjp0XKCWgVLzpJKcCgKfs0rM7I7hl4lh1Hx
         J5i1Qi92pKGLfgBUDZ5XuXMlmFCKNG9jA/cnFWOXt2s6Yi1X5eAlqjSQEr4v/gRbWFPQ
         mKQhvwgpopAH6q5m7pwcRBLBMvyAIDF2uKRSA=
Received: by 10.140.185.1 with SMTP id i1mr2209883rvf.263.1226927152811;
        Mon, 17 Nov 2008 05:05:52 -0800 (PST)
Received: by 10.141.141.8 with HTTP; Mon, 17 Nov 2008 05:05:52 -0800 (PST)
Message-ID: <295da8fe0811170505q233b7646i4a6c660304dcbcb1@mail.gmail.com>
Date: Mon, 17 Nov 2008 18:35:52 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching across multiple fields
In-Reply-To: <6fc71b230811170458j133d71d0v884a7c15975157ea@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46523_7020443.1226927152805"
References: <6fc71b230811170458j133d71d0v884a7c15975157ea@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46523_7020443.1226927152805
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
   Try using Boolean Query. You can effectively use boolean operators  using
it.
make seperate queries for each field.
Boolean query is meant for having a series of queries with boolean operators
defined.

For eg.
  lets say you have 3 diff queries A, B, C and you want a final query which
behaves as  A && (B || C)
BooleanQuery query = new BooleanQuery();
BooleanQuery temp = new BooleanQuery();
temp.add(B, Occur.SHOULD); //Occur.SHOULD is equvalent to OR operator
temp.add(C, Occur.SHOULD);
query.add(A, Occur.MUST); //Occur.MUST is equivalent to an AND operator
query.add(temp, Occur.Must);

Now "query" = A && (B || C)


Check out the documentation of Boolean Query.

Prabin
toostep.com

On Mon, Nov 17, 2008 at 6:28 PM, Aditi Goyal <aditig20@gmail.com> wrote:

> Hi,
>
> Lets say I have an index with the following fields:
> field1, field2, field3 and field4 where all the fields can have same
> values.
>
> Now I want to search a document where "basket" and "apple" are part of the
> whole document but "orange" is not.
>
> I have tried using MultiFieldQueryParser but it is not showing correct
> results.
>
> I typed the command ("basket" AND "apple") NOT "orange" for the
> MultiFieldQueryParser
>
> query = lucene.MultiFieldQueryParser.parse(command, fields, shoulds,
> analyzer )
> hits = self.searcher.search(query)
>
>
> Am I doing something wrong? Please help.
>
> Thanks,
> Aditi
>

------=_Part_46523_7020443.1226927152805--

From java-user-return-37218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 15:07:36 2008
Return-Path: <java-user-return-37218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97924 invoked from network); 17 Nov 2008 15:07:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 15:07:35 -0000
Received: (qmail 61569 invoked by uid 500); 17 Nov 2008 15:07:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61547 invoked by uid 500); 17 Nov 2008 15:07:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61536 invoked by uid 99); 17 Nov 2008 15:07:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 07:07:36 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.54] (HELO pebbles.fastcom.no) (62.73.241.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 15:06:12 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by pebbles.fastcom.no (Postfix) with ESMTP id 75411607E
	for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 16:06:20 +0100 (NFT)
Date: Mon, 17 Nov 2008 16:06:22 +0100
To: java-user@lucene.apache.org
Subject: Re: Scoped Search and Facets generation using Lucene
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <5E3DE97916D44040A00CFCC4CE5847DB08568FCA@HQ-MAIL3.ptcnet.ptc.com>
 <5032.17668.qm@web50310.mail.re2.yahoo.com> <op.ukq8b9wyoftp72@melkor>
 <5E3DE97916D44040A00CFCC4CE5847DB08569A0C@HQ-MAIL3.ptcnet.ptc.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.ukrqwwf7oftp72@melkor>
In-Reply-To: <5E3DE97916D44040A00CFCC4CE5847DB08569A0C@HQ-MAIL3.ptcnet.ptc.com>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, you have a lot of fields but if you want to do faceting and all  
possible fields you will probably have to index each node in your document  
as a separate field. You should look at solr, which supports facets out of  
the box. Keep in mind what type of tokenizer(s) you use as this effects  
your results when querying.

- Aleksander

On Mon, 17 Nov 2008 13:49:51 +0100, Bapat, Mayur <mbapat@ptc.com> wrote:

> My xml format similar to as follows -
>
> <?xml version="1.0" encoding="UTF-8" ?><Attributes><IBA8909
> type="float">0.0</IBA8909><IBA8654 type="float">0.0</IBA8654><folder
> type="double">8254</folder><inheritedDomain
> type="string">true</inheritedDomain><iterationInfo.branchId
> type="double">8438</iterationInfo.branchId><Part
> type="double">12771</Part><member
> type="double">8443</member><IBA8608
> type="string">Ver-dir(TOP)</IBA8608><IBA9119
> type="float">0.0</IBA9119><genericType
> type="string">standard</genericType><name
> type="string">A001</name><versionInfo.identifier.versionId
> type="string">A</versionInfo.identifier.versionId><thePersistInfo.update
> Count
> type="double">3</thePersistInfo.updateCount><IBA8929
> type="string">Carbon
> film</IBA8929><iterationInfo.creator
> type="double">10</iterationInfo.creator><iterationInfo.note
> type="string">just
> classified</iterationInfo.note><IBA8950 type="float">0</IBA8950><IBA8794
> type="string">default</IBA8794><defaultTraceCode
> type="string">0</defaultTraceCode><IBA8866
> type="double">0</IBA8866><IBA8897
> type="float">0.0</IBA8897><name
> type="string">TRIMMER</name><versionInfo.identifier.versionSortId
> type="string">000001</versionInfo.identifier.versionSortId><number
> type="string">0000000001</number><iterationInfo.state
> type="string">ctrld</iterationInfo.state><IBA8925
> type="float">0</IBA8925><IBA8754
> type="float">0.0</IBA8754><IBA9097 type="float">0.0</IBA9097><IBA9123
> type="float">0.0</IBA9123><thePersistInfo.createStamp
> type="datetime">2008-07-16T08:34:20</thePersistInfo.createStamp><state.s
> tate
> type="string">INWORK</state.state><masterReference
> type="double">8436</masterReference><IBA8839
> type="float">0.0</IBA8839><thePersistInfo.updateStamp
> type="datetime">2008-08-01T10:44:35</thePersistInfo.updateStamp><IBA8776
> type="string">True</IBA8776><view type="double">2931</view><IBA8653
> type="float">0.0</IBA8653><IBA8802
> type="float">0.0</IBA8802><organizationReference
> type="double">856</organizationReference><partType
> type="string">separable</partType><IBA8786
> type="float">0.0</IBA8786><checkoutInfo.state
> type="string">c/i</checkoutInfo.state><thePersistInfo.markForDelete
> type="double">0</thePersistInfo.markForDelete><IBA8733
> type="string">0</IBA8733><state.atGate
> type="string">false</state.atGate><iterationInfo.latest
> type="string">true</iterationInfo.latest><IBA8800
> type="double">0</IBA8800><Part
> type="string">IBRTYPE|Part~~WCP|22037|1</Part><IBA9062
> type="float">0.0</IBA9062><thePersistInfo.modifyStamp
> type="datetime">2008-08-01T10:44:35</thePersistInfo.modifyStamp><iterati
> onInfo.predecessor
> type="double">8440</iterationInfo.predecessor><IBA9035
> type="string">Industry</IBA9035><IBA8806 type="float">0</IBA8806><source
> type="string">make</source><state.lifeCycleId
> type="double">6193</state.lifeCycleId><IBA8827
> type="string">Through.Hole</IBA8827><iterationInfo.modifier
> type="double">10</iterationInfo.modifier><IBA8798
> type="double">0</IBA8798><IBA8825
> type="string">1</IBA8825><IBA8992 type="string">Open
> type</IBA8992><IBA8949
> type="string">Yes</IBA8949><versionInfo.identifier.versionLevel
> type="double">1</versionInfo.identifier.versionLevel><defaultUnit
> type="string">ea</defaultUnit><containerReference
> type="double">8212</containerReference><endItem
> type="string">false</endItem><IBA8796
> type="string">1</IBA8796><folderingInfo.cabinet
> type="double">8254</folderingInfo.cabinet><domainRef
> type="double">8216</domainRef><IBA9060
> type="float">0.0</IBA9060><iterationInfo.identifier.iterationId
> type="string">2</iterationInfo.identifier.iterationId><IBA8080
> type="string">sizeCode</IBA8080><IBA8891
> type="float">0.0</IBA8891><IBA8804
> type="float">0</IBA8804><IBA9005
> type="float">0.0</IBA9005><checkoutInfo.derivedFrom
> type="double">8440</checkoutInfo.derivedFrom></Attributes>
>
> and I am interested in finding a document by giving a scope like -
> find a document with IBA8949=Yes AND IBA8802=0.0 and
> iterationInfo.predecessor=OR.
>
> It looks like for each element from this XML, I need to create a field
> for the index document and create a search query accordingly.
>
>
>
>
> -----Original Message-----
> From: Aleksander M. Stensby [mailto:aleksander.stensby@integrasco.no]
> Sent: Monday, November 17, 2008 1:55 PM
> To: java-user@lucene.apache.org
> Subject: Re: Scoped Search and Facets generation using Lucene
>
> I think that the closest you get to "scoped" search in your case would
> be to use filters. (If you index your paths, or if the documents have
> some standarized format, I assume you could just use one field per
> element in your document.)
>
> Maybe you could say a bit about you document structure? (If your
> question is a XML specific parsing question, the Lucene mailing list
> isn't really right place...)
>
> - Aleksander
>
>
> On Fri, 14 Nov 2008 17:52:59 +0100, Otis Gospodnetic
> <otis_gospodnetic@yahoo.com> wrote:
>
>> Hi Mayur,
>>
>> Solr has built-in support for facets.  I don't understand what you
>> mean by scoped searches.  Could you please give a concrete example?
>>
>>
>> Otis
>> --
>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>
>>
>>
>>
>> ________________________________
>> From: "Bapat, Mayur" <mbapat@ptc.com>
>> To: java-user@lucene.apache.org
>> Sent: Friday, November 14, 2008 3:04:12 AM
>> Subject: Scoped Search and Facets generation using Lucene
>>
>> Hi,
>>
>> Does Lucene support Scoped Searches? My intention is to index an XML
>> String and search for a matching element/attribute value from that XML
>
>> by specifying scope(path).
>> Also is there any direct support for Facets building in Lucene?
>>
>> Regards,
>> Mayur
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> --
> Aleksander M. Stensby
> Senior software developer
> Integrasco A/S
> www.integrasco.no
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Aleksander M. Stensby
Senior software developer
Integrasco A/S
www.integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 15:08:37 2008
Return-Path: <java-user-return-37219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98149 invoked from network); 17 Nov 2008 15:08:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 15:08:37 -0000
Received: (qmail 66721 invoked by uid 500); 17 Nov 2008 15:08:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66692 invoked by uid 500); 17 Nov 2008 15:08:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66674 invoked by uid 99); 17 Nov 2008 15:08:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 07:08:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.238 as permitted sender)
Received: from [209.85.198.238] (HELO rv-out-0506.google.com) (209.85.198.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 15:07:15 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2479761rvb.5
        for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 07:07:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:in-reply-to:references:x-mailer:mime-version
         :content-type:content-transfer-encoding;
        bh=FLvqoIbPDpcamPVXGrVtyRau2cIC4pyLAMgZNN2Y5f8=;
        b=klO1MjFVK5j4kuHoISzvV6F9VOEWIdl8HWrceYEqgnGy1vYW4rX/cxfvJ5OgndjWNU
         7bmAgJW77PNSX2BAas/qfYgrIHb8C6p8higtzKRjMjnUSaevN4s/RZt7+1cU544YNQA6
         XIZRdrDQw3Hd7F7iehw0nmelbmP6MQwT4ZKho=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:in-reply-to:references:x-mailer
         :mime-version:content-type:content-transfer-encoding;
        b=bmw07FCRVu9uM2FDzt71MN30oAEDzMdx66t20E7pvfoAbramgIOnUwWNjlEwSyFROn
         +OLbMkjWgbQgAqflWaVZ24hYXIpfP3wH/ZsB3xekkXARbSO2Z9P3G78qrQU952Ja0f53
         FfPb1CnTUXnTzu8jDb5rQyFa0eZBjvk5lHZSo=
Received: by 10.141.19.9 with SMTP id w9mr2294461rvi.31.1226934470570;
        Mon, 17 Nov 2008 07:07:50 -0800 (PST)
Received: from localhost ([189.107.137.13])
        by mx.google.com with ESMTPS id b8sm9844409rvf.3.2008.11.17.07.07.49
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 17 Nov 2008 07:07:50 -0800 (PST)
Date: Mon, 17 Nov 2008 13:07:35 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using AND with MultiFieldQueryParser
Message-Id: <20081117130735.121c35dc.almeidaraf@gmail.com>
In-Reply-To: <491C5FF1.5080206@informatics.jax.org>
References: <20081113030002.1049d0ed.almeidaraf@gmail.com>
	<295da8fe0811130123xd248daaue9050a96f25d5d0@mail.gmail.com>
	<20081113145108.1144bd5a.almeidaraf@gmail.com>
	<491C5FF1.5080206@informatics.jax.org>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 13 Nov 2008 12:12:17 -0500
Matthew Hall <mhall@informatics.jax.org> wrote:

> Which Analyzer have you assigned per field?
> 
> The PerFieldAnalyzerWrapper uses a default analyzer (the one you passed 
> during its construction), and then you assign specific analyzers to each 
> field that you want to have special treatment.
> 
> For example:
> 
>         PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(
>                 new StandardAnalyzer());
>         aWrapper.addAnalyzer("data", new MGIAnalyzer());
>         aWrapper.addAnalyzer("sdata", new StemmedMGIAnalyzer());
> 
> Now, for the fields in question, have you assigned an Analyzer that 
> doesn't actually use stopwords? (there are several available in core)  
> Or are you perchance using a custom Analyzer that doesn't process stop 
> words?
>
> Could you possibly post your Initialization code for this?  If so I 
> think we could be of more help to you.

I wrote this method, which returns me the analyzer:
    static public Analyzer getAnalyzer()
    {
        PerFieldAnalyzerWrapper analyzer = new PerFieldAnalyzerWrapper(
            new KeywordAnalyzer());
        analyzer.addAnalyzer("placas", new UniqueTokensAnalyzer());
        analyzer.addAnalyzer("ano", new UniqueTokensAnalyzer());
        analyzer.addAnalyzer("no_reds", new NumberAnalyzer());

        analyzer.addAnalyzer("nomes", new SimpleBrazilianAnalyzer());
        analyzer.addAnalyzer("apelidos", new SimpleBrazilianAnalyzer());
        analyzer.addAnalyzer("historico", new SimpleBrazilianAnalyzer
()); analyzer.addAnalyzer("modosAcaoCriminosa", new
SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("nomeMunicipio", new
SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("nomeBairro", new
SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("logradouro", new
SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("textoComplementar",
new SimpleBrazilianAnalyzer());

        return analyzer;
    }

SimpleBrazilianAnalyzer is my own analyzer that uses stopwords.

I pass that analyzer to MultiFieldQueryParser together with an array
with all the fields, ie. those fields and more.

When I do an AND search I'd like it to ignore stopwords. My best idea
so far is to make my own tokenizer and remove stopwords from the
search. How does that sound?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 18:30:35 2008
Return-Path: <java-user-return-37220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1181 invoked from network); 17 Nov 2008 18:30:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 18:30:34 -0000
Received: (qmail 40562 invoked by uid 500); 17 Nov 2008 18:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40497 invoked by uid 500); 17 Nov 2008 18:30:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40486 invoked by uid 99); 17 Nov 2008 18:30:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 10:30:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.198.232 as permitted sender)
Received: from [209.85.198.232] (HELO rv-out-0506.google.com) (209.85.198.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 18:29:12 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2551640rvb.5
        for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 10:29:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:cc:subject
         :message-id:in-reply-to:references:x-mailer:mime-version
         :content-type:content-transfer-encoding;
        bh=IY4o7zIh7pIZPRrSaysEy+QpWefIHnksD+vjncdpyzw=;
        b=H3P8hpLYniWSoMvZ4pjN4XJ5G7/m86EHHaukYktXwoAeQg/ZaPueK8u/R+HfLP07lC
         Bfi62whS2akp2AGWjgCUwzN2FkJi65GFd+mCTYKFHYdJ3VWmWdLlvnyyu14yJO8XbVlG
         edFZaapuEDft+0RAFPsbJy7evKWyobn7f+Vws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:cc:subject:message-id:in-reply-to:references:x-mailer
         :mime-version:content-type:content-transfer-encoding;
        b=C9dt7d2GZStgr5g9UO65g7wCgyg8CuWe7ka5Zr+6LlRKNo+GsyUMALLPeYJfFpFRyM
         tKMAmeWiwGE2lkA7rBiXHTtKxje3/onrQzvcm5VNanCselddl7GUo1ovZtdvZ/18vgik
         oNRBfGP6onnyh+SQzis9E2SI1S5+ffMYAbdBQ=
Received: by 10.141.13.16 with SMTP id q16mr2391951rvi.272.1226946586436;
        Mon, 17 Nov 2008 10:29:46 -0800 (PST)
Received: from localhost ([189.107.137.13])
        by mx.google.com with ESMTPS id l31sm10403392rvb.2.2008.11.17.10.29.43
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 17 Nov 2008 10:29:46 -0800 (PST)
Date: Mon, 17 Nov 2008 16:29:29 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: Rafael Cunha de Almeida <almeidaraf@gmail.com>
Cc: java-user@lucene.apache.org
Subject: Re: Using AND with MultiFieldQueryParser
Message-Id: <20081117162929.86ac05c7.almeidaraf@gmail.com>
In-Reply-To: <20081117130735.121c35dc.almeidaraf@gmail.com>
References: <20081113030002.1049d0ed.almeidaraf@gmail.com>
	<295da8fe0811130123xd248daaue9050a96f25d5d0@mail.gmail.com>
	<20081113145108.1144bd5a.almeidaraf@gmail.com>
	<491C5FF1.5080206@informatics.jax.org>
	<20081117130735.121c35dc.almeidaraf@gmail.com>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 17 Nov 2008 13:07:35 -0200
Rafael Cunha de Almeida <almeidaraf@gmail.com> wrote:

> On Thu, 13 Nov 2008 12:12:17 -0500
> Matthew Hall <mhall@informatics.jax.org> wrote:
> 
> > Which Analyzer have you assigned per field?
> > 
> > The PerFieldAnalyzerWrapper uses a default analyzer (the one you passed 
> > during its construction), and then you assign specific analyzers to each 
> > field that you want to have special treatment.
> > 
> > For example:
> > 
> >         PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(
> >                 new StandardAnalyzer());
> >         aWrapper.addAnalyzer("data", new MGIAnalyzer());
> >         aWrapper.addAnalyzer("sdata", new StemmedMGIAnalyzer());
> > 
> > Now, for the fields in question, have you assigned an Analyzer that 
> > doesn't actually use stopwords? (there are several available in core)  
> > Or are you perchance using a custom Analyzer that doesn't process stop 
> > words?
> >
> > Could you possibly post your Initialization code for this?  If so I 
> > think we could be of more help to you.
> 
> I wrote this method, which returns me the analyzer:
>     static public Analyzer getAnalyzer()
>     {
>         PerFieldAnalyzerWrapper analyzer = new PerFieldAnalyzerWrapper(
>             new KeywordAnalyzer());
>         analyzer.addAnalyzer("placas", new UniqueTokensAnalyzer());
>         analyzer.addAnalyzer("ano", new UniqueTokensAnalyzer());
>         analyzer.addAnalyzer("no_reds", new NumberAnalyzer());
> 
>         analyzer.addAnalyzer("nomes", new SimpleBrazilianAnalyzer());
>         analyzer.addAnalyzer("apelidos", new SimpleBrazilianAnalyzer());
>         analyzer.addAnalyzer("historico", new SimpleBrazilianAnalyzer
> ()); analyzer.addAnalyzer("modosAcaoCriminosa", new
> SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("nomeMunicipio", new
> SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("nomeBairro", new
> SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("logradouro", new
> SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("textoComplementar",
> new SimpleBrazilianAnalyzer());
> 
>         return analyzer;
>     }
> 
> SimpleBrazilianAnalyzer is my own analyzer that uses stopwords.
> 
> I pass that analyzer to MultiFieldQueryParser together with an array
> with all the fields, ie. those fields and more.
> 
> When I do an AND search I'd like it to ignore stopwords. My best idea
> so far is to make my own tokenizer and remove stopwords from the
> search. How does that sound?

Another related problem, exact search cannot succeed if there's a
stopword in between terms of the exact search. For instance:
	"Ready to ride"
will never return any documents if "to" is a stopword. Shouldn't the
stopwords be ignored as if they weren't even there?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 23:32:42 2008
Return-Path: <java-user-return-37221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36566 invoked from network); 17 Nov 2008 23:32:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 23:32:42 -0000
Received: (qmail 16601 invoked by uid 500); 17 Nov 2008 23:32:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16577 invoked by uid 500); 17 Nov 2008 23:32:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16566 invoked by uid 99); 17 Nov 2008 23:32:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 15:32:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of almeidaraf@gmail.com designates 209.85.200.170 as permitted sender)
Received: from [209.85.200.170] (HELO wf-out-1314.google.com) (209.85.200.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 23:31:20 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2780114wfc.20
        for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 15:32:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:from:to:subject
         :message-id:in-reply-to:references:x-mailer:mime-version
         :content-type:content-transfer-encoding;
        bh=5rs+6wZyTsEpVlPkdUipdIKf5nVVSH8ruNzU1G3L6mY=;
        b=TVh6YWTsWdDULZlnpzShhdktjZuVGiuEse09sDsqvXZC3SIUIUOGok23BUEcl8iBMH
         DWrSDTzjJJCO6Qipz+wdMFtZXEu0ZGMc18tpi7ku57gRQQtZu5Wjjjp5lq90W9ai78VU
         O7lXQY/GixyC/xx+aSsS2h1udFfGwEk5DqFV4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:in-reply-to:references:x-mailer
         :mime-version:content-type:content-transfer-encoding;
        b=MJGcW6yhLA6VbI+vi8s3DzLaJ4X9qoBcypz03eFcoQZctlAT/cJSMXEIYw0cJZipE0
         J+B6Vw2OXIeN6PBOulngWu2AR/JN/VkUQKaEVrX4BwX6z++oj2lIdL/ROnmMjN1Kvq+m
         7CFSd9jYiNqBcWoNd1FX4XG5rCvKKS0IF69x8=
Received: by 10.142.201.3 with SMTP id y3mr2225227wff.299.1226964724782;
        Mon, 17 Nov 2008 15:32:04 -0800 (PST)
Received: from localhost ([189.107.137.13])
        by mx.google.com with ESMTPS id 22sm3823005wfd.33.2008.11.17.15.31.22
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 17 Nov 2008 15:31:23 -0800 (PST)
Date: Mon, 17 Nov 2008 21:31:09 -0200
From: Rafael Cunha de Almeida <almeidaraf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using AND with MultiFieldQueryParser
Message-Id: <20081117213109.05e883fa.almeidaraf@gmail.com>
In-Reply-To: <20081117162929.86ac05c7.almeidaraf@gmail.com>
References: <20081113030002.1049d0ed.almeidaraf@gmail.com>
	<295da8fe0811130123xd248daaue9050a96f25d5d0@mail.gmail.com>
	<20081113145108.1144bd5a.almeidaraf@gmail.com>
	<491C5FF1.5080206@informatics.jax.org>
	<20081117130735.121c35dc.almeidaraf@gmail.com>
	<20081117162929.86ac05c7.almeidaraf@gmail.com>
X-Mailer: Sylpheed 2.5.0 (GTK+ 2.12.11; x86_64-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 17 Nov 2008 16:29:29 -0200
Rafael Cunha de Almeida <almeidaraf@gmail.com> wrote:

> On Mon, 17 Nov 2008 13:07:35 -0200
> Rafael Cunha de Almeida <almeidaraf@gmail.com> wrote:
> 
> > On Thu, 13 Nov 2008 12:12:17 -0500
> > Matthew Hall <mhall@informatics.jax.org> wrote:
> > 
> > > Which Analyzer have you assigned per field?
> > > 
> > > The PerFieldAnalyzerWrapper uses a default analyzer (the one you passed 
> > > during its construction), and then you assign specific analyzers to each 
> > > field that you want to have special treatment.
> > > 
> > > For example:
> > > 
> > >         PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(
> > >                 new StandardAnalyzer());
> > >         aWrapper.addAnalyzer("data", new MGIAnalyzer());
> > >         aWrapper.addAnalyzer("sdata", new StemmedMGIAnalyzer());
> > > 
> > > Now, for the fields in question, have you assigned an Analyzer that 
> > > doesn't actually use stopwords? (there are several available in core)  
> > > Or are you perchance using a custom Analyzer that doesn't process stop 
> > > words?
> > >
> > > Could you possibly post your Initialization code for this?  If so I 
> > > think we could be of more help to you.
> > 
> > I wrote this method, which returns me the analyzer:
> >     static public Analyzer getAnalyzer()
> >     {
> >         PerFieldAnalyzerWrapper analyzer = new PerFieldAnalyzerWrapper(
> >             new KeywordAnalyzer());
> >         analyzer.addAnalyzer("placas", new UniqueTokensAnalyzer());
> >         analyzer.addAnalyzer("ano", new UniqueTokensAnalyzer());
> >         analyzer.addAnalyzer("no_reds", new NumberAnalyzer());
> > 
> >         analyzer.addAnalyzer("nomes", new SimpleBrazilianAnalyzer());
> >         analyzer.addAnalyzer("apelidos", new SimpleBrazilianAnalyzer());
> >         analyzer.addAnalyzer("historico", new SimpleBrazilianAnalyzer
> > ()); analyzer.addAnalyzer("modosAcaoCriminosa", new
> > SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("nomeMunicipio", new
> > SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("nomeBairro", new
> > SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("logradouro", new
> > SimpleBrazilianAnalyzer()); analyzer.addAnalyzer("textoComplementar",
> > new SimpleBrazilianAnalyzer());
> > 
> >         return analyzer;
> >     }
> > 
> > SimpleBrazilianAnalyzer is my own analyzer that uses stopwords.
> > 
> > I pass that analyzer to MultiFieldQueryParser together with an array
> > with all the fields, ie. those fields and more.
> > 
> > When I do an AND search I'd like it to ignore stopwords. My best idea
> > so far is to make my own tokenizer and remove stopwords from the
> > search. How does that sound?
> 
> Another related problem, exact search cannot succeed if there's a
> stopword in between terms of the exact search. For instance:
> 	"Ready to ride"
> will never return any documents if "to" is a stopword. Shouldn't the
> stopwords be ignored as if they weren't even there?

Actually, the exact search issue is due to what I believe to be a bug
on BrazilianAnalyzer. I'm going to send the patch to java-dev@ right
now. But the problem with the AND search still holds.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 17 23:43:36 2008
Return-Path: <java-user-return-37222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38513 invoked from network); 17 Nov 2008 23:43:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Nov 2008 23:43:36 -0000
Received: (qmail 28244 invoked by uid 500); 17 Nov 2008 23:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28209 invoked by uid 500); 17 Nov 2008 23:43:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28198 invoked by uid 99); 17 Nov 2008 23:43:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 15:43:38 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 23:42:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L2DkC-00007S-Cb
	for java-user@lucene.apache.org; Mon, 17 Nov 2008 15:43:00 -0800
Message-ID: <20550488.post@talk.nabble.com>
Date: Mon, 17 Nov 2008 15:43:00 -0800 (PST)
From: bhupesh bansal <bbansal.usc@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene 2.4 Token Stream error
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: bbansal.usc@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey folks, 

I saw this error in my code base after upgrading lucene-2.4 from lucene 2.3.
have folks seen this before and any idea ?? is it related to fix of
https://issues.apache.org/jira/browse/LUCENE-1333

java.lang.IllegalArgumentException: length 11 exceeds the size of the
termBuffer (10)
        at org.apache.lucene.analysis.Token.setTermLength(Token.java:526)
        at
com.linkedin.search.pub.stemming.impl.filter.AccentFilter.next(AccentFilter.java:42)
        at
org.apache.lucene.analysis.LowerCaseFilter.next(LowerCaseFilter.java:34)
        at org.apache.lucene.analysis.TokenStream.next(TokenStream.java:47)
        at
com.linkedin.search.pub.stemming.impl.filter.PushbackFilter.next(PushbackFilter.java:52)
        at
com.linkedin.search.pub.stemming.impl.filter.rewrite.RewriteFilter.next(RewriteFilter.java:58)
        at
com.linkedin.search.pub.stemming.impl.filter.rewrite.RewriteFilter.next(RewriteFilter.java:70)
        at
com.linkedin.search.pub.stemming.impl.filter.rewrite.RewriteFilter.next(RewriteFilter.java:39)
        at org.apache.lucene.analysis.StopFilter.next(StopFilter.java:120)
        at org.apache.lucene.analysis.TokenStream.next(TokenStream.java:47)
-- 
View this message in context: http://www.nabble.com/Lucene-2.4-Token-Stream-error-tp20550488p20550488.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 01:02:40 2008
Return-Path: <java-user-return-37223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62379 invoked from network); 18 Nov 2008 01:02:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 01:02:40 -0000
Received: (qmail 81556 invoked by uid 500); 18 Nov 2008 01:02:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81525 invoked by uid 500); 18 Nov 2008 01:02:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81514 invoked by uid 99); 18 Nov 2008 01:02:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 17:02:42 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.163.178.134] (HELO web34302.mail.mud.yahoo.com) (66.163.178.134)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Nov 2008 01:01:18 +0000
Received: (qmail 73162 invoked by uid 60001); 18 Nov 2008 01:01:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=NXvB90SXEb39XOR4012+1/3elT4oXhJZGtObyekpDCJJ0YknTTiRP/1wItUo+haleJD1tRUGMiaU2OeoQotVisEjjuAD8LpOXcbTTXUqjFPhak9gW+VCsMvcjvxpKLba9MVnCNyfYbq9ZPvPJj+l1UDb2YfuGDcitxiM6u3I/aQ=;
X-YMail-OSG: POAyWzsVM1mowYOGz3AbnXoBzpf5ZFHHrPdORGe1Y4j5R94hHq5yozhzS6j1Lx2d2iaXnEkNtIDqV9jneyVzmgKlQXTbulkFPcO4FjsmklyvxEk.hMGXhSVbkzOXGypitYTyBgk9UGkyFwZrAC9VKdEWDkeQ1jv8qZJSQboXqYxi1hGDolqQ_wfnHdw-
Received: from [98.198.138.243] by web34302.mail.mud.yahoo.com via HTTP; Mon, 17 Nov 2008 17:00:59 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <776612.75162.qm@web34306.mail.mud.yahoo.com> <op.ukq8l2zuoftp72@melkor>
Date: Mon, 17 Nov 2008 17:00:59 -0800 (PST)
From: Zhibin Mai <zbmai@yahoo.com>
Subject: Re: how to estimate how much memory is required to support the large index search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1703075838-1226970059=:72678"
Message-ID: <950196.72678.qm@web34302.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1703075838-1226970059=:72678
Content-Type: text/plain; charset=us-ascii

Aleksander,

I figured it out that most of heap was consumed by the Term cache. In our case, the index has 233 millions of terms and 6.4 millions of them were loaded into the cache when we did the search. I roughly did a calculation that each term will need how much memory, it is about
16 bytes for Term Object + 32 bytes for TermInfo Object + 24 bytes for String Object for term text + 2 * length(Char[]) for term text.

In our case, the average length of term text is 25 characters, that means each term needs at least 122 bytes. The cache for 6.4 millions of terms needs 6.4 * 122 = 780MB. Plus 200MB for caching norm, the RAM for cache is larger than 980MB. We work around the cache issue for Terms by setting index divisor of the IndexReader to a higher value. Actually, the performance of search is good even using index divisor as 4.

Thanks,

Zhibin




________________________________
From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
To: java-user@lucene.apache.org
Sent: Monday, November 17, 2008 2:31:04 AM
Subject: Re: how to estimate how much memory is required to support the large index search

One major factor that may result in heap space problems is if you are doing any form of sorting when searching. Do you have any form of default sort in your application? Also, the type of field used for sorting is important with regard to memory consumption.

This issue has been discussed before on the list. (You can search the archive for sorting and memory consumption.)

- Aleksander

On Sun, 16 Nov 2008 14:36:36 +0100, Zhibin Mai <zbmai@yahoo.com> wrote:

> Hello,
> 
> I
> am a beginner on using lucene. We developed an application to
> create and search index using lucene 2.3.1. We would like to know how
> to estimate how much memory is required to support
> the index search given an index.
> 
> Recently,
> the size of the index has reached to about 200GB with 197M of documents
> and 223M of terms. Our application starts having intermittent
> "OutOfMemoryError: Java heap space" when we use
> it to search the index. We use JProfiler to get the following memory allocation when we do one keyword search:
> 
> char[]                                                        332MB
> org.apache.lucene.index.TermInfo            194MB
> java.lang.String                                        146MB
> org.apache.lucene.index.Term                99,823KB
> org.apache.lucene.index.Term                24,956KB
> org.apache.lucene.index.TermInfo[]        24,956KB
> 
> byte[]                                                    188MB
> long[]                                                    49,912KB
> 
> The memory allocation for the first 6 types of objects does not change when we change the search criteria. Could you please give me some advice what major factors will affect the memory allocation
> and how those factors will affect the memory usage precisely on search? Is it possible to reduce the memory usage on search?
> 
> 
> Thank you,
> 
> 
> Zhibin
> 
> 
> 



--Aleksander M. Stensby
Senior software developer
Integrasco A/S
www.integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      
--0-1703075838-1226970059=:72678--

From java-user-return-37224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 01:08:10 2008
Return-Path: <java-user-return-37224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67294 invoked from network); 18 Nov 2008 01:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 01:08:10 -0000
Received: (qmail 90037 invoked by uid 500); 18 Nov 2008 01:08:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89719 invoked by uid 500); 18 Nov 2008 01:08:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89708 invoked by uid 99); 18 Nov 2008 01:08:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 17:08:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 01:06:47 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2814679wfc.20
        for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 17:07:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=VnH5NySNYCJWLu2Mjj2aNT1hWllypJLtYQrbiYrBaIo=;
        b=MAwusXVt0Vj3vIYigKWNWPtNrQtDIS0GMPeveV7rK7FIhW9Pl/Yr8oqCyYUXOI49Lb
         p562MxgEEBdjMDQmJfrTP0KBtDZiH8/UKieqf6HB+e8MZssm0utnYH7SurEN19PaWF0K
         HAwpEBtnXhYIOW77q4+4EJG7Sn4sPimDx/xEk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=XfExwSymLIVQSiqxdLd40IXNwqS/rcVipV4ZUzB6jpl3Dj8+/CP/HzKWebRiV/Ijv9
         CpCUPyoEKsxfLl1j1T94EF+N4qH8AYk6e/jZ2DjRt2UygCvRYG0zzLXENWaBBFH0EAl/
         q7TMBoKeA6hNq7MeS4aewPtkHRnfGhmsIP7LQ=
Received: by 10.142.199.10 with SMTP id w10mr2274451wff.84.1226970441914;
        Mon, 17 Nov 2008 17:07:21 -0800 (PST)
Received: by 10.142.127.19 with HTTP; Mon, 17 Nov 2008 17:07:21 -0800 (PST)
Message-ID: <6e3ae6310811171707m4e32e199y9d52d620c5cd71a9@mail.gmail.com>
Date: Mon, 17 Nov 2008 17:07:21 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to estimate how much memory is required to support the large index search
In-Reply-To: <950196.72678.qm@web34302.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65711_11719098.1226970441898"
References: <776612.75162.qm@web34306.mail.mud.yahoo.com>
	 <op.ukq8l2zuoftp72@melkor>
	 <950196.72678.qm@web34302.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_65711_11719098.1226970441898
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Calculation looks right. But what's the "Index divisor" that you mentioned?

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Mon, Nov 17, 2008 at 5:00 PM, Zhibin Mai <zbmai@yahoo.com> wrote:

> Aleksander,
>
> I figured it out that most of heap was consumed by the Term cache. In our
> case, the index has 233 millions of terms and 6.4 millions of them were
> loaded into the cache when we did the search. I roughly did a calculation
> that each term will need how much memory, it is about
> 16 bytes for Term Object + 32 bytes for TermInfo Object + 24 bytes for
> String Object for term text + 2 * length(Char[]) for term text.
>
> In our case, the average length of term text is 25 characters, that means
> each term needs at least 122 bytes. The cache for 6.4 millions of terms
> needs 6.4 * 122 = 780MB. Plus 200MB for caching norm, the RAM for cache is
> larger than 980MB. We work around the cache issue for Terms by setting index
> divisor of the IndexReader to a higher value. Actually, the performance of
> search is good even using index divisor as 4.
>
> Thanks,
>
> Zhibin
>
>
>
>
> ________________________________
> From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
> To: java-user@lucene.apache.org
> Sent: Monday, November 17, 2008 2:31:04 AM
> Subject: Re: how to estimate how much memory is required to support the
> large index search
>
> One major factor that may result in heap space problems is if you are doing
> any form of sorting when searching. Do you have any form of default sort in
> your application? Also, the type of field used for sorting is important with
> regard to memory consumption.
>
> This issue has been discussed before on the list. (You can search the
> archive for sorting and memory consumption.)
>
> - Aleksander
>
> On Sun, 16 Nov 2008 14:36:36 +0100, Zhibin Mai <zbmai@yahoo.com> wrote:
>
> > Hello,
> >
> > I
> > am a beginner on using lucene. We developed an application to
> > create and search index using lucene 2.3.1. We would like to know how
> > to estimate how much memory is required to support
> > the index search given an index.
> >
> > Recently,
> > the size of the index has reached to about 200GB with 197M of documents
> > and 223M of terms. Our application starts having intermittent
> > "OutOfMemoryError: Java heap space" when we use
> > it to search the index. We use JProfiler to get the following memory
> allocation when we do one keyword search:
> >
> > char[]                                                        332MB
> > org.apache.lucene.index.TermInfo            194MB
> > java.lang.String                                        146MB
> > org.apache.lucene.index.Term                99,823KB
> > org.apache.lucene.index.Term                24,956KB
> > org.apache.lucene.index.TermInfo[]        24,956KB
> >
> > byte[]                                                    188MB
> > long[]                                                    49,912KB
> >
> > The memory allocation for the first 6 types of objects does not change
> when we change the search criteria. Could you please give me some advice
> what major factors will affect the memory allocation
> > and how those factors will affect the memory usage precisely on search?
> Is it possible to reduce the memory usage on search?
> >
> >
> > Thank you,
> >
> >
> > Zhibin
> >
> >
> >
>
>
>
> --Aleksander M. Stensby
> Senior software developer
> Integrasco A/S
> www.integrasco.no
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>

------=_Part_65711_11719098.1226970441898--

From java-user-return-37225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 02:23:42 2008
Return-Path: <java-user-return-37225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16452 invoked from network); 18 Nov 2008 02:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 02:23:41 -0000
Received: (qmail 28699 invoked by uid 500); 18 Nov 2008 02:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28668 invoked by uid 500); 18 Nov 2008 02:23:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28656 invoked by uid 99); 18 Nov 2008 02:23:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 18:23:42 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.163.178.140] (HELO web34308.mail.mud.yahoo.com) (66.163.178.140)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Nov 2008 02:22:17 +0000
Received: (qmail 66677 invoked by uid 60001); 18 Nov 2008 02:21:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=asf29f5OD7EsfP/zX4d+UHBZIUjH0KRUpONI0CdmD7TCQmLDmZpzZXcFFF8heUykeD8AiJ30iIxo9Cpxjlx+62lwycn/3c5Qtj8K27JF/3l10Idy48Ica2k7NjgewKwNuP8/hDrq66UNuS/OaLNYCt6AiN8ncUnmmTteeGY01TE=;
X-YMail-OSG: 2du_SMwVM1lykWGiMlA0Uuhp9Lg0PE5TcILv.LUkFjFCx2lbw2sTUQ4Ecj7BxlxLITRw1iJpIG8u3A3YwGlKmWiScW0btD0lvGF4RdQreSXMUloXTEE6oEtaBZc1W6ap388Ccr.G0eBVmM84sm5kGIaXgXR7pa3CZewHOuaTpJLwdalzcuCaWvUKzUc-
Received: from [98.198.138.243] by web34308.mail.mud.yahoo.com via HTTP; Mon, 17 Nov 2008 18:21:59 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <776612.75162.qm@web34306.mail.mud.yahoo.com>  <op.ukq8l2zuoftp72@melkor>  <950196.72678.qm@web34302.mail.mud.yahoo.com> <6e3ae6310811171707m4e32e199y9d52d620c5cd71a9@mail.gmail.com>
Date: Mon, 17 Nov 2008 18:21:59 -0800 (PST)
From: Zhibin Mai <zbmai@yahoo.com>
Subject: Re: how to estimate how much memory is required to support the large index search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1227536226-1226974919=:66609"
Message-ID: <606098.66609.qm@web34308.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1227536226-1226974919=:66609
Content-Type: text/plain; charset=us-ascii

It is a cache tunning setting in IndexReader. It can be set via method setTermInfosIndexDivisor(int). 

Thanks,

Zhibin




________________________________
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, November 17, 2008 7:07:21 PM
Subject: Re: how to estimate how much memory is required to support the large index search

Calculation looks right. But what's the "Index divisor" that you mentioned?

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!

On Mon, Nov 17, 2008 at 5:00 PM, Zhibin Mai <zbmai@yahoo.com> wrote:

> Aleksander,
>
> I figured it out that most of heap was consumed by the Term cache. In our
> case, the index has 233 millions of terms and 6.4 millions of them were
> loaded into the cache when we did the search. I roughly did a calculation
> that each term will need how much memory, it is about
> 16 bytes for Term Object + 32 bytes for TermInfo Object + 24 bytes for
> String Object for term text + 2 * length(Char[]) for term text.
>
> In our case, the average length of term text is 25 characters, that means
> each term needs at least 122 bytes. The cache for 6.4 millions of terms
> needs 6.4 * 122 = 780MB. Plus 200MB for caching norm, the RAM for cache is
> larger than 980MB. We work around the cache issue for Terms by setting index
> divisor of the IndexReader to a higher value. Actually, the performance of
> search is good even using index divisor as 4.
>
> Thanks,
>
> Zhibin
>
>
>
>
> ________________________________
> From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
> To: java-user@lucene.apache.org
> Sent: Monday, November 17, 2008 2:31:04 AM
> Subject: Re: how to estimate how much memory is required to support the
> large index search
>
> One major factor that may result in heap space problems is if you are doing
> any form of sorting when searching. Do you have any form of default sort in
> your application? Also, the type of field used for sorting is important with
> regard to memory consumption.
>
> This issue has been discussed before on the list. (You can search the
> archive for sorting and memory consumption.)
>
> - Aleksander
>
> On Sun, 16 Nov 2008 14:36:36 +0100, Zhibin Mai <zbmai@yahoo.com> wrote:
>
> > Hello,
> >
> > I
> > am a beginner on using lucene. We developed an application to
> > create and search index using lucene 2.3.1. We would like to know how
> > to estimate how much memory is required to support
> > the index search given an index.
> >
> > Recently,
> > the size of the index has reached to about 200GB with 197M of documents
> > and 223M of terms. Our application starts having intermittent
> > "OutOfMemoryError: Java heap space" when we use
> > it to search the index. We use JProfiler to get the following memory
> allocation when we do one keyword search:
> >
> > char[]                                                        332MB
> > org.apache.lucene.index.TermInfo            194MB
> > java.lang.String                                        146MB
> > org.apache.lucene.index.Term                99,823KB
> > org.apache.lucene.index.Term                24,956KB
> > org.apache.lucene.index.TermInfo[]        24,956KB
> >
> > byte[]                                                    188MB
> > long[]                                                    49,912KB
> >
> > The memory allocation for the first 6 types of objects does not change
> when we change the search criteria. Could you please give me some advice
> what major factors will affect the memory allocation
> > and how those factors will affect the memory usage precisely on search?
> Is it possible to reduce the memory usage on search?
> >
> >
> > Thank you,
> >
> >
> > Zhibin
> >
> >
> >
>
>
>
> --Aleksander M. Stensby
> Senior software developer
> Integrasco A/S
> www.integrasco.no
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>



      
--0-1227536226-1226974919=:66609--

From java-user-return-37226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 05:14:33 2008
Return-Path: <java-user-return-37226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78867 invoked from network); 18 Nov 2008 05:14:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 05:14:32 -0000
Received: (qmail 31140 invoked by uid 500); 18 Nov 2008 05:14:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31103 invoked by uid 500); 18 Nov 2008 05:14:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31092 invoked by uid 99); 18 Nov 2008 05:14:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Nov 2008 21:14:33 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 05:13:10 +0000
Received: by wf-out-1314.google.com with SMTP id 28so2900646wfc.20
        for <java-user@lucene.apache.org>; Mon, 17 Nov 2008 21:13:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=UMDm/G3Ygn9WDdxk3HSiq8+qnJSqnnps1AxYA4yM1qY=;
        b=C8JEcHqfLvM3JgBLUeuM575TLsr1lDa0RLr8PzoFSMjrCzntc/SHRbnKBzS/wVjqZP
         eR2mLV+oCANFmc3GO2s1LsrWn2t7d+kXpkBCk9QIGxX3SPG8buvcYlErXX/r0XZfsO2A
         boorxfQhVk3H17Q+uC3gfzn88RRokc7Y2u3tc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=iXvYRJX/Rb1tLyyh2K0d4sX6M9muQ5ySaQm7waMNdUCUQFAF92XxfX9V8/SbRz8GvF
         fo8NE6vLxssM2j4yz6JT1GhCfPb/aD6Eq98TxMzSqgx2IQlWbqC1lxqtntbUKb+1/n0s
         1sXl1AviClNgFSLUYxDOTO6DNADe0/whYE48c=
Received: by 10.143.16.9 with SMTP id t9mr172683wfi.329.1226985224392;
        Mon, 17 Nov 2008 21:13:44 -0800 (PST)
Received: by 10.142.127.19 with HTTP; Mon, 17 Nov 2008 21:13:44 -0800 (PST)
Message-ID: <6e3ae6310811172113sd6a9132x2dc088393a05c377@mail.gmail.com>
Date: Mon, 17 Nov 2008 21:13:44 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to estimate how much memory is required to support the large index search
In-Reply-To: <606098.66609.qm@web34308.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67430_3642446.1226985224387"
References: <776612.75162.qm@web34306.mail.mud.yahoo.com>
	 <op.ukq8l2zuoftp72@melkor>
	 <950196.72678.qm@web34302.mail.mud.yahoo.com>
	 <6e3ae6310811171707m4e32e199y9d52d620c5cd71a9@mail.gmail.com>
	 <606098.66609.qm@web34308.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_67430_3642446.1226985224387
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

So looks like you are not really doing much sorting? This index divisor
affects reader.terms(), but not too much with sorting.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!


On Mon, Nov 17, 2008 at 6:21 PM, Zhibin Mai <zbmai@yahoo.com> wrote:

> It is a cache tunning setting in IndexReader. It can be set via method
> setTermInfosIndexDivisor(int).
>
> Thanks,
>
> Zhibin
>
>
>
>
> ________________________________
> From: Chris Lu <chris.lu@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, November 17, 2008 7:07:21 PM
> Subject: Re: how to estimate how much memory is required to support the
> large index search
>
> Calculation looks right. But what's the "Index divisor" that you mentioned?
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
> On Mon, Nov 17, 2008 at 5:00 PM, Zhibin Mai <zbmai@yahoo.com> wrote:
>
> > Aleksander,
> >
> > I figured it out that most of heap was consumed by the Term cache. In our
> > case, the index has 233 millions of terms and 6.4 millions of them were
> > loaded into the cache when we did the search. I roughly did a calculation
> > that each term will need how much memory, it is about
> > 16 bytes for Term Object + 32 bytes for TermInfo Object + 24 bytes for
> > String Object for term text + 2 * length(Char[]) for term text.
> >
> > In our case, the average length of term text is 25 characters, that means
> > each term needs at least 122 bytes. The cache for 6.4 millions of terms
> > needs 6.4 * 122 = 780MB. Plus 200MB for caching norm, the RAM for cache
> is
> > larger than 980MB. We work around the cache issue for Terms by setting
> index
> > divisor of the IndexReader to a higher value. Actually, the performance
> of
> > search is good even using index divisor as 4.
> >
> > Thanks,
> >
> > Zhibin
> >
> >
> >
> >
> > ________________________________
> > From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
> > To: java-user@lucene.apache.org
> > Sent: Monday, November 17, 2008 2:31:04 AM
> > Subject: Re: how to estimate how much memory is required to support the
> > large index search
> >
> > One major factor that may result in heap space problems is if you are
> doing
> > any form of sorting when searching. Do you have any form of default sort
> in
> > your application? Also, the type of field used for sorting is important
> with
> > regard to memory consumption.
> >
> > This issue has been discussed before on the list. (You can search the
> > archive for sorting and memory consumption.)
> >
> > - Aleksander
> >
> > On Sun, 16 Nov 2008 14:36:36 +0100, Zhibin Mai <zbmai@yahoo.com> wrote:
> >
> > > Hello,
> > >
> > > I
> > > am a beginner on using lucene. We developed an application to
> > > create and search index using lucene 2.3.1. We would like to know how
> > > to estimate how much memory is required to support
> > > the index search given an index.
> > >
> > > Recently,
> > > the size of the index has reached to about 200GB with 197M of documents
> > > and 223M of terms. Our application starts having intermittent
> > > "OutOfMemoryError: Java heap space" when we use
> > > it to search the index. We use JProfiler to get the following memory
> > allocation when we do one keyword search:
> > >
> > > char[]                                                        332MB
> > > org.apache.lucene.index.TermInfo            194MB
> > > java.lang.String                                        146MB
> > > org.apache.lucene.index.Term                99,823KB
> > > org.apache.lucene.index.Term                24,956KB
> > > org.apache.lucene.index.TermInfo[]        24,956KB
> > >
> > > byte[]                                                    188MB
> > > long[]                                                    49,912KB
> > >
> > > The memory allocation for the first 6 types of objects does not change
> > when we change the search criteria. Could you please give me some advice
> > what major factors will affect the memory allocation
> > > and how those factors will affect the memory usage precisely on search?
> > Is it possible to reduce the memory usage on search?
> > >
> > >
> > > Thank you,
> > >
> > >
> > > Zhibin
> > >
> > >
> > >
> >
> >
> >
> > --Aleksander M. Stensby
> > Senior software developer
> > Integrasco A/S
> > www.integrasco.no
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
>
>
>
>
>

------=_Part_67430_3642446.1226985224387--

From java-user-return-37227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 10:39:12 2008
Return-Path: <java-user-return-37227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22400 invoked from network); 18 Nov 2008 10:39:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 10:39:12 -0000
Received: (qmail 12211 invoked by uid 500); 18 Nov 2008 10:39:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12171 invoked by uid 500); 18 Nov 2008 10:39:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12160 invoked by uid 99); 18 Nov 2008 10:39:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 02:39:10 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.170.188] (HELO rn-out-0910.google.com) (64.233.170.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 10:37:46 +0000
Received: by rn-out-0910.google.com with SMTP id j71so2349837rne.4
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 02:38:29 -0800 (PST)
Received: by 10.90.119.20 with SMTP id r20mr323609agc.4.1227004708970;
        Tue, 18 Nov 2008 02:38:28 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 9sm4040880agc.31.2008.11.18.02.38.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 18 Nov 2008 02:38:28 -0800 (PST)
Message-Id: <9F12A82F-2F8C-44DF-8E7C-95F374C11017@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <6e3ae6310811172113sd6a9132x2dc088393a05c377@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: how to estimate how much memory is required to support the large index search
Date: Tue, 18 Nov 2008 05:38:26 -0500
References: <776612.75162.qm@web34306.mail.mud.yahoo.com> <op.ukq8l2zuoftp72@melkor> <950196.72678.qm@web34302.mail.mud.yahoo.com> <6e3ae6310811171707m4e32e199y9d52d620c5cd71a9@mail.gmail.com> <606098.66609.qm@web34308.mail.mud.yahoo.com> <6e3ae6310811172113sd6a9132x2dc088393a05c377@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


BTW, upcoming changes in Lucene for flexible indexing should improve  
the RAM usage of the terms index substantially:

     https://issues.apache.org/jira/browse/LUCENE-1458

In the current (first) iteration on that patch, TermInfo is no longer  
used at all when loading the index.  I think for a typical index this  
will likely cut in half the RAM used by the terms index.

But... this won't be available for some time (it's still a work in  
progress).

Mike

Chris Lu wrote:

> So looks like you are not really doing much sorting? This index  
> divisor
> affects reader.terms(), but not too much with sorting.
>
> -- 
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per  
> request) got
> 2.6 Million Euro funding!
>
>
> On Mon, Nov 17, 2008 at 6:21 PM, Zhibin Mai <zbmai@yahoo.com> wrote:
>
>> It is a cache tunning setting in IndexReader. It can be set via  
>> method
>> setTermInfosIndexDivisor(int).
>>
>> Thanks,
>>
>> Zhibin
>>
>>
>>
>>
>> ________________________________
>> From: Chris Lu <chris.lu@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Monday, November 17, 2008 7:07:21 PM
>> Subject: Re: how to estimate how much memory is required to support  
>> the
>> large index search
>>
>> Calculation looks right. But what's the "Index divisor" that you  
>> mentioned?
>>
>> --
>> Chris Lu
>> -------------------------
>> Instant Scalable Full-Text Search On Any Database/Application
>> site: http://www.dbsight.net
>> demo: http://search.dbsight.com
>> Lucene Database Search in 3 minutes:
>>
>> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
>> DBSight customer, a shopping comparison site, (anonymous per  
>> request) got
>> 2.6 Million Euro funding!
>>
>> On Mon, Nov 17, 2008 at 5:00 PM, Zhibin Mai <zbmai@yahoo.com> wrote:
>>
>>> Aleksander,
>>>
>>> I figured it out that most of heap was consumed by the Term cache.  
>>> In our
>>> case, the index has 233 millions of terms and 6.4 millions of them  
>>> were
>>> loaded into the cache when we did the search. I roughly did a  
>>> calculation
>>> that each term will need how much memory, it is about
>>> 16 bytes for Term Object + 32 bytes for TermInfo Object + 24 bytes  
>>> for
>>> String Object for term text + 2 * length(Char[]) for term text.
>>>
>>> In our case, the average length of term text is 25 characters,  
>>> that means
>>> each term needs at least 122 bytes. The cache for 6.4 millions of  
>>> terms
>>> needs 6.4 * 122 = 780MB. Plus 200MB for caching norm, the RAM for  
>>> cache
>> is
>>> larger than 980MB. We work around the cache issue for Terms by  
>>> setting
>> index
>>> divisor of the IndexReader to a higher value. Actually, the  
>>> performance
>> of
>>> search is good even using index divisor as 4.
>>>
>>> Thanks,
>>>
>>> Zhibin
>>>
>>>
>>>
>>>
>>> ________________________________
>>> From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
>>> To: java-user@lucene.apache.org
>>> Sent: Monday, November 17, 2008 2:31:04 AM
>>> Subject: Re: how to estimate how much memory is required to  
>>> support the
>>> large index search
>>>
>>> One major factor that may result in heap space problems is if you  
>>> are
>> doing
>>> any form of sorting when searching. Do you have any form of  
>>> default sort
>> in
>>> your application? Also, the type of field used for sorting is  
>>> important
>> with
>>> regard to memory consumption.
>>>
>>> This issue has been discussed before on the list. (You can search  
>>> the
>>> archive for sorting and memory consumption.)
>>>
>>> - Aleksander
>>>
>>> On Sun, 16 Nov 2008 14:36:36 +0100, Zhibin Mai <zbmai@yahoo.com>  
>>> wrote:
>>>
>>>> Hello,
>>>>
>>>> I
>>>> am a beginner on using lucene. We developed an application to
>>>> create and search index using lucene 2.3.1. We would like to know  
>>>> how
>>>> to estimate how much memory is required to support
>>>> the index search given an index.
>>>>
>>>> Recently,
>>>> the size of the index has reached to about 200GB with 197M of  
>>>> documents
>>>> and 223M of terms. Our application starts having intermittent
>>>> "OutOfMemoryError: Java heap space" when we use
>>>> it to search the index. We use JProfiler to get the following  
>>>> memory
>>> allocation when we do one keyword search:
>>>>
>>>> char[]                                                        332MB
>>>> org.apache.lucene.index.TermInfo            194MB
>>>> java.lang.String                                        146MB
>>>> org.apache.lucene.index.Term                99,823KB
>>>> org.apache.lucene.index.Term                24,956KB
>>>> org.apache.lucene.index.TermInfo[]        24,956KB
>>>>
>>>> byte[]                                                    188MB
>>>> long[]                                                    49,912KB
>>>>
>>>> The memory allocation for the first 6 types of objects does not  
>>>> change
>>> when we change the search criteria. Could you please give me some  
>>> advice
>>> what major factors will affect the memory allocation
>>>> and how those factors will affect the memory usage precisely on  
>>>> search?
>>> Is it possible to reduce the memory usage on search?
>>>>
>>>>
>>>> Thank you,
>>>>
>>>>
>>>> Zhibin
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>> --Aleksander M. Stensby
>>> Senior software developer
>>> Integrasco A/S
>>> www.integrasco.no
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>>
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 10:43:20 2008
Return-Path: <java-user-return-37228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22997 invoked from network); 18 Nov 2008 10:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 10:43:20 -0000
Received: (qmail 16366 invoked by uid 500); 18 Nov 2008 10:43:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16343 invoked by uid 500); 18 Nov 2008 10:43:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16332 invoked by uid 99); 18 Nov 2008 10:43:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 02:43:21 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 10:41:56 +0000
Received: by qyk13 with SMTP id 13so891482qyk.5
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 02:42:39 -0800 (PST)
Received: by 10.214.244.14 with SMTP id r14mr3684621qah.93.1227004959765;
        Tue, 18 Nov 2008 02:42:39 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 9sm6289456ywf.2.2008.11.18.02.42.38
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 18 Nov 2008 02:42:38 -0800 (PST)
Message-Id: <CB78744B-DFF5-4BFC-8125-03B4B8B1B0DE@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <20550488.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene 2.4 Token Stream error
Date: Tue, 18 Nov 2008 05:42:36 -0500
References: <20550488.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you post the code fragment in AccentFilter.java that's setting the  
Token?

In 2.4 we added that check (for IllegalArgumentException) to ensure  
you don't setTermLength to something longer than the current term  
buffer.  You should call resizeTermBuffer() first, then fill in the  
char[] for the token, then call setTermLength.

Mike

bhupesh bansal wrote:

>
> Hey folks,
>
> I saw this error in my code base after upgrading lucene-2.4 from  
> lucene 2.3.
> have folks seen this before and any idea ?? is it related to fix of
> https://issues.apache.org/jira/browse/LUCENE-1333
>
> java.lang.IllegalArgumentException: length 11 exceeds the size of the
> termBuffer (10)
>        at org.apache.lucene.analysis.Token.setTermLength(Token.java: 
> 526)
>        at
> com 
> .linkedin 
> .search.pub.stemming.impl.filter.AccentFilter.next(AccentFilter.java: 
> 42)
>        at
> org.apache.lucene.analysis.LowerCaseFilter.next(LowerCaseFilter.java: 
> 34)
>        at  
> org.apache.lucene.analysis.TokenStream.next(TokenStream.java:47)
>        at
> com 
> .linkedin 
> .search 
> .pub.stemming.impl.filter.PushbackFilter.next(PushbackFilter.java:52)
>        at
> com 
> .linkedin 
> .search 
> .pub 
> .stemming.impl.filter.rewrite.RewriteFilter.next(RewriteFilter.java: 
> 58)
>        at
> com 
> .linkedin 
> .search 
> .pub 
> .stemming.impl.filter.rewrite.RewriteFilter.next(RewriteFilter.java: 
> 70)
>        at
> com 
> .linkedin 
> .search 
> .pub 
> .stemming.impl.filter.rewrite.RewriteFilter.next(RewriteFilter.java: 
> 39)
>        at org.apache.lucene.analysis.StopFilter.next(StopFilter.java: 
> 120)
>        at  
> org.apache.lucene.analysis.TokenStream.next(TokenStream.java:47)
> -- 
> View this message in context: http://www.nabble.com/Lucene-2.4-Token-Stream-error-tp20550488p20550488.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 10:57:37 2008
Return-Path: <java-user-return-37229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25997 invoked from network); 18 Nov 2008 10:57:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 10:57:35 -0000
Received: (qmail 30120 invoked by uid 500); 18 Nov 2008 10:57:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30080 invoked by uid 500); 18 Nov 2008 10:57:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30069 invoked by uid 99); 18 Nov 2008 10:57:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 02:57:35 -0800
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.77] (HELO smtp120.mail.mud.yahoo.com) (209.191.84.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Nov 2008 10:56:11 +0000
Received: (qmail 45347 invoked from network); 18 Nov 2008 10:55:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=iZ1CDOO01UtNNcC46jaC/qcxYucLVnrEv0RdNT3V3d8DDrMjkx8eN7SFZ8ExZf4kkqTFptHXTju9Excx6qZcnfIWmCLQstBgpVos57T+mUNE4s5p9dpEkffjrvrSOZZdIz1ATI8bJoxJmYurz0dj3mMsw28+TpIsnUuZfdT5NKs=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp120.mail.mud.yahoo.com with SMTP; 18 Nov 2008 10:55:52 -0000
X-YMail-OSG: ubO14ewVM1lstG4Nth3mry_hEwbPmETgg6qmGSbyArZeO4fnBqOVpKW4VzfeFp0757YnpPuhSVSb2lQx6m6G28Sg3Y11gdOayKWZX7RauYmxNHL2w1Tq.JWwL2khqX5sj2t9
X-Yahoo-Newman-Property: ymail-3
Message-ID: <020b01c9496c$39a637e0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Reopen IndexReader
Date: Tue, 18 Nov 2008 16:25:48 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I am using version 2.4. The following code throws AlreadyClosedException

        IndexReader reader = searcher.getIndexReader();
        IndexReader newReader =  reader.reopen();
        if (reader != newReader) {
            reader.close();
            boolean isCurrent = newReader.isCurrent(); //throws exception
        }

Full list of exception:
--------------------
org.apache.lucene.store.AlreadyClosedException: this Directory is closed
        at org.apache.lucene.store.Directory.ensureOpen(Directory.java:220)
        at org.apache.lucene.store.FSDirectory.list(FSDirectory.java:320)
        at 
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:533)
        at 
org.apache.lucene.index.SegmentInfos.readCurrentVersion(SegmentInfos.java:366)
        at 
org.apache.lucene.index.DirectoryIndexReader.isCurrent(DirectoryIndexReader.java:188)
        at MailIndexer.IndexSearcherEx.reOpenDB(IndexSearcherEx.java:102)

Please correct me, if i am wrong.

Regards
Ganesh

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 11:31:32 2008
Return-Path: <java-user-return-37230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33738 invoked from network); 18 Nov 2008 11:31:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 11:31:32 -0000
Received: (qmail 69192 invoked by uid 500); 18 Nov 2008 11:31:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69159 invoked by uid 500); 18 Nov 2008 11:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69148 invoked by uid 99); 18 Nov 2008 11:31:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 03:31:30 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 11:30:07 +0000
Received: by gxk3 with SMTP id 3so2120858gxk.5
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 03:29:51 -0800 (PST)
Received: by 10.90.118.19 with SMTP id q19mr3356542agc.108.1227007791145;
        Tue, 18 Nov 2008 03:29:51 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id c78sm7105007hsa.17.2008.11.18.03.29.49
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 18 Nov 2008 03:29:50 -0800 (PST)
Message-Id: <DD13D654-B8E2-4DAE-B9E7-C27DA73EEC05@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <020b01c9496c$39a637e0$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Reopen IndexReader
X-Priority: 3
Date: Tue, 18 Nov 2008 06:29:48 -0500
References: <020b01c9496c$39a637e0$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Did you create your IndexSearcher using a String or File (not  
Directory)?

If so, it sounds like you are hitting this issue (just fixed this  
morning, on 2.9-dev (trunk)):

     https://issues.apache.org/jira/browse/LUCENE-1453

The workaround is to use the Directory ctor of IndexSearcher.

Mike

Ganesh wrote:

> Hello all,
>
> I am using version 2.4. The following code throws  
> AlreadyClosedException
>
>       IndexReader reader = searcher.getIndexReader();
>       IndexReader newReader =  reader.reopen();
>       if (reader != newReader) {
>           reader.close();
>           boolean isCurrent = newReader.isCurrent(); //throws  
> exception
>       }
>
> Full list of exception:
> --------------------
> org.apache.lucene.store.AlreadyClosedException: this Directory is  
> closed
>       at org.apache.lucene.store.Directory.ensureOpen(Directory.java: 
> 220)
>       at org.apache.lucene.store.FSDirectory.list(FSDirectory.java: 
> 320)
>       at org.apache.lucene.index.SegmentInfos 
> $FindSegmentsFile.run(SegmentInfos.java:533)
>       at  
> org 
> .apache 
> .lucene.index.SegmentInfos.readCurrentVersion(SegmentInfos.java:366)
>       at  
> org 
> .apache 
> .lucene 
> .index.DirectoryIndexReader.isCurrent(DirectoryIndexReader.java:188)
>       at MailIndexer.IndexSearcherEx.reOpenDB(IndexSearcherEx.java: 
> 102)
>
> Please correct me, if i am wrong.
>
> Regards
> Ganesh
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 12:08:28 2008
Return-Path: <java-user-return-37231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40655 invoked from network); 18 Nov 2008 12:08:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 12:08:28 -0000
Received: (qmail 4128 invoked by uid 500); 18 Nov 2008 12:08:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4099 invoked by uid 500); 18 Nov 2008 12:08:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4088 invoked by uid 99); 18 Nov 2008 12:08:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 04:08:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [89.107.64.151] (HELO server1.primetide.net) (89.107.64.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 12:07:06 +0000
Received: from [192.168.69.152] (p4FD96EE7.dip.t-dialin.net [79.217.110.231])
	(authenticated bits=0)
	by server1.primetide.net (8.14.0/8.14.0) with ESMTP id mAIE86qO001032
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 15:08:06 +0100
Message-Id: <EFA4BA06-F0F4-49FE-8114-F213CAFC2F95@evenity.net>
From: Sascha Fahl <sascha@evenity.net>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: =?ISO-8859-1?Q?Transforming_german_umlaute_like_=F6,=E4,=FC,=DF_?=
 =?ISO-8859-1?Q?into_oe,_ae,_ue,_ss?=
Date: Tue, 18 Nov 2008 13:06:43 +0100
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
what is the best to transform the german umlaute =F6,=E4,=FC,=DF into =
oe, ae, =20
ue, ss during the process of analyzing?

Thanks,


Sascha Fahl
Softwareentwicklung

evenity GmbH
Zu den M=FChlen 19
D-35390 Gie=DFen

Mail: sascha@evenity.net









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 12:10:59 2008
Return-Path: <java-user-return-37232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42039 invoked from network); 18 Nov 2008 12:10:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 12:10:59 -0000
Received: (qmail 7241 invoked by uid 500); 18 Nov 2008 12:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7207 invoked by uid 500); 18 Nov 2008 12:10:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7196 invoked by uid 99); 18 Nov 2008 12:10:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 04:10:59 -0800
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.107.122] (HELO smtp139.mail.mud.yahoo.com) (209.191.107.122)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Nov 2008 12:09:34 +0000
Received: (qmail 49255 invoked from network); 18 Nov 2008 12:10:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=AunYQHt9B9Cw8lJ+O3cza9CW2ZfbnVxuOEzrr08gM2e7RLz/OztSwm22WGvDso5LEjUToNamnHwbmt/907P5uo1KakUyPAhgixLhHbFKnGaylQ01w87YS5pT8ZHQ8Axv7ioATllpZBm1rid7I5JbosEMn9eGA/qJINfc/a1NKj8=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp139.mail.mud.yahoo.com with SMTP; 18 Nov 2008 12:10:17 -0000
X-YMail-OSG: 9B3inaYVM1nDznuwrhXEyIPf9taIzVRFzr106LJklYCue6hKzS6wHs.ecC5jlryf1Hqi9ZBzuD6ON9jFTqZ_qT5rYCzy0yxeSHkYVKTh0JetNTveaWGiVozhE1u1RwZoUUOwvqDGo.sKtAY7lyRHNAXtZA--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <024501c94976$9e8b2ee0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <020b01c9496c$39a637e0$330bc30a@sv.us.sonicwall.com> <DD13D654-B8E2-4DAE-B9E7-C27DA73EEC05@mikemccandless.com>
Subject: Re: Reopen IndexReader
Date: Tue, 18 Nov 2008 17:40:12 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I am creating IndexSearcher using String, this is working fine with version 
2.3.2.
I tried by replacing Directory ctor of IndexSearcher and it is working fine 
with v2.4.

I have recently upgraded from v2.3.2 to 2.4. Is v2.4 stable and i could more 
forward with this or shall i revert back to 2.3.2?

Regards
Ganesh


----- Original Message ----- 
From: "Michael McCandless" <lucene@mikemccandless.com>
To: <java-user@lucene.apache.org>
Sent: Tuesday, November 18, 2008 4:59 PM
Subject: Re: Reopen IndexReader


>
> Did you create your IndexSearcher using a String or File (not  Directory)?
>
> If so, it sounds like you are hitting this issue (just fixed this 
> morning, on 2.9-dev (trunk)):
>
>     https://issues.apache.org/jira/browse/LUCENE-1453
>
> The workaround is to use the Directory ctor of IndexSearcher.
>
> Mike
>
> Ganesh wrote:
>
>> Hello all,
>>
>> I am using version 2.4. The following code throws  AlreadyClosedException
>>
>>       IndexReader reader = searcher.getIndexReader();
>>       IndexReader newReader =  reader.reopen();
>>       if (reader != newReader) {
>>           reader.close();
>>           boolean isCurrent = newReader.isCurrent(); //throws  exception
>>       }
>>
>> Full list of exception:
>> --------------------
>> org.apache.lucene.store.AlreadyClosedException: this Directory is  closed
>>       at org.apache.lucene.store.Directory.ensureOpen(Directory.java: 
>> 220)
>>       at org.apache.lucene.store.FSDirectory.list(FSDirectory.java: 320)
>>       at org.apache.lucene.index.SegmentInfos 
>> $FindSegmentsFile.run(SegmentInfos.java:533)
>>       at  org .apache 
>> .lucene.index.SegmentInfos.readCurrentVersion(SegmentInfos.java:366)
>>       at  org .apache .lucene 
>> .index.DirectoryIndexReader.isCurrent(DirectoryIndexReader.java:188)
>>       at MailIndexer.IndexSearcherEx.reOpenDB(IndexSearcherEx.java: 102)
>>
>> Please correct me, if i am wrong.
>>
>> Regards
>> Ganesh
>>
>> Send instant messages to your online friends 
>> http://in.messenger.yahoo.com
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 12:26:40 2008
Return-Path: <java-user-return-37233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53460 invoked from network); 18 Nov 2008 12:26:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 12:26:40 -0000
Received: (qmail 32425 invoked by uid 500); 18 Nov 2008 12:26:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31998 invoked by uid 500); 18 Nov 2008 12:26:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31987 invoked by uid 99); 18 Nov 2008 12:26:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 04:26:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.237.170.35] (HELO mzex01.healy-hudson.com) (217.237.170.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 12:25:19 +0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.4325
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Subject: =?UTF-8?Q?AW:_Transforming_german_umlaute_like_=C3=B6=2C=C3=A4=2C=C3=BC?=
	=?UTF-8?Q?=2C=C3=9F_into_oe=2C_ae=2C_ue=2C_ss?=
Date: Tue, 18 Nov 2008 13:25:52 +0100
Message-ID: <D7206503EB5BE94497458AF4FE4AE8ABD1F004@owamz.healy-hudson.com>
In-Reply-To: <EFA4BA06-F0F4-49FE-8114-F213CAFC2F95@evenity.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: =?UTF-8?Q?Transforming_german_umlaute_like_=C3=B6?=
	=?UTF-8?Q?=2C=C3=A4=2C=C3=BC=2C=C3=9F_into_oe=2C_ae=2C_ue=2C_ss?=
thread-index: AclJdlgzcxWBa7OLSWSQqBOHJN6j1QAASPFg
References: <EFA4BA06-F0F4-49FE-8114-F213CAFC2F95@evenity.net>
From: "Uwe Goetzke" <uwe.goetzke@healy-hudson.com>
To: <java-user@lucene.apache.org>
CC: <sascha@evenity.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Use ISOLatin1AccentFilter, although it is not perfect...
So I made ISOLatin2AccentFilter for me and changed this method.
We use our own analysers, so you would use something like this

		result =3D new org.apache.lucene.analysis.WhitespaceTokenizer(reader);
		result =3D new ISOLatin2AccentFilter(result);
		result =3D new org.apache.lucene.analysis.LowerCaseFilter(result);


* To replace accented characters in a String by unaccented equivalents.
	 */
	public final static String removeAccents(String input) {
		final StringBuffer output =3D new StringBuffer();
		for (int i =3D 0; i < input.length(); i++) {
			switch (input.charAt(i)) {
				case '\u00C0' : // =C3=80
				case '\u00C1' : // =C3=81
				case '\u00C2' : // =C3=82
				case '\u00C3' : // =C3=83
				case '\u00C5' : // =C3=85
					output.append("A");
					break;
				case '\u00C4' : // =C3=84
				case '\u00C6' : // =C3=86
					output.append("AE");
					break;
				case '\u00C7' : // =C3=87
					output.append("C");
					break;
				case '\u00C8' : // =C3=88
				case '\u00C9' : // =C3=89
				case '\u00CA' : // =C3=8A
				case '\u00CB' : // =C3=8B
					output.append("E");
					break;
				case '\u00CC' : // =C3=8C
				case '\u00CD' : // =C3=8D
				case '\u00CE' : // =C3=8E
				case '\u00CF' : // =C3=8F
					output.append("I");
					break;
				case '\u00D0' : // =C3=90
					output.append("D");
					break;
				case '\u00D1' : // =C3=91
					output.append("N");
					break;
				case '\u00D2' : // =C3=92
				case '\u00D3' : // =C3=93
				case '\u00D4' : // =C3=94
				case '\u00D5' : // =C3=95
				case '\u00D8' : // =C3=98
					output.append("O");
					break;
				case '\u00D6' : // =C3=96
				case '\u0152' : // =C5=92
					output.append("OE");
					break;
				case '\u00DE' : // =C3=9E
					output.append("TH");
					break;
				case '\u00D9' : // =C3=99
				case '\u00DA' : // =C3=9A
				case '\u00DB' : // =C3=9B
					output.append("U");
					break;
				case '\u00DC' : // =C3=9C
					output.append("UE");
					break;
				case '\u00DD' : // =C3=9D
				case '\u0178' : // =C5=B8
					output.append("Y");
					break;
				case '\u00E0' : // =C3=A0
				case '\u00E1' : // =C3=A1
				case '\u00E2' : // =C3=A2
				case '\u00E3' : // =C3=A3
				case '\u00E5' : // =C3=A5
					output.append("a");
					break;
				case '\u00E4' : // =C3=A4
				case '\u00E6' : // =C3=A6
					output.append("ae");
					break;
				case '\u00E7' : // =C3=A7
					output.append("c");
					break;
				case '\u00E8' : // =C3=A8
				case '\u00E9' : // =C3=A9
				case '\u00EA' : // =C3=AA
				case '\u00EB' : // =C3=AB
					output.append("e");
					break;
				case '\u00EC' : // =C3=AC
				case '\u00ED' : // =C3=AD
				case '\u00EE' : // =C3=AE
				case '\u00EF' : // =C3=AF
					output.append("i");
					break;
				case '\u00F0' : // =C3=B0
					output.append("d");
					break;
				case '\u00F1' : // =C3=B1
					output.append("n");
					break;
				case '\u00F2' : // =C3=B2
				case '\u00F3' : // =C3=B3
				case '\u00F4' : // =C3=B4
				case '\u00F5' : // =C3=B5
				case '\u00F8' : // =C3=B8
					output.append("o");
					break;
				case '\u00F6' : // =C3=B6
				case '\u0153' : // =C5=93
					output.append("oe");
					break;
				case '\u00DF' : // =C3=9F
					output.append("ss");
					break;
				case '\u00FE' : // =C3=BE
					output.append("th");
					break;
				case '\u00F9' : // =C3=B9
				case '\u00FA' : // =C3=BA
				case '\u00FB' : // =C3=BB
					output.append("u");
					break;
				case '\u00FC' : // =C3=BC
					output.append("ue");
					break;
				case '\u00FD' : // =C3=BD
				case '\u00FF' : // =C3=BF
					output.append("y");
					break;
				default :
					output.append(input.charAt(i));
					break;
			}
		}
		return output.toString();
	}
}

Regards

Uwe Goetzke
Leiter Produktentwicklung=20
Healy Hudson GmbH=20
Procurement & Retail Solutions  =20


-----Urspr=C3=BCngliche Nachricht-----
Von: Sascha Fahl [mailto:sascha@evenity.net]=20
Gesendet: Dienstag, 18. November 2008 13:07
An: java-user@lucene.apache.org
Betreff: Transforming german umlaute like =C3=B6,=C3=A4,=C3=BC,=C3=9F =
into oe, ae, ue, ss

Hi,
what is the best to transform the german umlaute =
=C3=B6,=C3=A4,=C3=BC,=C3=9F into oe, ae, =20
ue, ss during the process of analyzing?

Thanks,


Sascha Fahl
Softwareentwicklung

evenity GmbH
Zu den M=C3=BChlen 19
D-35390 Gie=C3=9Fen

Mail: sascha@evenity.net









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


-----------------------------------------------------------------------
Healy Hudson GmbH - D-55252 Mainz Kastel
Gesch=C3=A4ftsf=C3=BChrer Christian Konh=C3=A4user - Amtsgericht =
Wiesbaden HRB 12076

Diese Email ist vertraulich. Wenn Sie nicht der beabsichtigte =
Empf=C3=A4nger sind, d=C3=BCrfen Sie die Informationen nicht offen legen =
oder benutzen. Wenn Sie diese Email durch einen Fehler bekommen haben, =
teilen Sie uns dies bitte umgehend mit, indem Sie diese Email an den =
Absender zur=C3=BCckschicken. Bitte l=C3=B6schen Sie danach diese Email.
This email is confidential. If you are not the intended recipient, you =
must not disclose or use this information contained in it. If you have =
received this email in error please tell us immediately by return email =
and delete the document.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 12:53:06 2008
Return-Path: <java-user-return-37234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63165 invoked from network); 18 Nov 2008 12:53:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 12:53:06 -0000
Received: (qmail 66999 invoked by uid 500); 18 Nov 2008 12:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66628 invoked by uid 500); 18 Nov 2008 12:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66617 invoked by uid 99); 18 Nov 2008 12:53:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 04:53:06 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 12:51:44 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1128825ywj.5
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 04:52:17 -0800 (PST)
Received: by 10.90.103.13 with SMTP id a13mr3448370agc.12.1227012735757;
        Tue, 18 Nov 2008 04:52:15 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 52sm7182889hsf.1.2008.11.18.04.52.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 18 Nov 2008 04:52:14 -0800 (PST)
Message-Id: <CA28B827-9D8D-476B-8D35-5132C70E4A4E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <024501c94976$9e8b2ee0$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Reopen IndexReader
X-Priority: 3
Date: Tue, 18 Nov 2008 07:52:11 -0500
References: <020b01c9496c$39a637e0$330bc30a@sv.us.sonicwall.com> <DD13D654-B8E2-4DAE-B9E7-C27DA73EEC05@mikemccandless.com> <024501c94976$9e8b2ee0$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Well... we certainly do our best to have each release be stable, but  
we do make mistakes, so you'll have to use your own judgement on when  
to upgrade.

However, it's only through users like yourself upgrading that we then  
find & fix any uncaught issues in each new release.

Mike

Ganesh wrote:

> I am creating IndexSearcher using String, this is working fine with  
> version 2.3.2.
> I tried by replacing Directory ctor of IndexSearcher and it is  
> working fine with v2.4.
>
> I have recently upgraded from v2.3.2 to 2.4. Is v2.4 stable and i  
> could more forward with this or shall i revert back to 2.3.2?
>
> Regards
> Ganesh
>
>
> ----- Original Message ----- From: "Michael McCandless" <lucene@mikemccandless.com 
> >
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, November 18, 2008 4:59 PM
> Subject: Re: Reopen IndexReader
>
>
>>
>> Did you create your IndexSearcher using a String or File (not   
>> Directory)?
>>
>> If so, it sounds like you are hitting this issue (just fixed this  
>> morning, on 2.9-dev (trunk)):
>>
>>    https://issues.apache.org/jira/browse/LUCENE-1453
>>
>> The workaround is to use the Directory ctor of IndexSearcher.
>>
>> Mike
>>
>> Ganesh wrote:
>>
>>> Hello all,
>>>
>>> I am using version 2.4. The following code throws   
>>> AlreadyClosedException
>>>
>>>      IndexReader reader = searcher.getIndexReader();
>>>      IndexReader newReader =  reader.reopen();
>>>      if (reader != newReader) {
>>>          reader.close();
>>>          boolean isCurrent = newReader.isCurrent(); //throws   
>>> exception
>>>      }
>>>
>>> Full list of exception:
>>> --------------------
>>> org.apache.lucene.store.AlreadyClosedException: this Directory is   
>>> closed
>>>      at  
>>> org.apache.lucene.store.Directory.ensureOpen(Directory.java: 220)
>>>      at org.apache.lucene.store.FSDirectory.list(FSDirectory.java:  
>>> 320)
>>>      at org.apache.lucene.index.SegmentInfos  
>>> $FindSegmentsFile.run(SegmentInfos.java:533)
>>>      at   
>>> org 
>>>  .apache 
>>>  .lucene.index.SegmentInfos.readCurrentVersion(SegmentInfos.java: 
>>> 366)
>>>      at   
>>> org 
>>>  .apache 
>>>  .lucene 
>>>  .index.DirectoryIndexReader.isCurrent(DirectoryIndexReader.java: 
>>> 188)
>>>      at MailIndexer.IndexSearcherEx.reOpenDB(IndexSearcherEx.java:  
>>> 102)
>>>
>>> Please correct me, if i am wrong.
>>>
>>> Regards
>>> Ganesh
>>>
>>> Send instant messages to your online friends http://in.messenger.yahoo.com
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 13:13:29 2008
Return-Path: <java-user-return-37235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68857 invoked from network); 18 Nov 2008 13:13:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 13:13:27 -0000
Received: (qmail 92419 invoked by uid 500); 18 Nov 2008 13:13:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92391 invoked by uid 500); 18 Nov 2008 13:13:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92380 invoked by uid 99); 18 Nov 2008 13:13:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 05:13:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 13:12:05 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id 1CA9D62D87
	for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 22:11:03 +0900 (JST)
Message-ID: <4922BEE7.6030703@r.email.ne.jp>
Date: Tue, 18 Nov 2008 22:11:03 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: Transforming german umlaute like =?UTF-8?B?w7Ysw6Qsw7wsw58=?=
 =?UTF-8?B?IGludG8gb2UsIGFlLCB1ZSwgc3M=?=
References: <EFA4BA06-F0F4-49FE-8114-F213CAFC2F95@evenity.net> <D7206503EB5BE94497458AF4FE4AE8ABD1F004@owamz.healy-hudson.com>
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8ABD1F004@owamz.healy-hudson.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Uwe Goetzke wrote:
 > Use ISOLatin1AccentFilter, although it is not perfect...
 > So I made ISOLatin2AccentFilter for me and changed this method.

Or use CharFilter library. It is for Solr as of now, though.

See:
https://issues.apache.org/jira/secure/attachment/12392639/character-normalization.JPG
https://issues.apache.org/jira/browse/SOLR-822

Koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 13:19:35 2008
Return-Path: <java-user-return-37236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70402 invoked from network); 18 Nov 2008 13:19:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 13:19:35 -0000
Received: (qmail 2810 invoked by uid 500); 18 Nov 2008 13:19:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2789 invoked by uid 500); 18 Nov 2008 13:19:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1873 invoked by uid 99); 18 Nov 2008 13:19:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 05:19:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [89.107.64.151] (HELO server1.primetide.net) (89.107.64.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 13:18:03 +0000
Received: from [192.168.69.152] (p4FD96EE7.dip.t-dialin.net [79.217.110.231])
	(authenticated bits=0)
	by server1.primetide.net (8.14.0/8.14.0) with ESMTP id mAIFJ4qb001574
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 16:19:04 +0100
Message-Id: <2DE77A3C-1146-45E8-ADFB-EFCA1109E92F@evenity.net>
From: Sascha Fahl <sascha@evenity.net>
To: java-user@lucene.apache.org
In-Reply-To: <4922BEE7.6030703@r.email.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: =?ISO-8859-1?Q?Re:_AW:_Transforming_german_umlaute_like_=F6,=E4,?=
 =?ISO-8859-1?Q?=FC,=DF_into_oe,_ae,_ue,_ss?=
Date: Tue, 18 Nov 2008 14:17:41 +0100
References: <EFA4BA06-F0F4-49FE-8114-F213CAFC2F95@evenity.net> <D7206503EB5BE94497458AF4FE4AE8ABD1F004@owamz.healy-hudson.com> <4922BEE7.6030703@r.email.ne.jp>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Where do I get the CharFilter library? I'm using Lucene, not Solr.

Thanks,
Sascha

Am 18.11.2008 um 14:11 schrieb Koji Sekiguchi:

> Uwe Goetzke wrote:
> > Use ISOLatin1AccentFilter, although it is not perfect...
> > So I made ISOLatin2AccentFilter for me and changed this method.
>
> Or use CharFilter library. It is for Solr as of now, though.
>
> See:
> =
https://issues.apache.org/jira/secure/attachment/12392639/character-normal=
ization.JPG
> https://issues.apache.org/jira/browse/SOLR-822
>
> Koji
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

Sascha Fahl
Softwareentwicklung

evenity GmbH
Zu den M=FChlen 19
D-35390 Gie=DFen

Mail: sascha@evenity.net









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 14:16:19 2008
Return-Path: <java-user-return-37237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10149 invoked from network); 18 Nov 2008 14:16:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 14:16:18 -0000
Received: (qmail 83786 invoked by uid 500); 18 Nov 2008 14:16:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82795 invoked by uid 500); 18 Nov 2008 14:16:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82784 invoked by uid 99); 18 Nov 2008 14:16:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 06:16:18 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.163.178.137] (HELO web34305.mail.mud.yahoo.com) (66.163.178.137)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Nov 2008 14:14:54 +0000
Received: (qmail 96729 invoked by uid 60001); 18 Nov 2008 14:15:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=npcWs1yUFGblxOg84wmUvF2VUnnToA8UNW1tYCJKAHPD6+xHTIzt0xf+MkP/NV1k8OI3P8w67KG+7Nq/iYXRq0ZxNeUEP/e3fkygOtWqWqFnZe1YF6gyyPHZDRBX9ScaYKfAjtCwLap50xZM9L7lf1HBeI2GkPeQbQ0VOj+ivTk=;
X-YMail-OSG: 0IsZMzwVM1nyk6oP2V0meckNy3gO.y4YY8icv1dBVu2sWLd.5OsJS6BqAZMS4NnTufB4LH8td2P4sWNMEjdMjtOKljXjJLO3.fKcEpq990943EDWBz2eTz8RgZKhPqaxEnG0KXYSEyhzHSB3C5RfYioxa0Zlwecon8PCEzZBMZ7t8F0kmBXjPNYvLJA-
Received: from [163.188.81.28] by web34305.mail.mud.yahoo.com via HTTP; Tue, 18 Nov 2008 06:15:37 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <776612.75162.qm@web34306.mail.mud.yahoo.com>  <op.ukq8l2zuoftp72@melkor>  <950196.72678.qm@web34302.mail.mud.yahoo.com>  <6e3ae6310811171707m4e32e199y9d52d620c5cd71a9@mail.gmail.com>  <606098.66609.qm@web34308.mail.mud.yahoo.com> <6e3ae6310811172113sd6a9132x2dc088393a05c377@mail.gmail.com>
Date: Tue, 18 Nov 2008 06:15:37 -0800 (PST)
From: Zhibin Mai <zbmai@yahoo.com>
Subject: Re: how to estimate how much memory is required to support the large index search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-77933169-1227017737=:96363"
Message-ID: <688311.96363.qm@web34305.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-77933169-1227017737=:96363
Content-Type: text/plain; charset=us-ascii

You are right.

Cheers,

Zhibin




________________________________
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, November 17, 2008 11:13:44 PM
Subject: Re: how to estimate how much memory is required to support the large index search

So looks like you are not really doing much sorting? This index divisor
affects reader.terms(), but not too much with sorting.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) got
2.6 Million Euro funding!


On Mon, Nov 17, 2008 at 6:21 PM, Zhibin Mai <zbmai@yahoo.com> wrote:

> It is a cache tunning setting in IndexReader. It can be set via method
> setTermInfosIndexDivisor(int).
>
> Thanks,
>
> Zhibin
>
>
>
>
> ________________________________
> From: Chris Lu <chris.lu@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, November 17, 2008 7:07:21 PM
> Subject: Re: how to estimate how much memory is required to support the
> large index search
>
> Calculation looks right. But what's the "Index divisor" that you mentioned?
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
>
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer, a shopping comparison site, (anonymous per request) got
> 2.6 Million Euro funding!
>
> On Mon, Nov 17, 2008 at 5:00 PM, Zhibin Mai <zbmai@yahoo.com> wrote:
>
> > Aleksander,
> >
> > I figured it out that most of heap was consumed by the Term cache. In our
> > case, the index has 233 millions of terms and 6.4 millions of them were
> > loaded into the cache when we did the search. I roughly did a calculation
> > that each term will need how much memory, it is about
> > 16 bytes for Term Object + 32 bytes for TermInfo Object + 24 bytes for
> > String Object for term text + 2 * length(Char[]) for term text.
> >
> > In our case, the average length of term text is 25 characters, that means
> > each term needs at least 122 bytes. The cache for 6.4 millions of terms
> > needs 6.4 * 122 = 780MB. Plus 200MB for caching norm, the RAM for cache
> is
> > larger than 980MB. We work around the cache issue for Terms by setting
> index
> > divisor of the IndexReader to a higher value. Actually, the performance
> of
> > search is good even using index divisor as 4.
> >
> > Thanks,
> >
> > Zhibin
> >
> >
> >
> >
> > ________________________________
> > From: Aleksander M. Stensby <aleksander.stensby@integrasco.no>
> > To: java-user@lucene.apache.org
> > Sent: Monday, November 17, 2008 2:31:04 AM
> > Subject: Re: how to estimate how much memory is required to support the
> > large index search
> >
> > One major factor that may result in heap space problems is if you are
> doing
> > any form of sorting when searching. Do you have any form of default sort
> in
> > your application? Also, the type of field used for sorting is important
> with
> > regard to memory consumption.
> >
> > This issue has been discussed before on the list. (You can search the
> > archive for sorting and memory consumption.)
> >
> > - Aleksander
> >
> > On Sun, 16 Nov 2008 14:36:36 +0100, Zhibin Mai <zbmai@yahoo.com> wrote:
> >
> > > Hello,
> > >
> > > I
> > > am a beginner on using lucene. We developed an application to
> > > create and search index using lucene 2.3.1. We would like to know how
> > > to estimate how much memory is required to support
> > > the index search given an index.
> > >
> > > Recently,
> > > the size of the index has reached to about 200GB with 197M of documents
> > > and 223M of terms. Our application starts having intermittent
> > > "OutOfMemoryError: Java heap space" when we use
> > > it to search the index. We use JProfiler to get the following memory
> > allocation when we do one keyword search:
> > >
> > > char[]                                                        332MB
> > > org.apache.lucene.index.TermInfo            194MB
> > > java.lang.String                                        146MB
> > > org.apache.lucene.index.Term                99,823KB
> > > org.apache.lucene.index.Term                24,956KB
> > > org.apache.lucene.index.TermInfo[]        24,956KB
> > >
> > > byte[]                                                    188MB
> > > long[]                                                    49,912KB
> > >
> > > The memory allocation for the first 6 types of objects does not change
> > when we change the search criteria. Could you please give me some advice
> > what major factors will affect the memory allocation
> > > and how those factors will affect the memory usage precisely on search?
> > Is it possible to reduce the memory usage on search?
> > >
> > >
> > > Thank you,
> > >
> > >
> > > Zhibin
> > >
> > >
> > >
> >
> >
> >
> > --Aleksander M. Stensby
> > Senior software developer
> > Integrasco A/S
> > www.integrasco.no
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
>
>
>
>
>



      
--0-77933169-1227017737=:96363--

From java-user-return-37238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 14:36:41 2008
Return-Path: <java-user-return-37238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25725 invoked from network); 18 Nov 2008 14:36:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 14:36:41 -0000
Received: (qmail 19741 invoked by uid 500); 18 Nov 2008 14:36:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19715 invoked by uid 500); 18 Nov 2008 14:36:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19704 invoked by uid 99); 18 Nov 2008 14:36:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 06:36:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 14:35:19 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id AF4B467CD0
	for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 23:36:03 +0900 (JST)
Message-ID: <4922D2D3.8010703@r.email.ne.jp>
Date: Tue, 18 Nov 2008 23:36:03 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.17 (Macintosh/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: Transforming german umlaute like =?ISO-8859-1?Q?=F6=2C=E4?=
 =?ISO-8859-1?Q?=2C=FC=2C=DF_into_oe=2C_ae=2C_ue=2C_ss?=
References: <EFA4BA06-F0F4-49FE-8114-F213CAFC2F95@evenity.net> <D7206503EB5BE94497458AF4FE4AE8ABD1F004@owamz.healy-hudson.com> <4922BEE7.6030703@r.email.ne.jp> <2DE77A3C-1146-45E8-ADFB-EFCA1109E92F@evenity.net>
In-Reply-To: <2DE77A3C-1146-45E8-ADFB-EFCA1109E92F@evenity.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sascha Fahl wrote:
> Where do I get the CharFilter library? I'm using Lucene, not Solr.
>
> Thanks,
> Sascha
CharFilter is included in recent Solr nightly build.
It is not OOTB solution for Lucene now, sorry.
If I have time, I will make it for Lucene in this weekend.

Koji



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 14:52:17 2008
Return-Path: <java-user-return-37239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34082 invoked from network); 18 Nov 2008 14:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 14:52:17 -0000
Received: (qmail 59661 invoked by uid 500); 18 Nov 2008 14:52:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59634 invoked by uid 500); 18 Nov 2008 14:52:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59623 invoked by uid 99); 18 Nov 2008 14:52:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 06:52:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 14:50:54 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: =?iso-8859-1?Q?RE=3A_Transforming_german_umlaute_like_=F6=2C=E4=2C=FC?=
	=?iso-8859-1?Q?=2C=DF_into_oe=2C_ae=2C_ue=2C_ss?=
Date: Tue, 18 Nov 2008 09:51:15 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43032BD67A@mail3.basistech.net>
In-Reply-To: <D7206503EB5BE94497458AF4FE4AE8ABD1F004@owamz.healy-hudson.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: =?iso-8859-1?Q?Transforming_german_umlaute_like_=F6=2C=E4=2C=FC=2C=DF_i?=
	=?iso-8859-1?Q?nto_oe=2C_ae=2C_ue=2C_ss?=
Thread-Index: AclJdlgzcxWBa7OLSWSQqBOHJN6j1QAASPFgAAUY5HA=
References: <EFA4BA06-F0F4-49FE-8114-F213CAFC2F95@evenity.net> <D7206503EB5BE94497458AF4FE4AE8ABD1F004@owamz.healy-hudson.com>
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
Cc: <sascha@evenity.net>
X-Virus-Checked: Checked by ClamAV on apache.org

Naming this class to include "Latin2" may be misleading.
Latin2 means ISO-8859-2 character set.

http://en.wikipedia.org/wiki/ISO_8859-2


> From: Uwe Goetzke [mailto:uwe.goetzke@healy-hudson.com]=20
> Sent: Tuesday, November 18, 2008 7:26 AM
> To: java-user@lucene.apache.org
> Cc: sascha@evenity.net
> Subject: AW: Transforming german umlaute like =F6,=E4,=FC,=DF into=20
> oe, ae, ue, ss
>=20
> Use ISOLatin1AccentFilter, although it is not perfect...
> So I made ISOLatin2AccentFilter for me and changed this method.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 15:13:38 2008
Return-Path: <java-user-return-37240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59532 invoked from network); 18 Nov 2008 15:13:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 15:13:38 -0000
Received: (qmail 93979 invoked by uid 500); 18 Nov 2008 15:13:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93948 invoked by uid 500); 18 Nov 2008 15:13:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93937 invoked by uid 99); 18 Nov 2008 15:13:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 07:13:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.167.42.127] (HELO cs.joensuu.fi) (193.167.42.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 15:12:17 +0000
Received: from cs.joensuu.fi (localhost [127.0.0.1])
	by cs.joensuu.fi (8.13.8/8.13.0) with ESMTP id mAIF5W2X005391
	for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 17:05:32 +0200 (EET)
Received: from localhost (pnykyri@localhost)
	by cs.joensuu.fi (8.13.8/8.13.0/Submit) with ESMTP id mAIF5Wjk005388
	for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 17:05:32 +0200 (EET)
Date: Tue, 18 Nov 2008 17:05:32 +0200 (EET)
From: Pekka Nykyri <pnykyri@cs.joensuu.fi>
To: java-user@lucene.apache.org
Subject: Special characters prevent entity being indexed
Message-ID: <Pine.GSO.4.64.0811181704500.1679@cs.joensuu.fi>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-758783491-1227020732=:1679"
X-Virus-Checked: Checked by ClamAV on apache.org

---559023410-758783491-1227020732=:1679
Content-Type: TEXT/PLAIN; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: QUOTED-PRINTABLE

Hi!

I'm having problems with entities including special characters (Spanish=20
language) not getting indexed.

I haven't been able to find the the reason why some entities get indexed=20
while some don't.

I have 3 fields that (currently) hold the same value. The value for the=20
fields is example "=A1Fant=E1stico!- blaaba". Then when I change ONE of the=
=20
three values to "=A1Fant=E1stico! - blaaba", the entity gets indexed. So=20
chanching only one field makes it to index.

But the bigger problem with this is, that I have almost (other fields are=
=20
almost similar and I don't think they cause the problem) similar entity,=20
with exactly the same three "=A1Fant=E1stico!- blaaba" -fields and it gets=
=20
indexed normally. Even though the "critical" fields are exactly the same.

And also all entities where three fields start with "upside down ?"-mark=20
doesn't get indexed.

I'm really confused with the problem because I don't seem to be able to=20
find any logic some entities not being indexed even though they are=20
similar to some other. And changing only one value of the three makes it=20
index.

Sorry for a really messy message but I just can't explain it more clearly=
=20
now.

Thanks in advance,
pn

---559023410-758783491-1227020732=:1679
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
---559023410-758783491-1227020732=:1679--

From java-user-return-37241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 16:27:40 2008
Return-Path: <java-user-return-37241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85692 invoked from network); 18 Nov 2008 16:27:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 16:27:40 -0000
Received: (qmail 30046 invoked by uid 500); 18 Nov 2008 16:27:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29609 invoked by uid 500); 18 Nov 2008 16:27:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29598 invoked by uid 99); 18 Nov 2008 16:27:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 08:27:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 216.239.58.190 as permitted sender)
Received: from [216.239.58.190] (HELO gv-out-0910.google.com) (216.239.58.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 16:26:19 +0000
Received: by gv-out-0910.google.com with SMTP id p33so703781gvf.23
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 08:27:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=vEAkW3xdU3i668FxSzyVKzPdvY6R+2e/DTlO5Uwhyn4=;
        b=TTks7pWeEACs6YVduNel0xhA2n4G6CyKgrfPPFJSC6AcLbqFxZHGTJ5w+svNTVGFrg
         rcUPtYA3LOjnVFrjJYe9UAlua4j6ozGbiwClEQw/+lx7RLaKcEJoN+qyFbFMFTihUSGF
         8RMhiP2zTeNFr7EgQjxv7YrEZz1ttPl4znFNQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=RLgluLT1kk4d6ZU9X1E9a8LHCcEuuYi7ZdsG34UYz685LbYmu5Vj1sJx7Ey+mt3k9j
         ACkfyRH+Uz2ilq/SY9yui6axWQzZ5GtymvJJ+Z8g/NHMabhNButqFEoxOAUzlNwsIlnw
         si2nuXFgRWntNSkvvK3LIy7KdJv2ImJc42KDg=
Received: by 10.86.28.2 with SMTP id b2mr91111fgb.54.1227025622867;
        Tue, 18 Nov 2008 08:27:02 -0800 (PST)
Received: by 10.86.98.8 with HTTP; Tue, 18 Nov 2008 08:27:02 -0800 (PST)
Message-ID: <359a92830811180827tbe72111w49d0dcc17ceeeaa5@mail.gmail.com>
Date: Tue, 18 Nov 2008 11:27:02 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Special characters prevent entity being indexed
In-Reply-To: <Pine.GSO.4.64.0811181704500.1679@cs.joensuu.fi>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_46068_16140943.1227025622860"
References: <Pine.GSO.4.64.0811181704500.1679@cs.joensuu.fi>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_46068_16140943.1227025622860
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

What analyzer are you using at index and search time? Typical problems
include:
using an analyzer that doesn't understand accented chars (StandardAnalyzer
for instance)
using a different anlyzer during search and index.

Search the user list for "accent" and you'll find this kind of problem
discussed,
and if that doesn't help we need to know what analyzers you are using and
what behavior you really want. Typically, for instance, *requiring* a user
to
type the upside-down exclamation point to get a match on this field would
be considered incorrect.

Also, you'd be helped a lot be getting a copy of Luke and examining your
index
to see exactly what's been indexed, it'll reveal a lot.

Best
Erick

On Tue, Nov 18, 2008 at 10:05 AM, Pekka Nykyri <pnykyri@cs.joensuu.fi>wrote=
:

> Hi!
>
> I'm having problems with entities including special characters (Spanish
> language) not getting indexed.
>
> I haven't been able to find the the reason why some entities get indexed
> while some don't.
>
> I have 3 fields that (currently) hold the same value. The value for the
> fields is example "=A1Fant=E1stico!- blaaba". Then when I change ONE of t=
he
> three values to "=A1Fant=E1stico! - blaaba", the entity gets indexed. So
> chanching only one field makes it to index.
>
> But the bigger problem with this is, that I have almost (other fields are
> almost similar and I don't think they cause the problem) similar entity,
> with exactly the same three "=A1Fant=E1stico!- blaaba" -fields and it get=
s
> indexed normally. Even though the "critical" fields are exactly the same.
>
> And also all entities where three fields start with "upside down ?"-mark
> doesn't get indexed.
>
> I'm really confused with the problem because I don't seem to be able to
> find any logic some entities not being indexed even though they are simil=
ar
> to some other. And changing only one value of the three makes it index.
>
> Sorry for a really messy message but I just can't explain it more clearly
> now.
>
> Thanks in advance,
> pn
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------=_Part_46068_16140943.1227025622860--

From java-user-return-37242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 17:04:45 2008
Return-Path: <java-user-return-37242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96161 invoked from network); 18 Nov 2008 17:04:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 17:04:44 -0000
Received: (qmail 85016 invoked by uid 500); 18 Nov 2008 17:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84997 invoked by uid 500); 18 Nov 2008 17:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 83467 invoked by uid 99); 18 Nov 2008 17:03:30 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ngvinny@gmail.com designates 72.14.220.154 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=JzUXGcMLGTJgzKES4+WpWlq5zsJswscUWPmpmuEYJqg=;
        b=tNd1WZ/Ed2BE+R8KznrmbcUP7wChdgZC044rRjm8dj/B9a4YWmMjc1FvCSBVH2XLQ6
         ren2oay5wxmuXR7tpAHypg5b87eMbrgf76MZ0DpiCOKs7PzJXirV3FXi6Xz668kkJm2z
         eKztI5Rusx8J++7bRkCl8DBmMZj9q2DHpOsFQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=K4IicGqwCaBO1s3ZwxJOwwbjkuQpiLFkX5de6fgjdizMFG8d1tIObHZbiJfWVoUrrg
         gj1mb4WHwg7uB+3MQaXkwEcKFWac8roEDPSzCn98BcO7V+b6J/xYdZez3B+F2SRvEWxv
         ZAY0HocPslZb32jDBNql499vp991hQAHJ2gf4=
Message-ID: <5db95abe0811180902i3d7fcd21h2ed18efcb2239ad1@mail.gmail.com>
Date: Tue, 18 Nov 2008 17:02:48 +0000
From: "Ng Vinny" <ngvinny@gmail.com>
To: java-user@lucene.apache.org
Subject: compare scores across queries
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_70456_15713015.1227027768915"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_70456_15713015.1227027768915
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I am wondering if the raw scores obtained from HitCollector can be used to
compare relevance of documents to different queries?

E.g.  two  phrase queries are issued : (PQ1: "Barack Obama"  and PQ2:  "John
McCain"). if a document (doc1) belongs to the result sets of both queries
and has the raw score of 5 for PQ1 and 3 for PQ2, can  I say that doc1 is
more relevant to "Barack Obama" than to "John McCain"?

There have been some previous discussions about this at [1,2]. On the other
hand, the javadoc of the Similarity class says "*queryNorm(q) * is a
normalizing factor used to make scores between queries comparable. This
factor does not affect document ranking (since all ranked documents are
multiplied by the same factor), but rather just attempts to make scores from
different queries (or even different indexes) comparable. "

Please advise.

Thanks.
Ng.

[1] http://thread.gmane.org/gmane.comp.jakarta.lucene.user/10760/focus=10810
[2]
http://www.gossamer-threads.com/lists/lucene/java-user/35051?search_string=compare%20score%20across%20queries;#35051
[3]
http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/Similarity.html

------=_Part_70456_15713015.1227027768915--

From java-user-return-37243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 17:37:50 2008
Return-Path: <java-user-return-37243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17867 invoked from network); 18 Nov 2008 17:37:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 17:37:50 -0000
Received: (qmail 47492 invoked by uid 500); 18 Nov 2008 17:37:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47452 invoked by uid 500); 18 Nov 2008 17:37:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47441 invoked by uid 99); 18 Nov 2008 17:37:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 09:37:51 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of easy.lin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 17:36:28 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1526785nfd.15
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 09:37:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=NUA4v91fPkupsdIh4yYWH8x+qBoiwrePCh9iK2p09pw=;
        b=czP7D1hRrkVhf1KqBYX44go9FJjOo+YAPcT8BOIAuc7tDVy3Czhgr+yxN/iBZvXglK
         KgP4oVpMQLwpbz3Qj5eJlfZSAXHtLZQdoWXvG8qJ/2Ezn/v5ySOHQMUfVRZMqlNIMuBD
         W/2kj9hTeY+Hgxl2czb3jhjQ8/cvUcKJIGYec=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=gZ8l+y2lsn3Fe6z75lArI9DxHCXHVM8S3iPRXt0jRjFInL8VZuerByGdJUf2Wx4dbG
         iOjBIuZ+RP5cS+bku50971xFRzBkWMGSosyT6sUw1q00qqWxh5t+06+TTXrg8krwV3jl
         jYRgUkNDNTLSMBSKfW9SIOaOvZQC5YpPi4AZE=
Received: by 10.86.95.20 with SMTP id s20mr145779fgb.39.1227029830531;
        Tue, 18 Nov 2008 09:37:10 -0800 (PST)
Received: by 10.86.86.16 with HTTP; Tue, 18 Nov 2008 09:37:10 -0800 (PST)
Message-ID: <fba082560811180937h3a68960ak9018cd90cf1e3760@mail.gmail.com>
Date: Tue, 18 Nov 2008 18:37:10 +0100
From: "T. H. Lin" <easy.lin@gmail.com>
To: java-user@lucene.apache.org
Subject: can I set Boost to the term while indexing?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44992_22837623.1227029830545"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_44992_22837623.1227029830545
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I would like to store a set of keywords in a single field of a document.

for example I have now three keywords: "One", "Two" and "Three"
and I am going to add them into a document.

At first, is this code correct?
/****************************************************************/
String[] keyword = new String[]{"One", "Two", "Three"};
for (int i = 0; i < keyword.length; i++) {
   Field f = new Field("field_name",
                            keyword[i],
                            Field.Store.NO,
                            Field.Index.UN_TOKENIZED,
                            TermVector.YES);
   doc.add(f);
}
indexWriter.addDocument(doc);
/***************************************************************/

when searching, We can set Boost for a query term.

the question is...
Can I set Boost for every keyword/term while indexing?

from the example above. I may set those keywords. i.e. "One", "Two" and
"Three", with different "Weight/Boost/Relavance..." while indexing.
and the same "term" may have different "Weight/Boost/Relavance..." in
different document.

can I do this?

thanks. :-)

------=_Part_44992_22837623.1227029830545--

From java-user-return-37244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 17:49:28 2008
Return-Path: <java-user-return-37244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25005 invoked from network); 18 Nov 2008 17:49:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 17:49:27 -0000
Received: (qmail 58558 invoked by uid 500); 18 Nov 2008 17:49:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58522 invoked by uid 500); 18 Nov 2008 17:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58511 invoked by uid 99); 18 Nov 2008 17:49:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 09:49:30 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mark.a.ferguson@gmail.com designates 64.233.178.248 as permitted sender)
Received: from [64.233.178.248] (HELO hs-out-0708.google.com) (64.233.178.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 17:48:08 +0000
Received: by hs-out-0708.google.com with SMTP id 4so1345522hsl.5
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 09:48:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=wgUjrKbtcQho8HCu1gi81U7G+ok7UFzuZFCMQpZDKHs=;
        b=p+WHEER9jdQOhbMRltQxNFP7a2r0lxn9hFNDHv3vuCViTJyvlxlsrMp8W6bTvMCJWa
         Ay9A9ukjCJsk6zeipOlo6kmR6oB1TcQW8kc9bklIY3f05RudJ2691DJKpTYN0yFwgBs3
         EWYckalVeEeIP85/EAO0B067H4DJeaatjhf5w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=hbyGrpGleYqDe3QBC0E/QWxnrOzWB/FFZBznC5QaTO/O7wigIZ8XZq3bAsJ+eLXZKb
         +QudU72P4DPexMmEua7dp8CaL7iA40NEQkYp3ujmdu/Mhl7JZYAdUR9ti8FAnnIr7x31
         mk7ZAENWDh1U+0l6+U63ry18eGTg04u9Cit4M=
Received: by 10.151.108.3 with SMTP id k3mr382818ybm.32.1227030522672;
        Tue, 18 Nov 2008 09:48:42 -0800 (PST)
Received: by 10.151.74.9 with HTTP; Tue, 18 Nov 2008 09:48:42 -0800 (PST)
Message-ID: <2dab92100811180948r466974c2q8df574edee75fce9@mail.gmail.com>
Date: Tue, 18 Nov 2008 10:48:42 -0700
From: "Mark Ferguson" <mark.a.ferguson@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching repeating fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_50715_16105540.1227030522667"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_50715_16105540.1227030522667
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I am designing an index in which one url corresponds to one document. Each
document also contains multiple parallel repeating fields. For example:

Document 1:
  url: http://www.cnn.com/
  page_description: cnn breaking news
  page_title: news
  page_title: cnn news
  page_titel: homepage
  username: ajax
  username: paris
  username: daniel

In this contrived example, user 'ajax' have saved the URL with the page
title 'news', 'paris' has saved it with 'cnn news', and 'daniel' has saved
it with 'homepage'.

What I need to be able to do is perform a search for a particular user and a
particular title, but they must occur together. For example, +user:ajax
+page_title:news would return this document, but +user:ajax
+page_title:homepage would not.

I am open to changing the design of the document (i.e. using repeating
fields isn't required), but I do need to have one document per url. I am
looking for suggestions for a strategy on implementing this requirement.

Thanks,

Mark Ferguson

------=_Part_50715_16105540.1227030522667--

From java-user-return-37245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 20:07:22 2008
Return-Path: <java-user-return-37245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99035 invoked from network); 18 Nov 2008 20:07:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 20:07:22 -0000
Received: (qmail 61683 invoked by uid 500); 18 Nov 2008 20:07:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61650 invoked by uid 500); 18 Nov 2008 20:07:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61639 invoked by uid 99); 18 Nov 2008 20:07:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 12:07:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 20:06:01 +0000
Received: by wa-out-1112.google.com with SMTP id n4so1636488wag.5
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 12:06:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=ILbuQwLBd4BdpYvsDO15tPhoq7yn5DZ7dpE8xgBhqa8=;
        b=L2LgwDmCmEIdsmb9vnGWtCuXtMCkR5Uq5vTxSOjt1IZP4lTJhdQScoODPkzXusFVQj
         z2z3J9DOjtusBks6K3pDh5ssETwjvLGYfO9jvSOzJCbmT5KqlZkQeAMCE+IawF5veonJ
         msPzwOoO98RirYHwOjJ4v3khqT0SHYtAJAZNk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=CNACOjp9+3mxN11iJRFC0I82iwtF2nwpzShtn6jTgRFHH1VS7t7JVAU/0foyBGh4PO
         YrrEgsrV3dXm3ZN/2kCobivqj7G2bq52N4wrq7fFBZZBL7L4hL1O5DWhlFKQKyY6vrnb
         7+VjB8HqdVhdh29LNNV4+/6DiphxNKLGE9hHM=
Received: by 10.114.36.4 with SMTP id j4mr146298waj.119.1227038796598;
        Tue, 18 Nov 2008 12:06:36 -0800 (PST)
Received: by 10.114.124.20 with HTTP; Tue, 18 Nov 2008 12:06:36 -0800 (PST)
Message-ID: <8c4e68610811181206g1a713b59m5b4fc37e6a2e1966@mail.gmail.com>
Date: Tue, 18 Nov 2008 20:06:36 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching repeating fields
In-Reply-To: <2dab92100811180948r466974c2q8df574edee75fce9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <2dab92100811180948r466974c2q8df574edee75fce9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

How about using variable field names?

 url: http://www.cnn.com/
 page_description: cnn breaking news
 page_title_ajax: news
 page_title_paris: cnn news
 page_title_daniel: homepage
 username: ajax
 username: paris
 username: daniel

and search for +user:ajax +page_title_ajax:news or maybe just
page_title_ajax:news.  Might not even need to store user.


--
Ian.


On Tue, Nov 18, 2008 at 5:48 PM, Mark Ferguson
<mark.a.ferguson@gmail.com> wrote:
> Hello,
>
> I am designing an index in which one url corresponds to one document. Each
> document also contains multiple parallel repeating fields. For example:
>
> Document 1:
>  url: http://www.cnn.com/
>  page_description: cnn breaking news
>  page_title: news
>  page_title: cnn news
>  page_titel: homepage
>  username: ajax
>  username: paris
>  username: daniel
>
> In this contrived example, user 'ajax' have saved the URL with the page
> title 'news', 'paris' has saved it with 'cnn news', and 'daniel' has saved
> it with 'homepage'.
>
> What I need to be able to do is perform a search for a particular user and a
> particular title, but they must occur together. For example, +user:ajax
> +page_title:news would return this document, but +user:ajax
> +page_title:homepage would not.
>
> I am open to changing the design of the document (i.e. using repeating
> fields isn't required), but I do need to have one document per url. I am
> looking for suggestions for a strategy on implementing this requirement.
>
> Thanks,
>
> Mark Ferguson
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 20:43:11 2008
Return-Path: <java-user-return-37246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16433 invoked from network); 18 Nov 2008 20:43:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 20:43:10 -0000
Received: (qmail 27179 invoked by uid 500); 18 Nov 2008 20:43:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26423 invoked by uid 500); 18 Nov 2008 20:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26406 invoked by uid 99); 18 Nov 2008 20:43:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 12:43:11 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 20:41:48 +0000
Received: by qyk13 with SMTP id 13so1140971qyk.5
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 12:42:30 -0800 (PST)
Received: by 10.215.100.2 with SMTP id c2mr446141qam.181.1227040950235;
        Tue, 18 Nov 2008 12:42:30 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm1655676qwb.7.2008.11.18.12.42.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 18 Nov 2008 12:42:29 -0800 (PST)
Message-Id: <B166656C-3467-4D84-BA04-44F43B85EA54@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <992025CA-85FD-40E5-8184-172E0ECB9001@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: constructing a mini-index with just the number of hits for a term
Date: Tue, 18 Nov 2008 15:42:26 -0500
References: <491C510F.8040005@gmail.com> <992025CA-85FD-40E5-8184-172E0ECB9001@apache.org>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Flexible indexing (LUCENE-1458) should make this possible.

IE you could use your own codec which discards doc/freq/prox/payload  
and during indexing (for this one field) and simply stores the term  
frequency in the terms dict.  However, one problem will be deletions  
(in case it matters to your app): in order to properly update the  
terms dict counts, SegmentMerger walks through the docIDs for the term  
and skips the deleted ones.

But it will be some time before this is real, though there's an  
initial patch on LUCENE-1458.

Mike

Grant Ingersoll wrote:

> Can you share what the actual problem is that you are trying to  
> solve?  It might help put things in context for me.  I'm guessing  
> you are doing some type of co-occurrence analysis, but...
>
> More below.
>
> On Nov 13, 2008, at 11:08 AM, Sven wrote:
>
>> First - I apologize for the double post on my earlier email.  The  
>> first time I sent it I received an error message from support@magentanews.com 
>>  saying that I should instead send email to java-user@meltwater.com  
>> so I thought it did not go through.
>> My question is this - is there a way to use the Lucene/Solr  
>> infrastructure to create a mini-index that simply contains a lookup  
>> table of terms and the number of times they have appeared?
>
> This could be possible.  I think I would create documents with  
> Index.ANALYZED, and Store.NO.  Then, you just need to use the  
> TermEnum and TermDocs to access the information that you need.  In a  
> sense, you are just creating the term dictionary.  You could also  
> turn off storing of NORMS, which will save too.
>
>>
>> I do not need to record which documents have them nor do I need to  
>> know where in the documents they appear.  There could be (and  
>> probably will be) more than 2^32 terms, however.
>
> 2^32 unique terms or 2^32 total terms?
>
>> I'm not sure if that makes a difference to the Lucene backend, but  
>> thought it might be relevant.
>> This question coincides with my earlier question about counting the  
>> times a given term is associated with another term.  I figure that  
>> this would be more easily accomplished by making the mini-index  
>> described above alongside the normal index when a document is  
>> indexed.  For example, when scanning:
>>
>> Bravely bold Sir Robin, brought forth from Camelot.  He was not  
>> afraid to die!  Oh, brave Sir Robin!
>>
>> In addition to the normal indexing function of Lucene, I would like  
>> to write something on the backend to also index:
>>
>> bravely|bold
>> bravely|sir
>> bravely|robin
>> bravely|brought
>> bravely|forth
>> bold|sir
>> bold|robin
>> bold|brought
>> bold|forth
>> bold|camelot  ("from" being a stop word)
>> ...and so on
>>
>> I only need to keep a running total of each "bravely|bold" term,  
>> however, since the number of terms will be quite large and keeping  
>> track of the document/termpositions would translate to a lot of  
>> wasted HD space.
>
> For this, I think you will have to hook into the Analyzer process.   
> The other thing to do is just try keeping the document/term  
> positions, it may not actually be as bad as you think in terms of  
> space.
>
>>
>> If such a thing is not already in place, could someone let me know  
>> if there are some tutorials, documentation, or presentations that  
>> describe the inner workings of Lucene and the theories/ 
>> implementation at work for the actual file formats, structures,  
>> data manipulations, etc?  (The javadocs don't go into this kind of  
>> detail.)  I'm sure I can sift through the code and eventually make  
>> sense of it, but if there is documentation out there, I'd prefer to  
>> peruse that first.  My thought being that I can simply generate my  
>> own kind of hash for each combined term and write it out to a  
>> custom file structure similar to Lucene - but the specifics of how  
>> to (optimally) do so are not plain to me yet.
>> Thanks again!
>> -Sven
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 21:29:57 2008
Return-Path: <java-user-return-37247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45012 invoked from network); 18 Nov 2008 21:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 21:29:57 -0000
Received: (qmail 79875 invoked by uid 500); 18 Nov 2008 21:29:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79841 invoked by uid 500); 18 Nov 2008 21:29:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79830 invoked by uid 99); 18 Nov 2008 21:29:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 13:29:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mark.a.ferguson@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 21:28:36 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1240741yxj.5
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 13:29:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=TbhbmEAZz4SHDncI6ZJtdbXNwowAM1/dNwZm/RX/pZ8=;
        b=MtmBV2CaGtSVtGyyAFbkwrcbLtkPZZDVEq7O6ZHZ5CUC8efKz/h4v+SV8346W07lb4
         wgJTMSPE0J+7NJ2yD9IaCQaDwFGuX7nUfe48Cqk7cw2Zz3DW90iM3JjcliJoffeqsqlf
         6GnjYsQx4/Mopg5PVNID+ckSY2Qd4vcsMC9ok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=ZARrH9wfUyRaUUwjvQYf8Qj6eAz0TRfIQ2IyddqwyvJfdeUviZFcyE4nL9zBaCLREk
         MVYv5PAbHqB9KpvEEGIg9AQkqxElSfYS3E6moIGek6GS1Kqi04gnALQAIa0aftsrD6oW
         upeOGGQ7snNIvWcheIyhfOKZW7btdtBZj25Lo=
Received: by 10.150.124.2 with SMTP id w2mr658867ybc.168.1227043750252;
        Tue, 18 Nov 2008 13:29:10 -0800 (PST)
Received: by 10.151.74.9 with HTTP; Tue, 18 Nov 2008 13:29:10 -0800 (PST)
Message-ID: <2dab92100811181329t7f9ade6ao490c5fa957947dd0@mail.gmail.com>
Date: Tue, 18 Nov 2008 14:29:10 -0700
From: "Mark Ferguson" <mark.a.ferguson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching repeating fields
In-Reply-To: <8c4e68610811181206g1a713b59m5b4fc37e6a2e1966@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2846_19632980.1227043750240"
References: <2dab92100811180948r466974c2q8df574edee75fce9@mail.gmail.com>
	 <8c4e68610811181206g1a713b59m5b4fc37e6a2e1966@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2846_19632980.1227043750240
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the suggestion, but I think I will need a more robust solution,
because this will only work with pairs of fields. I should have specified
that the example I gave was somewhat contrived, but in practice there could
be more than two parallel fields. I'm trying to find a general solution that
I can apply to any number of parallel fields holding any kind of data.

I was thinking of trying something along the lines of a multi-value field.
So for example, I could have:

page_user_title: ajax|news (where | is a field separator)

The problem is I don't know how to formulate the query that would be
equivalent to +username:ajax +page_title:news, or if it's even possible. (I
should also mention that I am creating the queries programmatically, not
using the query parser, so anything goes).

Any other ideas?

Mark Ferguson


On Tue, Nov 18, 2008 at 1:06 PM, Ian Lea <ian.lea@gmail.com> wrote:

> How about using variable field names?
>
>  url: http://www.cnn.com/
>  page_description: cnn breaking news
>  page_title_ajax: news
>  page_title_paris: cnn news
>  page_title_daniel: homepage
>  username: ajax
>  username: paris
>  username: daniel
>
> and search for +user:ajax +page_title_ajax:news or maybe just
> page_title_ajax:news.  Might not even need to store user.
>
>
> --
> Ian.
>
>
> On Tue, Nov 18, 2008 at 5:48 PM, Mark Ferguson
> <mark.a.ferguson@gmail.com> wrote:
> > Hello,
> >
> > I am designing an index in which one url corresponds to one document.
> Each
> > document also contains multiple parallel repeating fields. For example:
> >
> > Document 1:
> >  url: http://www.cnn.com/
> >  page_description: cnn breaking news
> >  page_title: news
> >  page_title: cnn news
> >  page_titel: homepage
> >  username: ajax
> >  username: paris
> >  username: daniel
> >
> > In this contrived example, user 'ajax' have saved the URL with the page
> > title 'news', 'paris' has saved it with 'cnn news', and 'daniel' has
> saved
> > it with 'homepage'.
> >
> > What I need to be able to do is perform a search for a particular user
> and a
> > particular title, but they must occur together. For example, +user:ajax
> > +page_title:news would return this document, but +user:ajax
> > +page_title:homepage would not.
> >
> > I am open to changing the design of the document (i.e. using repeating
> > fields isn't required), but I do need to have one document per url. I am
> > looking for suggestions for a strategy on implementing this requirement.
> >
> > Thanks,
> >
> > Mark Ferguson
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2846_19632980.1227043750240--

From java-user-return-37248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 21:50:08 2008
Return-Path: <java-user-return-37248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64083 invoked from network); 18 Nov 2008 21:50:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 21:50:08 -0000
Received: (qmail 26302 invoked by uid 500); 18 Nov 2008 21:50:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26266 invoked by uid 500); 18 Nov 2008 21:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26253 invoked by uid 99); 18 Nov 2008 21:50:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 13:50:09 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mark.a.ferguson@gmail.com designates 74.125.46.30 as permitted sender)
Received: from [74.125.46.30] (HELO yw-out-2324.google.com) (74.125.46.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 21:48:46 +0000
Received: by yw-out-2324.google.com with SMTP id 3so1246958ywj.5
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 13:49:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ONvYV0ogBDFAclwb+JNYMF1MokbK/GIUE6PL9IhoMQ0=;
        b=KQkKBtv6Pqf56Y37QHGInOBE0azacdP7GRElBG32C2qYWmT42S5hmSNrAbXFrXF1sZ
         n77s0BbcHhrV9ApJr3M2dWlPmkEQPilekxvJOvk6RXxY/Eh10762AhMBFw9dd2+DEWek
         HDw0sR7xqbiQjFKoQcRh4CoawJe7UqYYzUO+E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=UD4IRNgXJL+Nfj6dZ7IWHZh9gHNOFeNqw++tub6oxI0ZRLucKImbU1UJEOVpGA0jCw
         GvXW+gAx8370OTlUO4SXdvDSDEZURRjM2uU4KS56D58O4jjk9FCfRJOwxHyDi/pq/Eyy
         If4cq3UNUlwm7IStT9gZGpYpfQvM/64TV2eF8=
Received: by 10.151.46.3 with SMTP id y3mr678472ybj.199.1227044961300;
        Tue, 18 Nov 2008 13:49:21 -0800 (PST)
Received: by 10.151.74.9 with HTTP; Tue, 18 Nov 2008 13:49:21 -0800 (PST)
Message-ID: <2dab92100811181349n2ffb743fgaefb05b2d6f5adeb@mail.gmail.com>
Date: Tue, 18 Nov 2008 14:49:21 -0700
From: "Mark Ferguson" <mark.a.ferguson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching repeating fields
In-Reply-To: <2dab92100811181329t7f9ade6ao490c5fa957947dd0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3145_3069268.1227044961268"
References: <2dab92100811180948r466974c2q8df574edee75fce9@mail.gmail.com>
	 <8c4e68610811181206g1a713b59m5b4fc37e6a2e1966@mail.gmail.com>
	 <2dab92100811181329t7f9ade6ao490c5fa957947dd0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3145_3069268.1227044961268
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'll provide a better example, perhaps it will help in formulating a
solution.

Suppose I am designing an index that stores invoices. One document
corresponds to one invoice, which has a unique id. Any number of employees
can make comments on the invoices, and comments have different
classifications (request_for_approval, redirection, approval,
miscellaneous). Each comment is timestamped. An invoice also contains a long
description that is indexed and is stored.

So an example document may look like this:

invoice_id: 1234
invoice_description:(some text)
employee_id: 5
employee_id: 8
employee_id: 12
comment_type: request_for_approval
comment_type: redirection
comment_type: approval
comment: please approve invoice
comment: sending invoice to sales
comment: invoice approved
ts:200811181012
ts:200811181015
ts:200811181340

I want to be able to search by any number of these fields. For example, I
may want all of employee 5's requests for approvals from today.

It may seem like it would be simpler to just have two separate indexes: a
comments index and an invoice index. But I also want to be able to search
the invoice description along with the comments. I could set the granularity
of the index to the comments level, but then I am duplicating a lot of text
in the invoice description. Also, I only care about returning the invoice,
so I will have to merge results if the granularity is set to the comments
level, which will ruin Lucene's scoring (?).

This is a made-up example, but I think it describes pretty thoroughly the
problem I'm trying to solve. In my real world problem, I'm storing the
full-text of web pages, and I really don't want to be duplicating that much
text to set the granularity lower.

Mark Ferguson


On Tue, Nov 18, 2008 at 2:29 PM, Mark Ferguson <mark.a.ferguson@gmail.com>wrote:

> Thanks for the suggestion, but I think I will need a more robust solution,
> because this will only work with pairs of fields. I should have specified
> that the example I gave was somewhat contrived, but in practice there could
> be more than two parallel fields. I'm trying to find a general solution that
> I can apply to any number of parallel fields holding any kind of data.
>
> I was thinking of trying something along the lines of a multi-value field.
> So for example, I could have:
>
> page_user_title: ajax|news (where | is a field separator)
>
> The problem is I don't know how to formulate the query that would be
> equivalent to +username:ajax +page_title:news, or if it's even possible. (I
> should also mention that I am creating the queries programmatically, not
> using the query parser, so anything goes).
>
> Any other ideas?
>
> Mark Ferguson
>
>
>
> On Tue, Nov 18, 2008 at 1:06 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> How about using variable field names?
>>
>>  url: http://www.cnn.com/
>>  page_description: cnn breaking news
>>  page_title_ajax: news
>>  page_title_paris: cnn news
>>  page_title_daniel: homepage
>>  username: ajax
>>  username: paris
>>  username: daniel
>>
>> and search for +user:ajax +page_title_ajax:news or maybe just
>> page_title_ajax:news.  Might not even need to store user.
>>
>>
>> --
>> Ian.
>>
>>
>> On Tue, Nov 18, 2008 at 5:48 PM, Mark Ferguson
>> <mark.a.ferguson@gmail.com> wrote:
>> > Hello,
>> >
>> > I am designing an index in which one url corresponds to one document.
>> Each
>> > document also contains multiple parallel repeating fields. For example:
>> >
>> > Document 1:
>> >  url: http://www.cnn.com/
>> >  page_description: cnn breaking news
>> >  page_title: news
>> >  page_title: cnn news
>> >  page_titel: homepage
>> >  username: ajax
>> >  username: paris
>> >  username: daniel
>> >
>> > In this contrived example, user 'ajax' have saved the URL with the page
>> > title 'news', 'paris' has saved it with 'cnn news', and 'daniel' has
>> saved
>> > it with 'homepage'.
>> >
>> > What I need to be able to do is perform a search for a particular user
>> and a
>> > particular title, but they must occur together. For example, +user:ajax
>> > +page_title:news would return this document, but +user:ajax
>> > +page_title:homepage would not.
>> >
>> > I am open to changing the design of the document (i.e. using repeating
>> > fields isn't required), but I do need to have one document per url. I am
>> > looking for suggestions for a strategy on implementing this requirement.
>> >
>> > Thanks,
>> >
>> > Mark Ferguson
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_3145_3069268.1227044961268--

From java-user-return-37249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 22:23:56 2008
Return-Path: <java-user-return-37249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85019 invoked from network); 18 Nov 2008 22:23:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 22:23:56 -0000
Received: (qmail 78886 invoked by uid 500); 18 Nov 2008 22:23:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78854 invoked by uid 500); 18 Nov 2008 22:23:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78833 invoked by uid 99); 18 Nov 2008 22:23:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 14:23:56 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 22:22:34 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6D01671C516; Tue, 18 Nov 2008 14:22:48 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 699B971C4C7
	for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 14:22:48 -0800 (PST)
Date: Tue, 18 Nov 2008 14:22:48 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Searching repeating fields
In-Reply-To: <2dab92100811181349n2ffb743fgaefb05b2d6f5adeb@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0811181418150.22027@radix.cryptio.net>
References: <2dab92100811180948r466974c2q8df574edee75fce9@mail.gmail.com> 
 <8c4e68610811181206g1a713b59m5b4fc37e6a2e1966@mail.gmail.com> 
 <2dab92100811181329t7f9ade6ao490c5fa957947dd0@mail.gmail.com>
 <2dab92100811181349n2ffb743fgaefb05b2d6f5adeb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


There has been discussion in the past about how PhraseQuery artificially 
requires that the Terms you add to it must be in the same field ... you 
could theoretically modify PhraseQuery to have a tpe of query that 
required terms in one field be withing (slop)N positions of a term in a 
"parallel" field ... with N=0 you would get something like what you're 
describing...

http://www.nabble.com/Re%3A-One-item%2C-multiple-fields%2C-and-range-queries-p8377712.html

(that thread oes on to discuss the complexities of trying to make 
something like this work if one of the query clauses you want in your 
"phrase" is non-trivial like a RangeQuery)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 18 23:47:02 2008
Return-Path: <java-user-return-37250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10820 invoked from network); 18 Nov 2008 23:47:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Nov 2008 23:47:02 -0000
Received: (qmail 89157 invoked by uid 500); 18 Nov 2008 23:47:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89116 invoked by uid 500); 18 Nov 2008 23:47:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89105 invoked by uid 99); 18 Nov 2008 23:47:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 15:47:03 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.1.26 as permitted sender)
Received: from [64.18.1.26] (HELO psmtp.com) (64.18.1.26)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Nov 2008 23:45:39 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by exprod6ob111.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSSNTQ4bbYyOBLcsy5QK0zeBd1ZEm0Tse@postini.com; Tue, 18 Nov 2008 15:46:24 PST
Received: from d01smtp07.Mi8.com ([172.16.1.114]) by Outbound01.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 18 Nov 2008 18:44:02 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by d01smtp07.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 18 Nov 2008 18:44:02 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.118]) with Microsoft Exchange Server HTTP-DAV ;
 Tue, 18 Nov 2008 23:44:01 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Tue, 18 Nov 2008 15:43:56 -0800
Subject: Re: Term numbering and range filtering
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C548933C.16BB%tsturge@hi5.com>
Thread-Topic: Term numbering and range filtering
Thread-Index: AclJ14VN+AClgaikWka9U27o5jqVsw==
In-Reply-To: <EDCB729C-C03A-4A24-9072-B198B6520F2D@mikemccandless.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-OriginalArrivalTime: 18 Nov 2008 23:44:02.0253 (UTC) FILETIME=[890767D0:01C949D7]
X-TM-AS-Product-Ver: SMEX-7.0.0.1345-5.5.1027-16288.002
X-TM-AS-Result: No--27.994100-8.000000-31
X-Virus-Checked: Checked by ClamAV on apache.org

I've finished a query time implementation of a column stride filter, which
implements DocIdSetIterator. This just builds the filter at process start
and uses it for each subsequent query. The index itself is unchanged.

The results are very impressive. Here are the results on a 45M document
index:

Firstly without an age constraint as a baseline:

Query "+name:tim" 
startup: 0 
Hits: 15089
first query: 1004
100 queries: 132 (1.32 msec per query)

Now with a cached filter. This is ideal from a speed standpoint but there
are too many possible start/end combinations to cache all the filters.

Query "+name:tim age:[18 TO 35]" (ConstantScoreQuery on cached RangeFilter)
startup: 3
Hits: 11156
first query: 1830
100 queries: 287 (2.87 msec per query)

Now with an uncached filter. This is awful.

Query "+name:tim age:[18 TO 35]" (uncached ConstantScoreRangeQuery)
startup: 3
Hits: 11156
first query: 1665
100 queries: 51862 (yes, 518 msec per query, 200x slower)

A RangeQuery is slightly better but still bad (and has a different result
set)

Query "+name:tim age:[18 TO 35]" (uncached RangeQuery)
startup: 0
Hits: 10147
first query: 1517
100 queries: 27157 (271 msec is 100x slower than the filter)

Now with the prebuilt column stride filter:

Query "+name:tim age:[18 TO 35]" (ConstantScoreQuery on prebuilt column
stride filter)
startup: 2811
Hits: 11156
first query: 1395
100 queries: 441 (back down to 4.41msec per query)

This is less than 2x slower than the dedicated bitset and more than 50x
faster than the range boolean query.

Mike, Paul, I'm happy to contribute this (ugly but working) code if there is
interest. Let me know and I'll open a JIRA issue for it.

Tim


On 11/11/08 1:27 PM, "Michael McCandless" <lucene@mikemccandless.com> wrote:

> 
> Paul Elschot wrote:
> 
>> Op Tuesday 11 November 2008 21:55:45 schreef Michael McCandless:
>>> Also, one nice optimization we could do with the "term number column-
>>> stride array" is do bit packing (borrowing from the PFOR code)
>>> dynamically.
>>> 
>>> Ie since we know there are X unique terms in this segment, when
>>> populating the array that maps docID to term number we could use
>>> exactly the right number of bits.  Enumerated fields with not many
>>> unique values (eg, country, state) would take relatively little RAM.
>>> With LUCENE-1231, where the fields are stored column stride on disk,
>>> we could do this packing during index such that loading at search
>>> time is very fast.
>> 
>> Perhaps we'd better continue this at LUCENE-1231 or LUCENE-1410.
>> I think what you're referring to is PDICT, which has frame exceptions
>> for values that occur infrequently.
> 
> Yes let's move the discussion to Jira.
> 
> Actually I was referring to simple bit-packing.
> 
> For encoding array of compact enum terms (eg city, state, color, zip)
> I'm guessing the exceptions logic won't buy us much and would hurt
> seeking needed for column-stride fields.  But we should certainly test
> it.
> 
> Mike
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 00:41:04 2008
Return-Path: <java-user-return-37251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30436 invoked from network); 19 Nov 2008 00:41:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 00:41:04 -0000
Received: (qmail 32851 invoked by uid 500); 19 Nov 2008 00:41:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32559 invoked by uid 500); 19 Nov 2008 00:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32548 invoked by uid 99); 19 Nov 2008 00:41:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 16:41:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 00:39:43 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr5.xs4all.nl (8.13.8/8.13.8) with ESMTP id mAJ0eMF4084331
	for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 01:40:27 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Term numbering and range filtering
Date: Wed, 19 Nov 2008 01:40:23 +0100
User-Agent: KMail/1.9.10
References: <C548933C.16BB%tsturge@hi5.com>
In-Reply-To: <C548933C.16BB%tsturge@hi5.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811190140.24116.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Wednesday 19 November 2008 00:43:56 schreef Tim Sturge:
> I've finished a query time implementation of a column stride filter,
> which implements DocIdSetIterator. This just builds the filter at
> process start and uses it for each subsequent query. The index itself
> is unchanged.
>
> The results are very impressive. Here are the results on a 45M
> document index:
>
> Firstly without an age constraint as a baseline:
>
> Query "+name:tim"
> startup: 0
> Hits: 15089
> first query: 1004
> 100 queries: 132 (1.32 msec per query)
>
> Now with a cached filter. This is ideal from a speed standpoint but
> there are too many possible start/end combinations to cache all the
> filters.
>
> Query "+name:tim age:[18 TO 35]" (ConstantScoreQuery on cached
> RangeFilter) startup: 3
> Hits: 11156
> first query: 1830
> 100 queries: 287 (2.87 msec per query)
>
> Now with an uncached filter. This is awful.
>
> Query "+name:tim age:[18 TO 35]" (uncached ConstantScoreRangeQuery)
> startup: 3
> Hits: 11156
> first query: 1665
> 100 queries: 51862 (yes, 518 msec per query, 200x slower)
>
> A RangeQuery is slightly better but still bad (and has a different
> result set)
>
> Query "+name:tim age:[18 TO 35]" (uncached RangeQuery)
> startup: 0
> Hits: 10147
> first query: 1517
> 100 queries: 27157 (271 msec is 100x slower than the filter)
>
> Now with the prebuilt column stride filter:
>
> Query "+name:tim age:[18 TO 35]" (ConstantScoreQuery on prebuilt
> column stride filter)

With "Allow Filter as clause to BooleanQuery":
https://issues.apache.org/jira/browse/LUCENE-1345
one could even skip the ConstantScoreQuery with this.
Unfortunately 1345 is unfinished for now.

> startup: 2811
> Hits: 11156
> first query: 1395
> 100 queries: 441 (back down to 4.41msec per query)
>
> This is less than 2x slower than the dedicated bitset and more than
> 50x faster than the range boolean query.
>
> Mike, Paul, I'm happy to contribute this (ugly but working) code if
> there is interest. Let me know and I'll open a JIRA issue for it.

In case you think more performance improvements based on this
are possible...

Regards,
Paul Elschot.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 01:33:26 2008
Return-Path: <java-user-return-37252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52732 invoked from network); 19 Nov 2008 01:33:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 01:33:26 -0000
Received: (qmail 87808 invoked by uid 500); 19 Nov 2008 01:33:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87780 invoked by uid 500); 19 Nov 2008 01:33:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87769 invoked by uid 99); 19 Nov 2008 01:33:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 17:33:27 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,RCVD_IN_DNSWL_MED,RCVD_NUMERIC_HELO,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of TSturge@hi5.com designates 64.18.1.25 as permitted sender)
Received: from [64.18.1.25] (HELO exprod6og110.obsmtp.com) (64.18.1.25)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Nov 2008 01:32:03 +0000
Received: from source ([63.240.6.3]) (using TLSv1) by exprod6ob110.postini.com ([64.18.5.12]) with SMTP
	ID DSNKSSNsvgi9XQ2CKmyjRxRXL6eC5SQZJflZ@postini.com; Tue, 18 Nov 2008 17:32:48 PST
Received: from d01smtp03.Mi8.com ([172.16.1.24]) by Outbound02.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 18 Nov 2008 20:32:45 -0500
Received: from MI8NYCMAIL04.Mi8.com ([172.16.1.157]) by d01smtp03.Mi8.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 18 Nov 2008 20:32:44 -0500
Received: from 66.218.169.47 ([66.218.169.47]) by MI8NYCMAIL04.Mi8.com ([172.16.1.204]) via Exchange Front-End Server mi8owa.mi8.com ([172.16.1.118]) with Microsoft Exchange Server HTTP-DAV ;
 Wed, 19 Nov 2008 01:32:44 +0000
User-Agent: Microsoft-Entourage/12.13.0.080930
Date: Tue, 18 Nov 2008 17:32:40 -0800
Subject: Re: Term numbering and range filtering
From: Tim Sturge <tsturge@hi5.com>
To: <java-user@lucene.apache.org>
Message-ID: <C548ACB8.16C8%tsturge@hi5.com>
Thread-Topic: Term numbering and range filtering
Thread-Index: AclJ5rXo6qGhqKU0G0Kgq62hDwL4IQ==
In-Reply-To: <200811190140.24116.paul.elschot@xs4all.nl>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-OriginalArrivalTime: 19 Nov 2008 01:32:44.0938 (UTC) FILETIME=[B8DA26A0:01C949E6]
X-Virus-Checked: Checked by ClamAV on apache.org



> With "Allow Filter as clause to BooleanQuery":
> https://issues.apache.org/jira/browse/LUCENE-1345
> one could even skip the ConstantScoreQuery with this.
> Unfortunately 1345 is unfinished for now.
> 

That would be interesting; I'd like to see how much performance improves.

>> startup: 2811
>> Hits: 11156
>> first query: 1395
>> 100 queries: 441 (back down to 4.41msec per query)
>> 
>> This is less than 2x slower than the dedicated bitset and more than
>> 50x faster than the range boolean query.
>> 
>> Mike, Paul, I'm happy to contribute this (ugly but working) code if
>> there is interest. Let me know and I'll open a JIRA issue for it.
> 
> In case you think more performance improvements based on this
> are possible...

I think this is generally useful for range and set queries on non-text based
fields (dates, location data, prices, general enumerations). These all have
the required property that there is only one value (term) per document.

I've opened LUCENE-1461.

Tim

> 
> Regards,
> Paul Elschot.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 02:27:58 2008
Return-Path: <java-user-return-37253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82770 invoked from network); 19 Nov 2008 02:27:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 02:27:57 -0000
Received: (qmail 38467 invoked by uid 500); 19 Nov 2008 02:28:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38091 invoked by uid 500); 19 Nov 2008 02:27:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38080 invoked by uid 99); 19 Nov 2008 02:27:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 18:27:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 02:26:37 +0000
Received: by fg-out-1718.google.com with SMTP id l27so2725825fgb.27
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 18:27:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=3fr16L1Q/vkUeK3/+scFKVNurIot16Ik6H83a1qPhB8=;
        b=oRY4itpLVxR5eaesODJohs9uzQcL9Pf+26bXvkiKvbJEcjayXE/RzYBEI4VS9QAlg2
         J0TdyDuPaGjj0v97csHVAweihnMh/+v4yNVcQw9Eo3pTvnIiTWiUEfqmpO+ymr8SIA7l
         Dq8Nocp35e6A1JHReu9Hw7qlezPyj9oDsk63g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=BfVLU6rKKc7AAX8YYGoWFk/jqt5T6VR0rsFOlMTWzYo7zV1VRPjKMbnR3ajLPTIVCt
         +rvBdZ4Avs8grpaQoCfaQuTkDy48IB9BrMPIDAyM/tbFXBi4mKJAEGfQ13BmS/HgZ+eq
         cv+VrRUZNGQRhmN3IEMTmYCi33aqW14EqHiqc=
Received: by 10.187.204.16 with SMTP id g16mr85507faq.14.1227061630324;
        Tue, 18 Nov 2008 18:27:10 -0800 (PST)
Received: by 10.187.200.20 with HTTP; Tue, 18 Nov 2008 18:27:10 -0800 (PST)
Message-ID: <9fc755c20811181827w7922386dgc6611620f52b0593@mail.gmail.com>
Date: Wed, 19 Nov 2008 03:27:10 +0100
From: "karl wettin" <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: InstantiatedIndex help + first impression
In-Reply-To: <1226882271.27571.4.camel@nuraku>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1226849983.12418.8.camel@nuraku> <4920414F.5000601@gmail.com>
	 <1226851411.12418.15.camel@nuraku> <49204E5D.6010101@gmail.com>
	 <1226857062.12418.20.camel@nuraku> <1226882271.27571.4.camel@nuraku>
X-Virus-Checked: Checked by ClamAV on apache.org

The actual performance depends on how much you load to the index. Can
you tell us how many documents and how large these documents are that
you have in your index?

Compared with RAMDirectory I'vee seen performance boosts of

up to 100x in a small index that contains (1-20) Wikipedia sized
documents, an index I used to apply user search agents on as new data
arrived to the primary index.
up to 25x when placing massive amounts of span queries on the apriori
index in LUCENE-626. This index contained tens of thousands of
documents with only a few (5-20) terms each.
up to 15x in a relatively large ngram index for classifications using
LUCENE-626. This is pure skipTo operations.

Regarding the fuzzy query, try to see how much time was spent
rewriting the query and then how much time was spend querying. I'm
almost certain you'll notice that the time spent rewriting the query
(comparing edit distance between the terms of the index and the query
term) is overwhelming  compared to the time spend searching for the
rewritten query. I.e. this is probably as much a store related expense
as it is a Levenshtein calculation expense.


    karl

(this is my second reply, the first one seems to be lost in space?)

On Mon, Nov 17, 2008 at 1:37 AM, Darren Govoni <darren@ontrenet.com> wrote:
> After I switched to InstantiatedIndex from RAMDirectory (but using the
> reader from my RAMDirectory to create the InstantiatedIndex), I see a
> less than 25% (.25) improvement in speed. Nowhere near the 100x (100.00)
> speed mentioned in the documentation. Probably I am doing something
> wrong.
>
> I am using too, a fuzzy query. e.g. "word:house~0.80" but I'd expect the
> improvement to be because of physical representation (memory graph) and
> mostly unaffected by the query. no?
>
> Could there be some lazy loading going on in RAMDirectory that prevents
> InstantiatedIndex from building out its graph and getting the expected
> speed?
>
> thanks to anyone who can verify this.
>
>
> On Sun, 2008-11-16 at 12:37 -0500, Darren Govoni wrote:
>> Yeah. That makes sense. Its not too hard to wrap those extra steps so I
>> can end up with something simpler too. Like:
>>
>> iindex = InstantiatedIndex("path/to/my/index")
>>
>> I'm lazy so the intermediate hoops to jump through clutter my code.
>> Hehe.
>>
>> :)
>>
>> Darren
>>
>> On Sun, 2008-11-16 at 11:46 -0500, Mark Miller wrote:
>> > Can you start with an empty index? Then how about:
>> >
>> > // Adding these
>> >
>> >     iindex = InstantiatedIndex()
>> >     ireader = iindex.indexReaderFactory()
>> >     isearcher = IndexSearcher(ireader)
>> >
>> > If you want a copy from another IndexReader though, you have to get that reader from somewhere right?
>> >
>> > - Mark
>> >
>> >
>> >
>> > Darren Govoni wrote:
>> > > Hi Mark,
>> > >   Thanks for the tips. Here's what I will try (psuedo-code)
>> > >
>> > >     endirectory = RAMDirectory("index/dictionary.en")
>> > >     ensearcher = IndexSearcher(endirectory)
>> > >     // Adding these
>> > >     reader = ensearcher.getIndexReader()
>> > >     iindex = InstantiatedIndex(reader)
>> > >     ireader = iindex.indexReaderFactory()
>> > >     isearcher = IndexSearcher(ireader)
>> > >
>> > > Kind of round about way to get an InstantiatedIndex I guess,but maybe
>> > > there's a briefer way?
>> > >
>> > > Thank you.
>> > > Darren
>> > >
>> > > On Sun, 2008-11-16 at 10:50 -0500, Mark Miller wrote:
>> > >
>> > >> Check out the docs at:
>> > >> http://lucene.apache.org/java/2_4_0/api/contrib-instantiated/index.html
>> > >>
>> > >> There is a performance graph there to check  out.
>> > >>
>> > >> The code should be fairly straightforward - you can make an
>> > >> InstantiatedIndex thats empty, or seed it with an IndexReader. Then you
>> > >> can make an InstantiatedReader or Writer, which take the
>> > >> InstantiatedIndex as a constructor arg.
>> > >>
>> > >> You should be able to just wrap that InstantiatedReader in a regular
>> > >> Searcher.
>> > >>
>> > >> Darren Govoni wrote:
>> > >>
>> > >>> Hi gang,
>> > >>>    I am trying to trace the 2.4 API to create an InstantiatedIndex, but
>> > >>> its rather difficult to connect directory,reader,search,index etc just
>> > >>> reading the javadocs.
>> > >>>
>> > >>>     I have a (POI - plain old index) directory already and want to
>> > >>> create a faster InstantiatedIndex and IndexSearcher to query it like
>> > >>> before. What's the proper order to do this?
>> > >>>
>> > >>> Also, if anyone has any empirical data on the performance or reliability
>> > >>> of InstantiatedIndex, I'd be curious.
>> > >>>
>> > >>> Thanks for the tips!
>> > >>> Darren
>> > >>>
>> > >>>
>> > >>> ---------------------------------------------------------------------
>> > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >>>
>> > >>>
>> > >>>
>> > >> ---------------------------------------------------------------------
>> > >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >>
>> > >>
>> > >
>> > >
>> > > ---------------------------------------------------------------------
>> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 02:39:37 2008
Return-Path: <java-user-return-37254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88686 invoked from network); 19 Nov 2008 02:39:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 02:39:37 -0000
Received: (qmail 48396 invoked by uid 500); 19 Nov 2008 02:39:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48366 invoked by uid 500); 19 Nov 2008 02:39:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48355 invoked by uid 99); 19 Nov 2008 02:39:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 18:39:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucene@triplehelix.org designates 65.49.35.50 as permitted sender)
Received: from [65.49.35.50] (HELO nigiri.triplehelix.org) (65.49.35.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 02:38:16 +0000
Received: by nigiri.triplehelix.org (Postfix, from userid 1014)
	id 43C57FCA6; Tue, 18 Nov 2008 18:39:01 -0800 (PST)
To: java-user@lucene.apache.org
Subject: 2.4 Performance
Message-Id: <20081119023901.43C57FCA6@nigiri.triplehelix.org>
Date: Tue, 18 Nov 2008 18:39:01 -0800 (PST)
From: lucene@triplehelix.org
X-Virus-Checked: Checked by ClamAV on apache.org

On an index of around 20 gigs I've been seeing a performance drop of
around 35% after upgrading to 2.4 (measured on ~10000 requests
identical requests, executed in parallel against a threaded lucene /
apache setup, after a roughly 10000 query warmup). The principal
changes I've made so far are just to switch to NIOFSDirectories and
use read-only index readers.

Our design is roughly as follows: we have some pre-query filters,
queries typically involving around 25 clauses, and some
post-processing of hits. We collect counts and filter post query using
a hit collector, which uses the (now deprecated) bits() method of
Filters.

I looked at converting us to use the new DocIdSet infrastructure (to
gain the supposed 30% speed bump), but this seems to be somewhat
problematic as there is no guarantee for whether we will get back a
set we can do binary operations on (for example, if we get back a
SortedVIntList, we're pretty much out of luck - the cardinality of the set
is large (as it's a sortedvintlist), so we can't coerce it into
another type, and it doesn't have the set operations we need to use it
directly.

Has anyone else seen this? Is there anything else
we should be changing in the upgrade to 2.4?

Thanks,

-Matt

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 02:45:02 2008
Return-Path: <java-user-return-37255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89556 invoked from network); 19 Nov 2008 02:45:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 02:45:02 -0000
Received: (qmail 56636 invoked by uid 500); 19 Nov 2008 02:45:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56600 invoked by uid 500); 19 Nov 2008 02:45:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56589 invoked by uid 99); 19 Nov 2008 02:45:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 18:45:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 02:43:42 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3715248fkq.5
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 18:44:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=KonPFHLT8ec2I6MHhcHgyqFOd+A3CMKyFRySrdVVws0=;
        b=oM/4QprtkEsODZuJQIoliQIx1xWYig5irZ7WUs46rkn9EKF450hoWg+p7muCM2w9bP
         xQFS9tB3AwYEJ9PH8otYAmTdJL5ri9fEr4i4q2IudEczT3rj4N11PwehJ570jLu4R3B2
         rGFj6j1OxBNxa5L/laJoSr+dCmHck5ZD0LfwE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=gHALajrQlLf3Cphd5du1qlbt3dfTdnB3h8fxtJsibKB4P+1kEjn6pY+8DlFHg0Qjib
         PURStQmcKNp/fcCTrq7ALPck7h9fbqT3WEqfEfeCHV3xiZJtC4uEPPj605ORxNT2O9OF
         NVcf+/wxDRXDFHVr64mUZFf2o7wstf4hQVqeo=
Received: by 10.187.166.12 with SMTP id t12mr86779fao.1.1227062656307;
        Tue, 18 Nov 2008 18:44:16 -0800 (PST)
Received: by 10.187.200.20 with HTTP; Tue, 18 Nov 2008 18:44:16 -0800 (PST)
Message-ID: <9fc755c20811181844g2da68f7cm17fd334897b64b79@mail.gmail.com>
Date: Wed, 19 Nov 2008 03:44:16 +0100
From: "karl wettin" <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: InstantiatedIndex help + first impression
In-Reply-To: <9fc755c20811181827w7922386dgc6611620f52b0593@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1226849983.12418.8.camel@nuraku> <4920414F.5000601@gmail.com>
	 <1226851411.12418.15.camel@nuraku> <49204E5D.6010101@gmail.com>
	 <1226857062.12418.20.camel@nuraku> <1226882271.27571.4.camel@nuraku>
	 <9fc755c20811181827w7922386dgc6611620f52b0593@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Nov 19, 2008 at 3:27 AM, karl wettin <karl.wettin@gmail.com> wrote:
> rewritten query. I.e. this is probably as much a store related expense
> as it is a Levenshtein calculation expense.

"this is probably *not* as much a store related.." that is.


    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 05:23:52 2008
Return-Path: <java-user-return-37256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27716 invoked from network); 19 Nov 2008 05:23:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 05:23:52 -0000
Received: (qmail 70484 invoked by uid 500); 19 Nov 2008 05:23:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70445 invoked by uid 500); 19 Nov 2008 05:23:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70434 invoked by uid 99); 19 Nov 2008 05:23:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 21:23:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.8.215] (HELO web110315.mail.gq1.yahoo.com) (67.195.8.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Nov 2008 05:22:30 +0000
Received: (qmail 65444 invoked by uid 60001); 19 Nov 2008 05:22:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=rp0MalubUcZAKNoPt/V5PLyftJcLAAe/jB1pXO2lJyMQlmWBLZsNTxqUVmFCRawQvfp0Eo1zaP64p8islX5b4cUQ0Zq+a1PvhfaAIKovHCueeAgBKT5ZRbZFPLBOmVWN5HbtPL9flifJqgijXuqF9iVFDFVKCdaO6Vom7EOaSYY=;
X-YMail-OSG: UfoIts8VM1mt_DQcFkZtw2JYjhrWMGrBsR4VgNrRelb7UUu717EF51rV2Sev4KRT2cKMcx462S.S7SF2QHdSjyLGt9QTy57a5NYgzKmUwl6rTRW76BKmQlUsvQ5XlLIKC1fE.r2kd5bbAd41mDQVi6G_4WkEH8LhOos6LASTGvxXQ0wz.CoTtJyHVu7DTWGQhhATybB_yO8kPGQ-
Received: from [116.197.178.83] by web110315.mail.gq1.yahoo.com via HTTP; Tue, 18 Nov 2008 21:22:12 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Tue, 18 Nov 2008 21:22:12 -0800 (PST)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Reply-To: techcool.kumar@yahoo.com
Subject: Re: Reopen IndexReader
To: java-user@lucene.apache.org
In-Reply-To: <CA28B827-9D8D-476B-8D35-5132C70E4A4E@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <942431.65145.qm@web110315.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I had same kind of problem and I somehow managed to find a work around by initializing IndexSearcher from new reader. 

try {
			IndexReader newReader =  reader.reopen();
			if (newReader != reader) {
//			    reader was reopened
			   reader.close(); 
			   reader = null;
			 }

			reader = newReader;
			searcher = new IndexSearcher(newReader);
		} catch (Exception e) {
			e.printStackTrace();
		} 


--- On Tue, 11/18/08, Michael McCandless <lucene@mikemccandless.com> wrote:

> From: Michael McCandless <lucene@mikemccandless.com>
> Subject: Re: Reopen IndexReader
> To: java-user@lucene.apache.org
> Date: Tuesday, November 18, 2008, 7:52 AM
> Well... we certainly do our best to have each release be
> stable, but we do make mistakes, so you'll have to use
> your own judgement on when to upgrade.
> 
> However, it's only through users like yourself
> upgrading that we then find & fix any uncaught issues in
> each new release.
> 
> Mike
> 
> Ganesh wrote:
> 
> > I am creating IndexSearcher using String, this is
> working fine with version 2.3.2.
> > I tried by replacing Directory ctor of IndexSearcher
> and it is working fine with v2.4.
> > 
> > I have recently upgraded from v2.3.2 to 2.4. Is v2.4
> stable and i could more forward with this or shall i revert
> back to 2.3.2?
> > 
> > Regards
> > Ganesh
> > 
> > 
> > ----- Original Message ----- From: "Michael
> McCandless" <lucene@mikemccandless.com>
> > To: <java-user@lucene.apache.org>
> > Sent: Tuesday, November 18, 2008 4:59 PM
> > Subject: Re: Reopen IndexReader
> > 
> > 
> >> 
> >> Did you create your IndexSearcher using a String
> or File (not  Directory)?
> >> 
> >> If so, it sounds like you are hitting this issue
> (just fixed this morning, on 2.9-dev (trunk)):
> >> 
> >>   
> https://issues.apache.org/jira/browse/LUCENE-1453
> >> 
> >> The workaround is to use the Directory ctor of
> IndexSearcher.
> >> 
> >> Mike
> >> 
> >> Ganesh wrote:
> >> 
> >>> Hello all,
> >>> 
> >>> I am using version 2.4. The following code
> throws  AlreadyClosedException
> >>> 
> >>>      IndexReader reader =
> searcher.getIndexReader();
> >>>      IndexReader newReader =  reader.reopen();
> >>>      if (reader != newReader) {
> >>>          reader.close();
> >>>          boolean isCurrent =
> newReader.isCurrent(); //throws  exception
> >>>      }
> >>> 
> >>> Full list of exception:
> >>> --------------------
> >>>
> org.apache.lucene.store.AlreadyClosedException: this
> Directory is  closed
> >>>      at
> org.apache.lucene.store.Directory.ensureOpen(Directory.java:
> 220)
> >>>      at
> org.apache.lucene.store.FSDirectory.list(FSDirectory.java:
> 320)
> >>>      at org.apache.lucene.index.SegmentInfos
> $FindSegmentsFile.run(SegmentInfos.java:533)
> >>>      at  org .apache
> .lucene.index.SegmentInfos.readCurrentVersion(SegmentInfos.java:366)
> >>>      at  org .apache .lucene
> .index.DirectoryIndexReader.isCurrent(DirectoryIndexReader.java:188)
> >>>      at
> MailIndexer.IndexSearcherEx.reOpenDB(IndexSearcherEx.java:
> 102)
> >>> 
> >>> Please correct me, if i am wrong.
> >>> 
> >>> Regards
> >>> Ganesh
> >>> 
> >>> Send instant messages to your online friends
> http://in.messenger.yahoo.com
> >>>
> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>> 
> >> 
> >> 
> >>
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > 
> > Send instant messages to your online friends
> http://in.messenger.yahoo.com
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 06:28:06 2008
Return-Path: <java-user-return-37257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63867 invoked from network); 19 Nov 2008 06:28:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 06:28:06 -0000
Received: (qmail 6005 invoked by uid 500); 19 Nov 2008 06:28:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5972 invoked by uid 500); 19 Nov 2008 06:28:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5961 invoked by uid 99); 19 Nov 2008 06:28:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 22:28:07 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.99.193.95] (HELO mail6.cognizant.com) (203.99.193.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 06:26:46 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C94A0F.EC2C72F2"
Subject: Reg two versions of lucene on the same machine
Date: Wed, 19 Nov 2008 11:57:17 +0530
Message-ID: <46CF6227F6B7F54092EBB0607F74D3A13D25E5@ctsinchnsxup.cts.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Reg two versions of lucene on the same machine
Thread-Index: AclKD95lPm0pSJ23TLy2CIb40/zs8g==
From: <Shireesha.Katkoor@cognizant.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C94A0F.EC2C72F2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,

=20

I am trying to upgrade the version of Lucene from 1.2 to 2.4. Can we do
this directly?

 Is it possible to have two versions of Lucene on the same machine.?

=20

Shireesha=20

=20



This e-mail and any files transmitted with it are for the sole use of the=
 intended recipient(s) and may contain confidential and privileged=
 information.
If you are not the intended recipient, please contact the sender by reply=
 e-mail and destroy all copies of the original message.=20
Any unauthorized review, use, disclosure, dissemination, forwarding,=
 printing or copying of this email or any action taken in reliance on this=
 e-mail is strictly prohibited and may be unlawful.
------_=_NextPart_001_01C94A0F.EC2C72F2--


From java-user-return-37258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 07:02:57 2008
Return-Path: <java-user-return-37258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71395 invoked from network); 19 Nov 2008 07:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 07:02:57 -0000
Received: (qmail 27089 invoked by uid 500); 19 Nov 2008 07:02:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26736 invoked by uid 500); 19 Nov 2008 07:02:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26725 invoked by uid 99); 19 Nov 2008 07:02:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Nov 2008 23:02:58 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.200.168 as permitted sender)
Received: from [209.85.200.168] (HELO wf-out-1314.google.com) (209.85.200.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 07:01:36 +0000
Received: by wf-out-1314.google.com with SMTP id 28so3432846wfc.20
        for <java-user@lucene.apache.org>; Tue, 18 Nov 2008 23:02:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=t77nZzIfJjBm0HIbx6HvbdBBEdp1NHfLoJ7/JTeJnOU=;
        b=dZWcMCgn0txL8gd9UZpJlDUiDnrHOiUuJPDHPfAwJ7FRbvYtyOuyB4OzNUoGoTk3eu
         0mfi9nLRYJ6/kBpE6eUbRCUcXXwsuRiYXNN43d9FZrIg2XPQeMViSshwi5Mi4mgnG4IY
         l+LHQLmj1R3np+whP3XA9WKvB+6GoYXGRRCYo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=UMtHxkF74ZMgR5ydUcm6jqGHo7LDF87AT0No59TpZjTREhL9sh78yAAzaNBIByYR4z
         sHtT+0uZg8tcAfIC1G8ypQ5mb44LLCQY/PC/XguA3FWB1Baqhm6tn70+F+pZDLGvcgxu
         4jff/vaBEWY8tAhcGMTxdvsKQEMDzGbaA98lc=
Received: by 10.142.178.13 with SMTP id a13mr375924wff.43.1227078131859;
        Tue, 18 Nov 2008 23:02:11 -0800 (PST)
Received: by 10.142.106.1 with HTTP; Tue, 18 Nov 2008 23:02:11 -0800 (PST)
Message-ID: <867513fe0811182302r508191e6s4aa27e41a8140cd7@mail.gmail.com>
Date: Wed, 19 Nov 2008 12:32:11 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reg two versions of lucene on the same machine
In-Reply-To: <46CF6227F6B7F54092EBB0607F74D3A13D25E5@ctsinchnsxup.cts.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_93421_17024108.1227078131851"
References: <46CF6227F6B7F54092EBB0607F74D3A13D25E5@ctsinchnsxup.cts.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_93421_17024108.1227078131851
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Shireesha,
I'm not sure as to what is it that you have been using, but 'm kinda sure
that you'd have to check for deprecated things as well as improved ones
while upgrading.. 1.2 to 2.4 is a huge jump certainly, with compound index
structure etc. coming into place.
You would have to try it and check if your code works the same(I doubt it
would though).
About having 2 versions of lucene on the same machine, ofcourse yes, it is
as good as having 2 (or more) java jars.
I am presuming that you place your lucene core jar in the project library
directory and not in the jre/lib/ext directory, in which case you would have
issues placing the 2 jars.
It would be better of you completely remove lucene jars from the implicit
included library dir, and place them in a different folder (and include that
in your classpath).

Hope that solves a bit of your doubt (atleast) !
--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Wed, Nov 19, 2008 at 11:57 AM, <Shireesha.Katkoor@cognizant.com> wrote:

>
> Hi,
>
>
>
> I am trying to upgrade the version of Lucene from 1.2 to 2.4. Can we do
> this directly?
>
>  Is it possible to have two versions of Lucene on the same machine.?
>
>
>
> Shireesha
>
>
>
>
>
> This e-mail and any files transmitted with it are for the sole use of the
> intended recipient(s) and may contain confidential and privileged
> information.
> If you are not the intended recipient, please contact the sender by reply
> e-mail and destroy all copies of the original message.
> Any unauthorized review, use, disclosure, dissemination, forwarding,
> printing or copying of this email or any action taken in reliance on this
> e-mail is strictly prohibited and may be unlawful.

------=_Part_93421_17024108.1227078131851--

From java-user-return-37259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 08:16:54 2008
Return-Path: <java-user-return-37259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91191 invoked from network); 19 Nov 2008 08:16:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 08:16:54 -0000
Received: (qmail 66842 invoked by uid 500); 19 Nov 2008 08:16:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66809 invoked by uid 500); 19 Nov 2008 08:16:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66798 invoked by uid 99); 19 Nov 2008 08:16:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 00:16:55 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.198.226 as permitted sender)
Received: from [209.85.198.226] (HELO rv-out-0506.google.com) (209.85.198.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 08:15:33 +0000
Received: by rv-out-0506.google.com with SMTP id f9so485418rvb.4
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 00:16:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=jIzDQ/O9CionSNrhGgXedX/VkmnD1pGJoESqVU1d96g=;
        b=XP2+1yESMWpqWRh54qFPa74rUfnp1xHAmGWE2hhbiQtfrovQ4iKdpgtzdeYHaDhGPX
         7iG4Wnlo0bzytLCpU1hxNu2FdqJmBfmcKmOH+s9aJ0TO5hbrdUv+xJ99F5yVpAgLAlOy
         Ey81AqZwO3LoAQsd4c84zWIPb4Zb7wwLVEycM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=V2bHDMHO9DHjT3JRR/uAxVjSg6kDfC2XQv2UuVjOuKHPS/0O6f+G1Peqt8kkV78YqO
         8ZsmHlQUIxaj8sqoAp76xjPACw9XXCu771iyQS1XeO9gcJHOF4XZnkrpg8olGKzmWl04
         tJOmTDWVhu/654ECQbDKMeT1prLHqkNvubZCg=
Received: by 10.141.89.13 with SMTP id r13mr449440rvl.214.1227082577334;
        Wed, 19 Nov 2008 00:16:17 -0800 (PST)
Received: by 10.141.209.18 with HTTP; Wed, 19 Nov 2008 00:16:17 -0800 (PST)
Message-ID: <74f928500811190016n5e0ebademddd2976cf0f07120@mail.gmail.com>
Date: Wed, 19 Nov 2008 10:16:17 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching repeating fields
In-Reply-To: <2dab92100811181349n2ffb743fgaefb05b2d6f5adeb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56003_15866073.1227082577331"
References: <2dab92100811180948r466974c2q8df574edee75fce9@mail.gmail.com>
	 <8c4e68610811181206g1a713b59m5b4fc37e6a2e1966@mail.gmail.com>
	 <2dab92100811181329t7f9ade6ao490c5fa957947dd0@mail.gmail.com>
	 <2dab92100811181349n2ffb743fgaefb05b2d6f5adeb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_56003_15866073.1227082577331
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you don't have a lot of entries for each invoice you can duplicate the
invoice for each entry - you'll have some field duplications (and bigger
index size) between the different invoices but it'll be easy to find exactly
what you want.

If you have too many different values, I built a solution somewhat similiar
to what Chris suggested.
I treat all the the extra data you describe as metadata and store it in
parallel fields. your example becomes:

invoice_id: 1234
invoice_description:(some text)
employee_id: 5, 8, 12
comment_type: request_for_approval, redirection, approval, please approve
invoice
ts:200811181012, 200811181015, 200811181340
Of course you'll have to make sure each field contains exactly the same
number of tokens.
In order to search the index I use something which I'm not sure is the best
alternative but still gives good performance:
I run a span query on one field (for example employee_id=8) and then fetch
the other fields and check the same position (for example check the
comment_type at the 2nd position).

Since I need to know what is the data in all those other fields even if they
were not present in the query, I can't run the "modified" PhraseQuery even
if existed, since it will return only the matched doc number but not the
data in the parallel fields.

 Eran.


On Tue, Nov 18, 2008 at 11:49 PM, Mark Ferguson
<mark.a.ferguson@gmail.com>wrote:

> I'll provide a better example, perhaps it will help in formulating a
> solution.
>
> Suppose I am designing an index that stores invoices. One document
> corresponds to one invoice, which has a unique id. Any number of employees
> can make comments on the invoices, and comments have different
> classifications (request_for_approval, redirection, approval,
> miscellaneous). Each comment is timestamped. An invoice also contains a
> long
> description that is indexed and is stored.
>
> So an example document may look like this:
>
> invoice_id: 1234
> invoice_description:(some text)
> employee_id: 5
> employee_id: 8
> employee_id: 12
> comment_type: request_for_approval
> comment_type: redirection
> comment_type: approval
> comment: please approve invoice
> comment: sending invoice to sales
> comment: invoice approved
> ts:200811181012
> ts:200811181015
> ts:200811181340
>
> I want to be able to search by any number of these fields. For example, I
> may want all of employee 5's requests for approvals from today.
>
> It may seem like it would be simpler to just have two separate indexes: a
> comments index and an invoice index. But I also want to be able to search
> the invoice description along with the comments. I could set the
> granularity
> of the index to the comments level, but then I am duplicating a lot of text
> in the invoice description. Also, I only care about returning the invoice,
> so I will have to merge results if the granularity is set to the comments
> level, which will ruin Lucene's scoring (?).
>
> This is a made-up example, but I think it describes pretty thoroughly the
> problem I'm trying to solve. In my real world problem, I'm storing the
> full-text of web pages, and I really don't want to be duplicating that much
> text to set the granularity lower.
>
> Mark Ferguson
>
>
> On Tue, Nov 18, 2008 at 2:29 PM, Mark Ferguson <mark.a.ferguson@gmail.com
> >wrote:
>
> > Thanks for the suggestion, but I think I will need a more robust
> solution,
> > because this will only work with pairs of fields. I should have specified
> > that the example I gave was somewhat contrived, but in practice there
> could
> > be more than two parallel fields. I'm trying to find a general solution
> that
> > I can apply to any number of parallel fields holding any kind of data.
> >
> > I was thinking of trying something along the lines of a multi-value
> field.
> > So for example, I could have:
> >
> > page_user_title: ajax|news (where | is a field separator)
> >
> > The problem is I don't know how to formulate the query that would be
> > equivalent to +username:ajax +page_title:news, or if it's even possible.
> (I
> > should also mention that I am creating the queries programmatically, not
> > using the query parser, so anything goes).
> >
> > Any other ideas?
> >
> > Mark Ferguson
> >
> >
> >
> > On Tue, Nov 18, 2008 at 1:06 PM, Ian Lea <ian.lea@gmail.com> wrote:
> >
> >> How about using variable field names?
> >>
> >>  url: http://www.cnn.com/
> >>  page_description: cnn breaking news
> >>  page_title_ajax: news
> >>  page_title_paris: cnn news
> >>  page_title_daniel: homepage
> >>  username: ajax
> >>  username: paris
> >>  username: daniel
> >>
> >> and search for +user:ajax +page_title_ajax:news or maybe just
> >> page_title_ajax:news.  Might not even need to store user.
> >>
> >>
> >> --
> >> Ian.
> >>
> >>
> >> On Tue, Nov 18, 2008 at 5:48 PM, Mark Ferguson
> >> <mark.a.ferguson@gmail.com> wrote:
> >> > Hello,
> >> >
> >> > I am designing an index in which one url corresponds to one document.
> >> Each
> >> > document also contains multiple parallel repeating fields. For
> example:
> >> >
> >> > Document 1:
> >> >  url: http://www.cnn.com/
> >> >  page_description: cnn breaking news
> >> >  page_title: news
> >> >  page_title: cnn news
> >> >  page_titel: homepage
> >> >  username: ajax
> >> >  username: paris
> >> >  username: daniel
> >> >
> >> > In this contrived example, user 'ajax' have saved the URL with the
> page
> >> > title 'news', 'paris' has saved it with 'cnn news', and 'daniel' has
> >> saved
> >> > it with 'homepage'.
> >> >
> >> > What I need to be able to do is perform a search for a particular user
> >> and a
> >> > particular title, but they must occur together. For example,
> +user:ajax
> >> > +page_title:news would return this document, but +user:ajax
> >> > +page_title:homepage would not.
> >> >
> >> > I am open to changing the design of the document (i.e. using repeating
> >> > fields isn't required), but I do need to have one document per url. I
> am
> >> > looking for suggestions for a strategy on implementing this
> requirement.
> >> >
> >> > Thanks,
> >> >
> >> > Mark Ferguson
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>

------=_Part_56003_15866073.1227082577331--

From java-user-return-37260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 09:04:56 2008
Return-Path: <java-user-return-37260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7453 invoked from network); 19 Nov 2008 09:04:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 09:04:56 -0000
Received: (qmail 7018 invoked by uid 500); 19 Nov 2008 09:04:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6978 invoked by uid 500); 19 Nov 2008 09:04:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6967 invoked by uid 99); 19 Nov 2008 09:04:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 01:04:56 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 09:03:33 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 93AED1B2E66
	for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 04:01:08 -0500 (EST)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by compute2.internal (MEProxy); Wed, 19 Nov 2008 04:01:08 -0500
X-Sasl-enc: bgKISJG63Cua2wfj5uFgYxPL4DAajkBXTUKiUYJZq1FE 1227085268
Received: from [192.168.123.210] (unknown [86.43.104.130])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 0B6ADD69E
	for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 04:01:07 -0500 (EST)
Message-ID: <4923D5D2.70703@boboco.ie>
Date: Wed, 19 Nov 2008 09:01:06 +0000
From: Eric Bowman <ebowman@boboco.ie>
User-Agent: Thunderbird 2.0.0.17 (X11/20081025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: 2.4 Performance
References: <20081119023901.43C57FCA6@nigiri.triplehelix.org>
In-Reply-To: <20081119023901.43C57FCA6@nigiri.triplehelix.org>
X-Enigmail-Version: 0.95.7
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

lucene@triplehelix.org wrote:
> On an index of around 20 gigs I've been seeing a performance drop of
> around 35% after upgrading to 2.4 (measured on ~10000 requests
> identical requests, executed in parallel against a threaded lucene /
> apache setup, after a roughly 10000 query warmup). The principal
> changes I've made so far are just to switch to NIOFSDirectories and
> use read-only index readers.
>
> Our design is roughly as follows: we have some pre-query filters,
> queries typically involving around 25 clauses, and some
> post-processing of hits. We collect counts and filter post query using
> a hit collector, which uses the (now deprecated) bits() method of
> Filters.
>
> I looked at converting us to use the new DocIdSet infrastructure (to
> gain the supposed 30% speed bump), but this seems to be somewhat
> problematic as there is no guarantee for whether we will get back a
> set we can do binary operations on (for example, if we get back a
> SortedVIntList, we're pretty much out of luck - the cardinality of the set
> is large (as it's a sortedvintlist), so we can't coerce it into
> another type, and it doesn't have the set operations we need to use it
> directly.
>
> Has anyone else seen this? Is there anything else
> we should be changing in the upgrade to 2.4?
>   

We are seeing something very similar to this.  We had an IndexReader per
core, and performance was ok.  Since upgrading to 2.4, performance has
gone down, in some cases quite dramatically.  We switched to a single
IndexReader, and things got better.

We are now also looking at NIOFSDirectory after noticing a lot of
contention in IndexReader, but that didn't help as much as we had hoped.

To be honest I'm considering trying to downgrade back to 2.3 for now,
this is looking like a step backwards for us.

Thanks for any suggestions,
Eric

-- 
Eric Bowman
Boboco Ltd
ebowman@boboco.ie
http://www.boboco.ie/ebowman/pubkey.pgp
+35318394189/+353872801532


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 10:01:18 2008
Return-Path: <java-user-return-37261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35015 invoked from network); 19 Nov 2008 10:01:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 10:01:17 -0000
Received: (qmail 69885 invoked by uid 500); 19 Nov 2008 10:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69856 invoked by uid 500); 19 Nov 2008 10:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69845 invoked by uid 99); 19 Nov 2008 10:01:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 02:01:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [91.121.16.47] (HELO ns23917.ovh.net) (91.121.16.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 09:59:56 +0000
Received: (qmail 27134 invoked by uid 508); 19 Nov 2008 10:02:12 -0000
Received: from unknown (HELO ?192.168.1.44?) (88.182.17.109)
  by ns23917.ovh.net with AES256-SHA encrypted SMTP; 19 Nov 2008 10:02:12 -0000
Message-ID: <4923E3C3.8020304@spotter.com>
Date: Wed, 19 Nov 2008 11:00:35 +0100
From: David Causse <dcausse@spotter.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: InstatiatedIndex questions
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Here are some differences I noticed between InstanciatedIndex and 
RAMDirectory :

- RAMDirectory seems to do a reset on tokenStreams the first time, this 
permits to initialise some objects before starting streaming, 
InstanciatedIndex does not.
- I can Serialize a RAMDirectory but I cannot on a InstantiatedIndex 
because of : java.io.NotSerializableException: 
org.apache.lucene.index.TermVectorOffsetInfo

Do you consider this as problems or normal features?

Thank you.

David.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 10:15:59 2008
Return-Path: <java-user-return-37262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42154 invoked from network); 19 Nov 2008 10:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 10:15:59 -0000
Received: (qmail 82805 invoked by uid 500); 19 Nov 2008 10:16:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82776 invoked by uid 500); 19 Nov 2008 10:16:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82765 invoked by uid 99); 19 Nov 2008 10:16:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 02:16:01 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 10:14:36 +0000
Received: by yx-out-2324.google.com with SMTP id 3so1319186yxj.5
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 02:15:10 -0800 (PST)
Received: by 10.90.82.8 with SMTP id f8mr683423agb.34.1227089709664;
        Wed, 19 Nov 2008 02:15:09 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b45sm8489309hsa.10.2008.11.19.02.15.08
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 19 Nov 2008 02:15:08 -0800 (PST)
Message-Id: <124A69B7-A63E-43A9-92FE-B3089B33F4E3@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <4923D5D2.70703@boboco.ie>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: 2.4 Performance
Date: Wed, 19 Nov 2008 05:15:06 -0500
References: <20081119023901.43C57FCA6@nigiri.triplehelix.org> <4923D5D2.70703@boboco.ie>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Can you describe the queries in more detail?  Can you narrow down  
exactly which operations / types of queries are substantially slower?

Also, I'm assuming both of you are NOT on Windows?  NIOFSDirectory has  
poor performance on Windows due to this bug in Sun's JVM:

     http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6265734

Mike

Eric Bowman wrote:

> lucene@triplehelix.org wrote:
>> On an index of around 20 gigs I've been seeing a performance drop of
>> around 35% after upgrading to 2.4 (measured on ~10000 requests
>> identical requests, executed in parallel against a threaded lucene /
>> apache setup, after a roughly 10000 query warmup). The principal
>> changes I've made so far are just to switch to NIOFSDirectories and
>> use read-only index readers.
>>
>> Our design is roughly as follows: we have some pre-query filters,
>> queries typically involving around 25 clauses, and some
>> post-processing of hits. We collect counts and filter post query  
>> using
>> a hit collector, which uses the (now deprecated) bits() method of
>> Filters.
>>
>> I looked at converting us to use the new DocIdSet infrastructure (to
>> gain the supposed 30% speed bump), but this seems to be somewhat
>> problematic as there is no guarantee for whether we will get back a
>> set we can do binary operations on (for example, if we get back a
>> SortedVIntList, we're pretty much out of luck - the cardinality of  
>> the set
>> is large (as it's a sortedvintlist), so we can't coerce it into
>> another type, and it doesn't have the set operations we need to use  
>> it
>> directly.
>>
>> Has anyone else seen this? Is there anything else
>> we should be changing in the upgrade to 2.4?
>>
>
> We are seeing something very similar to this.  We had an IndexReader  
> per
> core, and performance was ok.  Since upgrading to 2.4, performance has
> gone down, in some cases quite dramatically.  We switched to a single
> IndexReader, and things got better.
>
> We are now also looking at NIOFSDirectory after noticing a lot of
> contention in IndexReader, but that didn't help as much as we had  
> hoped.
>
> To be honest I'm considering trying to downgrade back to 2.3 for now,
> this is looking like a step backwards for us.
>
> Thanks for any suggestions,
> Eric
>
> -- 
> Eric Bowman
> Boboco Ltd
> ebowman@boboco.ie
> http://www.boboco.ie/ebowman/pubkey.pgp
> +35318394189/+353872801532
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 11:26:43 2008
Return-Path: <java-user-return-37263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61923 invoked from network); 19 Nov 2008 11:26:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 11:26:43 -0000
Received: (qmail 73966 invoked by uid 500); 19 Nov 2008 11:26:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73930 invoked by uid 500); 19 Nov 2008 11:26:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73919 invoked by uid 99); 19 Nov 2008 11:26:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 03:26:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.167.42.127] (HELO cs.joensuu.fi) (193.167.42.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 11:25:19 +0000
Received: from cs.joensuu.fi (localhost [127.0.0.1])
	by cs.joensuu.fi (8.13.8/8.13.0) with ESMTP id mAJBIZ0e028701
	for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 13:18:35 +0200 (EET)
Received: from localhost (pnykyri@localhost)
	by cs.joensuu.fi (8.13.8/8.13.0/Submit) with ESMTP id mAJBIYYt028698
	for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 13:18:34 +0200 (EET)
Date: Wed, 19 Nov 2008 13:18:34 +0200 (EET)
From: Pekka Nykyri <pnykyri@cs.joensuu.fi>
To: java-user@lucene.apache.org
Subject: Re: Special characters prevent entity being indexed
In-Reply-To: <359a92830811180827tbe72111w49d0dcc17ceeeaa5@mail.gmail.com>
Message-ID: <Pine.GSO.4.64.0811191302030.27694@cs.joensuu.fi>
References: <Pine.GSO.4.64.0811181704500.1679@cs.joensuu.fi>
 <359a92830811180827tbe72111w49d0dcc17ceeeaa5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-559023410-851401618-1227093514=:27694"
X-Virus-Checked: Checked by ClamAV on apache.org

---559023410-851401618-1227093514=:27694
Content-Type: TEXT/PLAIN; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: QUOTED-PRINTABLE


Thanks for the quick answer!

I haven't specified the analyzer so it should be the StandardAnalyzer. I=20
forgot to mention that I'm using Lucene via Hibernate seach where I can=20
easily define the fields in the hibernate POJO-classes. But as far as I=20
know this shouldn't change things that much because I can use the core=20
Lucene.

And I've used Luke already and the indexed special characters are=20
represented as "&#161;"(=A1) and "&#191;" (=BF) in the index.

But the analyzer should have nothing to do with the problem currently=20
because the problem is that, those entities that start with "=BF" don't get=
=20
indexed at all. And some of those starting with "=A1" get indexed and some=
=20
don't. Currently 29 entities don't get indexed at all (8900 in total).

I don't need to be able to search those special characters. I just need=20
those entities getting indexed. The other information in those entities is=
=20
more important and it's the names (starting with those special characters)=
=20
that seems to make those entities not getting indexed.

Could I fix this using some analyzer during indexing? Actually I tried=20
using custom analyzer with "ISOLatin1AccentFilter()" but it didn't change=
=20
anything. In hibernate search the analyzer is spesified in a property file=
=20
or in the POJO-classes but I didn't seem to get it to work. The text went=
=20
to the index exactly the same way (when I see it with Luke) like before=20
and the same entities were still missing.

Good solution for me would be that those special character would get=20
deleted alltogether from the index so maybe then they wouldn't cause any=20
trouble. Like "=A1Fant=E1stico!- blaaba" would be perfectly okay looking li=
ke=20
"Fantastico- blaaba".

Thanks again in advance,
pn

On Tue, 18 Nov 2008, Erick Erickson wrote:

> What analyzer are you using at index and search time? Typical problems
> include:
> using an analyzer that doesn't understand accented chars (StandardAnalyze=
r
> for instance)
> using a different anlyzer during search and index.
>
> Search the user list for "accent" and you'll find this kind of problem
> discussed,
> and if that doesn't help we need to know what analyzers you are using and
> what behavior you really want. Typically, for instance, *requiring* a use=
r
> to
> type the upside-down exclamation point to get a match on this field would
> be considered incorrect.
>
> Also, you'd be helped a lot be getting a copy of Luke and examining your
> index
> to see exactly what's been indexed, it'll reveal a lot.
>
> Best
> Erick
>
> On Tue, Nov 18, 2008 at 10:05 AM, Pekka Nykyri <pnykyri@cs.joensuu.fi>wro=
te:
>
>> Hi!
>>
>> I'm having problems with entities including special characters (Spanish
>> language) not getting indexed.
>>
>> I haven't been able to find the the reason why some entities get indexed
>> while some don't.
>>
>> I have 3 fields that (currently) hold the same value. The value for the
>> fields is example "=A1Fant=E1stico!- blaaba". Then when I change ONE of =
the
>> three values to "=A1Fant=E1stico! - blaaba", the entity gets indexed. So
>> chanching only one field makes it to index.
>>
>> But the bigger problem with this is, that I have almost (other fields ar=
e
>> almost similar and I don't think they cause the problem) similar entity,
>> with exactly the same three "=A1Fant=E1stico!- blaaba" -fields and it ge=
ts
>> indexed normally. Even though the "critical" fields are exactly the same=
=2E
>>
>> And also all entities where three fields start with "upside down ?"-mark
>> doesn't get indexed.
>>
>> I'm really confused with the problem because I don't seem to be able to
>> find any logic some entities not being indexed even though they are simi=
lar
>> to some other. And changing only one value of the three makes it index.
>>
>> Sorry for a really messy message but I just can't explain it more clearl=
y
>> now.
>>
>> Thanks in advance,
>> pn
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>

---559023410-851401618-1227093514=:27694
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
---559023410-851401618-1227093514=:27694--

From java-user-return-37264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 13:15:48 2008
Return-Path: <java-user-return-37264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96929 invoked from network); 19 Nov 2008 13:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 13:15:48 -0000
Received: (qmail 8667 invoked by uid 500); 19 Nov 2008 13:15:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8634 invoked by uid 500); 19 Nov 2008 13:15:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8622 invoked by uid 99); 19 Nov 2008 13:15:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 05:15:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 13:14:26 +0000
Received: by fk-out-0910.google.com with SMTP id 18so3948254fkq.5
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 05:15:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=P+7Cz1aJtPBAF02e1qNTV2d9wuutWn/WZhYH1s9SIWc=;
        b=gGs+UdALONKusvTMV4BBMIEHs5sVpv6ApPyNQm/W8CopryM1yB34dPM96T4Oo/iApK
         N9L5xrnPsv1WKpAM6LEf/qjFO0qqj5wPaRLRzUzX61xZAQWlAmuoqg0FWOfbbCR/23Mi
         Zkn5YbEfd7/qfQcrEVPqgDR2TRtFciWeC/ALs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=WCaZfDIgvuduED3tAwrc+7Qwwr784tbauXd6BrZ0W1fhBDmkLR+4opwPQM0F9Bw0HS
         KDFYwoWDQtxOHncKxlOdsyx1UwXky/xPa2//c60JvOWnW+eT84UqF10jCR7lleV187rb
         x1Q2LzgnGg30Ps+GGujwtB4Mqy5s9tm87jH14=
Received: by 10.187.252.4 with SMTP id e4mr189803fas.7.1227100500181;
        Wed, 19 Nov 2008 05:15:00 -0800 (PST)
Received: by 10.187.200.20 with HTTP; Wed, 19 Nov 2008 05:15:00 -0800 (PST)
Message-ID: <9fc755c20811190515n33fda814q3b8babf4e0e69e0@mail.gmail.com>
Date: Wed, 19 Nov 2008 14:15:00 +0100
From: "karl wettin" <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: InstatiatedIndex questions
In-Reply-To: <4923E3C3.8020304@spotter.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4923E3C3.8020304@spotter.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi David,

thanks for the report! I suppose you speak of IndexWriter vs
InstantiatedIndexWriter? These are definitely considered discrepancy
problems. I've created a new issue in the tracker:
http://issues.apache.org/jira/browse/LUCENE-1462

For what reason do you try to serialize the InstantatedIndex? Could
you perhaps use FSDirectory and IndexWriter instead, and then each
time you update that index you replace your InstantiatedIndex with a
new one constructed using the IndexReader argumented constructor of
InstantiatedIndex?

I'm afraid that I'm rather busy at the moment but I'll try to fix it
ASAP. It should however be rather easy to fix if you just want to
solve the specific problem: reset all pre-tokenized streams before
they are tokenized in InstantiatedIndexWriter#addDocument and make
TermVectorOffsetInfo implement Serializable.


     karl

On Wed, Nov 19, 2008 at 11:00 AM, David Causse <dcausse@spotter.com> wrote:
> Hi,
>
> Here are some differences I noticed between InstanciatedIndex and
> RAMDirectory :
>
> - RAMDirectory seems to do a reset on tokenStreams the first time, this
> permits to initialise some objects before starting streaming,
> InstanciatedIndex does not.
> - I can Serialize a RAMDirectory but I cannot on a InstantiatedIndex because
> of : java.io.NotSerializableException:
> org.apache.lucene.index.TermVectorOffsetInfo
>
> Do you consider this as problems or normal features?
>
> Thank you.
>
> David.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 13:52:30 2008
Return-Path: <java-user-return-37265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15009 invoked from network); 19 Nov 2008 13:52:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 13:52:30 -0000
Received: (qmail 38397 invoked by uid 500); 19 Nov 2008 13:52:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37809 invoked by uid 500); 19 Nov 2008 13:52:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37798 invoked by uid 99); 19 Nov 2008 13:52:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 05:52:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 13:51:10 +0000
Received: by ug-out-1314.google.com with SMTP id c2so592874ugf.23
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 05:51:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=73HlO8xPlqImfGXc5yindanZoTPt/vVfw+P7J1qIhI0=;
        b=EfXiiIeVes9KlrlfykgOj/0Ayfhw2g7Bn0F2WCV/cRXpEIxDg7Bo461WM8jJgxtN0c
         LVYEGa2rkcm5vssEui6/G7S/YhahDfuGQN8oXwshlQ5UQ78spvIAFHHHtNzZX6WMWI4A
         LPfZPT1veXTrWJvW/dveFSXel9RnINAgmUOhg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wdjlDNrg6ZoE1z7PCAwxnou7EJIyyY1R0Ni0wXsPNIVeAjLEdBMS3jeWEaQF0Mq1TI
         tXFhXNhwOi47AF3Fgy1HgMeceAHtHgiI8vH/xpodBWDOlkp+x+L9ScT/q4bf7Uc77son
         SrhlG/mTmGO0qFRucM84kxIeCYCEL97Tn3hBw=
Received: by 10.86.4.2 with SMTP id 2mr731720fgd.43.1227102703645;
        Wed, 19 Nov 2008 05:51:43 -0800 (PST)
Received: by 10.86.98.8 with HTTP; Wed, 19 Nov 2008 05:51:43 -0800 (PST)
Message-ID: <359a92830811190551j281256d7v6f00cea9d096018d@mail.gmail.com>
Date: Wed, 19 Nov 2008 08:51:43 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Special characters prevent entity being indexed
In-Reply-To: <Pine.GSO.4.64.0811191302030.27694@cs.joensuu.fi>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57749_7966964.1227102703634"
References: <Pine.GSO.4.64.0811181704500.1679@cs.joensuu.fi>
	 <359a92830811180827tbe72111w49d0dcc17ceeeaa5@mail.gmail.com>
	 <Pine.GSO.4.64.0811191302030.27694@cs.joensuu.fi>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_57749_7966964.1227102703634
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm going to have to punt on what Hibernate does/doesn't do since I have no
experience there.

But in general analyzers are very important. StandardAnalyzer, for instance=
,
tries
to recognize e-mail addresses. So it'll create some very interesting tokens=
,
some
that are unexpected unless you really know the guts of the tokenizer
underneath.

What I expect is really happening is that some of your tokens are getting
munged
in ways you don't expect and that they're getting indexed, but you're not
finding
the munged version because they're somewhere else in the index. Either that
or
you're getting some sort of error condition that you're throwing away.....

So here's the approach I would take. Make a list of your tokens that you're
having
trouble with and create an index with *only* those tokens, to see whether
they
really get into the index or not.

Make really, really sure you use the same analyzer BOTH at index and search
time. I've seen ISOLatin1AccentFilter() recommended, but I confess that I
don't know the underlying details.

Perhaps you could create your own filter/analyzer based on the analyzer of
your
choice, override the next() method and spit out the tokens that are produce=
d
to examine the results closely.

Anyway, general advice that probably doesn't address your issue, I know. Bu=
t
the best I have this morning. I'll appeal to people who understand Hibernat=
e
now <G>.

Best
Erick

On Wed, Nov 19, 2008 at 6:18 AM, Pekka Nykyri <pnykyri@cs.joensuu.fi> wrote=
:

>
> Thanks for the quick answer!
>
> I haven't specified the analyzer so it should be the StandardAnalyzer. I
> forgot to mention that I'm using Lucene via Hibernate seach where I can
> easily define the fields in the hibernate POJO-classes. But as far as I k=
now
> this shouldn't change things that much because I can use the core Lucene.
>
> And I've used Luke already and the indexed special characters are
> represented as "&#161;"(=A1) and "&#191;" (=BF) in the index.
>
> But the analyzer should have nothing to do with the problem currently
> because the problem is that, those entities that start with "=BF" don't g=
et
> indexed at all. And some of those starting with "=A1" get indexed and som=
e
> don't. Currently 29 entities don't get indexed at all (8900 in total).
>
> I don't need to be able to search those special characters. I just need
> those entities getting indexed. The other information in those entities i=
s
> more important and it's the names (starting with those special characters=
)
> that seems to make those entities not getting indexed.
>
> Could I fix this using some analyzer during indexing? Actually I tried
> using custom analyzer with "ISOLatin1AccentFilter()" but it didn't change
> anything. In hibernate search the analyzer is spesified in a property fil=
e
> or in the POJO-classes but I didn't seem to get it to work. The text went=
 to
> the index exactly the same way (when I see it with Luke) like before and =
the
> same entities were still missing.
>
> Good solution for me would be that those special character would get
> deleted alltogether from the index so maybe then they wouldn't cause any
> trouble. Like "=A1Fant=E1stico!- blaaba" would be perfectly okay looking =
like
> "Fantastico- blaaba".
>
> Thanks again in advance,
> pn
>
>
> On Tue, 18 Nov 2008, Erick Erickson wrote:
>
>  What analyzer are you using at index and search time? Typical problems
>> include:
>> using an analyzer that doesn't understand accented chars (StandardAnalyz=
er
>> for instance)
>> using a different anlyzer during search and index.
>>
>> Search the user list for "accent" and you'll find this kind of problem
>> discussed,
>> and if that doesn't help we need to know what analyzers you are using an=
d
>> what behavior you really want. Typically, for instance, *requiring* a us=
er
>> to
>> type the upside-down exclamation point to get a match on this field woul=
d
>> be considered incorrect.
>>
>> Also, you'd be helped a lot be getting a copy of Luke and examining your
>> index
>> to see exactly what's been indexed, it'll reveal a lot.
>>
>> Best
>> Erick
>>
>> On Tue, Nov 18, 2008 at 10:05 AM, Pekka Nykyri <pnykyri@cs.joensuu.fi
>> >wrote:
>>
>>  Hi!
>>>
>>> I'm having problems with entities including special characters (Spanish
>>> language) not getting indexed.
>>>
>>> I haven't been able to find the the reason why some entities get indexe=
d
>>> while some don't.
>>>
>>> I have 3 fields that (currently) hold the same value. The value for the
>>> fields is example "=A1Fant=E1stico!- blaaba". Then when I change ONE of=
 the
>>> three values to "=A1Fant=E1stico! - blaaba", the entity gets indexed. S=
o
>>> chanching only one field makes it to index.
>>>
>>> But the bigger problem with this is, that I have almost (other fields a=
re
>>> almost similar and I don't think they cause the problem) similar entity=
,
>>> with exactly the same three "=A1Fant=E1stico!- blaaba" -fields and it g=
ets
>>> indexed normally. Even though the "critical" fields are exactly the sam=
e.
>>>
>>> And also all entities where three fields start with "upside down ?"-mar=
k
>>> doesn't get indexed.
>>>
>>> I'm really confused with the problem because I don't seem to be able to
>>> find any logic some entities not being indexed even though they are
>>> similar
>>> to some other. And changing only one value of the three makes it index.
>>>
>>> Sorry for a really messy message but I just can't explain it more clear=
ly
>>> now.
>>>
>>> Thanks in advance,
>>> pn
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

------=_Part_57749_7966964.1227102703634--

From java-user-return-37266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 14:02:43 2008
Return-Path: <java-user-return-37266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20453 invoked from network); 19 Nov 2008 14:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 14:02:43 -0000
Received: (qmail 50085 invoked by uid 500); 19 Nov 2008 14:02:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50055 invoked by uid 500); 19 Nov 2008 14:02:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50044 invoked by uid 99); 19 Nov 2008 14:02:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 06:02:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [91.121.16.47] (HELO ns23917.ovh.net) (91.121.16.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 14:01:22 +0000
Received: (qmail 28870 invoked by uid 508); 19 Nov 2008 14:03:39 -0000
Received: from unknown (HELO ?192.168.1.44?) (88.182.17.109)
  by ns23917.ovh.net with AES256-SHA encrypted SMTP; 19 Nov 2008 14:03:39 -0000
Message-ID: <49241C5A.9070807@spotter.com>
Date: Wed, 19 Nov 2008 15:02:02 +0100
From: David Causse <dcausse@spotter.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: InstatiatedIndex questions
References: <4923E3C3.8020304@spotter.com> <9fc755c20811190515n33fda814q3b8babf4e0e69e0@mail.gmail.com>
In-Reply-To: <9fc755c20811190515n33fda814q3b8babf4e0e69e0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Karl,

The reset() problem is not very problematic I can adapt our TokenStreams.
For the Serialization : as we need to share very small indexes (200 docs 
max) in a cluster we need to serialize something.
I was planning to use the Java Serialization with maybe some compression 
on the resulting byte[] and as InstantiatedIndex is Serializable I was 
hoping to use the perf gain of your implementation in our context.
I will fix my working copy as you suggested.

Thank you.

David.

karl wettin a crit :
> Hi David,
>
> thanks for the report! I suppose you speak of IndexWriter vs
> InstantiatedIndexWriter? These are definitely considered discrepancy
> problems. I've created a new issue in the tracker:
> http://issues.apache.org/jira/browse/LUCENE-1462
>
> For what reason do you try to serialize the InstantatedIndex? Could
> you perhaps use FSDirectory and IndexWriter instead, and then each
> time you update that index you replace your InstantiatedIndex with a
> new one constructed using the IndexReader argumented constructor of
> InstantiatedIndex?
>
> I'm afraid that I'm rather busy at the moment but I'll try to fix it
> ASAP. It should however be rather easy to fix if you just want to
> solve the specific problem: reset all pre-tokenized streams before
> they are tokenized in InstantiatedIndexWriter#addDocument and make
> TermVectorOffsetInfo implement Serializable.
>
>
>      karl
>
> On Wed, Nov 19, 2008 at 11:00 AM, David Causse <dcausse@spotter.com> wrote:
>   
>> Hi,
>>
>> Here are some differences I noticed between InstanciatedIndex and
>> RAMDirectory :
>>
>> - RAMDirectory seems to do a reset on tokenStreams the first time, this
>> permits to initialise some objects before starting streaming,
>> InstanciatedIndex does not.
>> - I can Serialize a RAMDirectory but I cannot on a InstantiatedIndex because
>> of : java.io.NotSerializableException:
>> org.apache.lucene.index.TermVectorOffsetInfo
>>
>> Do you consider this as problems or normal features?
>>
>> Thank you.
>>
>> David.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 15:33:53 2008
Return-Path: <java-user-return-37267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60857 invoked from network); 19 Nov 2008 15:33:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 15:33:53 -0000
Received: (qmail 25191 invoked by uid 500); 19 Nov 2008 15:33:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25159 invoked by uid 500); 19 Nov 2008 15:33:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25071 invoked by uid 99); 19 Nov 2008 15:33:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 07:33:50 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 15:32:27 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L2p3H-00041M-Km
	for java-user@lucene.apache.org; Wed, 19 Nov 2008 07:33:11 -0800
Message-ID: <20582295.post@talk.nabble.com>
Date: Wed, 19 Nov 2008 07:33:11 -0800 (PST)
From: excitingComm2 <lucene@mt2009.com>
To: java-user@lucene.apache.org
Subject: Spread of lucene score
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: lucene@mt2009.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi everybody,

as far as I know the lucene score is an arbitrary number between 0.0 and
1.0.
Is this correct, that the scores in my resultset are always normalised to
this spread or is it possible to get higher scores?

Regards,
John W.
-- 
View this message in context: http://www.nabble.com/Spread-of-lucene-score-tp20582295p20582295.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 15:53:41 2008
Return-Path: <java-user-return-37268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67885 invoked from network); 19 Nov 2008 15:53:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 15:53:40 -0000
Received: (qmail 58319 invoked by uid 500); 19 Nov 2008 15:53:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58278 invoked by uid 500); 19 Nov 2008 15:53:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57872 invoked by uid 99); 19 Nov 2008 15:53:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 07:53:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 15:52:10 +0000
Received: by yx-out-2324.google.com with SMTP id 3so8228yxj.5
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 07:52:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=LNM9OaFZrdujG3VmXoYkhCtJjM2hntPXkR3C5TVmQtw=;
        b=kjCqSHxkFIyWtCtozo7+oD18deKxW8GVyAb31Xk2HuLnqWcaUinbr5BXy+DFzubbs+
         aDOJmmK6+V2pFOKIZFV3K8Eu9yWvLiHvmn1KAB2gAjhZ4TSIYPxr85JikuiNNsIVHb2C
         yjYcEQPs/k4ArTGodD2pHJUa44+vepV90GEV4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=FoYnGLT1nVDiTL5BT/wP5xq6omb0Y/8MbU5d8k7seHZtftudrmyoNiNH0cEVGaXOo0
         3IPlZiN4tfSoJQncpyjCI8jVPQW55Yot3TVA0lU+47XVEOYpkSfzmTubbLOF1YipEHB5
         nuHklv11KvHK3n89VICmvVz/jjL3pScOJLuyw=
Received: by 10.90.68.20 with SMTP id q20mr844046aga.99.1227109964973;
        Wed, 19 Nov 2008 07:52:44 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 9sm5599919agc.31.2008.11.19.07.52.44
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 19 Nov 2008 07:52:44 -0800 (PST)
Message-ID: <4924364D.8040803@gmail.com>
Date: Wed, 19 Nov 2008 10:52:45 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Spread of lucene score
References: <20582295.post@talk.nabble.com>
In-Reply-To: <20582295.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

excitingComm2 wrote:
> Hi everybody,
>
> as far as I know the lucene score is an arbitrary number between 0.0 and
> 1.0.
> Is this correct, that the scores in my resultset are always normalised to
> this spread or is it possible to get higher scores?
>
> Regards,
> John W.
>   
Hits is the class that did the normalizing, and its deprecated. TopDocs 
didn't normalize last I checked, so you could get > 1 from there.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 16:03:14 2008
Return-Path: <java-user-return-37269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74748 invoked from network); 19 Nov 2008 16:03:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 16:03:13 -0000
Received: (qmail 76566 invoked by uid 500); 19 Nov 2008 16:03:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76538 invoked by uid 500); 19 Nov 2008 16:03:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76527 invoked by uid 99); 19 Nov 2008 16:03:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 08:03:15 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.200.173 as permitted sender)
Received: from [209.85.200.173] (HELO wf-out-1314.google.com) (209.85.200.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 16:01:53 +0000
Received: by wf-out-1314.google.com with SMTP id 28so13515wfc.20
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 08:02:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=Gh91uDkIU0H5NQSXFSTEJeY3e2ePnoblOQAO1Kmflk4=;
        b=Pc/Lx7cqbJ7DaAWS8zB8/ABz5uTbwZ1wCRii4kn9vh6Prk9SWB+/5olvy86OM/heBy
         jZcF0ztPDeJqAIycjAlAn0T2kihnAATeDWGRQRULXkLNUvjNeVSmC4kH3jfIRa3SPqKY
         Erkh81mrI9zi4P2EvRchC6aaqoyHXGZqx/+sU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=mT8YOuBl2fUscGDKkewg6A/i8Jz6jUqbFk6N5ar9Lz8J5RfUCy50/AJeqgo4LOI5Ad
         qsSwA71cx6b9rT67aexOQ5FY7GCKauc1eVJAqs8YayNkSlLBQYetXKjNZzKRxNbZDrax
         OB8URbdzCMhpuAGldixEPJI+pMAH11+y8hOM0=
Received: by 10.142.226.10 with SMTP id y10mr595448wfg.312.1227110557973;
        Wed, 19 Nov 2008 08:02:37 -0800 (PST)
Received: by 10.142.213.3 with HTTP; Wed, 19 Nov 2008 08:02:37 -0800 (PST)
Message-ID: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
Date: Wed, 19 Nov 2008 11:02:37 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: How to search documents taking in account the dates ???
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_104278_17628426.1227110557965"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_104278_17628426.1227110557965
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everybody:

I need to make search with lucene 2.3.2, taking in account the dates,
previously when I build the index I create a date field where I stored the
year in which the document was created, at the search moment I would like to
retrieve documents that have been created before a Year or after a Year, for
example documents before 2002 year o after 2003 year.
It is possible to do that with lucene ???
Regards
Ariel

------=_Part_104278_17628426.1227110557965--

From java-user-return-37270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 16:09:52 2008
Return-Path: <java-user-return-37270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77112 invoked from network); 19 Nov 2008 16:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 16:09:52 -0000
Received: (qmail 97663 invoked by uid 500); 19 Nov 2008 16:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97639 invoked by uid 500); 19 Nov 2008 16:09:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97628 invoked by uid 99); 19 Nov 2008 16:09:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 08:09:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 16:08:31 +0000
Received: by qw-out-2122.google.com with SMTP id 5so5171qwi.53
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 08:09:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=S2Bcu4IkQy5JWDtTi10KTRuC/OEjqoegj8jflnawT1Q=;
        b=O2esQlhzcqY/Ap7JC1DdW6ZCUG+pnltPvbxLuYQvY4hkklaWb4LyiNInrf4FcyixBC
         3ZII/h/CD8UqS8oPN2KRodFAgQR1R9GjDoQ6X1a5okQU9o5QG+dPnG2Dz92bWopIe/9d
         v9P5K+9m1iv49XYGK7PUJjeIhN6tgFN1zfrpA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=WpZaN+M9u9jRZzN/Sp0PS4kMgi2BpeVT8qJZnT/IXUjevfNUFOKnpFGU6o+R/bHu4X
         xOl5YqClk1Gco8KthQpEMb1UV2hB+Dprh4kGxRG81RsMZ4sU0oZH/hOBiDO/SfUkZuOK
         v7sny6C3gyo39jvfocg2aoiyDrr/5GxzlpM8Q=
Received: by 10.214.183.7 with SMTP id g7mr1236118qaf.171.1227110945400;
        Wed, 19 Nov 2008 08:09:05 -0800 (PST)
Received: by 10.214.78.9 with HTTP; Wed, 19 Nov 2008 08:09:05 -0800 (PST)
Message-ID: <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
Date: Wed, 19 Nov 2008 16:09:05 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi - sounds like you need a range query.

http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches


--
Ian.


On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com> wrote:
> Hi everybody:
>
> I need to make search with lucene 2.3.2, taking in account the dates,
> previously when I build the index I create a date field where I stored the
> year in which the document was created, at the search moment I would like to
> retrieve documents that have been created before a Year or after a Year, for
> example documents before 2002 year o after 2003 year.
> It is possible to do that with lucene ???
> Regards
> Ariel
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 16:45:23 2008
Return-Path: <java-user-return-37271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91061 invoked from network); 19 Nov 2008 16:45:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 16:45:23 -0000
Received: (qmail 74040 invoked by uid 500); 19 Nov 2008 16:45:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74009 invoked by uid 500); 19 Nov 2008 16:45:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73998 invoked by uid 99); 19 Nov 2008 16:45:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 08:45:22 -0800
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=HTML_MESSAGE,MSGID_MULTIPLE_AT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of diego.cassinera@mercadolibre.com designates 216.35.213.234 as permitted sender)
Received: from [216.35.213.234] (HELO ironport-inbound02.mercadolibre.com) (216.35.213.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 16:43:58 +0000
Received: from unknown (HELO vplssl2.mercadolibre.com) ([172.16.0.128])
  by ironport-inbound02.mercadolibre.com with ESMTP; 19 Nov 2008 11:44:43 -0500
X-IronPort-AV: i="4.33,631,1220245200"; 
   d="scan'208,217"; a="65621892:sNHT29840412"
Received: from dcassinera (unverified [190.220.33.50]) 
	by vplssl2.mercadolibre.com (SurgeMail 3.9e) with ESMTP id 3243421-1864578 
	for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 11:44:42 -0500 EDT
From: "Diego Cassinera" <diego.cassinera@mercadolibre.com>
To: <java-user@lucene.apache.org>
Subject: altering the value of non indexed fields
Date: Wed, 19 Nov 2008 14:44:51 -0300
Message-ID: <001901c94a6e$87384680$95a8d380$@cassinera@mercadolibre.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001A_01C94A55.61EB0E80"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AclKboY2ZGPJb1pDQ/e6YYCDEysJyg==
Content-Language: es-ar
X-Originating-IP: 190.220.33.50
X-Authenticated-User: diego.cassinera@mercadolibre.com 
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_001A_01C94A55.61EB0E80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello All

=20

I=B4m writing an application to move full text search out of my rdbms.  =
Today
the app hits the db two times.  1) to do the search it self. 2) to =
format
the output of the search results.  In my plan I=B4m moving everything to
lucene documents that contain fields where I will be doing the search on =
and
non indexed fields that will be used for the formatting of the output.  =
The
problem  that I have is that some of these non indexed fields may change
from time to time.  As far as I read on the docs the only way to update
these fields is to delete the document all together and re-index the
document.  This in turn could be a waste of resources because some of my
documents are quite large.  So my question is, is there a way to change =
the
value of these fields without having to re-index the complete document.  =
A
note about by non indexed fields, their size will always remain the same
even do the value may change.

=20

Thank You

Diego


------=_NextPart_000_001A_01C94A55.61EB0E80--

From java-user-return-37272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 16:48:52 2008
Return-Path: <java-user-return-37272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92802 invoked from network); 19 Nov 2008 16:48:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 16:48:52 -0000
Received: (qmail 84079 invoked by uid 500); 19 Nov 2008 16:48:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83127 invoked by uid 500); 19 Nov 2008 16:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83116 invoked by uid 99); 19 Nov 2008 16:48:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 08:48:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 16:47:31 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: How to obtain raw scores?
Date: Wed, 19 Nov 2008 11:47:53 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43032BD784@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to obtain raw scores?
Thread-Index: AclKZpDiXsWaQjwTTgO1wSO2XC64lw==
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,
Is there anyway to obtain a raw hit score?

I understand the deprecated Hits.getScore()
returns normalized scores, relative to each
query.  Is TopDocs.scoreDocs[i].score
also normalized, or raw?

I'd like to compare confidence levels
of hits among different queries.

Thanks.
----
T. "Kuro" Kurosaka, Basis Technology
San Francisco, California, U.S.A.
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 16:53:24 2008
Return-Path: <java-user-return-37273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95205 invoked from network); 19 Nov 2008 16:53:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 16:53:24 -0000
Received: (qmail 95496 invoked by uid 500); 19 Nov 2008 16:53:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95469 invoked by uid 500); 19 Nov 2008 16:53:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95458 invoked by uid 99); 19 Nov 2008 16:53:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 08:53:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 16:52:01 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id mAJGiXYe051555
	for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 17:44:34 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: 2.4 Performance
Date: Wed, 19 Nov 2008 17:44:33 +0100
User-Agent: KMail/1.9.10
References: <20081119023901.43C57FCA6@nigiri.triplehelix.org>
In-Reply-To: <20081119023901.43C57FCA6@nigiri.triplehelix.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811191744.33405.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Op Wednesday 19 November 2008 03:39:01 schreef lucene@triplehelix.org:
...
>
> Our design is roughly as follows: we have some pre-query filters,
> queries typically involving around 25 clauses, and some
> post-processing of hits. We collect counts and filter post query
> using a hit collector, which uses the (now deprecated) bits() method
> of Filters.
>
> I looked at converting us to use the new DocIdSet infrastructure (to
> gain the supposed 30% speed bump), but this seems to be somewhat
> problematic as there is no guarantee for whether we will get back a
> set we can do binary operations on (for example, if we get back a
> SortedVIntList, we're pretty much out of luck - the cardinality of
> the set is large (as it's a sortedvintlist), so we can't coerce it
> into another type, and it doesn't have the set operations we need to
> use it directly.

Is this part of the problem
https://issues.apache.org/jira/browse/LUCENE-1296
?

Also consider o.a.l.util.OpenBitSetDISI, and how that is used in
contrib/queries/**/BooleanFilter

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 16:57:23 2008
Return-Path: <java-user-return-37274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96204 invoked from network); 19 Nov 2008 16:57:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 16:57:22 -0000
Received: (qmail 2361 invoked by uid 500); 19 Nov 2008 16:57:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2328 invoked by uid 500); 19 Nov 2008 16:57:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2317 invoked by uid 99); 19 Nov 2008 16:57:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 08:57:23 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 16:56:00 +0000
Received: by yw-out-2324.google.com with SMTP id 3so24780ywj.5
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 08:56:45 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=v5F/MFY2g1LPMtqEuyUt4MlDf7ozaBnBGToSeoqXP/0=;
        b=SlxxeozNegtdbEUUINK71omMycTdAE7E6sVexc1dxRHBshFd5O22XHel3+PtIKcdbA
         i0+a/hWYRWv1uu1cp7EBaUhTB2foCf/i4feRQ2Cs3U0QPl/qcQO9rGIh7eOlAQ9uBnHH
         F8zKDT+3axnZejZDINggrYRSFsBXiloUaDzL0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=B2YpQC3eprsbG2J7eoPRkg3GfBLr6wJ6X4GVrdpRD5zUpUEtiM/nPadUwq4epP76FP
         qQv20PiklPTpZeOhBmKpcQotlwURFMSFcoNS0jfNCXqjB+ECM16X8lFTLv7aKLAtS0kS
         l8p2vYk6uWA9RInyX998/pjxd0Yzd39Sc7B5A=
Received: by 10.142.14.18 with SMTP id 18mr626510wfn.215.1227113804736;
        Wed, 19 Nov 2008 08:56:44 -0800 (PST)
Received: by 10.142.213.3 with HTTP; Wed, 19 Nov 2008 08:56:44 -0800 (PST)
Message-ID: <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
Date: Wed, 19 Nov 2008 11:56:44 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_106217_25350050.1227113804743"
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
	 <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_106217_25350050.1227113804743
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks, that was very helpful, but I have a question when I make the
searches it does not sort the results according to the range, for example:
year: [2003 TO 2008] in the first page 2003 documents are showed, in the
second 2005 documents, in the third page 2004 documents, I don't see any
sort criteria.
How could I fix that problem ???
Greetings
Ariel

On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com> wrote:

> Hi - sounds like you need a range query.
>
> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
>
>
> --
> Ian.
>
>
> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com> wrote:
> > Hi everybody:
> >
> > I need to make search with lucene 2.3.2, taking in account the dates,
> > previously when I build the index I create a date field where I stored
> the
> > year in which the document was created, at the search moment I would like
> to
> > retrieve documents that have been created before a Year or after a Year,
> for
> > example documents before 2002 year o after 2003 year.
> > It is possible to do that with lucene ???
> > Regards
> > Ariel
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_106217_25350050.1227113804743--

From java-user-return-37275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 17:34:19 2008
Return-Path: <java-user-return-37275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20048 invoked from network); 19 Nov 2008 17:34:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 17:34:19 -0000
Received: (qmail 72578 invoked by uid 500); 19 Nov 2008 17:34:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72553 invoked by uid 500); 19 Nov 2008 17:34:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72486 invoked by uid 99); 19 Nov 2008 17:34:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 09:34:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 209.85.132.251 as permitted sender)
Received: from [209.85.132.251] (HELO an-out-0708.google.com) (209.85.132.251)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 17:32:56 +0000
Received: by an-out-0708.google.com with SMTP id b2so33020ana.5
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 09:33:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=YpSgJPWpQTYzb+NQkrwEQfv7+6Qc0VimCu2GvdJu75o=;
        b=io/y5o2a+vS6sEgAEpmPqdpuvLdhg1cR0lBhFj3JU7SnRPKtX4Ex4KFxYom9kmk3N6
         4TrmZeKktXUb2ruTkoDP6wGozG79Pgm+8o8Dgu390ymXSGGtz8tZ3JOG9EpoBmgCRQ+N
         1nLhIaujrwLjEyzZmKrjLHsqstEIcHOf/1D30=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gBwXYRnRZ3fKwgWHJ8977EUqG2h634QzgOf/KXneA4588mV6sOR14cfWDC6sYW8UxN
         YGxDknmbXOoo553NYFC39t7GDRLzeG5Pme0L9u6g99ZW3USFgXQsiQsgCb+YO4Pewn+C
         yxEcQSzrcLTXn0arZ7GfZTDofZsZD6Ek7lP24=
Received: by 10.100.190.14 with SMTP id n14mr693527anf.19.1227116010548;
        Wed, 19 Nov 2008 09:33:30 -0800 (PST)
Received: by 10.100.9.2 with HTTP; Wed, 19 Nov 2008 09:33:30 -0800 (PST)
Message-ID: <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com>
Date: Wed, 19 Nov 2008 12:33:30 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21782_18433823.1227116010525"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <359a92830811120817h18df7a98o19063aeb28dfc22c@mail.gmail.com>
	 <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>
	 <491B0BCF.2000302@gmail.com>
	 <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>
	 <491B17D8.4090209@gmail.com>
	 <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
	 <491B2D13.8090006@gmail.com>
	 <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
	 <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21782_18433823.1227116010525
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have a couple quick questions...it might just be because I haven't looked
at this in a week now (got pulled away onto some other stuff that had to
take priority).

In the searching phase, I would run the search across all page documents,
and then for each of those pages, do a search with
PayloadSpanUtil.getPayloadsForQuery that made it so it only got payloads for
each page at a time.  The function returns a Collection of Payloads as far
as I can tell, so is there any way of knowing which payloads go together?
That is to say, if you were to do a search for "lucene rocks" on the page
and it appeared 3 times, you would get back 6 payloads in total.  Is there a
quick way of knowing how to group them in the collection?

Also, I need a way of seeing the words that came before or after a match on
the page.  The quick answer would be to store the next and previous word in
the meta-data but this isn't scalable and would mean reindexing everything
if I wanted to change the number of words stored.  My thought was to have
another index of words that store the text, page information, and the index
of that word on the page.  Then that index can be used in the meta-data in
the first index, so if we know we got back word 5, we can run queries to get
words 4 and 6 from the page.  Does this make sense, or is there a way that
would be better for performance?

Thanks,
Greg

------=_Part_21782_18433823.1227116010525--

From java-user-return-37276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 18:02:28 2008
Return-Path: <java-user-return-37276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39339 invoked from network); 19 Nov 2008 18:02:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 18:02:28 -0000
Received: (qmail 39634 invoked by uid 500); 19 Nov 2008 18:02:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39598 invoked by uid 500); 19 Nov 2008 18:02:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39587 invoked by uid 99); 19 Nov 2008 18:02:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 10:02:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 18:01:07 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to obtain raw scores?
Date: Wed, 19 Nov 2008 13:01:49 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43032BD7A2@mail3.basistech.net>
In-Reply-To: <E95FD77F0171D14DA1EEE0A785E92B43032BD784@mail3.basistech.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to obtain raw scores?
Thread-Index: AclKZpDiXsWaQjwTTgO1wSO2XC64lwACbA9w
References: <E95FD77F0171D14DA1EEE0A785E92B43032BD784@mail3.basistech.net>
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Please ignore this question.
I've noticed it was answered in
another thread just before
I posted my question.

Answer: use TopDocs.scoredocs[i].score

----
T. "Kuro" Kurosaka, Basis Technology
San Francisco, California, U.S.A.
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 18:15:54 2008
Return-Path: <java-user-return-37277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51022 invoked from network); 19 Nov 2008 18:15:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 18:15:54 -0000
Received: (qmail 68661 invoked by uid 500); 19 Nov 2008 18:15:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68634 invoked by uid 500); 19 Nov 2008 18:15:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68623 invoked by uid 99); 19 Nov 2008 18:15:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 10:15:55 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 18:14:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L2ra6-0003aW-FD
	for java-user@lucene.apache.org; Wed, 19 Nov 2008 10:15:14 -0800
Message-ID: <20585920.post@talk.nabble.com>
Date: Wed, 19 Nov 2008 10:15:14 -0800 (PST)
From: Tomer Gabel <tomer@tomergabel.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher and multi-threaded performance
In-Reply-To: <45E63187-F681-4D94-BBEA-31E8AE6CEC3E@mikemccandless.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: tomer@tomergabel.com
References: <74d027a50811111359y3b1355e4te2322c1e34e5e4d1@mail.gmail.com> <491A02A4.5020108@gmail.com> <74d027a50811111813w23661a2dt3eb16a2fb64f9ed9@mail.gmail.com> <491A40FB.8050501@gmail.com> <491A42E1.2030208@gmail.com> <74d027a50811121301k9ccc0d0k56513e6551d46d53@mail.gmail.com> <45E63187-F681-4D94-BBEA-31E8AE6CEC3E@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org


It's more than possible, it's probable. Cache thrashing would definitely be
my first guess; with so many copies of the exact same data you're not only
missing out on significant gains with the L2 cache, you're also taking a
major hit with every cache miss (which probably happens every context
switch) and the access to main memory.

Increased paging due to the increased memory pressure might also explain
some of the discrepancy.
--TG


Michael McCandless-2 wrote:
> 
> 
> Good!
> 
> In fact now we see similar slowness with nio-thread vs nio-shared as  
> we see for RAM-thread vs RAM-shared.  Ie, for both RAM and NIO you get  
> better performance sharing a single reader than reader-per-thread.   
> This is odd -- I would have expected that with infinite RAM reader-per- 
> thread would always be as fast or faster than a shared reader.  It's  
> particularly interesting that the RAM case shows it worse than the NIO  
> case.
> 
> Maybe it's because in the reader-per-thread case the CPU's cache is  
> less effective since things like norms & deleted docs are now  
> replicated in memory?
> 
> Mike
> 
> 


-----
--

http://www.tomergabel.com Tomer Gabel 


-- 
View this message in context: http://www.nabble.com/IndexSearcher-and-multi-threaded-performance-tp20449375p20585920.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 18:24:38 2008
Return-Path: <java-user-return-37278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64433 invoked from network); 19 Nov 2008 18:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 18:24:37 -0000
Received: (qmail 90482 invoked by uid 500); 19 Nov 2008 18:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90449 invoked by uid 500); 19 Nov 2008 18:24:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90438 invoked by uid 99); 19 Nov 2008 18:24:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 10:24:35 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.198.229 as permitted sender)
Received: from [209.85.198.229] (HELO rv-out-0506.google.com) (209.85.198.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 18:23:13 +0000
Received: by rv-out-0506.google.com with SMTP id f6so73032rvb.5
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 10:23:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=zpeMgFd9BlPQjjvPHVzP3JWGYoSBttj6riB4h4tQig0=;
        b=EHng/Fw4O+x/s9c1b1FbS/mSzkkW3qkX/dxdOohp5Wfcz0veDjrstwuIJ5p8ROa7Kq
         nJ8Pd3k96+nPPtzpgFQyhmqh7GEILDUmnHCu9n5YHEBiTM14BbwLxBipeicNRR4g+ChS
         dvJMgC1Y6/73lXOdAjJ83eFSKyH9437K/E7so=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Y0OYv0YMxEw97Qh8ImxH2hZVuIWwqmtn97iYnZufWR5Eq1WtL6F8OJQyj0L9+zlJih
         pAU4+CUBGCoYCPUJsI5lUCv3d8pV1SQzebKqVs43NxP5KJwCy+QLs1M5GtTsjcPLkPdm
         y/TnRwhKJoRpKRJ17StgKRXCq7ksPi1f+F0Ik=
Received: by 10.140.249.20 with SMTP id w20mr748083rvh.6.1227119038782;
        Wed, 19 Nov 2008 10:23:58 -0800 (PST)
Received: by 10.141.201.2 with HTTP; Wed, 19 Nov 2008 10:23:58 -0800 (PST)
Message-ID: <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>
Date: Wed, 19 Nov 2008 13:23:58 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74588_23684245.1227119038774"
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
	 <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
	 <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74588_23684245.1227119038774
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

it is supposed lucene make a lexicocraphic sorting but this is not hapening,
Could you tell me what I'm doing wrong ?
I hope you can help me.
Regards

On Wed, Nov 19, 2008 at 11:56 AM, Ariel <isaacrc82@gmail.com> wrote:

> Thanks, that was very helpful, but I have a question when I make the
> searches it does not sort the results according to the range, for example:
> year: [2003 TO 2008] in the first page 2003 documents are showed, in the
> second 2005 documents, in the third page 2004 documents, I don't see any
> sort criteria.
> How could I fix that problem ???
> Greetings
> Ariel
>
>
> On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com> wrote:
>
>> Hi - sounds like you need a range query.
>>
>>
>> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
>>
>>
>> --
>> Ian.
>>
>>
>> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com> wrote:
>> > Hi everybody:
>> >
>> > I need to make search with lucene 2.3.2, taking in account the dates,
>> > previously when I build the index I create a date field where I stored
>> the
>> > year in which the document was created, at the search moment I would
>> like to
>> > retrieve documents that have been created before a Year or after a Year,
>> for
>> > example documents before 2002 year o after 2003 year.
>> > It is possible to do that with lucene ???
>> > Regards
>> > Ariel
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

------=_Part_74588_23684245.1227119038774--

From java-user-return-37279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 20:22:37 2008
Return-Path: <java-user-return-37279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15813 invoked from network); 19 Nov 2008 20:22:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 20:22:37 -0000
Received: (qmail 5296 invoked by uid 500); 19 Nov 2008 20:22:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5270 invoked by uid 500); 19 Nov 2008 20:22:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5254 invoked by uid 99); 19 Nov 2008 20:22:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 12:22:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 20:21:16 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr16.xs4all.nl (8.13.8/8.13.8) with ESMTP id mAJKM05P025146
	for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 21:22:00 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Term numbering and range filtering
Date: Wed, 19 Nov 2008 21:22:01 +0100
User-Agent: KMail/1.9.10
References: <C548ACB8.16C8%tsturge@hi5.com>
In-Reply-To: <C548ACB8.16C8%tsturge@hi5.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200811192122.02046.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Tim,

Op Wednesday 19 November 2008 02:32:40 schreef Tim Sturge:
...
> >>
> >> This is less than 2x slower than the dedicated bitset and more
> >> than 50x faster than the range boolean query.
> >>
> >> Mike, Paul, I'm happy to contribute this (ugly but working) code
> >> if there is interest. Let me know and I'll open a JIRA issue for
> >> it.
> >
> > In case you think more performance improvements based on this
> > are possible...
>
> I think this is generally useful for range and set queries on
> non-text based fields (dates, location data, prices, general
> enumerations). These all have the required property that there is
> only one value (term) per document.
>
> I've opened LUCENE-1461.

I finally got the point, see my comments there.

Thanks a lot, if only to show an unexpected tradeoff possibility
opened by the new Filter api.
I don't know whether you followed LUCENE-584 (Decouple Filter
from BitSet), but a contribution like this multi range filter makes
it all worthwhile.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 20:59:47 2008
Return-Path: <java-user-return-37280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28303 invoked from network); 19 Nov 2008 20:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 20:59:47 -0000
Received: (qmail 45452 invoked by uid 500); 19 Nov 2008 20:59:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45414 invoked by uid 500); 19 Nov 2008 20:59:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45403 invoked by uid 99); 19 Nov 2008 20:59:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 12:59:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 20:58:26 +0000
Received: by qyk13 with SMTP id 13so127958qyk.5
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 12:58:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=YHBk6LJ28n58tR57cUl2IO8RQFoE1lqe9Z6oyTqlf3k=;
        b=O8bMKF8eFQqnoOF+3qCxLrFwGsRKwY5KFAkq0f6/jMu5S0jpF0/SGojmbvH9ZLXytt
         55V/E1zBxDgkZ57gHAYR7l4OS4jTuZwqIPcR6cOSdMzgLZftPivWMVbXFI2HQI4WpHwb
         wAUC3X96fJbkZGnxW8wlFsWejpk00q0O3es6U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=YUWfzWld7cIBhmIR0S0zrozEd4tyOcMs70PoNZYszfc+UvIW1mCisOlhN/D2zPeM2C
         cvhpXnjYKxsPmEliiUz3/UM27gHDGq71JoYJko4webIdg0bHF54ECYJ1KNTPpKPS5e9i
         3Q4KzC/XaNDgxWJFzS4vDXjRLGlTO+eeiYAjg=
Received: by 10.214.148.20 with SMTP id v20mr1669819qad.71.1227128290791;
        Wed, 19 Nov 2008 12:58:10 -0800 (PST)
Received: by 10.214.78.9 with HTTP; Wed, 19 Nov 2008 12:58:10 -0800 (PST)
Message-ID: <8c4e68610811191258i6ce8a777g6f7687bd7fcfd95d@mail.gmail.com>
Date: Wed, 19 Nov 2008 20:58:10 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
	 <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
	 <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
	 <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Are you using one of the search methods that includes sorting?  If
not, then do.  If you are, then you need to tell us exactly what you
are doing and exactly what you reckon is going wrong.


--
Ian.


On Wed, Nov 19, 2008 at 6:23 PM, Ariel <isaacrc82@gmail.com> wrote:
> it is supposed lucene make a lexicocraphic sorting but this is not hapening,
> Could you tell me what I'm doing wrong ?
> I hope you can help me.
> Regards
>
> On Wed, Nov 19, 2008 at 11:56 AM, Ariel <isaacrc82@gmail.com> wrote:
>
>> Thanks, that was very helpful, but I have a question when I make the
>> searches it does not sort the results according to the range, for example:
>> year: [2003 TO 2008] in the first page 2003 documents are showed, in the
>> second 2005 documents, in the third page 2004 documents, I don't see any
>> sort criteria.
>> How could I fix that problem ???
>> Greetings
>> Ariel
>>
>>
>> On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com> wrote:
>>
>>> Hi - sounds like you need a range query.
>>>
>>>
>>> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com> wrote:
>>> > Hi everybody:
>>> >
>>> > I need to make search with lucene 2.3.2, taking in account the dates,
>>> > previously when I build the index I create a date field where I stored
>>> the
>>> > year in which the document was created, at the search moment I would
>>> like to
>>> > retrieve documents that have been created before a Year or after a Year,
>>> for
>>> > example documents before 2002 year o after 2003 year.
>>> > It is possible to do that with lucene ???
>>> > Regards
>>> > Ariel
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 21:23:39 2008
Return-Path: <java-user-return-37281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37095 invoked from network); 19 Nov 2008 21:23:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 21:23:39 -0000
Received: (qmail 69045 invoked by uid 500); 19 Nov 2008 21:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68603 invoked by uid 500); 19 Nov 2008 21:23:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68592 invoked by uid 99); 19 Nov 2008 21:23:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 13:23:40 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of isaacrc82@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 21:22:18 +0000
Received: by an-out-0708.google.com with SMTP id b2so86095ana.5
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 13:22:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=e+mlzK4a6mCggLMnNAKc+DFlmmgw4T336YJOjerYLvE=;
        b=B4zrzMMArdhFnm1bw9RgR+rhz1fWSdyaznMl4ygOpXTwjUHFySQh2tqhnxwD3StO1c
         Frzsenxn69KUiDRhcHhj/OMYDmIjJjxuDvHbyUNLrEQSCNvoMRXyv3iu7l7IwVnxlz81
         N6rvA9UIoc+m6YWdCm+SGm2QdssVFAWLYbNd0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=rRvVq7GK4OnOexEh9/Qu1kQQIRU7ndwo/RoTlpvaw2TsAeBPoTgmOu2NPD/3rzxtNj
         yzZ1eQZW1VnMO2VMjmownLdmv1FeRzDP87XRFOT9ZiGny2UbqLX9xJKZGxkpAfvGlsuL
         mmFzQS+sKk5HKwsaLRdiDVaiFJSFOkp5fakpQ=
Received: by 10.142.246.19 with SMTP id t19mr756293wfh.42.1227129772353;
        Wed, 19 Nov 2008 13:22:52 -0800 (PST)
Received: by 10.142.213.3 with HTTP; Wed, 19 Nov 2008 13:22:52 -0800 (PST)
Message-ID: <bf1404350811191322h39e808d3x5e1ae1157cf3e1ad@mail.gmail.com>
Date: Wed, 19 Nov 2008 16:22:52 -0500
From: Ariel <isaacrc82@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <8c4e68610811191258i6ce8a777g6f7687bd7fcfd95d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_111181_6710400.1227129772359"
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
	 <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
	 <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
	 <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>
	 <8c4e68610811191258i6ce8a777g6f7687bd7fcfd95d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_111181_6710400.1227129772359
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, this is what I am doing:

queryString="year:[2003 TO 2005]"
[CODE]
    Query pquery = null;
    Hits hits = null;
    Analyzer analyzer = null;
    analyzer = new SnowballAnalyzer("English");
    try {
        pquery = MultiFieldQueryParser.parse(new String[] {queryString,
queryString}, new String[] {"title", "content"}, analyzer); //analyzer
    } catch (ParseException e1) {
        e1.printStackTrace();
    }
    MultiSearcher searcher = (MultiSearcher) searcherCache.get(name);

    try {
        hits = searcher.search(pquery);
    } catch (IOException e1) {
        e1.printStackTrace();
    }
[/CODE]

I don't know the methods that include sorting. I have made the sorting by
the score criteria so far, I don-t know how to change it to the year field
criteria.
As you can see, I am using a multisearcher because I have several indexes.

I hope you can help me.
Regards
Thanks in advance
Ariel



On Wed, Nov 19, 2008 at 3:58 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Are you using one of the search methods that includes sorting?  If
> not, then do.  If you are, then you need to tell us exactly what you
> are doing and exactly what you reckon is going wrong.
>
>
> --
> Ian.
>
>
> On Wed, Nov 19, 2008 at 6:23 PM, Ariel <isaacrc82@gmail.com> wrote:
> > it is supposed lucene make a lexicocraphic sorting but this is not
> hapening,
> > Could you tell me what I'm doing wrong ?
> > I hope you can help me.
> > Regards
> >
> > On Wed, Nov 19, 2008 at 11:56 AM, Ariel <isaacrc82@gmail.com> wrote:
> >
> >> Thanks, that was very helpful, but I have a question when I make the
> >> searches it does not sort the results according to the range, for
> example:
> >> year: [2003 TO 2008] in the first page 2003 documents are showed, in the
> >> second 2005 documents, in the third page 2004 documents, I don't see any
> >> sort criteria.
> >> How could I fix that problem ???
> >> Greetings
> >> Ariel
> >>
> >>
> >> On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com> wrote:
> >>
> >>> Hi - sounds like you need a range query.
> >>>
> >>>
> >>>
> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
> >>>
> >>>
> >>> --
> >>> Ian.
> >>>
> >>>
> >>> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com> wrote:
> >>> > Hi everybody:
> >>> >
> >>> > I need to make search with lucene 2.3.2, taking in account the dates,
> >>> > previously when I build the index I create a date field where I
> stored
> >>> the
> >>> > year in which the document was created, at the search moment I would
> >>> like to
> >>> > retrieve documents that have been created before a Year or after a
> Year,
> >>> for
> >>> > example documents before 2002 year o after 2003 year.
> >>> > It is possible to do that with lucene ???
> >>> > Regards
> >>> > Ariel
> >>> >
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_111181_6710400.1227129772359--

From java-user-return-37282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 22:29:17 2008
Return-Path: <java-user-return-37282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80101 invoked from network); 19 Nov 2008 22:29:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 22:29:17 -0000
Received: (qmail 63722 invoked by uid 500); 19 Nov 2008 22:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63691 invoked by uid 500); 19 Nov 2008 22:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63680 invoked by uid 99); 19 Nov 2008 22:29:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 14:29:18 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 22:27:56 +0000
Received: by ey-out-2122.google.com with SMTP id 6so77407eyi.53
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 14:28:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=ipRPzKBnjBFrGzU8xGIsjsgU7ENBzPMOsoyzOn2UGWI=;
        b=UnWNySiab5MC3/08aNypLegsoUbnw64d/EMxy7vQMrRzf4rDrsDKQSCFSS9LEcmql+
         YVTxXqlb+/TW2KF8EBmDUj8/GecHUi9lqzt0hd0damJH5Z0mfg/c7AYKgfRGIu+atX4Q
         9KGzc0bCEkV4EIivSyRXtiElCXpDB44wP5Hqw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=gBv0XLd5mIHvOaVT1ZtVyNAJuWj1yVo1gSsVxzIoDGOHOoET3HgPwcTvAG4xnyoFcf
         rQNFn11X1Ck3W3fWEWQ2kYRLBfULUcA0bj97zDPHrpvXWUAhkLf27oYmEkXAIsO8q2bc
         sttSNaLsD6Rmsc+KGufPpHzZLTDYooKG6vAtU=
Received: by 10.86.63.19 with SMTP id l19mr1068947fga.15.1227133719427;
        Wed, 19 Nov 2008 14:28:39 -0800 (PST)
Received: by 10.86.98.8 with HTTP; Wed, 19 Nov 2008 14:28:39 -0800 (PST)
Message-ID: <359a92830811191428hea3608dt95cc54aa26052862@mail.gmail.com>
Date: Wed, 19 Nov 2008 17:28:39 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to search documents taking in account the dates ???
In-Reply-To: <bf1404350811191322h39e808d3x5e1ae1157cf3e1ad@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64894_19377948.1227133719443"
References: <bf1404350811190802p3da036a2nc9259675c0636282@mail.gmail.com>
	 <8c4e68610811190809v17219267x2718ab6de3ea677f@mail.gmail.com>
	 <bf1404350811190856i5f01e16ax653588d2c1f43fac@mail.gmail.com>
	 <bf1404350811191023j130bcbaakf81766efecccbcb8@mail.gmail.com>
	 <8c4e68610811191258i6ce8a777g6f7687bd7fcfd95d@mail.gmail.com>
	 <bf1404350811191322h39e808d3x5e1ae1157cf3e1ad@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_64894_19377948.1227133719443
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, MultiSearcher is just a Searcher, so you have available
all of the search methods on Searcher. One of which is:

search

public TopFieldDocs
<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/TopFieldDocs.html>
*search*(Query <file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Query.html>
query,
                           Filter
<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Filter.html>
filter,
                           int n,
                           Sort
<file:///C:/lucene-2.1.0/docs/api/org/apache/lucene/search/Sort.html>
sort)
                    throws IOException
<http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>

Expert: Low-level search implementation with arbitrary sorting. Finds the
top n hits for query, applying filter if non-null, and sorting the hits by
the criteria in sort.


Best
Erick


On Wed, Nov 19, 2008 at 4:22 PM, Ariel <isaacrc82@gmail.com> wrote:

> Well, this is what I am doing:
>
> queryString="year:[2003 TO 2005]"
> [CODE]
>    Query pquery = null;
>    Hits hits = null;
>    Analyzer analyzer = null;
>    analyzer = new SnowballAnalyzer("English");
>    try {
>        pquery = MultiFieldQueryParser.parse(new String[] {queryString,
> queryString}, new String[] {"title", "content"}, analyzer); //analyzer
>    } catch (ParseException e1) {
>        e1.printStackTrace();
>    }
>    MultiSearcher searcher = (MultiSearcher) searcherCache.get(name);
>
>    try {
>        hits = searcher.search(pquery);
>    } catch (IOException e1) {
>        e1.printStackTrace();
>    }
> [/CODE]
>
> I don't know the methods that include sorting. I have made the sorting by
> the score criteria so far, I don-t know how to change it to the year field
> criteria.
> As you can see, I am using a multisearcher because I have several indexes.
>
> I hope you can help me.
> Regards
> Thanks in advance
> Ariel
>
>
>
> On Wed, Nov 19, 2008 at 3:58 PM, Ian Lea <ian.lea@gmail.com> wrote:
>
> > Are you using one of the search methods that includes sorting?  If
> > not, then do.  If you are, then you need to tell us exactly what you
> > are doing and exactly what you reckon is going wrong.
> >
> >
> > --
> > Ian.
> >
> >
> > On Wed, Nov 19, 2008 at 6:23 PM, Ariel <isaacrc82@gmail.com> wrote:
> > > it is supposed lucene make a lexicocraphic sorting but this is not
> > hapening,
> > > Could you tell me what I'm doing wrong ?
> > > I hope you can help me.
> > > Regards
> > >
> > > On Wed, Nov 19, 2008 at 11:56 AM, Ariel <isaacrc82@gmail.com> wrote:
> > >
> > >> Thanks, that was very helpful, but I have a question when I make the
> > >> searches it does not sort the results according to the range, for
> > example:
> > >> year: [2003 TO 2008] in the first page 2003 documents are showed, in
> the
> > >> second 2005 documents, in the third page 2004 documents, I don't see
> any
> > >> sort criteria.
> > >> How could I fix that problem ???
> > >> Greetings
> > >> Ariel
> > >>
> > >>
> > >> On Wed, Nov 19, 2008 at 11:09 AM, Ian Lea <ian.lea@gmail.com> wrote:
> > >>
> > >>> Hi - sounds like you need a range query.
> > >>>
> > >>>
> > >>>
> >
> http://lucene.apache.org/java/2_3_2/queryparsersyntax.html#Range%20Searches
> > >>>
> > >>>
> > >>> --
> > >>> Ian.
> > >>>
> > >>>
> > >>> On Wed, Nov 19, 2008 at 4:02 PM, Ariel <isaacrc82@gmail.com> wrote:
> > >>> > Hi everybody:
> > >>> >
> > >>> > I need to make search with lucene 2.3.2, taking in account the
> dates,
> > >>> > previously when I build the index I create a date field where I
> > stored
> > >>> the
> > >>> > year in which the document was created, at the search moment I
> would
> > >>> like to
> > >>> > retrieve documents that have been created before a Year or after a
> > Year,
> > >>> for
> > >>> > example documents before 2002 year o after 2003 year.
> > >>> > It is possible to do that with lucene ???
> > >>> > Regards
> > >>> > Ariel
> > >>> >
> > >>>
> > >>> ---------------------------------------------------------------------
> > >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> > >>>
> > >>>
> > >>
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_64894_19377948.1227133719443--

From java-user-return-37283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 22:54:31 2008
Return-Path: <java-user-return-37283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93262 invoked from network); 19 Nov 2008 22:54:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 22:54:31 -0000
Received: (qmail 97704 invoked by uid 500); 19 Nov 2008 22:54:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97665 invoked by uid 500); 19 Nov 2008 22:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97654 invoked by uid 99); 19 Nov 2008 22:54:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 14:54:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 22:53:08 +0000
Received: by an-out-0708.google.com with SMTP id b2so102806ana.5
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 14:53:50 -0800 (PST)
Received: by 10.100.132.14 with SMTP id f14mr854940and.107.1227135229896;
        Wed, 19 Nov 2008 14:53:49 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id b29sm259623ana.53.2008.11.19.14.53.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 19 Nov 2008 14:53:48 -0800 (PST)
Message-Id: <64B1EFE5-EC74-4690-BCE1-2F38FA52C805@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <001901c94a6e$87384680$95a8d380$@cassinera@mercadolibre.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: altering the value of non indexed fields
Date: Wed, 19 Nov 2008 17:53:46 -0500
References: <001901c94a6e$87384680$95a8d380$@cassinera@mercadolibre.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Unfortunately, not yet.  There have been discussions about this, =20
including this issue for "column-stride fields":

     https://issues.apache.org/jira/browse/LUCENE-1231

But no real progress on it lately...

Mike

Diego Cassinera wrote:

> Hello All
>
>
>
> I=B4m writing an application to move full text search out of my =20
> rdbms.  Today
> the app hits the db two times.  1) to do the search it self. 2) to =20
> format
> the output of the search results.  In my plan I=B4m moving everything =
to
> lucene documents that contain fields where I will be doing the =20
> search on and
> non indexed fields that will be used for the formatting of the =20
> output.  The
> problem  that I have is that some of these non indexed fields may =20
> change
> from time to time.  As far as I read on the docs the only way to =20
> update
> these fields is to delete the document all together and re-index the
> document.  This in turn could be a waste of resources because some =20
> of my
> documents are quite large.  So my question is, is there a way to =20
> change the
> value of these fields without having to re-index the complete =20
> document.  A
> note about by non indexed fields, their size will always remain the =20=

> same
> even do the value may change.
>
>
>
> Thank You
>
> Diego
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 19 23:49:11 2008
Return-Path: <java-user-return-37284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8999 invoked from network); 19 Nov 2008 23:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Nov 2008 23:49:11 -0000
Received: (qmail 67609 invoked by uid 500); 19 Nov 2008 23:49:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67579 invoked by uid 500); 19 Nov 2008 23:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67568 invoked by uid 99); 19 Nov 2008 23:49:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 15:49:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ngvinny@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Nov 2008 23:47:49 +0000
Received: by fk-out-0910.google.com with SMTP id 18so195727fkq.5
        for <java-user@lucene.apache.org>; Wed, 19 Nov 2008 15:48:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=M0W8EO/T1nLFfJeVKpItr0RAQ6ZunYcX8gEhPrYeegc=;
        b=AdvZ9rbRxdrn7y9v+d5QhKeTFDvzBV2yEXvLvOKXL4wRXlDPbHSjI34zoGO0rfyw5E
         dXwPHiy2sxFOqrZbKJV1e4eye/S1bmJw7Ze9j9Z4bfMUvQt5g8BrvnSTKc1sx6suyYrD
         X+WnKhC4CVcbg/ECF9yb0yyND+kWzMtqbPi/Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=SgeBFIeIjJfCVKxqKUWKWgZNI1J41ZI8R+ehOR7kxqlqp76DK5NoS7g06uneGO/QFp
         Ceg5NiP2K9qIZq2FDF+wCNJgpc7NueBDq+GrX7Tl5+auiwMH0lpb0xo0OJ/F3rhGkZdh
         uLRg5JR1L4Idj0cBYbW2uptVn3pwLsMJOvCIA=
Received: by 10.181.5.1 with SMTP id h1mr506518bki.56.1227138513504;
        Wed, 19 Nov 2008 15:48:33 -0800 (PST)
Received: by 10.181.22.13 with HTTP; Wed, 19 Nov 2008 15:48:33 -0800 (PST)
Message-ID: <5db95abe0811191548x1b1ef28dhd60a5fa2e4d4be58@mail.gmail.com>
Date: Wed, 19 Nov 2008 23:48:33 +0000
From: "Ng Vinny" <ngvinny@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: How to obtain raw scores?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_100502_21057348.1227138513486"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_100502_21057348.1227138513486
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi

Is there any documentation that says that scores obtained from
TopDocs.scoredocs[i].score
are comparable across queries. I am having this problem myself so I would
really appreciate if anyone has some pointers to this.

At [1], it seems like they are not. Is there any solution to enable this
comparison?

thank you.

[1] http://www.gossamer-threads.com/lists/lucene/java-user/35051#35051

=================================================================
Please ignore this question.
I've noticed it was answered in
another thread just before
I posted my question.

Answer: use TopDocs.scoredocs[i].score

----
T. "Kuro" Kurosaka, Basis Technology
San Francisco, California, U.S.A.

------=_Part_100502_21057348.1227138513486--

From java-user-return-37285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 10:11:13 2008
Return-Path: <java-user-return-37285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43653 invoked from network); 20 Nov 2008 10:11:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 10:11:12 -0000
Received: (qmail 70735 invoked by uid 500); 20 Nov 2008 10:11:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70698 invoked by uid 500); 20 Nov 2008 10:11:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70687 invoked by uid 99); 20 Nov 2008 10:11:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 02:11:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 10:09:49 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mAKAAUsb011654
	for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 10:10:31 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12294)
    via ESMTP; Thu, 20 Nov 2008 10:10:29 +0000 (GMT)
Date: Thu, 20 Nov 2008 10:10:29 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <49253795.3030600@scalix.com>
Subject: Modify index contents
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0203.49253795.0245,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="------------000200000708050803000905"
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00,HTML_MESSAGE
	autolearn=ham version=3.2.5

--------------000200000708050803000905
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline

Hi

I have not been following Lucene developments for a while ... can 
someone please tell me if you can now modify indexes - or is it still 
have the "delete old" / "add new" model?

Thanks,

- Chris
-- 
Chris Bamford
Senior Development Engineer
*Scalix*
chris.bamford@scalix.com
Tel: +44 (0)1344 381814
www.scalix.com

--------------000200000708050803000905--

From java-user-return-37286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 10:13:47 2008
Return-Path: <java-user-return-37286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45009 invoked from network); 20 Nov 2008 10:13:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 10:13:47 -0000
Received: (qmail 73258 invoked by uid 500); 20 Nov 2008 10:13:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73230 invoked by uid 500); 20 Nov 2008 10:13:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73207 invoked by uid 99); 20 Nov 2008 10:13:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 02:13:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 10:12:23 +0000
Received: by rv-out-0506.google.com with SMTP id f6so428614rvb.5
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 02:13:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=18DqYC1BZ9D6J/sNBoTVegqsDkTfLHLy5YCYrzIuAUo=;
        b=V4XqxpIPNrX2NX7+D4dl7I5900P/pezRoGS993IHzt8uh3y6v5C0z+jaghQrOrg15J
         3K9RXAvQhNac4+QQhWi4sbZYYhVoYSXK1Q/AxDqXkD+Qcj5lZyAQwjwYlubXPKlGCik4
         z+ORqVSrd4mvw15un5Vc46R6X0U+p5d0BuVb4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=KGyWmzKnYWN1ROYT6g41AaZunkabvLsaU9DhFoV8n9Z9hhkswg9Qzcc3HDB5uYugu5
         HsrufxMIRAxcmk3LH/voclXswPsz0MmvmVNiokpKwBtO4nWqP1aV+B+VuQnoUzhnf2Oy
         2yrz7U2dqI60Tk9llHdKjjvV93Alij2UosZeY=
Received: by 10.142.147.15 with SMTP id u15mr1036687wfd.226.1227175988222;
        Thu, 20 Nov 2008 02:13:08 -0800 (PST)
Received: by 10.143.31.19 with HTTP; Thu, 20 Nov 2008 02:13:08 -0800 (PST)
Message-ID: <867513fe0811200213w27e542f1h19235e02b0e038d1@mail.gmail.com>
Date: Thu, 20 Nov 2008 15:43:08 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modify index contents
In-Reply-To: <49253795.3030600@scalix.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8197_25565024.1227175988241"
References: <49253795.3030600@scalix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8197_25565024.1227175988241
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Chris,

Its still the same model as far as my knowledge (always better to add the
disclaimer :), though 'm pretty sure )

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Thu, Nov 20, 2008 at 3:40 PM, Chris Bamford <chris.bamford@scalix.com>wrote:

> Hi
>
> I have not been following Lucene developments for a while ... can someone
> please tell me if you can now modify indexes - or is it still have the
> "delete old" / "add new" model?
>
> Thanks,
>
> - Chris
> --
> Chris Bamford
> Senior Development Engineer
> *Scalix*
> chris.bamford@scalix.com
> Tel: +44 (0)1344 381814
> www.scalix.com
>

------=_Part_8197_25565024.1227175988241--

From java-user-return-37287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 11:58:22 2008
Return-Path: <java-user-return-37287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68526 invoked from network); 20 Nov 2008 11:58:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 11:58:22 -0000
Received: (qmail 84632 invoked by uid 500); 20 Nov 2008 11:58:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84407 invoked by uid 500); 20 Nov 2008 11:58:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84395 invoked by uid 99); 20 Nov 2008 11:58:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 03:58:24 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.15] (HELO smtp128.mail.mud.yahoo.com) (209.191.85.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Nov 2008 11:56:58 +0000
Received: (qmail 81526 invoked from network); 20 Nov 2008 11:56:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=mn0kYhL0/lF0xcZCldiTmZfIbV5TIKi+Ml0BKxBbvVR1L9dh/9RROKSorkiOWBAvNXtltW1Fz/4KrTpcLzN7XnYFinXZlliX6cPHTdQe5PFuFDmFDCCxItVacJiV6YxDHD+dqA6Pthv/blu/CosyP1Ub18EN4m01ZLJQRo5fQWo=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp128.mail.mud.yahoo.com with SMTP; 20 Nov 2008 11:56:41 -0000
X-YMail-OSG: wkCL8.oVM1k4EAfDCPBJToYCNRWa6qLwSUr_lWBQzKRUFOnJpEYT4VKKYdkRNqurkVb5FEgY2XIHvXstMWk1eL4tzkKhDNrVSlivOB8To_D_TJuOTBdrukeU.KGWOtUIGkRGETPaiwQaCMzW3v7iHzf1ZxcFgd8xPyqBK8pC
X-Yahoo-Newman-Property: ymail-3
Message-ID: <02f201c94b07$0da34d30$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: TermsFilter not available in 2.4
Date: Thu, 20 Nov 2008 17:26:38 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

In v2.4, TermsFilter class is not available in 
org.apache.lucene.search.TermsFilter

Regards
Ganesh 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 13:23:12 2008
Return-Path: <java-user-return-37288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96103 invoked from network); 20 Nov 2008 13:23:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 13:23:12 -0000
Received: (qmail 84707 invoked by uid 500); 20 Nov 2008 13:23:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84670 invoked by uid 500); 20 Nov 2008 13:23:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84659 invoked by uid 99); 20 Nov 2008 13:23:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 05:23:14 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a7.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 13:21:49 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a7.g.dreamhost.com (Postfix) with ESMTP id 04E545B5FD
	for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 05:22:32 -0800 (PST)
Message-Id: <23C42F21-718F-4959-864D-24AD39822086@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <5db95abe0811180902i3d7fcd21h2ed18efcb2239ad1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: compare scores across queries
Date: Thu, 20 Nov 2008 08:22:32 -0500
References: <5db95abe0811180902i3d7fcd21h2ed18efcb2239ad1@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

No, they should not be compared.  Scores are only relative to each  
other for that given input query, despite what the queryNorm docs  
say.  The queryNorm was an attempt at doing it, but my understanding  
of the research still indicates they are not comparable.

-Grant

On Nov 18, 2008, at 12:02 PM, Ng Vinny wrote:

> Hi all,
>
> I am wondering if the raw scores obtained from HitCollector can be  
> used to
> compare relevance of documents to different queries?
>
> E.g.  two  phrase queries are issued : (PQ1: "Barack Obama"  and  
> PQ2:  "John
> McCain"). if a document (doc1) belongs to the result sets of both  
> queries
> and has the raw score of 5 for PQ1 and 3 for PQ2, can  I say that  
> doc1 is
> more relevant to "Barack Obama" than to "John McCain"?
>
> There have been some previous discussions about this at [1,2]. On  
> the other
> hand, the javadoc of the Similarity class says "*queryNorm(q) * is a
> normalizing factor used to make scores between queries comparable.  
> This
> factor does not affect document ranking (since all ranked documents  
> are
> multiplied by the same factor), but rather just attempts to make  
> scores from
> different queries (or even different indexes) comparable. "
>
> Please advise.
>
> Thanks.
> Ng.
>
> [1] http://thread.gmane.org/gmane.comp.jakarta.lucene.user/10760/focus=10810
> [2]
> http://www.gossamer-threads.com/lists/lucene/java-user/35051?search_string=compare%20score%20across%20queries;#35051
> [3]
> http://hudson.zones.apache.org/hudson/job/Lucene-trunk/javadoc//org/apache/lucene/search/Similarity.html

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 13:27:30 2008
Return-Path: <java-user-return-37289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 904 invoked from network); 20 Nov 2008 13:27:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 13:27:30 -0000
Received: (qmail 91769 invoked by uid 500); 20 Nov 2008 13:27:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91739 invoked by uid 500); 20 Nov 2008 13:27:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91727 invoked by uid 99); 20 Nov 2008 13:27:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 05:27:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 13:26:07 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 4A447161568
	for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 05:26:21 -0800 (PST)
Message-Id: <F234503C-D4D4-4346-9CB8-4DC3628676AD@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <fba082560811180937h3a68960ak9018cd90cf1e3760@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: can I set Boost to the term while indexing?
Date: Thu, 20 Nov 2008 08:26:19 -0500
References: <fba082560811180937h3a68960ak9018cd90cf1e3760@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

You can do this.  It's called adding a Payload.  You can add payloads  
during Analysis (Token.setPayload()) which means your code below will  
need to be changed below such that you use the Field constructor that  
takes in a TokenStream and wraps your input tokens.  This TokenStream  
will also need to add you payloads.

then, during search, you can use a BoostingTermQuery to have the  
payload values factor in during scoring.

-Grant

On Nov 18, 2008, at 12:37 PM, T. H. Lin wrote:

> I would like to store a set of keywords in a single field of a  
> document.
>
> for example I have now three keywords: "One", "Two" and "Three"
> and I am going to add them into a document.
>
> At first, is this code correct?
> /****************************************************************/
> String[] keyword = new String[]{"One", "Two", "Three"};
> for (int i = 0; i < keyword.length; i++) {
>   Field f = new Field("field_name",
>                            keyword[i],
>                            Field.Store.NO,
>                            Field.Index.UN_TOKENIZED,
>                            TermVector.YES);
>   doc.add(f);
> }
> indexWriter.addDocument(doc);
> /***************************************************************/
>
> when searching, We can set Boost for a query term.
>
> the question is...
> Can I set Boost for every keyword/term while indexing?
>
> from the example above. I may set those keywords. i.e. "One", "Two"  
> and
> "Three", with different "Weight/Boost/Relavance..." while indexing.
> and the same "term" may have different "Weight/Boost/Relavance..." in
> different document.
>
> can I do this?
>
> thanks. :-)

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 13:33:03 2008
Return-Path: <java-user-return-37290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4315 invoked from network); 20 Nov 2008 13:33:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 13:33:03 -0000
Received: (qmail 97042 invoked by uid 500); 20 Nov 2008 13:33:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96933 invoked by uid 500); 20 Nov 2008 13:33:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96922 invoked by uid 99); 20 Nov 2008 13:33:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 05:33:05 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=MSGID_MULTIPLE_AT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of diego.cassinera@mercadolibre.com designates 216.35.213.234 as permitted sender)
Received: from [216.35.213.234] (HELO ironport-inbound02.mercadolibre.com) (216.35.213.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 13:31:42 +0000
Received: from unknown (HELO vplssl2.mercadolibre.com) ([172.16.0.128])
  by ironport-inbound02.mercadolibre.com with ESMTP; 20 Nov 2008 08:32:26 -0500
X-IronPort-AV: i="4.33,639,1220245200"; 
   d="scan'208"; a="65704263:sNHT25594632"
Received: from dcassinera (unverified [190.220.33.50]) 
	by vplssl2.mercadolibre.com (SurgeMail 3.9e) with ESMTP id 3379459-1864578 
	for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 08:32:25 -0500 EDT
From: "Diego Cassinera" <diego.cassinera@mercadolibre.com>
To: <java-user@lucene.apache.org>
References: <5db95abe0811180902i3d7fcd21h2ed18efcb2239ad1@mail.gmail.com> <23C42F21-718F-4959-864D-24AD39822086@apache.org>
In-Reply-To: <23C42F21-718F-4959-864D-24AD39822086@apache.org>
Subject: Modifiing the values of stored non indexed fields
Date: Thu, 20 Nov 2008 11:32:38 -0300
Message-ID: <005201c94b1c$d7784240$8668c6c0$@cassinera@mercadolibre.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AclLEyORZDb1+zR/SaK8+zR6wMHkJgACTENg
Content-Language: es-ar
x-cr-hashedpuzzle: BGxb CJpv Czt8 Daw4 DuP+ EH8S ENan GBzd GTrS HlXa IN4A Ii4w KQk8 KTi4 Kzzv K8JP;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{8B0701F6-145C-47C2-96D4-23BC1E558FD7};ZABpAGUAZwBvAC4AYwBhAHMAcwBpAG4AZQByAGEAQABtAGUAcgBjAGEAZABvAGwAaQBiAHIAZQAuAGMAbwBtAA==;Thu, 20 Nov 2008 14:32:34 GMT;TQBvAGQAaQBmAGkAaQBuAGcAIAB0AGgAZQAgAHYAYQBsAHUAZQBzACAAbwBmACAAcwB0AG8AcgBlAGQAIABuAG8AbgAgAGkAbgBkAGUAeABlAGQAIABmAGkAZQBsAGQAcwA=
x-cr-puzzleid: {8B0701F6-145C-47C2-96D4-23BC1E558FD7}
X-Originating-IP: 190.220.33.50
X-Authenticated-User: diego.cassinera@mercadolibre.com 
X-Virus-Checked: Checked by ClamAV on apache.org

Is there a way to change the value of stored fields that have not been
indexed without having to delete the document and re-index it.  The fields I
need to change will always have the same size, however the value may change
every so often.  I want to do this to avoid hitting my rdbms to display the
results of a search.

Thank You
Diego Cassinera
Diego.cassinera@mercadolibre.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 13:47:55 2008
Return-Path: <java-user-return-37291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13466 invoked from network); 20 Nov 2008 13:47:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 13:47:55 -0000
Received: (qmail 16938 invoked by uid 500); 20 Nov 2008 13:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16745 invoked by uid 500); 20 Nov 2008 13:47:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16734 invoked by uid 99); 20 Nov 2008 13:47:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 05:47:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 13:46:35 +0000
Received: by ey-out-2122.google.com with SMTP id 6so185186eyi.53
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 05:47:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=mJOWGfMNeN+PKYp8xaH7Cdkt52KCpQhkX7U8nVDoAvw=;
        b=K+HHQ7g/WTu5GC6EW6p7HWoKYbbC8GulqumG9Ew3MRi4o7F6gLkMets2PtfsMZ0Gc4
         7nLzP6+oEjjtkxdT1XxrlisO8QW03e2aOrajvavVUjRbBsFjC0oqkLjoSoUqDcFaaMh/
         n8ddDiMwd3ym80HwUgCRaL3wkC2Z95TLMvRKY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=RCLrHBbSMYHWeYqYv+++YA0XXz6BM+KOv5X0Fxe2YxpMZr4CGxPJ4yd0yvVAgCPS9L
         P2+Dpa0WZQbiZJUKACIsyMs8ely23BajSHITHChCTMEciOyDb57oTQFQs/UO5GwgM7kH
         6am7NXfWOAy5bdeYxJfieZKlaI2hRKCO0ES8c=
Received: by 10.86.92.7 with SMTP id p7mr1548198fgb.74.1227188829433;
        Thu, 20 Nov 2008 05:47:09 -0800 (PST)
Received: by 10.86.98.8 with HTTP; Thu, 20 Nov 2008 05:47:09 -0800 (PST)
Message-ID: <359a92830811200547v187ba5f4x202097a1f574e4bc@mail.gmail.com>
Date: Thu, 20 Nov 2008 08:47:09 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifiing the values of stored non indexed fields
In-Reply-To: <-8632199805673924097@unknownmsgid>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_71854_5085811.1227188829421"
References: <5db95abe0811180902i3d7fcd21h2ed18efcb2239ad1@mail.gmail.com>
	 <23C42F21-718F-4959-864D-24AD39822086@apache.org>
	 <-8632199805673924097@unknownmsgid>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_71854_5085811.1227188829421
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, I'll bite. What's unclear about Michael's response
to this question when you asked it yesterday? The
answer is still no today.

Erick

On Thu, Nov 20, 2008 at 9:32 AM, Diego Cassinera <
diego.cassinera@mercadolibre.com> wrote:

> Is there a way to change the value of stored fields that have not been
> indexed without having to delete the document and re-index it.  The fields
> I
> need to change will always have the same size, however the value may change
> every so often.  I want to do this to avoid hitting my rdbms to display the
> results of a search.
>
> Thank You
> Diego Cassinera
> Diego.cassinera@mercadolibre.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_71854_5085811.1227188829421--

From java-user-return-37292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 14:05:39 2008
Return-Path: <java-user-return-37292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27082 invoked from network); 20 Nov 2008 14:05:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 14:05:38 -0000
Received: (qmail 48316 invoked by uid 500); 20 Nov 2008 14:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47320 invoked by uid 500); 20 Nov 2008 14:05:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47309 invoked by uid 99); 20 Nov 2008 14:05:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 06:05:40 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=MSGID_MULTIPLE_AT,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of diego.cassinera@mercadolibre.com designates 216.35.213.234 as permitted sender)
Received: from [216.35.213.234] (HELO ironport-inbound02.mercadolibre.com) (216.35.213.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 14:04:17 +0000
Received: from unknown (HELO vplssl2.mercadolibre.com) ([172.16.0.128])
  by ironport-inbound02.mercadolibre.com with ESMTP; 20 Nov 2008 09:05:01 -0500
X-IronPort-AV: i="4.33,639,1220245200"; 
   d="scan'208"; a="65707282:sNHT18481617"
Received: from dcassinera (unverified [190.220.33.50]) 
	by vplssl2.mercadolibre.com (SurgeMail 3.9e) with ESMTP id 3383826-1864578 
	for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 09:05:01 -0500 EDT
From: "Diego Cassinera" <diego.cassinera@mercadolibre.com>
To: <java-user@lucene.apache.org>
References: <5db95abe0811180902i3d7fcd21h2ed18efcb2239ad1@mail.gmail.com>	 <23C42F21-718F-4959-864D-24AD39822086@apache.org>	 <-8632199805673924097@unknownmsgid> <359a92830811200547v187ba5f4x202097a1f574e4bc@mail.gmail.com>
In-Reply-To: <359a92830811200547v187ba5f4x202097a1f574e4bc@mail.gmail.com>
Subject: RE: Modifiing the values of stored non indexed fields
Date: Thu, 20 Nov 2008 12:05:14 -0300
Message-ID: <006501c94b21$65174e80$2f45eb80$@cassinera@mercadolibre.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AclLFp9BEDI0uLCKR2OtQWyN330fHQACpXJQ
Content-Language: es-ar
X-Originating-IP: 190.220.33.50
X-Authenticated-User: diego.cassinera@mercadolibre.com 
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry,  I just noticed that my email client decided his answer was junk
mail.  Regardless thank you both for your reply.

Diego


-----Mensaje original-----
De: Erick Erickson [mailto:erickerickson@gmail.com] 
Enviado el: jueves, 20 de noviembre de 2008 10:47 a.m.
Para: java-user@lucene.apache.org
Asunto: Re: Modifiing the values of stored non indexed fields

OK, I'll bite. What's unclear about Michael's response
to this question when you asked it yesterday? The
answer is still no today.

Erick

On Thu, Nov 20, 2008 at 9:32 AM, Diego Cassinera <
diego.cassinera@mercadolibre.com> wrote:

> Is there a way to change the value of stored fields that have not been
> indexed without having to delete the document and re-index it.  The fields
> I
> need to change will always have the same size, however the value may
change
> every so often.  I want to do this to avoid hitting my rdbms to display
the
> results of a search.
>
> Thank You
> Diego Cassinera
> Diego.cassinera@mercadolibre.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 14:11:11 2008
Return-Path: <java-user-return-37293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30940 invoked from network); 20 Nov 2008 14:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 14:11:11 -0000
Received: (qmail 57363 invoked by uid 500); 20 Nov 2008 14:11:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57328 invoked by uid 500); 20 Nov 2008 14:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57316 invoked by uid 99); 20 Nov 2008 14:11:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 06:11:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 14:09:50 +0000
Received: by fg-out-1718.google.com with SMTP id l27so371284fgb.27
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 06:10:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from
         :content-type:mime-version:content-transfer-encoding:message-id
         :user-agent;
        bh=J2rwIW673Q6Mq3YMIN2KyDaapbxXs47xU7Z26ms3iAI=;
        b=KkYNP0tCVuEWrwYto4gDeaUS5iOO8CKAXQurdu3/p9oDhOyas7zuERyZRfxziBnzZt
         S9K361ZzujMDEzZ03Oe08xFwppYshzA4EK1I3LgsH7jyMAcMYlG88BMM3A+kHCtrHa6a
         Kat7Mp2bLI5w3f/fXuA1z0gDyuEoMCTG1bd1k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:content-type:mime-version
         :content-transfer-encoding:message-id:user-agent;
        b=QUQrTiauywPyDXt9BXyKk37TUzDtjybD0wtmFSHyTNDUvJMKM8iS/zFSxh/elb094d
         aGoH0OrJOV5oNxOGzAMwS8SVlItrTvAE7uSZUDRjp23prOCX6A/wLzRSTSAvEK9nu4Zb
         fAmKy/PCOSI9ib01EYh5IkSqbGtNup+Qpv+G8=
Received: by 10.187.211.13 with SMTP id n13mr496198faq.39.1227190234849;
        Thu, 20 Nov 2008 06:10:34 -0800 (PST)
Received: from sj-desktop ([92.113.116.123])
        by mx.google.com with ESMTPS id h2sm1233149fkh.11.2008.11.20.06.10.32
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 20 Nov 2008 06:10:33 -0800 (PST)
Date: Thu, 20 Nov 2008 16:10:29 +0200
To: "Lucene user list" <java-user@lucene.apache.org>
Subject: BigDecimal values
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Message-ID: <op.ukw8brg72ic4zu@sj-desktop>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello

I want to ask community an advice:
what is the best way to index and search java.math.BigDecimal values in
lucene 2.4.

Any code snippets  are welcome.

Sergey Kabashnyuk
eXo Platform SAS

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 14:20:00 2008
Return-Path: <java-user-return-37294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36225 invoked from network); 20 Nov 2008 14:20:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 14:20:00 -0000
Received: (qmail 78874 invoked by uid 500); 20 Nov 2008 14:20:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78851 invoked by uid 500); 20 Nov 2008 14:20:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78840 invoked by uid 99); 20 Nov 2008 14:20:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 06:20:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 14:18:39 +0000
Received: by qw-out-2122.google.com with SMTP id 5so86810qwi.53
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 06:19:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=QEYwjUBI0BHIXOme2YULEk29c3CQxMEiUqg1YkCQOAE=;
        b=FOXkcC3V0LzRCd9gulBHMKLsMa/C311/LJ2++PlGhrjSCdC4wIHvKu3qQ3RpSbjIX2
         NMfKjfA0SnXGmsT1EpufBD4omRsO3YBTtxyGvS585rnUGZvHUlaLMVsXLPYWa7Ba0Kxa
         5ffLJph7ynvqWBI83CgxQScmtpqvjjWnKRPpA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=DGNa4QbcmxZi0Lf9wrOk3/MkjsxGVvhK7N6nUgyFsfZRpnHwfuBs8KomuJS4DRcswH
         6tLtWGM01l1EY6+FgXVTpPjPDdroqOx8xmV3xkem59Zovca5RsyxYSOoGneMwtOw8NJV
         Ujs6LRbrBZRFQyi3y5nUzkJnrad/1SFCyubqc=
Received: by 10.215.13.1 with SMTP id q1mr2317556qai.253.1227190763990;
        Thu, 20 Nov 2008 06:19:23 -0800 (PST)
Received: by 10.214.78.9 with HTTP; Thu, 20 Nov 2008 06:19:23 -0800 (PST)
Message-ID: <8c4e68610811200619te1dda5du9b6598f9a45507bf@mail.gmail.com>
Date: Thu, 20 Nov 2008 14:19:23 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BigDecimal values
In-Reply-To: <op.ukw8brg72ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <op.ukw8brg72ic4zu@sj-desktop>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Lucene only indexes strings.  The standard advice for numeric is to
pad to desired width with leading zeros, if likely to be used in range
searches.  How varied are the numbers you're going to be working with?
 I only work with stuff with 2 decimal places and tend to lose that.
e.g.

2.22 would be indexed as 000222
0.99  ... 000099

And of course go through the same conversion when searching.


But if you've got variable numbers of decimal places it might get more
interesting.


--
Ian.


On Thu, Nov 20, 2008 at 2:10 PM, Sergey Kabashnyuk <ksmmlist@gmail.com> wrote:
> Hello
>
> I want to ask community an advice:
> what is the best way to index and search java.math.BigDecimal values in
> lucene 2.4.
>
> Any code snippets  are welcome.
>
> Sergey Kabashnyuk
> eXo Platform SAS

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 14:31:41 2008
Return-Path: <java-user-return-37295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39945 invoked from network); 20 Nov 2008 14:31:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 14:31:41 -0000
Received: (qmail 8569 invoked by uid 500); 20 Nov 2008 14:31:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8535 invoked by uid 500); 20 Nov 2008 14:31:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8524 invoked by uid 99); 20 Nov 2008 14:31:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 06:31:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksmmlist@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 14:30:17 +0000
Received: by nf-out-0910.google.com with SMTP id g16so258135nfd.15
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 06:31:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:date:to:subject:from
         :content-type:mime-version:references:content-transfer-encoding
         :message-id:in-reply-to:user-agent;
        bh=2yCwLFNZRHYo5NjBvLX689wE9k2NZAbRGtXPIsuz+sw=;
        b=MadP8YVQF1VcYZilGJBiC0LINn6PheSEHUMEPxyFd1hcYawnzeYMAVwm0IK/lt9rx3
         786hfPgc3T5Oe8Iq/t4quCOrimOtKfgUeGCQZP+JfJafDTKHNTJTmYu4vUvbTOtfCVkw
         hsqSmQ8+ievR74j+Ngr5GEMaVh3Tq4LYS7CD0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=date:to:subject:from:content-type:mime-version:references
         :content-transfer-encoding:message-id:in-reply-to:user-agent;
        b=scxB666iuIngw/kMfiKbMGgU/Jw3rPc76atRonElZeFUFjsvtT6nyB1xgMqJNatOog
         b0Ip0NzyGJDaOENXokidA0/9gTDclHTGNOJyFpwVEOKvV2hSQXxkbiGlCpsnndnYH5aT
         GzB+zyFcaSY2GZAB0bewlansmiK1dm5yBS0qk=
Received: by 10.210.57.12 with SMTP id f12mr1982293eba.99.1227191461608;
        Thu, 20 Nov 2008 06:31:01 -0800 (PST)
Received: from sj-desktop ([92.113.116.123])
        by mx.google.com with ESMTPS id 20sm695694eyk.0.2008.11.20.06.30.58
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 20 Nov 2008 06:31:00 -0800 (PST)
Date: Thu, 20 Nov 2008 16:30:55 +0200
To: java-user@lucene.apache.org
Subject: Re: BigDecimal values
From: "Sergey Kabashnyuk" <ksmmlist@gmail.com>
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <op.ukw8brg72ic4zu@sj-desktop>
 <8c4e68610811200619te1dda5du9b6598f9a45507bf@mail.gmail.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.ukw89t1k2ic4zu@sj-desktop>
In-Reply-To: <8c4e68610811200619te1dda5du9b6598f9a45507bf@mail.gmail.com>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Ian

Unfortunately, I have to index any possible number of java.math.BigDecimal
I can rephrase my question this way:

How can I convert java.math.BigDecimal numbers in to string
for its storing in lexicographical order

Sergey Kabashnyuk
eXo Platform SAS

> Hi
>
>
> Lucene only indexes strings.  The standard advice for numeric is to
> pad to desired width with leading zeros, if likely to be used in range
> searches.  How varied are the numbers you're going to be working with?
>  I only work with stuff with 2 decimal places and tend to lose that.
> e.g.
>
> 2.22 would be indexed as 000222
> 0.99  ... 000099
>
> And of course go through the same conversion when searching.
>
>
> But if you've got variable numbers of decimal places it might get more
> interesting.
>
>
> --
> Ian.
>
>
> On Thu, Nov 20, 2008 at 2:10 PM, Sergey Kabashnyuk <ksmmlist@gmail.com>  
> wrote:
>> Hello
>>
>> I want to ask community an advice:
>> what is the best way to index and search java.math.BigDecimal values in
>> lucene 2.4.
>>
>> Any code snippets  are welcome.
>>
>> Sergey Kabashnyuk
>> eXo Platform SAS
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 15:15:10 2008
Return-Path: <java-user-return-37296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62739 invoked from network); 20 Nov 2008 15:15:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 15:15:09 -0000
Received: (qmail 384 invoked by uid 500); 20 Nov 2008 15:15:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99939 invoked by uid 500); 20 Nov 2008 15:15:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99928 invoked by uid 99); 20 Nov 2008 15:15:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 07:15:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 15:13:47 +0000
Received: by wf-out-1314.google.com with SMTP id 28so494968wfc.20
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 07:14:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=+ddltqeHXRB9aQnaf7/39v0ePfNcrKBMmKiKJF77wgs=;
        b=DLTtXMrnUGwWTF4XxL9WqQ91EI9Q8FtMAmtYSZzGlJwTroeJXYI0XXVseNHB3mln31
         owosa7dLsl0umx78gPHMQUA+4R1fma0gWTWsG/HdKEPGEOFiqPbbCs0ZpkAewXsz/r+i
         VXgyLRLuCPcStdJ0D1//rG65R41yeRQFeK2Vs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=omOgmazXgeSSH/WMLIe6Vm5iWDHzBFPgX5+qnD27MullHG/e8wk5lcJeR7HvW7F0JQ
         3yg0rLAroYHXvpQ64yTvZwOzg06SbBvYoh3IbNaA0VLVsHgRRNNM5F+v9jnp0qL8/ma8
         7IGLPWXOCsG+eiVbCwHRqSqjoBsOF4cZr+jgY=
Received: by 10.142.86.7 with SMTP id j7mr1182016wfb.122.1227194072422;
        Thu, 20 Nov 2008 07:14:32 -0800 (PST)
Received: by 10.143.31.19 with HTTP; Thu, 20 Nov 2008 07:14:32 -0800 (PST)
Message-ID: <867513fe0811200714g24aec396rb699e2c96979447f@mail.gmail.com>
Date: Thu, 20 Nov 2008 20:44:32 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: can I set Boost to the term while indexing?
In-Reply-To: <fba082560811180937h3a68960ak9018cd90cf1e3760@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13968_22343830.1227194072368"
References: <fba082560811180937h3a68960ak9018cd90cf1e3760@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13968_22343830.1227194072368
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Lin,

I guess you are looking at document boosting, if 'm right, you could
conditionally do this:
doc.setBoost(boostFactor);
where boostFactor is a float > 1.0 that boosts the doc with the boost
factor.
Also, you could also use
field.setBoost (boostValue) to boost a particular field in a document by a
particular boostfactor.
By default all boosts are set to 1.0 in lucene. The field.setBoost would
multiply the score of all matching docs by this factor while calculating
relevance.

Hope this solves your issue.

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Tue, Nov 18, 2008 at 11:07 PM, T. H. Lin <easy.lin@gmail.com> wrote:

> I would like to store a set of keywords in a single field of a document.
>
> for example I have now three keywords: "One", "Two" and "Three"
> and I am going to add them into a document.
>
> At first, is this code correct?
> /****************************************************************/
> String[] keyword = new String[]{"One", "Two", "Three"};
> for (int i = 0; i < keyword.length; i++) {
>   Field f = new Field("field_name",
>                            keyword[i],
>                            Field.Store.NO,
>                            Field.Index.UN_TOKENIZED,
>                            TermVector.YES);
>   doc.add(f);
> }
> indexWriter.addDocument(doc);
> /***************************************************************/
>
> when searching, We can set Boost for a query term.
>
> the question is...
> Can I set Boost for every keyword/term while indexing?
>
> from the example above. I may set those keywords. i.e. "One", "Two" and
> "Three", with different "Weight/Boost/Relavance..." while indexing.
> and the same "term" may have different "Weight/Boost/Relavance..." in
> different document.
>
> can I do this?
>
> thanks. :-)
>

------=_Part_13968_22343830.1227194072368--

From java-user-return-37297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 15:53:35 2008
Return-Path: <java-user-return-37297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78581 invoked from network); 20 Nov 2008 15:53:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 15:53:34 -0000
Received: (qmail 80668 invoked by uid 500); 20 Nov 2008 15:53:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80638 invoked by uid 500); 20 Nov 2008 15:53:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80627 invoked by uid 99); 20 Nov 2008 15:53:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 07:53:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 15:52:12 +0000
Received: by yx-out-2324.google.com with SMTP id 3so220539yxj.5
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 07:52:55 -0800 (PST)
Received: by 10.90.68.12 with SMTP id q12mr1677224aga.100.1227196375436;
        Thu, 20 Nov 2008 07:52:55 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 39sm969337agb.23.2008.11.20.07.52.53
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 20 Nov 2008 07:52:54 -0800 (PST)
Message-Id: <4BC78E93-8EBF-4C0A-9AC9-F4B285A07906@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <02f201c94b07$0da34d30$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: TermsFilter not available in 2.4
X-Priority: 3
Date: Thu, 20 Nov 2008 10:52:52 -0500
References: <02f201c94b07$0da34d30$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


This lives under contrib/queries, in both 2.3 and 2.4?

Mike

Ganesh wrote:

> In v2.4, TermsFilter class is not available in  
> org.apache.lucene.search.TermsFilter
>
> Regards
> Ganesh
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 16:40:10 2008
Return-Path: <java-user-return-37298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99198 invoked from network); 20 Nov 2008 16:40:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 16:40:10 -0000
Received: (qmail 89774 invoked by uid 500); 20 Nov 2008 16:40:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89723 invoked by uid 500); 20 Nov 2008 16:40:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89712 invoked by uid 99); 20 Nov 2008 16:40:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 08:40:11 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 64.233.170.190 as permitted sender)
Received: from [64.233.170.190] (HELO rn-out-0910.google.com) (64.233.170.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 16:38:48 +0000
Received: by rn-out-0910.google.com with SMTP id j71so502947rne.4
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 08:39:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=D/tdev3qkD410g9qUglw4IDyxAkFn+ql2TR9vxlICJo=;
        b=ldYlfBLAedFU1uH5wpW6emI3bgxEsZ+J4uzmzNLkdC6WKINXbUWv8CQ51PTtjyO+8N
         Zv+EKAaksvn6LPwC9FYLncvXMVEhGWV2g4oPbNKQ4VvVVtJQ+dfh2lMkgAnlg8H+f0L6
         Wy25fWcVRQmKlx4JtcNUy+p8XIlCcLI2lRR+Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=VqH3ymFZPp3frl/6qYbbFDzhZvKQwDe7O19pCWxDICXkdfJMOXlbbKm3vdEi9spdO7
         mG6r5+0AT5Tv6yCPeHQ4pfBgA1IuNgRt9U6JZ+3/J4JiSmY4flpE7isnSNYv1ADVaij6
         Fufv5jMSE3Y3wfPV7qrC+U4DB5cGEySMCHoHo=
Received: by 10.100.197.3 with SMTP id u3mr1244747anf.64.1227199173249;
        Thu, 20 Nov 2008 08:39:33 -0800 (PST)
Received: by 10.100.9.2 with HTTP; Thu, 20 Nov 2008 08:39:33 -0800 (PST)
Message-ID: <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
Date: Thu, 20 Nov 2008 11:39:33 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32523_4994382.1227199173249"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>
	 <491B0BCF.2000302@gmail.com>
	 <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>
	 <491B17D8.4090209@gmail.com>
	 <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
	 <491B2D13.8090006@gmail.com>
	 <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
	 <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
	 <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32523_4994382.1227199173249
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Wed, Nov 19, 2008 at 12:33 PM, Greg Shackles <gshackles@gmail.com> wrote:

> In the searching phase, I would run the search across all page documents,
> and then for each of those pages, do a search with
> PayloadSpanUtil.getPayloadsForQuery that made it so it only got payloads for
> each page at a time.  The function returns a Collection of Payloads as far
> as I can tell, so is there any way of knowing which payloads go together?
> That is to say, if you were to do a search for "lucene rocks" on the page
> and it appeared 3 times, you would get back 6 payloads in total.  Is there a
> quick way of knowing how to group them in the collection?
>

Just a follow-up on my post now that I was able to see what the real data
looks like when it comes back from PayloadSpanUtil.  The order of payload
terms in the collection doesn't seem useful, as I suspect it is somehow
related to the order they are stored in the index itself.  Because of that,
grouping them is going to be difficult as I suspected, but this seems like
something Lucene should be able to do for me.  Is that not correct?  I'd
like to keep as much of the logic as possible out of my own implementation
for the sake of performance so if there is some way to do this, I would love
to know.  Thanks!

By the way, the Payloads feature is really cool! Definitely way better than
how I was doing things originally.  : )

- Greg

------=_Part_32523_4994382.1227199173249--

From java-user-return-37299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 16:44:32 2008
Return-Path: <java-user-return-37299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 133 invoked from network); 20 Nov 2008 16:44:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 16:44:32 -0000
Received: (qmail 1296 invoked by uid 500); 20 Nov 2008 16:44:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1266 invoked by uid 500); 20 Nov 2008 16:44:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1249 invoked by uid 99); 20 Nov 2008 16:44:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 08:44:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.170.189 as permitted sender)
Received: from [64.233.170.189] (HELO rn-out-0910.google.com) (64.233.170.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 16:43:09 +0000
Received: by rn-out-0910.google.com with SMTP id j71so505107rne.4
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 08:43:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=U09WcW1cBcKXppiZkq2wXnc+OmxcpqkgPn8LKRkJ4Tc=;
        b=j0QMr4COwa45z7JOzdZr+RWdgTMphKRIxorvbXTtdskz/naoPK+PhAenc3yGSVnY3j
         dk/atWXKklyOnKYswVblo23ZaCVkVOMATGXh83k00di3gBWL9TIBpt6Hu+4BwNJatQ8f
         XrVrHz/DeJKYvN8OUuksdvSNAPleAmznUSUlA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=RZsXcZn3hkaU/J5vgBfTomqcrTVq1nf4IvXzPxUsKSP/qEpG+ovrpEDRK/VwiWsFo/
         sd1NyQ0r8aVF3QLeolEFaXKq0ozOYrQkYVWZjj42f8516ign6R9u06rb0fZvfGc5Umbz
         HQW6OfQOSW736mlTa1FvKJwY89UNjkl5Fjt1k=
Received: by 10.90.30.13 with SMTP id d13mr1722717agd.43.1227199424457;
        Thu, 20 Nov 2008 08:43:44 -0800 (PST)
Received: from ?192.168.1.100? (ool-44c639d9.dyn.optonline.net [68.198.57.217])
        by mx.google.com with ESMTPS id 38sm1076757agd.18.2008.11.20.08.43.43
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 20 Nov 2008 08:43:44 -0800 (PST)
Message-ID: <492593C1.1040003@gmail.com>
Date: Thu, 20 Nov 2008 11:43:45 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>	 <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>	 <491B0BCF.2000302@gmail.com>	 <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>	 <491B17D8.4090209@gmail.com>	 <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>	 <491B2D13.8090006@gmail.com>	 <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>	 <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>	 <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com> <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
In-Reply-To: <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Yeah, discussion came up on order and I believe we punted - its up to 
you to track order and sort at the moment. I think that was to prevent 
those that didnt need it from paying the sort cost, but I have to go 
find that discussion again (maybe its in the issue?) I'll look at the 
whole idea again though.

Greg Shackles wrote:
> On Wed, Nov 19, 2008 at 12:33 PM, Greg Shackles <gshackles@gmail.com> wrote:
>
>   
>> In the searching phase, I would run the search across all page documents,
>> and then for each of those pages, do a search with
>> PayloadSpanUtil.getPayloadsForQuery that made it so it only got payloads for
>> each page at a time.  The function returns a Collection of Payloads as far
>> as I can tell, so is there any way of knowing which payloads go together?
>> That is to say, if you were to do a search for "lucene rocks" on the page
>> and it appeared 3 times, you would get back 6 payloads in total.  Is there a
>> quick way of knowing how to group them in the collection?
>>
>>     
>
> Just a follow-up on my post now that I was able to see what the real data
> looks like when it comes back from PayloadSpanUtil.  The order of payload
> terms in the collection doesn't seem useful, as I suspect it is somehow
> related to the order they are stored in the index itself.  Because of that,
> grouping them is going to be difficult as I suspected, but this seems like
> something Lucene should be able to do for me.  Is that not correct?  I'd
> like to keep as much of the logic as possible out of my own implementation
> for the sake of performance so if there is some way to do this, I would love
> to know.  Thanks!
>
> By the way, the Payloads feature is really cool! Definitely way better than
> how I was doing things originally.  : )
>
> - Greg
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 17:04:53 2008
Return-Path: <java-user-return-37300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9578 invoked from network); 20 Nov 2008 17:04:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 17:04:53 -0000
Received: (qmail 32244 invoked by uid 500); 20 Nov 2008 17:04:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32215 invoked by uid 500); 20 Nov 2008 17:04:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32204 invoked by uid 99); 20 Nov 2008 17:04:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 09:04:54 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 17:03:32 +0000
Received: by yw-out-2324.google.com with SMTP id 3so238057ywj.5
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 09:04:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=/8DPHN6ZGayN8dZMCdwU9cc7XFX0z0amWClB88iSMAA=;
        b=xhUCL6zsjOClgoWs0TlVIiZcM5Od+inimlmtj081eQvUxl+rY4sTboE0CvxOd/7gmX
         N6Wz816j3zdhDeOIiRVSf4jH4mZYd03c3Cg6oDkDPqMEbJ9lUTtR22O1YfJpwKQr6OGi
         hjUcpe+Nrh9r0g8QfdooP7pMRzg544ozjnwZw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=fP4To16Qo+h4hBKT03iN0T9cL0hOTVVYUzvE5Qxr9ciUD05cMvtfxiywKN8xQh3Ur0
         3DodW3Zck5o7i3ij4gOx4FVshOdjqtabXtyIsCw9fj4CIGHrYPA0Hhu7vdIhi9+9Zbxo
         7nkXV/7tJYw3/TT+opKyUkGoAaXP7N7B+cNio=
Received: by 10.100.121.12 with SMTP id t12mr1247728anc.96.1227200647413;
        Thu, 20 Nov 2008 09:04:07 -0800 (PST)
Received: by 10.100.9.2 with HTTP; Thu, 20 Nov 2008 09:04:07 -0800 (PST)
Message-ID: <b63a7e9e0811200904n197b2331udd40a964050323c0@mail.gmail.com>
Date: Thu, 20 Nov 2008 12:04:07 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <492593C1.1040003@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32797_19341694.1227200647393"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>
	 <491B17D8.4090209@gmail.com>
	 <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
	 <491B2D13.8090006@gmail.com>
	 <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
	 <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
	 <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com>
	 <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
	 <492593C1.1040003@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32797_19341694.1227200647393
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the update, Mark.  I guess that means I'll have to do the sorting
myself - that shouldn't be too hard, but the annoying part would just be
knowing where one result ends and the next begins since there's no guarantee
that they'll always be the same. Let me know if you find any information on
the discussion about it.

- Greg


On Thu, Nov 20, 2008 at 11:43 AM, Mark Miller <markrmiller@gmail.com> wrote:

> Yeah, discussion came up on order and I believe we punted - its up to you
> to track order and sort at the moment. I think that was to prevent those
> that didnt need it from paying the sort cost, but I have to go find that
> discussion again (maybe its in the issue?) I'll look at the whole idea again
> though.
>
>

------=_Part_32797_19341694.1227200647393--

From java-user-return-37301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 19:17:27 2008
Return-Path: <java-user-return-37301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77528 invoked from network); 20 Nov 2008 19:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 19:17:26 -0000
Received: (qmail 8196 invoked by uid 500); 20 Nov 2008 19:17:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8169 invoked by uid 500); 20 Nov 2008 19:17:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8157 invoked by uid 99); 20 Nov 2008 19:17:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 11:17:27 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of easy.lin@gmail.com designates 209.85.219.21 as permitted sender)
Received: from [209.85.219.21] (HELO mail-ew0-f21.google.com) (209.85.219.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 19:16:05 +0000
Received: by ewy14 with SMTP id 14so16148ewy.5
        for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 11:15:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=HiY4mcw0okXRoygZak1Ls5jncmkw7rbod09pDG2QOSs=;
        b=AtsblBBxR6/dmu3zuZVaeg8xMEDngd0gX2jEFcoBIG0gSyqmCAFzLQh7RdL6MJewMr
         xvPuDl4mlhq4DEWyaHp++xD7rjLW+2FphhyUJxX9MaB0Jba6yE9anjAJfeGA4lkTUdNJ
         rl0WMaBBcgO0rNSS6kk5oeImEGoiDNlxvAMUQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=U8z34xsZcO8jnCCVm7EvMJxPHW4BkOitzZos2nbvAVa9gSKx+xywRDQKsO5AGhd/BW
         b3sJ51NKeYP+AQcSD7DxjCIIC5apxFKPOsF1LrzPhe23wmPgoCByXCGMc0nOESJhtAdh
         Cx4jKqUj4dwJiz0Q9lpQL7CLTFcVME1o+7pWE=
Received: by 10.86.51.10 with SMTP id y10mr1823921fgy.9.1227208548663;
        Thu, 20 Nov 2008 11:15:48 -0800 (PST)
Received: by 10.86.86.16 with HTTP; Thu, 20 Nov 2008 11:15:48 -0800 (PST)
Message-ID: <fba082560811201115o1d7f9666j1230fe5d81ea5032@mail.gmail.com>
Date: Thu, 20 Nov 2008 20:15:48 +0100
From: "T. H. Lin" <easy.lin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: can I set Boost to the term while indexing?
In-Reply-To: <867513fe0811200714g24aec396rb699e2c96979447f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_74316_1002651.1227208548633"
References: <fba082560811180937h3a68960ak9018cd90cf1e3760@mail.gmail.com>
	 <867513fe0811200714g24aec396rb699e2c96979447f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_74316_1002651.1227208548633
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi,

thanks for your suggestions.

actually, my original idea is that the same term may have different "weight"
in different doc.
of course the TF/IDF has already embedded some kind of term relavance to a
doc.
But I would like to explicitly set different "weight" to the same term in
diferent docs.

For instance,

the query is "T1 T2"

Both Doc1 and Doc2 have T1 and T2. They may also have exactly the same term
frequency!
But I want to bring some "semantic enhancement".
I want to let T1 has higher weight in Doc1 than in Doc2, and let T2 has
higher weight in Doc2 than Doc1.

I think, setBoost on a whole doc, on a field or on the term in query may not
achieve this.

Maybe "payload" is a solution, I will take a look!


Lin

2008/11/20 Grant Ingersoll <gsingers@apache.org>

> You can do this.  It's called adding a Payload.  You can add payloads
> during Analysis (Token.setPayload()) which means your code below will need
> to be changed below such that you use the Field constructor that takes in a
> TokenStream and wraps your input tokens.  This TokenStream will also need to
> add you payloads.
>
> then, during search, you can use a BoostingTermQuery to have the payload
> values factor in during scoring.
>
> -Grant
>
>
>

2008/11/20 Anshum <anshumg@gmail.com>

> Hi Lin,
>
> I guess you are looking at document boosting, if 'm right, you could
> conditionally do this:
> doc.setBoost(boostFactor);
> where boostFactor is a float > 1.0 that boosts the doc with the boost
> factor.
> Also, you could also use
> field.setBoost (boostValue) to boost a particular field in a document by a
> particular boostfactor.
> By default all boosts are set to 1.0 in lucene. The field.setBoost would
> multiply the score of all matching docs by this factor while calculating
> relevance.
>
> Hope this solves your issue.
>
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>

------=_Part_74316_1002651.1227208548633--

From java-user-return-37302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 20 20:06:19 2008
Return-Path: <java-user-return-37302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93893 invoked from network); 20 Nov 2008 20:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Nov 2008 20:06:19 -0000
Received: (qmail 72776 invoked by uid 500); 20 Nov 2008 20:06:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72752 invoked by uid 500); 20 Nov 2008 20:06:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72741 invoked by uid 99); 20 Nov 2008 20:06:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 12:06:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.237.204.15] (HELO lobster.as-guides.com) (80.237.204.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 20:04:57 +0000
Received: from seaweed.as-guides.com ([87.193.161.199] helo=[172.16.100.126])
	by lobster.as-guides.com with esmtpsa (TLS-1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.63)
	(envelope-from <mlu@as-guides.com>)
	id 1L3FmS-0004NF-M8
	for java-user@lucene.apache.org; Thu, 20 Nov 2008 21:05:40 +0100
Message-ID: <4925C30F.40107@as-guides.com>
Date: Thu, 20 Nov 2008 21:05:35 +0100
From: Michael Ludwig <mlu@as-guides.com>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: BigDecimal values
References: <op.ukw8brg72ic4zu@sj-desktop> <8c4e68610811200619te1dda5du9b6598f9a45507bf@mail.gmail.com> <op.ukw89t1k2ic4zu@sj-desktop>
In-Reply-To: <op.ukw89t1k2ic4zu@sj-desktop>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Do-Not-Run: Yes
X-Spam-Score: -1.8 (-)
X-Virus-Checked: Checked by ClamAV on apache.org

Sergey Kabashnyuk schrieb:
> Unfortunately, I have to index any possible number of
> java.math.BigDecimal

Hi Sergey,

quite a lot of numbers are possible for BigDecimal. Somehow the range
must be bounded.

Let's first draw the line where, for a given BigDecimal bd, the result
of bd.toString(), which since 1.5 returns a "standard canonical string
form", cannot be refed to the String constructor for BigDecimal. So when
reconstruction fails, that is out of range for you.

### 9.999E2147483647 still works
9.999E+2147483647 - toString()
99.99E+2147483646 - toEngineeringString()
Rekonstruktion via toString():            works
Rekonstruktion via toEngineeringString(): works

### 10.001E2147483647 too big, does not work
1.0001E+2147483648 - toString()
100.01E+2147483646 - toEngineeringString()
Rekonstruktion via toString():            NumberFormatException
Rekonstruktion via toEngineeringString(): works

Next, unlimited precision is a problem. Do you need a precision of two
billion digits? Probably not. De facto, precision is constrained by
available memory. So you see you must rephrase your requirement in order
to accomodate real-world conditions.

> I can rephrase my question this way:
> How can I convert java.math.BigDecimal numbers in to string
> for its storing in lexicographical order

I assume what you mean is formatting the number so that the
lexicographical order of any possible sequence of acceptable numbers
is the same as its numerical order.

You must find a canonical representation like the scientific notation
and then tweak it as follows:

* "N" for negative and "P" for positive numbers ("N" sorts before "P")
* fixed-width zero-padded exponent first, like "E0000000003", base 10
* one digit with marker, like "N2"
* fixed-width zero-padded decimals with marker, like "D008000000000"

This is 2008, "PE0000000003N2D008000000000". YMMV, of course.

I hope this helps.

Michael Ludwig

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 21 00:54:33 2008
Return-Path: <java-user-return-37303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27330 invoked from network); 21 Nov 2008 00:54:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2008 00:54:33 -0000
Received: (qmail 468 invoked by uid 500); 21 Nov 2008 00:54:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 330 invoked by uid 500); 21 Nov 2008 00:54:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 317 invoked by uid 99); 21 Nov 2008 00:54:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 16:54:35 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.98.21] (HELO mx3.syr.edu) (128.230.98.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Nov 2008 00:53:10 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by mx3.syr.edu (8.14.3/8.14.3) with ESMTP id mAL0ojIG015986
	for <java-user@lucene.apache.org>; Thu, 20 Nov 2008 19:50:45 -0500
Received: from suexmx-01.ad.syr.edu (128.230.108.65) by
 suex07-hub-01.ad.syr.edu (128.230.108.195) with Microsoft SMTP Server id
 8.1.291.1; Thu, 20 Nov 2008 19:50:45 -0500
Received: from SUEXCL-02.ad.syr.edu ([128.230.108.46]) by suexmx-01.ad.syr.edu
 with Microsoft SMTPSVC(6.0.3790.3959);	 Thu, 20 Nov 2008 19:50:46 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: BigDecimal values
Date: Thu, 20 Nov 2008 19:50:44 -0500
Message-ID: <9294E20AED46934EA459020706463F94EF457A@SUEXCL-02.ad.syr.edu>
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
Thread-Topic: BigDecimal values
Thread-Index: AclLHLeIZAoADzLsRDi8lDYZvobeMAAI7eBgAAt8vnA=
From: Steven A Rowe <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Nov 2008 00:50:46.0132 (UTC) FILETIME=[305A5B40:01C94B73]
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.7400:2.4.4,1.2.40,4.0.166 definitions=2008-11-21_01:2008-11-19,2008-11-21,2008-11-20 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgU2VyZ2V5LA0KDQpPbiAxMS8yMC8yMDA4IGF0IDk6MzAgQU0sIFNlcmdleSBLYWJhc2hueXVr
IHdyb3RlOg0KPiBIb3cgY2FuIEkgY29udmVydCBqYXZhLm1hdGguQmlnRGVjaW1hbCBudW1iZXJz
IGluIHRvIHN0cmluZw0KPiBmb3IgaXRzIHN0b3JpbmcgaW4gbGV4aWNvZ3JhcGhpY2FsIG9yZGVy
DQoNCkhlcmUncyBhIHRob3JvdWdobHkgdW50ZXN0ZWQgaWRlYSwgY3JpYmJpbmcgc29tZSBmcm9t
IG8uYS5sLmRvY3VtZW50Lk51bWJlclRvb2xzWzFdOiBjb252ZXJ0IEJpZ0RlY2ltYWxzIGludG8g
c3RyaW5ncyBvZiB0aGUgZm9sbG93aW5nIGZvcm06DQoNCiAgIDxzaWduaWZpY2FuZC1zaWduPiA8
ZXhwb25lbnQtc2lnbj4gPGV4cG9uZW50PiA8c2lnbmlmaWNhbmQ+DQoNCkFzIGluIE51bWJlclRv
b2xzLCB0aGUgc2lnbnMgY29uc2lzdCBvZiBlaXRoZXIgdGhlICctJyBvciB0aGUgJzAnIGNoYXJh
Y3RlcjsgJy0nIDwgJzAnLg0KDQpUaGUgZXhwb25lbnQgbXVzdCBiZSBmaXhlZCBsZW5ndGgsIGFu
ZCBzZXJpYWxpemVkIGFzIGluIE51bWJlclRvb2xzLCB3aXRoIGxlZnQtemVyby1wYWRkaW5nIGFu
ZCB1c2luZyB0aGUgbmVnYXRpdmUgaW52ZXJzaW9uIHRyaWNrLiAgVGhlIGV4cG9uZW50IGNvdWxk
IGJlIGV4cHJlc3NlZCBpbiBhbnkgYmFzZSB0aGF0IHdpbGwgZml0IGludG8gSmF2YSdzIDE2LWJp
dCBjaGFyIC0gTHVjZW5lJ3MgTnVtYmVyVG9vbHMgdXNlcyBiYXNlIDM2OyBzZWUgU29scidzIE51
bWJlclV0aWxzWzJdIG9yIExVQ0VORS0xNDM0WzNdIGZvciBiYXNlIDB4ODAwMCBpbXBsZW1lbnRh
dGlvbnMuDQoNClRoZSBleHBvbmVudCBjYW4gYmUgY2FsY3VsYXRlZCBmcm9tIHRoZSBudW1iZXIg
b2YgZGlnaXRzIGluIHRoZSBzZXJpYWxpemVkIGJhc2UgMTAgZm9ybSBvZiB0aGUgc2lnbmlmaWNh
bmQgKEJpZ0RlY2ltYWwncyAidW5zY2FsZWQgdmFsdWUiKSBhbmQgdGhlICJzY2FsZSIgKHRoZSBu
dW1iZXIgb2YgZGlnaXRzIGFmdGVyIHRoZSBkZWNpbWFsKTogZXhwb25lbnQgPSAobnVtYmVyIG9m
IHNpZ25pZmljYW5kIGRpZ2l0cykgLSBzY2FsZSAtIDEuDQoNClRoZSBzaWduaWZpY2FuZCBmaWVs
ZCBjYW4gYmUgdmFyaWFibGUgbGVuZ3RoLCB0aG91Z2ggaXQgY2FuJ3QgY29udGFpbiBhbnkgbGVm
dC16ZXJvLXBhZGRpbmcsIGFuZCBjb3VsZCBiZSBleHByZXNzZWQgaW4gYW55IGJhc2U7IGFnYWlu
LCBzZWUgWzJdIG9yIFszXS4NCg0KU29tZSBleGFtcGxlcyAoYmFzZSAxMCBhbmQgNC1jaGFyLXdp
ZHRoIGV4cG9uZW50IHVzZWQgZm9yIHB1cnBvc2VzIG9mIGV4cG9zaXRpb24pLCBpbiBzb3J0ZWQg
b3JkZXI6DQoNCiAgICs1LkUtMyAgICAgPT4gMCAtIDk5OTYgNQ0KICAgKzEuRS0yICAgICA9PiAw
IC0gOTk5NyAxDQogICArMS4wRS0yICAgID0+IDAgLSA5OTk3IDEwDQogICArMS4wMDAwRS0yID0+
IDAgLSA5OTk3IDEwMDAwDQogICArMS4xRS0yICAgID0+IDAgLSA5OTk3IDExDQogICArMS4xMUUt
MiAgID0+IDAgLSA5OTk3IDExMQ0KICAgKzEuMkUtMiAgICA9PiAwIC0gOTk5NyAxMg0KICAgKzUu
RS0yICAgICA9PiAwIC0gOTk5NyA1DQogICArNy4zRSsyICAgID0+IDAgMCAwMDAyIDczDQogICAr
Ny40RSsyICAgID0+IDAgMCAwMDAyIDc0DQogICArNy40NUUrMiAgID0+IDAgMCAwMDAyIDc0NQ0K
ICAgKzguNzY1NEUrMyA9PiAwIDAgMDAwMyA4NzY1NA0KDQpOZWdhdGl2ZSBudW1iZXJzIGFyZSBh
IHByb2JsZW0gZm9yIHRoZSBzaWduaWZpY2FuZCwgdGhvdWdoLCBzaW5jZSBOdW1iZXJUb29scycg
bmVnYXRpdmUgaW52ZXJzaW9uIHRyaWNrIGFzc3VtZXMgYSBmaXhlZC1wcmVjaXNpb24gbWluaW11
bSB2YWx1ZSAtIHlvdSdkIG5lZWQgdG8gdXNlIGEgZGlmZmVyZW50IHRlY2huaXF1ZSBoZXJlIGlu
IG9yZGVyIHRvIGVuYWJsZSB2YXJpYWJsZSBsZW5ndGggc2lnbmlmaWNhbmRzLiAgDQoNCkFub3Ro
ZXIgZW50aXJlbHkgdW50ZXN0ZWQgaWRlYSwgdG8gaGFuZGxlIHZhcmlhYmxlIGxlbmd0aCBuZWdh
dGl2ZSBzaWduaWZpY2FuZHM6IHN1YnN0aXR1dGUgKGJhc2UgLSBkaWdpdCAtIDEpIGZvciBlYWNo
IGRpZ2l0IG9mIHRoZSBzZXJpYWxpemVkIHJlcHJlc2VudGF0aW9uIChlLmcuIGluIGJhc2UgMTAs
IDQgPT4gNSAmIDAgPT4gOSksIHRoZW4gYXBwZW5kIGEgc2VudGluYWwgZGlnaXQgdGhhdCBpcyBn
cmVhdGVyIHRoYW4gYWxsIG90aGVyIGRpZ2l0cyB1c2VkIHRvIHJlcHJlc2VudCB0aGUgc2lnbmlm
aWNhbmQuICBUaGUgZm9ybWF0IGZvciBuZWdhdGl2ZSBCaWdEZWNpbWFscywgdGhlbiwgd291bGQg
YmU6DQoNCiAgICctJyA8cmV2ZXJzZWQtZXhwb25lbnQtc2lnbj4gPG5lZ2F0ZWQtZXhwb25lbnQ+
IDxzaWduaWZpY2FuZD4gPHNlbnRpbmVsPg0KDQp3aGVyZSB0aGUgZXhwb25lbnQgYW5kIGl0cyBz
aWduIGFyZSBuZWdhdGVkIGJlZm9yZSBzZXJpYWxpemF0aW9uLCBzbyB0aGF0IHRoZWlyIHNlbnNl
IGlzIHJldmVyc2VkLg0KDQpTb21lIG5lZ2F0aXZlIGV4YW1wbGVzIChiYXNlIDEwIGFuZCA0LWNo
YXItd2lkdGggZXhwb25lbnQgdXNlZCBmb3IgcHVycG9zZXMgb2YgZXhwb3NpdGlvbiksIGluIHNv
cnRlZCBvcmRlcjoNCg0KICAgLTguNzY1NEUrMyA9PiAtIC0gOTk5NiAxMjM0NSBBDQogICAtNy40
NUUrMiAgID0+IC0gLSA5OTk3IDI1NCBBDQogICAtNy40RSsyICAgID0+IC0gLSA5OTk3IDI1IEEN
CiAgIC03LjNFKzIgICAgPT4gLSAtIDk5OTcgMjYgQQ0KICAgLTUuRS0yICAgICA9PiAtIDAgMDAw
MiA0IEENCiAgIC0xLjJFLTIgICAgPT4gLSAwIDAwMDIgODcgQQ0KICAgLTEuMTFFLTIgICA9PiAt
IDAgMDAwMiA4ODggQQ0KICAgLTEuMUUtMiAgICA9PiAtIDAgMDAwMiA4OCBBDQogICAtMS4wMDAw
RS0yID0+IC0gMCAwMDAyIDg5OTk5IEENCiAgIC0xLjBFLTIgICAgPT4gLSAwIDAwMDIgODkgQQ0K
ICAgLTEuRS0yICAgICA9PiAtIDAgMDAwMiA4IEENCiAgIC01LkUtMyAgICAgPT4gLSAwIDAwMDMg
NCBBDQoNClRoZSB1c2Ugb2YgdGhlIHNlbnRpbmVsIGRpZ2l0ICdBJywgd2hpY2ggaXMgZ3JlYXRl
ciB0aGFuIGFsbCBvZiB0aGUgb3RoZXIgZGlnaXRzIFswLTldLCBlbnN1cmVzIHRoYXQgbmVnYXRp
dmUgdmFsdWVzIHdpdGggZ3JlYXRlciBwcmVjaXNpb24gYXJlIG9yZGVyZWQgYmVmb3JlIHRob3Nl
IHRoYXQgc2hhcmUgc2lnbmlmaWNhbmQgcHJlZml4ZXMgYnV0IGhhdmUgbGVzc2VyIHByZWNpc2lv
bi4NCg0KQWx0aG91Z2ggQmlnRGVjaW1hbCBjbGFpbXMgdG8gc3VwcG9ydCBhcmJpdHJhcnkgcHJl
Y2lzaW9uLCBpdHMgc2NhbGUgcmVwcmVzZW50YXRpb24gaXMgYW4gaW50ICgzMiBiaXRzKSwgYW5k
IGl0cyBzaWduaWZpY2FuZCAoInVuc2NhbGVkIHZhbHVlIikgY2FuIGhhdmUgYXQgbW9zdCBJbnRl
Z2VyLk1BWF9WQUxVRSBiaXRzIChjLmYuIGphdmEubWF0aC5CaWdJbnRlZ2VyLmJpdExlbmd0aCgp
OmludFs0XSkuICBJZiB0aGUgd2lkdGggb2YgdGhlIGV4cG9uZW50IGZpZWxkIGlzIG1hZGUgc28g
dGhhdCBpdCBjYW4gZXhwcmVzcyBhbGwgbG9uZyB2YWx1ZXMgKDY0IGJpdHMpLCBJICp0aGluayog
dGhpcyBzY2hlbWUgY2FuIGhhbmRsZSBhbGwgQmlnRGVjaW1hbCB2YWx1ZXMuDQoNClN0ZXZlDQoN
ClsxXSBvLmEubC5kb2N1bWVudC5OdW1iZXJUb29sczogPGh0dHA6Ly9zdm4uYXBhY2hlLm9yZy92
aWV3dmMvbHVjZW5lL2phdmEvdGFncy9sdWNlbmVfMl80XzAvc3JjL2phdmEvb3JnL2FwYWNoZS9s
dWNlbmUvZG9jdW1lbnQvTnVtYmVyVG9vbHMuamF2YT92aWV3PW1hcmt1cD4NClsyXSBvLmEucy51
dGlsLk51bWJlclV0aWxzOiA8aHR0cDovL3N2bi5hcGFjaGUub3JnL3ZpZXd2Yy9sdWNlbmUvc29s
ci90YWdzL3JlbGVhc2UtMS4zLjAvc3JjL2phdmEvb3JnL2FwYWNoZS9zb2xyL3V0aWwvTnVtYmVy
VXRpbHMuamF2YT92aWV3PW1hcmt1cD4NClszXSBJbmRleGFibGVCaW5hcnlTdHJpbmdUb29scyBK
SVJBIGlzc3VlOiBodHRwczovL2lzc3Vlcy5hcGFjaGUub3JnL2ppcmEvYnJvd3NlL0xVQ0VORS0x
NDM0DQpbNF0gQmlnSW50ZWdlci5iaXRMZW5ndGgoKTogPGh0dHA6Ly9qYXZhLnN1bi5jb20vajJz
ZS8xLjQuMi9kb2NzL2FwaS9qYXZhL21hdGgvQmlnSW50ZWdlci5odG1sI2JpdExlbmd0aCgpPg0K


From java-user-return-37304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 21 04:59:31 2008
Return-Path: <java-user-return-37304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10813 invoked from network); 21 Nov 2008 04:59:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2008 04:59:31 -0000
Received: (qmail 17451 invoked by uid 500); 21 Nov 2008 04:59:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17417 invoked by uid 500); 21 Nov 2008 04:59:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17405 invoked by uid 99); 21 Nov 2008 04:59:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 20:59:33 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.227] (HELO smtp124.mail.mud.yahoo.com) (209.191.84.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Nov 2008 04:58:07 +0000
Received: (qmail 39788 invoked from network); 21 Nov 2008 04:58:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=mPFuonE/Arg6j8B6brtgtiVqM+qLpGwPDSsiIYjtFdbNzbZTyRX0+5Vvsi6quzGjeniFQyeHm0pBSXsPhdXAQgF4SwAii7747b3Q9Y1gHbfcdD5Q3zeQBF4guToQau5t+FKs3ud2lHTSsKifukr9EONerARVhlMFsiErPuIcA2I=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp124.mail.mud.yahoo.com with SMTP; 21 Nov 2008 04:58:48 -0000
X-YMail-OSG: JWxB9k0VM1n0WtkotleW.6Zc5g_L1NlF_kOExLGm2uuj7aE5MQ_aVh3A.SeTjyZrz0Bzy3zRpj6ExfRuy8TP3qpYhKPndX1v8WfHEwCSClHGQgjRms.XyPvS96Arakek_uhM
X-Yahoo-Newman-Property: ymail-3
Message-ID: <030701c94b95$d765e7c0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Filter or Query
Date: Fri, 21 Nov 2008 10:28:45 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

I am planning to use Filter for UserID and Date. I will not be able to cache 
the Filter. I have to create this filter for every request. To my knowledge, 
Filter will give faster results, only if it is cached.

Is it a good idea to use a filter or better to use query?

Regards
Ganesh

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 21 05:57:50 2008
Return-Path: <java-user-return-37305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40155 invoked from network); 21 Nov 2008 05:57:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2008 05:57:50 -0000
Received: (qmail 45284 invoked by uid 500); 21 Nov 2008 05:57:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45255 invoked by uid 500); 21 Nov 2008 05:57:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45244 invoked by uid 99); 21 Nov 2008 05:57:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 21:57:52 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Nov 2008 05:56:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L3P0y-0002h7-U8
	for java-user@lucene.apache.org; Thu, 20 Nov 2008 21:57:12 -0800
Message-ID: <20615647.post@talk.nabble.com>
Date: Thu, 20 Nov 2008 21:57:12 -0800 (PST)
From: "naveen.quill" <naveen.verus@gmail.com>
To: java-user@lucene.apache.org
Subject: how to sort the result by ignoring case in lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: naveen.verus@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I have a query regarding the sorting techniques in the lucene i.e
if i apply the sort method to the search results, lucene is sorting the
results by, without ignoring case, so, how to apply the sort technique that
it should sort by ignoring case

i.e : 
if the results value are : {ACB, abc, adc, Aad}, 
After sorting the results by lucene : {Aad, ACB, abc, adc} [here the lucene
is taking uppercase words first to sort the results then lowercase],
but i need to get the results in this order : {Aad, abc, ACB, adc}

so how to sort the results by ignoring case

here is my code :
String queryComplex = "110_a_t:a* 110_a_t:A*";
SortField sortField = new SortField("110_a_t", SortField.STRING);
Sort sort = new Sort(sortField);
QueryParser queryParser=new QueryParser("",new StandardAnalyzer());
queryParser.setLowercaseExpandedTerms(false);
Query query = queryParser.parse(queryComplex);
org.apache.lucene.search.Hits
catalogueHits=search.indexSearcher.search(query, sort);
-- 
View this message in context: http://www.nabble.com/how-to-sort-the-result-by-ignoring-case-in-lucene-tp20615647p20615647.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 21 06:07:23 2008
Return-Path: <java-user-return-37306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46277 invoked from network); 21 Nov 2008 06:07:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2008 06:07:23 -0000
Received: (qmail 49640 invoked by uid 500); 21 Nov 2008 06:07:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49612 invoked by uid 500); 21 Nov 2008 06:07:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49601 invoked by uid 99); 21 Nov 2008 06:07:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 22:07:25 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.165] (HELO smtp116.mail.mud.yahoo.com) (209.191.84.165)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Nov 2008 06:05:59 +0000
Received: (qmail 55566 invoked from network); 21 Nov 2008 06:05:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=Ie4RG3jIOfQzPAAWqGjuO2cAd7gehnRCM5AwG8jiMLX0GcjIAd9j8UKLHwU7b/q1bo98GA1X4OgEQo+g/67Mq2h6Z92LxEcoGDfleExBj+P8lweJqDssjT2+8RMmTsiwoMqArMwbPZPrRFN864A1KJrRdbNo755FjrVD+LZQcsQ=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp116.mail.mud.yahoo.com with SMTP; 21 Nov 2008 06:05:42 -0000
X-YMail-OSG: 0d7XaSMVM1kCA.1fjlKLuNlhPBIE7lDvufNLwwhQpPCiMYluEgkKobjOlXfAtkaEAOzrPNoxDKvQxYCLqqlY0tW3SHbVDEN9uhBW_FbedaqSzLtePlBvZK4agvD7btz3AkWkASH05pVGOfc_K8fHXVyDHQ--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <030d01c94b9f$2fa70cd0$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <20615647.post@talk.nabble.com>
Subject: Re: how to sort the result by ignoring case in lucene
Date: Fri, 21 Nov 2008 11:35:40 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

You need to write your own sort comparator
SortField(String field, SortComparatorSource comparator)

Regards
Ganesh

----- Original Message ----- 
From: "naveen.quill" <naveen.verus@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Friday, November 21, 2008 11:27 AM
Subject: how to sort the result by ignoring case in lucene


>
> Hi,
>
> I have a query regarding the sorting techniques in the lucene i.e
> if i apply the sort method to the search results, lucene is sorting the
> results by, without ignoring case, so, how to apply the sort technique 
> that
> it should sort by ignoring case
>
> i.e :
> if the results value are : {ACB, abc, adc, Aad},
> After sorting the results by lucene : {Aad, ACB, abc, adc} [here the 
> lucene
> is taking uppercase words first to sort the results then lowercase],
> but i need to get the results in this order : {Aad, abc, ACB, adc}
>
> so how to sort the results by ignoring case
>
> here is my code :
> String queryComplex = "110_a_t:a* 110_a_t:A*";
> SortField sortField = new SortField("110_a_t", SortField.STRING);
> Sort sort = new Sort(sortField);
> QueryParser queryParser=new QueryParser("",new StandardAnalyzer());
> queryParser.setLowercaseExpandedTerms(false);
> Query query = queryParser.parse(queryComplex);
> org.apache.lucene.search.Hits
> catalogueHits=search.indexSearcher.search(query, sort);
> -- 
> View this message in context: 
> http://www.nabble.com/how-to-sort-the-result-by-ignoring-case-in-lucene-tp20615647p20615647.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 21 06:31:03 2008
Return-Path: <java-user-return-37307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64038 invoked from network); 21 Nov 2008 06:31:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2008 06:31:03 -0000
Received: (qmail 75335 invoked by uid 500); 21 Nov 2008 06:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75299 invoked by uid 500); 21 Nov 2008 06:31:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75288 invoked by uid 99); 21 Nov 2008 06:31:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Nov 2008 22:31:04 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Nov 2008 06:29:40 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L3PX6-0003ob-Vf
	for java-user@lucene.apache.org; Thu, 20 Nov 2008 22:30:24 -0800
Message-ID: <20615846.post@talk.nabble.com>
Date: Thu, 20 Nov 2008 22:30:24 -0800 (PST)
From: "naveen.a" <naveen.verus@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to sort the result by ignoring case in lucene
In-Reply-To: <030d01c94b9f$2fa70cd0$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: naveen.verus@gmail.com
References: <20615647.post@talk.nabble.com> <030d01c94b9f$2fa70cd0$330bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Ganesh,

I have already tried my own comparator, below is my code :

SortComparator comparator = new SortComparator() {
                    @Override
                    protected Comparable getComparable(String arg0) {
                        final String str = arg0;
                        Comparable comparable = new Comparable() {
                            @Override
                            public int compareTo(Object o) {
                                System.out.println("obj = "+o.getClass()+",
str = "+str);
                                return
o.toString().compareToIgnoreCase(str);
                            }
                        };
                        return comparable;
                    }
                };
SortField sortField = new SortField("110_a_t", comparator);
                Sort sort = new Sort(sortField);
org.apache.lucene.search.Hits
catalogueHits=search.indexSearcher.search(query, sort);
-------------------------------------------------
here the lucene is passing the present class
(org.verus.ngl.lucene.search.NGLSearch$1$1) object to compareTo method, but
it is not a term to compare with anather term
so, how to implement the SortComparator, where should i change the code for
my comparator

Output :
obj = class org.verus.ngl.lucene.search.NGLSearch$1$1, str = Adalf Hitler
obj = class org.verus.ngl.lucene.search.NGLSearch$1$1, str = Adalf Hitler
obj = class org.verus.ngl.lucene.search.NGLSearch$1$1, str = agdfgdgdfg
obj = class org.verus.ngl.lucene.search.NGLSearch$1$1, str = agdfgdgdfg
obj = class org.verus.ngl.lucene.search.NGLSearch$1$1, str = afhuhruhgjr
obj = class org.verus.ngl.lucene.search.NGLSearch$1$1, str = afhuhruhgjr
obj = class org.verus.ngl.lucene.search.NGLSearch$1$1, str = afsfdsgsd
obj = class org.verus.ngl.lucene.search.NGLSearch$1$1, str = afsfdsgsd
obj = class org.verus.ngl.lucene.search.NGLSearch$1$1, str = adsadsd
Results are :
id = 134, docId = 105
id = 135, docId = 106
id = 102, docId = 73
id = 100, docId = 71
id = 101, docId = 72
id = 122, docId = 93
id = 127, docId = 98
id = 132, docId = 103
id = 143, docId = 114



Ganesh - yahoo wrote:
> 
> You need to write your own sort comparator
> SortField(String field, SortComparatorSource comparator)
> 
> Regards
> Ganesh
> 
> ----- Original Message ----- 
> From: "naveen.quill" <naveen.verus@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, November 21, 2008 11:27 AM
> Subject: how to sort the result by ignoring case in lucene
> 
> 
>>
>> Hi,
>>
>> I have a query regarding the sorting techniques in the lucene i.e
>> if i apply the sort method to the search results, lucene is sorting the
>> results by, without ignoring case, so, how to apply the sort technique 
>> that
>> it should sort by ignoring case
>>
>> i.e :
>> if the results value are : {ACB, abc, adc, Aad},
>> After sorting the results by lucene : {Aad, ACB, abc, adc} [here the 
>> lucene
>> is taking uppercase words first to sort the results then lowercase],
>> but i need to get the results in this order : {Aad, abc, ACB, adc}
>>
>> so how to sort the results by ignoring case
>>
>> here is my code :
>> String queryComplex = "110_a_t:a* 110_a_t:A*";
>> SortField sortField = new SortField("110_a_t", SortField.STRING);
>> Sort sort = new Sort(sortField);
>> QueryParser queryParser=new QueryParser("",new StandardAnalyzer());
>> queryParser.setLowercaseExpandedTerms(false);
>> Query query = queryParser.parse(queryComplex);
>> org.apache.lucene.search.Hits
>> catalogueHits=search.indexSearcher.search(query, sort);
>> -- 
>> View this message in context: 
>> http://www.nabble.com/how-to-sort-the-result-by-ignoring-case-in-lucene-tp20615647p20615647.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> Send instant messages to your online friends http://in.messenger.yahoo.com 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-sort-the-result-by-ignoring-case-in-lucene-tp20615647p20615846.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 21 10:02:55 2008
Return-Path: <java-user-return-37308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80488 invoked from network); 21 Nov 2008 10:02:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2008 10:02:55 -0000
Received: (qmail 48768 invoked by uid 500); 21 Nov 2008 10:02:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48726 invoked by uid 500); 21 Nov 2008 10:02:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48715 invoked by uid 99); 21 Nov 2008 10:02:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Nov 2008 02:02:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.248] (HELO ag-out-0708.google.com) (72.14.246.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Nov 2008 10:01:30 +0000
Received: by ag-out-0708.google.com with SMTP id 23so580949agd.11
        for <java-user@lucene.apache.org>; Fri, 21 Nov 2008 02:02:13 -0800 (PST)
Received: by 10.90.69.15 with SMTP id r15mr183537aga.63.1227261732798;
        Fri, 21 Nov 2008 02:02:12 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 9sm2180534agc.31.2008.11.21.02.02.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 21 Nov 2008 02:02:11 -0800 (PST)
Message-Id: <BEA943B4-3482-4654-A0A9-1089A52B5FD7@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <A141F98B49A8FF4481F5BD63C94997A34A04C9@servernew.INTRANET.EASYTERM.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Lucene
Date: Fri, 21 Nov 2008 05:02:09 -0500
References: <A141F98B49A8FF4481F5BD63C94997A34A04C9@servernew.INTRANET.EASYTERM.net>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


1) For Lucene's scoring, there's this:

   http://lucene.apache.org/java/2_4_0/scoring.html#Scoring

And Lucene in action also describes the scoring formula.

2) It's up to you to build a Lucene document from your content, so you =20=

decide which parts of your content (body, link, meta) become which =20
fields in Lucene.  At that point Lucene's scoring formula kicks in.

Mike

Marco Palumbo - In4Tech wrote:

> Good morning,
>
> some days ago I sent the following e-mail, but I had no feed-back on =20=

> it. Could you please tell us if there is someone able to cooperate =20
> with us on this project?
>
> Thank you in advance,
>
> Marco Palumbo
>
>           dott. Marco Palumbo
>           Chief Financial Officer
>           In4Tech s.r.l.
>           c.so Canalgrande, n. 88
>           41100 Modena - Italy
>           tel.: 0039 059 230651
>           fax : 0039 059 244672
>           www.in4tech.net
>
> From: Marco Palumbo - In4Tech
> Sent: gioved=EC 13 novembre 2008 16.03
> To: java-user@lucene.apache.org
> Subject: Lucene
>
> Good morning,
>
> our company works in the field of industrial biotechnologies. We =20
> were interested in having a software capable to classify web-sites =20
> (and so organizations) working in our field. So, one of our IT =20
> consultants organized a system based on Heritrix =
(http://crawler.archive.org/=20
> ) and Lucene.
>
> As you know, Lucene calculates some scores of frequency. We would  =20
> like to know/obtain:
> 1) the formula used by Lucene to calculate the scores;
> 2) for each page, the basic information used by Lucene to calculate =20=

> the scores (atomic data: term's frequency in meta, link, body; =20
> dimension of the page; ...).
>
> How can you help us to have this kind of information?
>
> Thanks.
>
> Marco Palumbo
>
>
>           dott. Marco Palumbo
>           Chief Financial Officer
>           In4Tech s.r.l.
>           c.so Canalgrande, n. 88
>           41100 Modena - Italy
>           tel.: 0039 059 230651
>           fax : 0039 059 244672
>           www.in4tech.net
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 21 10:21:42 2008
Return-Path: <java-user-return-37309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92274 invoked from network); 21 Nov 2008 10:21:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2008 10:21:42 -0000
Received: (qmail 75486 invoked by uid 500); 21 Nov 2008 10:21:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75455 invoked by uid 500); 21 Nov 2008 10:21:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75444 invoked by uid 99); 21 Nov 2008 10:21:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Nov 2008 02:21:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.237.204.15] (HELO lobster.as-guides.com) (80.237.204.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Nov 2008 10:20:21 +0000
Received: from seaweed.as-guides.com ([87.193.161.199] helo=[172.16.100.126])
	by lobster.as-guides.com with esmtpsa (TLS-1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.63)
	(envelope-from <mlu@as-guides.com>)
	id 1L3T8H-0000GQ-Tn
	for java-user@lucene.apache.org; Fri, 21 Nov 2008 11:21:06 +0100
Message-ID: <49268B8A.7020608@as-guides.com>
Date: Fri, 21 Nov 2008 11:20:58 +0100
From: Michael Ludwig <mlu@as-guides.com>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: BigDecimal values
References: <op.ukw8brg72ic4zu@sj-desktop> <8c4e68610811200619te1dda5du9b6598f9a45507bf@mail.gmail.com> <op.ukw89t1k2ic4zu@sj-desktop> <4925C30F.40107@as-guides.com>
In-Reply-To: <4925C30F.40107@as-guides.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Do-Not-Run: Yes
X-Spam-Score: -1.8 (-)
X-Virus-Checked: Checked by ClamAV on apache.org

Michael Ludwig schrieb:
> I assume what you mean is formatting the number so that the
> lexicographical order of any possible sequence of acceptable numbers
> is the same as its numerical order.
>
> You must find a canonical representation like the scientific notation
> and then tweak it as follows:
>
> * "N" for negative and "P" for positive numbers ("N" sorts before "P")
> * fixed-width zero-padded exponent first, like "E0000000003", base 10
> * one digit with marker, like "N2"
> * fixed-width zero-padded decimals with marker, like "D008000000000"
>
> This is 2008, "PE0000000003N2D008000000000". YMMV, of course.

This notation falls short of achieving the goal to make lexicographical
order coincide with numerical order. First, negative numbers won't sort
in ascending order; -1 will come before -2. Second, negative exponents
aren't accounted for at all. Third, there are probably other problems.

Take a look at Steven Rowe's post in this thread for better
thought through ideas.

Michael Ludwig

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 21 13:19:15 2008
Return-Path: <java-user-return-37310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54162 invoked from network); 21 Nov 2008 13:19:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Nov 2008 13:19:15 -0000
Received: (qmail 35554 invoked by uid 500); 21 Nov 2008 13:19:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35516 invoked by uid 500); 21 Nov 2008 13:19:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35505 invoked by uid 99); 21 Nov 2008 13:19:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Nov 2008 05:19:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Nov 2008 13:17:52 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 554C630EFC17; Fri, 21 Nov 2008 06:18:36 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (unknown [138.210.10.225])
	by ehatchersolutions.com (Postfix) with ESMTP id 966B630EFC16
	for <java-user@lucene.apache.org>; Fri, 21 Nov 2008 06:18:35 -0700 (MST)
Message-Id: <6940A400-186C-4CC0-9D28-6279C07F00DC@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <030701c94b95$d765e7c0$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Filter or Query
X-Priority: 3
Date: Fri, 21 Nov 2008 08:18:34 -0500
References: <030701c94b95$d765e7c0$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Nov 20, 2008, at 11:58 PM, Ganesh wrote:

> I am planning to use Filter for UserID and Date. I will not be able  
> to cache the Filter. I have to create this filter for every request.  
> To my knowledge, Filter will give faster results, only if it is  
> cached.
>
> Is it a good idea to use a filter or better to use query?

If you use filter queries (fq) in this manner, you will be caching the  
results, and this could have a negative impact on faceting performance  
if you bump facet field/query entries out of the cache.

Having uncached filter queries would be a good idea: <https://issues.apache.org/jira/browse/SOLR-407 
 >

But for now, you could simply append your "filter" to the original  
query string (unless you're using dismax and need a sophisticated  
clause).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 22 21:02:42 2008
Return-Path: <java-user-return-37311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42795 invoked from network); 22 Nov 2008 21:02:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Nov 2008 21:02:42 -0000
Received: (qmail 81084 invoked by uid 500); 22 Nov 2008 21:02:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81052 invoked by uid 500); 22 Nov 2008 21:02:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81041 invoked by uid 99); 22 Nov 2008 21:02:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Nov 2008 13:02:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Nov 2008 21:01:20 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1655258rvb.5
        for <java-user@lucene.apache.org>; Sat, 22 Nov 2008 13:01:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=FEGMYoOSDe8tNw2ycpdDQsdul3BqZibalWJbWZZqIbE=;
        b=NfNZB9TVivGtBhE0mD3HQLmpHV84VbBIV4aNflR8HB3muGAm50aQRW5ykvLA2PYEYf
         cAhoLMNaMcIVJkPfL3YQYqoygEsqbvxGMk5kytHkshouipq7f2PJUhoq5lJJQfeRO1u5
         3WYLrGOAvb1+5sE6apsSiMVFJVFtQieZk3cWM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=PyyXHmWsjlvZyUQ9w1g2c2i/QGmqFR2FaCFFjzXWXkZL4lv0BsNSDT5q0dVQts+Hov
         nAvarWERyWMPzFX+/g2BSYb1NpnCBKeveJ4/00qF6zSczv5C6YjriPpGQ0cKkDCT4r3O
         MQYYh98tzVXQyUsSGXTCReGHbtkOkXl4h+Zak=
Received: by 10.141.48.10 with SMTP id a10mr1011340rvk.71.1227387716263;
        Sat, 22 Nov 2008 13:01:56 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Sat, 22 Nov 2008 13:01:56 -0800 (PST)
Message-ID: <c68e39170811221301t35255ed8ke15ff7bbf7d8ac0c@mail.gmail.com>
Date: Sat, 22 Nov 2008 16:01:56 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: BigDecimal values
In-Reply-To: <op.ukw89t1k2ic4zu@sj-desktop>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <op.ukw8brg72ic4zu@sj-desktop>
	 <8c4e68610811200619te1dda5du9b6598f9a45507bf@mail.gmail.com>
	 <op.ukw89t1k2ic4zu@sj-desktop>
X-Google-Sender-Auth: 2c1e10f5acd2ac3c
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, Nov 20, 2008 at 9:30 AM, Sergey Kabashnyuk <ksmmlist@gmail.com> wrote:
> Thanks Ian
>
> Unfortunately, I have to index any possible number of java.math.BigDecimal
> I can rephrase my question this way:
>
> How can I convert java.math.BigDecimal numbers in to string
> for its storing in lexicographical order

Some early work I did in Solr handles this for integers (it's pretty
much unused code now though).  The format was designed to support
decimals also, but I never got around to doing the code.

See BCDIntField, and BCDUtils, specifically
BCDUtils.base10toBase10kSortableInt

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 03:58:10 2008
Return-Path: <java-user-return-37312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94616 invoked from network); 23 Nov 2008 03:58:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 03:58:09 -0000
Received: (qmail 25146 invoked by uid 500); 23 Nov 2008 03:58:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25118 invoked by uid 500); 23 Nov 2008 03:58:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25107 invoked by uid 99); 23 Nov 2008 03:58:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Nov 2008 19:58:13 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 03:56:48 +0000
Received: by yx-out-2324.google.com with SMTP id 3so621763yxj.5
        for <java-user@lucene.apache.org>; Sat, 22 Nov 2008 19:57:32 -0800 (PST)
Received: by 10.100.95.19 with SMTP id s19mr987892anb.43.1227412652907;
        Sat, 22 Nov 2008 19:57:32 -0800 (PST)
Received: from C0A80133.tipt.aol.com (h-64-236-138-3.aoltw.net [64.236.138.3])
        by mx.google.com with ESMTPS id d12sm5844569and.42.2008.11.22.19.57.30
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 22 Nov 2008 19:57:32 -0800 (PST)
Message-ID: <4928D4A8.20500@holsman.net>
Date: Sun, 23 Nov 2008 14:57:28 +1100
From: Ian Holsman <lists@holsman.net>
User-Agent: Thunderbird 2.0.0.18 (Macintosh/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [ot] a reverse lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi. apologies for the off-topic question.

I was wondering if anyone knew of a open source solution (or a pointer 
to the algorithms)
that do the reverse of lucene.
By that I mean store a whole lot of queries, and run them against a 
document to see which queries match it. (with a score etc)

I can see the case for this would be a news-article and several people 
writing queries to get alerted if it matched a certain condition.


Regards
Ian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 07:00:43 2008
Return-Path: <java-user-return-37313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48151 invoked from network); 23 Nov 2008 07:00:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 07:00:42 -0000
Received: (qmail 65421 invoked by uid 500); 23 Nov 2008 07:00:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65381 invoked by uid 500); 23 Nov 2008 07:00:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65370 invoked by uid 99); 23 Nov 2008 07:00:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Nov 2008 23:00:46 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anshumg@gmail.com designates 209.85.200.172 as permitted sender)
Received: from [209.85.200.172] (HELO wf-out-1314.google.com) (209.85.200.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 06:59:22 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1640473wfc.20
        for <java-user@lucene.apache.org>; Sat, 22 Nov 2008 22:59:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=i5lOVqpSDZKl+DUs2Ao8+wxgBv3dFoV+Fb+7zgnAh9s=;
        b=b4+bLBl77VC7Xr2AFMUgiVnv+2FIlSJIea5cJVSVJEk72HMwid/XDVHIovtajv/CJB
         KXcFbs6fDNIWFvmVZpUJRBrG5JihnNtthkzAXflDtGcnYGtTHlas3aCAuN7A+w/k92xL
         BWPMNgS4huyHnjaN1YoFP90tX4RbSSiNQ31pM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wgf5qT6lQmv7hyIlJ92RfTX47Xu5exaBWT1dNE3olSYqlMPlVpGs8hH+vBfY5x3BiK
         EDWJ/YYXRaHpg7SD9PFzwjzH9yf5s8yYcvmckpvBPdqMBr4FuRBFgphBvW7TvI6Op02t
         LmjcVAlr5NL8HVdeg8SATFhhMSdi1TrS3ZEw0=
Received: by 10.142.48.14 with SMTP id v14mr1065743wfv.284.1227423598533;
        Sat, 22 Nov 2008 22:59:58 -0800 (PST)
Received: by 10.143.31.19 with HTTP; Sat, 22 Nov 2008 22:59:58 -0800 (PST)
Message-ID: <867513fe0811222259h1e4f2318o15dd9bd71d158c5a@mail.gmail.com>
Date: Sun, 23 Nov 2008 12:29:58 +0530
From: Anshum <anshumg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [ot] a reverse lucene
In-Reply-To: <4928D4A8.20500@holsman.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62840_6591892.1227423598522"
References: <4928D4A8.20500@holsman.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_62840_6591892.1227423598522
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Ian,
I guess that could be achieved if you write code to read the queries and
query for each document (using lucene).
Assuming that I got the question right! :)

--
Anshum Gupta
Naukri Labs!
http://ai-cafe.blogspot.com

The facts expressed here belong to everybody, the opinions to me. The
distinction is yours to draw............


On Sun, Nov 23, 2008 at 9:27 AM, Ian Holsman <lists@holsman.net> wrote:

> Hi. apologies for the off-topic question.
>
> I was wondering if anyone knew of a open source solution (or a pointer to
> the algorithms)
> that do the reverse of lucene.
> By that I mean store a whole lot of queries, and run them against a
> document to see which queries match it. (with a score etc)
>
> I can see the case for this would be a news-article and several people
> writing queries to get alerted if it matched a certain condition.
>
>
> Regards
> Ian
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_62840_6591892.1227423598522--

From java-user-return-37314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 07:35:59 2008
Return-Path: <java-user-return-37314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55522 invoked from network); 23 Nov 2008 07:35:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 07:35:59 -0000
Received: (qmail 71260 invoked by uid 500); 23 Nov 2008 07:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71223 invoked by uid 500); 23 Nov 2008 07:36:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71212 invoked by uid 99); 23 Nov 2008 07:36:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Nov 2008 23:36:02 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.162.178] (HELO el-out-1112.google.com) (209.85.162.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 07:34:37 +0000
Received: by el-out-1112.google.com with SMTP id z25so449439ele.6
        for <java-user@lucene.apache.org>; Sat, 22 Nov 2008 23:35:12 -0800 (PST)
Received: by 10.90.120.17 with SMTP id s17mr1393929agc.101.1227425712374;
        Sat, 22 Nov 2008 23:35:12 -0800 (PST)
Received: from C0A80133.tipt.aol.com (h-64-236-138-3.aoltw.net [64.236.138.3])
        by mx.google.com with ESMTPS id 23sm4776725hsd.0.2008.11.22.23.35.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 22 Nov 2008 23:35:11 -0800 (PST)
Message-ID: <492907AB.9080600@holsman.net>
Date: Sun, 23 Nov 2008 18:35:07 +1100
From: Ian Holsman <lists@holsman.net>
User-Agent: Thunderbird 2.0.0.18 (Macintosh/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [ot] a reverse lucene
References: <4928D4A8.20500@holsman.net> <867513fe0811222259h1e4f2318o15dd9bd71d158c5a@mail.gmail.com>
In-Reply-To: <867513fe0811222259h1e4f2318o15dd9bd71d158c5a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Anshum wrote:
> Hi Ian,
> I guess that could be achieved if you write code to read the queries and
> query for each document (using lucene).
> Assuming that I got the question right! :)
>
>   

yes.. that is one way, but probably not the most efficient one.

think of something like http://www.google.com/alerts, but instead of 
running once a day, it would run each time it sees a document. 
(as-it-happens mode)
and you would have a couple of million queries to run through.

regards
Ian
> --
> Anshum Gupta
> Naukri Labs!
> http://ai-cafe.blogspot.com
>
> The facts expressed here belong to everybody, the opinions to me. The
> distinction is yours to draw............
>
>
> On Sun, Nov 23, 2008 at 9:27 AM, Ian Holsman <lists@holsman.net> wrote:
>
>   
>> Hi. apologies for the off-topic question.
>>
>> I was wondering if anyone knew of a open source solution (or a pointer to
>> the algorithms)
>> that do the reverse of lucene.
>> By that I mean store a whole lot of queries, and run them against a
>> document to see which queries match it. (with a score etc)
>>
>> I can see the case for this would be a news-article and several people
>> writing queries to get alerted if it matched a certain condition.
>>
>>
>> Regards
>> Ian
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 08:30:37 2008
Return-Path: <java-user-return-37315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71913 invoked from network); 23 Nov 2008 08:30:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 08:30:37 -0000
Received: (qmail 90642 invoked by uid 500); 23 Nov 2008 08:30:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90617 invoked by uid 500); 23 Nov 2008 08:30:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90606 invoked by uid 99); 23 Nov 2008 08:30:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 00:30:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [67.195.8.203] (HELO web110303.mail.gq1.yahoo.com) (67.195.8.203)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 23 Nov 2008 08:29:15 +0000
Received: (qmail 12530 invoked by uid 60001); 23 Nov 2008 08:28:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Message-ID;
  b=DkSG891DO6JeqXjUivbkOAhBhMq2to/LzOeLa3TjX0DrjkE1n5HWvHCxGdEjlklGcMRrPmrXCGyWUKs07bCHsE2yU6cdVh80cCf8HZkB/EVjYWu4dmbitsJ4I9Am/lZaoxNWNGMMBs2EpenWXNOgBJioupICpcjkoCBC7E0xO7A=;
X-YMail-OSG: C.iughkVM1nuGic2QScfW6yzb9W8biHPq11yL9.TkENmMMJKjtN1r2Yfkqi7PXmsAJavoifoz9f2bJftUAxFjFGj29Y.R7PsUFtFFxYn8Cd.rTHgjtaE0KdlM3xOMU78ckqtiJ33ZOT7MowrkbqDScqU87k-
Received: from [122.167.108.51] by web110303.mail.gq1.yahoo.com via HTTP; Sun, 23 Nov 2008 00:28:59 PST
X-Mailer: YahooMailWebService/0.7.260.1
Date: Sun, 23 Nov 2008 00:28:59 -0800 (PST)
From: Cool The Breezer <techcool.kumar@yahoo.com>
Reply-To: techcool.kumar@yahoo.com
Subject: Re: [ot] a reverse lucene
To: java-user@lucene.apache.org
In-Reply-To: <492907AB.9080600@holsman.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <364073.11459.qm@web110303.mail.gq1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

May be RSS feed a solution. Just provide RSS feed as a search result for each query and people subscribing these RSS feed would get notifications in regular intervals. They need to install RSS clients, which can run queries in regular intervals. 


--- On Sun, 11/23/08, Ian Holsman <lists@holsman.net> wrote:

> From: Ian Holsman <lists@holsman.net>
> Subject: Re: [ot] a reverse lucene
> To: java-user@lucene.apache.org
> Date: Sunday, November 23, 2008, 2:35 AM
> Anshum wrote:
> > Hi Ian,
> > I guess that could be achieved if you write code to
> read the queries and
> > query for each document (using lucene).
> > Assuming that I got the question right! :)
> >
> >   
> 
> yes.. that is one way, but probably not the most efficient
> one.
> 
> think of something like http://www.google.com/alerts, but
> instead of 
> running once a day, it would run each time it sees a
> document. 
> (as-it-happens mode)
> and you would have a couple of million queries to run
> through.
> 
> regards
> Ian
> > --
> > Anshum Gupta
> > Naukri Labs!
> > http://ai-cafe.blogspot.com
> >
> > The facts expressed here belong to everybody, the
> opinions to me. The
> > distinction is yours to draw............
> >
> >
> > On Sun, Nov 23, 2008 at 9:27 AM, Ian Holsman
> <lists@holsman.net> wrote:
> >
> >   
> >> Hi. apologies for the off-topic question.
> >>
> >> I was wondering if anyone knew of a open source
> solution (or a pointer to
> >> the algorithms)
> >> that do the reverse of lucene.
> >> By that I mean store a whole lot of queries, and
> run them against a
> >> document to see which queries match it. (with a
> score etc)
> >>
> >> I can see the case for this would be a
> news-article and several people
> >> writing queries to get alerted if it matched a
> certain condition.
> >>
> >>
> >> Regards
> >> Ian
> >>
> >>
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>
> >>
> >>     
> >
> >   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 09:01:14 2008
Return-Path: <java-user-return-37316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78925 invoked from network); 23 Nov 2008 09:01:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 09:01:14 -0000
Received: (qmail 94741 invoked by uid 500); 23 Nov 2008 09:01:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94710 invoked by uid 500); 23 Nov 2008 09:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94699 invoked by uid 99); 23 Nov 2008 09:01:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 01:01:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 08:59:52 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2BC3630EFC17; Sun, 23 Nov 2008 02:00:37 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (unknown [138.210.10.225])
	by ehatchersolutions.com (Postfix) with ESMTP id 860F830EFC16
	for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 02:00:35 -0700 (MST)
Message-Id: <0CB2CEEC-DBC5-4DA1-8C7D-DB3DB4452B58@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <4928D4A8.20500@holsman.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: [ot] a reverse lucene
Date: Sun, 23 Nov 2008 04:00:33 -0500
References: <4928D4A8.20500@holsman.net>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Nov 22, 2008, at 10:57 PM, Ian Holsman wrote:
> Hi. apologies for the off-topic question.

Not off-topic at all!

> I was wondering if anyone knew of a open source solution (or a  
> pointer to the algorithms)
> that do the reverse of lucene.
> By that I mean store a whole lot of queries, and run them against a  
> document to see which queries match it. (with a score etc)
>
> I can see the case for this would be a news-article and several  
> people writing queries to get alerted if it matched a certain  
> condition.

This use-case was the reason MemoryIndex was created.  It's a fast  
single document index where incoming documents could be sent in  
parallel to the main index - and slamming a bunch of queries at it.   
There's also InstantiatedIndex to compare to, as it can handle  
multiple documents.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 09:21:07 2008
Return-Path: <java-user-return-37317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91140 invoked from network); 23 Nov 2008 09:21:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 09:21:07 -0000
Received: (qmail 26413 invoked by uid 500); 23 Nov 2008 09:21:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26387 invoked by uid 500); 23 Nov 2008 09:21:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26376 invoked by uid 99); 23 Nov 2008 09:21:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 01:21:09 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 09:19:44 +0000
Received: by yx-out-2324.google.com with SMTP id 3so637104yxj.5
        for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 01:20:28 -0800 (PST)
Received: by 10.90.120.19 with SMTP id s19mr1458719agc.9.1227432028797;
        Sun, 23 Nov 2008 01:20:28 -0800 (PST)
Received: from C0A80134.tipt.aol.com (h-64-236-138-3.aoltw.net [64.236.138.3])
        by mx.google.com with ESMTPS id 7sm4826553hsx.3.2008.11.23.01.20.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 23 Nov 2008 01:20:28 -0800 (PST)
Message-ID: <49292057.9000204@holsman.net>
Date: Sun, 23 Nov 2008 20:20:23 +1100
From: Ian Holsman <lists@holsman.net>
User-Agent: Thunderbird 2.0.0.18 (Macintosh/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [ot] a reverse lucene
References: <4928D4A8.20500@holsman.net> <0CB2CEEC-DBC5-4DA1-8C7D-DB3DB4452B58@ehatchersolutions.com>
In-Reply-To: <0CB2CEEC-DBC5-4DA1-8C7D-DB3DB4452B58@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Erik.
I'll start looking at that.

regards
Ian
Erik Hatcher wrote:
>
> On Nov 22, 2008, at 10:57 PM, Ian Holsman wrote:
>> Hi. apologies for the off-topic question.
>
> Not off-topic at all!
>
>> I was wondering if anyone knew of a open source solution (or a 
>> pointer to the algorithms)
>> that do the reverse of lucene.
>> By that I mean store a whole lot of queries, and run them against a 
>> document to see which queries match it. (with a score etc)
>>
>> I can see the case for this would be a news-article and several 
>> people writing queries to get alerted if it matched a certain condition.
>
> This use-case was the reason MemoryIndex was created.  It's a fast 
> single document index where incoming documents could be sent in 
> parallel to the main index - and slamming a bunch of queries at it.  
> There's also InstantiatedIndex to compare to, as it can handle 
> multiple documents.
>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 10:58:29 2008
Return-Path: <java-user-return-37318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43341 invoked from network); 23 Nov 2008 10:58:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 10:58:29 -0000
Received: (qmail 70711 invoked by uid 500); 23 Nov 2008 10:58:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70680 invoked by uid 500); 23 Nov 2008 10:58:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70669 invoked by uid 99); 23 Nov 2008 10:58:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 02:58:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 10:57:08 +0000
Received: by wf-out-1314.google.com with SMTP id 28so1687457wfc.20
        for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 02:57:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=o5Wpbel4ZWGhVIo+Ff1r0UWB6OJQ/JOhRmN+Abyw68Q=;
        b=Aopm1ypuTv20l39g1DPyFfN+2Ul3vDYxPuaAYjYwGAHHm8j0VPmMbaq4mYkFOnBC2H
         sEgZroZz1IzWAZDz+L525cmKTdxABV/mQ/X0lTLsLwKY0AxGdpNYO4V6fU3LhPGyJy5D
         fFAWXB82UUj3nmZ+TLRHXezv56BBLXzmpe32M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=WwkSRVwTSaLFh4vGrWrm0pujP0CUHURkwR6b/gbLiDxqg1hZcRTRloftQCOd+R83jC
         6qfW8e6tzZAU46tebuoZZ3+pBSljW4Hxtz67BjUMLfzQtwPYh8W3phd55P1U2iixS10S
         Pf3PPX2spq1/9TvGSuq/ymogwtDG/TDprEoSo=
Received: by 10.142.207.8 with SMTP id e8mr1126066wfg.288.1227437864328;
        Sun, 23 Nov 2008 02:57:44 -0800 (PST)
Received: by 10.142.156.3 with HTTP; Sun, 23 Nov 2008 02:57:44 -0800 (PST)
Message-ID: <f071061b0811230257l522458afvf0d1f76efea9ac9f@mail.gmail.com>
Date: Sun, 23 Nov 2008 11:57:44 +0100
From: jm <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: [ot] a reverse lucene
In-Reply-To: <0CB2CEEC-DBC5-4DA1-8C7D-DB3DB4452B58@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <4928D4A8.20500@holsman.net>
	 <0CB2CEEC-DBC5-4DA1-8C7D-DB3DB4452B58@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I am using MemoryIndex in a similar scenario. I have not as many
queries though, less than 100, but several 'articles' coming per
second.

Works nicely.

On Sun, Nov 23, 2008 at 10:00 AM, Erik Hatcher
<erik@ehatchersolutions.com> wrote:
>
> On Nov 22, 2008, at 10:57 PM, Ian Holsman wrote:
>>
>> Hi. apologies for the off-topic question.
>
> Not off-topic at all!
>
>> I was wondering if anyone knew of a open source solution (or a pointer to
>> the algorithms)
>> that do the reverse of lucene.
>> By that I mean store a whole lot of queries, and run them against a
>> document to see which queries match it. (with a score etc)
>>
>> I can see the case for this would be a news-article and several people
>> writing queries to get alerted if it matched a certain condition.
>
> This use-case was the reason MemoryIndex was created.  It's a fast single
> document index where incoming documents could be sent in parallel to the
> main index - and slamming a bunch of queries at it.  There's also
> InstantiatedIndex to compare to, as it can handle multiple documents.
>
>        Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 13:03:42 2008
Return-Path: <java-user-return-37319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73269 invoked from network); 23 Nov 2008 13:03:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 13:03:42 -0000
Received: (qmail 15212 invoked by uid 500); 23 Nov 2008 13:03:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15173 invoked by uid 500); 23 Nov 2008 13:03:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15162 invoked by uid 99); 23 Nov 2008 13:03:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 05:03:44 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 13:02:18 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 034C5733CC
	for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 05:02:24 -0800 (PST)
Message-Id: <32637075-6058-4399-AE35-A802220F8B6C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <492907AB.9080600@holsman.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: [ot] a reverse lucene
Date: Sun, 23 Nov 2008 08:02:23 -0500
References: <4928D4A8.20500@holsman.net> <867513fe0811222259h1e4f2318o15dd9bd71d158c5a@mail.gmail.com> <492907AB.9080600@holsman.net>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

The "formal" name for this stuff is "document filtering" or just  
"filtering".  You can start on it, by looking at TREC, which had a  
filtering task for a number of years: http://trec.nist.gov/tracks.html

At any rate, one approach is to store your queries as Lucene  
documents, albeit short ones.  Then, as others have said, you index  
new, incoming docs into a Memory Index.  From that, you can extract  
the key terms which can then be used to come up with a Query to be run  
against your "query" index.  The MoreLikeThis functionality should  
help in determining the important terms.  Then, you need to decide how  
to handle dealing with the results.  You probably don't want to route  
the document to each and every query that matches.

-Grant

On Nov 23, 2008, at 2:35 AM, Ian Holsman wrote:

> Anshum wrote:
>> Hi Ian,
>> I guess that could be achieved if you write code to read the  
>> queries and
>> query for each document (using lucene).
>> Assuming that I got the question right! :)
>>
>>
>
> yes.. that is one way, but probably not the most efficient one.
>
> think of something like http://www.google.com/alerts, but instead of  
> running once a day, it would run each time it sees a document. (as- 
> it-happens mode)
> and you would have a couple of million queries to run through.
>
> regards
> Ian
>> --
>> Anshum Gupta
>> Naukri Labs!
>> http://ai-cafe.blogspot.com
>>
>> The facts expressed here belong to everybody, the opinions to me. The
>> distinction is yours to draw............
>>
>>
>> On Sun, Nov 23, 2008 at 9:27 AM, Ian Holsman <lists@holsman.net>  
>> wrote:
>>
>>
>>> Hi. apologies for the off-topic question.
>>>
>>> I was wondering if anyone knew of a open source solution (or a  
>>> pointer to
>>> the algorithms)
>>> that do the reverse of lucene.
>>> By that I mean store a whole lot of queries, and run them against a
>>> document to see which queries match it. (with a score etc)
>>>
>>> I can see the case for this would be a news-article and several  
>>> people
>>> writing queries to get alerted if it matched a certain condition.
>>>
>>>
>>> Regards
>>> Ian
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 13:06:08 2008
Return-Path: <java-user-return-37320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74524 invoked from network); 23 Nov 2008 13:06:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 13:06:06 -0000
Received: (qmail 18002 invoked by uid 500); 23 Nov 2008 13:06:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17978 invoked by uid 500); 23 Nov 2008 13:06:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 11799 invoked by uid 99); 23 Nov 2008 12:54:33 -0000
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Date: Sun, 23 Nov 2008 12:50:33 +0000
From: David Sheldon <dave-lucene@earth.li>
To: java-user@lucene.apache.org
Subject: Re: [ot] a reverse lucene
Message-ID: <20081123125033.GP30512@ox.compsoc.net>
References: <4928D4A8.20500@holsman.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <4928D4A8.20500@holsman.net>
User-Agent: Mutt/1.5.13 (2006-08-11)
X-Virus-Checked: Checked by ClamAV on apache.org

On Sun, Nov 23, 2008 at 02:57:28PM +1100, Ian Holsman wrote:
> I can see the case for this would be a news-article and several people 
> writing queries to get alerted if it matched a certain condition.

I haven't tried this, but if you have lots of queries and few documents
then consider using lucene, but reconsidering how you design your
documents.

Turn the "queries" into documents in the index, and turn the "document"
into a query.

Something like google alerts you can have a document which is
   match: keyword

Then the "document" can become a boolean query for each word in it:
   match:foo OR match:bar

Obviously good choices of analysers and simplification of the queries
that you allow will make this better.

If you have fewer than 10k stored queries then the ways of running all
the queries against a document in memory will probably be faster
(depending on your incoming document rate, though you can batch them up
and do the queries every 15 mintues or something if you don't mind the
lag and you're getting lots of incomming documents).

Just an idea.

David
-- 
About the use of language: it is impossible to sharpen a pencil with a blunt
ax.  It is equally vain to try to do it with ten blunt axes instead.
		-- Edsger Dijkstra

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 16:54:42 2008
Return-Path: <java-user-return-37321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34132 invoked from network); 23 Nov 2008 16:54:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 16:54:42 -0000
Received: (qmail 27131 invoked by uid 500); 23 Nov 2008 16:54:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27100 invoked by uid 500); 23 Nov 2008 16:54:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27089 invoked by uid 99); 23 Nov 2008 16:54:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 08:54:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 16:53:19 +0000
Received: from koji-sekiguchi-no-macbook.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail.asahi-net.or.jp (Postfix) with ESMTP id BCDAD648B0
	for <java-user@lucene.apache.org>; Mon, 24 Nov 2008 01:52:19 +0900 (JST)
Message-ID: <49298A43.1090100@r.email.ne.jp>
Date: Mon, 24 Nov 2008 01:52:19 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Thunderbird 2.0.0.18 (Macintosh/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AW: Transforming german umlaute like =?ISO-8859-1?Q?=F6=2C=E4?=
 =?ISO-8859-1?Q?=2C=FC=2C=DF_into_oe=2C_ae=2C_ue=2C_ss?=
References: <EFA4BA06-F0F4-49FE-8114-F213CAFC2F95@evenity.net> <D7206503EB5BE94497458AF4FE4AE8ABD1F004@owamz.healy-hudson.com> <4922BEE7.6030703@r.email.ne.jp> <2DE77A3C-1146-45E8-ADFB-EFCA1109E92F@evenity.net> <4922D2D3.8010703@r.email.ne.jp>
In-Reply-To: <4922D2D3.8010703@r.email.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

 > > Where do I get the CharFilter library? I'm using Lucene, not Solr.
 > >
 > > Thanks,
 > > Sascha
 > CharFilter is included in recent Solr nightly build.
 > It is not OOTB solution for Lucene now, sorry.
 > If I have time, I will make it for Lucene in this weekend.

Now the patch available for Lucene at:
https://issues.apache.org/jira/browse/LUCENE-1466

Koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 18:06:40 2008
Return-Path: <java-user-return-37322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68376 invoked from network); 23 Nov 2008 18:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 18:06:40 -0000
Received: (qmail 65078 invoked by uid 500); 23 Nov 2008 18:06:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65043 invoked by uid 500); 23 Nov 2008 18:06:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65032 invoked by uid 99); 23 Nov 2008 18:06:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 10:06:43 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 18:05:16 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id mANI6AA05472
	for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 12:06:10 -0600
Message-ID: <49299B73.5090309@getopt.org>
Date: Sun, 23 Nov 2008 19:05:39 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [ot] a reverse lucene
References: <4928D4A8.20500@holsman.net>
In-Reply-To: <4928D4A8.20500@holsman.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ian Holsman wrote:
> Hi. apologies for the off-topic question.
> 
> I was wondering if anyone knew of a open source solution (or a pointer 
> to the algorithms)
> that do the reverse of lucene.
> By that I mean store a whole lot of queries, and run them against a 
> document to see which queries match it. (with a score etc)
> 
> I can see the case for this would be a news-article and several people 
> writing queries to get alerted if it matched a certain condition.


http://www.seas.upenn.edu/~svilen/publications/subscribe.pdf



-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 18:24:17 2008
Return-Path: <java-user-return-37323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78026 invoked from network); 23 Nov 2008 18:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 18:24:17 -0000
Received: (qmail 72537 invoked by uid 500); 23 Nov 2008 18:24:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72272 invoked by uid 500); 23 Nov 2008 18:24:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72253 invoked by uid 99); 23 Nov 2008 18:24:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 10:24:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 18:22:52 +0000
Received: from [192.168.0.220] ([81.219.54.251])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id mANIMku02990;
	Sun, 23 Nov 2008 12:22:47 -0600
Message-ID: <49299F58.40907@getopt.org>
Date: Sun, 23 Nov 2008 19:22:16 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 2.0.0.18 (Windows/20081105)
MIME-Version: 1.0
To: undisclosed-recipients:;
Subject: [ANN] Luke 0.9.1 - bugfix release
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

A bugfix release of Luke is now available at the usual place:

	http://www.getopt.org/luke

* New features and improvements:

   o Added ability to set the maximum count of boolean clauses in 
BooleanQuery.

* Bug fixes:

   o Unbalanced <commit> tags breaking the XML export. Reported by 
Teruhiko Kurosaka.

   o Opening a non-existent index from command-line creates an empty 
directory. This is worked-around in Luke although it's a Lucene bug. 
Reported by Chris Pimlott. See also LUCENE-1464.

   o IndexGate inadvertently deleting previous commit points, even if 
"Keep all commits" option was specified. Reported by Mark Harwood.

   o Empty index with no fields was reported as invalid. Discovered by 
Andrew Zhang and Michael McCandless (LUCENE-1454).


Thank you!

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 20:05:20 2008
Return-Path: <java-user-return-37324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96449 invoked from network); 23 Nov 2008 20:05:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 20:05:20 -0000
Received: (qmail 13840 invoked by uid 500); 23 Nov 2008 20:05:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13806 invoked by uid 500); 23 Nov 2008 20:05:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13795 invoked by uid 99); 23 Nov 2008 20:05:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 12:05:22 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 20:03:55 +0000
Received: by qyk13 with SMTP id 13so1613519qyk.5
        for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 12:04:39 -0800 (PST)
Received: by 10.214.184.8 with SMTP id h8mr1567292qaf.313.1227470679544;
        Sun, 23 Nov 2008 12:04:39 -0800 (PST)
Received: from C0A80134.tipt.aol.com (h-64-236-138-3.aoltw.net [64.236.138.3])
        by mx.google.com with ESMTPS id 5sm3866753ywl.4.2008.11.23.12.04.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 23 Nov 2008 12:04:38 -0800 (PST)
Message-ID: <4929B752.8090207@holsman.net>
Date: Mon, 24 Nov 2008 07:04:34 +1100
From: Ian Holsman <lists@holsman.net>
User-Agent: Thunderbird 2.0.0.18 (Macintosh/20081105)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [ot] a reverse lucene
References: <4928D4A8.20500@holsman.net> <49299B73.5090309@getopt.org>
In-Reply-To: <49299B73.5090309@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for all the suggestions guys..
This is great!


Andrzej Bialecki wrote:
> Ian Holsman wrote:
>> Hi. apologies for the off-topic question.
>>
>> I was wondering if anyone knew of a open source solution (or a 
>> pointer to the algorithms)
>> that do the reverse of lucene.
>> By that I mean store a whole lot of queries, and run them against a 
>> document to see which queries match it. (with a score etc)
>>
>> I can see the case for this would be a news-article and several 
>> people writing queries to get alerted if it matched a certain condition.
>
>
> http://www.seas.upenn.edu/~svilen/publications/subscribe.pdf
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 21:40:57 2008
Return-Path: <java-user-return-37325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27278 invoked from network); 23 Nov 2008 21:40:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 21:40:56 -0000
Received: (qmail 82109 invoked by uid 500); 23 Nov 2008 21:40:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82073 invoked by uid 500); 23 Nov 2008 21:40:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82062 invoked by uid 99); 23 Nov 2008 21:40:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 13:40:59 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 21:39:33 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L4Mgk-0005Uo-GG
	for java-user@lucene.apache.org; Sun, 23 Nov 2008 13:40:18 -0800
Message-ID: <20650540.post@talk.nabble.com>
Date: Sun, 23 Nov 2008 13:40:18 -0800 (PST)
From: farnetani <farnetani@gmail.com>
To: java-user@lucene.apache.org
Subject: Doing the lucene remove character \n (break line)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farnetani@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I need to do lucene find the sentence:
ARLEI FERREIRA FARNETANI JUNIOR   
[arlei] [ferreira] [farnetani] [junior]    (1)

and too:

ARLEI FERREIRA FAR-   <break line>
NETANI JUNIOR

I'm using the Brazilian Analyzer, but the result is:
[ARLEI] [FERREIRA] [FAR] [NETANI] [JUNIOR]

I have to do that the lucene result:
[ARLEI] [FERREIRA] [FARNETANI] [JUNIOR] equals the sentence (1)

So I have to do that lucene remove "-" hyphen and the break line (\n).

To remove character hyphen (-) I got, but remove the break line no!

How do I do???
-- 
View this message in context: http://www.nabble.com/Doing-the-lucene-remove-character-%5Cn-%28break-line%29-tp20650540p20650540.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 23 22:26:54 2008
Return-Path: <java-user-return-37326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52668 invoked from network); 23 Nov 2008 22:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Nov 2008 22:26:53 -0000
Received: (qmail 15551 invoked by uid 500); 23 Nov 2008 22:26:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15508 invoked by uid 500); 23 Nov 2008 22:26:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15497 invoked by uid 99); 23 Nov 2008 22:26:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 14:26:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [217.146.183.157] (HELO n9a.bullet.ukl.yahoo.com) (217.146.183.157)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 23 Nov 2008 22:25:28 +0000
Received: from [217.12.4.214] by n9.bullet.ukl.yahoo.com with NNFMP; 23 Nov 2008 22:26:11 -0000
Received: from [87.248.110.115] by t1.bullet.ukl.yahoo.com with NNFMP; 23 Nov 2008 22:26:11 -0000
Received: from [127.0.0.1] by omp220.mail.ukl.yahoo.com with NNFMP; 23 Nov 2008 22:26:13 -0000
X-Yahoo-Newman-Id: 738751.95201.bm@omp220.mail.ukl.yahoo.com
Received: (qmail 38067 invoked from network); 23 Nov 2008 22:26:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:Date:From:User-Agent:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=QbiadRD1LDfV0duTlLVXxh9KwnEhAr/B0LUlCiuyzVAiJaRMrqqPgJcR6Caqp7pCFo1bOc9JVtBYwePSRkAor8JCCFhfDvHv7weN0lRtiVlJsMmWP3ULQbE0rlX+PocFhrTIUuAPbuxiwybpbjm78r2vRayyX+UtPDF9SrHRh38=  ;
Received: from unknown (HELO ?192.168.2.50?) (markharw00d@194.106.34.5 with plain)
  by smtp132.mail.ukl.yahoo.com with SMTP; 23 Nov 2008 22:26:11 -0000
X-YMail-OSG: 3VfPxDAVM1n76zi.N8Mg39sHDiwjisZfQjmY_bZEmfBaqZUQ3_fLOlw7bWfBeoJIOz2GLh2so9S9xnIfjeUBD.0BOE..yDI7sYtSnU77qJunTdlecT_OCju3fKwELxdH8KROww8XMv4RIq4V.kG.DP_vU3Z4fsUxSk3_91VEUr1hQDlyTdeiD5tlcVlo
X-Yahoo-Newman-Property: ymail-3
Message-ID: <4929D882.9070009@yahoo.co.uk>
Date: Sun, 23 Nov 2008 22:26:10 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Thunderbird 2.0.0.17 (Windows/20080914)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [ot] a reverse lucene
References: <4928D4A8.20500@holsman.net> <49299B73.5090309@getopt.org> <4929B752.8090207@holsman.net>
In-Reply-To: <4929B752.8090207@holsman.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

If you index the queries consider also that they can potentially be 
indexed in an optimised form.

For example, take a phrase query for "Alonso Smith". You need only index 
one of these terms - an incoming document must contain both terms to be 
considered a match. If you chose to index this query on the rare term 
"Alonso" you would get far fewer requests to run this query than if you 
chose to index the comparitively more common "Smith". Basically any 
query with mandatory terms can be "index optimised" to record only the 
rarest mandatory term (rarity typically being measured by using a 
look-up on some background index).

Cheers,
Mark

Ian Holsman wrote:
> Thanks for all the suggestions guys..
> This is great!
>
>
> Andrzej Bialecki wrote:
>> Ian Holsman wrote:
>>> Hi. apologies for the off-topic question.
>>>
>>> I was wondering if anyone knew of a open source solution (or a 
>>> pointer to the algorithms)
>>> that do the reverse of lucene.
>>> By that I mean store a whole lot of queries, and run them against a 
>>> document to see which queries match it. (with a score etc)
>>>
>>> I can see the case for this would be a news-article and several 
>>> people writing queries to get alerted if it matched a certain 
>>> condition.
>>
>>
>> http://www.seas.upenn.edu/~svilen/publications/subscribe.pdf
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> ------------------------------------------------------------------------
>
>
> No virus found in this incoming message.
> Checked by AVG - http://www.avg.com 
> Version: 8.0.175 / Virus Database: 270.9.9/1806 - Release Date: 11/22/2008 6:59 PM
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 01:50:21 2008
Return-Path: <java-user-return-37327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12245 invoked from network); 24 Nov 2008 01:50:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 01:50:21 -0000
Received: (qmail 19250 invoked by uid 500); 24 Nov 2008 01:50:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19216 invoked by uid 500); 24 Nov 2008 01:50:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19205 invoked by uid 99); 24 Nov 2008 01:50:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 17:50:24 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.159 as permitted sender)
Received: from [72.14.220.159] (HELO fg-out-1718.google.com) (72.14.220.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 01:48:58 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1531621fgb.27
        for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 17:49:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=vpiTbvG8NSs4hQqGWykIF1QDTZZr9c8aUC7PL7KHwN8=;
        b=tB5OuY3JwLkLuFBenj/5XJj8uuJOQnv0x0MK1Vh7l11q4XrGZuySbY5qqXhAAtO6Ms
         VXFhjilHBbirlcyzPFjaL89niqjB8vmvE+Yt+bc0ffFQWs+gnyGSLtM+YQc8YciaCpJw
         2Vtn6tF1AhtiwPoZ+wz0ExYfDmPzrW8ug5H/Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vK7evAsF7RE0fRepv8bWShdFukvhteZu5ew03Q3Vrla30CpXUWdRcb53Pa91xoS6nc
         cUZsziAdB/OY9i1APD9si4u3WC6lJxUGirCcO+6jJej3XezKmm2GzVurwPZ+gtEgw1fT
         4HiRKOYEtfLocaKgjkdHRG2FaZfzRLlKKUvSc=
Received: by 10.86.52.1 with SMTP id z1mr1885038fgz.60.1227491373829;
        Sun, 23 Nov 2008 17:49:33 -0800 (PST)
Received: by 10.86.98.8 with HTTP; Sun, 23 Nov 2008 17:49:33 -0800 (PST)
Message-ID: <359a92830811231749u20d571f4m2b17e559c1aa5c08@mail.gmail.com>
Date: Sun, 23 Nov 2008 20:49:33 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Doing the lucene remove character \n (break line)
In-Reply-To: <20650540.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_103180_27638167.1227491373820"
References: <20650540.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_103180_27638167.1227491373820
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What I'd do is make my own filter, probably one based upon one of
the pre-existing ones and modify the call to nextToken, examine that
token, and if it ends in a hyphen get the next token and return the
concatenation of the two. I don't believe that there's a pre-existing
filter that does this, but you might want to check because I haven't
looked at them an a while.

Best
Erick

On Sun, Nov 23, 2008 at 4:40 PM, farnetani <farnetani@gmail.com> wrote:

>
> I need to do lucene find the sentence:
> ARLEI FERREIRA FARNETANI JUNIOR
> [arlei] [ferreira] [farnetani] [junior]    (1)
>
> and too:
>
> ARLEI FERREIRA FAR-   <break line>
> NETANI JUNIOR
>
> I'm using the Brazilian Analyzer, but the result is:
> [ARLEI] [FERREIRA] [FAR] [NETANI] [JUNIOR]
>
> I have to do that the lucene result:
> [ARLEI] [FERREIRA] [FARNETANI] [JUNIOR] equals the sentence (1)
>
> So I have to do that lucene remove "-" hyphen and the break line (\n).
>
> To remove character hyphen (-) I got, but remove the break line no!
>
> How do I do???
> --
> View this message in context:
> http://www.nabble.com/Doing-the-lucene-remove-character-%5Cn-%28break-line%29-tp20650540p20650540.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_103180_27638167.1227491373820--

From java-user-return-37328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 02:33:30 2008
Return-Path: <java-user-return-37328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28768 invoked from network); 24 Nov 2008 02:33:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 02:33:30 -0000
Received: (qmail 46947 invoked by uid 500); 24 Nov 2008 02:33:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46922 invoked by uid 500); 24 Nov 2008 02:33:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46911 invoked by uid 99); 24 Nov 2008 02:33:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 18:33:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of skinnybeans@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 02:32:09 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2149540fkq.5
        for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 18:32:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=cbqOVeS4ts9VdTPB2pSjZ1G0oOZ9Q2qK/Q4K+raEJtU=;
        b=P9zARO0N+CLw4xRN0jR99NVgQtn0s+RzS1Om9SgfYISJ2qwg4JBesZYMwYmfvJmnjh
         x9CdGMBxIfDpk38iFth2EzTi1AhFwROWXLDb8TeHC3jV60eUa8rOBRhSt1XxYYQ6fVWO
         i6d4xWPMaBa/OKhEufylprhUf6Bo7PdfSD8dI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Dt5P3Awy4Bp8g6Rt+PiRe7RMpzfV4sYNz33FqtmnIjI6svJ/4bsZZ/CBHMRdAOMEYs
         DDU7SWlamptRCu2Q46L99uVYV/FoqGWCFZ2555YrS8kLDkEbt3R8NS/tT6Ka1pUvGL+T
         5s4Y/Phur3adCDryB+Nry7CfhE/PxufbNVEYU=
Received: by 10.181.135.12 with SMTP id m12mr962523bkn.88.1227493964194;
        Sun, 23 Nov 2008 18:32:44 -0800 (PST)
Received: by 10.181.11.18 with HTTP; Sun, 23 Nov 2008 18:32:44 -0800 (PST)
Message-ID: <5e481fec0811231832s2f30384at52f31e6ed32f2610@mail.gmail.com>
Date: Mon, 24 Nov 2008 13:32:44 +1100
From: "Henrik Axelsson" <skinnybeans@gmail.com>
To: java-user@lucene.apache.org
Subject: Using multiple index searchers.
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_155419_8555191.1227493964190"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_155419_8555191.1227493964190
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

After reading the FAQ I have a question regarding the use of multiple
indexes and thus IndexSearches on the one server.

I work on ecommerce websites and am looking at replacing our current method
of full text searching product descriptions and names with a Lucene
implementation. I envisaged creating a separate index file for each of the
sites running on our main webserver (about 10 sites, each with different
product listings). However this would mean that I would need to have many
instances of IndexSearcher open and potentially come across file handle
limit problems (as outlined in the FAQ) as well as consuming lots of memory.
Is this a valid concern? Would I be able to use Lucene this way?

An alternative would be to combine all the sites data into one index, and
have a field identifiying which site each product entry belonged to. However
I would rather not mix the data together.

Thanks,
Henrik

------=_Part_155419_8555191.1227493964190--

From java-user-return-37329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 02:48:58 2008
Return-Path: <java-user-return-37329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29988 invoked from network); 24 Nov 2008 02:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 02:48:58 -0000
Received: (qmail 50896 invoked by uid 500); 24 Nov 2008 02:49:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50858 invoked by uid 500); 24 Nov 2008 02:49:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50847 invoked by uid 99); 24 Nov 2008 02:49:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 18:49:01 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 02:47:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L4RUr-0007cH-Ie
	for java-user@lucene.apache.org; Sun, 23 Nov 2008 18:48:21 -0800
Message-ID: <20654025.post@talk.nabble.com>
Date: Sun, 23 Nov 2008 18:48:21 -0800 (PST)
From: farnetani <farnetani@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Doing the lucene remove character \n (break line)
In-Reply-To: <359a92830811231749u20d571f4m2b17e559c1aa5c08@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: farnetani@gmail.com
References: <20650540.post@talk.nabble.com> <359a92830811231749u20d571f4m2b17e559c1aa5c08@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I got. I finish now, before of you to send message, but thanks your
comments!:-D

Have a nice day!

Jr.


Erick Erickson wrote:
> 
> What I'd do is make my own filter, probably one based upon one of
> the pre-existing ones and modify the call to nextToken, examine that
> token, and if it ends in a hyphen get the next token and return the
> concatenation of the two. I don't believe that there's a pre-existing
> filter that does this, but you might want to check because I haven't
> looked at them an a while.
> 
> Best
> Erick
> 
> On Sun, Nov 23, 2008 at 4:40 PM, farnetani <farnetani@gmail.com> wrote:
> 
>>
>> I need to do lucene find the sentence:
>> ARLEI FERREIRA FARNETANI JUNIOR
>> [arlei] [ferreira] [farnetani] [junior]    (1)
>>
>> and too:
>>
>> ARLEI FERREIRA FAR-   <break line>
>> NETANI JUNIOR
>>
>> I'm using the Brazilian Analyzer, but the result is:
>> [ARLEI] [FERREIRA] [FAR] [NETANI] [JUNIOR]
>>
>> I have to do that the lucene result:
>> [ARLEI] [FERREIRA] [FARNETANI] [JUNIOR] equals the sentence (1)
>>
>> So I have to do that lucene remove "-" hyphen and the break line (\n).
>>
>> To remove character hyphen (-) I got, but remove the break line no!
>>
>> How do I do???
>> --
>> View this message in context:
>> http://www.nabble.com/Doing-the-lucene-remove-character-%5Cn-%28break-line%29-tp20650540p20650540.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Doing-the-lucene-remove-character-%5Cn-%28break-line%29-tp20650540p20654025.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 03:03:43 2008
Return-Path: <java-user-return-37330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33033 invoked from network); 24 Nov 2008 03:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 03:03:43 -0000
Received: (qmail 59644 invoked by uid 500); 24 Nov 2008 03:03:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58970 invoked by uid 500); 24 Nov 2008 03:03:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58958 invoked by uid 99); 24 Nov 2008 03:03:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 19:03:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of skinnybeans@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 03:02:21 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2160285fkq.5
        for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 19:03:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=QKPiKMncWkADXmxKjGaiLC9hPm5RU42QqHiMh8nfHFQ=;
        b=H7/mRabfsOgfIMPgfCWI7yUzz41S4TM/UsrHUDI2erfutxGVnkvu7JBOxr8ZmI9x7b
         gfr5sGY+x0C0CJoSFLpkPuOinFUKV/YYqGhMpYkoww9sTSxrD1VBmm78s2flAC7cpAoj
         nedeZLQjaZK4lmgDP0wMzuy94PLnEoSoqoGCI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=qXtc+6I0dIAbmnhg+o7PaJxRui3sHPU9I0l42fXCp/gK4gIPjUMb1oq+R17GYn6MZK
         m9j6p5JxX8FwpKEWf30P39LjHDNqd1iFi1/C/ALdp0yEq5rkAWnSOkrYhO91OpPH8K7l
         QV1U0pTrFUOmg8GYeAhHDVLsR3IQ/J4zQSxwg=
Received: by 10.181.235.6 with SMTP id m6mr965067bkr.131.1227495786494;
        Sun, 23 Nov 2008 19:03:06 -0800 (PST)
Received: by 10.181.11.18 with HTTP; Sun, 23 Nov 2008 19:03:06 -0800 (PST)
Message-ID: <5e481fec0811231903j66caf001l54940a7ad4b946bb@mail.gmail.com>
Date: Mon, 24 Nov 2008 14:03:06 +1100
From: "Henrik Axelsson" <skinnybeans@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using multiple index searchers.
In-Reply-To: <5e481fec0811231832s2f30384at52f31e6ed32f2610@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e481fec0811231832s2f30384at52f31e6ed32f2610@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

After reading the FAQ I have a question regarding the use of multiple
indexes and thus IndexSearches on the one server.

I work on ecommerce websites and am looking at replacing our current
method of full text searching product descriptions and names with a
Lucene implementation. I envisaged creating a separate index file for
each of the sites running on our main webserver (about 10 sites, each
with different product listings). However this would mean that I would
need to have many instances of IndexSearcher open and potentially come
across file handle limit problems (as outlined in the FAQ) as well as
consuming lots of memory. Is this a valid concern? Would I be able to
use Lucene this way?

An alternative would be to combine all the sites data into one index,
and have a field identifiying which site each product entry belonged
to. However I would rather not mix the data together.

Thanks,
Henrik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 03:13:10 2008
Return-Path: <java-user-return-37331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34200 invoked from network); 24 Nov 2008 03:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 03:13:10 -0000
Received: (qmail 65747 invoked by uid 500); 24 Nov 2008 03:13:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65528 invoked by uid 500); 24 Nov 2008 03:13:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65517 invoked by uid 99); 24 Nov 2008 03:13:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 19:13:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.224 as permitted sender)
Received: from [209.85.198.224] (HELO rv-out-0506.google.com) (209.85.198.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 03:11:49 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2178040rvb.5
        for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 19:12:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=uUV1nl9K+kfv9HO5tsreuwPFQH7rRJsZ2dCLfLhHR9s=;
        b=Xn5EgxyikF/R4szwycGGJT+vJ1OjUApBbuMlV7veCUAJ411ZLiR7QOwR30VMU3kYUz
         bLWIGYxyG3ASOZSv1OARv4JTKFleBNtvWQsrmZzR9pEB+nOUbrwguL0WwHbDcOI2fZIu
         jc0qbSLS9J6QMXvS4JZAnpGIwv2DQ1gTB3kaQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=adGdK2u+pK/PwZPAAkePtSsp/kNuzLKn04+7ghCeTogEZiRnVzGSxKp8ZSowtnnJF2
         aDb3ZW4dFA9kv65KdIrnrcF80hCi+JxJYIClPrM4cwnlH0TPUt2Qvsg0tXBi04gfoqTd
         PEYeRA8oe85qCM8MV6zWF90da6zSjOWVuGgw8=
Received: by 10.140.136.5 with SMTP id j5mr1643142rvd.39.1227496346159;
        Sun, 23 Nov 2008 19:12:26 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Sun, 23 Nov 2008 19:12:26 -0800 (PST)
Message-ID: <c68e39170811231912v36879f40pd9bbdd57aa6d7c38@mail.gmail.com>
Date: Sun, 23 Nov 2008 22:12:26 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Using multiple index searchers.
In-Reply-To: <5e481fec0811231832s2f30384at52f31e6ed32f2610@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e481fec0811231832s2f30384at52f31e6ed32f2610@mail.gmail.com>
X-Google-Sender-Auth: f1323b4053cc81c0
X-Virus-Checked: Checked by ClamAV on apache.org

If the data is unrelated, separate indexes will lead to the best performance.
Memory usage should be less or equal to one big index.
File descriptor usage can be minimized by either calling optimize
before opening a new IndexSearcher (depends on how often you want to
see updates), lowering the merge factor, or using the compound file
format.

-Yonik


On Sun, Nov 23, 2008 at 9:32 PM, Henrik Axelsson <skinnybeans@gmail.com> wrote:
> Hi all,
>
> After reading the FAQ I have a question regarding the use of multiple
> indexes and thus IndexSearches on the one server.
>
> I work on ecommerce websites and am looking at replacing our current method
> of full text searching product descriptions and names with a Lucene
> implementation. I envisaged creating a separate index file for each of the
> sites running on our main webserver (about 10 sites, each with different
> product listings). However this would mean that I would need to have many
> instances of IndexSearcher open and potentially come across file handle
> limit problems (as outlined in the FAQ) as well as consuming lots of memory.
> Is this a valid concern? Would I be able to use Lucene this way?
>
> An alternative would be to combine all the sites data into one index, and
> have a field identifiying which site each product entry belonged to. However
> I would rather not mix the data together.
>
> Thanks,
> Henrik
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 03:43:29 2008
Return-Path: <java-user-return-37332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40378 invoked from network); 24 Nov 2008 03:43:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 03:43:28 -0000
Received: (qmail 82101 invoked by uid 500); 24 Nov 2008 03:43:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82061 invoked by uid 500); 24 Nov 2008 03:43:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82049 invoked by uid 99); 24 Nov 2008 03:43:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Nov 2008 19:43:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of skinnybeans@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 03:42:08 +0000
Received: by fk-out-0910.google.com with SMTP id 18so2174129fkq.5
        for <java-user@lucene.apache.org>; Sun, 23 Nov 2008 19:42:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=vzMYBfPxdwvT+dfDAx3ODjNW1zb0eCzRTyD4upf49p8=;
        b=TmLrIUl20zQzRX09ilIu9fLPjmvXOBxhJghf0B9Kb5zz+ETrn1bhRfgL+yACb9Ob6j
         h2MmBrhqYT3DjXxk83Orb1J3k/uc5vB5camlh72OV9rf1DIyMMiXM5fv7hiG57wU2AL1
         isp2zEa3d7xNJHrYDfsNaAc36D7oEmYuAFeOs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=nePqVjAAD0uTku/MMqBkjPaR6TiClhvRieqG0n+ByMUZ+Tu6a3o47Z+0NTIoBcakDn
         Uebb8WcuzP+/23OM617zUzyq4uak73i17dd1yC70yU6bb8AsQnfbvVlc4T2BeFU0xwBJ
         fpyDmk9q4r3ZDQc3axOgn0S7MKPLWYKpSElpM=
Received: by 10.180.204.10 with SMTP id b10mr972458bkg.201.1227498172149;
        Sun, 23 Nov 2008 19:42:52 -0800 (PST)
Received: by 10.181.11.18 with HTTP; Sun, 23 Nov 2008 19:42:52 -0800 (PST)
Message-ID: <5e481fec0811231942r3cf11d2dv45370a41e09b4ae3@mail.gmail.com>
Date: Mon, 24 Nov 2008 14:42:52 +1100
From: "Henrik Axelsson" <skinnybeans@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Using multiple index searchers.
In-Reply-To: <c68e39170811231912v36879f40pd9bbdd57aa6d7c38@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e481fec0811231832s2f30384at52f31e6ed32f2610@mail.gmail.com>
	 <c68e39170811231912v36879f40pd9bbdd57aa6d7c38@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the quick reply, time to get to work on a prototype!

On Mon, Nov 24, 2008 at 2:12 PM, Yonik Seeley <yonik@apache.org> wrote:
> If the data is unrelated, separate indexes will lead to the best performance.
> Memory usage should be less or equal to one big index.
> File descriptor usage can be minimized by either calling optimize
> before opening a new IndexSearcher (depends on how often you want to
> see updates), lowering the merge factor, or using the compound file
> format.
>
> -Yonik
>
>
> On Sun, Nov 23, 2008 at 9:32 PM, Henrik Axelsson <skinnybeans@gmail.com> wrote:
>> Hi all,
>>
>> After reading the FAQ I have a question regarding the use of multiple
>> indexes and thus IndexSearches on the one server.
>>
>> I work on ecommerce websites and am looking at replacing our current method
>> of full text searching product descriptions and names with a Lucene
>> implementation. I envisaged creating a separate index file for each of the
>> sites running on our main webserver (about 10 sites, each with different
>> product listings). However this would mean that I would need to have many
>> instances of IndexSearcher open and potentially come across file handle
>> limit problems (as outlined in the FAQ) as well as consuming lots of memory.
>> Is this a valid concern? Would I be able to use Lucene this way?
>>
>> An alternative would be to combine all the sites data into one index, and
>> have a field identifiying which site each product entry belonged to. However
>> I would rather not mix the data together.
>>
>> Thanks,
>> Henrik
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 11:27:50 2008
Return-Path: <java-user-return-37333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99586 invoked from network); 24 Nov 2008 11:27:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 11:27:50 -0000
Received: (qmail 42920 invoked by uid 500); 24 Nov 2008 11:27:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42886 invoked by uid 500); 24 Nov 2008 11:27:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42875 invoked by uid 99); 24 Nov 2008 11:27:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 03:27:50 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 11:26:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L4Zav-0000tb-Ny
	for java-user@lucene.apache.org; Mon, 24 Nov 2008 03:27:09 -0800
Message-ID: <20659049.post@talk.nabble.com>
Date: Mon, 24 Nov 2008 03:27:09 -0800 (PST)
From: csantos <claudia.cm.santos@gmail.com>
To: java-user@lucene.apache.org
Subject: GermanAnalyser
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: claudia.cm.santos@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I'm a newbie with Lucene and I started some testing with a small Web
Application with Lucene 2.4.0 and Hibernate Search 3.0.0. The test with the
Standard Analyser were successful, but when i try to use the German Analyser
(for indexing and searching) i get the following error in localhost file
from Tomcat 6.0:

"SCHWERWIEGEND: Servlet.service() for servlet Faces Servlet threw exception
java.lang.AbstractMethodError:
org.apache.lucene.analysis.TokenStream.next()Lorg/apache/lucene/analysis/Token;"


my code is:

QueryParser parser = new MultiFieldQueryParser( FIELD_NAMES, new
GermanAnalyzer());
org.apache.lucene.search.Query query;

// this is the line that generates the error			    	
query = parser.parse(searchTerm);


i found nothing in internet about about the error message, any help is
appreciated :)
regards,


-- 
View this message in context: http://www.nabble.com/GermanAnalyser-tp20659049p20659049.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 12:12:24 2008
Return-Path: <java-user-return-37334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18582 invoked from network); 24 Nov 2008 12:12:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 12:12:23 -0000
Received: (qmail 9316 invoked by uid 500); 24 Nov 2008 12:12:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9286 invoked by uid 500); 24 Nov 2008 12:12:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9275 invoked by uid 99); 24 Nov 2008 12:12:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 04:12:26 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bubblenut@gmail.com designates 74.125.46.28 as permitted sender)
Received: from [74.125.46.28] (HELO yw-out-2324.google.com) (74.125.46.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 12:11:00 +0000
Received: by yw-out-2324.google.com with SMTP id 3so748951ywj.5
        for <java-user@lucene.apache.org>; Mon, 24 Nov 2008 04:11:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:mime-version:content-type:x-google-sender-auth;
        bh=C4FGUv1c7oHYQmtFyLf3DnyMylNr22N0O1UwT42kurA=;
        b=tK1gyIktShmsdm+exJsohLht9887ZLtxwFLd2BqH8kzRScVNf68NJlVSS0VkVfFVXp
         uQqbkvqx5vTT6AkBkhVwHKcqv+tcSwKfAMU/BBI9va0crihTTx01J3nniHdGI+bjZtpq
         uWO5rO1g+8NCPG8dvncrUjmWodhFz0lVpGM4o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:mime-version:content-type
         :x-google-sender-auth;
        b=TqHciLoi3VsUP9cHpu7UHwY47o+BA9CnzGov8EF3tMLOFrtgk24lulSASbH5TMjM1T
         7YysumMBfrq0RMliaEHyRYFRrioUA+30evnGTvgg/z7eI9KLKWAnK2a6cCKNRzGiBHNO
         DiYZPRzq3/lPet8xXsZOPDRlgC2XoC5JVr+qQ=
Received: by 10.64.10.2 with SMTP id 2mr3221232qbj.76.1227528695892;
        Mon, 24 Nov 2008 04:11:35 -0800 (PST)
Received: by 10.65.191.1 with HTTP; Mon, 24 Nov 2008 04:11:35 -0800 (PST)
Message-ID: <32a1c320811240411x63cc046cu2332549c60a8c343@mail.gmail.com>
Date: Mon, 24 Nov 2008 12:11:35 +0000
From: "Robert Young" <rob@roryoung.co.uk>
Sender: bubblenut@gmail.com
To: java-user@lucene.apache.org
Subject: Extending lucene's scoring
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_97348_30714448.1227528695900"
X-Google-Sender-Auth: 9d0a41edef6ca8e0
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_97348_30714448.1227528695900
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I've recently published a blog post on extending lucene's scoring with the
org.apache.lucene.search.function package that readers of this list may be
interested in. I'd be really interested to hear what people think of my
aproach and whether there's a better way in the comments.

http://www.roryoung.co.uk/blog/post/extending-lucene-s-scoring.html

Cheers
Rob

------=_Part_97348_30714448.1227528695900--

From java-user-return-37335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 13:19:58 2008
Return-Path: <java-user-return-37335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40057 invoked from network); 24 Nov 2008 13:19:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 13:19:57 -0000
Received: (qmail 73079 invoked by uid 500); 24 Nov 2008 13:20:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73049 invoked by uid 500); 24 Nov 2008 13:20:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73038 invoked by uid 99); 24 Nov 2008 13:20:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 05:20:01 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of claudia.cm.santos@gmail.com designates 66.249.90.181 as permitted sender)
Received: from [66.249.90.181] (HELO ik-out-1112.google.com) (66.249.90.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 13:18:35 +0000
Received: by ik-out-1112.google.com with SMTP id c29so1631925ika.5
        for <java-user@lucene.apache.org>; Mon, 24 Nov 2008 05:19:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:subject
         :date:mime-version:content-type:x-priority:x-msmail-priority
         :x-mailer:x-mimeole;
        bh=sSCW+pWy9sZrgkvvI8mDPJ2Ejzdpl5odea4w/VeGZIk=;
        b=cp7MzQLDHY6nfMkVepYVkyFsIuIDVQXaq2BZlg2nYFuaDYA1vaA0XDaCfAbb2nndBB
         xDhceRsoseJZZygfF8DRvaNpP/TyEn8Xfs7oo9oa3wUxigbMObG1H3IfbReRnGXfUMak
         4yvfWtdYCC7ryPYMpYPFdSaMK8HYHGKFq4kw8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:subject:date:mime-version:content-type
         :x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=nd3Wbp/DCFZhNcEEIgUMA5TOF7HXrAAIaHIbHkM7qWR7S1mpKIxEJERjR1+ZV/YhBP
         NQTuW+btNVGW8jUy9U5j5OPpSKOu4SXAfHSyZM/cIsyHk3vfk+nW5Ml+sn7invDn+Pm1
         Y585e7eIAvgounwApTxOY1Az1/Caozn1ZYRbM=
Received: by 10.86.80.5 with SMTP id d5mr2171158fgb.47.1227532750077;
        Mon, 24 Nov 2008 05:19:10 -0800 (PST)
Received: from intrepid (dsdf-4db5e644.pool.einsundeins.de [77.181.230.68])
        by mx.google.com with ESMTPS id e20sm6913477fga.1.2008.11.24.05.19.08
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 24 Nov 2008 05:19:09 -0800 (PST)
Message-ID: <585098733549433587FA60970CE0A33D@intrepid>
From: "Claudia Santos" <claudia.cm.santos@gmail.com>
To: <java-user@lucene.apache.org>
Subject: GermanAnalyzer
Date: Mon, 24 Nov 2008 14:19:06 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_008B_01C94E3F.9C297A80"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Windows Mail 6.0.6001.18000
X-MimeOLE: Produced By Microsoft MimeOLE V6.0.6001.18049
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_008B_01C94E3F.9C297A80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,=20

I'm a newbie with Lucene and I started some testing with a small Web =
Application with Lucene 2.4.0 and Hibernate Search 3.0.0. The test with =
the Standard Analyser were successful, but when i try to use the German =
Analyser (for indexing and searching) i get the following error in =
localhost file from Tomcat 6.0:=20

"SCHWERWIEGEND: Servlet.service() for servlet Faces Servlet threw =
exception=20
java.lang.AbstractMethodError: =
org.apache.lucene.analysis.TokenStream.next()Lorg/apache/lucene/analysis/=
Token;"=20


my code is:=20

public List search(final int startRecord,final int endRecord, final =
String searchTerm) {

List searchResult =3D (List) getHibernateTemplate().execute(=20

new HibernateCallback() {


public Object doInHibernate(org.hibernate.Session session) {

try {

FullTextSession fullTextSession =3D =
Search.createFullTextSession(session);

QueryParser parser =3D new MultiFieldQueryParser( FIELD_NAMES, new =
GermanAnalyzer());


org.apache.lucene.search.Query query;



// this is the line that generates the error    =20

query =3D parser.parse(searchTerm);



org.hibernate.search.FullTextQuery hibernateQuery =3D =
fullTextSession.createFullTextQuery(query, Book.class);


hibernateQuery.setFirstResult(startRecord);

hibernateQuery.setMaxResults(endRecord);

setNumberFeeds(hibernateQuery.getResultSize());

List results =3D hibernateQuery.list();


return results;


} catch (ParseException e) {

e.printStackTrace();

return null;

}


}


}, true);


return searchResult;


}



i found nothing in internet about the error message, any help is =
appreciated :)=20
regards,=20

------=_NextPart_000_008B_01C94E3F.9C297A80--


From java-user-return-37336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 13:27:29 2008
Return-Path: <java-user-return-37336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45736 invoked from network); 24 Nov 2008 13:27:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 13:27:29 -0000
Received: (qmail 80715 invoked by uid 500); 24 Nov 2008 13:27:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80678 invoked by uid 500); 24 Nov 2008 13:27:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80667 invoked by uid 99); 24 Nov 2008 13:27:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 05:27:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of claudia.cm.santos@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 13:26:07 +0000
Received: by nf-out-0910.google.com with SMTP id g16so1048527nfd.15
        for <java-user@lucene.apache.org>; Mon, 24 Nov 2008 05:26:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:subject
         :date:mime-version:content-type:x-priority:x-msmail-priority
         :x-mailer:x-mimeole;
        bh=m43S/MqmXd9llU8PP/uMLq7b7RtJx2aainMgRTMZ0MQ=;
        b=YGcwMWj54uD56JMAWqp0Eo46k2xagPlSoRwqs0WVpi2VNNeN6+BsTFHnTZuuoMtsT0
         JvKu3MAyLRJFqWdjcYmQhud89iroonSphP2sXX1HMrYw/oQUtXP8fGMsFdvpgWlnXLdy
         H/Fq8MgVmsxwbRJhGXuK337vJ67YVp/JT9D8I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:subject:date:mime-version:content-type
         :x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=xY1CHn8df7F2b131cLqTmNVESnvVBai0nWRHFTr0hUCZJuMXIxcc08lOeCH4ny+fHw
         ymHBvCz7NEmskBzrKAxi0HZEJCPWy0s8Ib0dXS6LAIdIUke7cVt16Z8Y6bfT/P7C1QaR
         9nLYWe8bN8+QiY39cTD5nQuhfeYRwsaVG6j/U=
Received: by 10.86.80.5 with SMTP id d5mr2185909fgb.7.1227533202413;
        Mon, 24 Nov 2008 05:26:42 -0800 (PST)
Received: from intrepid (dsdf-4db5e644.pool.einsundeins.de [77.181.230.68])
        by mx.google.com with ESMTPS id l19sm6906082fgb.7.2008.11.24.05.26.41
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 24 Nov 2008 05:26:41 -0800 (PST)
Message-ID: <57A13FD0BED44136B9C08E4F400208FF@intrepid>
From: "Claudia Santos" <claudia.cm.santos@gmail.com>
To: <java-user@lucene.apache.org>
Subject:  GermanAnalyzer
Date: Mon, 24 Nov 2008 14:26:38 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00A5_01C94E40.A9B49F30"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Windows Mail 6.0.6001.18000
X-MimeOLE: Produced By Microsoft MimeOLE V6.0.6001.18049
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00A5_01C94E40.A9B49F30
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable



  Hello,=20

  I'm a newbie with Lucene and I started some testing with a small Web =
Application with Lucene 2.4.0 and Hibernate Search 3.0.0. The test with =
the Standard Analyser were successful, but when i try to use the German =
Analyser (for indexing and searching) i get the following error in =
localhost file from Tomcat 6.0:=20

  "SCHWERWIEGEND: Servlet.service() for servlet Faces Servlet threw =
exception=20
  java.lang.AbstractMethodError: =
org.apache.lucene.analysis.TokenStream.next()Lorg/apache/lucene/analysis/=
Token;"=20


  my code is:=20

  public List search(final int startRecord,final int endRecord, final =
String searchTerm) {

  List searchResult =3D (List) getHibernateTemplate().execute(=20

  new HibernateCallback() {


  public Object doInHibernate(org.hibernate.Session session) {

  try {

  FullTextSession fullTextSession =3D =
Search.createFullTextSession(session);

  QueryParser parser =3D new MultiFieldQueryParser( FIELD_NAMES, new =
GermanAnalyzer());


  org.apache.lucene.search.Query query;



  // this is the line that generates the error    =20

  query =3D parser.parse(searchTerm);



  org.hibernate.search.FullTextQuery hibernateQuery =3D =
fullTextSession.createFullTextQuery(query, Book.class);


  hibernateQuery.setFirstResult(startRecord);

  hibernateQuery.setMaxResults(endRecord);

  setNumberFeeds(hibernateQuery.getResultSize());

  List results =3D hibernateQuery.list();


  return results;


  } catch (ParseException e) {

  e.printStackTrace();

  return null;

  }


  }


  }, true);


  return searchResult;


  }



  i found nothing in internet about the error message, any help is =
appreciated :)=20
  regards,=20

------=_NextPart_000_00A5_01C94E40.A9B49F30--


From java-user-return-37337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 13:43:26 2008
Return-Path: <java-user-return-37337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56167 invoked from network); 24 Nov 2008 13:43:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 13:43:26 -0000
Received: (qmail 95508 invoked by uid 500); 24 Nov 2008 13:43:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95074 invoked by uid 500); 24 Nov 2008 13:43:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95062 invoked by uid 99); 24 Nov 2008 13:43:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 05:43:30 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.171] (HELO moutng.kundenserver.de) (212.227.126.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 13:42:03 +0000
Received: from aleppo.local (c83-249-25-247.bredband.comhem.se [83.249.25.247])
	by mrelayeu.kundenserver.de (node=mrelayeu5) with ESMTP (Nemesis)
	id 0ML25U-1L4biB0c40-0003Yi; Mon, 24 Nov 2008 14:42:47 +0100
Date: Mon, 24 Nov 2008 14:42:45 +0100
To: java-user@lucene.apache.org
Subject: Re: GermanAnalyzer
From: "Hardy Ferentschik" <lucene@ferentschik.de>
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <585098733549433587FA60970CE0A33D@intrepid>
Content-Transfer-Encoding: 7bit
Message-ID: <op.uk4lpker7ont1c@aleppo.local>
In-Reply-To: <585098733549433587FA60970CE0A33D@intrepid>
User-Agent: Opera Mail/9.60 (MacIntel)
X-Provags-ID: V01U2FsdGVkX190CA8MBc1kD2Y308OaXfGPragkPzodru+XBXe
 6XPCOvPgDkJT/O+I6Roid73a926+0X0useaoxeDB1vC7RPu0DA
 saCAiSZKuyakz1RH53dhzim1UUxMo0LsY5VlROHjRI=
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I think your question belongs more onto the Hibernate Search Forum -  
http://forum.hibernate.org/viewforum.php?f=9.

That said, it looks like a you have a version problem. Hibernate Search  
3.0.0 is based on Lucene
Lucene 2.2. I recommend updating Hibernate Search to the latest 3.1.0  
release. not only will you be able
to use Lucene 2.4, but you can also use the AnalyzerDef framework to  
define your German analyzer.
Check the online documenation  
(http://www.hibernate.org/hib_docs/search/reference/en/html_single) for  
AnalyzerDef.

If you still have problems after an upgrade I recommend posting to the  
Search forum.

--Hardy


On Mon, 24 Nov 2008 14:19:06 +0100, Claudia Santos  
<claudia.cm.santos@gmail.com> wrote:

> Hello,
>
> I'm a newbie with Lucene and I started some testing with a small Web  
> Application with Lucene 2.4.0 and Hibernate Search 3.0.0. The test with  
> the Standard Analyser were successful, but when i try to use the German  
> Analyser (for indexing and searching) i get the following error in  
> localhost file from Tomcat 6.0:
>
> "SCHWERWIEGEND: Servlet.service() for servlet Faces Servlet threw  
> exception
> java.lang.AbstractMethodError:  
> org.apache.lucene.analysis.TokenStream.next()Lorg/apache/lucene/analysis/Token;"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 13:50:09 2008
Return-Path: <java-user-return-37338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62972 invoked from network); 24 Nov 2008 13:50:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 13:50:08 -0000
Received: (qmail 5866 invoked by uid 500); 24 Nov 2008 13:50:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5837 invoked by uid 500); 24 Nov 2008 13:50:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5826 invoked by uid 99); 24 Nov 2008 13:50:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 05:50:12 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of claudia.cm.santos@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 13:48:45 +0000
Received: by ug-out-1314.google.com with SMTP id c2so818992ugf.23
        for <java-user@lucene.apache.org>; Mon, 24 Nov 2008 05:49:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:references
         :in-reply-to:subject:date:mime-version:content-type
         :content-transfer-encoding:x-priority:x-msmail-priority:x-mailer
         :x-mimeole;
        bh=YE2Eewri2gZPdRZ+Ep44j7LZzgsLetth1W5Ng/aSzrg=;
        b=dfeZtteRgr888UAeu1BS5y56EneG9YxPw3IdrutM5ggiOuPj9QAm3n8Us+7D6yFeF/
         UogLOZS8t+1ltIXPGCJSYN3TPkIie7ClSX/PbMf3JucfvwarNP3NuY4D96kM2AuYlu14
         JFDynfJ33rrtgxpN7Wuu6C+jWJLmCvqi9wnik=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:references:in-reply-to:subject:date:mime-version
         :content-type:content-transfer-encoding:x-priority:x-msmail-priority
         :x-mailer:x-mimeole;
        b=F3eXvNhyLIuJeEQjWfSmlWZEm4zYjSCC6iutPI/oGW5p3I5IwGqcZjrs5JZc3U9+sy
         VPpeugQHM5p5bmJ4XJy6aNlOKY5NRF7cIQQK4gmwPK4VZvKUqlNvc+GynejxS9nHPv08
         cQfV7yWaIoKmeaBDnpOoUSYQ5rquZLkI4gU80=
Received: by 10.86.76.16 with SMTP id y16mr2212845fga.65.1227534570328;
        Mon, 24 Nov 2008 05:49:30 -0800 (PST)
Received: from intrepid (dsdf-4db5e644.pool.einsundeins.de [77.181.230.68])
        by mx.google.com with ESMTPS id l19sm6876512fgb.7.2008.11.24.05.49.29
        (version=SSLv3 cipher=RC4-MD5);
        Mon, 24 Nov 2008 05:49:29 -0800 (PST)
Message-ID: <23D24FBFC1A9468A949D2BDA379EFD02@intrepid>
From: "Claudia Santos" <claudia.cm.santos@gmail.com>
To: <java-user@lucene.apache.org>
References: <585098733549433587FA60970CE0A33D@intrepid> <op.uk4lpker7ont1c@aleppo.local>
In-Reply-To: <op.uk4lpker7ont1c@aleppo.local>
Subject: Re: GermanAnalyzer
Date: Mon, 24 Nov 2008 14:49:26 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-15";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Windows Mail 6.0.6001.18000
X-MimeOLE: Produced By Microsoft MimeOLE V6.0.6001.18049
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Thanks a lot :)

I will try that.

csantos
----- Original Message ----- 
From: "Hardy Ferentschik" <lucene@ferentschik.de>
To: <java-user@lucene.apache.org>
Sent: Monday, November 24, 2008 2:42 PM
Subject: Re: GermanAnalyzer


> Hi,
>
> I think your question belongs more onto the Hibernate Search Forum - 
> http://forum.hibernate.org/viewforum.php?f=9.
>
> That said, it looks like a you have a version problem. Hibernate Search 
> 3.0.0 is based on Lucene
> Lucene 2.2. I recommend updating Hibernate Search to the latest 3.1.0 
> release. not only will you be able
> to use Lucene 2.4, but you can also use the AnalyzerDef framework to 
> define your German analyzer.
> Check the online documenation 
> (http://www.hibernate.org/hib_docs/search/reference/en/html_single) for 
> AnalyzerDef.
>
> If you still have problems after an upgrade I recommend posting to the 
> Search forum.
>
> --Hardy
>
>
> On Mon, 24 Nov 2008 14:19:06 +0100, Claudia Santos 
> <claudia.cm.santos@gmail.com> wrote:
>
>> Hello,
>>
>> I'm a newbie with Lucene and I started some testing with a small Web 
>> Application with Lucene 2.4.0 and Hibernate Search 3.0.0. The test with 
>> the Standard Analyser were successful, but when i try to use the German 
>> Analyser (for indexing and searching) i get the following error in 
>> localhost file from Tomcat 6.0:
>>
>> "SCHWERWIEGEND: Servlet.service() for servlet Faces Servlet threw 
>> exception
>> java.lang.AbstractMethodError: 
>> org.apache.lucene.analysis.TokenStream.next()Lorg/apache/lucene/analysis/Token;"
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 14:05:19 2008
Return-Path: <java-user-return-37339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75406 invoked from network); 24 Nov 2008 14:05:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 14:05:18 -0000
Received: (qmail 40021 invoked by uid 500); 24 Nov 2008 14:05:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39967 invoked by uid 500); 24 Nov 2008 14:05:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39937 invoked by uid 99); 24 Nov 2008 14:05:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 06:05:12 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 14:03:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L4c3C-0007JX-Q8
	for java-user@lucene.apache.org; Mon, 24 Nov 2008 06:04:30 -0800
Message-ID: <20661084.post@talk.nabble.com>
Date: Mon, 24 Nov 2008 06:04:30 -0800 (PST)
From: "Karsten F." <karsten-lucene@fiz-technik.de>
To: java-user@lucene.apache.org
Subject: Re: GermanAnalyzer
In-Reply-To: <57A13FD0BED44136B9C08E4F400208FF@intrepid>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: karsten-lucene@fiz-technik.de
References: <57A13FD0BED44136B9C08E4F400208FF@intrepid>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi csantos,

most possible this is not about lucene:
http://java.sun.com/j2se/1.4.2/docs/api/java/lang/AbstractMethodError.html

GermanAnalyser ist not part of normal lucene jar (it is part of
lucene-analyzers).
In application server the position of jar files can be important.

Please try your code without application server.

Best regards
  Karsten

P.S. I never used Hibernate without DBMS, so possible someone can give a
more specific answer. 

csantos wrote:
> 
> 
> 
>   Hello, 
> 
>   I'm a newbie with Lucene and I started some testing with a small Web
> Application with Lucene 2.4.0 and Hibernate Search 3.0.0. The test with
> the Standard Analyser were successful, but when i try to use the German
> Analyser (for indexing and searching) i get the following error in
> localhost file from Tomcat 6.0: 
> 
>   "SCHWERWIEGEND: Servlet.service() for servlet Faces Servlet threw
> exception 
>   java.lang.AbstractMethodError:
> org.apache.lucene.analysis.TokenStream.next()Lorg/apache/lucene/analysis/Token;" 
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/GermanAnalyzer-tp20660826p20661084.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 17:27:10 2008
Return-Path: <java-user-return-37340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56670 invoked from network); 24 Nov 2008 17:27:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 17:27:10 -0000
Received: (qmail 55551 invoked by uid 500); 24 Nov 2008 17:27:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55522 invoked by uid 500); 24 Nov 2008 17:27:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55511 invoked by uid 99); 24 Nov 2008 17:27:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 09:27:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of glen.newton@gmail.com designates 74.125.44.28 as permitted sender)
Received: from [74.125.44.28] (HELO yx-out-2324.google.com) (74.125.44.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 17:25:49 +0000
Received: by yx-out-2324.google.com with SMTP id 3so821308yxj.5
        for <java-user@lucene.apache.org>; Mon, 24 Nov 2008 09:26:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type:content-transfer-encoding
         :content-disposition;
        bh=JADPIKrdOcs88Mwtyx63lyIn/zSZagrGYT/bjk39ejw=;
        b=peK95qW82xfWo6iWZe4xs5UcKusEp3anltq7plTaXYf7Uf9bftyn9Q7UbMb43n7h8l
         gS9KUs0jQBjOvarkiKMDJuF/YUdPAlPFyF/ypB3VKlmmQAzNEBeaysACPKUVXjPSqO7N
         fE9hz4DLEUqOX2qgBAB0DnqmD6whNkeYiF8/o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type
         :content-transfer-encoding:content-disposition;
        b=Ijvj1H9Bn/nXSl7eTIB+OsMU32ql35z2rgPdHzdb8Rr6Qq4uHFrSdA1wmTW3Gohnf4
         E5CPDJz8yr646ln6+LXUSBE6jtbySuPZHIjPzcbQ5XcTmvPabqyUz7TqomSZV5LL7voL
         GkM56Ua3/1R5NdRKukOL0d5BeEPBJ1kCAZkRI=
Received: by 10.142.14.20 with SMTP id 20mr1752820wfn.79.1227547584322;
        Mon, 24 Nov 2008 09:26:24 -0800 (PST)
Received: by 10.143.40.11 with HTTP; Mon, 24 Nov 2008 09:26:24 -0800 (PST)
Message-ID: <5e76f3840811240926i103c5729u5e65be5429b47e4b@mail.gmail.com>
Date: Mon, 24 Nov 2008 12:26:24 -0500
From: "Glen Newton" <glen.newton@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Subject: Lucene 2.3.1 vs 2.4 benchmarks using LuSql
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

I have some simple indexing benchmarks comparing Lucene 2.3.1 with 2.4:
 http://zzzoot.blogspot.com/2008/11/lucene-231-vs-24-benchmarks-using-lusql.html

In the next couple of days I will be running benchmarks comparing
Solr's DataImportHandler/JdbcDataSource indexing performance with
LuSql and will release them ASAP.

thanks,

Glen

PS. Previous Lucene benchmarks:
- http://zzzoot.blogspot.com/2008/06/lucene-concurrent-search-performance.html
- http://zzzoot.blogspot.com/2008/06/simultaneous-threaded-query-lucene.html
- http://zzzoot.blogspot.com/2008/04/lucene-indexing-performance-benchmarks.html

-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Nov 24 18:08:56 2008
Return-Path: <java-user-return-37341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84623 invoked from network); 24 Nov 2008 18:08:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Nov 2008 18:08:56 -0000
Received: (qmail 12498 invoked by uid 500); 24 Nov 2008 18:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12468 invoked by uid 500); 24 Nov 2008 18:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12457 invoked by uid 99); 24 Nov 2008 18:08:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 10:08:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Kuro@basistech.com designates 65.47.145.42 as permitted sender)
Received: from [65.47.145.42] (HELO mail.basistech.com) (65.47.145.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 18:07:31 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: [ANN] Luke 0.9.1 - bugfix release
Date: Mon, 24 Nov 2008 13:08:14 -0500
Message-ID: <E95FD77F0171D14DA1EEE0A785E92B43032BDA55@mail3.basistech.net>
In-Reply-To: <49299F58.40907@getopt.org>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: [ANN] Luke 0.9.1 - bugfix release
Thread-Index: AclNmLR+Aj96uyTGSd+K0osaglrtzwAxt1SQ
References: <49299F58.40907@getopt.org>
From: "Teruhiko Kurosaka" <Kuro@basistech.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you. I've verified the bug is gone!
=20

> -----Original Message-----
> From: Andrzej Bialecki [mailto:ab@getopt.org]=20
> Sent: Sunday, November 23, 2008 10:22 AM
> To: undisclosed-recipients
> Subject: [ANN] Luke 0.9.1 - bugfix release
>=20
> Hi all,
>=20
> A bugfix release of Luke is now available at the usual place:
>=20
> 	http://www.getopt.org/luke
>=20
> * New features and improvements:
>=20
>    o Added ability to set the maximum count of boolean=20
> clauses in BooleanQuery.
>=20
> * Bug fixes:
>=20
>    o Unbalanced <commit> tags breaking the XML export.=20
> Reported by Teruhiko Kurosaka.
>=20
>    o Opening a non-existent index from command-line creates=20
> an empty directory. This is worked-around in Luke although=20
> it's a Lucene bug.=20
> Reported by Chris Pimlott. See also LUCENE-1464.
>=20
>    o IndexGate inadvertently deleting previous commit points,=20
> even if "Keep all commits" option was specified. Reported by=20
> Mark Harwood.
>=20
>    o Empty index with no fields was reported as invalid.=20
> Discovered by Andrew Zhang and Michael McCandless (LUCENE-1454).
>=20
>=20
> Thank you!
>=20
> --=20
> Best regards,
> Andrzej Bialecki     <><
>   ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 00:40:28 2008
Return-Path: <java-user-return-37342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65255 invoked from network); 25 Nov 2008 00:40:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 00:40:28 -0000
Received: (qmail 88138 invoked by uid 500); 25 Nov 2008 00:40:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88111 invoked by uid 500); 25 Nov 2008 00:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88100 invoked by uid 99); 25 Nov 2008 00:40:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 16:40:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 00:39:06 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 777F871C290; Mon, 24 Nov 2008 16:39:52 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 7423171C0CD
	for <java-user@lucene.apache.org>; Mon, 24 Nov 2008 16:39:52 -0800 (PST)
Date: Mon, 24 Nov 2008 16:39:52 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: how to sort the result by ignoring case in lucene
In-Reply-To: <030d01c94b9f$2fa70cd0$330bc30a@sv.us.sonicwall.com>
Message-ID: <Pine.LNX.4.62.0811241637500.25100@radix.cryptio.net>
References: <20615647.post@talk.nabble.com> <030d01c94b9f$2fa70cd0$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: You need to write your own sort comparator
: SortField(String field, SortComparatorSource comparator)

A much simpler approach is to index a lowercase version of the field.  
since fields used for sorting are typically copies of other existing 
fields anyway because they can't be tokenized, there's not much additional 
overhead.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 05:54:02 2008
Return-Path: <java-user-return-37343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84659 invoked from network); 25 Nov 2008 05:54:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 05:54:01 -0000
Received: (qmail 38994 invoked by uid 500); 25 Nov 2008 05:54:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38954 invoked by uid 500); 25 Nov 2008 05:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38943 invoked by uid 99); 25 Nov 2008 05:54:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Nov 2008 21:54:05 -0800
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=RCVD_BAD_ID,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 05:52:39 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id mAP5rGe8009091
	for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 07:53:16 +0200
Received: from [212.226.92.85] ([212.226.92.85]) by nimitz.teamw.com with ESMTP
	 id m-f%yjeb; 25 Nov 2008 07:52:00 +0200
Message-ID: <492B92B2.9010006@teamware.com>
Date: Tue, 25 Nov 2008 16:52:50 +1100
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: Lucene User <java-user@lucene.apache.org>
Subject: Which is faster/better
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 25 Nov 2008 07:53:16 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

In 2.4, as well as IndexWriter.deleteDocuments(Term) there is also 
IndexReader.deleteDocuments(Term).

I understand opening a reader is expensive, so does this means using 
IndexWriter.deleteDocuments would be faster from a closed index position?

As the IndexReader instance is newer, it has better Javadocs, so it's unclear 
which is the 'right' one to use.

Any pointers?
Antony


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 10:01:50 2008
Return-Path: <java-user-return-37344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30578 invoked from network); 25 Nov 2008 10:01:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 10:01:48 -0000
Received: (qmail 60023 invoked by uid 500); 25 Nov 2008 10:01:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59983 invoked by uid 500); 25 Nov 2008 10:01:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59972 invoked by uid 99); 25 Nov 2008 10:01:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 02:01:51 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.85.211] (HELO smtp101.mail.mud.yahoo.com) (209.191.85.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Nov 2008 10:00:23 +0000
Received: (qmail 22732 invoked from network); 25 Nov 2008 10:00:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=2Rwz3eJhDfrVHsDrVWTqZ1As6b4a1q95DHVwi6n4pgRapEgQQVhZEPUT14r/RP9Uq4Ed9CAYiHEm6/HIcxCtgM1EjQwIK7W1hGIFrHTbZ6ksi7UTEJD4j1Yz7yWfXy61FhX/9MqVt2W6knW1cr2cOPR+8r7ZWVLsWe+pG5dv8UA=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp101.mail.mud.yahoo.com with SMTP; 25 Nov 2008 10:00:06 -0000
X-YMail-OSG: d78lKSkVM1ny0K8gibCvUHsOSyGJ39LU8jHbWISliGpU6hI1ze8ymgVbTuVKrVuLd1Zd0nVWm0Kuii_BU3vi8Il2NyP6Zwlbz0Dg5geLkHOZU0ZuHK45EcPT2lyUg1DEwwyrhqAv6aF7k_ZE3ySa_84VdvEnKFwUwmVYkT7F
X-Yahoo-Newman-Property: ymail-3
Message-ID: <06f501c94ee4$9805d980$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Marked for deletion
Date: Tue, 25 Nov 2008 15:30:03 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

Hello all,

My index application is a separate process and my search application is part 
of web ui. When User performs delete, i want to do mark for deletion.

I think i have no other option other than to update the document, but index 
app is a separate process and it uses index writer. In order to update, I am 
planning to use RMI and create a single application which does both index 
and search and also exposes some search and delete methods.

Is there any other way to achieve this?

Regards
Ganesh 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 11:16:47 2008
Return-Path: <java-user-return-37345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70390 invoked from network); 25 Nov 2008 11:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 11:16:47 -0000
Received: (qmail 54872 invoked by uid 500); 25 Nov 2008 11:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54272 invoked by uid 500); 25 Nov 2008 11:16:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54240 invoked by uid 99); 25 Nov 2008 11:16:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 03:16:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 11:15:23 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E23EE30EFC17; Tue, 25 Nov 2008 04:15:38 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.198] (unknown [138.210.10.225])
	by ehatchersolutions.com (Postfix) with ESMTP id 20D9730EFC16
	for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 04:15:38 -0700 (MST)
Message-Id: <A61867D4-1B38-463C-A793-32C1A060384D@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
To: java-user@lucene.apache.org
In-Reply-To: <06f501c94ee4$9805d980$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Marked for deletion
X-Priority: 3
Date: Tue, 25 Nov 2008 06:15:36 -0500
References: <06f501c94ee4$9805d980$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1


On Nov 25, 2008, at 5:00 AM, Ganesh wrote:
> My index application is a separate process and my search application  
> is part of web ui. When User performs delete, i want to do mark for  
> deletion.
>
> I think i have no other option other than to update the document,  
> but index app is a separate process and it uses index writer. In  
> order to update, I am planning to use RMI and create a single  
> application which does both index and search and also exposes some  
> search and delete methods.
>
> Is there any other way to achieve this?

Perhaps consider using Solr if you're going to wrap Lucene with some  
sort of service layer.  It already takes care of the bulk of the hard  
stuff that you'd end up having to deal with (warming, etc).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 11:42:39 2008
Return-Path: <java-user-return-37346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83496 invoked from network); 25 Nov 2008 11:42:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 11:42:36 -0000
Received: (qmail 87545 invoked by uid 500); 25 Nov 2008 11:42:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87263 invoked by uid 500); 25 Nov 2008 11:42:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87246 invoked by uid 99); 25 Nov 2008 11:42:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 03:42:37 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 11:41:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L4wIm-0002kQ-UZ
	for java-user@lucene.apache.org; Tue, 25 Nov 2008 03:41:56 -0800
Message-ID: <20679609.post@talk.nabble.com>
Date: Tue, 25 Nov 2008 03:41:56 -0800 (PST)
From: Albert Juhe <albertjuhe@gmail.com>
To: java-user@lucene.apache.org
Subject: FIltering with booleanFilter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: albertjuhe@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm trying to use the boolean filter, because after a search I want to show
documents with a determinate code.

codisFiltre="XX07_04141_00853#XX06_03002_00852#UX06_07019_02994"
String[] codi =codisFiltre.split('#'); 
booleanFilter = new BooleanFilter();
        for (int i = 0; i < codi.length; i++) {
            booleanFilter.add(new FilterClause(getTermsFilter("code",
codi[i]), BooleanClause.Occur.SHOULD));
        }

 public TermsFilter getTermsFilter(String field, String text) {
        TermsFilter tf = new TermsFilter();
        tf.addTerm(new Term(field, text));
        return tf;
    }

and I use it:

hits = searcher.search(multiSearchQuery,booleanFilter, Sort.RELEVANCE);

but nothing happens I get the same results with or without filter.
I can see in the recorset the filtered codes.

What's wrong with the booleanFilter?

Thank you,
Albert
-- 
View this message in context: http://www.nabble.com/FIltering-with-booleanFilter-tp20679609p20679609.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 12:06:26 2008
Return-Path: <java-user-return-37347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1400 invoked from network); 25 Nov 2008 12:06:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 12:06:25 -0000
Received: (qmail 31815 invoked by uid 500); 25 Nov 2008 12:06:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31785 invoked by uid 500); 25 Nov 2008 12:06:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31774 invoked by uid 99); 25 Nov 2008 12:06:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 04:06:28 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 12:05:00 +0000
Received: by qw-out-2122.google.com with SMTP id 5so442149qwi.53
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 04:05:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=njRQUAWsW+ofnCG51adm3pC6WtaEAhXsz6eYN3N4EHM=;
        b=tS2ySGkVn53Flcz6P9jkaqhN8VbCZLTf78HXOUSWWBUaWaY/Zpkex7M4RPZYZ0KtYy
         yIwkKoqdG2dcBop0E21dQ2zZeH2yghJQrrtuSQz6dbR3H59FKvRDGGpMpk7Iy4OVsRjA
         +M7WYckOxE7xmXkCY0B6wQpDupTky0+9oA+FE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=TYNPcEmQWCZ5g6uUIaKYDfZ7etlJM1t+X0mv6as8ndhB9mkpqqori2u66D0Nkq5X1/
         y29NxlwVRBKRRFEwrP00cG4flHba9c8k8489FDgHdoAcHLZJPBV8p8O1w3jy0LbHFnZq
         6rxA0qICoCkfPBf2BREDzPUvAOzjOHIzvVslk=
Received: by 10.214.44.2 with SMTP id r2mr3497222qar.146.1227614736561;
        Tue, 25 Nov 2008 04:05:36 -0800 (PST)
Received: by 10.214.241.8 with HTTP; Tue, 25 Nov 2008 04:05:36 -0800 (PST)
Message-ID: <8c4e68610811250405m2edcc209hfb79e594fe7ad892@mail.gmail.com>
Date: Tue, 25 Nov 2008 12:05:36 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FIltering with booleanFilter
In-Reply-To: <20679609.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20679609.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


Do you maybe need MUST rather than SHOULD?


--
Ian.


On Tue, Nov 25, 2008 at 11:41 AM, Albert Juhe <albertjuhe@gmail.com> wrote:
>
> Hi,
>
> I'm trying to use the boolean filter, because after a search I want to show
> documents with a determinate code.
>
> codisFiltre="XX07_04141_00853#XX06_03002_00852#UX06_07019_02994"
> String[] codi =codisFiltre.split('#');
> booleanFilter = new BooleanFilter();
>        for (int i = 0; i < codi.length; i++) {
>            booleanFilter.add(new FilterClause(getTermsFilter("code",
> codi[i]), BooleanClause.Occur.SHOULD));
>        }
>
>  public TermsFilter getTermsFilter(String field, String text) {
>        TermsFilter tf = new TermsFilter();
>        tf.addTerm(new Term(field, text));
>        return tf;
>    }
>
> and I use it:
>
> hits = searcher.search(multiSearchQuery,booleanFilter, Sort.RELEVANCE);
>
> but nothing happens I get the same results with or without filter.
> I can see in the recorset the filtered codes.
>
> What's wrong with the booleanFilter?
>
> Thank you,
> Albert
> --
> View this message in context: http://www.nabble.com/FIltering-with-booleanFilter-tp20679609p20679609.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 12:54:33 2008
Return-Path: <java-user-return-37348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25454 invoked from network); 25 Nov 2008 12:54:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 12:54:33 -0000
Received: (qmail 93365 invoked by uid 500); 25 Nov 2008 12:54:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93335 invoked by uid 500); 25 Nov 2008 12:54:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93324 invoked by uid 99); 25 Nov 2008 12:54:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 04:54:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 12:53:09 +0000
Received: by yw-out-2324.google.com with SMTP id 3so979452ywj.5
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 04:53:53 -0800 (PST)
Received: by 10.151.46.17 with SMTP id y17mr9190551ybj.57.1227617633765;
        Tue, 25 Nov 2008 04:53:53 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id n29sm9465422elf.17.2008.11.25.04.53.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 25 Nov 2008 04:53:52 -0800 (PST)
Message-Id: <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <492B92B2.9010006@teamware.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Which is faster/better
Date: Tue, 25 Nov 2008 07:53:49 -0500
References: <492B92B2.9010006@teamware.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


If you have nothing open already, and all you want to do is delete
certain documents and make a commit point, then using IndexReader vs
IndexWriter should show very little difference in speed.

But if you have mixed adds/deletes, especially a batch of them where
you don't need any commit points until the end, doing everything with
a single IndexWriter is faster because IndexWriter will buffer up a
bunch of deletes before applying them.

That said, I'd really like to deprecate IndexReader.deleteDocuments,
eventually.  I prefer that there be one obvious way to do things (I
copied this from Python, btw).

As of 2.4, IndexWriter now provides delete-by-Query, which I think
ought to meet nearly all of the cases where someone wants to
delete-by-docID using IndexReader.

Or are there situations out there where delete-by-docID is still
compelling?

Mike

Antony Bowesman wrote:

> In 2.4, as well as IndexWriter.deleteDocuments(Term) there is also  
> IndexReader.deleteDocuments(Term).
>
> I understand opening a reader is expensive, so does this means using  
> IndexWriter.deleteDocuments would be faster from a closed index  
> position?
>
> As the IndexReader instance is newer, it has better Javadocs, so  
> it's unclear which is the 'right' one to use.
>
> Any pointers?
> Antony
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 13:59:33 2008
Return-Path: <java-user-return-37349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59287 invoked from network); 25 Nov 2008 13:59:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 13:59:33 -0000
Received: (qmail 75204 invoked by uid 500); 25 Nov 2008 13:59:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75180 invoked by uid 500); 25 Nov 2008 13:59:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75169 invoked by uid 99); 25 Nov 2008 13:59:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 05:59:36 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of derk.crezee@gmail.com designates 209.85.217.10 as permitted sender)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 13:58:08 +0000
Received: by gxk3 with SMTP id 3so624249gxk.5
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 05:57:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=6Js/tczKSGWL6CgadDJU9kJ1sfLiykgYHm8sVVNJFWs=;
        b=w//UzVDtEMqswqSBRl/FsTGbFMu8CUTCEDFQWNpW6uV8SHcNI1K4M1EP5KiIAdjy8e
         cRJJaxPpZ/bmf84AN8B65sVpKoYHoBNXqh09y+3Z5Xc8kBoAAlOWEFaRwFQMwU7Nr/2f
         0BCi0b1CJ9UKxrBUHc221cS/WpvGvbl+ImdOM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=XWI4TiIUExeW/t68Gc+SvO7QjmXytDRy5R9e3MC5KlwLWTjGxnhTlryhx65ngdzZzg
         O0t+uHBgDpJQlUh8SN4OYrV7tm8ZpdtRmUvRDZvTQXRWqAHuB35LUti+8djI9GsSxSR1
         pStbwFnj4oEhDW3AE4V0hJ5Q2F9CVnJSfPyBE=
Received: by 10.150.152.17 with SMTP id z17mr9202809ybd.233.1227621415315;
        Tue, 25 Nov 2008 05:56:55 -0800 (PST)
Received: by 10.151.79.3 with HTTP; Tue, 25 Nov 2008 05:56:55 -0800 (PST)
Message-ID: <128f9ee90811250556o46a8eb1bi73c47cd2c033ecc9@mail.gmail.com>
Date: Tue, 25 Nov 2008 14:56:55 +0100
From: "Derk Crezee" <derk.crezee@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Scoped Search and Facets generation using Lucene
In-Reply-To: <op.ukrqwwf7oftp72@melkor>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2710_11541732.1227621415257"
References: <5E3DE97916D44040A00CFCC4CE5847DB08568FCA@HQ-MAIL3.ptcnet.ptc.com>
	 <5032.17668.qm@web50310.mail.re2.yahoo.com> <op.ukq8b9wyoftp72@melkor>
	 <5E3DE97916D44040A00CFCC4CE5847DB08569A0C@HQ-MAIL3.ptcnet.ptc.com>
	 <op.ukrqwwf7oftp72@melkor>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2710_11541732.1227621415257
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I remember seeing a paper about indexing xml using Lucene here:
https://ssl.bnt.com/idealliance/papers/xmle02/dx_xmle02/html/abstract/03-02-08.html

I think it will be applicable to your problem.

- Derk

On Mon, Nov 17, 2008 at 4:06 PM, Aleksander M. Stensby <
aleksander.stensby@integrasco.no> wrote:

> Yes, you have a lot of fields but if you want to do faceting and all
> possible fields you will probably have to index each node in your document
> as a separate field. You should look at solr, which supports facets out of
> the box. Keep in mind what type of tokenizer(s) you use as this effects your
> results when querying.
>
> - Aleksander
>
>
> On Mon, 17 Nov 2008 13:49:51 +0100, Bapat, Mayur <mbapat@ptc.com> wrote:
>
>  My xml format similar to as follows -
>>
>> <?xml version="1.0" encoding="UTF-8" ?><Attributes><IBA8909
>> type="float">0.0</IBA8909><IBA8654 type="float">0.0</IBA8654><folder
>> type="double">8254</folder><inheritedDomain
>> type="string">true</inheritedDomain><iterationInfo.branchId
>> type="double">8438</iterationInfo.branchId><Part
>> type="double">12771</Part><member
>> type="double">8443</member><IBA8608
>> type="string">Ver-dir(TOP)</IBA8608><IBA9119
>> type="float">0.0</IBA9119><genericType
>> type="string">standard</genericType><name
>> type="string">A001</name><versionInfo.identifier.versionId
>> type="string">A</versionInfo.identifier.versionId><thePersistInfo.update
>> Count
>> type="double">3</thePersistInfo.updateCount><IBA8929
>> type="string">Carbon
>> film</IBA8929><iterationInfo.creator
>> type="double">10</iterationInfo.creator><iterationInfo.note
>> type="string">just
>> classified</iterationInfo.note><IBA8950 type="float">0</IBA8950><IBA8794
>> type="string">default</IBA8794><defaultTraceCode
>> type="string">0</defaultTraceCode><IBA8866
>> type="double">0</IBA8866><IBA8897
>> type="float">0.0</IBA8897><name
>> type="string">TRIMMER</name><versionInfo.identifier.versionSortId
>> type="string">000001</versionInfo.identifier.versionSortId><number
>> type="string">0000000001</number><iterationInfo.state
>> type="string">ctrld</iterationInfo.state><IBA8925
>> type="float">0</IBA8925><IBA8754
>> type="float">0.0</IBA8754><IBA9097 type="float">0.0</IBA9097><IBA9123
>> type="float">0.0</IBA9123><thePersistInfo.createStamp
>> type="datetime">2008-07-16T08:34:20</thePersistInfo.createStamp><state.s
>> tate
>> type="string">INWORK</state.state><masterReference
>> type="double">8436</masterReference><IBA8839
>> type="float">0.0</IBA8839><thePersistInfo.updateStamp
>> type="datetime">2008-08-01T10:44:35</thePersistInfo.updateStamp><IBA8776
>> type="string">True</IBA8776><view type="double">2931</view><IBA8653
>> type="float">0.0</IBA8653><IBA8802
>> type="float">0.0</IBA8802><organizationReference
>> type="double">856</organizationReference><partType
>> type="string">separable</partType><IBA8786
>> type="float">0.0</IBA8786><checkoutInfo.state
>> type="string">c/i</checkoutInfo.state><thePersistInfo.markForDelete
>> type="double">0</thePersistInfo.markForDelete><IBA8733
>> type="string">0</IBA8733><state.atGate
>> type="string">false</state.atGate><iterationInfo.latest
>> type="string">true</iterationInfo.latest><IBA8800
>> type="double">0</IBA8800><Part
>> type="string">IBRTYPE|Part~~WCP|22037|1</Part><IBA9062
>> type="float">0.0</IBA9062><thePersistInfo.modifyStamp
>> type="datetime">2008-08-01T10:44:35</thePersistInfo.modifyStamp><iterati
>> onInfo.predecessor
>> type="double">8440</iterationInfo.predecessor><IBA9035
>> type="string">Industry</IBA9035><IBA8806 type="float">0</IBA8806><source
>> type="string">make</source><state.lifeCycleId
>> type="double">6193</state.lifeCycleId><IBA8827
>> type="string">Through.Hole</IBA8827><iterationInfo.modifier
>> type="double">10</iterationInfo.modifier><IBA8798
>> type="double">0</IBA8798><IBA8825
>> type="string">1</IBA8825><IBA8992 type="string">Open
>> type</IBA8992><IBA8949
>> type="string">Yes</IBA8949><versionInfo.identifier.versionLevel
>> type="double">1</versionInfo.identifier.versionLevel><defaultUnit
>> type="string">ea</defaultUnit><containerReference
>> type="double">8212</containerReference><endItem
>> type="string">false</endItem><IBA8796
>> type="string">1</IBA8796><folderingInfo.cabinet
>> type="double">8254</folderingInfo.cabinet><domainRef
>> type="double">8216</domainRef><IBA9060
>> type="float">0.0</IBA9060><iterationInfo.identifier.iterationId
>> type="string">2</iterationInfo.identifier.iterationId><IBA8080
>> type="string">sizeCode</IBA8080><IBA8891
>> type="float">0.0</IBA8891><IBA8804
>> type="float">0</IBA8804><IBA9005
>> type="float">0.0</IBA9005><checkoutInfo.derivedFrom
>> type="double">8440</checkoutInfo.derivedFrom></Attributes>
>>
>> and I am interested in finding a document by giving a scope like -
>> find a document with IBA8949=Yes AND IBA8802=0.0 and
>> iterationInfo.predecessor=OR.
>>
>> It looks like for each element from this XML, I need to create a field
>> for the index document and create a search query accordingly.
>>
>>
>>
>>
>> -----Original Message-----
>> From: Aleksander M. Stensby [mailto:aleksander.stensby@integrasco.no]
>> Sent: Monday, November 17, 2008 1:55 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Scoped Search and Facets generation using Lucene
>>
>> I think that the closest you get to "scoped" search in your case would
>> be to use filters. (If you index your paths, or if the documents have
>> some standarized format, I assume you could just use one field per
>> element in your document.)
>>
>> Maybe you could say a bit about you document structure? (If your
>> question is a XML specific parsing question, the Lucene mailing list
>> isn't really right place...)
>>
>> - Aleksander
>>
>>
>> On Fri, 14 Nov 2008 17:52:59 +0100, Otis Gospodnetic
>> <otis_gospodnetic@yahoo.com> wrote:
>>
>>  Hi Mayur,
>>>
>>> Solr has built-in support for facets.  I don't understand what you
>>> mean by scoped searches.  Could you please give a concrete example?
>>>
>>>
>>> Otis
>>> --
>>> Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch
>>>
>>>
>>>
>>>
>>> ________________________________
>>> From: "Bapat, Mayur" <mbapat@ptc.com>
>>> To: java-user@lucene.apache.org
>>> Sent: Friday, November 14, 2008 3:04:12 AM
>>> Subject: Scoped Search and Facets generation using Lucene
>>>
>>> Hi,
>>>
>>> Does Lucene support Scoped Searches? My intention is to index an XML
>>> String and search for a matching element/attribute value from that XML
>>>
>>
>>  by specifying scope(path).
>>> Also is there any direct support for Facets building in Lucene?
>>>
>>> Regards,
>>> Mayur
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>>
>> --
>> Aleksander M. Stensby
>> Senior software developer
>> Integrasco A/S
>> www.integrasco.no
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> --
> Aleksander M. Stensby
> Senior software developer
> Integrasco A/S
> www.integrasco.no
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2710_11541732.1227621415257--

From java-user-return-37350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 15:22:08 2008
Return-Path: <java-user-return-37350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94186 invoked from network); 25 Nov 2008 15:22:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 15:22:08 -0000
Received: (qmail 26108 invoked by uid 500); 25 Nov 2008 15:22:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26072 invoked by uid 500); 25 Nov 2008 15:22:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26061 invoked by uid 99); 25 Nov 2008 15:22:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 07:22:11 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 15:20:45 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L4zjG-0003Yd-RJ
	for java-user@lucene.apache.org; Tue, 25 Nov 2008 07:21:30 -0800
Message-ID: <20682548.post@talk.nabble.com>
Date: Tue, 25 Nov 2008 07:21:30 -0800 (PST)
From: Dora <julien.barret@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing accented characters, then searching by any form
In-Reply-To: <368FDCE1-1B94-4B99-A48D-AE296A559CAE@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: julien.barret@gmail.com
References: <15412778.post@talk.nabble.com> <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com> <AAA63AE5-2F37-4009-BBB9-F528E025C2E7@gmail.com> <15415778.post@talk.nabble.com> <368FDCE1-1B94-4B99-A48D-AE296A559CAE@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Karl Wettin wrote:
>=20
> Try this (dry coded) snippet instead:
>=20
> StandardAnalyzer objAnalyzer =3D new StandardAnalyzer() {
>    public TokenStream tokenStream(String fieldName, Reader reader) {
>      return new ISOLatin1AccentFilter(super.tokenStream(fieldName, =20
> reader));
>    }
> }
>=20

I tried this, but it does not work as expected.

I am using an utility class with a static method that gives me an analyzer:

public static Analyzer getAnalyzer()=20
=09{ =20
=09=09StandardAnalyzer objAnalyzer =3D new StandardAnalyzer() {
=09=09=09   public TokenStream tokenStream(String fieldName, Reader reader)=
 {
=09=09=09     return new ISOLatin1AccentFilter(super.tokenStream(fieldName,
reader));
=09=09=09   }
=09=09=09};
=09=09=09return objAnalyzer;
=09=09}
=09}

So when I need the analyzer (for indexing or searching) I perform an
UtilityClass.getAnalyzer() call.

It works for my query parser: The accent are correctly removed when
performing the search.
If my index contains "cafe" searching for "caf=C3=A9" will find the documen=
ts
containing "cafe"

But when explore my index with Luke I can see that the indexer does not use
the ISOLatin1AccentFilter  (I tested with a breakpoint in the overriden
tokenStream method) and if the document contains "caf=C3=A9", the index wil=
l
contain "caf=C3=A9".

As a consequence, search on word having accent is not possible: the index
contains the accent, while it is removed by the search process.

So my index contains "caf=C3=A9", but when I search for "caf=C3=A9" the fil=
ter changes
it in "cafe" and it gives no hit...

Any clue on why my filter is not used at time of indexation ?




--=20
View this message in context: http://www.nabble.com/Indexing-accented-chara=
cters%2C-then-searching-by-any-form-tp15412778p20682548.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 15:26:14 2008
Return-Path: <java-user-return-37351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95468 invoked from network); 25 Nov 2008 15:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 15:26:14 -0000
Received: (qmail 33862 invoked by uid 500); 25 Nov 2008 15:26:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32935 invoked by uid 500); 25 Nov 2008 15:26:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32924 invoked by uid 99); 25 Nov 2008 15:26:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 07:26:17 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=MSGID_MULTIPLE_AT,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of diego.cassinera@mercadolibre.com designates 216.35.213.234 as permitted sender)
Received: from [216.35.213.234] (HELO ironport-inbound02.mercadolibre.com) (216.35.213.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 15:24:49 +0000
Received: from unknown (HELO vplssl2.mercadolibre.com) ([172.16.0.128])
  by ironport-inbound02.mercadolibre.com with ESMTP; 25 Nov 2008 10:25:34 -0500
X-IronPort-AV: i="4.33,664,1220245200"; 
   d="scan'208"; a="66529263:sNHT18434269"
Received: from dcassinera (unverified [190.220.33.50]) 
	by vplssl2.mercadolibre.com (SurgeMail 3.9e) with ESMTP id 4218442-1864578 
	for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 10:25:34 -0500 EDT
From: "Diego Cassinera" <diego.cassinera@mercadolibre.com>
To: <java-user@lucene.apache.org>
References: <15412778.post@talk.nabble.com> <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com> <AAA63AE5-2F37-4009-BBB9-F528E025C2E7@gmail.com> <15415778.post@talk.nabble.com> <368FDCE1-1B94-4B99-A48D-AE296A559CAE@gmail.com> <20682548.post@talk.nabble.com>
In-Reply-To: <20682548.post@talk.nabble.com>
Subject: RE: Indexing accented characters, then searching by any form
Date: Tue, 25 Nov 2008 13:26:06 -0300
Message-ID: <000001c94f1a$85246a30$8f6d3e90$@cassinera@mercadolibre.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AclPEZPU0Yu3gvpNRCKyWc2eLXx+FQACNqTw
Content-Language: es-ar
X-Originating-IP: 190.220.33.50
X-Authenticated-User: diego.cassinera@mercadolibre.com 
X-Virus-Checked: Checked by ClamAV on apache.org

Are you sure you are creating the fields with Field.Index.ANALYZED ?

-----Mensaje original-----
De: Dora [mailto:julien.barret@gmail.com]=20
Enviado el: martes, 25 de noviembre de 2008 12:22 p.m.
Para: java-user@lucene.apache.org
Asunto: Re: Indexing accented characters, then searching by any form




Karl Wettin wrote:
>=20
> Try this (dry coded) snippet instead:
>=20
> StandardAnalyzer objAnalyzer =3D new StandardAnalyzer() {
>    public TokenStream tokenStream(String fieldName, Reader reader) {
>      return new ISOLatin1AccentFilter(super.tokenStream(fieldName, =20
> reader));
>    }
> }
>=20

I tried this, but it does not work as expected.

I am using an utility class with a static method that gives me an =
analyzer:

public static Analyzer getAnalyzer()=20
	{ =20
		StandardAnalyzer objAnalyzer =3D new StandardAnalyzer() {
			   public TokenStream tokenStream(String fieldName, Reader reader) {
			     return new ISOLatin1AccentFilter(super.tokenStream(fieldName,
reader));
			   }
			};
			return objAnalyzer;
		}
	}

So when I need the analyzer (for indexing or searching) I perform an
UtilityClass.getAnalyzer() call.

It works for my query parser: The accent are correctly removed when
performing the search.
If my index contains "cafe" searching for "caf=C3=A9" will find the =
documents
containing "cafe"

But when explore my index with Luke I can see that the indexer does not =
use
the ISOLatin1AccentFilter  (I tested with a breakpoint in the overriden
tokenStream method) and if the document contains "caf=C3=A9", the index =
will
contain "caf=C3=A9".

As a consequence, search on word having accent is not possible: the =
index
contains the accent, while it is removed by the search process.

So my index contains "caf=C3=A9", but when I search for "caf=C3=A9" the =
filter changes
it in "cafe" and it gives no hit...

Any clue on why my filter is not used at time of indexation ?




--=20
View this message in context: =
http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-a=
ny-form-tp15412778p20682548.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 15:35:38 2008
Return-Path: <java-user-return-37352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99274 invoked from network); 25 Nov 2008 15:35:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 15:35:35 -0000
Received: (qmail 48305 invoked by uid 500); 25 Nov 2008 15:35:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48279 invoked by uid 500); 25 Nov 2008 15:35:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48268 invoked by uid 99); 25 Nov 2008 15:35:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 07:35:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 15:34:12 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 9C8E9870D8
	for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 07:34:57 -0800 (PST)
Message-Id: <682ED89D-DF14-48A7-A144-D3EE40CEB0D0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Which is faster/better
Date: Tue, 25 Nov 2008 10:34:56 -0500
References: <492B92B2.9010006@teamware.com> <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 25, 2008, at 7:53 AM, Michael McCandless wrote:

>
> As of 2.4, IndexWriter now provides delete-by-Query, which I think
> ought to meet nearly all of the cases where someone wants to
> delete-by-docID using IndexReader.
>
> Or are there situations out there where delete-by-docID is still
> compelling?


Assuming delete-by-DocId means IndexReader.deleteDocument(int) right?   
That is, you mean the internal Lucene doc id, right?

If you already have the docId, would you need to/want to do delete-by- 
Query or even delete-by-Term?  Isn't delete-by-id a lot lighter weight  
since it only marks the the doc as deleted, where as d-b-Q can  
potentially force a flush, etc?

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 15:40:44 2008
Return-Path: <java-user-return-37353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1271 invoked from network); 25 Nov 2008 15:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 15:40:44 -0000
Received: (qmail 60227 invoked by uid 500); 25 Nov 2008 15:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60200 invoked by uid 500); 25 Nov 2008 15:40:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60189 invoked by uid 99); 25 Nov 2008 15:40:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 07:40:48 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [61.95.162.76] (HELO kecgate02.infosys.com) (61.95.162.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 15:39:23 +0000
X-TM-IMSS-Message-ID:<82d7553c0010092d@kecgate02.infosys.com>
Received: from blrkechub02.ad.infosys.com ([10.66.236.42]) by kecgate02.infosys.com ([61.95.162.76]) with ESMTP (TREND IMSS SMTP Service 7.0; TLS: TLSv1/SSLv3,128bits,RC4-MD5) id 82d7553c0010092d ; Tue, 25 Nov 2008 21:06:32 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub02.ad.infosys.com ([10.66.236.42]) with mapi; Tue, 25 Nov 2008
 21:10:05 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 25 Nov 2008 21:10:03 +0530
Subject: Analyzer
Thread-Topic: Analyzer
Thread-Index: AclPFBWfppfPx0qUSciAdHzoAHk87Q==
Message-ID: <68959F25CDEBCB4F917D5A253291D73E09DCAAA19F@BLRKECMBX06.ad.infosys.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_68959F25CDEBCB4F917D5A253291D73E09DCAAA19FBLRKECMBX06ad_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_68959F25CDEBCB4F917D5A253291D73E09DCAAA19FBLRKECMBX06ad_
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

HI=20All,
I=20am=20indexing=20a=20set=20file=20type=20(html,=20js,jsp,xml=20etc).=
=20All=20the=20file=20type=20have=20a=20common=20field=20called=20as=20te=
xt.=20This=20field=20contains=20all=20the=20file=20data.=20Can=20I=20have=
=20different=20analyzer=20for=20depending=20upon=20file=20type.

Note:=20I=20am=20indexing=20all=20file=20type=20with=20same=20indexer.

Regards,
Allahbaksh

Allahbaksh=20Mohammedali=20Asadullah

http://allahbaksh.blogspot.com<http://allahbaksh.blogspot.com/>




****************=20CAUTION=20-=20Disclaimer=20*****************
This=20e-mail=20contains=20PRIVILEGED=20AND=20CONFIDENTIAL=20INFORMATION=
=20intended=20solely=20
for=20the=20use=20of=20the=20addressee(s).=20If=20you=20are=20not=20the=
=20intended=20recipient,=20please=20
notify=20the=20sender=20by=20e-mail=20and=20delete=20the=20original=20mes=
sage.=20Further,=20you=20are=20not=20
to=20copy,=20disclose,=20or=20distribute=20this=20e-mail=20or=20its=20con=
tents=20to=20any=20other=20person=20and=20
any=20such=20actions=20are=20unlawful.=20This=20e-mail=20may=20contain=20=
viruses.=20Infosys=20has=20taken=20
every=20reasonable=20precaution=20to=20minimize=20this=20risk,=20but=20is=
=20not=20liable=20for=20any=20damage=20
you=20may=20sustain=20as=20a=20result=20of=20any=20virus=20in=20this=20e-=
mail.=20You=20should=20carry=20out=20your=20
own=20virus=20checks=20before=20opening=20the=20e-mail=20or=20attachment.=
=20Infosys=20reserves=20the=20
right=20to=20monitor=20and=20review=20the=20content=20of=20all=20messages=
=20sent=20to=20or=20from=20this=20e-mail=20
address.=20Messages=20sent=20to=20or=20from=20this=20e-mail=20address=20m=
ay=20be=20stored=20on=20the=20
Infosys=20e-mail=20system.
***INFOSYS********=20End=20of=20Disclaimer=20********INFOSYS***

--_000_68959F25CDEBCB4F917D5A253291D73E09DCAAA19FBLRKECMBX06ad_--

From java-user-return-37354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 15:47:26 2008
Return-Path: <java-user-return-37354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4058 invoked from network); 25 Nov 2008 15:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 15:47:26 -0000
Received: (qmail 70252 invoked by uid 500); 25 Nov 2008 15:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70221 invoked by uid 500); 25 Nov 2008 15:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70210 invoked by uid 99); 25 Nov 2008 15:47:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 07:47:29 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.46.29] (HELO yw-out-2324.google.com) (74.125.46.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 15:46:03 +0000
Received: by yw-out-2324.google.com with SMTP id 3so7798ywj.5
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 07:46:48 -0800 (PST)
Received: by 10.151.147.10 with SMTP id z10mr1677746ybn.164.1227628008859;
        Tue, 25 Nov 2008 07:46:48 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id m73sm8291568rnd.0.2008.11.25.07.46.47
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 25 Nov 2008 07:46:47 -0800 (PST)
Message-Id: <779AEF66-AFE4-46FB-81F5-A74F4AE2D301@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <682ED89D-DF14-48A7-A144-D3EE40CEB0D0@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Which is faster/better
Date: Tue, 25 Nov 2008 10:46:45 -0500
References: <492B92B2.9010006@teamware.com> <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com> <682ED89D-DF14-48A7-A144-D3EE40CEB0D0@apache.org>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Grant Ingersoll wrote:

>
> On Nov 25, 2008, at 7:53 AM, Michael McCandless wrote:
>
>>
>> As of 2.4, IndexWriter now provides delete-by-Query, which I think
>> ought to meet nearly all of the cases where someone wants to
>> delete-by-docID using IndexReader.
>>
>> Or are there situations out there where delete-by-docID is still
>> compelling?
>
>
> Assuming delete-by-DocId means IndexReader.deleteDocument(int)  
> right?  That is, you mean the internal Lucene doc id, right?

Right, I mean delete by internal docID.

> If you already have the docId, would you need to/want to do delete- 
> by-Query or even delete-by-Term?  Isn't delete-by-id a lot lighter  
> weight since it only marks the the doc as deleted, where as d-b-Q  
> can potentially force a flush, etc?

I guess the question is how you got that docID in the first place?  If
you got it by running a query, and deleting all docIDs that are
returned, then you could dBQ instead?

Lucene's (IndexWriter's) dbQ doesn't force a flush: it's buffered just
like other deletes and then applied in bulk at certain times.  When
autoCommit is false, currently the deletes are applied when a
merge wants to start (ie not at each segment flush).  Or, if you call
commit().

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 15:59:28 2008
Return-Path: <java-user-return-37355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9157 invoked from network); 25 Nov 2008 15:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 15:59:28 -0000
Received: (qmail 92699 invoked by uid 500); 25 Nov 2008 15:59:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92672 invoked by uid 500); 25 Nov 2008 15:59:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92661 invoked by uid 99); 25 Nov 2008 15:59:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 07:59:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 15:58:06 +0000
Received: by qyk13 with SMTP id 13so75730qyk.5
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 07:57:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=y98PWhE6jXBWle8DOz37Rh0hnB46EGiCerX0vLqymjQ=;
        b=pXqWmsSGgUHmQV7V60/e6SYXF9sG67KpmSwAhNgYueSG5cgFAg9jAJJURAQuHXsQuj
         bfZQx9Zy2M01tKiqjnO8MrO+B0K7WAU/+1JClaW43p7nS6ckiKA3OguxnibruDz+mfek
         K44wpO5CT4PuxXA7bHZBE26sGonRFnQeRHS14=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=QDJGfmNViJIOrBCfnyGfNb3YAq52p8ww5SxC3gxbeZJkqAsBFKe2QgoPE9a3yKsnAX
         z7e0FUXOT2uropFhtKk/ZVwxMJMb2WdMv51mSMxDAdv0bC14EKSzNs3yYY6cvde5PU6M
         3ptbcfIwEclqTjqLeSx+ShK3YTQA7agAX0NLo=
Received: by 10.214.148.5 with SMTP id v5mr3820157qad.312.1227628671763;
        Tue, 25 Nov 2008 07:57:51 -0800 (PST)
Received: by 10.214.241.8 with HTTP; Tue, 25 Nov 2008 07:57:51 -0800 (PST)
Message-ID: <8c4e68610811250757m1c0d1a04rc09e27b891b2f273@mail.gmail.com>
Date: Tue, 25 Nov 2008 15:57:51 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzer
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E09DCAAA19F@BLRKECMBX06.ad.infosys.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <68959F25CDEBCB4F917D5A253291D73E09DCAAA19F@BLRKECMBX06.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, you can.  But it is generally best to use the same analyzer for
indexing and for searching so, assuming that you want searches to find
matches in files of whatever type, I'd recommend pre-processing the
files to a common text format before indexing and then using the same
analyzer for all of them.


--
Ian.


On Tue, Nov 25, 2008 at 3:40 PM, Allahbaksh Mohammedali Asadullah
<Allahbaksh_Asadullah@infosys.com> wrote:
> HI All,
> I am indexing a set file type (html, js,jsp,xml etc). All the file type have a common field called as text. This field contains all the file data. Can I have different analyzer for depending upon file type.
>
> Note: I am indexing all file type with same indexer.
>
> Regards,
> Allahbaksh
>
> Allahbaksh Mohammedali Asadullah
>
> http://allahbaksh.blogspot.com<http://allahbaksh.blogspot.com/>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 16:09:08 2008
Return-Path: <java-user-return-37356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16737 invoked from network); 25 Nov 2008 16:09:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 16:09:08 -0000
Received: (qmail 26024 invoked by uid 500); 25 Nov 2008 16:09:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26004 invoked by uid 500); 25 Nov 2008 16:09:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25993 invoked by uid 99); 25 Nov 2008 16:09:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 08:09:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.44.30 as permitted sender)
Received: from [74.125.44.30] (HELO yx-out-2324.google.com) (74.125.44.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 16:07:45 +0000
Received: by yx-out-2324.google.com with SMTP id 3so14224yxj.5
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 08:08:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=n27hY3WsrPpFYqP/r6P7QKWDvlViOTnBSecjAAjkqUY=;
        b=UwkzH747Mjw9IHfjnioj5cx0snOyDKzBawVFlM+pe7/aY12AF/XHFDsCNJV+woCZg/
         7+vE9Tpzl3qDnBVvebJREoN8d7K8GpzjRYpuZ/P8rJ4cV+TWzAG4j3k0qSZXztKTzafj
         pBRICzejkQhYWXWmtNtGAmp3OQ9ZmG38RQ/uE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=C4lZD9fLgmRH5s8ue4/RSzAwwbEXXwp8Hg/FWKcUC0cqM6juCH842mpt9H1tfkjA56
         fJAIUSv7riKx9PApzWEGO5ioegZrO5kazzIZWAc8ngRWOAkJPQ6PQ2OeDAyATLnef5ce
         rxfmsmlVpZIbN06izZGDfHtJp2+EDF/Ee/bY4=
Received: by 10.86.80.17 with SMTP id d17mr3043004fgb.14.1227629310001;
        Tue, 25 Nov 2008 08:08:30 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Tue, 25 Nov 2008 08:08:29 -0800 (PST)
Message-ID: <359a92830811250808n26844578vb6187b7b267e640c@mail.gmail.com>
Date: Tue, 25 Nov 2008 11:08:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzer
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E09DCAAA19F@BLRKECMBX06.ad.infosys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8564_4929780.1227629309991"
References: <68959F25CDEBCB4F917D5A253291D73E09DCAAA19F@BLRKECMBX06.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8564_4929780.1227629309991
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm assuming that you want a different analyzer to handle extracting
the relevant information to put into a "text" field of the Lucene document.
I know of no way you can attach different analyzers to a single field.
You can certainly attach different analyzers to *different* fields...

The first thing I'd try would be to write your own analyzer that keeps
track of what kind of file it's currently analyzing and knows how to
"do the right thing" to extract the next token for the text field.

A cruder way would be to detect the type of document yourself,
extract the text into a string (or some such) then feed that into
your document.

Best
Erick


On Tue, Nov 25, 2008 at 10:40 AM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

> HI All,
> I am indexing a set file type (html, js,jsp,xml etc). All the file type
> have a common field called as text. This field contains all the file data.
> Can I have different analyzer for depending upon file type.
>
> Note: I am indexing all file type with same indexer.
>
> Regards,
> Allahbaksh
>
> Allahbaksh Mohammedali Asadullah
>
> http://allahbaksh.blogspot.com<http://allahbaksh.blogspot.com/>
>
>
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely
> for the use of the addressee(s). If you are not the intended recipient,
> please
> notify the sender by e-mail and delete the original message. Further, you
> are not
> to copy, disclose, or distribute this e-mail or its contents to any other
> person and
> any such actions are unlawful. This e-mail may contain viruses. Infosys has
> taken
> every reasonable precaution to minimize this risk, but is not liable for
> any damage
> you may sustain as a result of any virus in this e-mail. You should carry
> out your
> own virus checks before opening the e-mail or attachment. Infosys reserves
> the
> right to monitor and review the content of all messages sent to or from
> this e-mail
> address. Messages sent to or from this e-mail address may be stored on the
> Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>

------=_Part_8564_4929780.1227629309991--

From java-user-return-37357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 16:10:47 2008
Return-Path: <java-user-return-37357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19580 invoked from network); 25 Nov 2008 16:10:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 16:10:47 -0000
Received: (qmail 30469 invoked by uid 500); 25 Nov 2008 16:10:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30439 invoked by uid 500); 25 Nov 2008 16:10:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30428 invoked by uid 99); 25 Nov 2008 16:10:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 08:10:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 16:09:24 +0000
Received: by an-out-0708.google.com with SMTP id b2so14119ana.5
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 08:10:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=L3T8tQ8qpuDzrXvbbeWXsA/vvJzH2qXzYsqZABjHwBw=;
        b=V3yqIq8fPc8MhsyM4YePqJkqoaUoWp4wSS2MPvvoys+giwIo3e8vmgSv/j7dJWqPoY
         0RO9EmE798br5LwUClEm67dm53a49RmHIzuQHmd4FJIg7UElLU9Qt83HFA0BBZo697CX
         ClbQWoIcdwHb97uots8WprmD9Y4DgKhc1PVJk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=wTCDnuPEIUq08ijjP81vrEcxwQH3TZ0hC+lV+bnUxWy2iIuy5mu1QtqUw5vk93iCP8
         xQcDbW7TUsVl83u7cmF/CYdI8YP93BEicjwFI0/rU/aQvt96tLja3SzVqNdtKr5VDXUI
         a5J21xYtzSqw+3o/+euKZCM3shHvkE8YQpHO0=
Received: by 10.86.53.8 with SMTP id b8mr3077660fga.58.1227629399938;
        Tue, 25 Nov 2008 08:09:59 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Tue, 25 Nov 2008 08:09:59 -0800 (PST)
Message-ID: <359a92830811250809t5b2cf63cma82ebb5bc8a680c3@mail.gmail.com>
Date: Tue, 25 Nov 2008 11:09:59 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzer
In-Reply-To: <8c4e68610811250757m1c0d1a04rc09e27b891b2f273@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8588_30097937.1227629399917"
References: <68959F25CDEBCB4F917D5A253291D73E09DCAAA19F@BLRKECMBX06.ad.infosys.com>
	 <8c4e68610811250757m1c0d1a04rc09e27b891b2f273@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8588_30097937.1227629399917
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hmmmm, how would you do this without open/closing your
IndexWriter around different types of documents? And as far
as querying is concerned, I doubt the input would be a file, so
one of the canned analyzers should do. Although "care should
be taken <G>"....

Best
Erick

On Tue, Nov 25, 2008 at 10:57 AM, Ian Lea <ian.lea@gmail.com> wrote:

> Yes, you can.  But it is generally best to use the same analyzer for
> indexing and for searching so, assuming that you want searches to find
> matches in files of whatever type, I'd recommend pre-processing the
> files to a common text format before indexing and then using the same
> analyzer for all of them.
>
>
> --
> Ian.
>
>
> On Tue, Nov 25, 2008 at 3:40 PM, Allahbaksh Mohammedali Asadullah
> <Allahbaksh_Asadullah@infosys.com> wrote:
> > HI All,
> > I am indexing a set file type (html, js,jsp,xml etc). All the file type
> have a common field called as text. This field contains all the file data.
> Can I have different analyzer for depending upon file type.
> >
> > Note: I am indexing all file type with same indexer.
> >
> > Regards,
> > Allahbaksh
> >
> > Allahbaksh Mohammedali Asadullah
> >
> > http://allahbaksh.blogspot.com<http://allahbaksh.blogspot.com/>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8588_30097937.1227629399917--

From java-user-return-37358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 16:43:17 2008
Return-Path: <java-user-return-37358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36078 invoked from network); 25 Nov 2008 16:43:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 16:43:17 -0000
Received: (qmail 745 invoked by uid 500); 25 Nov 2008 16:43:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 713 invoked by uid 500); 25 Nov 2008 16:43:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 702 invoked by uid 99); 25 Nov 2008 16:43:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 08:43:20 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a16.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 16:41:54 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a16.g.dreamhost.com (Postfix) with ESMTP id 6F62C7B2B3
	for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 08:42:07 -0800 (PST)
Message-Id: <16A61C17-E687-493A-9022-E1104C1447FB@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <779AEF66-AFE4-46FB-81F5-A74F4AE2D301@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Which is faster/better
Date: Tue, 25 Nov 2008 11:42:07 -0500
References: <492B92B2.9010006@teamware.com> <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com> <682ED89D-DF14-48A7-A144-D3EE40CEB0D0@apache.org> <779AEF66-AFE4-46FB-81F5-A74F4AE2D301@mikemccandless.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 25, 2008, at 10:46 AM, Michael McCandless wrote:

>> If you already have the docId, would you need to/want to do delete- 
>> by-Query or even delete-by-Term?  Isn't delete-by-id a lot lighter  
>> weight since it only marks the the doc as deleted, where as d-b-Q  
>> can potentially force a flush, etc?
>
> I guess the question is how you got that docID in the first place?  If
> you got it by running a query, and deleting all docIDs that are
> returned, then you could dBQ instead?

User does a search.  Gets back a set of docs.  Picks docs to delete,  
deletes them.

>
>
> Lucene's (IndexWriter's) dbQ doesn't force a flush: it's buffered just
> like other deletes and then applied in bulk at certain times.  When
> autoCommit is false, currently the deletes are applied when a
> merge wants to start (ie not at each segment flush).  Or, if you call
> commit().

I was just going based of the code of the two:  In the IndexReader,  
all it's doing is marking a bit in a bit vector, right?  Whereas in  
the IndexWriter, it's checking if it's a time to flush, etc. 
  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 17:17:30 2008
Return-Path: <java-user-return-37359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56049 invoked from network); 25 Nov 2008 17:17:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 17:17:29 -0000
Received: (qmail 55643 invoked by uid 500); 25 Nov 2008 17:17:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55609 invoked by uid 500); 25 Nov 2008 17:17:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55598 invoked by uid 99); 25 Nov 2008 17:17:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 09:17:33 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.217.10] (HELO mail-gx0-f10.google.com) (209.85.217.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 17:16:06 +0000
Received: by gxk3 with SMTP id 3so84752gxk.5
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 09:15:50 -0800 (PST)
Received: by 10.90.91.2 with SMTP id o2mr2822617agb.121.1227633350273;
        Tue, 25 Nov 2008 09:15:50 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 18sm6643976agb.12.2008.11.25.09.15.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 25 Nov 2008 09:15:49 -0800 (PST)
Message-Id: <301DE36C-06CC-403E-AFA4-B189EA7BFBBF@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <16A61C17-E687-493A-9022-E1104C1447FB@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Which is faster/better
Date: Tue, 25 Nov 2008 12:15:47 -0500
References: <492B92B2.9010006@teamware.com> <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com> <682ED89D-DF14-48A7-A144-D3EE40CEB0D0@apache.org> <779AEF66-AFE4-46FB-81F5-A74F4AE2D301@mikemccandless.com> <16A61C17-E687-493A-9022-E1104C1447FB@apache.org>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Grant Ingersoll wrote:

> On Nov 25, 2008, at 10:46 AM, Michael McCandless wrote:
>
>>> If you already have the docId, would you need to/want to do delete- 
>>> by-Query or even delete-by-Term?  Isn't delete-by-id a lot lighter  
>>> weight since it only marks the the doc as deleted, where as d-b-Q  
>>> can potentially force a flush, etc?
>>
>> I guess the question is how you got that docID in the first place?   
>> If
>> you got it by running a query, and deleting all docIDs that are
>> returned, then you could dBQ instead?
>
> User does a search.  Gets back a set of docs.  Picks docs to delete,  
> deletes them.

User means end-user, eg via a UI?  Probably delete-by-term would  
suffice here?

If user means developer who wrote some interesting programmatic logic  
that iterates through the docs returned by a search and deletes  
certain ones, that could be implemented as a Filter, right?  I guess  
it's sort of a hassle now since IndexWriter doesn't have a delete-by- 
Filter (you'd have to wrap it in ConstantScoreQuery, which is sort of  
silly).

>> Lucene's (IndexWriter's) dbQ doesn't force a flush: it's buffered  
>> just
>> like other deletes and then applied in bulk at certain times.  When
>> autoCommit is false, currently the deletes are applied when a
>> merge wants to start (ie not at each segment flush).  Or, if you call
>> commit().
>
> I was just going based of the code of the two:  In the IndexReader,  
> all it's doing is marking a bit in a bit vector, right?  Whereas in  
> the IndexWriter, it's checking if it's a time to flush, etc.


Sure, IndexWriter has to manage other things (flushing new segments,  
merging, etc).

But the actual mechanics of deletion (marking bits in the BitVector)  
are actually the same because under the hood, when IndexWriter applies  
the deletes, it's asking a [private] SegmentReader to do so.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 18:00:22 2008
Return-Path: <java-user-return-37360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95276 invoked from network); 25 Nov 2008 18:00:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 18:00:21 -0000
Received: (qmail 42700 invoked by uid 500); 25 Nov 2008 18:00:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42671 invoked by uid 500); 25 Nov 2008 18:00:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42660 invoked by uid 99); 25 Nov 2008 18:00:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 10:00:24 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ksshams@gmail.com designates 209.85.200.169 as permitted sender)
Received: from [209.85.200.169] (HELO wf-out-1314.google.com) (209.85.200.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 17:58:58 +0000
Received: by wf-out-1314.google.com with SMTP id 28so56994wfc.20
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 09:59:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=QoD1iXkfB2d6/ktWE+VoxmFUYLnCULoQ52UjmbVpGBs=;
        b=STNn3r/+GBm21D0GDirt5/y4VcwgppRAxxLR/cUFjRAF9LFNep6IVz3bgyX+oKI0Jj
         xQuBH6R/vzT0ZjMMHEDgMHv33IltfVJsJwSO+knAkcDXzmqSRM0DhNsnG18AaSkJ8kjc
         ivGQX5BHFWDDvtJMJvBWWKPMx1htvpSnN14n4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=WQlsJmxY9CySzb70Aegvdq9VT+DJKyCnbbTHj/3kqFqok+TCvf7Tms/97APY3st4Dw
         dUi5jklqPiYIsKKLfGYrjOGQCNahYh9Hr6z1amDWkhSeOYdHhpWVzMwFXkp/hEOvfcwP
         GEq9+erNRDK5o+yUbquNpOpLJ6T8w+t1OVC8k=
Received: by 10.115.76.1 with SMTP id d1mr2786457wal.97.1227635974096;
        Tue, 25 Nov 2008 09:59:34 -0800 (PST)
Received: by 10.114.234.6 with HTTP; Tue, 25 Nov 2008 09:59:34 -0800 (PST)
Message-ID: <6d6cf45b0811250959g1f8f00eetfd64506b5a4d771b@mail.gmail.com>
Date: Tue, 25 Nov 2008 09:59:34 -0800
From: "Khawaja Shams" <ksshams@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which is faster/better
In-Reply-To: <16A61C17-E687-493A-9022-E1104C1447FB@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4309_2253123.1227635974090"
References: <492B92B2.9010006@teamware.com>
	 <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com>
	 <682ED89D-DF14-48A7-A144-D3EE40CEB0D0@apache.org>
	 <779AEF66-AFE4-46FB-81F5-A74F4AE2D301@mikemccandless.com>
	 <16A61C17-E687-493A-9022-E1104C1447FB@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4309_2253123.1227635974090
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Tue, Nov 25, 2008 at 8:42 AM, Grant Ingersoll <gsingers@apache.org>wrote:

>
> On Nov 25, 2008, at 10:46 AM, Michael McCandless wrote:
>
>  If you already have the docId, would you need to/want to do
>>> delete-by-Query or even delete-by-Term?  Isn't delete-by-id a lot lighter
>>> weight since it only marks the the doc as deleted, where as d-b-Q can
>>> potentially force a flush, etc?
>>>
>>
>> I guess the question is how you got that docID in the first place?  If
>> you got it by running a query, and deleting all docIDs that are
>> returned, then you could dBQ instead?
>>
>
> User does a search.  Gets back a set of docs.  Picks docs to delete,
> deletes them.


Grant, can we assume that the document id will remain consistent from the
time user obtained the result and when they click delete? I was under the
impression that the document ids can change on optimize, etc.

>
>
>
>>
>> Lucene's (IndexWriter's) dbQ doesn't force a flush: it's buffered just
>> like other deletes and then applied in bulk at certain times.  When
>> autoCommit is false, currently the deletes are applied when a
>> merge wants to start (ie not at each segment flush).  Or, if you call
>> commit().
>>
>
> I was just going based of the code of the two:  In the IndexReader, all
> it's doing is marking a bit in a bit vector, right?  Whereas in the
> IndexWriter, it's checking if it's a time to flush, etc.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4309_2253123.1227635974090--

From java-user-return-37361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 19:17:52 2008
Return-Path: <java-user-return-37361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42441 invoked from network); 25 Nov 2008 19:17:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 19:17:52 -0000
Received: (qmail 67391 invoked by uid 500); 25 Nov 2008 19:17:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67359 invoked by uid 500); 25 Nov 2008 19:17:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67348 invoked by uid 99); 25 Nov 2008 19:17:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 11:17:54 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 19:16:28 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 38436161601
	for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 11:17:12 -0800 (PST)
Message-Id: <8FB1EF34-61F1-44E0-866F-0A8891AC97AA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <6d6cf45b0811250959g1f8f00eetfd64506b5a4d771b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Which is faster/better
Date: Tue, 25 Nov 2008 14:17:12 -0500
References: <492B92B2.9010006@teamware.com> <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com> <682ED89D-DF14-48A7-A144-D3EE40CEB0D0@apache.org> <779AEF66-AFE4-46FB-81F5-A74F4AE2D301@mikemccandless.com> <16A61C17-E687-493A-9022-E1104C1447FB@apache.org> <6d6cf45b0811250959g1f8f00eetfd64506b5a4d771b@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On Nov 25, 2008, at 12:59 PM, Khawaja Shams wrote:

> On Tue, Nov 25, 2008 at 8:42 AM, Grant Ingersoll  
> <gsingers@apache.org>wrote:
>
>>
>> On Nov 25, 2008, at 10:46 AM, Michael McCandless wrote:
>>
>> If you already have the docId, would you need to/want to do
>>>> delete-by-Query or even delete-by-Term?  Isn't delete-by-id a lot  
>>>> lighter
>>>> weight since it only marks the the doc as deleted, where as d-b-Q  
>>>> can
>>>> potentially force a flush, etc?
>>>>
>>>
>>> I guess the question is how you got that docID in the first  
>>> place?  If
>>> you got it by running a query, and deleting all docIDs that are
>>> returned, then you could dBQ instead?
>>>
>>
>> User does a search.  Gets back a set of docs.  Picks docs to delete,
>> deletes them.
>
>
> Grant, can we assume that the document id will remain consistent  
> from the
> time user obtained the result and when they click delete? I was  
> under the
> impression that the document ids can change on optimize, etc.


That's up to your business logic to determine.  The id is consistent  
for the life of the IdxReader.  Whether you change your reader or not,  
is up to you.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 20:31:14 2008
Return-Path: <java-user-return-37362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64273 invoked from network); 25 Nov 2008 20:31:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 20:31:14 -0000
Received: (qmail 74974 invoked by uid 500); 25 Nov 2008 20:31:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74926 invoked by uid 500); 25 Nov 2008 20:31:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74915 invoked by uid 99); 25 Nov 2008 20:31:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 12:31:18 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 209.85.132.247 as permitted sender)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 20:29:52 +0000
Received: by an-out-0708.google.com with SMTP id b2so80976ana.5
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 12:30:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=YRg5SOQMSFyPhmimNNpPM2PPw/j9fJgSaiI2QOrmF1o=;
        b=xGNaOGVskVB35AfsPkEugj65StRy/A0lFY4LGE/BpcFG9YsyTwfGkdhkI6yQjTkfUw
         YPOMTVZT9hMWAUoqBt2kLgnyytr7LLHaXV+hfcADgcfbc9N2QRu1j8NfYLzPOAnDQ7Jf
         wYg3Ih1SIjyIEnWnvnEq5lKgo5eqcjGL1aJEE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=uAz7/06hv9R+qYSQJ4Yo9Jod7wHsb4OfCzdV3W7TZmVICzOAWC5IpO7Ism3WR+q+3H
         XFHT8tiw4y9sYw4/QPlWKL0yXW6gIPXj5/m9oGaT9udRMuG2kAC5H0tivkTc0qkgxVbx
         s5N7khWIe8+xgtwKMJgMtsoXDhPpun/KFJERI=
Received: by 10.100.3.13 with SMTP id 13mr2561386anc.26.1227645037892;
        Tue, 25 Nov 2008 12:30:37 -0800 (PST)
Received: by 10.100.9.2 with HTTP; Tue, 25 Nov 2008 12:30:37 -0800 (PST)
Message-ID: <b63a7e9e0811251230p398287beoa15461200c5030b9@mail.gmail.com>
Date: Tue, 25 Nov 2008 15:30:37 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <b63a7e9e0811200904n197b2331udd40a964050323c0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9706_2320294.1227645037894"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <491B17D8.4090209@gmail.com>
	 <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
	 <491B2D13.8090006@gmail.com>
	 <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
	 <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
	 <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com>
	 <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
	 <492593C1.1040003@gmail.com>
	 <b63a7e9e0811200904n197b2331udd40a964050323c0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9706_2320294.1227645037894
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Just wanted to post a little follow-up here now that I've gotten through
implementing the system using payloads.  Execution times are phenomenal!
Things that took over a minute to run in my old system take fractions of a
second to run now.  I would also like to thank Mark for being very
responsive in fixing/patching some bugs I encountered along the way.

- Greg

------=_Part_9706_2320294.1227645037894--

From java-user-return-37363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Nov 25 22:33:01 2008
Return-Path: <java-user-return-37363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22290 invoked from network); 25 Nov 2008 22:33:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Nov 2008 22:33:00 -0000
Received: (qmail 7226 invoked by uid 500); 25 Nov 2008 22:33:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7195 invoked by uid 500); 25 Nov 2008 22:33:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7183 invoked by uid 99); 25 Nov 2008 22:33:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 14:33:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 22:31:38 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id mAPMUF3P009079
	for <java-user@lucene.apache.org>; Wed, 26 Nov 2008 00:30:15 +0200
Received: from mobile.teamware.com ([212.226.92.17]) by nimitz.teamw.com with ESMTP
	 id msfpuh+c; 26 Nov 2008 00:30:00 +0200
Message-ID: <492C7C6E.7070501@teamware.com>
Date: Wed, 26 Nov 2008 09:30:06 +1100
From: Antony Bowesman <adb@teamware.com>
User-Agent: Thunderbird 2.0.0.12 (Windows/20080213)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Which is faster/better
References: <492B92B2.9010006@teamware.com> <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com>
In-Reply-To: <E286E1BC-7828-4FE6-AFB7-CFBEB3F04BAD@mikemccandless.com>
X-TWG-MDN: never
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
> 
> If you have nothing open already, and all you want to do is delete
> certain documents and make a commit point, then using IndexReader vs
> IndexWriter should show very little difference in speed.

Thanks.  This use case can assume there may be nothing open.  I prefer 
IndexWriter as delete=write is a much clearer concept that delete=read...

> As of 2.4, IndexWriter now provides delete-by-Query, which I think
> ought to meet nearly all of the cases where someone wants to
> delete-by-docID using IndexReader.

Yes, that is an excellent addition.  Up to now, our only use case for 
delete-by-docId is to perform a dBQ and so far, we have been using your 
suggestion from last year about how to do delete documents for ALL terms.

Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 04:48:36 2008
Return-Path: <java-user-return-37364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70501 invoked from network); 26 Nov 2008 04:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 04:48:36 -0000
Received: (qmail 32890 invoked by uid 500); 26 Nov 2008 04:48:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32855 invoked by uid 500); 26 Nov 2008 04:48:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32844 invoked by uid 99); 26 Nov 2008 04:48:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Nov 2008 20:48:38 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of volenin@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 04:47:13 +0000
Received: by fg-out-1718.google.com with SMTP id l27so188894fgb.27
        for <java-user@lucene.apache.org>; Tue, 25 Nov 2008 20:47:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=aRvkJZipg7DV2LR4FmzRWiXWqqA+a7OfphF24OPkcCI=;
        b=OHPsKuauuvfEo3JCfu9cSvk5u6hdb8GIiDSXxDEQbfKtI+XHgfXJ92ds1tscie0RH6
         /xSynRa0WCcN3hELMxirXzsg1PWrBcUv3eZ66eILpT4QeJbmNurxeSEefpFih+ynjETK
         MiYRLxy56J7ySAuhIo6AXNy1MswCsa2Y24iYA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=JqydqGayWTRrroTDVeGcNisa/9BSihcWLCJ+WN+Q9ZXa2LhFHW1E1PX7PqNbC28Q9C
         HCzIpNi3NNWfnwSzN+wMrtfthbFDO8+PUxRwPhFGeX4xNlsnUoymEYNo9arqsZk7+3NK
         JA4kuP36aiyAZiNAWe9fAnQheN3++eHgMULWQ=
Received: by 10.86.84.18 with SMTP id h18mr3504657fgb.22.1227674878873;
        Tue, 25 Nov 2008 20:47:58 -0800 (PST)
Received: by 10.86.31.11 with HTTP; Tue, 25 Nov 2008 20:47:58 -0800 (PST)
Message-ID: <594203920811252047s5c4d5fb4n555e93413219f70e@mail.gmail.com>
Date: Tue, 25 Nov 2008 23:47:58 -0500
From: "Vlad Olenin" <volenin@gmail.com>
To: java-user@lucene.apache.org
Subject: calculating score - implementing your own 'Scorer' - how to?..
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1677_3801145.1227674878864"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1677_3801145.1227674878864
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I'm new to Lucene, so looking for some guidance as to the most efficient /
appropriate way to implement the following functionality.


* Each Document consists of a number of fields
* Each Field value, when indexed, can have different 'score' value
associated with it
** for simplicity, the score is presented as a bit mask
** each field value might have different score for the same field
** each field value might have different score for the different fields
*** eg, if doc1.field1.value = "val1, val2, val3", then index over field1
might have different score values associated with each value (here are
{docId.field, score} pairs):
***       val1 = {doc1.field1, '0011'},
***       val2 = {doc1.field1, '0101'},
***       val3 = {doc1.field1, '1011'}
* when the search is done, the final score for the document must be
calculated based on the bit combination of scores, eg:
** query = 'val1, val2', res = {doc1, '0001'}  (0011 & 0101)
** query = 'val1, val3', res = {doc1, '0011'}  (0011 & 1011)


How do I implement the above scoring logic? Thanks,

Vlad

------=_Part_1677_3801145.1227674878864--

From java-user-return-37365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 08:17:07 2008
Return-Path: <java-user-return-37365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53219 invoked from network); 26 Nov 2008 08:17:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 08:17:06 -0000
Received: (qmail 66232 invoked by uid 500); 26 Nov 2008 08:17:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66199 invoked by uid 500); 26 Nov 2008 08:17:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66188 invoked by uid 99); 26 Nov 2008 08:17:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 00:17:10 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of emreakgun@hotmail.com designates 65.55.111.80 as permitted sender)
Received: from [65.55.111.80] (HELO blu0-omc2-s5.blu0.hotmail.com) (65.55.111.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 08:15:41 +0000
Received: from BLU106-W14 ([65.55.111.71]) by blu0-omc2-s5.blu0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 26 Nov 2008 00:16:05 -0800
Message-ID: <BLU106-W1408374E771B8003F7EB26A60A0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_9a9e3dea-2a04-462a-892f-54dcfb857c12_"
X-Originating-IP: [212.175.40.242]
From: =?windows-1254?Q?emre_akg=FCn?= <emreakgun@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Building Query
Date: Wed, 26 Nov 2008 10:16:05 +0200
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 26 Nov 2008 08:16:05.0553 (UTC) FILETIME=[3A6F3210:01C94F9F]
X-Virus-Checked: Checked by ClamAV on apache.org

--_9a9e3dea-2a04-462a-892f-54dcfb857c12_
Content-Type: text/plain; charset="windows-1254"
Content-Transfer-Encoding: 8bit


Hi, i am newbie for lucene search. i have a bit complex query  like this:
 
SELECT mat.name matName,
FROM LIB_MATERIAL mat,
LIB_MAT_TYPE matType ,
LIB_SHELF shelf ,
LIB_ROOM room ,
FZA_PERSON res  
WHERE mat.shelf_id = shelf.record_id(+)"
AND shelf.room_id = room.record_id(+)"
AND mat.material_type_id = matType.record_id"
AND mat.reserved_by_id = res.record_id (+)"AND mat.lended_to_id = res.record_id (+) AND (contains(mat.ft_mat,'book%')>0) ->> full text query fro oracle  how can i write this query for luecene? what is method for adaptation my query with lucene?
_________________________________________________________________
Windows Live Messenger'n iin cretsiz 30 fadeyi ykle
http://www.livemessenger-emoticons.com/funfamily/tr-tr/
--_9a9e3dea-2a04-462a-892f-54dcfb857c12_--

From java-user-return-37366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 08:20:41 2008
Return-Path: <java-user-return-37366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55823 invoked from network); 26 Nov 2008 08:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 08:20:40 -0000
Received: (qmail 68802 invoked by uid 500); 26 Nov 2008 08:20:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68771 invoked by uid 500); 26 Nov 2008 08:20:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68760 invoked by uid 99); 26 Nov 2008 08:20:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 00:20:45 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 08:19:19 +0000
Received: by rv-out-0506.google.com with SMTP id f6so438828rvb.5
        for <java-user@lucene.apache.org>; Wed, 26 Nov 2008 00:19:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=KrFI3XSfCpbOVLNwDastSik66V2dPnmis9VRkhft2CU=;
        b=maiOew/XEctJg0ls6RDbQryFt3npC/HBaucr1xfTuzmKXADVRMy3mrUGO6/Xq/th4Q
         YyDrXGawUgxbs9u1MpbNm8zIrYKf36VnJVy0j0R03X/PFgEpF+rdNgOuJCDRIOGsy+GP
         uT1/U+Gs4ZwOgdCeC5lIxoEk6N5A6DeRVlwtA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=xc1h7XqnMxmLmj0gipyS7uOsbKJcj7GpoO340xBzy+a6HKQGlwYk8kUVxrIL4icCkR
         GJJVe+JNQWr5zxuyJz96Iuv7WOctu+a1SVKBJ+sMcmn1vbV4Vg80M6WNs5ge+Z1payx0
         vdb3cWc770eApDwq36LyySwIWcqfxnhapGJ0E=
Received: by 10.140.171.18 with SMTP id t18mr2835105rve.10.1227687595696;
        Wed, 26 Nov 2008 00:19:55 -0800 (PST)
Received: by 10.141.209.18 with HTTP; Wed, 26 Nov 2008 00:19:55 -0800 (PST)
Message-ID: <74f928500811260019s400c1168h31d2ffb106c9c47a@mail.gmail.com>
Date: Wed, 26 Nov 2008 10:19:55 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <b63a7e9e0811251230p398287beoa15461200c5030b9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14509_30898677.1227687595693"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
	 <491B2D13.8090006@gmail.com>
	 <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
	 <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
	 <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com>
	 <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
	 <492593C1.1040003@gmail.com>
	 <b63a7e9e0811200904n197b2331udd40a964050323c0@mail.gmail.com>
	 <b63a7e9e0811251230p398287beoa15461200c5030b9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14509_30898677.1227687595693
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
Can you please shed some light on how your final architecture looks like?
Do you manually use the PayloadSpanUtil for each document separately?
How did you solve the problem with phrase results?
Thanks in advance for your time,
Eran.
On Tue, Nov 25, 2008 at 10:30 PM, Greg Shackles <gshackles@gmail.com> wrote:

> Just wanted to post a little follow-up here now that I've gotten through
> implementing the system using payloads.  Execution times are phenomenal!
> Things that took over a minute to run in my old system take fractions of a
> second to run now.  I would also like to thank Mark for being very
> responsive in fixing/patching some bugs I encountered along the way.
>
> - Greg
>

------=_Part_14509_30898677.1227687595693--

From java-user-return-37367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 08:32:59 2008
Return-Path: <java-user-return-37367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60436 invoked from network); 26 Nov 2008 08:32:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 08:32:59 -0000
Received: (qmail 79380 invoked by uid 500); 26 Nov 2008 08:33:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79342 invoked by uid 500); 26 Nov 2008 08:33:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79331 invoked by uid 99); 26 Nov 2008 08:33:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 00:33:03 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 08:31:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L5For-0004e3-J6
	for java-user@lucene.apache.org; Wed, 26 Nov 2008 00:32:21 -0800
Message-ID: <20696670.post@talk.nabble.com>
Date: Wed, 26 Nov 2008 00:32:21 -0800 (PST)
From: Dora <julien.barret@gmail.com>
To: java-user@lucene.apache.org
Subject: RE: Indexing accented characters, then searching by any form
In-Reply-To: <000001c94f1a$85246a30$8f6d3e90$@cassinera@mercadolibre.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: julien.barret@gmail.com
References: <15412778.post@talk.nabble.com> <093AFA7C-B070-44E2-A4B4-63D8073658A4@gmail.com> <AAA63AE5-2F37-4009-BBB9-F528E025C2E7@gmail.com> <15415778.post@talk.nabble.com> <368FDCE1-1B94-4B99-A48D-AE296A559CAE@gmail.com> <20682548.post@talk.nabble.com> <000001c94f1a$85246a30$8f6d3e90$@cassinera@mercadolibre.com>
X-Virus-Checked: Checked by ClamAV on apache.org




Diego Cassinera wrote:
> 
> Are you sure you are creating the fields with Field.Index.ANALYZED ?
> 
> 

Yes, my fields are all ANALYZED. (One was ANALYZED_NO_NORMS but changing it
to ANALYZED did not solve the problem)

I checked with the debugger, and the analyzer I use tu update my indexer
does contain my ISOLatin1AccentFilter.

It looks like the indexWriter does not go through the tokenStream method.
Maybe this is because I perform an updateDocument() instead of a
addDocument() ?

Here is how I index a document: 
m_analyzer is an Analyzer returned by my getAnalyzer method
field and field value are a "key" to my document (a unique ID)
 
IndexWriter luceneIndexWriter = new IndexWriter(m_indexDir, m_analyzer,		
IndexWriter.MaxFieldLength.UNLIMITED);
luceneIndexWriter.updateDocument(new Term(field, fieldValue),
luceneDocument);

-- 
View this message in context: http://www.nabble.com/Indexing-accented-characters%2C-then-searching-by-any-form-tp15412778p20696670.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 08:35:33 2008
Return-Path: <java-user-return-37368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61263 invoked from network); 26 Nov 2008 08:35:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 08:35:33 -0000
Received: (qmail 82569 invoked by uid 500); 26 Nov 2008 08:35:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82540 invoked by uid 500); 26 Nov 2008 08:35:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82529 invoked by uid 99); 26 Nov 2008 08:35:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 00:35:38 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 08:34:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L5FrM-0004jn-Tw
	for java-user@lucene.apache.org; Wed, 26 Nov 2008 00:34:56 -0800
Message-ID: <20696697.post@talk.nabble.com>
Date: Wed, 26 Nov 2008 00:34:56 -0800 (PST)
From: Albert Juhe <albertjuhe@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FIltering with booleanFilter
In-Reply-To: <8c4e68610811250405m2edcc209hfb79e594fe7ad892@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: albertjuhe@gmail.com
References: <20679609.post@talk.nabble.com> <8c4e68610811250405m2edcc209hfb79e594fe7ad892@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


If I use MUST, the sentence will be Code1 AND Code2 AND Code3.
I would like Code1 OR Code2 OR Code3. Each document have only one code.


Ian Lea wrote:
> 
> Hi
> 
> 
> Do you maybe need MUST rather than SHOULD?
> 
> 
> --
> Ian.
> 
> 
> On Tue, Nov 25, 2008 at 11:41 AM, Albert Juhe <albertjuhe@gmail.com>
> wrote:
>>
>> Hi,
>>
>> I'm trying to use the boolean filter, because after a search I want to
>> show
>> documents with a determinate code.
>>
>> codisFiltre="XX07_04141_00853#XX06_03002_00852#UX06_07019_02994"
>> String[] codi =codisFiltre.split('#');
>> booleanFilter = new BooleanFilter();
>>        for (int i = 0; i < codi.length; i++) {
>>            booleanFilter.add(new FilterClause(getTermsFilter("code",
>> codi[i]), BooleanClause.Occur.SHOULD));
>>        }
>>
>>  public TermsFilter getTermsFilter(String field, String text) {
>>        TermsFilter tf = new TermsFilter();
>>        tf.addTerm(new Term(field, text));
>>        return tf;
>>    }
>>
>> and I use it:
>>
>> hits = searcher.search(multiSearchQuery,booleanFilter, Sort.RELEVANCE);
>>
>> but nothing happens I get the same results with or without filter.
>> I can see in the recorset the filtered codes.
>>
>> What's wrong with the booleanFilter?
>>
>> Thank you,
>> Albert
>> --
>> View this message in context:
>> http://www.nabble.com/FIltering-with-booleanFilter-tp20679609p20679609.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/FIltering-with-booleanFilter-tp20679609p20696697.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 08:57:16 2008
Return-Path: <java-user-return-37369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69275 invoked from network); 26 Nov 2008 08:57:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 08:57:16 -0000
Received: (qmail 11243 invoked by uid 500); 26 Nov 2008 08:57:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11206 invoked by uid 500); 26 Nov 2008 08:57:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11195 invoked by uid 99); 26 Nov 2008 08:57:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 00:57:20 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 209.85.198.234 as permitted sender)
Received: from [209.85.198.234] (HELO rv-out-0506.google.com) (209.85.198.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 08:55:50 +0000
Received: by rv-out-0506.google.com with SMTP id f6so453992rvb.5
        for <java-user@lucene.apache.org>; Wed, 26 Nov 2008 00:56:36 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=WBZl4vIzCtCmsTLtaGEKCCCR4J1nhU1gdfrQUBHdBBw=;
        b=Wwa0cGrAsfKE8sCVr3FramP9bhZl3otc03dylAZKgu3ykNCu0nOjdXlJyWZrji/9Rj
         CRqPs9dByrc73tEz5eVNIjv2IqwMqa+2C0d3QOOytUbg71/TtWObka7dpNgU6lRYnOa5
         EC8Wbjv4ICteVuSGTA5jHkbowd7hl4k0i7OfI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=Yy0pD/azGI0Dv8xTXxTXc93mJLCD3EpUVNe0nb1FL+tBtWuxvuVvhY4gm7uXZ+nv1U
         1OohRZ4YRT+AbSWlErROn0HA1x8POwvqBeC/XrHEPA+lPpTtrMvgeUG+XSaKC/TSwnr0
         g0JqmzXqxnw8H94JBBnPKsdn8i4u7ih4BROCM=
Received: by 10.141.63.20 with SMTP id q20mr2825083rvk.213.1227689796802;
        Wed, 26 Nov 2008 00:56:36 -0800 (PST)
Received: by 10.141.153.6 with HTTP; Wed, 26 Nov 2008 00:56:36 -0800 (PST)
Message-ID: <295da8fe0811260056m15f61994sd1563ecffb438a12@mail.gmail.com>
Date: Wed, 26 Nov 2008 14:26:36 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FIltering with booleanFilter
In-Reply-To: <20696697.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16531_15109486.1227689796789"
References: <20679609.post@talk.nabble.com>
	 <8c4e68610811250405m2edcc209hfb79e594fe7ad892@mail.gmail.com>
	 <20696697.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16531_15109486.1227689796789
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

You can use MUST an the end.
   Using your code use as
codisFiltre="XX07_04141_00853#XX06_03002_00852#UX06_07019_02994"
String[] codi =codisFiltre.split('#');
*finalFilter = new BooleanFilter();*
booleanFilter = new BooleanFilter();
       for (int i = 0; i < codi.length; i++) {
           booleanFilter.add(new FilterClause(getTermsFilter("code",
codi[i]), BooleanClause.Occur.SHOULD));
       }
*finalFilter = (new FilterClause(booleanFilter, BooleanClause.Occur.MUST));*

 public TermsFilter getTermsFilter(String field, String text) {
       TermsFilter tf = new TermsFilter();
       tf.addTerm(new Term(field, text));
       return tf;
   }

and I use it:

hits = searcher.search(multiSearchQuery,*finalFilter*, Sort.RELEVANCE);


Hope this helps.

Prabin
toostep.com

On Wed, Nov 26, 2008 at 2:04 PM, Albert Juhe <albertjuhe@gmail.com> wrote:

>
> If I use MUST, the sentence will be Code1 AND Code2 AND Code3.
> I would like Code1 OR Code2 OR Code3. Each document have only one code.
>
>
> Ian Lea wrote:
> >
> > Hi
> >
> >
> > Do you maybe need MUST rather than SHOULD?
> >
> >
> > --
> > Ian.
> >
> >
> > On Tue, Nov 25, 2008 at 11:41 AM, Albert Juhe <albertjuhe@gmail.com>
> > wrote:
> >>
> >> Hi,
> >>
> >> I'm trying to use the boolean filter, because after a search I want to
> >> show
> >> documents with a determinate code.
> >>
> >> codisFiltre="XX07_04141_00853#XX06_03002_00852#UX06_07019_02994"
> >> String[] codi =codisFiltre.split('#');
> >> booleanFilter = new BooleanFilter();
> >>        for (int i = 0; i < codi.length; i++) {
> >>            booleanFilter.add(new FilterClause(getTermsFilter("code",
> >> codi[i]), BooleanClause.Occur.SHOULD));
> >>        }
> >>
> >>  public TermsFilter getTermsFilter(String field, String text) {
> >>        TermsFilter tf = new TermsFilter();
> >>        tf.addTerm(new Term(field, text));
> >>        return tf;
> >>    }
> >>
> >> and I use it:
> >>
> >> hits = searcher.search(multiSearchQuery,booleanFilter, Sort.RELEVANCE);
> >>
> >> but nothing happens I get the same results with or without filter.
> >> I can see in the recorset the filtered codes.
> >>
> >> What's wrong with the booleanFilter?
> >>
> >> Thank you,
> >> Albert
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/FIltering-with-booleanFilter-tp20679609p20679609.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/FIltering-with-booleanFilter-tp20679609p20696697.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_16531_15109486.1227689796789--

From java-user-return-37370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 09:48:54 2008
Return-Path: <java-user-return-37370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97741 invoked from network); 26 Nov 2008 09:48:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 09:48:51 -0000
Received: (qmail 69051 invoked by uid 500); 26 Nov 2008 09:48:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68949 invoked by uid 500); 26 Nov 2008 09:48:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68938 invoked by uid 99); 26 Nov 2008 09:48:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 01:48:55 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 09:47:28 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L5H0I-0007dJ-1T
	for java-user@lucene.apache.org; Wed, 26 Nov 2008 01:48:14 -0800
Message-ID: <20697741.post@talk.nabble.com>
Date: Wed, 26 Nov 2008 01:48:14 -0800 (PST)
From: "naveen.a" <naveen.verus@gmail.com>
To: java-user@lucene.apache.org
Subject: how to search for starts with multiple words in lucene
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: naveen.verus@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Below is a document in lucene
---------------------------------------------
Field   Value
---------------------------------------------
ID:1
110_a:library and information
---------------------------------------------
I need to search for starts with logic, below are the search cases for the
above document

------------------------------------------------------------------------------
Query                                             Result
------------------------------------------------------------------------------
110_a:l*                                           ID - 1
110_a:library*                                   ID - 1
110_a:library *                                  No Results
110_a:library a*                                No Results
110_a:"library a*"                              No Results
------------------------------------------------------------------------------
here, if i apply single word for starts with search, it is found,
but if i add any space after the first word, it is not found

so, how to apply the query to search for starts with multiple words
-- 
View this message in context: http://www.nabble.com/how-to-search-for-starts-with-multiple-words-in-lucene-tp20697741p20697741.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 12:45:05 2008
Return-Path: <java-user-return-37371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81192 invoked from network); 26 Nov 2008 12:45:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 12:45:04 -0000
Received: (qmail 93655 invoked by uid 500); 26 Nov 2008 12:45:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93618 invoked by uid 500); 26 Nov 2008 12:45:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93607 invoked by uid 99); 26 Nov 2008 12:45:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 04:45:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [220.227.179.21] (HELO Kecgate03.infosys.com) (220.227.179.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 12:43:43 +0000
X-TM-IMSS-Message-ID:<71771ad60005e7d8@Kecgate03.infosys.com>
Received: from blrkechub03.ad.infosys.com ([10.66.236.43]) by Kecgate03.infosys.com ([220.227.179.21]) with ESMTP (TREND IMSS SMTP Service 7.0; TLS: TLSv1/SSLv3,128bits,RC4-MD5) id 71771ad60005e7d8 ; Wed, 26 Nov 2008 18:04:03 +0530
Received: from BLRKECMBX06.ad.infosys.com ([10.66.236.32]) by
 blrkechub03.ad.infosys.com ([10.66.236.43]) with mapi; Wed, 26 Nov 2008
 18:03:51 +0530
From: Allahbaksh Mohammedali Asadullah <Allahbaksh_Asadullah@infosys.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 26 Nov 2008 18:00:59 +0530
Subject: RE: Analyzer
Thread-Topic: Analyzer
Thread-Index: AclPGCbE0+A+SUi+SGa2d4E3Rn9QIQAqq+9y
Message-ID: <68959F25CDEBCB4F917D5A253291D73E09DCAEBF0A@BLRKECMBX06.ad.infosys.com>
References: <68959F25CDEBCB4F917D5A253291D73E09DCAAA19F@BLRKECMBX06.ad.infosys.com>,<359a92830811250808n26844578vb6187b7b267e640c@mail.gmail.com>
In-Reply-To: <359a92830811250808n26844578vb6187b7b267e640c@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erik,
Thanks a lot for your reply. You are right I want different analyzer on sam=
e field depending upon the other fields in the document.

For Example
Doc1
Text:"Some text here"
type:html

Doc2
Text: "Some jsp text here"
type:jsp

Now depending upon the type I wanted to use different analyzer for extracti=
ng and searching. Is there any way to do this?

I am using the way which you suggested.=20

Warm Regards,
Allahbaksh

________________________________________
From: Erick Erickson [erickerickson@gmail.com]
Sent: Tuesday, November 25, 2008 9:38 PM
To: java-user@lucene.apache.org
Subject: Re: Analyzer

I'm assuming that you want a different analyzer to handle extracting
the relevant information to put into a "text" field of the Lucene document.
I know of no way you can attach different analyzers to a single field.
You can certainly attach different analyzers to *different* fields...

The first thing I'd try would be to write your own analyzer that keeps
track of what kind of file it's currently analyzing and knows how to
"do the right thing" to extract the next token for the text field.

A cruder way would be to detect the type of document yourself,
extract the text into a string (or some such) then feed that into
your document.

Best
Erick


On Tue, Nov 25, 2008 at 10:40 AM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

> HI All,
> I am indexing a set file type (html, js,jsp,xml etc). All the file type
> have a common field called as text. This field contains all the file data=
.
> Can I have different analyzer for depending upon file type.
>
> Note: I am indexing all file type with same indexer.
>
> Regards,
> Allahbaksh
>
> Allahbaksh Mohammedali Asadullah
>
> http://allahbaksh.blogspot.com<http://allahbaksh.blogspot.com/>
>
>
>
>
> **************** CAUTION - Disclaimer *****************
> This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> solely
> for the use of the addressee(s). If you are not the intended recipient,
> please
> notify the sender by e-mail and delete the original message. Further, you
> are not
> to copy, disclose, or distribute this e-mail or its contents to any other
> person and
> any such actions are unlawful. This e-mail may contain viruses. Infosys h=
as
> taken
> every reasonable precaution to minimize this risk, but is not liable for
> any damage
> you may sustain as a result of any virus in this e-mail. You should carry
> out your
> own virus checks before opening the e-mail or attachment. Infosys reserve=
s
> the
> right to monitor and review the content of all messages sent to or from
> this e-mail
> address. Messages sent to or from this e-mail address may be stored on th=
e
> Infosys e-mail system.
> ***INFOSYS******** End of Disclaimer ********INFOSYS***
>=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 13:37:25 2008
Return-Path: <java-user-return-37372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98074 invoked from network); 26 Nov 2008 13:37:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 13:37:25 -0000
Received: (qmail 58938 invoked by uid 500); 26 Nov 2008 13:37:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58792 invoked by uid 500); 26 Nov 2008 13:37:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58781 invoked by uid 99); 26 Nov 2008 13:37:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 05:37:27 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 74.125.78.26 as permitted sender)
Received: from [74.125.78.26] (HELO ey-out-2122.google.com) (74.125.78.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 13:35:56 +0000
Received: by ey-out-2122.google.com with SMTP id 6so200574eyi.53
        for <java-user@lucene.apache.org>; Wed, 26 Nov 2008 05:36:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=JcRY1lDfbvOysdYpvWrW8+3tSZyVJ3aPyG8KgwkVI9U=;
        b=EFauuys9HgKn+DdlAzhd7muO+ss/nuqkMuM8KoYVYqvK102DGtLDq9ROkvKqLT1sqy
         RubVGhJXSSHbsx8hlbhru17HIhZAQYZ+IT6NwNACRbwS1CB+dC7Vg5QKuIQbv9YPRv54
         d+G4TxE0SPdJa3I1tiaio51Pe8kLi71LYwWvM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=vLxd4HgoyEh6wgJGXENTTgyXaqb3dWRSnAkRRfj8iNI57hJyAYNykWw0Gv/l6JdpzG
         zd0S6a0QCHJg3hSoc+97/+4U5NnwgRYeH20H/1wKiGouyHfEKbNzsE8u/J30kel09q6k
         ojA0G4Djv0xcE9zp6x6d7kbEg9SbmX9ihiQKM=
Received: by 10.86.80.5 with SMTP id d5mr3820742fgb.7.1227706601321;
        Wed, 26 Nov 2008 05:36:41 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Wed, 26 Nov 2008 05:36:41 -0800 (PST)
Message-ID: <359a92830811260536k25a7f959h92246d4a67fe923e@mail.gmail.com>
Date: Wed, 26 Nov 2008 08:36:41 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Building Query
In-Reply-To: <BLU106-W1408374E771B8003F7EB26A60A0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20858_31213097.1227706601301"
References: <BLU106-W1408374E771B8003F7EB26A60A0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20858_31213097.1227706601301
Content-Type: text/plain; charset=ISO-8859-9
Content-Transfer-Encoding: base64
Content-Disposition: inline

RG9uJ3Qgd3JpdGUgdGhpcyBxdWVyeSBpbiBsdWNlbmUgPEc+Li4uLiBTdGVwIGJhY2sgYW5kCnRh
a2UgYSBkZWVwIGJyZWF0aCBhbmQgdGFrZSBvZmYgeW91ciBkYXRhYmFzZSBoYXQuCgpMdWNlbmUg
aXMgTk9UIGEgUkRCTVMsIGl0IGlzIGEgdGV4dCBzZWFyY2ggZW5naW5lLiBZb3UnbGwKZHJpdmUg
eW91cnNlbGYgY3JhenkgdHJ5aW5nIHRvIG1ha2UgTHVjZW5lIGludG8gb25lLiBBTkQKeW91J2xs
IGJlIHZlcnkgZGlzc2F0aXNmaWVkIHdpdGggdGhlIHJlc3VsdHMuCgpJbnN0ZWFkLCB0aGluayBv
ZiBob3cgeW91IGNhbiBpbmRleCB5b3VyIGRhdGEgdG8gYXZvaWQgdGhlCndob2xlIGNvbmNlcHQg
b2Ygam9pbnMgYnkgZGUtbm9ybWFsaXppbmcgeW91ciBkYXRhIGFuZApkb2luZyBzaW1wbGUgdGV4
dCBzZWFyY2hlcywgYWxiZWl0IG9uIGRpZmZlcmVudCBmaWVsZHMuCgpPciBzZWFyY2ggYmFjayB0
aHJvdWdoIHRoZSBsaXN0IGZvciBhbnkgcG9zdHMgZnJvbSBNYXJjZWxvCk9jaG9hIHdobydzIGRv
bmUgc29tZSB2ZXJ5IGludGVyZXN0aW5nIHRoaW5ncyB3aXRoIEx1Y2VuZQphbmQgT3JhY2xlIGRh
dGFiYXNlcywgd2hpY2ggKm1heSogaGVscCAoYnV0IEkgYWRtaXQgSQpkb24ndCByZWFsbHkgdW5k
ZXJzdGFuZCB0aGUgZGV0YWlscykuCgpPciBhc2sgd2hldGhlciB3aGF0IHlvdSByZWFsbHkgd2Fu
dCBpcyBhIGh5YnJpZCBzb2x1dGlvbgp3aGVyZSB5b3UgaW5kZXggdGhlIHRleHQgZGF0YSBpbiBM
dWNlbmUgYW5kIGtlZXAgdGhlCnJlbGF0aW9uYWwgZGF0YSBpbiB0aGUgZGF0YWJhc2UuCgpPciBz
ZWFyY2ggdGhlIG1haWwgYXJjaGl2ZSBhdDoKCmh0dHA6Ly93d3cuZ29zc2FtZXItdGhyZWFkcy5j
b20vbGlzdHMvbHVjZW5lL2phdmEtdXNlci8KCmZvciAiZGF0YWJhc2UiIGFuZCByZWFkIHRoZSBt
YW55IHBvc3RzIHRoYXQgaGF2ZSBhZGRyZXNzZWQKdHJ5aW5nIHRvIHVzZSBMdWNlbmUgdG8gd29y
ayB3aXRoIGRhdGEgZnJvbSBhbiBSREJNUy4KCkJlc3QKRXJpY2sKCjIwMDgvMTEvMjYgZW1yZSBh
a2f8biA8ZW1yZWFrZ3VuQGhvdG1haWwuY29tPgoKPgo+IEhpLCBpIGFtIG5ld2JpZSBmb3IgbHVj
ZW5lIHNlYXJjaC4gaSBoYXZlIGEgYml0IGNvbXBsZXggcXVlcnkgIGxpa2UgdGhpczoKPgo+IFNF
TEVDVCBtYXQubmFtZSBtYXROYW1lLAo+IEZST00gTElCX01BVEVSSUFMIG1hdCwKPiBMSUJfTUFU
X1RZUEUgbWF0VHlwZSAsCj4gTElCX1NIRUxGIHNoZWxmICwKPiBMSUJfUk9PTSByb29tICwKPiBG
WkFfUEVSU09OIHJlcwo+IFdIRVJFIG1hdC5zaGVsZl9pZCA9IHNoZWxmLnJlY29yZF9pZCgrKSIK
PiBBTkQgc2hlbGYucm9vbV9pZCA9IHJvb20ucmVjb3JkX2lkKCspIgo+IEFORCBtYXQubWF0ZXJp
YWxfdHlwZV9pZCA9IG1hdFR5cGUucmVjb3JkX2lkIgo+IEFORCBtYXQucmVzZXJ2ZWRfYnlfaWQg
PSByZXMucmVjb3JkX2lkICgrKSJBTkQgbWF0LmxlbmRlZF90b19pZCA9Cj4gcmVzLnJlY29yZF9p
ZCAoKykgQU5EIChjb250YWlucyhtYXQuZnRfbWF0LCdib29rJScpPjApIC0+PiBmdWxsIHRleHQg
cXVlcnkKPiBmcm8gb3JhY2xlICBob3cgY2FuIGkgd3JpdGUgdGhpcyBxdWVyeSBmb3IgbHVlY2Vu
ZT8gd2hhdCBpcyBtZXRob2QgZm9yCj4gYWRhcHRhdGlvbiBteSBxdWVyeSB3aXRoIGx1Y2VuZT8K
PiBfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwo+IFdpbmRvd3MgTGl2ZSBNZXNzZW5nZXIn/W4gaedpbiDcY3JldHNpeiAzMCDd
ZmFkZXlpIHn8a2xlCj4gaHR0cDovL3d3dy5saXZlbWVzc2VuZ2VyLWVtb3RpY29ucy5jb20vZnVu
ZmFtaWx5L3RyLXRyLwo=
------=_Part_20858_31213097.1227706601301--

From java-user-return-37373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 13:47:22 2008
Return-Path: <java-user-return-37373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4452 invoked from network); 26 Nov 2008 13:47:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 13:47:22 -0000
Received: (qmail 83255 invoked by uid 500); 26 Nov 2008 13:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82969 invoked by uid 500); 26 Nov 2008 13:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82958 invoked by uid 99); 26 Nov 2008 13:47:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 05:47:26 -0800
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 13:45:57 +0000
Received: by nf-out-0910.google.com with SMTP id g16so278389nfd.15
        for <java-user@lucene.apache.org>; Wed, 26 Nov 2008 05:46:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=sA2LYuOCH0GL3K6X5TzQL9nvXq15HhkMIY7CIMercP4=;
        b=thOZU+/9yV9BqlBed6DnJ9neWyINn7QRU5c4OwH/bLxnDdtP3XA5WhyB3wbX5uk+s7
         xluxhfWYAbqWobp/arapWOcP+9UNKhtk2h9kJcHhB73TtNUYwRr4sKRMTuT9DveyuAiv
         5M5CGq9+v/loSWebfVGCKiNYXZYARF80GX38I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=OfSKW6zYDUkGIC/HDSFSHJ2+SYUUdCu8Xo739yijLxkf51P+dDa+pn4nKcPkjvGgRO
         oQHeUECrUq6ccnMP4b3Kmqxg1WwrrE3M8Cem7hG6oe4wmYEQQdrAyBqGl6tS/qbkAyw/
         TYaocJZEz0M6A9buNcKkDgGZ5+LFXs6teFN6U=
Received: by 10.86.94.11 with SMTP id r11mr3801982fgb.53.1227707202919;
        Wed, 26 Nov 2008 05:46:42 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Wed, 26 Nov 2008 05:46:42 -0800 (PST)
Message-ID: <359a92830811260546t29604be6p20f54cadc5a2465c@mail.gmail.com>
Date: Wed, 26 Nov 2008 08:46:42 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to search for starts with multiple words in lucene
In-Reply-To: <20697741.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20906_10622393.1227707202890"
References: <20697741.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20906_10622393.1227707202890
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Your problem here is probably tokenization at query time.

Queries like 110_a:library a* would search field 110_a for
library and your default field for a*. You might try
+110a_:library +110a_:a*, but I doubt that's really
what you want since there's no guarantee that the terms
will be next to each other.

Note that phrase queries l don't go through the wildcard
parsers, so searching for "library a*" in quotes) won't do
what you want.

You might want to look at the SpanQuery family. It's unclear
whether you'd expect a hit on something that started in the
middle, but you can get around this by adding a synthetic
token at the start of each field you index then adding that to
each query. Something like:
doc.add("field", "$ <original text>", blah blah)
at index time and then add the "$" (or whatever) at query time
if you require that the match never hit in the middle.

Another possibility would be to index using something like
KeywordAnalyzer, but this assumes that you never want
to search for anything in that field that starts in the middle.

Best
Erick

On Wed, Nov 26, 2008 at 4:48 AM, naveen.a <naveen.verus@gmail.com> wrote:

>
> Hi,
>
> Below is a document in lucene
> ---------------------------------------------
> Field   Value
> ---------------------------------------------
> ID:1
> 110_a:library and information
> ---------------------------------------------
> I need to search for starts with logic, below are the search cases for the
> above document
>
>
> ------------------------------------------------------------------------------
> Query                                             Result
>
> ------------------------------------------------------------------------------
> 110_a:l*                                           ID - 1
> 110_a:library*                                   ID - 1
> 110_a:library *                                  No Results
> 110_a:library a*                                No Results
> 110_a:"library a*"                              No Results
>
> ------------------------------------------------------------------------------
> here, if i apply single word for starts with search, it is found,
> but if i add any space after the first word, it is not found
>
> so, how to apply the query to search for starts with multiple words
> --
> View this message in context:
> http://www.nabble.com/how-to-search-for-starts-with-multiple-words-in-lucene-tp20697741p20697741.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_20906_10622393.1227707202890--

From java-user-return-37374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 13:55:16 2008
Return-Path: <java-user-return-37374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10853 invoked from network); 26 Nov 2008 13:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 13:55:16 -0000
Received: (qmail 96475 invoked by uid 500); 26 Nov 2008 13:55:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96441 invoked by uid 500); 26 Nov 2008 13:55:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96430 invoked by uid 99); 26 Nov 2008 13:55:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 05:55:19 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 13:53:53 +0000
Received: by ug-out-1314.google.com with SMTP id c2so1538026ugf.23
        for <java-user@lucene.apache.org>; Wed, 26 Nov 2008 05:54:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=+auss2Bq5uo/c6+fHWhJh9U14DWw+fSAVb8UoYY9H4s=;
        b=n9jh1ce2E8Qa9HecHnxHkuW8SfvRCWwuiuP2GDmK5e8kcEqvogieGJ8nnhMgIPvL2V
         B7tKU8ALaoFQPCyLtoazrOuXffxNnceWlEkdus2S2NhDpVPGeBkoI0l2HMlfb5kN3N3P
         WOln+6T3mWxFlPQ7tKhME9fQBuYGLgfUBCSok=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=PGbk6hHb4if+Uj1PpIZW7WJR75r0kR+cCNLGAQ16Gaqch6Hc5sa1kf43apyQVGvYOE
         czFq2XV/XDCYfmNx/S3Rel8vLzDEo0mBYqz6VclubFc4VAIajHwY4hRV1q9HqC6q+lbA
         7RNsd1j5LTgMUr1oUSiTPx72l2bPauZHgxSeU=
Received: by 10.86.79.19 with SMTP id c19mr3827246fgb.66.1227707676962;
        Wed, 26 Nov 2008 05:54:36 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Wed, 26 Nov 2008 05:54:36 -0800 (PST)
Message-ID: <359a92830811260554n4e89729bk7dc8b2942745a036@mail.gmail.com>
Date: Wed, 26 Nov 2008 08:54:36 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Analyzer
In-Reply-To: <68959F25CDEBCB4F917D5A253291D73E09DCAEBF0A@BLRKECMBX06.ad.infosys.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20995_33001206.1227707676935"
References: <68959F25CDEBCB4F917D5A253291D73E09DCAAA19F@BLRKECMBX06.ad.infosys.com>
	 <359a92830811250808n26844578vb6187b7b267e640c@mail.gmail.com>
	 <68959F25CDEBCB4F917D5A253291D73E09DCAEBF0A@BLRKECMBX06.ad.infosys.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20995_33001206.1227707676935
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Why not index into different fields based upon the file type? That would be
MUCH easier and PerFieldAnalyzerWrapper would be your friend. For
example.....

Doc1
text_html: "some text here"
type: html

Doc2
text_jsp: "some jsp text here'
type: html

etc...

Now your PerFieldAnalyzerWrapper has your html extractor for the text_html
field and your jsp extractor for the text_jsp field.

Searching would require you to search across all your different types, but
that's do-able. Or you'd have to restrict your searching to one of the
text_* fields if you really only wanted to search that type.

But I still think you're not clear on the difference when searching. Your
search query analyzer will probably have no relation to your indexing
analyzer since the type of input is irrelevant to your query (I guess
anyway). There you're probably using one of the analyzers provided out of
the box.

Best
Erick


On Wed, Nov 26, 2008 at 7:30 AM, Allahbaksh Mohammedali Asadullah <
Allahbaksh_Asadullah@infosys.com> wrote:

> Hi Erik,
> Thanks a lot for your reply. You are right I want different analyzer on
> same field depending upon the other fields in the document.
>
> For Example
> Doc1
> Text:"Some text here"
> type:html
>
> Doc2
> Text: "Some jsp text here"
> type:jsp
>
> Now depending upon the type I wanted to use different analyzer for
> extracting and searching. Is there any way to do this?
>
> I am using the way which you suggested.
>
> Warm Regards,
> Allahbaksh
>
> ________________________________________
> From: Erick Erickson [erickerickson@gmail.com]
> Sent: Tuesday, November 25, 2008 9:38 PM
> To: java-user@lucene.apache.org
> Subject: Re: Analyzer
>
> I'm assuming that you want a different analyzer to handle extracting
> the relevant information to put into a "text" field of the Lucene document.
> I know of no way you can attach different analyzers to a single field.
> You can certainly attach different analyzers to *different* fields...
>
> The first thing I'd try would be to write your own analyzer that keeps
> track of what kind of file it's currently analyzing and knows how to
> "do the right thing" to extract the next token for the text field.
>
> A cruder way would be to detect the type of document yourself,
> extract the text into a string (or some such) then feed that into
> your document.
>
> Best
> Erick
>
>
> On Tue, Nov 25, 2008 at 10:40 AM, Allahbaksh Mohammedali Asadullah <
> Allahbaksh_Asadullah@infosys.com> wrote:
>
> > HI All,
> > I am indexing a set file type (html, js,jsp,xml etc). All the file type
> > have a common field called as text. This field contains all the file
> data.
> > Can I have different analyzer for depending upon file type.
> >
> > Note: I am indexing all file type with same indexer.
> >
> > Regards,
> > Allahbaksh
> >
> > Allahbaksh Mohammedali Asadullah
> >
> > http://allahbaksh.blogspot.com<http://allahbaksh.blogspot.com/>
> >
> >
> >
> >
> > **************** CAUTION - Disclaimer *****************
> > This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
> > solely
> > for the use of the addressee(s). If you are not the intended recipient,
> > please
> > notify the sender by e-mail and delete the original message. Further, you
> > are not
> > to copy, disclose, or distribute this e-mail or its contents to any other
> > person and
> > any such actions are unlawful. This e-mail may contain viruses. Infosys
> has
> > taken
> > every reasonable precaution to minimize this risk, but is not liable for
> > any damage
> > you may sustain as a result of any virus in this e-mail. You should carry
> > out your
> > own virus checks before opening the e-mail or attachment. Infosys
> reserves
> > the
> > right to monitor and review the content of all messages sent to or from
> > this e-mail
> > address. Messages sent to or from this e-mail address may be stored on
> the
> > Infosys e-mail system.
> > ***INFOSYS******** End of Disclaimer ********INFOSYS***
> >
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_20995_33001206.1227707676935--

From java-user-return-37375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 14:47:45 2008
Return-Path: <java-user-return-37375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40502 invoked from network); 26 Nov 2008 14:47:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 14:47:45 -0000
Received: (qmail 77857 invoked by uid 500); 26 Nov 2008 14:47:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77822 invoked by uid 500); 26 Nov 2008 14:47:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77811 invoked by uid 99); 26 Nov 2008 14:47:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 06:47:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 74.125.44.29 as permitted sender)
Received: from [74.125.44.29] (HELO yx-out-2324.google.com) (74.125.44.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 14:46:23 +0000
Received: by yx-out-2324.google.com with SMTP id 3so224569yxj.5
        for <java-user@lucene.apache.org>; Wed, 26 Nov 2008 06:47:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Xj1HwFOdMmMtbFT5AJ5okTQdSK4J7sAs5Icf2BqHVfk=;
        b=S2PKhRnkNiMkOYieA5KFgv8GSYESALe7OQp+99h6VwgoPmec+8NXwp9FUr+9rRoBjV
         rDEWKyOGuP+nGFckrWW1keSXWaX8MO+vML0ZzWcW1iP/4n5B/zKpyLaN35wEXbNTemqF
         kc311UMkjQlF2wJzYNnuSf9xneCZ24eU47Hrw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=eszzwvbqvVM0fRLGNF4UTtZ4J/1Z9TBT7RXwWZbdu23eHpVlR3rGrYbY7nTUHdstrn
         kQkwqWxpbP9erlC122lq99xEtUw3uHzIKHqkuAdmMA/GOzCxmhrebqIg/mjyj3H/jHHo
         to+5mE5jlDDxxhH03pLqOChdD/O/fXA4XzHKw=
Received: by 10.100.207.14 with SMTP id e14mr3087569ang.60.1227710828568;
        Wed, 26 Nov 2008 06:47:08 -0800 (PST)
Received: by 10.100.9.2 with HTTP; Wed, 26 Nov 2008 06:47:03 -0800 (PST)
Message-ID: <b63a7e9e0811260647q4136d923l528383b36cd7ff50@mail.gmail.com>
Date: Wed, 26 Nov 2008 09:47:03 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <74f928500811260019s400c1168h31d2ffb106c9c47a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17119_3385525.1227710823555"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <491B2D13.8090006@gmail.com>
	 <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
	 <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
	 <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com>
	 <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
	 <492593C1.1040003@gmail.com>
	 <b63a7e9e0811200904n197b2331udd40a964050323c0@mail.gmail.com>
	 <b63a7e9e0811251230p398287beoa15461200c5030b9@mail.gmail.com>
	 <74f928500811260019s400c1168h31d2ffb106c9c47a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17119_3385525.1227710823555
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sure, I'm happy to give some insight into this.  My index itself has a few
fields - one that uniquely identifies the page, one that stores all the text
on the page, and then some others to store characteristics.  At indexing
time, the text field for each document is manually created by concatenating
each word together, separated by spaces.  Then the IndexWriter runs the
document through a custom filter that attaches payloads to each token.  The
payloads here include all the attributes I need regarding that word, and
most importantly, the index of that word on the page.  The tricky part here
was that one of my "words" could map to more than one Lucene token, so I
first create a quick map from my words to which token they should correspond
to, by running each word through an Analyzer (StandardAnalyzer in my case).
This makes it easy to only attach the payload to the first token for each of
my words.

For searching, I pass the search query to a PayloadSpanUtil which gets the
payloads for every match throughout the entire index.  I take these results
and put them into a Collection of custom objects, and then sort them first
by page identifier, and then by index on the page.  Once I have this list, I
can quickly iterate through it to find the groupings of payloads that match
the search term (this also helps weed out the occasional bad result that
comes back).  I wasn't sure initially if this would be a performance hit but
it is very quick.  Basically what I do is tokenize the search string, then
concatenate all tokens together without spaces into one string.  Then when
iterating through I see if the word matches the start of the tokenized
string - if so, chop it off and keep going til the whole string is found.
Then repeat, and so on.  It's certainly not the most elegant solution but I
didn't see a better way since PSU doesn't group or sort on its own.

One other solution I might try if I have time is to take each document from
the original search, put them one at a time into a MemoryIndex and then let
PSU act on that.  I'm not sure if this would help/hurt performance but might
be worth trying.  I will also say to make sure you apply Mark's latest patch
(see the case here: https://issues.apache.org/jira/browse/LUCENE-1465) since
it fixed some important bugs I had come across.

I hope this made sense, I haven't finished my morning coffee yet so I can't
be too sure : )  Let me know if you have any more questions.

- Greg



On Wed, Nov 26, 2008 at 3:19 AM, Eran Sevi <eransevi@gmail.com> wrote:

> Hi,
> Can you please shed some light on how your final architecture looks like?
> Do you manually use the PayloadSpanUtil for each document separately?
> How did you solve the problem with phrase results?
> Thanks in advance for your time,
> Eran.
> On Tue, Nov 25, 2008 at 10:30 PM, Greg Shackles <gshackles@gmail.com>
> wrote:
>
> > Just wanted to post a little follow-up here now that I've gotten through
> > implementing the system using payloads.  Execution times are phenomenal!
> > Things that took over a minute to run in my old system take fractions of
> a
> > second to run now.  I would also like to thank Mark for being very
> > responsive in fixing/patching some bugs I encountered along the way.
> >
> > - Greg
> >
>

------=_Part_17119_3385525.1227710823555--

From java-user-return-37376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 15:52:23 2008
Return-Path: <java-user-return-37376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63751 invoked from network); 26 Nov 2008 15:52:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 15:52:23 -0000
Received: (qmail 322 invoked by uid 500); 26 Nov 2008 15:52:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 291 invoked by uid 500); 26 Nov 2008 15:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 279 invoked by uid 99); 26 Nov 2008 15:52:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 07:52:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 15:51:01 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.311.2; Wed, 26 Nov 2008 16:51:44 +0100
Subject: Query time document group boosting
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Wed, 26 Nov 2008 16:54:23 +0100
Message-ID: <1227714863.25256.38.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

We use Lucene at our library for indexing from different sources into
the same logical index. The sources are very diverse and are prioritized
differently at index-time with document boosts. However, different
groups of users (or individual users for that matter) have different
preferences for the relevancy of the sources, which clashes with
index-time boosting. Query-time tweaking would be preferable.


My coworker Mikkel Kamstrup Erlandsen had this bright and slightly scary
idea...

Suppose we have sources A-Z. For each document from the sources, we add
the term groupboost_<source>:dummy. All documents from source A has
groupboost_A:dummy, all documents from source B has groupboost_B:dummy
and so on.

Now, whenever the user enters a query, we parse it the normal way and
wrap it in a BooleanQuery where we add our groupterm_<source>:dummy as
TermQueries with boosts specified by the user (or more realistically
under the hood by the front-end for the user).

Example: Let's say we have a user that love all things from source A and
hates the ones from source C. The front-end knows this. The user enters
the query "foo" which expands to 
"foo OR groupboost_A:dummy^10 OR groupboost_C:dummy^0.1"
The result should be that there's a high probability that the first hits
will come from source A, unless there are significantly better matches
from other groups. Likewise hits from group C will probably be near the
end of the list of hits.

Presto! The user gets what he wants, practically no search-time penalty,
simple. One obvious limitation is that we don't want too many groups aka
sources for this, but in reality we're talking 10-30 groups, so I don't
see that as a problem.

So what's the scary part? I don't know, I just have a feeling that Here
Be Dragons. It seems that it should work without messing with ranking,
besides the specific boost of course, as all documents match exactly one
"groupboost_<source>:dummy"-query, but I would like to hear the opinion
of more seasoned Lucene users. Is it a sensible way to approach the
problem?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 19:23:03 2008
Return-Path: <java-user-return-37377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48882 invoked from network); 26 Nov 2008 19:23:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 19:23:03 -0000
Received: (qmail 8256 invoked by uid 500); 26 Nov 2008 19:23:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8219 invoked by uid 500); 26 Nov 2008 19:23:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8208 invoked by uid 99); 26 Nov 2008 19:23:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 11:23:06 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 19:21:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L5Pxx-0002Za-14
	for java-user@lucene.apache.org; Wed, 26 Nov 2008 11:22:25 -0800
Message-ID: <20707410.post@talk.nabble.com>
Date: Wed, 26 Nov 2008 11:22:25 -0800 (PST)
From: AlexElba <ramalex1@yahoo.com>
To: java-user@lucene.apache.org
Subject: Scoring issue
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramalex1@yahoo.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello ,
I have two document in my lucene index

Document<stored/uncompressed,indexed<tagId:5117>
stored/uncompressed<tagName:Wholesale Hot Dog Stand Equipment>
stored/uncompressed,indexed,tokenized<tagKey:wholesale hot dog stand
equipment> stored/uncompressed>

Document<stored/uncompressed,indexed<tagId:11274>
stored/uncompressed<tagName:Hot Dogs>
stored/uncompressed,indexed,tokenized<tagKey:hot dog meal>
stored/uncompressed,indexed,tokenized<tagKey:hot dog restaurant>
stored/uncompressed,indexed,tokenized<tagKey:hotdog>
stored/uncompressed,indexed,tokenized<tagKey:hot dog>
stored/uncompressed,indexed,tokenized<tagKey:hot dog dining>
stored/uncompressed,indexed,tokenized<tagKey:best hotdog>
stored/uncompressed,indexed,tokenized<tagKey:cuisine hot dog>
stored/uncompressed,indexed,tokenized<tagKey:hotdog stand>
stored/uncompressed,indexed,tokenized<tagKey:hotdog restaurant>
stored/uncompressed,indexed,tokenized<tagKey:hot dog grill>
stored/uncompressed,indexed,tokenized<tagKey:hot dog cuisine>
stored/uncompressed,indexed,tokenized<tagKey:hot dog stand>
stored/uncompressed,indexed,tokenized<tagKey:hot dog menu>
stored/uncompressed,indexed,tokenized<tagKey:hot dog shop>
stored/uncompressed,indexed,tokenized<tagKey:hotdog vendor>
stored/uncompressed,indexed,tokenized<tagKey:hotdog grill>>

and I am  searching for +tagKey:hot +tagKey:dog

which is exact match for 2nd document, but I am getting 1.0 score for first
document and 0.7 for second one.

I have custom similarity where  lengthNorm is (1.0 / tokenCount) others are
some consents 

why my first document is getting higher score?
-- 
View this message in context: http://www.nabble.com/Scoring-issue-tp20707410p20707410.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Nov 26 19:30:48 2008
Return-Path: <java-user-return-37378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51091 invoked from network); 26 Nov 2008 19:30:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Nov 2008 19:30:47 -0000
Received: (qmail 17915 invoked by uid 500); 26 Nov 2008 19:30:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17873 invoked by uid 500); 26 Nov 2008 19:30:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17862 invoked by uid 99); 26 Nov 2008 19:30:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 11:30:52 -0800
X-ASF-Spam-Status: No, hits=4.0 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 19:29:25 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L5Q5T-00034b-9l
	for java-user@lucene.apache.org; Wed, 26 Nov 2008 11:30:11 -0800
Message-ID: <20707534.post@talk.nabble.com>
Date: Wed, 26 Nov 2008 11:30:11 -0800 (PST)
From: AlexElba <ramalex1@yahoo.com>
To: java-user@lucene.apache.org
Subject: Re: how to search for starts with multiple words in lucene
In-Reply-To: <20697741.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ramalex1@yahoo.com
References: <20697741.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,
I think you can achieve your goal using StandardAnalyzer during indexing and
for search, and use WildcardQuery for Query I think it will work!!


naveen.a wrote:
> 
> Hi,
> 
> Below is a document in lucene
> ---------------------------------------------
> Field   Value
> ---------------------------------------------
> ID:1
> 110_a:library and information
> ---------------------------------------------
> I need to search for starts with logic, below are the search cases for the
> above document
> 
> ------------------------------------------------------------------------------
> Query                                             Result
> ------------------------------------------------------------------------------
> 110_a:l*                                           ID - 1
> 110_a:library*                                   ID - 1
> 110_a:library *                                  No Results
> 110_a:library a*                                No Results
> 110_a:"library a*"                              No Results
> ------------------------------------------------------------------------------
> here, if i apply single word for starts with search, it is found,
> but if i add any space after the first word, it is not found
> 
> so, how to apply the query to search for starts with multiple words
> 

-- 
View this message in context: http://www.nabble.com/how-to-search-for-starts-with-multiple-words-in-lucene-tp20697741p20707534.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 06:31:46 2008
Return-Path: <java-user-return-37379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84522 invoked from network); 27 Nov 2008 06:31:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 06:31:45 -0000
Received: (qmail 88703 invoked by uid 500); 27 Nov 2008 06:31:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88672 invoked by uid 500); 27 Nov 2008 06:31:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88661 invoked by uid 99); 27 Nov 2008 06:31:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 22:31:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 06:30:22 +0000
Received: by ey-out-2122.google.com with SMTP id 6so345048eyi.53
        for <java-user@lucene.apache.org>; Wed, 26 Nov 2008 22:30:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=WNj2sXKG4YjNU8ywSKzRmAPGLC3SYTAV3gEQc0ZcloA=;
        b=ozCS5i2BzplnKCjGSR8I9sbpqFwhlK1alnQEvY7gFw1So4mxdyf0XeOueglFayRa9z
         mS4OXQMLmq5HolvEFRiLyvlTPMFpD9Pe7k0RX/nVv0qXiAv2An2gsRljiNRZ/1Enr4HF
         VlcldVXG/yWfKOJcCNDJ67ECvG5d7MrLhi3pE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=FRNSwI7DzcCcZXvaherCli2i/a5mdRuGifd7BJnQF0dRiCtpi7CPBzpf5XCLEXHtU/
         RTMk5DAAQadfMvlGc/K2v5EZ5k2tBJJ0j5+lSqMtu+oomBwoEqIlpAFHqXHZDqfjh2nH
         euslW125MhxKZA9jTpVqH51xxpMF8APkox1/I=
Received: by 10.210.18.18 with SMTP id 18mr7035474ebr.71.1227767458070;
        Wed, 26 Nov 2008 22:30:58 -0800 (PST)
Received: from kodapan.lan (c150-155-70-80.bjare.net [80.70.155.150])
        by mx.google.com with ESMTPS id 34sm4765900nfu.24.2008.11.26.22.30.57
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 26 Nov 2008 22:30:57 -0800 (PST)
Message-Id: <B7D0017E-C6A1-4FB8-82A4-4509806062B6@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1227714863.25256.38.camel@pc286>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Query time document group boosting
Date: Thu, 27 Nov 2008 07:30:36 +0100
References: <1227714863.25256.38.camel@pc286>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

The most scary part is that that you will have to score each and every  
document that has a source, probably all of the documents in your  
corpus. So if you have a very large number of documents it might be a  
bit expensive. Also, appending this query for boost only means that  
you will get hits on documents that has nothing to do with the user  
query.

I think you are looking for CustomScoreQuery.


     karl

26 nov 2008 kl. 16.54 skrev Toke Eskildsen:

> We use Lucene at our library for indexing from different sources into
> the same logical index. The sources are very diverse and are  
> prioritized
> differently at index-time with document boosts. However, different
> groups of users (or individual users for that matter) have different
> preferences for the relevancy of the sources, which clashes with
> index-time boosting. Query-time tweaking would be preferable.
>
>
> My coworker Mikkel Kamstrup Erlandsen had this bright and slightly  
> scary
> idea...
>
> Suppose we have sources A-Z. For each document from the sources, we  
> add
> the term groupboost_<source>:dummy. All documents from source A has
> groupboost_A:dummy, all documents from source B has groupboost_B:dummy
> and so on.
>
> Now, whenever the user enters a query, we parse it the normal way and
> wrap it in a BooleanQuery where we add our groupterm_<source>:dummy as
> TermQueries with boosts specified by the user (or more realistically
> under the hood by the front-end for the user).
>
> Example: Let's say we have a user that love all things from source A  
> and
> hates the ones from source C. The front-end knows this. The user  
> enters
> the query "foo" which expands to
> "foo OR groupboost_A:dummy^10 OR groupboost_C:dummy^0.1"
> The result should be that there's a high probability that the first  
> hits
> will come from source A, unless there are significantly better matches
> from other groups. Likewise hits from group C will probably be near  
> the
> end of the list of hits.
>
> Presto! The user gets what he wants, practically no search-time  
> penalty,
> simple. One obvious limitation is that we don't want too many groups  
> aka
> sources for this, but in reality we're talking 10-30 groups, so I  
> don't
> see that as a problem.
>
> So what's the scary part? I don't know, I just have a feeling that  
> Here
> Be Dragons. It seems that it should work without messing with ranking,
> besides the specific boost of course, as all documents match exactly  
> one
> "groupboost_<source>:dummy"-query, but I would like to hear the  
> opinion
> of more seasoned Lucene users. Is it a sensible way to approach the
> problem?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 06:39:56 2008
Return-Path: <java-user-return-37380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87763 invoked from network); 27 Nov 2008 06:39:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 06:39:55 -0000
Received: (qmail 94672 invoked by uid 500); 27 Nov 2008 06:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94638 invoked by uid 500); 27 Nov 2008 06:40:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94627 invoked by uid 99); 27 Nov 2008 06:40:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Nov 2008 22:40:00 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.25 as permitted sender)
Received: from [74.125.78.25] (HELO ey-out-2122.google.com) (74.125.78.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 06:38:32 +0000
Received: by ey-out-2122.google.com with SMTP id 6so345638eyi.53
        for <java-user@lucene.apache.org>; Wed, 26 Nov 2008 22:39:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=PWFlr3NkUAoxfoe+Vz4ACOw8m5Mdj8Y7wKDrUeyLOWM=;
        b=I7pNj/HCfmcygFHIXbDNKPzo0J8eoCHj/oyKis4Mm37G1SjXHPAuk92+2J/QTNYfHW
         qlnYpddjunkR/uuHPd4luN7qKJvLREI7C/2g3S8WdsKYaXjdjdkJ8TvF/TcChSFnc1ln
         ihmXQyJ3gBQ5GBTN0cc+yxApy7K053gszN9IE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=nkeE1/RRgI+TZ9fkuDi3Aa2Z+lLDQY8asH3KqqntznxLpMSpFnWFsvhKlKAyrsMIVj
         ss7sBJI7AS2T+7Twss2dugrnCSSmiX2PY//MjGpFzBkTuB+cYhPR6hIvmSjLl7OfwMF2
         ggpw4xhHRUdAeVBiAhmktrjpmOMgGZHFG+FW0=
Received: by 10.210.125.7 with SMTP id x7mr7018711ebc.90.1227767957189;
        Wed, 26 Nov 2008 22:39:17 -0800 (PST)
Received: from kodapan.lan (c150-155-70-80.bjare.net [80.70.155.150])
        by mx.google.com with ESMTPS id f4sm4786174nfh.27.2008.11.26.22.39.15
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 26 Nov 2008 22:39:16 -0800 (PST)
Message-Id: <1425D183-B5F4-4092-A395-0B6EF0541F3A@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <20707410.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Scoring issue
Date: Thu, 27 Nov 2008 07:39:12 +0100
References: <20707410.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Alex,

if you have length normalization turned on then the length (the number  
of tokens and perhaps even the distance between the tokens) of the  
second document is much greater than the length of the first document.  
The length is the complete number of tokens in the field, i.e. if you  
add more than one field with the same name to a document these will be  
concatenated. This is why the first hit is a better match.

Try the Searcher#explain method for more details:

http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Searcher.html#explain(org.apache.lucene.search.Query,%20int)


    karl

26 nov 2008 kl. 20.22 skrev AlexElba:

>
> Hello ,
> I have two document in my lucene index
>
> Document<stored/uncompressed,indexed<tagId:5117>
> stored/uncompressed<tagName:Wholesale Hot Dog Stand Equipment>
> stored/uncompressed,indexed,tokenized<tagKey:wholesale hot dog stand
> equipment> stored/uncompressed>
>
> Document<stored/uncompressed,indexed<tagId:11274>
> stored/uncompressed<tagName:Hot Dogs>
> stored/uncompressed,indexed,tokenized<tagKey:hot dog meal>
> stored/uncompressed,indexed,tokenized<tagKey:hot dog restaurant>
> stored/uncompressed,indexed,tokenized<tagKey:hotdog>
> stored/uncompressed,indexed,tokenized<tagKey:hot dog>
> stored/uncompressed,indexed,tokenized<tagKey:hot dog dining>
> stored/uncompressed,indexed,tokenized<tagKey:best hotdog>
> stored/uncompressed,indexed,tokenized<tagKey:cuisine hot dog>
> stored/uncompressed,indexed,tokenized<tagKey:hotdog stand>
> stored/uncompressed,indexed,tokenized<tagKey:hotdog restaurant>
> stored/uncompressed,indexed,tokenized<tagKey:hot dog grill>
> stored/uncompressed,indexed,tokenized<tagKey:hot dog cuisine>
> stored/uncompressed,indexed,tokenized<tagKey:hot dog stand>
> stored/uncompressed,indexed,tokenized<tagKey:hot dog menu>
> stored/uncompressed,indexed,tokenized<tagKey:hot dog shop>
> stored/uncompressed,indexed,tokenized<tagKey:hotdog vendor>
> stored/uncompressed,indexed,tokenized<tagKey:hotdog grill>>
>
> and I am  searching for +tagKey:hot +tagKey:dog
>
> which is exact match for 2nd document, but I am getting 1.0 score  
> for first
> document and 0.7 for second one.
>
> I have custom similarity where  lengthNorm is (1.0 / tokenCount)  
> others are
> some consents
>
> why my first document is getting higher score?
> -- 
> View this message in context: http://www.nabble.com/Scoring-issue-tp20707410p20707410.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 09:13:54 2008
Return-Path: <java-user-return-37381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40310 invoked from network); 27 Nov 2008 09:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 09:13:54 -0000
Received: (qmail 10370 invoked by uid 500); 27 Nov 2008 09:13:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10325 invoked by uid 500); 27 Nov 2008 09:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10314 invoked by uid 99); 27 Nov 2008 09:13:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 01:13:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 09:12:31 +0000
Received: from [172.18.253.199] (172.18.253.199) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.311.2; Thu, 27 Nov 2008 10:13:15 +0100
Subject: Re: Query time document group boosting
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <B7D0017E-C6A1-4FB8-82A4-4509806062B6@gmail.com>
References: <1227714863.25256.38.camel@pc286>
	 <B7D0017E-C6A1-4FB8-82A4-4509806062B6@gmail.com>
Content-Type: text/plain
Organization: Statsbiblioteket
Date: Thu, 27 Nov 2008 10:15:58 +0100
Message-ID: <1227777358.25256.70.camel@pc286>
MIME-Version: 1.0
X-Mailer: Evolution 2.22.3.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2008-11-27 at 07:30 +0100, Karl Wettin wrote:
> The most scary part is that that you will have to score each and every  
> document that has a source, probably all of the documents in your  
> corpus.

I now see my query-logic was flawed. In order to avoid matching all
documents every time, the query would have to be
"foo AND (
  groupboost_A:dummy^10 OR 
  groupboost_B:dummy OR 
  groupboost_C:dummy^0.1 OR
  ... 
  groupboost_Z:dummy
)"

With that query, it seems that only documents matching foo will result
in a hit and be scored?

> So if you have a very large number of documents it might be a  
> bit expensive. Also, appending this query for boost only means that  
> you will get hits on documents that has nothing to do with the user  
> query.

Thanks for the correction. The first query was clearly bad.

> I think you are looking for CustomScoreQuery.

Possibly, but my understanding is too weak to see how I can avoid a
substantial performance-hit for the check for source?

Thanks,
Toke


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 10:03:22 2008
Return-Path: <java-user-return-37382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90102 invoked from network); 27 Nov 2008 10:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 10:03:22 -0000
Received: (qmail 63604 invoked by uid 500); 27 Nov 2008 10:03:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62691 invoked by uid 500); 27 Nov 2008 10:03:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62680 invoked by uid 99); 27 Nov 2008 10:03:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 02:03:26 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 10:01:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L5dhq-00012k-EU
	for java-user@lucene.apache.org; Thu, 27 Nov 2008 02:02:42 -0800
Message-ID: <20716392.post@talk.nabble.com>
Date: Thu, 27 Nov 2008 02:02:42 -0800 (PST)
From: Albert Juhe <albertjuhe@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FIltering with booleanFilter
In-Reply-To: <295da8fe0811260056m15f61994sd1563ecffb438a12@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: albertjuhe@gmail.com
References: <20679609.post@talk.nabble.com> <8c4e68610811250405m2edcc209hfb79e594fe7ad892@mail.gmail.com> <20696697.post@talk.nabble.com> <295da8fe0811260056m15f61994sd1563ecffb438a12@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Fantastic, now its working perfect.

Thank you,
Albert


prabin meitei wrote:
> 
> Hi,
> 
> You can use MUST an the end.
>    Using your code use as
> codisFiltre="XX07_04141_00853#XX06_03002_00852#UX06_07019_02994"
> String[] codi =codisFiltre.split('#');
> *finalFilter = new BooleanFilter();*
> booleanFilter = new BooleanFilter();
>        for (int i = 0; i < codi.length; i++) {
>            booleanFilter.add(new FilterClause(getTermsFilter("code",
> codi[i]), BooleanClause.Occur.SHOULD));
>        }
> *finalFilter = (new FilterClause(booleanFilter,
> BooleanClause.Occur.MUST));*
> 
>  public TermsFilter getTermsFilter(String field, String text) {
>        TermsFilter tf = new TermsFilter();
>        tf.addTerm(new Term(field, text));
>        return tf;
>    }
> 
> and I use it:
> 
> hits = searcher.search(multiSearchQuery,*finalFilter*, Sort.RELEVANCE);
> 
> 
> Hope this helps.
> 
> Prabin
> toostep.com
> 
> On Wed, Nov 26, 2008 at 2:04 PM, Albert Juhe <albertjuhe@gmail.com> wrote:
> 
>>
>> If I use MUST, the sentence will be Code1 AND Code2 AND Code3.
>> I would like Code1 OR Code2 OR Code3. Each document have only one code.
>>
>>
>> Ian Lea wrote:
>> >
>> > Hi
>> >
>> >
>> > Do you maybe need MUST rather than SHOULD?
>> >
>> >
>> > --
>> > Ian.
>> >
>> >
>> > On Tue, Nov 25, 2008 at 11:41 AM, Albert Juhe <albertjuhe@gmail.com>
>> > wrote:
>> >>
>> >> Hi,
>> >>
>> >> I'm trying to use the boolean filter, because after a search I want to
>> >> show
>> >> documents with a determinate code.
>> >>
>> >> codisFiltre="XX07_04141_00853#XX06_03002_00852#UX06_07019_02994"
>> >> String[] codi =codisFiltre.split('#');
>> >> booleanFilter = new BooleanFilter();
>> >>        for (int i = 0; i < codi.length; i++) {
>> >>            booleanFilter.add(new FilterClause(getTermsFilter("code",
>> >> codi[i]), BooleanClause.Occur.SHOULD));
>> >>        }
>> >>
>> >>  public TermsFilter getTermsFilter(String field, String text) {
>> >>        TermsFilter tf = new TermsFilter();
>> >>        tf.addTerm(new Term(field, text));
>> >>        return tf;
>> >>    }
>> >>
>> >> and I use it:
>> >>
>> >> hits = searcher.search(multiSearchQuery,booleanFilter,
>> Sort.RELEVANCE);
>> >>
>> >> but nothing happens I get the same results with or without filter.
>> >> I can see in the recorset the filtered codes.
>> >>
>> >> What's wrong with the booleanFilter?
>> >>
>> >> Thank you,
>> >> Albert
>> >> --
>> >> View this message in context:
>> >>
>> http://www.nabble.com/FIltering-with-booleanFilter-tp20679609p20679609.html
>> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/FIltering-with-booleanFilter-tp20679609p20696697.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/FIltering-with-booleanFilter-tp20679609p20716392.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 13:34:50 2008
Return-Path: <java-user-return-37383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19495 invoked from network); 27 Nov 2008 13:34:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 13:34:50 -0000
Received: (qmail 94260 invoked by uid 500); 27 Nov 2008 13:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94237 invoked by uid 500); 27 Nov 2008 13:34:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94163 invoked by uid 99); 27 Nov 2008 13:34:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 05:34:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [91.121.16.47] (HELO ns23917.ovh.net) (91.121.16.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 13:33:23 +0000
Received: (qmail 5679 invoked by uid 508); 27 Nov 2008 13:35:46 -0000
Received: from unknown (HELO ?192.168.1.44?) (88.182.17.109)
  by ns23917.ovh.net with AES256-SHA encrypted SMTP; 27 Nov 2008 13:35:46 -0000
Message-ID: <492EA1C8.8090007@spotter.com>
Date: Thu, 27 Nov 2008 14:34:00 +0100
From: David Causse <dcausse@spotter.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [OT] About stopwords
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Look at this google query : 
http://www.google.fr/search?q=%22HOW+at+at+of+a+A+a%22

What do you think about that concerning stop words?
Google has no stop words?

David.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 13:43:31 2008
Return-Path: <java-user-return-37384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24854 invoked from network); 27 Nov 2008 13:43:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 13:43:31 -0000
Received: (qmail 2996 invoked by uid 500); 27 Nov 2008 13:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2965 invoked by uid 500); 27 Nov 2008 13:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2954 invoked by uid 99); 27 Nov 2008 13:43:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 05:43:35 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of eransevi@gmail.com designates 209.85.198.225 as permitted sender)
Received: from [209.85.198.225] (HELO rv-out-0506.google.com) (209.85.198.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 13:42:09 +0000
Received: by rv-out-0506.google.com with SMTP id f6so1145988rvb.5
        for <java-user@lucene.apache.org>; Thu, 27 Nov 2008 05:42:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Gqi09kBFH0oYXnrk3IrXlR7+Nh0+qtwp9CMzIDXXzeE=;
        b=m9iv8JgGbN9y2ZQc10hn1nsZDh3R7geJCy3cY+v2xjRPR10ht0zjNBk2Szu+sFbCF1
         3fWFTP5kUaQdSQkseza7eWVhGQUmDpeZ3ptQVLpg5doIqz+U0BT3QGNRJDIMjleK3Gew
         Ee6D8OITAAc/drZ5E/RuPebGtf8O8WMrFaVI0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=HmW2euVHsuaCs54To3du4OofRljLvEdC5DlQGNRpeAyTHRnoArRW9HQTeIHdNr/JFT
         8Ps9g/Ywo04bRuu1UkiE+EPDLbSiSxbJdD57OWf3Fmw4OodZhDoGWXhbXXL1lVCUAM9j
         wfxz7xspuO+IK7YzIynA0vvuUhl28Vef/pxQ0=
Received: by 10.140.133.10 with SMTP id g10mr227994rvd.2.1227793375974;
        Thu, 27 Nov 2008 05:42:55 -0800 (PST)
Received: by 10.141.209.18 with HTTP; Thu, 27 Nov 2008 05:42:55 -0800 (PST)
Message-ID: <74f928500811270542g496991cbvea3a670e4e74531e@mail.gmail.com>
Date: Thu, 27 Nov 2008 15:42:55 +0200
From: "Eran Sevi" <eransevi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <b63a7e9e0811260647q4136d923l528383b36cd7ff50@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29888_30352222.1227793375969"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
	 <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
	 <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com>
	 <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
	 <492593C1.1040003@gmail.com>
	 <b63a7e9e0811200904n197b2331udd40a964050323c0@mail.gmail.com>
	 <b63a7e9e0811251230p398287beoa15461200c5030b9@mail.gmail.com>
	 <74f928500811260019s400c1168h31d2ffb106c9c47a@mail.gmail.com>
	 <b63a7e9e0811260647q4136d923l528383b36cd7ff50@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_29888_30352222.1227793375969
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Greg,
Thanks for quick and detailed answer.

What kind of queries do you run? Is it going to work for
SpanNearQueries/SpanNotQueries  as well?
Do you also get the word itself at each position?

It would be great if I could search on the content of each payload as well,
but since the payload content is quite complicated and not a simple value I
guess it's too much to ask for.

What version of Lucene are you using? I'm not sure I'll be able to use the
latest fixes.

Thanks again,
Eran.
On Wed, Nov 26, 2008 at 4:47 PM, Greg Shackles <gshackles@gmail.com> wrote:

> Sure, I'm happy to give some insight into this.  My index itself has a few
> fields - one that uniquely identifies the page, one that stores all the
> text
> on the page, and then some others to store characteristics.  At indexing
> time, the text field for each document is manually created by concatenating
> each word together, separated by spaces.  Then the IndexWriter runs the
> document through a custom filter that attaches payloads to each token.  The
> payloads here include all the attributes I need regarding that word, and
> most importantly, the index of that word on the page.  The tricky part here
> was that one of my "words" could map to more than one Lucene token, so I
> first create a quick map from my words to which token they should
> correspond
> to, by running each word through an Analyzer (StandardAnalyzer in my case).
> This makes it easy to only attach the payload to the first token for each
> of
> my words.
>
> For searching, I pass the search query to a PayloadSpanUtil which gets the
> payloads for every match throughout the entire index.  I take these results
> and put them into a Collection of custom objects, and then sort them first
> by page identifier, and then by index on the page.  Once I have this list,
> I
> can quickly iterate through it to find the groupings of payloads that match
> the search term (this also helps weed out the occasional bad result that
> comes back).  I wasn't sure initially if this would be a performance hit
> but
> it is very quick.  Basically what I do is tokenize the search string, then
> concatenate all tokens together without spaces into one string.  Then when
> iterating through I see if the word matches the start of the tokenized
> string - if so, chop it off and keep going til the whole string is found.
> Then repeat, and so on.  It's certainly not the most elegant solution but I
> didn't see a better way since PSU doesn't group or sort on its own.
>
> One other solution I might try if I have time is to take each document from
> the original search, put them one at a time into a MemoryIndex and then let
> PSU act on that.  I'm not sure if this would help/hurt performance but
> might
> be worth trying.  I will also say to make sure you apply Mark's latest
> patch
> (see the case here: https://issues.apache.org/jira/browse/LUCENE-1465)
> since
> it fixed some important bugs I had come across.
>
> I hope this made sense, I haven't finished my morning coffee yet so I can't
> be too sure : )  Let me know if you have any more questions.
>
> - Greg
>
>
>
> On Wed, Nov 26, 2008 at 3:19 AM, Eran Sevi <eransevi@gmail.com> wrote:
>
> > Hi,
> > Can you please shed some light on how your final architecture looks like?
> > Do you manually use the PayloadSpanUtil for each document separately?
> > How did you solve the problem with phrase results?
> > Thanks in advance for your time,
> > Eran.
> > On Tue, Nov 25, 2008 at 10:30 PM, Greg Shackles <gshackles@gmail.com>
> > wrote:
> >
> > > Just wanted to post a little follow-up here now that I've gotten
> through
> > > implementing the system using payloads.  Execution times are
> phenomenal!
> > > Things that took over a minute to run in my old system take fractions
> of
> > a
> > > second to run now.  I would also like to thank Mark for being very
> > > responsive in fixing/patching some bugs I encountered along the way.
> > >
> > > - Greg
> > >
> >
>

------=_Part_29888_30352222.1227793375969--

From java-user-return-37385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 13:44:19 2008
Return-Path: <java-user-return-37385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25550 invoked from network); 27 Nov 2008 13:44:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 13:44:19 -0000
Received: (qmail 6823 invoked by uid 500); 27 Nov 2008 13:44:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6498 invoked by uid 500); 27 Nov 2008 13:44:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6485 invoked by uid 99); 27 Nov 2008 13:44:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 05:44:23 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [62.73.241.56] (HELO mta.tdcsong.no) (62.73.241.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 13:42:54 +0000
Received: from melkor (integrasco.bzzware.org [213.236.150.62])
	by mta.tdcsong.no (Postfix) with ESMTP id 687A140DB
	for <java-user@lucene.apache.org>; Thu, 27 Nov 2008 14:43:35 +0100 (CET)
Date: Thu, 27 Nov 2008 14:43:38 +0100
To: java-user@lucene.apache.org
Subject: Re: [OT] About stopwords
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=utf-8
MIME-Version: 1.0
References: <492EA1C8.8090007@spotter.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.uk95q0mgoftp72@melkor>
In-Reply-To: <492EA1C8.8090007@spotter.com>
User-Agent: Opera Mail/9.60 (Linux)
X-Virus-Checked: Checked by ClamAV on apache.org

Your query includeds apostrophes which tells google to include common  
words in the query.
But, if you remove the apostrophes, you will still get results, as google  
states:

"Google ignores stop words when they're placed in searches alongside less  
common words. For example, a search for [ The Sound and the Fury ] will  
only return results for the terms "Sound" and "Fury." However, a search  
that only includes stop words -- [ The Who ], for example -- will be  
processed as is."

The key here is "when they're placed in searches alongside less common  
words".
http://www.google.com/support/bin/answer.py?hl=en&answer=981


Hope that answers your questions.
Regards,
  Aleks


On Thu, 27 Nov 2008 14:34:00 +0100, David Causse <dcausse@spotter.com>  
wrote:

> Hi,
>
> Look at this google query :  
> http://www.google.fr/search?q=%22HOW+at+at+of+a+A+a%22
>
> What do you think about that concerning stop words?
> Google has no stop words?
>
> David.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Aleksander M. Stensby
Senior software developer
Integrasco A/S
www.integrasco.no

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 13:44:31 2008
Return-Path: <java-user-return-37386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25702 invoked from network); 27 Nov 2008 13:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 13:44:31 -0000
Received: (qmail 8144 invoked by uid 500); 27 Nov 2008 13:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8120 invoked by uid 500); 27 Nov 2008 13:44:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8109 invoked by uid 99); 27 Nov 2008 13:44:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 05:44:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 13:43:06 +0000
Received: by qyk13 with SMTP id 13so1665721qyk.5
        for <java-user@lucene.apache.org>; Thu, 27 Nov 2008 05:43:50 -0800 (PST)
Received: by 10.215.13.11 with SMTP id q11mr6797695qai.269.1227793430069;
        Thu, 27 Nov 2008 05:43:50 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 7sm1924562ywo.7.2008.11.27.05.43.48
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 27 Nov 2008 05:43:49 -0800 (PST)
Message-Id: <EB19D869-E7E2-48A1-9A6F-52EB230F6EB3@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <492EA1C8.8090007@spotter.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: [OT] About stopwords
Date: Thu, 27 Nov 2008 08:43:46 -0500
References: <492EA1C8.8090007@spotter.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


That's a phrase search, so it's conceivable google could be doing  
something similar to nutch, whereby adjacent ngrams are indexed as  
unique terms.

But if you do the same search without quotes:

     http://www.google.fr/search?hl=fr&q=HOW+at+at+of+a+A+a&btnG=Rechercher&meta=

they still find many matches (though, curiously the one result  
returned for the phrase search seems not to make the first page for  
the non-phrase search).

So it does seem like Google has no stop words.

It actually makes some sense, because Google obviously has to deal  
with non-stopword terms that have tremendous frequency (eg "1" and  
"2", which occur more frequently than "a" or "the") by scaling out  
across machines, so since they already solved that scaleout anyway,  
the added incremental cost of including stopwords is probably minor.

Mike

David Causse wrote:

> Hi,
>
> Look at this google query : http://www.google.fr/search?q=%22HOW+at+at+of+a+A+a%22
>
> What do you think about that concerning stop words?
> Google has no stop words?
>
> David.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 13:47:46 2008
Return-Path: <java-user-return-37387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27567 invoked from network); 27 Nov 2008 13:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 13:47:46 -0000
Received: (qmail 11314 invoked by uid 500); 27 Nov 2008 13:47:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11276 invoked by uid 500); 27 Nov 2008 13:47:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11265 invoked by uid 99); 27 Nov 2008 13:47:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 05:47:51 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 13:46:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L5hD4-0001ym-21
	for java-user@lucene.apache.org; Thu, 27 Nov 2008 05:47:10 -0800
Message-ID: <20719556.post@talk.nabble.com>
Date: Thu, 27 Nov 2008 05:47:10 -0800 (PST)
From: "naveen.a" <naveen.verus@gmail.com>
To: java-user@lucene.apache.org
Subject: SpanFirstQuery is not taking wildcard characters (like *) as a
 logical operator for the preffix
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: naveen.verus@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Below is a document in lucene
----------------------------------------------
ID : 1
110_a : library information
----------------------------------------------
Case 1:
Term term1 = new Term("110_a", "library");
SpanFirstQuery spanFirstQuery = new SpanFirstQuery(new SpanTermQuery(term1),
1);

Case 2:
Term term1 = new Term("110_a", "l*");
SpanFirstQuery spanFirstQuery = new SpanFirstQuery(new SpanTermQuery(term1),
1);

if i apply first query, the documnet is found,
but, it is not found for the second query
-- 
View this message in context: http://www.nabble.com/SpanFirstQuery-is-not-taking-wildcard-characters-%28like-*%29-as-a-logical-operator-for-the-preffix-tp20719556p20719556.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 14:01:47 2008
Return-Path: <java-user-return-37388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35580 invoked from network); 27 Nov 2008 14:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 14:01:47 -0000
Received: (qmail 28420 invoked by uid 500); 27 Nov 2008 14:01:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28302 invoked by uid 500); 27 Nov 2008 14:01:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28291 invoked by uid 99); 27 Nov 2008 14:01:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 06:01:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [91.121.16.47] (HELO ns23917.ovh.net) (91.121.16.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 14:00:22 +0000
Received: (qmail 9557 invoked by uid 508); 27 Nov 2008 14:01:46 -0000
Received: from unknown (HELO ?192.168.1.44?) (88.182.17.109)
  by ns23917.ovh.net with AES256-SHA encrypted SMTP; 27 Nov 2008 14:01:46 -0000
Message-ID: <492EA7E0.6040407@spotter.com>
Date: Thu, 27 Nov 2008 15:00:00 +0100
From: David Causse <dcausse@spotter.com>
User-Agent: Thunderbird 2.0.0.17 (X11/20080925)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: [OT] About stopwords
References: <492EA1C8.8090007@spotter.com> <op.uk95q0mgoftp72@melkor>
In-Reply-To: <op.uk95q0mgoftp72@melkor>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the tip,

but I can't imagine the number of documents google has to join in order 
process such results...
There must be a trick.
Maybe stopwords are not indexed alone but twice with previous and next 
token, some sort of 2-gram index?

David.

Aleksander M. Stensby a crit :
> Your query includeds apostrophes which tells google to include common 
> words in the query.
> But, if you remove the apostrophes, you will still get results, as 
> google states:
>
> "Google ignores stop words when they're placed in searches alongside 
> less common words. For example, a search for [ The Sound and the Fury 
> ] will only return results for the terms "Sound" and "Fury." However, 
> a search that only includes stop words -- [ The Who ], for example -- 
> will be processed as is."
>
> The key here is "when they're placed in searches alongside less common 
> words".
> http://www.google.com/support/bin/answer.py?hl=en&answer=981
>
>
> Hope that answers your questions.
> Regards,
>  Aleks
>
>
> On Thu, 27 Nov 2008 14:34:00 +0100, David Causse <dcausse@spotter.com> 
> wrote:
>
>> Hi,
>>
>> Look at this google query : 
>> http://www.google.fr/search?q=%22HOW+at+at+of+a+A+a%22
>>
>> What do you think about that concerning stop words?
>> Google has no stop words?
>>
>> David.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 19:56:31 2008
Return-Path: <java-user-return-37389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70119 invoked from network); 27 Nov 2008 19:56:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 19:56:31 -0000
Received: (qmail 57527 invoked by uid 500); 27 Nov 2008 19:56:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57481 invoked by uid 500); 27 Nov 2008 19:56:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57470 invoked by uid 99); 27 Nov 2008 19:56:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 11:56:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.78.24 as permitted sender)
Received: from [74.125.78.24] (HELO ey-out-2122.google.com) (74.125.78.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 19:55:07 +0000
Received: by ey-out-2122.google.com with SMTP id 6so484063eyi.53
        for <java-user@lucene.apache.org>; Thu, 27 Nov 2008 11:55:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=dFNddZsmBChhEjoTvW+mcIxmipcoscN6YB8KzxLBciI=;
        b=w2fe45emIvEyuyrW1TXdDbgWI4n+4itrlXOEdiETn8/LNVX+45+/saOO7y9CU27Z9X
         t4nke6YGuwx0THLYIZDjaOx/Z8GByWrqwKVpZrdsETFTokP2TI/zMAiTwc/D6ip7Zj/7
         PjlEXBlNfH6waVJQRpOcdSOVDm8Acw+89RcyQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=CeCkqJs3KEcQ9t3qhA+Cn5l1LLDmW2qyl6Z0pyTmi0s1gznjIg0uHTShuxbvjn43RC
         3mxiAdp26dcwxv75r/DHBlpFcDoIKS+O84PuoKrYRT+7GTHhImonRaQv5tRZOj3y5VXA
         Sqxej8scRes2tVE7qmOA6vl10Bfr2Kem+QDJ0=
Received: by 10.210.130.14 with SMTP id c14mr7830377ebd.190.1227815752448;
        Thu, 27 Nov 2008 11:55:52 -0800 (PST)
Received: from kodapan.lan (c150-155-70-80.bjare.net [80.70.155.150])
        by mx.google.com with ESMTPS id 31sm1917417nfu.9.2008.11.27.11.55.47
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 27 Nov 2008 11:55:49 -0800 (PST)
Message-Id: <DDF845E9-13FC-4AF0-8B76-B6AE4C2C5DC1@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1227777358.25256.70.camel@pc286>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Query time document group boosting
Date: Thu, 27 Nov 2008 20:55:46 +0100
References: <1227714863.25256.38.camel@pc286> <B7D0017E-C6A1-4FB8-82A4-4509806062B6@gmail.com> <1227777358.25256.70.camel@pc286>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


27 nov 2008 kl. 10.15 skrev Toke Eskildsen:

> On Thu, 2008-11-27 at 07:30 +0100, Karl Wettin wrote:
>> The most scary part is that that you will have to score each and  
>> every
>> document that has a source, probably all of the documents in your
>> corpus.
>
> I now see my query-logic was flawed. In order to avoid matching all
> documents every time, the query would have to be
> "foo AND (
>  groupboost_A:dummy^10 OR
>  groupboost_B:dummy OR
>  groupboost_C:dummy^0.1 OR
>  ...
>  groupboost_Z:dummy
> )"
>
> With that query, it seems that only documents matching foo will result
> in a hit and be scored?

Someone else than me needs to answer this. I know there is no  
optimization of boolean clauses, that is why I'm saying this: it is  
possible that the boolean query weight actually will be visiting all  
the inner clauses even though "foo" was not matched, i.e. all  
documents in the index are visited but might not all be scored.

A cosmetic remark, I would personally choose a single field for the  
boosts and then one token per source. (groupboost:A^10 groupboost:B^1  
groupboost:C^0.1).

>> I think you are looking for CustomScoreQuery.
>
> Possibly, but my understanding is too weak to see how I can avoid a
> substantial performance-hit for the check for source?

If I'm not misstaken CustomScoreQuery is a non matching query, that it  
only touch the score of something that is already matched by a  
subquery. If these statments are true then it feels like there are  
clock ticks to save here.

But maybe all of these things are a bit too preemptive. Just use what  
you have if it seems to work well enough.



    karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Nov 27 21:15:34 2008
Return-Path: <java-user-return-37390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84170 invoked from network); 27 Nov 2008 21:15:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Nov 2008 21:15:34 -0000
Received: (qmail 827 invoked by uid 500); 27 Nov 2008 21:15:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 797 invoked by uid 500); 27 Nov 2008 21:15:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 786 invoked by uid 99); 27 Nov 2008 21:15:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 13:15:38 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 21:14:10 +0000
Received: by nf-out-0910.google.com with SMTP id g16so699999nfd.15
        for <java-user@lucene.apache.org>; Thu, 27 Nov 2008 13:14:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=D9eG9G8NmZ6CkkSvrkOcCQVzcg/RDH/aAQtXgs1Th2E=;
        b=hvZsg0DnMBpOXlHxnhOSvANy4yOh52XCCmSoBbwX0jig/c+pFAhkj/oSiwUWIA5/lL
         dp+Z0p2veGyqD1hbNzpmN/CtbZDbhRZY3MSGbLajNwhnSSZmBYnIuccCwpm1i0FeZKSz
         Q875RQjWcLUnQ363YR9x0c1CNHuUx9BfFw7hk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=TLYRGOH8kihNiOE5sRyOsSoUqJ80yZWYQdKItNIgia8LqQfH85lXkhLrAQp6bOARoe
         76pEqt2bm/2t/mlL1K/d9Lk3z/VqcStrueqfBMShEk8aSK/LDIjxYejeogdz5F4QUsx9
         e3PO6RdSvMLTDOJyd863OEHQSrDx/GUgd5ruE=
Received: by 10.210.136.10 with SMTP id j10mr7931436ebd.188.1227820495357;
        Thu, 27 Nov 2008 13:14:55 -0800 (PST)
Received: from kodapan.lan (c150-155-70-80.bjare.net [80.70.155.150])
        by mx.google.com with ESMTPS id 6sm2229839nfv.8.2008.11.27.13.14.54
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 27 Nov 2008 13:14:54 -0800 (PST)
Message-Id: <1E34430F-8E7B-4844-8A45-8C070C84BEEB@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <20719556.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: SpanFirstQuery is not taking wildcard characters (like *) as a logical operator for the preffix
Date: Thu, 27 Nov 2008 22:14:53 +0100
References: <20719556.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

SpanTermQuery is a TermQuery and not a WildcardQuery. You could use a  
SpanRegexQuery. You could also make your own SpanWildcardQuery based  
on either WildcardQuery or SpanRegexQuery.


You should probably tell us a bit about the problem you try to solve  
rather than asking about the solution you have thought of.

27 nov 2008 kl. 14.47 skrev naveen.a:

>
> Below is a document in lucene
> ----------------------------------------------
> ID : 1
> 110_a : library information
> ----------------------------------------------
> Case 1:
> Term term1 = new Term("110_a", "library");
> SpanFirstQuery spanFirstQuery = new SpanFirstQuery(new  
> SpanTermQuery(term1),
> 1);
>
> Case 2:
> Term term1 = new Term("110_a", "l*");
> SpanFirstQuery spanFirstQuery = new SpanFirstQuery(new  
> SpanTermQuery(term1),
> 1);
>
> if i apply first query, the documnet is found,
> but, it is not found for the second query
> -- 
> View this message in context: http://www.nabble.com/SpanFirstQuery-is-not-taking-wildcard-characters-%28like-*%29-as-a-logical-operator-for-the-preffix-tp20719556p20719556.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 01:03:13 2008
Return-Path: <java-user-return-37391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50362 invoked from network); 28 Nov 2008 01:03:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 01:03:13 -0000
Received: (qmail 29500 invoked by uid 500); 28 Nov 2008 01:03:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29472 invoked by uid 500); 28 Nov 2008 01:03:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29461 invoked by uid 99); 28 Nov 2008 01:03:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Nov 2008 17:03:16 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of gshackles@gmail.com designates 74.125.46.31 as permitted sender)
Received: from [74.125.46.31] (HELO yw-out-2324.google.com) (74.125.46.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 01:01:50 +0000
Received: by yw-out-2324.google.com with SMTP id 3so491588ywj.5
        for <java-user@lucene.apache.org>; Thu, 27 Nov 2008 17:02:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=BRr5oTh7MtYPwVNBhXK3q76tANFRr5xGtInz5SlH+5Q=;
        b=rjye0l3l++BonpZnEEwWS/ZMAQKi+FOOcLMbNN3Rsyx67Kw8rhrvAc0W257TcpSYjQ
         8yNNGNxORAdISIBTy3kLp/cSU65hGupSAYXXmDrUz/zaUj6C2jMmzp3+I+NSDhvKtvIQ
         Fmyzh3Xd9oYLUFLW8owQStVtTXak58CI/Rmgw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=WW/35pNZxlwjd3frPahlMxrrN3APs2CP4RcQqwXMwMAHDSqTkani6P5hH1hKLm7ST0
         iQJHUaMNy2HpJJhPPEcClMhFx/MgF+IyRxoEnTQp21aloYMjwWk65r/FUSpLHlfAPlnH
         YJ9dDqrCO6uY80zZAJRRMRbyVI8jYnZnGxSt4=
Received: by 10.100.164.20 with SMTP id m20mr3802432ane.97.1227834147139;
        Thu, 27 Nov 2008 17:02:27 -0800 (PST)
Received: by 10.100.44.1 with HTTP; Thu, 27 Nov 2008 17:02:27 -0800 (PST)
Message-ID: <b63a7e9e0811271702g1e40fc8es49cba293d470e4c5@mail.gmail.com>
Date: Thu, 27 Nov 2008 20:02:27 -0500
From: "Greg Shackles" <gshackles@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene implementation/performance question
In-Reply-To: <74f928500811270542g496991cbvea3a670e4e74531e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30176_31518984.1227834147127"
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
	 <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
	 <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com>
	 <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
	 <492593C1.1040003@gmail.com>
	 <b63a7e9e0811200904n197b2331udd40a964050323c0@mail.gmail.com>
	 <b63a7e9e0811251230p398287beoa15461200c5030b9@mail.gmail.com>
	 <74f928500811260019s400c1168h31d2ffb106c9c47a@mail.gmail.com>
	 <b63a7e9e0811260647q4136d923l528383b36cd7ff50@mail.gmail.com>
	 <74f928500811270542g496991cbvea3a670e4e74531e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_30176_31518984.1227834147127
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The queries I'm doing really aren't anything clever...just searching for
phrases on pages of text, sometimes narrowing results by other words that
must appear on the page, or words that cannot appear on the same page.  I
don't have experience with those span queries so i can't say much about
them.  However, I will say that at present there seems to be no way to make
the PayloadSpanUtil act on just a subset of an index.  I tried just taking
matching documents and putting them into a RAM backed index, but that
doesn't transfer over the payloads so it was pretty much useless for me.  I
hope this is something they can work out in the future.  In the payloads I
store a lot of metadata, including the word as it actually appeared on the
page, with capitalization, punctuation, etc.

I don't think it's really feasible to search on the payload since that isn't
indexed.  If you have things in there that you would want indexed, I would
suggest designing your indexes differently to accomodate for that.

I'm using Lucene 2.4, plus the patch that Mark put out to fix the payload
issues I ran into.  I wouldn't suggest using anything less since it wasn't
very useful before the patch.  It would probably be worth your time just to
upgrade the version of Lucene you are using anyway, for a variety of
reasons.

- Greg

------=_Part_30176_31518984.1227834147127--

From java-user-return-37392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 09:55:43 2008
Return-Path: <java-user-return-37392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39601 invoked from network); 28 Nov 2008 09:55:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 09:55:43 -0000
Received: (qmail 12860 invoked by uid 500); 28 Nov 2008 09:55:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12829 invoked by uid 500); 28 Nov 2008 09:55:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12818 invoked by uid 99); 28 Nov 2008 09:55:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 01:55:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 09:54:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L6041-0005Nl-Uy
	for java-user@lucene.apache.org; Fri, 28 Nov 2008 01:55:05 -0800
Message-ID: <20731617.post@talk.nabble.com>
Date: Fri, 28 Nov 2008 01:55:05 -0800 (PST)
From: "naveen.a" <naveen.verus@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SpanFirstQuery is not taking wildcard characters (like *) as a
 logical operator for the preffix
In-Reply-To: <1E34430F-8E7B-4844-8A45-8C070C84BEEB@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: naveen.verus@gmail.com
References: <20719556.post@talk.nabble.com> <1E34430F-8E7B-4844-8A45-8C070C84BEEB@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Thanks for your reply, 
The actual problem is when the user is entering data in a textfield, the
suggession list should come below the textfield, so when the character 'l'
is entered, the suggessions should come as starts with 'l' and if he entered
the full word say 'library ' and then he gives a space and he continues
typing for the next word say 'library inf' (actual word is "library
information"), so here the word "library information" is indexed
(untokenized or tokenized), now i have to search by the exact sequence, if i
apply query as "library inf*", the document should be returned, so i am
looking for lucene advanced search techniques and i thought it can be
possible with SpanFirstQuery because it can search by sequence, but it cant
search as a startswith (for "library inf*")




Karl Wettin wrote:
> 
> SpanTermQuery is a TermQuery and not a WildcardQuery. You could use a  
> SpanRegexQuery. You could also make your own SpanWildcardQuery based  
> on either WildcardQuery or SpanRegexQuery.
> 
> 
> You should probably tell us a bit about the problem you try to solve  
> rather than asking about the solution you have thought of.
> 
> 27 nov 2008 kl. 14.47 skrev naveen.a:
> 
>>
>> Below is a document in lucene
>> ----------------------------------------------
>> ID : 1
>> 110_a : library information
>> ----------------------------------------------
>> Case 1:
>> Term term1 = new Term("110_a", "library");
>> SpanFirstQuery spanFirstQuery = new SpanFirstQuery(new  
>> SpanTermQuery(term1),
>> 1);
>>
>> Case 2:
>> Term term1 = new Term("110_a", "l*");
>> SpanFirstQuery spanFirstQuery = new SpanFirstQuery(new  
>> SpanTermQuery(term1),
>> 1);
>>
>> if i apply first query, the documnet is found,
>> but, it is not found for the second query
>> -- 
>> View this message in context:
>> http://www.nabble.com/SpanFirstQuery-is-not-taking-wildcard-characters-%28like-*%29-as-a-logical-operator-for-the-preffix-tp20719556p20719556.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/SpanFirstQuery-is-not-taking-wildcard-characters-%28like-*%29-as-a-logical-operator-for-the-preffix-tp20719556p20731617.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 10:11:37 2008
Return-Path: <java-user-return-37393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51387 invoked from network); 28 Nov 2008 10:11:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 10:11:36 -0000
Received: (qmail 27676 invoked by uid 500); 28 Nov 2008 10:11:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27637 invoked by uid 500); 28 Nov 2008 10:11:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27626 invoked by uid 99); 28 Nov 2008 10:11:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 02:11:41 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 10:10:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L60JP-0006At-7E
	for java-user@lucene.apache.org; Fri, 28 Nov 2008 02:10:59 -0800
Message-ID: <20731826.post@talk.nabble.com>
Date: Fri, 28 Nov 2008 02:10:59 -0800 (PST)
From: "naveen.a" <naveen.verus@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to search for starts with multiple words in lucene
In-Reply-To: <359a92830811260546t29604be6p20f54cadc5a2465c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: naveen.verus@gmail.com
References: <20697741.post@talk.nabble.com> <359a92830811260546t29604be6p20f54cadc5a2465c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Thanks for your replies,

please go to this link for the actual problem

http://www.nabble.com/SpanFirstQuery-is-not-taking-wildcard-characters-(like-*)-as-a-logical-operator-for-the-preffix-td20719556.html#a20719556
http://www.nabble.com/SpanFirstQuery-is-not-taking-wildcard-characters-(like-*)-as-a-logical-operator-for-the-preffix-td20719556.html#a20719556 


Erick Erickson wrote:
> 
> Your problem here is probably tokenization at query time.
> 
> Queries like 110_a:library a* would search field 110_a for
> library and your default field for a*. You might try
> +110a_:library +110a_:a*, but I doubt that's really
> what you want since there's no guarantee that the terms
> will be next to each other.
> 
> Note that phrase queries l don't go through the wildcard
> parsers, so searching for "library a*" in quotes) won't do
> what you want.
> 
> You might want to look at the SpanQuery family. It's unclear
> whether you'd expect a hit on something that started in the
> middle, but you can get around this by adding a synthetic
> token at the start of each field you index then adding that to
> each query. Something like:
> doc.add("field", "$ <original text>", blah blah)
> at index time and then add the "$" (or whatever) at query time
> if you require that the match never hit in the middle.
> 
> Another possibility would be to index using something like
> KeywordAnalyzer, but this assumes that you never want
> to search for anything in that field that starts in the middle.
> 
> Best
> Erick
> 
> On Wed, Nov 26, 2008 at 4:48 AM, naveen.a <naveen.verus@gmail.com> wrote:
> 
>>
>> Hi,
>>
>> Below is a document in lucene
>> ---------------------------------------------
>> Field   Value
>> ---------------------------------------------
>> ID:1
>> 110_a:library and information
>> ---------------------------------------------
>> I need to search for starts with logic, below are the search cases for
>> the
>> above document
>>
>>
>> ------------------------------------------------------------------------------
>> Query                                             Result
>>
>> ------------------------------------------------------------------------------
>> 110_a:l*                                           ID - 1
>> 110_a:library*                                   ID - 1
>> 110_a:library *                                  No Results
>> 110_a:library a*                                No Results
>> 110_a:"library a*"                              No Results
>>
>> ------------------------------------------------------------------------------
>> here, if i apply single word for starts with search, it is found,
>> but if i add any space after the first word, it is not found
>>
>> so, how to apply the query to search for starts with multiple words
>> --
>> View this message in context:
>> http://www.nabble.com/how-to-search-for-starts-with-multiple-words-in-lucene-tp20697741p20697741.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/how-to-search-for-starts-with-multiple-words-in-lucene-tp20697741p20731826.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 11:17:18 2008
Return-Path: <java-user-return-37394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78028 invoked from network); 28 Nov 2008 11:17:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 11:17:17 -0000
Received: (qmail 97315 invoked by uid 500); 28 Nov 2008 11:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97152 invoked by uid 500); 28 Nov 2008 11:17:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97141 invoked by uid 99); 28 Nov 2008 11:17:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 03:17:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 11:15:54 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mASBGb31026963
	for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 11:16:37 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12294)
    via ESMTP; Fri, 28 Nov 2008 11:16:37 +0000 (GMT)
Date: Fri, 28 Nov 2008 11:16:36 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <492FD314.8080305@scalix.com>
In-Reply-To: <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
References: <b63a7e9e0811120747h3a17509ehef3c4efa7d53a69d@mail.gmail.com>
References: <b63a7e9e0811120847l3aba0f5qb7aec98bc65b69a1@mail.gmail.com>
References: <491B0BCF.2000302@gmail.com>
References: <b63a7e9e0811120915r1f34ec34j7dc65e2ab76ef55a@mail.gmail.com>
References: <491B17D8.4090209@gmail.com>
References: <b63a7e9e0811121106x45b59143q6755de8c82b0517c@mail.gmail.com>
References: <491B2D13.8090006@gmail.com>
References: <b63a7e9e0811121153k266e79des4eeb712cc59427d1@mail.gmail.com>
References: <74f928500811130143v141f1bc6od9640aaacdefeaa0@mail.gmail.com>
References: <b63a7e9e0811190933p74557354m91935cf81184c454@mail.gmail.com>
References: <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
Subject: Latest stable release?
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0201.492FD315.002A,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Hi

Can anyone tell me what the latest stable release is?  
http://lucene.apache.org/java/docs/index.html doesn't say.

Thanks,

- Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 11:29:26 2008
Return-Path: <java-user-return-37395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87301 invoked from network); 28 Nov 2008 11:29:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 11:29:26 -0000
Received: (qmail 16497 invoked by uid 500); 28 Nov 2008 11:29:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16433 invoked by uid 500); 28 Nov 2008 11:29:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16334 invoked by uid 99); 28 Nov 2008 11:29:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 03:29:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.92.27 as permitted sender)
Received: from [74.125.92.27] (HELO qw-out-2122.google.com) (74.125.92.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 11:28:01 +0000
Received: by qw-out-2122.google.com with SMTP id 5so300673qwi.53
        for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 03:28:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=WEuaZVcVaNM8wWTJeqdB2dmI62GFSA0s5N96Y/GiHSI=;
        b=Mk/nRIHspb8u+V1ozMzkBNhHYUuqUK1zybKpWFI+hOy+QUiiv+6mlyBnckMdPDRlq5
         K8idt9wQt0/CHMeU07nNlevpMlbc+Uqs7lU5bw30kiMMT4nRVN9ytJFQ6esvfHbyGbOm
         4Qxr3+DGaUHm4XMFJ/7G1Gb3CA9cJrku9Iztg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=ZE9BD9iA3sm9usMkd1Y4em1iLHDT4RF4/z+ARwtN9J3nNIEOdEROCCWkvfwJ7emQ0L
         h7Ufz0GvNiswsbccvmC9Y+LBtnF5VLSBI6IrbgRx8cE3BlmHIf1Fif6bMW9+OmqT6pFZ
         M5f+wPAijMhyRMvS38LwuH+oA/2/eoFAknq68=
Received: by 10.214.25.7 with SMTP id 7mr7651187qay.263.1227871718183;
        Fri, 28 Nov 2008 03:28:38 -0800 (PST)
Received: by 10.214.241.8 with HTTP; Fri, 28 Nov 2008 03:28:38 -0800 (PST)
Message-ID: <8c4e68610811280328oe5f4427o11199a9cf29e4bfa@mail.gmail.com>
Date: Fri, 28 Nov 2008 11:28:38 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Latest stable release?
In-Reply-To: <492FD314.8080305@scalix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
	 <492FD314.8080305@scalix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

2.4.0.


--
Ian.


On Fri, Nov 28, 2008 at 11:16 AM, Chris Bamford
<chris.bamford@scalix.com> wrote:
> Hi
>
> Can anyone tell me what the latest stable release is?
>  http://lucene.apache.org/java/docs/index.html doesn't say.
>
> Thanks,
>
> - Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 11:34:17 2008
Return-Path: <java-user-return-37396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89637 invoked from network); 28 Nov 2008 11:34:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 11:34:16 -0000
Received: (qmail 22755 invoked by uid 500); 28 Nov 2008 11:34:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22724 invoked by uid 500); 28 Nov 2008 11:34:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22713 invoked by uid 99); 28 Nov 2008 11:34:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 03:34:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [82.111.253.243] (HELO mail.uk.scalix.com) (82.111.253.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 11:32:48 +0000
Received: from mail.uk.scalix.com (localhost.localdomain [127.0.0.1])
	by mail.uk.scalix.com (8.13.8/8.13.8) with ESMTP id mASBWVkf022699
	for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 11:32:31 GMT
Received: from [10.11.108.233] (dhow.uk.scalix.com [10.11.108.233])
    by mail.uk.scalix.com (Scalix SMTP Relay 11.4.3.12294)
    via ESMTP; Fri, 28 Nov 2008 11:32:31 +0000 (GMT)
Date: Fri, 28 Nov 2008 11:32:31 +0000
From: Chris Bamford <chris.bamford@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <492FD6CF.9030109@scalix.com>
In-Reply-To: <8c4e68610811280328oe5f4427o11199a9cf29e4bfa@mail.gmail.com>
References: <b63a7e9e0811200839p467c597ah4f692d8a53128f53@mail.gmail.com>
References: <492FD314.8080305@scalix.com>
References: <8c4e68610811280328oe5f4427o11199a9cf29e4bfa@mail.gmail.com>
Subject: Re: Latest stable release?
x-scalix-Hops: 1
User-Agent: Thunderbird 2.0.0.6 (X11/20070728)
X-SMP-CT-RefID: str=0001.0A0B0205.492FD6CF.00F2,ss=1,fgs=0
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Spam-Checker-Version: SpamAssassin 3.2.5 (2008-06-10) on mail.uk.scalix.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham
	version=3.2.5

Thanks Ian.

Is that the convention - the top of the list on 
http://lucene.apache.org/java/docs/index.html is always the latest 
stable release - or do you know that by some other means?

Cheers,

- Chris


Ian Lea wrote:
> 2.4.0.
>
>
> --
> Ian.
>
>
> On Fri, Nov 28, 2008 at 11:16 AM, Chris Bamford
> <chris.bamford@scalix.com> wrote:
>   
>> Hi
>>
>> Can anyone tell me what the latest stable release is?
>>  http://lucene.apache.org/java/docs/index.html doesn't say.
>>
>> Thanks,
>>
>> - Chris
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Chris Bamford
Senior Development Engineer
*Scalix*
chris.bamford@scalix.com
Tel: +44 (0)1344 381814
www.scalix.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 11:53:02 2008
Return-Path: <java-user-return-37397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98770 invoked from network); 28 Nov 2008 11:53:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 11:53:01 -0000
Received: (qmail 39659 invoked by uid 500); 28 Nov 2008 11:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39223 invoked by uid 500); 28 Nov 2008 11:53:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39212 invoked by uid 99); 28 Nov 2008 11:53:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 03:53:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 74.125.92.25 as permitted sender)
Received: from [74.125.92.25] (HELO qw-out-2122.google.com) (74.125.92.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 11:51:34 +0000
Received: by qw-out-2122.google.com with SMTP id 5so301996qwi.53
        for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 03:52:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=l4IjKlRBVPLub3gm0QFUWlp4vPKWOhnh3zoLQA2IJ7I=;
        b=xo36ad0PNttlbIvAtNOdONjowpm8/YSafo7FDaQE3vcw1xYPAmu7/mg7vwwNUL+J7X
         OuUM0jgJjumJETsn01xAor1nvLTqyLRzb48lDPsWRQeVLBF+QSmWe/CPPm5viCsJZZZ9
         R5xT2p2hBYn61rMIEI5BPItQZF+KI13D5akOw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=BotAmom5iiNnuaJ28/FjX+vqCQC5ojI3ZkWL+ToCfqUXc5fDw1y2P5Ub/VvmGC0+MZ
         TgX/pUxTva+Dcjm7qnkklMPQFFEcPOgvBzWtW0aqhhwPOBpBt5el67rjyqk/Xr57LyFl
         QyQ4dPQ6ovxXljmeSF5BptTgXU63gz0JxwkCY=
Received: by 10.214.26.17 with SMTP id 17mr7686997qaz.54.1227873140616;
        Fri, 28 Nov 2008 03:52:20 -0800 (PST)
Received: by 10.214.241.8 with HTTP; Fri, 28 Nov 2008 03:52:20 -0800 (PST)
Message-ID: <8c4e68610811280352s5e92c6afv23bcab6737004eb9@mail.gmail.com>
Date: Fri, 28 Nov 2008 11:52:20 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Latest stable release?
In-Reply-To: <492FD6CF.9030109@scalix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8c4e68610811280328oe5f4427o11199a9cf29e4bfa@mail.gmail.com>
	 <492FD6CF.9030109@scalix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Ummm ...

I know it because there was an email sent to this list on 11-Oct
saying "Release 2.4.0 of Lucene is now available!".  Doesn't explicily
say stable, but that is the implication.

I'm not sure about any convention but it seems a fair bet.


--
Ian.


On Fri, Nov 28, 2008 at 11:32 AM, Chris Bamford
<chris.bamford@scalix.com> wrote:
> Thanks Ian.
>
> Is that the convention - the top of the list on
> http://lucene.apache.org/java/docs/index.html is always the latest stable
> release - or do you know that by some other means?
>
> Cheers,
>
> - Chris
>
>
> Ian Lea wrote:
>>
>> 2.4.0.
>>
>>
>> --
>> Ian.
>>
>>
>> On Fri, Nov 28, 2008 at 11:16 AM, Chris Bamford
>> <chris.bamford@scalix.com> wrote:
>>
>>>
>>> Hi
>>>
>>> Can anyone tell me what the latest stable release is?
>>>  http://lucene.apache.org/java/docs/index.html doesn't say.
>>>
>>> Thanks,
>>>
>>> - Chris
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Chris Bamford
> Senior Development Engineer
> *Scalix*
> chris.bamford@scalix.com
> Tel: +44 (0)1344 381814
> www.scalix.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 12:02:42 2008
Return-Path: <java-user-return-37398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2231 invoked from network); 28 Nov 2008 12:02:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 12:02:42 -0000
Received: (qmail 46235 invoked by uid 500); 28 Nov 2008 12:02:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46206 invoked by uid 500); 28 Nov 2008 12:02:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46195 invoked by uid 99); 28 Nov 2008 12:02:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 04:02:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 12:01:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L622v-0002Pq-JT
	for java-user@lucene.apache.org; Fri, 28 Nov 2008 04:02:05 -0800
Message-ID: <20733263.post@talk.nabble.com>
Date: Fri, 28 Nov 2008 04:02:05 -0800 (PST)
From: csantos <claudia.cm.santos@gmail.com>
To: java-user@lucene.apache.org
Subject: =?UTF-8?Q?Re:_Transforming_german_umlaute_?=
 =?UTF-8?Q?like_=C3=B6,=C3=A4,=C3=BC,=C3=9F_into_oe,_ae,_ue,_ss?=
In-Reply-To: <EFA4BA06-F0F4-49FE-8114-F213CAFC2F95@evenity.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: claudia.cm.santos@gmail.com
References: <EFA4BA06-F0F4-49FE-8114-F213CAFC2F95@evenity.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'm a newbie with Lucene and I started some testing with Lucene 2.2.0.
I developed my own Analyser and my own Filter based on examples found here,
that is:

public class DiacriticAnalyser extends GermanAnalyzer {
....

 @Override 
 public TokenStream tokenStream(String fieldName, Reader reader) { 
   TokenStream result = super.tokenStream(fieldName, reader);
   result = new ISOLatin1DiacriticFilter(result); 
   return result; 

}

}

public class ISOLatin1DiacriticFilter extends TokenFilter {
...

@Override
public final Token next() throws java.io.IOException {
   final Token t = input.next();
    if (t != null)
      t.setTermText(removeDiacritics(t.termText()));
    return t;
}

}

What i don't understand is: isn't the call to input.next() endless
recursive, i mean the TokenStream class is abstract and the TokenFilter
class doesn't implement next()? And who calls next(), i just call the
constructor of ISOLatin1DiacriticFilter class.

regards,
-- 
View this message in context: http://www.nabble.com/Transforming-german-umlaute-like-%C3%B6%2C%C3%A4%2C%C3%BC%2C%C3%9F-into-oe%2C-ae%2C-ue%2C-ss-tp20558345p20733263.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 12:10:52 2008
Return-Path: <java-user-return-37399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6164 invoked from network); 28 Nov 2008 12:10:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 12:10:51 -0000
Received: (qmail 55133 invoked by uid 500); 28 Nov 2008 12:10:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55102 invoked by uid 500); 28 Nov 2008 12:10:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55091 invoked by uid 99); 28 Nov 2008 12:10:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 04:10:57 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.224] (HELO smtp121.mail.mud.yahoo.com) (209.191.84.224)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Nov 2008 12:09:27 +0000
Received: (qmail 37624 invoked from network); 28 Nov 2008 12:09:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=0sDm81TxBZ2lBhBZqDX+bGk1+8gIHKQh2S7s2kPF2ekpp4WWC/dPVGqm7eVBJWIP6VumDa+pPO2cvTmhYqDHk6DFS2Ymwyldc0WheVKsGbW6mGy7YIXqmuzGA+NZLgD6KI+UygYOEILZionhRF3AWntTzPxxgrw8+ybbMHTlS+M=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp121.mail.mud.yahoo.com with SMTP; 28 Nov 2008 12:09:11 -0000
X-YMail-OSG: qLnS6.cVM1ngXrt76vpRszuYVsw_m6nhwR2TLWl9z38VNe1DXeMKw_CShNEGuRl.DJH6qEhonfWkRrRduai5L53N5Qz5xqK5Mri_BOJSyYs0CHEcyoEUmv_AnncnmwS7fLbIM4I7HzIMEBcdPioarGqtcb.noTk3mA3pcfiW
X-Yahoo-Newman-Property: ymail-3
Message-ID: <0dd401c95152$1fbdcb70$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
Subject: Maintain last indexed information in a file or DB
Date: Fri, 28 Nov 2008 17:39:07 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

I am using Lucene v2.4. I am indexing files from various folder and i have 
to maintain a bookmark of what i have last indexed in each folder.

Initially i thought to save the state in each  respective folder. Index 
Wrtier always has documents in memory and it commits in a intervals. In an 
unexpected application crash, sometimes the last saved bookmark and the last 
indexed document in the database is not matching.

One another option is to keep the information in a same or different 
database.

I think many might have faced this situitation.

Regards
Ganesh 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 12:23:30 2008
Return-Path: <java-user-return-37400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16733 invoked from network); 28 Nov 2008 12:23:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 12:23:30 -0000
Received: (qmail 72255 invoked by uid 500); 28 Nov 2008 12:23:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72217 invoked by uid 500); 28 Nov 2008 12:23:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72204 invoked by uid 99); 28 Nov 2008 12:23:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 04:23:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 12:22:07 +0000
Received: by qyk13 with SMTP id 13so2164694qyk.5
        for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 04:21:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=7FfD5dFic0xQ8LvxwrPDBXcnCILfSAPjdqP1uC/Hgnc=;
        b=myQzXvwVuVObqBziNpEbWEwexSU5OZ+U0x/WpivYSAQlHXq9XIDLYBdhNhf0wV5Lsy
         2idRHE2/KmxD7pz1+ZsHYJFdDSR+mhC/rM2VZjbGXIrMneSTdRKonFYCQ9gX+TJGC77o
         dirAx+Vbf4ZiRhJ5agznWkiRrtFmyA/QqZtFM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=sj5KJnLOpDqoImBnEuoF5ziGzZx2+iVQlMX+ki3yke2ZZGx/lQVo1nmZjG/oMH1UCR
         PrASHuVmwc2MBLrMeB9iDOgOPH5xTYjQx+JIbjIthavZ/IJVGJeR/eUCkWNit096SCqV
         S3uazEPDVkv9R+AIqwFRZkJAHh7yYaZIvD7+k=
Received: by 10.214.79.7 with SMTP id c7mr7690573qab.357.1227874913562;
        Fri, 28 Nov 2008 04:21:53 -0800 (PST)
Received: by 10.214.241.8 with HTTP; Fri, 28 Nov 2008 04:21:53 -0800 (PST)
Message-ID: <8c4e68610811280421l58656d71n58a90b09456e47a7@mail.gmail.com>
Date: Fri, 28 Nov 2008 12:21:53 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Maintain last indexed information in a file or DB
In-Reply-To: <0dd401c95152$1fbdcb70$330bc30a@sv.us.sonicwall.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <0dd401c95152$1fbdcb70$330bc30a@sv.us.sonicwall.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I'm a bit confused about what exactly is stored in folder and index
and database, but how about you store the bookmark information in the
same lucene index that you are using for the file data.  One lucene
document per folder, with fields something like

folder: /some/dir/somewhere
bookmark: some_bookmark_value

That way the bookmark info should always be in line with the indexed data.


Oh, and I'd also try and stop the application from crashing!


--
Ian.



On Fri, Nov 28, 2008 at 12:09 PM, Ganesh <emailgane@yahoo.co.in> wrote:
> I am using Lucene v2.4. I am indexing files from various folder and i have
> to maintain a bookmark of what i have last indexed in each folder.
>
> Initially i thought to save the state in each  respective folder. Index
> Wrtier always has documents in memory and it commits in a intervals. In an
> unexpected application crash, sometimes the last saved bookmark and the last
> indexed document in the database is not matching.
>
> One another option is to keep the information in a same or different
> database.
>
> I think many might have faced this situitation.
>
> Regards
> Ganesh

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 12:43:38 2008
Return-Path: <java-user-return-37401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23879 invoked from network); 28 Nov 2008 12:43:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 12:43:38 -0000
Received: (qmail 1807 invoked by uid 500); 28 Nov 2008 12:43:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1777 invoked by uid 500); 28 Nov 2008 12:43:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1766 invoked by uid 99); 28 Nov 2008 12:43:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 04:43:43 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a17.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 12:42:16 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a17.g.dreamhost.com (Postfix) with ESMTP id 867CD73766
	for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 04:42:32 -0800 (PST)
Message-Id: <75B048D1-9300-4EAD-8F4C-960E4548BB01@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <594203920811252047s5c4d5fb4n555e93413219f70e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: calculating score - implementing your own 'Scorer' - how to?..
Date: Fri, 28 Nov 2008 07:42:31 -0500
References: <594203920811252047s5c4d5fb4n555e93413219f70e@mail.gmail.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Vlad,

I believe you can achieve this using the function package (i.e.  
Function Queries, org.apache.lucene.search.function).    The other  
thing that comes to mind is, if you don't truly need the bit mask for  
other things, is to encode it into the Field as a boost value.  This  
may be complicated by the lack of granularity in boost encoding, but  
it might work for you.

-Grant



On Nov 25, 2008, at 11:47 PM, Vlad Olenin wrote:

> Hi,
>
> I'm new to Lucene, so looking for some guidance as to the most  
> efficient /
> appropriate way to implement the following functionality.
>
>
> * Each Document consists of a number of fields
> * Each Field value, when indexed, can have different 'score' value
> associated with it
> ** for simplicity, the score is presented as a bit mask
> ** each field value might have different score for the same field
> ** each field value might have different score for the different  
> fields
> *** eg, if doc1.field1.value = "val1, val2, val3", then index over  
> field1
> might have different score values associated with each value (here are
> {docId.field, score} pairs):
> ***       val1 = {doc1.field1, '0011'},
> ***       val2 = {doc1.field1, '0101'},
> ***       val3 = {doc1.field1, '1011'}
> * when the search is done, the final score for the document must be
> calculated based on the bit combination of scores, eg:
> ** query = 'val1, val2', res = {doc1, '0001'}  (0011 & 0101)
> ** query = 'val1, val3', res = {doc1, '0011'}  (0011 & 1011)
>
>
> How do I implement the above scoring logic? Thanks,
>
> Vlad



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 13:10:07 2008
Return-Path: <java-user-return-37402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30945 invoked from network); 28 Nov 2008 13:10:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 13:10:07 -0000
Received: (qmail 28322 invoked by uid 500); 28 Nov 2008 13:10:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28281 invoked by uid 500); 28 Nov 2008 13:10:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28270 invoked by uid 99); 28 Nov 2008 13:10:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 05:10:11 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.191.84.227] (HELO smtp124.mail.mud.yahoo.com) (209.191.84.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Nov 2008 13:08:42 +0000
Received: (qmail 17027 invoked from network); 28 Nov 2008 13:09:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Received:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=u/sZTQjMVGIomsU0GcRq3EaOy+i0o3TiA+6olW/K9dfBYtUwb4MoDVuUlJFg+db7ettePMcLP+nUAyZhAVO3ajYALIgiw4jXiXFVt0LmhFJB8HFzq71RDyY/0nLSpPhcgVnNfJNPB0xRNz4ePS/cfSXw5WlY4aSALnlmLqoKZ+E=  ;
Received: from unknown (HELO GaneshM) (emailgane@203.98.194.130 with login)
  by smtp124.mail.mud.yahoo.com with SMTP; 28 Nov 2008 13:09:26 -0000
X-YMail-OSG: _jFdRnoVM1kfWUt8Zz3qzOZO70u5QO2Baw3AJaQCQTyW47JWoJ4zbT2y7m0yJS._VKnp89zwxXVe4fHW7f4apq.YXv16XoZkDFeICYaS_cDZXMt7sd5QDq3t.CugGLgyFmhlPsMNdM.7fxBB_IJhN98S5A--
X-Yahoo-Newman-Property: ymail-3
Message-ID: <10a401c9515a$8a8c0b30$330bc30a@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <0dd401c95152$1fbdcb70$330bc30a@sv.us.sonicwall.com> <8c4e68610811280421l58656d71n58a90b09456e47a7@mail.gmail.com>
Subject: Re: Maintain last indexed information in a file or DB
Date: Fri, 28 Nov 2008 18:39:23 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138
X-Virus-Checked: Checked by ClamAV on apache.org

My application is similar to google or msn desktop but the data would be 
voluminous. Some set of files are there in each folder and new files could 
be added to this folder. I have to pick the new one and index it. I could 
very well add some fields like folder name, filename, modified datetime etc. 
in the same DB or separate db. I have to search the DB and get the list of 
files for a folder and compare the same with the actual folder. This is one 
approach. Another approach is to persist the state in a file for every 
folder.

> Oh, and I'd also try and stop the application from crashing!
I will also try to avoid the crash, but my product will be installed in 
different customer places and there may be a possibility of forceful 
shutdown or killing java application etc. I need to be prepare for this 
situitation also.

Regards
Ganesh

----- Original Message ----- 
From: "Ian Lea" <ian.lea@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Friday, November 28, 2008 5:51 PM
Subject: Re: Maintain last indexed information in a file or DB


> I'm a bit confused about what exactly is stored in folder and index
> and database, but how about you store the bookmark information in the
> same lucene index that you are using for the file data.  One lucene
> document per folder, with fields something like
>
> folder: /some/dir/somewhere
> bookmark: some_bookmark_value
>
> That way the bookmark info should always be in line with the indexed data.
>
>
> Oh, and I'd also try and stop the application from crashing!
>
>
> --
> Ian.
>
>
>
> On Fri, Nov 28, 2008 at 12:09 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>> I am using Lucene v2.4. I am indexing files from various folder and i 
>> have
>> to maintain a bookmark of what i have last indexed in each folder.
>>
>> Initially i thought to save the state in each  respective folder. Index
>> Wrtier always has documents in memory and it commits in a intervals. In 
>> an
>> unexpected application crash, sometimes the last saved bookmark and the 
>> last
>> indexed document in the database is not matching.
>>
>> One another option is to keep the information in a same or different
>> database.
>>
>> I think many might have faced this situitation.
>>
>> Regards
>> Ganesh
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

Send instant messages to your online friends http://in.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 13:36:57 2008
Return-Path: <java-user-return-37403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49695 invoked from network); 28 Nov 2008 13:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 13:36:57 -0000
Received: (qmail 65456 invoked by uid 500); 28 Nov 2008 13:37:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65430 invoked by uid 500); 28 Nov 2008 13:37:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65419 invoked by uid 99); 28 Nov 2008 13:37:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 05:37:01 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.92.24] (HELO qw-out-2122.google.com) (74.125.92.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 13:35:33 +0000
Received: by qw-out-2122.google.com with SMTP id 5so307939qwi.53
        for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 05:36:08 -0800 (PST)
Received: by 10.214.81.8 with SMTP id e8mr7765358qab.279.1227879368322;
        Fri, 28 Nov 2008 05:36:08 -0800 (PST)
Received: from ?10.17.4.4? (pool-96-237-252-30.bstnma.fios.verizon.net [96.237.252.30])
        by mx.google.com with ESMTPS id 6sm1053220ywn.0.2008.11.28.05.36.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 28 Nov 2008 05:36:07 -0800 (PST)
Message-Id: <964994AB-5B78-4782-A2FB-A9DE9EC8675E@mikemccandless.com>
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
In-Reply-To: <10a401c9515a$8a8c0b30$330bc30a@sv.us.sonicwall.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: Maintain last indexed information in a file or DB
X-Priority: 3
Date: Fri, 28 Nov 2008 08:36:05 -0500
References: <0dd401c95152$1fbdcb70$330bc30a@sv.us.sonicwall.com> <8c4e68610811280421l58656d71n58a90b09456e47a7@mail.gmail.com> <10a401c9515a$8a8c0b30$330bc30a@sv.us.sonicwall.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org


Not sure if it's a fit here, but the 2.9 (not yet released) release of  
Lucene allows you to specify metadata when you call commit, ie  
commit(String userData).

This way each commit point can record "something" application specific  
to describe it.

Mike

Ganesh wrote:

> My application is similar to google or msn desktop but the data  
> would be voluminous. Some set of files are there in each folder and  
> new files could be added to this folder. I have to pick the new one  
> and index it. I could very well add some fields like folder name,  
> filename, modified datetime etc. in the same DB or separate db. I  
> have to search the DB and get the list of files for a folder and  
> compare the same with the actual folder. This is one approach.  
> Another approach is to persist the state in a file for every folder.
>
>> Oh, and I'd also try and stop the application from crashing!
> I will also try to avoid the crash, but my product will be installed  
> in different customer places and there may be a possibility of  
> forceful shutdown or killing java application etc. I need to be  
> prepare for this situitation also.
>
> Regards
> Ganesh
>
> ----- Original Message ----- From: "Ian Lea" <ian.lea@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Friday, November 28, 2008 5:51 PM
> Subject: Re: Maintain last indexed information in a file or DB
>
>
>> I'm a bit confused about what exactly is stored in folder and index
>> and database, but how about you store the bookmark information in the
>> same lucene index that you are using for the file data.  One lucene
>> document per folder, with fields something like
>>
>> folder: /some/dir/somewhere
>> bookmark: some_bookmark_value
>>
>> That way the bookmark info should always be in line with the  
>> indexed data.
>>
>>
>> Oh, and I'd also try and stop the application from crashing!
>>
>>
>> --
>> Ian.
>>
>>
>>
>> On Fri, Nov 28, 2008 at 12:09 PM, Ganesh <emailgane@yahoo.co.in>  
>> wrote:
>>> I am using Lucene v2.4. I am indexing files from various folder  
>>> and i have
>>> to maintain a bookmark of what i have last indexed in each folder.
>>>
>>> Initially i thought to save the state in each  respective folder.  
>>> Index
>>> Wrtier always has documents in memory and it commits in a  
>>> intervals. In an
>>> unexpected application crash, sometimes the last saved bookmark  
>>> and the last
>>> indexed document in the database is not matching.
>>>
>>> One another option is to keep the information in a same or different
>>> database.
>>>
>>> I think many might have faced this situitation.
>>>
>>> Regards
>>> Ganesh
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Send instant messages to your online friends http://in.messenger.yahoo.com
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 14:46:37 2008
Return-Path: <java-user-return-37404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81571 invoked from network); 28 Nov 2008 14:46:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 14:46:37 -0000
Received: (qmail 20401 invoked by uid 500); 28 Nov 2008 14:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20375 invoked by uid 500); 28 Nov 2008 14:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20195 invoked by uid 99); 28 Nov 2008 14:46:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 06:46:34 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.252.110.214] (HELO web56205.mail.re3.yahoo.com) (216.252.110.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Nov 2008 14:45:05 +0000
Received: (qmail 85917 invoked by uid 60001); 28 Nov 2008 14:45:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=bpUmdPD0p5hO1xCz968RQkWb7Na5tpSq0lrL5HLsOjNBO+ipmbvi9KyYWgdIRQhhnbblmR5RfnhiT82s0y8oZvJLGEK+VR4UdJ7DBxZLCMdjKHxJVd4BVLTgne6n+urtX4V4tTFPyAsgQTIPGCwQcL3oIMLMN/unTHueTLKULvo=;
X-YMail-OSG: bME83n4VM1kD17ovJbAg2BksMfjpIkLP1bb2J.68NN7eYNxkGL9R0vKtwPBx_Sc1GsAZsjQxHNiSeSNu2J_KUEBkfWeuX0xnFP_r2jOYH9jAwQkoPPhtGY870YawyrTTBSRzmKDYWOVw2xh2qk_l6V0iHicQCFLv5WSRfhbb
Received: from [82.99.216.159] by web56205.mail.re3.yahoo.com via HTTP; Fri, 28 Nov 2008 06:45:51 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
Date: Fri, 28 Nov 2008 06:45:51 -0800 (PST)
From: Amir Hossein Jadidinejad <amir.jadidi@yahoo.com>
Subject: controlled indexing with Lucene
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2127508954-1227883551=:85326"
Message-ID: <542223.85326.qm@web56205.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-2127508954-1227883551=:85326
Content-Type: text/plain; charset=us-ascii

Hi, 
I'm going to index some documents only with known phrases. Let me describe:  
Suppose that I have a controlled vocabulary of phrases (A list of some candidate phrases). I intend to
index ONLY these phrases within my documents and have a retrieval model
(for example simple VS-TF.IDF) that each index item is a predefined
phrase.  
Could anyone tell me how to do it with Lucene?   
Greatly appreciate any comment or answer.
Kind regards.


      
--0-2127508954-1227883551=:85326--

From java-user-return-37405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 17:05:45 2008
Return-Path: <java-user-return-37405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16581 invoked from network); 28 Nov 2008 17:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 17:05:45 -0000
Received: (qmail 50575 invoked by uid 500); 28 Nov 2008 17:05:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50546 invoked by uid 500); 28 Nov 2008 17:05:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50535 invoked by uid 99); 28 Nov 2008 17:05:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 09:05:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ngvinny@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 17:04:23 +0000
Received: by fk-out-0910.google.com with SMTP id 18so1439599fkq.5
        for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 09:05:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=nCcOD3eU6pb8n8F7Dduhe1+8tlxW5o5yBMx4XQHYT9U=;
        b=dLmigYwfJLfIL1K/3Vj6lWiXH7N162CvRPh03ZruJT3SUfJ383PbBWVa2FA8bTNzOK
         Yo83e/lLF8bbYRFSkvUOAiQ2raEZYLYUphruqrROCS4FwzQKzarS4SuArPcPltXuFjCU
         9+RFK6ueXsL+O9qFLhmz3LU8ZXQ+abnvVHhnc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=iyQmB3lZ92IZJIwWR97ZCo+LPvrurqrG4Bp58IA65gSd4SebTTtHrEKrfAi7kRiLtc
         COTvbR9oR3ehHQyguZj5Xkw0jomOAqxS4ZVZI0uvyqi0yuKh/usBTO7mdlB4oSrcHH9u
         Q+nSiS2qDjEnZD4Ybj69+7D+Op8a6Tfu9rvbk=
Received: by 10.181.139.10 with SMTP id r10mr2810432bkn.64.1227891908596;
        Fri, 28 Nov 2008 09:05:08 -0800 (PST)
Received: by 10.181.22.13 with HTTP; Fri, 28 Nov 2008 09:05:08 -0800 (PST)
Message-ID: <5db95abe0811280905t5290efa4q571a4a4d9885474e@mail.gmail.com>
Date: Fri, 28 Nov 2008 17:05:08 +0000
From: "Ng Vinny" <ngvinny@gmail.com>
To: java-user@lucene.apache.org
Subject: PhraseQuery and non-letter characters
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58520_83361.1227891908594"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_58520_83361.1227891908594
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I'm having an issue with PhraseQuery in which a query for the phrase
"information technology" has among of its matches the strings "information,
technology" and "information. Technology",  which should not be considered
as matches.
Both StopAnalyzer  StandardAnalyzer removes non-letter character at index
time.

Any suggestions?

Thanks.

------=_Part_58520_83361.1227891908594--

From java-user-return-37406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 18:09:45 2008
Return-Path: <java-user-return-37406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51617 invoked from network); 28 Nov 2008 18:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 18:09:45 -0000
Received: (qmail 15458 invoked by uid 500); 28 Nov 2008 18:09:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15431 invoked by uid 500); 28 Nov 2008 18:09:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15420 invoked by uid 99); 28 Nov 2008 18:09:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 10:09:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.221.20 as permitted sender)
Received: from [209.85.221.20] (HELO mail-qy0-f20.google.com) (209.85.221.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 18:08:22 +0000
Received: by qyk13 with SMTP id 13so2312460qyk.5
        for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 10:09:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references;
        bh=OBVIMIhvtc1ulkIE9uB0Ti6Ujzg3MFDJIUX/vWRgkBY=;
        b=UrEv1dmSvgc7i5IhyigSKTf8z0IR1d16UPMvYxKnb4RGXTSYPZhIiVjiAh9m2guudm
         JGG5EQ/UWdeugpzXhv4bknXwO+e9o7MQ3iC1a5lhUvBIQT9Udc3UnYBSIQZZ83y1k0Um
         Ub5pywGgBo/TQNlQbiCKcyZWiZeg8jOhK9Rcs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references;
        b=iWxBBMCv2VZ/fd7JbwWwv85fAGl9hfPfWd8fYTCz1Y0vVHzIY3m6zE9K+KjEGCKmhO
         UM2T4VkSJHwWS2TIXeoyUX3TzK8B3cd/3YQDZNli+SmqH5SBQB+KXGrfzfG1TrcgbmHv
         CAv46WJccYdtfEFhXDT+NqKnMwGh6ikzKs35M=
Received: by 10.214.218.14 with SMTP id q14mr8116331qag.49.1227895749063;
        Fri, 28 Nov 2008 10:09:09 -0800 (PST)
Received: by 10.214.241.8 with HTTP; Fri, 28 Nov 2008 10:09:09 -0800 (PST)
Message-ID: <8c4e68610811281009h587f8cfdu21cb7080648fd1e@mail.gmail.com>
Date: Fri, 28 Nov 2008 18:09:09 +0000
From: "Ian Lea" <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: PhraseQuery and non-letter characters
In-Reply-To: <5db95abe0811280905t5290efa4q571a4a4d9885474e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5db95abe0811280905t5290efa4q571a4a4d9885474e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I suggest you write your own analyzer that doesn't remove non-letter
characters at index time. There might be one out there already, but
not that I can think of off hand.

Instead of leaving the non-letters in place you might consider doing
something with position increments.  I think that would prevent phrase
queries from matching.


--
Ian.


On Fri, Nov 28, 2008 at 5:05 PM, Ng Vinny <ngvinny@gmail.com> wrote:
> Hi,
>
> I'm having an issue with PhraseQuery in which a query for the phrase
> "information technology" has among of its matches the strings "information,
> technology" and "information. Technology",  which should not be considered
> as matches.
> Both StopAnalyzer  StandardAnalyzer removes non-letter character at index
> time.
>
> Any suggestions?
>
> Thanks.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 18:38:53 2008
Return-Path: <java-user-return-37407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66093 invoked from network); 28 Nov 2008 18:38:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 18:38:52 -0000
Received: (qmail 35558 invoked by uid 500); 28 Nov 2008 18:38:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35518 invoked by uid 500); 28 Nov 2008 18:38:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35507 invoked by uid 99); 28 Nov 2008 18:38:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 10:38:57 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.252.110.215] (HELO web56206.mail.re3.yahoo.com) (216.252.110.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Nov 2008 18:37:29 +0000
Received: (qmail 22307 invoked by uid 60001); 28 Nov 2008 18:38:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=1QFAiIi4/I/C4mP54FFt+OWos4U+yA1gxSqJO7mzoHOtHLPPMXtvIMipZDxpdZtDKnf7F+SUw0wpjkvTEjVeL15UM7rW1/shuJkJKgngOG+DDQnE/tr2IFmp8Itc8Zw1r95TWGk9/CyxgHsQVG9AQiscn2ufheafrrnBeq/O+t0=;
X-YMail-OSG: Ql06.wAVM1lnTqWIDaDLLjKhEi2TxgbPjT8GDFxaD4VHIorSorcdbQzj7DqcP3rliOYh2KDm9W7rRZ9f7bcMDZIHRuLWwVeQ29Urm7qaZp3SG16V7mPZf5TB_8gCvBm1IBJvlgK.tc8kbG_MAF5nEwP9AG3kVG.7y8Yp3FtIaN2HWRVgaLCloTkIV6FG9Q--
Received: from [82.99.216.36] by web56206.mail.re3.yahoo.com via HTTP; Fri, 28 Nov 2008 10:38:14 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
Date: Fri, 28 Nov 2008 10:38:14 -0800 (PST)
From: Amir Hossein Jadidinejad <amir.jadidi@yahoo.com>
Subject: Controlled Indexing -New Feature
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1219277903-1227897494=:21817"
Message-ID: <986640.21817.qm@web56206.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1219277903-1227897494=:21817
Content-Type: text/plain; charset=us-ascii

Hi, 
I'm going to index some documents only with known phrases. Let me describe:  
Suppose that I have a controlled vocabulary(a list of some known phrases/words). I intend to
index ONLY these phrases within my documents and have a retrieval model
(for example simple VS-TF.IDF). In way, each index item is one of the predefined
phrase. 
Is it possible to handle this situation with Lucene?
What is the best way?!
Greatly appreciate any comments or answers.
Kind regards,



      
--0-1219277903-1227897494=:21817--

From java-user-return-37408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 20:29:30 2008
Return-Path: <java-user-return-37408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88112 invoked from network); 28 Nov 2008 20:29:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 20:29:30 -0000
Received: (qmail 3319 invoked by uid 500); 28 Nov 2008 20:29:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3284 invoked by uid 500); 28 Nov 2008 20:29:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3273 invoked by uid 99); 28 Nov 2008 20:29:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 12:29:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.2.129.75] (HELO penthesilea.sfs.uni-tuebingen.de) (134.2.129.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 20:28:05 +0000
Received: from [134.2.129.126] (ithaka.sfs.uni-tuebingen.de [134.2.129.126])
	by penthesilea.sfs.uni-tuebingen.de (Postfix) with ESMTP id 544F5C6D6
	for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 21:28:50 +0100 (MET)
Message-ID: <49305509.5000409@sfs.uni-tuebingen.de>
Date: Fri, 28 Nov 2008 21:31:05 +0100
From: Niels Ott <nott@sfs.uni-tuebingen.de>
User-Agent: Thunderbird 2.0.0.18 (X11/20081125)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Deleting from Index by URL field: is it safe?
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I want to safely delete documents from my index. There is an URL field 
that specifies where the document came from.

I'm using something like this:

    indexwriter.deleteDocuments(new Term("URL", myURL));

(inspired by the Lucene in Action Book, page 35.)

I'm uncertain whether this is safe or not: is there a chance that I 
delete documents I would want to keep? How does the matching exactly work.

During indexing, I'm using a KeywordAnalyzer for the URL field in order 
to avoid tokenization.

Best,

    Niels

-- 
Niels Ott
Computational Linguist (B.A.)
http://www.drni.de/niels/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Nov 28 21:10:02 2008
Return-Path: <java-user-return-37409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95896 invoked from network); 28 Nov 2008 21:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Nov 2008 21:10:02 -0000
Received: (qmail 38129 invoked by uid 500); 28 Nov 2008 21:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38102 invoked by uid 500); 28 Nov 2008 21:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38091 invoked by uid 99); 28 Nov 2008 21:10:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 13:10:07 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 21:08:39 +0000
Received: by nf-out-0910.google.com with SMTP id g16so950305nfd.15
        for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 13:09:25 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=C6u+7auk0OOxAeFVf5BBP6ZDA0DCOUmcChNfyVUJP9E=;
        b=a+kuuCYqBko7EMz1IV47tVxFcafB4Gks93mWv7/TeCYAUeeHP7ETnBqTP0yJ3pJUem
         qJEwhvtcJg7VwH5KELawOeKFLf+8ICMBp+bSfd1oimOxFXleiROXaTiM0tHkZ0coYPkq
         /pZt6rdIS3WWJXFym0W0z1uywwEHPPSi7RZuA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=wOTS6k6pyDITxvUw4XYU2bWFJs5S/US4PZlpClZ22LTiyGKsrCDnJ3uoZHgK3acu0e
         9BrsmCR111Smpo39YV23gu9cjfAvQK/WTDpaz0R+MbxiUKZIy0hUvp/nqSXrRkqFu23U
         cNUzGgUZv7DcMP3naU31EcyftIaziEv+STEAo=
Received: by 10.210.16.11 with SMTP id 11mr9274128ebp.186.1227906565201;
        Fri, 28 Nov 2008 13:09:25 -0800 (PST)
Received: from kodapan.lan (c150-155-70-80.bjare.net [80.70.155.150])
        by mx.google.com with ESMTPS id 34sm7238996nfu.24.2008.11.28.13.09.24
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 28 Nov 2008 13:09:24 -0800 (PST)
Message-Id: <0AFDF4EC-314F-4958-BC6C-7997A8006705@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <20731617.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v929.2)
Subject: Re: SpanFirstQuery is not taking wildcard characters (like *) as a logical operator for the preffix
Date: Fri, 28 Nov 2008 22:09:22 +0100
References: <20719556.post@talk.nabble.com> <1E34430F-8E7B-4844-8A45-8C070C84BEEB@gmail.com> <20731617.post@talk.nabble.com>
X-Mailer: Apple Mail (2.929.2)
X-Virus-Checked: Checked by ClamAV on apache.org

There has been several discussions on this list on how to create an  
"auto complete" feature. What solution fits best for you depends on  
your needs and the behavior of your users, i.e. what sort of documents  
it is your index contains and what part of the documents your users  
are searching for.

I think think the most common solution recommended is to use ngrams.  
This is however probably only interesting if you want to "auto  
complete" on small texts such as titles, subject lines, et c.

Personally I prefere training a trie with common user queries (that  
leads to hits users clicks on). This does however require that the  
system have enough user load. See LUCENE-625 for such a trie.


       karl

28 nov 2008 kl. 10.55 skrev naveen.a:

>
> Hi,
>
> Thanks for your reply,
> The actual problem is when the user is entering data in a textfield,  
> the
> suggession list should come below the textfield, so when the  
> character 'l'
> is entered, the suggessions should come as starts with 'l' and if he  
> entered
> the full word say 'library ' and then he gives a space and he  
> continues
> typing for the next word say 'library inf' (actual word is "library
> information"), so here the word "library information" is indexed
> (untokenized or tokenized), now i have to search by the exact  
> sequence, if i
> apply query as "library inf*", the document should be returned, so i  
> am
> looking for lucene advanced search techniques and i thought it can be
> possible with SpanFirstQuery because it can search by sequence, but  
> it cant
> search as a startswith (for "library inf*")
>
>
>
>
> Karl Wettin wrote:
>>
>> SpanTermQuery is a TermQuery and not a WildcardQuery. You could use a
>> SpanRegexQuery. You could also make your own SpanWildcardQuery based
>> on either WildcardQuery or SpanRegexQuery.
>>
>>
>> You should probably tell us a bit about the problem you try to solve
>> rather than asking about the solution you have thought of.
>>
>> 27 nov 2008 kl. 14.47 skrev naveen.a:
>>
>>>
>>> Below is a document in lucene
>>> ----------------------------------------------
>>> ID : 1
>>> 110_a : library information
>>> ----------------------------------------------
>>> Case 1:
>>> Term term1 = new Term("110_a", "library");
>>> SpanFirstQuery spanFirstQuery = new SpanFirstQuery(new
>>> SpanTermQuery(term1),
>>> 1);
>>>
>>> Case 2:
>>> Term term1 = new Term("110_a", "l*");
>>> SpanFirstQuery spanFirstQuery = new SpanFirstQuery(new
>>> SpanTermQuery(term1),
>>> 1);
>>>
>>> if i apply first query, the documnet is found,
>>> but, it is not found for the second query
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/SpanFirstQuery-is-not-taking-wildcard-characters-%28like-*%29-as-a-logical-operator-for-the-preffix-tp20719556p20719556.html
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/SpanFirstQuery-is-not-taking-wildcard-characters-%28like-*%29-as-a-logical-operator-for-the-preffix-tp20719556p20731617.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 29 00:33:45 2008
Return-Path: <java-user-return-37410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58043 invoked from network); 29 Nov 2008 00:33:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2008 00:33:45 -0000
Received: (qmail 49147 invoked by uid 500); 29 Nov 2008 00:33:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49121 invoked by uid 500); 29 Nov 2008 00:33:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49110 invoked by uid 99); 29 Nov 2008 00:33:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 16:33:48 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of german.kondolf@gmail.com designates 74.125.78.27 as permitted sender)
Received: from [74.125.78.27] (HELO ey-out-2122.google.com) (74.125.78.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Nov 2008 00:32:20 +0000
Received: by ey-out-2122.google.com with SMTP id 6so690571eyi.53
        for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 16:32:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=3t97GaQnnxUa8z3SJ3EdI9NJJxYvd/23scO//kIcge0=;
        b=NJOLQlc406ZZ4+3zqGKXHv6y2t2AXOfWIXZ30IgZfw7KH04a+XkuwjZ5q6uHYosv19
         GIvE8yIeRv2x8t1IjTqnnURSM+jzJZOzYR8SrVLM7LyobEZl9amp5OMvYluJNMVQ8ocM
         gvxWh1ytIRickPaDhGYtlFByEpoIoIAaOgxWU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=dibKsB/tPeACeu9ffJmgwv9wNiRJemrOcWIUsU5g7+uW0s/tjq6Db2HJyrLrOoQeXL
         IjqbGdwe1ffptdahec/VQfwhfky2s8jSEH9SA43xnYBge1Od+/rpBP4V63dfIcVcrhir
         EWt2pIv2Yc+8ly/Ck5Hwabm4Uwj0ck3fQUv5M=
Received: by 10.103.24.11 with SMTP id b11mr3374083muj.76.1227918776358;
        Fri, 28 Nov 2008 16:32:56 -0800 (PST)
Received: by 10.102.228.15 with HTTP; Fri, 28 Nov 2008 16:32:56 -0800 (PST)
Message-ID: <76df56980811281632sc11056cw5fe5f996d5e3559f@mail.gmail.com>
Date: Fri, 28 Nov 2008 22:32:56 -0200
From: "German Kondolf" <german.kondolf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Deleting from Index by URL field: is it safe?
In-Reply-To: <49305509.5000409@sfs.uni-tuebingen.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68274_27519090.1227918776342"
References: <49305509.5000409@sfs.uni-tuebingen.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68274_27519090.1227918776342
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It works exactly as it does when you search of that term.

Review in your index creation, if you store it without analyzing it
(Index.UN_TOKENIZED), it will only match that document when you have an
exact URL.

It's possible that the URL is not unique enought in your domain, there is no
other unique identifier that you could use?

I suggest you create a test and try it on a RAMDirectory and see exactly
what happens and what you want!

Regards,
German K.

On Fri, Nov 28, 2008 at 6:31 PM, Niels Ott <nott@sfs.uni-tuebingen.de>wrote:

> Hi all,
>
> I want to safely delete documents from my index. There is an URL field that
> specifies where the document came from.
>
> I'm using something like this:
>
>   indexwriter.deleteDocuments(new Term("URL", myURL));
>
> (inspired by the Lucene in Action Book, page 35.)
>
> I'm uncertain whether this is safe or not: is there a chance that I delete
> documents I would want to keep? How does the matching exactly work.
>
> During indexing, I'm using a KeywordAnalyzer for the URL field in order to
> avoid tokenization.
>
> Best,
>
>   Niels
>
> --
> Niels Ott
> Computational Linguist (B.A.)
> http://www.drni.de/niels/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_68274_27519090.1227918776342--

From java-user-return-37411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 29 00:39:21 2008
Return-Path: <java-user-return-37411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58774 invoked from network); 29 Nov 2008 00:39:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2008 00:39:21 -0000
Received: (qmail 51933 invoked by uid 500); 29 Nov 2008 00:39:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51905 invoked by uid 500); 29 Nov 2008 00:39:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51893 invoked by uid 99); 29 Nov 2008 00:39:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 16:39:26 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of german.kondolf@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Nov 2008 00:37:59 +0000
Received: by mu-out-0910.google.com with SMTP id i10so1402507mue.5
        for <java-user@lucene.apache.org>; Fri, 28 Nov 2008 16:38:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=Ry3TaYPK9AsVGhNNgbRHSl7Ca2GEImEG/FvxsYIRP1c=;
        b=xSwOAYzPcQXalYIJ0K/UN3vRro1b9GZg84dbBp1IIG8zpJBHkJ8z34Q5K6rPiXDaZ4
         F+y+2yQO3axhsy5wgN+lCWxtaAKsc01cXtVeif6PnoP1N7+fz7d8rYldtuHSz6dI8b6/
         rnbBVB6fqS1b8UNot0feWXI0VvaMlZMtTeJoc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=LV11b1Hb4vaELyJNYAxRPDkW7JvFPiQ07OpB84jAM0WZyluV98v3A8eggLGrurQVHR
         u/ZFudBocHy/35hlC9mmB1af69HfLvJIn6mGUToEfWd5w3OsMOZixtjd3gZPxyPk5rmQ
         zzWGL5m+yNhIQrlRNLpjOJNbEDeIJMLJyZmL0=
Received: by 10.103.161.16 with SMTP id n16mr3377128muo.79.1227919114948;
        Fri, 28 Nov 2008 16:38:34 -0800 (PST)
Received: by 10.102.228.15 with HTTP; Fri, 28 Nov 2008 16:38:34 -0800 (PST)
Message-ID: <76df56980811281638g6736daaegefbd945712a33fbf@mail.gmail.com>
Date: Fri, 28 Nov 2008 22:38:34 -0200
From: "German Kondolf" <german.kondolf@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Controlled Indexing -New Feature
In-Reply-To: <986640.21817.qm@web56206.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_68349_33036801.1227919114939"
References: <986640.21817.qm@web56206.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_68349_33036801.1227919114939
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could use a "reverse" stop-word filter.

The straight "StopFilter" actually removes the keywords that match with a
given Set of words, you could do the reverse logic of that an remove ALL
keywords that doesn't match that Set.

Take a look at StopFilter and StandardAnalyzer ;)

On Fri, Nov 28, 2008 at 4:38 PM, Amir Hossein Jadidinejad <
amir.jadidi@yahoo.com> wrote:

> Hi,
> I'm going to index some documents only with known phrases. Let me describe:
> Suppose that I have a controlled vocabulary(a list of some known
> phrases/words). I intend to
> index ONLY these phrases within my documents and have a retrieval model
> (for example simple VS-TF.IDF). In way, each index item is one of the
> predefined
> phrase.
> Is it possible to handle this situation with Lucene?
> What is the best way?!
> Greatly appreciate any comments or answers.
> Kind regards,
>
>
>
>

------=_Part_68349_33036801.1227919114939--

From java-user-return-37412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 29 07:04:50 2008
Return-Path: <java-user-return-37412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78251 invoked from network); 29 Nov 2008 07:04:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2008 07:04:49 -0000
Received: (qmail 94320 invoked by uid 500); 29 Nov 2008 07:04:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94288 invoked by uid 500); 29 Nov 2008 07:04:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94275 invoked by uid 99); 29 Nov 2008 07:04:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Nov 2008 23:04:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.252.110.215] (HELO web56206.mail.re3.yahoo.com) (216.252.110.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 29 Nov 2008 07:03:26 +0000
Received: (qmail 42923 invoked by uid 60001); 29 Nov 2008 07:03:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=PszvvztaSBQAo+TOtXyrpWiCY3rXzUMCG6an0SD6xJGz8mWYpTjs98weYLvQuiZjZ7fwoiukWvfBfaIsKfTp39wk8WuNb/EsfVxJsSMOJyq6v6PGcQPta4ff4pmpRtbM03n/wZXPCXWYbgCBxYNaf4LF644R0Bc4CpFS/jzOm1A=;
X-YMail-OSG: drOlHmQVM1nsAgqBZTtnr3zlOpvmqu2M6quVoSa3cyx5XYss8tuZzG71HJ93iBprUF.xCGvJpPGQBExV2JbB45eWJigM84vMG.h68YjR.vkTPVi2Gdo.I0YhKJMJabE_mGy2isV0nPz5KvtdwmQzYU60JwviJgnUvR9T8P36Xwo_f4Io2qE5WuBRDq9u
Received: from [91.98.7.77] by web56206.mail.re3.yahoo.com via HTTP; Fri, 28 Nov 2008 23:03:10 PST
X-Mailer: YahooMailRC/1155.32 YahooMailWebService/0.7.260.1
References: <986640.21817.qm@web56206.mail.re3.yahoo.com> <76df56980811281638g6736daaegefbd945712a33fbf@mail.gmail.com>
Date: Fri, 28 Nov 2008 23:03:10 -0800 (PST)
From: Amir Hossein Jadidinejad <amir.jadidi@yahoo.com>
Subject: Re: Controlled Indexing -New Feature
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1178313736-1227942190=:42466"
Message-ID: <171262.42466.qm@web56206.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1178313736-1227942190=:42466
Content-Type: text/plain; charset=us-ascii

Yes, It's good to filter words but suppose that my controlled vocabulary contains synonyms and etc.Exactly, I want to supervise on indexing process.

Thank you very much.


________________________________
From: German Kondolf <german.kondolf@gmail.com>
To: java-user@lucene.apache.org
Sent: Friday, November 28, 2008 7:38:34 PM
Subject: Re: Controlled Indexing -New Feature

You could use a "reverse" stop-word filter.

The straight "StopFilter" actually removes the keywords that match with a
given Set of words, you could do the reverse logic of that an remove ALL
keywords that doesn't match that Set.

Take a look at StopFilter and StandardAnalyzer ;)

On Fri, Nov 28, 2008 at 4:38 PM, Amir Hossein Jadidinejad <
amir.jadidi@yahoo.com> wrote:

> Hi,
> I'm going to index some documents only with known phrases. Let me describe:
> Suppose that I have a controlled vocabulary(a list of some known
> phrases/words). I intend to
> index ONLY these phrases within my documents and have a retrieval model
> (for example simple VS-TF.IDF). In way, each index item is one of the
> predefined
> phrase.
> Is it possible to handle this situation with Lucene?
> What is the best way?!
> Greatly appreciate any comments or answers.
> Kind regards,
>
>
>
>



      
--0-1178313736-1227942190=:42466--

From java-user-return-37413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 29 17:46:15 2008
Return-Path: <java-user-return-37413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81269 invoked from network); 29 Nov 2008 17:46:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2008 17:46:15 -0000
Received: (qmail 29469 invoked by uid 500); 29 Nov 2008 17:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29445 invoked by uid 500); 29 Nov 2008 17:46:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29434 invoked by uid 99); 29 Nov 2008 17:46:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Nov 2008 09:46:18 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of stopman@gmail.com designates 209.85.146.181 as permitted sender)
Received: from [209.85.146.181] (HELO wa-out-1112.google.com) (209.85.146.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Nov 2008 17:44:51 +0000
Received: by wa-out-1112.google.com with SMTP id n4so933306wag.5
        for <java-user@lucene.apache.org>; Sat, 29 Nov 2008 09:45:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:mime-version:content-type;
        bh=iiE1DedXpwLYBMdoy9gBHdxG2c6WXY+GzJ59RXhuNtk=;
        b=B3faRBNetrMGMszcLqR4AbrrL2HFs0ovk6pV5SwxkT1ZHDmlo7fNZNQNA1NNmecx50
         srVrjDhC9wG9+KZV7pSxFJz2UpkSLNS0Hylnd16xGYDQ7nqvzHj4NWq4dl81bVOQpRu1
         X5deggJb4HmNscEd/RW10+LDNZ1nYRhiiLf2s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Gfszfywhtmuki52IxVq/U4rUcaWWWEL0a4DIVHpZlhZmXsBmvm8+Vu3SE3edOHnmxl
         HwJ2BDHCVROLnJjSvCJyHM7WyZ2JqrVIi1kgkb+SvQp1Ur4k0lCYpS5n9rC8SSZYSXu/
         BrqUdBcVAb62n9DCaLHtRMmY4NaykVEyfdlr0=
Received: by 10.114.210.2 with SMTP id i2mr5272061wag.47.1227980738504;
        Sat, 29 Nov 2008 09:45:38 -0800 (PST)
Received: by 10.114.124.14 with HTTP; Sat, 29 Nov 2008 09:45:38 -0800 (PST)
Message-ID: <652776090811290945o7607b0bbnd99753722c25c79e@mail.gmail.com>
Date: Sat, 29 Nov 2008 09:45:38 -0800
From: "Michael Stoppelman" <stopman@gmail.com>
To: java-user@lucene.apache.org
Subject: indexing issue
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_51427_21269188.1227980738486"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_51427_21269188.1227980738486
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

I've got an indexing issue I think other folks might be interested in
hearing about and I wanted to get feedback before I went ahead and
implemented a new method.

Currently, the way we update indices is by sending individual delete/add
document requests to all our search boxes individually. Each box is doing
about 20-30qps while this is happening. The problem I'm seeing is that when
a segment from the index is merged [honestly I don't know that much about
segment merging] (our merge factor is set to 5) and an old highly used
segment of the index is lost from the disk cache; most of the search
requests to that box get prohibitively slow 10-80+ secs and I see pg/in +
pg/out stats spike sar. I'm planning on implementing a method similar to the
SOLR model using the rsync method that Doug Cutting outlined a long time ago
on this list and forcing the new files into the disk cache using fadvice.

Is there another strategy here? Could I create a merge policy that forces
new segments into the disk cache before lucene nukes the old ones?

Thanks,
M

------=_Part_51427_21269188.1227980738486--

From java-user-return-37414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Nov 29 19:11:55 2008
Return-Path: <java-user-return-37414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15531 invoked from network); 29 Nov 2008 19:11:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Nov 2008 19:11:55 -0000
Received: (qmail 93488 invoked by uid 500); 29 Nov 2008 19:11:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93468 invoked by uid 500); 29 Nov 2008 19:11:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93457 invoked by uid 99); 29 Nov 2008 19:11:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Nov 2008 11:11:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 209.85.198.235 as permitted sender)
Received: from [209.85.198.235] (HELO rv-out-0506.google.com) (209.85.198.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Nov 2008 19:10:31 +0000
Received: by rv-out-0506.google.com with SMTP id f6so2234257rvb.5
        for <java-user@lucene.apache.org>; Sat, 29 Nov 2008 11:11:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender
         :to:subject:in-reply-to:mime-version:content-type
         :content-transfer-encoding:content-disposition:references
         :x-google-sender-auth;
        bh=K4UErihQu/THPOkUMuHASqfnE3Pp9cyy8mmVfOwjNcU=;
        b=p61HkRjSQfjsDGjQcfyAVXDxpPzYzVPDMKp3H86l9fffxnUVSBPhWervPqs8WuoSc0
         u+oeML33JBLz9BT1lHA/ZFCFJBKJshNeO+8Nq05rHOu9zjEP9nwJdiLYA+VgMZyYol8t
         RYVaekUY//s2kYNdA/3UC9U4pOdoSyHiQCrMc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version
         :content-type:content-transfer-encoding:content-disposition
         :references:x-google-sender-auth;
        b=uo2eNMePOuAEsjzJRoqg/Eos5TKMjoXb8t9j2fS/HycjXk7gQ3STXKTaxjbVrMke6j
         /cH32U1P44V7hnv9tY+y0SQWkJoufuFf+25tfylZUFs+i1L9cRiNY13H2hH2YLr2A3eh
         EhbwSPK0+eqYqecWIcM2kYjNyl2mn8mVI9ShA=
Received: by 10.140.166.16 with SMTP id o16mr4372021rve.25.1227985878364;
        Sat, 29 Nov 2008 11:11:18 -0800 (PST)
Received: by 10.141.212.15 with HTTP; Sat, 29 Nov 2008 11:11:18 -0800 (PST)
Message-ID: <c68e39170811291111m7f176669je783db634209d021@mail.gmail.com>
Date: Sat, 29 Nov 2008 14:11:18 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: indexing issue
In-Reply-To: <652776090811290945o7607b0bbnd99753722c25c79e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <652776090811290945o7607b0bbnd99753722c25c79e@mail.gmail.com>
X-Google-Sender-Auth: fc63a54290aa90d0
X-Virus-Checked: Checked by ClamAV on apache.org

On Sat, Nov 29, 2008 at 12:45 PM, Michael Stoppelman <stopman@gmail.com> wrote:
> Hi all,
>
> I've got an indexing issue I think other folks might be interested in
> hearing about and I wanted to get feedback before I went ahead and
> implemented a new method.
>
> Currently, the way we update indices is by sending individual delete/add
> document requests to all our search boxes individually. Each box is doing
> about 20-30qps while this is happening. The problem I'm seeing is that when
> a segment from the index is merged [honestly I don't know that much about
> segment merging] (our merge factor is set to 5) and an old highly used
> segment of the index is lost from the disk cache; most of the search
> requests to that box get prohibitively slow 10-80+ secs and I see pg/in +
> pg/out stats spike sar.

> I'm planning on implementing a method similar to the
> SOLR model using the rsync method that Doug Cutting outlined a long time ago
> on this list and forcing the new files into the disk cache using fadvice.

FYI, if you don't actually want to use rsync, Solr has very recently
implemented this in pure Java.
But forcing new files into the cache means ejecting currently used
files from the cache (for queries currently in flight).  Doesn't seem
any way to really win here if you don't have enough memory to hold the
critical parts of both indexes.

I think Mike pointed out in a recent post that it would be nice to
advise the kernel not to cache files being written during merging.  In
Solr, we would want to allow the same thing when copying over new
segment files during replication.  Unfortunately, I don't think there
is a way to do this through Java.

-Yonik

> Is there another strategy here? Could I create a merge policy that forces
> new segments into the disk cache before lucene nukes the old ones?
>
> Thanks,
> M

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-37415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 30 02:13:17 2008
Return-Path: <java-user-return-37415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36942 invoked from network); 30 Nov 2008 02:13:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2008 02:13:17 -0000
Received: (qmail 63654 invoked by uid 500); 30 Nov 2008 02:13:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63620 invoked by uid 500); 30 Nov 2008 02:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63609 invoked by uid 99); 30 Nov 2008 02:13:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Nov 2008 18:13:21 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Nov 2008 02:11:54 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1409652fgb.27
        for <java-user@lucene.apache.org>; Sat, 29 Nov 2008 18:12:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=mu3MaP2t9wRsdLxgUOHxiY+V8yuYktA+quSaA2czGLQ=;
        b=gXI2mtwCgkvhUmIv2m6W7b5UrZ6GxQ+XC7xxPThiX9anZvASCHZoD/1LG+rNaJoma9
         oaxUnLOb2NXphkPNEglzNBo/ZBFiIPXwp8D9XaArmS5HBbl8lOvdQb8N4xujol5RTEQZ
         zulDwgTdnxBW7GkcC3uyLUGpFkS1uQeWDChkc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=lUZ3RYrKIg+b1E5+f5BTC6ezloDM/2ZeGTYDkcwdoBwFpBkIPgWFpV5hgd5qWHqByd
         oaV6BUp8c6x4H0VozGrPbfaiuVsbPtRsNAQJ5uDefcP4b95E98KcArLWWfMneXf14vKn
         JhOx9OO596khlNf/SP+kuTS/LcgLY6UathVw4=
Received: by 10.86.95.8 with SMTP id s8mr5757841fgb.79.1228011150490;
        Sat, 29 Nov 2008 18:12:30 -0800 (PST)
Received: by 10.86.25.19 with HTTP; Sat, 29 Nov 2008 18:12:30 -0800 (PST)
Message-ID: <359a92830811291812h726a3828l62cd50e65803f9ff@mail.gmail.com>
Date: Sat, 29 Nov 2008 21:12:30 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: controlled indexing with Lucene
In-Reply-To: <542223.85326.qm@web56205.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59404_3942864.1228011150486"
References: <542223.85326.qm@web56205.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_59404_3942864.1228011150486
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm not entirely clear what you're trying to accomplish, but there's
a bunch of options.

You could just index the phrases as normal text, possibly with
positionincrementgaps (assuming more than one phrase is
possible in a field in a document). Then you could use SpanQuerys
to accomplish the "simple" form (choosing suitable increment
gaps and suitable distances on your span queries would insure that
hits wouldn't span phrases). You could then use regular queries
to accomplish the non-simple queries as they're pretty much unaffected
by increment gaps.

If that's total gibberish, perhaps a more complete example would allow
a clearer response.

Best
Erick

On Fri, Nov 28, 2008 at 9:45 AM, Amir Hossein Jadidinejad <
amir.jadidi@yahoo.com> wrote:

> Hi,
> I'm going to index some documents only with known phrases. Let me describe:
> Suppose that I have a controlled vocabulary of phrases (A list of some
> candidate phrases). I intend to
> index ONLY these phrases within my documents and have a retrieval model
> (for example simple VS-TF.IDF) that each index item is a predefined
> phrase.
> Could anyone tell me how to do it with Lucene?
> Greatly appreciate any comment or answer.
> Kind regards.
>
>
>

------=_Part_59404_3942864.1228011150486--

From java-user-return-37416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 30 05:08:46 2008
Return-Path: <java-user-return-37416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63777 invoked from network); 30 Nov 2008 05:08:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2008 05:08:46 -0000
Received: (qmail 1110 invoked by uid 500); 30 Nov 2008 05:08:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1075 invoked by uid 500); 30 Nov 2008 05:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1064 invoked by uid 99); 30 Nov 2008 05:08:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Nov 2008 21:08:49 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of volenin@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Nov 2008 05:07:22 +0000
Received: by fg-out-1718.google.com with SMTP id l27so1436974fgb.27
        for <java-user@lucene.apache.org>; Sat, 29 Nov 2008 21:08:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:in-reply-to:mime-version:content-type:references;
        bh=epbGaB4PgzDmihze5Bgn/qutfZonBRLQF1lCY1vcMok=;
        b=XNoLudOBlwk480b+cIR+7bydV9eIUagzw6blQJLKIn0dXkOuy4wNhVbnuX0Di9tNb6
         CkKZB9lScPuBSqVf2cZmnaBmaHvuV3yk62Fo+w3UgH4kdMkaFLvlyJGSt8FfgL3P2kOK
         2y1mdjIxuFI3Atdq3FYq8YHMGmhXHqARSE6VY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version
         :content-type:references;
        b=DSr9mMtboAjM0XcoKBZlBQ6H0EKcVM117Qa64uPhx410s2ZCdKxJCY7K2+Iro51SKc
         XvL269bgbbCRvtlMWPtGCE8CC4rKFFO+QBIfTsPB1GtvCGgy0ctiqWgIPNdbYxosPHit
         i5YdbFCd/j7VVie5RrrnhF9anphJhZiYNEX9o=
Received: by 10.86.59.18 with SMTP id h18mr5845081fga.31.1228021687957;
        Sat, 29 Nov 2008 21:08:07 -0800 (PST)
Received: by 10.86.31.11 with HTTP; Sat, 29 Nov 2008 21:08:07 -0800 (PST)
Message-ID: <594203920811292108x10fbf3e3laebed33a3315c476@mail.gmail.com>
Date: Sun, 30 Nov 2008 00:08:07 -0500
From: "Vlad Olenin" <volenin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: calculating score - implementing your own 'Scorer' - how to?..
In-Reply-To: <75B048D1-9300-4EAD-8F4C-960E4548BB01@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_48075_14150470.1228021687949"
References: <594203920811252047s5c4d5fb4n555e93413219f70e@mail.gmail.com>
	 <75B048D1-9300-4EAD-8F4C-960E4548BB01@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_48075_14150470.1228021687949
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the hints, Grant. I'm not sure if using boost on its own will
help though.. From my limited understanding, by default, the product
(boost_val1 * boost_val2) is always greater than any of the multipliers
boost_val1 or boost_val2....

If it were possible to override the logic on how the final score for the
document is getting calculated based on the individual boost values of the
fields, then it might possibly work.... Do you know if it's possible to
override this logic? I'll have a look on the 'functions' package that you
mentioned - probably that's where it's done..

Thanks,

Vlad



On Fri, Nov 28, 2008 at 7:42 AM, Grant Ingersoll <gsingers@apache.org>wrote:

> Hi Vlad,
>
> I believe you can achieve this using the function package (i.e. Function
> Queries, org.apache.lucene.search.function).    The other thing that comes
> to mind is, if you don't truly need the bit mask for other things, is to
> encode it into the Field as a boost value.  This may be complicated by the
> lack of granularity in boost encoding, but it might work for you.
>
> -Grant
>
>
>
>
> On Nov 25, 2008, at 11:47 PM, Vlad Olenin wrote:
>
>  Hi,
>>
>> I'm new to Lucene, so looking for some guidance as to the most efficient /
>> appropriate way to implement the following functionality.
>>
>>
>> * Each Document consists of a number of fields
>> * Each Field value, when indexed, can have different 'score' value
>> associated with it
>> ** for simplicity, the score is presented as a bit mask
>> ** each field value might have different score for the same field
>> ** each field value might have different score for the different fields
>> *** eg, if doc1.field1.value = "val1, val2, val3", then index over field1
>> might have different score values associated with each value (here are
>> {docId.field, score} pairs):
>> ***       val1 = {doc1.field1, '0011'},
>> ***       val2 = {doc1.field1, '0101'},
>> ***       val3 = {doc1.field1, '1011'}
>> * when the search is done, the final score for the document must be
>> calculated based on the bit combination of scores, eg:
>> ** query = 'val1, val2', res = {doc1, '0001'}  (0011 & 0101)
>> ** query = 'val1, val3', res = {doc1, '0011'}  (0011 & 1011)
>>
>>
>> How do I implement the above scoring logic? Thanks,
>>
>> Vlad
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_48075_14150470.1228021687949--

From java-user-return-37417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Nov 30 16:12:22 2008
Return-Path: <java-user-return-37417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68121 invoked from network); 30 Nov 2008 16:12:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Nov 2008 16:12:22 -0000
Received: (qmail 25686 invoked by uid 500); 30 Nov 2008 16:12:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25642 invoked by uid 500); 30 Nov 2008 16:12:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25631 invoked by uid 99); 30 Nov 2008 16:12:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Nov 2008 08:12:25 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Nov 2008 16:10:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1L6ota-0000cQ-Gx
	for java-user@lucene.apache.org; Sun, 30 Nov 2008 08:11:42 -0800
Message-ID: <20759051.post@talk.nabble.com>
Date: Sun, 30 Nov 2008 08:11:42 -0800 (PST)
From: Marc Sturlese <marc.sturlese@gmail.com>
To: java-user@lucene.apache.org
Subject: Boosting fields are searching or indexing time?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: marc.sturlese@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hey there,
I have a simple question about boosting fields,
I have a lucene indexer app that indexes data from a db. At indexing time I
give different boost to the fields depending on if the field is title or
content. Would it be the same to set the boost at searching time instead of
at indexing? I mean, the results of the search would be exactly the same?

Thanks in advance
-- 
View this message in context: http://www.nabble.com/Boosting-fields-are-searching-or-indexing-time--tp20759051p20759051.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


