From java-user-return-46588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 05:56:11 2010
Return-Path: <java-user-return-46588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26006 invoked from network); 1 Jul 2010 05:56:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 05:56:11 -0000
Received: (qmail 76011 invoked by uid 500); 1 Jul 2010 05:56:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75723 invoked by uid 500); 1 Jul 2010 05:56:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75713 invoked by uid 99); 1 Jul 2010 05:56:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 05:56:03 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.202.165.181] (HELO smtpauth01.prod.mesa1.secureserver.net) (64.202.165.181)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Jul 2010 05:55:55 +0000
Received: (qmail 32374 invoked from network); 1 Jul 2010 05:54:33 -0000
Received: from unknown (81.219.54.251)
  by smtpauth01.prod.mesa1.secureserver.net (64.202.165.181) with ESMTP; 01 Jul 2010 05:54:32 -0000
Message-ID: <4C2C2D87.40807@getopt.org>
Date: Thu, 01 Jul 2010 07:54:15 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.9) Gecko/20100317 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Document Order in IndexWriter.addIndexes
References: <AANLkTimKQj_kBddR0eFyPLwS5agYaUxAVxYl4An8YdxG@mail.gmail.com> 	<4C2AE31A.7070906@getopt.org> <AANLkTinZCUpGhYcCIjg_D5QH7gyDvzxRmrawZVS7hav-@mail.gmail.com>
In-Reply-To: <AANLkTinZCUpGhYcCIjg_D5QH7gyDvzxRmrawZVS7hav-@mail.gmail.com>
X-Enigmail-Version: 1.0.1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 2010-06-30 22:16, Apoorv Sharma wrote:
> This implies there is no way to merge two parallel indexes(based on parallel
> reader) to get a new parallel index. Correct me if I am wrong.

Do you mean sequentially, using IW.addIndexes(new
IndexReader[]{index1,index2}), so that the fields from documents in one
index become attached to the fields in the other index under the same
doc IDs? No, it absolutely doesn't work this way.

Or do you mean to merge the two indexes in parallel? Then just open them
with ParallelReader ;) and submit this parallel reader to
IW.addIndexes(). ParallelReader doesn't expose sub-readers to
SegmentMerger, it returns null from getSequentialSubReaders() so that
SegmentMerger has to use the documents as they are returned from
ParallelReader.document(int). Net effect is that fields from sub-readers
become merged on the same doc id, and will be thus recorded in the
output index.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 09:20:07 2010
Return-Path: <java-user-return-46589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21409 invoked from network); 1 Jul 2010 09:20:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 09:20:06 -0000
Received: (qmail 25286 invoked by uid 500); 1 Jul 2010 09:20:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24886 invoked by uid 500); 1 Jul 2010 09:20:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24877 invoked by uid 99); 1 Jul 2010 09:20:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 09:20:00 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [80.146.250.76] (HELO mail.lenze.com) (80.146.250.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 09:19:52 +0000
From: "Kolhoff, Jacqueline - ENCOWAY" <Kolhoff@encoway.de>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 1 Jul 2010 11:19:29 +0200
Subject: Lucene and Chinese language
Thread-Topic: Lucene and Chinese language
Thread-Index: AcsY/Mbd1tw8wKJKQ226vJ2nWZxi6wAAGbYAAABSWoA=
Message-ID: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: multipart/alternative;
	boundary="_000_137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4ZDE070lenzeco_"
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Jul 2010 09:19:32.0667 (UTC) FILETIME=[841130B0:01CB18FE]
Received-SPF: none
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4ZDE070lenzeco_
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64

DQpIaSENCg0KV2UgYXJlIHVzaW5nIGx1Y2VuZSBpbiBvdXIgcHJvamVjdCB0byBzZWFyY2ggdGhy
b3VnaCBpbmZvcm1hdGlvbiBvYmplY3RzIHdoaWNoIHdvcmtzIGZpbmUuIEZvciBpbmRleGluZyB3
ZSB1c2UgdGhlIFN0YW5kYXJkQW5hbHl6ZXIuDQpOb3csIHdlIGhhdmUgdG8gc3VwcG9ydCB0aGUg
Q2hpbmVzZSBsYW5ndWFnZS4gSSBmb3VuZCBvdXQgdGhhdCB0aGUgQ2hpbmVzZSB3b3JkcyBhbmQg
bGV0dGVycyBhcmUgY29ycmVjdGx5IHNhdmVkIGluIHRoZSBpbmRleCBidXQgdGhlIHF1ZXJ5IHRv
IHNlYXJjaCBmb3IgdGhlbSBkb2VzIG5vdCB3b3JrLiBFeGFtcGxlOiBpbiBFbmdsaXNoIGxhbmd1
YWdlIHRoZSBxdWVyeSBpcyChsHRleHShsSB3aGljaCB3ZSBwYXJzZSB0byChsCp0ZXh0KqGxLiBJ
ZiB3ZSBzZWFyY2ggZm9yIENoaW5lc2Ugd29yZHMgLyBwaHJhc2VzIGxpa2UgobC38Mm9tqu3vcrp
s8ehsXRoZSBxdWVyeSBpcyChsCq38Mm9tqu3vcrps8cqobAgYnV0IHRoZXJlIGFyZSBubyBzZWFy
Y2ggcmVzdWx0cy4gSWYgdGhlIHF1ZXJ5IHBsYWNlcyBibGFua3MgYmV0d2VlbiB0aGUgc2luZ2xl
IGxldHRlcnMgLyBzeW1ib2xzIGxpa2UgdGhpcyChsCq38CDJvSC2qyC3vSDK6SCzxyqhsCB3ZSBh
cmUgZ2V0dGluZyByZXN1bHRzLiBEb2VzIHRoZSBTdGFuZGFyZEFuYWx5emVyIGludGVycHJldCBl
YWNoIENoaW5lc2UgbGV0dGVyIGFzIG9uZSB3b3JkPyBXaGF0IGFyZSBiZXN0IHByYWN0aWNlcyBm
b3IgdGhpcyBjYXNlPyBTaGFsbCB3ZSB1c2UgYW5vdGhlciBhbmFseXplciAoQ2hpbmVzZSBhbmFs
eXplcik/IE9yIGlzIGl0IGJldHRlciB0byByZXBsYWNlIHRoZSBxdWVyeSBwYXJzZXIgaW4gdGhp
cyBjYXNlPw0KDQpSZWdhcmRzLA0KSmFjcXVlbGluZS4NCg==

--_000_137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4ZDE070lenzeco_--

From java-user-return-46590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 09:31:05 2010
Return-Path: <java-user-return-46590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26203 invoked from network); 1 Jul 2010 09:31:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 09:31:05 -0000
Received: (qmail 46921 invoked by uid 500); 1 Jul 2010 09:31:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46636 invoked by uid 500); 1 Jul 2010 09:31:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46628 invoked by uid 99); 1 Jul 2010 09:30:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 09:30:59 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lwl.roger@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 09:30:53 +0000
Received: by vws19 with SMTP id 19so3079732vws.35
        for <java-user@lucene.apache.org>; Thu, 01 Jul 2010 02:30:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=ntPMTBBd7tHljFk/TUFXf3vGNgi65mA2ltZTnYf2+ug=;
        b=ggBbQaJaIgV4JkR26f227kF82h+bpzHHsUJq6X4aA7ccH2/AV6o+n9IBxcNDsjssUC
         flQTXlcQSuAQM9uqwr9oWxGiUehpJV3kDVyXXwLq0RA8DR8vmYHeoJx+TZSKDZKez17J
         UZmWBU1T7b/IXknEMiDyhr1ldlRB3J9KmmGaU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uQtHvGlKL0ACUECMZAKpdNomToX74fdksVmXmoul2n5cb+C0UdGJKeR8VvsB5kBzC3
         o9Zw5e4MRK2HQvKw5Of//WcnR4rD7L+949xxjh4Ys4H8navA6PhcL+ZldiRL8bLwj5qf
         DYcszt3MV+9O1yq+Xfcm3m90sbJTdE7QIPbNE=
MIME-Version: 1.0
Received: by 10.220.48.15 with SMTP id p15mr5472434vcf.236.1277976632677; Thu, 
	01 Jul 2010 02:30:32 -0700 (PDT)
Received: by 10.220.199.201 with HTTP; Thu, 1 Jul 2010 02:30:32 -0700 (PDT)
In-Reply-To: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com>
References: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com>
Date: Thu, 1 Jul 2010 17:30:32 +0800
Message-ID: <AANLkTil0eDeIDJvZWO1l0BZddvjSaAJXfGkIWy3GqioM@mail.gmail.com>
Subject: Re: Lucene and Chinese language
From: lwl <lwl.roger@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e647646e38d553048a501f09
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e647646e38d553048a501f09
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

yes, the StandardAnalyzer interpret each Chinese letter as one word.
Better analyzers for chinese are here:
http://hi.baidu.com/lewutian/blog/item/ca61060a06914b1394ca6b25.html

=D4=DA 2010=C4=EA7=D4=C21=C8=D5 =CF=C2=CE=E75:19=A3=ACKolhoff, Jacqueline -=
 ENCOWAY <Kolhoff@encoway.de>=D0=B4=B5=C0=A3=BA

>
> Hi!
>
> We are using lucene in our project to search through information objects
> which works fine. For indexing we use the StandardAnalyzer.
> Now, we have to support the Chinese language. I found out that the Chines=
e
> words and letters are correctly saved in the index but the query to searc=
h
> for them does not work. Example: in English language the query is =A1=B0t=
ext=A1=B1
> which we parse to =A1=B0*text*=A1=B1. If we search for Chinese words / ph=
rases like
> =A1=B0=B7=F0=C9=BD=B6=AB=B7=BD=CA=E9=B3=C7=A1=B1the query is =A1=B0*=B7=
=F0=C9=BD=B6=AB=B7=BD=CA=E9=B3=C7*=A1=B0 but there are no search results. I=
f the
> query places blanks between the single letters / symbols like this =A1=B0=
*=B7=F0 =C9=BD =B6=AB =B7=BD
> =CA=E9 =B3=C7*=A1=B0 we are getting results. Does the StandardAnalyzer in=
terpret each
> Chinese letter as one word? What are best practices for this case? Shall =
we
> use another analyzer (Chinese analyzer)? Or is it better to replace the
> query parser in this case?
>
> Regards,
> Jacqueline.
>

--0016e647646e38d553048a501f09--

From java-user-return-46591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 09:31:54 2010
Return-Path: <java-user-return-46591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26855 invoked from network); 1 Jul 2010 09:31:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 09:31:54 -0000
Received: (qmail 48912 invoked by uid 500); 1 Jul 2010 09:31:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48809 invoked by uid 500); 1 Jul 2010 09:31:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48800 invoked by uid 99); 1 Jul 2010 09:31:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 09:31:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of torindan@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 09:31:42 +0000
Received: by vws19 with SMTP id 19so3079519vws.35
        for <java-user@lucene.apache.org>; Thu, 01 Jul 2010 02:30:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=eKRkz4hXlLpAzV6ZnZhzUSl8VTAS/zlRuoBO4BinsZ0=;
        b=cnf8nizkFXKx0AGK0SlAXZO2Bt29BOihsLidiOHw9eKCrND5KnAkGCg8q7s3D0ZOkg
         kJ4D4OL4NEfY0wWBmRDQj/OLvYnGUQz5TU+PGgbsb6/APfpiEo1OdFjCj1oWiLKp5dpV
         LdkfiHsF+tFalkpzloj5jTOUBsYPW4rrIr5G4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=drjAzQOhkulmwfNgCREreYb6Zu577qQsXd/7dnLKp34QH4Sc+rOeEyJpsMivjPHdPa
         cu1+wmSA5HkHmcGIRym8ByRqxymoE8Y58Qukfpk/m1zOdwqEf2aucUeGQxgdVDiUenE+
         cdYw75i9b47mxJ1ShA6KC1O1AvN1NuSq/pKi8=
MIME-Version: 1.0
Received: by 10.229.184.10 with SMTP id ci10mr5928596qcb.138.1277976621277; 
	Thu, 01 Jul 2010 02:30:21 -0700 (PDT)
Received: by 10.229.96.195 with HTTP; Thu, 1 Jul 2010 02:30:21 -0700 (PDT)
In-Reply-To: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com>
References: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com>
Date: Thu, 1 Jul 2010 12:30:21 +0300
Message-ID: <AANLkTikcGfPdbfV3CcVBfK_8iVWC8hX8EC09PT9x51rl@mail.gmail.com>
Subject: Re: Lucene and Chinese language
From: =?UTF-8?B?RGFuaWwgxaJPUklO?= <torindan@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64b03988ae102048a501e2b
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64b03988ae102048a501e2b
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Try to use CJK analyzer for both indexing and searching chinese language.
Then you won't need "text"->"*text*" transformation.

There might be some false positives in the results though.
You can also may want to try smartcn analyzer which is dictionary based, bu=
t
I have no expertise to evaluate the results (we still use CJK for asian
languages, as there are no complains so far)


2010/7/1 Kolhoff, Jacqueline - ENCOWAY <Kolhoff@encoway.de>

>
> Hi!
>
> We are using lucene in our project to search through information objects
> which works fine. For indexing we use the StandardAnalyzer.
> Now, we have to support the Chinese language. I found out that the Chines=
e
> words and letters are correctly saved in the index but the query to searc=
h
> for them does not work. Example: in English language the query is =E2=80=
=9Ctext=E2=80=9D
> which we parse to =E2=80=9C*text*=E2=80=9D. If we search for Chinese word=
s / phrases like
> =E2=80=9C=E4=BD=9B=E5=B1=B1=E4=B8=9C=E6=96=B9=E4=B9=A6=E5=9F=8E=E2=80=9Dt=
he query is =E2=80=9C*=E4=BD=9B=E5=B1=B1=E4=B8=9C=E6=96=B9=E4=B9=A6=E5=9F=
=8E*=E2=80=9C but there are no search results. If the
> query places blanks between the single letters / symbols like this =E2=80=
=9C*=E4=BD=9B =E5=B1=B1 =E4=B8=9C =E6=96=B9
> =E4=B9=A6 =E5=9F=8E*=E2=80=9C we are getting results. Does the StandardAn=
alyzer interpret each
> Chinese letter as one word? What are best practices for this case? Shall =
we
> use another analyzer (Chinese analyzer)? Or is it better to replace the
> query parser in this case?
>
> Regards,
> Jacqueline.
>

--0016e64b03988ae102048a501e2b--

From java-user-return-46592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 10:35:17 2010
Return-Path: <java-user-return-46592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53644 invoked from network); 1 Jul 2010 10:35:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 10:35:17 -0000
Received: (qmail 25444 invoked by uid 500); 1 Jul 2010 10:35:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24902 invoked by uid 500); 1 Jul 2010 10:35:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24890 invoked by uid 99); 1 Jul 2010 10:35:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 10:35:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 10:35:03 +0000
Received: by qwd7 with SMTP id 7so980880qwd.35
        for <java-user@lucene.apache.org>; Thu, 01 Jul 2010 03:33:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=gYEBoN9obE83KuLFQiN5HYJdEPZkA6Yn9K4fWVu1nFc=;
        b=jJgH7yMZYp2qTJCKpoKzmfNhTS7EPYgxAb9X4Agob7uccC5nm8AVTKcjXG4jU3YuYi
         pRuoY5qu7xAuRPdmsZViSb+RHI6hPilwTCOkaawtLJw7yp4BdjLwWdh9dRK1GebxwAbW
         E4VyXTgK3YeVeR97QnVejyDenk1lxIMfnqfQw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=SXeHm7k2TGdOWO46I1I31yAQdmb2ODneQibGoi/Ry4u4E3EP9US1/LdTWiwZvJ5nZJ
         9zwOQjN9Ka5rjkr4sJc/UBFIQoH7KoazhAhKvL2iUF4GyIkVcJY/41tcEKNej3temG+h
         TyvZTFQHClcNmrPe7qAHB5i8/FMznTWmEzBfY=
Received: by 10.224.113.4 with SMTP id y4mr7221340qap.123.1277980433548; Thu, 
	01 Jul 2010 03:33:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.67.198 with HTTP; Thu, 1 Jul 2010 03:33:33 -0700 (PDT)
In-Reply-To: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com>
References: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 1 Jul 2010 06:33:33 -0400
Message-ID: <AANLkTikbJR6nE5s4jmyXQwkoNpBZ9kVEPty6hfARHs4k@mail.gmail.com>
Subject: Re: Lucene and Chinese language
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f9c9d4dc594af048a510124
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f9c9d4dc594af048a510124
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

This is a bug in the queryparser. (
https://issues.apache.org/jira/browse/LUCENE-2458)

the problem has nothing to do with your choice of analyzer, it has to do
with how the query is formed.

Currently the queryparser uses a convoluted algorithm involving whitespace
(and not just the double quote operator as you would expect) to form phrase
queries. So, queries like this with no whitespace form phrase queries
always.

The only workaround for reasonably good results consists of two steps:
1. at query time (only!) add a
org.apache.lucene.analysis.position.PositionFilter (from contrib/analyzers)
to your analyzer. don't do this at index-time, just query-time!
2. this will make all terms in the query "synonyms" of each other to bypass
this problem, but will screw up scoring, so you might want to also extend
QueryParser in a custom way:

@Override
 protected BooleanQuery newBooleanQuery(boolean disableCoord) {
   // intentionally ignore disabled
   // coord() factor from the PositionFilter hack.
   return new BooleanQuery(false);
 }

2010/7/1 Kolhoff, Jacqueline - ENCOWAY <Kolhoff@encoway.de>

>
> Hi!
>
> We are using lucene in our project to search through information objects
> which works fine. For indexing we use the StandardAnalyzer.
> Now, we have to support the Chinese language. I found out that the Chines=
e
> words and letters are correctly saved in the index but the query to searc=
h
> for them does not work. Example: in English language the query is =E2=80=
=9Ctext=E2=80=9D
> which we parse to =E2=80=9C*text*=E2=80=9D. If we search for Chinese word=
s / phrases like
> =E2=80=9C=E4=BD=9B=E5=B1=B1=E4=B8=9C=E6=96=B9=E4=B9=A6=E5=9F=8E=E2=80=9Dt=
he query is =E2=80=9C*=E4=BD=9B=E5=B1=B1=E4=B8=9C=E6=96=B9=E4=B9=A6=E5=9F=
=8E*=E2=80=9C but there are no search results. If the
> query places blanks between the single letters / symbols like this =E2=80=
=9C*=E4=BD=9B =E5=B1=B1 =E4=B8=9C =E6=96=B9
> =E4=B9=A6 =E5=9F=8E*=E2=80=9C we are getting results. Does the StandardAn=
alyzer interpret each
> Chinese letter as one word? What are best practices for this case? Shall =
we
> use another analyzer (Chinese analyzer)? Or is it better to replace the
> query parser in this case?
>
> Regards,
> Jacqueline.
>



--=20
Robert Muir
rcmuir@gmail.com

--00c09f9c9d4dc594af048a510124--

From java-user-return-46593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 11:23:56 2010
Return-Path: <java-user-return-46593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65778 invoked from network); 1 Jul 2010 11:23:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 11:23:55 -0000
Received: (qmail 69279 invoked by uid 500); 1 Jul 2010 11:23:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68946 invoked by uid 500); 1 Jul 2010 11:23:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68938 invoked by uid 99); 1 Jul 2010 11:23:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 11:23:49 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [80.146.250.76] (HELO mail.lenze.com) (80.146.250.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 11:23:42 +0000
From: "Kolhoff, Jacqueline - ENCOWAY" <Kolhoff@encoway.de>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 1 Jul 2010 13:22:05 +0200
Subject: AW: Lucene and Chinese language
Thread-Topic: Lucene and Chinese language
Thread-Index: AcsZCRuuib02hA82Rj2yf2dfQeleKgABkuZA
Message-ID: <137B4E3B8F30074EADD080AA8A6E2A93129510C9F7@ZDE070.lenze.com>
References: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com>
 <AANLkTikbJR6nE5s4jmyXQwkoNpBZ9kVEPty6hfARHs4k@mail.gmail.com>
In-Reply-To: <AANLkTikbJR6nE5s4jmyXQwkoNpBZ9kVEPty6hfARHs4k@mail.gmail.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Jul 2010 11:22:07.0433 (UTC) FILETIME=[A3D96B90:01CB190F]
Received-SPF: none
X-Virus-Checked: Checked by ClamAV on apache.org

SG93IGNhbiBJIGFkZCB0aGlzIFBvc2l0aW9uRmlsdGVyPyBJIGNhbid0IHNlZSBhbnl0aGluZyBp
biB0aGUgQVBJLiBJIHVzZSBsdWNlbmUgdmVyc2lvbiAzLjAuMSwgdGhpcyBpcyBteSBxdWVyeSBw
YXJzZXI6DQoNClF1ZXJ5UGFyc2VyIHF1ZXJ5UGFyc2VyID0gbmV3IFF1ZXJ5UGFyc2VyKFZlcnNp
b24uTFVDRU5FXzMwLCAibXlmaWVsZG5hbWUiICwgbmV3IFN0YW5kYXJkQW5hbHl6ZXIoVmVyc2lv
bi5MVUNFTkVfMzApKTsNCg0KLS0tLS1VcnNwcqi5bmdsaWNoZSBOYWNocmljaHQtLS0tLQ0KVm9u
OiBSb2JlcnQgTXVpciBbbWFpbHRvOnJjbXVpckBnbWFpbC5jb21dIA0KR2VzZW5kZXQ6IERvbm5l
cnN0YWcsIDEuIEp1bGkgMjAxMCAxMjozNA0KQW46IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9y
Zw0KQmV0cmVmZjogUmU6IEx1Y2VuZSBhbmQgQ2hpbmVzZSBsYW5ndWFnZQ0KDQpUaGlzIGlzIGEg
YnVnIGluIHRoZSBxdWVyeXBhcnNlci4gKA0KaHR0cHM6Ly9pc3N1ZXMuYXBhY2hlLm9yZy9qaXJh
L2Jyb3dzZS9MVUNFTkUtMjQ1OCkNCg0KdGhlIHByb2JsZW0gaGFzIG5vdGhpbmcgdG8gZG8gd2l0
aCB5b3VyIGNob2ljZSBvZiBhbmFseXplciwgaXQgaGFzIHRvIGRvDQp3aXRoIGhvdyB0aGUgcXVl
cnkgaXMgZm9ybWVkLg0KDQpDdXJyZW50bHkgdGhlIHF1ZXJ5cGFyc2VyIHVzZXMgYSBjb252b2x1
dGVkIGFsZ29yaXRobSBpbnZvbHZpbmcgd2hpdGVzcGFjZQ0KKGFuZCBub3QganVzdCB0aGUgZG91
YmxlIHF1b3RlIG9wZXJhdG9yIGFzIHlvdSB3b3VsZCBleHBlY3QpIHRvIGZvcm0gcGhyYXNlDQpx
dWVyaWVzLiBTbywgcXVlcmllcyBsaWtlIHRoaXMgd2l0aCBubyB3aGl0ZXNwYWNlIGZvcm0gcGhy
YXNlIHF1ZXJpZXMNCmFsd2F5cy4NCg0KVGhlIG9ubHkgd29ya2Fyb3VuZCBmb3IgcmVhc29uYWJs
eSBnb29kIHJlc3VsdHMgY29uc2lzdHMgb2YgdHdvIHN0ZXBzOg0KMS4gYXQgcXVlcnkgdGltZSAo
b25seSEpIGFkZCBhDQpvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5wb3NpdGlvbi5Qb3NpdGlv
bkZpbHRlciAoZnJvbSBjb250cmliL2FuYWx5emVycykNCnRvIHlvdXIgYW5hbHl6ZXIuIGRvbid0
IGRvIHRoaXMgYXQgaW5kZXgtdGltZSwganVzdCBxdWVyeS10aW1lIQ0KMi4gdGhpcyB3aWxsIG1h
a2UgYWxsIHRlcm1zIGluIHRoZSBxdWVyeSAic3lub255bXMiIG9mIGVhY2ggb3RoZXIgdG8gYnlw
YXNzDQp0aGlzIHByb2JsZW0sIGJ1dCB3aWxsIHNjcmV3IHVwIHNjb3JpbmcsIHNvIHlvdSBtaWdo
dCB3YW50IHRvIGFsc28gZXh0ZW5kDQpRdWVyeVBhcnNlciBpbiBhIGN1c3RvbSB3YXk6DQoNCkBP
dmVycmlkZQ0KIHByb3RlY3RlZCBCb29sZWFuUXVlcnkgbmV3Qm9vbGVhblF1ZXJ5KGJvb2xlYW4g
ZGlzYWJsZUNvb3JkKSB7DQogICAvLyBpbnRlbnRpb25hbGx5IGlnbm9yZSBkaXNhYmxlZA0KICAg
Ly8gY29vcmQoKSBmYWN0b3IgZnJvbSB0aGUgUG9zaXRpb25GaWx0ZXIgaGFjay4NCiAgIHJldHVy
biBuZXcgQm9vbGVhblF1ZXJ5KGZhbHNlKTsNCiB9DQoNCjIwMTAvNy8xIEtvbGhvZmYsIEphY3F1
ZWxpbmUgLSBFTkNPV0FZIDxLb2xob2ZmQGVuY293YXkuZGU+DQoNCj4NCj4gSGkhDQo+DQo+IFdl
IGFyZSB1c2luZyBsdWNlbmUgaW4gb3VyIHByb2plY3QgdG8gc2VhcmNoIHRocm91Z2ggaW5mb3Jt
YXRpb24gb2JqZWN0cw0KPiB3aGljaCB3b3JrcyBmaW5lLiBGb3IgaW5kZXhpbmcgd2UgdXNlIHRo
ZSBTdGFuZGFyZEFuYWx5emVyLg0KPiBOb3csIHdlIGhhdmUgdG8gc3VwcG9ydCB0aGUgQ2hpbmVz
ZSBsYW5ndWFnZS4gSSBmb3VuZCBvdXQgdGhhdCB0aGUgQ2hpbmVzZQ0KPiB3b3JkcyBhbmQgbGV0
dGVycyBhcmUgY29ycmVjdGx5IHNhdmVkIGluIHRoZSBpbmRleCBidXQgdGhlIHF1ZXJ5IHRvIHNl
YXJjaA0KPiBmb3IgdGhlbSBkb2VzIG5vdCB3b3JrLiBFeGFtcGxlOiBpbiBFbmdsaXNoIGxhbmd1
YWdlIHRoZSBxdWVyeSBpcyChsHRleHShsQ0KPiB3aGljaCB3ZSBwYXJzZSB0byChsCp0ZXh0KqGx
LiBJZiB3ZSBzZWFyY2ggZm9yIENoaW5lc2Ugd29yZHMgLyBwaHJhc2VzIGxpa2UNCj4gobC38Mm9
tqu3vcrps8ehsXRoZSBxdWVyeSBpcyChsCq38Mm9tqu3vcrps8cqobAgYnV0IHRoZXJlIGFyZSBu
byBzZWFyY2ggcmVzdWx0cy4gSWYgdGhlDQo+IHF1ZXJ5IHBsYWNlcyBibGFua3MgYmV0d2VlbiB0
aGUgc2luZ2xlIGxldHRlcnMgLyBzeW1ib2xzIGxpa2UgdGhpcyChsCq38CDJvSC2qyC3vQ0KPiDK
6SCzxyqhsCB3ZSBhcmUgZ2V0dGluZyByZXN1bHRzLiBEb2VzIHRoZSBTdGFuZGFyZEFuYWx5emVy
IGludGVycHJldCBlYWNoDQo+IENoaW5lc2UgbGV0dGVyIGFzIG9uZSB3b3JkPyBXaGF0IGFyZSBi
ZXN0IHByYWN0aWNlcyBmb3IgdGhpcyBjYXNlPyBTaGFsbCB3ZQ0KPiB1c2UgYW5vdGhlciBhbmFs
eXplciAoQ2hpbmVzZSBhbmFseXplcik/IE9yIGlzIGl0IGJldHRlciB0byByZXBsYWNlIHRoZQ0K
PiBxdWVyeSBwYXJzZXIgaW4gdGhpcyBjYXNlPw0KPg0KPiBSZWdhcmRzLA0KPiBKYWNxdWVsaW5l
Lg0KPg0KDQoNCg0KLS0gDQpSb2JlcnQgTXVpcg0KcmNtdWlyQGdtYWlsLmNvbQ0K


From java-user-return-46594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 11:52:31 2010
Return-Path: <java-user-return-46594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69680 invoked from network); 1 Jul 2010 11:52:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 11:52:31 -0000
Received: (qmail 541 invoked by uid 500); 1 Jul 2010 11:52:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99891 invoked by uid 500); 1 Jul 2010 11:52:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99882 invoked by uid 99); 1 Jul 2010 11:52:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 11:52:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 11:52:19 +0000
Received: by qyk31 with SMTP id 31so800321qyk.35
        for <java-user@lucene.apache.org>; Thu, 01 Jul 2010 04:50:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=AQwTgh/6ejqEUDozx90DbW7pW6WtvPBmCvPSj0xItCA=;
        b=mPQfx9QPE8iLcNIiv7f7HkraWNWQACZiq/2K/EsCtlVonUQ4VReT9d7j8DkKTLgw6e
         a5sjJyVyTKRwkK+qUkGh9m8eYFBdrRKeeqKGrngoigsodVUjH0sIJyM79A5dXGrjXZCV
         hpeIrNpB1WhRngW1jX+zcJwJnkWKP3S4+3sYk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=b1kq/vlR1/kE09284EwVJMeH8YsxEkAQv85LFGDrDLnSDpcJc++qooDMtKYnhRz0VJ
         3lHYMptodCFexpKh33lL3AfjFwgXVatK7rIjzPqcqf4zMoTghcCFphs1F1Y0Ls4zk2cf
         I6CpL9U5mf5Gy7+45BLMrLEokWfiJeK0wqCt8=
Received: by 10.224.11.131 with SMTP id t3mr3819543qat.11.1277985058215; Thu, 
	01 Jul 2010 04:50:58 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.67.198 with HTTP; Thu, 1 Jul 2010 04:50:38 -0700 (PDT)
In-Reply-To: <137B4E3B8F30074EADD080AA8A6E2A93129510C9F7@ZDE070.lenze.com>
References: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com> 
	<AANLkTikbJR6nE5s4jmyXQwkoNpBZ9kVEPty6hfARHs4k@mail.gmail.com> 
	<137B4E3B8F30074EADD080AA8A6E2A93129510C9F7@ZDE070.lenze.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 1 Jul 2010 07:50:38 -0400
Message-ID: <AANLkTiljNZ5cIjK6H4yC2fUmk9FQFtdRaEr90_OF3p58@mail.gmail.com>
Subject: Re: Lucene and Chinese language
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd1f8c86c59ae048a5215ab
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd1f8c86c59ae048a5215ab
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

you can make your own analyzer, or do something like the below at
query-time.

QueryParser queryParser =3D new QueryParser(Version.LUCENE_30, "myfieldname=
" ,
new PositionHackAnalyzerWrapper(new StandardAnalyzer(Version.LUCENE_30)));

public class PositionHackAnalyzerWrapper extends Analyzer {
  Analyzer wrapped;

  public PositionHackAnalyzerWrapper(Analyzer wrapped) {
    this.wrapped =3D wrapped;
  }

  @Override
  public TokenStream tokenStream(String fieldName, Reader reader) {
    TokenStream ts =3D wrapped.tokenStream(fieldName, reader);
    return new PositionFilter(ts);
  }
}

2010/7/1 Kolhoff, Jacqueline - ENCOWAY <Kolhoff@encoway.de>

> How can I add this PositionFilter? I can't see anything in the API. I use
> lucene version 3.0.1, this is my query parser:
>
> QueryParser queryParser =3D new QueryParser(Version.LUCENE_30, "myfieldna=
me"
> , new StandardAnalyzer(Version.LUCENE_30));
>
> -----Urspr=C3=BCngliche Nachricht-----
> Von: Robert Muir [mailto:rcmuir@gmail.com]
> Gesendet: Donnerstag, 1. Juli 2010 12:34
> An: java-user@lucene.apache.org
> Betreff: Re: Lucene and Chinese language
>
> This is a bug in the queryparser. (
> https://issues.apache.org/jira/browse/LUCENE-2458)
>
> the problem has nothing to do with your choice of analyzer, it has to do
> with how the query is formed.
>
> Currently the queryparser uses a convoluted algorithm involving whitespac=
e
> (and not just the double quote operator as you would expect) to form phra=
se
> queries. So, queries like this with no whitespace form phrase queries
> always.
>
> The only workaround for reasonably good results consists of two steps:
> 1. at query time (only!) add a
> org.apache.lucene.analysis.position.PositionFilter (from contrib/analyzer=
s)
> to your analyzer. don't do this at index-time, just query-time!
> 2. this will make all terms in the query "synonyms" of each other to bypa=
ss
> this problem, but will screw up scoring, so you might want to also extend
> QueryParser in a custom way:
>
> @Override
>  protected BooleanQuery newBooleanQuery(boolean disableCoord) {
>   // intentionally ignore disabled
>   // coord() factor from the PositionFilter hack.
>   return new BooleanQuery(false);
>  }
>
> 2010/7/1 Kolhoff, Jacqueline - ENCOWAY <Kolhoff@encoway.de>
>
> >
> > Hi!
> >
> > We are using lucene in our project to search through information object=
s
> > which works fine. For indexing we use the StandardAnalyzer.
> > Now, we have to support the Chinese language. I found out that the
> Chinese
> > words and letters are correctly saved in the index but the query to
> search
> > for them does not work. Example: in English language the query is =E2=
=80=9Ctext=E2=80=9D
> > which we parse to =E2=80=9C*text*=E2=80=9D. If we search for Chinese wo=
rds / phrases like
> > =E2=80=9C=E4=BD=9B=E5=B1=B1=E4=B8=9C=E6=96=B9=E4=B9=A6=E5=9F=8E=E2=80=
=9Dthe query is =E2=80=9C*=E4=BD=9B=E5=B1=B1=E4=B8=9C=E6=96=B9=E4=B9=A6=E5=
=9F=8E*=E2=80=9C but there are no search results. If the
> > query places blanks between the single letters / symbols like this =E2=
=80=9C*=E4=BD=9B =E5=B1=B1
> =E4=B8=9C =E6=96=B9
> > =E4=B9=A6 =E5=9F=8E*=E2=80=9C we are getting results. Does the Standard=
Analyzer interpret each
> > Chinese letter as one word? What are best practices for this case? Shal=
l
> we
> > use another analyzer (Chinese analyzer)? Or is it better to replace the
> > query parser in this case?
> >
> > Regards,
> > Jacqueline.
> >
>
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Robert Muir
rcmuir@gmail.com

--000e0cd1f8c86c59ae048a5215ab--

From java-user-return-46595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 12:27:52 2010
Return-Path: <java-user-return-46595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86992 invoked from network); 1 Jul 2010 12:27:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 12:27:51 -0000
Received: (qmail 34429 invoked by uid 500); 1 Jul 2010 12:27:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33902 invoked by uid 500); 1 Jul 2010 12:27:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33894 invoked by uid 99); 1 Jul 2010 12:27:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 12:27:45 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [80.146.250.76] (HELO mail.lenze.com) (80.146.250.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 12:27:38 +0000
From: "Kolhoff, Jacqueline - ENCOWAY" <Kolhoff@encoway.de>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 1 Jul 2010 14:27:16 +0200
Subject: AW: Lucene and Chinese language
Thread-Topic: Lucene and Chinese language
Thread-Index: AcsZE+W4gIKPoAkXT7GgsIIP3sf9aQAAc88Q
Message-ID: <137B4E3B8F30074EADD080AA8A6E2A93129510CB12@ZDE070.lenze.com>
References: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com>
 	<AANLkTikbJR6nE5s4jmyXQwkoNpBZ9kVEPty6hfARHs4k@mail.gmail.com>
 	<137B4E3B8F30074EADD080AA8A6E2A93129510C9F7@ZDE070.lenze.com>
 <AANLkTiljNZ5cIjK6H4yC2fUmk9FQFtdRaEr90_OF3p58@mail.gmail.com>
In-Reply-To: <AANLkTiljNZ5cIjK6H4yC2fUmk9FQFtdRaEr90_OF3p58@mail.gmail.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Jul 2010 12:27:17.0961 (UTC) FILETIME=[BEB4A390:01CB1918]
Received-SPF: none
X-Virus-Checked: Checked by ClamAV on apache.org

SG0sIHRoYXQgZG9lc24ndCB3b3JrIGZvciBtZS4gDQoNCk1heWJlIHdlIG1pc3VuZGVyc3Rvb2Q6
DQoNCmluIG15IHF1ZXJ5IHRoZXJlIGFyZW4ndCBhbnkgZG91YmxlIHF1b3RlcyAoanVzdCBhZGQg
dGhlbSB0byBzaG93IHRoYXQgdGhpcyBpcyBteSBxdWVyeSkuDQoNCkkgc2VhcmNoIGluIGEgZmll
bGQgZm9yIGEgc3BlY2lhbCB2YWx1ZSAoc3Vic3RyaW5nKSBsaWtlINTatefBpruiDQoNCk15IHF1
ZXJ5IGxvb2tzIGxpa2UgdGhpczoNCg0KK2Fub3RoZXJmaWVsZG5hbWU6ZGVzY3JpcHRpb24gK215
ZmllbGRuYW1lOirU2rXnwaa7oioNCg0KV2UgYWx3YXlzIGFkZCB0aGUgbXVsdGlwbGUgd2lsZGNh
cmQgY2hhcmFjdGVyICgqKS4NClF1ZXJ5IFN0cmluZyBpcyDU2rXnwaa7og0KDQpXaXRoIHRoZSBm
aXJzdCB3YXkNCg0KUXVlcnlQYXJzZXIgcXVlcnlQYXJzZXIgPSBuZXcgUXVlcnlQYXJzZXIoVmVy
c2lvbi5MVUNFTkVfMzAsICJteWZpZWxkbmFtZSINCiAsIG5ldyBTdGFuZGFyZEFuYWx5emVyKFZl
cnNpb24uTFVDRU5FXzMwKSk7DQoNCndlIGdvdCBubyByZXN1bHRzLg0KDQpJZiB3ZSBkbyBub3Qg
YWRkIHRoZSAqIGl0IHdvcmtzIHdpdGggU3RhbmRhcmRBbmFseXplciBmb3IgQ2hpbmVzZSwgcXVl
cnkgaXM6DQorYW5vdGhlcmZpZWxkbmFtZTpkZXNjcmlwdGlvbiArbXlmaWVsZG5hbWU6ItTaILXn
IMGmILuiIg0KDQpBcyB5b3UgY2FuIHNlZSwgdGhlIHF1ZXJ5IHBhcnNlciBhdXRvbWF0aWNhbGx5
IGFkZGVkIGRvdWJsZSBxdW90ZXMgYW5kIGJsYW5rcy4gQnV0IHRoaXMgZG9lcyBub3Qgd29yayBm
b3Igb3VyIEVuZ2xpc2ggb3IgR2VybWFuIHF1ZXJpZXMuDQoNCklmIEkgdXNlIHRoZSBQb3NpdGlv
bkhhY2tBbmFseXplcldyYXBwZXIgYW5kIHRoZSBjYXNlIHdpdGggKiBJIGdvdCBubyByZXN1bHRz
LCBxdWVyeSBpczoNCithbm90aGVyZmllbGRuYW1lOmRlc2NyaXB0aW9uICtteWZpZWxkbmFtZToq
1Nq158Gmu6IqDQoNCklmIEkgcmVtb3ZlIHRoZSAqIHRoZSBxdWVyeSBpczoNCisgYW5vdGhlcmZp
ZWxkbmFtZTogZGVzY3JpcHRpb24gKyhteWZpZWxkbmFtZTrU2m15ZmllbGRuYW1lOrXnbXlmaWVs
ZG5hbWU6waZteWZpZWxkbmFtZTq7oikNCg0KYW5kIEkgZ290IHJlc3VsdHMgYnV0IG5vdCBmb3Ig
R2VybWFuIG9yIEVuZ2xpc2ggcXVlcmllcy4NCg0KV2VpcmQ/DQoNCg0KLS0tLS1VcnNwcqi5bmds
aWNoZSBOYWNocmljaHQtLS0tLQ0KVm9uOiBSb2JlcnQgTXVpciBbbWFpbHRvOnJjbXVpckBnbWFp
bC5jb21dIA0KR2VzZW5kZXQ6IERvbm5lcnN0YWcsIDEuIEp1bGkgMjAxMCAxMzo1MQ0KQW46IGph
dmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KQmV0cmVmZjogUmU6IEx1Y2VuZSBhbmQgQ2hpbmVz
ZSBsYW5ndWFnZQ0KDQp5b3UgY2FuIG1ha2UgeW91ciBvd24gYW5hbHl6ZXIsIG9yIGRvIHNvbWV0
aGluZyBsaWtlIHRoZSBiZWxvdyBhdA0KcXVlcnktdGltZS4NCg0KUXVlcnlQYXJzZXIgcXVlcnlQ
YXJzZXIgPSBuZXcgUXVlcnlQYXJzZXIoVmVyc2lvbi5MVUNFTkVfMzAsICJteWZpZWxkbmFtZSIg
LA0KbmV3IFBvc2l0aW9uSGFja0FuYWx5emVyV3JhcHBlcihuZXcgU3RhbmRhcmRBbmFseXplcihW
ZXJzaW9uLkxVQ0VORV8zMCkpKTsNCg0KcHVibGljIGNsYXNzIFBvc2l0aW9uSGFja0FuYWx5emVy
V3JhcHBlciBleHRlbmRzIEFuYWx5emVyIHsNCiAgQW5hbHl6ZXIgd3JhcHBlZDsNCg0KICBwdWJs
aWMgUG9zaXRpb25IYWNrQW5hbHl6ZXJXcmFwcGVyKEFuYWx5emVyIHdyYXBwZWQpIHsNCiAgICB0
aGlzLndyYXBwZWQgPSB3cmFwcGVkOw0KICB9DQoNCiAgQE92ZXJyaWRlDQogIHB1YmxpYyBUb2tl
blN0cmVhbSB0b2tlblN0cmVhbShTdHJpbmcgZmllbGROYW1lLCBSZWFkZXIgcmVhZGVyKSB7DQog
ICAgVG9rZW5TdHJlYW0gdHMgPSB3cmFwcGVkLnRva2VuU3RyZWFtKGZpZWxkTmFtZSwgcmVhZGVy
KTsNCiAgICByZXR1cm4gbmV3IFBvc2l0aW9uRmlsdGVyKHRzKTsNCiAgfQ0KfQ0KDQoyMDEwLzcv
MSBLb2xob2ZmLCBKYWNxdWVsaW5lIC0gRU5DT1dBWSA8S29saG9mZkBlbmNvd2F5LmRlPg0KDQo+
IEhvdyBjYW4gSSBhZGQgdGhpcyBQb3NpdGlvbkZpbHRlcj8gSSBjYW4ndCBzZWUgYW55dGhpbmcg
aW4gdGhlIEFQSS4gSSB1c2UNCj4gbHVjZW5lIHZlcnNpb24gMy4wLjEsIHRoaXMgaXMgbXkgcXVl
cnkgcGFyc2VyOg0KPg0KPiBRdWVyeVBhcnNlciBxdWVyeVBhcnNlciA9IG5ldyBRdWVyeVBhcnNl
cihWZXJzaW9uLkxVQ0VORV8zMCwgIm15ZmllbGRuYW1lIg0KPiAsIG5ldyBTdGFuZGFyZEFuYWx5
emVyKFZlcnNpb24uTFVDRU5FXzMwKSk7DQo+DQo+IC0tLS0tVXJzcHKouW5nbGljaGUgTmFjaHJp
Y2h0LS0tLS0NCj4gVm9uOiBSb2JlcnQgTXVpciBbbWFpbHRvOnJjbXVpckBnbWFpbC5jb21dDQo+
IEdlc2VuZGV0OiBEb25uZXJzdGFnLCAxLiBKdWxpIDIwMTAgMTI6MzQNCj4gQW46IGphdmEtdXNl
ckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBCZXRyZWZmOiBSZTogTHVjZW5lIGFuZCBDaGluZXNlIGxh
bmd1YWdlDQo+DQo+IFRoaXMgaXMgYSBidWcgaW4gdGhlIHF1ZXJ5cGFyc2VyLiAoDQo+IGh0dHBz
Oi8vaXNzdWVzLmFwYWNoZS5vcmcvamlyYS9icm93c2UvTFVDRU5FLTI0NTgpDQo+DQo+IHRoZSBw
cm9ibGVtIGhhcyBub3RoaW5nIHRvIGRvIHdpdGggeW91ciBjaG9pY2Ugb2YgYW5hbHl6ZXIsIGl0
IGhhcyB0byBkbw0KPiB3aXRoIGhvdyB0aGUgcXVlcnkgaXMgZm9ybWVkLg0KPg0KPiBDdXJyZW50
bHkgdGhlIHF1ZXJ5cGFyc2VyIHVzZXMgYSBjb252b2x1dGVkIGFsZ29yaXRobSBpbnZvbHZpbmcg
d2hpdGVzcGFjZQ0KPiAoYW5kIG5vdCBqdXN0IHRoZSBkb3VibGUgcXVvdGUgb3BlcmF0b3IgYXMg
eW91IHdvdWxkIGV4cGVjdCkgdG8gZm9ybSBwaHJhc2UNCj4gcXVlcmllcy4gU28sIHF1ZXJpZXMg
bGlrZSB0aGlzIHdpdGggbm8gd2hpdGVzcGFjZSBmb3JtIHBocmFzZSBxdWVyaWVzDQo+IGFsd2F5
cy4NCj4NCj4gVGhlIG9ubHkgd29ya2Fyb3VuZCBmb3IgcmVhc29uYWJseSBnb29kIHJlc3VsdHMg
Y29uc2lzdHMgb2YgdHdvIHN0ZXBzOg0KPiAxLiBhdCBxdWVyeSB0aW1lIChvbmx5ISkgYWRkIGEN
Cj4gb3JnLmFwYWNoZS5sdWNlbmUuYW5hbHlzaXMucG9zaXRpb24uUG9zaXRpb25GaWx0ZXIgKGZy
b20gY29udHJpYi9hbmFseXplcnMpDQo+IHRvIHlvdXIgYW5hbHl6ZXIuIGRvbid0IGRvIHRoaXMg
YXQgaW5kZXgtdGltZSwganVzdCBxdWVyeS10aW1lIQ0KPiAyLiB0aGlzIHdpbGwgbWFrZSBhbGwg
dGVybXMgaW4gdGhlIHF1ZXJ5ICJzeW5vbnltcyIgb2YgZWFjaCBvdGhlciB0byBieXBhc3MNCj4g
dGhpcyBwcm9ibGVtLCBidXQgd2lsbCBzY3JldyB1cCBzY29yaW5nLCBzbyB5b3UgbWlnaHQgd2Fu
dCB0byBhbHNvIGV4dGVuZA0KPiBRdWVyeVBhcnNlciBpbiBhIGN1c3RvbSB3YXk6DQo+DQo+IEBP
dmVycmlkZQ0KPiAgcHJvdGVjdGVkIEJvb2xlYW5RdWVyeSBuZXdCb29sZWFuUXVlcnkoYm9vbGVh
biBkaXNhYmxlQ29vcmQpIHsNCj4gICAvLyBpbnRlbnRpb25hbGx5IGlnbm9yZSBkaXNhYmxlZA0K
PiAgIC8vIGNvb3JkKCkgZmFjdG9yIGZyb20gdGhlIFBvc2l0aW9uRmlsdGVyIGhhY2suDQo+ICAg
cmV0dXJuIG5ldyBCb29sZWFuUXVlcnkoZmFsc2UpOw0KPiAgfQ0KPg0KPiAyMDEwLzcvMSBLb2xo
b2ZmLCBKYWNxdWVsaW5lIC0gRU5DT1dBWSA8S29saG9mZkBlbmNvd2F5LmRlPg0KPg0KPiA+DQo+
ID4gSGkhDQo+ID4NCj4gPiBXZSBhcmUgdXNpbmcgbHVjZW5lIGluIG91ciBwcm9qZWN0IHRvIHNl
YXJjaCB0aHJvdWdoIGluZm9ybWF0aW9uIG9iamVjdHMNCj4gPiB3aGljaCB3b3JrcyBmaW5lLiBG
b3IgaW5kZXhpbmcgd2UgdXNlIHRoZSBTdGFuZGFyZEFuYWx5emVyLg0KPiA+IE5vdywgd2UgaGF2
ZSB0byBzdXBwb3J0IHRoZSBDaGluZXNlIGxhbmd1YWdlLiBJIGZvdW5kIG91dCB0aGF0IHRoZQ0K
PiBDaGluZXNlDQo+ID4gd29yZHMgYW5kIGxldHRlcnMgYXJlIGNvcnJlY3RseSBzYXZlZCBpbiB0
aGUgaW5kZXggYnV0IHRoZSBxdWVyeSB0bw0KPiBzZWFyY2gNCj4gPiBmb3IgdGhlbSBkb2VzIG5v
dCB3b3JrLiBFeGFtcGxlOiBpbiBFbmdsaXNoIGxhbmd1YWdlIHRoZSBxdWVyeSBpcyChsHRleHSh
sQ0KPiA+IHdoaWNoIHdlIHBhcnNlIHRvIKGwKnRleHQqobEuIElmIHdlIHNlYXJjaCBmb3IgQ2hp
bmVzZSB3b3JkcyAvIHBocmFzZXMgbGlrZQ0KPiA+IKGwt/DJvbart73K6bPHobF0aGUgcXVlcnkg
aXMgobAqt/DJvbart73K6bPHKqGwIGJ1dCB0aGVyZSBhcmUgbm8gc2VhcmNoIHJlc3VsdHMuIElm
IHRoZQ0KPiA+IHF1ZXJ5IHBsYWNlcyBibGFua3MgYmV0d2VlbiB0aGUgc2luZ2xlIGxldHRlcnMg
LyBzeW1ib2xzIGxpa2UgdGhpcyChsCq38CDJvQ0KPiC2qyC3vQ0KPiA+IMrpILPHKqGwIHdlIGFy
ZSBnZXR0aW5nIHJlc3VsdHMuIERvZXMgdGhlIFN0YW5kYXJkQW5hbHl6ZXIgaW50ZXJwcmV0IGVh
Y2gNCj4gPiBDaGluZXNlIGxldHRlciBhcyBvbmUgd29yZD8gV2hhdCBhcmUgYmVzdCBwcmFjdGlj
ZXMgZm9yIHRoaXMgY2FzZT8gU2hhbGwNCj4gd2UNCj4gPiB1c2UgYW5vdGhlciBhbmFseXplciAo
Q2hpbmVzZSBhbmFseXplcik/IE9yIGlzIGl0IGJldHRlciB0byByZXBsYWNlIHRoZQ0KPiA+IHF1
ZXJ5IHBhcnNlciBpbiB0aGlzIGNhc2U/DQo+ID4NCj4gPiBSZWdhcmRzLA0KPiA+IEphY3F1ZWxp
bmUuDQo+ID4NCj4NCj4NCj4NCj4gLS0NCj4gUm9iZXJ0IE11aXINCj4gcmNtdWlyQGdtYWlsLmNv
bQ0KPg0KDQoNCg0KLS0gDQpSb2JlcnQgTXVpcg0KcmNtdWlyQGdtYWlsLmNvbQ0K


From java-user-return-46596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 12:36:12 2010
Return-Path: <java-user-return-46596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96289 invoked from network); 1 Jul 2010 12:36:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 12:36:12 -0000
Received: (qmail 48394 invoked by uid 500); 1 Jul 2010 12:36:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48045 invoked by uid 500); 1 Jul 2010 12:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48037 invoked by uid 99); 1 Jul 2010 12:36:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 12:36:05 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 12:35:58 +0000
Received: by qwd7 with SMTP id 7so1034827qwd.35
        for <java-user@lucene.apache.org>; Thu, 01 Jul 2010 05:35:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=7PhvvO5DmJSHQO7VQTceG+gxHtbntt8+5rwbKYfXjps=;
        b=N0eqOEBO0zx4eskrpE8ewicKi5hCL5J/Hii9Rfx0O2Kc1DsuvGHo3kh6z6UImg3l9h
         PtCFY0rYnfPDLuv6QChqQl82c8p02DBngeMtp9qHUraxoo0mzawJIYT1sSu7F/EMLjdF
         kPkGjTMXMBS84AoLBnTwWm3aA89Y1w1YaWWu0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=rILiPZ98WPAFTtZ2knWsFrlqq4NN0S5qRKz3TEQ4b+AYabCXwRTT4Nu74Nrsi3hD6p
         62TxSCafO48cbqUqWpn/Q/B1hGoqtvPic9apg9H7Dqwh/rvGo9g+YYA0Q3jfOCqkOD7T
         EGoj1pEriFKLFld2uEYVNHyI57A9Wd3tEMAp0=
Received: by 10.224.120.193 with SMTP id e1mr7572434qar.26.1277987737154; Thu, 
	01 Jul 2010 05:35:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.67.198 with HTTP; Thu, 1 Jul 2010 05:35:16 -0700 (PDT)
In-Reply-To: <137B4E3B8F30074EADD080AA8A6E2A93129510CB12@ZDE070.lenze.com>
References: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com> 
	<AANLkTikbJR6nE5s4jmyXQwkoNpBZ9kVEPty6hfARHs4k@mail.gmail.com> 
	<137B4E3B8F30074EADD080AA8A6E2A93129510C9F7@ZDE070.lenze.com> 
	<AANLkTiljNZ5cIjK6H4yC2fUmk9FQFtdRaEr90_OF3p58@mail.gmail.com> 
	<137B4E3B8F30074EADD080AA8A6E2A93129510CB12@ZDE070.lenze.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 1 Jul 2010 08:35:16 -0400
Message-ID: <AANLkTin7qqH6kHC5NXZG5uzj5-iPwVd6zjv_fdrakkS9@mail.gmail.com>
Subject: Re: Lucene and Chinese language
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364c5a4d19b650048a52b5c2
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364c5a4d19b650048a52b5c2
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

2010/7/1 Kolhoff, Jacqueline - ENCOWAY <Kolhoff@encoway.de>

> As you can see, the query parser automatically added double quotes and
> blanks. But this does not work for our English or German queries.
>
> If I use the PositionHackAnalyzerWrapper and the case with * I got no
> results, query is:
> +anotherfieldname:description +myfieldname:*=E5=9C=A8=E7=94=B5=E5=8A=9B=
=E8=99=8E*
>
> If I remove the * the query is:
> + anotherfieldname: description
> +(myfieldname:=E5=9C=A8myfieldname:=E7=94=B5myfieldname:=E5=8A=9Bmyfieldn=
ame:=E8=99=8E)
>
> and I got results but not for German or English queries.
>

Weird?
>
>
its working correctly, your chinese wildcard query doesnt make sense, as yo=
u
havent indexed the text in a way to do queries like that (you have indexed
individual chars).
in practice this is where you would do a chinese phrase query of "=E5=9C=A8=
=E7=94=B5=E5=8A=9B=E8=99=8E"
(with quotes) instead of *... but if you use the positionfilterhack, you
cant do phrase queries.

--=20
Robert Muir
rcmuir@gmail.com

--0016364c5a4d19b650048a52b5c2--

From java-user-return-46597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 12:42:25 2010
Return-Path: <java-user-return-46597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98996 invoked from network); 1 Jul 2010 12:42:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 12:42:24 -0000
Received: (qmail 59945 invoked by uid 500); 1 Jul 2010 12:42:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59252 invoked by uid 500); 1 Jul 2010 12:42:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58908 invoked by uid 99); 1 Jul 2010 12:42:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 12:42:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [80.146.250.76] (HELO mail.lenze.com) (80.146.250.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 12:42:08 +0000
From: "Kolhoff, Jacqueline - ENCOWAY" <Kolhoff@encoway.de>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 1 Jul 2010 14:41:45 +0200
Subject: AW: Lucene and Chinese language
Thread-Topic: Lucene and Chinese language
Thread-Index: AcsZGf5lFejUfirJS5Oc/niPqkVx8AAAHgkw
Message-ID: <137B4E3B8F30074EADD080AA8A6E2A93129510CB5E@ZDE070.lenze.com>
References: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com>
 	<AANLkTikbJR6nE5s4jmyXQwkoNpBZ9kVEPty6hfARHs4k@mail.gmail.com>
 	<137B4E3B8F30074EADD080AA8A6E2A93129510C9F7@ZDE070.lenze.com>
 	<AANLkTiljNZ5cIjK6H4yC2fUmk9FQFtdRaEr90_OF3p58@mail.gmail.com>
 	<137B4E3B8F30074EADD080AA8A6E2A93129510CB12@ZDE070.lenze.com>
 <AANLkTin7qqH6kHC5NXZG5uzj5-iPwVd6zjv_fdrakkS9@mail.gmail.com>
In-Reply-To: <AANLkTin7qqH6kHC5NXZG5uzj5-iPwVd6zjv_fdrakkS9@mail.gmail.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginalArrivalTime: 01 Jul 2010 12:41:47.0993 (UTC) FILETIME=[C548FC90:01CB191A]
Received-SPF: none
X-Virus-Checked: Checked by ClamAV on apache.org

T2ssIHVuZGVyc3RhbmQhDQoNClNvIGl0IGlzIGJldHRlciB0byB1c2UgYW5vdGhlciBhbmFseXpl
ciBpbiB0aGUgY2hpbmVzZSBjYXNlIGF0IGluZGV4LXRpbWUgb3IgZG8geW91IHN1Z2dlc3QgdG8g
dXNlIGFub3RoZXIgIlF1ZXJ5UGFyc2VyIiBhdCBxdWVyeS10aW1lPw0KDQotLS0tLVVyc3ByqLlu
Z2xpY2hlIE5hY2hyaWNodC0tLS0tDQpWb246IFJvYmVydCBNdWlyIFttYWlsdG86cmNtdWlyQGdt
YWlsLmNvbV0gDQpHZXNlbmRldDogRG9ubmVyc3RhZywgMS4gSnVsaSAyMDEwIDE0OjM1DQpBbjog
amF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpCZXRyZWZmOiBSZTogTHVjZW5lIGFuZCBDaGlu
ZXNlIGxhbmd1YWdlDQoNCjIwMTAvNy8xIEtvbGhvZmYsIEphY3F1ZWxpbmUgLSBFTkNPV0FZIDxL
b2xob2ZmQGVuY293YXkuZGU+DQoNCj4gQXMgeW91IGNhbiBzZWUsIHRoZSBxdWVyeSBwYXJzZXIg
YXV0b21hdGljYWxseSBhZGRlZCBkb3VibGUgcXVvdGVzIGFuZA0KPiBibGFua3MuIEJ1dCB0aGlz
IGRvZXMgbm90IHdvcmsgZm9yIG91ciBFbmdsaXNoIG9yIEdlcm1hbiBxdWVyaWVzLg0KPg0KPiBJ
ZiBJIHVzZSB0aGUgUG9zaXRpb25IYWNrQW5hbHl6ZXJXcmFwcGVyIGFuZCB0aGUgY2FzZSB3aXRo
ICogSSBnb3Qgbm8NCj4gcmVzdWx0cywgcXVlcnkgaXM6DQo+ICthbm90aGVyZmllbGRuYW1lOmRl
c2NyaXB0aW9uICtteWZpZWxkbmFtZToq1Nq158Gmu6IqDQo+DQo+IElmIEkgcmVtb3ZlIHRoZSAq
IHRoZSBxdWVyeSBpczoNCj4gKyBhbm90aGVyZmllbGRuYW1lOiBkZXNjcmlwdGlvbg0KPiArKG15
ZmllbGRuYW1lOtTabXlmaWVsZG5hbWU6tedteWZpZWxkbmFtZTrBpm15ZmllbGRuYW1lOruiKQ0K
Pg0KPiBhbmQgSSBnb3QgcmVzdWx0cyBidXQgbm90IGZvciBHZXJtYW4gb3IgRW5nbGlzaCBxdWVy
aWVzLg0KPg0KDQpXZWlyZD8NCj4NCj4NCml0cyB3b3JraW5nIGNvcnJlY3RseSwgeW91ciBjaGlu
ZXNlIHdpbGRjYXJkIHF1ZXJ5IGRvZXNudCBtYWtlIHNlbnNlLCBhcyB5b3UNCmhhdmVudCBpbmRl
eGVkIHRoZSB0ZXh0IGluIGEgd2F5IHRvIGRvIHF1ZXJpZXMgbGlrZSB0aGF0ICh5b3UgaGF2ZSBp
bmRleGVkDQppbmRpdmlkdWFsIGNoYXJzKS4NCmluIHByYWN0aWNlIHRoaXMgaXMgd2hlcmUgeW91
IHdvdWxkIGRvIGEgY2hpbmVzZSBwaHJhc2UgcXVlcnkgb2YgItTatefBpruiIg0KKHdpdGggcXVv
dGVzKSBpbnN0ZWFkIG9mICouLi4gYnV0IGlmIHlvdSB1c2UgdGhlIHBvc2l0aW9uZmlsdGVyaGFj
aywgeW91DQpjYW50IGRvIHBocmFzZSBxdWVyaWVzLg0KDQotLSANClJvYmVydCBNdWlyDQpyY211
aXJAZ21haWwuY29tDQo=


From java-user-return-46598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 12:49:41 2010
Return-Path: <java-user-return-46598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 537 invoked from network); 1 Jul 2010 12:49:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 12:49:40 -0000
Received: (qmail 69268 invoked by uid 500); 1 Jul 2010 12:49:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69078 invoked by uid 500); 1 Jul 2010 12:49:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69070 invoked by uid 99); 1 Jul 2010 12:49:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 12:49:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 12:49:28 +0000
Received: by qwd7 with SMTP id 7so1041061qwd.35
        for <java-user@lucene.apache.org>; Thu, 01 Jul 2010 05:48:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=qOTeoseYbpQ1D4dQvGbP5ysDJ1Qvd+jqP921n0OKIbo=;
        b=k6fkAgNvotSNGe2N6Xtw3dp8K8vRFASheEm7OwiR5ii/Elu/oXCk/iLfV651mXAapJ
         HEEVxFvfequttdC4Zzm/7AOA9jO55AdCCBhDtyoDuz/qWYcOpzoIe0vDjCciuaX2tkjq
         nboaFqDmPfudCaUKne8WYqneUCDYhMWwK4QOI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=F8n3bQyUvYBIbslOwBql7KdVshBeFV3HgIgGD6Afv1awPI7WV5kBxrqtY9/QYuP/FT
         ePFF8BUK25omOgfMiwuwxCNd+q1NDi7RtcxmNHMGHkMo4IqlBugfwFNzhOJ4L5+goxaf
         gZ5KuBGmzHIgxbEs3KQzHj+3oy/McjQ2WIZsw=
Received: by 10.224.80.11 with SMTP id r11mr7472501qak.148.1277988498128; Thu, 
	01 Jul 2010 05:48:18 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.67.198 with HTTP; Thu, 1 Jul 2010 05:47:57 -0700 (PDT)
In-Reply-To: <137B4E3B8F30074EADD080AA8A6E2A93129510CB5E@ZDE070.lenze.com>
References: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com> 
	<AANLkTikbJR6nE5s4jmyXQwkoNpBZ9kVEPty6hfARHs4k@mail.gmail.com> 
	<137B4E3B8F30074EADD080AA8A6E2A93129510C9F7@ZDE070.lenze.com> 
	<AANLkTiljNZ5cIjK6H4yC2fUmk9FQFtdRaEr90_OF3p58@mail.gmail.com> 
	<137B4E3B8F30074EADD080AA8A6E2A93129510CB12@ZDE070.lenze.com> 
	<AANLkTin7qqH6kHC5NXZG5uzj5-iPwVd6zjv_fdrakkS9@mail.gmail.com> 
	<137B4E3B8F30074EADD080AA8A6E2A93129510CB5E@ZDE070.lenze.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 1 Jul 2010 08:47:57 -0400
Message-ID: <AANLkTilayzbDIcIdCsyvrAx7d6_Xn-NTfNI1uyikkhoM@mail.gmail.com>
Subject: Re: Lucene and Chinese language
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f899ace7540b6048a52e283
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f899ace7540b6048a52e283
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

its really just a bad situation for chinese :(

with queryparser, you either get no phrase query support (by using the
hack), or all queries automatically become phrase queries.

if you want to do the equivalent of *=E5=9C=A8=E7=94=B5=E5=8A=9B=E8=99=8E*,=
 then you need to use queryparser
without the hack, just do a query of "=E5=9C=A8=E7=94=B5=E5=8A=9B=E8=99=8E"=
 (with quotes).
if you want to do the equivalent of =E5=9C=A8 =E7=94=B5 =E5=8A=9B =E8=99=8E=
, then you need to use
queryparser with the hack, just do a query of =E5=9C=A8=E7=94=B5=E5=8A=9B=
=E8=99=8E (without quotes).


2010/7/1 Kolhoff, Jacqueline - ENCOWAY <Kolhoff@encoway.de>

> Ok, understand!
>
> So it is better to use another analyzer in the chinese case at index-time
> or do you suggest to use another "QueryParser" at query-time?
>
> -----Urspr=C3=BCngliche Nachricht-----
> Von: Robert Muir [mailto:rcmuir@gmail.com]
> Gesendet: Donnerstag, 1. Juli 2010 14:35
> An: java-user@lucene.apache.org
> Betreff: Re: Lucene and Chinese language
>
> 2010/7/1 Kolhoff, Jacqueline - ENCOWAY <Kolhoff@encoway.de>
>
> > As you can see, the query parser automatically added double quotes and
> > blanks. But this does not work for our English or German queries.
> >
> > If I use the PositionHackAnalyzerWrapper and the case with * I got no
> > results, query is:
> > +anotherfieldname:description +myfieldname:*=E5=9C=A8=E7=94=B5=E5=8A=9B=
=E8=99=8E*
> >
> > If I remove the * the query is:
> > + anotherfieldname: description
> > +(myfieldname:=E5=9C=A8myfieldname:=E7=94=B5myfieldname:=E5=8A=9Bmyfiel=
dname:=E8=99=8E)
> >
> > and I got results but not for German or English queries.
> >
>
> Weird?
> >
> >
> its working correctly, your chinese wildcard query doesnt make sense, as
> you
> havent indexed the text in a way to do queries like that (you have indexe=
d
> individual chars).
> in practice this is where you would do a chinese phrase query of "=E5=9C=
=A8=E7=94=B5=E5=8A=9B=E8=99=8E"
> (with quotes) instead of *... but if you use the positionfilterhack, you
> cant do phrase queries.
>
> --
> Robert Muir
> rcmuir@gmail.com
>



--=20
Robert Muir
rcmuir@gmail.com

--00c09f899ace7540b6048a52e283--

From java-user-return-46599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 18:00:21 2010
Return-Path: <java-user-return-46599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28133 invoked from network); 1 Jul 2010 18:00:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 18:00:21 -0000
Received: (qmail 54708 invoked by uid 500); 1 Jul 2010 18:00:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54615 invoked by uid 500); 1 Jul 2010 18:00:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54607 invoked by uid 99); 1 Jul 2010 18:00:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 18:00:18 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of t.sapra97@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 18:00:11 +0000
Received: by vws19 with SMTP id 19so3822809vws.35
        for <java-user@lucene.apache.org>; Thu, 01 Jul 2010 10:58:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Qde63SkTw0BoiIWiO7K1khF9W++W9gKkQG7SoBkMGoM=;
        b=omVh52M+MqkxjcRuEZvng1RF7Ne7TS20OMLfgZ3MvY8F7PkVixcBoHJG9VPkPkSH20
         bR8L3aoOQBd/oO68hY/Wf0Nkwcv9BlKr+hKNBL60meK57z/AomF3z1znj+SxAvo/NAss
         +eMXddhIDEtSqHf3nfsT5VMaAWpGF/871jMAo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mlviiMY2YqVSDbu+Nr4lXVvQhvsf0NeCM1AeGRqOsPjbnoLRhvfJ9z+gMBpZHcz1ms
         K1WqvO44yB8zseKQv9w9jo21fnr5ChUa+LVu2+ANjkxL7Z7aSue3I+Dlq/UyInh8z26c
         KDyQwZKx2WhckxYLAjbCJDXApGup5x2s+UnuM=
MIME-Version: 1.0
Received: by 10.220.63.5 with SMTP id z5mr5896287vch.100.1278007130216; Thu, 
	01 Jul 2010 10:58:50 -0700 (PDT)
Received: by 10.220.184.68 with HTTP; Thu, 1 Jul 2010 10:58:50 -0700 (PDT)
In-Reply-To: <4C2BB465.1010709@gmx.at>
References: <4C2BB465.1010709@gmx.at>
Date: Thu, 1 Jul 2010 10:58:50 -0700
Message-ID: <AANLkTiktCfhb22VpHZ9cuv9su8Xc1keQin24EAbflGcj@mail.gmail.com>
Subject: Re: Stopwords and Wildcards
From: tarun sapra <t.sapra97@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba8e4d5a045b79048a57397c
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba8e4d5a045b79048a57397c
Content-Type: text/plain; charset=ISO-8859-1

You can use a PrefixQuery class instead of QueryParser ...and if you have
multiple terms in your queries you can use Boolean Query to add all the
terms and also you can write your own analyzer and in which you can override
stopfilter and give your own stop words.

On Wed, Jun 30, 2010 at 2:17 PM, Markus Mehrwald <mmehrwald@gmx.at> wrote:

> Hi,
>
> I use an AnalyzingQueryParser with the StandardAnalyzer and german
> stopwords in Lucene 3.0.1. If I have a query with a stopword followd by a
> wildcard (e. g. das*) I get a ParseException: Cannot build PrefixQuery with
> analyzer class org.apache.lucene.analysis.standard.StandardAnalyzer - token
> consumed.
> Without the wildcard it works. I can remove the stopwords before building
> the query of course but then I and the analyzer have to search for the stop
> words what might be not the best solution in my eyes.
> Is there any other way to get a proper result without writing code twice?
>
> Thanks,
> Markus
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Thanks & Regards
Tarun Sapra

--90e6ba8e4d5a045b79048a57397c--

From java-user-return-46600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 18:20:11 2010
Return-Path: <java-user-return-46600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36195 invoked from network); 1 Jul 2010 18:20:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 18:20:11 -0000
Received: (qmail 81678 invoked by uid 500); 1 Jul 2010 18:20:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81604 invoked by uid 500); 1 Jul 2010 18:20:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81583 invoked by uid 99); 1 Jul 2010 18:20:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 18:20:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [198.147.195.5] (HELO flicker.bmc.com) (198.147.195.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Jul 2010 18:20:00 +0000
Received: by flicker.bmc.com (Postfix, from userid 13749)
	id 592BC1E6451; Thu,  1 Jul 2010 11:19:39 -0700 (MST)
Received: from PHX-HTPRD-01.adprod.bmc.com (phx-htprd-01.adprod.bmc.com [172.24.32.7])
	by flicker.bmc.com (Postfix) with ESMTP id 50B3E1E6422
	for <java-user@lucene.apache.org>; Thu,  1 Jul 2010 11:19:39 -0700 (MST)
Received: from PHXCCRPRD02.adprod.bmc.com ([172.24.32.181]) by
 PHX-HTPRD-01.adprod.bmc.com ([172.24.32.7]) with mapi; Thu, 1 Jul 2010
 13:19:39 -0500
From: "Woolf, Ross" <Ross_Woolf@BMC.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 1 Jul 2010 13:19:37 -0500
Subject: MultiPhraseQuery.toString() throws null pointer exception
Thread-Topic: MultiPhraseQuery.toString() throws null pointer exception
Thread-Index: AcsHKQH9EUYTol/lQVeOsg06fn+LOAAH3P2w
Message-ID: <492379B6AA909E4FAF672AACCA0EADC25CC4D3E57F@PHXCCRPRD02.adprod.bmc.com>
References: <1274780529673-841735.post@n3.nabble.com>
	<AANLkTikLbtYDza9PYACV3ioC-ia0Y1-COBchbCpNo-Fb@mail.gmail.com>
	<1274800094618-842321.post@n3.nabble.com>
	<1275900733831-875713.post@n3.nabble.com>
	<AANLkTilViLXbdJKbns2EbnJdm0mss7ps8VWIuMWxXQ6w@mail.gmail.com>
	<1275905888978-875884.post@n3.nabble.com>
	<AANLkTikNozElA37RStr0xJ8r77DzNjxqiqTkl1UxU8q-@mail.gmail.com>
	<1275909546382-876022.post@n3.nabble.com>
 <AANLkTinST9vNGEsL0HjgTI09UL93e4FsXHiD9hFEfjY3@mail.gmail.com>
In-Reply-To: <AANLkTinST9vNGEsL0HjgTI09UL93e4FsXHiD9hFEfjY3@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

In Lucene 2.9.2 (have not checked 3.x) calling MultiPhraseQuery.toString() =
throws a null pointer exception.  Below is very simple code to test this ou=
t.

import org.apache.lucene.search.MultiPhraseQuery;

public class testMPQ {

	public static void main(String[] args){
		MultiPhraseQuery mpq =3D new MultiPhraseQuery();
		System.out.println(mpq.toString());
	}
}

It will produce the following exception:
Exception in thread "main" java.lang.NullPointerException
        at org.apache.lucene.search.MultiPhraseQuery.toString(MultiPhraseQu=
ery.java:275)
        at testMPQ.main(tesMPQ.java:7)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 01 18:57:39 2010
Return-Path: <java-user-return-46601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51317 invoked from network); 1 Jul 2010 18:57:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 1 Jul 2010 18:57:39 -0000
Received: (qmail 42018 invoked by uid 500); 1 Jul 2010 18:57:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41959 invoked by uid 500); 1 Jul 2010 18:57:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41950 invoked by uid 99); 1 Jul 2010 18:57:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 18:57:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nathaniel.auvil@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Jul 2010 18:57:28 +0000
Received: by vws19 with SMTP id 19so3915682vws.35
        for <java-user@lucene.apache.org>; Thu, 01 Jul 2010 11:56:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=/ZJwiQLk36eHb/lFNFvKa1awb4y3HJNXH01I+bwCUpE=;
        b=qL7wHU+so/B3YqR35nR5GtU5wN0NJyWHtOF1M6M6AEb1lZQdqXLJqLR12K+S70sClU
         rPhpmW/X2j+7+WKvgOiUbwwfWidiVg64yRqu7w5nX1ejrvXkmsbX1lQ1kMnn7pIUJZTp
         6LdkTmZOtVA4F/1fCrFNeGGlxK6DvMdPxDgF8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=ZTW2F+sVeZt7f6cn2+vkSlr32CUM0wlw7QGRNMXm+pXcOHlcavv0F3521x8947oeHU
         Kr5cuedVjbLKAHdGUvsDZ3X7tSwpqLr8Exf45I2qIuVsjCFRbkw+wxwcL9JRgGmdsxxP
         AKRPYNkgNVxRkbtYCFIJNAT2oy7jgrHDOtt9U=
MIME-Version: 1.0
Received: by 10.224.11.69 with SMTP id s5mr6212897qas.158.1278010566967; Thu, 
	01 Jul 2010 11:56:06 -0700 (PDT)
Received: by 10.224.19.146 with HTTP; Thu, 1 Jul 2010 11:56:06 -0700 (PDT)
Date: Thu, 1 Jul 2010 14:56:06 -0400
Message-ID: <AANLkTim8UCX1d-2qXUz9TZDz-yUk-jV8rfDOQWlzYtDf@mail.gmail.com>
Subject: search for a string which begins with a '$' character
From: Nathaniel Auvil <nathaniel.auvil@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cd628dd04b8048a5805d9
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cd628dd04b8048a5805d9
Content-Type: text/plain; charset=ISO-8859-1

i am trying to search for a value which begins with a '$' or even sometimes
'$$'.  '$' is not listed as a special character and no matter what i try, i
can not get a search for $* to return anything.  Using Luke, i browse my
index and see several entries where the value exists with a leading '$'.
How can i search for these?

--0015175cd628dd04b8048a5805d9--

From java-user-return-46602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 02 06:34:30 2010
Return-Path: <java-user-return-46602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34131 invoked from network); 2 Jul 2010 06:34:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Jul 2010 06:34:30 -0000
Received: (qmail 29049 invoked by uid 500); 2 Jul 2010 06:34:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28579 invoked by uid 500); 2 Jul 2010 06:34:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28571 invoked by uid 99); 2 Jul 2010 06:34:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jul 2010 06:34:22 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jul 2010 06:34:14 +0000
Received: by pva4 with SMTP id 4so2375345pva.35
        for <java-user@lucene.apache.org>; Thu, 01 Jul 2010 23:32:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=eLS4pYRDQnMzRK9yrx0DsKzKuAsROYDA7tzokDhYi/M=;
        b=jpsocpQ9lWjrPEmkPGc5R7sc2PitF8IkOEjpfSTYJ+edPQEZSkqUIfSBlCplDVaYp8
         EoLz1a5hOQj86mL5DAZNNbkKfwtl7+zPqpAkI2ps+/Eb23nGtduK6GrT2YFPTL7aWk95
         Usl1Vsok2mbzciyw1PYQIi7yDN9i9ZiEMiF6k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=gIBxJWPXPYHvYExpYj9QxfpmR+jmr6HiXqG/VqmQSyE+aMAP1Pl6M0O81TxIy3bHdG
         zsbTZzGAR2TQ7kWqGTQGm3jcH/o+rTYNEAMYqarex/hAJ+MvSQM0v79YbJxrmGQ4thUt
         mbzR4iBIouUPCVQs1x6pmBm0IeL0xErL8JBrU=
MIME-Version: 1.0
Received: by 10.142.193.19 with SMTP id q19mr386530wff.111.1278052373478; Thu, 
	01 Jul 2010 23:32:53 -0700 (PDT)
Received: by 10.142.164.13 with HTTP; Thu, 1 Jul 2010 23:32:53 -0700 (PDT)
Date: Fri, 2 Jul 2010 14:32:53 +0800
Message-ID: <AANLkTinEGNzmNnQuiMA0Gz4RsrT6nrQWsQ8_4cfsfD5p@mail.gmail.com>
Subject: about contrib instantiated
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

it is said that "At a few thousand ~160 characters long documents
InstantiatedIndex outperforms RAMDirectory some 50x, 15x at 100
documents of 2000 characters length, and is linear to RAMDirectory at
10,000 documents of 2000 characters length. ".  I  have an index of
about 8,000,000 document and the current index size is about 30GB. Is
it possbile to use this contrib to speed up my search? I have enough
memory for it. Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 02 07:10:05 2010
Return-Path: <java-user-return-46603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46581 invoked from network); 2 Jul 2010 07:10:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Jul 2010 07:10:04 -0000
Received: (qmail 59672 invoked by uid 500); 2 Jul 2010 07:10:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59431 invoked by uid 500); 2 Jul 2010 07:09:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59422 invoked by uid 99); 2 Jul 2010 07:09:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jul 2010 07:09:57 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kafka0102@163.com designates 123.125.50.132 as permitted sender)
Received: from [123.125.50.132] (HELO m50-132.163.com) (123.125.50.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jul 2010 07:09:49 +0000
Received: from [192.168.123.123] (unknown [221.122.110.226])
	by smtp2 (Coremail) with SMTP id DNGowKCrp3KpkC1Ml2R+AA--.2986S2;
	Fri, 02 Jul 2010 15:09:29 +0800 (CST)
Message-ID: <4C2D909B.3080801@163.com>
Date: Fri, 02 Jul 2010 15:09:15 +0800
From: kafka0102 <kafka0102@163.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100512 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene and Chinese language
References: <137B4E3B8F30074EADD080AA8A6E2A9312950D4AE4@ZDE070.lenze.com> 	<AANLkTikbJR6nE5s4jmyXQwkoNpBZ9kVEPty6hfARHs4k@mail.gmail.com> 	<137B4E3B8F30074EADD080AA8A6E2A93129510C9F7@ZDE070.lenze.com> 	<AANLkTiljNZ5cIjK6H4yC2fUmk9FQFtdRaEr90_OF3p58@mail.gmail.com> 	<137B4E3B8F30074EADD080AA8A6E2A93129510CB12@ZDE070.lenze.com> 	<AANLkTin7qqH6kHC5NXZG5uzj5-iPwVd6zjv_fdrakkS9@mail.gmail.com> 	<137B4E3B8F30074EADD080AA8A6E2A93129510CB5E@ZDE070.lenze.com> <AANLkTilayzbDIcIdCsyvrAx7d6_Xn-NTfNI1uyikkhoM@mail.gmail.com>
In-Reply-To: <AANLkTilayzbDIcIdCsyvrAx7d6_Xn-NTfNI1uyikkhoM@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-CM-TRANSID:DNGowKCrp3KpkC1Ml2R+AA--.2986S2
X-Coremail-Antispam: 1Uf129KBjvJXoW7Kr1fWF1ktr1UZr4kGw4fAFb_yoW8tF4DpF
	WrKF4YkrnrXFyvvryjyw48Z3WYvryfGFnrXF4ktry7KrZxKr1kWFsIkrnY9ayUKFs2kr4F
	qa15tas3urn8u3DanT9S1TB71UUUUUUqnTZGkaVYY2UrUUUUjbIjqfuFe4nvWSU5nxnvy2
	9KBjDUYxBIdaVFxhVjvjDU0xZFpf9x07UrUUUUUUUU=
X-CM-SenderInfo: 5ndiytaqrqjqqrwthudrp/1tbiSBECb0kZ2YWC3gAAsk
X-Virus-Checked: Checked by ClamAV on apache.org

you can choose ik : http://code.google.com/p/ik-analyzer/ for this 
problem. It generates a better token result than standard and CJK. And, 
you can use its IKQueryParser instead of queryparser. It generates "and 
queries" instead of " phrase queries".



On 20100701 20:47, Robert Muir wrote:
> its really just a bad situation for chinese :(
>
> with queryparser, you either get no phrase query support (by using the
> hack), or all queries automatically become phrase queries.
>
> if you want to do the equivalent of **, then you need to use queryparser
> without the hack, just do a query of "" (with quotes).
> if you want to do the equivalent of    , then you need to use
> queryparser with the hack, just do a query of  (without quotes).
>
>
> 2010/7/1 Kolhoff, Jacqueline - ENCOWAY<Kolhoff@encoway.de>
>
>    
>> Ok, understand!
>>
>> So it is better to use another analyzer in the chinese case at index-time
>> or do you suggest to use another "QueryParser" at query-time?
>>
>> -----Ursprngliche Nachricht-----
>> Von: Robert Muir [mailto:rcmuir@gmail.com]
>> Gesendet: Donnerstag, 1. Juli 2010 14:35
>> An: java-user@lucene.apache.org
>> Betreff: Re: Lucene and Chinese language
>>
>> 2010/7/1 Kolhoff, Jacqueline - ENCOWAY<Kolhoff@encoway.de>
>>
>>      
>>> As you can see, the query parser automatically added double quotes and
>>> blanks. But this does not work for our English or German queries.
>>>
>>> If I use the PositionHackAnalyzerWrapper and the case with * I got no
>>> results, query is:
>>> +anotherfieldname:description +myfieldname:**
>>>
>>> If I remove the * the query is:
>>> + anotherfieldname: description
>>> +(myfieldname:myfieldname:myfieldname:myfieldname:)
>>>
>>> and I got results but not for German or English queries.
>>>
>>>        
>> Weird?
>>      
>>>
>>>        
>> its working correctly, your chinese wildcard query doesnt make sense, as
>> you
>> havent indexed the text in a way to do queries like that (you have indexed
>> individual chars).
>> in practice this is where you would do a chinese phrase query of ""
>> (with quotes) instead of *... but if you use the positionfilterhack, you
>> cant do phrase queries.
>>
>> --
>> Robert Muir
>> rcmuir@gmail.com
>>
>>      
>
>
>    



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 02 13:30:12 2010
Return-Path: <java-user-return-46604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51103 invoked from network); 2 Jul 2010 13:30:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Jul 2010 13:30:12 -0000
Received: (qmail 2292 invoked by uid 500); 2 Jul 2010 13:30:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1805 invoked by uid 500); 2 Jul 2010 13:30:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1797 invoked by uid 99); 2 Jul 2010 13:30:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jul 2010 13:30:04 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jul 2010 13:29:55 +0000
Received: by vws19 with SMTP id 19so5352413vws.35
        for <java-user@lucene.apache.org>; Fri, 02 Jul 2010 06:29:34 -0700 (PDT)
Received: by 10.220.57.193 with SMTP id d1mr389219vch.91.1278077374650;
        Fri, 02 Jul 2010 06:29:34 -0700 (PDT)
Received: from [137.1.0.252] ([206.105.205.66])
        by mx.google.com with ESMTPS id b5sm724296vcy.33.2010.07.02.06.29.33
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 02 Jul 2010 06:29:33 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: search for a string which begins with a '$' character
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <AANLkTim8UCX1d-2qXUz9TZDz-yUk-jV8rfDOQWlzYtDf@mail.gmail.com>
Date: Fri, 2 Jul 2010 09:29:32 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <4533A9E2-B7DC-4E67-8D2C-3CC4F9DAFE01@apache.org>
References: <AANLkTim8UCX1d-2qXUz9TZDz-yUk-jV8rfDOQWlzYtDf@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

What analyzer are you using?  Did you check that it is making it through =
your analyzer?

-Grant

On Jul 1, 2010, at 2:56 PM, Nathaniel Auvil wrote:

> i am trying to search for a value which begins with a '$' or even =
sometimes
> '$$'.  '$' is not listed as a special character and no matter what i =
try, i
> can not get a search for $* to return anything.  Using Luke, i browse =
my
> index and see several entries where the value exists with a leading =
'$'.
> How can i search for these?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 02 13:53:18 2010
Return-Path: <java-user-return-46605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55877 invoked from network); 2 Jul 2010 13:53:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Jul 2010 13:53:18 -0000
Received: (qmail 36897 invoked by uid 500); 2 Jul 2010 13:53:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36644 invoked by uid 500); 2 Jul 2010 13:53:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36635 invoked by uid 99); 2 Jul 2010 13:53:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jul 2010 13:53:12 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nathaniel.auvil@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jul 2010 13:53:04 +0000
Received: by vws19 with SMTP id 19so5386366vws.35
        for <java-user@lucene.apache.org>; Fri, 02 Jul 2010 06:51:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=SMgxvPOM1wmQRbQ+C89aSBFS9CicFhl5/2ppmJhfXBk=;
        b=OCoeFyWhnvgLvdclDytL9CPjt0FlPUoIukYkEsubdnNVPTwRYVN/A5KkWE2+1b9eiD
         m87EZ3puvMe4b+xR8BNTsuNk+yvfhLluQPvzsg/cBnQrzqmaGzQo6ITYJF9eI7Y0n8oK
         LfNSTQPPvAY3SSo7VNnBfwmGhsc0Y0OED5TZM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=osfYNgXW/zybX5lpGcm4B5sVWUIvY3Crs9oEDmp0QLgbI5OnfTcdUBp0hKoznmHPQV
         KrR8Yhf4ulpVgdihGffYANYES0eUXnxeNScE3MgxQxGzr/YQ05mj7itMzwxsksPvI+cQ
         wILLfYhqUckQ6C+z6jwntautyF/hxHcF99tbs=
MIME-Version: 1.0
Received: by 10.224.47.85 with SMTP id m21mr418369qaf.149.1278078703104; Fri, 
	02 Jul 2010 06:51:43 -0700 (PDT)
Received: by 10.224.19.146 with HTTP; Fri, 2 Jul 2010 06:51:43 -0700 (PDT)
In-Reply-To: <4533A9E2-B7DC-4E67-8D2C-3CC4F9DAFE01@apache.org>
References: <AANLkTim8UCX1d-2qXUz9TZDz-yUk-jV8rfDOQWlzYtDf@mail.gmail.com>
	<4533A9E2-B7DC-4E67-8D2C-3CC4F9DAFE01@apache.org>
Date: Fri, 2 Jul 2010 09:51:43 -0400
Message-ID: <AANLkTikzi3bAf0pwXwMvpz95R-OgyGbl7OEwKUEsBdIj@mail.gmail.com>
Subject: Re: search for a string which begins with a '$' character
From: Nathaniel Auvil <nathaniel.auvil@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151750e89417f529048a67e3aa
X-Virus-Checked: Checked by ClamAV on apache.org

--00151750e89417f529048a67e3aa
Content-Type: text/plain; charset=ISO-8859-1

I am using this analyzer: @Analyzer(impl =
org.apache.lucene.analysis.standard.StandardAnalyzer.class)

"$" is not inlcluded in the STOP_WORDS for this analyzer.  Is there
somewhere else i should be looking?  When i use Luke with the
standardAnalyzer, it does not parse the query.  Is there a way to see why?



On Fri, Jul 2, 2010 at 9:29 AM, Grant Ingersoll <gsingers@apache.org> wrote:

> What analyzer are you using?  Did you check that it is making it through
> your analyzer?
>
> -Grant
>
> On Jul 1, 2010, at 2:56 PM, Nathaniel Auvil wrote:
>
> > i am trying to search for a value which begins with a '$' or even
> sometimes
> > '$$'.  '$' is not listed as a special character and no matter what i try,
> i
> > can not get a search for $* to return anything.  Using Luke, i browse my
> > index and see several entries where the value exists with a leading '$'.
> > How can i search for these?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00151750e89417f529048a67e3aa--

From java-user-return-46606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 02 18:39:12 2010
Return-Path: <java-user-return-46606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38893 invoked from network); 2 Jul 2010 18:39:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 2 Jul 2010 18:39:12 -0000
Received: (qmail 43294 invoked by uid 500); 2 Jul 2010 18:39:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43231 invoked by uid 500); 2 Jul 2010 18:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43222 invoked by uid 99); 2 Jul 2010 18:39:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jul 2010 18:39:09 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdixon@omniti.com designates 8.8.38.6 as permitted sender)
Received: from [8.8.38.6] (HELO edge.omniti.com) (8.8.38.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Jul 2010 18:39:01 +0000
DKIM-Signature: v=1; a=rsa-sha256; d=omniti.com; s=s1024; c=relaxed/relaxed;
	q=dns/txt; i=@omniti.com; t=1278095911;
	h=From:Subject:Date:To;
	bh=5mW/o0Yolk6i0ziVhBG6Cou4Hi1vnQwwKX1QuEi5AVE=;
	b=duUXKB+g7wjtZGb5pu1qqXnVVAlxwiLTwMo7LqOC5nyKbzqean0Li3xmUvfTssvN
	HsmdFvNOgUD9NEj1w+46I+al63hPfD40M85CxH3naRy15bx2znhjhBA4pTp7791H
	7QKDo5MUhyqtK84gsmhDJ3EPn12cBZ4EbUnENrZ+tZk=;
Authentication-Results:  edge smtp.user=jdixon@omniti.com; auth=pass (LOGIN)
Received: from [68.55.0.29] ([68.55.0.29:52417] helo=omniti.com)
	by edge (envelope-from <jdixon@omniti.com>)
	(ecelerity 2.2.2.35 r(26636M)) with ESMTPSA (cipher=AES256-SHA) 
	id 8B/78-17327-6223E2C4; Fri, 02 Jul 2010 14:38:31 -0400
Date: Fri, 2 Jul 2010 14:38:27 -0400
From: Jason Dixon <jdixon@omniti.com>
To: java-user@lucene.apache.org
Subject: CFP for Surge Scalability Conference 2010
Message-ID: <20100702183827.GM29381@omniti.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Virus-Checked: Checked by ClamAV on apache.org

A quick reminder that there's one week left to submit your abstract for
this year's Surge Scalability Conference.  The event is taking place on
Sept 30 and Oct 1, 2010 in Baltimore, MD.  Surge focuses on case studies
that address production failures and the re-engineering efforts that led
to victory in Web Applications or Internet Architectures.

Our Keynote speakers include John Allspaw and Theo Schlossnagle.  We are
currently accepting submissions for the Call For Papers through July
9th.  You can find more information, including suggested topics and our
current list of speakers, online:

http://omniti.com/surge/2010

I'd also like to urge folks who are planning to attend, to get your
session passes sooner rather than later.  We have limited seating and we
are on track to sell out early.  For more information, including the
CFP, sponsorship of the event, or participating as an exhibitor, please
visit the Surge website or contact us at surge@omniti.com.

Thanks,

-- 
Jason Dixon
OmniTI Computer Consulting, Inc.
jdixon@omniti.com
443.325.1357 x.241

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 03 11:38:18 2010
Return-Path: <java-user-return-46607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40802 invoked from network); 3 Jul 2010 11:38:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Jul 2010 11:38:18 -0000
Received: (qmail 45097 invoked by uid 500); 3 Jul 2010 11:38:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44577 invoked by uid 500); 3 Jul 2010 11:38:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44564 invoked by uid 99); 3 Jul 2010 11:38:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jul 2010 11:38:11 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.15] (HELO web52905.mail.re2.yahoo.com) (206.190.49.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 03 Jul 2010 11:38:02 +0000
Received: (qmail 45774 invoked by uid 60001); 3 Jul 2010 11:37:41 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1278157061; bh=dp/eFjdnImwc+jmTIOdCqO91jTO/XpQ3k1HfTz0f6Z0=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=DPsKsrV3GX/SWsUnjeFER1jn0/4bT9E5h9k38r+Uc1pijzPAmtr6RiorRNKK5DyOeFjgmANNXHzv9Q3g64Vb7HAZZFZRPSGq2X0S4gsKtkt38Q9mO4r6c8G4lC+w4PWWigRpQrM84/LCytzQpx91DpSeJ/s729zfWaelJlhG77o=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=sq+trHzxo7dSAXMds+wOPTgDzDicBhjP56cS405kn7nlzkPaSaWotfI44XmuJTnO9MpuI6SOBhpQn2PV16k8Wigl+WmU1PHe44wZOC4e+L138m98XhsjW6KxnfRqE2AC+Ajieblm9TSPvm61TR+mqWRS87LDJPD659W5kv1k7XI=;
Message-ID: <100928.41325.qm@web52905.mail.re2.yahoo.com>
X-YMail-OSG: iFcMYAAVM1m6otB6r2NsBzN2zv_iyQJHHjTf_pOU51TZVP.
 GEPbn4hG1aQt4HYGcTduB91K5WZKwfp.3dhRbLxqmNMq0DloO2Z1AbgIsSUC
 GE.Fm7OKVkqinO9Egn.RJY6qtiZ1uObltVOFqBQzw7fgQOH5lEWXnyOeDLqt
 g_EMSAQ39e_ZtaGdATgd2fzZRpDAUkPEpu5G_Yj.LdX0FrMLwVJJwbHeTb6q
 zRUP_qTDruGReNLfk2tNM.Ds091hWMjfEpM73Ql.L1StPt8.WjMbbU56GTvY
 kF6LdflQ2U1wumtl39mFyO6w.ZglN6YvNGVdS6_Jp.nMB9wR0orsDcQ--
Received: from [78.168.95.108] by web52905.mail.re2.yahoo.com via HTTP; Sat, 03 Jul 2010 04:37:41 PDT
X-Mailer: YahooMailClassic/11.1.4 YahooMailWebService/0.8.104.274457
Date: Sat, 3 Jul 2010 04:37:41 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: search for a string which begins with a '$' character
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTikzi3bAf0pwXwMvpz95R-OgyGbl7OEwKUEsBdIj@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> I am using this analyzer:=0A> @Analyzer(impl =3D=0A> org.apache.lucene.an=
alysis.standard.StandardAnalyzer.class)=0A> =0A> "$" is not inlcluded in th=
e STOP_WORDS for this=0A> analyzer.=A0 Is there=0A> somewhere else i should=
 be looking?=A0 When i use Luke=0A> with the=0A> standardAnalyzer, it does =
not parse the query.=A0 Is=0A> there a way to see why?=0A=0A"$" won't survi=
ve StandardAnalyzer. You can use WhitespaceAnalyzer instead.=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 03 14:50:10 2010
Return-Path: <java-user-return-46608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79204 invoked from network); 3 Jul 2010 14:50:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Jul 2010 14:50:09 -0000
Received: (qmail 7428 invoked by uid 500); 3 Jul 2010 14:50:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7372 invoked by uid 500); 3 Jul 2010 14:50:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7364 invoked by uid 99); 3 Jul 2010 14:50:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jul 2010 14:50:06 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jul 2010 14:49:58 +0000
Received: by ewy10 with SMTP id 10so1877320ewy.35
        for <java-user@lucene.apache.org>; Sat, 03 Jul 2010 07:48:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=onFjmrB6Vs61skuv8Ei1WLE67+Q5W7QTfu+hlft7DhQ=;
        b=oAViibuQjhN+fZgZR948xwF5Kn9Z5RlwrdhisNSka8kDkw6aNv/AgwDzfH4WJf7Rok
         LPMiGgEneckgTWBrtwJ6i/ZF4sbukdZ1quV/qMmci4kW/afh5DmcF3GvUyQEFgctJGGq
         i2or+ITBslZpvleZjy+RY0A8qQ63IA0NuxaUA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=ETs0jMgs2wGbQArChTYBxRVp7iD4lGpCOxWExdO7arrgaJNNQcKeSsHmHXWkqzs3b3
         L2IlzVSRPYCprjXk8oshpUWc7HamzWQEtwf/coGFK9MlfRI8MunnodLnxPsRRu2PcHJN
         G5X+FwccApfRJgaH39TY5sFQyQWAhy5cVp1Jg=
Received: by 10.213.98.71 with SMTP id p7mr289783ebn.59.1278168528901;
        Sat, 03 Jul 2010 07:48:48 -0700 (PDT)
Received: from [10.0.25.6] (95-36-32-119.dsl.alice.nl [95.36.32.119])
        by mx.google.com with ESMTPS id z55sm16095091eeh.3.2010.07.03.07.48.46
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 03 Jul 2010 07:48:47 -0700 (PDT)
Message-Id: <69575A45-B97A-467B-96FB-525F46F3A5AA@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTinEGNzmNnQuiMA0Gz4RsrT6nrQWsQ8_4cfsfD5p@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: about contrib instantiated
Date: Sat, 3 Jul 2010 16:48:45 +0200
References: <AANLkTinEGNzmNnQuiMA0Gz4RsrT6nrQWsQ8_4cfsfD5p@mail.gmail.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org


2 jul 2010 kl. 08.32 skrev Li Li:

> I  have an index of
> about 8,000,000 document and the current index size is about 30GB. Is
> it possbile to use this contrib to speed up my search? I have enough
> memory for it.


In order to answer your question you'll need to benchmark using a lot  
of typical queries. My guess is that it will probably be about as fast  
as a RAMDirectory while consuming a lot more memory. It's hard to say  
for sure though.

II is faster than RD mainly due to the need for RD to unmarshall  
information from a byte stream to java instances, hence the name. As  
the index grows the time spent in RD unmarshalling will shrink  
compared to the time spent seeking (mainly in DocsEnum/ 
DocsAndPositionsEnum) and scoring documents. Thus executing queries on  
a large index using terms that are only available in a small portion  
of the documents should be faster on II than on RD, while exeuting  
queries using frequently occuring terms will consume about as much time.

(Perhaps the documentation should explain it this way rather than just  
state "Mileage may vary depending on term saturation".)

While benchmarking remember that RD might require a warm up period  
while II does not.

Feel free to report back with any findings.



	karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 03 22:14:35 2010
Return-Path: <java-user-return-46609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66220 invoked from network); 3 Jul 2010 22:14:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 3 Jul 2010 22:14:35 -0000
Received: (qmail 88488 invoked by uid 500); 3 Jul 2010 22:14:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88223 invoked by uid 500); 3 Jul 2010 22:14:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88208 invoked by uid 99); 3 Jul 2010 22:14:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jul 2010 22:14:33 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kasunbg@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Jul 2010 22:14:25 +0000
Received: by pvc30 with SMTP id 30so746523pvc.35
        for <multiple recipients>; Sat, 03 Jul 2010 15:14:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=iMVdOlJLzZRHPQ0ejD2Nx8aEGBucVYxDXstJPyVpPVc=;
        b=wociVjVCgPjdjEIGYJQY1sIyYmJCJFeYzsgpS5JHL7Llkl/2b5QyvT7XADCS9vu92V
         iI4w+I3TDi1yjlk9ECkG2v6WIM8r+/f09CJx2Gel0g/LZCU4KiMd9vNznuDZRzmt5nJH
         madWPKwkLafRzczLdaJXZNm6cq57wWUT8r8XM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=FuRc+SsWgGWnB4L4XfYlWmzhQ4oZ3EjVKztHKjbGBdJIGiSalaW4/Es/L6lkNapUKo
         PWoONuobvaN/3GCveU5QQHnas6nkOYkfSl7XvfPlQKwKVl29c3OpvFyba4TULq74+SGK
         XMCQsHs5zM50kPVfmvMbPiF6UlWjKVA5Nffx8=
MIME-Version: 1.0
Received: by 10.142.172.15 with SMTP id u15mr968223wfe.323.1278195243124; Sat, 
	03 Jul 2010 15:14:03 -0700 (PDT)
Received: by 10.142.73.6 with HTTP; Sat, 3 Jul 2010 15:14:03 -0700 (PDT)
Date: Sun, 4 Jul 2010 03:44:03 +0530
Message-ID: <AANLkTinnVk_nFfUG4Tf6T70DKgWOpRzZjWK6H73Z0Iv2@mail.gmail.com>
Subject: Write QueryParser in JavaScript and use Lucene JAVA Indexer for 
	searching
From: Kasun Gajasinghe <kasunbg@gmail.com>
To: dev@lucene.apache.org, java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2de9c6b8763048a830559
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2de9c6b8763048a830559
Content-Type: text/plain; charset=UTF-8

Hello,
I need to add a completely client-side search mechanism to a help system that
I'm implementing for a Google Summer of Code project for DocBook. I use an
Ant script to run xslts that generate html from DocBook XML. I can use a
Java indexer to index the html, but when performing the search, I need to
access the index via JavaScript. There is no way of invoking a Java code and
NO server-side calls can be used. This allows users to use the documentation
even through local filesystem without any problem. I do understand it's a
difficult requirement to achieve, but there is no other option. I'm willing
to code on low-level with use of Lucene API for this.

My questions are:

   - Is there a way to build the index with a structure I define? Lucene
   creates its index in a binary format, which I cannot access using
   JavaScript. Therefore, I would have to edit Lucene backend classes to have a
   customized index in a plain text format. If this lets me benefit from
   Lucene's many strengths (stemming, cjk support), It's well worth my time to
   do it. So my question is: what java files do I need to edit? I see that the
   IndexFiles class does the indexing. I need to find what specific classes are
   involved when writing out the index.
   - I know that there is no JavaScript implementation available for Lucene
   QueryParser (or if there's one, please let me know!). So which classes
   should I study to reimplement them in JavaScript?
   - Are there any other concerns regarding this approach? I'm not sure that
   this will ultimately be feasible. I have about one month to do the
   implementation, so I'm trying to determine if this approach is worth
   persuing or if I should take another approach.

Lucene is a great tool. I'm happy to contribute back whatever I can do in
making use of it.

Thanks for any help you can give me to get me started in this.

/KasunBG

--000e0cd2de9c6b8763048a830559--

From java-user-return-46610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 04 17:06:22 2010
Return-Path: <java-user-return-46610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73507 invoked from network); 4 Jul 2010 17:06:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Jul 2010 17:06:21 -0000
Received: (qmail 35399 invoked by uid 500); 4 Jul 2010 17:06:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35313 invoked by uid 500); 4 Jul 2010 17:06:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35305 invoked by uid 99); 4 Jul 2010 17:06:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jul 2010 17:06:18 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jul 2010 17:06:10 +0000
Received: by gxk7 with SMTP id 7so408690gxk.35
        for <java-user@lucene.apache.org>; Sun, 04 Jul 2010 10:05:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.235.10 with SMTP id i10mr2315429anh.1.1278263100595; Sun, 
	04 Jul 2010 10:05:00 -0700 (PDT)
Received: by 10.151.106.16 with HTTP; Sun, 4 Jul 2010 10:05:00 -0700 (PDT)
In-Reply-To: <AANLkTikHsYZBzTvZ8Zs2m4xkLq0ZT2fnOzdQcJMau99N@mail.gmail.com>
References: <83E95AE8-229B-47E9-B688-77738818C8DB@mit.edu>
	<002a01cb162e$bbf47d20$33dd7760$@thetaphi.de>
	<9FEF26B1-90E3-446D-858D-B532F366A800@mit.edu>
	<AANLkTikHsYZBzTvZ8Zs2m4xkLq0ZT2fnOzdQcJMau99N@mail.gmail.com>
Date: Sun, 4 Jul 2010 13:05:00 -0400
Message-ID: <AANLkTikHfPK4DUrVMZPtcPLYrSKL541QNDtGzxp9y4oS@mail.gmail.com>
Subject: Re: I don't find MultipleTermPositions in svn
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hmm it looks like we should move UnionDocsAndPositionsEnum out of
MultiPhraseQuery, into oal.index, and make it public (like
MultipleTermPositions is in 3.x).  And note this in MIGRATE.txt.

I'll open an issue...

Mike

On Sun, Jun 27, 2010 at 9:13 PM, Robert Muir <rcmuir@gmail.com> wrote:
> On Sun, Jun 27, 2010 at 8:46 PM, Peter Wilkins <pwilkins@mit.edu> wrote:
>
>> Uwe:
>> Thanks for the answer to my question. =A0If the API has changed, is ther=
e a
>> document describing a mapping from v3.x to v4.x, or perhaps an online
>> discussion of the changes? =A0It sounds like the change to v4.x will be
>> dramatic!
>>
>>
> There is such a guide, see lucene/migration.txt... in this case i think y=
ou
> are interested in docsandpositionsenum... you can look at multiphrasequer=
y
> for a similar example, it has a =A0uniondocsandpositionsenum inside it.
>
>
> --
> Robert Muir
> rcmuir@gmail.com
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 04 17:30:26 2010
Return-Path: <java-user-return-46611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77139 invoked from network); 4 Jul 2010 17:30:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Jul 2010 17:30:25 -0000
Received: (qmail 47395 invoked by uid 500); 4 Jul 2010 17:30:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47348 invoked by uid 500); 4 Jul 2010 17:30:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47340 invoked by uid 99); 4 Jul 2010 17:30:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jul 2010 17:30:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jul 2010 17:30:16 +0000
Received: by gyg10 with SMTP id 10so3638669gyg.35
        for <java-user@lucene.apache.org>; Sun, 04 Jul 2010 10:29:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.70.11 with SMTP id s11mr2106229aga.182.1278264595458; Sun, 
	04 Jul 2010 10:29:55 -0700 (PDT)
Received: by 10.151.106.16 with HTTP; Sun, 4 Jul 2010 10:29:55 -0700 (PDT)
In-Reply-To: <492379B6AA909E4FAF672AACCA0EADC25CC4D3E57F@PHXCCRPRD02.adprod.bmc.com>
References: <1274780529673-841735.post@n3.nabble.com>
	<AANLkTikLbtYDza9PYACV3ioC-ia0Y1-COBchbCpNo-Fb@mail.gmail.com>
	<1274800094618-842321.post@n3.nabble.com>
	<1275900733831-875713.post@n3.nabble.com>
	<AANLkTilViLXbdJKbns2EbnJdm0mss7ps8VWIuMWxXQ6w@mail.gmail.com>
	<1275905888978-875884.post@n3.nabble.com>
	<AANLkTikNozElA37RStr0xJ8r77DzNjxqiqTkl1UxU8q-@mail.gmail.com>
	<1275909546382-876022.post@n3.nabble.com>
	<AANLkTinST9vNGEsL0HjgTI09UL93e4FsXHiD9hFEfjY3@mail.gmail.com>
	<492379B6AA909E4FAF672AACCA0EADC25CC4D3E57F@PHXCCRPRD02.adprod.bmc.com>
Date: Sun, 4 Jul 2010 13:29:55 -0400
Message-ID: <AANLkTilaUY_d65R0FbdLvnZoaNmZOW4eBM_ajlvThQ2q@mail.gmail.com>
Subject: Re: MultiPhraseQuery.toString() throws null pointer exception
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I opened LUCENE-2526 for this...

Mike

On Thu, Jul 1, 2010 at 2:19 PM, Woolf, Ross <Ross_Woolf@bmc.com> wrote:
> In Lucene 2.9.2 (have not checked 3.x) calling MultiPhraseQuery.toString(=
) throws a null pointer exception. =A0Below is very simple code to test thi=
s out.
>
> import org.apache.lucene.search.MultiPhraseQuery;
>
> public class testMPQ {
>
> =A0 =A0 =A0 =A0public static void main(String[] args){
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0MultiPhraseQuery mpq =3D new MultiPhraseQu=
ery();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0System.out.println(mpq.toString());
> =A0 =A0 =A0 =A0}
> }
>
> It will produce the following exception:
> Exception in thread "main" java.lang.NullPointerException
> =A0 =A0 =A0 =A0at org.apache.lucene.search.MultiPhraseQuery.toString(Mult=
iPhraseQuery.java:275)
> =A0 =A0 =A0 =A0at testMPQ.main(tesMPQ.java:7)
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 04 17:58:42 2010
Return-Path: <java-user-return-46612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80866 invoked from network); 4 Jul 2010 17:58:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Jul 2010 17:58:41 -0000
Received: (qmail 73865 invoked by uid 500); 4 Jul 2010 17:58:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73819 invoked by uid 500); 4 Jul 2010 17:58:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73809 invoked by uid 99); 4 Jul 2010 17:58:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jul 2010 17:58:38 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jul 2010 17:58:31 +0000
Received: by gwj23 with SMTP id 23so2596445gwj.35
        for <java-user@lucene.apache.org>; Sun, 04 Jul 2010 10:58:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.31.11 with SMTP id e11mr2078846age.164.1278266289618; Sun, 
	04 Jul 2010 10:58:09 -0700 (PDT)
Received: by 10.151.106.16 with HTTP; Sun, 4 Jul 2010 10:58:09 -0700 (PDT)
In-Reply-To: <AANLkTikhAOOkngzuPca5a6bRB9ZGh4xsoxXmGXWFscFD@mail.gmail.com>
References: <AANLkTikhAOOkngzuPca5a6bRB9ZGh4xsoxXmGXWFscFD@mail.gmail.com>
Date: Sun, 4 Jul 2010 13:58:09 -0400
Message-ID: <AANLkTinS7Q5YlbjPwAY6R-reY_PVDcquupYbhbpriOfV@mail.gmail.com>
Subject: Re: IndexWriter.mergeDocument(Term term, Document doc)
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This idea has been discussed a few times on the list... eg try
googling on "incremental document field update".

It's tricky; Lucene doesn't make it easy to update just a portion of a
document's postings information.  The implementation will be very
different from updateDocument...

Mike

On Tue, Jun 29, 2010 at 11:58 AM, Pablo Mendes <pablomendes@gmail.com> wrot=
e:
> Hi all,
> I'm looking for a functionality similar to IndexWriter.updateDocument()
>
> *IndexWriter.**updateDocument<http://lucene.apache.org/java/3_0_2/api/cor=
e/org/apache/lucene/index/IndexWriter.html#updateDocument%28org.apache.luce=
ne.index.Term,%20org.apache.lucene.document.Document%29>
> *(Term<http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/ind=
ex/Term.html>
> term,
> Document<http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/d=
ocument/Document.html>
> =A0doc)
> =A0 =A0 =A0 =A0 =A0Updates a document by first deleting the document(s) c=
ontaining
> term and then adding the new document.
>
> *IndexWriter.**updateDocument<http://lucene.apache.org/java/3_0_2/api/cor=
e/org/apache/lucene/index/IndexWriter.html#updateDocument%28org.apache.luce=
ne.index.Term,%20org.apache.lucene.document.Document,%20org.apache.lucene.a=
nalysis.Analyzer%29>
> *(Term<http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/ind=
ex/Term.html>
> term,
> Document<http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/d=
ocument/Document.html>
> doc,
> Analyzer<http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/a=
nalysis/Analyzer.html>
> =A0analyzer)
> =A0 =A0 =A0 =A0 =A0Updates a document by first deleting the document(s) c=
ontaining
> term and then adding the new document.
>
> But instead of deleting the document containing term and then adding the =
new
> document,
> I'd like to merge the information from the new document with the document
> containing the term .
>
> *IndexWriter.merge**Document*(Term<http://lucene.apache.org/java/3_0_2/ap=
i/core/org/apache/lucene/index/Term.html>
> term,
> Document<http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/d=
ocument/Document.html>
> =A0doc)
> =A0 =A0 =A0 =A0 =A0Updates a document by merging the information in the d=
ocument
> containing term and the new document.
>
> *IndexWriter.merge**Document*(Term<http://lucene.apache.org/java/3_0_2/ap=
i/core/org/apache/lucene/index/Term.html>
> term,
> Document<http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/d=
ocument/Document.html>
> =A0doc, Analyzer<http://lucene.apache.org/java/3_0_2/api/core/org/apache/=
lucene/analysis/Analyzer.html>
> =A0analyzer)
> =A0 =A0 =A0 =A0 =A0Updates a document by merging the information in the d=
ocument
> containing term and the new document.
>
> I couldn't find anything like that in 3.0.2 [1], so I assume I'll have to
> implement it myself.
> Is the implementation of IndexWriter.updateDocument itself a good startin=
g
> point?
>
> Does anybody have suggestions on how to go about it? Or is it there in so=
me
> other shape or form?
> Or is it absolutely discouraged?
>
> Thanks,
> Pablo
>
> [1]
> http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/document/c=
lass-use/Document.html
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 04 18:10:09 2010
Return-Path: <java-user-return-46613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86118 invoked from network); 4 Jul 2010 18:10:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 4 Jul 2010 18:10:09 -0000
Received: (qmail 78888 invoked by uid 500); 4 Jul 2010 18:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78833 invoked by uid 500); 4 Jul 2010 18:10:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78825 invoked by uid 99); 4 Jul 2010 18:10:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jul 2010 18:10:06 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Jul 2010 18:09:59 +0000
Received: by gxk7 with SMTP id 7so426963gxk.35
        for <java-user@lucene.apache.org>; Sun, 04 Jul 2010 11:08:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.31.11 with SMTP id e11mr2087834age.164.1278266927375; Sun, 
	04 Jul 2010 11:08:47 -0700 (PDT)
Received: by 10.151.106.16 with HTTP; Sun, 4 Jul 2010 11:08:47 -0700 (PDT)
In-Reply-To: <4C29BBD1.3050708@isb-sib.ch>
References: <4C29BBD1.3050708@isb-sib.ch>
Date: Sun, 4 Jul 2010 14:08:47 -0400
Message-ID: <AANLkTikR324BpcsGCxOPEFNPZmxErr9rC0h5UibBu-Bw@mail.gmail.com>
Subject: Re: Unsupported operation in TermDocs.next() when migrating from 2.4 
	to 2.9
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, jerven.bolleman@isb-sib.ch
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

That is spooky.  It certainly sounds like a regression.

It's odd that your MultiTermEnum is pulling an AllTermDocs under the
hood -- this should only happen if you did a .seek(null) on it, but
your code seems to first check that term !=3D null, so it should never
pass a null term.

Can you add a temporary assert to DirectoryReader.java, in 29x, around
line 1191.  It should be this method:

    protected TermDocs termDocs(IndexReader reader)
      throws IOException {
      return term=3D=3Dnull ? reader.termDocs(null) : reader.termDocs();
    }

Add an assert term !=3D null, and run you code w/ assertions on, and see
if it trips (the assert is not safe, in general, but should not trip
in how I think you are using it).  If it does trip... try to track
down how a null term got in there?

Mike

On Tue, Jun 29, 2010 at 5:24 AM, Jerven Bolleman
<jerven.bolleman@isb-sib.ch> wrote:
> Hi All,
>
> I am finally having some time to upgrade our lucene from the 2.4 series t=
o
> the 2.9 series. And I am having a problem that while everything compiles
> great I am getting a new UnsupportedOperationException.
>
>
> java.lang.UnsupportedOperationException
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.AbstractAllTermDocs.seek(AbstractAllTermDocs.java=
:42)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.DirectoryReader$MultiTermDocs.termDocs(DirectoryR=
eader.java:1186)
> =A0 =A0 =A0 =A0at
> org.apache.lucene.index.DirectoryReader$MultiTermDocs.next(DirectoryReade=
r.java:1118)
> =A0 =A0 =A0 =A0at
> org.expasy.core.index.SubQueryFilter.fastForLargeResultSets(SubQueryFilte=
r.java:129)
>
> I copied in the code that calls this. See an explanation of what it tries=
 to
> achieve underneath.
>
> private void fastForLargeResultSets(String foreignField, BitSet bits,
> TermDocs docs, TermDocs foreignDocs, IndexReader foreignReader, BitSet
> queryResults)
> =A0 =A0 =A0 =A0throws IOException
> {
> =A0 =A0 =A0 =A0int start =3D queryResults.nextSetBit(0);
> =A0 =A0 =A0 =A0TermEnum foreignEnum =3D foreignReader.terms(new Term(fore=
ignField,
> ""));
> =A0 =A0 =A0 =A0while (foreignEnum.next())
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0Term term =3D foreignEnum.term();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (term =3D=3D null || !term.field().equa=
ls(foreignField))
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0break;
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (!term.text().equals("not_null"))
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0foreignDocs.skipTo(start);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0foreignDocs.seek(term);
> //Source of exception in my code
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0while (foreignDocs.next())
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0int doc =
=3D foreignDocs.doc();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (queryR=
esults.get(doc))
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0foreignDocs.skipTo(doc);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0if (term !=3D null && term.text() !=3D
> null)
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 =A0 =A0 =A0 =A0buffer.add(term.text());
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> // Use a buffer to avoid jumping around on disk to much.
> //
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0if (buffer=
.size() >=3D BUFFERSIZE)
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0emptyBuffer(buffer, bits, docs);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0}
>
> =A0 =A0 =A0 =A0if (!buffer.isEmpty())
> =A0 =A0 =A0 =A0{
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0emptyBuffer(buffer, bits, docs);
> =A0 =A0 =A0 =A0}
> }
>
> The purpose of this code is to fill a bitset as a filter. The filter is u=
sed
> to find documents in index a who have a linking key value to them in inde=
x
> b.
>
> While resource intensive this code path was quite fast for when you have
> multimillion documents in index b pointing to multimillion documents in
> index b.
>
> i.e. it creates a "join" between two queries on different indexes.
>
> for a live example
> http://www.uniprot.org/uniprot/?query=3Dcitation%3A%28author%3Afink%29
> this a search for fink in the field author in the "citation" index.
> For each document in the "citation" index that matches term "fink" in the
> field "author" retrieve the terms that contain an uniquely identifying ke=
y
> value for documents in the "uniprot" index. Generate a bitset to use in
> filtering the documents in the "uniprot" index (done in the emptybuffer
> method).
>
> Is this a bug? and does anyone have ideas for an effective (maybe superio=
r)
> work around?
>
> Regards and thanks for a great project!
>
> Jerven
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 05 09:03:32 2010
Return-Path: <java-user-return-46614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67557 invoked from network); 5 Jul 2010 09:03:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Jul 2010 09:03:32 -0000
Received: (qmail 65971 invoked by uid 500); 5 Jul 2010 09:03:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65503 invoked by uid 500); 5 Jul 2010 09:03:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65495 invoked by uid 99); 5 Jul 2010 09:03:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jul 2010 09:03:24 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jul 2010 09:03:16 +0000
Received: by vws19 with SMTP id 19so8449415vws.35
        for <java-user@lucene.apache.org>; Mon, 05 Jul 2010 02:02:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=qtAQUbLNQ5n2Shh/qtVpsMMA9ntk4ca7YeBs45s1ptQ=;
        b=iPBSzdKQLFa4ZTb+LulOqd6TeigbqrdMgDNUgh7XcR8OW74afAN3B2W75Wcv+S7BL+
         FFqqD9mbH88gvl3tenBB13C/XG8Fge1hKer3/U0NIbD1oELKKLAcssgrvhatBhfJsLeD
         Y5X2RCV5ly/BFYd/Cb7+/Noj4zrwTCAhe+mWE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=oO5sI2+hWUSK4x/U1jGuK1q9Ynsp9NnNUE1hzNbn01C4F2mKcua/X8sdr2otV8MAV+
         HAXDY14z6CCkBzSkuNnvPl/yY7NbWcDaAk89w2ZWNOA0dkKqHrGk3GwSq3I9grmsXaW3
         n3aiIjTMb78j++4bzKu7XqNAhi8VKCIXKCgr4=
MIME-Version: 1.0
Received: by 10.220.62.206 with SMTP id y14mr1389711vch.111.1278320575905; 
	Mon, 05 Jul 2010 02:02:55 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Mon, 5 Jul 2010 02:02:55 -0700 (PDT)
Date: Mon, 5 Jul 2010 14:32:55 +0530
Message-ID: <AANLkTikYo4aJEDg2l-2o4Bh-uFb6WVP5z6LfWBzLiw11@mail.gmail.com>
Subject: Lucene Scoring
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e887885d60290048aa03319
X-Virus-Checked: Checked by ClamAV on apache.org

--e0cb4e887885d60290048aa03319
Content-Type: text/plain; charset=ISO-8859-1

Hi,

In my application, I input only single term query (at one time) and get back
the corresponding scorings for those queries. But I am little struggling of
understanding Lucene scoring. I have reffered
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similarity.html
and
some other pages to resolve my matters. But some are still remain.

1) Why it has taken the squareroot of frequency as the tf value and square
of the idf vale in score function?

2) If I enter single term query, then what will return bythe coord(q,d)?
Since there are always one term in the query, I think always it should be 1!
Am I correct?

3) I am also struggling understanding sumOfSquaredWeights (in queryNorm(q)).
As I can understand, this value depends on the nature of the query we input
and depends on that, it uses different methods such as TermQuery,
MultiTermQuery, BooleanQuery, WildcardQuery, PhraseQuery, PrefixQuery, etc.
But if I always use single term query, then what will be the way selected by
the system from above?

If somebody can pls. help me to resolve these problems. Appreciate any reply
from you.

Regards,
Manjula

--e0cb4e887885d60290048aa03319--

From java-user-return-46615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 05 12:08:43 2010
Return-Path: <java-user-return-46615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23757 invoked from network); 5 Jul 2010 12:08:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Jul 2010 12:08:43 -0000
Received: (qmail 95788 invoked by uid 500); 5 Jul 2010 12:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95435 invoked by uid 500); 5 Jul 2010 12:08:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95405 invoked by uid 99); 5 Jul 2010 12:08:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jul 2010 12:08:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jul 2010 12:08:28 +0000
Received: by qwd7 with SMTP id 7so2660754qwd.35
        for <java-user@lucene.apache.org>; Mon, 05 Jul 2010 05:07:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=lQ5jnasvJKL0vWHLB66IhPJdaS/moNy7+I8ziG+r/ps=;
        b=EQK0ciW1Ax4K5c2ivDLL3I2Cx1315G1CUjTQfmRti6NLadI9xOPzo2bJW32S9w+aGk
         74/dxdccseg2jFKQKUL1JFsoG/SHGuoPxnF07wZluRUeWV1odUl4tI+YSvK86IT0GPr7
         /09An6G3VH37Op2OjGirREKZaQLQIke0HXZhw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=dkVBtNuBef93KerTmpf1dUYYUFk164Xk6HMJprrsbh16/eCjdRN4PUJoW/H+Jl33V5
         6QouPmhfgLQjggqoXUVdFup+w1mzSzb9xpqo+prFlRClp2BHPn9DL9aX7DulAyHRXye4
         0MPwhmMrz4sbLV7bRa6KeELW1BcTW9zkT9vYk=
MIME-Version: 1.0
Received: by 10.224.116.20 with SMTP id k20mr1371037qaq.308.1278331638356; 
	Mon, 05 Jul 2010 05:07:18 -0700 (PDT)
Received: by 10.150.197.7 with HTTP; Mon, 5 Jul 2010 05:07:18 -0700 (PDT)
In-Reply-To: <AANLkTim8UCX1d-2qXUz9TZDz-yUk-jV8rfDOQWlzYtDf@mail.gmail.com>
References: <AANLkTim8UCX1d-2qXUz9TZDz-yUk-jV8rfDOQWlzYtDf@mail.gmail.com>
Date: Mon, 5 Jul 2010 08:07:18 -0400
Message-ID: <AANLkTinemQoMB9zUUFQSOPXZH8HTV_W3fKdkEFTFHW0d@mail.gmail.com>
Subject: Re: search for a string which begins with a '$' character
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00148501705a359cf0048aa2c774
X-Virus-Checked: Checked by ClamAV on apache.org

--00148501705a359cf0048aa2c774
Content-Type: text/plain; charset=ISO-8859-1

You're probably getting mislead by storing .vs. indexing.
When you say that the '$' is showing up in Luke, I'm
guessing that what you actually are looking at is the
stored value rather than the indexed tokens. You can
look at both with Luke, but it can be confusing...

FWIW
Erick

On Thu, Jul 1, 2010 at 2:56 PM, Nathaniel Auvil
<nathaniel.auvil@gmail.com>wrote:

> i am trying to search for a value which begins with a '$' or even sometimes
> '$$'.  '$' is not listed as a special character and no matter what i try, i
> can not get a search for $* to return anything.  Using Luke, i browse my
> index and see several entries where the value exists with a leading '$'.
> How can i search for these?
>

--00148501705a359cf0048aa2c774--

From java-user-return-46616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 05 14:17:36 2010
Return-Path: <java-user-return-46616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59046 invoked from network); 5 Jul 2010 14:17:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 5 Jul 2010 14:17:35 -0000
Received: (qmail 8632 invoked by uid 500); 5 Jul 2010 14:17:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8574 invoked by uid 500); 5 Jul 2010 14:17:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8563 invoked by uid 99); 5 Jul 2010 14:17:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jul 2010 14:17:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of gsiasf@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Jul 2010 14:17:23 +0000
Received: by gxk7 with SMTP id 7so758295gxk.35
        for <java-user@lucene.apache.org>; Mon, 05 Jul 2010 07:16:13 -0700 (PDT)
Received: by 10.229.97.71 with SMTP id k7mr1647911qcn.59.1278339373505;
        Mon, 05 Jul 2010 07:16:13 -0700 (PDT)
Received: from [10.0.0.14] (adsl-065-013-152-164.sip.rdu.bellsouth.net [65.13.152.164])
        by mx.google.com with ESMTPS id q21sm3880711ybk.15.2010.07.05.07.16.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 05 Jul 2010 07:16:12 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Lucene Scoring
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <AANLkTikYo4aJEDg2l-2o4Bh-uFb6WVP5z6LfWBzLiw11@mail.gmail.com>
Date: Mon, 5 Jul 2010 10:16:04 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <9CABEBCD-664C-4110-97E6-B495D3FEA7F7@apache.org>
References: <AANLkTikYo4aJEDg2l-2o4Bh-uFb6WVP5z6LfWBzLiw11@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 5, 2010, at 5:02 AM, manjula wijewickrema wrote:

> Hi,
>=20
> In my application, I input only single term query (at one time) and =
get back
> the corresponding scorings for those queries. But I am little =
struggling of
> understanding Lucene scoring. I have reffered
> =
http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similarit=
y.html
> and
> some other pages to resolve my matters. But some are still remain.
>=20
> 1) Why it has taken the squareroot of frequency as the tf value and =
square
> of the idf vale in score function?

Somewhat arbitrary, I suppose, but I think someone way back did some =
tests and decided it performed "best" in general.  More importantly, the =
point of the Similarity class is you can override these if you desire.

>=20
> 2) If I enter single term query, then what will return bythe =
coord(q,d)?
> Since there are always one term in the query, I think always it should =
be 1!
> Am I correct?

Should be.  You can run the explain() method to confirm.

>=20
> 3) I am also struggling understanding sumOfSquaredWeights (in =
queryNorm(q)).
> As I can understand, this value depends on the nature of the query we =
input
> and depends on that, it uses different methods such as TermQuery,
> MultiTermQuery, BooleanQuery, WildcardQuery, PhraseQuery, PrefixQuery, =
etc.
> But if I always use single term query, then what will be the way =
selected by
> the system from above?

The queryNorm is an attempt at making scores comparable across queries.  =
Again, I'd try the explain() method to see the practical aspects of how =
it effects score.

See http://lucene.apache.org/java/2_4_0/scoring.html for more info on =
scoring.

-Grant=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 06:41:05 2010
Return-Path: <java-user-return-46617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85265 invoked from network); 6 Jul 2010 06:41:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 06:41:05 -0000
Received: (qmail 93294 invoked by uid 500); 6 Jul 2010 06:41:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92925 invoked by uid 500); 6 Jul 2010 06:40:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92916 invoked by uid 99); 6 Jul 2010 06:40:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 06:40:58 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 06:40:49 +0000
Received: by vws19 with SMTP id 19so10093458vws.35
        for <java-user@lucene.apache.org>; Mon, 05 Jul 2010 23:39:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=nY8pLiOacVikfBGEGXlDmICkuOzqcaW4lrYL0Ij0UsI=;
        b=i52M9Y7M1QLxWY8OXN9XsO78SS7hstDh4pfZMOXrpkofquJrTpBsBsGX1wlg/nYBV3
         idodGicfe6z0VNee4HQGnpkwMr32UJ1GS9mZ4N4njKpNwdiTCnE2J/i9f2kXFNntotRm
         O4yX2FA3JuNk/OvFttAIVYGNcVlNpn4LoYRoI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DA9ucVDbvlYWrTiAC04drK0FIoFTB1tL3NSIH3KSvqjow60UEtOVXsmKElJKbajUDo
         qxl93/N5xGILZhNhveXFEhE0ojfVFU6XavSsrRanHZTNa17b9VJENEvo36z5FkdwxC3p
         F+XpR5UPzRrxd9UkDoieTu7Ql2CdeviYVMU28=
MIME-Version: 1.0
Received: by 10.220.62.206 with SMTP id y14mr2212011vch.111.1278398367951; 
	Mon, 05 Jul 2010 23:39:27 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Mon, 5 Jul 2010 23:39:27 -0700 (PDT)
In-Reply-To: <9CABEBCD-664C-4110-97E6-B495D3FEA7F7@apache.org>
References: <AANLkTikYo4aJEDg2l-2o4Bh-uFb6WVP5z6LfWBzLiw11@mail.gmail.com>
	<9CABEBCD-664C-4110-97E6-B495D3FEA7F7@apache.org>
Date: Tue, 6 Jul 2010 12:09:27 +0530
Message-ID: <AANLkTikKp3Pi0zWcxvWznBSW-ukjAJRJdhoGp-JJdWYF@mail.gmail.com>
Subject: Re: Lucene Scoring
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e8878859a6ca7048ab25050
X-Virus-Checked: Checked by ClamAV on apache.org

--e0cb4e8878859a6ca7048ab25050
Content-Type: text/plain; charset=ISO-8859-1

Dear Grant,

Thanks a lot for your guidence. As you have mentioned, I tried to use
explain() method to get the explanations for relevant scoring. But, once I
call the explain() method, system indicated the following error.

Error-
'The method explain(Query,int) in the type Searcher is not applicable for
the arguments (String, int)'.

In my code I call the explain() method as follows-
Searcher.explain("rice",0);

Possibly the wrong with my way of passing parameters. In my case, I have
chosen "rice" as my query and indexed only one document.

Could you pls. let me know what's wrong with this. I also included the code
with this.

Thanx
Manjula

code-
**

*import* org.apache.lucene.search.Searcher;

*public* *class* LuceneDemo {

*public* *static* *final* String *FILES_TO_INDEX_DIRECTORY* = "filesToIndex"
;

*public* *static* *final* String *INDEX_DIRECTORY* = "indexDirectory";

*public* *static* *final* String *FIELD_PATH* = "path";

*public* *static* *final* String *FIELD_CONTENTS* = "contents";

*public* *static* *void* main(String[] args) *throws* Exception {

*createIndex*();

*searchIndex*("rice");

 }

*public* *static* *void* createIndex() *throws* CorruptIndexException,
LockObtainFailedException, IOException {

 SnowballAnalyzer analyzer = *new* SnowballAnalyzer( "English",
StopAnalyzer.ENGLISH_STOP_WORDS);

*boolean* recreateIndexIfExists = *true*;

IndexWriter indexWriter = *new* IndexWriter(*INDEX_DIRECTORY*, analyzer,
recreateIndexIfExists);

File dir = *new* File(*FILES_TO_INDEX_DIRECTORY*);

File[] files = dir.listFiles();

*for* (File file : files) {

Document document = *new* Document();

String path = file.getCanonicalPath();

document.add(*new* Field(*FIELD_PATH*, path, Field.Store.*YES*, Field.Index.
UN_TOKENIZED,Field.TermVector.*YES*));

Reader reader = *new* FileReader(file);

document.add(*new* Field(*FIELD_CONTENTS*, reader));

indexWriter.addDocument(document);

 }

indexWriter.optimize();

indexWriter.close();

}

*public* *static* *void* searchIndex(String searchString)
*throws*IOException, ParseException {

System.*out*.println("Searching for '" + searchString + "'");

Directory directory = FSDirectory.getDirectory(*INDEX_DIRECTORY*);

IndexReader indexReader = IndexReader.open(directory);

IndexSearcher indexSearcher = *new* IndexSearcher(indexReader);

 SnowballAnalyzer analyzer = *new* SnowballAnalyzer( "English",
StopAnalyzer.ENGLISH_STOP_WORDS);

QueryParser queryParser = *new* QueryParser(*FIELD_CONTENTS*, analyzer);

Query query = queryParser.parse(searchString);

Hits hits = indexSearcher.search(query);

System.*out*.println("Number of hits: " + hits.length());

TopDocs results = indexSearcher.search(query,10);

ScoreDoc[] hits1 = results.scoreDocs;

*for* (ScoreDoc hit : hits1) {

Document doc = indexSearcher.doc(hit.doc);

//System.out.printf("%5.3f %s\n",hit.score,doc.get(FIELD_CONTENTS));

System.*out*.println(hit.score);

Searcher.explain("rice",0);

}

 Iterator<Hit> it = hits.iterator();

*while* (it.hasNext()) {

Hit hit = it.next();

Document document = hit.getDocument();

String path = document.get(*FIELD_PATH*);

System.*out*.println("Hit: " + path);

}

}

}


On Mon, Jul 5, 2010 at 7:46 PM, Grant Ingersoll <gsingers@apache.org> wrote:

>
> On Jul 5, 2010, at 5:02 AM, manjula wijewickrema wrote:
>
> > Hi,
> >
> > In my application, I input only single term query (at one time) and get
> back
> > the corresponding scorings for those queries. But I am little struggling
> of
> > understanding Lucene scoring. I have reffered
> >
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similarity.html
> > and
> > some other pages to resolve my matters. But some are still remain.
> >
> > 1) Why it has taken the squareroot of frequency as the tf value and
> square
> > of the idf vale in score function?
>
> Somewhat arbitrary, I suppose, but I think someone way back did some tests
> and decided it performed "best" in general.  More importantly, the point of
> the Similarity class is you can override these if you desire.
>
> >
> > 2) If I enter single term query, then what will return bythe coord(q,d)?
> > Since there are always one term in the query, I think always it should be
> 1!
> > Am I correct?
>
> Should be.  You can run the explain() method to confirm.
>
> >
> > 3) I am also struggling understanding sumOfSquaredWeights (in
> queryNorm(q)).
> > As I can understand, this value depends on the nature of the query we
> input
> > and depends on that, it uses different methods such as TermQuery,
> > MultiTermQuery, BooleanQuery, WildcardQuery, PhraseQuery, PrefixQuery,
> etc.
> > But if I always use single term query, then what will be the way selected
> by
> > the system from above?
>
> The queryNorm is an attempt at making scores comparable across queries.
>  Again, I'd try the explain() method to see the practical aspects of how it
> effects score.
>
> See http://lucene.apache.org/java/2_4_0/scoring.html for more info on
> scoring.
>
> -Grant
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e0cb4e8878859a6ca7048ab25050--

From java-user-return-46618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 07:19:04 2010
Return-Path: <java-user-return-46618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96746 invoked from network); 6 Jul 2010 07:19:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 07:19:03 -0000
Received: (qmail 28900 invoked by uid 500); 6 Jul 2010 07:19:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28353 invoked by uid 500); 6 Jul 2010 07:18:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28344 invoked by uid 99); 6 Jul 2010 07:18:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 07:18:56 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 07:18:48 +0000
Received: by bwz2 with SMTP id 2so5253909bwz.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 00:17:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=03s4ZiC4D5UuiPrRokODDQtDt3/itAGmnKdjffWUzus=;
        b=tPY1N9IKpWqHLfzCr8kHAG/mIhKZSdMGw6wrlo9HdZpxJM2q+R9YAVGFCwn61sarXA
         7I7h7QG5u9PnnSAmSnxsgbz9+bmSP8NlLNm/WrGAlpBg7eilNdj9+jXMMkcBR6FwNO8w
         /r1wQYGA92uZU8RSel4fw5NZw128La0is1WxQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=ACK9nZZDQMsbX5wPGr0+uwsgTbrp8fI3mw6ywqRXlmxbFZ9rHnFahYAtAMYrdLb+um
         7kLYSAhBxVHr+bb99t8/8GZkRjISFEekCjUiWyApXM3Lg/iO2c7MAtrgQTFuwVS9JF3f
         G4nn9J3A4yI76IYEmGH+e1E0es1uTIrKAHc4w=
Received: by 10.204.47.193 with SMTP id o1mr3296059bkf.134.1278400648232; Tue, 
	06 Jul 2010 00:17:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.76.13 with HTTP; Tue, 6 Jul 2010 00:17:08 -0700 (PDT)
In-Reply-To: <AANLkTikKp3Pi0zWcxvWznBSW-ukjAJRJdhoGp-JJdWYF@mail.gmail.com>
References: <AANLkTikYo4aJEDg2l-2o4Bh-uFb6WVP5z6LfWBzLiw11@mail.gmail.com> 
	<9CABEBCD-664C-4110-97E6-B495D3FEA7F7@apache.org> <AANLkTikKp3Pi0zWcxvWznBSW-ukjAJRJdhoGp-JJdWYF@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 6 Jul 2010 08:17:08 +0100
Message-ID: <AANLkTikkav66K49502U4iQYfgsRmmuRKAQVOHC8tYJdq@mail.gmail.com>
Subject: Re: Lucene Scoring
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You are calling the explain method incorrectly.  You need something like

 System.out.println(indexSearcher.explain(query, 0));


See the javadocs for details.


--
Ian.


On Tue, Jul 6, 2010 at 7:39 AM, manjula wijewickrema
<manjula53@gmail.com> wrote:
> Dear Grant,
>
> Thanks a lot for your guidence. As you have mentioned, I tried to use
> explain() method to get the explanations for relevant scoring. But, once =
I
> call the explain() method, system indicated the following error.
>
> Error-
> 'The method explain(Query,int) in the type Searcher is not applicable for
> the arguments (String, int)'.
>
> In my code I call the explain() method as follows-
> Searcher.explain("rice",0);
>
> Possibly the wrong with my way of passing parameters. In my case, I have
> chosen "rice" as my query and indexed only one document.
>
> Could you pls. let me know what's wrong with this. I also included the co=
de
> with this.
>
> Thanx
> Manjula
>
> code-
> **
>
> *import* org.apache.lucene.search.Searcher;
>
> *public* *class* LuceneDemo {
>
> *public* *static* *final* String *FILES_TO_INDEX_DIRECTORY* =3D "filesToI=
ndex"
> ;
>
> *public* *static* *final* String *INDEX_DIRECTORY* =3D "indexDirectory";
>
> *public* *static* *final* String *FIELD_PATH* =3D "path";
>
> *public* *static* *final* String *FIELD_CONTENTS* =3D "contents";
>
> *public* *static* *void* main(String[] args) *throws* Exception {
>
> *createIndex*();
>
> *searchIndex*("rice");
>
> =A0}
>
> *public* *static* *void* createIndex() *throws* CorruptIndexException,
> LockObtainFailedException, IOException {
>
> =A0SnowballAnalyzer analyzer =3D *new* SnowballAnalyzer( "English",
> StopAnalyzer.ENGLISH_STOP_WORDS);
>
> *boolean* recreateIndexIfExists =3D *true*;
>
> IndexWriter indexWriter =3D *new* IndexWriter(*INDEX_DIRECTORY*, analyzer=
,
> recreateIndexIfExists);
>
> File dir =3D *new* File(*FILES_TO_INDEX_DIRECTORY*);
>
> File[] files =3D dir.listFiles();
>
> *for* (File file : files) {
>
> Document document =3D *new* Document();
>
> String path =3D file.getCanonicalPath();
>
> document.add(*new* Field(*FIELD_PATH*, path, Field.Store.*YES*, Field.Ind=
ex.
> UN_TOKENIZED,Field.TermVector.*YES*));
>
> Reader reader =3D *new* FileReader(file);
>
> document.add(*new* Field(*FIELD_CONTENTS*, reader));
>
> indexWriter.addDocument(document);
>
> =A0}
>
> indexWriter.optimize();
>
> indexWriter.close();
>
> }
>
> *public* *static* *void* searchIndex(String searchString)
> *throws*IOException, ParseException {
>
> System.*out*.println("Searching for '" + searchString + "'");
>
> Directory directory =3D FSDirectory.getDirectory(*INDEX_DIRECTORY*);
>
> IndexReader indexReader =3D IndexReader.open(directory);
>
> IndexSearcher indexSearcher =3D *new* IndexSearcher(indexReader);
>
> =A0SnowballAnalyzer analyzer =3D *new* SnowballAnalyzer( "English",
> StopAnalyzer.ENGLISH_STOP_WORDS);
>
> QueryParser queryParser =3D *new* QueryParser(*FIELD_CONTENTS*, analyzer)=
;
>
> Query query =3D queryParser.parse(searchString);
>
> Hits hits =3D indexSearcher.search(query);
>
> System.*out*.println("Number of hits: " + hits.length());
>
> TopDocs results =3D indexSearcher.search(query,10);
>
> ScoreDoc[] hits1 =3D results.scoreDocs;
>
> *for* (ScoreDoc hit : hits1) {
>
> Document doc =3D indexSearcher.doc(hit.doc);
>
> //System.out.printf("%5.3f %s\n",hit.score,doc.get(FIELD_CONTENTS));
>
> System.*out*.println(hit.score);
>
> Searcher.explain("rice",0);
>
> }
>
> =A0Iterator<Hit> it =3D hits.iterator();
>
> *while* (it.hasNext()) {
>
> Hit hit =3D it.next();
>
> Document document =3D hit.getDocument();
>
> String path =3D document.get(*FIELD_PATH*);
>
> System.*out*.println("Hit: " + path);
>
> }
>
> }
>
> }
>
>
> On Mon, Jul 5, 2010 at 7:46 PM, Grant Ingersoll <gsingers@apache.org> wro=
te:
>
>>
>> On Jul 5, 2010, at 5:02 AM, manjula wijewickrema wrote:
>>
>> > Hi,
>> >
>> > In my application, I input only single term query (at one time) and ge=
t
>> back
>> > the corresponding scorings for those queries. But I am little struggli=
ng
>> of
>> > understanding Lucene scoring. I have reffered
>> >
>> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similar=
ity.html
>> > and
>> > some other pages to resolve my matters. But some are still remain.
>> >
>> > 1) Why it has taken the squareroot of frequency as the tf value and
>> square
>> > of the idf vale in score function?
>>
>> Somewhat arbitrary, I suppose, but I think someone way back did some tes=
ts
>> and decided it performed "best" in general. =A0More importantly, the poi=
nt of
>> the Similarity class is you can override these if you desire.
>>
>> >
>> > 2) If I enter single term query, then what will return bythe coord(q,d=
)?
>> > Since there are always one term in the query, I think always it should=
 be
>> 1!
>> > Am I correct?
>>
>> Should be. =A0You can run the explain() method to confirm.
>>
>> >
>> > 3) I am also struggling understanding sumOfSquaredWeights (in
>> queryNorm(q)).
>> > As I can understand, this value depends on the nature of the query we
>> input
>> > and depends on that, it uses different methods such as TermQuery,
>> > MultiTermQuery, BooleanQuery, WildcardQuery, PhraseQuery, PrefixQuery,
>> etc.
>> > But if I always use single term query, then what will be the way selec=
ted
>> by
>> > the system from above?
>>
>> The queryNorm is an attempt at making scores comparable across queries.
>> =A0Again, I'd try the explain() method to see the practical aspects of h=
ow it
>> effects score.
>>
>> See http://lucene.apache.org/java/2_4_0/scoring.html for more info on
>> scoring.
>>
>> -Grant
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 07:44:09 2010
Return-Path: <java-user-return-46619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 446 invoked from network); 6 Jul 2010 07:44:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 07:44:09 -0000
Received: (qmail 52719 invoked by uid 500); 6 Jul 2010 07:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52291 invoked by uid 500); 6 Jul 2010 07:44:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52283 invoked by uid 99); 6 Jul 2010 07:44:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 07:44:02 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.83.156.232] (HELO lnx503.hrz.tu-darmstadt.de) (130.83.156.232)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 07:43:54 +0000
Received: from [130.83.165.19] (hovhannes.st.informatik.tu-darmstadt.de [130.83.165.19])
	by lnx503.hrz.tu-darmstadt.de (8.14.4/8.14.4/HRZ/PMX) with ESMTP id o667hXSC002957
	for <java-user@lucene.apache.org>; Tue, 6 Jul 2010 09:43:33 +0200
	(envelope-from bruch@cs.tu-darmstadt.de)
Message-ID: <4C32DEA4.3090403@cs.tu-darmstadt.de>
Date: Tue, 06 Jul 2010 09:43:32 +0200
From: Marcel Bruch <bruch@cs.tu-darmstadt.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.10) Gecko/20100512 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Using Lucene with a rather simplistic scoring system?
References: <4C123B8B.7010908@cs.tu-darmstadt.de> <AANLkTilt9hs_ruE8IhEBd6Lmx5L2L6ixdKSmZ6gnI58K@mail.gmail.com> <4C126074.4050909@cs.tu-darmstadt.de>
In-Reply-To: <4C126074.4050909@cs.tu-darmstadt.de>
Content-Type: multipart/mixed;
 boundary="------------090204050409080505070305"
X-PMX-TU: seen v0.99a by 5.5.9.395186, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2010.7.6.73315
X-PMX-RELAY: mailout
X-Virus-Checked: Checked by ClamAV on apache.org

--------------090204050409080505070305
Content-Type: multipart/alternative;
 boundary="------------070908020800040308000405"


--------------070908020800040308000405
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit

Hi all.

to close my thread:

My requirement was to build a simple scoring system that basically 
reuses Lucene's index infrastructure but not its advanced scoring 
system, i.e., I had to replace the query and scorer infrastructure with 
my own implementation.

In detail I had to come up with my own versions of:

    * ExamplesSearchQuery extends Query
    * ExamplesSearchWeight extends Weight
    * ExamplesScorer extends Scorer

The usage of this API looks similar to standard Lucene usage:

ExamplesSearchQuery query = LuceneQueryUtil.toCodeSearchQuery(request);
IndexSearcher searcher = new IndexSearcher(luceneIndexReader);
TopDocs search = searcher.search(query, 15);
...

To accomplish my scoring function, the scorer delegates to several 
subscorers similar to the BooleanScorer and sums up the sub-scores to 
build the final score.

Since yesterday, the first prototype based on Lucene is available for 
download and a blog-post showing the Eclipse integration in action is 
available here:
http://code-recommenders.blogspot.com/2010/07/why-is-google-codesearch-not-google-for.html 
- and I would be glad to take your comments on the post :-)

Thanks again for your help on Lucene,
Marcel


On 11.06.2010 18:12, wrote Marcel Bruch:
> [...]
>> Sounds like an interesting project.
> I think it is :-) It's tightly integrated into Eclipse where (i) it 
> grabs your code of your current editor on demand, (ii) automatically 
> creates and submits a query from it, and (iii) displays the best code 
> examples directly aside your editor in a separate view. As soon as 
> scoring works with Lucene you can test the first version in a week or 
> two.
>
> However, can I implement this scoring function with Lucene:
> score(d,q) = \sum_{i \in I} w_i * f_i(d,q)


--------------070908020800040308000405
Content-Type: text/html; charset=windows-1252
Content-Transfer-Encoding: 8bit

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=windows-1252"
 http-equiv="Content-Type">
</head>
<body bgcolor="#ffffff" text="#000000">
Hi all.<br>
<br>
to close my thread:<br>
<br>
My requirement was to build a simple scoring system that basically
reuses Lucene's index infrastructure but not its advanced scoring
system, i.e., I had to replace the query and scorer infrastructure with
my own implementation.<br>
<br>
In detail I had to come up with my own versions of:<br>
<ul>
  <li>ExamplesSearchQuery extends Query</li>
  <li>ExamplesSearchWeight extends Weight</li>
  <li>ExamplesScorer extends Scorer<br>
  </li>
</ul>
The usage of this API looks similar to standard Lucene usage:<br>
<br>
ExamplesSearchQuery query = LuceneQueryUtil.toCodeSearchQuery(request);<br>
IndexSearcher searcher = new IndexSearcher(luceneIndexReader);<br>
TopDocs search = searcher.search(query, 15);<br>
...<br>
<br>
To accomplish my scoring function, the scorer delegates to several
subscorers similar to the BooleanScorer and sums up the sub-scores to
build the final score.<br>
<br>
Since yesterday, the first prototype based on Lucene is available for
download and a blog-post showing the Eclipse integration in action is
available here:<br>
<a class="moz-txt-link-freetext" href="http://code-recommenders.blogspot.com/2010/07/why-is-google-codesearch-not-google-for.html">http://code-recommenders.blogspot.com/2010/07/why-is-google-codesearch-not-google-for.html</a>
- and I would be glad to take your comments on the post :-)<br>
<br>
Thanks again for your help on Lucene,<br>
Marcel<br>
<br>
<br>
On 11.06.2010 18:12, wrote Marcel Bruch:
<blockquote cite="mid:4C126074.4050909@cs.tu-darmstadt.de" type="cite">[...]
  <br>
  <blockquote type="cite">Sounds like an interesting project.
    <br>
 </blockquote>
I think it is :-) It's tightly integrated into Eclipse where (i) it
grabs your code of your current editor on demand, (ii) automatically
creates and submits a query from it, and (iii) displays the best code
examples directly aside your editor in a separate view. As soon as
scoring works with Lucene you can test the first version in a week or
two.
  <br>
  <br>
However, can I implement this scoring function with Lucene:
  <br>
score(d,q) = \sum_{i \in I} w_i * f_i(d,q)
  <br>
</blockquote>
<br>
</body>
</html>

--------------070908020800040308000405--


--------------090204050409080505070305
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------090204050409080505070305--

From java-user-return-46620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 08:33:04 2010
Return-Path: <java-user-return-46620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13029 invoked from network); 6 Jul 2010 08:33:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 08:33:04 -0000
Received: (qmail 80171 invoked by uid 500); 6 Jul 2010 08:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79971 invoked by uid 500); 6 Jul 2010 08:32:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79962 invoked by uid 99); 6 Jul 2010 08:32:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 08:32:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 08:32:50 +0000
Received: by gyg10 with SMTP id 10so4445924gyg.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 01:32:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=6qwzblG+TMPkpk4BKNHRgGaotX+GagK95soHO0wwgXQ=;
        b=vqdUOnNUrFKZrYCOp2oir6o8Wv+jbqGIzqeWjAdXdWgQWo6RCH4GmIqdPunOL1Lbft
         JhajFHtQh5y1BhraUwKBX6wDTzhY8ia7nkWHmODarzJHlHg5z2xwJXCC4nsvCFk3JZQK
         1gGfdhpYyUORK4MFspwoIzJ45S7EYTOe5pL1c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=BSr2yhKNaikega10TstvdNvy6bQEWDFHXSqJWjBjuRJ7/5IoOEv+KNG8GZ97gYuMmU
         ZZL1YhUFKtoJWG6BLC7rXc6OWCCRnCr0uzvBmYk/Viu8SrGasmlrwaLhAylyhYHBnhvE
         6208S1BYCUgxQL9ujdxAdmSrZ6ingZMJRqs8Y=
MIME-Version: 1.0
Received: by 10.103.182.8 with SMTP id j8mr377463mup.103.1278404760110; Tue, 
	06 Jul 2010 01:26:00 -0700 (PDT)
Received: by 10.103.177.15 with HTTP; Tue, 6 Jul 2010 01:25:59 -0700 (PDT)
Date: Tue, 6 Jul 2010 11:25:59 +0300
Message-ID: <AANLkTillcWDeDW6khZWOa7AgAn5J4JsxBDn0DUMamhsq@mail.gmail.com>
Subject: Search on top x results
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363ba7d49b0618048ab3cd76
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363ba7d49b0618048ab3cd76
Content-Type: text/plain; charset=ISO-8859-1

Hi all,

Is it possible to run a search over top 100,000 (for example) results of a
prior search.
So if the user first does the search, gets results, if pressing on the
search button again, I would like it to run on the top 100,000 results.

Thanks,
Liat

--0016363ba7d49b0618048ab3cd76--

From java-user-return-46621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 08:37:45 2010
Return-Path: <java-user-return-46621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14384 invoked from network); 6 Jul 2010 08:37:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 08:37:44 -0000
Received: (qmail 88768 invoked by uid 500); 6 Jul 2010 08:37:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88099 invoked by uid 500); 6 Jul 2010 08:37:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88085 invoked by uid 99); 6 Jul 2010 08:37:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 08:37:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 08:37:29 +0000
Received: by bwz2 with SMTP id 2so5320091bwz.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 01:36:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=zrLf41PNdqjaGSZW7Y6db+wQw1z/HFYTo9SaOrE5Lg8=;
        b=jFM02n08IT7TzAmiCQNSXoiVdZg9PzbdYzL8cMmxcj5PU7k8qHYO+X7zyjcIYOjVh0
         I2U5vBEVvV/DNN8jhTHV2um9IuEVGiUQ8aAaBhjN48GPP4ZBUODiLjuU8RMS2QyLZJ1r
         82MLatejiHaHKhBe9590nS+D8uigyqGkgos3k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ZjVgGk+jWiwBAy7oz3PzUZ86woe04NAPP1qT+PPJ1RZc/7J1wOLAlUjqKZZdRX0Nqt
         7vokTZQydDswsFlNAyPywWgxyEru8pKuWNw/75MT9OVCJVvdb0Ew3T1u4Hl4V9uSK/B3
         iao0L8W79YIOZhz8uzzjxyB6h8cRL7qgKc+xQ=
Received: by 10.204.84.20 with SMTP id h20mr3351898bkl.186.1278405369268; Tue, 
	06 Jul 2010 01:36:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.76.13 with HTTP; Tue, 6 Jul 2010 01:35:49 -0700 (PDT)
In-Reply-To: <AANLkTillcWDeDW6khZWOa7AgAn5J4JsxBDn0DUMamhsq@mail.gmail.com>
References: <AANLkTillcWDeDW6khZWOa7AgAn5J4JsxBDn0DUMamhsq@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 6 Jul 2010 09:35:49 +0100
Message-ID: <AANLkTil2hMIuQyLh6xSyz2u3xJDbtckGj-mvDnxBjncN@mail.gmail.com>
Subject: Re: Search on top x results
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

http://wiki.apache.org/lucene-java/LuceneFAQ#Can_Lucene_do_a_.22search_within_search.22.2C_so_that_the_second_search_is_constrained_by_the_results_of_the_first_query.3F

--
Ian.


On Tue, Jul 6, 2010 at 9:25 AM, liat oren <oren.liat@gmail.com> wrote:
> Hi all,
>
> Is it possible to run a search over top 100,000 (for example) results of a
> prior search.
> So if the user first does the search, gets results, if pressing on the
> search button again, I would like it to run on the top 100,000 results.
>
> Thanks,
> Liat
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 08:55:03 2010
Return-Path: <java-user-return-46622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16859 invoked from network); 6 Jul 2010 08:55:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 08:55:03 -0000
Received: (qmail 8070 invoked by uid 500); 6 Jul 2010 08:55:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7734 invoked by uid 500); 6 Jul 2010 08:54:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7726 invoked by uid 99); 6 Jul 2010 08:54:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 08:54:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 08:54:49 +0000
Received: by fxm16 with SMTP id 16so6007617fxm.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 01:53:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=xENRYjMrvMHsv6NiWythvADRiCZ9/LwZFk8yqrBSKoI=;
        b=KxivhuvzTy4hYCGr/zvNzIPPScUd9FXtF7xs0YZ/V9YA/N9AFjt9H5ghCR24IxV3e3
         RhF/0Er1mLQ+z4aW8k61PbCmskOqRLmzX7m6ZJJ2wt11NkWxZrC0JYP7T4J2zjmFTXSi
         QypkZfKgSs4l9JmiTNXpL0hz1XS+zKeureEOA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=VDiMH8vvAnzMKw9Nwaiihnm4JTxSuMtp8oRjsDrQcv4HM5XaJE3LjRwIc/E7n1nzdQ
         g1AhsCvE60XnXK6xC+cOqvR55eGo7Omar7Jt2KuHhWmTnVB+UmxzXcKvP5G6ImcP/kOE
         YzF3yuvSnbwzbdG8yto+G20IZdYx5KUHoUS0s=
MIME-Version: 1.0
Received: by 10.103.219.14 with SMTP id w14mr527277muq.48.1278406408102; Tue, 
	06 Jul 2010 01:53:28 -0700 (PDT)
Received: by 10.103.177.15 with HTTP; Tue, 6 Jul 2010 01:53:28 -0700 (PDT)
In-Reply-To: <AANLkTil2hMIuQyLh6xSyz2u3xJDbtckGj-mvDnxBjncN@mail.gmail.com>
References: <AANLkTillcWDeDW6khZWOa7AgAn5J4JsxBDn0DUMamhsq@mail.gmail.com>
	<AANLkTil2hMIuQyLh6xSyz2u3xJDbtckGj-mvDnxBjncN@mail.gmail.com>
Date: Tue, 6 Jul 2010 11:53:28 +0300
Message-ID: <AANLkTikjFNEbgnVJFUUkLLmBgAIrk2wBIxBmuX487fMH@mail.gmail.com>
Subject: Re: Search on top x results
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016364c7cefd5649a048ab42f1c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016364c7cefd5649a048ab42f1c
Content-Type: text/plain; charset=ISO-8859-1

Thank you!

So the best thing to do is to add the first boolean query as a MUST, and the
second query as a should?
Even if both of them query the same fields?
Will it actually be faster?


On 6 July 2010 11:35, Ian Lea <ian.lea@gmail.com> wrote:

>
> http://wiki.apache.org/lucene-java/LuceneFAQ#Can_Lucene_do_a_.22search_within_search.22.2C_so_that_the_second_search_is_constrained_by_the_results_of_the_first_query.3F
>
> --
> Ian.
>
>
> On Tue, Jul 6, 2010 at 9:25 AM, liat oren <oren.liat@gmail.com> wrote:
> > Hi all,
> >
> > Is it possible to run a search over top 100,000 (for example) results of
> a
> > prior search.
> > So if the user first does the search, gets results, if pressing on the
> > search button again, I would like it to run on the top 100,000 results.
> >
> > Thanks,
> > Liat
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016364c7cefd5649a048ab42f1c--

From java-user-return-46623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 08:57:50 2010
Return-Path: <java-user-return-46623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17009 invoked from network); 6 Jul 2010 08:57:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 08:57:50 -0000
Received: (qmail 10538 invoked by uid 500); 6 Jul 2010 08:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10146 invoked by uid 500); 6 Jul 2010 08:57:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10138 invoked by uid 99); 6 Jul 2010 08:57:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 08:57:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 08:57:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id E7CAFD36004
	for <java-user@lucene.apache.org>; Tue,  6 Jul 2010 10:56:46 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XAzdvLhTD+cm for <java-user@lucene.apache.org>;
	Tue,  6 Jul 2010 10:56:33 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.78])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 4325AD36001
	for <java-user@lucene.apache.org>; Tue,  6 Jul 2010 10:56:33 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTillcWDeDW6khZWOa7AgAn5J4JsxBDn0DUMamhsq@mail.gmail.com>	<AANLkTil2hMIuQyLh6xSyz2u3xJDbtckGj-mvDnxBjncN@mail.gmail.com> <AANLkTikjFNEbgnVJFUUkLLmBgAIrk2wBIxBmuX487fMH@mail.gmail.com>
In-Reply-To: <AANLkTikjFNEbgnVJFUUkLLmBgAIrk2wBIxBmuX487fMH@mail.gmail.com>
Subject: RE: Search on top x results
Date: Tue, 6 Jul 2010 10:57:06 +0200
Message-ID: <010401cb1ce9$364413e0$a2cc3ba0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQK9jmabq0Ad6a6tut4JfzSG/Bo70QGjw21pAjkZg0SQn86m0A==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Both must be "must", else it makes no sense.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: liat oren [mailto:oren.liat@gmail.com]
> Sent: Tuesday, July 06, 2010 10:53 AM
> To: java-user@lucene.apache.org
> Subject: Re: Search on top x results
> 
> Thank you!
> 
> So the best thing to do is to add the first boolean query as a MUST, and
the
> second query as a should?
> Even if both of them query the same fields?
> Will it actually be faster?
> 
> 
> On 6 July 2010 11:35, Ian Lea <ian.lea@gmail.com> wrote:
> 
> >
> > http://wiki.apache.org/lucene-
> java/LuceneFAQ#Can_Lucene_do_a_.22search
> >
> _within_search.22.2C_so_that_the_second_search_is_constrained_by_the
> _r
> > esults_of_the_first_query.3F
> >
> > --
> > Ian.
> >
> >
> > On Tue, Jul 6, 2010 at 9:25 AM, liat oren <oren.liat@gmail.com> wrote:
> > > Hi all,
> > >
> > > Is it possible to run a search over top 100,000 (for example)
> > > results of
> > a
> > > prior search.
> > > So if the user first does the search, gets results, if pressing on
> > > the search button again, I would like it to run on the top 100,000
results.
> > >
> > > Thanks,
> > > Liat
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 09:06:52 2010
Return-Path: <java-user-return-46624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22765 invoked from network); 6 Jul 2010 09:06:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 09:06:51 -0000
Received: (qmail 23127 invoked by uid 500); 6 Jul 2010 09:06:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22849 invoked by uid 500); 6 Jul 2010 09:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22836 invoked by uid 99); 6 Jul 2010 09:06:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 09:06:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 09:06:38 +0000
Received: by gxk7 with SMTP id 7so1240469gxk.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 02:06:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=trAqbV6Wy8eU9cpWMocG4MgbG64+aIvPiZ/jIoAxArQ=;
        b=DQnEcgG+XPQ61QY/W/j9OZTTUBZ0OlVowkHjomVciFuwdUICMz3wxINs2LZhwNsCZU
         nSMtQsx6rnbneXEh/+JlcDaK0DIoifyZSYXEHHB5+zSw6G6hghuGD4c6VHE2u5yX79To
         gJCkBg9GztVIbH2M40BRiGynANqXmG2mzD3mw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rKS/iphljXCE88QpwC3NJY4xEe51hLYJAEjMD91Io97BY4p1SsVyhcupohUoF0eYmp
         cxxLef+CuWaLOzEHVQ+9mW7yIp2A9mEZJ5jHWp4qEaxRXhGiiGpnP27e6bqz+vSAseHH
         dkELiL0sxIZiXSvXljrz3Yg3d6qkvve511TEw=
MIME-Version: 1.0
Received: by 10.103.223.15 with SMTP id a15mr473759mur.100.1278407176449; Tue, 
	06 Jul 2010 02:06:16 -0700 (PDT)
Received: by 10.103.177.15 with HTTP; Tue, 6 Jul 2010 02:06:16 -0700 (PDT)
In-Reply-To: <010401cb1ce9$364413e0$a2cc3ba0$@thetaphi.de>
References: <AANLkTillcWDeDW6khZWOa7AgAn5J4JsxBDn0DUMamhsq@mail.gmail.com>
	<AANLkTil2hMIuQyLh6xSyz2u3xJDbtckGj-mvDnxBjncN@mail.gmail.com>
	<AANLkTikjFNEbgnVJFUUkLLmBgAIrk2wBIxBmuX487fMH@mail.gmail.com>
	<010401cb1ce9$364413e0$a2cc3ba0$@thetaphi.de>
Date: Tue, 6 Jul 2010 12:06:16 +0300
Message-ID: <AANLkTik2MaJDLjrqv3H2WSuycDqBg9bhjdD7hYotYUgT@mail.gmail.com>
Subject: Re: Search on top x results
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363ba75ca16e47048ab45de2
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363ba75ca16e47048ab45de2
Content-Type: text/plain; charset=ISO-8859-1

Ok, thanks, I will try that

On 6 July 2010 11:57, Uwe Schindler <uwe@thetaphi.de> wrote:

> Both must be "must", else it makes no sense.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: liat oren [mailto:oren.liat@gmail.com]
> > Sent: Tuesday, July 06, 2010 10:53 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Search on top x results
> >
> > Thank you!
> >
> > So the best thing to do is to add the first boolean query as a MUST, and
> the
> > second query as a should?
> > Even if both of them query the same fields?
> > Will it actually be faster?
> >
> >
> > On 6 July 2010 11:35, Ian Lea <ian.lea@gmail.com> wrote:
> >
> > >
> > > http://wiki.apache.org/lucene-
> > java/LuceneFAQ#Can_Lucene_do_a_.22search
> > >
> > _within_search.22.2C_so_that_the_second_search_is_constrained_by_the
> > _r
> > > esults_of_the_first_query.3F
> > >
> > > --
> > > Ian.
> > >
> > >
> > > On Tue, Jul 6, 2010 at 9:25 AM, liat oren <oren.liat@gmail.com> wrote:
> > > > Hi all,
> > > >
> > > > Is it possible to run a search over top 100,000 (for example)
> > > > results of
> > > a
> > > > prior search.
> > > > So if the user first does the search, gets results, if pressing on
> > > > the search button again, I would like it to run on the top 100,000
> results.
> > > >
> > > > Thanks,
> > > > Liat
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016363ba75ca16e47048ab45de2--

From java-user-return-46625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 12:55:53 2010
Return-Path: <java-user-return-46625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85544 invoked from network); 6 Jul 2010 12:55:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 12:55:53 -0000
Received: (qmail 27183 invoked by uid 500); 6 Jul 2010 12:55:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26066 invoked by uid 500); 6 Jul 2010 12:55:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26052 invoked by uid 99); 6 Jul 2010 12:55:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 12:55:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of licinio.fernandez@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 12:55:37 +0000
Received: by iwn37 with SMTP id 37so5088156iwn.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 05:54:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=Ai7Kw32LoVWLCgsGe1GIHjXw9nE+fB54IrdMnnG5QQ4=;
        b=sdrls09MYU0YUJh77z8hGzqsrARNsSdy+E2SPNcqcFdY4fGzp4BEyXkwIXgXCke8ZZ
         MiSWrTx01IDcyDB8r5pQkc+PxlUzh2t2fZiLO6C9XPB93lggWDl1I37T4nkPPfvkrO43
         Wo19J3FGaX77lkYr4TOXrpDgtfq1DPlLBECbQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=tRUBd58g6W2jwXSbSJvmFN8alDRbccoGOyv3yaLgQXL6E5wKEpTqpfhUcDTuwDt5M0
         2oYOWfwMubcMTKTjk9V424QKa3+rcgWFt9ZrbKoUrFeD6gUgwqKAzO4VlmlHEXy9LrGg
         An1jw+jWmlw3ACz9wyEwwyBGwFHbFdCz2WRsM=
MIME-Version: 1.0
Received: by 10.231.171.18 with SMTP id f18mr188523ibz.9.1278420856031; Tue, 
	06 Jul 2010 05:54:16 -0700 (PDT)
Received: by 10.231.172.65 with HTTP; Tue, 6 Jul 2010 05:54:15 -0700 (PDT)
Date: Tue, 6 Jul 2010 14:54:15 +0200
Message-ID: <AANLkTim367nDsMee08D71mGUsZ_yhVpIrg1NFB10Ur1g@mail.gmail.com>
Subject: Lucene php - search client index 3.0. compatible
From: =?ISO-8859-1?Q?Licinio_Fern=E1ndez_Maurelo?= <licinio.fernandez@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d26c9aff4977048ab78c70
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d26c9aff4977048ab78c70
Content-Type: text/plain; charset=ISO-8859-1

Hi folks,

I'm looking for a lucene php search client library lucene index 3.0
compatible.

I've only found info related to zend  framework lucene support (2.3 lucene
index compatible).

Any help much appreciated

-- 
|_ici
~Java Consultant~

--0016e6d26c9aff4977048ab78c70--

From java-user-return-46626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 12:58:03 2010
Return-Path: <java-user-return-46626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85731 invoked from network); 6 Jul 2010 12:58:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 12:58:03 -0000
Received: (qmail 28994 invoked by uid 500); 6 Jul 2010 12:58:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28958 invoked by uid 500); 6 Jul 2010 12:57:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28949 invoked by uid 99); 6 Jul 2010 12:57:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 12:57:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of licinio.fernandez@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 12:57:48 +0000
Received: by iwn37 with SMTP id 37so5090915iwn.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 05:56:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=WBfQAuCRg6EdzGIuiMbXIfULHddA+2nVs/qBl9f/gq0=;
        b=Q7zmGKK85bSMwDpZBm5g1S8D6axAv24R6tJlhILct8Owkr2zTks1guexuj6Sz8LvWt
         ulkZjBDdI4qWoDNcE1B8k4RXNVAC/oWz8thQu6Lp9i+AaCzsL4NdSw3uKmIjsWS2VlJD
         COIchwXu2/01XPnqljDLlfV26sBoAGeB/ogw0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=juKBvL0M7Bsz/O0gCyP2ZpXsXpSMFLkHXlhb69TR1ms17HjdTuWtxfDKpIO3qHXM53
         slpFrzi9m87fRv70VHlhpJa2HlijsTQHsAyKkzvh6kj54qbHiK1JS4YVocT3UXKhBdX1
         wt3MiAmjU+CI0HB+Lik7ge2txY35/D/MtH8gY=
MIME-Version: 1.0
Received: by 10.231.193.153 with SMTP id du25mr4020774ibb.98.1278420986775; 
	Tue, 06 Jul 2010 05:56:26 -0700 (PDT)
Received: by 10.231.172.65 with HTTP; Tue, 6 Jul 2010 05:56:26 -0700 (PDT)
In-Reply-To: <AANLkTim367nDsMee08D71mGUsZ_yhVpIrg1NFB10Ur1g@mail.gmail.com>
References: <AANLkTim367nDsMee08D71mGUsZ_yhVpIrg1NFB10Ur1g@mail.gmail.com>
Date: Tue, 6 Jul 2010 14:56:26 +0200
Message-ID: <AANLkTilzFJr-rX_-dIZWUy21RJ_CqSO8ksTijGVcUuB0@mail.gmail.com>
Subject: Re: Lucene php - search client index 3.0. compatible
From: =?ISO-8859-1?Q?Licinio_Fern=E1ndez_Maurelo?= <licinio.fernandez@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636b14d1bca49dc048ab79440
X-Virus-Checked: Checked by ClamAV on apache.org

--001636b14d1bca49dc048ab79440
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Sorry , the lucene index format i was talking is 2.9

El 6 de julio de 2010 14:54, Licinio Fern=E1ndez Maurelo <
licinio.fernandez@gmail.com> escribi=F3:

> Hi folks,
>
> I'm looking for a lucene php search client library lucene index 3.0
> compatible.
>
> I've only found info related to zend  framework lucene support (2.3 lucen=
e
> index compatible).
>
> Any help much appreciated
>
> --
> |_ici
> ~Java Consultant~
>



--=20
|_ici
~Java Consultant~

--001636b14d1bca49dc048ab79440--

From java-user-return-46627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 13:03:00 2010
Return-Path: <java-user-return-46627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88011 invoked from network); 6 Jul 2010 13:03:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 13:03:00 -0000
Received: (qmail 38102 invoked by uid 500); 6 Jul 2010 13:02:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37758 invoked by uid 500); 6 Jul 2010 13:02:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37750 invoked by uid 99); 6 Jul 2010 13:02:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 13:02:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [131.130.33.132] (HELO bach.mminf.univie.ac.at) (131.130.33.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 13:02:46 +0000
Received: from [131.130.33.75] (calixto.mminf.univie.ac.at [131.130.33.75])
	(authenticated bits=0)
	by bach.mminf.univie.ac.at (8.14.3/8.13.6) with ESMTP id o66D2Pqs022529
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO);
	Tue, 6 Jul 2010 13:02:25 GMT
From: Bernhard Haslhofer <bernhard.haslhofer@univie.ac.at>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: multi-term synonym expansion 
Date: Tue, 6 Jul 2010 15:02:25 +0200
Message-Id: <14B9ED6F-AEFC-400A-9774-33F6F4D1B0DF@univie.ac.at>
Cc: Martin Kysel <martin.kysel@univie.ac.at>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Scanned: clamav-milter 0.95 at bach
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am currently working on a Lucene module that makes use of controlled =
SKOS vocabularies (http://www.w3.org/TR/skos-primer/) during index and =
search time. It should work similar to Lucene's Wordnet contrib module, =
just with some extended SKOS-specific functionality (e.g., support for =
broader & narrower relationships). Work is still very much in progress; =
first results are available here: https://code.google.com/p/lucene-skos/

My custom SKOSAnalyzer already performs synonym expansion based on the =
labels defined in a given SKOS model. But now I have the problem that =
real-world thesauri often define (multi terms) synonyms for mult-term =
words. Here is an example that defines the abbreviation "UN" as synonym =
for "United Nations"

<skos:Concept =
rdf:about=3D"http://www.cs.univie.ac.at/thesaurus/concept/6">
      <skos:prefLabel>United Nations</skos:prefLabel>
      <skos:altLabel>UN</skos:altLabel>
 </skos:Concept>

At the end the analyzer should add the term UN at the right position in =
the index. Taking the example above, a sentence "I work for the United =
Nations" should appear in the index as=20

2: [work: 2-> 6]
5: [united nations: 15->29] [un: 15->29]

...so that a query "I work for the UN" also matches the document.

What is the best solution to implement that. With a TokenFilter I can =
work through the sentence token by token (using incrementToken()) and =
check if there is a synonym available. How can I analyze token sequences =
in a given text? Do I need to implement a custom tokenizer that =
recognizes entities based on a given dictionary?

I am grateful for any suggestions or advice.

Thank you,

Bernhard




______________________________________________________
Research Group Multimedia Information Systems
Department of Distributed and Multimedia Systems
Faculty of Computer Science
University of Vienna

Postal Address: Liebiggasse 4/3-4, 1010 Vienna, Austria
Phone: +43 1 42 77 39635 Fax: +43 1 4277 39649
E-Mail: bernhard.haslhofer@univie.ac.at
WWW: http://www.cs.univie.ac.at/bernhard.haslhofer


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 13:42:29 2010
Return-Path: <java-user-return-46628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98885 invoked from network); 6 Jul 2010 13:42:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 13:42:29 -0000
Received: (qmail 80380 invoked by uid 500); 6 Jul 2010 13:42:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80033 invoked by uid 500); 6 Jul 2010 13:42:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80025 invoked by uid 99); 6 Jul 2010 13:42:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 13:42:23 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.14] (HELO web52904.mail.re2.yahoo.com) (206.190.49.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jul 2010 13:42:16 +0000
Received: (qmail 57301 invoked by uid 60001); 6 Jul 2010 13:40:55 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1278423655; bh=AoYiSJbNpeiQbUzP7UaKiBcK1uguG8k6vQpIsLqhEDI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=ILKx7rSfLepWBsPDbBzCyAV/MVy2w60PFciMy4uZjZ3sa8zynP/AX3tA9Nczchv4Yn0FNDWRwN6KGcGxWkHmtR7JVEIOc9orvRaFyraNUDWlLedWE0lVgIle28SQAewWhqqo7OFPKlZmouBe5hfFHnx2YH99w+ES0SXuOBj+8hQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=FmrIww0rtMzTfhO8P2mf+wFE7WoVNbtM8NxtPXyDssynkgql3St+7P7h7wMwHbtGttEl6/nv7A2F1lVL9pfYDi1zvKU37YjY9TVKPH1SpDwDYJAA/tBbnbAFWyPXDW3w7YHDc88RpwnkjhWdLG7N6gkEPEUxQjjDSxjzKQvsSWw=;
Message-ID: <219512.55952.qm@web52904.mail.re2.yahoo.com>
X-YMail-OSG: ._O4n2IVM1nYeGPB2mPxhVw_ePk3VSXt_fLme2Ey4cF9VEY
 py2fqIOWpXOhS0egfGUFl2uOB7XsDNRgDJssx2IKiOcVP9By_hYQPw1Rqws7
 eHb48FYfUmuyCkimfBFFzfOXWwL71Jiztp_QFoQaPdBeKMoWXZlcHBbphK5.
 J66nOa6IH8ug5p8sbZkjyvrCMbnzMg3D.wLWarmwXTF4wNXnEpXMuXoZ4x.s
 Le1f06w3HO4OQuh3pZKULXjbeeK0fMZ143Xz52pYPIubMd_MQ2xaiuHfvpGU
 2ylM_Xivu1whVWio4RMKGtyHV4lPB8NMG6DTYbgovhHXX4kPM1LveBYvEVJ1
 i9QTmPaVPmR7rd2HiImu0ZT5DzmT9M9b6X.xSIMTdI6ZNsizE
Received: from [78.168.95.108] by web52904.mail.re2.yahoo.com via HTTP; Tue, 06 Jul 2010 06:40:54 PDT
X-Mailer: YahooMailClassic/11.1.4 YahooMailWebService/0.8.104.274457
Date: Tue, 6 Jul 2010 06:40:54 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: multi-term synonym expansion
To: java-user@lucene.apache.org
In-Reply-To: <14B9ED6F-AEFC-400A-9774-33F6F4D1B0DF@univie.ac.at>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> My custom SKOSAnalyzer already performs synonym expansion=0A> based on th=
e labels defined in a given SKOS model. But now I=0A> have the problem that=
 real-world thesauri often define=0A> (multi terms) synonyms for mult-term =
words. Here is an=0A> example that defines the abbreviation "UN" as synonym=
 for=0A> "United Nations"=0A> =0A> <skos:Concept rdf:about=3D"http://www.cs=
.univie.ac.at/thesaurus/concept/6">=0A> =A0 =A0 =A0 <skos:prefLabel>United=
=0A> Nations</skos:prefLabel>=0A> =A0 =A0 =A0=0A> <skos:altLabel>UN</skos:a=
ltLabel>=0A>  </skos:Concept>=0A> =0A> At the end the analyzer should add t=
he term UN at the right=0A> position in the index. Taking the example above=
, a sentence=0A> "I work for the United Nations" should appear in the index=
=0A> as =0A> =0A> 2: [work: 2-> 6]=0A> 5: [united nations: 15->29] [un: 15-=
>29]=0A> =0A> ...so that a query "I work for the UN" also matches the=0A> d=
ocument.=0A> =0A> What is the best solution to implement that. With a=0A> T=
okenFilter I can work through the sentence token by token=0A> (using increm=
entToken()) and check if there is a synonym=0A> available. How can I analyz=
e token sequences in a given=0A> text? Do I need to implement a custom toke=
nizer that=0A> recognizes entities based on a given dictionary?=0A> =0A> I =
am grateful for any suggestions or advice.=0A=0Ahttp://wiki.apache.org/solr=
/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory can handle multi=
-word synonyms. This may help.=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 14:26:47 2010
Return-Path: <java-user-return-46629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11437 invoked from network); 6 Jul 2010 14:26:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 14:26:46 -0000
Received: (qmail 36037 invoked by uid 500); 6 Jul 2010 14:26:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35917 invoked by uid 500); 6 Jul 2010 14:26:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35909 invoked by uid 99); 6 Jul 2010 14:26:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 14:26:43 +0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of aaron@captureshot.com does not designate 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 14:26:34 +0000
Received: by yxj4 with SMTP id 4so790302yxj.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 07:25:13 -0700 (PDT)
Received: by 10.239.133.9 with SMTP id 9mr273071hbt.19.1278426312719;
        Tue, 06 Jul 2010 07:25:12 -0700 (PDT)
Received: from [192.168.0.107] (CPE001195cf026e-CM000f9f51228a.cpe.net.cable.rogers.com [173.34.26.8])
        by mx.google.com with ESMTPS id 34sm23674698ibi.18.2010.07.06.07.25.10
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 06 Jul 2010 07:25:12 -0700 (PDT)
Message-Id: <6C0E7312-0D0B-46DC-9944-9381C9743077@captureshot.com>
From: Aaron Surty <aaron@captureshot.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: require that top results includes a certain percentage from each source
Date: Tue, 6 Jul 2010 10:25:10 -0400
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

Hello!

I'm new to using lucene and was hoping to get advice on best practices  
to solve the following problem.

I have a set of documents each coming from their own source.  I want  
to require that the top K docs have a minimum of n relevant docs from  
certain sources.  For example, lets say I need to include 25 results  
from source A in the top 100.  If after the boolean filter there are 0  
results from source A then I do not have to include anything.  But if  
after ranking there are less than 25 in the top 100 results and there  
are 25 (or more) results from source A after the boolean filter then I  
should rearrange the result set so that 25 from source A appear in the  
top 100.


Thanks,
Aaron

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 14:37:41 2010
Return-Path: <java-user-return-46630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13166 invoked from network); 6 Jul 2010 14:37:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 14:37:41 -0000
Received: (qmail 47931 invoked by uid 500); 6 Jul 2010 14:37:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47877 invoked by uid 500); 6 Jul 2010 14:37:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47869 invoked by uid 99); 6 Jul 2010 14:37:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 14:37:38 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [66.39.3.58] (HELO www4.webmail.pair.com) (66.39.3.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Jul 2010 14:37:32 +0000
Received: (qmail 41657 invoked by uid 65534); 6 Jul 2010 14:37:10 -0000
To: <java-user@lucene.apache.org>
Subject: Re: multi-term synonym expansion
MIME-Version: 1.0
Date: Tue, 06 Jul 2010 10:37:10 -0400
From: <darren@ontrenet.com>
In-Reply-To: <219512.55952.qm@web52904.mail.re2.yahoo.com>
References: <219512.55952.qm@web52904.mail.re2.yahoo.com>
Message-ID: <b036e3e5ac1f11e2b7912691698aec67@localhost>
X-Sender: darren@ontrenet.com
User-Agent: RoundCube Webmail/0.3-stable
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org


How does the synonym filter work internally? I configured it with a very
large synonym file (90,000 lines) running Solr in glassfish and it started
fine, but when I queried, it hung and ran out of memory. The file wasn' big
enough to exhaust the heap....I never was able to get it to run smoothly.

On Tue, 6 Jul 2010 06:40:54 -0700 (PDT), Ahmet Arslan <iorixxx@yahoo.com>
wrote:
>> My custom SKOSAnalyzer already performs synonym expansion
>> based on the labels defined in a given SKOS model. But now I
>> have the problem that real-world thesauri often define
>> (multi terms) synonyms for mult-term words. Here is an
>> example that defines the abbreviation "UN" as synonym for
>> "United Nations"
>> 
>> <skos:Concept
rdf:about="http://www.cs.univie.ac.at/thesaurus/concept/6">
>>    <skos:prefLabel>United
>> Nations</skos:prefLabel>
>>   
>> <skos:altLabel>UN</skos:altLabel>
>>  </skos:Concept>
>> 
>> At the end the analyzer should add the term UN at the right
>> position in the index. Taking the example above, a sentence
>> "I work for the United Nations" should appear in the index
>> as 
>> 
>> 2: [work: 2-> 6]
>> 5: [united nations: 15->29] [un: 15->29]
>> 
>> ...so that a query "I work for the UN" also matches the
>> document.
>> 
>> What is the best solution to implement that. With a
>> TokenFilter I can work through the sentence token by token
>> (using incrementToken()) and check if there is a synonym
>> available. How can I analyze token sequences in a given
>> text? Do I need to implement a custom tokenizer that
>> recognizes entities based on a given dictionary?
>> 
>> I am grateful for any suggestions or advice.
> 
>
http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.SynonymFilterFactory
> can handle multi-word synonyms. This may help.
> 
> 
>       
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 17:49:45 2010
Return-Path: <java-user-return-46631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70237 invoked from network); 6 Jul 2010 17:49:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 17:49:45 -0000
Received: (qmail 573 invoked by uid 500); 6 Jul 2010 17:49:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 475 invoked by uid 500); 6 Jul 2010 17:49:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 464 invoked by uid 99); 6 Jul 2010 17:49:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 17:49:42 +0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of eduardop@occ.com.mx does not designate 97.65.90.20 as permitted sender)
Received: from [97.65.90.20] (HELO srvestadisticas.occprod.com) (97.65.90.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 17:49:34 +0000
Received: from occm01 ([10.10.79.169]) by srvestadisticas.occprod.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 6 Jul 2010 12:55:34 -0500
From: "Eduardo Pierdant" <eduardop@occ.com.mx>
To: <java-user@lucene.apache.org>
Subject: Question: searching on a NumericField, with sort and filter
Date: Tue, 6 Jul 2010 12:49:00 -0500
Organization: OCCMundial
Message-ID: <496901cb1d33$85efbd50$91cf37f0$@occ.com.mx>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AcsdMVliRQlRMRTeRhmfRHi8WmQ2fA==
Content-Language: es-mx
X-OriginalArrivalTime: 06 Jul 2010 17:55:35.0811 (UTC) FILETIME=[6F9AC530:01CB1D34]
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all.


I've been dealing  with a small problem when searching and trying to sort
and filter on a NumericField using Lucene 2.9.2; the result never comes back
as expected. Here are some snippets of my code, so you might take a look and
reference me  or help me out to solve this problem.


At document creation, I add the field like this:
 	doc.add(new NumericField("PuntosJobSense", Field.Store.YES,
false).setIntValue(Integer.parseInt(puntosJS)));

When searching, I use a sort field and a Filter:

	SortField sf = new SortField("PuntosPatrocinadas", SortField.INT,
true);
	Sort sortOrder = new Sort(sf);
	Filter nf = NumericRangeFilter.newIntRange("PuntosPatrocinadas", 0,
Integer.MAX_VALUE, true, true);
	hits = searcher.search(query, nf, MAX_DOC_SEARCH,
sortOrder).scoreDocs;

the only "query" parameter that I'm passing so far is "date modified" that
uses the date the document was added to the index. If I don't use this
search and simply search without filter nor sorting, everything is ok.

Hope someone can help me out.
Eduardo



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 18:31:40 2010
Return-Path: <java-user-return-46632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91656 invoked from network); 6 Jul 2010 18:31:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 18:31:40 -0000
Received: (qmail 44085 invoked by uid 500); 6 Jul 2010 18:31:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44004 invoked by uid 500); 6 Jul 2010 18:31:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43996 invoked by uid 99); 6 Jul 2010 18:31:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 18:31:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 18:31:30 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id E984ED36002
	for <java-user@lucene.apache.org>; Tue,  6 Jul 2010 20:30:38 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id mk7JDKIaYJNw for <java-user@lucene.apache.org>;
	Tue,  6 Jul 2010 20:30:29 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3B8C8D36001
	for <java-user@lucene.apache.org>; Tue,  6 Jul 2010 20:30:29 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <496901cb1d33$85efbd50$91cf37f0$@occ.com.mx>
In-Reply-To: <496901cb1d33$85efbd50$91cf37f0$@occ.com.mx>
Subject: RE: Question: searching on a NumericField, with sort and filter
Date: Tue, 6 Jul 2010 20:31:03 +0200
Message-ID: <012f01cb1d39$63cc35e0$2b64a1a0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFGDQKDakryu50gDYDESr3B5CeEDJOuWD8g
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Eduardo,

For sorting or a NumericRangeQuery, the field must be *indexed*. Storing has
no effect at all, it's only needed, if you want to show the value in search
results. That is important for *any* type of field (not only NumericField).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Eduardo Pierdant [mailto:eduardop@occ.com.mx]
> Sent: Tuesday, July 06, 2010 7:49 PM
> To: java-user@lucene.apache.org
> Subject: Question: searching on a NumericField, with sort and filter
> 
> 
> Hi all.
> 
> 
> I've been dealing  with a small problem when searching and trying to sort
and
> filter on a NumericField using Lucene 2.9.2; the result never comes back
as
> expected. Here are some snippets of my code, so you might take a look and
> reference me  or help me out to solve this problem.
> 
> 
> At document creation, I add the field like this:
>  	doc.add(new NumericField("PuntosJobSense", Field.Store.YES,
> false).setIntValue(Integer.parseInt(puntosJS)));
> 
> When searching, I use a sort field and a Filter:
> 
> 	SortField sf = new SortField("PuntosPatrocinadas", SortField.INT,
> true);
> 	Sort sortOrder = new Sort(sf);
> 	Filter nf = NumericRangeFilter.newIntRange("PuntosPatrocinadas",
> 0, Integer.MAX_VALUE, true, true);
> 	hits = searcher.search(query, nf, MAX_DOC_SEARCH,
> sortOrder).scoreDocs;
> 
> the only "query" parameter that I'm passing so far is "date modified" that
> uses the date the document was added to the index. If I don't use this
search
> and simply search without filter nor sorting, everything is ok.
> 
> Hope someone can help me out.
> Eduardo
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 18:43:42 2010
Return-Path: <java-user-return-46633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93937 invoked from network); 6 Jul 2010 18:43:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 18:43:41 -0000
Received: (qmail 56112 invoked by uid 500); 6 Jul 2010 18:43:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55925 invoked by uid 500); 6 Jul 2010 18:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55917 invoked by uid 99); 6 Jul 2010 18:43:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 18:43:38 +0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of eduardop@occ.com.mx does not designate 97.65.90.20 as permitted sender)
Received: from [97.65.90.20] (HELO srvestadisticas.occprod.com) (97.65.90.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 18:43:31 +0000
Received: from occm01 ([10.10.79.169]) by srvestadisticas.occprod.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 6 Jul 2010 13:49:31 -0500
From: "Eduardo Pierdant" <eduardop@occ.com.mx>
To: <java-user@lucene.apache.org>
References: <496901cb1d33$85efbd50$91cf37f0$@occ.com.mx> <012f01cb1d39$63cc35e0$2b64a1a0$@thetaphi.de>
In-Reply-To: <012f01cb1d39$63cc35e0$2b64a1a0$@thetaphi.de>
Subject: RE: Question: searching on a NumericField, with sort and filter
Date: Tue, 6 Jul 2010 13:42:57 -0500
Organization: OCCMundial
Message-ID: <499b01cb1d3b$0f1d3740$2d57a5c0$@occ.com.mx>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFGDQKDakryu50gDYDESr3B5CeEDAL7mQgLk5Z/NzA=
Content-Language: es-mx
X-OriginalArrivalTime: 06 Jul 2010 18:49:32.0462 (UTC) FILETIME=[F8CC84E0:01CB1D3B]
X-Virus-Checked: Checked by ClamAV on apache.org

Works perfectly now,  thx!

-----Original Message-----
From: Uwe Schindler [mailto:uwe@thetaphi.de] 
Sent: martes, 06 de julio de 2010 01:31 p.m.
To: java-user@lucene.apache.org
Subject: RE: Question: searching on a NumericField, with sort and filter

Hi Eduardo,

For sorting or a NumericRangeQuery, the field must be *indexed*. Storing has
no effect at all, it's only needed, if you want to show the value in search
results. That is important for *any* type of field (not only NumericField).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Eduardo Pierdant [mailto:eduardop@occ.com.mx]
> Sent: Tuesday, July 06, 2010 7:49 PM
> To: java-user@lucene.apache.org
> Subject: Question: searching on a NumericField, with sort and filter
> 
> 
> Hi all.
> 
> 
> I've been dealing  with a small problem when searching and trying to 
> sort
and
> filter on a NumericField using Lucene 2.9.2; the result never comes 
> back
as
> expected. Here are some snippets of my code, so you might take a look 
> and reference me  or help me out to solve this problem.
> 
> 
> At document creation, I add the field like this:
>  	doc.add(new NumericField("PuntosJobSense", Field.Store.YES, 
> false).setIntValue(Integer.parseInt(puntosJS)));
> 
> When searching, I use a sort field and a Filter:
> 
> 	SortField sf = new SortField("PuntosPatrocinadas", SortField.INT, 
> true);
> 	Sort sortOrder = new Sort(sf);
> 	Filter nf = NumericRangeFilter.newIntRange("PuntosPatrocinadas",
> 0, Integer.MAX_VALUE, true, true);
> 	hits = searcher.search(query, nf, MAX_DOC_SEARCH, 
> sortOrder).scoreDocs;
> 
> the only "query" parameter that I'm passing so far is "date modified" 
> that uses the date the document was added to the index. If I don't use 
> this
search
> and simply search without filter nor sorting, everything is ok.
> 
> Hope someone can help me out.
> Eduardo
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 20:20:04 2010
Return-Path: <java-user-return-46634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20179 invoked from network); 6 Jul 2010 20:20:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 20:20:04 -0000
Received: (qmail 69161 invoked by uid 500); 6 Jul 2010 20:20:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68660 invoked by uid 500); 6 Jul 2010 20:20:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68548 invoked by uid 99); 6 Jul 2010 20:20:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 20:20:01 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tsxn26@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 20:19:53 +0000
Received: by vws19 with SMTP id 19so11292913vws.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 13:18:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=qd4KNsthSPg0xGMcZbdhDNGDwE7tFWE+OeFeX0mvDHk=;
        b=wl7eqrxm8t20/GDDO3Yapwo4sHUDD+qWvW7yaFa27gPCS29FW6e9m5Wjin4UG1D/4M
         N4Z2cKchIl1SbTfpqx1Jdma+B9u2CrgLV2RGODBYIbhaPm0BDeQWKE8+XIeSlqhV9s9+
         iesm0yRoyVacTjWoXhQwwn5naGTio8gqYj06o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=aGIZbAd8jOZDpFAkj5r/aQt06uYMvWvlatJjdgj+/p+YAy0NkhxGO+TgcJaHlXwXuz
         3huKKhpn5USV5HZ2/3R+Tz+7sIr5iEN4QLKNemQ7pQjbboZGBqQ1A2tWvD1P0Tu681fL
         IIvvbmuSlw1t6U1Fwsaf9pYEYriGR9p8ysYSA=
MIME-Version: 1.0
Received: by 10.220.122.95 with SMTP id k31mr2752518vcr.13.1278447512718; Tue, 
	06 Jul 2010 13:18:32 -0700 (PDT)
Received: by 10.220.190.197 with HTTP; Tue, 6 Jul 2010 13:18:32 -0700 (PDT)
Date: Tue, 6 Jul 2010 13:18:32 -0700
Message-ID: <AANLkTinYIwSpFfUlzBoVWokd-dLZKhDn5hx0T9l8LfZe@mail.gmail.com>
Subject: Fielded Queries Question
From: Thomas Nguyen <tsxn26@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All,

Can someone explain to me how fielded queries work with phrases?  My
first thought is that the phrase is broken down into terms and those
terms are then fielded and separated with the AND operator.  An
example would be the following:

name:"Tom Jones" --> name:"Tom" AND name:"Jones"

I found out that isn't correct as the original query didn't returned
any results while the second query did.  So then I tried changing the
AND to OR in the second query to see if it's equivalent to the
original query.  The OR query did return results so it can't be
equivalent.  Any insight would be helpful.

- Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 06 20:47:33 2010
Return-Path: <java-user-return-46635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27053 invoked from network); 6 Jul 2010 20:47:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 6 Jul 2010 20:47:33 -0000
Received: (qmail 94594 invoked by uid 500); 6 Jul 2010 20:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94330 invoked by uid 500); 6 Jul 2010 20:47:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94315 invoked by uid 99); 6 Jul 2010 20:47:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 20:47:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of kasunbg@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Jul 2010 20:47:20 +0000
Received: by pvc21 with SMTP id 21so1278661pvc.35
        for <multiple recipients>; Tue, 06 Jul 2010 13:45:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=qQPqpSUc5ZJNpZ2cL/KRSQ6rV/Rk4CK3arPSn+XA1Vg=;
        b=Zi7RRVTQU03O9pX8XK1z1K8cq9bZlc8bmm6WOvtHeByy8Gh53NohzpV5LCcEbsS9Oz
         +0ezW2yyoIneVRIwjMbaRz/7cg+synsaa5EqoM9EijsKcxqdueBq697RnPQykwkeWPd8
         kp9TTWwbhyitcKkWZ4VVBxQa5QcWXnLFHKQCY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=iZw0CAW/K+R4HUh+48jZqji1gA6/8XI3YJxd8856CbN/odXPRMKIbeGfeW5pIQrNY2
         vgVsSVrydY5MTLOSRLyt6HLUQGBy7zjIGpQtZIknXV4mfh63A3ePq9SAwtziJdLs/Cko
         wz+wGeSg3q3pZJ43YJ0WEGQznZb224rmdclVM=
MIME-Version: 1.0
Received: by 10.142.144.2 with SMTP id r2mr867590wfd.139.1278449157355; Tue, 
	06 Jul 2010 13:45:57 -0700 (PDT)
Received: by 10.142.73.6 with HTTP; Tue, 6 Jul 2010 13:45:57 -0700 (PDT)
In-Reply-To: <AANLkTinnVk_nFfUG4Tf6T70DKgWOpRzZjWK6H73Z0Iv2@mail.gmail.com>
References: <AANLkTinnVk_nFfUG4Tf6T70DKgWOpRzZjWK6H73Z0Iv2@mail.gmail.com>
Date: Wed, 7 Jul 2010 02:15:57 +0530
Message-ID: <AANLkTikmjFbFg9jn8B9Pmz8BANtDE4gf-LJ9rJT1co_E@mail.gmail.com>
Subject: Re: Write QueryParser in JavaScript and use Lucene JAVA Indexer for 
	searching
From: Kasun Gajasinghe <kasunbg@gmail.com>
To: dev@lucene.apache.org, java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd3291ce34ecb048abe23ea
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd3291ce34ecb048abe23ea
Content-Type: text/plain; charset=UTF-8

This is a reminder, as the mail was sent in the weekend! Please go through
it and suggest me a solution.

Thanks in advance,
/KasunBG


On Sun, Jul 4, 2010 at 3:44 AM, Kasun Gajasinghe <kasunbg@gmail.com> wrote:

> Hello,
> I need to add a completely client-side search mechanism to a help system that
> I'm implementing for a Google Summer of Code project for DocBook. I use an
> Ant script to run xslts that generate html from DocBook XML. I can use a
> Java indexer to index the html, but when performing the search, I need to
> access the index via JavaScript. There is no way of invoking a Java code and
> NO server-side calls can be used. This allows users to use the documentation
> even through local filesystem without any problem. I do understand it's a
> difficult requirement to achieve, but there is no other option. I'm willing
> to code on low-level with use of Lucene API for this.
>
> My questions are:
>
>    - Is there a way to build the index with a structure I define? Lucene
>    creates its index in a binary format, which I cannot access using
>    JavaScript. Therefore, I would have to edit Lucene backend classes to have a
>    customized index in a plain text format. If this lets me benefit from
>    Lucene's many strengths (stemming, cjk support), It's well worth my time to
>    do it. So my question is: what java files do I need to edit? I see that the
>    IndexFiles class does the indexing. I need to find what specific classes are
>    involved when writing out the index.
>    - I know that there is no JavaScript implementation available for
>    Lucene QueryParser (or if there's one, please let me know!). So which
>    classes should I study to reimplement them in JavaScript?
>    - Are there any other concerns regarding this approach? I'm not sure
>    that this will ultimately be feasible. I have about one month to do the
>    implementation, so I'm trying to determine if this approach is worth
>    persuing or if I should take another approach.
>
> Lucene is a great tool. I'm happy to contribute back whatever I can do in
> making use of it.
>
> Thanks for any help you can give me to get me started in this.
>
> /KasunBG
>

--000e0cd3291ce34ecb048abe23ea--

From java-user-return-46636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 01:20:45 2010
Return-Path: <java-user-return-46636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4658 invoked from network); 7 Jul 2010 01:20:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 01:20:45 -0000
Received: (qmail 36796 invoked by uid 500); 7 Jul 2010 01:20:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36696 invoked by uid 500); 7 Jul 2010 01:20:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36688 invoked by uid 99); 7 Jul 2010 01:20:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 01:20:42 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 01:20:34 +0000
Received: by gxk7 with SMTP id 7so2097674gxk.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 18:20:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=z0O5n0eZ5gcnYQvBqYsJllqfAK5Uws6C+NNO4dWQ6CU=;
        b=A5J6arUN37BfRfhIqt38UboKzaa8Y06cJ0qv7Zyf6Y2FZ9M+AVEDN8uRdCgLXaIa3A
         gGaVgBZaQm9+MDyDhDhrCqSk2Yy+D4f+aPFTcaoVlXEyw35G6cF+g/G0VS5oKWiVaTAK
         asVBXCkS0Y3GHXIHHYI7M1do2XG3W8dsqCkoI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=fp0uTVjGODE5JQrzMqn4H4fTQCDPzEp2j3iatE0dzIp2eljTUbgy9Q6t6Za2FI5yfC
         GGacyzKPbEfjKNQsHZClLDaCgWCJRRWKUbaaT1EwIQcixFI4PGJ3n4PuA7W7t9enjrzv
         2DjSDBreqTD/mRpEanPhUTMvAuHNIsu6ovL/U=
MIME-Version: 1.0
Received: by 10.101.156.36 with SMTP id i36mr6696872ano.30.1278465613658; Tue, 
	06 Jul 2010 18:20:13 -0700 (PDT)
Received: by 10.150.197.7 with HTTP; Tue, 6 Jul 2010 18:20:13 -0700 (PDT)
In-Reply-To: <AANLkTinYIwSpFfUlzBoVWokd-dLZKhDn5hx0T9l8LfZe@mail.gmail.com>
References: <AANLkTinYIwSpFfUlzBoVWokd-dLZKhDn5hx0T9l8LfZe@mail.gmail.com>
Date: Tue, 6 Jul 2010 21:20:13 -0400
Message-ID: <AANLkTinRGtLtHYytBG24TULYTr2pKGmFPs4zDnCl6JlE@mail.gmail.com>
Subject: Re: Fielded Queries Question
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68dea3dc27986048ac1f87c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e68dea3dc27986048ac1f87c
Content-Type: text/plain; charset=ISO-8859-1

That's not the meaning of phrase query at all. Searching for a phrase
implies proximity. That is, searching for name:"Tom Jones" requires that
these two terms appear next to each other, whereas
name:Tom AND name:Jones merely requires that the two terms
appear anywhere in the field, no matter how many other terms
are between them. I.e. indexing "tom sawyer huck finn and steve jones"
in a field would match
name:tom AND name:jones
but would not match
name:"tom jones"

You can control how close phrase terms must be by using the
tilde operator, i.e. name:"tom jones"~3.

Here's a start...
http://lucene.apache.org/java/2_4_0/queryparsersyntax.html#Grouping

HTH
Erick

On Tue, Jul 6, 2010 at 4:18 PM, Thomas Nguyen <tsxn26@gmail.com> wrote:

> Hello All,
>
> Can someone explain to me how fielded queries work with phrases?  My
> first thought is that the phrase is broken down into terms and those
> terms are then fielded and separated with the AND operator.  An
> example would be the following:
>
> name:"Tom Jones" --> name:"Tom" AND name:"Jones"
>
> I found out that isn't correct as the original query didn't returned
> any results while the second query did.  So then I tried changing the
> AND to OR in the second query to see if it's equivalent to the
> original query.  The OR query did return results so it can't be
> equivalent.  Any insight would be helpful.
>
> - Thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e68dea3dc27986048ac1f87c--

From java-user-return-46637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 02:43:06 2010
Return-Path: <java-user-return-46637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21816 invoked from network); 7 Jul 2010 02:43:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 02:43:06 -0000
Received: (qmail 87581 invoked by uid 500); 7 Jul 2010 02:43:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87304 invoked by uid 500); 7 Jul 2010 02:43:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87294 invoked by uid 99); 7 Jul 2010 02:43:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:43:01 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:42:53 +0000
Received: by pvc21 with SMTP id 21so1492746pvc.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 19:42:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=GvCJHq4fc5NakOVTkW6D9BM95g72Pub3IQvP0/JeDXQ=;
        b=X4k5DuWHKnATY4PepzNZ4AmP4F9UK0fKyr5rW2IOwSF9KeR6+gyFRGVJysbYO6aHns
         P2goDKZsQ4vzjO58f1CMCAaH3q1lqmviIBdGG0EtGfNpplq2/mYnPDw+60dt2WiBC3V4
         yiVuqGoVm3ljjvQGaVKm73NER2c1RkWYRPwFg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mtXauzZopFokhi/GmG3U6Di1ZtGTdJQuRRISYxzxKNwGzG7UB2JgZvgM4kd5WArvCb
         kr0RmXsGh8jF6dOfDA+ThYO/6lsb2Bo0Q88acVIEsm8xNMoDNx9PKLHBb1qnG1Y+7Mju
         C5DHe3HV8dN7otYNGpieLxuI0hJX7yLCQHIyo=
MIME-Version: 1.0
Received: by 10.142.199.21 with SMTP id w21mr3908642wff.198.1278470552479; 
	Tue, 06 Jul 2010 19:42:32 -0700 (PDT)
Received: by 10.142.164.13 with HTTP; Tue, 6 Jul 2010 19:42:32 -0700 (PDT)
In-Reply-To: <AANLkTinGP45b4tLajmi6p7DtyZ7KgbpcXB9YQQN9zkmh@mail.gmail.com>
References: <AANLkTinGP45b4tLajmi6p7DtyZ7KgbpcXB9YQQN9zkmh@mail.gmail.com>
Date: Wed, 7 Jul 2010 10:42:32 +0800
Message-ID: <AANLkTimkIAu98qBWzg-Y7XZOKRebq0kUTcOO9BVssJfG@mail.gmail.com>
Subject: Fwd: index format error because disk full
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/mixed; boundary=000e0cd312fc22e7e5048ac31f6e
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd312fc22e7e5048ac31f6e
Content-Type: text/plain; charset=ISO-8859-1

---------- Forwarded message ----------
From: Li Li <fancyerii@gmail.com>
Date: 2010/7/7
Subject: index format error because disk full
To: solr-user@lucene.apache.org


the index file is ill-formated because disk full when feeding. Can I
roll back to last version? Is there any method to avoid unexpected
errors when indexing? attachments are my segment_N


--000e0cd312fc22e7e5048ac31f6e
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--000e0cd312fc22e7e5048ac31f6e--

From java-user-return-46638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 02:46:14 2010
Return-Path: <java-user-return-46638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22132 invoked from network); 7 Jul 2010 02:46:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 02:46:13 -0000
Received: (qmail 89658 invoked by uid 500); 7 Jul 2010 02:46:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89521 invoked by uid 500); 7 Jul 2010 02:46:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89513 invoked by uid 99); 7 Jul 2010 02:46:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:46:10 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of linjiguo@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:46:02 +0000
Received: by pxi11 with SMTP id 11so6274914pxi.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 19:44:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=H6RtQtIR48FFdksgxmP7H215qs5lIOuJNPOFTQX5wYU=;
        b=u4mLXJ5UvwBBrnY4qw8IbO7CB8b7GrLPB4B0g8j9QZMA5rtjD7/UXEw+8gOwAk5nt0
         N7vu7A0DPTCzHQsEuO03b9mkSrOBjNKwBZ66Df+hdfAhYFFNtPIrBonIVR3V4oa/2oUr
         jD/8KPayey1lOlSyMt5P7xBzT9K87RsPRfYOA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=x/i+GMDdTVaq8eV0LHvB6dVOYN+6T7qKUEk+OReHbGDBqKPt9nnKllwwYUSJQlHO92
         3BwK9D7tjfm/4icJEZ/IYmBjgyqpIoXcThjcVEGFKhg6NcZ5MO0ZLJJOxF9dqwd1n+ZR
         SIccYO/YSikJ0B2RgnuPKutfFWyf5Ck3xleAk=
MIME-Version: 1.0
Received: by 10.142.233.10 with SMTP id f10mr7056462wfh.280.1278470679620; 
	Tue, 06 Jul 2010 19:44:39 -0700 (PDT)
Received: by 10.142.47.5 with HTTP; Tue, 6 Jul 2010 19:44:39 -0700 (PDT)
In-Reply-To: <AANLkTinRGtLtHYytBG24TULYTr2pKGmFPs4zDnCl6JlE@mail.gmail.com>
References: <AANLkTinYIwSpFfUlzBoVWokd-dLZKhDn5hx0T9l8LfZe@mail.gmail.com>
	<AANLkTinRGtLtHYytBG24TULYTr2pKGmFPs4zDnCl6JlE@mail.gmail.com>
Date: Wed, 7 Jul 2010 10:44:39 +0800
Message-ID: <AANLkTilcxJl9sqFK1Pi3Yg4vyfAr0LESCzXsS45jPMtq@mail.gmail.com>
Subject: Re: Fielded Queries Question
From: jg lin <linjiguo@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2e054b6ee28048ac32604
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2e054b6ee28048ac32604
Content-Type: text/plain; charset=ISO-8859-1

cao li ma.

2010/7/7 Erick Erickson <erickerickson@gmail.com>

> That's not the meaning of phrase query at all. Searching for a phrase
> implies proximity. That is, searching for name:"Tom Jones" requires that
> these two terms appear next to each other, whereas
> name:Tom AND name:Jones merely requires that the two terms
> appear anywhere in the field, no matter how many other terms
> are between them. I.e. indexing "tom sawyer huck finn and steve jones"
> in a field would match
> name:tom AND name:jones
> but would not match
> name:"tom jones"
>
> You can control how close phrase terms must be by using the
> tilde operator, i.e. name:"tom jones"~3.
>
> Here's a start...
> http://lucene.apache.org/java/2_4_0/queryparsersyntax.html#Grouping
>
> HTH
> Erick
>
> On Tue, Jul 6, 2010 at 4:18 PM, Thomas Nguyen <tsxn26@gmail.com> wrote:
>
> > Hello All,
> >
> > Can someone explain to me how fielded queries work with phrases?  My
> > first thought is that the phrase is broken down into terms and those
> > terms are then fielded and separated with the AND operator.  An
> > example would be the following:
> >
> > name:"Tom Jones" --> name:"Tom" AND name:"Jones"
> >
> > I found out that isn't correct as the original query didn't returned
> > any results while the second query did.  So then I tried changing the
> > AND to OR in the second query to see if it's equivalent to the
> > original query.  The OR query did return results so it can't be
> > equivalent.  Any insight would be helpful.
> >
> > - Thanks
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--000e0cd2e054b6ee28048ac32604--

From java-user-return-46639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 02:47:07 2010
Return-Path: <java-user-return-46639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22202 invoked from network); 7 Jul 2010 02:47:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 02:47:07 -0000
Received: (qmail 91485 invoked by uid 500); 7 Jul 2010 02:47:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91392 invoked by uid 500); 7 Jul 2010 02:47:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91384 invoked by uid 99); 7 Jul 2010 02:47:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:47:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of linjiguo@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:46:55 +0000
Received: by pwj2 with SMTP id 2so1643184pwj.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 19:46:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=gnCZKx6ZSuosCTVEfAj4BgJAl5VP4R+hEmIxvgliX8A=;
        b=v5QUcLJsT3WK4QTxgwR6E5ymmPXZ2VIOl5Lx/zI//uKmeKyqmwa3MTMCrMpJfNdQkm
         hpG4afKdWOwvQk4LpFtqirgg1hVPNpsPTpPNkuCXSL0uZmOkdEQyDxIgaFqlccpeKTFL
         hx5o+RnjJrGzGaPa/bkoiRNIGnvLPgwTC2Pbo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=t5FbcccJAl7m2e2dHDpx4Sh3iBH7aNUR8oDsDmZRKq6mhrEcnUbL1uwy3fEJcHM14W
         BSnbV9NLzUHE/6BDWGBdrywcWVkg6IiRKdk1lt1ljR6ll8q0J893iafAuHBpkSyjr+Y2
         cYWEHfC3/87LKam1Y+6BbVxPMhdHuuCzLI8o0=
MIME-Version: 1.0
Received: by 10.142.156.14 with SMTP id d14mr5787534wfe.144.1278470794240; 
	Tue, 06 Jul 2010 19:46:34 -0700 (PDT)
Received: by 10.142.47.5 with HTTP; Tue, 6 Jul 2010 19:46:34 -0700 (PDT)
In-Reply-To: <AANLkTimkIAu98qBWzg-Y7XZOKRebq0kUTcOO9BVssJfG@mail.gmail.com>
References: <AANLkTinGP45b4tLajmi6p7DtyZ7KgbpcXB9YQQN9zkmh@mail.gmail.com>
	<AANLkTimkIAu98qBWzg-Y7XZOKRebq0kUTcOO9BVssJfG@mail.gmail.com>
Date: Wed, 7 Jul 2010 10:46:34 +0800
Message-ID: <AANLkTikTsh1xpbXmoHAwJf2F0qtb1jQi1BGlM99lhOgW@mail.gmail.com>
Subject: Re: index format error because disk full
From: jg lin <linjiguo@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd181628be370048ac32de9
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd181628be370048ac32de9
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

=C4=E3=BB=E1=CB=B5=BA=BA=D3=EF=C2=F0(=A1=D1_=A1=D1)=A3=BF

2010/7/7 Li Li <fancyerii@gmail.com>

> ---------- Forwarded message ----------
> From: Li Li <fancyerii@gmail.com>
> Date: 2010/7/7
> Subject: index format error because disk full
> To: solr-user@lucene.apache.org
>
>
> the index file is ill-formated because disk full when feeding. Can I
> roll back to last version? Is there any method to avoid unexpected
> errors when indexing? attachments are my segment_N
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--000e0cd181628be370048ac32de9--

From java-user-return-46640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 02:48:55 2010
Return-Path: <java-user-return-46640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23429 invoked from network); 7 Jul 2010 02:48:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 02:48:55 -0000
Received: (qmail 94843 invoked by uid 500); 7 Jul 2010 02:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94652 invoked by uid 500); 7 Jul 2010 02:48:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94644 invoked by uid 99); 7 Jul 2010 02:48:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:48:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of linjiguo@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:48:45 +0000
Received: by pwj2 with SMTP id 2so1644136pwj.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 19:48:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=QrzMYKCt9Mjb2pWrtNTllyXz+cBnNEVCdBKnlccpMTs=;
        b=LmSR2k+eDMhNk71PcuhDSb7O0svjaEi1H3afBTpexSfBOb7LYfKBoaG4/UrcphihU8
         8OknN0T1slraKNJ4FwXYcYH2DTEHsrjaPAvs6K2vBs2no3EK/k/MDvrryaapVZ4TLbnY
         H5xj0Q0QXzaaA0jOT2P3rY4qTPV7WBUFvcDuk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Vo4MHeHp60FeyK3YAoJRC6FK/FoUzw7sVlHJAkiF1ScOHt67rnh00OFOjqiY7dmLSD
         yb32dXcYKvi6aljCBT5bDwuoIhqI9QcN38Odjl/yiWE/7sWB2/JXK2k3j/7Kyx9qHc4+
         KmGlf6o0PKa61wom5Kkyn1hiZ12jeIT5fJaG4=
MIME-Version: 1.0
Received: by 10.142.223.21 with SMTP id v21mr6859680wfg.154.1278470902465; 
	Tue, 06 Jul 2010 19:48:22 -0700 (PDT)
Received: by 10.142.47.5 with HTTP; Tue, 6 Jul 2010 19:48:22 -0700 (PDT)
In-Reply-To: <20100702183827.GM29381@omniti.com>
References: <20100702183827.GM29381@omniti.com>
Date: Wed, 7 Jul 2010 10:48:22 +0800
Message-ID: <AANLkTilVBLVnyAxLHhO_b97vT_Fpcq3XA6vUe6qyVMNg@mail.gmail.com>
Subject: Re: CFP for Surge Scalability Conference 2010
From: jg lin <linjiguo@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd28e58ff4577048ac333ed
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd28e58ff4577048ac333ed
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

=C4=E3=C8=CF=CA=B6=BA=BA=D7=D6=C2=F0(=A1=D1_=A1=D1)=A3=BF



2010/7/3 Jason Dixon <jdixon@omniti.com>

> A quick reminder that there's one week left to submit your abstract for
> this year's Surge Scalability Conference.  The event is taking place on
> Sept 30 and Oct 1, 2010 in Baltimore, MD.  Surge focuses on case studies
> that address production failures and the re-engineering efforts that led
> to victory in Web Applications or Internet Architectures.
>
> Our Keynote speakers include John Allspaw and Theo Schlossnagle.  We are
> currently accepting submissions for the Call For Papers through July
> 9th.  You can find more information, including suggested topics and our
> current list of speakers, online:
>
> http://omniti.com/surge/2010
>
> I'd also like to urge folks who are planning to attend, to get your
> session passes sooner rather than later.  We have limited seating and we
> are on track to sell out early.  For more information, including the
> CFP, sponsorship of the event, or participating as an exhibitor, please
> visit the Surge website or contact us at surge@omniti.com.
>
> Thanks,
>
> --
> Jason Dixon
> OmniTI Computer Consulting, Inc.
> jdixon@omniti.com
> 443.325.1357 x.241
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd28e58ff4577048ac333ed--

From java-user-return-46641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 02:49:25 2010
Return-Path: <java-user-return-46641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23532 invoked from network); 7 Jul 2010 02:49:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 02:49:25 -0000
Received: (qmail 96535 invoked by uid 500); 7 Jul 2010 02:49:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96511 invoked by uid 500); 7 Jul 2010 02:49:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96502 invoked by uid 99); 7 Jul 2010 02:49:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:49:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:49:14 +0000
Received: by mail-pw0-f48.google.com with SMTP id 2so1644136pwj.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 19:48:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=PDTtuVaSa3kR2EJmKmW6QIdY5idp/ujSa8ni8eyH/dE=;
        b=CEDYeh/Pvd+5ay/czYgk7Xz+yRqfgIra5CvKt+YWhDCEuW7S18RG7r/timshWK/5i7
         cOc2BHDfPKrtqRdW0aEjoOOewW7WORCcuta+li5lvr98LIyLfpjhxcLl9SMlAJIU2ff0
         HGojSTGOvu8z5qKhIuq2AxjSxLq4svmjzvXAE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=tsw5SOZ3G6q1A0VSF2H5MT+aS/tWMVtNaF4bCoP0SizQTSOJd7h84VozQ/QHRYQ+xU
         EW8S3Wq0dq+5yEvrUO6hTcGqHKi8LP24L/lFXt+noBhV00VyyHwcldZBVLhagiZS/12Q
         LIw6UtHuzHWJSFt2uXRs7kxd9orcmOyBMTDzM=
MIME-Version: 1.0
Received: by 10.142.211.5 with SMTP id j5mr6780773wfg.158.1278470933374; Tue, 
	06 Jul 2010 19:48:53 -0700 (PDT)
Received: by 10.142.164.13 with HTTP; Tue, 6 Jul 2010 19:48:53 -0700 (PDT)
In-Reply-To: <AANLkTikTsh1xpbXmoHAwJf2F0qtb1jQi1BGlM99lhOgW@mail.gmail.com>
References: <AANLkTinGP45b4tLajmi6p7DtyZ7KgbpcXB9YQQN9zkmh@mail.gmail.com>
	<AANLkTimkIAu98qBWzg-Y7XZOKRebq0kUTcOO9BVssJfG@mail.gmail.com>
	<AANLkTikTsh1xpbXmoHAwJf2F0qtb1jQi1BGlM99lhOgW@mail.gmail.com>
Date: Wed, 7 Jul 2010 10:48:53 +0800
Message-ID: <AANLkTimlAvulJw60yzJxyyLyFQV5zGvTr9c3wXm-ez2r@mail.gmail.com>
Subject: Re: index format error because disk full
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=BB=E1
=D4=DA 2010=C4=EA7=D4=C27=C8=D5 =C9=CF=CE=E710:46=A3=ACjg lin <linjiguo@gma=
il.com> =D0=B4=B5=C0=A3=BA
> =C4=E3=BB=E1=CB=B5=BA=BA=D3=EF=C2=F0(=A1=D1_=A1=D1)=A3=BF
>
> 2010/7/7 Li Li <fancyerii@gmail.com>
>
>> ---------- Forwarded message ----------
>> From: Li Li <fancyerii@gmail.com>
>> Date: 2010/7/7
>> Subject: index format error because disk full
>> To: solr-user@lucene.apache.org
>>
>>
>> the index file is ill-formated because disk full when feeding. Can I
>> roll back to last version? Is there any method to avoid unexpected
>> errors when indexing? attachments are my segment_N
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 02:54:43 2010
Return-Path: <java-user-return-46642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24196 invoked from network); 7 Jul 2010 02:54:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 02:54:43 -0000
Received: (qmail 1457 invoked by uid 500); 7 Jul 2010 02:54:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1249 invoked by uid 500); 7 Jul 2010 02:54:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1241 invoked by uid 99); 7 Jul 2010 02:54:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:54:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of linjiguo@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:54:31 +0000
Received: by pwj2 with SMTP id 2so1646852pwj.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 19:53:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Q62kW4s/kyO6ktscROZvs7+aGT4PxDcT2UaaFiQbLVk=;
        b=CYylTHF5aI0VW6yTaY2HesBRyDQXfwB8J+dusi3aGkesMQLQRPQXEB/lIKycPTr026
         IFE/dY2q4RTktyAy8KSn8igRqwnC973wXQ8Fx8BVhCukgK/RxXxECcL+LjXEyr3JnTc6
         VxDlwXuvCtHYls8a9xnl+BfjHKzfqoQLTYmr8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=V+MKqUrqcR4SFx2FozOkqj0++eavyOAz4I6A3j/FuvI2XzwzQesvFMOWhk+jL3Hl0r
         iHE7RUFhE2b3xlTewbWCJr67HH8OxgJ6eg8VbUEZl4d8QHQgCWvepCtJURPmV346gt0X
         6vmzhUbtI98+Kp2VuEGjTKRgrAQ0CQqKteDKQ=
MIME-Version: 1.0
Received: by 10.142.144.2 with SMTP id r2mr1328927wfd.139.1278471190082; Tue, 
	06 Jul 2010 19:53:10 -0700 (PDT)
Received: by 10.142.47.5 with HTTP; Tue, 6 Jul 2010 19:53:10 -0700 (PDT)
In-Reply-To: <AANLkTimlAvulJw60yzJxyyLyFQV5zGvTr9c3wXm-ez2r@mail.gmail.com>
References: <AANLkTinGP45b4tLajmi6p7DtyZ7KgbpcXB9YQQN9zkmh@mail.gmail.com>
	<AANLkTimkIAu98qBWzg-Y7XZOKRebq0kUTcOO9BVssJfG@mail.gmail.com>
	<AANLkTikTsh1xpbXmoHAwJf2F0qtb1jQi1BGlM99lhOgW@mail.gmail.com>
	<AANLkTimlAvulJw60yzJxyyLyFQV5zGvTr9c3wXm-ez2r@mail.gmail.com>
Date: Wed, 7 Jul 2010 10:53:10 +0800
Message-ID: <AANLkTimrEBH6sISLWnC46A3Rj1tUFlEc_fVXfaPx8X9H@mail.gmail.com>
Subject: Re: index format error because disk full
From: jg lin <linjiguo@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd3291c23f649048ac34564
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd3291c23f649048ac34564
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

=BC=D3=B8=F6QQ=C8=BA=CE=CA=CE=CA18038594=A3=AC=C4=E3=B5=C4=CE=CA=CC=E2=CE=
=D2=B2=BB=BB=E1=A1=A3

Li Li <fancyerii@gmail.com> =EC=B6 2010=C4=EA7=D4=C27=C8=D5=C9=CF=CE=E710:4=
8 =8C=91=B5=C0=A3=BA

> =BB=E1
> =D4=DA 2010=C4=EA7=D4=C27=C8=D5 =C9=CF=CE=E710:46=A3=ACjg lin <linjiguo@g=
mail.com> =D0=B4=B5=C0=A3=BA
>  > =C4=E3=BB=E1=CB=B5=BA=BA=D3=EF=C2=F0(=A1=D1_=A1=D1)=A3=BF
> >
> > 2010/7/7 Li Li <fancyerii@gmail.com>
> >
> >> ---------- Forwarded message ----------
> >> From: Li Li <fancyerii@gmail.com>
> >> Date: 2010/7/7
> >> Subject: index format error because disk full
> >> To: solr-user@lucene.apache.org
> >>
> >>
> >> the index file is ill-formated because disk full when feeding. Can I
> >> roll back to last version? Is there any method to avoid unexpected
> >> errors when indexing? attachments are my segment_N
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd3291c23f649048ac34564--

From java-user-return-46643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 02:59:28 2010
Return-Path: <java-user-return-46643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24669 invoked from network); 7 Jul 2010 02:59:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 02:59:28 -0000
Received: (qmail 5173 invoked by uid 500); 7 Jul 2010 02:59:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4917 invoked by uid 500); 7 Jul 2010 02:59:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4906 invoked by uid 99); 7 Jul 2010 02:59:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:59:24 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of linjiguo@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 02:59:16 +0000
Received: by pvc21 with SMTP id 21so1501340pvc.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 19:57:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=4Nh5IAuCjKzdEiYpZAXANhWsujzXgrXV+pJJ3E2C6ow=;
        b=MUBtDY2vGYu7MGGtnLwkMsd8VxYS0ZoFFUJ8LpHYVSGvp+U0iRolF6Q0SYplvsxhDs
         rrsgdcN5eRICYSzNC52fEHJeZElp6YTtr4v+BxuYLaRtSES9ZslYkFMxZ9+0yusD6XXI
         P/JZ3jovoGsoyZ3YjSTehA7TK3GTs9NRBEeJY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=hS9w8oIKRt1uEWR22mOyaj1l5aEB7uHwZsgQk6E3zBj77349q6R9uymDaJxeGTS6wD
         LnlOQlbKfRfve/4fCpI+4VxffjMUjqCMrvMPbknTYYLBAiHsbijFnAxxpuioyiwXDbBW
         nnsBtipdGDRp2mM5/7Fk/ihurzMubwiKqtLoA=
MIME-Version: 1.0
Received: by 10.142.214.17 with SMTP id m17mr4235999wfg.72.1278471474930; Tue, 
	06 Jul 2010 19:57:54 -0700 (PDT)
Received: by 10.142.47.5 with HTTP; Tue, 6 Jul 2010 19:57:54 -0700 (PDT)
In-Reply-To: <69575A45-B97A-467B-96FB-525F46F3A5AA@gmail.com>
References: <AANLkTinEGNzmNnQuiMA0Gz4RsrT6nrQWsQ8_4cfsfD5p@mail.gmail.com>
	<69575A45-B97A-467B-96FB-525F46F3A5AA@gmail.com>
Date: Wed, 7 Jul 2010 10:57:54 +0800
Message-ID: <AANLkTinvDLofnbdZbDSTlaeWWqTwro57rRkPDoqIooXv@mail.gmail.com>
Subject: Re: about contrib instantiated
From: jg lin <linjiguo@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd328461e64a8048ac35626
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd328461e64a8048ac35626
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

=D3=C3=BA=BA=D3=EF=BC=B8=BE=E4=BB=B0=BE=CD=B8=E3=B6=A8=B5=C4=B6=AB=CE=F7=A3=
=AC=B7=C7=B5=C3=DF=B4=DF=B4=CD=E1=CD=E1=D5=FB=D5=E2=C3=B4=D2=BB=B6=CE=A1=A3=
=D1=F3=CE=C4=D2=BB=B8=F6=D7=D6=A3=AC=C0=C3=A1=A3=A1=A3=A1=A3

2010/7/3 Karl Wettin <karl.wettin@gmail.com>

>
> 2 jul 2010 kl. 08.32 skrev Li Li:
>
>
> I  have an index of
>> about 8,000,000 document and the current index size is about 30GB. Is
>> it possbile to use this contrib to speed up my search? I have enough
>> memory for it.
>>
>
>
> In order to answer your question you'll need to benchmark using a lot of
> typical queries. My guess is that it will probably be about as fast as a
> RAMDirectory while consuming a lot more memory. It's hard to say for sure
> though.
>
> II is faster than RD mainly due to the need for RD to unmarshall
> information from a byte stream to java instances, hence the name. As the
> index grows the time spent in RD unmarshalling will shrink compared to th=
e
> time spent seeking (mainly in DocsEnum/DocsAndPositionsEnum) and scoring
> documents. Thus executing queries on a large index using terms that are o=
nly
> available in a small portion of the documents should be faster on II than=
 on
> RD, while exeuting queries using frequently occuring terms will consume
> about as much time.
>
> (Perhaps the documentation should explain it this way rather than just
> state "Mileage may vary depending on term saturation".)
>
> While benchmarking remember that RD might require a warm up period while =
II
> does not.
>
> Feel free to report back with any findings.
>
>
>
>        karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd328461e64a8048ac35626--

From java-user-return-46644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 03:04:36 2010
Return-Path: <java-user-return-46644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26504 invoked from network); 7 Jul 2010 03:04:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 03:04:35 -0000
Received: (qmail 8526 invoked by uid 500); 7 Jul 2010 03:04:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8253 invoked by uid 500); 7 Jul 2010 03:04:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8245 invoked by uid 99); 7 Jul 2010 03:04:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 03:04:30 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 03:04:22 +0000
Received: by pxi11 with SMTP id 11so6284793pxi.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 20:03:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=VQD6Jc1fsA0L6zLE5SP20DI1LktQh3eQ9/K9vkccgcs=;
        b=avWT3WUFH/g3c5iq9EH+pkc3FZpVNEP11iKYbXZkUN+0EKeTQhvKGjL9BO1Sy4jO/h
         zG3RYNC9Qd947qCzddbjjqQzrMQDDEjXO5sJdsjgRcszx2xHoq+2KI/MBVkq2Egx8FS7
         EyEmMh6dRMnOQhQtRjWq03kFxoSTk/oSr2zvk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=jzowkAzMAoRKG8f34LlrOTY0VqN4oIpMFLjrgQjqrbixE6VWszOH4wgpOzjIsWsSfM
         naI1aCgvVOe81GRePNxxS9ktmCGNH/bnakeJYe5oRSUtk7vkWHMarbdMBtt8YXPD12QM
         BD9dweuasH5+DOq+ooeJ2+WYC/JUI0aWII8cY=
MIME-Version: 1.0
Received: by 10.142.170.2 with SMTP id s2mr6819154wfe.58.1278471781375; Tue, 
	06 Jul 2010 20:03:01 -0700 (PDT)
Received: by 10.142.164.13 with HTTP; Tue, 6 Jul 2010 20:03:01 -0700 (PDT)
In-Reply-To: <AANLkTimrEBH6sISLWnC46A3Rj1tUFlEc_fVXfaPx8X9H@mail.gmail.com>
References: <AANLkTinGP45b4tLajmi6p7DtyZ7KgbpcXB9YQQN9zkmh@mail.gmail.com>
	<AANLkTimkIAu98qBWzg-Y7XZOKRebq0kUTcOO9BVssJfG@mail.gmail.com>
	<AANLkTikTsh1xpbXmoHAwJf2F0qtb1jQi1BGlM99lhOgW@mail.gmail.com>
	<AANLkTimlAvulJw60yzJxyyLyFQV5zGvTr9c3wXm-ez2r@mail.gmail.com>
	<AANLkTimrEBH6sISLWnC46A3Rj1tUFlEc_fVXfaPx8X9H@mail.gmail.com>
Date: Wed, 7 Jul 2010 11:03:01 +0800
Message-ID: <AANLkTikhszFo7Gh77EV-d5BNF8tuasLjdfNoZjvOZlST@mail.gmail.com>
Subject: Re: index format error because disk full
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

=D0=BB=D0=BB

=D4=DA 2010=C4=EA7=D4=C27=C8=D5 =C9=CF=CE=E710:53=A3=ACjg lin <linjiguo@gma=
il.com> =D0=B4=B5=C0=A3=BA
> =BC=D3=B8=F6QQ=C8=BA=CE=CA=CE=CA18038594=A3=AC=C4=E3=B5=C4=CE=CA=CC=E2=CE=
=D2=B2=BB=BB=E1=A1=A3
>
> Li Li <fancyerii@gmail.com> =EC=B6 2010=C4=EA7=D4=C27=C8=D5=C9=CF=CE=E710=
:48 =8C=91=B5=C0=A3=BA
>
>> =BB=E1
>> =D4=DA 2010=C4=EA7=D4=C27=C8=D5 =C9=CF=CE=E710:46=A3=ACjg lin <linjiguo@=
gmail.com> =D0=B4=B5=C0=A3=BA
>>  > =C4=E3=BB=E1=CB=B5=BA=BA=D3=EF=C2=F0(=A1=D1_=A1=D1)=A3=BF
>> >
>> > 2010/7/7 Li Li <fancyerii@gmail.com>
>> >
>> >> ---------- Forwarded message ----------
>> >> From: Li Li <fancyerii@gmail.com>
>> >> Date: 2010/7/7
>> >> Subject: index format error because disk full
>> >> To: solr-user@lucene.apache.org
>> >>
>> >>
>> >> the index file is ill-formated because disk full when feeding. Can I
>> >> roll back to last version? Is there any method to avoid unexpected
>> >> errors when indexing? attachments are my segment_N
>> >>
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 03:09:24 2010
Return-Path: <java-user-return-46645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30798 invoked from network); 7 Jul 2010 03:09:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 03:09:24 -0000
Received: (qmail 12424 invoked by uid 500); 7 Jul 2010 03:09:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12093 invoked by uid 500); 7 Jul 2010 03:09:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12083 invoked by uid 99); 7 Jul 2010 03:09:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 03:09:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [210.83.25.69] (HELO mailgate.neusoft.com) (210.83.25.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 03:09:09 +0000
X-IronPort-AV: E=McAfee;i="5400,1158,6035"; a="26302102"
Content-Type: multipart/mixed; boundary="===============0317573094=="
Received: from [192.168.0.111] ([114.94.161.146])
 by smtp.neusoft.com (iPlanet Messaging Server 5.2 Patch 2 (built Jul 14 2004))
 with ESMTPPSA id <0L5600GTK3CUXO@smtp.neusoft.com> for
 java-user@lucene.apache.org; Wed, 07 Jul 2010 11:07:43 +0800 (CST)
Date: Wed, 07 Jul 2010 11:07:40 +0800
From: luby <zhangyouc@neusoft.com>
Subject: Re: index format error because disk full
In-reply-to: <AANLkTikhszFo7Gh77EV-d5BNF8tuasLjdfNoZjvOZlST@mail.gmail.com>
Sender: zhangyouc@neusoft.com
To: java-user@lucene.apache.org
Message-id: <4C33EF7C.6000005@neusoft.com>
MIME-version: 1.0
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9.1.10)
 Gecko/20100512 Thunderbird/3.0.5
References: <AANLkTinGP45b4tLajmi6p7DtyZ7KgbpcXB9YQQN9zkmh@mail.gmail.com>
 <AANLkTimkIAu98qBWzg-Y7XZOKRebq0kUTcOO9BVssJfG@mail.gmail.com>
 <AANLkTikTsh1xpbXmoHAwJf2F0qtb1jQi1BGlM99lhOgW@mail.gmail.com>
 <AANLkTimlAvulJw60yzJxyyLyFQV5zGvTr9c3wXm-ez2r@mail.gmail.com>
 <AANLkTimrEBH6sISLWnC46A3Rj1tUFlEc_fVXfaPx8X9H@mail.gmail.com>
 <AANLkTikhszFo7Gh77EV-d5BNF8tuasLjdfNoZjvOZlST@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--===============0317573094==
MIME-Version: 1.0
Content-transfer-encoding: 8BIT
Content-Type: text/plain; charset="GB2312"



 2010-7-7 11:03, Li Li :
> 
>
>  201077 10:53jg lin <linjiguo@gmail.com> 
>   
>> QQ18038594
>>
>> Li Li <fancyerii@gmail.com>  20107710:48 
>>
>>     
>>> 
>>>  201077 10:46jg lin <linjiguo@gmail.com> 
>>>  > (_)
>>>       
>>>> 2010/7/7 Li Li <fancyerii@gmail.com>
>>>>
>>>>         
>>>>> ---------- Forwarded message ----------
>>>>> From: Li Li <fancyerii@gmail.com>
>>>>> Date: 2010/7/7
>>>>> Subject: index format error because disk full
>>>>> To: solr-user@lucene.apache.org
>>>>>
>>>>>
>>>>> the index file is ill-formated because disk full when feeding. Can I
>>>>> roll back to last version? Is there any method to avoid unexpected
>>>>> errors when indexing? attachments are my segment_N
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>           
>>>>         
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>       
>>     
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

--===============0317573094==
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

---------------------------------------------------------------------------=
------------------------
Confidentiality Notice: The information contained in this e-mail and any ac=
companying attachment(s) =

is intended only for the use of the intended recipient and may be confident=
ial and/or privileged of =

Neusoft Corporation, its subsidiaries and/or its affiliates. If any reader =
of this communication is =

not the intended recipient, unauthorized use, forwarding, printing,  storin=
g, disclosure or copying =

is strictly prohibited, and may be unlawful.If you have received this commu=
nication in error,please =

immediately notify the sender by return e-mail, and delete the original mes=
sage and all copies from =

your system. Thank you. =

---------------------------------------------------------------------------=
------------------------


--===============0317573094==
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--===============0317573094==--

From java-user-return-46646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 03:15:21 2010
Return-Path: <java-user-return-46646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31657 invoked from network); 7 Jul 2010 03:15:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 03:15:20 -0000
Received: (qmail 19378 invoked by uid 500); 7 Jul 2010 03:15:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18913 invoked by uid 500); 7 Jul 2010 03:15:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18905 invoked by uid 99); 7 Jul 2010 03:15:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 03:15:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,MIME_BASE64_BLANKS,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of baleksan@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 03:15:04 +0000
Received: by gxk7 with SMTP id 7so2153714gxk.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 20:13:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:x-rim-org-msg-ref-id
         :message-id:content-transfer-encoding:reply-to:x-priority:references
         :in-reply-to:sensitivity:importance:to:subject:from:date
         :content-type:mime-version;
        bh=W1y47Ebvqdjpk5M2UWAPMYWDdfOzVwJHaKEt2TwrPr8=;
        b=We/UgmtF+MulISNIUlXr9YQdJJVTTxXrId0MSUQr1UsfuVjd9WBhQ8yTV6qjat8wGW
         yb9bxO+JvcUb7WMAFfsPrhrH/cOWmwfkQnisAranARk7/kTDFXM9fn500vNwrCI4iVw4
         1UYO4tBbvFdtjaf//I/TMzWrUNtt9KdGRLalY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=x-rim-org-msg-ref-id:message-id:content-transfer-encoding:reply-to
         :x-priority:references:in-reply-to:sensitivity:importance:to:subject
         :from:date:content-type:mime-version;
        b=Bd7b3ViOlRO/RIUAk8OZ7Y+C4+Taw85rAogxb7wTsZ2ZaetEQYXt7N+jseOXAxky5t
         5RdHVSoC6qiHTMnNn0lq1Qn4We7HJ5+6C2dfoVOkLHFSMc6E4HxYsrcotsdR39FHd0sI
         4yYYf8RTYjB7p95R1gikq/RTvTc8Oz5FxfaUM=
Received: by 10.100.144.16 with SMTP id r16mr6942324and.149.1278472434857;
        Tue, 06 Jul 2010 20:13:54 -0700 (PDT)
Received: from bda676.bisx.prod.on.blackberry (bda-67-223-91-4.bise.na.blackberry.com [67.223.91.4])
        by mx.google.com with ESMTPS id t30sm59364183ann.27.2010.07.06.20.13.53
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 06 Jul 2010 20:13:54 -0700 (PDT)
X-rim-org-msg-ref-id:2106420672
Message-ID:<2106420672-1278472432-cardhu_decombobulator_blackberry.rim.net-95986817-@bda679.bisx.prod.on.blackberry>
Content-Transfer-Encoding: base64
Reply-To: baleksan@gmail.com
X-Priority: Normal
References: <AANLkTinGP45b4tLajmi6p7DtyZ7KgbpcXB9YQQN9zkmh@mail.gmail.com><AANLkTimkIAu98qBWzg-Y7XZOKRebq0kUTcOO9BVssJfG@mail.gmail.com><AANLkTikTsh1xpbXmoHAwJf2F0qtb1jQi1BGlM99lhOgW@mail.gmail.com><AANLkTimlAvulJw60yzJxyyLyFQV5zGvTr9c3wXm-ez2r@mail.gmail.com>
In-Reply-To: <AANLkTimlAvulJw60yzJxyyLyFQV5zGvTr9c3wXm-ez2r@mail.gmail.com>
Sensitivity: Normal
Importance: Normal
To: java-user@lucene.apache.org
Subject: Re: index format error because disk full
From: baleksan@gmail.com
Date: Wed, 7 Jul 2010 03:13:46 +0000
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

cG9vcHkNClNlbnQgdmlhIEJsYWNrQmVycnkgZnJvbSBULU1vYmlsZQ0KDQotLS0tLU9yaWdpbmFs
IE1lc3NhZ2UtLS0tLQ0KRnJvbTogTGkgTGkgPGZhbmN5ZXJpaUBnbWFpbC5jb20+DQpEYXRlOiBX
ZWQsIDcgSnVsIDIwMTAgMTA6NDg6NTMgDQpUbzogPGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9y
Zz4NClJlcGx5LVRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IFJlOiBp
bmRleCBmb3JtYXQgZXJyb3IgYmVjYXVzZSBkaXNrIGZ1bGwNCg0K5LyaDQrlnKggMjAxMOW5tDfm
nIg35pelIOS4iuWNiDEwOjQ277yMamcgbGluIDxsaW5qaWd1b0BnbWFpbC5jb20+IOWGmemBk++8
mg0KPiDkvaDkvJror7TmsYnor63lkJco4oqZX+KKmSnvvJ8NCj4NCj4gMjAxMC83LzcgTGkgTGkg
PGZhbmN5ZXJpaUBnbWFpbC5jb20+DQo+DQo+PiAtLS0tLS0tLS0tIEZvcndhcmRlZCBtZXNzYWdl
IC0tLS0tLS0tLS0NCj4+IEZyb206IExpIExpIDxmYW5jeWVyaWlAZ21haWwuY29tPg0KPj4gRGF0
ZTogMjAxMC83LzcNCj4+IFN1YmplY3Q6IGluZGV4IGZvcm1hdCBlcnJvciBiZWNhdXNlIGRpc2sg
ZnVsbA0KPj4gVG86IHNvbHItdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPj4NCj4+DQo+PiB0aGUg
aW5kZXggZmlsZSBpcyBpbGwtZm9ybWF0ZWQgYmVjYXVzZSBkaXNrIGZ1bGwgd2hlbiBmZWVkaW5n
LiBDYW4gSQ0KPj4gcm9sbCBiYWNrIHRvIGxhc3QgdmVyc2lvbj8gSXMgdGhlcmUgYW55IG1ldGhv
ZCB0byBhdm9pZCB1bmV4cGVjdGVkDQo+PiBlcnJvcnMgd2hlbiBpbmRleGluZz8gYXR0YWNobWVu
dHMgYXJlIG15IHNlZ21lbnRfTg0KPj4NCj4+DQo+Pg0KPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+PiBUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcNCj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnDQo+Pg0KPg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVuc3Vic2NyaWJlLCBl
LW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KRm9yIGFkZGl0
aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcN
Cg0K



From java-user-return-46647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 03:34:24 2010
Return-Path: <java-user-return-46647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34298 invoked from network); 7 Jul 2010 03:34:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 03:34:24 -0000
Received: (qmail 27107 invoked by uid 500); 7 Jul 2010 03:34:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26708 invoked by uid 500); 7 Jul 2010 03:34:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26700 invoked by uid 99); 7 Jul 2010 03:34:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 03:34:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of linjiguo@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 03:34:09 +0000
Received: by pvc21 with SMTP id 21so1520105pvc.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 20:33:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=0zVxsGEoCJUD+YOWE2ntv7gGuWGG7vGiTyxPbvdhu9A=;
        b=A/3vIJIXVer4jBI+TUVRSjRvsnHWlt8cSubkRHqUcolGkGoACj5EHq9tRpBS3iyGF8
         Tyux4Sc/c/E9EJz+I+yqJrOZFh/BHeqxFC5r8RXIBtIn8cPdyy/tcoSdbDp3EuNsW21N
         k712VbESF4AQJCH6l/uvGepFrwQKWj0ywRov8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=mjTU0vwvbNmwktdchuoyFGCzBe5a6OSmYn9JUEX/eEcvgPrMm/2zAV/40UXzfhUy7X
         ctZm6znONb//Ru7dCyzYjUZItRyQP48Vn8hY4r3C4za6VSkY5kSVGHZHy3sTwGOM0Vb0
         PHwxXij1gz6zPrY8lwtWzt6+EArEi7YiKEvWw=
MIME-Version: 1.0
Received: by 10.142.172.1 with SMTP id u1mr7086495wfe.286.1278473627527; Tue, 
	06 Jul 2010 20:33:47 -0700 (PDT)
Received: by 10.142.47.5 with HTTP; Tue, 6 Jul 2010 20:33:47 -0700 (PDT)
In-Reply-To: <2106420672-1278472432-cardhu_decombobulator_blackberry.rim.net-95986817-@bda679.bisx.prod.on.blackberry>
References: <AANLkTinGP45b4tLajmi6p7DtyZ7KgbpcXB9YQQN9zkmh@mail.gmail.com>
	<AANLkTimkIAu98qBWzg-Y7XZOKRebq0kUTcOO9BVssJfG@mail.gmail.com>
	<AANLkTikTsh1xpbXmoHAwJf2F0qtb1jQi1BGlM99lhOgW@mail.gmail.com>
	<AANLkTimlAvulJw60yzJxyyLyFQV5zGvTr9c3wXm-ez2r@mail.gmail.com>
	<2106420672-1278472432-cardhu_decombobulator_blackberry.rim.net-95986817-@bda679.bisx.prod.on.blackberry>
Date: Wed, 7 Jul 2010 11:33:47 +0800
Message-ID: <AANLkTiklIqxVcfoUHu5AQTLU89dNgpIWY7LpLij5NhcM@mail.gmail.com>
Subject: Re: index format error because disk full
From: jg lin <linjiguo@gmail.com>
To: java-user@lucene.apache.org, baleksan@gmail.com
Content-Type: multipart/alternative; boundary=000e0cd2de506c6b51048ac3d63f
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2de506c6b51048ac3d63f
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

=C0=CF=D7=D3=CF=B2=BB=B6=D3=C3=BA=BA=D3=EF=A3=AC=BE=B9=B8=D2=C2=EE=CE=D2=A3=
=AC=D5=E2=BE=CD=CA=C7=D1=F3=C8=CB=B5=C4=CB=D8=D6=CA=A3=AC=B1=C9=CA=D3=A1=A3=
=D3=D0=D0=A9=C8=CB=BE=CD=CA=C7=D7=D4=B1=B0=B5=BD=B9=C7=D7=D3=C0=EF=C1=CB=A1=
=A3=A1=A3=A1=A3

2010/7/7 <baleksan@gmail.com>

> poopy
> Sent via BlackBerry from T-Mobile
>
> -----Original Message-----
> From: Li Li <fancyerii@gmail.com>
>  Date: Wed, 7 Jul 2010 10:48:53
> To: <java-user@lucene.apache.org>
> Reply-To: java-user@lucene.apache.org
> Subject: Re: index format error because disk full
>
> =BB=E1
> =D4=DA 2010=C4=EA7=D4=C27=C8=D5 =C9=CF=CE=E710:46=A3=ACjg lin <linjiguo@g=
mail.com> =D0=B4=B5=C0=A3=BA
> > =C4=E3=BB=E1=CB=B5=BA=BA=D3=EF=C2=F0(=A1=D1_=A1=D1)=A3=BF
> >
> > 2010/7/7 Li Li <fancyerii@gmail.com>
> >
> >> ---------- Forwarded message ----------
> >> From: Li Li <fancyerii@gmail.com>
> >> Date: 2010/7/7
> >> Subject: index format error because disk full
> >> To: solr-user@lucene.apache.org
> >>
> >>
> >> the index file is ill-formated because disk full when feeding. Can I
> >> roll back to last version? Is there any method to avoid unexpected
> >> errors when indexing? attachments are my segment_N
> >>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd2de506c6b51048ac3d63f--

From java-user-return-46648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 05:59:39 2010
Return-Path: <java-user-return-46648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62011 invoked from network); 7 Jul 2010 05:59:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 05:59:38 -0000
Received: (qmail 803 invoked by uid 500); 7 Jul 2010 05:59:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 356 invoked by uid 500); 7 Jul 2010 05:59:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 348 invoked by uid 99); 7 Jul 2010 05:59:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 05:59:32 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 05:59:25 +0000
Received: by iwn37 with SMTP id 37so6433704iwn.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 22:59:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.14.2 with SMTP id e2mr5497812iba.155.1278482343716; Tue, 
	06 Jul 2010 22:59:03 -0700 (PDT)
Received: by 10.231.172.194 with HTTP; Tue, 6 Jul 2010 22:59:03 -0700 (PDT)
Date: Wed, 7 Jul 2010 15:59:03 +1000
Message-ID: <AANLkTinnbd9dVC9xBCvsPkZtkR0cIBGiIuwMiXPPCcCz@mail.gmail.com>
Subject: Issue Lucene-2421 and NativeFSLockFactory.clearLock behaviour?
From: Ted McFadden <ted@leximancer.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032557558af2e7d6048ac5dd3e
X-Virus-Checked: Checked by ClamAV on apache.org

--00032557558af2e7d6048ac5dd3e
Content-Type: text/plain; charset=ISO-8859-1

Hi,

For Lucene 3.0.2, issue LUCENE-2421 (
https://issues.apache.org/jira/browse/LUCENE-2421) changed
NativeFSLock.release to not raise an exception if a write.lock file could
not be deleted since the presence of the file itself does not mean a lock is
held.

Should NativeFSLockFactory.clearLock also be changed to not raise an
exception if it can't delete the write.lock file? The comments in the
clearLock method seem to suggest the method is really no longer necessary,
but IndexWriter.init can still call it.

If the write.lock is held from deletion by antivirus or something as
described in LUCENE-2421, IndexWriter construction looks like it can fail
unnecessarily for the same reason:

IndexWriter
   IndexWriter.init
      Directory.clearLock
         NativeFSLockFactory.clearLock:
            ...
            if (lockFile.exists() && !lockFile.delete()){
               throw new IOException("Cannot delete " + lockFile);
            }


We have seen this exception path once in the wild (on a Windows box).

I can work around this with a custom LockFactory but thought I should check
if I'm reading the code right.

Cheers,

Ted


-- 
Ted McFadden
Chief Engineer

Leximancer Pty Ltd
Queensland, Australia
http://www.leximancer.com

--00032557558af2e7d6048ac5dd3e--

From java-user-return-46649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 06:09:28 2010
Return-Path: <java-user-return-46649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67389 invoked from network); 7 Jul 2010 06:09:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 06:09:27 -0000
Received: (qmail 8201 invoked by uid 500); 7 Jul 2010 06:09:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7818 invoked by uid 500); 7 Jul 2010 06:09:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7802 invoked by uid 99); 7 Jul 2010 06:09:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 06:09:21 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 06:09:11 +0000
Received: by pxi11 with SMTP id 11so6383833pxi.35
        for <multiple recipients>; Tue, 06 Jul 2010 23:07:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=0ByCguMpo5MCRU8Rhy3AqoPgOlN2nWqGZfhTE84+aKM=;
        b=AOo5QaiypQFCzHbKW9QeMDRoDTuH2lDyPE3xe/l8vDL2aFyjTVBnvW4UbMF2EbbDIV
         SPZXwM//9w9RQ+LVak3TJAR0kxKXJaTb5H1ElpD5lD4d+8Z+LkwcN2k0Az1GhuXOyskw
         308uupQ11f10Ur93mMYKIJZkUSIcHrMeY4iRw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=ObP+Oy86uvSdydXAz92JZnDDVZKMyEy+IWx4etZruJFoNpy/bT+E2r3RF+lOvFKYwU
         WHVASRO0KidWBTeVgqloqBDtCls/pBLpdzx0AuWrqUFpm3Pfi8NpUNoyAG6jkHeY+9W5
         IWSuPgwaNuciiewngiZZRYUs/Wz3ceMlJ4HR4=
MIME-Version: 1.0
Received: by 10.142.232.13 with SMTP id e13mr7005791wfh.190.1278482869543; 
	Tue, 06 Jul 2010 23:07:49 -0700 (PDT)
Received: by 10.142.164.13 with HTTP; Tue, 6 Jul 2010 23:07:49 -0700 (PDT)
Date: Wed, 7 Jul 2010 14:07:49 +0800
Message-ID: <AANLkTinydBaLdESLVki6o3tsvQrl-dVQFm_LTJkRFpdA@mail.gmail.com>
Subject: How to manage resource out of index?
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I used to store full text into lucene index. But I found it's very
slow when merging index because when merging 2 segments it copy the
fdt files into a new one. So I want to only index full text. But When
searching I need the full text for applications such as hightlight and
view full text. I can store the full text by <url,full text> pair in
database and load it to memory. And When I search in lucene(or solr),
I retrive url of doc first, then use url to get full text. But when
they are stored separately, it is hard to managed. They may be not
consistent with each other. Does lucene or solr provied any method to
ease this problem? Or any one  has some experience of this problem?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 06:16:23 2010
Return-Path: <java-user-return-46650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68396 invoked from network); 7 Jul 2010 06:16:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 06:16:23 -0000
Received: (qmail 15782 invoked by uid 500); 7 Jul 2010 06:16:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15451 invoked by uid 500); 7 Jul 2010 06:16:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15436 invoked by uid 99); 7 Jul 2010 06:16:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 06:16:12 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bec.watson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 06:16:04 +0000
Received: by gwaa20 with SMTP id a20so726255gwa.35
        for <multiple recipients>; Tue, 06 Jul 2010 23:15:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=wCnBXJvIo2ZjhN77FzkV/qopgJ/f8ta2sasFb41FdwE=;
        b=El1HuKzU6Q5z3kunRIwE0w441GwoUcGt2BHxIUxLdk6kjZfNVWoZU4NnVyLCKpS2Lj
         2gshp0/COwnIpAjTRnZUt7CizPTb2w7nR+76MpvnfGQZH+Ik/siSKhSjnLwSl4ReMEhO
         YoIe7vhRR8cDJwoEtOlw4VdbjBVS5LxUea9Io=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:content-transfer-encoding;
        b=m/fVPi53GMQt4V1MrVbU2RH3bj1xA1lg5SKON9yZEi6T1RcuRoFO13nmLy5aFwL3sf
         29WygQrMS7q9S1EHVoNIZxZ2ypzcD7vZ0eubdVkuHf1Q9hBCzXeu38gwgmzF7R9k0y88
         gv79VxXfouV+5APqzIP6UjjqdMhHL1dMGNsvo=
MIME-Version: 1.0
Received: by 10.101.154.19 with SMTP id g19mr3498103ano.235.1278483343836; 
	Tue, 06 Jul 2010 23:15:43 -0700 (PDT)
Received: by 10.151.100.7 with HTTP; Tue, 6 Jul 2010 23:15:43 -0700 (PDT)
In-Reply-To: <AANLkTinydBaLdESLVki6o3tsvQrl-dVQFm_LTJkRFpdA@mail.gmail.com>
References: <AANLkTinydBaLdESLVki6o3tsvQrl-dVQFm_LTJkRFpdA@mail.gmail.com>
Date: Wed, 7 Jul 2010 14:15:43 +0800
Message-ID: <AANLkTikB-8nmplfCwb81xto0B3XiOZQ0565-mS2Xwou8@mail.gmail.com>
Subject: Re: How to manage resource out of index?
From: Rebecca Watson <bec.watson@gmail.com>
To: java-user@lucene.apache.org
Cc: solr-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

hi li,

i looked at doing something similar - where we only index the text
but retrieve search results / highlight from files -- we ended up giving
up because of the amount of customisation required in solr -- mainly
because we wanted the distributed search functionality in solr which
meant making
sure the original file ended up the same filing system i.e. machine too!).

we ended up just storing the main text field too even though there was a
bit of text -- in the end solr/lucene can handle the index size fine and
disk space is cheaper than man-hours to customise solr/lucene to work
in this way!

that was our conclusion anyway and it works fine -- we also have
separate index / search server(s) so we don't care about merge time
either -- and as i said above - we use the distributed search so don't tend
to need to merge very large indexes anyway.
when your system grows / you go into production you'll probably split
the indexes too to use solr's distributed search func. for the sake of
query speed).

hope that helps,

bec :)

On 7 July 2010 14:07, Li Li <fancyerii@gmail.com> wrote:
> I used to store full text into lucene index. But I found it's very
> slow when merging index because when merging 2 segments it copy the
> fdt files into a new one. So I want to only index full text. But When
> searching I need the full text for applications such as hightlight and
> view full text. I can store the full text by <url,full text> pair in
> database and load it to memory. And When I search in lucene(or solr),
> I retrive url of doc first, then use url to get full text. But when
> they are stored separately, it is hard to managed. They may be not
> consistent with each other. Does lucene or solr provied any method to
> ease this problem? Or any one =C2=A0has some experience of this problem?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 06:30:41 2010
Return-Path: <java-user-return-46651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77052 invoked from network); 7 Jul 2010 06:30:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 06:30:41 -0000
Received: (qmail 37632 invoked by uid 500); 7 Jul 2010 06:30:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37355 invoked by uid 500); 7 Jul 2010 06:30:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37335 invoked by uid 99); 7 Jul 2010 06:30:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 06:30:34 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 06:30:27 +0000
Received: by pwj2 with SMTP id 2so1763920pwj.35
        for <java-user@lucene.apache.org>; Tue, 06 Jul 2010 23:30:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=1RkSuOgkEmCgwnBGnJHbOxCJOCgOH0/1eeOGdF+/lCU=;
        b=v2c5x6ZCG0pBOGqKdg9iO/Fbkpsnx8XOHGXRtiEy0OhgXTvUS8pWiwwk/Tlw5Ju4x8
         geX9gBV4w3AZVxMpawG+54f+GFDDjrVRDQ53cyUBBqxd65oA8JHwBBCJvX+E0loQ76p0
         mvgXlgB+ZU5I6jzOy0BoVmnYgMi3X2dzIxD0Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=VpXqpzsXImY3jzre6s2nOZyZuhlmvhNovaNyErOHxuiAvoQ223+zIwquIWsKXQLLML
         wogDTFV4qdXZ58yoCHZdcLY7bH5NzPOXB8gLu5Y+fZGrQkkIYK1R10yUtruVoo+cBcnB
         FrFrmkW92SL3kdOnAKcFnpJzrHzCE8oRCez+E=
MIME-Version: 1.0
Received: by 10.142.169.12 with SMTP id r12mr7143002wfe.287.1278484205489; 
	Tue, 06 Jul 2010 23:30:05 -0700 (PDT)
Received: by 10.142.217.2 with HTTP; Tue, 6 Jul 2010 23:30:05 -0700 (PDT)
In-Reply-To: <AANLkTikB-8nmplfCwb81xto0B3XiOZQ0565-mS2Xwou8@mail.gmail.com>
References: <AANLkTinydBaLdESLVki6o3tsvQrl-dVQFm_LTJkRFpdA@mail.gmail.com>
	<AANLkTikB-8nmplfCwb81xto0B3XiOZQ0565-mS2Xwou8@mail.gmail.com>
Date: Wed, 7 Jul 2010 14:30:05 +0800
Message-ID: <AANLkTilNkScGpHF3H4UwabwFRCDilkblRvmSgll9fbnn@mail.gmail.com>
Subject: Re: How to manage resource out of index?
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

thank you.

2010/7/7 Rebecca Watson <bec.watson@gmail.com>:
> hi li,
>
> i looked at doing something similar - where we only index the text
> but retrieve search results / highlight from files -- we ended up giving
> up because of the amount of customisation required in solr -- mainly
> because we wanted the distributed search functionality in solr which
> meant making
> sure the original file ended up the same filing system i.e. machine too!)=
.
>
> we ended up just storing the main text field too even though there was a
> bit of text -- in the end solr/lucene can handle the index size fine and
> disk space is cheaper than man-hours to customise solr/lucene to work
> in this way!
>
> that was our conclusion anyway and it works fine -- we also have
> separate index / search server(s) so we don't care about merge time
> either -- and as i said above - we use the distributed search so don't te=
nd
> to need to merge very large indexes anyway.
> when your system grows / you go into production you'll probably split
> the indexes too to use solr's distributed search func. for the sake of
> query speed).
>
> hope that helps,
>
> bec :)
>
> On 7 July 2010 14:07, Li Li <fancyerii@gmail.com> wrote:
>> I used to store full text into lucene index. But I found it's very
>> slow when merging index because when merging 2 segments it copy the
>> fdt files into a new one. So I want to only index full text. But When
>> searching I need the full text for applications such as hightlight and
>> view full text. I can store the full text by <url,full text> pair in
>> database and load it to memory. And When I search in lucene(or solr),
>> I retrive url of doc first, then use url to get full text. But when
>> they are stored separately, it is hard to managed. They may be not
>> consistent with each other. Does lucene or solr provied any method to
>> ease this problem? Or any one =A0has some experience of this problem?
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 08:36:41 2010
Return-Path: <java-user-return-46652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6822 invoked from network); 7 Jul 2010 08:36:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 08:36:41 -0000
Received: (qmail 38596 invoked by uid 500); 7 Jul 2010 08:36:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38232 invoked by uid 500); 7 Jul 2010 08:36:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38220 invoked by uid 99); 7 Jul 2010 08:36:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 08:36:34 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 08:36:25 +0000
Received: by vws10 with SMTP id 10so730022vws.35
        for <java-user@lucene.apache.org>; Wed, 07 Jul 2010 01:36:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=zNuzQ49p2lj/HIJiJoQBIqQkTreQM8EKbk6oNCBKLxo=;
        b=r3xEV3op//IM+I6H6wlVXPm5f/Xt6ekZEDLANu6kK3F+sFPA3RtX0dOAKh5+9bfumY
         HdISuqK2BS0d/AbRIs3oX/mcv9n/cnv5RPKVYXKdMDztnKYDHm2Y3EP1twBaXsR4PWC6
         KWZo1NRBrjm3Y6M3KXuJeVmFzQiwLxpOZPp1c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=w/g83OiPKlu+1aVJLWDJw21VekxBzz3CO99E4gj8DsRJXrBPHE4VpxtaSdpxsDnFHW
         C5s5gYpdZGkEfIgfFy+8L99HP3eRJEHrwFlDNS5fBttJaZW+kpZrS6RcJBMQ5CHaVX5K
         u2+HZwHcWazHGwyGFWJ4HrC2wPbi7ajQDJd0c=
MIME-Version: 1.0
Received: by 10.220.124.21 with SMTP id s21mr3249381vcr.85.1278491764185; Wed, 
	07 Jul 2010 01:36:04 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Wed, 7 Jul 2010 01:36:04 -0700 (PDT)
In-Reply-To: <AANLkTikkav66K49502U4iQYfgsRmmuRKAQVOHC8tYJdq@mail.gmail.com>
References: <AANLkTikYo4aJEDg2l-2o4Bh-uFb6WVP5z6LfWBzLiw11@mail.gmail.com>
	<9CABEBCD-664C-4110-97E6-B495D3FEA7F7@apache.org>
	<AANLkTikKp3Pi0zWcxvWznBSW-ukjAJRJdhoGp-JJdWYF@mail.gmail.com>
	<AANLkTikkav66K49502U4iQYfgsRmmuRKAQVOHC8tYJdq@mail.gmail.com>
Date: Wed, 7 Jul 2010 14:06:04 +0530
Message-ID: <AANLkTimA2VHlC51IUCDhF5Acihn-JJde5-c-5NdP3nBc@mail.gmail.com>
Subject: Re: Lucene Scoring
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502e23d73dc5c048ac80f58
X-Virus-Checked: Checked by ClamAV on apache.org

--00504502e23d73dc5c048ac80f58
Content-Type: text/plain; charset=ISO-8859-1

Dear Ian,

Thanks a lot for your reply. The way you proposed, working correctly and
solved half of my matter.
Once I run the program, system gave me the following output.
output-
**********************************
Searching for 'milk'

Number of hits: 1

0.13287117

0.13287117 = (MATCH) fieldWeight(contents:milk in 0), product of:

1.7320508 = tf(termFreq(contents:milk)=3)

0.30685282 = idf(docFreq=1, maxDocs=1)

0.25 = fieldNorm(field=contents, doc=0)

Hit: D:\JADE\work\MobilNet\Lucene291\filesToIndex\deron-foods.txt
***********************************************************************************
Here, I have no any problems of calculating values for tf, and idf. But I
have no idea of how to calculate fieldNorm. According to
http://lucene.apache.org/java/2_3_2/api/org/apache/lucene/search/Similarity.html#lengthNorm(java.lang.String,%20int)
I think norm(t,d) gives the value for fieldNorm and in my case, the system
returns the value lengthNorm(field) for norm(t,d),

1) Am I correct?
2) If so, coluld you pls. let me know the way (formula) of calculating
lengthNorm(field)? (I checked several documents and codes to understand
this. But was unable to find the mathematical formula behind this method).
3) If lengthNorm(field) is not the case behind fieldNorm, then how to
calculate fieldNorm?

Pls. help me to resolve this matter.

Manjula.


On Tue, Jul 6, 2010 at 12:47 PM, Ian Lea <ian.lea@gmail.com> wrote:

> You are calling the explain method incorrectly.  You need something like
>
>  System.out.println(indexSearcher.explain(query, 0));
>
>
> See the javadocs for details.
>
>
> --
> Ian.
>
>
> On Tue, Jul 6, 2010 at 7:39 AM, manjula wijewickrema
> <manjula53@gmail.com> wrote:
> > Dear Grant,
> >
> > Thanks a lot for your guidence. As you have mentioned, I tried to use
> > explain() method to get the explanations for relevant scoring. But, once
> I
> > call the explain() method, system indicated the following error.
> >
> > Error-
> > 'The method explain(Query,int) in the type Searcher is not applicable for
> > the arguments (String, int)'.
> >
> > In my code I call the explain() method as follows-
> > Searcher.explain("rice",0);
> >
> > Possibly the wrong with my way of passing parameters. In my case, I have
> > chosen "rice" as my query and indexed only one document.
> >
> > Could you pls. let me know what's wrong with this. I also included the
> code
> > with this.
> >
> > Thanx
> > Manjula
> >
> > code-
> > **
> >
> > *import* org.apache.lucene.search.Searcher;
> >
> > *public* *class* LuceneDemo {
> >
> > *public* *static* *final* String *FILES_TO_INDEX_DIRECTORY* =
> "filesToIndex"
> > ;
> >
> > *public* *static* *final* String *INDEX_DIRECTORY* = "indexDirectory";
> >
> > *public* *static* *final* String *FIELD_PATH* = "path";
> >
> > *public* *static* *final* String *FIELD_CONTENTS* = "contents";
> >
> > *public* *static* *void* main(String[] args) *throws* Exception {
> >
> > *createIndex*();
> >
> > *searchIndex*("rice");
> >
> >  }
> >
> > *public* *static* *void* createIndex() *throws* CorruptIndexException,
> > LockObtainFailedException, IOException {
> >
> >  SnowballAnalyzer analyzer = *new* SnowballAnalyzer( "English",
> > StopAnalyzer.ENGLISH_STOP_WORDS);
> >
> > *boolean* recreateIndexIfExists = *true*;
> >
> > IndexWriter indexWriter = *new* IndexWriter(*INDEX_DIRECTORY*, analyzer,
> > recreateIndexIfExists);
> >
> > File dir = *new* File(*FILES_TO_INDEX_DIRECTORY*);
> >
> > File[] files = dir.listFiles();
> >
> > *for* (File file : files) {
> >
> > Document document = *new* Document();
> >
> > String path = file.getCanonicalPath();
> >
> > document.add(*new* Field(*FIELD_PATH*, path, Field.Store.*YES*,
> Field.Index.
> > UN_TOKENIZED,Field.TermVector.*YES*));
> >
> > Reader reader = *new* FileReader(file);
> >
> > document.add(*new* Field(*FIELD_CONTENTS*, reader));
> >
> > indexWriter.addDocument(document);
> >
> >  }
> >
> > indexWriter.optimize();
> >
> > indexWriter.close();
> >
> > }
> >
> > *public* *static* *void* searchIndex(String searchString)
> > *throws*IOException, ParseException {
> >
> > System.*out*.println("Searching for '" + searchString + "'");
> >
> > Directory directory = FSDirectory.getDirectory(*INDEX_DIRECTORY*);
> >
> > IndexReader indexReader = IndexReader.open(directory);
> >
> > IndexSearcher indexSearcher = *new* IndexSearcher(indexReader);
> >
> >  SnowballAnalyzer analyzer = *new* SnowballAnalyzer( "English",
> > StopAnalyzer.ENGLISH_STOP_WORDS);
> >
> > QueryParser queryParser = *new* QueryParser(*FIELD_CONTENTS*, analyzer);
> >
> > Query query = queryParser.parse(searchString);
> >
> > Hits hits = indexSearcher.search(query);
> >
> > System.*out*.println("Number of hits: " + hits.length());
> >
> > TopDocs results = indexSearcher.search(query,10);
> >
> > ScoreDoc[] hits1 = results.scoreDocs;
> >
> > *for* (ScoreDoc hit : hits1) {
> >
> > Document doc = indexSearcher.doc(hit.doc);
> >
> > //System.out.printf("%5.3f %s\n",hit.score,doc.get(FIELD_CONTENTS));
> >
> > System.*out*.println(hit.score);
> >
> > Searcher.explain("rice",0);
> >
> > }
> >
> >  Iterator<Hit> it = hits.iterator();
> >
> > *while* (it.hasNext()) {
> >
> > Hit hit = it.next();
> >
> > Document document = hit.getDocument();
> >
> > String path = document.get(*FIELD_PATH*);
> >
> > System.*out*.println("Hit: " + path);
> >
> > }
> >
> > }
> >
> > }
> >
> >
> > On Mon, Jul 5, 2010 at 7:46 PM, Grant Ingersoll <gsingers@apache.org>
> wrote:
> >
> >>
> >> On Jul 5, 2010, at 5:02 AM, manjula wijewickrema wrote:
> >>
> >> > Hi,
> >> >
> >> > In my application, I input only single term query (at one time) and
> get
> >> back
> >> > the corresponding scorings for those queries. But I am little
> struggling
> >> of
> >> > understanding Lucene scoring. I have reffered
> >> >
> >>
> http://lucene.apache.org/java/2_4_0/api/org/apache/lucene/search/Similarity.html
> >> > and
> >> > some other pages to resolve my matters. But some are still remain.
> >> >
> >> > 1) Why it has taken the squareroot of frequency as the tf value and
> >> square
> >> > of the idf vale in score function?
> >>
> >> Somewhat arbitrary, I suppose, but I think someone way back did some
> tests
> >> and decided it performed "best" in general.  More importantly, the point
> of
> >> the Similarity class is you can override these if you desire.
> >>
> >> >
> >> > 2) If I enter single term query, then what will return bythe
> coord(q,d)?
> >> > Since there are always one term in the query, I think always it should
> be
> >> 1!
> >> > Am I correct?
> >>
> >> Should be.  You can run the explain() method to confirm.
> >>
> >> >
> >> > 3) I am also struggling understanding sumOfSquaredWeights (in
> >> queryNorm(q)).
> >> > As I can understand, this value depends on the nature of the query we
> >> input
> >> > and depends on that, it uses different methods such as TermQuery,
> >> > MultiTermQuery, BooleanQuery, WildcardQuery, PhraseQuery, PrefixQuery,
> >> etc.
> >> > But if I always use single term query, then what will be the way
> selected
> >> by
> >> > the system from above?
> >>
> >> The queryNorm is an attempt at making scores comparable across queries.
> >>  Again, I'd try the explain() method to see the practical aspects of how
> it
> >> effects score.
> >>
> >> See http://lucene.apache.org/java/2_4_0/scoring.html for more info on
> >> scoring.
> >>
> >> -Grant
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502e23d73dc5c048ac80f58--

From java-user-return-46653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 12:51:30 2010
Return-Path: <java-user-return-46653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76005 invoked from network); 7 Jul 2010 12:51:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 12:51:30 -0000
Received: (qmail 40114 invoked by uid 500); 7 Jul 2010 12:51:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39558 invoked by uid 500); 7 Jul 2010 12:51:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39550 invoked by uid 99); 7 Jul 2010 12:51:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 12:51:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of id.navs@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 12:51:15 +0000
Received: by qyk32 with SMTP id 32so3062045qyk.14
        for <java-user@lucene.apache.org>; Wed, 07 Jul 2010 05:49:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=zPIFwXavaZHQCk2BGRWvJTyTUuLH1N3oH0GYgg2/tWI=;
        b=NpDLudX1rTqlAffPbxOtzj7NRi8A9smkNbQqbPcbuXrTug7o52aWz3QvTlVcGA54KN
         86bT08epa+BZ2NNOpSFSxguQHxYibow8oGWG9M/LAsAEg9AnKNcIH21YESahCc6p6gXJ
         uYfCGlDGoqAh9CtbYt1DMfXfqKcbsOuHVKQ5M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=QDeViPuwnVAiZtM/OsLw2TRBuwm/IMggAHEVqqguBjlzwMFNejMhMj18DruumzXXiO
         ah6oaW12GTXxcyH5BIgidXl3UtdejxW3K4zcxUUTtcsGZMRSM4itVOvEVTkkhTEYqpIp
         nx1W4h5xSvNWU+Y2UjkUjlVQEjqguv6iiywmg=
MIME-Version: 1.0
Received: by 10.224.59.229 with SMTP id m37mr3473244qah.361.1278506994305; 
	Wed, 07 Jul 2010 05:49:54 -0700 (PDT)
Received: by 10.229.75.5 with HTTP; Wed, 7 Jul 2010 05:49:54 -0700 (PDT)
In-Reply-To: <4C2AEC65.1070904@getopt.org>
References: <AANLkTik_YreUcWYtk8R_MdLFCaSkCTCtOzptDu4H86xY@mail.gmail.com>
	<4C2AEC65.1070904@getopt.org>
Date: Wed, 7 Jul 2010 18:19:54 +0530
Message-ID: <AANLkTikjnEA_DJE8Udg1ZhHkgZOAhIKgk04QPXGjuQiu@mail.gmail.com>
Subject: Re: Adding a new field to existing Index
From: Naveen Kumar <id.navs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f9b08993d0ea3048acb9b42
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f9b08993d0ea3048acb9b42
Content-Type: text/plain; charset=ISO-8859-1

Hi Andrzej Bialecki

When you suggested -
    "There are some other low-level ways to do this, but the easiest is to
      use a FilterIndexReader, especially since you just want to add a
stored
      field - implement a subclass of FilterIndexReader that adds a new
field
      in getFieldNames() and document(int). Then use
      IndexWriter.addIndexes(IndexReader[]) to create the output index."
I believe you assumed that all the existing fields are stored. I have a few
fields which are only indexed, not stored. Is there a way to add a new
Field(stored, not indexed) to document in such an index, without reindexing
the whole index.
Any suggestions will be very helpful!

Thank you
Naveen Kumar

On Wed, Jun 30, 2010 at 12:34 PM, Andrzej Bialecki <ab@getopt.org> wrote:

> On 2010-06-29 13:40, Naveen Kumar wrote:
> > Hey,
> >
> > I need to add a new field (a stored , not indexed field) for all
> > documents present in an existing large index. Reindexing the whole
> > index will be very costly. Is there a way to do this or any work
> > around?
>
> There are some other low-level ways to do this, but the easiest is to
> use a FilterIndexReader, especially since you just want to add a stored
> field - implement a subclass of FilterIndexReader that adds a new field
> in getFieldNames() and document(int). Then use
> IndexWriter.addIndexes(IndexReader[]) to create the output index.
>
> >
> > I would also like to know, if data or term vector, of a field
> > indexed without storing, can somehow be retrieved. This would enable
> > a work around solution to my problem.
>
> Not really, and the re-construction is very costly. Indexing is a lossy
> process, so not all content can be recovered. See the "Reconstruct &
> Edit" functionality in Luke (http://www.getopt.org/luke).
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00c09f9b08993d0ea3048acb9b42--

From java-user-return-46654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 12:58:01 2010
Return-Path: <java-user-return-46654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77311 invoked from network); 7 Jul 2010 12:58:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 12:58:00 -0000
Received: (qmail 54223 invoked by uid 500); 7 Jul 2010 12:57:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53880 invoked by uid 500); 7 Jul 2010 12:57:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53872 invoked by uid 99); 7 Jul 2010 12:57:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 12:57:55 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [64.202.165.39] (HELO smtpauth14.prod.mesa1.secureserver.net) (64.202.165.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 07 Jul 2010 12:57:48 +0000
Received: (qmail 19965 invoked from network); 7 Jul 2010 12:57:26 -0000
Received: from unknown (81.219.54.251)
  by smtpauth14.prod.mesa1.secureserver.net (64.202.165.39) with ESMTP; 07 Jul 2010 12:57:26 -0000
Message-ID: <4C3479AD.4060401@getopt.org>
Date: Wed, 07 Jul 2010 14:57:17 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.4) Gecko/20100608 Thunderbird/3.1
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Adding a new field to existing Index
References: <AANLkTik_YreUcWYtk8R_MdLFCaSkCTCtOzptDu4H86xY@mail.gmail.com>	<4C2AEC65.1070904@getopt.org> <AANLkTikjnEA_DJE8Udg1ZhHkgZOAhIKgk04QPXGjuQiu@mail.gmail.com>
In-Reply-To: <AANLkTikjnEA_DJE8Udg1ZhHkgZOAhIKgk04QPXGjuQiu@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 2010-07-07 14:49, Naveen Kumar wrote:
> Hi Andrzej Bialecki
>
> When you suggested -
>      "There are some other low-level ways to do this, but the easiest is to
>        use a FilterIndexReader, especially since you just want to add a
> stored
>        field - implement a subclass of FilterIndexReader that adds a new
> field
>        in getFieldNames() and document(int). Then use
>        IndexWriter.addIndexes(IndexReader[]) to create the output index."
> I believe you assumed that all the existing fields are stored. I have a few
> fields which are only indexed, not stored. Is there a way to add a new
> Field(stored, not indexed) to document in such an index, without reindexing
> the whole index.
> Any suggestions will be very helpful!

Unfortunately no - my previous advice still applies:

>>> I would also like to know, if data or term vector, of a field
>>> indexed without storing, can somehow be retrieved. This would enable
>>> a work around solution to my problem.
>>
>> Not really, and the re-construction is very costly. Indexing is a lossy
>> process, so not all content can be recovered. See the "Reconstruct&
>> Edit" functionality in Luke (http://www.getopt.org/luke).

At this point it will be less costly to reindex.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 13:09:25 2010
Return-Path: <java-user-return-46655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85004 invoked from network); 7 Jul 2010 13:09:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 13:09:23 -0000
Received: (qmail 76731 invoked by uid 500); 7 Jul 2010 13:09:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76420 invoked by uid 500); 7 Jul 2010 13:09:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76412 invoked by uid 99); 7 Jul 2010 13:09:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 13:09:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of id.navs@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 13:09:11 +0000
Received: by gwaa20 with SMTP id a20so884642gwa.35
        for <java-user@lucene.apache.org>; Wed, 07 Jul 2010 06:08:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Wgppeg2Lwl1+nQ2OxR1k6Q6wmTxVQKDJjvaqfmROgHw=;
        b=RnWmbn40+PN+FPXE0RRbkYTVHsCi+V7Kr5Ma1gmwatWFs++ETLQNbT0Qe/1mxv15Tk
         RY37RLGqq9qVHiv1NPNr8YWoNCNZL7k/fMIHZhIxgUvFHrKegdvoMvpJGH89XMsPw4nN
         H9otBcQCPw1FP2ydCFIqeWO0625/DnG9maZF4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Wr98reMxJH74WHHIo38b6lKuWL9j6gU7c6i2INH9WCBpIVeWMwi93E3cHAors5gf6P
         PRmit1LjAYpnQ2JQvG+YFSuFaSnypPakGZKu/58+ZNIg+cn9xTIPKgcisFHZswi4kwGg
         Y6St9KG9GM7Y28B+mNcMzkbw2gsJ67pIp/iIc=
MIME-Version: 1.0
Received: by 10.229.230.131 with SMTP id jm3mr3809396qcb.100.1278508125516; 
	Wed, 07 Jul 2010 06:08:45 -0700 (PDT)
Received: by 10.229.75.5 with HTTP; Wed, 7 Jul 2010 06:08:45 -0700 (PDT)
In-Reply-To: <4C3479AD.4060401@getopt.org>
References: <AANLkTik_YreUcWYtk8R_MdLFCaSkCTCtOzptDu4H86xY@mail.gmail.com>
	<4C2AEC65.1070904@getopt.org>
	<AANLkTikjnEA_DJE8Udg1ZhHkgZOAhIKgk04QPXGjuQiu@mail.gmail.com>
	<4C3479AD.4060401@getopt.org>
Date: Wed, 7 Jul 2010 18:38:45 +0530
Message-ID: <AANLkTilNAiV4FB9OBH3jY-zwIwQjYUiwbRM97VoKVrzg@mail.gmail.com>
Subject: Re: Adding a new field to existing Index
From: Naveen Kumar <id.navs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630ee0baa17d0048acbdec8
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630ee0baa17d0048acbdec8
Content-Type: text/plain; charset=ISO-8859-1

Thanks for the quick reply!
I will go ahead with reindexing of all the data.

On Wed, Jul 7, 2010 at 6:27 PM, Andrzej Bialecki <ab@getopt.org> wrote:

> On 2010-07-07 14:49, Naveen Kumar wrote:
>
>> Hi Andrzej Bialecki
>>
>> When you suggested -
>>     "There are some other low-level ways to do this, but the easiest is to
>>       use a FilterIndexReader, especially since you just want to add a
>> stored
>>       field - implement a subclass of FilterIndexReader that adds a new
>> field
>>       in getFieldNames() and document(int). Then use
>>       IndexWriter.addIndexes(IndexReader[]) to create the output index."
>> I believe you assumed that all the existing fields are stored. I have a
>> few
>> fields which are only indexed, not stored. Is there a way to add a new
>> Field(stored, not indexed) to document in such an index, without
>> reindexing
>> the whole index.
>> Any suggestions will be very helpful!
>>
>
> Unfortunately no - my previous advice still applies:
>
>
>  I would also like to know, if data or term vector, of a field
>>>> indexed without storing, can somehow be retrieved. This would enable
>>>> a work around solution to my problem.
>>>>
>>>
>>> Not really, and the re-construction is very costly. Indexing is a lossy
>>> process, so not all content can be recovered. See the "Reconstruct&
>>> Edit" functionality in Luke (http://www.getopt.org/luke).
>>>
>>
> At this point it will be less costly to reindex.
>
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web
> ___|||__||  \|  ||  |  Embedded Unix, System Integration
> http://www.sigram.com  Contact: info at sigram dot com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163630ee0baa17d0048acbdec8--

From java-user-return-46656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 16:30:02 2010
Return-Path: <java-user-return-46656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50807 invoked from network); 7 Jul 2010 16:30:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 16:30:02 -0000
Received: (qmail 29734 invoked by uid 500); 7 Jul 2010 16:29:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29401 invoked by uid 500); 7 Jul 2010 16:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29384 invoked by uid 99); 7 Jul 2010 16:29:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 16:29:58 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 16:29:51 +0000
Received: by wwb24 with SMTP id 24so3217791wwb.5
        for <java-user@lucene.apache.org>; Wed, 07 Jul 2010 09:28:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=NHo4Rj5rzgZsGyW0oN8uKPS2oMCrdzcex0mI6sjBxhs=;
        b=s8s1LxWgdfm+DLII6szmmWx/x04vnjgik5/N5nea1jXwu+Sm0OYvzXvhldp3uLwNTM
         BMuNFfoso1H2V6l6LH0H206CpzeKN2YO9fWis9Wmx2mQhv7DMdl8sco3dTukenGLXiIA
         0SfdVjW65zIo4Uyd5lxeztwHJucJJtwpav2+M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WxZc5h+UCLPN2pB20ksu6pp8ZkOmXVEEw1gFOL+P7AfH5qGVllnGzjwOhpMr5xOm6M
         0bFXdr1kQLr3ai1fX2N1jjtdRT+OvoxhblcpYvaYtI8vOUPinzy2RbgrPFHmd788N1o1
         ZVOkcCMyfbeRLVS3ZgOjSTOe5nT0++f6r1VNs=
MIME-Version: 1.0
Received: by 10.227.40.220 with SMTP id l28mr5252916wbe.84.1278520110172; Wed, 
	07 Jul 2010 09:28:30 -0700 (PDT)
Received: by 10.216.59.14 with HTTP; Wed, 7 Jul 2010 09:28:30 -0700 (PDT)
In-Reply-To: <AANLkTinnbd9dVC9xBCvsPkZtkR0cIBGiIuwMiXPPCcCz@mail.gmail.com>
References: <AANLkTinnbd9dVC9xBCvsPkZtkR0cIBGiIuwMiXPPCcCz@mail.gmail.com>
Date: Wed, 7 Jul 2010 19:28:30 +0300
Message-ID: <AANLkTinML3IsEnFPMiKQvUF85e8ltDY_3Fk3TqMBeK_Z@mail.gmail.com>
Subject: Re: Issue Lucene-2421 and NativeFSLockFactory.clearLock behaviour?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00221597511e017922048acea9f4
X-Virus-Checked: Checked by ClamAV on apache.org

--00221597511e017922048acea9f4
Content-Type: text/plain; charset=ISO-8859-1

Yes, looks like clearLock should be changed to not throw the exception, but
rather do a best effort - call delete() but don't respond to its return
value. I'll change that on 3x, I'm not sure if a backport to 3.0.x is needed
(doesn't seem to justify a 3.0.3 ...)

Shai

On Wed, Jul 7, 2010 at 8:59 AM, Ted McFadden <ted@leximancer.com> wrote:

> Hi,
>
> For Lucene 3.0.2, issue LUCENE-2421 (
> https://issues.apache.org/jira/browse/LUCENE-2421) changed
> NativeFSLock.release to not raise an exception if a write.lock file could
> not be deleted since the presence of the file itself does not mean a lock
> is
> held.
>
> Should NativeFSLockFactory.clearLock also be changed to not raise an
> exception if it can't delete the write.lock file? The comments in the
> clearLock method seem to suggest the method is really no longer necessary,
> but IndexWriter.init can still call it.
>
> If the write.lock is held from deletion by antivirus or something as
> described in LUCENE-2421, IndexWriter construction looks like it can fail
> unnecessarily for the same reason:
>
> IndexWriter
>   IndexWriter.init
>      Directory.clearLock
>         NativeFSLockFactory.clearLock:
>            ...
>            if (lockFile.exists() && !lockFile.delete()){
>               throw new IOException("Cannot delete " + lockFile);
>            }
>
>
> We have seen this exception path once in the wild (on a Windows box).
>
> I can work around this with a custom LockFactory but thought I should check
> if I'm reading the code right.
>
> Cheers,
>
> Ted
>
>
> --
> Ted McFadden
> Chief Engineer
>
> Leximancer Pty Ltd
> Queensland, Australia
> http://www.leximancer.com
>

--00221597511e017922048acea9f4--

From java-user-return-46657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 07 16:43:21 2010
Return-Path: <java-user-return-46657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53902 invoked from network); 7 Jul 2010 16:43:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 7 Jul 2010 16:43:21 -0000
Received: (qmail 57882 invoked by uid 500); 7 Jul 2010 16:43:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57828 invoked by uid 500); 7 Jul 2010 16:43:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57820 invoked by uid 99); 7 Jul 2010 16:43:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 16:43:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Jul 2010 16:43:11 +0000
Received: by wyb29 with SMTP id 29so5621445wyb.35
        for <java-user@lucene.apache.org>; Wed, 07 Jul 2010 09:41:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=/+f/6jFPK3rmtheDgiWWZMwV+uhD/6JI48HwatjhFvg=;
        b=T7JiUJ4dyJJiC9hm9YthuaBAseoAkLDApZ66ff75R/zuauD4FzsnWNs7QRJ1pnSKmi
         9XbkA0GiT5iYQWzWYqTxGPtlm5HZ3oVw7+pMQk58/6JM1DFMzQV4/VWnmZEOpIp7xUjg
         Luhvp9xNdM7wJeeFa4RIWiFQ2ezu0WwA8ZY6I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=d0WhYvGO/12f+RSHsbd4SZT/vjtz02ztfmkzf061eai+CD0YcOIW2Wa04HeOQbJ8Yk
         6wLDW8Gl+H9eD8BMNFTVNlKV5zZKAOWj0yPSHwPv2ZUssZ2OJdIG1zIiI/BWTu9cd/FQ
         z1U3lR/jZO2Go2BePO+7HSfYJCjamscRN1CX8=
MIME-Version: 1.0
Received: by 10.216.178.149 with SMTP id f21mr1164459wem.40.1278520911162; 
	Wed, 07 Jul 2010 09:41:51 -0700 (PDT)
Received: by 10.216.59.14 with HTTP; Wed, 7 Jul 2010 09:41:51 -0700 (PDT)
In-Reply-To: <AANLkTinML3IsEnFPMiKQvUF85e8ltDY_3Fk3TqMBeK_Z@mail.gmail.com>
References: <AANLkTinnbd9dVC9xBCvsPkZtkR0cIBGiIuwMiXPPCcCz@mail.gmail.com>
	<AANLkTinML3IsEnFPMiKQvUF85e8ltDY_3Fk3TqMBeK_Z@mail.gmail.com>
Date: Wed, 7 Jul 2010 19:41:51 +0300
Message-ID: <AANLkTincDRsI_hxhMlgeFGSo7mgpKTF2kK9vFyBdv5fy@mail.gmail.com>
Subject: Re: Issue Lucene-2421 and NativeFSLockFactory.clearLock behaviour?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6570c26bf6cd0048aced865
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6570c26bf6cd0048aced865
Content-Type: text/plain; charset=ISO-8859-1

Double-checking the code, this isn't that simple :). Someone can call
clearLock while the lock is held (for some unknown reason), in which case we
do want to signal failure. The clearLock jdoc specifies that it forcefully
unlocks and removes the lock ...

Currently, the method does not unlock anything - just attempts to remove the
lock. If the lock is still held, it will fail w/ the exception ... so there
are two cases:
1) You call clearLock w/o calling IndexWriter.unlock() first, and the lock
is held by another process --> here you wouldn't want to method to silently
fail, because an attempt to lock the Directory would fail, which will be
confusing.
2) The lock is not used, either 'cause you call IW.unlock(), however there
is an external process that holds the lock, preventing its delete(). Here
you wouldn't care if the method silently fails ...

I guess what we should do is try to forcefully unlock it first, and if that
succeeds then delete the lock file, ignoring the returned output. Or change
the javadocs.

I'll check it

Shai

On Wed, Jul 7, 2010 at 7:28 PM, Shai Erera <serera@gmail.com> wrote:

> Yes, looks like clearLock should be changed to not throw the exception, but
> rather do a best effort - call delete() but don't respond to its return
> value. I'll change that on 3x, I'm not sure if a backport to 3.0.x is needed
> (doesn't seem to justify a 3.0.3 ...)
>
> Shai
>
>
> On Wed, Jul 7, 2010 at 8:59 AM, Ted McFadden <ted@leximancer.com> wrote:
>
>> Hi,
>>
>> For Lucene 3.0.2, issue LUCENE-2421 (
>> https://issues.apache.org/jira/browse/LUCENE-2421) changed
>> NativeFSLock.release to not raise an exception if a write.lock file could
>> not be deleted since the presence of the file itself does not mean a lock
>> is
>> held.
>>
>> Should NativeFSLockFactory.clearLock also be changed to not raise an
>> exception if it can't delete the write.lock file? The comments in the
>> clearLock method seem to suggest the method is really no longer necessary,
>> but IndexWriter.init can still call it.
>>
>> If the write.lock is held from deletion by antivirus or something as
>> described in LUCENE-2421, IndexWriter construction looks like it can fail
>> unnecessarily for the same reason:
>>
>> IndexWriter
>>   IndexWriter.init
>>      Directory.clearLock
>>         NativeFSLockFactory.clearLock:
>>            ...
>>            if (lockFile.exists() && !lockFile.delete()){
>>               throw new IOException("Cannot delete " + lockFile);
>>            }
>>
>>
>> We have seen this exception path once in the wild (on a Windows box).
>>
>> I can work around this with a custom LockFactory but thought I should
>> check
>> if I'm reading the code right.
>>
>> Cheers,
>>
>> Ted
>>
>>
>> --
>> Ted McFadden
>> Chief Engineer
>>
>> Leximancer Pty Ltd
>> Queensland, Australia
>> http://www.leximancer.com
>>
>
>

--0016e6570c26bf6cd0048aced865--

From java-user-return-46658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 08 03:45:21 2010
Return-Path: <java-user-return-46658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60312 invoked from network); 8 Jul 2010 03:45:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Jul 2010 03:45:20 -0000
Received: (qmail 67174 invoked by uid 500); 8 Jul 2010 03:45:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66754 invoked by uid 500); 8 Jul 2010 03:45:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66746 invoked by uid 99); 8 Jul 2010 03:45:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 03:45:14 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 03:45:06 +0000
Received: by vws10 with SMTP id 10so807994vws.35
        for <java-user@lucene.apache.org>; Wed, 07 Jul 2010 20:43:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=RDqFjgKSGOZtWRZvjAfuSydG8HHH3F6NCriFZ5PXGkM=;
        b=coF3IFqgyDHzsX9YCEp7RhUKw/gAxOHZ6/uhab1fOS8XSyFI2WlxSfPmDOkmAsxqvr
         82iaw8XnRHD/FLZBI7es8ejKtHJJkCOf/bqk25OMVfGS5LitS/0SDldEkOylUNClugH0
         wRptgr4TowoAMLMyhEdboIrHv3UmCS2ew+ZNI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=WZwtlgfU672d5id3/eo9VXF9dg74l8a3X6kFxo9xAm3ImGcj+cxVp9UPuIH+bxfsTS
         0FZQTwusnSTUQ1ukC958uONkMA+rHrs0WvE7rHGNkSZ9Ak+h+zPtX388ZWpXhy5Ncc90
         yALW8MQ19KKil6K+JegRDLBXS1kAAszWRa72M=
MIME-Version: 1.0
Received: by 10.220.88.84 with SMTP id z20mr3875099vcl.232.1278560625467; Wed, 
	07 Jul 2010 20:43:45 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Wed, 7 Jul 2010 20:43:45 -0700 (PDT)
Date: Thu, 8 Jul 2010 09:13:45 +0530
Message-ID: <AANLkTin3uDNGvlEzSr_53i3HXROyCeb8WhZBo3QfpVnK@mail.gmail.com>
Subject: Why not normalization?
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6441efee7a28e048ad81707
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6441efee7a28e048ad81707
Content-Type: text/plain; charset=ISO-8859-1

Hi,

In my application, I input only one index file and enter only single term
query to check the lucene score. I used explain method to see the way of
obtaining results and system gave me the result as product of tf, idf,
fieldNorm.

1) Although Lucene uses tf to calculate scoring it seems to me that term
frequency has not been normalized. Even if I index several documents, it
does not normalize tf value. Therefore, since the total number of words
in index documents are varied, can't there be a fault in Lucene's scoring?

2) What is the formula to calculate this fieldNorm value?

If somebody can pls. help me.

Thnks in advance
Manjula.

--0016e6441efee7a28e048ad81707--

From java-user-return-46659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 08 04:05:02 2010
Return-Path: <java-user-return-46659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62775 invoked from network); 8 Jul 2010 04:05:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Jul 2010 04:05:01 -0000
Received: (qmail 79023 invoked by uid 500); 8 Jul 2010 04:05:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78638 invoked by uid 500); 8 Jul 2010 04:04:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78625 invoked by uid 99); 8 Jul 2010 04:04:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 04:04:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bec.watson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 04:04:49 +0000
Received: by gwj17 with SMTP id 17so195288gwj.35
        for <java-user@lucene.apache.org>; Wed, 07 Jul 2010 21:04:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=pxZU4BhaQA5JRayI+20E3MyCuyTddGE/j+mVMqUDwNk=;
        b=XZHs8VJKOt6XYALunceLaqh+9sOKDZvNZ3PNm1zxdIuggfIsCsF13XRo4Lmj7pmwag
         fg6+mWzdO04lUZ4h+mP9ki5/zKS9qOOiIBGmJ7U+Sw7j+Kh40F+GHYlEjHTT9aGEFA9R
         miNR0ww3j6bBX5RnenwBNKdEcJX4YFkBdzJcA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=OK9J1qT2C4QjyofXz6btD8DRG2op/ehxEVNzOnj7wq+r3qelitY+HHNY+tRt5g1qpE
         wWgz8IYWXuED24SGftH76pSoh7aB/V8Smza/tClgSd1OsSsty+tRC9VjVU+8+a6rgItl
         2IdCwOUdMrIN/AU/nPLpd3T4nXYJz4osyCtDw=
MIME-Version: 1.0
Received: by 10.90.35.8 with SMTP id i8mr197751agi.169.1278561868033; Wed, 07 
	Jul 2010 21:04:28 -0700 (PDT)
Received: by 10.151.99.20 with HTTP; Wed, 7 Jul 2010 21:04:27 -0700 (PDT)
In-Reply-To: <AANLkTin3uDNGvlEzSr_53i3HXROyCeb8WhZBo3QfpVnK@mail.gmail.com>
References: <AANLkTin3uDNGvlEzSr_53i3HXROyCeb8WhZBo3QfpVnK@mail.gmail.com>
Date: Thu, 8 Jul 2010 12:04:27 +0800
Message-ID: <AANLkTimD4pUFeTcyNcEsNV8c5f7b0wex7N49-8qRllFZ@mail.gmail.com>
Subject: Re: Why not normalization?
From: Rebecca Watson <bec.watson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

hi,

> 1) Although Lucene uses tf to calculate scoring it seems to me that term
> frequency has not been normalized. Even if I index several documents, it
> does not normalize tf value. Therefore, since the total number of words
> in index documents are varied, can't there be a fault in Lucene's scoring?

tf = term frequency i.e. the number of times the term appears in the document,
while idf is inverse document frequency - is a measure of how rare a term is,
i.e. related to how many documents the term appears in.

if term1 occurs more frequently in a document i.e. tf is higher, you
want to weight
the document higher when you search for term1

but if term1 is a very frequent term, ie. in lots of documents, then
its probably not
as important to an overall search (where we have term1, term2 etc) so you want
to downweight it (idf comes in)

then the normalisations like length normalisation (allow for 'fair' scoring
across varied field length) come in too.

the tf-idf scoring formula used by lucene is a  scoring method that's
been around
a long long time... there are competing scoring metrics but that's an IR thing
and not an argument you want to start on the lucene lists! :)

these are IR ('information retrieval') concepts and you might want to start by
going to through the tf-idf scoring / some explanations for this kind
of scoring.

http://en.wikipedia.org/wiki/Tf%E2%80%93idf
http://wiki.apache.org/lucene-java/InformationRetrieval


> 2) What is the formula to calculate this fieldNorm value?

in terms of how lucene implements its tf-idf scoring - you can see here:
http://lucene.apache.org/java/3_0_2/scoring.html

also, the lucene in action book is a really good book if you are starting out
with lucene (and will save you a lot of grief with understanding
lucene / setting
up your application!), it covers all the basics and then moves on to more
advanced stuff and has lots of code examples too:
http://www.manning.com/hatcher2/

hope that helps,

bec :)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 08 08:47:53 2010
Return-Path: <java-user-return-46660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29237 invoked from network); 8 Jul 2010 08:47:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Jul 2010 08:47:52 -0000
Received: (qmail 88265 invoked by uid 500); 8 Jul 2010 08:47:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87596 invoked by uid 500); 8 Jul 2010 08:47:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87581 invoked by uid 99); 8 Jul 2010 08:47:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 08:47:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [131.130.33.132] (HELO bach.mminf.univie.ac.at) (131.130.33.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 08:47:35 +0000
Received: from [131.130.33.75] (calixto.mminf.univie.ac.at [131.130.33.75])
	(authenticated bits=0)
	by bach.mminf.univie.ac.at (8.14.3/8.13.6) with ESMTP id o688lEDM030734
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 8 Jul 2010 08:47:14 GMT
From: Bernhard Haslhofer <bernhard.haslhofer@univie.ac.at>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Retrieve term payloads / custom PayloadFilter
Date: Thu, 8 Jul 2010 10:47:14 +0200
Message-Id: <0581FAE1-D01E-4D8B-A119-E426369D7066@univie.ac.at>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Scanned: clamav-milter 0.95 at bach
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

in my application I have documents that may contain terms and term =
translations in multiple languages. The language tag of each term is =
explicitly given and should be available in the index in order to enable =
queries for documents that contain a certain term (optionally in a given =
language).

I could split the documents in a set of sub-documents each containing =
terms in one specific language and a dedicated field indicating the =
language. But then I need multiple queries to retrieve stored term =
translations from the subdocuments.

The IMO better alternative is not to split the document and to assign =
the language tags as payloads to the terms. But then I need

(i) a search filter that eliminates docs based on a given language tag =
and

(ii) a way to access the term payloads from the documents returned by =
the searcher

For both I haven't found a solution yet. Can I write a custom =
PayloadFilter or is there already some implementation available? Is it =
possible to access the term payloads from the search results?

Thanks.
Bernhard=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 08 13:13:29 2010
Return-Path: <java-user-return-46661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12743 invoked from network); 8 Jul 2010 13:13:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Jul 2010 13:13:28 -0000
Received: (qmail 6881 invoked by uid 500); 8 Jul 2010 13:13:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6600 invoked by uid 500); 8 Jul 2010 13:13:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6592 invoked by uid 99); 8 Jul 2010 13:13:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 13:13:22 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 13:13:14 +0000
Received: by wwb24 with SMTP id 24so3871513wwb.5
        for <java-user@lucene.apache.org>; Thu, 08 Jul 2010 06:12:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=krE5UwTwO+VSW7Voo3I9UITj9ra88SQM1O/0NocPLz0=;
        b=Q36hF8Sr2G7Laa+K7HVTcfBjfNJnzql2dDzLH4721Yq6tQh4WaEpDPdRbZ8IzywlKx
         otCkwPn70CUIHMNnv9LWN7IcFDKUcUxVbV9nCN00kWdfWUoDHaJ+UehQz+N4EioJjyag
         VJQ455JLMlHDokeIp2NE9awwNEeFcOmYGrGe8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bUPG0H3Q8aVIZkdP8ojhenT58kO9rMc9Q++ABqEtqcLnuluKD6TRU1ZrJ3FTpNhmCS
         POK+PnK8ERCc8Vw+koxELnvrztPr3g0lkeBJiX21uCNs/n1ZnaBn1jGVF5rpAs80394s
         ctRYD+cZZeARsD3shkDnnfIAKoz8b6LYhiEYg=
MIME-Version: 1.0
Received: by 10.216.178.213 with SMTP id f63mr2575173wem.98.1278594773954; 
	Thu, 08 Jul 2010 06:12:53 -0700 (PDT)
Received: by 10.216.59.14 with HTTP; Thu, 8 Jul 2010 06:12:53 -0700 (PDT)
In-Reply-To: <AANLkTincDRsI_hxhMlgeFGSo7mgpKTF2kK9vFyBdv5fy@mail.gmail.com>
References: <AANLkTinnbd9dVC9xBCvsPkZtkR0cIBGiIuwMiXPPCcCz@mail.gmail.com>
	<AANLkTinML3IsEnFPMiKQvUF85e8ltDY_3Fk3TqMBeK_Z@mail.gmail.com>
	<AANLkTincDRsI_hxhMlgeFGSo7mgpKTF2kK9vFyBdv5fy@mail.gmail.com>
Date: Thu, 8 Jul 2010 16:12:53 +0300
Message-ID: <AANLkTikhZ8EHBGP40x1e1JqHXQfQdiVD0w7VGD8DAjH2@mail.gmail.com>
Subject: Re: Issue Lucene-2421 and NativeFSLockFactory.clearLock behaviour?
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6497e7c5032c2048ae00b3f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6497e7c5032c2048ae00b3f
Content-Type: text/plain; charset=ISO-8859-1

I committed a fix earlier today. clearLock will fail if the lock cannot be
released (meaning someone else holds it), however ignore the result of
file.delete().

Shai

On Wed, Jul 7, 2010 at 7:41 PM, Shai Erera <serera@gmail.com> wrote:

> Double-checking the code, this isn't that simple :). Someone can call
> clearLock while the lock is held (for some unknown reason), in which case we
> do want to signal failure. The clearLock jdoc specifies that it forcefully
> unlocks and removes the lock ...
>
> Currently, the method does not unlock anything - just attempts to remove
> the lock. If the lock is still held, it will fail w/ the exception ... so
> there are two cases:
> 1) You call clearLock w/o calling IndexWriter.unlock() first, and the lock
> is held by another process --> here you wouldn't want to method to silently
> fail, because an attempt to lock the Directory would fail, which will be
> confusing.
> 2) The lock is not used, either 'cause you call IW.unlock(), however there
> is an external process that holds the lock, preventing its delete(). Here
> you wouldn't care if the method silently fails ...
>
> I guess what we should do is try to forcefully unlock it first, and if that
> succeeds then delete the lock file, ignoring the returned output. Or change
> the javadocs.
>
> I'll check it
>
> Shai
>
>
> On Wed, Jul 7, 2010 at 7:28 PM, Shai Erera <serera@gmail.com> wrote:
>
>> Yes, looks like clearLock should be changed to not throw the exception,
>> but rather do a best effort - call delete() but don't respond to its return
>> value. I'll change that on 3x, I'm not sure if a backport to 3.0.x is needed
>> (doesn't seem to justify a 3.0.3 ...)
>>
>> Shai
>>
>>
>> On Wed, Jul 7, 2010 at 8:59 AM, Ted McFadden <ted@leximancer.com> wrote:
>>
>>> Hi,
>>>
>>> For Lucene 3.0.2, issue LUCENE-2421 (
>>> https://issues.apache.org/jira/browse/LUCENE-2421) changed
>>> NativeFSLock.release to not raise an exception if a write.lock file could
>>> not be deleted since the presence of the file itself does not mean a lock
>>> is
>>> held.
>>>
>>> Should NativeFSLockFactory.clearLock also be changed to not raise an
>>> exception if it can't delete the write.lock file? The comments in the
>>> clearLock method seem to suggest the method is really no longer
>>> necessary,
>>> but IndexWriter.init can still call it.
>>>
>>> If the write.lock is held from deletion by antivirus or something as
>>> described in LUCENE-2421, IndexWriter construction looks like it can fail
>>> unnecessarily for the same reason:
>>>
>>> IndexWriter
>>>   IndexWriter.init
>>>      Directory.clearLock
>>>         NativeFSLockFactory.clearLock:
>>>            ...
>>>            if (lockFile.exists() && !lockFile.delete()){
>>>               throw new IOException("Cannot delete " + lockFile);
>>>            }
>>>
>>>
>>> We have seen this exception path once in the wild (on a Windows box).
>>>
>>> I can work around this with a custom LockFactory but thought I should
>>> check
>>> if I'm reading the code right.
>>>
>>> Cheers,
>>>
>>> Ted
>>>
>>>
>>> --
>>> Ted McFadden
>>> Chief Engineer
>>>
>>> Leximancer Pty Ltd
>>> Queensland, Australia
>>> http://www.leximancer.com
>>>
>>
>>
>

--0016e6497e7c5032c2048ae00b3f--

From java-user-return-46662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 08 13:25:03 2010
Return-Path: <java-user-return-46662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14541 invoked from network); 8 Jul 2010 13:25:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Jul 2010 13:25:03 -0000
Received: (qmail 20570 invoked by uid 500); 8 Jul 2010 13:25:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20224 invoked by uid 500); 8 Jul 2010 13:24:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20216 invoked by uid 99); 8 Jul 2010 13:24:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 13:24:57 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 13:24:49 +0000
Received: by iwn37 with SMTP id 37so1285305iwn.35
        for <java-user@lucene.apache.org>; Thu, 08 Jul 2010 06:23:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.39.137 with SMTP id g9mr8366926ibe.133.1278595408013; Thu, 
	08 Jul 2010 06:23:28 -0700 (PDT)
Received: by 10.231.172.194 with HTTP; Thu, 8 Jul 2010 06:23:27 -0700 (PDT)
In-Reply-To: <AANLkTikhZ8EHBGP40x1e1JqHXQfQdiVD0w7VGD8DAjH2@mail.gmail.com>
References: <AANLkTinnbd9dVC9xBCvsPkZtkR0cIBGiIuwMiXPPCcCz@mail.gmail.com>
	<AANLkTinML3IsEnFPMiKQvUF85e8ltDY_3Fk3TqMBeK_Z@mail.gmail.com>
	<AANLkTincDRsI_hxhMlgeFGSo7mgpKTF2kK9vFyBdv5fy@mail.gmail.com>
	<AANLkTikhZ8EHBGP40x1e1JqHXQfQdiVD0w7VGD8DAjH2@mail.gmail.com>
Date: Thu, 8 Jul 2010 23:23:27 +1000
Message-ID: <AANLkTikEoTYg4AdYTzL9BNG0V6Itt1BFv5EOo3MRPGW8@mail.gmail.com>
Subject: Re: Issue Lucene-2421 and NativeFSLockFactory.clearLock behaviour?
From: Ted McFadden <ted@leximancer.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000325575ffa1b2b91048ae03159
X-Virus-Checked: Checked by ClamAV on apache.org

--000325575ffa1b2b91048ae03159
Content-Type: text/plain; charset=ISO-8859-1

Thanks for that.

Cheers,

Ted


On 8 July 2010 23:12, Shai Erera <serera@gmail.com> wrote:

> I committed a fix earlier today. clearLock will fail if the lock cannot be
> released (meaning someone else holds it), however ignore the result of
> file.delete().
>
> Shai
>
> On Wed, Jul 7, 2010 at 7:41 PM, Shai Erera <serera@gmail.com> wrote:
>
> > Double-checking the code, this isn't that simple :). Someone can call
> > clearLock while the lock is held (for some unknown reason), in which case
> we
> > do want to signal failure. The clearLock jdoc specifies that it
> forcefully
> > unlocks and removes the lock ...
> >
> > Currently, the method does not unlock anything - just attempts to remove
> > the lock. If the lock is still held, it will fail w/ the exception ... so
> > there are two cases:
> > 1) You call clearLock w/o calling IndexWriter.unlock() first, and the
> lock
> > is held by another process --> here you wouldn't want to method to
> silently
> > fail, because an attempt to lock the Directory would fail, which will be
> > confusing.
> > 2) The lock is not used, either 'cause you call IW.unlock(), however
> there
> > is an external process that holds the lock, preventing its delete(). Here
> > you wouldn't care if the method silently fails ...
> >
> > I guess what we should do is try to forcefully unlock it first, and if
> that
> > succeeds then delete the lock file, ignoring the returned output. Or
> change
> > the javadocs.
> >
> > I'll check it
> >
> > Shai
> >
> >
> > On Wed, Jul 7, 2010 at 7:28 PM, Shai Erera <serera@gmail.com> wrote:
> >
> >> Yes, looks like clearLock should be changed to not throw the exception,
> >> but rather do a best effort - call delete() but don't respond to its
> return
> >> value. I'll change that on 3x, I'm not sure if a backport to 3.0.x is
> needed
> >> (doesn't seem to justify a 3.0.3 ...)
> >>
> >> Shai
> >>
> >>
> >> On Wed, Jul 7, 2010 at 8:59 AM, Ted McFadden <ted@leximancer.com>
> wrote:
> >>
> >>> Hi,
> >>>
> >>> For Lucene 3.0.2, issue LUCENE-2421 (
> >>> https://issues.apache.org/jira/browse/LUCENE-2421) changed
> >>> NativeFSLock.release to not raise an exception if a write.lock file
> could
> >>> not be deleted since the presence of the file itself does not mean a
> lock
> >>> is
> >>> held.
> >>>
> >>> Should NativeFSLockFactory.clearLock also be changed to not raise an
> >>> exception if it can't delete the write.lock file? The comments in the
> >>> clearLock method seem to suggest the method is really no longer
> >>> necessary,
> >>> but IndexWriter.init can still call it.
> >>>
> >>> If the write.lock is held from deletion by antivirus or something as
> >>> described in LUCENE-2421, IndexWriter construction looks like it can
> fail
> >>> unnecessarily for the same reason:
> >>>
> >>> IndexWriter
> >>>   IndexWriter.init
> >>>      Directory.clearLock
> >>>         NativeFSLockFactory.clearLock:
> >>>            ...
> >>>            if (lockFile.exists() && !lockFile.delete()){
> >>>               throw new IOException("Cannot delete " + lockFile);
> >>>            }
> >>>
> >>>
> >>> We have seen this exception path once in the wild (on a Windows box).
> >>>
> >>> I can work around this with a custom LockFactory but thought I should
> >>> check
> >>> if I'm reading the code right.
> >>>
> >>> Cheers,
> >>>
> >>> Ted
> >>>
> >>>
> >>> --
> >>> Ted McFadden
> >>> Chief Engineer
> >>>
> >>> Leximancer Pty Ltd
> >>> Queensland, Australia
> >>> http://www.leximancer.com
> >>>
> >>
> >>
> >
>



-- 
Ted McFadden
Chief Engineer

Leximancer Pty Ltd
Queensland, Australia
http://www.leximancer.com

--000325575ffa1b2b91048ae03159--

From java-user-return-46663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 08 14:30:07 2010
Return-Path: <java-user-return-46663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36566 invoked from network); 8 Jul 2010 14:30:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Jul 2010 14:30:06 -0000
Received: (qmail 17321 invoked by uid 500); 8 Jul 2010 14:30:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17227 invoked by uid 500); 8 Jul 2010 14:30:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17219 invoked by uid 99); 8 Jul 2010 14:30:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 14:30:03 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 14:29:56 +0000
Received: by gxk7 with SMTP id 7so631507gxk.35
        for <java-user@lucene.apache.org>; Thu, 08 Jul 2010 07:28:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=7qdacxoBOcYGouJE1waMXxKnnf1EmZlVwr9tBU6tWEo=;
        b=t6lqu2+3fxKkVCPxgE/8BVUUWFVFfqQPK3K53BHi2npFP/qRQ08GxmZaxchs3n1t3w
         udFtTGJLf4PXbs+pr+VIADteiN87atRdmhKURlnGnjIlUqAEvpN66nT4/T8Wx8FnNE+B
         2+QICzKR9T19GnqxwsCJP5eRp/iKDmYIxJUyQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=jd5C7Vl1teMD9MTtRQqA5dN39qODnMP/vhfNYu5SKbv6uz/ZlDC5xkyvJzmxRvkxdo
         d3R6m4Ll/rhG1xoIcI+WsZiyPybCFTZvRBcSaPKKvnOjOK78d0ANUsUGSgWmEwff1104
         COiQ2pDaZkK4KmEPg4ThKct4ukftbDRqILRck=
MIME-Version: 1.0
Received: by 10.151.6.5 with SMTP id j5mr383903ybi.235.1278599326698; Thu, 08 
	Jul 2010 07:28:46 -0700 (PDT)
Received: by 10.150.197.7 with HTTP; Thu, 8 Jul 2010 07:28:46 -0700 (PDT)
In-Reply-To: <0581FAE1-D01E-4D8B-A119-E426369D7066@univie.ac.at>
References: <0581FAE1-D01E-4D8B-A119-E426369D7066@univie.ac.at>
Date: Thu, 8 Jul 2010 10:28:46 -0400
Message-ID: <AANLkTimT5mb8LQgx2txebzuN1nxen-oQaFdyJTfjPw19@mail.gmail.com>
Subject: Re: Retrieve term payloads / custom PayloadFilter
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd51986adb92b048ae11ab4
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd51986adb92b048ae11ab4
Content-Type: text/plain; charset=ISO-8859-1

If you know this at index time, could you index language-specific fields?
i.e.
text_en, text_de, title_en, title_de etc? Perhaps you could have a catch-all
that contained everything too.

Then your searching would be on a per field_lang basis.
PerFieldAnalyzerWrapper
would automatically use the proper language-specific Analyzers.

This may turn out being too clumsy if you have many fields X many
languages....

Actually, this looks a lot like what SOLR could provide, perhaps with
dynamic
fields and the dismax query parser

Best
Erick

On Thu, Jul 8, 2010 at 4:47 AM, Bernhard Haslhofer <
bernhard.haslhofer@univie.ac.at> wrote:

> Hi,
>
> in my application I have documents that may contain terms and term
> translations in multiple languages. The language tag of each term is
> explicitly given and should be available in the index in order to enable
> queries for documents that contain a certain term (optionally in a given
> language).
>
> I could split the documents in a set of sub-documents each containing terms
> in one specific language and a dedicated field indicating the language. But
> then I need multiple queries to retrieve stored term translations from the
> subdocuments.
>
> The IMO better alternative is not to split the document and to assign the
> language tags as payloads to the terms. But then I need
>
> (i) a search filter that eliminates docs based on a given language tag and
>
> (ii) a way to access the term payloads from the documents returned by the
> searcher
>
> For both I haven't found a solution yet. Can I write a custom PayloadFilter
> or is there already some implementation available? Is it possible to access
> the term payloads from the search results?
>
> Thanks.
> Bernhard
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd51986adb92b048ae11ab4--

From java-user-return-46664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 08 22:14:27 2010
Return-Path: <java-user-return-46664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1463 invoked from network); 8 Jul 2010 22:14:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Jul 2010 22:14:26 -0000
Received: (qmail 97342 invoked by uid 500); 8 Jul 2010 22:14:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97224 invoked by uid 500); 8 Jul 2010 22:14:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97216 invoked by uid 99); 8 Jul 2010 22:14:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 22:14:24 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ichudov@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 22:14:17 +0000
Received: by wwb24 with SMTP id 24so4288690wwb.5
        for <java-user@lucene.apache.org>; Thu, 08 Jul 2010 15:12:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=1IxfNhgE4TG1UgdP6YT3Pudjw1ZnQYNE8gOJC3IAggQ=;
        b=IssqWnNu1/5D/dVOVtYzgqUot9soTKOO/jcFhooD4yjjJA5uqltAwdlSV5BRXbcDpx
         M8gloa+5eiWNcO0fmeaGTTkWAvjc0kzPgzI6H8fp61EQhBdjLyORWqKPhpn/4/MXULQa
         vZU01wuMecRDjeOuyIMu2J82+5SwgkDwp3/sw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=KIQ0JbTwB1vc+N3A8JP2EMjh5R4Mn59BkYPyf1B9+FiKXXEN9jAl2hUe+PKyLnOxZV
         hxNWrZ/MxD0oqA0XfHPU27dm9Bngy2DjVYHKyetzECSUAfr+gx8RiO8jFQTHrdznzcXd
         GjAS9RxYbU+9ZRlBI8cdE0n6NgRCLe2qxlBCY=
Received: by 10.216.165.145 with SMTP id e17mr3065130wel.89.1278627177341; 
	Thu, 08 Jul 2010 15:12:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.0.131 with HTTP; Thu, 8 Jul 2010 15:12:37 -0700 (PDT)
From: Igor Chudov <ichudov@gmail.com>
Date: Thu, 8 Jul 2010 17:12:37 -0500
Message-ID: <AANLkTilTgkM5SFCQ1LGHYCM7m4OfIxwWp46dCJA26Ss3@mail.gmail.com>
Subject: Personal Intro and a question on "find top 10 similar items" 
	functionality
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

My name is Igor and I own a website algebra.com. I just joined.

I have a database of answered algebra questions (208,000 and growing).

A typical question is here (original spelling):

``who long does it take 2 people to finish painting a house if the
first one takes 6 days and the second one takes 9 days''

What I would like to do is, for anyone viewing a archived problem, to
find "top 10 similar problems" that would be most "similar" to the
currently viewed query. Note that meaning of similar is not defined in
my question.

Is Lucene even capable of this sort of thing?

Could I expect reasonable performance (under 1-2 seconds) from it?

thanks a bunch guys.

i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 08 22:37:52 2010
Return-Path: <java-user-return-46665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6868 invoked from network); 8 Jul 2010 22:37:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 8 Jul 2010 22:37:52 -0000
Received: (qmail 19696 invoked by uid 500); 8 Jul 2010 22:37:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19642 invoked by uid 500); 8 Jul 2010 22:37:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19631 invoked by uid 99); 8 Jul 2010 22:37:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 22:37:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of id.navs@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Jul 2010 22:37:43 +0000
Received: by vws10 with SMTP id 10so2383279vws.35
        for <java-user@lucene.apache.org>; Thu, 08 Jul 2010 15:37:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=xVR4Sxz9BB+4OHomHgW7m0LTfDMu6pr29alVWq7rydI=;
        b=aU4XlrvkqshxDR3FEk2L/woc0sSxYwMACDDpvrfjjRcBK+69p8XBR8nT0py1rc3CD9
         PvnivaeaoJKk9S09vACVszN4t592uWoRCnmCKwEIg2hye8luj6NWtmgqQeNW9uYMsT7J
         mA2IVdMjjDaqO03+NEjTpfdTcpMQETwe5B5pc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=WQXd+OjPs78gMNM8n56wfaOyr2UlW4JAiHIxOukF4HDOncUaQ3IdqycUXHGrx9rLZc
         J7cKzBNaK5IjdoU7WJGgx0TiWph0oyBIXI1TY8xrf+D3sW+nY1NMWk7bEiOsim5x32Sz
         ks9PcsSxe67jzi6akPWdtG6zG7APWDSBl/zyY=
MIME-Version: 1.0
Received: by 10.229.214.147 with SMTP id ha19mr5532508qcb.9.1278628641991; 
	Thu, 08 Jul 2010 15:37:21 -0700 (PDT)
Received: by 10.229.75.5 with HTTP; Thu, 8 Jul 2010 15:37:21 -0700 (PDT)
In-Reply-To: <AANLkTilTgkM5SFCQ1LGHYCM7m4OfIxwWp46dCJA26Ss3@mail.gmail.com>
References: <AANLkTilTgkM5SFCQ1LGHYCM7m4OfIxwWp46dCJA26Ss3@mail.gmail.com>
Date: Fri, 9 Jul 2010 04:07:21 +0530
Message-ID: <AANLkTinHDdZgVEe_ziep5OEx3O3SUeK3l9-0s9BSevud@mail.gmail.com>
Subject: Re: Personal Intro and a question on "find top 10 similar items" 
	functionality
From: Naveen Kumar <id.navs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016361e7dfe016c0c048ae7eee7
X-Virus-Checked: Checked by ClamAV on apache.org

--0016361e7dfe016c0c048ae7eee7
Content-Type: text/plain; charset=ISO-8859-1

Hi
Check out a class called MoreLikeThis in lucene. It should solve your
problem.

Naveen Kumar

On Fri, Jul 9, 2010 at 3:42 AM, Igor Chudov <ichudov@gmail.com> wrote:

> Hello,
>
> My name is Igor and I own a website algebra.com. I just joined.
>
> I have a database of answered algebra questions (208,000 and growing).
>
> A typical question is here (original spelling):
>
> ``who long does it take 2 people to finish painting a house if the
> first one takes 6 days and the second one takes 9 days''
>
> What I would like to do is, for anyone viewing a archived problem, to
> find "top 10 similar problems" that would be most "similar" to the
> currently viewed query. Note that meaning of similar is not defined in
> my question.
>
> Is Lucene even capable of this sort of thing?
>
> Could I expect reasonable performance (under 1-2 seconds) from it?
>
> thanks a bunch guys.
>
> i
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016361e7dfe016c0c048ae7eee7--

From java-user-return-46666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 05:12:39 2010
Return-Path: <java-user-return-46666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18757 invoked from network); 9 Jul 2010 05:12:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 05:12:39 -0000
Received: (qmail 90168 invoked by uid 500); 9 Jul 2010 05:12:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89711 invoked by uid 500); 9 Jul 2010 05:12:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89702 invoked by uid 99); 9 Jul 2010 05:12:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 05:12:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.59] (HELO web50305.mail.re2.yahoo.com) (206.190.38.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 09 Jul 2010 05:12:25 +0000
Received: (qmail 63529 invoked by uid 60001); 9 Jul 2010 05:11:04 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1278652264; bh=GUssoABbzMrccXFeD78A21BTJ5eenjyzY6f4cGgOB2o=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=ma1XVNZT6wZjUjQHsU4SEKP0kDl5y0mv4GhJ6lSnjQaKtxH3oGuvFlRhtEXFYa3dnKfGK1MJt2xr/0TAz9E/8PrN/33s3jE5Uktx6xNdZFc1+5/t51NLxKtKvzLho+Vh2Pb3HBpFeCcQh03EBcrg32O9eWtxHm424/A5+AWxYzo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=dhOqqn3+L1t8yoYLTOfv4oRyBb8S5/pPCNNDEpBAKBcW8r1V9x+9VCVtjRuAKO81CLXZcnhZHWsd8mNzyxBHqMsDpEt9Y4EaAdR0d3DONcDvE5v59xlhZowGRwTm8ka2cQblkw6uQClvd2DU8gOUOArIDBjw2YOOBfu5Wpqj5Zg=;
Message-ID: <812529.62270.qm@web50305.mail.re2.yahoo.com>
X-YMail-OSG: hVxCPQ0VM1kW3BJCsvT5sp4N2KXyZY.PGw376dEZjjZQocM
 poxbKTPXC4xwKXGj1UNKlD54Es7AA_rX4mezJ_3ZmvgYBBlxftN3ZWFctWRd
 GxuK6wsYL4eVJSiQdAtTKaPWCyQeyj2HilSyEtgdF031Tkh8RWB7ooeEvFYt
 1ZAWkIkhndWT5F3MmIcAUVB9uDuYmwD5Ez.lgG2LrRt18c2dlvJMOIVAJWSP
 uce2psW1AcZZ.JmnPCrLEoBAXG.QYlmom0.J_FS0eJeYaL8XBhFRKkmlICQD
 A.X.2iibatqP1GISkqCUgkyACLUHE3uQr1fYbqGlERwPm5qdxkggFioSPHhq
 6iuXg634e2LJ4qnSm
Received: from [74.73.6.27] by web50305.mail.re2.yahoo.com via HTTP; Thu, 08 Jul 2010 22:11:04 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.104.276605
References: <AANLkTilTgkM5SFCQ1LGHYCM7m4OfIxwWp46dCJA26Ss3@mail.gmail.com>
Date: Thu, 8 Jul 2010 22:11:04 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Personal Intro and a question on "find top 10 similar items"  functionality
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTilTgkM5SFCQ1LGHYCM7m4OfIxwWp46dCJA26Ss3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Igor,

You can treat that question as the query and use it to search the index where 
you've indexed other questions.
More Like This is another option.

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Igor Chudov <ichudov@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thu, July 8, 2010 6:12:37 PM
> Subject: Personal Intro and a question on "find top 10 similar items"  
>functionality
> 
> Hello,
> 
> My name is Igor and I own a website algebra.com. I just  joined.
> 
> I have a database of answered algebra questions (208,000 and  growing).
> 
> A typical question is here (original spelling):
> 
> ``who  long does it take 2 people to finish painting a house if the
> first one takes  6 days and the second one takes 9 days''
> 
> What I would like to do is, for  anyone viewing a archived problem, to
> find "top 10 similar problems" that  would be most "similar" to the
> currently viewed query. Note that meaning of  similar is not defined in
> my question.
> 
> Is Lucene even capable of this  sort of thing?
> 
> Could I expect reasonable performance (under 1-2 seconds)  from it?
> 
> thanks a bunch  guys.
> 
> i
> 
> ---------------------------------------------------------------------
> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For  additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 05:18:06 2010
Return-Path: <java-user-return-46667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19638 invoked from network); 9 Jul 2010 05:18:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 05:18:05 -0000
Received: (qmail 93652 invoked by uid 500); 9 Jul 2010 05:18:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93623 invoked by uid 500); 9 Jul 2010 05:18:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93611 invoked by uid 99); 9 Jul 2010 05:17:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 05:17:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ichudov@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 05:17:51 +0000
Received: by wyb29 with SMTP id 29so1653681wyb.35
        for <java-user@lucene.apache.org>; Thu, 08 Jul 2010 22:17:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=whnN4/hRicFp0gDTqI5DhM3tMWjwHp6Et/opi843OmM=;
        b=uGtu8s+U74mpsAuJkC7yaRk7TGFlCDDjwDgrylWHBX5QmaETQLN+0RsoJlihQotAyn
         1r5JgE5WVtEmxfEywKC8DT8eo1fQD8+rha76nuj14mQNIm3fRTI8vdCLhwES8ofvAE3K
         Grs7AYKkY6bqr/Yq7i8oMdeFvealDPclqi4jA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=XOtyV+pkJtveCgn/YyOlpCHSt4Ha3bJUTqPEcURP08bXEXHr+NRnzTfzzmbJ+r2PiP
         6/ojljgcbfrzDs2Y1+7IoygWrsz2J+xMZ2h7D1MDJtlyFFTpwJgsHjKPNTcn6DfgbWoe
         q+JzczYBKhusd+oTqVTeQ8Nx5yHc/OCSMWHCE=
Received: by 10.227.7.34 with SMTP id b34mr7013759wbb.200.1278652651279; Thu, 
	08 Jul 2010 22:17:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.0.131 with HTTP; Thu, 8 Jul 2010 22:17:11 -0700 (PDT)
From: Igor Chudov <ichudov@gmail.com>
Date: Fri, 9 Jul 2010 00:17:11 -0500
Message-ID: <AANLkTil2MI9sP-qoWndpBkb2cMWNchoRSgZ_eIIJQpW1@mail.gmail.com>
Subject: Best way to use Lucene from perl
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I am extremely impressed with Lucene and would like to thank Naveen
and Otis for your kind help.

I am not really a Java person, I am a perl and C++ guy and my website
is done with mod_perl.

So, my obvious question is what perl implementation of lucene access
you would recommend.

It would seem that PLucene is an abandoned project, and I should
instead use Lucene module.

Am I on the right track with this?

Do people implement a Lucene server that they query from apache
mod_perl scripts, or do they instead just use Lucene access from many
webserver processes running in parallel?

Thanks a lot.

i

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 06:18:59 2010
Return-Path: <java-user-return-46668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32275 invoked from network); 9 Jul 2010 06:18:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 06:18:59 -0000
Received: (qmail 28042 invoked by uid 500); 9 Jul 2010 06:18:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27474 invoked by uid 500); 9 Jul 2010 06:18:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27466 invoked by uid 99); 9 Jul 2010 06:18:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 06:18:52 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 06:18:44 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 4468FD36005
	for <java-user@lucene.apache.org>; Fri,  9 Jul 2010 08:18:24 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id V2axe3b-Enkw for <java-user@lucene.apache.org>;
	Fri,  9 Jul 2010 08:18:13 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A0B64D36004
	for <java-user@lucene.apache.org>; Fri,  9 Jul 2010 08:18:12 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTil2MI9sP-qoWndpBkb2cMWNchoRSgZ_eIIJQpW1@mail.gmail.com>
In-Reply-To: <AANLkTil2MI9sP-qoWndpBkb2cMWNchoRSgZ_eIIJQpW1@mail.gmail.com>
Subject: RE: Best way to use Lucene from perl
Date: Fri, 9 Jul 2010 08:18:49 +0200
Message-ID: <024c01cb1f2e$984a8b90$c8dfa2b0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGpnMt+LJ9U3pOhwoW9RxI+QptlfJLrIwhw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at Apache Solr - it implements a server that manages and queries
the index, supports schema configurations and makes the "API" accessible
RESTful. You have to run Lucene in a Servlet Container like Jetty or Tomcat,
but your application is written in any language that supports
REST/JSON/whatever. Bindings for some languages like PHP, Perl are
available.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Igor Chudov [mailto:ichudov@gmail.com]
> Sent: Friday, July 09, 2010 7:17 AM
> To: java-user@lucene.apache.org
> Subject: Best way to use Lucene from perl
> 
> I am extremely impressed with Lucene and would like to thank Naveen and
> Otis for your kind help.
> 
> I am not really a Java person, I am a perl and C++ guy and my website is
done
> with mod_perl.
> 
> So, my obvious question is what perl implementation of lucene access you
> would recommend.
> 
> It would seem that PLucene is an abandoned project, and I should instead
> use Lucene module.
> 
> Am I on the right track with this?
> 
> Do people implement a Lucene server that they query from apache
> mod_perl scripts, or do they instead just use Lucene access from many
> webserver processes running in parallel?
> 
> Thanks a lot.
> 
> i
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 06:24:38 2010
Return-Path: <java-user-return-46669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32933 invoked from network); 9 Jul 2010 06:24:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 06:24:38 -0000
Received: (qmail 32925 invoked by uid 500); 9 Jul 2010 06:24:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32602 invoked by uid 500); 9 Jul 2010 06:24:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32594 invoked by uid 99); 9 Jul 2010 06:24:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 06:24:32 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 06:24:24 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 398D7D36005
	for <java-user@lucene.apache.org>; Fri,  9 Jul 2010 08:23:34 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 1sOeZJmZJ995 for <java-user@lucene.apache.org>;
	Fri,  9 Jul 2010 08:23:23 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 8977CD36004
	for <java-user@lucene.apache.org>; Fri,  9 Jul 2010 08:23:22 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTil2MI9sP-qoWndpBkb2cMWNchoRSgZ_eIIJQpW1@mail.gmail.com> <024c01cb1f2e$984a8b90$c8dfa2b0$@thetaphi.de>
In-Reply-To: <024c01cb1f2e$984a8b90$c8dfa2b0$@thetaphi.de>
Subject: RE: Best way to use Lucene from perl
Date: Fri, 9 Jul 2010 08:23:58 +0200
Message-ID: <024d01cb1f2f$50fe5400$f2fafc00$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGpnMt+LJ9U3pOhwoW9RxI+QptlfAJzOiB5kteK6YA=
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

I forgot, if you still want it in-process (inside your scripts not outside
in a separate server like Solr), have a look a Lucy / KinoSearch. The index
format is different but the API is like Lucene's (it's a loose port).

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Friday, July 09, 2010 8:19 AM
> To: java-user@lucene.apache.org
> Subject: RE: Best way to use Lucene from perl
> 
> Have a look at Apache Solr - it implements a server that manages and
queries
> the index, supports schema configurations and makes the "API" accessible
> RESTful. You have to run Lucene in a Servlet Container like Jetty or
Tomcat,
> but your application is written in any language that supports
> REST/JSON/whatever. Bindings for some languages like PHP, Perl are
> available.
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> 
> > -----Original Message-----
> > From: Igor Chudov [mailto:ichudov@gmail.com]
> > Sent: Friday, July 09, 2010 7:17 AM
> > To: java-user@lucene.apache.org
> > Subject: Best way to use Lucene from perl
> >
> > I am extremely impressed with Lucene and would like to thank Naveen
> > and Otis for your kind help.
> >
> > I am not really a Java person, I am a perl and C++ guy and my website
> > is
> done
> > with mod_perl.
> >
> > So, my obvious question is what perl implementation of lucene access
> > you would recommend.
> >
> > It would seem that PLucene is an abandoned project, and I should
> > instead use Lucene module.
> >
> > Am I on the right track with this?
> >
> > Do people implement a Lucene server that they query from apache
> > mod_perl scripts, or do they instead just use Lucene access from many
> > webserver processes running in parallel?
> >
> > Thanks a lot.
> >
> > i
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 06:52:12 2010
Return-Path: <java-user-return-46670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42466 invoked from network); 9 Jul 2010 06:52:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 06:52:12 -0000
Received: (qmail 53317 invoked by uid 500); 9 Jul 2010 06:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52852 invoked by uid 500); 9 Jul 2010 06:52:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52844 invoked by uid 99); 9 Jul 2010 06:52:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 06:52:05 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 06:51:58 +0000
Received: by vws10 with SMTP id 10so3066849vws.35
        for <java-user@lucene.apache.org>; Thu, 08 Jul 2010 23:50:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=qpRY4mvEJfFtCCxBCInRQbnquSA/c19v2fCVpgCLPEI=;
        b=UGyZDyLSSX5QrmvSdP3lfqMi8sIAGD+U5h2k/B31zCGwlGN0vGHNSZHi3JoSvcrkEi
         p4EmPSzrLPMoSWPRM0T+T91ZjN30E0qqsHdzaifKv7zZCEhNNFMyZXTKkkPBhbKo9SUy
         19XJs9L0XJNKvVnBckOUbmicLwR5STLy8QTWc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=OG1eychEFYmXuqQ9Z4ei2aKtrxnn1XDDHVhLyo4smDR13TX+LmxbfGopmOae9n7CbB
         oRxC5Zw1pL6+XmszTpssEb6oQelFtHO8yubVMmc0mPdJT6Xh+/V7LM2TagHqth6XHqTj
         f6FdbNXnQFzwy5UaCeQ/DTLz5UCncl+CEPfDI=
MIME-Version: 1.0
Received: by 10.220.168.80 with SMTP id t16mr4980731vcy.21.1278658237521; Thu, 
	08 Jul 2010 23:50:37 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Thu, 8 Jul 2010 23:50:37 -0700 (PDT)
In-Reply-To: <AANLkTimD4pUFeTcyNcEsNV8c5f7b0wex7N49-8qRllFZ@mail.gmail.com>
References: <AANLkTin3uDNGvlEzSr_53i3HXROyCeb8WhZBo3QfpVnK@mail.gmail.com>
	<AANLkTimD4pUFeTcyNcEsNV8c5f7b0wex7N49-8qRllFZ@mail.gmail.com>
Date: Fri, 9 Jul 2010 12:20:37 +0530
Message-ID: <AANLkTin3TAaxEL26oq_ejIW9lSAK2CE0HIMn1z3p6dld@mail.gmail.com>
Subject: Re: Why not normalization?
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6475b0809609e048aeed299
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6475b0809609e048aeed299
Content-Type: text/plain; charset=ISO-8859-1

Hi Rebecca,

Thanks for your valuble comments. Yes I observed tha, once the number of
terms of the goes up, fieldNorm value goes down correspondingly. I think,
therefore there won't be any default due to the variation of total number of
terms in the document. Am I right?

Manjula.

On Thu, Jul 8, 2010 at 9:34 AM, Rebecca Watson <bec.watson@gmail.com> wrote:

> hi,
>
> > 1) Although Lucene uses tf to calculate scoring it seems to me that term
> > frequency has not been normalized. Even if I index several documents, it
> > does not normalize tf value. Therefore, since the total number of words
> > in index documents are varied, can't there be a fault in Lucene's
> scoring?
>
> tf = term frequency i.e. the number of times the term appears in the
> document,
> while idf is inverse document frequency - is a measure of how rare a term
> is,
> i.e. related to how many documents the term appears in.
>
> if term1 occurs more frequently in a document i.e. tf is higher, you
> want to weight
> the document higher when you search for term1
>
> but if term1 is a very frequent term, ie. in lots of documents, then
> its probably not
> as important to an overall search (where we have term1, term2 etc) so you
> want
> to downweight it (idf comes in)
>
> then the normalisations like length normalisation (allow for 'fair' scoring
> across varied field length) come in too.
>
> the tf-idf scoring formula used by lucene is a  scoring method that's
> been around
> a long long time... there are competing scoring metrics but that's an IR
> thing
> and not an argument you want to start on the lucene lists! :)
>
> these are IR ('information retrieval') concepts and you might want to start
> by
> going to through the tf-idf scoring / some explanations for this kind
> of scoring.
>
> http://en.wikipedia.org/wiki/Tf%E2%80%93idf
> http://wiki.apache.org/lucene-java/InformationRetrieval
>
>
> > 2) What is the formula to calculate this fieldNorm value?
>
> in terms of how lucene implements its tf-idf scoring - you can see here:
> http://lucene.apache.org/java/3_0_2/scoring.html
>
> also, the lucene in action book is a really good book if you are starting
> out
> with lucene (and will save you a lot of grief with understanding
> lucene / setting
> up your application!), it covers all the basics and then moves on to more
> advanced stuff and has lots of code examples too:
> http://www.manning.com/hatcher2/
>
> hope that helps,
>
> bec :)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6475b0809609e048aeed299--

From java-user-return-46671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 07:22:26 2010
Return-Path: <java-user-return-46671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51068 invoked from network); 9 Jul 2010 07:22:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 07:22:26 -0000
Received: (qmail 85425 invoked by uid 500); 9 Jul 2010 07:22:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84970 invoked by uid 500); 9 Jul 2010 07:22:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84961 invoked by uid 99); 9 Jul 2010 07:22:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 07:22:19 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 07:22:11 +0000
Received: by vws10 with SMTP id 10so3105448vws.35
        for <java-user@lucene.apache.org>; Fri, 09 Jul 2010 00:20:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=EJZxeUhy/RKuKNGsUaYQf3yR/PmVRzIc9HyM3L9JXlo=;
        b=Hn8QaVzjyAM9rt/loLkywZa0rB51Bc6jAVJ0wzSDpDFcM6JDlgL32dDPU6E4xQFgAL
         kZQQpTLaWqVgG1O9GzDArtpUZb9JHJtaZX8Ef0qW+stG8B7w2JRuEUsL7xjRVZRm9WE7
         kDyT8oX5mqNP9nUxy87Y8RDD55QT+yyPzW9cM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Q/NPgM9HMj9wAnhdIAnmdIrsW3eqPS4pYdfKoVNj1C4fk0G8Et7LzpO63AYmB/5gUX
         k2bzF9NTIGFe9KFNVI5nFoUZd1iYzlsT0Lg4+cuKDWjms0FCVEcMLV4J/g7dI1iVmtUI
         18+HW+iWeaf1O4ugc6UAqZ8U1jJTpplVqMEic=
MIME-Version: 1.0
Received: by 10.220.171.198 with SMTP id i6mr4978920vcz.108.1278660050501; 
	Fri, 09 Jul 2010 00:20:50 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Fri, 9 Jul 2010 00:20:50 -0700 (PDT)
Date: Fri, 9 Jul 2010 12:50:50 +0530
Message-ID: <AANLkTilUjbHcPfdnzXdPFwkUBcUPCXNsdHAjIrIs4Qy7@mail.gmail.com>
Subject: scoring and index size
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e641360419411d048aef3ec2
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e641360419411d048aef3ec2
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I run a single programme to see the way of scoring by Lucene for single
indexed document. The explain() method gave me the following results.
*******************

Searching for 'metaphysics'

Number of hits: 1

0.030706111

0.030706111 = (MATCH) fieldWeight(contents:metaphys in 0), product of:

10.246951 = tf(termFreq(contents:metaphys)=105)

0.30685282 = idf(docFreq=1, maxDocs=1)

0.009765625 = fieldNorm(field=contents, doc=0)

*****************

But I encountered the following problems;

1) In this case, I did not change or done anything to Boost values. So that
should fieldNorm = 1/sqrt(terms in field)? (because I noticed that in Lucene
email archive,  default boost values=1)

2) But, even if I manually calculate the value for fieldNorm (as
=1/sqrt(terms in field)), it doesn't match (approximately it matches) with
the value with given by the system for fieldNorm. Can this be due to
encode/decode precision loss of norm?

3) In my indexed document, my indexed document was consisted with total
number of 19078 words including 125 times of word 'metaphysics' (i.e my
query. I input single term query) . But as you can see in the above output,
system gives only 105 counts for word 'metaphysics'. But once I reduce some
part of my index document and count the number of 'metaphysics' words and
checked with the system results. I noticed that with reduction of text from
index document, system counts it correctly. Why this kind of behaviour? Is
there any limitation for the indexed documents?

If somebody can pls. help me to solve these problems.

Thanks!

Manjula.

--0016e641360419411d048aef3ec2--

From java-user-return-46672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 07:37:17 2010
Return-Path: <java-user-return-46672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52973 invoked from network); 9 Jul 2010 07:37:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 07:37:17 -0000
Received: (qmail 1224 invoked by uid 500); 9 Jul 2010 07:37:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 890 invoked by uid 500); 9 Jul 2010 07:37:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 881 invoked by uid 99); 9 Jul 2010 07:37:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 07:37:10 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 09 Jul 2010 07:37:03 +0000
Received: (qmail 2413 invoked from network); 9 Jul 2010 07:35:41 -0000
Received: from unknown (109.253.206.235)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 09 Jul 2010 07:34:52 -0000
Message-ID: <4C36D114.9010700@code972.com>
Date: Fri, 09 Jul 2010 10:34:44 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.10) Gecko/20100512 Lightning/1.0b1 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Best way to use Lucene from perl
References: <AANLkTil2MI9sP-qoWndpBkb2cMWNchoRSgZ_eIIJQpW1@mail.gmail.com> <024c01cb1f2e$984a8b90$c8dfa2b0$@thetaphi.de> <024d01cb1f2f$50fe5400$f2fafc00$@thetaphi.de>
In-Reply-To: <024d01cb1f2f$50fe5400$f2fafc00$@thetaphi.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

CLucene is a complete port of Java Lucene to C++, and it has a Perl 
bindings, although I'm not sure how up to date it is - you'll have to 
check with its author. CLucene development branch currently supports the 
Lucene 2.3.2 API and index format.

See http://clucene.sourceforge.net/ for more details. To learn more on 
Lucene and for a good intro on CLucene, see 
http://www.code972.com/blog/2010/06/lucene-in-action-free-chapter-coupon-code/.

Itamar.

On 9/7/2010 9:23 AM, Uwe Schindler wrote:
> I forgot, if you still want it in-process (inside your scripts not outside
> in a separate server like Solr), have a look a Lucy / KinoSearch. The index
> format is different but the API is like Lucene's (it's a loose port).
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>    
>> -----Original Message-----
>> From: Uwe Schindler [mailto:uwe@thetaphi.de]
>> Sent: Friday, July 09, 2010 8:19 AM
>> To: java-user@lucene.apache.org
>> Subject: RE: Best way to use Lucene from perl
>>
>> Have a look at Apache Solr - it implements a server that manages and
>>      
> queries
>    
>> the index, supports schema configurations and makes the "API" accessible
>> RESTful. You have to run Lucene in a Servlet Container like Jetty or
>>      
> Tomcat,
>    
>> but your application is written in any language that supports
>> REST/JSON/whatever. Bindings for some languages like PHP, Perl are
>> available.
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>>      
>>> -----Original Message-----
>>> From: Igor Chudov [mailto:ichudov@gmail.com]
>>> Sent: Friday, July 09, 2010 7:17 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Best way to use Lucene from perl
>>>
>>> I am extremely impressed with Lucene and would like to thank Naveen
>>> and Otis for your kind help.
>>>
>>> I am not really a Java person, I am a perl and C++ guy and my website
>>> is
>>>        
>> done
>>      
>>> with mod_perl.
>>>
>>> So, my obvious question is what perl implementation of lucene access
>>> you would recommend.
>>>
>>> It would seem that PLucene is an abandoned project, and I should
>>> instead use Lucene module.
>>>
>>> Am I on the right track with this?
>>>
>>> Do people implement a Lucene server that they query from apache
>>> mod_perl scripts, or do they instead just use Lucene access from many
>>> webserver processes running in parallel?
>>>
>>> Thanks a lot.
>>>
>>> i
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>        
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>      
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 07:37:30 2010
Return-Path: <java-user-return-46673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53026 invoked from network); 9 Jul 2010 07:37:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 07:37:30 -0000
Received: (qmail 2811 invoked by uid 500); 9 Jul 2010 07:37:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2745 invoked by uid 500); 9 Jul 2010 07:37:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2737 invoked by uid 99); 9 Jul 2010 07:37:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 07:37:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 07:37:17 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 488A8D36005
	for <java-user@lucene.apache.org>; Fri,  9 Jul 2010 09:36:27 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id kVSi-P37VgmU for <java-user@lucene.apache.org>;
	Fri,  9 Jul 2010 09:36:16 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A3868D36004
	for <java-user@lucene.apache.org>; Fri,  9 Jul 2010 09:36:15 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTilUjbHcPfdnzXdPFwkUBcUPCXNsdHAjIrIs4Qy7@mail.gmail.com>
In-Reply-To: <AANLkTilUjbHcPfdnzXdPFwkUBcUPCXNsdHAjIrIs4Qy7@mail.gmail.com>
Subject: RE: scoring and index size
Date: Fri, 9 Jul 2010 09:36:52 +0200
Message-ID: <025601cb1f39$7f9e2a60$7eda7f20$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQINe+WOOPm7RJZ6Ulk+lQ3Xkv4aq5Ijeowg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Maybe you have MaxFieldLength.LIMITED instead of UNLIMITED? Then the number
of terms per document is limited.

The calculation precision is limited by the float norm encoding, but also if
your analyzer removed stop words, so the norm is not what you exspect?

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: manjula wijewickrema [mailto:manjula53@gmail.com]
> Sent: Friday, July 09, 2010 9:21 AM
> To: java-user@lucene.apache.org
> Subject: scoring and index size
> 
> Hi,
> 
> I run a single programme to see the way of scoring by Lucene for single
> indexed document. The explain() method gave me the following results.
> *******************
> 
> Searching for 'metaphysics'
> 
> Number of hits: 1
> 
> 0.030706111
> 
> 0.030706111 = (MATCH) fieldWeight(contents:metaphys in 0), product of:
> 
> 10.246951 = tf(termFreq(contents:metaphys)=105)
> 
> 0.30685282 = idf(docFreq=1, maxDocs=1)
> 
> 0.009765625 = fieldNorm(field=contents, doc=0)
> 
> *****************
> 
> But I encountered the following problems;
> 
> 1) In this case, I did not change or done anything to Boost values. So
that
> should fieldNorm = 1/sqrt(terms in field)? (because I noticed that in
Lucene
> email archive,  default boost values=1)
> 
> 2) But, even if I manually calculate the value for fieldNorm (as
=1/sqrt(terms
> in field)), it doesn't match (approximately it matches) with the value
with
> given by the system for fieldNorm. Can this be due to encode/decode
> precision loss of norm?
> 
> 3) In my indexed document, my indexed document was consisted with total
> number of 19078 words including 125 times of word 'metaphysics' (i.e my
> query. I input single term query) . But as you can see in the above
output,
> system gives only 105 counts for word 'metaphysics'. But once I reduce
some
> part of my index document and count the number of 'metaphysics' words
> and checked with the system results. I noticed that with reduction of text
> from index document, system counts it correctly. Why this kind of
> behaviour? Is there any limitation for the indexed documents?
> 
> If somebody can pls. help me to solve these problems.
> 
> Thanks!
> 
> Manjula.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 07:40:50 2010
Return-Path: <java-user-return-46674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54104 invoked from network); 9 Jul 2010 07:40:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 07:40:50 -0000
Received: (qmail 6502 invoked by uid 500); 9 Jul 2010 07:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6206 invoked by uid 500); 9 Jul 2010 07:40:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6196 invoked by uid 99); 9 Jul 2010 07:40:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 07:40:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 07:40:36 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id C07DBD36005
	for <java-user@lucene.apache.org>; Fri,  9 Jul 2010 09:39:46 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id PLD4ORl-E6YA for <java-user@lucene.apache.org>;
	Fri,  9 Jul 2010 09:39:33 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 3995BD36004
	for <java-user@lucene.apache.org>; Fri,  9 Jul 2010 09:39:33 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <AANLkTin3uDNGvlEzSr_53i3HXROyCeb8WhZBo3QfpVnK@mail.gmail.com>	<AANLkTimD4pUFeTcyNcEsNV8c5f7b0wex7N49-8qRllFZ@mail.gmail.com> <AANLkTin3TAaxEL26oq_ejIW9lSAK2CE0HIMn1z3p6dld@mail.gmail.com>
In-Reply-To: <AANLkTin3TAaxEL26oq_ejIW9lSAK2CE0HIMn1z3p6dld@mail.gmail.com>
Subject: RE: Why not normalization?
Date: Fri, 9 Jul 2010 09:40:09 +0200
Message-ID: <025701cb1f39$f55f46d0$e01dd470$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGdgxrlooTsvdAaeWoK/XY6BGEcRwFBCScEAiI1j5+S6FMzUA==
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

> Thanks for your valuble comments. Yes I observed tha, once the number of
> terms of the goes up, fieldNorm value goes down correspondingly. I think,
> therefore there won't be any default due to the variation of total number
of
> terms in the document. Am I right?

With the current scoring model advanced statistics are not available. There
are currently some approaches to add BM25 support to Lucene, for what the
index format needs to be enhanced to contain more statistics (number of
terms per document, avg number of terms per document,...).

> On Thu, Jul 8, 2010 at 9:34 AM, Rebecca Watson <bec.watson@gmail.com>
> wrote:
> 
> > hi,
> >
> > > 1) Although Lucene uses tf to calculate scoring it seems to me that
> > > term frequency has not been normalized. Even if I index several
> > > documents, it does not normalize tf value. Therefore, since the
> > > total number of words in index documents are varied, can't there be
> > > a fault in Lucene's
> > scoring?
> >
> > tf = term frequency i.e. the number of times the term appears in the
> > document, while idf is inverse document frequency - is a measure of
> > how rare a term is, i.e. related to how many documents the term
> > appears in.
> >
> > if term1 occurs more frequently in a document i.e. tf is higher, you
> > want to weight the document higher when you search for term1
> >
> > but if term1 is a very frequent term, ie. in lots of documents, then
> > its probably not as important to an overall search (where we have
> > term1, term2 etc) so you want to downweight it (idf comes in)
> >
> > then the normalisations like length normalisation (allow for 'fair'
> > scoring across varied field length) come in too.
> >
> > the tf-idf scoring formula used by lucene is a  scoring method that's
> > been around a long long time... there are competing scoring metrics
> > but that's an IR thing and not an argument you want to start on the
> > lucene lists! :)
> >
> > these are IR ('information retrieval') concepts and you might want to
> > start by going to through the tf-idf scoring / some explanations for
> > this kind of scoring.
> >
> > http://en.wikipedia.org/wiki/Tf%E2%80%93idf
> > http://wiki.apache.org/lucene-java/InformationRetrieval
> >
> >
> > > 2) What is the formula to calculate this fieldNorm value?
> >
> > in terms of how lucene implements its tf-idf scoring - you can see here:
> > http://lucene.apache.org/java/3_0_2/scoring.html
> >
> > also, the lucene in action book is a really good book if you are
> > starting out with lucene (and will save you a lot of grief with
> > understanding lucene / setting up your application!), it covers all
> > the basics and then moves on to more advanced stuff and has lots of
> > code examples too:
> > http://www.manning.com/hatcher2/
> >
> > hope that helps,
> >
> > bec :)
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 10:30:53 2010
Return-Path: <java-user-return-46675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13686 invoked from network); 9 Jul 2010 10:30:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 10:30:52 -0000
Received: (qmail 33295 invoked by uid 500); 9 Jul 2010 10:30:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32968 invoked by uid 500); 9 Jul 2010 10:30:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32960 invoked by uid 99); 9 Jul 2010 10:30:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 10:30:46 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 10:30:38 +0000
Received: by vws10 with SMTP id 10so3350310vws.35
        for <java-user@lucene.apache.org>; Fri, 09 Jul 2010 03:30:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=2YgQfaB8cMz1xxoHasuVGj1sX4BfSfYZu4GnOish/pM=;
        b=YIFr/bTv28ovjYWZL0kzhmVQPnCU+R3ds/ihhP1F3f1SAGefeXkGlu83hjX8P+QtHU
         cnDSqpZApkXYNwtD5tw/eaMND0Awl9G84twCuSfyzS31oZVbJdfGwkD/oBlszLWJXLRD
         JVepNlFIZsKfJfnTsJhEslBhCy9pyV4dI6qpw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rfqIujyJDGQC8DulaupRupi5+o6TMOxgZ9mFbl59BwVn8kSjZow8mTwwsto02MXvPH
         6sDfESiiV8s07Cm2MF1HOSB0WuDpw27sTiXpW2O7Go/RUh7oLbBKJEKd0qrU+2RploEY
         T6GfAzj+PnledpeZaltyEvNxpJ97CfHBrOLp8=
MIME-Version: 1.0
Received: by 10.220.45.144 with SMTP id e16mr5024104vcf.276.1278671417340; 
	Fri, 09 Jul 2010 03:30:17 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Fri, 9 Jul 2010 03:30:17 -0700 (PDT)
In-Reply-To: <025601cb1f39$7f9e2a60$7eda7f20$@thetaphi.de>
References: <AANLkTilUjbHcPfdnzXdPFwkUBcUPCXNsdHAjIrIs4Qy7@mail.gmail.com>
	<025601cb1f39$7f9e2a60$7eda7f20$@thetaphi.de>
Date: Fri, 9 Jul 2010 16:00:17 +0530
Message-ID: <AANLkTil_Gogqtuz11847SvA04HtVupHROpdwNyLEej-o@mail.gmail.com>
Subject: Re: scoring and index size
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64715029d7558048af1e3ab
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64715029d7558048af1e3ab
Content-Type: text/plain; charset=ISO-8859-1

Uwe, thanx for your comments. Following is the code I used in this case.
Could you pls. let me know where I have to insert UNLIMITED field length?
and how?
Tanx again!
Manjula

code--

*

public* *class* LuceneDemo {

*public* *static* *final* String *FILES_TO_INDEX_DIRECTORY* = "filesToIndex"
;

*public* *static* *final* String *INDEX_DIRECTORY* = "indexDirectory";

*public* *static* *final* String *FIELD_PATH* = "path";

*public* *static* *final* String *FIELD_CONTENTS* = "contents";

*public* *static* *void* main(String[] args) *throws* Exception {

*createIndex*();

//searchIndex("rice AND milk");

*searchIndex*("metaphysics");

//searchIndex("banana");

//searchIndex("foo");

 }

*public* *static* *void* createIndex() *throws* CorruptIndexException,
LockObtainFailedException, IOException {

 SnowballAnalyzer analyzer = *new* SnowballAnalyzer( "English",
StopAnalyzer.ENGLISH_STOP_WORDS);

*boolean* recreateIndexIfExists = *true*;

IndexWriter indexWriter = *new* IndexWriter(*INDEX_DIRECTORY*, analyzer,
recreateIndexIfExists);

File dir = *new* File(*FILES_TO_INDEX_DIRECTORY*);

File[] files = dir.listFiles();

*for* (File file : files) {

Document document = *new* Document();

//contents#setOmitNorms(true);

String path = file.getCanonicalPath();

document.add(*new* Field(*FIELD_PATH*, path, Field.Store.*YES*, Field.Index.
UN_TOKENIZED,Field.TermVector.*YES*));

Reader reader = *new* FileReader(file);

document.add(*new* Field(*FIELD_CONTENTS*, reader));

indexWriter.addDocument(document);

 }

indexWriter.optimize();

indexWriter.close();

}

*public* *static* *void* searchIndex(String searchString)
*throws*IOException, ParseException {

System.*out*.println("Searching for '" + searchString + "'");

Directory directory = FSDirectory.getDirectory(*INDEX_DIRECTORY*);

IndexReader indexReader = IndexReader.open(directory);

IndexSearcher indexSearcher = *new* IndexSearcher(indexReader);

 SnowballAnalyzer analyzer = *new* SnowballAnalyzer( "English",
StopAnalyzer.ENGLISH_STOP_WORDS);

QueryParser queryParser = *new* QueryParser(*FIELD_CONTENTS*, analyzer);

Query query = queryParser.parse(searchString);

Hits hits = indexSearcher.search(query);

System.*out*.println("Number of hits: " + hits.length());

TopDocs results = indexSearcher.search(query,10);

ScoreDoc[] hits1 = results.scoreDocs;

*for* (ScoreDoc hit : hits1) {

Document doc = indexSearcher.doc(hit.doc);

//System.out.printf("%5.3f %s\n",hit.score,doc.get(FIELD_CONTENTS));

System.*out*.println(hit.score);

//Searcher.explain("rice",0);

//System.out.println(indexSearcher.explain(query, 0));

}

System.*out*.println(indexSearcher.explain(query, 0));

//System.out.println(indexSearcher.explain(query, 1));

//System.out.println(indexSearcher.explain(query, 2));

//System.out.println(indexSearcher.explain(query, 3));

Iterator<Hit> it = hits.iterator();

*while* (it.hasNext()) {

Hit hit = it.next();

Document document = hit.getDocument();

String path = document.get(*FIELD_PATH*);

System.*out*.println("Hit: " + path);

}

}

}






On Fri, Jul 9, 2010 at 1:06 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Maybe you have MaxFieldLength.LIMITED instead of UNLIMITED? Then the number
> of terms per document is limited.
>
> The calculation precision is limited by the float norm encoding, but also
> if
> your analyzer removed stop words, so the norm is not what you exspect?
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: manjula wijewickrema [mailto:manjula53@gmail.com]
> > Sent: Friday, July 09, 2010 9:21 AM
> > To: java-user@lucene.apache.org
> > Subject: scoring and index size
> >
> > Hi,
> >
> > I run a single programme to see the way of scoring by Lucene for single
> > indexed document. The explain() method gave me the following results.
> > *******************
> >
> > Searching for 'metaphysics'
> >
> > Number of hits: 1
> >
> > 0.030706111
> >
> > 0.030706111 = (MATCH) fieldWeight(contents:metaphys in 0), product of:
> >
> > 10.246951 = tf(termFreq(contents:metaphys)=105)
> >
> > 0.30685282 = idf(docFreq=1, maxDocs=1)
> >
> > 0.009765625 = fieldNorm(field=contents, doc=0)
> >
> > *****************
> >
> > But I encountered the following problems;
> >
> > 1) In this case, I did not change or done anything to Boost values. So
> that
> > should fieldNorm = 1/sqrt(terms in field)? (because I noticed that in
> Lucene
> > email archive,  default boost values=1)
> >
> > 2) But, even if I manually calculate the value for fieldNorm (as
> =1/sqrt(terms
> > in field)), it doesn't match (approximately it matches) with the value
> with
> > given by the system for fieldNorm. Can this be due to encode/decode
> > precision loss of norm?
> >
> > 3) In my indexed document, my indexed document was consisted with total
> > number of 19078 words including 125 times of word 'metaphysics' (i.e my
> > query. I input single term query) . But as you can see in the above
> output,
> > system gives only 105 counts for word 'metaphysics'. But once I reduce
> some
> > part of my index document and count the number of 'metaphysics' words
> > and checked with the system results. I noticed that with reduction of
> text
> > from index document, system counts it correctly. Why this kind of
> > behaviour? Is there any limitation for the indexed documents?
> >
> > If somebody can pls. help me to solve these problems.
> >
> > Thanks!
> >
> > Manjula.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e64715029d7558048af1e3ab--

From java-user-return-46676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 10:31:17 2010
Return-Path: <java-user-return-46676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13734 invoked from network); 9 Jul 2010 10:31:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 10:31:17 -0000
Received: (qmail 34938 invoked by uid 500); 9 Jul 2010 10:31:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34821 invoked by uid 500); 9 Jul 2010 10:31:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34813 invoked by uid 99); 9 Jul 2010 10:31:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 10:31:13 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 10:31:06 +0000
Received: by mail-vw0-f48.google.com with SMTP id 10so3350310vws.35
        for <java-user@lucene.apache.org>; Fri, 09 Jul 2010 03:30:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=EXfXYpr+1MJG40WvBYAXd2QdmxOwEDbK6Zwy2JwV7SY=;
        b=t+WtOEfCqkgJASEpq93L43/HgrVSvp45texivO7j5mreNHSMHSi55DxoUmB5sLEXAz
         0OpPgJTn3oOboZ36kEleqzqt4Zr5lqhE1ijWtxTbwlAQH0+UXAsTw8pvE63ugSodIDR7
         w0Rc+/TMf6RmvYi3VuyA4KvCzZEiqNnDkFUEk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=xVWsx3dL22GGAJlM0jdpgCBpDwwtDJTyc5i/DwRNjUKDHP8kIyLpbfYSycms73elmP
         3alpsTAhhCbckFMDU/Eu8QT6wQ9MIwiMAi33auK+VWl/UoD0IxNclD6WtUGC9Z1kxvzA
         Hpwk9XXVY82W4YTKazYWacbk5EP72PXsvQ6vk=
MIME-Version: 1.0
Received: by 10.220.61.140 with SMTP id t12mr4158260vch.194.1278671446117; 
	Fri, 09 Jul 2010 03:30:46 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Fri, 9 Jul 2010 03:30:45 -0700 (PDT)
In-Reply-To: <025701cb1f39$f55f46d0$e01dd470$@thetaphi.de>
References: <AANLkTin3uDNGvlEzSr_53i3HXROyCeb8WhZBo3QfpVnK@mail.gmail.com>
	<AANLkTimD4pUFeTcyNcEsNV8c5f7b0wex7N49-8qRllFZ@mail.gmail.com>
	<AANLkTin3TAaxEL26oq_ejIW9lSAK2CE0HIMn1z3p6dld@mail.gmail.com>
	<025701cb1f39$f55f46d0$e01dd470$@thetaphi.de>
Date: Fri, 9 Jul 2010 16:00:45 +0530
Message-ID: <AANLkTimpmCw83AfM9seXpkZ-VOUd1jjLx0Yw4mXvEDCL@mail.gmail.com>
Subject: Re: Why not normalization?
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e887eb3548e5d048af1e521
X-Virus-Checked: Checked by ClamAV on apache.org

--e0cb4e887eb3548e5d048af1e521
Content-Type: text/plain; charset=ISO-8859-1

Thanx

On Fri, Jul 9, 2010 at 1:10 PM, Uwe Schindler <uwe@thetaphi.de> wrote:

> > Thanks for your valuble comments. Yes I observed tha, once the number of
> > terms of the goes up, fieldNorm value goes down correspondingly. I think,
> > therefore there won't be any default due to the variation of total number
> of
> > terms in the document. Am I right?
>
> With the current scoring model advanced statistics are not available. There
> are currently some approaches to add BM25 support to Lucene, for what the
> index format needs to be enhanced to contain more statistics (number of
> terms per document, avg number of terms per document,...).
>
> > On Thu, Jul 8, 2010 at 9:34 AM, Rebecca Watson <bec.watson@gmail.com>
> > wrote:
> >
> > > hi,
> > >
> > > > 1) Although Lucene uses tf to calculate scoring it seems to me that
> > > > term frequency has not been normalized. Even if I index several
> > > > documents, it does not normalize tf value. Therefore, since the
> > > > total number of words in index documents are varied, can't there be
> > > > a fault in Lucene's
> > > scoring?
> > >
> > > tf = term frequency i.e. the number of times the term appears in the
> > > document, while idf is inverse document frequency - is a measure of
> > > how rare a term is, i.e. related to how many documents the term
> > > appears in.
> > >
> > > if term1 occurs more frequently in a document i.e. tf is higher, you
> > > want to weight the document higher when you search for term1
> > >
> > > but if term1 is a very frequent term, ie. in lots of documents, then
> > > its probably not as important to an overall search (where we have
> > > term1, term2 etc) so you want to downweight it (idf comes in)
> > >
> > > then the normalisations like length normalisation (allow for 'fair'
> > > scoring across varied field length) come in too.
> > >
> > > the tf-idf scoring formula used by lucene is a  scoring method that's
> > > been around a long long time... there are competing scoring metrics
> > > but that's an IR thing and not an argument you want to start on the
> > > lucene lists! :)
> > >
> > > these are IR ('information retrieval') concepts and you might want to
> > > start by going to through the tf-idf scoring / some explanations for
> > > this kind of scoring.
> > >
> > > http://en.wikipedia.org/wiki/Tf%E2%80%93idf
> > > http://wiki.apache.org/lucene-java/InformationRetrieval
> > >
> > >
> > > > 2) What is the formula to calculate this fieldNorm value?
> > >
> > > in terms of how lucene implements its tf-idf scoring - you can see
> here:
> > > http://lucene.apache.org/java/3_0_2/scoring.html
> > >
> > > also, the lucene in action book is a really good book if you are
> > > starting out with lucene (and will save you a lot of grief with
> > > understanding lucene / setting up your application!), it covers all
> > > the basics and then moves on to more advanced stuff and has lots of
> > > code examples too:
> > > http://www.manning.com/hatcher2/
> > >
> > > hope that helps,
> > >
> > > bec :)
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--e0cb4e887eb3548e5d048af1e521--

From java-user-return-46677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 11:36:32 2010
Return-Path: <java-user-return-46677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31022 invoked from network); 9 Jul 2010 11:36:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 11:36:32 -0000
Received: (qmail 90279 invoked by uid 500); 9 Jul 2010 11:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89761 invoked by uid 500); 9 Jul 2010 11:36:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89750 invoked by uid 99); 9 Jul 2010 11:36:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 11:36:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 11:36:17 +0000
Received: from em111-188-107-99.pool.e-mobile.ne.jp (EM111-188-107-99.pool.e-mobile.ne.jp [111.188.107.99])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id 91FE6AAC8A
	for <java-user@lucene.apache.org>; Fri,  9 Jul 2010 20:34:09 +0900 (JST)
Message-ID: <4C37092F.6040601@r.email.ne.jp>
Date: Fri, 09 Jul 2010 20:34:07 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.1.10) Gecko/20100512 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: scoring and index size
References: <AANLkTilUjbHcPfdnzXdPFwkUBcUPCXNsdHAjIrIs4Qy7@mail.gmail.com>	<025601cb1f39$7f9e2a60$7eda7f20$@thetaphi.de> <AANLkTil_Gogqtuz11847SvA04HtVupHROpdwNyLEej-o@mail.gmail.com>
In-Reply-To: <AANLkTil_Gogqtuz11847SvA04HtVupHROpdwNyLEej-o@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

(10/07/09 19:30), manjula wijewickrema wrote:
> Uwe, thanx for your comments. Following is the code I used in this case.
> Could you pls. let me know where I have to insert UNLIMITED field length?
> and how?
> Tanx again!
> Manjula
>
>    
Manjula,

You can set UNLIMITED field length to IW constructor:

http://lucene.apache.org/java/2_9_3/api/all/org/apache/lucene/index/IndexWriter.html#IndexWriter%28org.apache.lucene.store.Directory,%20org.apache.lucene.analysis.Analyzer,%20boolean,%20org.apache.lucene.index.IndexWriter.MaxFieldLength%29

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 12:44:03 2010
Return-Path: <java-user-return-46678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56733 invoked from network); 9 Jul 2010 12:44:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 12:44:02 -0000
Received: (qmail 58204 invoked by uid 500); 9 Jul 2010 12:43:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55434 invoked by uid 500); 9 Jul 2010 12:43:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54645 invoked by uid 99); 9 Jul 2010 12:43:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 12:43:53 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [194.25.134.18] (HELO mailout04.t-online.de) (194.25.134.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 12:43:44 +0000
Received: from fwd00.aul.t-online.de (fwd00.aul.t-online.de )
	by mailout04.t-online.de with smtp 
	id 1OXCvL-0006ps-Qq; Fri, 09 Jul 2010 14:43:23 +0200
Received: from HGBT400S (VUwoc8ZDZhiLoGm2y87kjFt5IpIR8PmP028PFIPM7sjtlZwfDjtkG-fI2+QBdrBwjw@[87.147.214.128]) by fwd00.t-online.de
	with esmtp id 1OXCvB-1MAcAC0; Fri, 9 Jul 2010 14:43:13 +0200
From: "Hans-Gunther Birken" <hgbirken@t-online.de>
To: <java-user@lucene.apache.org>
Subject: Searching docs with multi-value fields
Date: Fri, 9 Jul 2010 14:43:18 +0200
Message-ID: <48B0AA1D72D74BCC938101DEE10AD5E2@HGBT400S>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0012_01CB1F75.12CE8470"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcsfZE6vhphduAx1Tkicb0vrfrglYw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.1.7600.16385
X-ID: VUwoc8ZDZhiLoGm2y87kjFt5IpIR8PmP028PFIPM7sjtlZwfDjtkG-fI2+QBdrBwjw
X-TOI-MSGID: eaa73b71-c4e6-4d18-8e40-44f93d364b9f
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0012_01CB1F75.12CE8470
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I'm examining the following search problem. Consider a document with two
multi-value fields.

 

Document doc = new Document();

 

doc.add(new Field("f1", "a1", Field.Store.YES, Field.Index.ANALYZED));
doc.add(new Field("f1", "a2", Field.Store.YES, Field.Index.ANALYZED));
doc.add(new Field("f1", "a3", Field.Store.YES, Field.Index.ANALYZED));

 

doc.add(new Field("f2", "b1", Field.Store.YES, Field.Index.ANALYZED));
doc.add(new Field("f2", "b2", Field.Store.YES, Field.Index.ANALYZED));
doc.add(new Field("f2", "b3", Field.Store.YES, Field.Index.ANALYZED));

 

The following search expression is applied:

f1:ax AND f2:by

where x, y  is 1,2, or 3.

 

Thus  the search condition f1:a2 AND f2:b2 should return the above document
whereas  the  condition  f1:a1  AND f2:b2 should return no result. Thus the
search  should  return  the  document if and only if the conditions of each
field are satisfied at the same "index" level.

 

Does anyone have an idea how to solve this problem using Lucene/Java?

 

Thanks

HGB

 


------=_NextPart_000_0012_01CB1F75.12CE8470--


From java-user-return-46679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 14:30:15 2010
Return-Path: <java-user-return-46679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97979 invoked from network); 9 Jul 2010 14:30:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 14:30:14 -0000
Received: (qmail 31136 invoked by uid 500); 9 Jul 2010 14:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31025 invoked by uid 500); 9 Jul 2010 14:30:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31017 invoked by uid 99); 9 Jul 2010 14:30:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 14:30:11 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [77.238.189.44] (HELO smtp105-mob.biz.mail.ird.yahoo.com) (77.238.189.44)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 09 Jul 2010 14:30:03 +0000
Received: (qmail 16113 invoked from network); 9 Jul 2010 14:29:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:References:In-Reply-To:X-Apple-Yahoo-Original-Message-Folder:Mime-Version:Content-Type:Content-Transfer-Encoding:Message-Id:X-Mailer:From:X-Apple-Yahoo-Replied-Msgid:Subject:Date:To;
  b=YwRmoPdOeKOl1hB4/ywp4Qxj0k0E01O4Ep+seNd1ygZTM8lSf2Ze6NCEVC/BhW3ElXHLm/Abtz36hnYL1K94PZJJ9HgOkCNd/V6XKr2lp/+oE/TOxmMveNU1iH05lprBYl54Ql/xt/zRJmG6LCYwdBd9nx7FOcz7HkX74ut92Kk=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1278685782; bh=33rmevxhYstoCcJdMZxdOHE0scGh2NgZNeG+0c3z/GA=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:References:In-Reply-To:X-Apple-Yahoo-Original-Message-Folder:Mime-Version:Content-Type:Content-Transfer-Encoding:Message-Id:X-Mailer:From:X-Apple-Yahoo-Replied-Msgid:Subject:Date:To; b=uov77USR1I9/XwxVyh37+nUu8IDZetDZp5J91LgHUY7V8lWsyrT5jb8Re7Xs1eUIcwcRpm4h8uoQ6U9AFhXiw/voZrMDlmW0WR1aJP3oGgUc+O8a/ILp8yG3AE1KUvLnq0pcW3ZD5pI+HWxNS2Io3GS+RijYlk54BgtTnCOCipU=
Received: from [10.44.88.225] (markharw00d@82.132.139.209 with xymcookie)
        by smtp105-mob.biz.mail.ird.yahoo.com with SMTP; 09 Jul 2010 14:29:40 +0000 GMT
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
X-YMail-OSG: 59aT3RcVM1lxNVSrYjxQ4TO2Dzmk30yLPPVGlcTbhd399Lh
 SjG7Mm0i9vqqUNtSPLHg68CrA.bGkFBGykKkC9UbbAoOEYNd9ot9EWEfgpe1
 eGjPuCiaFMy4v8OKadqWiC3lT87WFhxWKsqwwmEtWBPaYDU02ZhqCCaynpxk
 4UtpsQoxcm8sFDCSCl.KfdLT_Ch4dgsKxxKQxQ.ls1Fg5yqqBLG6L5HjyL5f
 MKtBTAj2N8a6Iy5enukD7OgYx3909B7yxu3jc4GtiSR1A1jNAAkX7s4IbigF
 Zy2w-
X-Yahoo-Newman-Property: ymail-3
References: <48B0AA1D72D74BCC938101DEE10AD5E2@HGBT400S>
In-Reply-To: <48B0AA1D72D74BCC938101DEE10AD5E2@HGBT400S>
X-Apple-Yahoo-Original-Message-Folder: Inbox
Mime-Version: 1.0 (iPhone Mail 8A293)
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Message-Id: <07EFFA33-F21C-493F-B5B2-B1F06CC27E2E@yahoo.co.uk>
X-Mailer: iPhone Mail (8A293)
From: Mark Harwood <markharw00d@yahoo.co.uk>
X-Apple-Yahoo-Replied-Msgid: 1_279510_AKluUtQAAVEnTDcZkQHD3A+vwAI
Subject: Re: Searching docs with multi-value fields
Date: Fri, 9 Jul 2010 15:30:24 +0100
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Check out lucene 2454 and accompanying slide show if your reason for doing t=
his is modelling repeating elements.=20
----------------------------------------


On 9 Jul 2010, at 13:43, "Hans-Gunther Birken" <hgbirken@t-online.de> wrote:=


> I'm examining the following search problem. Consider a document with two
> multi-value fields.
>=20
>=20
>=20
> Document doc =3D new Document();
>=20
>=20
>=20
> doc.add(new Field("f1", "a1", Field.Store.YES, Field.Index.ANALYZED));
> doc.add(new Field("f1", "a2", Field.Store.YES, Field.Index.ANALYZED));
> doc.add(new Field("f1", "a3", Field.Store.YES, Field.Index.ANALYZED));
>=20
>=20
>=20
> doc.add(new Field("f2", "b1", Field.Store.YES, Field.Index.ANALYZED));
> doc.add(new Field("f2", "b2", Field.Store.YES, Field.Index.ANALYZED));
> doc.add(new Field("f2", "b3", Field.Store.YES, Field.Index.ANALYZED));
>=20
>=20
>=20
> The following search expression is applied:
>=20
> f1:ax AND f2:by
>=20
> where x, y  is 1,2, or 3.
>=20
>=20
>=20
> Thus  the search condition f1:a2 AND f2:b2 should return the above documen=
t
> whereas  the  condition  f1:a1  AND f2:b2 should return no result. Thus th=
e
> search  should  return  the  document if and only if the conditions of eac=
h
> field are satisfied at the same "index" level.
>=20
>=20
>=20
> Does anyone have an idea how to solve this problem using Lucene/Java?
>=20
>=20
>=20
> Thanks
>=20
> HGB
>=20
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 15:09:36 2010
Return-Path: <java-user-return-46680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13898 invoked from network); 9 Jul 2010 15:09:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 15:09:36 -0000
Received: (qmail 1412 invoked by uid 500); 9 Jul 2010 15:09:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1330 invoked by uid 500); 9 Jul 2010 15:09:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1317 invoked by uid 99); 9 Jul 2010 15:09:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 15:09:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdixon@omniti.com designates 8.8.38.6 as permitted sender)
Received: from [8.8.38.6] (HELO edge.omniti.com) (8.8.38.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 15:09:25 +0000
DKIM-Signature: v=1; a=rsa-sha256; d=omniti.com; s=s1024; c=relaxed/relaxed;
	q=dns/txt; i=@omniti.com; t=1278687999;
	h=From:Subject:Date:To;
	bh=4JESy4pcnlNxRWe0D3mXe8goYSw6mgxQuRTfP0+6sWM=;
	b=dC6oS/vwccql2aT3PCR/0hNc3wqcWHJqu3B9e3LcICJciwzZkl/rEb+ihebiDSTc
	jka+lpztMQJZwRQWn615GwzxAupdycAYeg+go3tTk5Vsr11QjLmpxPa/KhStRwUV
	vs6gw69PMf35rpDlK1k1MW7dvZDmSKV/xcaBMEaD/jE=;
Authentication-Results:  edge smtp.user=jdixon@omniti.com; auth=pass (LOGIN)
Received: from [68.55.0.29] ([68.55.0.29:58253] helo=omniti.com)
	by edge (envelope-from <jdixon@omniti.com>)
	(ecelerity 2.2.2.35 r(26636M)) with ESMTPSA (cipher=AES256-SHA) 
	id D2/2C-17327-FFA373C4; Fri, 09 Jul 2010 11:06:39 -0400
Date: Fri, 9 Jul 2010 11:06:36 -0400
From: Jason Dixon <jdixon@omniti.com>
To: java-user@lucene.apache.org
Subject: Last day to submit your Surge 2010 CFP!
Message-ID: <20100709150636.GU4133@omniti.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.5.18 (2008-05-17)
X-Virus-Checked: Checked by ClamAV on apache.org

Today is your last chance to submit a CFP abstract for the 2010 Surge
Scalability Conference.  The event is taking place on Sept 30 and Oct 1,
2010 in Baltimore, MD.  Surge focuses on case studies that address
production failures and the re-engineering efforts that led to victory
in Web Applications or Internet Architectures.

You can find more information, including suggested topics and our
current list of speakers, online:

http://omniti.com/surge/2010

The final lineup should be available on the conference website next
week.  If you have questions about the CFP, attending Surge, or having
your business sponsor/exhibit at Surge 2010, please contact us at
surge@omniti.com.

Thanks!

-- 
Jason Dixon
OmniTI Computer Consulting, Inc.
jdixon@omniti.com
443.325.1357 x.241

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 17:46:47 2010
Return-Path: <java-user-return-46681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54164 invoked from network); 9 Jul 2010 17:46:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 17:46:47 -0000
Received: (qmail 98970 invoked by uid 500); 9 Jul 2010 17:46:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98907 invoked by uid 500); 9 Jul 2010 17:46:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98897 invoked by uid 99); 9 Jul 2010 17:46:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 17:46:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of nathaniel.auvil@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 17:46:36 +0000
Received: by qwb7 with SMTP id 7so564029qwb.35
        for <java-user@lucene.apache.org>; Fri, 09 Jul 2010 10:46:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Y1gHI5RaCclBVGVoo6bsME0pbjkrDzu9M/A61ufBoag=;
        b=iAMk8gNGczFa4ZtFL8rTzDqirx9gTwEDIYlHNtxgJUswNIlyQ7ZAoH67I0DAnHy5f6
         WN4ePZBHydiy1Xx3ZoIuvyGr2REYrGVqim9qfJn3Oil/7IlFbtJ8Dfk8TbCpq1YRHuxR
         x1SiyPItL2NTNbH+n/5E899X5oLbYpTZWex68=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DSRglj/xafAJ0nPRQmSoc/6CKXsrUaT13mE5GE9OuipqV8zMF6KKEUiWymbVfJI7BS
         9XVijxTYBuzzOPtasAyqYoKixH6xH2qsRMV8fcDu2B91SACIRDDoRzh7pdqW1IIsH2DU
         6W/TyCCk0D7c94fROT3Yj7G7HfbSRY/ebenjA=
MIME-Version: 1.0
Received: by 10.224.34.209 with SMTP id m17mr5760925qad.267.1278697575688; 
	Fri, 09 Jul 2010 10:46:15 -0700 (PDT)
Received: by 10.224.19.146 with HTTP; Fri, 9 Jul 2010 10:46:15 -0700 (PDT)
In-Reply-To: <100928.41325.qm@web52905.mail.re2.yahoo.com>
References: <AANLkTikzi3bAf0pwXwMvpz95R-OgyGbl7OEwKUEsBdIj@mail.gmail.com>
	<100928.41325.qm@web52905.mail.re2.yahoo.com>
Date: Fri, 9 Jul 2010 13:46:15 -0400
Message-ID: <AANLkTik_ABAfYOTREXmtq5ASh1RxX0nHe51KPY9-9eff@mail.gmail.com>
Subject: Re: search for a string which begins with a '$' character
From: Nathaniel Auvil <nathaniel.auvil@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f93d8eac62b04048af7fac9
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f93d8eac62b04048af7fac9
Content-Type: text/plain; charset=ISO-8859-1

this works, however WhitespaceAnalyzer is case sensitive.  Is there a way to
make it case insensitive?


On Sat, Jul 3, 2010 at 7:37 AM, Ahmet Arslan <iorixxx@yahoo.com> wrote:

> > I am using this analyzer:
> > @Analyzer(impl =
> > org.apache.lucene.analysis.standard.StandardAnalyzer.class)
> >
> > "$" is not inlcluded in the STOP_WORDS for this
> > analyzer.  Is there
> > somewhere else i should be looking?  When i use Luke
> > with the
> > standardAnalyzer, it does not parse the query.  Is
> > there a way to see why?
>
> "$" won't survive StandardAnalyzer. You can use WhitespaceAnalyzer instead.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00c09f93d8eac62b04048af7fac9--

From java-user-return-46682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 18:39:09 2010
Return-Path: <java-user-return-46682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75745 invoked from network); 9 Jul 2010 18:39:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 18:39:09 -0000
Received: (qmail 46881 invoked by uid 500); 9 Jul 2010 18:39:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46787 invoked by uid 500); 9 Jul 2010 18:39:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46779 invoked by uid 99); 9 Jul 2010 18:39:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 18:39:06 +0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of eduardop@occ.com.mx does not designate 97.65.90.20 as permitted sender)
Received: from [97.65.90.20] (HELO srvestadisticas.occprod.com) (97.65.90.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 18:38:58 +0000
Received: from occm01 ([10.10.79.169]) by srvestadisticas.occprod.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 9 Jul 2010 13:45:01 -0500
From: "Eduardo Pierdant" <eduardop@occ.com.mx>
To: <java-user@lucene.apache.org>
References: <48B0AA1D72D74BCC938101DEE10AD5E2@HGBT400S> <07EFFA33-F21C-493F-B5B2-B1F06CC27E2E@yahoo.co.uk>
In-Reply-To: <07EFFA33-F21C-493F-B5B2-B1F06CC27E2E@yahoo.co.uk>
Subject: RE: Searching docs with multi-value fields
Date: Fri, 9 Jul 2010 13:38:32 -0500
Organization: OCCMundial
Message-ID: <04b901cb1f95$efb2c610$cf185230$@occ.com.mx>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQInIj2ta9wGbDrNxWsDSaqucbMwRwL0grs3kdlDKhA=
Content-Language: es-mx
X-OriginalArrivalTime: 09 Jul 2010 18:45:01.0827 (UTC) FILETIME=[D6BA2530:01CB1F96]
X-Virus-Checked: Checked by ClamAV on apache.org

If I understood correctly, you should be done with MultiFieldQueryParser

Eduardo

-----Original Message-----
From: Mark Harwood [mailto:markharw00d@yahoo.co.uk] 
Sent: viernes, 09 de julio de 2010 09:30 a.m.
To: java-user@lucene.apache.org
Subject: Re: Searching docs with multi-value fields

Check out lucene 2454 and accompanying slide show if your reason for doing
this is modelling repeating elements. 
----------------------------------------


On 9 Jul 2010, at 13:43, "Hans-Gunther Birken" <hgbirken@t-online.de> wrote:

> I'm examining the following search problem. Consider a document with 
> two multi-value fields.
> 
> 
> 
> Document doc = new Document();
> 
> 
> 
> doc.add(new Field("f1", "a1", Field.Store.YES, Field.Index.ANALYZED)); 
> doc.add(new Field("f1", "a2", Field.Store.YES, Field.Index.ANALYZED)); 
> doc.add(new Field("f1", "a3", Field.Store.YES, Field.Index.ANALYZED));
> 
> 
> 
> doc.add(new Field("f2", "b1", Field.Store.YES, Field.Index.ANALYZED)); 
> doc.add(new Field("f2", "b2", Field.Store.YES, Field.Index.ANALYZED)); 
> doc.add(new Field("f2", "b3", Field.Store.YES, Field.Index.ANALYZED));
> 
> 
> 
> The following search expression is applied:
> 
> f1:ax AND f2:by
> 
> where x, y  is 1,2, or 3.
> 
> 
> 
> Thus  the search condition f1:a2 AND f2:b2 should return the above 
> document whereas  the  condition  f1:a1  AND f2:b2 should return no 
> result. Thus the search  should  return  the  document if and only if 
> the conditions of each field are satisfied at the same "index" level.
> 
> 
> 
> Does anyone have an idea how to solve this problem using Lucene/Java?
> 
> 
> 
> Thanks
> 
> HGB
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 09 18:57:43 2010
Return-Path: <java-user-return-46683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78595 invoked from network); 9 Jul 2010 18:57:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 9 Jul 2010 18:57:43 -0000
Received: (qmail 73970 invoked by uid 500); 9 Jul 2010 18:57:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73923 invoked by uid 500); 9 Jul 2010 18:57:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73915 invoked by uid 99); 9 Jul 2010 18:57:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Jul 2010 18:57:40 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.14] (HELO web52904.mail.re2.yahoo.com) (206.190.49.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 09 Jul 2010 18:57:31 +0000
Received: (qmail 53589 invoked by uid 60001); 9 Jul 2010 18:57:09 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1278701829; bh=PO5Fm21u+rF5PvQCyqRhcddKwqv3NSDGuSo97vdNOgY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=XNXCRvcDo/iQCf9+fhoENIdLzTasl2DEQPP9X40G72LVjT2JKL3S5vf8TPb7JVMTNwxkE1NtJ5ISkGhSGmFOJDtXABlO6jRjFrNfytdNiJ4Bmy1ROhEvqdaNMtiPAytYPtmD2pPwio5P5zfspXjzm0YsFOShPL0oBecy/Si8Uaw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=W0KmKb/Ukin5FbJRas+CRpjKHJ1ja24yoK+2qZWeROFG/GcxLkY7DhDDgYo+XU+Tp7Pzkh3YOfTSQd868fpoXC9C13a6pzElEOToh7E1x/QXI/pD2AVY1vWmzMDSC8uW2TFWr1yxAbahbw85Ndn4aYVWu9KHgVB38ZLwk7HCv58=;
Message-ID: <733769.53342.qm@web52904.mail.re2.yahoo.com>
X-YMail-OSG: VeZlA44VM1nyMs6UkfyR5p5ZZ1RqX68fqi2UDMZ3Urw3tfR
 nMBBupiIdcBB6aa5nOg0RbQqQCm78EYu6BLXn0Bh8yllYiL61CGh3TIX82AW
 y0VPQy.bQnHy.c063FNaDJEBJvzBnH6HfbR8hRBSg2QnVOR.itqdR8nuCw3K
 ITjLWhREbH.S7evMTrOfL2iagS5lwQPLrjrV7sYaJmO9GHkhgG.6.Un8hSx0
 5zRMCr61B3.TkJetEMhMHv.sPckoR2CxFQC.t6AKGRG_1lCD6LyYywBSO6Gw
 _lCGY8TZXNmfBysO.EaLcFyyXnw--
Received: from [78.168.95.108] by web52904.mail.re2.yahoo.com via HTTP; Fri, 09 Jul 2010 11:57:09 PDT
X-Mailer: YahooMailClassic/11.2.4 YahooMailWebService/0.8.104.274457
Date: Fri, 9 Jul 2010 11:57:09 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: search for a string which begins with a '$' character
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTik_ABAfYOTREXmtq5ASh1RxX0nHe51KPY9-9eff@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

> WhitespaceAnalyzer is case sensitive.=A0 Is there a way=0A> to=0A> make i=
t case insensitive?=0A=0AYou can build your custom analyzer using Whitespac=
eTokenizer + LowercaseFilter. Source code of an existing analyzer will help=
 you.=0A=0Apublic TokenStream tokenStream(String fieldName, Reader reader) =
{=0A    WhitespaceTokenizer tokenStream =3D new WhitespaceTokenizer(matchVe=
rsion, reader);=0A    tokenStream =3D new LowerCaseFilter(result); =0A    r=
eturn result;=0A  }=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 12 07:49:40 2010
Return-Path: <java-user-return-46684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35772 invoked from network); 12 Jul 2010 07:49:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Jul 2010 07:49:40 -0000
Received: (qmail 85987 invoked by uid 500); 12 Jul 2010 07:49:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85684 invoked by uid 500); 12 Jul 2010 07:49:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85667 invoked by uid 99); 12 Jul 2010 07:49:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jul 2010 07:49:33 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FRT_ADULT2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jul 2010 07:49:27 +0000
Received: by vws10 with SMTP id 10so5776587vws.35
        for <java-user@lucene.apache.org>; Mon, 12 Jul 2010 00:49:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Nn7Qid+Iy329KcqIIlsyRGANZrxpVmhaCJzDeE51iLI=;
        b=JyDSzqlDTKf6eD1TUIZ+nWvCyKf0cvn3BapCKMQb8mqKlhU94WM5xcfzfM9+rk15Uv
         WqYqs0dDHdIWWBvc/kH3TewQqNGg885HVVHxT/NV0Z8GE6jiMOI48a6mYvIixJRF0aIp
         qfORF9+bcdVNXf0l1FilFrfml9Zq6tPH+7/JA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=OOCGLbimtH1y+DcR5pWPZfytMl70K4SnhF54RkKyI4ZauaPEOL3CfUz9YX4kQgBO4Y
         5XjHGpdpZnZU+ax/s/L2yGdU1ukU6eYocLTa0bjD28Y8IKx7V72068JtIEAY3wUvHJaF
         rVR+hIK0l4uEYEhdyG1c1JYr5AZLkBTR1o8Zg=
MIME-Version: 1.0
Received: by 10.220.127.4 with SMTP id e4mr6000944vcs.95.1278920942169; Mon, 
	12 Jul 2010 00:49:02 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Mon, 12 Jul 2010 00:49:02 -0700 (PDT)
In-Reply-To: <4C37092F.6040601@r.email.ne.jp>
References: <AANLkTilUjbHcPfdnzXdPFwkUBcUPCXNsdHAjIrIs4Qy7@mail.gmail.com>
	<025601cb1f39$7f9e2a60$7eda7f20$@thetaphi.de>
	<AANLkTil_Gogqtuz11847SvA04HtVupHROpdwNyLEej-o@mail.gmail.com>
	<4C37092F.6040601@r.email.ne.jp>
Date: Mon, 12 Jul 2010 13:19:02 +0530
Message-ID: <AANLkTikJIkdc02Qb7r3KkQjWemZriSpQ6z8clUZNByCt@mail.gmail.com>
Subject: Re: scoring and index size
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636e1ef9d742db9048b2bfcf1
X-Virus-Checked: Checked by ClamAV on apache.org

--001636e1ef9d742db9048b2bfcf1
Content-Type: text/plain; charset=ISO-8859-1

Hi Koji,

Thanks for your information

Manjula



On Fri, Jul 9, 2010 at 5:04 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:

> (10/07/09 19:30), manjula wijewickrema wrote:
>
>> Uwe, thanx for your comments. Following is the code I used in this case.
>> Could you pls. let me know where I have to insert UNLIMITED field length?
>> and how?
>> Tanx again!
>> Manjula
>>
>>
>>
> Manjula,
>
> You can set UNLIMITED field length to IW constructor:
>
>
> http://lucene.apache.org/java/2_9_3/api/all/org/apache/lucene/index/IndexWriter.html#IndexWriter%28org.apache.lucene.store.Directory,%20org.apache.lucene.analysis.Analyzer,%20boolean,%20org.apache.lucene.index.IndexWriter.MaxFieldLength%29
>
> Koji
>
> --
> http://www.rondhuit.com/en/
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636e1ef9d742db9048b2bfcf1--

From java-user-return-46685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 12 08:01:51 2010
Return-Path: <java-user-return-46685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38663 invoked from network); 12 Jul 2010 08:01:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Jul 2010 08:01:51 -0000
Received: (qmail 2649 invoked by uid 500); 12 Jul 2010 08:01:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2308 invoked by uid 500); 12 Jul 2010 08:01:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2298 invoked by uid 99); 12 Jul 2010 08:01:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jul 2010 08:01:44 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,HTML_OBFUSCATE_05_10,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jul 2010 08:01:37 +0000
Received: by vws10 with SMTP id 10so5786771vws.35
        for <java-user@lucene.apache.org>; Mon, 12 Jul 2010 01:00:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=AATectBjTbbXzfigjk2vubMGnmO8bYXUMIDSLf+kanU=;
        b=Ve1taV9Qk2LxeAmxfCqGKE29d36oFSy9RZUtd/dDwIFPXWTZsF854tgfCIqitiJcnZ
         cWvUGG1uB+Et9bY7V7Q3hGzd9snv8s7TGGVxKHjG3HggUvv8Lewjxl5GDc34Lkc7Mh43
         uj54kew4g4NLM7MoNmu3JNcOYiCsDvI/sUqjQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=SG61VXmrTEb711Mk9vgw7BO1I8GuajAKw0n7WD2ehSBvRkIrEDWNy8Gq+mvXNAYxEB
         SKAHKzJLWswvql3k6ThTYCAf9+AQC60wyBJVEioorNNR16uJAOlfgNOQJrlfmqG4T2Y4
         DXfK7h3RjpFC4YqFA6Rke15NFUAsTvwi6chjU=
MIME-Version: 1.0
Received: by 10.220.58.74 with SMTP id f10mr6768013vch.86.1278921609951; Mon, 
	12 Jul 2010 01:00:09 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Mon, 12 Jul 2010 01:00:09 -0700 (PDT)
Date: Mon, 12 Jul 2010 13:30:09 +0530
Message-ID: <AANLkTikvanSeg5MuJ6FtF2oOf3bAJ0UbsVgjZMsoauQh@mail.gmail.com>
Subject: MaxFieldLength
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00235445b87e41badc048b2c2411
X-Virus-Checked: Checked by ClamAV on apache.org

--00235445b87e41badc048b2c2411
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I have seen that, onece the field length of a document goes over a certain
limit (
http://lucene.apache.org/java/2_9_3/api/all/org/apache/lucene/index/IndexWriter.html#DEFAULT_MAX_FIELD_LENGTH
gives
it as 10,000 terms-default) Lucene truncates those documents. Is there any
possibility to truncate documents, if we increase the number of indexed
documents (assume, there are no any individual documents which exceed the
default MaxFieldLength of Lucene)?

Thanx
Manjula.

--00235445b87e41badc048b2c2411--

From java-user-return-46686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 12 08:14:00 2010
Return-Path: <java-user-return-46686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44403 invoked from network); 12 Jul 2010 08:14:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Jul 2010 08:14:00 -0000
Received: (qmail 14371 invoked by uid 500); 12 Jul 2010 08:13:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14000 invoked by uid 500); 12 Jul 2010 08:13:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13989 invoked by uid 99); 12 Jul 2010 08:13:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jul 2010 08:13:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoudengpeng@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jul 2010 08:13:46 +0000
Received: by pxi11 with SMTP id 11so3581540pxi.35
        for <java-user@lucene.apache.org>; Mon, 12 Jul 2010 01:12:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=cHjUngLdavsqfPSQX/CPLM+DOpn3XXyaOkFSEHccn4c=;
        b=Wb9A16B/6KfGqyrDeCqr9PZeh4CbCN3JEt0wVeHjv/xJbxHtAZsAHP8/3SQeC0nBIq
         ApS2jPMvwFA/9yO3XGnVXK70x+k45O2SSB9+B8Mp9wl1Na90rPAsaqL68wiecDOqo332
         yA0BtuIe+0kW1bUfFneC79g5hSnuIppg9JFVE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Ea60lE2EY+f8ICqIkmKw/cymI8ldDju7ZpCx/JZAgIJU646NmUvr8dlLA471auELHn
         QoPuh/Z7CVuDFRVXE0RXUyNqgerIQoD0weHzWqLA+XY8YmOkpT/7BSWsBig4Dg7PU/mL
         OtAQnyA787tUE0hfM19PsL4Uml2NUoW9vVjw4=
MIME-Version: 1.0
Received: by 10.142.136.1 with SMTP id j1mr3557484wfd.26.1278922344843; Mon, 
	12 Jul 2010 01:12:24 -0700 (PDT)
Received: by 10.142.132.15 with HTTP; Mon, 12 Jul 2010 01:12:24 -0700 (PDT)
Date: Mon, 12 Jul 2010 16:12:24 +0800
Message-ID: <AANLkTikzPXX1IWgoMJRfCvfXQXSEWDwEZPMIB6eaqWFX@mail.gmail.com>
Subject: How to implement fuzzy phrase search with Lucene?
From: a peng <zhoudengpeng@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32cc60f490a048b2c50cd
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd32cc60f490a048b2c50cd
Content-Type: text/plain; charset=ISO-8859-1

Hi, I have a requirement recently to implement fuzzy phrase, for example, in
the indexed document there is a sentence "I like lucene very much". And when
I search "I do like lucene very much" or "I like lucene much", I both want
to get the search result, can someone guide me how to implement this
feature?

I was trying to use PhraseQuery and setSlop method to implement this, but
found that if the search phrase contains a word that does't exist in the
indexed document, then I can not get any search result.

Thanks in advance.

Jason

--000e0cd32cc60f490a048b2c50cd--

From java-user-return-46687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 12 09:01:57 2010
Return-Path: <java-user-return-46687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56665 invoked from network); 12 Jul 2010 09:01:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Jul 2010 09:01:57 -0000
Received: (qmail 70286 invoked by uid 500); 12 Jul 2010 09:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69964 invoked by uid 500); 12 Jul 2010 09:01:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69955 invoked by uid 99); 12 Jul 2010 09:01:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jul 2010 09:01:50 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paulmagrath@ie.ibm.com designates 194.196.100.166 as permitted sender)
Received: from [194.196.100.166] (HELO mtagate6.uk.ibm.com) (194.196.100.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jul 2010 09:01:39 +0000
Received: from d06nrmr1806.portsmouth.uk.ibm.com (d06nrmr1806.portsmouth.uk.ibm.com [9.149.39.193])
	by mtagate6.uk.ibm.com (8.13.1/8.13.1) with ESMTP id o6C8xHnN003866
	for <java-user@lucene.apache.org>; Mon, 12 Jul 2010 08:59:17 GMT
Received: from d06av06.portsmouth.uk.ibm.com (d06av06.portsmouth.uk.ibm.com [9.149.37.217])
	by d06nrmr1806.portsmouth.uk.ibm.com (8.13.8/8.13.8/NCO v10.0) with ESMTP id o6C8xHOM1523878
	for <java-user@lucene.apache.org>; Mon, 12 Jul 2010 09:59:17 +0100
Received: from d06av06.portsmouth.uk.ibm.com (loopback [127.0.0.1])
	by d06av06.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVout) with ESMTP id o6C8xHES028906
	for <java-user@lucene.apache.org>; Mon, 12 Jul 2010 02:59:17 -0600
Received: from d06ml902.portsmouth.uk.ibm.com (d06ml902.portsmouth.uk.ibm.com [9.149.38.252])
	by d06av06.portsmouth.uk.ibm.com (8.14.4/8.13.1/NCO v10.0 AVin) with ESMTP id o6C8xHha028898
	for <java-user@lucene.apache.org>; Mon, 12 Jul 2010 02:59:17 -0600
Subject: AUTO: Paul Magrath is out of the office (returning 13/07/2010)
Auto-Submitted: auto-generated
From: Paul D Magrath <paulmagrath@ie.ibm.com>
To: java-user@lucene.apache.org
Message-ID: <OFAF99FD1B.8EF7BA02-ON8025775E.0031F668-8025775E.0031F669@ie.ibm.com>
Date: Mon, 12 Jul 2010 10:05:43 +0100
X-MIMETrack: Serialize by Router on D06ML902/06/M/IBM(Release 8.0.1|February 07, 2008) at
 12/07/2010 10:05:44
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


I am out of the office until 13/07/2010.




Note: This is an automated response to your message  "Re: scoring and index
size" sent on 12/7/10 8:49:02.

This is the only notification you will receive while this person is away.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 12 22:28:59 2010
Return-Path: <java-user-return-46688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60259 invoked from network); 12 Jul 2010 22:28:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 12 Jul 2010 22:28:59 -0000
Received: (qmail 5217 invoked by uid 500); 12 Jul 2010 22:28:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5169 invoked by uid 500); 12 Jul 2010 22:28:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5161 invoked by uid 99); 12 Jul 2010 22:28:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jul 2010 22:28:56 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Jul 2010 22:28:48 +0000
Received: by gwaa18 with SMTP id a18so1277961gwa.35
        for <java-user@lucene.apache.org>; Mon, 12 Jul 2010 15:27:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=hNUpGDtLBKhKOHzEPubA7YySSCJQgyRpQouMlLKMm7g=;
        b=nNxiWkUSXtYz/jnyuLHyK8UIAl23wuCU288UYPc05vyNToBmtUeN1HJY7T9w7hSPMs
         lMoyAoJLnM3ElnipFHmO29EwEMCJu6r9Z7cInho655wDgBPtcCeaARKTswN47Iku8Hl0
         eI+soc4hfc890rmyv4JtyhxXw33VuHzaoJ/Ns=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=uUbcOEY3p/MLN8Gi+0av1QQ/viy/TB0+s2wwuKBiQFhOHcntolCPFG3PyoHwePmLe/
         g3g1Y6R05aSwu+GQwjGLE2a+4y5SS2+qGTXRV2exS5kStYJDnHMOywWY+eJl2saoak6o
         NzOWkWj+cWG14qfEyaWw65N6AA1hjS9qFMSsg=
MIME-Version: 1.0
Received: by 10.150.66.14 with SMTP id o14mr2961637yba.125.1278973647582; Mon, 
	12 Jul 2010 15:27:27 -0700 (PDT)
Received: by 10.150.197.7 with HTTP; Mon, 12 Jul 2010 15:27:27 -0700 (PDT)
In-Reply-To: <AANLkTikvanSeg5MuJ6FtF2oOf3bAJ0UbsVgjZMsoauQh@mail.gmail.com>
References: <AANLkTikvanSeg5MuJ6FtF2oOf3bAJ0UbsVgjZMsoauQh@mail.gmail.com>
Date: Mon, 12 Jul 2010 18:27:27 -0400
Message-ID: <AANLkTikp5wUCpWNDmeoqBUXDHZx2CQkHQ9U0LA0QkiIP@mail.gmail.com>
Subject: Re: MaxFieldLength
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd51de4f0f7c6048b38417d
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd51de4f0f7c6048b38417d
Content-Type: text/plain; charset=ISO-8859-1

I'm not sure I understand your question. The number of documents
has no bearing on the field length of each, which is what the
max field length is all about. You can change the value here
by calling Indexwriter.setMaxFieldLength to something shorter
than the default.

So no, if no document exceeds the default (Terms, not characters),
no document will be truncated.

The 10,000 limit also has no bearing on how much space indexing
a document takes as long as there are fewer then 10,000 terms. That
is, a document with 5,000 terms will take up just as much space
with any MaxfieldLength > 5,000.

HTH
Erick

On Mon, Jul 12, 2010 at 4:00 AM, manjula wijewickrema
<manjula53@gmail.com>wrote:

> Hi,
>
> I have seen that, onece the field length of a document goes over a certain
> limit (
>
> http://lucene.apache.org/java/2_9_3/api/all/org/apache/lucene/index/IndexWriter.html#DEFAULT_MAX_FIELD_LENGTH
> gives
> it as 10,000 terms-default) Lucene truncates those documents. Is there any
> possibility to truncate documents, if we increase the number of indexed
> documents (assume, there are no any individual documents which exceed the
> default MaxFieldLength of Lucene)?
>
> Thanx
> Manjula.
>

--000e0cd51de4f0f7c6048b38417d--

From java-user-return-46689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 13 04:47:56 2010
Return-Path: <java-user-return-46689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74860 invoked from network); 13 Jul 2010 04:47:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Jul 2010 04:47:55 -0000
Received: (qmail 37454 invoked by uid 500); 13 Jul 2010 04:47:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37126 invoked by uid 500); 13 Jul 2010 04:47:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37118 invoked by uid 99); 13 Jul 2010 04:47:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 04:47:48 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 04:47:40 +0000
Received: by vws10 with SMTP id 10so7549886vws.35
        for <java-user@lucene.apache.org>; Mon, 12 Jul 2010 21:47:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=yY4Mj7oiNXbY604z2VaTq29B7K040I+Dm3T7chZTt3Q=;
        b=DNuew1RZJkc7JjwuWdi2GslW2dS3P7kCzFrBXIgnqYAdbnJQ8NyefJ6Rf38XfiG1Pm
         P+Let5mroXbPayulglItiFmUxyP0w1rnWxgECq+PbjiGF1liI1z14cEYMoQaxG7k2HXJ
         km4NVOwBpMRc/7es7pbkp/Efpfw+1/H8bq9YE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=LA9JOjihGlD/yHqdBj5ATcxpmFLkm0Go668jzhd+9Eduir2uclxxGO75IfijudqCBa
         GA6MWGg6mHxS5fO5W6EVtOTeflBH1mDfiPRbdGlFU7jVlkylkVJ3i5Emjn+NgtGQhAEd
         qSdUJFelHiAs/Nq0uqIoT8irBnxP3Dar9qiQo=
MIME-Version: 1.0
Received: by 10.220.121.144 with SMTP id h16mr7481392vcr.159.1278996439505; 
	Mon, 12 Jul 2010 21:47:19 -0700 (PDT)
Received: by 10.220.191.196 with HTTP; Mon, 12 Jul 2010 21:47:19 -0700 (PDT)
In-Reply-To: <AANLkTikp5wUCpWNDmeoqBUXDHZx2CQkHQ9U0LA0QkiIP@mail.gmail.com>
References: <AANLkTikvanSeg5MuJ6FtF2oOf3bAJ0UbsVgjZMsoauQh@mail.gmail.com>
	<AANLkTikp5wUCpWNDmeoqBUXDHZx2CQkHQ9U0LA0QkiIP@mail.gmail.com>
Date: Tue, 13 Jul 2010 10:17:19 +0530
Message-ID: <AANLkTik6mRNbH6hSDiDzdZb0Ur3rBvtCcOKdbRIclD2Y@mail.gmail.com>
Subject: Re: MaxFieldLength
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016369fa1bc721a6c048b3d901d
X-Virus-Checked: Checked by ClamAV on apache.org

--0016369fa1bc721a6c048b3d901d
Content-Type: text/plain; charset=ISO-8859-1

Ok Erick, answer is there. If there is no any document exceeds the default
maxfieldlength, then no any document will be truncated although we increase
the no. of documents in the index. A'm I correct? Thanx for your commitment.

Manjula.

On Tue, Jul 13, 2010 at 3:57 AM, Erick Erickson <erickerickson@gmail.com>wrote:

> I'm not sure I understand your question. The number of documents
> has no bearing on the field length of each, which is what the
> max field length is all about. You can change the value here
> by calling Indexwriter.setMaxFieldLength to something shorter
> than the default.
>
> So no, if no document exceeds the default (Terms, not characters),
> no document will be truncated.
>
> The 10,000 limit also has no bearing on how much space indexing
> a document takes as long as there are fewer then 10,000 terms. That
> is, a document with 5,000 terms will take up just as much space
> with any MaxfieldLength > 5,000.
>
> HTH
> Erick
>
> On Mon, Jul 12, 2010 at 4:00 AM, manjula wijewickrema
> <manjula53@gmail.com>wrote:
>
> > Hi,
> >
> > I have seen that, onece the field length of a document goes over a
> certain
> > limit (
> >
> >
> http://lucene.apache.org/java/2_9_3/api/all/org/apache/lucene/index/IndexWriter.html#DEFAULT_MAX_FIELD_LENGTH
> > gives
> > it as 10,000 terms-default) Lucene truncates those documents. Is there
> any
> > possibility to truncate documents, if we increase the number of indexed
> > documents (assume, there are no any individual documents which exceed the
> > default MaxFieldLength of Lucene)?
> >
> > Thanx
> > Manjula.
> >
>

--0016369fa1bc721a6c048b3d901d--

From java-user-return-46690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 13 07:43:09 2010
Return-Path: <java-user-return-46690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19096 invoked from network); 13 Jul 2010 07:43:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Jul 2010 07:43:08 -0000
Received: (qmail 61472 invoked by uid 500); 13 Jul 2010 07:43:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61142 invoked by uid 500); 13 Jul 2010 07:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61134 invoked by uid 99); 13 Jul 2010 07:43:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 07:43:03 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of collins.ethans@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 07:42:55 +0000
Received: by qyk12 with SMTP id 12so6169020qyk.14
        for <java-user@lucene.apache.org>; Tue, 13 Jul 2010 00:42:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=D+5TPs7Kbhx88HmSgnm6lFLyoeHUniKPn/f9peABWYo=;
        b=ClvwEdDKrTkOJSDhbPn3u/N64TmNBqsG0FA0iUCgoMl81iRK6Gcb4yk03o/vuZoFtF
         KVrWrU8j1VQTSnjWJkGOMULDL3MUlPHBu7L80n6oJKLyT1g8Fl2a8U+hSXKPxYWzcyzy
         uiTmCxlIp7/d2OJTVFKVwGX5xBER+RhCt5CB4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=eSpykoEac92fn+R8CCl6eBHzFH46byMgEZoY2mhQOr1R6CHZbARWTHpGPZO6se2X1B
         jH7DjqOu+aQALRGHUkamGhYgAX8tSmDNaQBLsjx540NA1svDQo2VI8y8e4u7yTp7im6d
         n93vIwlipDmgdTkQK/2L02WvXRoUx4JX25BVg=
Received: by 10.224.2.147 with SMTP id 19mr8418268qaj.57.1279006954240; Tue, 
	13 Jul 2010 00:42:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.225.84 with HTTP; Tue, 13 Jul 2010 00:42:14 -0700 (PDT)
From: Ethan Collins <collins.ethans@gmail.com>
Date: Tue, 13 Jul 2010 13:12:14 +0530
Message-ID: <AANLkTin1Rg_wJxQEQLsKM19wHgT0UOuJgjbBQVNaMg6_@mail.gmail.com>
Subject: ShingleFilter failing with more terms than index phrase
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I am using lucene 2.9.3 (via Solr 1.4.1) on windows and am trying to
understand ShingleFilter. I wrote the following code and find that if
I provide more words than the actual phrase indexed in the field, then
the search on that field fails (no score found with debugQuery=3Dtrue).

Here is an example to reproduce, with field names:
Id: 1
title_1: Nina Simone
title_2: I put a spell on you

Query (dismax) with:
- =93Nina Simone I put=94  <- Fails i.e. no score shown from title_1
search (using debugQuery)
- =93Nina Simone=94 <- SUCCESS

But, when I used Solr=92s Field Analysis with the =91shingle=92 field (give=
n
below) and tried =93Nina Simone I put=94, it succeeds. It=92s only during
the query that no score is provided. I also checked =91parsedquery=92 and
it shows disjunctionMaxQuery issuing the string =93Nina_Simone Simone_I
I_put=94 to the title_1 field.

title_1 and title_2 fields are of type =91shingle=92, defined as:

   <fieldType name=3D"shingle" class=3D"solr.TextField"
positionIncrementGap=3D"100" indexed=3D"true" stored=3D"true">
       <analyzer type=3D"index">
           <tokenizer class=3D"solr.StandardTokenizerFactory"/>
           <filter class=3D"solr.LowerCaseFilterFactory"/>
           <filter class=3D"solr.ShingleFilterFactory"
maxShingleSize=3D"2" outputUnigrams=3D"false"/>
       </analyzer>
       <analyzer type=3D"query">
           <tokenizer class=3D"solr.StandardTokenizerFactory"/>
           <filter class=3D"solr.LowerCaseFilterFactory"/>
           <filter class=3D"solr.ShingleFilterFactory"
maxShingleSize=3D"2" outputUnigrams=3D"false"/>
       </analyzer>
   </fieldType>

Note that I also have a catchall field which is text. I have qf set
to: 'id^2 catchall' and pf set to: 'title_1^1.5 title_2^1.2'

If I am missing something or doing something wrong please let me know.

-Ethan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 13 15:47:15 2010
Return-Path: <java-user-return-46691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24177 invoked from network); 13 Jul 2010 15:47:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Jul 2010 15:47:10 -0000
Received: (qmail 93537 invoked by uid 500); 13 Jul 2010 15:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92720 invoked by uid 500); 13 Jul 2010 15:47:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92712 invoked by uid 99); 13 Jul 2010 15:47:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 15:47:06 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 15:46:56 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o6DFkOlk018069
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 13 Jul 2010 11:46:25 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([fe80::813b:49a2:a4d5:6367%10]) with mapi; Tue, 13
 Jul 2010 11:46:24 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 13 Jul 2010 11:45:32 -0400
Subject: RE: ShingleFilter failing with more terms than index phrase
Thread-Topic: ShingleFilter failing with more terms than index phrase
Thread-Index: AcsiXw0V+3tED/+pRT20KNTM591ToQAQwkFQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147F764DA735@suex07-mbx-03.ad.syr.edu>
References: <AANLkTin1Rg_wJxQEQLsKM19wHgT0UOuJgjbBQVNaMg6_@mail.gmail.com>
In-Reply-To: <AANLkTin1Rg_wJxQEQLsKM19wHgT0UOuJgjbBQVNaMg6_@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=1.12.8161:2.4.5,1.2.40,4.0.166
 definitions=2010-07-13_02:2010-02-06,2010-07-13,2010-07-13 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgRXRoYW4sDQoNCllvdSdsbCBwcm9iYWJseSBnZXQgYmV0dGVyIGFuc3dlcnMgYWJvdXQgU29s
ciBzcGVjaWZpYyBzdHVmZiBvbiB0aGUgc29sci11c2VyQGEubC5vIGxpc3QuDQoNCkNoZWNrIG91
dCBQb3NpdGlvbkZpbHRlckZhY3RvcnkgLSBpdCBtYXkgYWRkcmVzcyB5b3VyIGlzc3VlOg0KDQpo
dHRwOi8vd2lraS5hcGFjaGUub3JnL3NvbHIvQW5hbHl6ZXJzVG9rZW5pemVyc1Rva2VuRmlsdGVy
cyNzb2xyLlBvc2l0aW9uRmlsdGVyRmFjdG9yeQ0KDQpTdGV2ZQ0KDQo+IC0tLS0tT3JpZ2luYWwg
TWVzc2FnZS0tLS0tDQo+IEZyb206IEV0aGFuIENvbGxpbnMgW21haWx0bzpjb2xsaW5zLmV0aGFu
c0BnbWFpbC5jb21dDQo+IFNlbnQ6IFR1ZXNkYXksIEp1bHkgMTMsIDIwMTAgMzo0MiBBTQ0KPiBU
bzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+IFN1YmplY3Q6IFNoaW5nbGVGaWx0ZXIg
ZmFpbGluZyB3aXRoIG1vcmUgdGVybXMgdGhhbiBpbmRleCBwaHJhc2UNCj4gDQo+IEkgYW0gdXNp
bmcgbHVjZW5lIDIuOS4zICh2aWEgU29sciAxLjQuMSkgb24gd2luZG93cyBhbmQgYW0gdHJ5aW5n
IHRvDQo+IHVuZGVyc3RhbmQgU2hpbmdsZUZpbHRlci4gSSB3cm90ZSB0aGUgZm9sbG93aW5nIGNv
ZGUgYW5kIGZpbmQgdGhhdCBpZiBJDQo+IHByb3ZpZGUgbW9yZSB3b3JkcyB0aGFuIHRoZSBhY3R1
YWwgcGhyYXNlIGluZGV4ZWQgaW4gdGhlIGZpZWxkLCB0aGVuIHRoZQ0KPiBzZWFyY2ggb24gdGhh
dCBmaWVsZCBmYWlscyAobm8gc2NvcmUgZm91bmQgd2l0aCBkZWJ1Z1F1ZXJ5PXRydWUpLg0KPiAN
Cj4gSGVyZSBpcyBhbiBleGFtcGxlIHRvIHJlcHJvZHVjZSwgd2l0aCBmaWVsZCBuYW1lczoNCj4g
SWQ6IDENCj4gdGl0bGVfMTogTmluYSBTaW1vbmUNCj4gdGl0bGVfMjogSSBwdXQgYSBzcGVsbCBv
biB5b3UNCj4gDQo+IFF1ZXJ5IChkaXNtYXgpIHdpdGg6DQo+IC0g4oCcTmluYSBTaW1vbmUgSSBw
dXTigJ0gIDwtIEZhaWxzIGkuZS4gbm8gc2NvcmUgc2hvd24gZnJvbSB0aXRsZV8xIHNlYXJjaA0K
PiAodXNpbmcgZGVidWdRdWVyeSkNCj4gLSDigJxOaW5hIFNpbW9uZeKAnSA8LSBTVUNDRVNTDQo+
IA0KPiBCdXQsIHdoZW4gSSB1c2VkIFNvbHLigJlzIEZpZWxkIEFuYWx5c2lzIHdpdGggdGhlIOKA
mHNoaW5nbGXigJkgZmllbGQgKGdpdmVuDQo+IGJlbG93KSBhbmQgdHJpZWQg4oCcTmluYSBTaW1v
bmUgSSBwdXTigJ0sIGl0IHN1Y2NlZWRzLiBJdOKAmXMgb25seSBkdXJpbmcgdGhlDQo+IHF1ZXJ5
IHRoYXQgbm8gc2NvcmUgaXMgcHJvdmlkZWQuIEkgYWxzbyBjaGVja2VkIOKAmHBhcnNlZHF1ZXJ5
4oCZIGFuZCBpdCBzaG93cw0KPiBkaXNqdW5jdGlvbk1heFF1ZXJ5IGlzc3VpbmcgdGhlIHN0cmlu
ZyDigJxOaW5hX1NpbW9uZSBTaW1vbmVfSSBJX3B1dOKAnSB0byB0aGUNCj4gdGl0bGVfMSBmaWVs
ZC4NCj4gDQo+IHRpdGxlXzEgYW5kIHRpdGxlXzIgZmllbGRzIGFyZSBvZiB0eXBlIOKAmHNoaW5n
bGXigJksIGRlZmluZWQgYXM6DQo+IA0KPiAgICA8ZmllbGRUeXBlIG5hbWU9InNoaW5nbGUiIGNs
YXNzPSJzb2xyLlRleHRGaWVsZCINCj4gcG9zaXRpb25JbmNyZW1lbnRHYXA9IjEwMCIgaW5kZXhl
ZD0idHJ1ZSIgc3RvcmVkPSJ0cnVlIj4NCj4gICAgICAgIDxhbmFseXplciB0eXBlPSJpbmRleCI+
DQo+ICAgICAgICAgICAgPHRva2VuaXplciBjbGFzcz0ic29sci5TdGFuZGFyZFRva2VuaXplckZh
Y3RvcnkiLz4NCj4gICAgICAgICAgICA8ZmlsdGVyIGNsYXNzPSJzb2xyLkxvd2VyQ2FzZUZpbHRl
ckZhY3RvcnkiLz4NCj4gICAgICAgICAgICA8ZmlsdGVyIGNsYXNzPSJzb2xyLlNoaW5nbGVGaWx0
ZXJGYWN0b3J5Ig0KPiBtYXhTaGluZ2xlU2l6ZT0iMiIgb3V0cHV0VW5pZ3JhbXM9ImZhbHNlIi8+
DQo+ICAgICAgICA8L2FuYWx5emVyPg0KPiAgICAgICAgPGFuYWx5emVyIHR5cGU9InF1ZXJ5Ij4N
Cj4gICAgICAgICAgICA8dG9rZW5pemVyIGNsYXNzPSJzb2xyLlN0YW5kYXJkVG9rZW5pemVyRmFj
dG9yeSIvPg0KPiAgICAgICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuTG93ZXJDYXNlRmlsdGVy
RmFjdG9yeSIvPg0KPiAgICAgICAgICAgIDxmaWx0ZXIgY2xhc3M9InNvbHIuU2hpbmdsZUZpbHRl
ckZhY3RvcnkiDQo+IG1heFNoaW5nbGVTaXplPSIyIiBvdXRwdXRVbmlncmFtcz0iZmFsc2UiLz4N
Cj4gICAgICAgIDwvYW5hbHl6ZXI+DQo+ICAgIDwvZmllbGRUeXBlPg0KPiANCj4gTm90ZSB0aGF0
IEkgYWxzbyBoYXZlIGEgY2F0Y2hhbGwgZmllbGQgd2hpY2ggaXMgdGV4dC4gSSBoYXZlIHFmIHNl
dA0KPiB0bzogJ2lkXjIgY2F0Y2hhbGwnIGFuZCBwZiBzZXQgdG86ICd0aXRsZV8xXjEuNSB0aXRs
ZV8yXjEuMicNCj4gDQo+IElmIEkgYW0gbWlzc2luZyBzb21ldGhpbmcgb3IgZG9pbmcgc29tZXRo
aW5nIHdyb25nIHBsZWFzZSBsZXQgbWUga25vdy4NCj4gDQo+IC1FdGhhbg0KPiANCj4gLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBs
dWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZh
LXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-46692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 13 16:43:16 2010
Return-Path: <java-user-return-46692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49152 invoked from network); 13 Jul 2010 16:43:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Jul 2010 16:43:16 -0000
Received: (qmail 7425 invoked by uid 500); 13 Jul 2010 16:43:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7380 invoked by uid 500); 13 Jul 2010 16:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7372 invoked by uid 99); 13 Jul 2010 16:43:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 16:43:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 16:43:05 +0000
Received: by yxh35 with SMTP id 35so393041yxh.35
        for <java-user@lucene.apache.org>; Tue, 13 Jul 2010 09:42:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=fQsqHMk6nttSN+Y1Tw1bTF0+0DrFSKRZWJ38WJ8I8GY=;
        b=stZQW4UZgVg8R0Nq2nrKYMm9vilWGOZt1Mpfdk7rfXgFtJHxKjhuwleIpe/9e/nV80
         ugKiIGkOlabogUyn3jFYVHO3aFY2aqmOiBhOL3ORM4VkHkinYx7/+/Q+0xps2NEi7LDs
         N/WerORbEE7q8ZTgA+qYXaqnzC7mteQERR8bE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MqmSVE9CDwv6EmIu3Ax3GQ1NhQkIQ6pTO2L84kpC5O5fvxgYZWk3p5c5+dCrF2Wu9p
         7hciHQnUbpcyj4grSnLhvmrvB090l/5opJBQkSkwDQLvs1kHjoR3TY2pdX6qL04bxjfP
         eacscrjnomcPvSqWylICksRcIBs/W5DXZinWk=
MIME-Version: 1.0
Received: by 10.150.58.20 with SMTP id g20mr7374006yba.24.1279039364418; Tue, 
	13 Jul 2010 09:42:44 -0700 (PDT)
Received: by 10.150.197.7 with HTTP; Tue, 13 Jul 2010 09:42:44 -0700 (PDT)
In-Reply-To: <AANLkTik6mRNbH6hSDiDzdZb0Ur3rBvtCcOKdbRIclD2Y@mail.gmail.com>
References: <AANLkTikvanSeg5MuJ6FtF2oOf3bAJ0UbsVgjZMsoauQh@mail.gmail.com>
	<AANLkTikp5wUCpWNDmeoqBUXDHZx2CQkHQ9U0LA0QkiIP@mail.gmail.com>
	<AANLkTik6mRNbH6hSDiDzdZb0Ur3rBvtCcOKdbRIclD2Y@mail.gmail.com>
Date: Tue, 13 Jul 2010 12:42:44 -0400
Message-ID: <AANLkTimarvN-qPwruhFvonOgg7dNSkX7ORmDtscReV74@mail.gmail.com>
Subject: Re: MaxFieldLength
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd34846f84fbc048b478e1a
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd34846f84fbc048b478e1a
Content-Type: text/plain; charset=ISO-8859-1

Yep, that's pretty much it..

Erick

On Tue, Jul 13, 2010 at 12:47 AM, manjula wijewickrema
<manjula53@gmail.com>wrote:

> Ok Erick, answer is there. If there is no any document exceeds the default
> maxfieldlength, then no any document will be truncated although we increase
> the no. of documents in the index. A'm I correct? Thanx for your
> commitment.
>
> Manjula.
>
> On Tue, Jul 13, 2010 at 3:57 AM, Erick Erickson <erickerickson@gmail.com
> >wrote:
>
> > I'm not sure I understand your question. The number of documents
> > has no bearing on the field length of each, which is what the
> > max field length is all about. You can change the value here
> > by calling Indexwriter.setMaxFieldLength to something shorter
> > than the default.
> >
> > So no, if no document exceeds the default (Terms, not characters),
> > no document will be truncated.
> >
> > The 10,000 limit also has no bearing on how much space indexing
> > a document takes as long as there are fewer then 10,000 terms. That
> > is, a document with 5,000 terms will take up just as much space
> > with any MaxfieldLength > 5,000.
> >
> > HTH
> > Erick
> >
> > On Mon, Jul 12, 2010 at 4:00 AM, manjula wijewickrema
> > <manjula53@gmail.com>wrote:
> >
> > > Hi,
> > >
> > > I have seen that, onece the field length of a document goes over a
> > certain
> > > limit (
> > >
> > >
> >
> http://lucene.apache.org/java/2_9_3/api/all/org/apache/lucene/index/IndexWriter.html#DEFAULT_MAX_FIELD_LENGTH
> > > gives
> > > it as 10,000 terms-default) Lucene truncates those documents. Is there
> > any
> > > possibility to truncate documents, if we increase the number of indexed
> > > documents (assume, there are no any individual documents which exceed
> the
> > > default MaxFieldLength of Lucene)?
> > >
> > > Thanx
> > > Manjula.
> > >
> >
>

--000e0cd34846f84fbc048b478e1a--

From java-user-return-46693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 13 21:18:41 2010
Return-Path: <java-user-return-46693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 416 invoked from network); 13 Jul 2010 21:18:41 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Jul 2010 21:18:41 -0000
Received: (qmail 31498 invoked by uid 500); 13 Jul 2010 21:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31312 invoked by uid 500); 13 Jul 2010 21:18:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31304 invoked by uid 99); 13 Jul 2010 21:18:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 21:18:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ihasmax@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 21:18:30 +0000
Received: by wwf26 with SMTP id 26so718084wwf.5
        for <java-user@lucene.apache.org>; Tue, 13 Jul 2010 14:18:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=NuqpIbfIhwbDJemIHj4RwI7iybnOI6kXC53V8RQ6+Tc=;
        b=god1eaqQyFFZi6BnayoL9rhaino653fvKbeXRnl5mQhM1rK3guxwVbDQDHN01075qQ
         l2meUHOQCoId9TvurGY3fnDBUdLuvmKvV78vZr5pb1mkjzzhGFTWw0F3Sf+Hq5s+whPs
         mihfFIGUIiuTVo+k9IuP9oEH+ng2siR6EgZ3w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=Ab7miRKzLSMdXUclRKk4jeBtIlbSrc6besXWech5b6AT2I5ixA/AEc6tgyqCACNRL3
         lJ/TKxzIqZKFY5WhYLoEgMBvKXlz/TbEYdm12gniTmMdVZUSOANqNdGIk3L1SpQV1ztv
         FY9Gf5TYidW0JUEowSozsgwgCnTeb1yAUZatI=
Received: by 10.227.129.149 with SMTP id o21mr839189wbs.176.1279055890126; 
	Tue, 13 Jul 2010 14:18:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.177.137 with HTTP; Tue, 13 Jul 2010 14:17:50 -0700 (PDT)
From: Max Lynch <ihasmax@gmail.com>
Date: Tue, 13 Jul 2010 16:17:50 -0500
Message-ID: <AANLkTilBoPY0BiXZjuvBAtWXfBkDHFn8LRoG9zLeaLAK@mail.gmail.com>
Subject: Continuously iterate over documents in index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016367fa92dfa9a13048b4b676a
X-Virus-Checked: Checked by ClamAV on apache.org

--0016367fa92dfa9a13048b4b676a
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I would like to continuously iterate over the documents in my lucene index
as the index is updated.  Kind of like a "stream" of documents.  Is there a
way I can achieve this?

Would something like this be sufficient (untested):

 int currentDocId = 0;
 while(true) {

     for(; currentDocId < reader.maxDoc(); currentDocId++) {

          if(!reader.isDeleted(currentDocId)) {
               Document d = reader.document(currentDocId);
          }
     }

     // Maybe sleep here or something

     IndexReader newReader = reader.reopen();
     if(newReader != reader) {
          reader.close();
          reader = newReader;
     }
}

Right now, I do some NLP  on the index that would slow down my indexing if
done at the same time, so that is why I'm looking for a solution that works
in the background like this.  Another concern I have is that starting from
scratch (fresh invocation of my program) requires me to load a lot of extra
data and then iterate through hundreds of thousands of documents just to get
to the newest docs that I haven't processed yet.  I would rather just start
from the new newest doc and go forward.

I am currently checking whether or not I've processed a Document by looking
up a field in the Document in a Mongo db, but is there a way I could
reliably use the id of the document from the reader to check to see if I've
looked at this document already?  I've heard that IndexReader.document() is
slow so I would like to skip that call if I know I've processed the document
already.

Any ideas?

Thanks,
Max

--0016367fa92dfa9a13048b4b676a--

From java-user-return-46694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 13 21:54:23 2010
Return-Path: <java-user-return-46694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32479 invoked from network); 13 Jul 2010 21:54:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Jul 2010 21:54:23 -0000
Received: (qmail 86042 invoked by uid 500); 13 Jul 2010 21:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85962 invoked by uid 500); 13 Jul 2010 21:54:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85954 invoked by uid 99); 13 Jul 2010 21:54:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 21:54:20 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 21:54:11 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/80) with ESMTP id o6DLo5c03491
	for <java-user@lucene.apache.org>; Tue, 13 Jul 2010 14:50:05 -0700 (PDT)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Tue, 13 Jul 2010 14:50:00 -0700
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 13 Jul 2010 14:49:57 -0700
Subject: Best practices for searcher memory usage?
Thread-Topic: Best practices for searcher memory usage?
Thread-Index: Acsi0ohrlPcZe8wYR8yNnDFCHoIV9Q==
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

We're getting up there in terms of corpus size for our Lucene indexing appl=
ication:
* 20 million documents
* all fields need to be stored
* 10 short fields / document=20
* 1 long free text field / document (analyzed with a custom shingle-based a=
nalyzer)
* 140GB total index size
* Optimized into a single segment
* Must run over NFS due to VMWare setup

I think I've already taken the most common steps to reduce memory requireme=
nts and increase performance on the searching side including:
* omitting norms on all fields except two
* omitting term vectors
* indexing as few fields as possible
* reusing a single searcher
* splitting the index up into N shards for ParallelMultiSearcher

The application will run with 10G of -Xmx but any less and it bails out. It=
 seems happier if we feed it 12GB. The searches are starting to bog down a =
bit (5-10 seconds for some queries)...

Our next step was to deploy the shards as RemoteSearchables for the same Pa=
rallelMultiSearcher over RMI - but before I do that I'm curious:
* are there other ways to get that memory usage down?
* are there performance optimizations that I haven't thought of?

Thanks,
-Chris


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 13 22:10:32 2010
Return-Path: <java-user-return-46695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77791 invoked from network); 13 Jul 2010 22:10:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Jul 2010 22:10:32 -0000
Received: (qmail 19713 invoked by uid 500); 13 Jul 2010 22:10:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19641 invoked by uid 500); 13 Jul 2010 22:10:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19632 invoked by uid 99); 13 Jul 2010 22:10:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 22:10:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 22:10:19 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id A75AB318BE
	for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 00:09:57 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id 964983172E
	for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 00:09:57 +0200 (CEST)
Received: from [192.168.178.47] (srbk-5d8075e4.pool.mediaWays.net [93.128.117.228])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id 74A4D31150
	for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 00:09:57 +0200 (CEST)
Message-Id: <A9ECFF40-C3D7-44FA-9E54-0AB48FB03535@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: Best practices for searcher memory usage?
Date: Wed, 14 Jul 2010 00:09:55 +0200
References: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org



Le 13-juil.-10 =E0 23:49, Christopher Condit a =E9crit :

> * are there performance optimizations that I haven't thought of?

The first and most important one I'd think of is get rid of NFS.
You can happily do a local copy which might, even for 10 Gb take less =20=

than 30 seconds at server start.

paul=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 13 23:12:01 2010
Return-Path: <java-user-return-46696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97876 invoked from network); 13 Jul 2010 23:12:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Jul 2010 23:12:00 -0000
Received: (qmail 10783 invoked by uid 500); 13 Jul 2010 23:11:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10696 invoked by uid 500); 13 Jul 2010 23:11:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10688 invoked by uid 99); 13 Jul 2010 23:11:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 23:11:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,MIME_QP_LONG_LINE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.6.168.132] (HELO mail.widas.de) (212.6.168.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 23:11:48 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.widas.de (Postfix) with ESMTP id A67A05D8057
	for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 01:11:14 +0200 (CEST)
X-Amavis-Modified: Mail body modified (using disclaimer) - mail.widas.de
X-Virus-Scanned: amavisd-new at widas.de
Received: from mail.widas.de ([127.0.0.1])
	by localhost (mail.widas.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id wPFZvY7JeH2N for <java-user@lucene.apache.org>;
	Wed, 14 Jul 2010 01:11:02 +0200 (CEST)
Received: from mail.widas.de (mail.widas.de [192.168.1.28])
	by mail.widas.de (Postfix) with ESMTP id A90675D8056
	for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 01:11:02 +0200 (CEST)
Date: Wed, 14 Jul 2010 01:11:02 +0200 (CEST)
From: =?utf-8?Q?Kai_Weing=C3=A4rtner?= <kai.weingaertner@widas.de>
To: java-user@lucene.apache.org
Message-ID: <22727457.1592.1279062662438.JavaMail.root@mail2.widas.de>
Subject: How to create a fuzzy suggest
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1591_8771782.1279062662437"
X-Originating-IP: [217.92.45.5]
X-Mailer: Zimbra 6.0.4_GA_2038.RHEL5 (ZimbraWebClient - SAF3 (Win)/6.0.4_GA_2038.RHEL5)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1591_8771782.1279062662437
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

Hello, 


I am trying to create a suggest search (search results are displayed while the user is entering the query) for names, but the search should also give results if the given name just sounds like an indexed name. However a perfect match should be ranked higher than a similar sounding match. 


I looked at the SpellChecker contrib, but this AFAIK cannot handle incomplete names (edge n-grams). 


So I came up with this idea and it would be great if anyone could tell me if that is sensible or if there is a better way: 


I create an analyzer to be run on the full names, which does the following 
- lowercase 
- build edge n-grams 
put these terms in the field (this would handle correctly spelled input) 


- run soundex on the n-grams 
put there soundexed n-grams in the field as well 


The incoming query will then also run through this analyzer with an or-default. So a correct spelling will match the normal n-grams plus the soundexed n-grams leading to a good score. A missspelled name would still match the soundexed n-grams, leading to a somewhat lower score. 


My current problem is that I don't know how to duplicate the tokens in the analyzer so I can add them as normal n-grams and soundexed n-grams. I suppose the TeeSinkTokenFilter will get me there, but I could not figure out how to add all tokens back in one stream. 


To recap, my questions are: Could this approach work to create a "fuzzy suggest"? How do I use the TeeSinkTokenFilter to separate and recombine the tokenstream. 


I hope that was clear, thanks for your help! 

	

Kai 	




Regelung im Bezug auf Paragraph 37a Absatz 4 HGB: WidasConcepts GmbH,
Geschaeftsfuehrer: Thomas Widmann und Christian Kappert,
Gerichtsstand Pforzheim, Registernummer: HRB 511442, Umsatzsteueridentifikationsnummer: DE205851091

Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte Informationen.
Wenn Sie nicht der richtige Adressat sind oder diese E-Mail irrtuemlich erhalten haben,
informieren Sie bitte sofort den Absender und vernichten Sie diese Mail.
Das unerlaubte Kopieren sowie die unbefugte Weitergabe dieser Mail sind nicht gestattet.

This e-mail may contain confidential and/or privileged information.
If you are not the intended recipient (or have received this e-mail in error) please
notify the sender immediately and destroy this e-mail.
Any unauthorized copying, disclosure or distribution of the material in this e-mail is strictly forbidden.


------=_Part_1591_8771782.1279062662437--

From java-user-return-46697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 13 23:14:05 2010
Return-Path: <java-user-return-46697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 822 invoked from network); 13 Jul 2010 23:14:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 13 Jul 2010 23:14:05 -0000
Received: (qmail 17705 invoked by uid 500); 13 Jul 2010 23:14:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17643 invoked by uid 500); 13 Jul 2010 23:14:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17635 invoked by uid 99); 13 Jul 2010 23:14:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 23:14:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Jul 2010 23:13:55 +0000
Received: by eyg5 with SMTP id 5so1409909eyg.35
        for <java-user@lucene.apache.org>; Tue, 13 Jul 2010 16:12:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received
         :in-reply-to:references:from:date:x-google-sender-auth:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=YFipDoU77kmFCY7JbDnwOQTz03FtFxz6Ab7jvQyGPe0=;
        b=yDmV6+e2Vdd5p8N0Gr1WNoALhOm3EoeWRwdiG3uTDlNtD96A6CZc62FZDid17S87Xk
         u5BxM7OjrA/fyiv35h82TgoCSqA6GQE2sNDtUdPwXyzcjZ2oC9sHVrkVwT+ufkNtBD+U
         MjQJX7G0ar/Y4xS45h5G/assbiDGwHhg2pp0U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=wd3ZM6QyczoJmLTrsIAV7OsMNuIdc4flbWwDXSlSD6RRVz13uU7mbtIQNcAzBlSrrq
         r9f9YdQFhHc5RyCrU/IopvO1/RjnX+pJJFu9an83FoioXslSrXzEME1IzfxViKO82mGg
         MeEsZh4eQWj23w4eFKHSoy8P/+O32fr2pvJwI=
Received: by 10.213.14.205 with SMTP id h13mr480052eba.90.1279062765421; Tue, 
	13 Jul 2010 16:12:45 -0700 (PDT)
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.213.20.148 with HTTP; Tue, 13 Jul 2010 16:12:25 -0700 (PDT)
In-Reply-To: <AANLkTilBoPY0BiXZjuvBAtWXfBkDHFn8LRoG9zLeaLAK@mail.gmail.com>
References: <AANLkTilBoPY0BiXZjuvBAtWXfBkDHFn8LRoG9zLeaLAK@mail.gmail.com>
From: Shashi Kant <skant@sloan.mit.edu>
Date: Tue, 13 Jul 2010 19:12:25 -0400
X-Google-Sender-Auth: K8iSr4G5Ly7aJiJvY-noiRFrHlc
Message-ID: <AANLkTil_QPJZC2ehzR6JTlWHeIUxw0rIU9-o3YUbew-A@mail.gmail.com>
Subject: Re: Continuously iterate over documents in index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jul 13, 2010 at 5:17 PM, Max Lynch <ihasmax@gmail.com> wrote:
> Hi,
> I would like to continuously iterate over the documents in my lucene inde=
x
> as the index is updated. =A0Kind of like a "stream" of documents. =A0Is t=
here a
> way I can achieve this?
>
> Would something like this be sufficient (untested):
>
> =A0int currentDocId =3D 0;
> =A0while(true) {
>
> =A0 =A0 for(; currentDocId < reader.maxDoc(); currentDocId++) {
>
> =A0 =A0 =A0 =A0 =A0if(!reader.isDeleted(currentDocId)) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 Document d =3D reader.document(currentDocId);
> =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 }
>
> =A0 =A0 // Maybe sleep here or something
>
> =A0 =A0 IndexReader newReader =3D reader.reopen();
> =A0 =A0 if(newReader !=3D reader) {
> =A0 =A0 =A0 =A0 =A0reader.close();
> =A0 =A0 =A0 =A0 =A0reader =3D newReader;
> =A0 =A0 }
> }


Looks ok,

>
> Right now, I do some NLP =A0on the index that would slow down my indexing=
 if
> done at the same time, so that is why I'm looking for a solution that wor=
ks
> in the background like this. =A0Another concern I have is that starting f=
rom
> scratch (fresh invocation of my program) requires me to load a lot of ext=
ra
> data and then iterate through hundreds of thousands of documents just to =
get
> to the newest docs that I haven't processed yet. =A0I would rather just s=
tart
> from the new newest doc and go forward.
>
> I am currently checking whether or not I've processed a Document by looki=
ng
> up a field in the Document in a Mongo db, but is there a way I could
> reliably use the id of the document from the reader to check to see if I'=
ve
> looked at this document already? =A0I've heard that IndexReader.document(=
) is
> slow so I would like to skip that call if I know I've processed the docum=
ent
> already.


You could have a field within each doc say "Processed" and store a
value Yes/No, next run a searcher query which should give you the
collection of unprocessed ones.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 06:39:05 2010
Return-Path: <java-user-return-46698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64816 invoked from network); 14 Jul 2010 06:39:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 06:39:04 -0000
Received: (qmail 26059 invoked by uid 500); 14 Jul 2010 06:39:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25326 invoked by uid 500); 14 Jul 2010 06:38:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25301 invoked by uid 99); 14 Jul 2010 06:38:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 06:38:57 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 06:38:49 +0000
Received: by pwj2 with SMTP id 2so5495929pwj.35
        for <multiple recipients>; Tue, 13 Jul 2010 23:38:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=EVBJRkUoJ5jC3iiQBKzjG5+Pp+SBPAHhaenWiyIzTPM=;
        b=iu4Ja6xwoOOZeyezYhyb/JeSLYKoCGEdxxro5NP/XLU29tNWuy6ZLH8zdCiqu2x/sK
         XgSFrkQwqX9Z/ZzOFBxgvUbUDHzWdXeIIRn2xcmnzSGOjhfvyv2Q3O8j1BVJvC3hT//P
         UkSt7SeL3vNWaHNZ2uR+20xjRbe56bVA3JCzs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=RgrwjLftp0ZyoPVJR70sJAiQerLcMNt6hh95cgyDRjdX3EZ+NBQrrJhuETxKfMOjAG
         DIFvwz6/rmfHi89qj0vSIhmJFQGilFzRR5mOdg4a3ZOAchHXlnZDsv8B2ut4hy//deEv
         UsKYzaPiKjUri0fOh7u6JiQgBZ5tT6oNLrYBM=
MIME-Version: 1.0
Received: by 10.142.162.17 with SMTP id k17mr5157513wfe.188.1279089508029; 
	Tue, 13 Jul 2010 23:38:28 -0700 (PDT)
Received: by 10.142.188.17 with HTTP; Tue, 13 Jul 2010 23:38:27 -0700 (PDT)
Date: Wed, 14 Jul 2010 14:38:27 +0800
Message-ID: <AANLkTinYSoZxS6WVWOTbV9umyWieB_kLrn1V4-Mtr2tl@mail.gmail.com>
Subject: Cache full text into memory
From: Li Li <fancyerii@gmail.com>
To: solr-user@lucene.apache.org, java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

     I want to cache full text into memory to improve performance.
Full text is only used to highlight in my application(But it's very
time consuming, My avg query time is about 250ms, I guess it will cost
about 50ms if I just get top 10 full text. Things get worse when get
more full text because in disk, it scatters erverywhere for a query.).
My full text per machine is about 200GB. The memory available for
store full text is about 10GB. So I want to compress it in memory.
Suppose compression ratio is 1:5, then I can load 1/4 full text in
memory. I need a Cache component for it. Has anyone faced the problem
before? I need some advice. Is it possbile using external tools such
as MemCached? Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 07:03:14 2010
Return-Path: <java-user-return-46699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1936 invoked from network); 14 Jul 2010 07:03:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 07:03:13 -0000
Received: (qmail 53412 invoked by uid 500); 14 Jul 2010 07:03:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52990 invoked by uid 500); 14 Jul 2010 07:03:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52974 invoked by uid 99); 14 Jul 2010 07:03:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 07:03:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of findbestopensource@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 07:02:57 +0000
Received: by pwj2 with SMTP id 2so5511761pwj.35
        for <multiple recipients>; Wed, 14 Jul 2010 00:02:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:cc:content-type;
        bh=OXdFibNZ1l8T1RV2niVhmidw28Pv7S0H/tv16ruGwak=;
        b=TRwr64DGvtVDw6hmWcX31Nbl5TI+YIxi2Oxj8/uNlBXAi0wj06KIaRLCe0Amua02Fw
         8/UB9l6YGwQLRNvOvH5ddqnh2lSFTn8S0Llp4jVFFwMiIiwvATJ48KJJKcbKecXOAjRz
         nEIffz3dC/PuJUwoWMkCTPIG5ho+LkluWilHM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=RHq6T496LBeLoS3Ah6T9dUuENdBIaPEeUstX+HWyNdGd+GRafLjThrut02Rxa0SklJ
         IO0Fs1CVqWT2WIR5uyU+qInljddfl7FStIXzy9GUdSEFTtj2JAWQ1gS4GC3tb+LAb+D0
         +CSS/RxpM1uni4vFKQyiiJ7+eQ6oh/qRLLdjc=
MIME-Version: 1.0
Received: by 10.142.164.14 with SMTP id m14mr18697370wfe.146.1279090955914; 
	Wed, 14 Jul 2010 00:02:35 -0700 (PDT)
Received: by 10.142.84.21 with HTTP; Wed, 14 Jul 2010 00:02:35 -0700 (PDT)
In-Reply-To: <AANLkTinYSoZxS6WVWOTbV9umyWieB_kLrn1V4-Mtr2tl@mail.gmail.com>
References: <AANLkTinYSoZxS6WVWOTbV9umyWieB_kLrn1V4-Mtr2tl@mail.gmail.com>
Date: Wed, 14 Jul 2010 12:32:35 +0530
Message-ID: <AANLkTikpjC4dLa63SgliJ3RIoD6E95aWQ3qyrf1ASfKw@mail.gmail.com>
Subject: Re: Cache full text into memory
From: findbestopensource <findbestopensource@gmail.com>
To: solr-user@lucene.apache.org
Cc: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd23f4a1015da048b539285
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd23f4a1015da048b539285
Content-Type: text/plain; charset=ISO-8859-1

You have two options
1. Store the compressed text as part of stored field in Solr.
2. Using external caching.
http://www.findbestopensource.com/tagged/distributed-caching
    You could use ehcache / Memcache / Membase.

The problem with external caching is you need to synchronize the deletions
and modification. Fetching the stored field from Solr is also faster.

Regards
Aditya
www.findbestopensource.com


On Wed, Jul 14, 2010 at 12:08 PM, Li Li <fancyerii@gmail.com> wrote:

>     I want to cache full text into memory to improve performance.
> Full text is only used to highlight in my application(But it's very
> time consuming, My avg query time is about 250ms, I guess it will cost
> about 50ms if I just get top 10 full text. Things get worse when get
> more full text because in disk, it scatters erverywhere for a query.).
> My full text per machine is about 200GB. The memory available for
> store full text is about 10GB. So I want to compress it in memory.
> Suppose compression ratio is 1:5, then I can load 1/4 full text in
> memory. I need a Cache component for it. Has anyone faced the problem
> before? I need some advice. Is it possbile using external tools such
> as MemCached? Thank you.
>

--000e0cd23f4a1015da048b539285--

From java-user-return-46700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 07:16:42 2010
Return-Path: <java-user-return-46700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32807 invoked from network); 14 Jul 2010 07:16:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 07:16:42 -0000
Received: (qmail 77614 invoked by uid 500); 14 Jul 2010 07:16:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77091 invoked by uid 500); 14 Jul 2010 07:16:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77076 invoked by uid 99); 14 Jul 2010 07:16:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 07:16:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of collins.ethans@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 07:16:25 +0000
Received: by vws10 with SMTP id 10so9744762vws.35
        for <multiple recipients>; Wed, 14 Jul 2010 00:16:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=MpEV3FExIQXHqNXKKGztK7h18inaygA0yRUO5DW2zJ0=;
        b=BkWEmFEU0Tjw/M92FusRtg5FlU03O481kWr71xwtAsICavaKU9XPzzNYc7/0Un0ZiC
         b9WgBXDdyjYrIsgq5iUZ4TmKOQN53PFvveH8YZ6IfmDD593/OAtnBhFTVm3+cM4mhKlJ
         llx+213hfjrrnoIrDb79Bd34VhUiTSpPuxR2g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=agpgMjTpcDDy3zplN3TUjzYrISUw0nHMlETmiU4MZwGP1TN+SRJ0UNBQS2feVq+x5C
         +GkaQOKjjO+1q5ruvzXzd4WCYjPfWWeTg6D/yi33K8h4LmDNE5wg78UgMycDhcSRidQ/
         2LI2fXOAu7kuxocg3d9EjxtdEFdjib8I1LrCA=
Received: by 10.229.86.10 with SMTP id q10mr10264737qcl.36.1279091764503; Wed, 
	14 Jul 2010 00:16:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.225.84 with HTTP; Wed, 14 Jul 2010 00:15:44 -0700 (PDT)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F764DA735@suex07-mbx-03.ad.syr.edu>
References: <AANLkTin1Rg_wJxQEQLsKM19wHgT0UOuJgjbBQVNaMg6_@mail.gmail.com> 
	<2D127F11DC79714E9B6A43AC9458147F764DA735@suex07-mbx-03.ad.syr.edu>
From: Ethan Collins <collins.ethans@gmail.com>
Date: Wed, 14 Jul 2010 12:45:44 +0530
Message-ID: <AANLkTint7MwcRj470-7NHth3ODevzuu7E0AUHvgn-JKK@mail.gmail.com>
Subject: Re: ShingleFilter failing with more terms than index phrase
To: java-user@lucene.apache.org, solr-user <solr-user@lucene.apache.org>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steve,

Thanks for your kind response. I checked PositionfilterFactory
(re-index as well) but that also didn't solve the problem. Interesting
the problem is not reproduceable from Solr's Field Analysis page, it
manifests only when it's in a query.

I guess the subject for this post is not very correct, it's not that
ShingleFilter is failing but -- using ShingleFilter, there is no score
provided by the shingle field when I pass more terms than the indexed
terms. I observe this using debugQuery.

I had actually posted to solr-user but received no response yet.
Probably because the problem is not clear at first glance. However,
there's an example I have put in the mail for someone interested to
try out and check if there's a problem. Let's see if I receive any
response.

-Ethan

On Tue, Jul 13, 2010 at 9:15 PM, Steven A Rowe <sarowe@syr.edu> wrote:
> Hi Ethan,
>
> You'll probably get better answers about Solr specific stuff on the solr-=
user@a.l.o list.
>
> Check out PositionFilterFactory - it may address your issue:
>
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.Position=
FilterFactory
>
> Steve
>
>> -----Original Message-----
>> From: Ethan Collins [mailto:collins.ethans@gmail.com]
>> Sent: Tuesday, July 13, 2010 3:42 AM
>> To: java-user@lucene.apache.org
>> Subject: ShingleFilter failing with more terms than index phrase
>>
>> I am using lucene 2.9.3 (via Solr 1.4.1) on windows and am trying to
>> understand ShingleFilter. I wrote the following code and find that if I
>> provide more words than the actual phrase indexed in the field, then the
>> search on that field fails (no score found with debugQuery=3Dtrue).
>>
>> Here is an example to reproduce, with field names:
>> Id: 1
>> title_1: Nina Simone
>> title_2: I put a spell on you
>>
>> Query (dismax) with:
>> - =93Nina Simone I put=94 =A0<- Fails i.e. no score shown from title_1 s=
earch
>> (using debugQuery)
>> - =93Nina Simone=94 <- SUCCESS
>>
>> But, when I used Solr=92s Field Analysis with the =91shingle=92 field (g=
iven
>> below) and tried =93Nina Simone I put=94, it succeeds. It=92s only durin=
g the
>> query that no score is provided. I also checked =91parsedquery=92 and it=
 shows
>> disjunctionMaxQuery issuing the string =93Nina_Simone Simone_I I_put=94 =
to the
>> title_1 field.
>>
>> title_1 and title_2 fields are of type =91shingle=92, defined as:
>>
>> =A0 =A0<fieldType name=3D"shingle" class=3D"solr.TextField"
>> positionIncrementGap=3D"100" indexed=3D"true" stored=3D"true">
>> =A0 =A0 =A0 =A0<analyzer type=3D"index">
>> =A0 =A0 =A0 =A0 =A0 =A0<tokenizer class=3D"solr.StandardTokenizerFactory=
"/>
>> =A0 =A0 =A0 =A0 =A0 =A0<filter class=3D"solr.LowerCaseFilterFactory"/>
>> =A0 =A0 =A0 =A0 =A0 =A0<filter class=3D"solr.ShingleFilterFactory"
>> maxShingleSize=3D"2" outputUnigrams=3D"false"/>
>> =A0 =A0 =A0 =A0</analyzer>
>> =A0 =A0 =A0 =A0<analyzer type=3D"query">
>> =A0 =A0 =A0 =A0 =A0 =A0<tokenizer class=3D"solr.StandardTokenizerFactory=
"/>
>> =A0 =A0 =A0 =A0 =A0 =A0<filter class=3D"solr.LowerCaseFilterFactory"/>
>> =A0 =A0 =A0 =A0 =A0 =A0<filter class=3D"solr.ShingleFilterFactory"
>> maxShingleSize=3D"2" outputUnigrams=3D"false"/>
>> =A0 =A0 =A0 =A0</analyzer>
>> =A0 =A0</fieldType>
>>
>> Note that I also have a catchall field which is text. I have qf set
>> to: 'id^2 catchall' and pf set to: 'title_1^1.5 title_2^1.2'
>>
>> If I am missing something or doing something wrong please let me know.
>>
>> -Ethan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 08:14:50 2010
Return-Path: <java-user-return-46701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16469 invoked from network); 14 Jul 2010 08:14:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 08:14:49 -0000
Received: (qmail 39834 invoked by uid 500); 14 Jul 2010 08:14:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39304 invoked by uid 500); 14 Jul 2010 08:14:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39291 invoked by uid 99); 14 Jul 2010 08:14:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 08:14:42 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 08:14:34 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Wed, 14 Jul 2010 10:13:53 +0200
Subject: Re: Best practices for searcher memory usage?
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Wed, 14 Jul 2010 10:13:48 +0200
Message-ID: <1279095228.2505.28.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2010-07-13 at 23:49 +0200, Christopher Condit wrote:
> * 20 million documents [...]
> * 140GB total index size
> * Optimized into a single segment

I take it that you do not have frequent updates? Have you tried to see
if you can get by with more segments without significant slowdown?

> The application will run with 10G of -Xmx but any less and it bails out. 
> It seems happier if we feed it 12GB. The searches are starting to bog 
> down a bit (5-10 seconds for some queries)...

10G sounds like a lot for that index. Two common memory-eaters are
sorting by field value and faceting. Could you describe what you're
doing in that regard?

Similarly, the 5-10 seconds for some queries seems very slow. Could you
give some examples on the queries that causes problems together with
some examples of fast queries and how long they take to execute?


The standard silver bullet for easy performance boost is to buy a couple
of consumer grade SSDs and put them on the local machine. If you're
gearing up to use more machines you might want to try this first.

Regards,
Toke


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 09:28:27 2010
Return-Path: <java-user-return-46702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78906 invoked from network); 14 Jul 2010 09:28:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 09:28:20 -0000
Received: (qmail 36867 invoked by uid 500); 14 Jul 2010 09:28:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35527 invoked by uid 500); 14 Jul 2010 09:28:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35506 invoked by uid 99); 14 Jul 2010 09:28:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 09:28:06 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of collins.ethans@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 09:27:58 +0000
Received: by qwd7 with SMTP id 7so1732498qwd.35
        for <multiple recipients>; Wed, 14 Jul 2010 02:27:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=WTE3qaK/nGZda4rzAEojhl5Qe9QRCQmfHNUganHyvy4=;
        b=qbdvijScGM82TTRMxKfYLr7YUWeGjVVsirgwC6PUvvvQNJVsKm2WUh08UFrCwIb1U1
         8OqZcATBVdL/+YhG4ANuBplTu6KvnbLsfAkxFIF30CnQOZrUdBDb9EUesQlb7LTooTDs
         pe33n2WZcVys6fxpnAt7w0R25QdYYMTqa1dMY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=KjKfMqloXZrq1FgI1i2EPMwQmqR3kcONRLJG7+10/bCZWWnY9nLVzw43OHQSqTRAPA
         7aEx+55K8wqR1ub9ZKgfiCkd0kzYxYKtruBzzaJnDHy2pO3HRygdvUEcIArULpZ4je3r
         ATFEbAPZ5QoTpyB2MxXHpgGwFLVCLcqC7lc3k=
Received: by 10.224.105.4 with SMTP id r4mr6797528qao.83.1279099657471; Wed, 
	14 Jul 2010 02:27:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.225.84 with HTTP; Wed, 14 Jul 2010 02:27:17 -0700 (PDT)
In-Reply-To: <AANLkTint7MwcRj470-7NHth3ODevzuu7E0AUHvgn-JKK@mail.gmail.com>
References: <AANLkTin1Rg_wJxQEQLsKM19wHgT0UOuJgjbBQVNaMg6_@mail.gmail.com> 
	<2D127F11DC79714E9B6A43AC9458147F764DA735@suex07-mbx-03.ad.syr.edu> 
	<AANLkTint7MwcRj470-7NHth3ODevzuu7E0AUHvgn-JKK@mail.gmail.com>
From: Ethan Collins <collins.ethans@gmail.com>
Date: Wed, 14 Jul 2010 14:57:17 +0530
Message-ID: <AANLkTilm39WVdP815-VbdtERQivRh2r-ayFpKWBqLNzB@mail.gmail.com>
Subject: Re: ShingleFilter failing with more terms than index phrase
To: java-user@lucene.apache.org, solr-user <solr-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Steve,

Thanks, wrapping with PositionFilter actually worked the search and
score -- I made a mistake while re-indexing last time.

Trying to analyze PositionFilter: didn't understand why earlier the
search of 'Nina Simone I Put' failed since atleast the phrase 'Nina
Simone' should have matched against title_0 field. Any clue?

I am also trying to understand the impact of PositionFilter on phrase
search quality and score. Unfortunately there are not enough
literature/help put up by google.

-Ethan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 09:53:50 2010
Return-Path: <java-user-return-46703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1621 invoked from network); 14 Jul 2010 09:53:49 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 09:53:49 -0000
Received: (qmail 74525 invoked by uid 500); 14 Jul 2010 09:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74012 invoked by uid 500); 14 Jul 2010 09:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74004 invoked by uid 99); 14 Jul 2010 09:53:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 09:53:42 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 09:53:36 +0000
Received: by gwaa18 with SMTP id a18so2595062gwa.35
        for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 02:53:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.140.6 with SMTP id n6mr8342324ybd.90.1279101194784; Wed, 
	14 Jul 2010 02:53:14 -0700 (PDT)
Received: by 10.151.107.11 with HTTP; Wed, 14 Jul 2010 02:53:14 -0700 (PDT)
In-Reply-To: <A9ECFF40-C3D7-44FA-9E54-0AB48FB03535@activemath.org>
References: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
	<A9ECFF40-C3D7-44FA-9E54-0AB48FB03535@activemath.org>
Date: Wed, 14 Jul 2010 05:53:14 -0400
Message-ID: <AANLkTikNNJSQr4lWSzzgncQeszXntUdBJ57hwUJJ-NGq@mail.gmail.com>
Subject: Re: Best practices for searcher memory usage?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You can also set the termsIndexDivisor when opening the IndexReader.
The terms index is an in-memory data structure and it an consume ALOT
of RAM when your index has many unique terms.

Flex (only on Lucene's trunk / next major release (4.0)) has reduced
this RAM usage (as well as the RAM required when sorting by string
field with mostly ascii content) substantially -- see
http://chbits.blogspot.com/2010/07/lucenes-ram-usage-for-searching.html

Mike

On Tue, Jul 13, 2010 at 6:09 PM, Paul Libbrecht <paul@activemath.org> wrote=
:
>
>
> Le 13-juil.-10 =E0 23:49, Christopher Condit a =E9crit :
>
>> * are there performance optimizations that I haven't thought of?
>
> The first and most important one I'd think of is get rid of NFS.
> You can happily do a local copy which might, even for 10 Gb take less tha=
n
> 30 seconds at server start.
>
> paul
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 10:00:27 2010
Return-Path: <java-user-return-46704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5453 invoked from network); 14 Jul 2010 10:00:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 10:00:26 -0000
Received: (qmail 84521 invoked by uid 500); 14 Jul 2010 10:00:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84091 invoked by uid 500); 14 Jul 2010 10:00:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84069 invoked by uid 99); 14 Jul 2010 10:00:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 10:00:16 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of collins.ethans@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 10:00:09 +0000
Received: by qyk12 with SMTP id 12so6782371qyk.14
        for <multiple recipients>; Wed, 14 Jul 2010 02:59:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=094F9CCXdHWdm0p09hpF3fa72mbFQd60y39gAVoGsdk=;
        b=At0BnrkDpUYG2GMFnirxCzBq1FsEuHFDHmbIa793VISDUnpPY3IK10b7b96liAbdOE
         afk3iX2rdymzw+SJJJLa0MY1fjIPI1qg7bG93Ux65OdfnczySmvC+MYKAHOP7SGIJDO6
         Sl49vO7vKcy0VBVtoRG79QcH1kYb4IaT1bDhE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=YLZmjhROEYluVeSsO0NxMngPhyaB1UeP5AUQNDUaObQXtztsknrk11HEBrTGUBmkvo
         ar6/RRiK4UJDTJHk9N5ev1Sj8CwLlPSIBxv9f7OFHnvNiMXslJYoUUObh40dPmZt9EBW
         4SZWZc9weFuNAj8d1rcvf7819eS+uD1/zxySw=
Received: by 10.229.250.208 with SMTP id mp16mr10229195qcb.140.1279101588249; 
	Wed, 14 Jul 2010 02:59:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.229.225.84 with HTTP; Wed, 14 Jul 2010 02:59:28 -0700 (PDT)
In-Reply-To: <AANLkTilm39WVdP815-VbdtERQivRh2r-ayFpKWBqLNzB@mail.gmail.com>
References: <AANLkTin1Rg_wJxQEQLsKM19wHgT0UOuJgjbBQVNaMg6_@mail.gmail.com> 
	<2D127F11DC79714E9B6A43AC9458147F764DA735@suex07-mbx-03.ad.syr.edu> 
	<AANLkTint7MwcRj470-7NHth3ODevzuu7E0AUHvgn-JKK@mail.gmail.com> 
	<AANLkTilm39WVdP815-VbdtERQivRh2r-ayFpKWBqLNzB@mail.gmail.com>
From: Ethan Collins <collins.ethans@gmail.com>
Date: Wed, 14 Jul 2010 15:29:28 +0530
Message-ID: <AANLkTimIJvAept589hhi-2RqrGlqQlsDG06gAdW1RwTm@mail.gmail.com>
Subject: Re: ShingleFilter failing with more terms than index phrase
To: java-user@lucene.apache.org, solr-user <solr-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> Trying to analyze PositionFilter: didn't understand why earlier the
> search of 'Nina Simone I Put' failed since atleast the phrase 'Nina
> Simone' should have matched against title_0 field. Any clue?

Please note that I have configure the ShingleFilter as bigrams without unigrams.

[Honestly, I am still struggling to understand how this worked and the
earlier one didn't]

-Ethan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 10:06:07 2010
Return-Path: <java-user-return-46705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25997 invoked from network); 14 Jul 2010 10:06:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 10:06:07 -0000
Received: (qmail 95507 invoked by uid 500); 14 Jul 2010 10:06:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95074 invoked by uid 500); 14 Jul 2010 10:06:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95058 invoked by uid 99); 14 Jul 2010 10:06:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 10:06:00 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NORMAL_HTTP_TO_IP,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of a.rothenberg@fotofinder.net designates 212.87.63.22 as permitted sender)
Received: from [212.87.63.22] (HELO gemini.fotofinder.net) (212.87.63.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 10:05:52 +0000
Received: from umbriel.fotofinder.net ([213.191.35.212])
	by gemini.fotofinder.net with esmtp (Exim 4.63)
	(envelope-from <a.rothenberg@fotofinder.net>)
	id 1OYynF-0005AR-TK
	for java-user@lucene.apache.org; Wed, 14 Jul 2010 12:02:21 +0200
Received: from [213.191.35.210] (helo=portal.alex)
	by umbriel.fotofinder.net with esmtp (Exim 4.69)
	(envelope-from <a.rothenberg@fotofinder.net>)
	id 1OYynF-00067Z-Gt
	for java-user@lucene.apache.org; Wed, 14 Jul 2010 12:02:21 +0200
From: Alexander Rothenberg <a.rothenberg@fotofinder.net>
Organization: Fotofinder GmbH
To: java-user@lucene.apache.org
Subject: Re: How to create a fuzzy suggest
Date: Wed, 14 Jul 2010 12:13:28 +0200
User-Agent: KMail/1.9.10
References: <22727457.1592.1279062662438.JavaMail.root@mail2.widas.de>
In-Reply-To: <22727457.1592.1279062662438.JavaMail.root@mail2.widas.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <201007141213.28365.a.rothenberg@fotofinder.net>
X-Spam_score: -3.2
X-Spam_score_int: -31
X-Spam_bar: ---
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,=20
i had a similar need to create somethink that acts not like a "filter"=20
or "tokenizer" but only inserts self-generated tokens into the token-stream=
=2E=20
(my purpose was to generate all kinds of word-forms for german umlauts...)

the following code-base helped me a lot to create it:=20
http://207.44.206.178/message.jspa?messageID=3D91989#91991

the synonym-filter also adds tokens into the tokenstream

regards, Alex



On Wednesday 14 July 2010 01:11:02 Kai Weing=C3=A4rtner wrote:
> Hello,
>
>
> I am trying to create a suggest search (search results are displayed while
> the user is entering the query) for names, but the search should also give
> results if the given name just sounds like an indexed name. However a
> perfect match should be ranked higher than a similar sounding match.
>
>
> I looked at the SpellChecker contrib, but this AFAIK cannot handle
> incomplete names (edge n-grams).
>
>
> So I came up with this idea and it would be great if anyone could tell me
> if that is sensible or if there is a better way:
>
>
> I create an analyzer to be run on the full names, which does the following
> - lowercase
> - build edge n-grams
> put these terms in the field (this would handle correctly spelled input)
>
>
> - run soundex on the n-grams
> put there soundexed n-grams in the field as well
>
>
> The incoming query will then also run through this analyzer with an
> or-default. So a correct spelling will match the normal n-grams plus the
> soundexed n-grams leading to a good score. A missspelled name would still
> match the soundexed n-grams, leading to a somewhat lower score.
>
>
> My current problem is that I don't know how to duplicate the tokens in the
> analyzer so I can add them as normal n-grams and soundexed n-grams. I
> suppose the TeeSinkTokenFilter will get me there, but I could not figure
> out how to add all tokens back in one stream.
>
>
> To recap, my questions are: Could this approach work to create a "fuzzy
> suggest"? How do I use the TeeSinkTokenFilter to separate and recombine t=
he
> tokenstream.
>
>
> I hope that was clear, thanks for your help!
>
>
>
> Kai
>
>
>
>
> Regelung im Bezug auf Paragraph 37a Absatz 4 HGB: WidasConcepts GmbH,
> Geschaeftsfuehrer: Thomas Widmann und Christian Kappert,
> Gerichtsstand Pforzheim, Registernummer: HRB 511442,
> Umsatzsteueridentifikationsnummer: DE205851091
>
> Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
> Informationen. Wenn Sie nicht der richtige Adressat sind oder diese E-Mail
> irrtuemlich erhalten haben, informieren Sie bitte sofort den Absender und
> vernichten Sie diese Mail. Das unerlaubte Kopieren sowie die unbefugte
> Weitergabe dieser Mail sind nicht gestattet.
>
> This e-mail may contain confidential and/or privileged information.
> If you are not the intended recipient (or have received this e-mail in
> error) please notify the sender immediately and destroy this e-mail.
> Any unauthorized copying, disclosure or distribution of the material in
> this e-mail is strictly forbidden.



=2D-=20
Alexander Rothenberg
=46otofinder GmbH		USt-IdNr. DE812854514
Software Entwicklung	Web: http://www.fotofinder.net/
Potsdamer Str. 96	Tel: +49 30 25792890
10785 Berlin		Fax: +49 30 257928999

Gesch=C3=A4ftsf=C3=BChrer:	Ali Paczensky
Amtsgericht:		Berlin Charlottenburg (HRB 73099)
Sitz:			Berlin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 10:09:43 2010
Return-Path: <java-user-return-46706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48287 invoked from network); 14 Jul 2010 10:09:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 10:09:43 -0000
Received: (qmail 858 invoked by uid 500); 14 Jul 2010 10:09:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 556 invoked by uid 500); 14 Jul 2010 10:09:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 541 invoked by uid 99); 14 Jul 2010 10:09:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 10:09:36 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,HTML_OBFUSCATE_05_10,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of findbestopensource@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 10:09:29 +0000
Received: by pwj2 with SMTP id 2so5630212pwj.35
        for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 03:09:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=QlkSgWEF0BoHoJYooGg4fqVDA+9O2ft1FMWrzr47FPk=;
        b=BV1EINR5N/Y5dNoTTS2B1oPpUKrEWif0P1m0YR7ufoLq/rgF0x7uWbRQWrCsyCTySH
         lBHcMquG4DHs/iwGmUJLYHBML0csLLZ5KIXJkfXsz6e/Nt3UzUfeQun229riyQQcMmHp
         Ys5hVzpTq3ngFMOCI56fKta4Khr/8jtsiNn/U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=uxU674PyuMlywCH/B+Kf47kCczZWEcV2vnh7AMmW40ib6bzROAhyecwv5ATq/JtpRL
         TSleaYpKxrysZTRNvYkF5MhQmQ9DDwelwBDWPlCXrJ4HyFo7/JGsfbC3IEGz8yyOM6v8
         wYBicFu0kdE6A6SncDbdn6I370P/FGw3aHBCE=
MIME-Version: 1.0
Received: by 10.142.163.15 with SMTP id l15mr21096979wfe.97.1279102147459; 
	Wed, 14 Jul 2010 03:09:07 -0700 (PDT)
Received: by 10.142.84.21 with HTTP; Wed, 14 Jul 2010 03:09:07 -0700 (PDT)
Date: Wed, 14 Jul 2010 15:39:07 +0530
Message-ID: <AANLkTinK5AaADAC5kAb7d3Nsfs4rJQtttSNFq_qQOBOd@mail.gmail.com>
Subject: Best open source
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd2418a21793d048b562d23
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd2418a21793d048b562d23
Content-Type: text/plain; charset=ISO-8859-1

Hello all,

We have launched a new site, which provides the best open source products
and libraries across all categories. This site is powered by Solr search.
There are many open source products available in all categories and it is
sometimes difficult to identify which is the best. The main problem in open
source is, there are lot more redudant products in a category and it is
impossible for a User to try all. We identify the best.

As a open source users, you might be using many opensource products and
libraries , It would be great, if you help us by adding the information
about the opensource products you use.
http://www.findbestopensource.com/addnew

http://www.findbestopensource.com/

Regards
Aditya

--000e0cd2418a21793d048b562d23--

From java-user-return-46707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 10:45:07 2010
Return-Path: <java-user-return-46707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4106 invoked from network); 14 Jul 2010 10:45:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 10:45:06 -0000
Received: (qmail 46507 invoked by uid 500); 14 Jul 2010 10:45:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45190 invoked by uid 500); 14 Jul 2010 10:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45176 invoked by uid 99); 14 Jul 2010 10:44:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 10:44:57 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [76.13.11.67] (HELO web65810.mail.ac4.yahoo.com) (76.13.11.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 14 Jul 2010 10:44:48 +0000
Received: (qmail 45627 invoked by uid 60001); 14 Jul 2010 10:44:26 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1279104266; bh=AqiU1Vq6FfS2CdUH0qiFJS1rYqD25GCQA+YewCspZuQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=MD3LCFr/ls5u2pKqeDRGwJfYZVmR9v59fo1scvRJCCuY4xwBAYzyaxMPM92tpdXBSk75/qOS4mYrKebJ4CrA9ZAHqoiuPmQu6rLavr4WUGfORji+LR4TsBifd1t+jCl+/27ep1Il1yQFUGjchZYphPJifNvnGyfnjyodtsFrx/Y=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=5LCdNJaBZXdv6s5EmLb2g6bUdyWIMWVbDztvex0AHT8ySy9y0zbL8EFuNBGvXK0TFgBdpZdUAGtIMPII5MoVHg2/VA7cDd2fVYKodHbyKbvaLK6uQpidFBOVRzcrT0DU9kcMVwZ5A3bf7QvHIt+7X+OGdcEBPSfMdIGt2HQpoj8=;
Message-ID: <595844.43840.qm@web65810.mail.ac4.yahoo.com>
X-YMail-OSG: Vy2JOyYVM1nUYQIY8iXaBM5YSbggDZvtf9a9N.RuodZ4I3n
 pa6W1Hfg5xLoRhuWHJ2xLRfWtT7wmFzz6iTlTobZjTP7lOFL2Rstl6GmkteD
 vAfridsyQOMm8yucddFxhbt7pPe23nvQCAHhOrnF17E05NRvbPlmkmmsd.M0
 7dgT7DTOKFrirASqOWvPoDxvYFOWUj8rCX749fJ_Sapank7wRn3RR9D6yBm8
 hmySc1rEyENgT_Oc1qMhLAU.zGpP3M8AWXGWFhE3JEYk66jMEpZb4bOWljat
 EZZCARo50pdcJ7VX14KmuEqnD1imtBjMFSg.CwEYvxbzr6F1rRKM7xd0Sq47
 f6VwHEh32s9AJAuT94CQ6POLIHeA-
Received: from [88.255.168.160] by web65810.mail.ac4.yahoo.com via HTTP; Wed, 14 Jul 2010 03:44:26 PDT
X-Mailer: YahooMailClassic/11.2.4 YahooMailWebService/0.8.104.276605
Date: Wed, 14 Jul 2010 03:44:26 -0700 (PDT)
From: ilkay polat <ilkay_polat@yahoo.com>
Subject: Out of memory problem in search
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-586921644-1279104266=:43840"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-586921644-1279104266=:43840
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hello Friends;

Recently, I have problem with lucene search - memory problem on the basis t=
hat indexed file is so big. (I have indexed some kinds of information and t=
his indexed file's size is nearly more than 40 gigabyte. )=A0=20

I search the lucene indexed file with org.apache.lucene.search.Searcher.sea=
rch(query, null, offset + limit, new Sort(new SortField("time", SortField.L=
ONG, true)));
(This provides to find (offset + limit) records to back.)=20

I use searching by range. For example, in web page I firstly search records=
 which are in [0, 100] range then second page [100, 200]=A0=20
I have nearly 200,000 records at all. When I go to last page which means re=
cords between 200,000 -100, 200,0, there is a memory problem(I have 4gb ram=
 on running machine) in jvm( out of memory error).

Is there a way to overcome this memory problem?=20

Thanks

--
ilkay POLAT=A0  Software Engineer
TURKEY
=A0
  Gsm : (+90) 532 542 36 71
  E-mail : ilkay_polat@yahoo.com=0A=0A=0A      
--0-586921644-1279104266=:43840--

From java-user-return-46708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 12:00:17 2010
Return-Path: <java-user-return-46708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89106 invoked from network); 14 Jul 2010 12:00:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 12:00:17 -0000
Received: (qmail 28242 invoked by uid 500); 14 Jul 2010 12:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27866 invoked by uid 500); 14 Jul 2010 12:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27858 invoked by uid 99); 14 Jul 2010 12:00:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 12:00:09 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of findbestopensource@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 12:00:03 +0000
Received: by pvc21 with SMTP id 21so5654221pvc.35
        for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 04:59:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=HynpospWgqff2iKil8gl9IuovocL4nr6ytaabbw1Qf0=;
        b=Dvp5ELFz86VRXJSVeZawTPgKg2dvT9KiqXdFKGIRbWJD3z2EYF+0MQ16+8zlASKTJ0
         ypJwgPaRq8iGWg0qPlnBHu0IFgS0RQDpkCD430sNpMgoe95134dzNhGLquAOL9a7PpSa
         Ny44tbXIPqmxmx48OdkTDOSooDeOVKkfYLyF0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=w4Jk+4wpHsm400TavV5tgUPjLYnznhIqCI/NjH8aZbeR4fTuDEsE+at7A5Ov6213hs
         ApqRDNAkYpzKu5pGNhm9IBZSLsZA0UH13BUbFwZbsLanMgR2/NDdHnM8oRJVNMiJGSRR
         Dce21pFHjQAzihiPFlfm7mbHNrh2NHzIUpBlk=
MIME-Version: 1.0
Received: by 10.142.133.20 with SMTP id g20mr20725949wfd.176.1279108775844; 
	Wed, 14 Jul 2010 04:59:35 -0700 (PDT)
Received: by 10.142.84.21 with HTTP; Wed, 14 Jul 2010 04:59:35 -0700 (PDT)
In-Reply-To: <595844.43840.qm@web65810.mail.ac4.yahoo.com>
References: <595844.43840.qm@web65810.mail.ac4.yahoo.com>
Date: Wed, 14 Jul 2010 17:29:35 +0530
Message-ID: <AANLkTinfOpMAQf9DH1MAeKNJQcfUMVOgpodmidjyy3KG@mail.gmail.com>
Subject: Re: Out of memory problem in search
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd3075036fbaa048b57b8c5
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd3075036fbaa048b57b8c5
Content-Type: text/plain; charset=ISO-8859-1

Certainly it will. Either you need to increase your memory OR refine your
query. Eventhough you display paginated result. The first couple of pages
will display fine and going towards last may face problem. This is because,
200,000 objects is created and iterated, 190,900 objects are skipped and
last100 objects are returned. The memory is consumed in creating these
objects.

Regards
Aditya
www.findbestopensource.com



On Wed, Jul 14, 2010 at 4:14 PM, ilkay polat <ilkay_polat@yahoo.com> wrote:

> Hello Friends;
>
> Recently, I have problem with lucene search - memory problem on the basis
> that indexed file is so big. (I have indexed some kinds of information and
> this indexed file's size is nearly more than 40 gigabyte. )
>
> I search the lucene indexed file with
> org.apache.lucene.search.Searcher.search(query, null, offset + limit, new
> Sort(new SortField("time", SortField.LONG, true)));
> (This provides to find (offset + limit) records to back.)
>
> I use searching by range. For example, in web page I firstly search records
> which are in [0, 100] range then second page [100, 200]
> I have nearly 200,000 records at all. When I go to last page which means
> records between 200,000 -100, 200,0, there is a memory problem(I have 4gb
> ram on running machine) in jvm( out of memory error).
>
> Is there a way to overcome this memory problem?
>
> Thanks
>
> --
> ilkay POLAT   Software Engineer
> TURKEY
>
>  Gsm : (+90) 532 542 36 71
>  E-mail : ilkay_polat@yahoo.com
>
>
>

--000e0cd3075036fbaa048b57b8c5--

From java-user-return-46709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 12:26:03 2010
Return-Path: <java-user-return-46709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22797 invoked from network); 14 Jul 2010 12:26:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 12:26:03 -0000
Received: (qmail 66082 invoked by uid 500); 14 Jul 2010 12:26:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65591 invoked by uid 500); 14 Jul 2010 12:25:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65582 invoked by uid 99); 14 Jul 2010 12:25:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 12:25:56 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 12:25:49 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 7B831D36007
	for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 14:25:28 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 19BdleoM+E9B for <java-user@lucene.apache.org>;
	Wed, 14 Jul 2010 14:25:10 +0200 (CEST)
Received: from VEGA (unknown [220.109.228.62])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id F16B7D36002
	for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 14:25:09 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <595844.43840.qm@web65810.mail.ac4.yahoo.com>
In-Reply-To: <595844.43840.qm@web65810.mail.ac4.yahoo.com>
Subject: RE: Out of memory problem in search
Date: Wed, 14 Jul 2010 14:25:47 +0200
Message-ID: <004401cb234f$b2a97670$17fc6350$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGBCEQcXTNskPmi7U0Nfk0c3V85GpNEjrNQ
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Reverse the query sorting to display the last page.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: ilkay polat [mailto:ilkay_polat@yahoo.com]
> Sent: Wednesday, July 14, 2010 12:44 PM
> To: java-user@lucene.apache.org
> Subject: Out of memory problem in search
>=20
> Hello Friends;
>=20
> Recently, I have problem with lucene search - memory problem on the =
basis
> that indexed file is so big. (I have indexed some kinds of information =
and
this
> indexed file's size is nearly more than 40 gigabyte. )
>=20
> I search the lucene indexed file with
> org.apache.lucene.search.Searcher.search(query, null, offset + limit, =
new
> Sort(new SortField("time", SortField.LONG, true))); (This provides to =
find
> (offset + limit) records to back.)
>=20
> I use searching by range. For example, in web page I firstly search
records
> which are in [0, 100] range then second page [100, 200] I have nearly
200,000
> records at all. When I go to last page which means records between =
200,000
-
> 100, 200,0, there is a memory problem(I have 4gb ram on running =
machine)
in
> jvm( out of memory error).
>=20
> Is there a way to overcome this memory problem?
>=20
> Thanks
>=20
> --
> ilkay POLAT=A0  Software Engineer
> TURKEY
>=20
>   Gsm : (+90) 532 542 36 71
>   E-mail : ilkay_polat@yahoo.com
>=20
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 12:49:24 2010
Return-Path: <java-user-return-46710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87634 invoked from network); 14 Jul 2010 12:49:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 12:49:23 -0000
Received: (qmail 10811 invoked by uid 500); 14 Jul 2010 12:49:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10525 invoked by uid 500); 14 Jul 2010 12:49:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10517 invoked by uid 99); 14 Jul 2010 12:49:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 12:49:17 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [76.13.11.73] (HELO web65816.mail.ac4.yahoo.com) (76.13.11.73)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 14 Jul 2010 12:49:09 +0000
Received: (qmail 61091 invoked by uid 60001); 14 Jul 2010 12:48:47 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1279111727; bh=jCMf5Npx7A9RjZoOYmct4gV3qPbUA/gsOTCqVhBm0yQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=kqxc2nhcawU58RQn//j86soO16lIsS8ifXB+urxHv2SmkFHKIFw0LH1ZoCh5kULqGtDKJ6oXcpf6XLhhLcHVKeKiJ9AdlK/Stb8MAaDDgEg+Wg2T3GakWGFMw7ipAV6ALyQgj+bxyqHPU7YNJ0BUuoAmlgizY0iNXtJ2Iw+X4CQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=rDzghsYw0NFtay2DirbKyzBxlfKqtXQXf9FSz/sU3p1MvNh1rtPDhp4G2uchtphY7SJn5EwZvm+bEdMF+fq9CObwrInA1rNOjwl3rXwmJrHJ5KRtexoPxScOKmJvxeEw8/dpHH7k7qfPGKITREERI5xqHbqXmPHXgrrizBEqCXA=;
Message-ID: <608498.59805.qm@web65816.mail.ac4.yahoo.com>
X-YMail-OSG: YlIznpYVM1myUqkcBPr0V25lZc4HXNwpGbx4idUlSA2VkJy
 .16u20vIOKsAimwnL93XM7XeI8LG2iLVsjRC3U8kP79w9f1ef8idLR6hRyVu
 o4vSF9MsJ7hYKuAQ7A4iKVEfqkFaeslgc4vncOdPdYFA4T.HuFyHuzjWOZM.
 _SkgesvpddlwRdt0pHh2qc2sh3kdTS1ScrjLgj9N2mE_Y1LX22l25Q.teyKF
 r67pt.8vGRgm3SK97Pxn8ar06rijlrg_cF78I1btA2iqw7DhkKT.tZrBLve8
 lIi8VcAWgWPYqauPsxJkRe582BaL2y0idOUCJ27Un736qF3_5ZUvxdwiA0HW
 uLQHYj8S5EG_Ck7ZdDRumqJTANaGsAw254yszSibAjRbbQ_4-
Received: from [88.255.168.160] by web65816.mail.ac4.yahoo.com via HTTP; Wed, 14 Jul 2010 05:48:47 PDT
X-Mailer: YahooMailClassic/11.2.4 YahooMailWebService/0.8.104.276605
Date: Wed, 14 Jul 2010 05:48:47 -0700 (PDT)
From: ilkay polat <ilkay_polat@yahoo.com>
Subject: RE: Out of memory problem in search
To: java-user@lucene.apache.org
In-Reply-To: <004401cb234f$b2a97670$17fc6350$@thetaphi.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1425467430-1279111727=:59805"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1425467430-1279111727=:59805
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Indeed, this is=A0 good solution to that kind of problems. But same problem=
 can be=A0 occured in future when logs are added to index file.=20
For example, here 200,000 records have problem(These logs are collected in =
13 days).=20
With that reverse way, there will be maximum search range is 100,000.=20
But if there is 400,000 records same problem will be occured(Max search spa=
ce is 200,000 again).=20
Is there another way which do not consume so much memory=A0 or consume rest=
rict memory and consume time instead of memory. This restriction come from =
our project hardware restrictions(Hardware memory is 8GB in maximum situati=
on)?

--- On Wed, 7/14/10, Uwe Schindler <uwe@thetaphi.de> wrote:

From: Uwe Schindler <uwe@thetaphi.de>
Subject: RE: Out of memory problem in search
To: java-user@lucene.apache.org
Date: Wednesday, July 14, 2010, 3:25 PM

Reverse the query sorting to display the last page.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: ilkay polat [mailto:ilkay_polat@yahoo.com]
> Sent: Wednesday, July 14, 2010 12:44 PM
> To: java-user@lucene.apache.org
> Subject: Out of memory problem in search
>=20
> Hello Friends;
>=20
> Recently, I have problem with lucene search - memory problem on the basis
> that indexed file is so big. (I have indexed some kinds of information an=
d
this
> indexed file's size is nearly more than 40 gigabyte. )
>=20
> I search the lucene indexed file with
> org.apache.lucene.search.Searcher.search(query, null, offset + limit, new
> Sort(new SortField("time", SortField.LONG, true))); (This provides to fin=
d
> (offset + limit) records to back.)
>=20
> I use searching by range. For example, in web page I firstly search
records
> which are in [0, 100] range then second page [100, 200] I have nearly
200,000
> records at all. When I go to last page which means records between 200,00=
0
-
> 100, 200,0, there is a memory problem(I have 4gb ram on running machine)
in
> jvm( out of memory error).
>=20
> Is there a way to overcome this memory problem?
>=20
> Thanks
>=20
> --
> ilkay POLAT=A0=A0 Software Engineer
> TURKEY
>=20
>=A0=A0=A0Gsm : (+90) 532 542 36 71
>=A0=A0=A0E-mail : ilkay_polat@yahoo.com
>=20
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=0A=0A=0A      
--0-1425467430-1279111727=:59805--

From java-user-return-46711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 12:55:21 2010
Return-Path: <java-user-return-46711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 847 invoked from network); 14 Jul 2010 12:55:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 12:55:20 -0000
Received: (qmail 18858 invoked by uid 500); 14 Jul 2010 12:55:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18443 invoked by uid 500); 14 Jul 2010 12:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18433 invoked by uid 99); 14 Jul 2010 12:55:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 12:55:14 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [76.13.11.72] (HELO web65815.mail.ac4.yahoo.com) (76.13.11.72)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 14 Jul 2010 12:55:07 +0000
Received: (qmail 56547 invoked by uid 60001); 14 Jul 2010 12:54:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1279112085; bh=R2vt2ukPTGWJB2BPKGWkn6S9MQgHU3nM+BNUvlkmeNI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=n3oFdRa1RAwT9JkziLi61rQjzywWXvz9RVB77vgr+dSfzp1eb5I02qKldLM+ebJfGE1ux8Tdxd2NNX6oWjgCPkSL6k1VxenV89R58ZirBJ4LZxs46LxPWP0swlNMsWQgtMbTLx96LwZu5BT8MeGnBRSv96MtS+dvEI6pJwVEYYA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=SaLhwkf0Ns7i2L/l8wb2XRUwDjPVv8gClQn75wTwk8umC1p+FeiGmL+WfuLJn/0tkHgyguAyuLwvIq85jLxmTBCs6JD1jl1tLQ+SxGWukDPqb2GvqzTWERUMDRpikBBNcdBULLYCoFRCweBI4qZX+fVV+6tuOkju5pQ7z6U1uUg=;
Message-ID: <675451.56367.qm@web65815.mail.ac4.yahoo.com>
X-YMail-OSG: H5fTJhsVM1nJ9YEILJTrmpTekOtPHO5n1zMhxwDCV_.AEJv
 lzGAtVs5rM0zZ_Eo.XX0bSAhBHZeBg65MHilwdF5F6ylL5gzc7Kl8yODm7H0
 KjXHQtc8PZ9BBdVE5TGWJdl47KMd1.XAmllSf2sL3lMQdHyBC.Gqb8v2PqRW
 K45SzBJ1.VmCbLmLv3psa7dPiLiApZKw6ypNnd7fQGQBcACoBgFu7dcKMes7
 29PlepWJCJH0WVwOz93WsAeb20_HqT6jLQDb8TPTc0U7xVIQPc_XDB0LVUei
 UVyKvWs33sWhlJ7cO71aa0wXP9bZv937x_xgvHVNTe4kYC9fB2dtHZ5cy6Ns
 -
Received: from [88.255.168.160] by web65815.mail.ac4.yahoo.com via HTTP; Wed, 14 Jul 2010 05:54:45 PDT
X-Mailer: YahooMailClassic/11.2.4 YahooMailWebService/0.8.104.276605
Date: Wed, 14 Jul 2010 05:54:45 -0700 (PDT)
From: ilkay polat <ilkay_polat@yahoo.com>
Subject: Re: Out of memory problem in search
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTinfOpMAQf9DH1MAeKNJQcfUMVOgpodmidjyy3KG@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1446188689-1279112085=:56367"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1446188689-1279112085=:56367
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,
We have hardware restrictions(Max RAM can be=A0 8GB). So, unfortunately,=A0=
 increasing memory can not be option for us for today's situation.=20

Yes, as you said that problem is faced when goes to last pages of search sc=
reen because of using search method which is find top n records. In other w=
ay, this is meaning "searching all the thinngs returns all".=20

I am now researching whether there is a way which consumes time instead of =
memory in this search mechanism in lucene? Any other ideas?=20

Thanks

--- On Wed, 7/14/10, findbestopensource <findbestopensource@gmail.com> wrot=
e:

From: findbestopensource <findbestopensource@gmail.com>
Subject: Re: Out of memory problem in search
To: java-user@lucene.apache.org
Date: Wednesday, July 14, 2010, 2:59 PM

Certainly it will. Either you need to increase your memory OR refine your
query. Eventhough you display paginated result. The first couple of pages
will display fine and going towards last may face problem. This is because,
200,000 objects is created and iterated, 190,900 objects are skipped and
last100 objects are returned. The memory is consumed in creating these
objects.

Regards
Aditya
www.findbestopensource.com



On Wed, Jul 14, 2010 at 4:14 PM, ilkay polat <ilkay_polat@yahoo.com> wrote:

> Hello Friends;
>
> Recently, I have problem with lucene search - memory problem on the basis
> that indexed file is so big. (I have indexed some kinds of information an=
d
> this indexed file's size is nearly more than 40 gigabyte. )
>
> I search the lucene indexed file with
> org.apache.lucene.search.Searcher.search(query, null, offset + limit, new
> Sort(new SortField("time", SortField.LONG, true)));
> (This provides to find (offset + limit) records to back.)
>
> I use searching by range. For example, in web page I firstly search recor=
ds
> which are in [0, 100] range then second page [100, 200]
> I have nearly 200,000 records at all. When I go to last page which means
> records between 200,000 -100, 200,0, there is a memory problem(I have 4gb
> ram on running machine) in jvm( out of memory error).
>
> Is there a way to overcome this memory problem?
>
> Thanks
>
> --
> ilkay POLAT=A0=A0=A0Software Engineer
> TURKEY
>
>=A0 Gsm : (+90) 532 542 36 71
>=A0 E-mail : ilkay_polat@yahoo.com
>
>
>
=0A=0A=0A      
--0-1446188689-1279112085=:56367--

From java-user-return-46712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 13:23:46 2010
Return-Path: <java-user-return-46712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59342 invoked from network); 14 Jul 2010 13:23:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 13:23:46 -0000
Received: (qmail 86711 invoked by uid 500); 14 Jul 2010 13:23:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86297 invoked by uid 500); 14 Jul 2010 13:23:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86289 invoked by uid 99); 14 Jul 2010 13:23:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 13:23:39 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of suman.holani@zapak.co.in designates 220.226.181.11 as permitted sender)
Received: from [220.226.181.11] (HELO mail.zapak.co.in) (220.226.181.11)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 14 Jul 2010 13:23:32 +0000
Received: (qmail 8741 invoked by uid 508); 14 Jul 2010 13:23:06 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=default; d=zapak.co.in;
  b=dsSPK/dWc6x5p8K7NPQq0eVCsbJdQAFuVxdLMeuHAh8iZXRK3CTrdi6MVU8WrTBg  ;
Received: from localhost (HELO www.mail.zapak.co.in) (127.0.0.1)
  by mail.zapak.co.in with SMTP; 14 Jul 2010 13:23:06 -0000
MIME-Version: 1.0
Date: Wed, 14 Jul 2010 18:53:06 +0530
From: <suman.holani@zapak.co.in>
To: <java-user@lucene.apache.org>
Subject: subset query :query filter or boolean query
Message-ID: <b20aa64fb3a9e0509111f45225c7c919@localhost>
X-Sender: suman.holani@zapak.co.in
User-Agent: RoundCube Webmail/0.3.1
Content-Type: multipart/alternative;
	boundary="=_4a369e3380c8a540ebe1472f6b671cbd"
X-Virus-Checked: Checked by ClamAV on apache.org

--=_4a369e3380c8a540ebe1472f6b671cbd
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=UTF-8



Hi , 

I have 4 query search fields. 

case 1 : if i use one search
field to make a query filter and then use the query filter to search on
other 3 fields so as to reduce the searching docs subset. 

case 2: i use
all query parameters using boolean query , whole of index will be searched.


Which of the two approach will give better performance.Or is there ne
other approach to do this . 

Also 

Can we use subset of documents , for
searching . 

Lets say I have hash map of 

P1 -1,2,3,4 

P2 - 3,4,5


P3-7,5,3 

Now I have an documents in lucene index stored as  

1-P1


2-P1 

3-P1,P2,P3 

4-P1,P2 

5-P2,P3 

7-P3 

.. 

.. 

when i search
docs with P2 I get 3,4,5 

Now I want my search to b restricted to just
3,4,5 doc only. where by I can search only these docs for further
parameters. 

1. How to go abt it. 

2. Is there any other seraching
mechanism I should use, or Lucene is better fit? 

3. should i keep my hash
map also in lucene indexes and is then thr a method to link it to another
lucene indexes. 

regards, 

Suman
--=_4a369e3380c8a540ebe1472f6b671cbd--


From java-user-return-46713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 13:29:16 2010
Return-Path: <java-user-return-46713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60465 invoked from network); 14 Jul 2010 13:29:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 13:29:16 -0000
Received: (qmail 94179 invoked by uid 500); 14 Jul 2010 13:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93881 invoked by uid 500); 14 Jul 2010 13:29:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93867 invoked by uid 99); 14 Jul 2010 13:29:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 13:29:11 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [76.13.11.76] (HELO web65819.mail.ac4.yahoo.com) (76.13.11.76)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 14 Jul 2010 13:29:04 +0000
Received: (qmail 35387 invoked by uid 60001); 14 Jul 2010 13:27:42 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1279114062; bh=lhbrmgBGTGFnHGMJ6Gr9AuDy/6XxgBPyUawQHgHo+Go=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=RrMHWB6hgLU21UCLEei8jH6JiKj7ZWRE688rRBpRBD5lLhYZOwhL1/t/UJwYKMpw8gwHW6NttkUeRUnm33irSJ7yB2fENAlxRXnSFTSkZkaCbXwtuIR2HnfyFWU01CeeZ41/KX9znt8nlN0b4FxKqUHgmo/GSqbQCzC4aV3LSEU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=FoXH4mP6vs2Er/saFVz+p7a/ZZ3ULB6YnRWeBTtDqxkBCfV2b8p9tww0E+e8AAZsj8R8A1GK/9wndGk27Xl4DrFkti+CADVSosh+OAVxwa5WJO6lgOnIEfUvcRLhSlrOP5njBarPCUyYIUOJVIDTJ9I7twION9wuWZnY+ZXL7YQ=;
Message-ID: <367911.35368.qm@web65819.mail.ac4.yahoo.com>
X-YMail-OSG: W71wRA4VM1mYtIprwSEsZC_BEVceDiREki2mo3nPmKJItHp
 0X4tg3iX3srSyjTxGcSm_U_beU5SlAs5i.wDMYSL7FbO5xyOGQnvt219PSvT
 t9ab8fam2LaghHn.OHzCxgRLaIcCspXfcaLz1K5ZTXFq_CgEW2tPpppgH0E6
 ucvRwW5KpxBqv_ykgQBR177782t.si4ZC77qZ1oT2pVXuI3VsG8NwHpDVS33
 U2ZIcBqi0bzI4Fs5pKQrHs3VvsC7bVCgAQxOsL8d_kkidXF9qWE9ofVcdwCX
 ycSOCX2VrXYGv56WvsChayHm3gJz05SFRniG2LRRX4M285wI2xNUK.WzJEYs
 -
Received: from [88.255.168.160] by web65819.mail.ac4.yahoo.com via HTTP; Wed, 14 Jul 2010 06:27:42 PDT
X-Mailer: YahooMailClassic/11.2.4 YahooMailWebService/0.8.104.276605
Date: Wed, 14 Jul 2010 06:27:42 -0700 (PDT)
From: ilkay polat <ilkay_polat@yahoo.com>
Subject: Re: Out of memory problem in search
To: java-user@lucene.apache.org
In-Reply-To: <675451.56367.qm@web65815.mail.ac4.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1512950821-1279114062=:35368"
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1512950821-1279114062=:35368
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

I have also=A0 confused about the memory management of lucene.=20

Where is this out of memory problem is mainly arised from Reason-1 or Reaso=
n-2 reason?
=A0
Reason-1 : Problem is sourced from searching is done in big indexed file (n=
early 40 GB) If there is 100(small number of records) records returned from=
 search in 60 GB indexed file, problem will again arised.
OR
Reason-2 : Problem is sourced from finding so many records(nearly 200,000 r=
ecords), so in memory 200, 000 java object in heap? If file's sizeis 10 GB(=
small file size ) but returned records are so many, problem will again aris=
ed.

Is there any document which tells the general memory management issues in s=
earching in lucene?=20

Thanks

=A0
ilkay POLAT  =A0  Software Engineer=A0  Gsm : (+90) 532 542 36 71
  E-mail : ilkay_polat@yahoo.com

--- On Wed, 7/14/10, ilkay polat <ilkay_polat@yahoo.com> wrote:

From: ilkay polat <ilkay_polat@yahoo.com>
Subject: Re: Out of memory problem in search
To: java-user@lucene.apache.org
Date: Wednesday, July 14, 2010, 3:54 PM

Hi,
We have hardware restrictions(Max RAM can be=A0 8GB). So, unfortunately,=A0=
 increasing memory can not be option for us for today's situation.=20

Yes, as you said that problem is faced when goes to last pages of search sc=
reen because of using search method which is find top n records. In other w=
ay, this is meaning "searching all the thinngs returns all".=20

I am now researching whether there is a way which consumes time instead of =
memory in this search mechanism in lucene? Any other ideas?=20

Thanks

--- On Wed, 7/14/10, findbestopensource <findbestopensource@gmail.com> wrot=
e:

From: findbestopensource <findbestopensource@gmail.com>
Subject: Re: Out of memory problem in search
To: java-user@lucene.apache.org
Date: Wednesday, July 14, 2010, 2:59 PM

Certainly it will. Either you need to increase your memory OR refine your
query. Eventhough you display paginated result. The first couple of pages
will display fine and going towards last may face problem. This is because,
200,000 objects is created and iterated, 190,900 objects are skipped and
last100 objects are returned. The memory is consumed in creating these
objects.

Regards
Aditya
www.findbestopensource.com



On Wed, Jul 14, 2010 at 4:14 PM, ilkay polat <ilkay_polat@yahoo.com> wrote:

> Hello Friends;
>
> Recently, I have problem with lucene search - memory problem on the basis
> that indexed file is so big. (I have indexed some kinds of information an=
d
> this indexed file's size is nearly more than 40 gigabyte. )
>
> I search the lucene indexed file with
> org.apache.lucene.search.Searcher.search(query, null, offset + limit, new
> Sort(new SortField("time", SortField.LONG, true)));
> (This provides to find (offset + limit) records to back.)
>
> I use searching by range. For example, in web page I firstly search recor=
ds
> which are in [0, 100] range then second page [100, 200]
> I have nearly 200,000 records at all. When I go to last page which means
> records between 200,000 -100, 200,0, there is a memory problem(I have 4gb
> ram on running machine) in jvm( out of memory error).
>
> Is there a way to overcome this memory problem?
>
> Thanks
>
> --
> ilkay POLAT=A0=A0=A0Software Engineer
> TURKEY
>
>=A0 Gsm : (+90) 532 542 36 71
>=A0 E-mail : ilkay_polat@yahoo.com
>
>
>



=A0 =A0 =A0 =0A=0A=0A      
--0-1512950821-1279114062=:35368--

From java-user-return-46714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 14:39:52 2010
Return-Path: <java-user-return-46714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43729 invoked from network); 14 Jul 2010 14:39:52 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 14:39:52 -0000
Received: (qmail 23257 invoked by uid 500); 14 Jul 2010 14:39:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23107 invoked by uid 500); 14 Jul 2010 14:39:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23099 invoked by uid 99); 14 Jul 2010 14:39:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 14:39:48 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ihasmax@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 14:39:40 +0000
Received: by wyb29 with SMTP id 29so7122189wyb.35
        for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 07:38:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=3AVFe7Kf8ib7sI/bHMBs3UXncv2Lv39Y6QSFEHFbWbA=;
        b=UGOUXigkRTCwrhRnIvSchT8+YyZTgVmMYcxyO26QvWBl2MRJBYFNRKv8FXWF3iNl7l
         tFVJsD0Yj9nmgEZPDp+y0gkWVPyHouw7fU7en3Yf4AtQgiOapK/hrQD0ZTEiPvYIgp7o
         DqtZOzd1mGGJeudqhr5OGUOXOmsVwv5wItg0U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=xGF5bbwzn5RokkK8E4OJt8y+9T5Pop7wBV0vdPA8QwkeSe7ska4kH8TRP0s4SDE9PM
         jwPSrXsDHWuX14t78Ldhbb2OtQvo1PHovYdmK5KzUdtRCG/q3lsxYTcblNLxt7TeuIpP
         jmERme4J1ceHFdKefUPYglBnffwZ5xfd34zMs=
Received: by 10.227.135.65 with SMTP id m1mr16094324wbt.212.1279118300402; 
	Wed, 14 Jul 2010 07:38:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.177.205 with HTTP; Wed, 14 Jul 2010 07:37:57 -0700 (PDT)
In-Reply-To: <AANLkTil_QPJZC2ehzR6JTlWHeIUxw0rIU9-o3YUbew-A@mail.gmail.com>
References: <AANLkTilBoPY0BiXZjuvBAtWXfBkDHFn8LRoG9zLeaLAK@mail.gmail.com> 
	<AANLkTil_QPJZC2ehzR6JTlWHeIUxw0rIU9-o3YUbew-A@mail.gmail.com>
From: Max Lynch <ihasmax@gmail.com>
Date: Wed, 14 Jul 2010 09:37:57 -0500
Message-ID: <AANLkTilEG7xmAVlhtNyiZlmMEwe9tnRySofly2Qpygy7@mail.gmail.com>
Subject: Re: Continuously iterate over documents in index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f80da4ebd583048b59efc8
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f80da4ebd583048b59efc8
Content-Type: text/plain; charset=ISO-8859-1

You could have a field within each doc say "Processed" and store a

> value Yes/No, next run a searcher query which should give you the
> collection of unprocessed ones.
>

That sounds like a reasonable idea, and I just realized that I could have
done that in a way specific to my application.  However, I already tried
doing something with a MatchAllDocsQuery with a custom collector and sort by
date.  I store the last date and time of a doc I processed and process only
newer ones.

--001485f80da4ebd583048b59efc8--

From java-user-return-46715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 14:58:33 2010
Return-Path: <java-user-return-46715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80594 invoked from network); 14 Jul 2010 14:58:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 14:58:33 -0000
Received: (qmail 71461 invoked by uid 500); 14 Jul 2010 14:58:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71374 invoked by uid 500); 14 Jul 2010 14:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71366 invoked by uid 99); 14 Jul 2010 14:58:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 14:58:30 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of muthojukk@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 14:58:22 +0000
Received: by pwj2 with SMTP id 2so5840491pwj.35
        for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 07:57:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=lSaWENozh5y7O+KfiLLiO3AFaVjObo2rlZ3ZD2TXeuY=;
        b=h9LWvsfGu/ii2nUaTkWzMd2UEGNRXOY0Fbi3jddyI543JLUy6zjBRfbWyL2W9l+kgf
         cZUtKgK6H+D+0P7vAzJTbj+VRMzNj7DlSdljJt1RQIH+2xUtuQqTmlQqWpyWmjQX6Jix
         /OBF0AITrlqxoPCTS91RaXBENz5PIQnT/pl48=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=bzbsTvPwANjvdhvk+/tkWZC6vJMG0/QXG3xjWFLtAyZ8bXiwZ4d6LTR0XahBlq4ly1
         IFFEOHtELyKc6LAGpDtDuehPjF14Aw0w6Uo5iGXOw7BHIDVHaAgwYNT2apncZutEhbkD
         r1iGHxokHvmau0cEzjvRPgZ/av08xr7PFmUHg=
MIME-Version: 1.0
Received: by 10.142.229.13 with SMTP id b13mr19704485wfh.61.1279119420670; 
	Wed, 14 Jul 2010 07:57:00 -0700 (PDT)
Received: by 10.142.111.7 with HTTP; Wed, 14 Jul 2010 07:56:59 -0700 (PDT)
In-Reply-To: <AANLkTilEG7xmAVlhtNyiZlmMEwe9tnRySofly2Qpygy7@mail.gmail.com>
References: <AANLkTilBoPY0BiXZjuvBAtWXfBkDHFn8LRoG9zLeaLAK@mail.gmail.com>
	<AANLkTil_QPJZC2ehzR6JTlWHeIUxw0rIU9-o3YUbew-A@mail.gmail.com>
	<AANLkTilEG7xmAVlhtNyiZlmMEwe9tnRySofly2Qpygy7@mail.gmail.com>
Date: Wed, 14 Jul 2010 20:26:59 +0530
Message-ID: <AANLkTik5leoXmrRRzgCMAb2vwNAm41HOm5bL9a6vzFIi@mail.gmail.com>
Subject: Re: Continuously iterate over documents in index
From: Kiran Kumar <muthojukk@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd32b5cb20707048b5a32fc
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd32b5cb20707048b5a32fc
Content-Type: text/plain; charset=ISO-8859-1

All,

Issue: Unable to get the proper results after searching. I added sample code
which I used in the application.

If I used *numHitPerPage* value as 1000 its giving expected results.
ex: The expected results is 32 docs but showing 32 docs
Instead If I use *numHitPerPage* as 2^32-1 its not giving expected results.
ex: The expected results is 32 docs but showing only 29 docs.

Sample code below:


StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);
 QueryParser qp = new QueryParser(Version.LUCENE_CURRENT, defField,
analyzer);
Query q = qp.parse(queryString);
TopDocsCollector tdc = TopScoreDocCollector.create(*numHitPerPage*, true);
IndexSearcher(is).search(q,tdc);

ScoreDocs[]  noDocs  = tdc.topDocs().scoreDocs;

Please let me know if any other way to search?

Thanks.
Kiran. M

--000e0cd32b5cb20707048b5a32fc--

From java-user-return-46716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 14 18:32:31 2010
Return-Path: <java-user-return-46716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71508 invoked from network); 14 Jul 2010 18:32:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 14 Jul 2010 18:32:30 -0000
Received: (qmail 44948 invoked by uid 500); 14 Jul 2010 18:32:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44838 invoked by uid 500); 14 Jul 2010 18:32:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44830 invoked by uid 99); 14 Jul 2010 18:32:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 18:32:27 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Jul 2010 18:32:18 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/80) with ESMTP id o6EISBc28629;
	Wed, 14 Jul 2010 11:28:11 -0700 (PDT)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Wed, 14 Jul 2010 11:28:10 -0700
From: Christopher Condit <condit@sdsc.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
   "te@statsbiblioteket.dk" <te@statsbiblioteket.dk>
Date: Wed, 14 Jul 2010 11:28:06 -0700
Subject: RE: Best practices for searcher memory usage?
Thread-Topic: Best practices for searcher memory usage?
Thread-Index: AcsjLKbGcluvcSWfTd2JAhULiXsdCQAVDgCg
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380DC@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
 <1279095228.2505.28.camel@te-prime>
In-Reply-To: <1279095228.2505.28.camel@te-prime>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgVG9rZS0NCj4gPiAqIDIwIG1pbGxpb24gZG9jdW1lbnRzIFsuLi5dDQo+ID4gKiAxNDBHQiB0
b3RhbCBpbmRleCBzaXplDQo+ID4gKiBPcHRpbWl6ZWQgaW50byBhIHNpbmdsZSBzZWdtZW50DQo+
IA0KPiBJIHRha2UgaXQgdGhhdCB5b3UgZG8gbm90IGhhdmUgZnJlcXVlbnQgdXBkYXRlcz8gSGF2
ZSB5b3UgdHJpZWQgdG8gc2VlIGlmIHlvdQ0KPiBjYW4gZ2V0IGJ5IHdpdGggbW9yZSBzZWdtZW50
cyB3aXRob3V0IHNpZ25pZmljYW50IHNsb3dkb3duPw0KDQpDb3JyZWN0IC0gaW4gZmFjdCB0aGVy
ZSBhcmUgbm8gdXBkYXRlcyBhbmQgbm8gZGVsZXRpb25zLiBXZSBpbmRleCBldmVyeXRoaW5nIG9m
ZmxpbmUgd2hlbiBuZWNlc3NhcnkgYW5kIGp1c3Qgc3dhcCB0aGUgbmV3IGluZGV4IGluLi4uDQpC
eSBtb3JlIHNlZ21lbnRzIGRvIHlvdSBtZWFuIG5vdCBjYWxsIG9wdGltaXplKCkgYXQgaW5kZXgg
dGltZT8NCg0KPiA+IFRoZSBhcHBsaWNhdGlvbiB3aWxsIHJ1biB3aXRoIDEwRyBvZiAtWG14IGJ1
dCBhbnkgbGVzcyBhbmQgaXQgYmFpbHMgb3V0Lg0KPiA+IEl0IHNlZW1zIGhhcHBpZXIgaWYgd2Ug
ZmVlZCBpdCAxMkdCLiBUaGUgc2VhcmNoZXMgYXJlIHN0YXJ0aW5nIHRvIGJvZw0KPiA+IGRvd24g
YSBiaXQgKDUtMTAgc2Vjb25kcyBmb3Igc29tZSBxdWVyaWVzKS4uLg0KPiANCj4gMTBHIHNvdW5k
cyBsaWtlIGEgbG90IGZvciB0aGF0IGluZGV4LiBUd28gY29tbW9uIG1lbW9yeS1lYXRlcnMgYXJl
IHNvcnRpbmcNCj4gYnkgZmllbGQgdmFsdWUgYW5kIGZhY2V0aW5nLiBDb3VsZCB5b3UgZGVzY3Jp
YmUgd2hhdCB5b3UncmUgZG9pbmcgaW4gdGhhdA0KPiByZWdhcmQ/DQoNCk5vIGZhY2V0aW5nIGFu
ZCBubyBzb3J0aW5nIChvdGhlciB0aGFuIHNjb3JlKSBmb3IgdGhpcyBpbmRleC4uLg0KDQo+IFNp
bWlsYXJseSwgdGhlIDUtMTAgc2Vjb25kcyBmb3Igc29tZSBxdWVyaWVzIHNlZW1zIHZlcnkgc2xv
dy4gQ291bGQgeW91IGdpdmUNCj4gc29tZSBleGFtcGxlcyBvbiB0aGUgcXVlcmllcyB0aGF0IGNh
dXNlcyBwcm9ibGVtcyB0b2dldGhlciB3aXRoIHNvbWUNCj4gZXhhbXBsZXMgb2YgZmFzdCBxdWVy
aWVzIGFuZCBob3cgbG9uZyB0aGV5IHRha2UgdG8gZXhlY3V0ZT8NCg0KVHlwaWNhbGx5IGp1c3Qg
VGVybVF1ZXJpZXMgb3IgQm9vbGVhblF1ZXJpZXM6IChDaGlwIE9SIE5hY2hvIE9SIEZvbykgQU5E
IChTYWxzYSBPUiBTYXVjZSkgQU5EIChUaGlzIE9SIFRoYXQpDQpUaGUgbGF0dGVyIGlzIG1vc3Qg
dHlwaWNhbC4NCg0KV2l0aCBhIHNpbmdsZSBrZXl3b3JkIGl0IHdpbGwgZXhlY3V0ZSBpbiA8IDEg
c2Vjb25kLiBJbiBhIGNhc2Ugd2hlcmUgdGhlcmUgYXJlIDEwIGNsYXVzZXMgaXQgYmVjb21lcyBt
dWNoIHNsb3dlciAod2hpY2ggSSB1bmRlcnN0YW5kLCBqdXN0IGxvb2tpbmcgZm9yIHdheXMgdG8g
c3BlZWQgaXQgdXApLi4uDQoNClRoYW5rcywNCi1DaHJpcw0K


From java-user-return-46717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 00:52:02 2010
Return-Path: <java-user-return-46717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56965 invoked from network); 15 Jul 2010 00:52:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 00:52:02 -0000
Received: (qmail 78459 invoked by uid 500); 15 Jul 2010 00:52:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78406 invoked by uid 500); 15 Jul 2010 00:51:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78398 invoked by uid 99); 15 Jul 2010 00:51:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 00:51:59 +0000
X-ASF-Spam-Status: No, hits=4.7 required=10.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 00:51:52 +0000
Received: by gxk7 with SMTP id 7so484672gxk.35
        for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 17:50:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=/nhJ0OKbzqvXDnWh3Na7+ILC53JpEOhN0T2QQn5Aq2I=;
        b=KTKgNMJqt0TZf4tkW/m2ZQLTtpukycYIC/2gnHlGWrG/ZCWGFVPeNERwigsaRMYBfU
         +ZCUpAh+Vfkf6xZLcjUQM5WqfZ1Bqh09+/p1mqC9txxiuPuT9cz6eVX26qAgR4KEeqNs
         DIuf9XMbajTMsX5fJJNRYk9hUGKS65f6l+4O8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=AVEHptihwGmLz/4YUhCD6n+Fxbi0t0rUCUz+SLJ8XglpZ+9Wi4BMnTuOXuksqBCs7O
         AqmHc/yARLGVIajTWQNzzkwrT2CJaKkwkup7Xn+tlbMNYUn2X0TLagDpjWl3GY7zqoY4
         WqRAp2ZNkSprukiG7oMOk5Is6aOUn+UYw4L3M=
MIME-Version: 1.0
Received: by 10.224.107.81 with SMTP id a17mr10437255qap.294.1279155040759; 
	Wed, 14 Jul 2010 17:50:40 -0700 (PDT)
Received: by 10.229.233.9 with HTTP; Wed, 14 Jul 2010 17:50:40 -0700 (PDT)
In-Reply-To: <367911.35368.qm@web65819.mail.ac4.yahoo.com>
References: <675451.56367.qm@web65815.mail.ac4.yahoo.com>
	<367911.35368.qm@web65819.mail.ac4.yahoo.com>
Date: Wed, 14 Jul 2010 20:50:40 -0400
Message-ID: <AANLkTik64LcmA_zKLGrFih3x6EYHcWnWrW-Rq5AvktWr@mail.gmail.com>
Subject: Re: Out of memory problem in search
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f8a4d08d13b84048b627d41
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f8a4d08d13b84048b627d41
Content-Type: text/plain; charset=ISO-8859-1

This doesn't make sense to me. Are you saying that you only have 200,000
documents in your index? Because keeping a score for 200K documents should
consume a relatively trivial amount of memory. The fact that you're sorting
by time is a red flag, but it's only a long, so 200K documents shouldn't
strain memory due to sorting either. The critical thing here isn't
necessarily the size of your index, but the number of documents in that
index and the number of unique values you're sorting by. By the way, what
happens if you don't sort?

Since it doesn't make sense to me, that must mean I don't understand the
problem very thoroughly. Could you provide some index characteristics?
Saying it's 40G leaves a lot open to speculation. That could be 39G of
stored text which is mostly irrelevant for searching. Or it could be
entirely indexed, tokenized data which would be a different thing. How many
documents do you have in your index? What does your query look like?

You can get an idea of the amount of your index holding indexed tokens by
NOT storing any of the fields, just indexing them (Field.Store.NO)

What version of Lucene are you using? How do you start your process? If you
start the application with java's default memory, that's not very much (64M
if memory serves). You may be using nowhere near your hardware limits. Try
specifying -Xmx512M and/or the -server option.

Best
Erick

On Wed, Jul 14, 2010 at 9:27 AM, ilkay polat <ilkay_polat@yahoo.com> wrote:

> I have also  confused about the memory management of lucene.
>
> Where is this out of memory problem is mainly arised from Reason-1 or
> Reason-2 reason?
>
> Reason-1 : Problem is sourced from searching is done in big indexed file
> (nearly 40 GB) If there is 100(small number of records) records returned
> from search in 60 GB indexed file, problem will again arised.
> OR
> Reason-2 : Problem is sourced from finding so many records(nearly 200,000
> records), so in memory 200, 000 java object in heap? If file's sizeis 10
> GB(small file size ) but returned records are so many, problem will again
> arised.
>
> Is there any document which tells the general memory management issues in
> searching in lucene?
>
> Thanks
>
>
> ilkay POLAT     Software Engineer   Gsm : (+90) 532 542 36 71
>   E-mail : ilkay_polat@yahoo.com
>
> --- On Wed, 7/14/10, ilkay polat <ilkay_polat@yahoo.com> wrote:
>
> From: ilkay polat <ilkay_polat@yahoo.com>
> Subject: Re: Out of memory problem in search
> To: java-user@lucene.apache.org
> Date: Wednesday, July 14, 2010, 3:54 PM
>
> Hi,
> We have hardware restrictions(Max RAM can be  8GB). So, unfortunately,
> increasing memory can not be option for us for today's situation.
>
> Yes, as you said that problem is faced when goes to last pages of search
> screen because of using search method which is find top n records. In other
> way, this is meaning "searching all the thinngs returns all".
>
> I am now researching whether there is a way which consumes time instead of
> memory in this search mechanism in lucene? Any other ideas?
>
> Thanks
>
> --- On Wed, 7/14/10, findbestopensource <findbestopensource@gmail.com>
> wrote:
>
> From: findbestopensource <findbestopensource@gmail.com>
> Subject: Re: Out of memory problem in search
> To: java-user@lucene.apache.org
> Date: Wednesday, July 14, 2010, 2:59 PM
>
> Certainly it will. Either you need to increase your memory OR refine your
> query. Eventhough you display paginated result. The first couple of pages
> will display fine and going towards last may face problem. This is because,
> 200,000 objects is created and iterated, 190,900 objects are skipped and
> last100 objects are returned. The memory is consumed in creating these
> objects.
>
> Regards
> Aditya
> www.findbestopensource.com
>
>
>
> On Wed, Jul 14, 2010 at 4:14 PM, ilkay polat <ilkay_polat@yahoo.com>
> wrote:
>
> > Hello Friends;
> >
> > Recently, I have problem with lucene search - memory problem on the basis
> > that indexed file is so big. (I have indexed some kinds of information
> and
> > this indexed file's size is nearly more than 40 gigabyte. )
> >
> > I search the lucene indexed file with
> > org.apache.lucene.search.Searcher.search(query, null, offset + limit, new
> > Sort(new SortField("time", SortField.LONG, true)));
> > (This provides to find (offset + limit) records to back.)
> >
> > I use searching by range. For example, in web page I firstly search
> records
> > which are in [0, 100] range then second page [100, 200]
> > I have nearly 200,000 records at all. When I go to last page which means
> > records between 200,000 -100, 200,0, there is a memory problem(I have 4gb
> > ram on running machine) in jvm( out of memory error).
> >
> > Is there a way to overcome this memory problem?
> >
> > Thanks
> >
> > --
> > ilkay POLAT   Software Engineer
> > TURKEY
> >
> >  Gsm : (+90) 532 542 36 71
> >  E-mail : ilkay_polat@yahoo.com
> >
> >
> >
>
>
>
>
>
>
>
>

--00c09f8a4d08d13b84048b627d41--

From java-user-return-46718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 00:54:24 2010
Return-Path: <java-user-return-46718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57157 invoked from network); 15 Jul 2010 00:54:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 00:54:24 -0000
Received: (qmail 81778 invoked by uid 500); 15 Jul 2010 00:54:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81580 invoked by uid 500); 15 Jul 2010 00:54:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81572 invoked by uid 99); 15 Jul 2010 00:54:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 00:54:21 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 00:54:15 +0000
Received: by vws11 with SMTP id 11so427336vws.35
        for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 17:53:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=XKsFcL8QpHqXWJfuk58i2OHJ2c4YzyYCN34EY7j9Dyw=;
        b=vZrMF8U5azN3Q3TCWThaQmAehttjkVXEHI7DI6EGBHyvmB2CzrGgcFTJ05+9AD2KnS
         BS4f8q9jBGTP5FT8O+VWsK3whoK40iOWmqJaBxJL6l1ItdePR4okQB/UY/29+uDH3H1k
         sXthF5AvqaHL4i3uc63zuEUXWUTUuYYsniTic=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=AUnDivsw610M6//zS2kQiEQp1/MtahZA+voWl+Bz3S9pM0+U42rlgaEX2UkSPIoVQu
         iJIbk65mRbzkw1cMv7W+YM3voHq97vwv9FHRatzoYs0c1FOj1b7VzinY4VrPwBQCGMkP
         RO/nTLtm9iX4+p1ovlx+yf7P2pskRsiuv+GkQ=
MIME-Version: 1.0
Received: by 10.224.104.195 with SMTP id q3mr10453598qao.167.1279155234000; 
	Wed, 14 Jul 2010 17:53:54 -0700 (PDT)
Received: by 10.229.233.9 with HTTP; Wed, 14 Jul 2010 17:53:53 -0700 (PDT)
In-Reply-To: <AANLkTik5leoXmrRRzgCMAb2vwNAm41HOm5bL9a6vzFIi@mail.gmail.com>
References: <AANLkTilBoPY0BiXZjuvBAtWXfBkDHFn8LRoG9zLeaLAK@mail.gmail.com>
	<AANLkTil_QPJZC2ehzR6JTlWHeIUxw0rIU9-o3YUbew-A@mail.gmail.com>
	<AANLkTilEG7xmAVlhtNyiZlmMEwe9tnRySofly2Qpygy7@mail.gmail.com>
	<AANLkTik5leoXmrRRzgCMAb2vwNAm41HOm5bL9a6vzFIi@mail.gmail.com>
Date: Wed, 14 Jul 2010 20:53:53 -0400
Message-ID: <AANLkTim7HbOMM4qYepGZxA5bRBBFAXWjsz9DHq8Qe0QQ@mail.gmail.com>
Subject: Re: Continuously iterate over documents in index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f9c99b655d1d4048b62891f
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f9c99b655d1d4048b62891f
Content-Type: text/plain; charset=ISO-8859-1

Kiran:
Please start a new thread when asking a new question. From Hossman's apache
page:

When starting a new discussion on a mailing list, please do not reply to
an existing message, instead start a fresh email.  Even if you change the
subject line of your email, other mail headers still track which thread
you replied to and your question is "hidden" in that thread and gets less
attention.   It makes following discussions in the mailing list archives
particularly difficult.
See Also:  http://en.wikipedia.org/wiki/User:DonDiego/Thread_hijacking


On Wed, Jul 14, 2010 at 10:56 AM, Kiran Kumar <muthojukk@gmail.com> wrote:

> All,
>
> Issue: Unable to get the proper results after searching. I added sample
> code
> which I used in the application.
>
> If I used *numHitPerPage* value as 1000 its giving expected results.
> ex: The expected results is 32 docs but showing 32 docs
> Instead If I use *numHitPerPage* as 2^32-1 its not giving expected results.
> ex: The expected results is 32 docs but showing only 29 docs.
>
> Sample code below:
>
>
> StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_CURRENT);
>  QueryParser qp = new QueryParser(Version.LUCENE_CURRENT, defField,
> analyzer);
> Query q = qp.parse(queryString);
> TopDocsCollector tdc = TopScoreDocCollector.create(*numHitPerPage*, true);
> IndexSearcher(is).search(q,tdc);
>
> ScoreDocs[]  noDocs  = tdc.topDocs().scoreDocs;
>
> Please let me know if any other way to search?
>
> Thanks.
> Kiran. M
>

--00c09f9c99b655d1d4048b62891f--

From java-user-return-46719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 01:01:19 2010
Return-Path: <java-user-return-46719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59084 invoked from network); 15 Jul 2010 01:01:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 01:01:18 -0000
Received: (qmail 87748 invoked by uid 500); 15 Jul 2010 01:01:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87697 invoked by uid 500); 15 Jul 2010 01:01:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87586 invoked by uid 99); 15 Jul 2010 01:01:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 01:01:15 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 01:01:07 +0000
Received: by gxk7 with SMTP id 7so490604gxk.35
        for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 17:59:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=wSY0hI1XzI+LkJrYt2N21xztNvjZyyZ0i9DtGugtmRM=;
        b=G1bTYcqsvTQs/GB4u25FVeviWRcCZxmftYMJQUgmbZqfrcxC0CRoGcXy5qU1soZdMh
         C4fibwXABN4H9FQMOfATDD8jZT5XXvDPXK9YA/8HRZ9I5rkNoBVfCns34WEdfUQUYaIf
         5ouHfvE7Pebc6Afo46sJn6deYnCd56z4kFauE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Zp6sY/kYfQZIyxn1iGKmIyfueqBTFW9zMZqk7CkbRw4yWZm9o2CDAWuR0Ndg+Z4VJz
         aSMCZTJb57Rzc1ghunh7Ub6uhzC0LcA2rPZlYWRD6kfzw4rCoMxFbP623usV1hZRtrVr
         So11Vi4XQRHbQHYQ9Apj+ZQdTPPRtL/LlRR0Y=
MIME-Version: 1.0
Received: by 10.224.35.218 with SMTP id q26mr3318719qad.36.1279155597729; Wed, 
	14 Jul 2010 17:59:57 -0700 (PDT)
Received: by 10.229.233.9 with HTTP; Wed, 14 Jul 2010 17:59:57 -0700 (PDT)
In-Reply-To: <AANLkTilEG7xmAVlhtNyiZlmMEwe9tnRySofly2Qpygy7@mail.gmail.com>
References: <AANLkTilBoPY0BiXZjuvBAtWXfBkDHFn8LRoG9zLeaLAK@mail.gmail.com>
	<AANLkTil_QPJZC2ehzR6JTlWHeIUxw0rIU9-o3YUbew-A@mail.gmail.com>
	<AANLkTilEG7xmAVlhtNyiZlmMEwe9tnRySofly2Qpygy7@mail.gmail.com>
Date: Wed, 14 Jul 2010 20:59:57 -0400
Message-ID: <AANLkTilcrNCVereN3Ur0zuvbZkC267tH2hf7srYoOG__@mail.gmail.com>
Subject: Re: Continuously iterate over documents in index
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f99ddf303e247048b629f38
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f99ddf303e247048b629f38
Content-Type: text/plain; charset=ISO-8859-1

Hmmmm, if you somehow know the last date you processed, why wouldn't using a
range query work for you? I.e.
date:[<recorded last date> TO <new date to record (NOW?)>]?

Best
Erick

On Wed, Jul 14, 2010 at 10:37 AM, Max Lynch <ihasmax@gmail.com> wrote:

> You could have a field within each doc say "Processed" and store a
>
> > value Yes/No, next run a searcher query which should give you the
> > collection of unprocessed ones.
> >
>
> That sounds like a reasonable idea, and I just realized that I could have
> done that in a way specific to my application.  However, I already tried
> doing something with a MatchAllDocsQuery with a custom collector and sort
> by
> date.  I store the last date and time of a doc I processed and process only
> newer ones.
>

--00c09f99ddf303e247048b629f38--

From java-user-return-46720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 01:15:32 2010
Return-Path: <java-user-return-46720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65893 invoked from network); 15 Jul 2010 01:15:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 01:15:32 -0000
Received: (qmail 3293 invoked by uid 500); 15 Jul 2010 01:15:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3247 invoked by uid 500); 15 Jul 2010 01:15:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3239 invoked by uid 99); 15 Jul 2010 01:15:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 01:15:29 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 01:15:22 +0000
Received: by wwb18 with SMTP id 18so563769wwb.5
        for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 18:15:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:cc:content-type;
        bh=7ufJw9YNyFoNZvBUi+vOqcQLWFEOxg/89zngH/zy6ys=;
        b=qj+J56b/M3yMN/160PhdvC/ewCbtdoB4vJcbzhUA5YB9IaLy/z0RxN2OY5FhzYALs/
         QywAnHHoQXmA1C/+unp3AAgqHaNQ2YvIR8L2s7VF7MDF6AUB6tzVQQ5knsoZg6SsnN0H
         Kx8mO5ZvdD8UkZ1igwkLkD69qTeDMkEuBRvJE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        b=JRuiB0oyx7Kf7msuYB4FewdoG7EHLygOeLO5OXdLC5cyiVh3pKToEIBytv9ZoNhLHx
         rQIdNjuOr/G4ZVv5P5Q7aMp30HXJKz9Ri3yEn+j69H3UAZS6pwdbExMfnWwFXfGHivDG
         k9S2j+NLzRnDuSO5Y17dIO6JOwbFUGHwCdOOI=
Received: by 10.216.68.20 with SMTP id k20mr7937201wed.29.1279156501254; Wed, 
	14 Jul 2010 18:15:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.176.149 with HTTP; Wed, 14 Jul 2010 18:14:41 -0700 (PDT)
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380DC@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu> 
	<1279095228.2505.28.camel@te-prime> <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380DC@MBX.ad.sdsc.edu>
From: Glen Newton <glen.newton@gmail.com>
Date: Thu, 15 Jul 2010 11:14:41 +1000
Message-ID: <AANLkTil1DpFv9_NTdB2z5IHi2neK980aKAwyRTn6RxoY@mail.gmail.com>
Subject: Re: Best practices for searcher memory usage?
To: java-user@lucene.apache.org
Cc: "te@statsbiblioteket.dk" <te@statsbiblioteket.dk>
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

There are a number of strategies, on the Java or OS side of things:
- Use huge pages[1]. Esp on 64 bit and lots of ram. For long running,
large memory (and GC busy) applications, this has achieved significant
improvements. Like 300% on EJBs. See [2],[3],[4]. For a great article
introducing and benchmarking huge tables, both in C and Java, see [5]
 To see if huge pages might help you, do
  > cat /proc/meminfo
 And check on the "PageTables:        26480 kB"
 If the PageTables is, say, more than 1-2GBs, you should consider
using huge pages.
- assuming multicore: there are times (very application dependent)
when having your application running on all cores turns out not to
produce the best performance. Take one core out making it available to
look after system things (I/O, etc) sometimes will improve
performance. Use numactl[6] to bind your application to n-1 cores,
leaving one out.
- - numactl also allows you to restrict memory allocation to 1-n
cores, which also may be useful depending on your application
- The Java vm from Sun-Oracle has a number of options[7]
  - -XX:+AggressiveOpts [You should have this one on always...]
  - -XX:+StringCache
  - -XX:+UseFastAccessorMethods

  - -XX:+UseBiasedLocking  [My experience has this helping some
applications, hindering others...]
  - -XX:ParallelGCThreads= [Usually this is #cores; try reducing this to n/2]
  - -Xss128k
  - -Xmn [Make this large, like of your 40% of heap -Xmx If you do
this use -XX:+UseParallelGC See [8]
You can also play with the many GC parameters. This is pretty arcane,
but can give you good returns.

And of course, I/O is important: data on multiple disks with multiple
controllers; RAID; filesystem tuning ; turn off atime; readahead
buffer (change from 128k to 8MB on Linux: see [9]) OS tuning. See [9]
for a useful filesystem comparison (for Postgres).

-glen
http://zzzoot.blogspot.com/

[1]http://zzzoot.blogspot.com/2009/02/java-mysql-increased-performance-with.html
[2]http://andrigoss.blogspot.com/2008/02/jvm-performance-tuning.html
[3]http://kirkwylie.blogspot.com/2008/11/linux-fork-performance-redux-large.html
[4]http://orainternals.files.wordpress.com/2008/10/high_cpu_usage_hugepages.pdf
[5]http://lwn.net/Articles/374424/
[6]http://www.phpman.info/index.php/man/numactl/8
[7]http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp#PerformanceTuning
[8]http://java.sun.com/performance/reference/whitepapers/tuning.html#section4.2.5
[9]http://assets.en.oreilly.com/1/event/27/Linux%20Filesystem%20Performance%20for%20Databases%20Presentation.pdf

On 15 July 2010 04:28, Christopher Condit <condit@sdsc.edu> wrote:
> Hi Toke-
>> > * 20 million documents [...]
>> > * 140GB total index size
>> > * Optimized into a single segment
>>
>> I take it that you do not have frequent updates? Have you tried to see if you
>> can get by with more segments without significant slowdown?
>
> Correct - in fact there are no updates and no deletions. We index everything offline when necessary and just swap the new index in...
> By more segments do you mean not call optimize() at index time?
>
>> > The application will run with 10G of -Xmx but any less and it bails out.
>> > It seems happier if we feed it 12GB. The searches are starting to bog
>> > down a bit (5-10 seconds for some queries)...
>>
>> 10G sounds like a lot for that index. Two common memory-eaters are sorting
>> by field value and faceting. Could you describe what you're doing in that
>> regard?
>
> No faceting and no sorting (other than score) for this index...
>
>> Similarly, the 5-10 seconds for some queries seems very slow. Could you give
>> some examples on the queries that causes problems together with some
>> examples of fast queries and how long they take to execute?
>
> Typically just TermQueries or BooleanQueries: (Chip OR Nacho OR Foo) AND (Salsa OR Sauce) AND (This OR That)
> The latter is most typical.
>
> With a single keyword it will execute in < 1 second. In a case where there are 10 clauses it becomes much slower (which I understand, just looking for ways to speed it up)...
>
> Thanks,
> -Chris
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 01:20:05 2010
Return-Path: <java-user-return-46721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66269 invoked from network); 15 Jul 2010 01:20:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 01:20:05 -0000
Received: (qmail 9889 invoked by uid 500); 15 Jul 2010 01:20:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9839 invoked by uid 500); 15 Jul 2010 01:20:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9831 invoked by uid 99); 15 Jul 2010 01:20:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 01:20:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goksron@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 01:19:55 +0000
Received: by qwd7 with SMTP id 7so97051qwd.35
        for <java-user@lucene.apache.org>; Wed, 14 Jul 2010 18:18:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=Rm1c41KdeRiIRrIZb5CX92YVHLbN63+gIF7Kt67sGtM=;
        b=CaNx+dZroOwCapZvYi6+A6+8u+AJxUF5iy2oKftIhwYB97tmk58viT+VB2GbWqENv4
         +Pf4jHNAH7uZvokpIUZAbKOj02GRFBLONYV8G6FTBy971ObwkiLIiPzhLBDUdtNFzMCe
         BOBRxjwWy4BmH2BUdbjMW6STUaMdpbcmloZ6s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=RfMMGvYbmxMIfVMbzOZq06mOaV9YN9FJEvKpMTVk/PL4f578GC3D9h3k0IX2TsCg9V
         AkE0sfhw5ugBdepaNirMF6pArKZONMZGOqNwoca/z1lz1PlqWOw/gXmFjVUt80VQh9xq
         nnTRGbKhs6tKS7/+402ttS70a9hMTGYBeuJ8M=
MIME-Version: 1.0
Received: by 10.224.69.16 with SMTP id x16mr10522517qai.284.1279156724665; 
	Wed, 14 Jul 2010 18:18:44 -0700 (PDT)
Received: by 10.229.222.6 with HTTP; Wed, 14 Jul 2010 18:18:44 -0700 (PDT)
In-Reply-To: <AANLkTil1DpFv9_NTdB2z5IHi2neK980aKAwyRTn6RxoY@mail.gmail.com>
References: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
	<1279095228.2505.28.camel@te-prime>
	<BAFDED91EF7D5A43A30F897D6C94B1287CFB1380DC@MBX.ad.sdsc.edu>
	<AANLkTil1DpFv9_NTdB2z5IHi2neK980aKAwyRTn6RxoY@mail.gmail.com>
Date: Wed, 14 Jul 2010 18:18:44 -0700
Message-ID: <AANLkTimPgSp9j1tuy7SKmW_XU0p0y3AuNwp2oyVorlj-@mail.gmail.com>
Subject: Re: Best practices for searcher memory usage?
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Glen, thank you for this very thorough and informative post.

Lance Norskog

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 08:23:54 2010
Return-Path: <java-user-return-46722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11926 invoked from network); 15 Jul 2010 08:23:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 08:23:53 -0000
Received: (qmail 12370 invoked by uid 500); 15 Jul 2010 08:23:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11882 invoked by uid 500); 15 Jul 2010 08:23:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11733 invoked by uid 99); 15 Jul 2010 08:23:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 08:23:46 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 08:23:37 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Thu, 15 Jul 2010 10:22:56 +0200
Subject: RE: Best practices for searcher memory usage?
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: Christopher Condit <condit@sdsc.edu>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380DC@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
	 <1279095228.2505.28.camel@te-prime>
	 <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380DC@MBX.ad.sdsc.edu>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Thu, 15 Jul 2010 10:23:05 +0200
Message-ID: <1279182185.31898.89.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2010-07-14 at 20:28 +0200, Christopher Condit wrote:

[Toke: No frequent updates]

> Correct - in fact there are no updates and no deletions. We index 
> everything offline when necessary and just swap the new index in...

So everything is rebuild from scratch each time? Or do you mean that
you're only adding new documents, not changing old ones?

Either way, optimizing to a single 140GB segment is heavy. Ignoring the
relatively light processing of the data, the I/O for merging is still at
the very minimum to read and write the 140GB. Even if you can read and
write 100MB/sec it still takes an hour. This is of course not that
relevant if you're fine with a nightly batch job.

> By more segments do you mean not call optimize() at index time?

Either that or calling it with maxNumSegments 10, where 10 is just a
wild guess. Your mileage will vary:
http://lucene.apache.org/java/3_0_0/api/all/org/apache/lucene/index/IndexWriter.html#optimize%28int%29

[Toke: 10GB is a lot for such an index. What about sorting & faceting?]

> No faceting and no sorting (other than score) for this index...

[Toke: What queries?]

> Typically just TermQueries or BooleanQueries: (Chip OR Nacho OR Foo) 
> AND (Salsa OR Sauce) AND (This OR That)
> The latter is most typical.
> 
> With a single keyword it will execute in < 1 second. In a case where 
> there are 10 clauses it becomes much slower (which I understand, 
> just looking for ways to speed it up)...

As Erick Erickson recently wrote: "Since it doesn't make sense to me,
that must mean I don't understand the problem very thoroughly".

Your queries seems simple enough and I would expect response times well
under a second with warmed index and conventional local harddrives.
Together with the unexpected high memory requirement my guess is that
there's something going on with your terms. If you try opening the index
with luke, it'll tell you the number of terms. If that is very high for
the fields you search on, this would explain the memory usage.

You can also take a look at the rank for the most common terms. If it is
very high this would explain the long execution times for compound
queries that uses one or more of these terms. A stopword filter would
help in this case if such a filter is acceptable for you.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 10:29:14 2010
Return-Path: <java-user-return-46723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32312 invoked from network); 15 Jul 2010 10:29:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 10:29:14 -0000
Received: (qmail 28442 invoked by uid 500); 15 Jul 2010 10:29:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27935 invoked by uid 500); 15 Jul 2010 10:29:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27924 invoked by uid 99); 15 Jul 2010 10:29:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 10:29:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 10:29:00 +0000
Received: by bwz2 with SMTP id 2so734940bwz.35
        for <java-user@lucene.apache.org>; Thu, 15 Jul 2010 03:27:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=UeFWGIPziQttPmRaOJbHSlrYJ1bfbvZDPpYE6kv3mes=;
        b=YC/lsr8hhTH37ay4UU/V4vQgGKvRtUSiwoyk7l2aUYrrbEVp19T9MiYlCTy5WfY3Io
         FtLoxnkWwV70fed7V9dyoD0v8AaQBx/+Mr3GD3Ewk9RnQMZu8jPNifFnqGtVtlTlPrte
         HBtot24E4AlOh/e+2NOr71C0HeMAlgl2aZ63c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=d+JoUNBzk3QdrXfl+E6SkFgwPcBnSAOD0TtL88hoN1hjMx7SvqiJakw/5EwhuO9XyR
         Qf8rJWKjB9HIDZS+OIIXpDgWEnT81LCjmb6zyoPYD/W+8P2FALWSqajzik01s3O+JV6F
         VDnPj5RosxftHJ46pPaEAWcqLnm9XI83i84xM=
Received: by 10.204.133.146 with SMTP id f18mr13272087bkt.97.1279189660258; 
	Thu, 15 Jul 2010 03:27:40 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.57.69 with HTTP; Thu, 15 Jul 2010 03:27:20 -0700 (PDT)
In-Reply-To: <b20aa64fb3a9e0509111f45225c7c919@localhost>
References: <b20aa64fb3a9e0509111f45225c7c919@localhost>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 15 Jul 2010 11:27:20 +0100
Message-ID: <AANLkTilmQBRiG5IBUXGK3sARdSJwopInAJDwQ0W7DKBR@mail.gmail.com>
Subject: Re: subset query :query filter or boolean query
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Loads of questions ... some answers below.

> I have 4 query search fields.
>
> case 1 : if i use one search
> field to make a query filter and then use the query filter to search on
> other 3 fields so as to reduce the searching docs subset.
>
> case 2: i use
> all query parameters using boolean query , whole of index will be searched.
>
>
> Which of the two approach will give better performance.Or is there ne
> other approach to do this .

The filter approach is likely to be best if you can reuse the filter.

> Also
>
> Can we use subset of documents , for
> searching .

Yes.

> Lets say I have hash map of
>
> P1 -1,2,3,4
>
> P2 - 3,4,5
>
>
> P3-7,5,3
>
> Now I have an documents in lucene index stored as
>
> 1-P1
>
>
> 2-P1
>
> 3-P1,P2,P3
>
> 4-P1,P2
>
> 5-P2,P3
>
> 7-P3
>
> ..
>
> ..
>
> when i search
> docs with P2 I get 3,4,5
>
> Now I want my search to b restricted to just
> 3,4,5 doc only. where by I can search only these docs for further
> parameters.
>
> 1. How to go abt it.

Boolean query with multiple nested queries.

> 2. Is there any other seraching
> mechanism I should use, or Lucene is better fit?

Lucene.

> 3. should i keep my hash
> map also in lucene indexes and is then thr a method to link it to another
> lucene indexes.

You can store whatever you want in lucene, and it can make sense to do
so, but if the data is already stored elsewhere and easily accessible
you may choose not to.  It would be up to you to provide any linkage.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 13:32:56 2010
Return-Path: <java-user-return-46724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2237 invoked from network); 15 Jul 2010 13:32:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 13:32:55 -0000
Received: (qmail 56134 invoked by uid 500); 15 Jul 2010 13:32:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55412 invoked by uid 500); 15 Jul 2010 13:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55394 invoked by uid 99); 15 Jul 2010 13:32:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 13:32:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of richard.marr@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 13:32:37 +0000
Received: by bwz2 with SMTP id 2so885293bwz.35
        for <multiple recipients>; Thu, 15 Jul 2010 06:32:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=SLCBQBKn8nA3sDSEU1OXs7fCKOjqtdc0hYplYh53i/4=;
        b=l5EQf2c6qxft6wJ76r5/D4jDbEGOrtI4NyIAsYspTdAfu6QNozAGdEBaNZW6aa126E
         QsZuTAyc61zHExdMG8Vf8sIJvK1g7Hd7o6enImgmsAKt8EqgW7hUBFuU0dpx7hxMcgY0
         ei5jWqPYBH2kEyrrz2UoGQvAbdseDNlNsZbJs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=So7wxCYZbDh17/lrs3oxhHZU7LDzoFEe7JWEOFNmJBJ5UZPdZE52MdU8uWnfN9hsE1
         9by3XWqBgr23vkleEPUyydk6QkDl+nKsa9jYKkVXZPz67iZY/T8oLx/qKDnN+gy46Q12
         Tj1W6QnvFysUKzI4HXOXx4QtKUz+6PJAwquCw=
MIME-Version: 1.0
Received: by 10.204.85.90 with SMTP id n26mr14777011bkl.109.1279200736923; 
	Thu, 15 Jul 2010 06:32:16 -0700 (PDT)
Received: by 10.204.66.19 with HTTP; Thu, 15 Jul 2010 06:32:16 -0700 (PDT)
Date: Thu, 15 Jul 2010 14:32:16 +0100
Message-ID: <AANLkTimavVNKYRhaQHK4Ze_KtZAPwKvDqalqJjJeo6fK@mail.gmail.com>
Subject: London open source search meet-up
From: Richard Marr <richard.marr@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Apologies for the cross-post.

We are organising another open source search social evening in London on
Wednesday the 28 July.

As usual the plan is to get together and chat about search technology,
from Lucene to Solr, Hadoop, Mahout, Xapian and the like - bringing
together people from across the field to discuss ideas and ask questions
over a quiet drink.

For directions to this meetup and for the Meetup.com group see:
http://www.meetup.com/london-search-social/

Please RSVP directly or via Meetup if you can make it!


--=20
Richard Marr & Ren=E9 Kriegler

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 15:09:38 2010
Return-Path: <java-user-return-46725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96466 invoked from network); 15 Jul 2010 15:09:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 15:09:37 -0000
Received: (qmail 26000 invoked by uid 500); 15 Jul 2010 15:09:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25863 invoked by uid 500); 15 Jul 2010 15:09:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25854 invoked by uid 99); 15 Jul 2010 15:09:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 15:09:34 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mgawinecki@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 15:09:25 +0000
Received: by bwz2 with SMTP id 2so988722bwz.35
        for <java-user@lucene.apache.org>; Thu, 15 Jul 2010 08:08:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=kIlGXrm2kz+9K8nuHg6q2wLcy2yu4CFK9eyWVQKsfTc=;
        b=GdCnysK+cF2sUhPs/bNgyA1N0BxQrbAcYSGaBGtqqml02rUeDwGBoonaNEmwX5LTLN
         ywcVGmQVxqIFIlfAN+bmJECyRsrzTmLOgzMAVjCFCrjxOtsSE7/Sn1DD2+1uy+z0J1KX
         THFMC3AIPIk+qyMIPhWlj0rsTiO1nPZ67ClV4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=sgdxz8rRUNB8YeDTGSW2fXM6I14HVf++Wf7QPiR2MdJg+YAMy6Yc2nTeQIhT4G88AC
         5Qw/wpSuLwu/1D+na+p+Mr/VqpCzmFRZw0GMGezVopf987HyBVGlBGRSdC8MbrH1d1CY
         VTEdfD6S12HSoALKyzkSPr8oOj0V6YRzzjc7g=
Received: by 10.204.70.140 with SMTP id d12mr14958218bkj.37.1279206482248;
        Thu, 15 Jul 2010 08:08:02 -0700 (PDT)
Received: from [141.35.12.196] (dyn-012196.fmi.uni-jena.de [141.35.12.196])
        by mx.google.com with ESMTPS id a11sm6320503bkc.12.2010.07.15.08.08.00
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 15 Jul 2010 08:08:01 -0700 (PDT)
Message-ID: <4C3F244D.2060804@gmail.com>
Date: Thu, 15 Jul 2010 17:07:57 +0200
From: Maciej <mgawinecki@gmail.com>
User-Agent: Thunderbird 2.0.0.24 (Windows/20100228)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: XML results ranking
Content-Type: text/plain; charset=ISO-8859-2; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I'm a newbie to Lucene and before starting playing with it I would like 
to know whether it fits to my application.

I have a collection of XML documented demarcated with respect to a 
stable XML schema (WSDL definitions).

I wonder whether Lucene:

(1) provides full-text search over content of XML elements ?

(2) provides substring search over values of attributes of XML elements ?

(3) scores relevance of matching XML documents ?

(4) allows to identify (in matching document) XML elements with matched 
query terms and than navigate to parental/children nodes in XML 
?structure ?

(5) provides a way to give more weight to some XML element types during 
relevance scoring ?


Best regards,
Maciej Gawinecki


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 15:40:35 2010
Return-Path: <java-user-return-46726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5734 invoked from network); 15 Jul 2010 15:40:34 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 15:40:34 -0000
Received: (qmail 85088 invoked by uid 500); 15 Jul 2010 15:40:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85039 invoked by uid 500); 15 Jul 2010 15:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85031 invoked by uid 99); 15 Jul 2010 15:40:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 15:40:31 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ihasmax@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 15:40:23 +0000
Received: by wwb18 with SMTP id 18so227834wwb.5
        for <java-user@lucene.apache.org>; Thu, 15 Jul 2010 08:40:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=d+pIqF5gRI+vSepx/Ageju7gnTAXhSSQaIFrzq63k6k=;
        b=thmcs71Hb9mjhIMiGrPeQDKEdqNwCzNwqdN4AT0qyhsrXtPlTpTKfDYTwnUrfot5Xi
         u7aQmRHnY8BdY/x88CKCBtvb92wC/SIlVmNU4WkduXaemJA1cfdE7eOiGqt85xf91s/1
         yAA9zRz2B7swl+b+FVZgc5O9DkxOy/yD2Qv4E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=MfXuhBWt4qLM4l4odTuQE+469U+VwVHLRihbF4aPE44o+vBwCzRUUHvAsm3K5rYJZf
         efvGfVk9MXIG0umLEZChujnr/23yBlkFghu1OSwJhbwsJ9sniRf+GS9iY7a+SiY5XhfM
         IkdzdRT9btvtvdFKXnEjzbEuKflEnjqyVdlT0=
Received: by 10.216.137.101 with SMTP id x79mr8995196wei.48.1279208403368; 
	Thu, 15 Jul 2010 08:40:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.177.205 with HTTP; Thu, 15 Jul 2010 08:39:42 -0700 (PDT)
In-Reply-To: <AANLkTilcrNCVereN3Ur0zuvbZkC267tH2hf7srYoOG__@mail.gmail.com>
References: <AANLkTilBoPY0BiXZjuvBAtWXfBkDHFn8LRoG9zLeaLAK@mail.gmail.com> 
	<AANLkTil_QPJZC2ehzR6JTlWHeIUxw0rIU9-o3YUbew-A@mail.gmail.com> 
	<AANLkTilEG7xmAVlhtNyiZlmMEwe9tnRySofly2Qpygy7@mail.gmail.com> 
	<AANLkTilcrNCVereN3Ur0zuvbZkC267tH2hf7srYoOG__@mail.gmail.com>
From: Max Lynch <ihasmax@gmail.com>
Date: Thu, 15 Jul 2010 10:39:42 -0500
Message-ID: <AANLkTillfso-KXg8v7GtjzKWuEsgxjQBEY3NP6O5Wpwn@mail.gmail.com>
Subject: Re: Continuously iterate over documents in index
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6d7e01279fb49048b6eeab8
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6d7e01279fb49048b6eeab8
Content-Type: text/plain; charset=ISO-8859-1

Erick,
This is what I ended up doing.  I initially avoided it because I was storing
dates using Solr's date type which AFAIK aren't usable in Lucene, but I
ended up using DateTools to store a lucene readable version that seems to
work well.

Thanks!

On Wed, Jul 14, 2010 at 7:59 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Hmmmm, if you somehow know the last date you processed, why wouldn't using
> a
> range query work for you? I.e.
> date:[<recorded last date> TO <new date to record (NOW?)>]?
>
> Best
> Erick
>
> On Wed, Jul 14, 2010 at 10:37 AM, Max Lynch <ihasmax@gmail.com> wrote:
>
> > You could have a field within each doc say "Processed" and store a
> >
> > > value Yes/No, next run a searcher query which should give you the
> > > collection of unprocessed ones.
> > >
> >
> > That sounds like a reasonable idea, and I just realized that I could have
> > done that in a way specific to my application.  However, I already tried
> > doing something with a MatchAllDocsQuery with a custom collector and sort
> > by
> > date.  I store the last date and time of a doc I processed and process
> only
> > newer ones.
> >
>

--0016e6d7e01279fb49048b6eeab8--

From java-user-return-46727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 17:09:38 2010
Return-Path: <java-user-return-46727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46301 invoked from network); 15 Jul 2010 17:09:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 17:09:38 -0000
Received: (qmail 36170 invoked by uid 500); 15 Jul 2010 17:09:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36124 invoked by uid 500); 15 Jul 2010 17:09:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36116 invoked by uid 99); 15 Jul 2010 17:09:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 17:09:35 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=SPF_HELO_PASS,SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 17:09:28 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <fgeary@acquiremedia.com>)
	id 1OZRvo-00073B-6r
	for java-user@lucene.apache.org; Thu, 15 Jul 2010 10:09:08 -0700
Date: Thu, 15 Jul 2010 10:09:08 -0700 (PDT)
From: Frank Geary <fgeary@acquiremedia.com>
To: java-user@lucene.apache.org
Message-ID: <1279213748200-970106.post@n3.nabble.com>
In-Reply-To: <1279213748201-564107.post@n3.nabble.com>
References: <1279213748202-564099.post@n3.nabble.com> <9ac0c6aa1001120101o77c9e0b9i74ad0e76b59063ad@mail.gmail.com> <1279213748202-564101.post@n3.nabble.com> <9ac0c6aa1001121105s5e1b6c55h320e31cf734f1850@mail.gmail.com> <1279213748203-564103.post@n3.nabble.com> <9ac0c6aa1001220014h4fdeac43uca16c056b23364e1@mail.gmail.com> <1279213748204-564105.post@n3.nabble.com> <9ac0c6aa1001221308h58795ebas2c8190f634aec9e8@mail.gmail.com> <1279213748201-564107.post@n3.nabble.com>
Subject: Re: Index corruption using Lucene 2.4.1 - thread safety issue?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Just to conclude this issue, it seems that my theory below was correct.  I
implemented code at the time of my previous posting to "delete the last
IndexReader used whenever we re-create a new RAMDir IW" and we have not seen
the ArrayOutOfBounds Exception since.  Thus, the lesson here is never to
reopen an IndexReader from one RAMDir index to use for a different RAMDir
index.  It sometimes works, but will fail some of the time.

Frank Geary  


Frank Geary wrote:
> 
> For the record - I haven't proven this yet - but here's my current theory
> of what is causing the problem:
> 
> 1) We start with a new RAMDir IW[0] and do some deletes and adds.
> 2) We create at least one IndexReader based on that IW. The last of which
> we'll call IndexReader[A].
> 3) Then we switch to using the other RAMDir IW[1].
> 4) While using IW[1], we clear out IW[0] and create a new IW[0].  However,
> the last IndexReader, IndexReader[A], is left around.
> 5) Eventually, we switch to using the other newly re-created RAMDir IW[0]
> again.
> 6) The first search that comes in against RAMDir IW[0] trys to reopen
> IndexReader[A].  But IndexReader[A] has nothing to do with the newly
> re-created RAMDir index[0].  
> 
> So my theory is that this confuses the IndexReader.reopen() code.  
> Therefore, we can perhaps fix the problem by deleting the last IndexReader
> used whenever we re-create any RAMDir IW.  Furthermore, this problem may
> be so infrequent because:
> a) It can only happen the first time after two RAMDir swaps.
> b) It may depend on what state IndexReader[A] was in when it was created.
> c) It may also depend on what state the new RAMDir IW is in when that
> first reopen() call is made using the old IndexReader[A].  
> d) If the first reopen for a new IW succeeds, we're fine until the next
> swap.
> e) If it fails, it could fail repeatedly or only once.
> 
> I'll let you know when I determine if this theory is correct or not.
> 
> Frank
> 

-- 
View this message in context: http://lucene.472066.n3.nabble.com/Index-corruption-using-Lucene-2-4-1-thread-safety-issue-tp564099p970106.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 15 18:53:48 2010
Return-Path: <java-user-return-46728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94003 invoked from network); 15 Jul 2010 18:53:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 15 Jul 2010 18:53:48 -0000
Received: (qmail 74970 invoked by uid 500); 15 Jul 2010 18:53:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74819 invoked by uid 500); 15 Jul 2010 18:53:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74811 invoked by uid 99); 15 Jul 2010 18:53:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 18:53:45 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.114] (HELO postal.sdsc.edu) (132.249.20.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Jul 2010 18:53:36 +0000
Received: from mta.ad.sdsc.edu (mta.ad.sdsc.edu [132.249.69.68])
	by postal.sdsc.edu (8.11.7/8.11.7/server/80) with ESMTP id o6FIrBc09799;
	Thu, 15 Jul 2010 11:53:11 -0700 (PDT)
Received: from MBX.ad.sdsc.edu ([fe80::85f9:e068:7dc0:4fe0]) by
 mta.ad.sdsc.edu ([132.249.69.68]) with mapi; Thu, 15 Jul 2010 11:53:06 -0700
From: Christopher Condit <condit@sdsc.edu>
To: "te@statsbiblioteket.dk" <te@statsbiblioteket.dk>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 15 Jul 2010 11:53:02 -0700
Subject: RE: Best practices for searcher memory usage?
Thread-Topic: Best practices for searcher memory usage?
Thread-Index: Acsj9vigY1s9pmF7QiKNawOzdRSYLgAQS5Rw
Message-ID: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380F5@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
	 <1279095228.2505.28.camel@te-prime>
	 <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380DC@MBX.ad.sdsc.edu>
 <1279182185.31898.89.camel@te-prime>
In-Reply-To: <1279182185.31898.89.camel@te-prime>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

PiBbVG9rZTogTm8gZnJlcXVlbnQgdXBkYXRlc10NCj4gDQo+IFNvIGV2ZXJ5dGhpbmcgaXMgcmVi
dWlsZCBmcm9tIHNjcmF0Y2ggZWFjaCB0aW1lPyBPciBkbyB5b3UgbWVhbiB0aGF0IHlvdSdyZQ0K
PiBvbmx5IGFkZGluZyBuZXcgZG9jdW1lbnRzLCBub3QgY2hhbmdpbmcgb2xkIG9uZXM/DQoNCkV2
ZXJ5dGhpbmcgaXMgcmVpbmRleGVkIGZyb20gc2NyYXRjaCAtIGluZGV4aW5nIHNwZWVkIGlzIG5v
dCBlc3NlbnRpYWwgdG8gdXMuLi4NCg0KPiBFaXRoZXIgd2F5LCBvcHRpbWl6aW5nIHRvIGEgc2lu
Z2xlIDE0MEdCIHNlZ21lbnQgaXMgaGVhdnkuIElnbm9yaW5nIHRoZQ0KPiByZWxhdGl2ZWx5IGxp
Z2h0IHByb2Nlc3Npbmcgb2YgdGhlIGRhdGEsIHRoZSBJL08gZm9yIG1lcmdpbmcgaXMgc3RpbGwg
YXQgdGhlIHZlcnkNCj4gbWluaW11bSB0byByZWFkIGFuZCB3cml0ZSB0aGUgMTQwR0IuIEV2ZW4g
aWYgeW91IGNhbiByZWFkIGFuZCB3cml0ZQ0KPiAxMDBNQi9zZWMgaXQgc3RpbGwgdGFrZXMgYW4g
aG91ci4gVGhpcyBpcyBvZiBjb3Vyc2Ugbm90IHRoYXQgcmVsZXZhbnQgaWYgeW91J3JlDQo+IGZp
bmUgd2l0aCBhIG5pZ2h0bHkgYmF0Y2ggam9iLg0KDQpTb3JyeSAtIEkgd2Fzbid0IGNsZWFyIGhl
cmUuIFRoZSB0b3RhbCBpbmRleCBzaXplIGVuZHMgdXAgYmVpbmcgMTQwR0IgYnV0IHRvIHRyeSB0
byBoZWxwIGltcHJvdmUgcGVyZm9ybWFuY2Ugd2UgYnVpbGQgNTAgc2VwYXJhdGUgaW5kZXhlcyAo
d2hpY2ggZW5kIHVwIGJlaW5nIGEgYml0IHVuZGVyIDNnYiBlYWNoKSBhbmQgdGhlbiBvcGVuIHRo
ZW0gd2l0aCBhIHBhcmFsbGVsIG11bHRpc2VhcmNoZXIuIFRoZSBvbmx5IHJlYXNvbiBJIHRyaWVk
IHRoaXMgbXVsdGlzZWFyY2hlciBhcHByb2FjaCB3YXMgdG8gdG95IGFyb3VuZCB3aXRoIEthdHRh
IHdoaWNoIGVuZGVkIHVwIG5vdCB3b3JraW5nIG91dCBmb3IgdXMuIEkgY2FuIGFsc28gZGVwbG95
IGl0IGFzIGEgUmVtb3RlU2VhcmNoYWJsZSAoYWx0aG91Z2ggSSdtIG5vdCBzdXJlIGlmIHRoaXMg
aXMgZGVwcmVjYXRlZCBvciBub3QpLg0KIA0KPiA+IEJ5IG1vcmUgc2VnbWVudHMgZG8geW91IG1l
YW4gbm90IGNhbGwgb3B0aW1pemUoKSBhdCBpbmRleCB0aW1lPw0KPiANCj4gRWl0aGVyIHRoYXQg
b3IgY2FsbGluZyBpdCB3aXRoIG1heE51bVNlZ21lbnRzIDEwLCB3aGVyZSAxMCBpcyBqdXN0IGEg
d2lsZA0KPiBndWVzcy4gWW91ciBtaWxlYWdlIHdpbGwgdmFyeToNCj4gaHR0cDovL2x1Y2VuZS5h
cGFjaGUub3JnL2phdmEvM18wXzAvYXBpL2FsbC9vcmcvYXBhY2hlL2x1Y2VuZS9pbmRleC9JbmRl
DQo+IHhXcml0ZXIuaHRtbCNvcHRpbWl6ZSUyOGludCUyOQ0KDQpJcyBwcmVmZXJyZWQoaW4gdGVy
bXMgb2YgcGVyZm9ybWFuY2UpIHRvIHRoZSBhYm92ZSBhcHByb2FjaCAoc3BsaXR0aW5nIGludG8g
bXVsdGlwbGUgaW5kZXhlcyk/DQoNCj4gQXMgRXJpY2sgRXJpY2tzb24gcmVjZW50bHkgd3JvdGU6
ICJTaW5jZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgdG8gbWUsIHRoYXQNCj4gbXVzdCBtZWFuIEkg
ZG9uJ3QgdW5kZXJzdGFuZCB0aGUgcHJvYmxlbSB2ZXJ5IHRob3JvdWdobHkiLg0KDQpOb3QgeWV0
ISBJJ3ZlIGFkZGVkIHNvbWUgYmVuY2htYXJraW5nIGNvZGUgdG8ga2VlcCB0cmFjayBvZiBhbGwg
cGVyZm9ybWFuY2UgYXMgSSBhZGQgdGhlc2UgY2hhbmdlcy4gRG8geW91IGhhcHBlbiB0byBrbm93
IGlmIHRoZSBMdWNlbmUgYmVuY2htYXJrIHBhY2thZ2UgaXMgc3RpbGwgaW4gdXNlIC8gYSBnb29k
IHRoaW5nIHRvIHRveSBhcm91bmQgd2l0aD8NCg0KVGhhbmtzIGZvciBhbGwgeW91ciBzdWdnZXN0
aW9ucywNCi1DaHJpcw0KDQo=


From java-user-return-46729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 16 08:35:39 2010
Return-Path: <java-user-return-46729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37221 invoked from network); 16 Jul 2010 08:35:38 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Jul 2010 08:35:38 -0000
Received: (qmail 64887 invoked by uid 500); 16 Jul 2010 08:35:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64478 invoked by uid 500); 16 Jul 2010 08:35:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64470 invoked by uid 99); 16 Jul 2010 08:35:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 08:35:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 08:35:21 +0000
Received: from [172.18.226.237] (172.18.226.237) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.1.436.0; Fri, 16 Jul 2010 10:35:01 +0200
Subject: RE: Best practices for searcher memory usage?
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
CC: Christopher Condit <condit@sdsc.edu>
In-Reply-To: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380F5@MBX.ad.sdsc.edu>
References: <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380D3@MBX.ad.sdsc.edu>
	 <1279095228.2505.28.camel@te-prime>
	 <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380DC@MBX.ad.sdsc.edu>
	 <1279182185.31898.89.camel@te-prime>
	 <BAFDED91EF7D5A43A30F897D6C94B1287CFB1380F5@MBX.ad.sdsc.edu>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Fri, 16 Jul 2010 10:35:23 +0200
Message-ID: <1279269323.27472.207.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, 2010-07-15 at 20:53 +0200, Christopher Condit wrote:

[Toke: 140GB single segment is huge]

> Sorry - I wasn't clear here. The total index size ends up being 140GB
> but to try to help improve performance we build 50 separate indexes 
> (which end up being a bit under 3gb each) and then open them with a 
> parallel multisearcher.

Ah! That is an whole other matter then. Now I understand why you go for
single segment indexes.

[Toke (assuming a single index): Why not optimize to 10 segments?]

> Is preferred(in terms of performance) to the above approach (splitting
> into multiple indexes)?

It's been 2 or 3 years since I experimented with the MultiSearcher, so
this is mostly guesswork from my part. Searching on a single index with
multiple segments and multiple indexes of single segments has the same
penalties: The weighting of the query requires a merge of query term
statistics from the parts. In principle it should be the same but as
always the devil is in the details.


50 parts do sound like a lot though. Even without range searches or
similar query-exploding searches, there is an awful lot of seeks to be
done. The logarithmic nature of term lookups work against you here.

A rough estimate: A simple boolean query with 5 field/terms is weighted
by each searcher. Each index has 50K terms (conservative guess) so for
each condition, the searchers performs ~log2(50K) = 16 lookups. With 50
indexes that's 50 * 5 * 16 = 4000 lookups.

The 4K lookups does of course not all result in a remote NFS request but
with 10-12GB of RAM on the search machine taken already, I would guess
that there is not much left for caching of the 140GB of index data?

Is it possible for you to measure the number of read requests that your
NFS server receives for a standard search? Another thing to try would be
to measure the same slow query 5 times after each other, thereby
ensuring that everything is fully cached. This should indicate if the
remote I/O is the main bottleneck or not.

The other extreme, a single fully optimized index, would (pathological
worst case compared to the rough estimate above) require 1 * 5 *
log2(50*50K) ~= 110 lookups for the terms.

I would have guessed that the 50 indexes is partly responsible for your
speed problems, but it sounds like you started out with a lower number
and later increased it?

> Not yet! I've added some benchmarking code to keep track of all 
> performance as I add these changes. Do you happen to know if the 
> Lucene benchmark package is still in use / a good thing to toy around with?

Sorry, no. The only performance testing we've done extensively is for
searches and for that we used our standard setup with logged queries in
order to emulate the production setting.

Regards,
Toke Eskildsen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 16 08:41:08 2010
Return-Path: <java-user-return-46730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37944 invoked from network); 16 Jul 2010 08:41:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Jul 2010 08:41:08 -0000
Received: (qmail 72979 invoked by uid 500); 16 Jul 2010 08:41:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72722 invoked by uid 500); 16 Jul 2010 08:41:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72714 invoked by uid 99); 16 Jul 2010 08:41:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 08:41:02 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 08:40:54 +0000
Received: by bwz2 with SMTP id 2so1688878bwz.35
        for <java-user@lucene.apache.org>; Fri, 16 Jul 2010 01:40:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=bYfWxozGs4460xPBXEmmXPvRJ0C1G38KU1iuQ2+j2N0=;
        b=xUf6yFG9X56DaldoklWHNFzpiLH1gmk2ONTXlfcg9VncyMlVN19JO5AneLUscMqMcL
         hi4p1wGbjvJMFYpBGujbRPBx6eKApGKi+29HZTSRhSl4KytoYZ1gXVxmPzUuk0z8xcVo
         gv51C8DD5Uly4Sxb9Vf6Owj3VozFPehr2b4zk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=WvyrOPIcjlSRnRketfiiTXPwSSm0EjlwRAOkopAxZWNcx2xfuSdasa68/R//IAjl1R
         kepnOKi/z69A3P9h41DCyroBB2hiV8PWoevvbA6vkTEoLwc6/zfR8ANFuTmMr6Fsnwmm
         2tjlmpwKQKpb/tUHiJWmmPvV/mhVP7m4iISkk=
Received: by 10.204.136.71 with SMTP id q7mr669908bkt.111.1279269634177; Fri, 
	16 Jul 2010 01:40:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.57.69 with HTTP; Fri, 16 Jul 2010 01:40:14 -0700 (PDT)
In-Reply-To: <4C3F244D.2060804@gmail.com>
References: <4C3F244D.2060804@gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 16 Jul 2010 09:40:14 +0100
Message-ID: <AANLkTikjRhBLaNcGiUym4J2yMZY7D2JznKd_k5LMBkEw@mail.gmail.com>
Subject: Re: XML results ranking
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi


If you google "Lucene xml" you'll find info, but I'll attempt to
answer your questions below

> ...
> I wonder whether Lucene:
>
> (1) provides full-text search over content of XML elements ?

Yes.  If you index the content, lucene will let you search over it.

> (2) provides substring search over values of attributes of XML elements ?

Yes, there is wildcard support.  Or use something like n-grams.

> (3) scores relevance of matching XML documents ?

Yes.

> (4) allows to identify (in matching document) XML elements with matched
> query terms and than navigate to parental/children nodes in XML ?structure ?

Not really.

> (5) provides a way to give more weight to some XML element types during
> relevance scoring ?

Yes.  See boosting.


Lucene is a library that doesn't index XML directly, but you can write
code to parse your XML and feed it into lucene, specifying which
fields you want indexed and which stored for later retrieval.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 16 08:50:16 2010
Return-Path: <java-user-return-46731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40677 invoked from network); 16 Jul 2010 08:50:15 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Jul 2010 08:50:15 -0000
Received: (qmail 84981 invoked by uid 500); 16 Jul 2010 08:50:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84545 invoked by uid 500); 16 Jul 2010 08:50:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84537 invoked by uid 99); 16 Jul 2010 08:50:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 08:50:09 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.49] (HELO web50208.mail.re2.yahoo.com) (206.190.38.49)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 16 Jul 2010 08:49:59 +0000
Received: (qmail 42011 invoked by uid 60001); 16 Jul 2010 08:48:38 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1279270118; bh=3/xfAehcLBnjZnFtUO60ap/SwTpy5osoHx4ncEOwb8Y=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=nDbFnHW7ju+BLBrHMg7hWAHV+rBT4PhmPVIfDZO592tMWN4h/pxgwiZw69sFlPVxggsVg0hocCn0/mQxzKmkw1uk3mcCn/7I3ORcXOBggITXIk/MVbNTQOQDl382BsYyKXJuQ8lIwriNI4hFzFlaT6fMRFeZHIWhtF8qgQzKVC0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=sDeAwJGjnSXyX0EPJs2j3xIvePHTU+5b7seJQNTmP5klQqkjJNl5v0xQFyGXkyZyd/6ZkAeQIHq4jUFI3fSakCQaEm/AR11KJrHov2yjp6qM5YELcq2oFX7FD88mE65NDsGdFMq92+mEHfv8LWbh+oITsMIfSVHSUFO7BTrWiO4=;
Message-ID: <49648.41982.qm@web50208.mail.re2.yahoo.com>
X-YMail-OSG: X7NVdYEVM1lRdj8QVY73lAD5IDZb5rDL4czrumbhJCLF609
 I1vX9A0RFHLMhypwAeLFihZgIt3wS1BSwy0Mh_LyL2FbEfMFNEPcwci1baw7
 mNvW2uU1BX3eIo4qcuGBzn8hBdBvRgvI_.I.eMhG6cmf0uUS5WohRhrlNEM1
 7C1dEhny56UXahxEUzpRhtpmjBtHNXJ.ckRUY5_fKv1uYqrpPmjiur47bqh_
 nu2JRFzGCgdd49pbf9OBEUczaTek5XI.5IAjkSvXhj5r559NvOQYx9jyT_6S
 QtSLY.rXbZ2vl7a_X2vtDvVctpVPW2dvTkv99ns9atJs-
Received: from [213.55.85.90] by web50208.mail.re2.yahoo.com via HTTP; Fri, 16 Jul 2010 01:48:38 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.104.276605
References: <4C3F244D.2060804@gmail.com> <AANLkTikjRhBLaNcGiUym4J2yMZY7D2JznKd_k5LMBkEw@mail.gmail.com>
Date: Fri, 16 Jul 2010 01:48:38 -0700 (PDT)
From: henok sahilu <henok_sahilu@yahoo.com>
Subject: Re: XML results ranking
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTikjRhBLaNcGiUym4J2yMZY7D2JznKd_k5LMBkEw@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

you just have to write a parser that parse each sections of the XML document. 
and these documents will be indexed as a separate informational units . then the 
lucene ranking algorithm can over these separate sections.
i can give the codes doing this thing
henok 
good day to you 



----- Original Message ----
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Sent: Fri, July 16, 2010 1:40:14 AM
Subject: Re: XML results ranking

Hi


If you google "Lucene xml" you'll find info, but I'll attempt to
answer your questions below

> ...
> I wonder whether Lucene:
>
> (1) provides full-text search over content of XML elements ?

Yes.  If you index the content, lucene will let you search over it.

> (2) provides substring search over values of attributes of XML elements ?

Yes, there is wildcard support.  Or use something like n-grams.

> (3) scores relevance of matching XML documents ?

Yes.

> (4) allows to identify (in matching document) XML elements with matched
> query terms and than navigate to parental/children nodes in XML ?structure ?

Not really.

> (5) provides a way to give more weight to some XML element types during
> relevance scoring ?

Yes.  See boosting.


Lucene is a library that doesn't index XML directly, but you can write
code to parse your XML and feed it into lucene, specifying which
fields you want indexed and which stored for later retrieval.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 16 10:09:07 2010
Return-Path: <java-user-return-46732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91822 invoked from network); 16 Jul 2010 10:09:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Jul 2010 10:09:07 -0000
Received: (qmail 13268 invoked by uid 500); 16 Jul 2010 10:09:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12831 invoked by uid 500); 16 Jul 2010 10:09:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12823 invoked by uid 99); 16 Jul 2010 10:09:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 10:09:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.82.110.149] (HELO web29010.mail.ird.yahoo.com) (212.82.110.149)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 16 Jul 2010 10:08:51 +0000
Received: (qmail 17903 invoked by uid 60001); 16 Jul 2010 10:08:30 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1279274910; bh=15bR048aqHCYFSfz5xCHR90zjuAWWZBlAL2EEpKPwmI=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=XkA90Wvgr37NTlyhS+Mg43z3teHXwXfDYBtBOnx4zEn514Pjs0SofwhcuQ0TlgRCE0dOl6UnJVUNpFTGrqMYRQnZeT+0ahkd3NQUFgLBxGLEgVNq74e25vwLDo4BdKebVzrs39NVjgISVCKMFFm5risivdcD8Zup09A4cDWQibM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=PDCMti2EBypn5O3P8sB8JoIupz7L1AWUCojD8WTdfiXbIbE8eP/P20FvWrGjuuB4Ttl6irhyb+jSGRKphKTFGd8wnuS0wys1q/sV3UcGuD1rVeQQquv/MbjY3NOxxuWSKWUdocHOP4TgOriiTcUJosjO9Jk7Rfr4kQHTIiylpLk=;
Message-ID: <76854.16818.qm@web29010.mail.ird.yahoo.com>
X-YMail-OSG: 8xxWZD4VM1nRzRpOb9i.DGvrKBIQoR9XpmUwCeSLCbcp7Tb
 kJsJ8gGkzCxP_n8x1ofcKETkhFMvzqANRUP1HzsgdqPQFTzdA8rZ0HBodObn
 pjkl4Kw5G0IgUrNyip_19FDhTZjPJdC6O36p9NebXk7vLJ__ZMvPbPRFzZ18
 JbjS3sui0SCu73RITsbJsBg7GKda0QQcwIG_SBMXT_v7Cfl6de8.3M3rPbCg
 3WiuDxyLE9D35TNqOqJ1h8paNhdJdS.NOfoOjGwLS4ekXiCHLctz4o2TGxR1
 LdNN8NFRRp.LkgCU7QXvH_Yr2rVDrzZ..GRNP6O.IApV2BlBT.qfvH5F8lyi
 j2Rootw--
Received: from [193.36.230.96] by web29010.mail.ird.yahoo.com via HTTP; Fri, 16 Jul 2010 10:08:29 GMT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.104.276605
References: <4C3F244D.2060804@gmail.com>
Date: Fri, 16 Jul 2010 10:08:29 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: XML results ranking
To: java-user@lucene.apache.org
In-Reply-To: <4C3F244D.2060804@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene 2454 includes an example of matching logic that  respects the struct=
ure =0Ain XML documents (see (https://issues.apache.org/jira/browse/LUCENE-=
2454 )=0AThe example class TestNestedDocumentQuery queries xhtml marked up =
with hResume =0Asyntax.=0A=0AWe don't have XQuery syntax support in a parse=
r now (and may never) but you may =0Afind the "NestedDocumentQuery" class u=
seful in moving Lucene away from "flat" =0Adocuments to representing richer=
 structures like XML.=0A=0A=0A=0A=0A----- Original Message ----=0AFrom: Mac=
iej <mgawinecki@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Thu, 1=
5 July, 2010 16:07:57=0ASubject: XML results ranking=0A=0AHello,=0A=0AI'm a=
 newbie to Lucene and before starting playing with it I would like to know =
=0Awhether it fits to my application.=0A=0AI have a collection of XML docum=
ented demarcated with respect to a stable XML =0Aschema (WSDL definitions).=
=0A=0AI wonder whether Lucene:=0A=0A(1) provides full-text search over cont=
ent of XML elements ?=0A=0A(2) provides substring search over values of att=
ributes of XML elements ?=0A=0A(3) scores relevance of matching XML documen=
ts ?=0A=0A(4) allows to identify (in matching document) XML elements with m=
atched query =0Aterms and than navigate to parental/children nodes in XML ?=
structure ?=0A=0A(5) provides a way to give more weight to some XML element=
 types during =0Arelevance scoring ?=0A=0A=0ABest regards,=0AMaciej Gawinec=
ki=0A=0A=0A----------------------------------------------------------------=
-----=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AF=
or additional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A  =
    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 16 15:30:20 2010
Return-Path: <java-user-return-46733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89781 invoked from network); 16 Jul 2010 15:30:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Jul 2010 15:30:20 -0000
Received: (qmail 37984 invoked by uid 500); 16 Jul 2010 15:30:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37899 invoked by uid 500); 16 Jul 2010 15:30:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37889 invoked by uid 99); 16 Jul 2010 15:30:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 15:30:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 16 Jul 2010 15:30:09 +0000
Received: (qmail 2113 invoked from network); 16 Jul 2010 15:28:47 -0000
Received: from unknown (94.159.144.142)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 16 Jul 2010 15:28:14 -0000
Message-ID: <4C407A8A.20303@code972.com>
Date: Fri, 16 Jul 2010 18:28:10 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.10) Gecko/20100512 Lightning/1.0b1 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Scoring exact matches higher in a stemmed field
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,


Consider the following string: "the buffalo buffaloes" [1].


When passed through a stemming analyzer, the resulting token would be 
"buffalo buffalo" (assuming a good stemmer).


To enable exact searches, say I mark the original term and index it at 
the same term position. So "the buffalo buffaloes" -> (buffalo buffalo$) 
(buffalo buffaloes$) - now exact searches are allowed on the same field 
without having 2 different fields [2].


However, with this approach default scoring isn't working well. What is 
my best option at upgrading a match for an exact match of this sort, 
also when using the same stemming analyzer, without using payloads on 
the marked token?


In other words - how do I make documents containing "the buffalo 
buffaloes" considered more relevant than docs containing the word 
"buffalo" only once?


The trick here is to boost the marked token if found at search time. 
While this sounds easy to do, I can't find the best approach on 
implementing this - esp. since Similarity.float Idf(Index.Term term, 
Searcher searcher) seem to have been deprecated for some reason.


Itamar.


[1] 
http://en.wikipedia.org/wiki/Buffalo_buffalo_Buffalo_buffalo_buffalo_buffalo_Buffalo_buffalo 
:)

[2] Rationale: 
http://www.code972.com/blog/2010/07/more-flexible-hebrew-indexing-hebmorph/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 16 15:36:26 2010
Return-Path: <java-user-return-46734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91155 invoked from network); 16 Jul 2010 15:36:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Jul 2010 15:36:26 -0000
Received: (qmail 45434 invoked by uid 500); 16 Jul 2010 15:36:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45284 invoked by uid 500); 16 Jul 2010 15:36:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45269 invoked by uid 99); 16 Jul 2010 15:36:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 15:36:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chardex@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 15:36:09 +0000
Received: by wyb29 with SMTP id 29so2580351wyb.35
        for <multiple recipients>; Fri, 16 Jul 2010 08:34:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=gGF45JmNEAoJznu+W7RJBuFpQY/ccG7piBk9TnFwb70=;
        b=xhypsZH9SPGWlvPMLILgyGzBhjI4hedHCSkaO5QtQlYtYcB+j4Vviknt6qrT1qq0Qj
         xApzHqOo3V/LeyWdu3xCYs3IIGOBW5OBSDU4ZFvfy0vqpE8eAFrz9Kjs+REIaNtc3Jdn
         UkZhwt+J9fEqL6p6e8s6ek/TiwCmmv1kwWrbM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=P1jiMH5svhbh8ib6MkBAXmcjWHEtCd6ao1VkTp1fODDtTawrucuMWxzSAXxzPORHXd
         GpdEck3kjd2rfJyU5EovzsUOMJ0ZbO7M+AAKNpMsc2g9FdeOGrba8Nc+o7ndVFQmX+LC
         hzl0frQc1YycLBrHYrMZDV5jVBB65GTAixiqQ=
MIME-Version: 1.0
Received: by 10.227.141.141 with SMTP id m13mr820208wbu.152.1279294489135; 
	Fri, 16 Jul 2010 08:34:49 -0700 (PDT)
Received: by 10.216.133.136 with HTTP; Fri, 16 Jul 2010 08:34:49 -0700 (PDT)
Date: Fri, 16 Jul 2010 19:34:49 +0400
Message-ID: <AANLkTimTsYIU9jBQuqHtzFWHELS_PUCM5R953V5npKdI@mail.gmail.com>
Subject: Building maven artifacts
From: Pavel Minchenkov <chardex@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636831776968ae4048b82f57c
X-Virus-Checked: Checked by ClamAV on apache.org

--001636831776968ae4048b82f57c
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I'm trying to run ant task "generate-maven-artifacts" in lucene-solr
build.xml file.
But getting this error:
/home/chardex/lucene/dev/lucene/common-build.xml:312: Error deploying
artifact 'org.apache.lucene:lucene-core:jar': Error deploying artifact: File
/home/chardex/lucene/dev/lucene/build/${project.artifactId}-${project.version}.jar
does not exist

Source code is latest.
What I'm doing wrong?

"generate-maven-artifacts" works fine for solr build.xml file.

Thanks.

-- 
Pavel Minchenkov

--001636831776968ae4048b82f57c--

From java-user-return-46735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 16 15:43:20 2010
Return-Path: <java-user-return-46735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95027 invoked from network); 16 Jul 2010 15:43:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Jul 2010 15:43:19 -0000
Received: (qmail 64747 invoked by uid 500); 16 Jul 2010 15:43:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64588 invoked by uid 500); 16 Jul 2010 15:43:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64578 invoked by uid 99); 16 Jul 2010 15:43:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 15:43:16 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Lisheng.Zhang@broadvision.com designates 139.56.8.26 as permitted sender)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 15:43:08 +0000
X-ASG-Debug-ID: 1279294951-696201650000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP
	id 1A32C159A4C; Fri, 16 Jul 2010 08:42:31 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id sNJOt9m36t67THaL; Fri, 16 Jul 2010 08:42:31 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: Building maven artifacts
Subject: RE: Building maven artifacts
Date: Fri, 16 Jul 2010 08:42:31 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1557@rw-ex2003.BROADVISION.COM>
In-Reply-To: <AANLkTimTsYIU9jBQuqHtzFWHELS_PUCM5R953V5npKdI@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Building maven artifacts
Thread-Index: Acsk/KgmfV0iXjIiR9CFDbe3nQtIsQAAHwSg
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>,
	<solr-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1279294952
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I never this kind of build before, but just from the error message
I guess it could mean two variables:

${project.artifactId}
${project.version}

are not defined (otherwise exact jar file name would be printed out)?

Could it be some environment setup issue?

Best regards, Lisheng

-----Original Message-----
From: Pavel Minchenkov [mailto:chardex@gmail.com]
Sent: Friday, July 16, 2010 8:35 AM
To: java-user@lucene.apache.org; solr-user@lucene.apache.org
Subject: Building maven artifacts


Hi,
I'm trying to run ant task "generate-maven-artifacts" in lucene-solr
build.xml file.
But getting this error:
/home/chardex/lucene/dev/lucene/common-build.xml:312: Error deploying
artifact 'org.apache.lucene:lucene-core:jar': Error deploying artifact: =
File
/home/chardex/lucene/dev/lucene/build/${project.artifactId}-${project.ver=
sion}.jar
does not exist

Source code is latest.
What I'm doing wrong?

"generate-maven-artifacts" works fine for solr build.xml file.

Thanks.

--=20
Pavel Minchenkov

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 16 17:02:27 2010
Return-Path: <java-user-return-46736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20685 invoked from network); 16 Jul 2010 17:02:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 16 Jul 2010 17:02:26 -0000
Received: (qmail 87739 invoked by uid 500); 16 Jul 2010 17:02:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87700 invoked by uid 500); 16 Jul 2010 17:02:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87692 invoked by uid 99); 16 Jul 2010 17:02:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 17:02:23 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Jul 2010 17:02:17 +0000
Received: by eyg5 with SMTP id 5so880499eyg.35
        for <java-user@lucene.apache.org>; Fri, 16 Jul 2010 10:01:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=CmaLi7fe7Afxh/ds39ITBK7OXNGqdNzpRB3UiOH2K7w=;
        b=d+AzdHON7EfLi1FkdER72j/J3rGTjQAUHa/UJdANCd+UzdmaLET2gAzzXIusV9hbld
         HUTsOMNVXshyekmygx+jrwUUjPHyd/e49r/JkVpw0UlwbJM2wPjAL5H1tEKpf0M+qZ0d
         j58J5wxEIzvTc62Wn1+N8VvDfemUGOVqbYImM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=UeDbRt9EtWXJsFY4HKIpYeLL9YqRr4Ht2W+2/E0y3CQUiPWpMad8eDr0CvaFxR1rpW
         AUC+EEZ0LPH5YHU2jMFHOXAqvqQ7JmCLJoAx668ruJlu+opGpC1jFKs0CdwKUffhFYjI
         yNcwSun0jBVik5Ge9QbINOFYeYjqr7semz02o=
MIME-Version: 1.0
Received: by 10.213.31.146 with SMTP id y18mr1336873ebc.59.1279299667755; Fri, 
	16 Jul 2010 10:01:07 -0700 (PDT)
Received: by 10.213.19.140 with HTTP; Fri, 16 Jul 2010 10:01:07 -0700 (PDT)
In-Reply-To: <4C407A8A.20303@code972.com>
References: <4C407A8A.20303@code972.com>
Date: Fri, 16 Jul 2010 20:01:07 +0300
Message-ID: <AANLkTimsh0ydv0jHsI84aicaK5oW8a6Ms_QFp9fuD6WT@mail.gmail.com>
Subject: Re: Scoring exact matches higher in a stemmed field
From: Shai Erera <serera@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Depends for which query no? ;)

Sounds like you want to simulate the QP behavior
http://lucene.apache.org/java/2_4_0/queryparsersyntax.html for
boosting. Meaning, if for the query "b" you want to simulate the query
"b OR b$^2" and have matches of b$ count more than b, then I'd follow
how QP does it - create the query programmatically or something (I'm
not near the code at the moment so I cannot give a more concrete
approach).

If you want b and b$ to count the same, then that's already the
behavior - i.e., docs containing both will score higher.

If I misunderstood your question, then plea correct me.

Shai

On Friday, July 16, 2010, Itamar Syn-Hershko <itamar@code972.com> wrote:
> Hi all,
>
>
> Consider the following string: "the buffalo buffaloes" [1].
>
>
> When passed through a stemming analyzer, the resulting token would be "bu=
ffalo buffalo" (assuming a good stemmer).
>
>
> To enable exact searches, say I mark the original term and index it at th=
e same term position. So "the buffalo buffaloes" -> (buffalo buffalo$) (buf=
falo buffaloes$) - now exact searches are allowed on the same field without=
 having 2 different fields [2].
>
>
> However, with this approach default scoring isn't working well. What is m=
y best option at upgrading a match for an exact match of this sort, also wh=
en using the same stemming analyzer, without using payloads on the marked t=
oken?
>
>
> In other words - how do I make documents containing "the buffalo buffaloe=
s" considered more relevant than docs containing the word "buffalo" only on=
ce?
>
>
> The trick here is to boost the marked token if found at search time. Whil=
e this sounds easy to do, I can't find the best approach on implementing th=
is - esp. since Similarity.float Idf(Index.Term term, Searcher searcher) se=
em to have been deprecated for some reason.
>
>
> Itamar.
>
>
> [1] http://en.wikipedia.org/wiki/Buffalo_buffalo_Buffalo_buffalo_buffalo_=
buffalo_Buffalo_buffalo :)
>
> [2] Rationale: http://www.code972.com/blog/2010/07/more-flexible-hebrew-i=
ndexing-hebmorph/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 17 18:05:36 2010
Return-Path: <java-user-return-46737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34948 invoked from network); 17 Jul 2010 18:05:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Jul 2010 18:05:35 -0000
Received: (qmail 51331 invoked by uid 500); 17 Jul 2010 18:05:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51239 invoked by uid 500); 17 Jul 2010 18:05:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51231 invoked by uid 99); 17 Jul 2010 18:05:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jul 2010 18:05:32 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.2] (HELO n1plout04-02.prod.ams1.secureserver.net) (188.121.53.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 17 Jul 2010 18:05:25 +0000
Received: (qmail 4982 invoked from network); 17 Jul 2010 18:05:03 -0000
Received: from unknown (109.160.197.232)
  by n1plout04-02.prod.ams1.secureserver.net (188.121.53.2) with ESMTP; 17 Jul 2010 18:04:08 -0000
Message-ID: <4C41F095.1080706@code972.com>
Date: Sat, 17 Jul 2010 21:04:05 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.10) Gecko/20100512 Lightning/1.0b1 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Scoring exact matches higher in a stemmed field
References: <4C407A8A.20303@code972.com> <AANLkTimsh0ydv0jHsI84aicaK5oW8a6Ms_QFp9fuD6WT@mail.gmail.com>
In-Reply-To: <AANLkTimsh0ydv0jHsI84aicaK5oW8a6Ms_QFp9fuD6WT@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Shai, you got it right. I want to be able to send "b bb" through the QP 
with my custom analyzer, and get back "(b b$) (b bb$)" -- 2 terms with 2 
tokens in the same position for each.

I want this to be a native product of the engine, as opposed to forcing 
this from the query end. I'm using different types of queries (Bool, 
DisMax), and I'm actually interested in using the QP itself. Instead of 
going through all sub-queries post-parsing and boosting terms ending 
with $, I want some sort of a plugin mechanism to do this for me per 
result. The easiest path would be subcalssing Similarity, if only the 
relevant functions wouldn't have been deprecated...

Are there any other ways to do so? For example, is this doable with 
function queries (since access to the actual term is required)?

Itamar.

On 16/7/2010 8:01 PM, Shai Erera wrote:
> Depends for which query no? ;)
>
> Sounds like you want to simulate the QP behavior
> http://lucene.apache.org/java/2_4_0/queryparsersyntax.html for
> boosting. Meaning, if for the query "b" you want to simulate the query
> "b OR b$^2" and have matches of b$ count more than b, then I'd follow
> how QP does it - create the query programmatically or something (I'm
> not near the code at the moment so I cannot give a more concrete
> approach).
>
> If you want b and b$ to count the same, then that's already the
> behavior - i.e., docs containing both will score higher.
>
> If I misunderstood your question, then plea correct me.
>
> Shai
>
> On Friday, July 16, 2010, Itamar Syn-Hershko<itamar@code972.com>  wrote:
>    
>> Hi all,
>>
>>
>> Consider the following string: "the buffalo buffaloes" [1].
>>
>>
>> When passed through a stemming analyzer, the resulting token would be "buffalo buffalo" (assuming a good stemmer).
>>
>>
>> To enable exact searches, say I mark the original term and index it at the same term position. So "the buffalo buffaloes" ->  (buffalo buffalo$) (buffalo buffaloes$) - now exact searches are allowed on the same field without having 2 different fields [2].
>>
>>
>> However, with this approach default scoring isn't working well. What is my best option at upgrading a match for an exact match of this sort, also when using the same stemming analyzer, without using payloads on the marked token?
>>
>>
>> In other words - how do I make documents containing "the buffalo buffaloes" considered more relevant than docs containing the word "buffalo" only once?
>>
>>
>> The trick here is to boost the marked token if found at search time. While this sounds easy to do, I can't find the best approach on implementing this - esp. since Similarity.float Idf(Index.Term term, Searcher searcher) seem to have been deprecated for some reason.
>>
>>
>> Itamar.
>>
>>
>> [1] http://en.wikipedia.org/wiki/Buffalo_buffalo_Buffalo_buffalo_buffalo_buffalo_Buffalo_buffalo :)
>>
>> [2] Rationale: http://www.code972.com/blog/2010/07/more-flexible-hebrew-indexing-hebmorph/
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 17 20:30:27 2010
Return-Path: <java-user-return-46738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61176 invoked from network); 17 Jul 2010 20:30:27 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Jul 2010 20:30:27 -0000
Received: (qmail 393 invoked by uid 500); 17 Jul 2010 20:30:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 229 invoked by uid 500); 17 Jul 2010 20:30:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 221 invoked by uid 99); 17 Jul 2010 20:30:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jul 2010 20:30:24 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [134.226.32.56] (HELO scss.tcd.ie) (134.226.32.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jul 2010 20:30:15 +0000
Received: from localhost (localhost [127.0.0.1])
	by hermes.scss.tcd.ie (Postfix) with ESMTP id 93FDA3E4089
	for <java-user@lucene.apache.org>; Sat, 17 Jul 2010 21:29:25 +0100 (IST)
X-Virus-Scanned: Debian amavisd-new at scss.tcd.ie
Received: from scss.tcd.ie ([127.0.0.1])
	by localhost (scss.tcd.ie [127.0.0.1]) (amavisd-new, port 10027)
	with ESMTP id SCopRADNYC9G for <java-user@lucene.apache.org>;
	Sat, 17 Jul 2010 21:29:25 +0100 (IST)
Received: from [192.168.1.10] (unknown [109.255.117.30])
	by smtp.scss.tcd.ie (Postfix) with ESMTPSA id 62B713E4082
	for <java-user@lucene.apache.org>; Sat, 17 Jul 2010 21:29:25 +0100 (IST)
Message-ID: <4C4212A3.6070508@webscio.net>
Date: Sat, 17 Jul 2010 21:29:23 +0100
From: Martin <martin@webscio.net>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: A full-text tokenizer for the NGramTokenFilter
References: <1279398251.98994.ezmlm@lucene.apache.org>
In-Reply-To: <1279398251.98994.ezmlm@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there,

I have been recently trying to build a lucene index out of ngrams and 
seem to have stumbled on to a number of issues. I first tried to use the 
NGramTokenizer, but that thing apparently only takes the first 1024 
characters to tokenize. Having searched around the web, I came upon this 
issue being discussed a couple of years ago and the proposed solution 
there has been using the NGramTokenFilter. Now that filter certainly 
works, but it needs an underlying tokenizer to work with, and I'm just 
wondering if there is a tokenizer that would return me the whole text. 
The reason I can't use something like the StandardTokenizer is that 
ngrams should really include spaces and pretty much every tokenizer gets 
rid of them.

Thank you very much in advance for any suggestions.

Regards,
Martin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 17 21:08:35 2010
Return-Path: <java-user-return-46739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68667 invoked from network); 17 Jul 2010 21:08:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Jul 2010 21:08:35 -0000
Received: (qmail 9150 invoked by uid 500); 17 Jul 2010 21:08:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9102 invoked by uid 500); 17 Jul 2010 21:08:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9094 invoked by uid 99); 17 Jul 2010 21:08:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jul 2010 21:08:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.49.14] (HELO web52904.mail.re2.yahoo.com) (206.190.49.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 17 Jul 2010 21:08:23 +0000
Received: (qmail 49085 invoked by uid 60001); 17 Jul 2010 21:07:02 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1279400822; bh=iWwG2NjeLMPykrdjIR8ezouZIaqbczW5pAN2ZY3mfL4=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=DVnskyhtEX0HOWUEOicrzK96eSqY5JfZCrvbQBWCQifBeP68AVlRPsLhOVV2Xq3eo9UdV28mt/9YsrOAqWruf5ZEs4kuJ+3caEduDgBlnGvkdeUI1+ai+1/pttk0bqYDA7z0q1Ak0oq9uQLgJBgs3jeKMPnMuHEV5fQ/8XwTGNo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=L5T/ZahfNgl7qSeXTBj8xQSdb15YtXAO2nFi+ghWbimIECZFKIvcRE5k6a22CqV3aAu7F5eqC1y1INdmq2hS2ubAv+0yj0sbuOsSXDa3EqmevIWXn/0Pz0H3rnwu1JSo7npCMqKki5d4HZNRw9zzBB5EMKb6MQHB5VDopC6luoE=;
Message-ID: <169093.48297.qm@web52904.mail.re2.yahoo.com>
X-YMail-OSG: wXIuePsVM1lXkv6eLPVj.kUgEIpdylno__rI33cC7Ti73xL
 zoTwQzGC0ufUeiAWmN3iQqf7wG_xWSoTs..lTY7WnoNpnoyn5xLHxCTzxeEl
 XYQ_i4nQ_XBIdIbF9hstFr42N6vk1tHW0xoWo5Di5bc3Krq4uWmI8i7lymKh
 pacFlOIUAdZSszRSc6VQWP1LE1IMmGBHxsE3JCbU8N00PgyWIg5pSWfRLMSh
 ur2bFQJdsPGfdBsxT8xs3VhmcMXs_nwpr3z7tY31PpycYUaAmlwiE88g09EK
 jktEYS_HqL7S1WJ.MDcnWDEy6
Received: from [78.165.16.91] by web52904.mail.re2.yahoo.com via HTTP; Sat, 17 Jul 2010 14:07:02 PDT
X-Mailer: YahooMailClassic/11.2.4 YahooMailWebService/0.8.104.276605
Date: Sat, 17 Jul 2010 14:07:02 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: A full-text tokenizer for the NGramTokenFilter
To: java-user@lucene.apache.org
In-Reply-To: <4C4212A3.6070508@webscio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

> and I'm just wondering if there is a tokenizer
> that would return me the whole text. 

KeywordTokenizer does this.


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 17 21:53:32 2010
Return-Path: <java-user-return-46740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73024 invoked from network); 17 Jul 2010 21:53:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 17 Jul 2010 21:53:32 -0000
Received: (qmail 28950 invoked by uid 500); 17 Jul 2010 21:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28771 invoked by uid 500); 17 Jul 2010 21:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28763 invoked by uid 99); 17 Jul 2010 21:53:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jul 2010 21:53:29 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [134.226.32.56] (HELO scss.tcd.ie) (134.226.32.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Jul 2010 21:53:20 +0000
Received: from localhost (localhost [127.0.0.1])
	by hermes.scss.tcd.ie (Postfix) with ESMTP id B9D9F20E031
	for <java-user@lucene.apache.org>; Sat, 17 Jul 2010 22:52:59 +0100 (IST)
X-Virus-Scanned: Debian amavisd-new at scss.tcd.ie
Received: from scss.tcd.ie ([127.0.0.1])
	by localhost (scss.tcd.ie [127.0.0.1]) (amavisd-new, port 10027)
	with ESMTP id B-hxSxzoG-+N for <java-user@lucene.apache.org>;
	Sat, 17 Jul 2010 22:52:59 +0100 (IST)
Received: from [192.168.1.10] (unknown [109.255.117.30])
	by smtp.scss.tcd.ie (Postfix) with ESMTPSA id 938A620E030
	for <java-user@lucene.apache.org>; Sat, 17 Jul 2010 22:52:59 +0100 (IST)
Message-ID: <4C42263A.7060502@webscio.net>
Date: Sat, 17 Jul 2010 22:52:58 +0100
From: Martin <martin@webscio.net>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: A full-text tokenizer for the NGramTokenFilter
References: <169093.48297.qm@web52904.mail.re2.yahoo.com>
In-Reply-To: <169093.48297.qm@web52904.mail.re2.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Ahh, I knew I saw it somewhere, then I lost it again... :) I guess the 
name is not quite intuitive, but anyway thanks a lot!
>> and I'm just wondering if there is a tokenizer
>> that would return me the whole text.
>>      
> KeywordTokenizer does this.
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 18 19:00:48 2010
Return-Path: <java-user-return-46741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56374 invoked from network); 18 Jul 2010 19:00:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 18 Jul 2010 19:00:47 -0000
Received: (qmail 15750 invoked by uid 500); 18 Jul 2010 19:00:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15570 invoked by uid 500); 18 Jul 2010 19:00:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15559 invoked by uid 99); 18 Jul 2010 19:00:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jul 2010 19:00:44 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of mgluckie@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Jul 2010 19:00:38 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <mgluckie@gmail.com>)
	id 1OaZ61-0001nP-7w
	for java-user@lucene.apache.org; Sun, 18 Jul 2010 12:00:17 -0700
Date: Sun, 18 Jul 2010 12:00:17 -0700 (PDT)
From: Mikki <mgluckie@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1279479617240-976836.post@n3.nabble.com>
Subject: spatial search - query to see if I fall within an area
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, what is the most efficient way of doing a spatial search in this way.
I have persons who monitor an area. I am at position x and I want to find
whether I fall within those monitored areas. If I do then they can monitor
me.

What is the best method for doing this type of search. The simplest is to go
to each person and ask if my position sits inside their monitor area. How
would this query look with lucene spatial search plugin?

Thanks
 
-- 
View this message in context: http://lucene.472066.n3.nabble.com/spatial-search-query-to-see-if-I-fall-within-an-area-tp976836p976836.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 10:04:14 2010
Return-Path: <java-user-return-46742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90958 invoked from network); 19 Jul 2010 10:04:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 10:04:13 -0000
Received: (qmail 74841 invoked by uid 500); 19 Jul 2010 10:04:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74310 invoked by uid 500); 19 Jul 2010 10:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74302 invoked by uid 99); 19 Jul 2010 10:04:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 10:04:06 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chardex@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 10:03:59 +0000
Received: by wwa36 with SMTP id 36so30547wwa.5
        for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 03:02:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=hjF58/wRrDX+sZM9UJtvKFpcV5hQrHZnev565SD+I08=;
        b=IUz5um6U9/ccPw208KCqD2r/Y45xx1lQP5d0T4VyRxf9NR2PK0Zb3qI8kjDoVgmTtr
         5WUG0fX8GfG77G4AJ6vmfkMaJVw6cEDsHd4W6wgGqzbZdj39uvWrHoOO40pc9i73fccU
         iHlVf6gyHVypsQpwxptCvR5MndP8Dr8pJslXM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=MzTdhSVZ0jHBLvJsl9GokqFORGYLxFbfm00kpaU/f474wZllXWoF8EA79e4QaGT1nB
         upKE+jWEcOHGSaIVvxaSBEHu7s/iQ0oxdWpxgLkSncWKtzuRtp2EaxE6TKCEI3Fzm0zr
         pJIH4BbiPsyKg0bKGiv1qucyTah7TESgoM/+I=
MIME-Version: 1.0
Received: by 10.216.47.140 with SMTP id t12mr3552728web.102.1279533770454; 
	Mon, 19 Jul 2010 03:02:50 -0700 (PDT)
Received: by 10.216.133.136 with HTTP; Mon, 19 Jul 2010 03:02:50 -0700 (PDT)
In-Reply-To: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1557@rw-ex2003.BROADVISION.COM>
References: <AANLkTimTsYIU9jBQuqHtzFWHELS_PUCM5R953V5npKdI@mail.gmail.com>
	<ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1557@rw-ex2003.BROADVISION.COM>
Date: Mon, 19 Jul 2010 14:02:50 +0400
Message-ID: <AANLkTikJkA__OGnM231Cvnp-hu0aFgtheL_1SFlUQwi2@mail.gmail.com>
Subject: Re: Building maven artifacts
From: Pavel Minchenkov <chardex@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f5afa8ddb574048bbaab7f
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f5afa8ddb574048bbaab7f
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I don't know. I tried to setup somethind like this:
 <property name="project.artifactId" value="lucene"/>

But error is the same. Maybe there are any other parameters?

2010/7/16 Zhang, Lisheng <Lisheng.Zhang@broadvision.com>

> Hi,
>
> I never this kind of build before, but just from the error message
> I guess it could mean two variables:
>
> ${project.artifactId}
> ${project.version}
>
> are not defined (otherwise exact jar file name would be printed out)?
>
> Could it be some environment setup issue?
>
> Best regards, Lisheng
>
> -----Original Message-----
> From: Pavel Minchenkov [mailto:chardex@gmail.com]
> Sent: Friday, July 16, 2010 8:35 AM
> To: java-user@lucene.apache.org; solr-user@lucene.apache.org
> Subject: Building maven artifacts
>
>

--001485f5afa8ddb574048bbaab7f--

From java-user-return-46743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 10:15:27 2010
Return-Path: <java-user-return-46743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96190 invoked from network); 19 Jul 2010 10:15:26 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 10:15:26 -0000
Received: (qmail 78025 invoked by uid 500); 19 Jul 2010 10:15:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77602 invoked by uid 500); 19 Jul 2010 10:15:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77591 invoked by uid 99); 19 Jul 2010 10:15:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 10:15:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of id.navs@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 10:15:12 +0000
Received: by qwd7 with SMTP id 7so2514059qwd.35
        for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 03:14:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=0doRvCfhR0q8ds0oI4soQULU31StceSvXDyPO+4R/hc=;
        b=jYY3DtPhw0qiK9bg2ctz4HkK/C1piO04tlfhJ62eP2JFviBV0Kb8yW7Vpi/k7MWfhj
         8yvQCEJ+lBj+1SrasR+EZNMDdwkYl16ApmYTWdlimgtZAQznWQ1B0b0SD5pN0Aeiawu7
         SeydqVIIGCbn8YdlYmLpgh/jdOAzUZRYfakGM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=v5FIXYl/pYRdd6jgQ09jx9PNAOvjVSP/EHDOAulkKobuxARcPbVbUC8aLZ/UR3TlOI
         u66EtjnBrwt1b6Aj7jf31Sz5ONOUegPiNnBkX+LRQRQxWwbgToN63luAyCBR1EFUXimY
         myu5Wj3/4X8UHJBumEqBgLwDSCVxgBr2s7kfc=
MIME-Version: 1.0
Received: by 10.224.59.145 with SMTP id l17mr3840040qah.287.1279534442464; 
	Mon, 19 Jul 2010 03:14:02 -0700 (PDT)
Received: by 10.229.89.20 with HTTP; Mon, 19 Jul 2010 03:14:02 -0700 (PDT)
Date: Mon, 19 Jul 2010 15:44:02 +0530
Message-ID: <AANLkTimquXTGZEwn0n6MsTuaBEJR5DXY1dX_2O5YSN_Y@mail.gmail.com>
Subject: API to retrieve search results without scoring or sorting
From: Naveen Kumar <id.navs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09fa21803ebc9bf048bbad3f6
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09fa21803ebc9bf048bbad3f6
Content-Type: text/plain; charset=ISO-8859-1

HI
Is there any API using which I can retrieve search results, such that they
are neither scored nor sorted (for performance reasons). I just need the
results, don't need any extra computation on that.
Any suggestion will be very helpful.

-- 
Thanks
Naveen Kumar

--00c09fa21803ebc9bf048bbad3f6--

From java-user-return-46744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 13:23:46 2010
Return-Path: <java-user-return-46744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50586 invoked from network); 19 Jul 2010 13:23:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 13:23:46 -0000
Received: (qmail 28358 invoked by uid 500); 19 Jul 2010 13:23:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28060 invoked by uid 500); 19 Jul 2010 13:23:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28047 invoked by uid 99); 19 Jul 2010 13:23:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 13:23:39 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 13:23:30 +0000
Received: by wwa36 with SMTP id 36so158991wwa.5
        for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 06:22:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type;
        bh=84N4zzBT27inEsk4U0AcUEViS3klSxRbAW6od4GWIdc=;
        b=Dl/T+pOwWhx0+vxrWiaFiY3nxbN9GMMOkp5KgfqTofJsO2BYt6cQZQHSKK/5z5lMlm
         B3hVvz9lJ0B9SwsN5W/ndXf7LBrcS3O/8DdrRS8IxxVxBDukZk2ETVWrtu233Sh9yTC7
         8DMFfvbHGkgPn0ymSHew5CFwkfeBmc3rQXK6g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=xublo0AZm56NznbjtYnQ3urkX5+wHKFnpaicefCy+Po72TLnvKdV8dmPzDbUMhfic0
         PMG3pLOBZdigBjEP0SFFyjXFyL3nYNQGhsG3qhCbWzHZgoZka/+4P0Lu1LtKZDLs+/1j
         mUuByYsDaZVfL+G8de5RfBEJiD5G/jxy9nngY=
MIME-Version: 1.0
Received: by 10.227.27.193 with SMTP id j1mr4023662wbc.137.1279545741510; Mon, 
	19 Jul 2010 06:22:21 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.209.198 with HTTP; Mon, 19 Jul 2010 06:22:21 -0700 (PDT)
In-Reply-To: <AANLkTimquXTGZEwn0n6MsTuaBEJR5DXY1dX_2O5YSN_Y@mail.gmail.com>
References: <AANLkTimquXTGZEwn0n6MsTuaBEJR5DXY1dX_2O5YSN_Y@mail.gmail.com>
Date: Mon, 19 Jul 2010 09:22:21 -0400
X-Google-Sender-Auth: W47m9mMZZ57UfPS19uYDj7fHLgY
Message-ID: <AANLkTimhMsGFgCwkUv17QwmWICY58ssnsw-S6KN8udrk@mail.gmail.com>
Subject: Re: API to retrieve search results without scoring or sorting
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jul 19, 2010 at 6:14 AM, Naveen Kumar <id.navs@gmail.com> wrote:
> Is there any API using which I can retrieve search results, such that they
> are neither scored nor sorted (for performance reasons). I just need the
> results, don't need any extra computation on that.

Use your own custom Collector class.

-Yonik
http://www.lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 13:54:01 2010
Return-Path: <java-user-return-46745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57966 invoked from network); 19 Jul 2010 13:54:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 13:54:01 -0000
Received: (qmail 59269 invoked by uid 500); 19 Jul 2010 13:53:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59058 invoked by uid 500); 19 Jul 2010 13:53:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59049 invoked by uid 99); 19 Jul 2010 13:53:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 13:53:56 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mailer.thomas@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 13:53:47 +0000
Received: by fxm16 with SMTP id 16so2842601fxm.35
        for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 06:53:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=mLJIy1mecr/gBI+EzoazLAJcXOmdpxEBhessBLLhfSg=;
        b=FjEa5GsstdR4zovWZfjevzGlSHI02LaLHyOWeehErAEIolj3wGIzAmn0IR5SU2NbC5
         s3WnOHavGyjwEB4jGuTJd6TTB35szI7jRMisauTlBQhx1ga04TaYh7HxE6TAY8/V7FlW
         d9tGDuONp7aMNZredqItsd37sONrjEpwPgTmI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=wBcIkkBVJp73iUKrSSErimSc39VrqIVtzoSt2qamap6hydnlyMAWiy1+NgjAy3hzgZ
         jRzuT9lCe78FiW3GDzLv4NajqGIJtdZwUqd3LJSA/v2+6dtKl61WbfH08Tg5bQ2x7oYo
         IzFPFrTscFBvsfZxx8T0tbhBpoem1kj6qzhjs=
Received: by 10.223.116.140 with SMTP id m12mr3746244faq.51.1279547606914;
        Mon, 19 Jul 2010 06:53:26 -0700 (PDT)
Received: from [192.168.24.135] (funny.informatik.hu-berlin.de [141.20.24.156])
        by mx.google.com with ESMTPS id b36sm2026190faq.11.2010.07.19.06.53.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 19 Jul 2010 06:53:26 -0700 (PDT)
Message-ID: <4C4458D5.7060102@gmail.com>
Date: Mon, 19 Jul 2010 15:53:25 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Get lengthNorm of a field
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

is there a possibility to retrieve the lengthNorm for all (or a 
specific) fields in a specific document?

Regards,
     Philippe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 14:21:57 2010
Return-Path: <java-user-return-46746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67979 invoked from network); 19 Jul 2010 14:21:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 14:21:57 -0000
Received: (qmail 90551 invoked by uid 500); 19 Jul 2010 14:21:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90372 invoked by uid 500); 19 Jul 2010 14:21:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90364 invoked by uid 99); 19 Jul 2010 14:21:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 14:21:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 14:21:47 +0000
Received: by wwa36 with SMTP id 36so205794wwa.5
        for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 07:21:26 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:sender:reply-to:received
         :in-reply-to:references:date:x-google-sender-auth:message-id:subject
         :from:to:content-type:content-transfer-encoding;
        bh=Hxur/9rKVFvQsKvH/LuDBMrSCoOgtpV5SAq8cCF4r6c=;
        b=Cl0nRQVQDFAYXFwIBv+EHrkJm2Rn40UWNysSsJtNgc5seqgTvbvuBJSsy7XwqVbyZ1
         iFEfUbTxrANQfb+VKVcmakfqc3jboPms7QrxUVKeb+lm3sO/gwGW+xKlnPYS5qcFgtYt
         O0vTMbi2jnVIg6BEYJlxvj6NsIZsdH/hwxods=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:reply-to:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        b=bgAvkVkKUoo0lm7B+TbCUt/NwwuhLoUwrcAhniVCQxVUq/NSYp2/uS11+d939dY6Ag
         h1rnwUKKUnH9GIMS+qlMb3QijZGeBF1KIveMkW7eaeNl4qomMWsLLZmkQrwQgMhGZx1A
         VwqTw1Hk1ZkXSwsvntDw/B3FID4BkBZtpRAL0=
MIME-Version: 1.0
Received: by 10.227.147.213 with SMTP id m21mr4113338wbv.97.1279549286836; 
	Mon, 19 Jul 2010 07:21:26 -0700 (PDT)
Sender: yseeley@gmail.com
Reply-To: yonik@lucidimagination.com
Received: by 10.216.209.198 with HTTP; Mon, 19 Jul 2010 07:21:26 -0700 (PDT)
In-Reply-To: <4C4458D5.7060102@gmail.com>
References: <4C4458D5.7060102@gmail.com>
Date: Mon, 19 Jul 2010 10:21:26 -0400
X-Google-Sender-Auth: R2JzLjzGki-phqXkS-8gWxoh300
Message-ID: <AANLkTilZzY_CT7mgTIoNlCnivPAAReIAlnVrFE1r3Iza@mail.gmail.com>
Subject: Re: Get lengthNorm of a field
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jul 19, 2010 at 9:53 AM, Philippe <mailer.thomas@gmail.com> wrote:
> is there a possibility to retrieve the lengthNorm for all (or a specific)
> fields in a specific document?

See IndexReader: public abstract byte[] norms(String field) throws IOExcept=
ion;
And Similarity: public float decodeNormValue(byte b) {

The byte[] is indexed by document id, and you can decode that into a
float value with a Similarity.

-Yonik
http://www.lucidimagination.com




> Regards,
> =A0 =A0Philippe
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 14:28:08 2010
Return-Path: <java-user-return-46747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69474 invoked from network); 19 Jul 2010 14:28:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 14:28:08 -0000
Received: (qmail 869 invoked by uid 500); 19 Jul 2010 14:28:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 822 invoked by uid 500); 19 Jul 2010 14:28:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 814 invoked by uid 99); 19 Jul 2010 14:28:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 14:28:05 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mailer.thomas@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 14:27:57 +0000
Received: by fxm16 with SMTP id 16so2880446fxm.35
        for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 07:27:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=G+CELI6D2U4gDm/I8WYfZvrjcYQtBxaxlpvBwOVvSFA=;
        b=dAjMaK3S2tz5acNZBEA4M6aJ6q0fuO+Z8PEgsdzSRGk6Lf4daxQsdyFVHOVL+3tWF4
         XDmH7cDq0u8nQSmT4Yji736IyLw/AskYHPp2uciVzBh46s8OSGQ1uN7LaPT1UVLV/Z7n
         vKiznNo/wEuL6jdxHfrA4qdxFpQyZvtjOcn+g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=nl7D2vxs+iusDq/OQbtMx32nKa8uYCqxxWn9eIeW/StTrLSHNMiI1kjQyAfyjw5u9g
         cOjHs5hXzW8paLk9m0hjI3rbwfKufJt7WNA5nWlCDLDzoWFOIh/GKRZzRMCszpl4FqKx
         VP8+vYlOEAbcZqkb1QXI3ihal98oYStIWacKo=
Received: by 10.223.113.144 with SMTP id a16mr3811241faq.41.1279549656550;
        Mon, 19 Jul 2010 07:27:36 -0700 (PDT)
Received: from [192.168.24.135] (funny.informatik.hu-berlin.de [141.20.24.156])
        by mx.google.com with ESMTPS id q17sm2037119faa.45.2010.07.19.07.27.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 19 Jul 2010 07:27:36 -0700 (PDT)
Message-ID: <4C4460D7.7000705@gmail.com>
Date: Mon, 19 Jul 2010 16:27:35 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Get lengthNorm of a field
References: <4C4458D5.7060102@gmail.com> <AANLkTilZzY_CT7mgTIoNlCnivPAAReIAlnVrFE1r3Iza@mail.gmail.com>
In-Reply-To: <AANLkTilZzY_CT7mgTIoNlCnivPAAReIAlnVrFE1r3Iza@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Yonik,

Am 19.07.2010 16:21, schrieb Yonik Seeley:
> On Mon, Jul 19, 2010 at 9:53 AM, Philippe<mailer.thomas@gmail.com>  wrote:
>    
>> is there a possibility to retrieve the lengthNorm for all (or a specific)
>> fields in a specific document?
>>      
> See IndexReader: public abstract byte[] norms(String field) throws IOException;
> And Similarity: public float decodeNormValue(byte b) {
>
> The byte[] is indexed by document id, and you can decode that into a
> float value with a Similarity.
>    
Thanks for the quick reply. I was searching for methods in 
IndexSearcher. Therefore I did not find the norms method.

Cheers,
     Philippe

> -Yonik
> http://www.lucidimagination.com
>
>
>
>
>    
>> Regards,
>>     Philippe
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 14:52:11 2010
Return-Path: <java-user-return-46748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76075 invoked from network); 19 Jul 2010 14:52:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 14:52:10 -0000
Received: (qmail 30221 invoked by uid 500); 19 Jul 2010 14:52:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30164 invoked by uid 500); 19 Jul 2010 14:52:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30156 invoked by uid 99); 19 Jul 2010 14:52:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 14:52:07 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 14:52:01 +0000
Received: by eyg5 with SMTP id 5so1576762eyg.35
        for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 07:50:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=NYCmXDVW2uEFPT1AmlXDJY5cAMVMXZbuca+HFuVR9nU=;
        b=tQZy/ajoZ0LWraHd1dFXuEJzKtj1KPqsEG2/csn18Mr8zzk2igmF0c5KDxDpHMX7lA
         vx2FyBisLhhfcNwZuXwEMiXZhpsTMrycu0hI7GDpRh2K01rDidQiO5w1ZuFIsJYq3zW2
         9oskoY5YQ/SUr+TlD17MpRkBeCe/eCty/PoLc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=pHT0S3JqDeLiEBwG02IPSQWHZQletKTYST/pXlO8bcdzEYkxsg8SgbpXu+x8HZMOLu
         eTqFluPJvifRN02usk3LEoOOwFmGdvTxDc0WSFYxIB3ZhW8y9bQqcHOh0mknnFXhdLum
         /bL4zKBu+AXroHlsoOPdU6C4p1GMOQh/XKSwg=
MIME-Version: 1.0
Received: by 10.213.28.204 with SMTP id n12mr2956831ebc.30.1279551051780; Mon, 
	19 Jul 2010 07:50:51 -0700 (PDT)
Received: by 10.213.19.140 with HTTP; Mon, 19 Jul 2010 07:50:51 -0700 (PDT)
In-Reply-To: <4C41F095.1080706@code972.com>
References: <4C407A8A.20303@code972.com>
	<AANLkTimsh0ydv0jHsI84aicaK5oW8a6Ms_QFp9fuD6WT@mail.gmail.com>
	<4C41F095.1080706@code972.com>
Date: Mon, 19 Jul 2010 17:50:51 +0300
Message-ID: <AANLkTikbX7EcTDd-6JC-kieFv5nNcyOvpCUzMT_IqQMP@mail.gmail.com>
Subject: Re: Scoring exact matches higher in a stemmed field
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174be612e9d665048bbeb11a
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174be612e9d665048bbeb11a
Content-Type: text/plain; charset=ISO-8859-1

If your analyzer outputs b and b$ in the same position, then the below query
will already be what the QP output today If you want to incorporate
boosting, I can suggest that you extend QP, override newTermQuery for
example, and if the term is a stemmed term, then set the query's boost
(Query.setBoost) accordingly. Would that work for you?

You'll need to check whether you want to boost terms inside phrases, or
entire phrases, and then override more methods from QP. But that approach
will get you the native product of the engine, I think. Alternatively, you
can set a payload on the stemmed terms and incorporate that into Similarity,
but that's more costly.

I don't follow that's been deprecated on Sim that you cannot use anymore?
All I see are 3 deprecated static methods which are related to norms ...

Shai

On Sat, Jul 17, 2010 at 9:04 PM, Itamar Syn-Hershko <itamar@code972.com>wrote:

> Shai, you got it right. I want to be able to send "b bb" through the QP
> with my custom analyzer, and get back "(b b$) (b bb$)" -- 2 terms with 2
> tokens in the same position for each.
>
> I want this to be a native product of the engine, as opposed to forcing
> this from the query end. I'm using different types of queries (Bool,
> DisMax), and I'm actually interested in using the QP itself. Instead of
> going through all sub-queries post-parsing and boosting terms ending with $,
> I want some sort of a plugin mechanism to do this for me per result. The
> easiest path would be subcalssing Similarity, if only the relevant functions
> wouldn't have been deprecated...
>
> Are there any other ways to do so? For example, is this doable with
> function queries (since access to the actual term is required)?
>
> Itamar.
>
> On 16/7/2010 8:01 PM, Shai Erera wrote:
>
>> Depends for which query no? ;)
>>
>> Sounds like you want to simulate the QP behavior
>> http://lucene.apache.org/java/2_4_0/queryparsersyntax.html for
>> boosting. Meaning, if for the query "b" you want to simulate the query
>> "b OR b$^2" and have matches of b$ count more than b, then I'd follow
>> how QP does it - create the query programmatically or something (I'm
>> not near the code at the moment so I cannot give a more concrete
>> approach).
>>
>> If you want b and b$ to count the same, then that's already the
>> behavior - i.e., docs containing both will score higher.
>>
>> If I misunderstood your question, then plea correct me.
>>
>> Shai
>>
>> On Friday, July 16, 2010, Itamar Syn-Hershko<itamar@code972.com>  wrote:
>>
>>
>>> Hi all,
>>>
>>>
>>> Consider the following string: "the buffalo buffaloes" [1].
>>>
>>>
>>> When passed through a stemming analyzer, the resulting token would be
>>> "buffalo buffalo" (assuming a good stemmer).
>>>
>>>
>>> To enable exact searches, say I mark the original term and index it at
>>> the same term position. So "the buffalo buffaloes" ->  (buffalo buffalo$)
>>> (buffalo buffaloes$) - now exact searches are allowed on the same field
>>> without having 2 different fields [2].
>>>
>>>
>>> However, with this approach default scoring isn't working well. What is
>>> my best option at upgrading a match for an exact match of this sort, also
>>> when using the same stemming analyzer, without using payloads on the marked
>>> token?
>>>
>>>
>>> In other words - how do I make documents containing "the buffalo
>>> buffaloes" considered more relevant than docs containing the word "buffalo"
>>> only once?
>>>
>>>
>>> The trick here is to boost the marked token if found at search time.
>>> While this sounds easy to do, I can't find the best approach on implementing
>>> this - esp. since Similarity.float Idf(Index.Term term, Searcher searcher)
>>> seem to have been deprecated for some reason.
>>>
>>>
>>> Itamar.
>>>
>>>
>>> [1]
>>> http://en.wikipedia.org/wiki/Buffalo_buffalo_Buffalo_buffalo_buffalo_buffalo_Buffalo_buffalo:)
>>>
>>> [2] Rationale:
>>> http://www.code972.com/blog/2010/07/more-flexible-hebrew-indexing-hebmorph/
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174be612e9d665048bbeb11a--

From java-user-return-46749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 16:43:31 2010
Return-Path: <java-user-return-46749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7047 invoked from network); 19 Jul 2010 16:43:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 16:43:31 -0000
Received: (qmail 70951 invoked by uid 500); 19 Jul 2010 16:43:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70728 invoked by uid 500); 19 Jul 2010 16:43:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70720 invoked by uid 99); 19 Jul 2010 16:43:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 16:43:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Lisheng.Zhang@broadvision.com designates 139.56.8.26 as permitted sender)
Received: from [139.56.8.26] (HELO mail-fw.broadvision.com) (139.56.8.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 16:43:21 +0000
X-ASG-Debug-ID: 1279557777-403d00390000-H1Y1KX
X-Barracuda-URL: http://mail-fw.broadvision.com:8000/cgi-bin/mark.cgi
Received: from RW-EX2003.BROADVISION.COM (localhost [127.0.0.1])
	by mail-fw.broadvision.com (Spam Firewall) with ESMTP id 7A8C015D76C
	for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 09:42:57 -0700 (PDT)
Received: from RW-EX2003.BROADVISION.COM (rw-ex2003.broadvision.com [10.10.160.33]) by mail-fw.broadvision.com with ESMTP id CNpUerfuxIpOCQAK for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 09:42:57 -0700 (PDT)
X-ASG-Whitelist: Client
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-ASG-Orig-Subj: RE: Building maven artifacts
Subject: RE: Building maven artifacts
Date: Mon, 19 Jul 2010 09:42:57 -0700
Message-ID: <ED081AC9AEEE0248BBCCDE9989AAE3FC02CB1566@rw-ex2003.BROADVISION.COM>
In-Reply-To: <AANLkTikJkA__OGnM231Cvnp-hu0aFgtheL_1SFlUQwi2@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Building maven artifacts
Thread-Index: AcsnKb14h4eLvZ2TRba+mUb+LGiyMwANwRUw
From: "Zhang, Lisheng" <Lisheng.Zhang@BroadVision.com>
To: <java-user@lucene.apache.org>
X-Barracuda-Connect: rw-ex2003.broadvision.com[10.10.160.33]
X-Barracuda-Start-Time: 1279557777
X-Barracuda-Virus-Scanned: by Barracuda Spam Firewall at broadvision.com
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Pavel,

I have not done this build, I sent last message based on my
experiences using ant on other projects, maybe people who=20
worked on maven artifacts could help?

Best regards, Lisheng

-----Original Message-----
From: Pavel Minchenkov [mailto:chardex@gmail.com]
Sent: Monday, July 19, 2010 3:03 AM
To: java-user@lucene.apache.org
Subject: Re: Building maven artifacts


Hi,

I don't know. I tried to setup somethind like this:
 <property name=3D"project.artifactId" value=3D"lucene"/>

But error is the same. Maybe there are any other parameters?

2010/7/16 Zhang, Lisheng <Lisheng.Zhang@broadvision.com>

> Hi,
>
> I never this kind of build before, but just from the error message
> I guess it could mean two variables:
>
> ${project.artifactId}
> ${project.version}
>
> are not defined (otherwise exact jar file name would be printed out)?
>
> Could it be some environment setup issue?
>
> Best regards, Lisheng
>
> -----Original Message-----
> From: Pavel Minchenkov [mailto:chardex@gmail.com]
> Sent: Friday, July 16, 2010 8:35 AM
> To: java-user@lucene.apache.org; solr-user@lucene.apache.org
> Subject: Building maven artifacts
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 18:26:35 2010
Return-Path: <java-user-return-46750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45538 invoked from network); 19 Jul 2010 18:26:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 18:26:35 -0000
Received: (qmail 33478 invoked by uid 500); 19 Jul 2010 18:26:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33413 invoked by uid 500); 19 Jul 2010 18:26:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33405 invoked by uid 99); 19 Jul 2010 18:26:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 18:26:32 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [188.121.53.1] (HELO n1plout04-01.prod.ams1.secureserver.net) (188.121.53.1)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 19 Jul 2010 18:26:22 +0000
Received: (qmail 25372 invoked from network); 19 Jul 2010 18:25:00 -0000
Received: from unknown (109.160.197.232)
  by n1plout04-01.prod.ams1.secureserver.net (188.121.53.1) with ESMTP; 19 Jul 2010 18:24:59 -0000
Message-ID: <4C449873.80809@code972.com>
Date: Mon, 19 Jul 2010 21:24:51 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.10) Gecko/20100512 Lightning/1.0b1 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Scoring exact matches higher in a stemmed field
References: <4C407A8A.20303@code972.com>	<AANLkTimsh0ydv0jHsI84aicaK5oW8a6Ms_QFp9fuD6WT@mail.gmail.com>	<4C41F095.1080706@code972.com> <AANLkTikbX7EcTDd-6JC-kieFv5nNcyOvpCUzMT_IqQMP@mail.gmail.com>
In-Reply-To: <AANLkTikbX7EcTDd-6JC-kieFv5nNcyOvpCUzMT_IqQMP@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 19/7/2010 5:50 PM, Shai Erera wrote:
> If your analyzer outputs b and b$ in the same position, then the below query
> will already be what the QP output today If you want to incorporate
> boosting, I can suggest that you extend QP, override newTermQuery for
> example, and if the term is a stemmed term, then set the query's boost
> (Query.setBoost) accordingly. Would that work for you?
>    
I want to avoid overriding the QP, and do this as a pluggable extension. 
What other options do I have other than what you've suggested?

Ideally, that would be through a class or a function I can override or 
extend, so each term hit while searching will be examined. By checking 
its type and text (for suffix), that interface could double its weight 
(or boost). The similarity functions I mentioned could have provided 
this ability (see below). How can this be done without them?
> You'll need to check whether you want to boost terms inside phrases, or
> entire phrases, and then override more methods from QP. But that approach
> will get you the native product of the engine, I think.
Just to make sure we are on the same page here, here's an example 
(assuming the default tf/idf implementation in Lucene).

I want to make sure anyone searching for "song of songs" will find texts 
discussing the biblical book, and have them ranked the highest, instead 
of having short texts containing one word "song" score higher.

So what I do is have my stemming analyzer save the string "song of 
songs" like this, where each parenthesis represents a token position: 
(song song$) (song songs$).

The part I'm missing is how to score terms with suffixes higher. The 
best approach seem to be looking at the term read by IndexReader and 
boost this finding somehow. The assumption is if IndexReader has read 
the term songs$ it has been looked for, and therefore this is the exact 
word that has been queried for.

Which is the best Lucene part to hijack for this mission?
> Alternatively, you
> can set a payload on the stemmed terms and incorporate that into Similarity,
> but that's more costly.
>    
I had mentioned Payloads - this will get me exactly what I want but as 
you say are quite costly when used for almost every term in the index. 
If I could replace the suffix with Payloads I would have done this (byte 
vs. byte), but I'm using the suffix for one other thing.
> I don't follow that's been deprecated on Sim that you cannot use anymore?
> All I see are 3 deprecated static methods which are related to norms ...
>    
In 2.3.2 there were these functions:

     public float idf(Term term, Searcher searcher)

     public float idf(Collection terms, Searcher searcher)

These have been deprecated somewhere between that version and 2.9.2, and 
it seems like I could have used those for what I'm trying to do.

Thanks,

Itamar.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 22:32:59 2010
Return-Path: <java-user-return-46751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46068 invoked from network); 19 Jul 2010 22:32:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 22:32:58 -0000
Received: (qmail 12710 invoked by uid 500); 19 Jul 2010 22:32:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12647 invoked by uid 500); 19 Jul 2010 22:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12639 invoked by uid 99); 19 Jul 2010 22:32:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 22:32:56 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of joe.hansen.at@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 22:32:48 +0000
Received: by gwj20 with SMTP id 20so3568880gwj.35
        for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 15:31:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=V64Gbs5pg5oCkkL/bybnX6dSqO3vAHnZdgA9XTQBp0Q=;
        b=c9gAoWrcZVk4n7XGvFt3cNzP5oLdSXAliXs2j2YIxwdZd1qmKfpKyvvgY2qcoOwtZf
         A4s81z3YZXGNyxIulp9OJRHBxKTKdpd9iNfAGNAlz/DO25OZ4p5BtsUntjf3dvN/Zksy
         uNN2J74C0RuM55o7wNdmNchX/o+/3/JYfpEvc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=bzIaUnjg6x/OEElZkwpdhGymg2OFdX2YQVhJzyr4tGQlOBBZ4bf+jTLWk0dbArJ+bn
         xcqq1NYtCuuMPKjPjXifOgfybhjR0cqRLVNEN97cpws+B5fLkdWl8weYBIhytXX2mwPy
         j0Tn1X3Z/7YZntGamSw9QjWl3M4LG132c/Nlc=
MIME-Version: 1.0
Received: by 10.100.141.1 with SMTP id o1mr5504926and.187.1279578687551; Mon, 
	19 Jul 2010 15:31:27 -0700 (PDT)
Received: by 10.100.229.6 with HTTP; Mon, 19 Jul 2010 15:31:27 -0700 (PDT)
Date: Mon, 19 Jul 2010 16:31:27 -0600
Message-ID: <AANLkTikIkMgCafSIX_VlGRy4xEGWAv4FvbfLISpeG6Z7@mail.gmail.com>
Subject: How to modify a document Field before the document is indexed?
From: Joe Hansen <joe.hansen.at@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hey All,

I am using Apache Lucene (2.9.1) and its fast and it works great! I
have a question in connection with Apache PDFBox.

The following command creates a Lucent Document from a PDF file:
Document document =
org.apache.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(docFile);

The Lucene Document, document, has a bunch of fields. Among those
fields, is a field named, "content". I need to add some more data to
that field. For example, I would like to add some description and
keywords. How do I go about doing that? Any pointers would be greatly
welcome! :)

Thanks for your time!

Regards,
Joe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 23:13:29 2010
Return-Path: <java-user-return-46752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60816 invoked from network); 19 Jul 2010 23:13:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 23:13:29 -0000
Received: (qmail 43642 invoked by uid 500); 19 Jul 2010 23:13:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43534 invoked by uid 500); 19 Jul 2010 23:13:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43526 invoked by uid 99); 19 Jul 2010 23:13:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 23:13:26 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 23:13:18 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id A70BAACB26
	for <java-user@lucene.apache.org>; Tue, 20 Jul 2010 08:12:57 +0900 (JST)
Message-ID: <4C44DBF9.3070508@r.email.ne.jp>
Date: Tue, 20 Jul 2010 08:12:57 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.1.10) Gecko/20100512 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: How to modify a document Field before the document is indexed?
References: <AANLkTikIkMgCafSIX_VlGRy4xEGWAv4FvbfLISpeG6Z7@mail.gmail.com>
In-Reply-To: <AANLkTikIkMgCafSIX_VlGRy4xEGWAv4FvbfLISpeG6Z7@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

(10/07/20 7:31), Joe Hansen wrote:
> Hey All,
>
> I am using Apache Lucene (2.9.1) and its fast and it works great! I
> have a question in connection with Apache PDFBox.
>
> The following command creates a Lucent Document from a PDF file:
> Document document =
> org.apache.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(docFile);
>
> The Lucene Document, document, has a bunch of fields. Among those
> fields, is a field named, "content". I need to add some more data to
> that field. For example, I would like to add some description and
> keywords. How do I go about doing that? Any pointers would be greatly
> welcome! :)
>
> Thanks for your time!
>
> Regards,
> Joe
>
>    
Joe,

You can add your data to the document object:

Document document =
org.apache.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(docFile);
document.add( new Field( "content", "your data", Store.YES, 
Index.ANALYZED ) );

http://lucene.apache.org/java/2_9_3/api/all/org/apache/lucene/document/Document.html#add%28org.apache.lucene.document.Fieldable%29

Koji

-- 
http://www.rondhuit.com/en/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 19 23:56:55 2010
Return-Path: <java-user-return-46753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70140 invoked from network); 19 Jul 2010 23:56:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 19 Jul 2010 23:56:55 -0000
Received: (qmail 74936 invoked by uid 500); 19 Jul 2010 23:56:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74879 invoked by uid 500); 19 Jul 2010 23:56:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74870 invoked by uid 99); 19 Jul 2010 23:56:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 23:56:52 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FRT_ADULT2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of joe.hansen.at@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Jul 2010 23:56:46 +0000
Received: by gwj20 with SMTP id 20so3620277gwj.35
        for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 16:56:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=pXVd8U0jjXQvZzZazqPIBD5RAfrmywVl4guLpaUmYgQ=;
        b=D/4qQnE38oFkacs0IE65s8a/YIC2HH6HzUN3swHOWosxs5/Qq18V/PwugjU/7NRamC
         8yS2a12qMJpDI5rlMFJYD0QmdYGwe3wqq+7+ySxzt9nARgUecOBppLfGwSbKePmd17S2
         N8F935lOLB45hXUlxTvHQU00Qy9LvWC8sctlI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=PFEPie6SELjWbv/06U4Kvk/JqoCivj8t3sFKdASPIcEU17b9KTdbbVPCclDMVHzRnT
         fdz+OZB1HpxUOhVaJ3VjoYrZp6XE/akQM2m+Kj12R9zkNNLB60dE7CD81wU39iw7RQne
         tXmeGRPSCGByweMHYdar4Vth8idV8IDLG4F20=
MIME-Version: 1.0
Received: by 10.100.142.20 with SMTP id p20mr5624794and.72.1279583784932; Mon, 
	19 Jul 2010 16:56:24 -0700 (PDT)
Received: by 10.100.229.6 with HTTP; Mon, 19 Jul 2010 16:56:24 -0700 (PDT)
In-Reply-To: <4C44DBF9.3070508@r.email.ne.jp>
References: <AANLkTikIkMgCafSIX_VlGRy4xEGWAv4FvbfLISpeG6Z7@mail.gmail.com>
	<4C44DBF9.3070508@r.email.ne.jp>
Date: Mon, 19 Jul 2010 17:56:24 -0600
Message-ID: <AANLkTimMTdmI5ItLNdJicT-XkU7qxYODxQBatKvxloFC@mail.gmail.com>
Subject: Re: How to modify a document Field before the document is indexed?
From: Joe Hansen <joe.hansen.at@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for your reply Koji! Your suggestion worked fine. I thought
adding a field named "contents" to a document, even though it contains
a field already named "contents" would NOT do anything. But looks like
I am wrong!

Thank you for your kind help! :)

Regards,
Joe

On Mon, Jul 19, 2010 at 5:12 PM, Koji Sekiguchi <koji@r.email.ne.jp> wrote:
> (10/07/20 7:31), Joe Hansen wrote:
>>
>> Hey All,
>>
>> I am using Apache Lucene (2.9.1) and its fast and it works great! I
>> have a question in connection with Apache PDFBox.
>>
>> The following command creates a Lucent Document from a PDF file:
>> Document document =
>>
>> org.apache.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(docFile);
>>
>> The Lucene Document, document, has a bunch of fields. Among those
>> fields, is a field named, "content". I need to add some more data to
>> that field. For example, I would like to add some description and
>> keywords. How do I go about doing that? Any pointers would be greatly
>> welcome! :)
>>
>> Thanks for your time!
>>
>> Regards,
>> Joe
>>
>>
>
> Joe,
>
> You can add your data to the document object:
>
> Document document =
> org.apache.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(docFile);
> document.add( new Field( "content", "your data", Store.YES, Index.ANALYZED )
> );
>
> http://lucene.apache.org/java/2_9_3/api/all/org/apache/lucene/document/Document.html#add%28org.apache.lucene.document.Fieldable%29
>
> Koji
>
> --
> http://www.rondhuit.com/en/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 20 00:08:29 2010
Return-Path: <java-user-return-46754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76028 invoked from network); 20 Jul 2010 00:08:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Jul 2010 00:08:28 -0000
Received: (qmail 78471 invoked by uid 500); 20 Jul 2010 00:08:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78409 invoked by uid 500); 20 Jul 2010 00:08:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78401 invoked by uid 99); 20 Jul 2010 00:08:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jul 2010 00:08:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FRT_ADULT2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jul 2010 00:08:20 +0000
Received: by vws7 with SMTP id 7so2460164vws.35
        for <java-user@lucene.apache.org>; Mon, 19 Jul 2010 17:07:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=A0vhIQUm8Ns9nG5llMrWmxJMBMG7afWtfNF6ZfppVQo=;
        b=l59VMbSza7FC/Lfz/aKj0M9jTPUZU6iDpAmWIC4WhG7HZQeNt/qze2j54Ujc7HaLWT
         5eb6SXyAcN1lJZe4/9juqwGnacVRvaixOpgIyeKhUp1OpeOpPcsyfLGOgZ6EI9m8zK1P
         N4a55pbaqStDtbozjtUH3en4Ui+f9m4EZVqhA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=CJx9VSXbHof3OLkRJPqTTMQ6KokNeFJQdUEWhz7EsT5qaalRukCBiZ7HPmvm5F8lne
         +wHcNsyQHaup2M4Pu7A0sQJ9Q6JMToQdq4Jku8An/4diRIzxsAAdiuXqplsja/NowBWB
         VuVWGPB4x4vdPlPLVTfF7xypkknLWbHMnpjMU=
MIME-Version: 1.0
Received: by 10.224.96.155 with SMTP id h27mr5062224qan.280.1279584478660; 
	Mon, 19 Jul 2010 17:07:58 -0700 (PDT)
Received: by 10.229.226.1 with HTTP; Mon, 19 Jul 2010 17:07:58 -0700 (PDT)
In-Reply-To: <AANLkTimMTdmI5ItLNdJicT-XkU7qxYODxQBatKvxloFC@mail.gmail.com>
References: <AANLkTikIkMgCafSIX_VlGRy4xEGWAv4FvbfLISpeG6Z7@mail.gmail.com>
	<4C44DBF9.3070508@r.email.ne.jp>
	<AANLkTimMTdmI5ItLNdJicT-XkU7qxYODxQBatKvxloFC@mail.gmail.com>
Date: Mon, 19 Jul 2010 20:07:58 -0400
Message-ID: <AANLkTikgVINZdkI5hI2TtMnsf7v-UKTl3sqvlov86Ibl@mail.gmail.com>
Subject: Re: How to modify a document Field before the document is indexed?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00c09f89995d4f8e7c048bc67a11
X-Virus-Checked: Checked by ClamAV on apache.org

--00c09f89995d4f8e7c048bc67a11
Content-Type: text/plain; charset=ISO-8859-1

One subtlety you might be able to use to advantage... This is
where getPositionIncrementGap in your analyzer can be used
to separate the two bits of data in the same field. If I have my
own analyzer (which could be a trivial override of an existing one)
that returns, say 10,000 from getPositionIncrementGap Now, if
you wanted to insure that proximity queries only matched in a particular
add to your "content" field, you could specify that all the terms had
to occur within 10,000 of each other...

FWIW
Erick

On Mon, Jul 19, 2010 at 7:56 PM, Joe Hansen <joe.hansen.at@gmail.com> wrote:

> Thanks for your reply Koji! Your suggestion worked fine. I thought
> adding a field named "contents" to a document, even though it contains
> a field already named "contents" would NOT do anything. But looks like
> I am wrong!
>
> Thank you for your kind help! :)
>
> Regards,
> Joe
>
> On Mon, Jul 19, 2010 at 5:12 PM, Koji Sekiguchi <koji@r.email.ne.jp>
> wrote:
> > (10/07/20 7:31), Joe Hansen wrote:
> >>
> >> Hey All,
> >>
> >> I am using Apache Lucene (2.9.1) and its fast and it works great! I
> >> have a question in connection with Apache PDFBox.
> >>
> >> The following command creates a Lucent Document from a PDF file:
> >> Document document =
> >>
> >>
> org.apache.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(docFile);
> >>
> >> The Lucene Document, document, has a bunch of fields. Among those
> >> fields, is a field named, "content". I need to add some more data to
> >> that field. For example, I would like to add some description and
> >> keywords. How do I go about doing that? Any pointers would be greatly
> >> welcome! :)
> >>
> >> Thanks for your time!
> >>
> >> Regards,
> >> Joe
> >>
> >>
> >
> > Joe,
> >
> > You can add your data to the document object:
> >
> > Document document =
> >
> org.apache.pdfbox.searchengine.lucene.LucenePDFDocument.getDocument(docFile);
> > document.add( new Field( "content", "your data", Store.YES,
> Index.ANALYZED )
> > );
> >
> >
> http://lucene.apache.org/java/2_9_3/api/all/org/apache/lucene/document/Document.html#add%28org.apache.lucene.document.Fieldable%29
> >
> > Koji
> >
> > --
> > http://www.rondhuit.com/en/
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00c09f89995d4f8e7c048bc67a11--

From java-user-return-46755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 20 13:59:42 2010
Return-Path: <java-user-return-46755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32831 invoked from network); 20 Jul 2010 13:59:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Jul 2010 13:59:42 -0000
Received: (qmail 76154 invoked by uid 500); 20 Jul 2010 13:59:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75616 invoked by uid 500); 20 Jul 2010 13:59:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75594 invoked by uid 99); 20 Jul 2010 13:59:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jul 2010 13:59:35 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.136.167.13] (HELO web113313.mail.gq1.yahoo.com) (98.136.167.13)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Jul 2010 13:59:28 +0000
Received: (qmail 68791 invoked by uid 60001); 20 Jul 2010 13:59:05 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1279634345; bh=s19MTNuVtNj8+BmVM4Dqhjjn6XKg+cxdQXdigdxTqsM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=oQboAwUdCZz4SFVx4fTHcDs8CBB3icZ9nNz2WUKNbhMj5zOvPils1LQ672JlwaoEAO0ge1yoPH1HU8wiwced5eFWY30bzP+CfLPRWbdYMZa4fNFCr4rNqF4aenONev59TW02ayA+DM8iLHmIZz+nmCDdCkWSgnMhm0S+U1paXZA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Srmv0f/m55yMWuWoZEf58WbfLvTlB14GOVwo0QRhbBJnpVZBwBU9F82/uMeDjzPD2v/K+PAQrFqLv+xfJmjPemR1rxrpmMPkR/NNvMbzSNJsBT6izZU5hkjvaRKWZojY0oSMuniY3CDmPa/4w4C1X3Cj/XxuN0IgHvPEaVck0tc=;
Message-ID: <656451.67269.qm@web113313.mail.gq1.yahoo.com>
X-YMail-OSG: tL.oudYVM1mPLXGprkUeEDPvLBqmH.f2Y3Qxa2g5GxR6sfo
 sYIG6zMhRtAAJp1PIEv5BG_289TmI0Suh7E2aiM_nSWwEfE.lz2MnASHDIod
 pX3VhlSnE4yLHpRwKBr.Nu14t94IGyExLWDfPjksUW1mnIgmvKwQRElA1MmF
 jNCthCm12GM39kXYSLNXKZHNmFIHdNS0cyHVFq_GuM4S8vVr0ZR4rU88qCI4
 7raXAVHBIo1M1pcDl0eNOWy0WFK0z4_hL0RnNufRLh5CNZpwlBFGm9ONuwEd
 755EWDhHh3dD58iUXFzUk00osyBLsbekvI_MyPCeYWKSATGlxXfQz9uAZbB4
 D5yttzNtZVQPw0W1NWW6Ae9IEzZrV
Received: from [129.194.3.7] by web113313.mail.gq1.yahoo.com via HTTP; Tue, 20 Jul 2010 06:59:05 PDT
X-Mailer: YahooMailClassic/11.2.4 YahooMailWebService/0.8.104.276605
Date: Tue, 20 Jul 2010 06:59:05 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: IR meetup in Michigan - lucene's scaling performance and relevance tuning
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTin6QPJ7Joe-F5FcKBCNdoKXZ1z5gionBP15yg0c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

We are organizing a meetup in michigan on IR.  The first meeting is on august 19.  We will be talking about lucene's scalability and relevance tuning followed by a discussion. Feel free to sign up:

http://www.meetup.com/Michigan-Information-Retrieval-Enthusiasts-Group

Thanks,

Ivan provalov


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 20 18:17:11 2010
Return-Path: <java-user-return-46756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34219 invoked from network); 20 Jul 2010 18:17:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 20 Jul 2010 18:17:11 -0000
Received: (qmail 88999 invoked by uid 500); 20 Jul 2010 18:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88861 invoked by uid 500); 20 Jul 2010 18:17:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88853 invoked by uid 99); 20 Jul 2010 18:17:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jul 2010 18:17:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alexander.aristov@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Jul 2010 18:17:01 +0000
Received: by fxm16 with SMTP id 16so4037225fxm.35
        for <java-user@lucene.apache.org>; Tue, 20 Jul 2010 11:16:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=R7kAtQX5E7oPLbYPRo6XxJiRRtB94zekekxn6Y+m5dA=;
        b=ttudNKSPaFWqktc4+ahq3ZsWTL1QU8JXeoQGNakksesOj1cifLq7QZgRxMPrOXaBcf
         sQmR9GF+IksrRd60LJ5gfEktOP1k94VSqjGbUD9LIPzc6tf6LxPfGzPz3LxnflhPczra
         4TndjvJeBERkgCRHLpKH3xTGa0MKZmPPTFkMI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=E62wjCPMn5wBCxnOiBYfgy9g1vUAIdNBU34aivvGK6c8YsQeosXa/dksWwgobfPTTY
         bUEq26tOcrvIAosvKUHt99abyejn1I41olZ1F8XIc1tnCk+DESMlpGH9OetGNFJbZqlV
         oJLwKtQ9jL8pXJma1ZtuqjgU2+ZmVaRDowhCw=
Received: by 10.239.140.197 with SMTP id y5mr470140hby.78.1279649801454; Tue, 
	20 Jul 2010 11:16:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.239.166.1 with HTTP; Tue, 20 Jul 2010 11:16:20 -0700 (PDT)
In-Reply-To: <656451.67269.qm@web113313.mail.gq1.yahoo.com>
References: <AANLkTin6QPJ7Joe-F5FcKBCNdoKXZ1z5gionBP15yg0c@mail.gmail.com> 
	<656451.67269.qm@web113313.mail.gq1.yahoo.com>
From: Alexander Aristov <alexander.aristov@gmail.com>
Date: Tue, 20 Jul 2010 22:16:20 +0400
Message-ID: <AANLkTiknd-1Khuq2JR-8Q33KDciAoefl5iNR73Z4vrF7@mail.gmail.com>
Subject: Re: IR meetup in Michigan - lucene's scaling performance and 
	relevance tuning
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f6299ada44c1048bd5afac
X-Virus-Checked: Checked by ClamAV on apache.org

--001485f6299ada44c1048bd5afac
Content-Type: text/plain; charset=ISO-8859-1

are there such events in Russia?

Best Regards
Alexander Aristov


On 20 July 2010 17:59, Ivan Provalov <iprovalo@yahoo.com> wrote:

> We are organizing a meetup in michigan on IR.  The first meeting is on
> august 19.  We will be talking about lucene's scalability and relevance
> tuning followed by a discussion. Feel free to sign up:
>
> http://www.meetup.com/Michigan-Information-Retrieval-Enthusiasts-Group
>
> Thanks,
>
> Ivan provalov
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001485f6299ada44c1048bd5afac--

From java-user-return-46757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 21 03:00:11 2010
Return-Path: <java-user-return-46757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97335 invoked from network); 21 Jul 2010 03:00:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Jul 2010 03:00:11 -0000
Received: (qmail 79350 invoked by uid 500); 21 Jul 2010 03:00:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78257 invoked by uid 500); 21 Jul 2010 03:00:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78242 invoked by uid 99); 21 Jul 2010 03:00:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 03:00:05 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 02:59:57 +0000
Received: by pxi11 with SMTP id 11so5052299pxi.35
        for <multiple recipients>; Tue, 20 Jul 2010 19:59:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=s8prpPqgZFqPytHi2ErgEyLGRVYLHxEaEhyY0qlGOs4=;
        b=U14EgF+Uewrcl/WkDNHvqp0FFVWM80r883vunKDkIsF3ZvtAKg7cn9eshcjE7pxT+b
         4kcRzr/ETGRKdUpxvfSCu15dlej0YLTAA8LWnKwW3xrL5bkLZ9FTIf52caj4ZNIPPQPh
         Wk/5Ha2Slxk+585fGKAWOgCOhHbL/FMoEr3yE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=HHIHKXGc2XlmO16aNBz64MHZqNOxK73UWZ3ttBVd6GPJhWIqQOshbLBg4OnKwE09Nl
         bExKhD9jEj5jPBKGy6A/wioYzYKb0Myb0z99f2YDjtPw1X9SOQo5xiRhgqrEB2Sngg9u
         r/tpnkfOewiUlXQqppC70VoGx1mx5e4dTEQYc=
MIME-Version: 1.0
Received: by 10.142.133.20 with SMTP id g20mr10428566wfd.175.1279681176030; 
	Tue, 20 Jul 2010 19:59:36 -0700 (PDT)
Received: by 10.142.158.10 with HTTP; Tue, 20 Jul 2010 19:59:35 -0700 (PDT)
Date: Wed, 21 Jul 2010 10:59:35 +0800
Message-ID: <AANLkTimnI7keZ17aSKCbFOQuIgUb-mR7lokOrrO0eJPA@mail.gmail.com>
Subject: is there any resource for improve lucene index/search performance
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org, dev@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Or where to find any improvement proposal for lucene?
e.g. I want to change the float point multiplication to integer
multiplication or using bitmap for high frequent terms or something
else like this. Is there any place  where I can find any resources or
guys?
thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 21 08:52:55 2010
Return-Path: <java-user-return-46758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94419 invoked from network); 21 Jul 2010 08:52:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Jul 2010 08:52:55 -0000
Received: (qmail 76835 invoked by uid 500); 21 Jul 2010 08:52:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76559 invoked by uid 500); 21 Jul 2010 08:52:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76545 invoked by uid 99); 21 Jul 2010 08:52:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 08:52:47 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [88.198.74.36] (HELO octopussy.animated-webstyles.de) (88.198.74.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 08:52:38 +0000
Received: from mail-gx0-f176.google.com (mail-gx0-f176.google.com [209.85.161.176])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by octopussy.animated-webstyles.de (Postfix) with ESMTP id A3C4140DF12
	for <java-user@lucene.apache.org>; Wed, 21 Jul 2010 10:52:17 +0200 (CEST)
Received: by gxk7 with SMTP id 7so5439003gxk.35
        for <java-user@lucene.apache.org>; Wed, 21 Jul 2010 01:52:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.100.122.12 with SMTP id u12mr2093950anc.112.1279702336121; 
	Wed, 21 Jul 2010 01:52:16 -0700 (PDT)
Received: by 10.42.36.77 with HTTP; Wed, 21 Jul 2010 01:52:16 -0700 (PDT)
Date: Wed, 21 Jul 2010 10:52:16 +0200
Message-ID: <AANLkTikaGZCX3etT9aifswnQaqdFvQtOkBrfOmBZfXr3@mail.gmail.com>
Subject: Structure of .tii-file
From: Alexander vom Berg <mail@avomberg.de>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e642d64a29b6eb048be1ebfd
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e642d64a29b6eb048be1ebfd
Content-Type: text/plain; charset=ISO-8859-1

Hello everybody,

I am reading the file format paper and I check it against a created index.
The documentation says:
TermInfoIndex (.tii)--> TIVersion, IndexTermCount, IndexInterval,
SkipInterval, MaxSkipLevels, TermIndices

If I look into the .tii-file I see the following:
TIVersion = FF FF FF FC  (4 Bytes)
IndexTermCount = 00 00 00 00 00 00 00 0C = 10  (8 Bytes)
IndexInterval = 00 00 00 80 = 128  (4 Bytes)
SkipInterval = 00 00 00 10 = 16  (4 Bytes)
MaxSkipLevels = 00 00 00 0A = 10 (4 Bytes)
TermIndices = ?????  (? Bytes)

I looked in two indexes and for both the following byte sequences are equal
(marked bold):
*00 00 FF FF FF FF 0F 00 00 00 18 00* (0B 61 or 0D30 .....)

Maybe I don't understand the Map with *<TermInfo, IndexDelta>^IndexTermCount
*. How should I calculate the correct byte length?
I assume the IndexDelta with VLong has 8 bytes if the leading bit is 0
(Similar vo VInt or is VLong somewhere described?). TermInfo is explained in
the .tis file section.

TermIndices   = <TermInfo, IndexDelta>

= <(Term,DocFreq,FreqDelta,ProxDelta,SkipDelta), IndexDelta>
= <([PrefixLength,Suffix,FieldNum],DocFreq,FreqDelta,ProxDelta,SkipDelta),
         IndexDelta>
= <([        00         ,  00     ,        FF  ],        FF   ,      FF
  ,      FF      ,      0F      ),   00 00 00 18 00 0B 61 6E>



IndexDelta is to large for my small index! Also DocFreq is to large because
I only have 16 documents in total. :(

Can somebody tell me how to read the bytes correctly from the file? I would
like to find the correct position in the .tis file from .tii data.

Best regards
Alex

--0016e642d64a29b6eb048be1ebfd--

From java-user-return-46759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 21 09:14:38 2010
Return-Path: <java-user-return-46759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3112 invoked from network); 21 Jul 2010 09:14:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Jul 2010 09:14:37 -0000
Received: (qmail 99986 invoked by uid 500); 21 Jul 2010 09:14:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99660 invoked by uid 500); 21 Jul 2010 09:14:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99652 invoked by uid 99); 21 Jul 2010 09:14:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 09:14:31 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 09:14:24 +0000
Received: by pwj2 with SMTP id 2so4999624pwj.35
        for <java-user@lucene.apache.org>; Wed, 21 Jul 2010 02:14:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.114.66.20 with SMTP id o20mr5612628waa.163.1279703628896; Wed, 
	21 Jul 2010 02:13:48 -0700 (PDT)
Received: by 10.114.255.1 with HTTP; Wed, 21 Jul 2010 02:13:45 -0700 (PDT)
In-Reply-To: <AANLkTikaGZCX3etT9aifswnQaqdFvQtOkBrfOmBZfXr3@mail.gmail.com>
References: <AANLkTikaGZCX3etT9aifswnQaqdFvQtOkBrfOmBZfXr3@mail.gmail.com>
Date: Wed, 21 Jul 2010 05:13:45 -0400
Message-ID: <AANLkTindk-Pl6ENIx2sXn482UakGN0sz6U74Q6pj4Mqi@mail.gmail.com>
Subject: Re: Structure of .tii-file
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Best explanation is the source code itself -- it should be correct ;)

Look at how SegmentTermsEnum.next is implemented, pre-flex.  (If
you're looking @ flex (=3D trunk), then the format is slightly different
and not yet correctly documented (issue is open)).

Yes vInt/vLong are the same, except vLong can take up to 9 bytes.  But
we look @ the high bit of each byte, and keep reading/shifting bytes
as long as that's 1.  It's a rather CPU unfriendly format since that
if is usually hard to predict.

Each term is delta coded against the last term, ie we only write the
changed suffix.  First vInt is suffix start.  Next vInt is suffix end.
 Then comes the bytes (UTF8 pre-flex, opaque in flex).  In your case
these both look to be 0?  Ie, first term is the empty string.  Next
comes the field number as a vInt (pre-flex), but at that point you
have -1 (encodes as FF FF FF FF 0F in vInt), which is odd -- field
numbers should be positive.  Must be missing something...

The deltas are then vLong's, delta coded.

Mike

On Wed, Jul 21, 2010 at 4:52 AM, Alexander vom Berg <mail@avomberg.de> wrot=
e:
> Hello everybody,
>
> I am reading the file format paper and I check it against a created index=
.
> The documentation says:
> TermInfoIndex (.tii)--> TIVersion, IndexTermCount, IndexInterval,
> SkipInterval, MaxSkipLevels, TermIndices
>
> If I look into the .tii-file I see the following:
> TIVersion =3D FF FF FF FC =A0(4 Bytes)
> IndexTermCount =3D 00 00 00 00 00 00 00 0C =3D 10 =A0(8 Bytes)
> IndexInterval =3D 00 00 00 80 =3D 128 =A0(4 Bytes)
> SkipInterval =3D 00 00 00 10 =3D 16 =A0(4 Bytes)
> MaxSkipLevels =3D 00 00 00 0A =3D 10 (4 Bytes)
> TermIndices =3D ????? =A0(? Bytes)
>
> I looked in two indexes and for both the following byte sequences are equ=
al
> (marked bold):
> *00 00 FF FF FF FF 0F 00 00 00 18 00* (0B 61 or 0D30 .....)
>
> Maybe I don't understand the Map with *<TermInfo, IndexDelta>^IndexTermCo=
unt
> *. How should I calculate the correct byte length?
> I assume the IndexDelta with VLong has 8 bytes if the leading bit is 0
> (Similar vo VInt or is VLong somewhere described?). TermInfo is explained=
 in
> the .tis file section.
>
> TermIndices =A0 =3D <TermInfo, IndexDelta>
>
> =3D <(Term,DocFreq,FreqDelta,ProxDelta,SkipDelta), IndexDelta>
> =3D <([PrefixLength,Suffix,FieldNum],DocFreq,FreqDelta,ProxDelta,SkipDelt=
a),
> =A0 =A0 =A0 =A0 IndexDelta>
> =3D <([ =A0 =A0 =A0 =A000 =A0 =A0 =A0 =A0 , =A000 =A0 =A0 , =A0 =A0 =A0 =
=A0FF =A0], =A0 =A0 =A0 =A0FF =A0 , =A0 =A0 =A0FF
> =A0, =A0 =A0 =A0FF =A0 =A0 =A0, =A0 =A0 =A00F =A0 =A0 =A0), =A0 00 00 00 =
18 00 0B 61 6E>
>
>
>
> IndexDelta is to large for my small index! Also DocFreq is to large becau=
se
> I only have 16 documents in total. :(
>
> Can somebody tell me how to read the bytes correctly from the file? I wou=
ld
> like to find the correct position in the .tis file from .tii data.
>
> Best regards
> Alex
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 21 09:25:50 2010
Return-Path: <java-user-return-46760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6862 invoked from network); 21 Jul 2010 09:25:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Jul 2010 09:25:50 -0000
Received: (qmail 19073 invoked by uid 500); 21 Jul 2010 09:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18814 invoked by uid 500); 21 Jul 2010 09:25:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18806 invoked by uid 99); 21 Jul 2010 09:25:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 09:25:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.136.167.10] (HELO web113310.mail.gq1.yahoo.com) (98.136.167.10)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Jul 2010 09:25:36 +0000
Received: (qmail 15080 invoked by uid 60001); 21 Jul 2010 09:24:15 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1279704255; bh=e6ezI2TvqDCbNLbaj1lbleKzeJFmeT7QMzKQaEeor6Q=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=0lR7F7sAaMAj5UMCgghPy+pcTDMtyUFE7r79MLVzvXUFfy4Mdt+ene2fO1/3WXV//75Y8u1/eKzGSMbioludcRxdBxmh29OXMwrnV0H0vjz+/Yd8pRsGifJjDk9yeTnH9lfKgPGDSo7BKBKMejdOvQXg0NNZs/h3gVzpXIG8aPo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=SWl/RfyKiaew8YpmaSrqN8b64VBN2mP/SQ0CTufci3Z83s+yxhOf1cLydv2Qk5B25tH1U6OE4LqYHdvIYZmfKW92i4ltl3iByJ4J42JTcwVv6SpVMYNHZbqLlvfyo28AefdMFH9BDEIDbGaZ+LoI30nmemSkafC1guQjQBISccw=;
Message-ID: <458513.14645.qm@web113310.mail.gq1.yahoo.com>
X-YMail-OSG: 9pOaedIVM1lOUc6_.DZxq7h1.YTj4yGvStSN9lWhlhh92it
 6v09ehCWdApRALd2fQUnpxV6MW6epqjMxndCLY84Q64dgZlsqgt781MBuZbw
 jevhAjibNgIgQIs6lyNpoHZdzfy_4W.1M6O065pw2HXRK6EZ6fVqoRntjrcJ
 XYH71hWHhz1UITNYBy2kBTRkWtBlT.boe0Sbo4t6qbpn1FkaYCpX_8cNM5Qt
 5b60p7gvD1VYG8Mlb.6H.KMXtPBLHUSC1WqwfJ.B_4nOZKHgGJjFHYGo5jph
 voeuNWebfqwU5N4E2mJftV8D.uWkJNwn7b52iv7eJk3lpg6164ZbH3uTIRk1
 A0FP1ggV8gEvY3sFbczjxrs2bpnub
Received: from [129.194.3.7] by web113310.mail.gq1.yahoo.com via HTTP; Wed, 21 Jul 2010 02:24:15 PDT
X-Mailer: YahooMailClassic/11.2.4 YahooMailWebService/0.8.104.276605
Date: Wed, 21 Jul 2010 02:24:15 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: IR meetup in Michigan - lucene's scaling performance and  relevance tuning
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Per Ilya Segalovich from yandex, here are a few events/groups in russia:
=20
ROMIP
DIAlOG conference
RCDL conference
LiveJournal community ru_ir
RuSSIR

Thanks,

Ivan





--- On Tue, 7/20/10, Alexander Aristov <alexander.aristov@gmail.com> wrote:

> From: Alexander Aristov <alexander.aristov@gmail.com>
> Subject: Re: IR meetup in Michigan - lucene's scaling performance and=A0 =
relevance tuning
> To: java-user@lucene.apache.org
> Date: Tuesday, July 20, 2010, 2:16 PM
> are there such events in Russia?
>=20
> Best Regards
> Alexander Aristov
>=20
>=20
> On 20 July 2010 17:59, Ivan Provalov <iprovalo@yahoo.com>
> wrote:
>=20
> > We are organizing a meetup in michigan on IR.=A0
> The first meeting is on
> > august 19.=A0 We will be talking about lucene's
> scalability and relevance
> > tuning followed by a discussion. Feel free to sign
> up:
> >
> > http://www.meetup.com/Michigan-Information-Retrieval-Enthusiasts-Group
> >
> > Thanks,
> >
> > Ivan provalov
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
=0A=0A=0A      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 21 12:38:43 2010
Return-Path: <java-user-return-46761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81480 invoked from network); 21 Jul 2010 12:38:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Jul 2010 12:38:42 -0000
Received: (qmail 16311 invoked by uid 500); 21 Jul 2010 12:38:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15903 invoked by uid 500); 21 Jul 2010 12:38:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15893 invoked by uid 99); 21 Jul 2010 12:38:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 12:38:35 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of martinj.engine@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 12:38:27 +0000
Received: by vws7 with SMTP id 7so5207514vws.35
        for <java-user@lucene.apache.org>; Wed, 21 Jul 2010 05:37:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=MAv+wa+C7N8iwp8Pwh4QxQbsxgsL5FlCHKyFSgTRj2g=;
        b=nVjfG9qaW6C8Wdz8RV0N7vRoff3LMVqMEO3qU8EkpQ2C9wOnbbcfQWBqo73s6meWUh
         x+8yhaXDnFf1RS6w8aD1MtZQaTcp/qCRYVGJTJtGBa6uU/E6VBZxhEdp15gcb3MjqASv
         aXpJwY5qTSqwjhULV9jGQrkDzoDbILHbdWhk0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=s7sgkCRE61NOG82MhgnfaeHB/l9yLOOOc5sIy1iMjtceNh+38LaXIKA+hp4PbguVsr
         NS4lw2RF9f+b2xqXBYwmbCu1ZehoLqZ4R/f6VeP4p6ThJV/QyJUh9zwklTq+6GyblPQq
         DqAV/RtaUlYNaQ+hbh2tn83Y/kaxDmpUDUs00=
MIME-Version: 1.0
Received: by 10.220.98.140 with SMTP id q12mr43098vcn.128.1279715826336; Wed, 
	21 Jul 2010 05:37:06 -0700 (PDT)
Received: by 10.220.83.149 with HTTP; Wed, 21 Jul 2010 05:37:06 -0700 (PDT)
Date: Wed, 21 Jul 2010 08:37:06 -0400
Message-ID: <AANLkTil7NfUPftjBapfn9qoWbJNtun3FhGG-IXBKq9lk@mail.gmail.com>
Subject: on-the-fly "filters" from docID lists
From: Martin J <martinj.engine@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64607c23e039f048be50f1f
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e64607c23e039f048be50f1f
Content-Type: text/plain; charset=ISO-8859-1

Hello, we are trying to implement a query type for Lucene (with eventual
target being Solr) where the query string passed in needs to be "filtered"
through a large list of document IDs per user. We can't store the user ID
information in the lucene index per document so we were planning to pull the
list of documents owned by user X from a key-value store at query time and
then build some sort of filter in memory before doing the Lucene/Solr query.
For example:

content:"cars" user_id:X567

would first pull the list of docIDs that user_id:X567 has "access" to from a
keyvalue store and then we'd query the main index with content:"cars" but
only allow the docIDs that came back to be part of the response. The list of
docIDs can near the hundreds of thousands.

What should I be looking at to implement such a feature?

Thank you
Martin

--0016e64607c23e039f048be50f1f--

From java-user-return-46762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 21 21:27:33 2010
Return-Path: <java-user-return-46762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99477 invoked from network); 21 Jul 2010 21:27:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 21 Jul 2010 21:27:33 -0000
Received: (qmail 85064 invoked by uid 500); 21 Jul 2010 21:27:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84997 invoked by uid 500); 21 Jul 2010 21:27:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84986 invoked by uid 99); 21 Jul 2010 21:27:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 21:27:29 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mailer.thomas@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Jul 2010 21:27:20 +0000
Received: by eyg5 with SMTP id 5so2789595eyg.35
        for <java-user@lucene.apache.org>; Wed, 21 Jul 2010 14:26:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=CpZ6NAdC24Dg2GydQtGjoa1AcC4HWogEWj0sNL1hjb8=;
        b=kkibKcCIWkonOk3li1wARRBWAjRS8mi2YWaaOcHu+UMMqDcin6TfZToYQCQjCwjKOE
         2/uDVcUyOYrHsxeNc5C5oVwE3p90X2y5ePlV+ookznbh/mGioGw5ssOl97uqO/0s66yD
         JPp9ExvKyqBUMiGSowJw458bTS7lx5u3MYfJU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=CFxzolXc1K/PNzkbVsEQNNy8enRDReOwkuyUI5FKcRV1YMxmcFaRKdTY+LA9xufIc/
         gM4kC8bIR5Vk4kSA452gaXulK236wun7bHKvjeU7kPULZKJ2u/zvsOcRSygZY9KoZUBt
         1PevhxXBEfEjPwH8zqzfo18CvnyDRXhBMaLJQ=
Received: by 10.213.77.193 with SMTP id h1mr6432013ebk.99.1279747571506;
        Wed, 21 Jul 2010 14:26:11 -0700 (PDT)
Received: from [192.168.2.102] (dslb-188-102-022-071.pools.arcor-ip.net [188.102.22.71])
        by mx.google.com with ESMTPS id z55sm54080593eeh.3.2010.07.21.14.25.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 21 Jul 2010 14:26:11 -0700 (PDT)
Message-ID: <4C4765E3.5080702@gmail.com>
Date: Wed, 21 Jul 2010 23:25:55 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Different ranking results
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I just performed two queries which, in my opinion, should lead to the 
same document rankings. However, the document ranking differ between 
these two queries. For better understanding I prepared  minimal examples 
for both queries. In my understanding both queries perform the same 
task. Namely search for "lucene" in two different fields.

Maybe someone can explain me my misunderstanding?


String[] fields = {"TITLE", "BOOK"};
MultiFieldQueryParser parser = new 
MultiFieldQueryParser(Version.LUCENE_29, fields, new 
StandardAnalyzer(Version.LUCENE_29));

1.)
Query q = parser.parse("lucene");

2.)
Query q = parser.parse(TITLE:lucene OR BOOK:lucene);

Regards,
     philippe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 08:03:17 2010
Return-Path: <java-user-return-46763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80804 invoked from network); 22 Jul 2010 08:03:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 08:03:17 -0000
Received: (qmail 22727 invoked by uid 500); 22 Jul 2010 08:03:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22439 invoked by uid 500); 22 Jul 2010 08:03:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22431 invoked by uid 99); 22 Jul 2010 08:03:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 08:03:11 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 08:03:04 +0000
Received: by bwz2 with SMTP id 2so1045429bwz.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 01:02:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=cenYVjXpD/lgQQJrzjjOgm8L2kn/MXGuezLGyhKQlL4=;
        b=ZjhMkI1ERYhREtTySCAIt9oJmK8sJ1XTsx3ZbHS2bW+hBMDQvqvuJxPM7Xmi6QIurD
         XjsxkeJ0LlwkS6iyWnB+XlzYUwpE5a0sDgCDs17t7WrcKr9Q6kCKJQNVwUEn6lgJJCnk
         NJAYSNbeCDktEBMEoZJWZm3uHLC2ZqkxXmXEM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Rl3bdExZmcvsD/VxIza68MirqeZbL6de18PxUh+G2LCBi3IEc3dAmU6u6xx78ZZH8d
         KrWDL4bFCLNO5ACQDPx0kvdSNyBkOFrgkTDgZC62TNCnXGr+TOIv/6wmQc/N0kudf21G
         BJlTLLgpJa1zAHSa/ATWh3ooL+N/lN9oy8zwU=
Received: by 10.204.126.29 with SMTP id a29mr1176523bks.59.1279785763206; Thu, 
	22 Jul 2010 01:02:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Thu, 22 Jul 2010 01:02:23 -0700 (PDT)
In-Reply-To: <4C4765E3.5080702@gmail.com>
References: <4C4765E3.5080702@gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 22 Jul 2010 09:02:23 +0100
Message-ID: <AANLkTinidqFV-e_SgQApHLm5-dj_vxRzDpnGssHczpZ-@mail.gmail.com>
Subject: Re: Different ranking results
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

They look the same to me too.

What does q.getClass().getName() say in each case? q.toString()?
searcher.explain(q, n)?

What version of lucene?


--
Ian.




On Wed, Jul 21, 2010 at 10:25 PM, Philippe <mailer.thomas@gmail.com> wrote:
> Hi,
>
> I just performed two queries which, in my opinion, should lead to the sam=
e
> document rankings. However, the document ranking differ between these two
> queries. For better understanding I prepared =A0minimal examples for both
> queries. In my understanding both queries perform the same task. Namely
> search for "lucene" in two different fields.
>
> Maybe someone can explain me my misunderstanding?
>
>
> String[] fields =3D {"TITLE", "BOOK"};
> MultiFieldQueryParser parser =3D new MultiFieldQueryParser(Version.LUCENE=
_29,
> fields, new StandardAnalyzer(Version.LUCENE_29));
>
> 1.)
> Query q =3D parser.parse("lucene");
>
> 2.)
> Query q =3D parser.parse(TITLE:lucene OR BOOK:lucene);
>
> Regards,
> =A0 =A0philippe
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 09:20:50 2010
Return-Path: <java-user-return-46764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4115 invoked from network); 22 Jul 2010 09:20:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 09:20:50 -0000
Received: (qmail 30832 invoked by uid 500); 22 Jul 2010 09:20:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30534 invoked by uid 500); 22 Jul 2010 09:20:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30526 invoked by uid 99); 22 Jul 2010 09:20:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 09:20:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 09:20:36 +0000
Received: by wwa36 with SMTP id 36so1514531wwa.5
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 02:20:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.153.208 with SMTP id l16mr1582590wbw.57.1279790416301; 
	Thu, 22 Jul 2010 02:20:16 -0700 (PDT)
Received: by 10.216.13.142 with HTTP; Thu, 22 Jul 2010 02:20:15 -0700 (PDT)
In-Reply-To: <AANLkTil7NfUPftjBapfn9qoWbJNtun3FhGG-IXBKq9lk@mail.gmail.com>
References: <AANLkTil7NfUPftjBapfn9qoWbJNtun3FhGG-IXBKq9lk@mail.gmail.com>
Date: Thu, 22 Jul 2010 05:20:15 -0400
Message-ID: <AANLkTinGLNQVUfu2qZa2A_ySXpbRZGEgM44QzccmAqQm@mail.gmail.com>
Subject: Re: on-the-fly "filters" from docID lists
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

It sounds like you should implement a custom Filter?

Its getDocIdSet would consult your foreign key-value store and iterate
through the allowed docIDs, per segment.

Mike

On Wed, Jul 21, 2010 at 8:37 AM, Martin J <martinj.engine@gmail.com> wrote:
> Hello, we are trying to implement a query type for Lucene (with eventual
> target being Solr) where the query string passed in needs to be "filtered"
> through a large list of document IDs per user. We can't store the user ID
> information in the lucene index per document so we were planning to pull the
> list of documents owned by user X from a key-value store at query time and
> then build some sort of filter in memory before doing the Lucene/Solr query.
> For example:
>
> content:"cars" user_id:X567
>
> would first pull the list of docIDs that user_id:X567 has "access" to from a
> keyvalue store and then we'd query the main index with content:"cars" but
> only allow the docIDs that came back to be part of the response. The list of
> docIDs can near the hundreds of thousands.
>
> What should I be looking at to implement such a feature?
>
> Thank you
> Martin
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 09:25:14 2010
Return-Path: <java-user-return-46765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5042 invoked from network); 22 Jul 2010 09:25:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 09:25:14 -0000
Received: (qmail 35016 invoked by uid 500); 22 Jul 2010 09:25:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34754 invoked by uid 500); 22 Jul 2010 09:25:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34628 invoked by uid 99); 22 Jul 2010 09:25:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 09:25:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mailer.thomas@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 09:24:59 +0000
Received: by fxm16 with SMTP id 16so5462631fxm.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 02:23:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=LubUGH0pK6+2BNIRMV25XvN2WqPsV8BfAfoaKVYpsoM=;
        b=QjllKXdLm8fb7cqbjOIogl9/xOnBwBD4LgLjTY3JdVREEUJiiX+Bn/eSStJbGgjem4
         uJNPgNZORC4Ye1/kfTZl+RreApdrnV13Psu/zaD+j3xAwjSUbzUkIYBnMSLqTU8mpmCF
         Y3H5XQkV1F0V1EcVSI1qnxOlDx/U0+NfNAoHo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=SttosAMAT4tWbAyoO3txf7xAHRBVmApFXNziHwNJBjqM4ZRNOXhrX/SltmeD7UNJnD
         XIsRFIP9xC7CzDBKgOHj4nqbHj30YSNSYK1c4mWeFkqfESMXRcF7JGzzHpxePQHPRZWo
         jk9Hs/iBLp2ZEVjHFsyO7GRAdsobZC0aiUk30=
Received: by 10.223.119.203 with SMTP id a11mr1550091far.42.1279790618622;
        Thu, 22 Jul 2010 02:23:38 -0700 (PDT)
Received: from [192.168.24.135] (funny.informatik.hu-berlin.de [141.20.24.156])
        by mx.google.com with ESMTPS id w11sm3245293fao.13.2010.07.22.02.23.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 22 Jul 2010 02:23:38 -0700 (PDT)
Message-ID: <4C480E18.3060407@gmail.com>
Date: Thu, 22 Jul 2010 11:23:36 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Different ranking results
References: <4C4765E3.5080702@gmail.com> <AANLkTinidqFV-e_SgQApHLm5-dj_vxRzDpnGssHczpZ-@mail.gmail.com>
In-Reply-To: <AANLkTinidqFV-e_SgQApHLm5-dj_vxRzDpnGssHczpZ-@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Ian,

I'm using Version 2.93 of lucene.

q.getClass() and q.toString() are exactly equal:
org.apache.lucene.search.BooleanQuery
TITLE:672 BOOK:672

However, the results for searcher.explain(q,n) significantly differ. It 
seems to me that  "Query q = parser.parse("672");" searches only one the 
Book field, whereas  "Query q = parser.parse("TITLE:672 BOOK:672");" 
searches on both fields. Do you have a explanation for this behaviour? I 
only observed this problem for this field...

I appended the result of both explain strings below:

"Query q = parser.parse("672");"
9.987344E10 = (MATCH) sum of:
   9.987344E10 = (MATCH) weight(BOOK:672 in 7078), product of:
     0.6583703 = queryWeight(BOOK:672), product of:
       6.085349 = idf(docFreq=109, maxDocs=17780)
       0.10818941 = queryNorm
     1.51697965E11 = (MATCH) fieldWeight(BOOK:672 in 7078), product of:
       3.3166249 = tf(termFreq(BOOK:672)=11)
       6.085349 = idf(docFreq=109, maxDocs=17780)
       7.5161928E9 = fieldNorm(field=BOOK, doc=7078)


"Query q = parser.parse("TITLE:672 BOOK:672");"
9.5225594E10 = (MATCH) sum of:
   9.5225594E10 = (MATCH) weight(BOOK:672 in 4979), product of:
     0.6583703 = queryWeight(BOOK:672), product of:
       6.085349 = idf(docFreq=109, maxDocs=17780)
       0.10818941 = queryNorm
     1.44638345E11 = (MATCH) fieldWeight(BOOK:672 in 4979), product of:
       3.1622777 = tf(termFreq(BOOK:672)=10)
       6.085349 = idf(docFreq=109, maxDocs=17780)
       7.5161928E9 = fieldNorm(field=BOOK, doc=4979)
   52.366344 = (MATCH) weight(TITLE:672 in 4979), product of:
     0.7526941 = queryWeight(TITLE:672), product of:
       6.957188 = idf(docFreq=45, maxDocs=17780)
       0.10818941 = queryNorm
     69.571884 = (MATCH) fieldWeight(TITLE:672 in 4979), product of:
       1.0 = tf(termFreq(TITLE:672)=1)
       6.957188 = idf(docFreq=45, maxDocs=17780)
       10.0 = fieldNorm(field=TITLE, doc=4979)

Cheers,
     P.
Am 22.07.2010 10:02, schrieb Ian Lea:
> They look the same to me too.
>
> What does q.getClass().getName() say in each case? q.toString()?
> searcher.explain(q, n)?
>
> What version of lucene?
>
>
> --
> Ian.
>
>
>
>
> On Wed, Jul 21, 2010 at 10:25 PM, Philippe<mailer.thomas@gmail.com>  wrote:
>    
>> Hi,
>>
>> I just performed two queries which, in my opinion, should lead to the same
>> document rankings. However, the document ranking differ between these two
>> queries. For better understanding I prepared  minimal examples for both
>> queries. In my understanding both queries perform the same task. Namely
>> search for "lucene" in two different fields.
>>
>> Maybe someone can explain me my misunderstanding?
>>
>>
>> String[] fields = {"TITLE", "BOOK"};
>> MultiFieldQueryParser parser = new MultiFieldQueryParser(Version.LUCENE_29,
>> fields, new StandardAnalyzer(Version.LUCENE_29));
>>
>> 1.)
>> Query q = parser.parse("lucene");
>>
>> 2.)
>> Query q = parser.parse(TITLE:lucene OR BOOK:lucene);
>>
>> Regards,
>>     philippe
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 10:35:06 2010
Return-Path: <java-user-return-46766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21886 invoked from network); 22 Jul 2010 10:35:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 10:35:06 -0000
Received: (qmail 98994 invoked by uid 500); 22 Jul 2010 10:35:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98567 invoked by uid 500); 22 Jul 2010 10:35:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98557 invoked by uid 99); 22 Jul 2010 10:35:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 10:35:00 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 10:34:52 +0000
Received: by bwz2 with SMTP id 2so1157902bwz.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 03:34:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=EiqUTwvu7PoZEuin0H5lb9LP7porgPkJ0/xTwqOf5Vw=;
        b=gapgvUhEz8knz8dScAkWVdPVo1Dd7fRjh7cLH3Pi2fMVnUtJ08hVqOEHC+Spno487K
         jJHQGFa8m/nHv3u0Zj23vO4/QgFhHJy5TWouZ/D/2XTcKF2HOGNfolH8pwIZX0MNjsEN
         NUUu+uU/JtS0tYLnHA+yTgd6Yn1yEuIeMSdpg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=oC00dlnFiWA3VYACJOEpHm2371XXicYU2Qsf7mMewARDGLw4+XBtfnmfXU3D9Ef5UK
         2/gJDOFoSw2o7zUQKqm8ObfjgzDehOwmjvCU9JoVO66Pxe6g8MH1BFOA1228yaGoIdhy
         kt2XcOniYYws2u8DpOFrjYuwrmZe3tvr3LVIo=
Received: by 10.204.162.204 with SMTP id w12mr1228054bkx.135.1279794871822; 
	Thu, 22 Jul 2010 03:34:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Thu, 22 Jul 2010 03:34:11 -0700 (PDT)
In-Reply-To: <4C480E18.3060407@gmail.com>
References: <4C4765E3.5080702@gmail.com> <AANLkTinidqFV-e_SgQApHLm5-dj_vxRzDpnGssHczpZ-@mail.gmail.com> 
	<4C480E18.3060407@gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 22 Jul 2010 11:34:11 +0100
Message-ID: <AANLkTimGXbVtB86Hn7el3p5g9ONZgDFw6FoB6q4h6soc@mail.gmail.com>
Subject: Re: Different ranking results
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

No, I don't have an explanation.  Perhaps a minimal self-contained
program or test case would help.


--
Ian.


On Thu, Jul 22, 2010 at 10:23 AM, Philippe <mailer.thomas@gmail.com> wrote:
> Hi Ian,
>
> I'm using Version 2.93 of lucene.
>
> q.getClass() and q.toString() are exactly equal:
> org.apache.lucene.search.BooleanQuery
> TITLE:672 BOOK:672
>
> However, the results for searcher.explain(q,n) significantly differ. It
> seems to me that =A0"Query q =3D parser.parse("672");" searches only one =
the
> Book field, whereas =A0"Query q =3D parser.parse("TITLE:672 BOOK:672");"
> searches on both fields. Do you have a explanation for this behaviour? I
> only observed this problem for this field...
>
> I appended the result of both explain strings below:
>
> "Query q =3D parser.parse("672");"
> 9.987344E10 =3D (MATCH) sum of:
> =A09.987344E10 =3D (MATCH) weight(BOOK:672 in 7078), product of:
> =A0 =A00.6583703 =3D queryWeight(BOOK:672), product of:
> =A0 =A0 =A06.085349 =3D idf(docFreq=3D109, maxDocs=3D17780)
> =A0 =A0 =A00.10818941 =3D queryNorm
> =A0 =A01.51697965E11 =3D (MATCH) fieldWeight(BOOK:672 in 7078), product o=
f:
> =A0 =A0 =A03.3166249 =3D tf(termFreq(BOOK:672)=3D11)
> =A0 =A0 =A06.085349 =3D idf(docFreq=3D109, maxDocs=3D17780)
> =A0 =A0 =A07.5161928E9 =3D fieldNorm(field=3DBOOK, doc=3D7078)
>
>
> "Query q =3D parser.parse("TITLE:672 BOOK:672");"
> 9.5225594E10 =3D (MATCH) sum of:
> =A09.5225594E10 =3D (MATCH) weight(BOOK:672 in 4979), product of:
> =A0 =A00.6583703 =3D queryWeight(BOOK:672), product of:
> =A0 =A0 =A06.085349 =3D idf(docFreq=3D109, maxDocs=3D17780)
> =A0 =A0 =A00.10818941 =3D queryNorm
> =A0 =A01.44638345E11 =3D (MATCH) fieldWeight(BOOK:672 in 4979), product o=
f:
> =A0 =A0 =A03.1622777 =3D tf(termFreq(BOOK:672)=3D10)
> =A0 =A0 =A06.085349 =3D idf(docFreq=3D109, maxDocs=3D17780)
> =A0 =A0 =A07.5161928E9 =3D fieldNorm(field=3DBOOK, doc=3D4979)
> =A052.366344 =3D (MATCH) weight(TITLE:672 in 4979), product of:
> =A0 =A00.7526941 =3D queryWeight(TITLE:672), product of:
> =A0 =A0 =A06.957188 =3D idf(docFreq=3D45, maxDocs=3D17780)
> =A0 =A0 =A00.10818941 =3D queryNorm
> =A0 =A069.571884 =3D (MATCH) fieldWeight(TITLE:672 in 4979), product of:
> =A0 =A0 =A01.0 =3D tf(termFreq(TITLE:672)=3D1)
> =A0 =A0 =A06.957188 =3D idf(docFreq=3D45, maxDocs=3D17780)
> =A0 =A0 =A010.0 =3D fieldNorm(field=3DTITLE, doc=3D4979)
>
> Cheers,
> =A0 =A0P.
> Am 22.07.2010 10:02, schrieb Ian Lea:
>>
>> They look the same to me too.
>>
>> What does q.getClass().getName() say in each case? q.toString()?
>> searcher.explain(q, n)?
>>
>> What version of lucene?
>>
>>
>> --
>> Ian.
>>
>>
>>
>>
>> On Wed, Jul 21, 2010 at 10:25 PM, Philippe<mailer.thomas@gmail.com>
>> =A0wrote:
>>
>>>
>>> Hi,
>>>
>>> I just performed two queries which, in my opinion, should lead to the
>>> same
>>> document rankings. However, the document ranking differ between these t=
wo
>>> queries. For better understanding I prepared =A0minimal examples for bo=
th
>>> queries. In my understanding both queries perform the same task. Namely
>>> search for "lucene" in two different fields.
>>>
>>> Maybe someone can explain me my misunderstanding?
>>>
>>>
>>> String[] fields =3D {"TITLE", "BOOK"};
>>> MultiFieldQueryParser parser =3D new
>>> MultiFieldQueryParser(Version.LUCENE_29,
>>> fields, new StandardAnalyzer(Version.LUCENE_29));
>>>
>>> 1.)
>>> Query q =3D parser.parse("lucene");
>>>
>>> 2.)
>>> Query q =3D parser.parse(TITLE:lucene OR BOOK:lucene);
>>>
>>> Regards,
>>> =A0 =A0philippe
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 11:56:23 2010
Return-Path: <java-user-return-46767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46242 invoked from network); 22 Jul 2010 11:56:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 11:56:22 -0000
Received: (qmail 79067 invoked by uid 500); 22 Jul 2010 11:56:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78795 invoked by uid 500); 22 Jul 2010 11:56:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78784 invoked by uid 99); 22 Jul 2010 11:56:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 11:56:14 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jan.kurella@nokia.com designates 192.100.122.233 as permitted sender)
Received: from [192.100.122.233] (HELO mgw-mx06.nokia.com) (192.100.122.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 11:56:04 +0000
Received: from esebh105.NOE.Nokia.com (esebh105.ntc.nokia.com [172.21.138.211])
	by mgw-mx06.nokia.com (Switch-3.3.3/Switch-3.3.3) with ESMTP id o6MBtc2G017823
	for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 14:55:42 +0300
Received: from vaebh102.NOE.Nokia.com ([10.160.244.23]) by esebh105.NOE.Nokia.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 22 Jul 2010 14:55:39 +0300
Received: from smtp.mgd.nokia.com ([65.54.30.5]) by vaebh102.NOE.Nokia.com over TLS secured channel with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 22 Jul 2010 14:55:34 +0300
Received: from NOK-EUMSG-04.mgdnok.nokia.com ([65.54.30.89]) by
 nok-am1mhub-01.mgdnok.nokia.com ([65.54.30.5]) with mapi; Thu, 22 Jul 2010
 13:55:34 +0200
From: <jan.kurella@nokia.com>
To: <java-user@lucene.apache.org>
Date: Thu, 22 Jul 2010 13:55:32 +0200
Subject: Holding and changing index wide information
Thread-Topic: Holding and changing index wide information
Thread-Index: AcspG4wMZiiQpZFYQ4m4b/3tqBzRbAAeNW3g
Message-ID: <D0684B316F54B2428827C4D51A208B254EDC150901@NOK-EUMSG-04.mgdnok.nokia.com>
References: <4C4765E3.5080702@gmail.com>
In-Reply-To: <4C4765E3.5080702@gmail.com>
Accept-Language: de-DE, en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginalArrivalTime: 22 Jul 2010 11:55:34.0527 (UTC) FILETIME=[CAD868F0:01CB2994]
X-Nokia-AV: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

SGksDQoNCldoZW4gdXNpbmcgaW5jcmVtZW50YWwgdXBkYXRpbmcgdmlhIFNvbHIsIHdlIHdhbnQg
dG8ga25vdywgd2hpY2ggdXBkYXRlIGlzIGluIHRoZSBjdXJyZW50IGluZGV4LiBFYWNoIHVwZGF0
ZSBoYXMgYSBudW1iZXIuDQpIb3cgY2FuIHdlIHN0b3JlL2NoYW5nZS9yZXRyaWV2ZSB0aGlzIG51
bWJlciB3aXRoIHRoZSBpbmRleC4gV2Ugd2FudCB0byBzdG9yZSBpdCBpbiB0aGUgaW5kZXggdG8g
cmVwbGljYXRlIGl0IHRvIGFueSBzbGF2ZXMgYXMgd2VsbC4NCg0KU28gYmFzaWNhbGx5IGNhbiBJ
IHN0b3JlL2NoYW5nZS9yZXRyaWV2ZSBhIG51bWJlciBpbmRleCB3aWRlIGluIGx1Y2VuL1NvbHI/
DQoNCkphbg0K


From java-user-return-46768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 12:21:22 2010
Return-Path: <java-user-return-46768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58379 invoked from network); 22 Jul 2010 12:21:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 12:21:22 -0000
Received: (qmail 18373 invoked by uid 500); 22 Jul 2010 12:21:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17907 invoked by uid 500); 22 Jul 2010 12:21:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17893 invoked by uid 99); 22 Jul 2010 12:21:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 12:21:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mailer.thomas@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 12:21:04 +0000
Received: by fxm16 with SMTP id 16so5587156fxm.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 05:20:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=w0BD1muk1E/Fua7TDF3A+sq5AC1Gug69fCyVt07Ries=;
        b=xrd7DwepnG4JhaPQg0B7p8ibLNSBzxXQrdM08FaVVn7nriXfYlkW21ji6M0AjYGWM4
         rjpcs7da/d6jjw5unPwXBCqadE+k2VUVGI42PZOkls+jiu2RwJJULOxrjxLwRTigqzoo
         n1527R/58AGBxOggrxjiw0q61qhVGnuXMkqZ0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=g/aSgTF7UqlFoCzIvKlIilfhZnfSjQg+gqOsmyXiAVqJtmAmDiNu6puozescZwJeWP
         IkkO/7FoS0uXrpFdAeL9KmrMXJjebMRO50CgsGanF8EoaKtRcz1RferetnUcM8awEfa0
         C1nOQiVwnJtBJROoYImSKAakmC8VH+HVoIzcU=
Received: by 10.223.122.147 with SMTP id l19mr1720640far.83.1279801243983;
        Thu, 22 Jul 2010 05:20:43 -0700 (PDT)
Received: from [192.168.24.135] (funny.informatik.hu-berlin.de [141.20.24.156])
        by mx.google.com with ESMTPS id e20sm2728189fak.23.2010.07.22.05.20.41
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 22 Jul 2010 05:20:43 -0700 (PDT)
Message-ID: <4C483798.7040600@gmail.com>
Date: Thu, 22 Jul 2010 14:20:40 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Different ranking results
References: <4C4765E3.5080702@gmail.com> <AANLkTinidqFV-e_SgQApHLm5-dj_vxRzDpnGssHczpZ-@mail.gmail.com> 	<4C480E18.3060407@gmail.com> <AANLkTimGXbVtB86Hn7el3p5g9ONZgDFw6FoB6q4h6soc@mail.gmail.com>
In-Reply-To: <AANLkTimGXbVtB86Hn7el3p5g9ONZgDFw6FoB6q4h6soc@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Well,

that's difficult at the moment as I can also just reproduce this error 
for some few cases. But I will try to generate such an example..

Cheers,
     Philippe

Am 22.07.2010 12:34, schrieb Ian Lea:
> No, I don't have an explanation.  Perhaps a minimal self-contained
> program or test case would help.
>
>
> --
> Ian.
>
>
> On Thu, Jul 22, 2010 at 10:23 AM, Philippe<mailer.thomas@gmail.com>  wrote:
>    
>> Hi Ian,
>>
>> I'm using Version 2.93 of lucene.
>>
>> q.getClass() and q.toString() are exactly equal:
>> org.apache.lucene.search.BooleanQuery
>> TITLE:672 BOOK:672
>>
>> However, the results for searcher.explain(q,n) significantly differ. It
>> seems to me that  "Query q = parser.parse("672");" searches only one the
>> Book field, whereas  "Query q = parser.parse("TITLE:672 BOOK:672");"
>> searches on both fields. Do you have a explanation for this behaviour? I
>> only observed this problem for this field...
>>
>> I appended the result of both explain strings below:
>>
>> "Query q = parser.parse("672");"
>> 9.987344E10 = (MATCH) sum of:
>>   9.987344E10 = (MATCH) weight(BOOK:672 in 7078), product of:
>>     0.6583703 = queryWeight(BOOK:672), product of:
>>       6.085349 = idf(docFreq=109, maxDocs=17780)
>>       0.10818941 = queryNorm
>>     1.51697965E11 = (MATCH) fieldWeight(BOOK:672 in 7078), product of:
>>       3.3166249 = tf(termFreq(BOOK:672)=11)
>>       6.085349 = idf(docFreq=109, maxDocs=17780)
>>       7.5161928E9 = fieldNorm(field=BOOK, doc=7078)
>>
>>
>> "Query q = parser.parse("TITLE:672 BOOK:672");"
>> 9.5225594E10 = (MATCH) sum of:
>>   9.5225594E10 = (MATCH) weight(BOOK:672 in 4979), product of:
>>     0.6583703 = queryWeight(BOOK:672), product of:
>>       6.085349 = idf(docFreq=109, maxDocs=17780)
>>       0.10818941 = queryNorm
>>     1.44638345E11 = (MATCH) fieldWeight(BOOK:672 in 4979), product of:
>>       3.1622777 = tf(termFreq(BOOK:672)=10)
>>       6.085349 = idf(docFreq=109, maxDocs=17780)
>>       7.5161928E9 = fieldNorm(field=BOOK, doc=4979)
>>   52.366344 = (MATCH) weight(TITLE:672 in 4979), product of:
>>     0.7526941 = queryWeight(TITLE:672), product of:
>>       6.957188 = idf(docFreq=45, maxDocs=17780)
>>       0.10818941 = queryNorm
>>     69.571884 = (MATCH) fieldWeight(TITLE:672 in 4979), product of:
>>       1.0 = tf(termFreq(TITLE:672)=1)
>>       6.957188 = idf(docFreq=45, maxDocs=17780)
>>       10.0 = fieldNorm(field=TITLE, doc=4979)
>>
>> Cheers,
>>     P.
>> Am 22.07.2010 10:02, schrieb Ian Lea:
>>      
>>> They look the same to me too.
>>>
>>> What does q.getClass().getName() say in each case? q.toString()?
>>> searcher.explain(q, n)?
>>>
>>> What version of lucene?
>>>
>>>
>>> --
>>> Ian.
>>>
>>>
>>>
>>>
>>> On Wed, Jul 21, 2010 at 10:25 PM, Philippe<mailer.thomas@gmail.com>
>>>   wrote:
>>>
>>>        
>>>> Hi,
>>>>
>>>> I just performed two queries which, in my opinion, should lead to the
>>>> same
>>>> document rankings. However, the document ranking differ between these two
>>>> queries. For better understanding I prepared  minimal examples for both
>>>> queries. In my understanding both queries perform the same task. Namely
>>>> search for "lucene" in two different fields.
>>>>
>>>> Maybe someone can explain me my misunderstanding?
>>>>
>>>>
>>>> String[] fields = {"TITLE", "BOOK"};
>>>> MultiFieldQueryParser parser = new
>>>> MultiFieldQueryParser(Version.LUCENE_29,
>>>> fields, new StandardAnalyzer(Version.LUCENE_29));
>>>>
>>>> 1.)
>>>> Query q = parser.parse("lucene");
>>>>
>>>> 2.)
>>>> Query q = parser.parse(TITLE:lucene OR BOOK:lucene);
>>>>
>>>> Regards,
>>>>     philippe
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>          
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>        
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 12:37:44 2010
Return-Path: <java-user-return-46769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70639 invoked from network); 22 Jul 2010 12:37:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 12:37:43 -0000
Received: (qmail 46463 invoked by uid 500); 22 Jul 2010 12:37:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44978 invoked by uid 500); 22 Jul 2010 12:37:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44969 invoked by uid 99); 22 Jul 2010 12:37:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 12:37:35 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 12:37:29 +0000
Received: by bwz2 with SMTP id 2so1249184bwz.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 05:36:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=lz2jGehGw0agTEaHuBnsFJnufXVym+7YEXRqw4kdquQ=;
        b=ZdoqHQpZbbTaOY5IujAFAs1W7pEJSw3C01ssOMg7f8/bwgZeujSQ1CUPuHd4cY45gv
         rUnYQwp1b1PxI6hw9xC3gWh/RTJIVPFfqIB+PPCFCiWJRxsgkltwyUiohxt+2y7UgsNR
         GYHuxVnvEgSePHjYXavPPtJvqtBWaOkAIUFxI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=aXIi0urxQCI6yCT1mLgTA8pdrUHMTJG7uUa/33X22nCXr2gEQ+rxoGiiwJ2T9bFLJN
         kYWELzXqr0KiEc9egDScVUHWUGFbDGsm5VELmdYVCwgLSt3c9OPfpBi1H257qatLcyk/
         8WqQDPaop0FXIEdF1c+nEBXFIHLT7NmP6Ok4E=
Received: by 10.204.46.23 with SMTP id h23mr1391153bkf.75.1279802169417; Thu, 
	22 Jul 2010 05:36:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Thu, 22 Jul 2010 05:35:49 -0700 (PDT)
In-Reply-To: <D0684B316F54B2428827C4D51A208B254EDC150901@NOK-EUMSG-04.mgdnok.nokia.com>
References: <4C4765E3.5080702@gmail.com> <D0684B316F54B2428827C4D51A208B254EDC150901@NOK-EUMSG-04.mgdnok.nokia.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 22 Jul 2010 13:35:49 +0100
Message-ID: <AANLkTinp5cJO2uXSz6yN_6if2GMGdz0zNIBYyayXLSuw@mail.gmail.com>
Subject: Re: Holding and changing index wide information
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Just add/update a dedicated document in the index.

k=updatenumber
v=whatever.

Retrieve it with a search for k:updatenumber, update with
iw.updateDocument(whatever).


--
Ian.


On Thu, Jul 22, 2010 at 12:55 PM,  <jan.kurella@nokia.com> wrote:
> Hi,
>
> When using incremental updating via Solr, we want to know, which update is in the current index. Each update has a number.
> How can we store/change/retrieve this number with the index. We want to store it in the index to replicate it to any slaves as well.
>
> So basically can I store/change/retrieve a number index wide in lucen/Solr?
>
> Jan
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 12:37:49 2010
Return-Path: <java-user-return-46770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70709 invoked from network); 22 Jul 2010 12:37:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 12:37:48 -0000
Received: (qmail 48226 invoked by uid 500); 22 Jul 2010 12:37:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47772 invoked by uid 500); 22 Jul 2010 12:37:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47584 invoked by uid 99); 22 Jul 2010 12:37:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 12:37:42 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of findbestopensource@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 12:37:36 +0000
Received: by pvc21 with SMTP id 21so5975945pvc.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 05:36:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=vlccxaCtczHGDHs0Cr2RTI/wOZu44l/fA8O3ra04wf8=;
        b=Lfb1ilz1qCIHr1Ysa49o008oxrDuixCebBGC12MSmFPAGmH7ebP29yej/NLz5k0aVc
         ONv4fAW4Angpsq/gDOtR9FtLVXKm8qd1otrGBG2lMC29ndHucP0Heo1/IouRT/faR98r
         W1VTb4HSWkXGKZUnpPZnTUwok8/xwiM/LpPUU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=IozRKCj0jVRwqi6SNAZRdKrTB/f5Ga9H6vNnBpCeg+bquNuABHti2TPy1urH3lpGz2
         iykoO2W2z4K/ozQzg4hswEJUfudnQEbHA8uPJyGnOudWOqeY9VYrXj1SlSnvT3siVxkl
         IYxeC2gyNUoxs+4OxoaI7ycg530AyCpM2ut6c=
MIME-Version: 1.0
Received: by 10.142.163.8 with SMTP id l8mr2208941wfe.42.1279802175042; Thu, 
	22 Jul 2010 05:36:15 -0700 (PDT)
Received: by 10.142.84.21 with HTTP; Thu, 22 Jul 2010 05:36:14 -0700 (PDT)
In-Reply-To: <D0684B316F54B2428827C4D51A208B254EDC150901@NOK-EUMSG-04.mgdnok.nokia.com>
References: <4C4765E3.5080702@gmail.com>
	<D0684B316F54B2428827C4D51A208B254EDC150901@NOK-EUMSG-04.mgdnok.nokia.com>
Date: Thu, 22 Jul 2010 18:06:14 +0530
Message-ID: <AANLkTilv3qMKZegy2dG8-NGNfpN6A_a3jD9Nxn-eG_Dh@mail.gmail.com>
Subject: Re: Holding and changing index wide information
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

 Hi Jan,

I think, you require version number for each commit OR updates. Say
you added 10 docs then it is update 1, then modifed or added some more
then it is update 2.. If it is so then my advice would be to have
field named field-type, version-number and version-date-time as part
of the field in the index. You could set this field as like any other
field. Retrieve the record by filtering the value to the field
field-type.

Regards
Aditya
www.findbestopensource.com



On Thu, Jul 22, 2010 at 5:25 PM,  <jan.kurella@nokia.com> wrote:
> Hi,
>
> When using incremental updating via Solr, we want to know, which update is in the current index. Each update has a number.
> How can we store/change/retrieve this number with the index. We want to store it in the index to replicate it to any slaves as well.
>
> So basically can I store/change/retrieve a number index wide in lucen/Solr?
>
> Jan
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 14:54:33 2010
Return-Path: <java-user-return-46771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15441 invoked from network); 22 Jul 2010 14:54:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 14:54:33 -0000
Received: (qmail 30478 invoked by uid 500); 22 Jul 2010 14:54:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29760 invoked by uid 500); 22 Jul 2010 14:54:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29403 invoked by uid 99); 22 Jul 2010 14:54:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 14:54:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yatirb@outbrain.com designates 207.5.74.110 as permitted sender)
Received: from [207.5.74.110] (HELO EXHUB003-3.exch003intermedia.net) (207.5.74.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 14:54:19 +0000
Received: from EXVMBX003-3.exch003intermedia.net ([207.5.74.43]) by
 EXHUB003-3.exch003intermedia.net ([207.5.74.110]) with mapi; Thu, 22 Jul 2010
 07:53:58 -0700
From: Yatir Ben Shlomo <yatirb@outbrain.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 22 Jul 2010 07:54:13 -0700
Subject: Question to the writer of MultiPassIndexSplitter 
Thread-Topic: Question to the writer of MultiPassIndexSplitter 
Thread-Index: AcsprcAAxdQfmIBHRt28vGyPqTCY9w==
Message-ID: <5BC8C17105C4C8428774FB93EC02F118010A376DE6A5@EXVMBX003-3.exch003intermedia.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_5BC8C17105C4C8428774FB93EC02F118010A376DE6A5EXVMBX0033e_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_5BC8C17105C4C8428774FB93EC02F118010A376DE6A5EXVMBX0033e_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
I heard work is being done on re-writing MultiPassIndexSplitter so it will =
be a single pass and work quicker.
I was wondering if this is already done or when is it due ?
Thanks


--_000_5BC8C17105C4C8428774FB93EC02F118010A376DE6A5EXVMBX0033e_--

From java-user-return-46772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 17:10:37 2010
Return-Path: <java-user-return-46772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68136 invoked from network); 22 Jul 2010 17:10:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 17:10:36 -0000
Received: (qmail 46097 invoked by uid 500); 22 Jul 2010 17:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46056 invoked by uid 500); 22 Jul 2010 17:10:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46048 invoked by uid 99); 22 Jul 2010 17:10:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 17:10:33 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.12 as permitted sender)
Received: from [80.91.229.12] (HELO lo.gmane.org) (80.91.229.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 17:10:24 +0000
Received: from list by lo.gmane.org with local (Exim 4.69)
	(envelope-from <jak-lucene-user@m.gmane.org>)
	id 1ObzHX-000554-JA
	for java-user@lucene.apache.org; Thu, 22 Jul 2010 19:10:04 +0200
Received: from poste70.vl.videotron.net ([207.96.202.70])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 19:10:03 +0200
Received: from duperval by poste70.vl.videotron.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 19:10:03 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From: L Duperval <duperval@videotron.com>
Subject: Inserting data from multiple databases in same index
Date: Thu, 22 Jul 2010 17:07:40 +0000 (UTC)
Lines: 18
Message-ID: <loom.20100722T190106-50@post.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@dough.gmane.org
X-Gmane-NNTP-Posting-Host: sea.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 207.96.202.70 (Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.6) Gecko/20100625 Firefox/3.6.6 ( .NET CLR 3.5.30729))
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

We are creating an index containing data from two databases. What we are trying
to achieve is to make our search locate and return information no matter where
the data came from. (BTW, we are using Compass, if it matters any)

My problem is that I am not sure how to create such an index.

Do I index in two passes, one for each database, while adding the content of the
second SELECT to the first one? Or a different approach?

I'm pretty sure this is (pretty much) a FAQ but I didn't find what I was looking
for.

Thanks,

L



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 18:05:13 2010
Return-Path: <java-user-return-46773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91423 invoked from network); 22 Jul 2010 18:05:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 18:05:13 -0000
Received: (qmail 28557 invoked by uid 500); 22 Jul 2010 18:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28483 invoked by uid 500); 22 Jul 2010 18:05:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28463 invoked by uid 99); 22 Jul 2010 18:05:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 18:05:10 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 18:05:02 +0000
Received: by pvc21 with SMTP id 21so6208973pvc.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 11:04:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=Y9yOAoU+c2d04cFsgruioIIz6eE+jlMxz4uRbzBKt/A=;
        b=RK5FryB01beTXe58PkKkqeVRu4j2fgaKynYDZLcSMIBca1C8ai2zC9n2HaxMC0HN4k
         qqUQYRyskhGHKpDY1Qg4gvx5+4SpE1VlTXHx/2Ve1Ck290b38/838Nw8K7P/uBc7KjYw
         FkgzrqxLrgMUOjzhf16Vn2Rx47BXTXux5psSk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=Q3sczAc/RNQM4DBP+faa1Dlf9iTABEB1bYRGXjysNyhQCFLmztk2Dj8a0KZh/oz9KK
         VNvfWqkNB3P/uR8m3A2whrC42IMQcpOcBeuCfSz6/utQRJGm+zMbWbxQGGCTJByxXhVv
         fLWuCmWsdg0F5HoXq3W7bWd0W1Cl5eoC5/cJk=
Received: by 10.114.133.11 with SMTP id g11mr3708277wad.29.1279821880551;
        Thu, 22 Jul 2010 11:04:40 -0700 (PDT)
Received: from [10.1.1.110] (hq.compositesw.com [209.237.61.131])
        by mx.google.com with ESMTPS id n32sm87663462wag.11.2010.07.22.11.04.39
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 22 Jul 2010 11:04:39 -0700 (PDT)
Message-ID: <4C4887C3.50202@gmail.com>
Date: Thu, 22 Jul 2010 11:02:43 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.11) Gecko/20100711 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Inserting data from multiple databases in same index
References: <loom.20100722T190106-50@post.gmane.org>
In-Reply-To: <loom.20100722T190106-50@post.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You can either
1) create one index for each database, and merge the results during search.
2) create the 2 indexes individually and merge them
3) merge records during SQL select.

The 1) approach should be easy to scale linearly as your database grows.
You can even distribute the indexes onto several boxes and achieve 
sharded search.

--
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: 
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer, a shopping comparison site, (anonymous per request) 
got 2.6 Million Euro funding!

On 7/22/2010 10:07 AM, L Duperval wrote:
> Hi,
>
> We are creating an index containing data from two databases. What we are trying
> to achieve is to make our search locate and return information no matter where
> the data came from. (BTW, we are using Compass, if it matters any)
>
> My problem is that I am not sure how to create such an index.
>
> Do I index in two passes, one for each database, while adding the content of the
> second SELECT to the first one? Or a different approach?
>
> I'm pretty sure this is (pretty much) a FAQ but I didn't find what I was looking
> for.
>
> Thanks,
>
> L
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 18:21:16 2010
Return-Path: <java-user-return-46774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98463 invoked from network); 22 Jul 2010 18:21:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 18:21:16 -0000
Received: (qmail 52113 invoked by uid 500); 22 Jul 2010 18:21:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52069 invoked by uid 500); 22 Jul 2010 18:21:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52061 invoked by uid 99); 22 Jul 2010 18:21:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 18:21:13 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of serera@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 18:21:06 +0000
Received: by ewy10 with SMTP id 10so4554152ewy.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 11:20:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=muPp34JXwMAjKKw74ZlO6+gl8wtlbE/kFiIeDktnDCQ=;
        b=vJSm5yTqwlLbmApsKWNkn0VeU25cAlBrz4ONHeczKxh4Z4jZJEaUAm/Pepr6C7rco/
         CMqwqhkGFQXTPvjKud9P+5cWekzpquB8ALPX5h8FZKhCVWepwLHBoLXzjCYXQuUmbnDj
         TC5cnw4sB3ru/AqkAq+RpvPb5p+E15N8AuHKU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=t0pcgzdbI3138Qk7WnH+A3ZH2S4Hy1mRaKNiYtj2tqhKjYthmtyTc0B9AbQtI6vg1M
         2JkSYy7mVjNUK9xTjYHf+0uha37fujtgpmKJiDMs/aDLE9s3C+/iiGLVfOOQEQgcO3aO
         Z4O0ffpm8q7Oosv0wcOuCuOgAmjLV6f3j+zzA=
MIME-Version: 1.0
Received: by 10.213.33.197 with SMTP id i5mr2290715ebd.45.1279822846039; Thu, 
	22 Jul 2010 11:20:46 -0700 (PDT)
Received: by 10.14.48.12 with HTTP; Thu, 22 Jul 2010 11:20:45 -0700 (PDT)
In-Reply-To: <4C449873.80809@code972.com>
References: <4C407A8A.20303@code972.com>
	<AANLkTimsh0ydv0jHsI84aicaK5oW8a6Ms_QFp9fuD6WT@mail.gmail.com>
	<4C41F095.1080706@code972.com>
	<AANLkTikbX7EcTDd-6JC-kieFv5nNcyOvpCUzMT_IqQMP@mail.gmail.com>
	<4C449873.80809@code972.com>
Date: Thu, 22 Jul 2010 21:20:45 +0300
Message-ID: <AANLkTilQ4AvwYL6BdrDte6iBiX42In6GlRKaonvsdgJR@mail.gmail.com>
Subject: Re: Scoring exact matches higher in a stemmed field
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c43ce1d18f7048bfdfa12
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c43ce1d18f7048bfdfa12
Content-Type: text/plain; charset=ISO-8859-1

>
> Ideally, that would be through a class or a function I can override or
> extend
>

How is that different than extending QP?

About the "song of songs" example -- the result you describe is already what
will happen. A document which contains just the word 'song' will score lower
than a document containing "song of songs". Also, what I'd do in such a case
is search for the phrase (in addition to the rest), 'cause documents
containing the word "songs" 100 times will score higher than the single
document that will contain "song of songs" once ...

If you just want a query "abc def" to rank higher if a document contains the
exact words, then I'd go w/ the QP extension approach, or do other
sophistication like searching for 'abc' '\"abc\"' etc. or something like
that. There are many tricks you can do on your end, w/o overriding much in
Lucene. Still, IMO extending QP is the easiest and gives you the control you
need.

Shai

On Mon, Jul 19, 2010 at 9:24 PM, Itamar Syn-Hershko <itamar@code972.com>wrote:

> On 19/7/2010 5:50 PM, Shai Erera wrote:
>
>> If your analyzer outputs b and b$ in the same position, then the below
>> query
>> will already be what the QP output today If you want to incorporate
>> boosting, I can suggest that you extend QP, override newTermQuery for
>> example, and if the term is a stemmed term, then set the query's boost
>> (Query.setBoost) accordingly. Would that work for you?
>>
>>
> I want to avoid overriding the QP, and do this as a pluggable extension.
> What other options do I have other than what you've suggested?
>
> Ideally, that would be through a class or a function I can override or
> extend, so each term hit while searching will be examined. By checking its
> type and text (for suffix), that interface could double its weight (or
> boost). The similarity functions I mentioned could have provided this
> ability (see below). How can this be done without them?
>
>  You'll need to check whether you want to boost terms inside phrases, or
>> entire phrases, and then override more methods from QP. But that approach
>> will get you the native product of the engine, I think.
>>
> Just to make sure we are on the same page here, here's an example (assuming
> the default tf/idf implementation in Lucene).
>
> I want to make sure anyone searching for "song of songs" will find texts
> discussing the biblical book, and have them ranked the highest, instead of
> having short texts containing one word "song" score higher.
>
> So what I do is have my stemming analyzer save the string "song of songs"
> like this, where each parenthesis represents a token position: (song song$)
> (song songs$).
>
> The part I'm missing is how to score terms with suffixes higher. The best
> approach seem to be looking at the term read by IndexReader and boost this
> finding somehow. The assumption is if IndexReader has read the term songs$
> it has been looked for, and therefore this is the exact word that has been
> queried for.
>
> Which is the best Lucene part to hijack for this mission?
>
>  Alternatively, you
>> can set a payload on the stemmed terms and incorporate that into
>> Similarity,
>> but that's more costly.
>>
>>
> I had mentioned Payloads - this will get me exactly what I want but as you
> say are quite costly when used for almost every term in the index. If I
> could replace the suffix with Payloads I would have done this (byte vs.
> byte), but I'm using the suffix for one other thing.
>
>  I don't follow that's been deprecated on Sim that you cannot use anymore?
>> All I see are 3 deprecated static methods which are related to norms ...
>>
>>
> In 2.3.2 there were these functions:
>
>    public float idf(Term term, Searcher searcher)
>
>    public float idf(Collection terms, Searcher searcher)
>
> These have been deprecated somewhere between that version and 2.9.2, and it
> seems like I could have used those for what I'm trying to do.
>
> Thanks,
>
> Itamar.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174c43ce1d18f7048bfdfa12--

From java-user-return-46775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 20:38:10 2010
Return-Path: <java-user-return-46775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56420 invoked from network); 22 Jul 2010 20:38:09 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 20:38:09 -0000
Received: (qmail 57682 invoked by uid 500); 22 Jul 2010 20:38:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57611 invoked by uid 500); 22 Jul 2010 20:38:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57603 invoked by uid 99); 22 Jul 2010 20:38:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 20:38:06 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [141.211.3.201] (HELO itcs-ehub-01.adsroot.itcs.umich.edu) (141.211.3.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 20:38:00 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.232]) by
 itcs-ehub-01.adsroot.itcs.umich.edu ([141.211.3.201]) with mapi; Thu, 22 Jul
 2010 16:37:38 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 22 Jul 2010 16:37:37 -0400
Subject: RE: on-the-fly "filters" from docID lists
Thread-Topic: on-the-fly "filters" from docID lists
Thread-Index: Acspfy4fWj+L/0ZXTJGHrhR2kk/OuwAXT6SA
Message-ID: <A902805D9E8F66428EACF947DDA9840C070734536C@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <AANLkTil7NfUPftjBapfn9qoWbJNtun3FhGG-IXBKq9lk@mail.gmail.com>
 <AANLkTinGLNQVUfu2qZa2A_ySXpbRZGEgM44QzccmAqQm@mail.gmail.com>
In-Reply-To: <AANLkTinGLNQVUfu2qZa2A_ySXpbRZGEgM44QzccmAqQm@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Hi Mike and Martin,

We have a similar use-case.   Is there a scalability/performance issue with=
 the getDocIdSet having to iterate through hundreds of thousands of docIDs?=
=20

Tom Burton-West
http://www.hathitrust.org/blogs/large-scale-search

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Thursday, July 22, 2010 5:20 AM
To: java-user@lucene.apache.org
Subject: Re: on-the-fly "filters" from docID lists

It sounds like you should implement a custom Filter?

Its getDocIdSet would consult your foreign key-value store and iterate
through the allowed docIDs, per segment.

Mike

On Wed, Jul 21, 2010 at 8:37 AM, Martin J <martinj.engine@gmail.com> wrote:
> Hello, we are trying to implement a query type for Lucene (with eventual
> target being Solr) where the query string passed in needs to be "filtered=
"
> through a large list of document IDs per user. We can't store the user ID
> information in the lucene index per document so we were planning to pull =
the
> list of documents owned by user X from a key-value store at query time an=
d
> then build some sort of filter in memory before doing the Lucene/Solr que=
ry.
> For example:
>
> content:"cars" user_id:X567
>
> would first pull the list of docIDs that user_id:X567 has "access" to fro=
m a
> keyvalue store and then we'd query the main index with content:"cars" but
> only allow the docIDs that came back to be part of the response. The list=
 of
> docIDs can near the hundreds of thousands.
>
> What should I be looking at to implement such a feature?
>
> Thank you
> Martin
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 21:45:25 2010
Return-Path: <java-user-return-46776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 774 invoked from network); 22 Jul 2010 21:45:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 21:45:20 -0000
Received: (qmail 83851 invoked by uid 500); 22 Jul 2010 21:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83731 invoked by uid 500); 22 Jul 2010 21:45:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83720 invoked by uid 99); 22 Jul 2010 21:45:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 21:45:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [188.121.53.2] (HELO n1plout04-02.prod.ams1.secureserver.net) (188.121.53.2)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Jul 2010 21:45:10 +0000
Received: (qmail 20983 invoked from network); 22 Jul 2010 21:44:46 -0000
Received: from unknown (109.160.197.232)
  by n1plout04-02.prod.ams1.secureserver.net (188.121.53.2) with ESMTP; 22 Jul 2010 21:44:46 -0000
Message-ID: <4C48BBCC.6070101@code972.com>
Date: Fri, 23 Jul 2010 00:44:44 +0300
From: Itamar Syn-Hershko <itamar@code972.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.11) Gecko/20100711 Lightning/1.0b1 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Scoring exact matches higher in a stemmed field
References: <4C407A8A.20303@code972.com>	<AANLkTimsh0ydv0jHsI84aicaK5oW8a6Ms_QFp9fuD6WT@mail.gmail.com>	<4C41F095.1080706@code972.com>	<AANLkTikbX7EcTDd-6JC-kieFv5nNcyOvpCUzMT_IqQMP@mail.gmail.com>	<4C449873.80809@code972.com> <AANLkTilQ4AvwYL6BdrDte6iBiX42In6GlRKaonvsdgJR@mail.gmail.com>
In-Reply-To: <AANLkTilQ4AvwYL6BdrDte6iBiX42In6GlRKaonvsdgJR@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 22/7/2010 9:20 PM, Shai Erera wrote:
> How is that different than extending QP?
>    
Mainly because the problem I'm having isn't there, and doing it from 
there doesn't feel right, and definitely not like solving the issue. I 
want to explore what other options there are before doing anything, and 
I started this thread because I hit a dead end after seeing Similarity 
can no more be of help.

> About the "song of songs" example -- the result you describe is already what
> will happen. A document which contains just the word 'song' will score lower
> than a document containing "song of songs".
Incorrect, and I have a sample app to show that (this is how I thought 
of this example for the first place).

Since while indexing the 2 words will be saved into index as 1:(song 
song$) 2:(song songs$), short documents with one word "song" will score 
higher than longer documents with "song of songs". This is a product of 
Lucene's default tf/idf implementation which cares about a field's 
length, and at this stage I want to avoid replacing it (with BM25 for 
example).

> Also, what I'd do in such a case
> is search for the phrase (in addition to the rest), 'cause documents
> containing the word "songs" 100 times will score higher than the single
> document that will contain "song of songs" once ...
>    
In one of my applications I am providing an "as typed" capability, which 
does exactly what you are suggesting (looking for the $-ed terms only), 
but I want my original analyzer (the one that also looks for non $-ed 
terms) to do better scoring. Without this the implementation is somewhat 
broken...

> If you just want a query "abc def" to rank higher if a document contains the
> exact words, then I'd go w/ the QP extension approach, or do other
> sophistication like searching for 'abc' '\"abc\"' etc. or something like
> that. There are many tricks you can do on your end, w/o overriding much in
> Lucene. Still, IMO extending QP is the easiest and gives you the control you
> need.
>    
I am overriding stuff in Lucene either way. I also don't want an exact 
match of a phrase to rank higher; I want an original term (saved as-is 
with a $ marker) to score higher than a stemmed / lemmatized one 
(without the marker). Sorry if the thread's title is misleading.

I'd have used payloads if it wasn't costly. So my question is: where do 
I have control over boosting (or scoring), and also have access to the 
term's text?

Thanks,

Itamar.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 22 22:31:26 2010
Return-Path: <java-user-return-46777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32430 invoked from network); 22 Jul 2010 22:31:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 22 Jul 2010 22:31:25 -0000
Received: (qmail 52561 invoked by uid 500); 22 Jul 2010 22:31:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52489 invoked by uid 500); 22 Jul 2010 22:31:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52481 invoked by uid 99); 22 Jul 2010 22:31:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 22:31:23 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of geirgp@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Jul 2010 22:31:16 +0000
Received: by fxm16 with SMTP id 16so6154587fxm.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 15:30:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=sWX73tYbkuTYu5DwuQvcTDGK58AnMgYTmDQMRmg2BBw=;
        b=GIXXL8YXb05oLmqmHV32fCLg8ISCwzxPKTeTytCS2tVPzZYrLEO0i2wdmhc1YVxWty
         eyNRbcEeAsGOAG8Dgy4ZULpGF3Fj4x9wi0pWEhoua3VGmZ8wf9I+4KO7SgqCqQ22y+GY
         5ebUmqj1AL27iVyEqhrKELCHWWiqSF9+fKFag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=vtt4Yk4GroLPkkms25rlrcdbizrXJbk/8D8mXWw6k0Agibul98wiyurv+512dC3Sif
         dmBjHt8zeMqXXsV1D1EgN5pCtpFQXsHwOKj5jOFCFyMMtXKrn0iL01PGRlDfcIzUYZvG
         93NUWW6IGeVLp+fee18cuxIri8iGPaWef/Jqg=
Received: by 10.223.116.6 with SMTP id k6mr2573666faq.49.1279837853170; Thu, 
	22 Jul 2010 15:30:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.29.211 with HTTP; Thu, 22 Jul 2010 15:30:33 -0700 (PDT)
From: Geir Gullestad Pettersen <geirgp@gmail.com>
Date: Fri, 23 Jul 2010 00:30:33 +0200
Message-ID: <AANLkTilQg3ARa8V70eujT1Qk0DbJJJoCFElf_0tCWT5u@mail.gmail.com>
Subject: Using lucene for substring matching
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636eef0649bbbc1048c0178cf

--001636eef0649bbbc1048c0178cf
Content-Type: text/plain; charset=UTF-8

Hi,

I'm about to write an application that does very simple text analysis,
namely dictionary based entity entraction. The alternative is to do in
memory matching with substring:

String text; // could be any size, but normally "news paper length"
List matches;
for( String wordOrPhrase : dictionary) {
   if ( text.substring( wordOrPhrase ) >= 0 ) {
      matches.add( wordOrPhrase );
   }
}

I am concerned the above code will be quite cpu intensitive, it will also be
case sensitive and lot leave any room for fuzzy matching.

I thought this task could also be solved by indexing every bit of text that
is to be analyzed, and then executing a query per dicionary entry:

(pseudo)

lucene.index(text)
List matches
for( String wordOrPhrase : dictionary {
   if( lucene.search( wordOrPharse, text_id) gives hit ) {
      matches.add(wordOrPhrase)
   }
}

I have not used lucene very much, so I don't know if it is a good idea or
not to use lucene for this task at all. Could anyone please share their
thoughs on this?

Thanks,
Geir

--001636eef0649bbbc1048c0178cf--

From java-user-return-46778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 00:56:26 2010
Return-Path: <java-user-return-46778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82537 invoked from network); 23 Jul 2010 00:56:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 00:56:25 -0000
Received: (qmail 20043 invoked by uid 500); 23 Jul 2010 00:56:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19984 invoked by uid 500); 23 Jul 2010 00:56:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19976 invoked by uid 99); 23 Jul 2010 00:56:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 00:56:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 00:56:16 +0000
Received: by wyf23 with SMTP id 23so1592979wyf.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 17:55:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.178.135 with SMTP id f7mr2716902wem.63.1279846555337; Thu, 
	22 Jul 2010 17:55:55 -0700 (PDT)
Received: by 10.216.13.142 with HTTP; Thu, 22 Jul 2010 17:55:55 -0700 (PDT)
In-Reply-To: <A902805D9E8F66428EACF947DDA9840C070734536C@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <AANLkTil7NfUPftjBapfn9qoWbJNtun3FhGG-IXBKq9lk@mail.gmail.com>
	<AANLkTinGLNQVUfu2qZa2A_ySXpbRZGEgM44QzccmAqQm@mail.gmail.com>
	<A902805D9E8F66428EACF947DDA9840C070734536C@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
Date: Thu, 22 Jul 2010 20:55:55 -0400
Message-ID: <AANLkTikVitnuPi_iEJmlLanbR4XapZAo-DTTkrVzEz_G@mail.gmail.com>
Subject: Re: on-the-fly "filters" from docID lists
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Well, Lucene can apply such a filter rather quickly; but, your custom
code first has to build it... so it's really a question of whether
your custom code can build up / iterate the filter scalably.

Mike

On Thu, Jul 22, 2010 at 4:37 PM, Burton-West, Tom <tburtonw@umich.edu> wrot=
e:
> Hi Mike and Martin,
>
> We have a similar use-case. =A0 Is there a scalability/performance issue =
with the getDocIdSet having to iterate through hundreds of thousands of doc=
IDs?
>
> Tom Burton-West
> http://www.hathitrust.org/blogs/large-scale-search
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Thursday, July 22, 2010 5:20 AM
> To: java-user@lucene.apache.org
> Subject: Re: on-the-fly "filters" from docID lists
>
> It sounds like you should implement a custom Filter?
>
> Its getDocIdSet would consult your foreign key-value store and iterate
> through the allowed docIDs, per segment.
>
> Mike
>
> On Wed, Jul 21, 2010 at 8:37 AM, Martin J <martinj.engine@gmail.com> wrot=
e:
>> Hello, we are trying to implement a query type for Lucene (with eventual
>> target being Solr) where the query string passed in needs to be "filtere=
d"
>> through a large list of document IDs per user. We can't store the user I=
D
>> information in the lucene index per document so we were planning to pull=
 the
>> list of documents owned by user X from a key-value store at query time a=
nd
>> then build some sort of filter in memory before doing the Lucene/Solr qu=
ery.
>> For example:
>>
>> content:"cars" user_id:X567
>>
>> would first pull the list of docIDs that user_id:X567 has "access" to fr=
om a
>> keyvalue store and then we'd query the main index with content:"cars" bu=
t
>> only allow the docIDs that came back to be part of the response. The lis=
t of
>> docIDs can near the hundreds of thousands.
>>
>> What should I be looking at to implement such a feature?
>>
>> Thank you
>> Martin
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 02:44:55 2010
Return-Path: <java-user-return-46779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25538 invoked from network); 23 Jul 2010 02:44:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 02:44:55 -0000
Received: (qmail 87614 invoked by uid 500); 23 Jul 2010 02:44:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87342 invoked by uid 500); 23 Jul 2010 02:44:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87330 invoked by uid 99); 23 Jul 2010 02:44:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 02:44:51 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of hota.aida@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 02:44:44 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <hota.aida@gmail.com>)
	id 1Oc8FL-0001D8-L0
	for java-user@lucene.apache.org; Thu, 22 Jul 2010 19:44:23 -0700
Date: Thu, 22 Jul 2010 19:44:23 -0700 (PDT)
From: Xaida <hota.aida@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1279853063645-988836.post@n3.nabble.com>
Subject: Hot to get word importance in lucene index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all!

hmmm, i need to get how important is the word in entire document collection
that is indexed in the lucene index. I need to extract some "representable
words", lets say concepts that are common and can be representable to whole
collection. Or collection "keywords". I did the fulltext indexing and the
only field i am using are text contents, because titles of the documents are
mostly not representable(numbers, codes etc....)

So, if i calculate tfidf, it gives me importance of single term with respect
to single document. But if that word is repeating in the documents, how can
i calculate its total importance within index?

All help appreciated!! Thank you!!!

-- 
View this message in context: http://lucene.472066.n3.nabble.com/Hot-to-get-word-importance-in-lucene-index-tp988836p988836.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 05:46:51 2010
Return-Path: <java-user-return-46780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65551 invoked from network); 23 Jul 2010 05:46:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 05:46:50 -0000
Received: (qmail 78731 invoked by uid 500); 23 Jul 2010 05:46:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78355 invoked by uid 500); 23 Jul 2010 05:46:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78347 invoked by uid 99); 23 Jul 2010 05:46:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 05:46:43 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manjula53@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 05:46:36 +0000
Received: by vws2 with SMTP id 2so1594590vws.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 22:46:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=PKmBPR/pfPJUU2Yx0sm+FxsBzaW4/xFtiP6B0rRJajw=;
        b=uUrKDjU4ch9F9LbKVvfh0UnZwvV/P1OCY04fSHwoD51dGOaUGOx8DN9xutZMJLrJNn
         sbFsUv69xz8rzD3N0CVzFfjcp3gs2Qag3BxqjA7SDowvfa64eUjjE1nZhuGnPXdaA6cU
         /qUe5SbGQvy1HG0oOks+u35mziq5Nq4WZ8eLM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Dj7X1CXNjYxyfPo1eKhGJxB85y8GY9QUaunTDQf0WFf8EFjI/1KLkQ/S7PmYOj8Qxp
         bepyC8tZ5Y7pVYIyj4vybc0poPFBAft0UYbzNx/bpU4I8PWg4FtlQ9oj2Secj0Z8OV6R
         W59qBJIXOldBSIwIrjDkoVQ3eqeGrMZLBLZ/I=
MIME-Version: 1.0
Received: by 10.220.59.202 with SMTP id m10mr1318134vch.193.1279863974000; 
	Thu, 22 Jul 2010 22:46:14 -0700 (PDT)
Received: by 10.220.187.5 with HTTP; Thu, 22 Jul 2010 22:46:13 -0700 (PDT)
Date: Fri, 23 Jul 2010 11:16:13 +0530
Message-ID: <AANLkTimGXPfXIZneSrPnBXqgKHmX3gjNWAy06L3c5rjB@mail.gmail.com>
Subject: Databases
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e88782787fadb048c078d0a

--e0cb4e88782787fadb048c078d0a
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Normally, when I am building my index directory for indexed documents, I
used to keep my indexed files simply in a directory called 'filesToIndex'.
So in this case, I do not use any standar database management system such
as mySql or any other.

1) Will it be possible to use mySql or any other for the purpose of manage
indexed documents in Lucene?

2) Is it necessary to follow such kind of methodology with Lucene?

3) If we do not use such type of database management system, will there be
any disadvantages with large number of indexed files?

Appreciate any reply from you.
Thanks,
Manjula.

--e0cb4e88782787fadb048c078d0a--

From java-user-return-46781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 06:25:23 2010
Return-Path: <java-user-return-46781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77068 invoked from network); 23 Jul 2010 06:25:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 06:25:23 -0000
Received: (qmail 9168 invoked by uid 500); 23 Jul 2010 06:25:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8760 invoked by uid 500); 23 Jul 2010 06:25:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8752 invoked by uid 99); 23 Jul 2010 06:25:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 06:25:16 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 06:25:10 +0000
Received: by wyf23 with SMTP id 23so1765929wyf.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 23:24:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=TguSa5SBmwu1WYRMU11Dks4i0Q+ynHZzvcMLxZwNe9U=;
        b=h1cQA5EOdOhrYTSRRHo/4YF0/uavJa/kp3R51BvOqJyLUFb9D6EpLHowGH/j4kC0Fb
         BAwk0WKYJ2ZFuyO4KDdrRBuQE/iftJQWWMgLHaIdYhQ0trUAlO5JI2q5HyxupfMTuobR
         e87Ux7s7elwBhz3N/aoXZBYpWeUxNtuvj+hUo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ID2UQpqkDnlZ6JIQ74ZIR5LzxsK9VrFSb+5tkbqe0MAhqPoxCt74vP44vLzTR7X/Fs
         q7B3+z4XfHmAFHKgKRYXqqj+fg0vGdqUDqWDnzwGACX+54In82jvDQyz2wXYBmsPIFbF
         k+LRlXUtKvzr7JhFABVQDgN5y5KJupERnDzxY=
Received: by 10.216.62.206 with SMTP id y56mr3000231wec.59.1279866290313; Thu, 
	22 Jul 2010 23:24:50 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.176.149 with HTTP; Thu, 22 Jul 2010 23:24:30 -0700 (PDT)
In-Reply-To: <AANLkTimGXPfXIZneSrPnBXqgKHmX3gjNWAy06L3c5rjB@mail.gmail.com>
References: <AANLkTimGXPfXIZneSrPnBXqgKHmX3gjNWAy06L3c5rjB@mail.gmail.com>
From: Glen Newton <glen.newton@gmail.com>
Date: Fri, 23 Jul 2010 16:24:30 +1000
Message-ID: <AANLkTin7oBJvhfxRFUzvm2BUf6zspr=E+KV25JxmyPHb@mail.gmail.com>
Subject: Re: Databases
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

LuSql is a tool specifically oriented to extracting from JDBC
accessible databases and indexing the contents.
You can find it here:
 http://lab.cisti-icist.nrc-cnrc.gc.ca/cistilabswiki/index.php/LuSql
User manual:
 http://cuvier.cisti.nrc.ca/~gnewton/lusql/v0.9/lusqlManual.pdf.html

A new version is coming out in the next  month, but the existing one
should be fine for what you have described.
If you have any questions, just let me know.

Note that if you are interested in using Solr for your application,
the data import handler (DIH) is a very flexible way of doing what you
are describing, in a Solr context.
http://wiki.apache.org/solr/DataImportHandler

Thanks,
-Glen Newton
LuSql author
http://zzzoot.blogspot.com/

On 23 July 2010 15:46, manjula wijewickrema <manjula53@gmail.com> wrote:
> Hi,
>
> Normally, when I am building my index directory for indexed documents, I
> used to keep my indexed files simply in a directory called 'filesToIndex'.
> So in this case, I do not use any standar database management system such
> as mySql or any other.
>
> 1) Will it be possible to use mySql or any other for the purpose of manage
> indexed documents in Lucene?
>
> 2) Is it necessary to follow such kind of methodology with Lucene?
>
> 3) If we do not use such type of database management system, will there be
> any disadvantages with large number of indexed files?
>
> Appreciate any reply from you.
> Thanks,
> Manjula.
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 06:31:04 2010
Return-Path: <java-user-return-46782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84433 invoked from network); 23 Jul 2010 06:31:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 06:31:04 -0000
Received: (qmail 13721 invoked by uid 500); 23 Jul 2010 06:31:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13493 invoked by uid 500); 23 Jul 2010 06:30:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13484 invoked by uid 99); 23 Jul 2010 06:30:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 06:30:58 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 06:30:50 +0000
Received: by fxm16 with SMTP id 16so6325480fxm.35
        for <java-user@lucene.apache.org>; Thu, 22 Jul 2010 23:30:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        bh=V2cIIbaHu3OdIy2xS1/mFfMmkg6q8UKIKoHy5ihKJt8=;
        b=Qf3K952a+05T8H2wgBe/op+7i9O4oo+6WH5Ael9WfJtChVgsblKNKn1+65y2pRKvGS
         GFt6PnQIHwhRwxp/qp6++cBXIY6YJR5cS2IUjRRPVW98X8NHAa1G97dr6cK4JbAZlsDW
         YjhfMyWL2ZLi87RzcxwezqO2CYjiVoWbanr5g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        b=kgswMj8JxmiZEnUjaqRJ0u9w4mzUHtD2FiO2e6wHGdr+GnW9P7p26aCrXn8/iQBXxF
         tEw6cPXZ8N+rnVS537UcL050vcMesauW6TpDR6OtYcKIGGy8Dtiu7sinPGDDs4UGZN+1
         J08MQQbol8OjgZYOA1fTT1/pZJMAMuv6Nr2o0=
Received: by 10.223.111.206 with SMTP id t14mr2896412fap.32.1279866630235; 
	Thu, 22 Jul 2010 23:30:30 -0700 (PDT)
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.223.123.70 with HTTP; Thu, 22 Jul 2010 23:30:10 -0700 (PDT)
From: skant@sloan.mit.edu
Date: Fri, 23 Jul 2010 02:30:10 -0400
X-Google-Sender-Auth: 1eInOOUneiSlwTHKI4QQs1H9edg
Message-ID: <AANLkTinm=7qaLt8gvn17USiTyCNWXOXMMrOQp_9Zo5K2@mail.gmail.com>
Subject: Reverse Lucene queries
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all, I have an interesting problem...instead of going from a query
to a document collection, is it possible to come up with the best fit
query for a given document collection (results)? "Best fit" being a
query which maximizes the hit scores of the resulting document
collection.

How should I approach this? All suggestions appreciated.

Thanks
Shashi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 06:56:32 2010
Return-Path: <java-user-return-46783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90656 invoked from network); 23 Jul 2010 06:56:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 06:56:32 -0000
Received: (qmail 31177 invoked by uid 500); 23 Jul 2010 06:56:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30879 invoked by uid 500); 23 Jul 2010 06:56:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30871 invoked by uid 99); 23 Jul 2010 06:56:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 06:56:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FREEMAIL_FROM,MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [77.238.189.42] (HELO smtp103-mob.biz.mail.ird.yahoo.com) (77.238.189.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 23 Jul 2010 06:56:20 +0000
Received: (qmail 6749 invoked from network); 23 Jul 2010 06:55:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:References:In-Reply-To:X-Apple-Yahoo-Original-Message-Folder:Mime-Version:Content-Type:Content-Transfer-Encoding:Message-Id:X-Mailer:From:X-Apple-Yahoo-Replied-Msgid:Subject:Date:To;
  b=1HM+8mtGAUJHXMLNQ0iv8UwRcLyFCNy/cFkRHh99lxItsNX9HtoV44L4tSIrXzePVWGWyPBzNjqQd5arKirMLWvJfIOgFxPDrkWsCxp9IsPYDdEXF9EOe3gg4+0KaeopIlj8vvJ2J0Tp2sMWx65nXBW0E4jpFrAJsL75sZ4yDqI=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1279868158; bh=dYg1x1o3ZcEGmrQG2fhjmHCKI7bNjkTfc2hYdPDHICc=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:References:In-Reply-To:X-Apple-Yahoo-Original-Message-Folder:Mime-Version:Content-Type:Content-Transfer-Encoding:Message-Id:X-Mailer:From:X-Apple-Yahoo-Replied-Msgid:Subject:Date:To; b=aysNTiy5sJqh6IJQYSBOdA2lYH/zcuRXnyZmO+MwoIlHK7rwTfoTRzTYKFZM4Hijl6WCXLU7ienkPc0Rz5y+4XhBfYoAv6YgRuWcFQf/g6IGvqnK4HbU2BdyXLd6tNz+lhL4A9nkwIamXIo+PEoT5U7DP8XEP0CWsPGRkzFUl0o=
Received: from [192.168.2.3] (markharw00d@194.106.34.5 with xymcookie)
        by smtp103-mob.biz.mail.ird.yahoo.com with SMTP; 23 Jul 2010 06:55:57 +0000 GMT
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
X-YMail-OSG: btnnn58VM1llI0yIj2YjHFCGOWx_sb1KK1ualRZEFITTsds
 .HDuot4uHkmTKB0EgS4DveVk8nxhm_KadaF3Rm8xobeNuce_lLvC0O96ZiHu
 xAilC6Mh..1UwwIo5mYjnMvLqsvTRIk7xtRyNuUvQ3q00UleFX3BQk1kIQEO
 wvivDbti4jwj5t.lxIGwfOMgiR7xS_PaJy9CY4AiSsgyFfuQQ0KE5uvawT_g
 teXu2lcWl2idgraSwyTJ2f7uno21ZLp24k7Nawl2.BX2TCdV0v2W8axUmwx6
 EAEAYn8AnODFv.jZhUGBOfV7mXPghxyiETA--
X-Yahoo-Newman-Property: ymail-3
References: <AANLkTil7NfUPftjBapfn9qoWbJNtun3FhGG-IXBKq9lk@mail.gmail.com> <AANLkTinGLNQVUfu2qZa2A_ySXpbRZGEgM44QzccmAqQm@mail.gmail.com> <A902805D9E8F66428EACF947DDA9840C070734536C@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu> <AANLkTikVitnuPi_iEJmlLanbR4XapZAo-DTTkrVzEz_G@mail.gmail.com>
In-Reply-To: <AANLkTikVitnuPi_iEJmlLanbR4XapZAo-DTTkrVzEz_G@mail.gmail.com>
X-Apple-Yahoo-Original-Message-Folder: Inbox
Mime-Version: 1.0 (iPhone Mail 8A293)
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Message-Id: <800A01B2-3167-4405-959C-AAA532F4D9E4@yahoo.co.uk>
X-Mailer: iPhone Mail (8A293)
From: Mark Harwood <markharw00d@yahoo.co.uk>
X-Apple-Yahoo-Replied-Msgid: 1_587503_AINuUtQAAGscTEjouQOf6XL5C7U
Subject: Re: on-the-fly "filters" from docID lists
Date: Fri, 23 Jul 2010 07:55:59 +0100
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Re scalability of filter construction - the database is likely to hold stabl=
e primary keys not lucene doc ids which are unstable in the face of updates.=
 You therefore need a quick way of converting stable database keys read from=
 the db into current lucene doc ids to create the filter. That could involve=
 a lot of disk seeks unless you cache a pk->docid lookup in ram.  You should=
 use cachingwrapperfilter too to cache the computed  user permissions from o=
ne search to the next.=20
This can get messy. If the access permissions are centred around roles/group=
s it is normally faster to tag docs with these group names and query them wi=
th the list of roles the user holds.=20
If individual user-doc-level perms are required you could also consider dyna=
mically looking up perms for just the top n results being shown at the risk o=
f needing to repeat the query with a larger n if insufficient matches pass t=
he lookup.=20

Cheers=20
Mark
----------------------------------------


On 23 Jul 2010, at 01:55, Michael McCandless <lucene@mikemccandless.com> wro=
te:

> Well, Lucene can apply such a filter rather quickly; but, your custom
> code first has to build it... so it's really a question of whether
> your custom code can build up / iterate the filter scalably.
>=20
> Mike
>=20
> On Thu, Jul 22, 2010 at 4:37 PM, Burton-West, Tom <tburtonw@umich.edu> wro=
te:
>> Hi Mike and Martin,
>>=20
>> We have a similar use-case.   Is there a scalability/performance issue wi=
th the getDocIdSet having to iterate through hundreds of thousands of docIDs=
?
>>=20
>> Tom Burton-West
>> http://www.hathitrust.org/blogs/large-scale-search
>>=20
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: Thursday, July 22, 2010 5:20 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: on-the-fly "filters" from docID lists
>>=20
>> It sounds like you should implement a custom Filter?
>>=20
>> Its getDocIdSet would consult your foreign key-value store and iterate
>> through the allowed docIDs, per segment.
>>=20
>> Mike
>>=20
>> On Wed, Jul 21, 2010 at 8:37 AM, Martin J <martinj.engine@gmail.com> wrot=
e:
>>> Hello, we are trying to implement a query type for Lucene (with eventual=

>>> target being Solr) where the query string passed in needs to be "filtere=
d"
>>> through a large list of document IDs per user. We can't store the user I=
D
>>> information in the lucene index per document so we were planning to pull=
 the
>>> list of documents owned by user X from a key-value store at query time a=
nd
>>> then build some sort of filter in memory before doing the Lucene/Solr qu=
ery.
>>> For example:
>>>=20
>>> content:"cars" user_id:X567
>>>=20
>>> would first pull the list of docIDs that user_id:X567 has "access" to fr=
om a
>>> keyvalue store and then we'd query the main index with content:"cars" bu=
t
>>> only allow the docIDs that came back to be part of the response. The lis=
t of
>>> docIDs can near the hundreds of thousands.
>>>=20
>>> What should I be looking at to implement such a feature?
>>>=20
>>> Thank you
>>> Martin
>>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 07:04:14 2010
Return-Path: <java-user-return-46784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92270 invoked from network); 23 Jul 2010 07:04:14 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 07:04:14 -0000
Received: (qmail 38304 invoked by uid 500); 23 Jul 2010 07:04:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38013 invoked by uid 500); 23 Jul 2010 07:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38004 invoked by uid 99); 23 Jul 2010 07:04:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 07:04:07 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_LOTS_OF_MONEY,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.lu@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 07:04:00 +0000
Received: by pxi11 with SMTP id 11so6907344pxi.35
        for <java-user@lucene.apache.org>; Fri, 23 Jul 2010 00:03:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=2gQFqYi3KFMEmmItcGpjKGofG9Xo28KutoVMsc6E7F8=;
        b=lq8iv+jAFxvDGyiRot5iTuScWpsbpSg9rIRsyJ3X9oCcKfWRsAHcmdx9Jv7tUkHadt
         6v4PCYrVSUMkSvltegbVU/xACL5GOeMkdomWvaR56d3p0cv+tWrTTZUJJZe9+6RisOdz
         y0u9qssE6AyKH/ofyQEcCxgyxZ8gUdX1ylgn0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=OydhPHoZfGvz76d1Jpdq9O5eKeRcuKuaTL91QoXZOyEdk25Qb3JOA+/KveqpWFHwtw
         oDahInmmtraGGKzoCbpdhUdATXaP3Ic1R9E+7sGNK7+VSOrRgtQdb72KT7vB+t8fKQX5
         Ao3ZwYsdrZPff73xTPbqILJKKGCYTF/REVfSY=
Received: by 10.114.130.13 with SMTP id c13mr4645277wad.200.1279868615164;
        Fri, 23 Jul 2010 00:03:35 -0700 (PDT)
Received: from [192.168.1.65] (99-99-38-182.lightspeed.sntcca.sbcglobal.net [99.99.38.182])
        by mx.google.com with ESMTPS id 33sm88739108wad.18.2010.07.23.00.03.33
        (version=SSLv3 cipher=RC4-MD5);
        Fri, 23 Jul 2010 00:03:34 -0700 (PDT)
Message-ID: <4C493E50.2070604@gmail.com>
Date: Fri, 23 Jul 2010 00:01:36 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.11) Gecko/20100711 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Databases
References: <AANLkTimGXPfXIZneSrPnBXqgKHmX3gjNWAy06L3c5rjB@mail.gmail.com>
In-Reply-To: <AANLkTimGXPfXIZneSrPnBXqgKHmX3gjNWAy06L3c5rjB@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

3) Sounds you want to use Lucene for storage, without databases like 
mysql. It may work, but hard for later data management.
1) and 2) You can use mysql as main storage, and pull data out to create 
Lucene indexes. Pay attention to incremental changes. It's a continuous 
process, not one-time data import. Or you would have to put a hook in 
your program to write new content to the index. Anyway, you can get it 
work, but maybe not as simple as you expected.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes: 
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes 

DBSight customer, a shopping comparison site, (anonymous per request) 
got 2.6 Million Euro funding!


On 7/22/2010 10:46 PM, manjula wijewickrema wrote:
> Hi,
>
> Normally, when I am building my index directory for indexed documents, I
> used to keep my indexed files simply in a directory called 'filesToIndex'.
> So in this case, I do not use any standar database management system such
> as mySql or any other.
>
> 1) Will it be possible to use mySql or any other for the purpose of manage
> indexed documents in Lucene?
>
> 2) Is it necessary to follow such kind of methodology with Lucene?
>
> 3) If we do not use such type of database management system, will there be
> any disadvantages with large number of indexed files?
>
> Appreciate any reply from you.
> Thanks,
> Manjula.
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 07:19:11 2010
Return-Path: <java-user-return-46785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98680 invoked from network); 23 Jul 2010 07:19:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 07:19:10 -0000
Received: (qmail 59374 invoked by uid 500); 23 Jul 2010 07:19:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57683 invoked by uid 500); 23 Jul 2010 07:19:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57674 invoked by uid 99); 23 Jul 2010 07:19:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 07:19:00 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of t.sapra97@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 07:18:52 +0000
Received: by vws2 with SMTP id 2so1707300vws.35
        for <java-user@lucene.apache.org>; Fri, 23 Jul 2010 00:18:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=xWXEvlLOpcIEnDeoRvS2QGmHhMznl+T1bsZW2qbcLy4=;
        b=uBpK2bPUdpKuFzPUyyxlpAa6cn6MlpBRfbkK/jEpTJVWnjKA21F3PC5J9LK6JbNSYD
         CgWRCDIdpfZBBVxjwREmr38EW6J7mXYNPO3uulfoEuHqM7mj9BX/7gxZI/jgl3zCOk9M
         4ebFQTLnuRGyoilf2jEbcbAfv6RJW/rKy3oHQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=YINJFIS7G9ZtQVbe08eOK79qlm+wEiYMoP1GlhQHdDTWLRMFmgLl4iYWuIucd/KlYF
         hkvifMS4NmOnWEuaF7yZQ6rLwD56OsJ1/EUg2uE2HcHe6KpU32QRxmMYZYr/JxIF97MV
         7ZPRbJzzzOhe3hREKaLLXfg11LdHkZhHjuX9E=
MIME-Version: 1.0
Received: by 10.220.60.204 with SMTP id q12mr1430936vch.43.1279869511490; Fri, 
	23 Jul 2010 00:18:31 -0700 (PDT)
Received: by 10.220.182.67 with HTTP; Fri, 23 Jul 2010 00:18:31 -0700 (PDT)
In-Reply-To: <AANLkTimGXPfXIZneSrPnBXqgKHmX3gjNWAy06L3c5rjB@mail.gmail.com>
References: <AANLkTimGXPfXIZneSrPnBXqgKHmX3gjNWAy06L3c5rjB@mail.gmail.com>
Date: Fri, 23 Jul 2010 12:48:31 +0530
Message-ID: <AANLkTilrMJ3BWgwrpTk4LE4tOnkCmZ5WA-_fR70Mzl5r@mail.gmail.com>
Subject: Re: Databases
From: tarun sapra <t.sapra97@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=e0cb4e887865975e59048c08d78e
X-Virus-Checked: Checked by ClamAV on apache.org

--e0cb4e887865975e59048c08d78e
Content-Type: text/plain; charset=ISO-8859-1

You can use HibernateSearch to maintain the synchronization between Lucene
index and Mysql  RDBMS.

On Fri, Jul 23, 2010 at 11:16 AM, manjula wijewickrema
<manjula53@gmail.com>wrote:

> Hi,
>
> Normally, when I am building my index directory for indexed documents, I
> used to keep my indexed files simply in a directory called 'filesToIndex'.
> So in this case, I do not use any standar database management system such
> as mySql or any other.
>
> 1) Will it be possible to use mySql or any other for the purpose of manage
> indexed documents in Lucene?
>
> 2) Is it necessary to follow such kind of methodology with Lucene?
>
> 3) If we do not use such type of database management system, will there be
> any disadvantages with large number of indexed files?
>
> Appreciate any reply from you.
> Thanks,
> Manjula.
>



-- 
Thanks & Regards
Tarun Sapra

--e0cb4e887865975e59048c08d78e--

From java-user-return-46786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 07:57:06 2010
Return-Path: <java-user-return-46786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5761 invoked from network); 23 Jul 2010 07:57:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 07:57:06 -0000
Received: (qmail 2137 invoked by uid 500); 23 Jul 2010 07:57:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1782 invoked by uid 500); 23 Jul 2010 07:57:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1764 invoked by uid 99); 23 Jul 2010 07:57:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 07:57:00 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 07:56:52 +0000
Received: by wwa36 with SMTP id 36so2406590wwa.5
        for <java-user@lucene.apache.org>; Fri, 23 Jul 2010 00:56:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=q0HNq4CouPj3w7bq0ccYaibFtKkCt9TBxBVz6On/drc=;
        b=FZmrHwmqoZHjT+HyHOYJdv2gpOvSg3zfcjsl6BZvz7IvO7G4TMP9bq7aWfv4mCXteE
         0gvvbhOPDYiL8xU1uII4PI4H2JH6w7gl+1j2mkXD7JA8/2kbBn2JQI5pekOFGHG8j1AD
         vHtWLzLsY2ZAvPDsmXGSKz4XF8sqiGCGh6DNk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=P6wx1cE5bApYLz3BIysVgvHNV0tXtr8jwikIYN3CnGlnWH92XUik24IQh7DRYZhym0
         oU3IIjosSYVKwzxVcYe9C8h+WzHp+J309mAHuVu2b0KxxQXHnmPMGWsviTKf7s1WYX8A
         HV9ixQ10kzmgAiCkzSH49cIQFtxlUquwT5Whg=
Received: by 10.216.170.72 with SMTP id o50mr3050830wel.69.1279871792290;
        Fri, 23 Jul 2010 00:56:32 -0700 (PDT)
Received: from [10.0.25.6] (95-36-32-119.dsl.alice.nl [95.36.32.119])
        by mx.google.com with ESMTPS id h37sm4545436wej.47.2010.07.23.00.56.31
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 23 Jul 2010 00:56:31 -0700 (PDT)
Message-Id: <49D946B0-432A-46F8-8905-EA6C34BA7C30@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1279853063645-988836.post@n3.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: Hot to get word importance in lucene index
Date: Fri, 23 Jul 2010 09:56:30 +0200
References: <1279853063645-988836.post@n3.nabble.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Please define "important". Important to do what?

It would probably be helpful if you explained what it is you attempt  
to achieve by doing this. Perhaps there is something in MoreLikeThis  
that will help you?


	karl




23 jul 2010 kl. 04.44 skrev Xaida:

>
> Hi all!
>
> hmmm, i need to get how important is the word in entire document  
> collection
> that is indexed in the lucene index. I need to extract some  
> "representable
> words", lets say concepts that are common and can be representable  
> to whole
> collection. Or collection "keywords". I did the fulltext indexing  
> and the
> only field i am using are text contents, because titles of the  
> documents are
> mostly not representable(numbers, codes etc....)
>
> So, if i calculate tfidf, it gives me importance of single term with  
> respect
> to single document. But if that word is repeating in the documents,  
> how can
> i calculate its total importance within index?
>
> All help appreciated!! Thank you!!!
>
> -- 
> View this message in context: http://lucene.472066.n3.nabble.com/Hot-to-get-word-importance-in-lucene-index-tp988836p988836.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 08:55:19 2010
Return-Path: <java-user-return-46787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21200 invoked from network); 23 Jul 2010 08:55:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 08:55:19 -0000
Received: (qmail 50478 invoked by uid 500); 23 Jul 2010 08:55:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50212 invoked by uid 500); 23 Jul 2010 08:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50197 invoked by uid 99); 23 Jul 2010 08:55:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 08:55:13 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.158 is neither permitted nor denied by domain of hota.aida@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 08:55:06 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <hota.aida@gmail.com>)
	id 1OcE1l-00033b-UN
	for java-user@lucene.apache.org; Fri, 23 Jul 2010 01:54:45 -0700
Date: Fri, 23 Jul 2010 01:54:45 -0700 (PDT)
From: Xaida <hota.aida@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1279875285934-989301.post@n3.nabble.com>
In-Reply-To: <49D946B0-432A-46F8-8905-EA6C34BA7C30@gmail.com>
References: <1279853063645-988836.post@n3.nabble.com> <49D946B0-432A-46F8-8905-EA6C34BA7C30@gmail.com>
Subject: Re: Hot to get word importance in lucene index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi! thanks for reply! I will try to explain better, sorry if it was unclear.

I have user text document collection. Not too big. Goal is to get the most
"important" concepts  which would in a way represent user interests.  That
is what i mean when i say important :)


So lets say, in my collection I have my school documents, i have some
snowboarding articles, i have some backpacking and easy travelling guides,
my favorite cooking recipes......and so on. Collection is more - less
supervised, so number of documents for each "area" is similar. Not equal,
but there is some balance.

So i would like, as result to get terms which are important in the entire
collection. For example, i think that term "cheese" should appear in my
results, because i know in my recipes there is a lot of cheese. Also i would
like to get the term "database"...from my school documents. And so on.

So nothing more smart comes to my mind than this :)
step 1 take one document
step 2 calculate tfidf for all its terms
step 3 take the terms with best tfidf and save them somewhere....
step 4 go to step 1......and so on for all the documents

And in the end to merge these results somehow :/

I guess there is better way :)

Thank you!!





-- 
View this message in context: http://lucene.472066.n3.nabble.com/Hot-to-get-word-importance-in-lucene-index-tp988836p989301.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 09:07:04 2010
Return-Path: <java-user-return-46788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28707 invoked from network); 23 Jul 2010 09:07:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 09:07:04 -0000
Received: (qmail 70036 invoked by uid 500); 23 Jul 2010 09:07:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69620 invoked by uid 500); 23 Jul 2010 09:06:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69612 invoked by uid 99); 23 Jul 2010 09:06:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 09:06:57 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wettin@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 09:06:49 +0000
Received: by wyf23 with SMTP id 23so1880449wyf.35
        for <java-user@lucene.apache.org>; Fri, 23 Jul 2010 02:06:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=XicuukxKnXUT28+9Q1rYwzMHNoRpaLiPB8KjgwCWEeM=;
        b=RgzycQtN64f0qInJ98lGDWeTXdZc4cygSNRWjT6kMWuaAKEm8Rgo1/lJis7Gqtp7VE
         lL9jOnjreKQmu7FhLDb+YxS/gsmmOzbkkxJpeX/GA0fWUIuvpJqkRTfOnwMO5zCLTu5n
         YJnRNA3XNbR+83LDjggGysHhDnyKcPQWDtjZo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=uV0mpcj628hWrfdq72pAlx2eKqua74onA0yxaTbVkIScwaS7xHrQdc9zT3L9OTn4rq
         vZVI1JPbven2wFy9GuVfUPFQthA22FpckLxTuRJHo3PkNuUC6QapP5WJAss+tiYTAPmX
         oH5YwTpWB0TILWy6O/0nQVlVEP0rILN2vHCp8=
Received: by 10.216.178.199 with SMTP id f49mr3123571wem.110.1279875987873;
        Fri, 23 Jul 2010 02:06:27 -0700 (PDT)
Received: from [10.0.25.6] (95-36-32-119.dsl.alice.nl [95.36.32.119])
        by mx.google.com with ESMTPS id n17sm13677weq.30.2010.07.23.02.06.26
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 23 Jul 2010 02:06:27 -0700 (PDT)
Message-Id: <131E730B-463F-4DCB-A672-FD2F72743E29@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTinm=7qaLt8gvn17USiTyCNWXOXMMrOQp_9Zo5K2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: Reverse Lucene queries
Date: Fri, 23 Jul 2010 11:06:26 +0200
References: <AANLkTinm=7qaLt8gvn17USiTyCNWXOXMMrOQp_9Zo5K2@mail.gmail.com>
X-Mailer: Apple Mail (2.936)


23 jul 2010 kl. 08.30 skrev skant@sloan.mit.edu:

> Hi all, I have an interesting problem...instead of going from a query
> to a document collection, is it possible to come up with the best fit
> query for a given document collection (results)? "Best fit" being a
> query which maximizes the hit scores of the resulting document
> collection.

It would probably be helpful if you explained what it is you attempt  
to achieve by doing this. Are you looking for MoreLikeThis?

> How should I approach this? All suggestions appreciated.


How exepensive of an operation is this allowed to be? Can you waste  
seconds, minutes, hours or days?
Are there any requirements on the precision and recall?

I would no matter what start with looking at the output from a feature  
selection algorithm fed with the complete corpus divided in the two  
classes "query factory set" and "all other documents".

The output will not tell you why the terms are important, just that  
they probably are used when deciding when to classify documents as  
part of query factory set or all other documents.

It's hard to say where to go from there.

Create a set of selected terms available in the query factory set.
Create a set of selected terms available in all other documents.
Create a set of selected terms only available in the query factory set.
Create a set of selected terms only available in all other documents.

See if there is a simple strategy based on above that produce a good  
result.

If not you might want to look in to some evolving algorithm that  
execute queries with permutations of selected features in order to  
find the best query. Or if you have the resources, simply create all  
permutation of queries.

If it works then I think all of the steps above could be optimized,  
cached or simplified in several ways to make it speedy.

See Mahout, Weka (has a good experimenter/explorer GUI), Rapidminer,  
etc for machine learning APIs.

It should not have to be too complicated to implement a gain ratio  
feature selector using IndexReader if the term vector space is  
available.


	karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 09:23:10 2010
Return-Path: <java-user-return-46789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32482 invoked from network); 23 Jul 2010 09:23:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 09:23:10 -0000
Received: (qmail 98826 invoked by uid 500); 23 Jul 2010 09:23:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98587 invoked by uid 500); 23 Jul 2010 09:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98579 invoked by uid 99); 23 Jul 2010 09:23:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 09:23:04 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of karl.wettin@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 09:22:56 +0000
Received: by wwa36 with SMTP id 36so2467277wwa.5
        for <java-user@lucene.apache.org>; Fri, 23 Jul 2010 02:22:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to
         :in-reply-to:content-type:content-transfer-encoding:mime-version
         :subject:date:references:x-mailer;
        bh=9rJVKUOdHtFYEoa1s+B9MoqT49InJd/4j4IN33Fz/fk=;
        b=OqhGGe13PBUtYOjE1mexJFV/UrS/IGw3sJ9DCB4HxBxKAsohRZWSm8pkdIIDP6X9zf
         bfW1tXPDtg0z4foaHUKeH2dDOUvoK7RbofPeMYQjm2lCH+4DJ+TpACQerkmwGtloAQxJ
         o79ZaDht3ocUhckel5bRwYDxlMydd5Nd694po=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type
         :content-transfer-encoding:mime-version:subject:date:references
         :x-mailer;
        b=kKV4M5bCFIXknb8sUrpLpA+F2ZckkYDu25IBiXMzoUSBKYsLc6q/mwdeleEeYwCs12
         HzBV5dXlqd9iEDAzLnGcW0CfgEZoWD8/sp/fbo4KQmGfWmty+DEVSRFhp4BNB6tfnHJA
         wPBTxJNlmrCjvS6lIthhlJEL43FKTCMV6+ZJ8=
Received: by 10.227.127.84 with SMTP id f20mr3226475wbs.3.1279876955666;
        Fri, 23 Jul 2010 02:22:35 -0700 (PDT)
Received: from [10.0.25.6] (95-36-32-119.dsl.alice.nl [95.36.32.119])
        by mx.google.com with ESMTPS id u11sm26484weq.7.2010.07.23.02.22.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 23 Jul 2010 02:22:35 -0700 (PDT)
Message-Id: <FBF07DA3-8705-497B-A717-1D0A1DF66A81@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1279875285934-989301.post@n3.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: Hot to get word importance in lucene index
Date: Fri, 23 Jul 2010 11:22:33 +0200
References: <1279853063645-988836.post@n3.nabble.com> <49D946B0-432A-46F8-8905-EA6C34BA7C30@gmail.com> <1279875285934-989301.post@n3.nabble.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org

Are you perhaps looking for this:

http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/search/similar/MoreLikeThis.html

?

	karl

23 jul 2010 kl. 10.54 skrev Xaida:

>
> Hi! thanks for reply! I will try to explain better, sorry if it was  
> unclear.
>
> I have user text document collection. Not too big. Goal is to get  
> the most
> "important" concepts  which would in a way represent user  
> interests.  That
> is what i mean when i say important :)
>
>
> So lets say, in my collection I have my school documents, i have some
> snowboarding articles, i have some backpacking and easy travelling  
> guides,
> my favorite cooking recipes......and so on. Collection is more - less
> supervised, so number of documents for each "area" is similar. Not  
> equal,
> but there is some balance.
>
> So i would like, as result to get terms which are important in the  
> entire
> collection. For example, i think that term "cheese" should appear in  
> my
> results, because i know in my recipes there is a lot of cheese. Also  
> i would
> like to get the term "database"...from my school documents. And so on.
>
> So nothing more smart comes to my mind than this :)
> step 1 take one document
> step 2 calculate tfidf for all its terms
> step 3 take the terms with best tfidf and save them somewhere....
> step 4 go to step 1......and so on for all the documents
>
> And in the end to merge these results somehow :/
>
> I guess there is better way :)
>
> Thank you!!
>
>
>
>
>
> -- 
> View this message in context: http://lucene.472066.n3.nabble.com/Hot-to-get-word-importance-in-lucene-index-tp988836p989301.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 10:55:42 2010
Return-Path: <java-user-return-46790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56674 invoked from network); 23 Jul 2010 10:55:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 10:55:42 -0000
Received: (qmail 7156 invoked by uid 500); 23 Jul 2010 10:55:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6689 invoked by uid 500); 23 Jul 2010 10:55:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6681 invoked by uid 99); 23 Jul 2010 10:55:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 10:55:35 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 23 Jul 2010 10:55:34 +0000
Received: (qmail 56626 invoked by uid 99); 23 Jul 2010 10:55:14 -0000
Received: from localhost.apache.org (HELO [192.168.2.62]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 10:55:14 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Reverse Lucene queries
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <131E730B-463F-4DCB-A672-FD2F72743E29@gmail.com>
Date: Fri, 23 Jul 2010 06:55:11 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <7403848B-A855-4724-A6CC-FEE00CED1A18@apache.org>
References: <AANLkTinm=7qaLt8gvn17USiTyCNWXOXMMrOQp_9Zo5K2@mail.gmail.com> <131E730B-463F-4DCB-A672-FD2F72743E29@gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)


On Jul 23, 2010, at 5:06 AM, Karl Wettin wrote:

>=20
> 23 jul 2010 kl. 08.30 skrev skant@sloan.mit.edu:
>=20
>> Hi all, I have an interesting problem...instead of going from a query
>> to a document collection, is it possible to come up with the best fit
>> query for a given document collection (results)? "Best fit" being a
>> query which maximizes the hit scores of the resulting document
>> collection.
>=20
> It would probably be helpful if you explained what it is you attempt =
to achieve by doing this. Are you looking for MoreLikeThis?

MatchAllDocsQuery returns the document collection all with a score of 1. =
 Somehow, I don't think this is what you are after.  Perhaps you mean =
given all the queries you've seen in the past, find the "best one"?

>=20
>> How should I approach this? All suggestions appreciated.
>=20
>=20
> How exepensive of an operation is this allowed to be? Can you waste =
seconds, minutes, hours or days?
> Are there any requirements on the precision and recall?
>=20
> I would no matter what start with looking at the output from a feature =
selection algorithm fed with the complete corpus divided in the two =
classes "query factory set" and "all other documents".
>=20
> The output will not tell you why the terms are important, just that =
they probably are used when deciding when to classify documents as part =
of query factory set or all other documents.
>=20
> It's hard to say where to go from there.
>=20
> Create a set of selected terms available in the query factory set.
> Create a set of selected terms available in all other documents.
> Create a set of selected terms only available in the query factory =
set.
> Create a set of selected terms only available in all other documents.
>=20
> See if there is a simple strategy based on above that produce a good =
result.
>=20
> If not you might want to look in to some evolving algorithm that =
execute queries with permutations of selected features in order to find =
the best query. Or if you have the resources, simply create all =
permutation of queries.
>=20
> If it works then I think all of the steps above could be optimized, =
cached or simplified in several ways to make it speedy.
>=20
> See Mahout, Weka (has a good experimenter/explorer GUI), Rapidminer, =
etc for machine learning APIs.
>=20
> It should not have to be too complicated to implement a gain ratio =
feature selector using IndexReader if the term vector space is =
available.
>=20
>=20
> 	karl
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 11:30:35 2010
Return-Path: <java-user-return-46791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69214 invoked from network); 23 Jul 2010 11:30:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 11:30:35 -0000
Received: (qmail 43391 invoked by uid 500); 23 Jul 2010 11:30:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43049 invoked by uid 500); 23 Jul 2010 11:30:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43041 invoked by uid 99); 23 Jul 2010 11:30:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 11:30:28 +0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=FREEMAIL_FROM,SPF_HELO_PASS,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.158 is neither permitted nor denied by domain of hota.aida@gmail.com)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 11:30:21 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <hota.aida@gmail.com>)
	id 1OcGS1-00078R-1u
	for java-user@lucene.apache.org; Fri, 23 Jul 2010 04:30:01 -0700
Date: Fri, 23 Jul 2010 04:30:01 -0700 (PDT)
From: Xaida <hota.aida@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1279884601052-989510.post@n3.nabble.com>
In-Reply-To: <FBF07DA3-8705-497B-A717-1D0A1DF66A81@gmail.com>
References: <1279853063645-988836.post@n3.nabble.com> <49D946B0-432A-46F8-8905-EA6C34BA7C30@gmail.com> <1279875285934-989301.post@n3.nabble.com> <FBF07DA3-8705-497B-A717-1D0A1DF66A81@gmail.com>
Subject: Re: Hot to get word importance in lucene index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Thanx! 

I am not sure, I have to study this class more deeper today , this is bit
complex, and i am not so advanced user to understand all. But this part
written in description is important to me:

"An efficient, effective "more-like-this" query generator would be a great
contribution, if anyone's interested. I'd imagine that it would take a
Reader or a String (the document's text), analyzer Analyzer, and return a
set of representative terms using heuristics like those above.  "

I know that "more like this" finds the set of similar documents.....(but i
dont need documents, i need "important"terms from whole index, to retrieve
them into some list for example)....... so for my case, important terms that
I would need, would actually be the terms generated in this query???

-- 
View this message in context: http://lucene.472066.n3.nabble.com/Hot-to-get-word-importance-in-lucene-index-tp988836p989510.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 11:44:25 2010
Return-Path: <java-user-return-46792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71469 invoked from network); 23 Jul 2010 11:44:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 11:44:25 -0000
Received: (qmail 58544 invoked by uid 500); 23 Jul 2010 11:44:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58322 invoked by uid 500); 23 Jul 2010 11:44:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58314 invoked by uid 99); 23 Jul 2010 11:44:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 11:44:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 23 Jul 2010 11:44:16 +0000
Received: (qmail 71379 invoked by uid 99); 23 Jul 2010 11:43:54 -0000
Received: from localhost.apache.org (HELO [192.168.5.110]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 11:43:54 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Hot to get word importance in lucene index
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <1279853063645-988836.post@n3.nabble.com>
Date: Fri, 23 Jul 2010 07:43:52 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <535FE843-993F-4112-BD5B-9F91F6577CC8@apache.org>
References: <1279853063645-988836.post@n3.nabble.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Couple of thoughts inline...

On Jul 22, 2010, at 10:44 PM, Xaida wrote:

>=20
> Hi all!
>=20
> hmmm, i need to get how important is the word in entire document =
collection
> that is indexed in the lucene index. I need to extract some =
"representable
> words", lets say concepts that are common and can be representable to =
whole
> collection. Or collection "keywords". I did the fulltext indexing and =
the
> only field i am using are text contents, because titles of the =
documents are
> mostly not representable(numbers, codes etc....)
>=20
> So, if i calculate tfidf, it gives me importance of single term with =
respect
> to single document.

TF gives you the importance in a single document.
IDF gives you the inverse of importance across the collection

> But if that word is repeating in the documents, how can
> i calculate its total importance within index?


Also, Lucene can also normalize by length, which is often a part of =
these things too. =20

This information can be retrieved from TermDocs, TermEnum, etc.

Also, as a related item, you may be interested in important phrases, =
which can often be more helpful.  Check out =
https://cwiki.apache.org/confluence/display/MAHOUT/Collocations for one =
way of doing that.

-Grant

---------------------
Grant Ingersoll
http://www.lucidimagination.com=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 12:33:53 2010
Return-Path: <java-user-return-46793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93032 invoked from network); 23 Jul 2010 12:33:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 12:33:53 -0000
Received: (qmail 11137 invoked by uid 500); 23 Jul 2010 12:33:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10587 invoked by uid 500); 23 Jul 2010 12:33:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10574 invoked by uid 99); 23 Jul 2010 12:33:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 12:33:46 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.5] (HELO web113305.mail.gq1.yahoo.com) (98.136.167.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 23 Jul 2010 12:33:39 +0000
Received: (qmail 49922 invoked by uid 60001); 23 Jul 2010 12:33:17 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1279888397; bh=BcmmVHyQ/WGTxKOM7tjLxLTZA3++gFjlEXrxkG4tTjc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:MIME-Version:Content-Type; b=qQ1SUPThUMDK8dEJimBxEOUln4IkMuVR7sVCsJ693NgwOZiiEoa+d7V0G1A68ACo3YMmmhq0EGp2wPREs/MPooBikahfmGjQ4eJMZHPlacWvwVD9ODbCDKnCPrNj6A71jvg9H4PfNKF+scpmQIgHftOwjt+nAtBwfYDgQzQx3Zc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:MIME-Version:Content-Type;
  b=1FOAgeVmDVgVKht6St86x8d5ssm2X2g89wEDUHK4HoONJNIxj/8uffC6YwfdcJ76gWZEj8E4S/LI0S76N0yvYTTbsxj9OPHWpyOYqq48qAo4eFSvi2v/26Lqq6ay3m8DuOjhELKAsOfQtas6h2bPiHozBNzdG4LRvhXbVTiSHa0=;
Message-ID: <811163.48434.qm@web113305.mail.gq1.yahoo.com>
X-YMail-OSG: WnOEOxwVM1mHC_KHHGRAGAps8aOrRTj.nUMjVKuzpw6FcfI
 Qghg7f1D3A0KgQg9pH.t3dTPC4zvw9zX14jWYfSLSax2auoouiBkVzKUdfaj
 pb3vXSyAmJDvbw8MrZN_7hZjUueaQw6HoLz5cpzBNF4tC2QZlk2bEktQg73n
 RGRbR.SM5RE_Tpryzk4y0hWxtZpJvD7gPsIlZQOnC7_Ot8K1amRxeppzzHrq
 XOyo5YE.nABAVOPrfPEiEepl7tGb9kMLNj_9NZDTaiQzd0FNezun6u1kuoHP
 W86ZpRNgvwWrMY77_Dmi1BfSS1k2rC4Sf6UWoPxt6pnWVgWYJfbZiBV8serm
 i9vcnVUR9bwO4HJy6c7dALg6t0i7q
Received: from [129.194.8.73] by web113305.mail.gq1.yahoo.com via HTTP; Fri, 23 Jul 2010 05:33:17 PDT
X-Mailer: YahooMailWebService/0.8.105.277674
Date: Fri, 23 Jul 2010 05:33:17 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: Reverse Lucene queries
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

You can also look at carrot2 open source project, which does search results clustering.  Cluster labels which carrot2 generates can be used as query terms "fitting" the documents in these clusters.  Keep in mind that carrot2 is designed for a small set of documents (1000).

http://project.carrot2.org

Ivan Provalov


On Jul 23, 2010, at 6:55 AM, Grant Ingersoll <gsingers@apache.org> wrote:


On Jul 23, 2010, at 5:06 AM, Karl Wettin wrote:


23 jul 2010 kl. 08.30 skrev skant@sloan.mit.edu:

Hi all, I have an interesting problem...instead of going from a query
to a document collection, is it possible to come up with the best fit
query for a given document collection (results)? "Best fit" being a
query which maximizes the hit scores of the resulting document
collection.

It would probably be helpful if you explained what it is you attempt to achieve by doing this. Are you looking for MoreLikeThis?

MatchAllDocsQuery returns the document collection all with a score of 1.  Somehow, I don't think this is what you are after.  Perhaps you mean given all the queries you've seen in the past, find the "best one"?


How should I approach this? All suggestions appreciated.


How exepensive of an operation is this allowed to be? Can you waste seconds, minutes, hours or days?
Are there any requirements on the precision and recall?

I would no matter what start with looking at the output from a feature selection algorithm fed with the complete corpus divided in the two classes "query factory set" and "all other documents".

The output will not tell you why the terms are important, just that they probably are used when deciding when to classify documents as part of query factory set or all other documents.

It's hard to say where to go from there.

Create a set of selected terms available in the query factory set.
Create a set of selected terms available in all other documents.
Create a set of selected terms only available in the query factory set.
Create a set of selected terms only available in all other documents.

See if there is a simple strategy based on above that produce a good result.

If not you might want to look in to some evolving algorithm that execute queries with permutations of selected features in order to find the best query. Or if you have the resources, simply create all permutation of queries.

If it works then I think all of the steps above could be optimized, cached or simplified in several ways to make it speedy.

See Mahout, Weka (has a good experimenter/explorer GUI), Rapidminer, etc for machine learning APIs.

It should not have to be too complicated to implement a gain ratio feature selector using IndexReader if the term vector space is available.


	karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 12:33:56 2010
Return-Path: <java-user-return-46794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93090 invoked from network); 23 Jul 2010 12:33:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 12:33:56 -0000
Received: (qmail 12568 invoked by uid 500); 23 Jul 2010 12:33:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10728 invoked by uid 500); 23 Jul 2010 12:33:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10571 invoked by uid 99); 23 Jul 2010 12:33:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 12:33:46 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.136.167.5] (HELO web113305.mail.gq1.yahoo.com) (98.136.167.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 23 Jul 2010 12:33:39 +0000
Received: (qmail 49922 invoked by uid 60001); 23 Jul 2010 12:33:17 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1279888397; bh=BcmmVHyQ/WGTxKOM7tjLxLTZA3++gFjlEXrxkG4tTjc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:MIME-Version:Content-Type; b=qQ1SUPThUMDK8dEJimBxEOUln4IkMuVR7sVCsJ693NgwOZiiEoa+d7V0G1A68ACo3YMmmhq0EGp2wPREs/MPooBikahfmGjQ4eJMZHPlacWvwVD9ODbCDKnCPrNj6A71jvg9H4PfNKF+scpmQIgHftOwjt+nAtBwfYDgQzQx3Zc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:Cc:MIME-Version:Content-Type;
  b=1FOAgeVmDVgVKht6St86x8d5ssm2X2g89wEDUHK4HoONJNIxj/8uffC6YwfdcJ76gWZEj8E4S/LI0S76N0yvYTTbsxj9OPHWpyOYqq48qAo4eFSvi2v/26Lqq6ay3m8DuOjhELKAsOfQtas6h2bPiHozBNzdG4LRvhXbVTiSHa0=;
Message-ID: <811163.48434.qm@web113305.mail.gq1.yahoo.com>
X-YMail-OSG: WnOEOxwVM1mHC_KHHGRAGAps8aOrRTj.nUMjVKuzpw6FcfI
 Qghg7f1D3A0KgQg9pH.t3dTPC4zvw9zX14jWYfSLSax2auoouiBkVzKUdfaj
 pb3vXSyAmJDvbw8MrZN_7hZjUueaQw6HoLz5cpzBNF4tC2QZlk2bEktQg73n
 RGRbR.SM5RE_Tpryzk4y0hWxtZpJvD7gPsIlZQOnC7_Ot8K1amRxeppzzHrq
 XOyo5YE.nABAVOPrfPEiEepl7tGb9kMLNj_9NZDTaiQzd0FNezun6u1kuoHP
 W86ZpRNgvwWrMY77_Dmi1BfSS1k2rC4Sf6UWoPxt6pnWVgWYJfbZiBV8serm
 i9vcnVUR9bwO4HJy6c7dALg6t0i7q
Received: from [129.194.8.73] by web113305.mail.gq1.yahoo.com via HTTP; Fri, 23 Jul 2010 05:33:17 PDT
X-Mailer: YahooMailWebService/0.8.105.277674
Date: Fri, 23 Jul 2010 05:33:17 -0700 (PDT)
From: Ivan Provalov <iprovalo@yahoo.com>
Subject: Re: Reverse Lucene queries
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

You can also look at carrot2 open source project, which does search results clustering.  Cluster labels which carrot2 generates can be used as query terms "fitting" the documents in these clusters.  Keep in mind that carrot2 is designed for a small set of documents (1000).

http://project.carrot2.org

Ivan Provalov


On Jul 23, 2010, at 6:55 AM, Grant Ingersoll <gsingers@apache.org> wrote:


On Jul 23, 2010, at 5:06 AM, Karl Wettin wrote:


23 jul 2010 kl. 08.30 skrev skant@sloan.mit.edu:

Hi all, I have an interesting problem...instead of going from a query
to a document collection, is it possible to come up with the best fit
query for a given document collection (results)? "Best fit" being a
query which maximizes the hit scores of the resulting document
collection.

It would probably be helpful if you explained what it is you attempt to achieve by doing this. Are you looking for MoreLikeThis?

MatchAllDocsQuery returns the document collection all with a score of 1.  Somehow, I don't think this is what you are after.  Perhaps you mean given all the queries you've seen in the past, find the "best one"?


How should I approach this? All suggestions appreciated.


How exepensive of an operation is this allowed to be? Can you waste seconds, minutes, hours or days?
Are there any requirements on the precision and recall?

I would no matter what start with looking at the output from a feature selection algorithm fed with the complete corpus divided in the two classes "query factory set" and "all other documents".

The output will not tell you why the terms are important, just that they probably are used when deciding when to classify documents as part of query factory set or all other documents.

It's hard to say where to go from there.

Create a set of selected terms available in the query factory set.
Create a set of selected terms available in all other documents.
Create a set of selected terms only available in the query factory set.
Create a set of selected terms only available in all other documents.

See if there is a simple strategy based on above that produce a good result.

If not you might want to look in to some evolving algorithm that execute queries with permutations of selected features in order to find the best query. Or if you have the resources, simply create all permutation of queries.

If it works then I think all of the steps above could be optimized, cached or simplified in several ways to make it speedy.

See Mahout, Weka (has a good experimenter/explorer GUI), Rapidminer, etc for machine learning APIs.

It should not have to be too complicated to implement a gain ratio feature selector using IndexReader if the term vector space is available.


	karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 13:05:55 2010
Return-Path: <java-user-return-46795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4829 invoked from network); 23 Jul 2010 13:05:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 13:05:54 -0000
Received: (qmail 56013 invoked by uid 500); 23 Jul 2010 13:05:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55679 invoked by uid 500); 23 Jul 2010 13:05:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55669 invoked by uid 99); 23 Jul 2010 13:05:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 13:05:48 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 13:05:38 +0000
Received: by bwz2 with SMTP id 2so2317848bwz.35
        for <java-user@lucene.apache.org>; Fri, 23 Jul 2010 06:05:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=obb9j/++kQ3xT7DSK91CxIicwsbn7qEpOaFlgUF7yD0=;
        b=tNpdRPS68Fz+cUB7Pt/jdzB/z7t6JADe97SXfM3xDDwi4xejuPteOJScglANS7fKYT
         FDxOhRFvhF1HIelfg7/hEO1hENSIGhZiVlLncHzbhgIr8cjQ8EjpSm4TtuRFQBqeIvK4
         VX27b4JmsqS7OWRahZYOtiGZR6XkSAdYkk8GM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=HTnMtjaMrgiFihRdeLNsxARQbbwQgJ+qesuxuKRqUv3mXgYjQF1ShJchsKwxfXAOlV
         Bexp6rNU87TK++MceIMG9driU55o2elDTWyJjAniEaL5xwT93G5eim6XJXtx5Ux6x9Jr
         rRFQdDsDmMg0LIjgeiDCWWD1eu6qXYrGAunS8=
Received: by 10.204.113.209 with SMTP id b17mr1833623bkq.19.1279890317220; 
	Fri, 23 Jul 2010 06:05:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Fri, 23 Jul 2010 06:04:57 -0700 (PDT)
In-Reply-To: <AANLkTilQg3ARa8V70eujT1Qk0DbJJJoCFElf_0tCWT5u@mail.gmail.com>
References: <AANLkTilQg3ARa8V70eujT1Qk0DbJJJoCFElf_0tCWT5u@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 23 Jul 2010 14:04:57 +0100
Message-ID: <AANLkTi=zsDRMTxKTUus=5yVJZvb15_=3s-dshH_eDJe0@mail.gmail.com>
Subject: Re: Using lucene for substring matching
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

So, if I've understood this correctly, you've got some text and wan't
to loop through a list of words and/or phrases, and see which of those
match the text.

e.g.

text "some random article about something or other of some random length"

words

some - matches
many - no match
article - matches
word - no match

You can certainly do that with lucene.  Load the text into a document
and loop round the words or phrases searching for each.  You are
likely to need to look into analyzers depending on your requirements
around stop words, punctuation, case, etc.  And phrase/span queries
for phrases.
There are also probably some lucene techniques for speeding this up,
but as ever, start simple - lucene is usually plenty fast enough.


--
Ian.


On Thu, Jul 22, 2010 at 11:30 PM, Geir Gullestad Pettersen
<geirgp@gmail.com> wrote:
> Hi,
>
> I'm about to write an application that does very simple text analysis,
> namely dictionary based entity entraction. The alternative is to do in
> memory matching with substring:
>
> String text; // could be any size, but normally "news paper length"
> List matches;
> for( String wordOrPhrase : dictionary) {
> =A0 if ( text.substring( wordOrPhrase ) >=3D 0 ) {
> =A0 =A0 =A0matches.add( wordOrPhrase );
> =A0 }
> }
>
> I am concerned the above code will be quite cpu intensitive, it will also=
 be
> case sensitive and lot leave any room for fuzzy matching.
>
> I thought this task could also be solved by indexing every bit of text th=
at
> is to be analyzed, and then executing a query per dicionary entry:
>
> (pseudo)
>
> lucene.index(text)
> List matches
> for( String wordOrPhrase : dictionary {
> =A0 if( lucene.search( wordOrPharse, text_id) gives hit ) {
> =A0 =A0 =A0matches.add(wordOrPhrase)
> =A0 }
> }
>
> I have not used lucene very much, so I don't know if it is a good idea or
> not to use lucene for this task at all. Could anyone please share their
> thoughs on this?
>
> Thanks,
> Geir
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 17:00:29 2010
Return-Path: <java-user-return-46796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4708 invoked from network); 23 Jul 2010 17:00:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 17:00:28 -0000
Received: (qmail 300 invoked by uid 500); 23 Jul 2010 17:00:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 228 invoked by uid 500); 23 Jul 2010 17:00:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 220 invoked by uid 99); 23 Jul 2010 17:00:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 17:00:25 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 17:00:16 +0000
Received: by wwa36 with SMTP id 36so2881708wwa.5
        for <java-user@lucene.apache.org>; Fri, 23 Jul 2010 09:59:56 -0700 (PDT)
Received: by 10.227.138.5 with SMTP id y5mr3707154wbt.204.1279904396229; Fri, 
	23 Jul 2010 09:59:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.172.210 with HTTP; Fri, 23 Jul 2010 09:59:36 -0700 (PDT)
From: =?UTF-8?Q?Utku_Can_Top=C3=A7u?= <utku@topcu.gen.tr>
Date: Fri, 23 Jul 2010 18:59:36 +0200
Message-ID: <AANLkTimszB7MNXgG+8srxHDDAna59OqLmZzB5dh906yP@mail.gmail.com>
Subject: LUCENE-2456 (A Column-Oriented Cassandra-Based Lucene Directory)
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636833bd4e23dbc048c10f681
X-Virus-Checked: Checked by ClamAV on apache.org

--001636833bd4e23dbc048c10f681
Content-Type: text/plain; charset=UTF-8

Hi All,

I'm trying to use the patch for testing, provided in the issue.

I downloaded the patch and the dependency *LUCENE-2453
<https://issues.apache.org/jira/browse/LUCENE-2453>*.
I tested this contribution against the r942817 revision where I assume the
contributor has been using during the time of development. The tests seemed
to fail.

This time, I updated the CassandraDirectory.java to match the new Cassandra
Interface. It unfortunately failed again.

Has anyone here have an idea on which cassandra revision and lucene revision
this patch works  against?

Best Regards,
Utku

--001636833bd4e23dbc048c10f681--

From java-user-return-46797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 17:04:17 2010
Return-Path: <java-user-return-46797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5458 invoked from network); 23 Jul 2010 17:04:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 17:04:17 -0000
Received: (qmail 5010 invoked by uid 500); 23 Jul 2010 17:04:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4952 invoked by uid 500); 23 Jul 2010 17:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4944 invoked by uid 99); 23 Jul 2010 17:04:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 17:04:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [141.211.3.202] (HELO itcs-ehub-02.adsroot.itcs.umich.edu) (141.211.3.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 17:04:05 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.232]) by
 itcs-ehub-02.adsroot.itcs.umich.edu ([141.211.3.202]) with mapi; Fri, 23 Jul
 2010 13:03:43 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 23 Jul 2010 13:03:42 -0400
Subject: RE: on-the-fly "filters" from docID lists
Thread-Topic: on-the-fly "filters" from docID lists
Thread-Index: AcsqNDB9P+5iAObFRVe/4XXA/9Eq4QAUgE6w
Message-ID: <A902805D9E8F66428EACF947DDA9840C0707345407@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <AANLkTil7NfUPftjBapfn9qoWbJNtun3FhGG-IXBKq9lk@mail.gmail.com>
 <AANLkTinGLNQVUfu2qZa2A_ySXpbRZGEgM44QzccmAqQm@mail.gmail.com>
 <A902805D9E8F66428EACF947DDA9840C070734536C@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
 <AANLkTikVitnuPi_iEJmlLanbR4XapZAo-DTTkrVzEz_G@mail.gmail.com>
 <800A01B2-3167-4405-959C-AAA532F4D9E4@yahoo.co.uk>
In-Reply-To: <800A01B2-3167-4405-959C-AAA532F4D9E4@yahoo.co.uk>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

>>Re scalability of filter construction - the database is likely to hold st=
able primary keys not lucene doc ids=20
>>which are unstable in the face of updates.

This is the scalability issue I was concerned about.  Assume the database c=
all efficiently retrieves a sorted array of 50,000 stable primary keys.  Wh=
at is the best way to efficiently convert that list of primary keys to Luce=
ne docIds.  =20

I was looking at the Lucene in Action example code (which was not designed =
for this use case) where the Lucene docId is retrieved by iteratively calli=
ng termDocs.read. How expensive is this operation?  Would 50,000 calls retu=
rn in a few seconds or less? =20

for (String isbn : isbns) {
	if (isbn !=3D null) {
	TermDocs termDocs =3D
	reader.termDocs(new Term("isbn", isbn));
	int count =3D termDocs.read(docs, freqs);
	if (count =3D=3D 1) {
	bits.set(docs[0]);
}

>>That could involve a lot of disk seeks unless you cache a pk->docid looku=
p in ram.
That sounds interesting. How would the pk->docid lookup get populated?
Wouldn't a pk->docid cache be invalidated with each commit or merge?

Tom

-----Original Message-----
From: Mark Harwood [mailto:markharw00d@yahoo.co.uk]=20
Sent: Friday, July 23, 2010 2:56 AM
To: java-user@lucene.apache.org
Subject: Re: on-the-fly "filters" from docID lists

Re scalability of filter construction - the database is likely to hold stab=
le primary keys not lucene doc ids which are unstable in the face of update=
s. You therefore need a quick way of converting stable database keys read f=
rom the db into current lucene doc ids to create the filter. That could inv=
olve a lot of disk seeks unless you cache a pk->docid lookup in ram.  You s=
hould use cachingwrapperfilter too to cache the computed  user permissions =
from one search to the next.=20
This can get messy. If the access permissions are centred around roles/grou=
ps it is normally faster to tag docs with these group names and query them =
with the list of roles the user holds.=20
If individual user-doc-level perms are required you could also consider dyn=
amically looking up perms for just the top n results being shown at the ris=
k of needing to repeat the query with a larger n if insufficient matches pa=
ss the lookup.=20

Cheers=20
Mark
----------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 23 17:53:47 2010
Return-Path: <java-user-return-46798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33693 invoked from network); 23 Jul 2010 17:53:46 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 23 Jul 2010 17:53:46 -0000
Received: (qmail 79148 invoked by uid 500); 23 Jul 2010 17:53:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79014 invoked by uid 500); 23 Jul 2010 17:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79006 invoked by uid 99); 23 Jul 2010 17:53:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Jul 2010 17:53:43 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [77.238.184.67] (HELO smtp136.mail.ukl.yahoo.com) (77.238.184.67)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 23 Jul 2010 17:53:36 +0000
Received: (qmail 16909 invoked from network); 23 Jul 2010 17:53:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Content-Type:Mime-Version:Subject:From:In-Reply-To:Date:Content-Transfer-Encoding:Message-Id:References:To:X-Mailer;
  b=x6rtBLJw7d2VlHhXGInjMX1HMMDPQDAOG8hf6NRuQ4ZHaR4OGZD0ZZ7Y9iYnpA0uqnymf4U2jetQPZ2GMdc+kS2IdE0MBLwC4PD2ZDHA+5GKS912EMdOB1TYF8WPX1Islv/3i/A6UBQUc6zPeTq921YDB9RtUSyKddyknIPLsnQ=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1279907594; bh=ryV2am/JRjO1QGJJjAZFyazv9vyhR3QLh7MIYNFBhMg=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Content-Type:Mime-Version:Subject:From:In-Reply-To:Date:Content-Transfer-Encoding:Message-Id:References:To:X-Mailer; b=RAHQnZ5YDY7wILVFeYqu60Z7/I1bea3qHJPf/jWHsAxyPZAynG6R2dyck48BAAcI7rdzRRBRF03++WQJtQAaamrGzTT82EB+LSVNNDJZrVRathtTuAJDokq9L4wZ0BaRSz41B0mjoVjrn+LuzXL+t41981hpLfD0TCMSpHju3f8=
Received: from [192.168.2.50] (markharw00d@194.106.34.5 with plain)
        by smtp136.mail.ukl.yahoo.com with SMTP; 23 Jul 2010 17:53:14 +0000 GMT
X-Yahoo-SMTP: rdTGKYaswBBzjeOz17cOw.4gNsDMDjs6
X-YMail-OSG: e7sV2.0VM1m70hqAmAZIzEcXVbdlxlHlQoVWYaC8XsbsxhI
 1_1fE.YwX21jWmSQ0Egj4pNNLGFa478cpVDdeRV9eeLtT7ZchO9P1rwvxRdT
 gPi40x1gP3pn51OXjteZ9B1Z2jrV8ye1U0KWKltX.0HQPYyaNgnxSmrC9UrL
 Ytvqg.wOGvd3V6eU7Dwm8MgapYnvsjnjI6RfjSV0yWhmnMwcUjRxtd5Q7KpU
 LaIGLD8ewMBNLkYiumLd9b.e6FLJsVDa_PjylXa0_wulA.Ftxx6goEmWapTf
 gCQ--
X-Yahoo-Newman-Property: ymail-3
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: on-the-fly "filters" from docID lists
From: Mark Harwood <markharw00d@yahoo.co.uk>
In-Reply-To: <A902805D9E8F66428EACF947DDA9840C0707345407@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
Date: Fri, 23 Jul 2010 18:53:14 +0100
Content-Transfer-Encoding: quoted-printable
Message-Id: <0E4CB01A-2CF0-4B16-8BE7-350F3995DFD1@yahoo.co.uk>
References: <AANLkTil7NfUPftjBapfn9qoWbJNtun3FhGG-IXBKq9lk@mail.gmail.com> <AANLkTinGLNQVUfu2qZa2A_ySXpbRZGEgM44QzccmAqQm@mail.gmail.com> <A902805D9E8F66428EACF947DDA9840C070734536C@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu> <AANLkTikVitnuPi_iEJmlLanbR4XapZAo-DTTkrVzEz_G@mail.gmail.com> <800A01B2-3167-4405-959C-AAA532F4D9E4@yahoo.co.uk> <A902805D9E8F66428EACF947DDA9840C0707345407@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

> What is the best way to efficiently convert that list of primary keys =
to Lucene docIds.  =20


Avoid disk seeks. Lucene is fast but still beholden to the laws of =
physics. Random disk seeks will cost you  eg. 50,000 * 5ms =3D250 =
seconds (minus any effects of OS disk caching).
Best way to handle this lookup is a PK-docid cache which can be reused =
for all users. Since 2.9 Lucene holds caches e.g. FieldCache down at =
segment level so a commit   or merge should only invalidate a subset of =
cached items. Trouble is I think FieldCache is for docID->FieldValue =
lookups whereas you want a cache that works the other way around.

Cheers
Mark

>=20
> I was looking at the Lucene in Action example code (which was not =
designed for this use case) where the Lucene docId is retrieved by =
iteratively calling termDocs.read. How expensive is this operation?  =
Would 50,000 calls return in a few seconds or less? =20
>=20
> for (String isbn : isbns) {
> 	if (isbn !=3D null) {
> 	TermDocs termDocs =3D
> 	reader.termDocs(new Term("isbn", isbn));
> 	int count =3D termDocs.read(docs, freqs);
> 	if (count =3D=3D 1) {
> 	bits.set(docs[0]);
> }
>=20
>>> That could involve a lot of disk seeks unless you cache a pk->docid =
lookup in ram.
> That sounds interesting. How would the pk->docid lookup get populated?
> Wouldn't a pk->docid cache be invalidated with each commit or merge?
>=20
> Tom
>=20
> -----Original Message-----
> From: Mark Harwood [mailto:markharw00d@yahoo.co.uk]=20
> Sent: Friday, July 23, 2010 2:56 AM
> To: java-user@lucene.apache.org
> Subject: Re: on-the-fly "filters" from docID lists
>=20
> Re scalability of filter construction - the database is likely to hold =
stable primary keys not lucene doc ids which are unstable in the face of =
updates. You therefore need a quick way of converting stable database =
keys read from the db into current lucene doc ids to create the filter. =
That could involve a lot of disk seeks unless you cache a pk->docid =
lookup in ram.  You should use cachingwrapperfilter too to cache the =
computed  user permissions from one search to the next.=20
> This can get messy. If the access permissions are centred around =
roles/groups it is normally faster to tag docs with these group names =
and query them with the list of roles the user holds.=20
> If individual user-doc-level perms are required you could also =
consider dynamically looking up perms for just the top n results being =
shown at the risk of needing to repeat the query with a larger n if =
insufficient matches pass the lookup.=20
>=20
> Cheers=20
> Mark
> ----------------------------------------
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 24 06:56:20 2010
Return-Path: <java-user-return-46799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78640 invoked from network); 24 Jul 2010 06:56:19 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 24 Jul 2010 06:56:19 -0000
Received: (qmail 8349 invoked by uid 500); 24 Jul 2010 06:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7954 invoked by uid 500); 24 Jul 2010 06:56:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7946 invoked by uid 99); 24 Jul 2010 06:56:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jul 2010 06:56:12 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bednarz.hannover@googlemail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 24 Jul 2010 06:56:05 +0000
Received: by fxm11 with SMTP id 11so91816fxm.35
        for <java-user@lucene.apache.org>; Fri, 23 Jul 2010 23:55:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:received:received:from:content-type
         :content-transfer-encoding:subject:date:message-id:to:mime-version
         :x-mailer;
        bh=O/8qFIZQLfntPdeS5L3UGPqIhKvJp+r9n0mnefLAjRE=;
        b=jwrKSj1/ZE8m+JZxd9VAworblA1eo86TBWFHiJdzI+uoQpRktkAWKVBiMbQkfUcGxv
         5vK5/QNEGXCupRgJX9HNDEFljDLY1lDrkFlQrSSrMZjCN0w11BqG7zyCgtmDIZCyyikr
         kJfrwXsSvEeciQDeSMir4J8tKnD+kYzfaSHd0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=from:content-type:content-transfer-encoding:subject:date:message-id
         :to:mime-version:x-mailer;
        b=TW9AU7ZbqvJPzmpOeaEfBXkPo0z+MaSdkhoWpdATHzPWAyLWmv0m7mJvPFuXxFj2Vx
         cJGx/TjIvxXjb+WudLvoLoJ9HATL8SmZxv1NF0yo1N8i4HYBqn+Q7SyN69D5MYGTvFha
         K0o3KTCSjiTbIsv1bVVOeGul2ljs01nu/bdK4=
Received: by 10.223.121.193 with SMTP id i1mr4070688far.77.1279954544805;
        Fri, 23 Jul 2010 23:55:44 -0700 (PDT)
Received: from [192.168.0.3] (91-65-137-73-dynip.superkabel.de [91.65.137.73])
        by mx.google.com with ESMTPS id b11sm397868faq.30.2010.07.23.23.55.44
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Fri, 23 Jul 2010 23:55:44 -0700 (PDT)
From: Maciej Bednarz <bednarz.hannover@googlemail.com>
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Searching for user agents
Date: Sat, 24 Jul 2010 08:55:42 +0200
Message-Id: <889C73A2-F318-4CB7-BE49-36E6F535E374@gmail.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1081)
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I am using apache lucene 3.0.2 and searching for an optimal analyzer to =
search for best matching http user agents. Imagine, that we store =
following http user agents in a field:

Lynx/2.8.4rel.1 libwww-FM/2.14 SSL-MM/1.4.1 OpenSSL/0.9.6c
Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)
Mozilla/4.77 [en] (X11; I; IRIX;64 6.5 IP30)

Now as search query a best matching agent for the following input should =
be returned:

Mozilla/4.1 (compatible; MSIE 6.0; Windows NT 5.0)

=46rom my natural view the Mozilla/4.0 is the best fit result. What =
analyzer do I need to use to store and find it? The text not natural, so =
I need some kind of n gram search (I guess). My initial setup does not =
return it at all:

String agent =3D "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)";
final static Analyzer analyzer =3D new NGramAnalyzer(2, 4);
final Document doc =3D new Document();
doc.add(new Field("agent", agent, Field.Store.YES, =
Field.Index.ANALYZED));
...
final QueryParser parser =3D new QueryParser(Version.LUCENE_30, =
"content", analyzer);
final Query query =3D parser.parse("Mozilla/4.1 (compatible; MSIE 6.0; =
Windows NT 5.0)");
final TopScoreDocCollector collector =3D TopScoreDocCollector.create(50, =
true);
searcher.search(query, collector);

NGramAnalyzer is defined as:

import java.io.Reader;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.ngram.NGramTokenizer;

public class NGramAnalyzer extends Analyzer {

	private final int minGram;
	private final int maxGram;

	public NGramAnalyzer(final int minGram, final int maxGram) {
		this.minGram =3D minGram;
		this.maxGram =3D maxGram;
	}

	@Override
	public TokenStream tokenStream(final String fieldName, final =
Reader reader) {
		return new NGramTokenizer(reader, minGram, maxGram);
	}
}


Thank you very much for a solution or any other approach.

Maciej=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 04:22:23 2010
Return-Path: <java-user-return-46800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34920 invoked from network); 26 Jul 2010 04:22:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 04:22:22 -0000
Received: (qmail 61475 invoked by uid 500); 26 Jul 2010 04:22:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61147 invoked by uid 500); 26 Jul 2010 04:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61139 invoked by uid 99); 26 Jul 2010 04:22:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 04:22:15 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 04:22:07 +0000
Received: by iwn37 with SMTP id 37so3603048iwn.35
        for <java-user@lucene.apache.org>; Sun, 25 Jul 2010 21:21:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.148.20 with SMTP id n20mr7967647ibv.196.1280118105657; 
	Sun, 25 Jul 2010 21:21:45 -0700 (PDT)
Received: by 10.231.14.131 with HTTP; Sun, 25 Jul 2010 21:21:45 -0700 (PDT)
Date: Mon, 26 Jul 2010 14:21:45 +1000
Message-ID: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
Subject: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: David Sitsky <sits@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

A customer has been indexing a very large collection of documents that
has been running over many days using 2.9.0.  During the optimisation
stage, the following error occurred, and now the index can no longer
be opened due to the "missing file".  I have been told this index is
on a local RAID disk configuration on a Windows machine.  Is there
anything we can do to somehow "recover" this index to make it useable?
 Any help would be greatly appreciated.

Is this possible this is a bug with 2.9.0?

java.io.IOException: background merge hit exception: _8d:C110892
_9s:C29548 _b7:C30930 _co:C20063 _e1:C43786 _fj:C102309 _gv:C67123
_ia:C26329 _jr:C61859 _l5:C38116 _mj:C33069 _ny:C14417 _pe:C13849
_qs:C21354 _s7:C10683 _u5:C11953 _v1:C12250 _wg:C18405 _xv:C24611
_zg:C15294 _10p:C20039 _125:C24706 _15d:C17375 _176:C73888 _17r:C13939
_19c:C9959 _1bz:C66884 _1dg:C6827 _1ex:C33196 _1g8:C16677 _1hn:C23601
_1j2:C11191 _1kh:C9764 _1lw:C8585 _1nb:C24527 _1oq:C24600 _1q5:C23088
_1rk:C10578 _1tl:C60504 _1ue:C23005 _1vu:C4571 _1vt:C6 _1vv:C6 _1vw:C1
_1vx:C4 _1vy:C1 _1vz:C2 _1w0:C1 _1w1:C1 _1w2:C26 into _1w3 [optimize]
[mergeDocStores]
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2908)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2843)
	at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:2813)
        [snip]
        ...
Caused by: java.io.FileNotFoundException: D:\[snip]\TextIndex\_1vw.fdt
(The system cannot find the file specified)
	at java.io.RandomAccessFile.open(Native Method)
	at java.io.RandomAccessFile.<init>(RandomAccessFile.java:212)
	at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput$Descriptor.<init>(SimpleFSDirectory.java:78)
	at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIndexInput.<init>(SimpleFSDirectory.java:108)
	at org.apache.lucene.store.SimpleFSDirectory.openInput(SimpleFSDirectory.java:65)
	at org.apache.lucene.index.FieldsReader.<init>(FieldsReader.java:104)
	at org.apache.lucene.index.SegmentReader$CoreReaders.openDocStores(SegmentReader.java:291)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:654)
	at org.apache.lucene.index.SegmentReader.get(SegmentReader.java:622)
	at org.apache.lucene.index.IndexWriter$ReaderPool.get(IndexWriter.java:698)
	at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:5062)
	at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4675)
	at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:235)
	at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:291)

-- 
Cheers,
David

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 04:40:04 2010
Return-Path: <java-user-return-46801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36843 invoked from network); 26 Jul 2010 04:40:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 04:40:03 -0000
Received: (qmail 73145 invoked by uid 500); 26 Jul 2010 04:40:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72897 invoked by uid 500); 26 Jul 2010 04:39:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72889 invoked by uid 99); 26 Jul 2010 04:39:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 04:39:56 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 04:39:51 +0000
Received: by iwn37 with SMTP id 37so3619212iwn.35
        for <java-user@lucene.apache.org>; Sun, 25 Jul 2010 21:39:31 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.85.206 with SMTP id p14mr8012793ibl.89.1280119171002; Sun, 
	25 Jul 2010 21:39:31 -0700 (PDT)
Received: by 10.231.14.131 with HTTP; Sun, 25 Jul 2010 21:39:30 -0700 (PDT)
In-Reply-To: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
Date: Mon, 26 Jul 2010 14:39:30 +1000
Message-ID: <AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: David Sitsky <sits@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Correction - this was with Lucene 2.9.3.

On 26 July 2010 14:21, David Sitsky <sits@nuix.com> wrote:
> Hi,
>
> A customer has been indexing a very large collection of documents that
> has been running over many days using 2.9.0. =C2=A0During the optimisatio=
n
> stage, the following error occurred, and now the index can no longer
> be opened due to the "missing file". =C2=A0I have been told this index is
> on a local RAID disk configuration on a Windows machine. =C2=A0Is there
> anything we can do to somehow "recover" this index to make it useable?
> =C2=A0Any help would be greatly appreciated.
>
> Is this possible this is a bug with 2.9.0?
>
> java.io.IOException: background merge hit exception: _8d:C110892
> _9s:C29548 _b7:C30930 _co:C20063 _e1:C43786 _fj:C102309 _gv:C67123
> _ia:C26329 _jr:C61859 _l5:C38116 _mj:C33069 _ny:C14417 _pe:C13849
> _qs:C21354 _s7:C10683 _u5:C11953 _v1:C12250 _wg:C18405 _xv:C24611
> _zg:C15294 _10p:C20039 _125:C24706 _15d:C17375 _176:C73888 _17r:C13939
> _19c:C9959 _1bz:C66884 _1dg:C6827 _1ex:C33196 _1g8:C16677 _1hn:C23601
> _1j2:C11191 _1kh:C9764 _1lw:C8585 _1nb:C24527 _1oq:C24600 _1q5:C23088
> _1rk:C10578 _1tl:C60504 _1ue:C23005 _1vu:C4571 _1vt:C6 _1vv:C6 _1vw:C1
> _1vx:C4 _1vy:C1 _1vz:C2 _1w0:C1 _1w1:C1 _1w2:C26 into _1w3 [optimize]
> [mergeDocStores]
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.optimiz=
e(IndexWriter.java:2908)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.optimiz=
e(IndexWriter.java:2843)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.optimiz=
e(IndexWriter.java:2813)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0[snip]
> =C2=A0 =C2=A0 =C2=A0 =C2=A0...
> Caused by: java.io.FileNotFoundException: D:\[snip]\TextIndex\_1vw.fdt
> (The system cannot find the file specified)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.open(Native Method=
)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.<init>(RandomAcces=
sFile.java:212)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirectory$S=
impleFSIndexInput$Descriptor.<init>(SimpleFSDirectory.java:78)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirectory$S=
impleFSIndexInput.<init>(SimpleFSDirectory.java:108)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirectory.o=
penInput(SimpleFSDirectory.java:65)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.FieldsReader.<init>=
(FieldsReader.java:104)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader$CoreR=
eaders.openDocStores(SegmentReader.java:291)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader.get(S=
egmentReader.java:654)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader.get(S=
egmentReader.java:622)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter$ReaderP=
ool.get(IndexWriter.java:698)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.mergeMi=
ddle(IndexWriter.java:5062)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.merge(I=
ndexWriter.java:4675)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.ConcurrentMergeSche=
duler.doMerge(ConcurrentMergeScheduler.java:235)
> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.ConcurrentMergeSche=
duler$MergeThread.run(ConcurrentMergeScheduler.java:291)
>
> --
> Cheers,
> David
>



--=20
Cheers,
David

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2 92=
80 0699
Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 06:59:02 2010
Return-Path: <java-user-return-46802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68446 invoked from network); 26 Jul 2010 06:59:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 06:59:02 -0000
Received: (qmail 64874 invoked by uid 500); 26 Jul 2010 06:59:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64373 invoked by uid 500); 26 Jul 2010 06:58:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64364 invoked by uid 99); 26 Jul 2010 06:58:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 06:58:55 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 06:58:49 +0000
Received: by iwn37 with SMTP id 37so3746702iwn.35
        for <java-user@lucene.apache.org>; Sun, 25 Jul 2010 23:58:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.14.137 with SMTP id g9mr7932849iba.183.1280127507519; Sun, 
	25 Jul 2010 23:58:27 -0700 (PDT)
Received: by 10.231.14.131 with HTTP; Sun, 25 Jul 2010 23:58:27 -0700 (PDT)
In-Reply-To: <AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
	<AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
Date: Mon, 26 Jul 2010 16:58:27 +1000
Message-ID: <AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: David Sitsky <sits@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

As another data point, this happened on another index:

java.io.IOException: background merge hit exception: _17a:C1003710
_18h:C66391 _1ct:C45384 _1wt:C104479 _1zo:C23469 _271:C58570
_2dk:C53760 _2h5:C109879 _2ik:C7713 _2ii:C121 _2ij:C243 _2il:C124
_2im:C122 _2in:C115 _2io:C138 _2ip:C131 _2iq:C116 _2ir:C141 _2is:C183
_2it:C147 _2iu:C129 _2iv:C143 _2iw:C111 _2ix:C123 _2iy:C448 _2iz:C157
_2j0:C286 _2j1:C282 _2j2:C191 _2j3:C233 _2j4:C214 _2j5:C153 _2j6:C126
_2j7:C166 _2j8:C411 _2j9:C122 _2ja:C94 _2jb:C2840 _2jc:C70 _2jd:C3
_2je:C878 _2jf:C114 _2jg:C87 _2jh:C61 _2ji:C1 _2jj:C1 _2jk:C5 into
_2jl [optimize] [mergeDocStores]
...
Caused by: java.io.FileNotFoundException: D:\[snip]\_2ji.fdx (The
system cannot find the file specified)

We are going to try using the "check index" tool within Luke to see if
this can help.

In both instances, the Java program which has a single index writer
instance did abnormally terminate, and automatically restarted to
continue indexing.  Is it possible if the program abnormally
terminated while a background merge was occurring that this happen?
In our program, we explicitly control when data is committed.

>From what I can see, the program continued to add more documents to
the index after the restart without issue, before doing the final
optimise operation, which is where the above error comes from, like
the trace I showed before.

On 26 July 2010 14:39, David Sitsky <sits@nuix.com> wrote:
> Correction - this was with Lucene 2.9.3.
>
> On 26 July 2010 14:21, David Sitsky <sits@nuix.com> wrote:
>> Hi,
>>
>> A customer has been indexing a very large collection of documents that
>> has been running over many days using 2.9.0. =C2=A0During the optimisati=
on
>> stage, the following error occurred, and now the index can no longer
>> be opened due to the "missing file". =C2=A0I have been told this index i=
s
>> on a local RAID disk configuration on a Windows machine. =C2=A0Is there
>> anything we can do to somehow "recover" this index to make it useable?
>> =C2=A0Any help would be greatly appreciated.
>>
>> Is this possible this is a bug with 2.9.0?
>>
>> java.io.IOException: background merge hit exception: _8d:C110892
>> _9s:C29548 _b7:C30930 _co:C20063 _e1:C43786 _fj:C102309 _gv:C67123
>> _ia:C26329 _jr:C61859 _l5:C38116 _mj:C33069 _ny:C14417 _pe:C13849
>> _qs:C21354 _s7:C10683 _u5:C11953 _v1:C12250 _wg:C18405 _xv:C24611
>> _zg:C15294 _10p:C20039 _125:C24706 _15d:C17375 _176:C73888 _17r:C13939
>> _19c:C9959 _1bz:C66884 _1dg:C6827 _1ex:C33196 _1g8:C16677 _1hn:C23601
>> _1j2:C11191 _1kh:C9764 _1lw:C8585 _1nb:C24527 _1oq:C24600 _1q5:C23088
>> _1rk:C10578 _1tl:C60504 _1ue:C23005 _1vu:C4571 _1vt:C6 _1vv:C6 _1vw:C1
>> _1vx:C4 _1vy:C1 _1vz:C2 _1w0:C1 _1w1:C1 _1w2:C26 into _1w3 [optimize]
>> [mergeDocStores]
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.optimi=
ze(IndexWriter.java:2908)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.optimi=
ze(IndexWriter.java:2843)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.optimi=
ze(IndexWriter.java:2813)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0[snip]
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0...
>> Caused by: java.io.FileNotFoundException: D:\[snip]\TextIndex\_1vw.fdt
>> (The system cannot find the file specified)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.open(Native Metho=
d)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.<init>(RandomAcce=
ssFile.java:212)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirectory$=
SimpleFSIndexInput$Descriptor.<init>(SimpleFSDirectory.java:78)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirectory$=
SimpleFSIndexInput.<init>(SimpleFSDirectory.java:108)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirectory.=
openInput(SimpleFSDirectory.java:65)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.FieldsReader.<init=
>(FieldsReader.java:104)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader$Core=
Readers.openDocStores(SegmentReader.java:291)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader.get(=
SegmentReader.java:654)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader.get(=
SegmentReader.java:622)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter$Reader=
Pool.get(IndexWriter.java:698)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.mergeM=
iddle(IndexWriter.java:5062)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.merge(=
IndexWriter.java:4675)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.ConcurrentMergeSch=
eduler.doMerge(ConcurrentMergeScheduler.java:235)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.ConcurrentMergeSch=
eduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
>>
>> --
>> Cheers,
>> David
>>
>
>
>
> --
> Cheers,
> David
>
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2 =
9280 0699
> Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902
>



--=20
Cheers,
David

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2 92=
80 0699
Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 10:12:50 2010
Return-Path: <java-user-return-46803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12525 invoked from network); 26 Jul 2010 10:12:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 10:12:50 -0000
Received: (qmail 16628 invoked by uid 500); 26 Jul 2010 10:12:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16371 invoked by uid 500); 26 Jul 2010 10:12:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16363 invoked by uid 99); 26 Jul 2010 10:12:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 10:12:43 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 10:12:38 +0000
Received: by iwn37 with SMTP id 37so3910786iwn.35
        for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 03:12:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.118.28 with SMTP id t28mr7759226ibq.131.1280139131113; 
	Mon, 26 Jul 2010 03:12:11 -0700 (PDT)
Received: by 10.231.14.131 with HTTP; Mon, 26 Jul 2010 03:12:11 -0700 (PDT)
In-Reply-To: <AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
	<AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
	<AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
Date: Mon, 26 Jul 2010 20:12:11 +1000
Message-ID: <AANLkTimjVa36XoFgxY-iCgnQFtAoDwtHP4RJR6C1Hv13@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: David Sitsky <sits@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Running CheckIndex -fix fixed both indexes which is a relief.  In both
cases, it said 1 broken segment containing 1 document detected.

So any ideas on what might have caused this in the first place?

On 26 July 2010 16:58, David Sitsky <sits@nuix.com> wrote:
> As another data point, this happened on another index:
>
> java.io.IOException: background merge hit exception: _17a:C1003710
> _18h:C66391 _1ct:C45384 _1wt:C104479 _1zo:C23469 _271:C58570
> _2dk:C53760 _2h5:C109879 _2ik:C7713 _2ii:C121 _2ij:C243 _2il:C124
> _2im:C122 _2in:C115 _2io:C138 _2ip:C131 _2iq:C116 _2ir:C141 _2is:C183
> _2it:C147 _2iu:C129 _2iv:C143 _2iw:C111 _2ix:C123 _2iy:C448 _2iz:C157
> _2j0:C286 _2j1:C282 _2j2:C191 _2j3:C233 _2j4:C214 _2j5:C153 _2j6:C126
> _2j7:C166 _2j8:C411 _2j9:C122 _2ja:C94 _2jb:C2840 _2jc:C70 _2jd:C3
> _2je:C878 _2jf:C114 _2jg:C87 _2jh:C61 _2ji:C1 _2jj:C1 _2jk:C5 into
> _2jl [optimize] [mergeDocStores]
> ...
> Caused by: java.io.FileNotFoundException: D:\[snip]\_2ji.fdx (The
> system cannot find the file specified)
>
> We are going to try using the "check index" tool within Luke to see if
> this can help.
>
> In both instances, the Java program which has a single index writer
> instance did abnormally terminate, and automatically restarted to
> continue indexing. =C2=A0Is it possible if the program abnormally
> terminated while a background merge was occurring that this happen?
> In our program, we explicitly control when data is committed.
>
> From what I can see, the program continued to add more documents to
> the index after the restart without issue, before doing the final
> optimise operation, which is where the above error comes from, like
> the trace I showed before.
>
> On 26 July 2010 14:39, David Sitsky <sits@nuix.com> wrote:
>> Correction - this was with Lucene 2.9.3.
>>
>> On 26 July 2010 14:21, David Sitsky <sits@nuix.com> wrote:
>>> Hi,
>>>
>>> A customer has been indexing a very large collection of documents that
>>> has been running over many days using 2.9.0. =C2=A0During the optimisat=
ion
>>> stage, the following error occurred, and now the index can no longer
>>> be opened due to the "missing file". =C2=A0I have been told this index =
is
>>> on a local RAID disk configuration on a Windows machine. =C2=A0Is there
>>> anything we can do to somehow "recover" this index to make it useable?
>>> =C2=A0Any help would be greatly appreciated.
>>>
>>> Is this possible this is a bug with 2.9.0?
>>>
>>> java.io.IOException: background merge hit exception: _8d:C110892
>>> _9s:C29548 _b7:C30930 _co:C20063 _e1:C43786 _fj:C102309 _gv:C67123
>>> _ia:C26329 _jr:C61859 _l5:C38116 _mj:C33069 _ny:C14417 _pe:C13849
>>> _qs:C21354 _s7:C10683 _u5:C11953 _v1:C12250 _wg:C18405 _xv:C24611
>>> _zg:C15294 _10p:C20039 _125:C24706 _15d:C17375 _176:C73888 _17r:C13939
>>> _19c:C9959 _1bz:C66884 _1dg:C6827 _1ex:C33196 _1g8:C16677 _1hn:C23601
>>> _1j2:C11191 _1kh:C9764 _1lw:C8585 _1nb:C24527 _1oq:C24600 _1q5:C23088
>>> _1rk:C10578 _1tl:C60504 _1ue:C23005 _1vu:C4571 _1vt:C6 _1vv:C6 _1vw:C1
>>> _1vx:C4 _1vy:C1 _1vz:C2 _1w0:C1 _1w1:C1 _1w2:C26 into _1w3 [optimize]
>>> [mergeDocStores]
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.optim=
ize(IndexWriter.java:2908)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.optim=
ize(IndexWriter.java:2843)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.optim=
ize(IndexWriter.java:2813)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0[snip]
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0...
>>> Caused by: java.io.FileNotFoundException: D:\[snip]\TextIndex\_1vw.fdt
>>> (The system cannot find the file specified)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.open(Native Meth=
od)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.<init>(RandomAcc=
essFile.java:212)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirectory=
$SimpleFSIndexInput$Descriptor.<init>(SimpleFSDirectory.java:78)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirectory=
$SimpleFSIndexInput.<init>(SimpleFSDirectory.java:108)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirectory=
.openInput(SimpleFSDirectory.java:65)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.FieldsReader.<ini=
t>(FieldsReader.java:104)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader$Cor=
eReaders.openDocStores(SegmentReader.java:291)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader.get=
(SegmentReader.java:654)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader.get=
(SegmentReader.java:622)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter$Reade=
rPool.get(IndexWriter.java:698)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.merge=
Middle(IndexWriter.java:5062)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.merge=
(IndexWriter.java:4675)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.ConcurrentMergeSc=
heduler.doMerge(ConcurrentMergeScheduler.java:235)
>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.ConcurrentMergeSc=
heduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
>>>
>>> --
>>> Cheers,
>>> David
>>>
>>
>>
>>
>> --
>> Cheers,
>> David
>>
>> Nuix Pty Ltd
>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2=
 9280 0699
>> Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902
>>
>
>
>
> --
> Cheers,
> David
>
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2 =
9280 0699
> Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902
>



--=20
Cheers,
David

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2 92=
80 0699
Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 12:24:33 2010
Return-Path: <java-user-return-46804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46176 invoked from network); 26 Jul 2010 12:24:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 12:24:32 -0000
Received: (qmail 66481 invoked by uid 500); 26 Jul 2010 12:24:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66117 invoked by uid 500); 26 Jul 2010 12:24:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66109 invoked by uid 99); 26 Jul 2010 12:24:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 12:24:27 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 12:24:21 +0000
Received: by wwa36 with SMTP id 36so70721wwa.5
        for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 05:24:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.155.139 with SMTP id s11mr7212733wbw.221.1280147040510; 
	Mon, 26 Jul 2010 05:24:00 -0700 (PDT)
Received: by 10.216.13.142 with HTTP; Mon, 26 Jul 2010 05:24:00 -0700 (PDT)
In-Reply-To: <AANLkTimjVa36XoFgxY-iCgnQFtAoDwtHP4RJR6C1Hv13@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
	<AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
	<AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
	<AANLkTimjVa36XoFgxY-iCgnQFtAoDwtHP4RJR6C1Hv13@mail.gmail.com>
Date: Mon, 26 Jul 2010 08:24:00 -0400
Message-ID: <AANLkTinJ8F+HBt2JbiuQKDVaOzwQAK78cSNPEnfMTsx0@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

It's great that CheckIndex resolved it, but I'd like to get to the
root cause if possible.

Can you describe how the previous indexing process abnormally
terminated?  Did the JRE crash/get killed?  Did the OS/machine crash /
lose power?

Abnormal termination of any kind, background merges running or not,
should never cause this (unless we have a bug ;) ), except if fsync is
not working correctly and the OS/machine had crashed.

Mike

On Mon, Jul 26, 2010 at 6:12 AM, David Sitsky <sits@nuix.com> wrote:
> Running CheckIndex -fix fixed both indexes which is a relief. =A0In both
> cases, it said 1 broken segment containing 1 document detected.
>
> So any ideas on what might have caused this in the first place?
>
> On 26 July 2010 16:58, David Sitsky <sits@nuix.com> wrote:
>> As another data point, this happened on another index:
>>
>> java.io.IOException: background merge hit exception: _17a:C1003710
>> _18h:C66391 _1ct:C45384 _1wt:C104479 _1zo:C23469 _271:C58570
>> _2dk:C53760 _2h5:C109879 _2ik:C7713 _2ii:C121 _2ij:C243 _2il:C124
>> _2im:C122 _2in:C115 _2io:C138 _2ip:C131 _2iq:C116 _2ir:C141 _2is:C183
>> _2it:C147 _2iu:C129 _2iv:C143 _2iw:C111 _2ix:C123 _2iy:C448 _2iz:C157
>> _2j0:C286 _2j1:C282 _2j2:C191 _2j3:C233 _2j4:C214 _2j5:C153 _2j6:C126
>> _2j7:C166 _2j8:C411 _2j9:C122 _2ja:C94 _2jb:C2840 _2jc:C70 _2jd:C3
>> _2je:C878 _2jf:C114 _2jg:C87 _2jh:C61 _2ji:C1 _2jj:C1 _2jk:C5 into
>> _2jl [optimize] [mergeDocStores]
>> ...
>> Caused by: java.io.FileNotFoundException: D:\[snip]\_2ji.fdx (The
>> system cannot find the file specified)
>>
>> We are going to try using the "check index" tool within Luke to see if
>> this can help.
>>
>> In both instances, the Java program which has a single index writer
>> instance did abnormally terminate, and automatically restarted to
>> continue indexing. =A0Is it possible if the program abnormally
>> terminated while a background merge was occurring that this happen?
>> In our program, we explicitly control when data is committed.
>>
>> From what I can see, the program continued to add more documents to
>> the index after the restart without issue, before doing the final
>> optimise operation, which is where the above error comes from, like
>> the trace I showed before.
>>
>> On 26 July 2010 14:39, David Sitsky <sits@nuix.com> wrote:
>>> Correction - this was with Lucene 2.9.3.
>>>
>>> On 26 July 2010 14:21, David Sitsky <sits@nuix.com> wrote:
>>>> Hi,
>>>>
>>>> A customer has been indexing a very large collection of documents that
>>>> has been running over many days using 2.9.0. =A0During the optimisatio=
n
>>>> stage, the following error occurred, and now the index can no longer
>>>> be opened due to the "missing file". =A0I have been told this index is
>>>> on a local RAID disk configuration on a Windows machine. =A0Is there
>>>> anything we can do to somehow "recover" this index to make it useable?
>>>> =A0Any help would be greatly appreciated.
>>>>
>>>> Is this possible this is a bug with 2.9.0?
>>>>
>>>> java.io.IOException: background merge hit exception: _8d:C110892
>>>> _9s:C29548 _b7:C30930 _co:C20063 _e1:C43786 _fj:C102309 _gv:C67123
>>>> _ia:C26329 _jr:C61859 _l5:C38116 _mj:C33069 _ny:C14417 _pe:C13849
>>>> _qs:C21354 _s7:C10683 _u5:C11953 _v1:C12250 _wg:C18405 _xv:C24611
>>>> _zg:C15294 _10p:C20039 _125:C24706 _15d:C17375 _176:C73888 _17r:C13939
>>>> _19c:C9959 _1bz:C66884 _1dg:C6827 _1ex:C33196 _1g8:C16677 _1hn:C23601
>>>> _1j2:C11191 _1kh:C9764 _1lw:C8585 _1nb:C24527 _1oq:C24600 _1q5:C23088
>>>> _1rk:C10578 _1tl:C60504 _1ue:C23005 _1vu:C4571 _1vt:C6 _1vv:C6 _1vw:C1
>>>> _1vx:C4 _1vy:C1 _1vz:C2 _1w0:C1 _1w1:C1 _1w2:C26 into _1w3 [optimize]
>>>> [mergeDocStores]
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWr=
iter.java:2908)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWr=
iter.java:2843)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.optimize(IndexWr=
iter.java:2813)
>>>> =A0 =A0 =A0 =A0[snip]
>>>> =A0 =A0 =A0 =A0...
>>>> Caused by: java.io.FileNotFoundException: D:\[snip]\TextIndex\_1vw.fdt
>>>> (The system cannot find the file specified)
>>>> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.open(Native Method)
>>>> =A0 =A0 =A0 =A0at java.io.RandomAccessFile.<init>(RandomAccessFile.jav=
a:212)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIn=
dexInput$Descriptor.<init>(SimpleFSDirectory.java:78)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.store.SimpleFSDirectory$SimpleFSIn=
dexInput.<init>(SimpleFSDirectory.java:108)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.store.SimpleFSDirectory.openInput(=
SimpleFSDirectory.java:65)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.FieldsReader.<init>(FieldsRe=
ader.java:104)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentReader$CoreReaders.op=
enDocStores(SegmentReader.java:291)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentReader.get(SegmentRea=
der.java:654)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.SegmentReader.get(SegmentRea=
der.java:622)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter$ReaderPool.get(I=
ndexWriter.java:698)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.mergeMiddle(Inde=
xWriter.java:5062)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.IndexWriter.merge(IndexWrite=
r.java:4675)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.ConcurrentMergeScheduler.doM=
erge(ConcurrentMergeScheduler.java:235)
>>>> =A0 =A0 =A0 =A0at org.apache.lucene.index.ConcurrentMergeScheduler$Mer=
geThread.run(ConcurrentMergeScheduler.java:291)
>>>>
>>>> --
>>>> Cheers,
>>>> David
>>>>
>>>
>>>
>>>
>>> --
>>> Cheers,
>>> David
>>>
>>> Nuix Pty Ltd
>>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=A0 =A0 Ph: +61 2 9280=
 0699
>>> Web: http://www.nuix.com=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0=
 =A0 =A0 Fax: +61 2 9212 6902
>>>
>>
>>
>>
>> --
>> Cheers,
>> David
>>
>> Nuix Pty Ltd
>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=A0 =A0 Ph: +61 2 9280 =
0699
>> Web: http://www.nuix.com=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 Fax: +61 2 9212 6902
>>
>
>
>
> --
> Cheers,
> David
>
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=A0 =A0 Ph: +61 2 9280 0=
699
> Web: http://www.nuix.com=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =
=A0 =A0 Fax: +61 2 9212 6902
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 13:19:00 2010
Return-Path: <java-user-return-46805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68384 invoked from network); 26 Jul 2010 13:19:00 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 13:19:00 -0000
Received: (qmail 32864 invoked by uid 500); 26 Jul 2010 13:18:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32367 invoked by uid 500); 26 Jul 2010 13:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32353 invoked by uid 99); 26 Jul 2010 13:18:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 13:18:53 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mailer.thomas@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 13:18:44 +0000
Received: by fxm11 with SMTP id 11so100168fxm.35
        for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 06:18:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=ESda7NwJLr+96sNWXEcfyLlrPdjOLpNXpSd4KJ+jEJc=;
        b=K6l+oEwZJFNX5rOlrKTfsh/XURII5GMyYrglawamjkBDG06TnRzaUgjWrfryMNEOg/
         27luTEz6cRFCgyLZUQge7t0sGRv1Op03p16ddJ2FM0xZEJ+OEe2geVyf0a/L36MpJ1i/
         zZS3yjO+35uL2xE20W6rYGVe/E5GIQHVHASDA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=wrC1DzlW4PxHO96Grl19CZt2k7O+ZiLbq0hQg3v8AqVrrq3VoSyvCV+tbn95yToymO
         vVG0OIADFSXzGr/Hdk4OmmYq0WXUb5N7sB6LpzGmFDBLDONtV+mnHUCrN0Slv8V/SMVH
         0gut9bDA+RyTUXsL4uTNAeMEKMeXa5I+QYudY=
Received: by 10.223.124.9 with SMTP id s9mr6324594far.91.1280150304192;
        Mon, 26 Jul 2010 06:18:24 -0700 (PDT)
Received: from [192.168.24.135] (funny.informatik.hu-berlin.de [141.20.24.156])
        by mx.google.com with ESMTPS id d15sm807497faa.3.2010.07.26.06.18.23
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 26 Jul 2010 06:18:23 -0700 (PDT)
Message-ID: <4C4D8B1E.9060602@gmail.com>
Date: Mon, 26 Jul 2010 15:18:22 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Fastest way to get number of matching documents
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

for some queries I'm only interested in the number of matching 
documents. Is there a better/faster way to perform such a query, instead 
of retrieving all TopDocs and counting the number of totalHits [1]?
And is it possible/worthwhile to "deactivate" ranking?

Cheers,
     Philippe

[1]
         TopDocs td= is.search(query, is.maxDoc());
         int result= td.totalHits;

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 14:02:13 2010
Return-Path: <java-user-return-46806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77753 invoked from network); 26 Jul 2010 14:02:13 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 14:02:13 -0000
Received: (qmail 9674 invoked by uid 500); 26 Jul 2010 14:02:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9262 invoked by uid 500); 26 Jul 2010 14:02:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9253 invoked by uid 99); 26 Jul 2010 14:02:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 14:02:07 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 14:02:00 +0000
Received: by wyf23 with SMTP id 23so2920586wyf.35
        for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 07:01:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.10.145 with SMTP id 17mr1891988wev.27.1280152898949; Mon, 
	26 Jul 2010 07:01:38 -0700 (PDT)
Received: by 10.216.13.142 with HTTP; Mon, 26 Jul 2010 07:01:37 -0700 (PDT)
In-Reply-To: <4C4D8B1E.9060602@gmail.com>
References: <4C4D8B1E.9060602@gmail.com>
Date: Mon, 26 Jul 2010 10:01:37 -0400
Message-ID: <AANLkTimmFRjOKVG70sQyAtKVHtaLC1R3oMWXrXKtw3qz@mail.gmail.com>
Subject: Re: Fastest way to get number of matching documents
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You can make a custom Collector?  Ie, it'd just increment a counter
for each hit.

As long as it does not call the Scorer.score() method then no scoring is do=
ne.

Mike

On Mon, Jul 26, 2010 at 9:18 AM, Philippe <mailer.thomas@gmail.com> wrote:
> Hi,
>
> for some queries I'm only interested in the number of matching documents.=
 Is
> there a better/faster way to perform such a query, instead of retrieving =
all
> TopDocs and counting the number of totalHits [1]?
> And is it possible/worthwhile to "deactivate" ranking?
>
> Cheers,
> =A0 =A0Philippe
>
> [1]
> =A0 =A0 =A0 =A0TopDocs td=3D is.search(query, is.maxDoc());
> =A0 =A0 =A0 =A0int result=3D td.totalHits;
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 14:26:20 2010
Return-Path: <java-user-return-46807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11316 invoked from network); 26 Jul 2010 14:26:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 14:26:20 -0000
Received: (qmail 71385 invoked by uid 500); 26 Jul 2010 14:26:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71118 invoked by uid 500); 26 Jul 2010 14:26:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71110 invoked by uid 99); 26 Jul 2010 14:26:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 14:26:15 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.96.191.147] (HELO smtp.dfki.de) (134.96.191.147)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 14:26:05 +0000
Received: from smtp.dfki.de (localhost [127.0.0.1])
	by imss.7 (Postfix) with ESMTP id 0A6D23187F
	for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 16:25:45 +0200 (CEST)
Received: from mail.dfki.de (lnv-104.sb.dfki.de [134.96.191.146])
	by smtp.dfki.de (Postfix) with ESMTP id E75053187E
	for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 16:25:44 +0200 (CEST)
Received: from [192.168.178.47] (srbk-4db7fad6.pool.mediaWays.net [77.183.250.214])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.dfki.de (Postfix) with ESMTPSA id C2487311A4
	for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 16:25:44 +0200 (CEST)
Message-Id: <0A0C9E43-D6EB-4071-80FC-E8A5891FC826@activemath.org>
From: Paul Libbrecht <paul@activemath.org>
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTimmFRjOKVG70sQyAtKVHtaLC1R3oMWXrXKtw3qz@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v936)
Subject: Re: Fastest way to get number of matching documents
Date: Mon, 26 Jul 2010 16:25:43 +0200
References: <4C4D8B1E.9060602@gmail.com> <AANLkTimmFRjOKVG70sQyAtKVHtaLC1R3oMWXrXKtw3qz@mail.gmail.com>
X-Mailer: Apple Mail (2.936)
X-Virus-Checked: Checked by ClamAV on apache.org



Le 26-juil.-10 =E0 16:01, Michael McCandless a =E9crit :

> You can make a custom Collector?  Ie, it'd just increment a counter
> for each hit.
> As long as it does not call the Scorer.score() method then no =20
> scoring is done.


I've done that.
Code below.

It feels a bit stupid to have to do that though. Sounds like a normal =20=

thing that should have been done already.

paul


> On Mon, Jul 26, 2010 at 9:18 AM, Philippe <mailer.thomas@gmail.com> =20=

> wrote:
>> Hi,
>>
>> for some queries I'm only interested in the number of matching =20
>> documents. Is
>> there a better/faster way to perform such a query, instead of =20
>> retrieving all
>> TopDocs and counting the number of totalHits [1]?
>> And is it possible/worthwhile to "deactivate" ranking?
>>
>> Cheers,
>>    Philippe
>>
>> [1]
>>        TopDocs td=3D is.search(query, is.maxDoc());
>>        int result=3D td.totalHits;


public class CounterHitCollector extends HitCollector {

     private int count=3D0;

     public void collect(int doc, float score) {
         count++;
     }

     public int getCount() {
         return count;
     }
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 15:06:33 2010
Return-Path: <java-user-return-46808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57298 invoked from network); 26 Jul 2010 15:06:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 15:06:33 -0000
Received: (qmail 24060 invoked by uid 500); 26 Jul 2010 15:06:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23987 invoked by uid 500); 26 Jul 2010 15:06:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23979 invoked by uid 99); 26 Jul 2010 15:06:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 15:06:30 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mailer.thomas@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 15:06:19 +0000
Received: by fxm11 with SMTP id 11so180329fxm.35
        for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 08:05:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=Fe2/ESdnbmqfPojGKOiMlULSQQyBtbntcer4aWRjVag=;
        b=FsrIYupgg3xn3drK22OiwxpxWOppQZxQb4Xdyaq3FEXQRjiQ9y4ZlQQIyQ2QwduQFK
         gxF/M5VL8LYp2VM6zfpzuQATaDbWGsebdbNFRaSH9G/K3FUggtuJlReuDn1Xs7qh2Olt
         1GAkkgoecjvnH0UVWu4IWaqcemoBlQtCKc6X0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=M9MfTzYs/HKR8iCAU8cvsSCnrqvNGiwxDRZ7mG57yKdxI1peNcMzzJqt6ROquGam50
         cqLlOcc+cpWzWrQDUDOKE9a9RnqqXdNn7qUmnuFgPawVC8uNTDG8nK8RNVbQO08ttZZh
         lC2wWjPl7WopCaq5hHxS6BTR9XimJkf6xJGrA=
Received: by 10.223.122.208 with SMTP id m16mr6484118far.88.1280156758509;
        Mon, 26 Jul 2010 08:05:58 -0700 (PDT)
Received: from [192.168.24.135] (funny.informatik.hu-berlin.de [141.20.24.156])
        by mx.google.com with ESMTPS id w11sm1437208fao.13.2010.07.26.08.05.56
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 26 Jul 2010 08:05:57 -0700 (PDT)
Message-ID: <4C4DA453.2030904@gmail.com>
Date: Mon, 26 Jul 2010 17:05:55 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Fastest way to get number of matching documents
References: <4C4D8B1E.9060602@gmail.com> <AANLkTimmFRjOKVG70sQyAtKVHtaLC1R3oMWXrXKtw3qz@mail.gmail.com> <0A0C9E43-D6EB-4071-80FC-E8A5891FC826@activemath.org>
In-Reply-To: <0A0C9E43-D6EB-4071-80FC-E8A5891FC826@activemath.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Paul,

thanks for the code. It is much faster than the implementation before.

Cheers,
     Philippe

Am 26.07.2010 16:25, schrieb Paul Libbrecht:
>
>
> Le 26-juil.-10  16:01, Michael McCandless a crit :
>
>> You can make a custom Collector?  Ie, it'd just increment a counter
>> for each hit.
>> As long as it does not call the Scorer.score() method then no scoring 
>> is done.
>
>
> I've done that.
> Code below.
>
> It feels a bit stupid to have to do that though. Sounds like a normal 
> thing that should have been done already.
>
> paul
>
>
>> On Mon, Jul 26, 2010 at 9:18 AM, Philippe <mailer.thomas@gmail.com> 
>> wrote:
>>> Hi,
>>>
>>> for some queries I'm only interested in the number of matching 
>>> documents. Is
>>> there a better/faster way to perform such a query, instead of 
>>> retrieving all
>>> TopDocs and counting the number of totalHits [1]?
>>> And is it possible/worthwhile to "deactivate" ranking?
>>>
>>> Cheers,
>>>    Philippe
>>>
>>> [1]
>>>        TopDocs td= is.search(query, is.maxDoc());
>>>        int result= td.totalHits;
>
>
> public class CounterHitCollector extends HitCollector {
>
>     private int count=0;
>
>     public void collect(int doc, float score) {
>         count++;
>     }
>
>     public int getCount() {
>         return count;
>     }
> }
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 19:34:47 2010
Return-Path: <java-user-return-46809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61827 invoked from network); 26 Jul 2010 19:34:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 19:34:47 -0000
Received: (qmail 40250 invoked by uid 500); 26 Jul 2010 19:34:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40076 invoked by uid 500); 26 Jul 2010 19:34:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40068 invoked by uid 99); 26 Jul 2010 19:34:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 19:34:44 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mailer.thomas@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 19:34:36 +0000
Received: by eyg5 with SMTP id 5so809982eyg.35
        for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 12:34:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=zmNfM3XORXVaSSTFaxE6rdMhQTBwGPD6ukX2eMVHhRQ=;
        b=N/c/qLY7YHwpDyn8bdLm5a88MmiOAp9bKA/9tNtXRayFbWu88qJvHIvmOd0h2qCFN1
         42ICfLOHGJNrCGsZIDWMBr7A40w8shjoaQMuOL0SmWvePhZtcxKKDbVJC/VD8NydmQUl
         qMpVH4amAHmvB5B840lcXwEMv4uVy1q2qPdPY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=LXkB7cFVOloPISqUChX7vM6ol6pbKbEf8utoQrjXjQrRTzkxXtPDtYCUaGE0Kwy7L2
         deV5oThaXp75k5EubBpQhiKO7HhCybaQcP51WkONSsJxydiELAI7ZAaVCdwMNm8GnVal
         YzqRYIQFWuar8Z9yktHCwCor2ik3BZb72P3Fs=
Received: by 10.213.20.80 with SMTP id e16mr6523962ebb.4.1280172855315;
        Mon, 26 Jul 2010 12:34:15 -0700 (PDT)
Received: from [192.168.2.102] (dslb-188-102-022-071.pools.arcor-ip.net [188.102.22.71])
        by mx.google.com with ESMTPS id v59sm6204296eeh.22.2010.07.26.12.34.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 26 Jul 2010 12:34:14 -0700 (PDT)
Message-ID: <4C4DE335.2090607@gmail.com>
Date: Mon, 26 Jul 2010 21:34:13 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Fast way to get all Terms in a matching query
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I'm looking for an efficient way to query lucene multiple times. All 
queries are an extension of the very first query with only one term. 
(E.g. "Title:Lucene"
      -> "Title:Lucene Title:Apache"
      -> "Title:Lucene Title:Manning"
     ....

My current solution uses "CachingWrapperFilter" wrapped around a 
"QueryWrapperFilter". However, I wanted to know if anybody is aware of a 
faster solution?

Regards,
     Philippe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 26 23:11:13 2010
Return-Path: <java-user-return-46810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55407 invoked from network); 26 Jul 2010 23:11:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 26 Jul 2010 23:11:12 -0000
Received: (qmail 46232 invoked by uid 500); 26 Jul 2010 23:11:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46148 invoked by uid 500); 26 Jul 2010 23:11:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46139 invoked by uid 99); 26 Jul 2010 23:11:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 23:11:10 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Jul 2010 23:11:05 +0000
Received: by gyb13 with SMTP id 13so1729828gyb.35
        for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 16:10:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.52.14 with SMTP id z14mr6230354agz.191.1280185843447; Mon, 
	26 Jul 2010 16:10:43 -0700 (PDT)
Received: by 10.231.14.131 with HTTP; Mon, 26 Jul 2010 16:10:43 -0700 (PDT)
In-Reply-To: <AANLkTinJ8F+HBt2JbiuQKDVaOzwQAK78cSNPEnfMTsx0@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
	<AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
	<AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
	<AANLkTimjVa36XoFgxY-iCgnQFtAoDwtHP4RJR6C1Hv13@mail.gmail.com>
	<AANLkTinJ8F+HBt2JbiuQKDVaOzwQAK78cSNPEnfMTsx0@mail.gmail.com>
Date: Tue, 27 Jul 2010 09:10:43 +1000
Message-ID: <AANLkTikgF_kKA6a+AD3-nah0UX3v5UU7UbkiPR1DzUj5@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: David Sitsky <sits@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

During processing.. there might be a number of reasons why we need to
shutdown the indexing process, but perhaps what is unusual is we call
the win32 API TerminateProcess() call rather than System.exit(), for
slightly obscure reasons.  When calling exit(), this still calls a
large body of code (for example dll shutdown hooks) which in some
situations, we found could "hang" the exiting process, which was a
problem for us.

In a sense, this should be no different to killing the process under
Windows using the task manager, or kill -9 on unix systems.

At no time did the machine itself crash, and the disk involved (I'm
told) was a local RAID filesystem.  I am guessing the disk has write
caching enabled, but given the machine didn't crash, this shouldn't
matter.

Something else that is slightly unusual is we explicitly call commit()
at certain times to flush indexing work to disk.

Its interesting in both instances, CheckIndex said there was 1 broken
segment containing 1 document.

Cheers,
David

On 26 July 2010 22:24, Michael McCandless <lucene@mikemccandless.com> wrote=
:
> It's great that CheckIndex resolved it, but I'd like to get to the
> root cause if possible.
>
> Can you describe how the previous indexing process abnormally
> terminated? =C2=A0Did the JRE crash/get killed? =C2=A0Did the OS/machine =
crash /
> lose power?
>
> Abnormal termination of any kind, background merges running or not,
> should never cause this (unless we have a bug ;) ), except if fsync is
> not working correctly and the OS/machine had crashed.
>
> Mike
>
> On Mon, Jul 26, 2010 at 6:12 AM, David Sitsky <sits@nuix.com> wrote:
>> Running CheckIndex -fix fixed both indexes which is a relief. =C2=A0In b=
oth
>> cases, it said 1 broken segment containing 1 document detected.
>>
>> So any ideas on what might have caused this in the first place?
>>
>> On 26 July 2010 16:58, David Sitsky <sits@nuix.com> wrote:
>>> As another data point, this happened on another index:
>>>
>>> java.io.IOException: background merge hit exception: _17a:C1003710
>>> _18h:C66391 _1ct:C45384 _1wt:C104479 _1zo:C23469 _271:C58570
>>> _2dk:C53760 _2h5:C109879 _2ik:C7713 _2ii:C121 _2ij:C243 _2il:C124
>>> _2im:C122 _2in:C115 _2io:C138 _2ip:C131 _2iq:C116 _2ir:C141 _2is:C183
>>> _2it:C147 _2iu:C129 _2iv:C143 _2iw:C111 _2ix:C123 _2iy:C448 _2iz:C157
>>> _2j0:C286 _2j1:C282 _2j2:C191 _2j3:C233 _2j4:C214 _2j5:C153 _2j6:C126
>>> _2j7:C166 _2j8:C411 _2j9:C122 _2ja:C94 _2jb:C2840 _2jc:C70 _2jd:C3
>>> _2je:C878 _2jf:C114 _2jg:C87 _2jh:C61 _2ji:C1 _2jj:C1 _2jk:C5 into
>>> _2jl [optimize] [mergeDocStores]
>>> ...
>>> Caused by: java.io.FileNotFoundException: D:\[snip]\_2ji.fdx (The
>>> system cannot find the file specified)
>>>
>>> We are going to try using the "check index" tool within Luke to see if
>>> this can help.
>>>
>>> In both instances, the Java program which has a single index writer
>>> instance did abnormally terminate, and automatically restarted to
>>> continue indexing. =C2=A0Is it possible if the program abnormally
>>> terminated while a background merge was occurring that this happen?
>>> In our program, we explicitly control when data is committed.
>>>
>>> From what I can see, the program continued to add more documents to
>>> the index after the restart without issue, before doing the final
>>> optimise operation, which is where the above error comes from, like
>>> the trace I showed before.
>>>
>>> On 26 July 2010 14:39, David Sitsky <sits@nuix.com> wrote:
>>>> Correction - this was with Lucene 2.9.3.
>>>>
>>>> On 26 July 2010 14:21, David Sitsky <sits@nuix.com> wrote:
>>>>> Hi,
>>>>>
>>>>> A customer has been indexing a very large collection of documents tha=
t
>>>>> has been running over many days using 2.9.0. =C2=A0During the optimis=
ation
>>>>> stage, the following error occurred, and now the index can no longer
>>>>> be opened due to the "missing file". =C2=A0I have been told this inde=
x is
>>>>> on a local RAID disk configuration on a Windows machine. =C2=A0Is the=
re
>>>>> anything we can do to somehow "recover" this index to make it useable=
?
>>>>> =C2=A0Any help would be greatly appreciated.
>>>>>
>>>>> Is this possible this is a bug with 2.9.0?
>>>>>
>>>>> java.io.IOException: background merge hit exception: _8d:C110892
>>>>> _9s:C29548 _b7:C30930 _co:C20063 _e1:C43786 _fj:C102309 _gv:C67123
>>>>> _ia:C26329 _jr:C61859 _l5:C38116 _mj:C33069 _ny:C14417 _pe:C13849
>>>>> _qs:C21354 _s7:C10683 _u5:C11953 _v1:C12250 _wg:C18405 _xv:C24611
>>>>> _zg:C15294 _10p:C20039 _125:C24706 _15d:C17375 _176:C73888 _17r:C1393=
9
>>>>> _19c:C9959 _1bz:C66884 _1dg:C6827 _1ex:C33196 _1g8:C16677 _1hn:C23601
>>>>> _1j2:C11191 _1kh:C9764 _1lw:C8585 _1nb:C24527 _1oq:C24600 _1q5:C23088
>>>>> _1rk:C10578 _1tl:C60504 _1ue:C23005 _1vu:C4571 _1vt:C6 _1vv:C6 _1vw:C=
1
>>>>> _1vx:C4 _1vy:C1 _1vz:C2 _1w0:C1 _1w1:C1 _1w2:C26 into _1w3 [optimize]
>>>>> [mergeDocStores]
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.opt=
imize(IndexWriter.java:2908)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.opt=
imize(IndexWriter.java:2843)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.opt=
imize(IndexWriter.java:2813)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0[snip]
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0...
>>>>> Caused by: java.io.FileNotFoundException: D:\[snip]\TextIndex\_1vw.fd=
t
>>>>> (The system cannot find the file specified)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.open(Native Me=
thod)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at java.io.RandomAccessFile.<init>(RandomA=
ccessFile.java:212)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirecto=
ry$SimpleFSIndexInput$Descriptor.<init>(SimpleFSDirectory.java:78)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirecto=
ry$SimpleFSIndexInput.<init>(SimpleFSDirectory.java:108)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.store.SimpleFSDirecto=
ry.openInput(SimpleFSDirectory.java:65)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.FieldsReader.<i=
nit>(FieldsReader.java:104)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader$C=
oreReaders.openDocStores(SegmentReader.java:291)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader.g=
et(SegmentReader.java:654)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.SegmentReader.g=
et(SegmentReader.java:622)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter$Rea=
derPool.get(IndexWriter.java:698)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.mer=
geMiddle(IndexWriter.java:5062)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.IndexWriter.mer=
ge(IndexWriter.java:4675)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.ConcurrentMerge=
Scheduler.doMerge(ConcurrentMergeScheduler.java:235)
>>>>> =C2=A0 =C2=A0 =C2=A0 =C2=A0at org.apache.lucene.index.ConcurrentMerge=
Scheduler$MergeThread.run(ConcurrentMergeScheduler.java:291)
>>>>>
>>>>> --
>>>>> Cheers,
>>>>> David
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Cheers,
>>>> David
>>>>
>>>> Nuix Pty Ltd
>>>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61=
 2 9280 0699
>>>> Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902
>>>>
>>>
>>>
>>>
>>> --
>>> Cheers,
>>> David
>>>
>>> Nuix Pty Ltd
>>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 =
2 9280 0699
>>> Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=
=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902
>>>
>>
>>
>>
>> --
>> Cheers,
>> David
>>
>> Nuix Pty Ltd
>> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2=
 9280 0699
>> Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0=
 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Cheers,
David

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2 92=
80 0699
Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 02:22:44 2010
Return-Path: <java-user-return-46811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19709 invoked from network); 27 Jul 2010 02:22:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 02:22:44 -0000
Received: (qmail 75100 invoked by uid 500); 27 Jul 2010 02:22:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74996 invoked by uid 500); 27 Jul 2010 02:22:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74988 invoked by uid 99); 27 Jul 2010 02:22:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 02:22:41 +0000
X-ASF-Spam-Status: No, hits=2.3 required=10.0
	tests=SPF_HELO_PASS,SPF_SOFTFAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of shravan.mahankali@prithvisolutions.com does not designate 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 02:22:35 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <shravan.mahankali@prithvisolutions.com>)
	id 1OdZo5-0002Fo-Je
	for java-user@lucene.apache.org; Mon, 26 Jul 2010 19:22:13 -0700
Date: Mon, 26 Jul 2010 19:22:13 -0700 (PDT)
From: shravan <shravan.mahankali@prithvisolutions.com>
To: java-user@lucene.apache.org
Message-ID: <1280197333603-998213.post@n3.nabble.com>
Subject: Lucene Index Vs Database Index
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

Can any one clarify me difference between lucene index and database index?

I am just trying to understand how lucene stores index, like databases store
index as b-tree's.

Thank in advance,
Shravan
---------------
-- 
View this message in context: http://lucene.472066.n3.nabble.com/Lucene-Index-Vs-Database-Index-tp998213p998213.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 05:45:43 2010
Return-Path: <java-user-return-46812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77495 invoked from network); 27 Jul 2010 05:45:43 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 05:45:43 -0000
Received: (qmail 71542 invoked by uid 500); 27 Jul 2010 05:45:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71086 invoked by uid 500); 27 Jul 2010 05:45:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71073 invoked by uid 99); 27 Jul 2010 05:45:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 05:45:35 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of findbestopensource@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 05:45:30 +0000
Received: by pxi11 with SMTP id 11so620667pxi.35
        for <java-user@lucene.apache.org>; Mon, 26 Jul 2010 22:45:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=gOParO4xMB8c4OYh2FYNmRDcGEw3NxgSgARcHu7wthM=;
        b=rky6Z9O1P4BE6vSDHgWDCkoFlm9nFOrOipfNgdlbckZZeaycRBXyI27Ay9mqkAmvTN
         laDO6hlMYRlaPUfG70knKbglIMR9/Fqj/y6oD7tASFHq0SInHbhjGslLEhXLjxmP98PT
         AYlqKykzdpwpJKzwV88yuX/e0rfV+ajOv2DYU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=VTTE1qP3kOQ4YAw8M+vK9HWKzfRaEV7+Xf7jbNmEx1kSqN2Q8wtRfnpN7NXOKNtQTZ
         vf2HOaFWf9my8JTatEEcbLdXvY5SBJZrcN9tPuOt/qquJumtQtcwRRQTkRwmxmSnSQA5
         UJvT7XcwSbRATYQ5CE70FKWIvAudhPb4OmP8g=
MIME-Version: 1.0
Received: by 10.142.151.20 with SMTP id y20mr9879461wfd.7.1280209510129; Mon, 
	26 Jul 2010 22:45:10 -0700 (PDT)
Received: by 10.142.84.21 with HTTP; Mon, 26 Jul 2010 22:45:10 -0700 (PDT)
In-Reply-To: <4C4DE335.2090607@gmail.com>
References: <4C4DE335.2090607@gmail.com>
Date: Tue, 27 Jul 2010 11:15:10 +0530
Message-ID: <AANLkTinB1T1YQnURedOXHK-EeKW5QRyxmXMj_sAS8hgR@mail.gmail.com>
Subject: Re: Fast way to get all Terms in a matching query
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

If you know the extension during Index time then you could create a
separate field and store all its related content.

E.G: TITLE_EXTN: Lucene Apache Manning ..

Search on this field will give you faster results.

Regards
Aditya
www.findbestopensource.com


On Tue, Jul 27, 2010 at 1:04 AM, Philippe <mailer.thomas@gmail.com> wrote:
> Hi,
>
> I'm looking for an efficient way to query lucene multiple times. All quer=
ies
> are an extension of the very first query with only one term. (E.g.
> "Title:Lucene"
> =A0 =A0 -> "Title:Lucene Title:Apache"
> =A0 =A0 -> "Title:Lucene Title:Manning"
> =A0 =A0....
>
> My current solution uses "CachingWrapperFilter" wrapped around a
> "QueryWrapperFilter". However, I wanted to know if anybody is aware of a
> faster solution?
>
> Regards,
> =A0 =A0Philippe
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 08:21:47 2010
Return-Path: <java-user-return-46813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37078 invoked from network); 27 Jul 2010 08:21:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 08:21:47 -0000
Received: (qmail 23865 invoked by uid 500); 27 Jul 2010 08:21:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23488 invoked by uid 500); 27 Jul 2010 08:21:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23470 invoked by uid 99); 27 Jul 2010 08:21:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 08:21:39 +0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 08:21:33 +0000
Received: by bwz2 with SMTP id 2so4845063bwz.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 01:21:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=JADz6E9pFYkeHTej71I/WjFTk9xd99pY8iyMUm1tC3Y=;
        b=q8pIbZaba7zWo1YPiWJgOkC47NfygsjiefxrvGRoV2S4fsrkbxEj7BJ5FnscfaRDU8
         cB75MamiQUsXkGj7ZrgGJbv4Ks0+6CVDs4fKFwakbCS5d/PfjJWvDssBXe4VO49jKH0E
         5mj8isL1QlSNDIGHMIUS9Q+kwg57VNO3Q3VeE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Uq/+qA/qxiXtZL+/vKOIAEsD+U/eEFbEP0Ri+oyB3gRLeiKqTbf3vUeaI0m1604/ru
         4VauCZ0bzMkhvW4lavadgYx0xelrCSUBde5xXq5vK7K+A7aNBGfqgEw2vtZfQ4ItVa3+
         carRpOhdQJLAXBq0kYXM8kgMHvUnX3Bv/SPro=
Received: by 10.204.2.139 with SMTP id 11mr6176408bkj.202.1280218872230; Tue, 
	27 Jul 2010 01:21:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Tue, 27 Jul 2010 01:20:52 -0700 (PDT)
In-Reply-To: <1280197333603-998213.post@n3.nabble.com>
References: <1280197333603-998213.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 27 Jul 2010 09:20:52 +0100
Message-ID: <AANLkTikk+Ffsd-fgSM24YrWLMjr4yvzsAhvjg_eAXyPh@mail.gmail.com>
Subject: Re: Lucene Index Vs Database Index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

http://lucene.apache.org/java/3_0_2/fileformats.html#Inverted%20Indexing

--
Ian.

On Tue, Jul 27, 2010 at 3:22 AM, shravan
<shravan.mahankali@prithvisolutions.com> wrote:
>
> Hi,
>
> Can any one clarify me difference between lucene index and database index?
>
> I am just trying to understand how lucene stores index, like databases store
> index as b-tree's.
>
> Thank in advance,
> Shravan
> ---------------
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Lucene-Index-Vs-Database-Index-tp998213p998213.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 11:58:45 2010
Return-Path: <java-user-return-46814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13406 invoked from network); 27 Jul 2010 11:58:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 11:58:45 -0000
Received: (qmail 46387 invoked by uid 500); 27 Jul 2010 11:58:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45928 invoked by uid 500); 27 Jul 2010 11:58:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45920 invoked by uid 99); 27 Jul 2010 11:58:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 11:58:38 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [88.198.74.36] (HELO octopussy.animated-webstyles.de) (88.198.74.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 11:58:31 +0000
Received: from [192.168.2.17] (g228194164.adsl.alicedsl.de [92.228.194.164])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by octopussy.animated-webstyles.de (Postfix) with ESMTP id 8654BA7400F
	for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 13:58:10 +0200 (CEST)
Message-ID: <4C4EC9D0.8020303@avomberg.de>
Date: Tue, 27 Jul 2010 13:58:08 +0200
From: Alexander vom Berg <mail@avomberg.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.11) Gecko/20100711 Lightning/1.0b1 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Structure of .tii-file
References: <AANLkTikaGZCX3etT9aifswnQaqdFvQtOkBrfOmBZfXr3@mail.gmail.com> <AANLkTindk-Pl6ENIx2sXn482UakGN0sz6U74Q6pj4Mqi@mail.gmail.com>
In-Reply-To: <AANLkTindk-Pl6ENIx2sXn482UakGN0sz6U74Q6pj4Mqi@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Mike,

thanks for your answer!
I am currently working with Lucene 3.0.1 and except the .tii - file all 
other descriptions are comprehensible.
The idea behind the tii/tis file structure is for faster retrieving the 
correct terms.
At first I lookup in memory (tii-file) and take the most nearby hit. 
With this information I can skip to the correct position in the tis-file 
and scan up to my final hit. I don't exactly understand how this 
skipping is realized.
Do I have a direct pointer to the postion on the hard drive? Or how do I 
find the term without having to much file access? :D

My intention behind this is that I want to run some performance tests on 
an created index with different block sizes of the hard drive.
Can I just copy this created index on another drive (with different 
blocksize) or do I have to generate the hole index again?

Greetings
Alex


Am 21.07.2010 11:13, schrieb Michael McCandless:
> Best explanation is the source code itself -- it should be correct ;)
>
> Look at how SegmentTermsEnum.next is implemented, pre-flex.  (If
> you're looking @ flex (= trunk), then the format is slightly different
> and not yet correctly documented (issue is open)).
>
> Yes vInt/vLong are the same, except vLong can take up to 9 bytes.  But
> we look @ the high bit of each byte, and keep reading/shifting bytes
> as long as that's 1.  It's a rather CPU unfriendly format since that
> if is usually hard to predict.
>
> Each term is delta coded against the last term, ie we only write the
> changed suffix.  First vInt is suffix start.  Next vInt is suffix end.
>   Then comes the bytes (UTF8 pre-flex, opaque in flex).  In your case
> these both look to be 0?  Ie, first term is the empty string.  Next
> comes the field number as a vInt (pre-flex), but at that point you
> have -1 (encodes as FF FF FF FF 0F in vInt), which is odd -- field
> numbers should be positive.  Must be missing something...
>
> The deltas are then vLong's, delta coded.
>
> Mike
>
> On Wed, Jul 21, 2010 at 4:52 AM, Alexander vom Berg<mail@avomberg.de>  wrote:
>    
>> Hello everybody,
>>
>> I am reading the file format paper and I check it against a created index.
>> The documentation says:
>> TermInfoIndex (.tii)-->  TIVersion, IndexTermCount, IndexInterval,
>> SkipInterval, MaxSkipLevels, TermIndices
>>
>> If I look into the .tii-file I see the following:
>> TIVersion = FF FF FF FC  (4 Bytes)
>> IndexTermCount = 00 00 00 00 00 00 00 0C = 10  (8 Bytes)
>> IndexInterval = 00 00 00 80 = 128  (4 Bytes)
>> SkipInterval = 00 00 00 10 = 16  (4 Bytes)
>> MaxSkipLevels = 00 00 00 0A = 10 (4 Bytes)
>> TermIndices = ?????  (? Bytes)
>>
>> I looked in two indexes and for both the following byte sequences are equal
>> (marked bold):
>> *00 00 FF FF FF FF 0F 00 00 00 18 00* (0B 61 or 0D30 .....)
>>
>> Maybe I don't understand the Map with *<TermInfo, IndexDelta>^IndexTermCount
>> *. How should I calculate the correct byte length?
>> I assume the IndexDelta with VLong has 8 bytes if the leading bit is 0
>> (Similar vo VInt or is VLong somewhere described?). TermInfo is explained in
>> the .tis file section.
>>
>> TermIndices   =<TermInfo, IndexDelta>
>>
>> =<(Term,DocFreq,FreqDelta,ProxDelta,SkipDelta), IndexDelta>
>> =<([PrefixLength,Suffix,FieldNum],DocFreq,FreqDelta,ProxDelta,SkipDelta),
>>          IndexDelta>
>> =<([        00         ,  00     ,        FF  ],        FF   ,      FF
>>   ,      FF      ,      0F      ),   00 00 00 18 00 0B 61 6E>
>>
>>
>>
>> IndexDelta is to large for my small index! Also DocFreq is to large because
>> I only have 16 documents in total. :(
>>
>> Can somebody tell me how to read the bytes correctly from the file? I would
>> like to find the correct position in the .tis file from .tii data.
>>
>> Best regards
>> Alex
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 12:38:40 2010
Return-Path: <java-user-return-46815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37135 invoked from network); 27 Jul 2010 12:38:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 12:38:40 -0000
Received: (qmail 80553 invoked by uid 500); 27 Jul 2010 12:38:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80272 invoked by uid 500); 27 Jul 2010 12:38:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80263 invoked by uid 99); 27 Jul 2010 12:38:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 12:38:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 12:38:28 +0000
Received: by wwa36 with SMTP id 36so942891wwa.5
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 05:38:07 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.187.16 with SMTP id x16mr8818829wem.104.1280234286771; 
	Tue, 27 Jul 2010 05:38:06 -0700 (PDT)
Received: by 10.216.13.142 with HTTP; Tue, 27 Jul 2010 05:38:06 -0700 (PDT)
In-Reply-To: <4C4EC9D0.8020303@avomberg.de>
References: <AANLkTikaGZCX3etT9aifswnQaqdFvQtOkBrfOmBZfXr3@mail.gmail.com>
	<AANLkTindk-Pl6ENIx2sXn482UakGN0sz6U74Q6pj4Mqi@mail.gmail.com>
	<4C4EC9D0.8020303@avomberg.de>
Date: Tue, 27 Jul 2010 08:38:06 -0400
Message-ID: <AANLkTinuFz6qMUXef_JTNHFczcbrO=ELejDC-vjtUN8Y@mail.gmail.com>
Subject: Re: Structure of .tii-file
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Tue, Jul 27, 2010 at 7:58 AM, Alexander vom Berg <mail@avomberg.de> wrote:
> Hello Mike,
>
> thanks for your answer!
> I am currently working with Lucene 3.0.1 and except the .tii - file all
> other descriptions are comprehensible.
> The idea behind the tii/tis file structure is for faster retrieving the
> correct terms.
> At first I lookup in memory (tii-file) and take the most nearby hit. With
> this information I can skip to the correct position in the tis-file and scan
> up to my final hit. I don't exactly understand how this skipping is
> realized.
> Do I have a direct pointer to the postion on the hard drive? Or how do I
> find the term without having to much file access? :D

Yes, you have to seek the tis file handle, then you do .next() until
the term matches.  Maybe you stop there, eg if you're just looking for
say the docFreq of that term.  Or, if you then need to iterate the
docs/positions, from that term entry you have the long file pointers
of frq and prx files, which you must seek to and decode.

Btw, what is it that you are doing?  You seem to be re-inventing
Lucene :)  You could simply use Lucene's low level APIs to do this...

> My intention behind this is that I want to run some performance tests on an
> created index with different block sizes of the hard drive.
> Can I just copy this created index on another drive (with different
> blocksize) or do I have to generate the hole index again?

Ahhh.

You mean the block size of the underlying filesystem?  If so, then
copying will be fine in that the resulting index will function
correctly.

However, this may not be a fair performance test since with 'cp'
presumably the IO system may have optimized how the files are
allocated to blocks on disk. Ie, you'll get a different allocation
than had Lucene directly opened these files and written them itself on
the 2nd file system.  You could test both approaches and see if
there's a difference!

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 12:44:30 2010
Return-Path: <java-user-return-46816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39294 invoked from network); 27 Jul 2010 12:44:30 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 12:44:30 -0000
Received: (qmail 89231 invoked by uid 500); 27 Jul 2010 12:44:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88889 invoked by uid 500); 27 Jul 2010 12:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88873 invoked by uid 99); 27 Jul 2010 12:44:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 12:44:24 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 12:44:16 +0000
Received: by wwa36 with SMTP id 36so947585wwa.5
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 05:43:56 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.148.2 with SMTP id n2mr8722691wbv.216.1280234635880; Tue, 
	27 Jul 2010 05:43:55 -0700 (PDT)
Received: by 10.216.13.142 with HTTP; Tue, 27 Jul 2010 05:43:55 -0700 (PDT)
In-Reply-To: <AANLkTikgF_kKA6a+AD3-nah0UX3v5UU7UbkiPR1DzUj5@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
	<AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
	<AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
	<AANLkTimjVa36XoFgxY-iCgnQFtAoDwtHP4RJR6C1Hv13@mail.gmail.com>
	<AANLkTinJ8F+HBt2JbiuQKDVaOzwQAK78cSNPEnfMTsx0@mail.gmail.com>
	<AANLkTikgF_kKA6a+AD3-nah0UX3v5UU7UbkiPR1DzUj5@mail.gmail.com>
Date: Tue, 27 Jul 2010 08:43:55 -0400
Message-ID: <AANLkTinNrh44cNfKDyHWUAArh5RKKyD+EpJaKJbz39AE@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, Jul 26, 2010 at 7:10 PM, David Sitsky <sits@nuix.com> wrote:
> During processing.. there might be a number of reasons why we need to
> shutdown the indexing process, but perhaps what is unusual is we call
> the win32 API TerminateProcess() call rather than System.exit(), for
> slightly obscure reasons. =A0When calling exit(), this still calls a
> large body of code (for example dll shutdown hooks) which in some
> situations, we found could "hang" the exiting process, which was a
> problem for us.
>
> In a sense, this should be no different to killing the process under
> Windows using the task manager, or kill -9 on unix systems.

OK.  Lucene should be fine after a kill -9 or a TerminateProcess,
assuming Windows really does act like Unix and any "committed" IO
operations done by the process prior to the kill are in fact committed
to the filesystem.

> At no time did the machine itself crash, and the disk involved (I'm
> told) was a local RAID filesystem. =A0I am guessing the disk has write
> caching enabled, but given the machine didn't crash, this shouldn't
> matter.

Right, the write caching shouldn't matter since the machine didn't go down.

> Something else that is slightly unusual is we explicitly call commit()
> at certain times to flush indexing work to disk.

OK that's fine.

> Its interesting in both instances, CheckIndex said there was 1 broken
> segment containing 1 document.

Yeah that is curious.... I'll try to mull.

Any chance you could run with an infoStream set on IndexWriter?  Then
if this happens again I can pour over that...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 12:51:04 2010
Return-Path: <java-user-return-46817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42548 invoked from network); 27 Jul 2010 12:51:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 12:51:04 -0000
Received: (qmail 1390 invoked by uid 500); 27 Jul 2010 12:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 980 invoked by uid 500); 27 Jul 2010 12:50:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 967 invoked by uid 99); 27 Jul 2010 12:50:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 12:50:57 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mailer.thomas@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 12:50:49 +0000
Received: by fxm11 with SMTP id 11so689303fxm.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 05:50:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=B9hjYL0zy6pYAsjJuatRezPN2JSbd6zPzO/EEOKdsLc=;
        b=JEBO2oL+NAOCW8S9fUlgQff3ngw8cmsUOse3Xj1gG30z9t7eMSdg7+EGroVs4Bdznl
         mxXLaggZTipsxBef1R0/aq0dEAoyen6qNVsai2bMEri0m28OFZIKZPlm6J8aZJHGe4/N
         KBeZ7BFrUzUIoFBf4Mst15K2buKQMOX/+0qfk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=cf8bm6gRfgbHwlfSyeQriupBrq+1Yd5OuzayDjBeUvXE1n8pQAZT9NiMdVvk7iI/b6
         jSPiwd1nddmhUg6gUMk31KWH/mjKZZGp5/bPFWc5miWI00ovnc5je6iXHWTcecFIQtBw
         AE6Pb4ukypBmWP29+jwHn4I01sGNCSLdsLpUU=
Received: by 10.223.117.17 with SMTP id o17mr8011781faq.54.1280235028534;
        Tue, 27 Jul 2010 05:50:28 -0700 (PDT)
Received: from [192.168.24.135] (funny.informatik.hu-berlin.de [141.20.24.156])
        by mx.google.com with ESMTPS id c5sm1887292fac.43.2010.07.27.05.50.27
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 27 Jul 2010 05:50:28 -0700 (PDT)
Message-ID: <4C4ED613.7070201@gmail.com>
Date: Tue, 27 Jul 2010 14:50:27 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.10) Gecko/20100527 Thunderbird/3.0.5
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Get all terms of a specific field
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

what would be the fastest way to get all terms for all documents 
matching a specific query?

Sofar I:

1.) Query the index
2.) Retrieve all scoreDocs
3.) Iterate the scoreDocs and retrieve all terms using the getValues 
method and a customised "FieldSelector"

However, retrieving and iterating the scoredocs is quite costly.  So is 
there a better/faster way to perform this?

Cheers,
     Philippe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 15:17:57 2010
Return-Path: <java-user-return-46818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33565 invoked from network); 27 Jul 2010 15:17:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 15:17:57 -0000
Received: (qmail 92178 invoked by uid 500); 27 Jul 2010 15:17:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92108 invoked by uid 500); 27 Jul 2010 15:17:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92100 invoked by uid 99); 27 Jul 2010 15:17:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 15:17:53 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 27 Jul 2010 15:17:53 +0000
Received: (qmail 33007 invoked by uid 99); 27 Jul 2010 15:17:33 -0000
Received: from localhost.apache.org (HELO [172.16.19.157]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 15:17:33 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Get all terms of a specific field
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <4C4ED613.7070201@gmail.com>
Date: Tue, 27 Jul 2010 11:17:32 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <2DD6F926-4CB2-4523-9073-4A36F6112F07@apache.org>
References: <4C4ED613.7070201@gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)



On Jul 27, 2010, at 8:50 AM, Philippe wrote:

> Hi,
>=20
> what would be the fastest way to get all terms for all documents =
matching a specific query?
>=20
> Sofar I:
>=20
> 1.) Query the index
> 2.) Retrieve all scoreDocs
> 3.) Iterate the scoreDocs and retrieve all terms using the getValues =
method and a customised "FieldSelector"
>=20
> However, retrieving and iterating the scoredocs is quite costly.  So =
is there a better/faster way to perform this?


If you can afford to store TermVectors (disk is cheap, right?) then it =
will give you back the terms post analysis and you won't have to split =
again, which you would have to do if you use the getValues() approach.  =
You might also hook into the Collector (HitCollector) and build it as =
you go, assuming you don't need the score docs structure.

-Grant



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 15:31:13 2010
Return-Path: <java-user-return-46819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39058 invoked from network); 27 Jul 2010 15:31:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 15:31:12 -0000
Received: (qmail 4226 invoked by uid 500); 27 Jul 2010 15:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4174 invoked by uid 500); 27 Jul 2010 15:31:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4166 invoked by uid 99); 27 Jul 2010 15:31:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 15:31:09 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received: from [140.211.11.9] (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 27 Jul 2010 15:31:07 +0000
Received: (qmail 38490 invoked by uid 99); 27 Jul 2010 15:30:45 -0000
Received: from localhost.apache.org (HELO [172.16.19.157]) (127.0.0.1)
  (smtp-auth username gsingers, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 15:30:45 +0000
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1081)
Subject: Re: Different ranking results
From: Grant Ingersoll <gsingers@apache.org>
In-Reply-To: <4C4765E3.5080702@gmail.com>
Date: Tue, 27 Jul 2010 11:30:44 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <F8748201-A78E-4CFF-ABE9-E6AE8104C5B9@apache.org>
References: <4C4765E3.5080702@gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1081)
X-Virus-Checked: Checked by ClamAV on apache.org

Can you post a full example as a Unit test?

On Jul 21, 2010, at 5:25 PM, Philippe wrote:

> Hi,
>=20
> I just performed two queries which, in my opinion, should lead to the =
same document rankings. However, the document ranking differ between =
these two queries. For better understanding I prepared  minimal examples =
for both queries. In my understanding both queries perform the same =
task. Namely search for "lucene" in two different fields.
>=20
> Maybe someone can explain me my misunderstanding?
>=20
>=20
> String[] fields =3D {"TITLE", "BOOK"};
> MultiFieldQueryParser parser =3D new =
MultiFieldQueryParser(Version.LUCENE_29, fields, new =
StandardAnalyzer(Version.LUCENE_29));
>=20
> 1.)
> Query q =3D parser.parse("lucene");
>=20
> 2.)
> Query q =3D parser.parse(TITLE:lucene OR BOOK:lucene);
>=20
> Regards,
>    philippe
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

--------------------------
Grant Ingersoll
http://www.lucidimagination.com/

Search the Lucene ecosystem docs using Solr/Lucene:
http://www.lucidimagination.com/search


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 15:44:49 2010
Return-Path: <java-user-return-46820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42992 invoked from network); 27 Jul 2010 15:44:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 15:44:48 -0000
Received: (qmail 18076 invoked by uid 500); 27 Jul 2010 15:44:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18018 invoked by uid 500); 27 Jul 2010 15:44:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18010 invoked by uid 99); 27 Jul 2010 15:44:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 15:44:46 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 15:44:39 +0000
Received: by wwa36 with SMTP id 36so1113643wwa.5
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 08:44:19 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.30.207 with SMTP id k57mr9065149wea.88.1280245458889; Tue, 
	27 Jul 2010 08:44:18 -0700 (PDT)
Received: by 10.216.13.142 with HTTP; Tue, 27 Jul 2010 08:44:18 -0700 (PDT)
In-Reply-To: <AANLkTinNrh44cNfKDyHWUAArh5RKKyD+EpJaKJbz39AE@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
	<AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
	<AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
	<AANLkTimjVa36XoFgxY-iCgnQFtAoDwtHP4RJR6C1Hv13@mail.gmail.com>
	<AANLkTinJ8F+HBt2JbiuQKDVaOzwQAK78cSNPEnfMTsx0@mail.gmail.com>
	<AANLkTikgF_kKA6a+AD3-nah0UX3v5UU7UbkiPR1DzUj5@mail.gmail.com>
	<AANLkTinNrh44cNfKDyHWUAArh5RKKyD+EpJaKJbz39AE@mail.gmail.com>
Date: Tue, 27 Jul 2010 11:44:18 -0400
Message-ID: <AANLkTi=GW7hzeoC8XB6LFPFsejcsF=8P8yA=RbDah+ok@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Were there any exceptions during indexing, before the
TerminateProcess() call?  EG OOME?

Mike

On Tue, Jul 27, 2010 at 8:43 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> On Mon, Jul 26, 2010 at 7:10 PM, David Sitsky <sits@nuix.com> wrote:
>> During processing.. there might be a number of reasons why we need to
>> shutdown the indexing process, but perhaps what is unusual is we call
>> the win32 API TerminateProcess() call rather than System.exit(), for
>> slightly obscure reasons. =A0When calling exit(), this still calls a
>> large body of code (for example dll shutdown hooks) which in some
>> situations, we found could "hang" the exiting process, which was a
>> problem for us.
>>
>> In a sense, this should be no different to killing the process under
>> Windows using the task manager, or kill -9 on unix systems.
>
> OK. =A0Lucene should be fine after a kill -9 or a TerminateProcess,
> assuming Windows really does act like Unix and any "committed" IO
> operations done by the process prior to the kill are in fact committed
> to the filesystem.
>
>> At no time did the machine itself crash, and the disk involved (I'm
>> told) was a local RAID filesystem. =A0I am guessing the disk has write
>> caching enabled, but given the machine didn't crash, this shouldn't
>> matter.
>
> Right, the write caching shouldn't matter since the machine didn't go dow=
n.
>
>> Something else that is slightly unusual is we explicitly call commit()
>> at certain times to flush indexing work to disk.
>
> OK that's fine.
>
>> Its interesting in both instances, CheckIndex said there was 1 broken
>> segment containing 1 document.
>
> Yeah that is curious.... I'll try to mull.
>
> Any chance you could run with an infoStream set on IndexWriter? =A0Then
> if this happens again I can pour over that...
>
> Mike
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 16:06:59 2010
Return-Path: <java-user-return-46821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52449 invoked from network); 27 Jul 2010 16:06:59 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 16:06:59 -0000
Received: (qmail 59396 invoked by uid 500); 27 Jul 2010 16:06:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58841 invoked by uid 500); 27 Jul 2010 16:06:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58833 invoked by uid 99); 27 Jul 2010 16:06:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 16:06:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [88.198.74.36] (HELO octopussy.animated-webstyles.de) (88.198.74.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 16:06:49 +0000
Received: from [192.168.2.17] (g228194164.adsl.alicedsl.de [92.228.194.164])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by octopussy.animated-webstyles.de (Postfix) with ESMTP id AF181A74010
	for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 18:06:27 +0200 (CEST)
Message-ID: <4C4F0402.3080604@avomberg.de>
Date: Tue, 27 Jul 2010 18:06:26 +0200
From: Alexander vom Berg <mail@avomberg.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.1.11) Gecko/20100711 Lightning/1.0b1 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Structure of .tii-file
References: <AANLkTikaGZCX3etT9aifswnQaqdFvQtOkBrfOmBZfXr3@mail.gmail.com>	<AANLkTindk-Pl6ENIx2sXn482UakGN0sz6U74Q6pj4Mqi@mail.gmail.com>	<4C4EC9D0.8020303@avomberg.de> <AANLkTinuFz6qMUXef_JTNHFczcbrO=ELejDC-vjtUN8Y@mail.gmail.com>
In-Reply-To: <AANLkTinuFz6qMUXef_JTNHFczcbrO=ELejDC-vjtUN8Y@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hello Mike,

Am 27.07.2010 14:38, schrieb Michael McCandless:
> On Tue, Jul 27, 2010 at 7:58 AM, Alexander vom Berg<mail@avomberg.de>  wrote:
>    
>> Hello Mike,
>>
>> thanks for your answer!
>> I am currently working with Lucene 3.0.1 and except the .tii - file all
>> other descriptions are comprehensible.
>> The idea behind the tii/tis file structure is for faster retrieving the
>> correct terms.
>> At first I lookup in memory (tii-file) and take the most nearby hit. With
>> this information I can skip to the correct position in the tis-file and scan
>> up to my final hit. I don't exactly understand how this skipping is
>> realized.
>> Do I have a direct pointer to the postion on the hard drive? Or how do I
>> find the term without having to much file access? :D
>>      
> Yes, you have to seek the tis file handle, then you do .next() until
> the term matches.  Maybe you stop there, eg if you're just looking for
> say the docFreq of that term.  Or, if you then need to iterate the
> docs/positions, from that term entry you have the long file pointers
> of frq and prx files, which you must seek to and decode.
>
> Btw, what is it that you are doing?  You seem to be re-inventing
> Lucene :)  You could simply use Lucene's low level APIs to do this...
>
>    

this was meant more as a question and if my assumptions how Lucene works 
are correct. :) Sorry for beeing unclear.
I don't want to implement it myself!

>> My intention behind this is that I want to run some performance tests on an
>> created index with different block sizes of the hard drive.
>> Can I just copy this created index on another drive (with different
>> blocksize) or do I have to generate the hole index again?
>>      
> Ahhh.
>
> You mean the block size of the underlying filesystem?  If so, then
> copying will be fine in that the resulting index will function
> correctly.
>
> However, this may not be a fair performance test since with 'cp'
> presumably the IO system may have optimized how the files are
> allocated to blocks on disk. Ie, you'll get a different allocation
> than had Lucene directly opened these files and written them itself on
> the 2nd file system.  You could test both approaches and see if
> there's a difference!
>
>    

Do you mean problems with fragmentation here? Or what exactly is the 
difference after I copy the index (faster because it's defragmented?)?
What happens if I use the copy-Method from 
org.apache.lucene.store.Directory?

> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    

Best regards
Alex

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 18:20:36 2010
Return-Path: <java-user-return-46822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2058 invoked from network); 27 Jul 2010 18:20:36 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 18:20:36 -0000
Received: (qmail 46540 invoked by uid 500); 27 Jul 2010 18:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46437 invoked by uid 500); 27 Jul 2010 18:20:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46429 invoked by uid 99); 27 Jul 2010 18:20:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 18:20:33 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 18:20:26 +0000
Received: by wyf23 with SMTP id 23so4656322wyf.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 11:20:06 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.134.18 with SMTP id h18mr9304231wbt.94.1280254805908; Tue, 
	27 Jul 2010 11:20:05 -0700 (PDT)
Received: by 10.216.13.142 with HTTP; Tue, 27 Jul 2010 11:20:05 -0700 (PDT)
In-Reply-To: <4C4F0402.3080604@avomberg.de>
References: <AANLkTikaGZCX3etT9aifswnQaqdFvQtOkBrfOmBZfXr3@mail.gmail.com>
	<AANLkTindk-Pl6ENIx2sXn482UakGN0sz6U74Q6pj4Mqi@mail.gmail.com>
	<4C4EC9D0.8020303@avomberg.de>
	<AANLkTinuFz6qMUXef_JTNHFczcbrO=ELejDC-vjtUN8Y@mail.gmail.com>
	<4C4F0402.3080604@avomberg.de>
Date: Tue, 27 Jul 2010 14:20:05 -0400
Message-ID: <AANLkTi=K6sNGLSfWTwk=9f1tW+9jQ0Sd0Y3C2eR5SAxV@mail.gmail.com>
Subject: Re: Structure of .tii-file
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jul 27, 2010 at 12:06 PM, Alexander vom Berg <mail@avomberg.de> wro=
te:

>> However, this may not be a fair performance test since with 'cp'
>> presumably the IO system may have optimized how the files are
>> allocated to blocks on disk. Ie, you'll get a different allocation
>> than had Lucene directly opened these files and written them itself on
>> the 2nd file system. =A0You could test both approaches and see if
>> there's a difference!
>
> Do you mean problems with fragmentation here? Or what exactly is the
> difference after I copy the index (faster because it's defragmented?)?

Yes I meant defragmented.  EG the cp command probably notifies the OS
up-front how large the target file will be, so, the IO system could
[conceivably] do a better job (less fragmentation) assigning blocks to
the file.  I'm not sure that this happens in practice though, and it's
surely filesystem dependent.

> What happens if I use the copy-Method from
> org.apache.lucene.store.Directory?

Well... that should be closer to having written the index directly?
But I'm not sure if it will be the same.  EG when Lucene is writing
the index, it writes the bytes to multiple (.frq, .prx, .tis, .tii)
files "concurrently", and at a somewhat slow-ish rate, while a copy
does one file at once at a very high rate.  So I'm not sure if this
difference will alter block assigment....

Also, whether you use CFS or not is also a factor: Lucene tries to
notify the OS on the final size when building the CFS (which
should/may help reduce fragmentation).

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 20:19:29 2010
Return-Path: <java-user-return-46823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51299 invoked from network); 27 Jul 2010 20:19:29 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 20:19:29 -0000
Received: (qmail 92442 invoked by uid 500); 27 Jul 2010 20:19:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92334 invoked by uid 500); 27 Jul 2010 20:19:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92326 invoked by uid 99); 27 Jul 2010 20:19:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 20:19:26 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of geirgp@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 20:19:18 +0000
Received: by fxm11 with SMTP id 11so1041464fxm.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 13:18:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=oS6pNEPwJWlnj3dNif696lhvcs2T1OggP2B7f/0iaBE=;
        b=JCp3wLbu/zhKL+XAGKXq/r/ZR9CprA3t/Pk3l6BLMUZo57Br7OoLWyGPlNatg0/ZDF
         Wv2gHOTUGd9En3wCPCBT5EHov+XExfXXjJcbZUqsipYBgFYF50rQZSduNNzDtgFrAuE2
         y2YpEU1fJzl2+0cItqN9RH4/mdW/kbDAyGSJk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=g1h2nA0FQ5ynN6sOtxisEDUzwdiUfO8d/wC2SRM9dXA8ZUntXcoNzIvJIHypmEv3Jd
         YaXbMJjI+oP8fcCLNOBpX4y/lGDd3AMpakLmxzBiE7MAiVEC3E1Ga6fkBwTjEJGlBYDV
         Ovbku3BU5FHNGdfwSQ0x2aHjjxQ+VJhro4Xbk=
Received: by 10.223.103.67 with SMTP id j3mr8603358fao.99.1280261938227; Tue, 
	27 Jul 2010 13:18:58 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.123.11 with HTTP; Tue, 27 Jul 2010 13:18:38 -0700 (PDT)
From: Geir Gullestad Pettersen <geirgp@gmail.com>
Date: Tue, 27 Jul 2010 22:18:38 +0200
Message-ID: <AANLkTin2-_0_KzmfCfk5nNiv-oZ29iTsw_KJAHFYKURq@mail.gmail.com>
Subject: No hits when querying multiple fields
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636eef00b0c2863048c6436a0
X-Virus-Checked: Checked by ClamAV on apache.org

--001636eef00b0c2863048c6436a0
Content-Type: text/plain; charset=UTF-8

Consider the following two documents which I have added to my index:

doc.add( new Field("text", "hello world", Field.Store.YES,
> Field.Index.ANALYZED));
> doc.add( new Field("id", "1", Field.Store.YES, Field.Index.ANALYZED));
>


Using the StandardQueryParser I can retrieve my document with either of
these two queries:

1) title:"hello world"
>
and

> 2) id:"1"
>

however, if I try AND'ing the above two, I get 0 results:

> 3) title:"hello world" AND id:"1"
>

If I remove the AND  and modify the first term to something that i know is
not in my document, I also find my document:

> 4) title:"no match" id:"1"
>
..so i guess leaving out the keywork AND turns it into an OR query, not what
I want.


In the debugging process I have tried passing the toString() of the Query
object returned from the StandardQueryParser to System.out, and it shows the
following for the above queries:
1) *title:"hello world"* ->Query.toString()->* title:"hello world"*
2) *id:"1" ->* Query.toString ->* id:1*
3) *title:"hello world" AND id:"1"* -> Query.toString() -> *+title:"hello
world" +id:1*
4) *title:"hello world" id:"1"* -> Query.toString() -> *title:"hello world"
id:1

*The only things noticable is quotations being removed from the "id"-term,
and  #3 where the AND is removed and a + is prefixed the field names.
Iunderstand that the + sign in front of the field name means that the term
has to exist in that field, so essentially my queries seem to have been
parsed as expected

Queries 1,2 and 4 all return results as expected, but can anyone tell me why
number #3 - the AND query - does not return my document? it is essentially
an AND between query #1 and #2 which both match the document.

I have also tried construction a query manually:

BooleanQuery query = new BooleanQuery();
> TermQuery textQuery = new TermQuery(new Term("text","hello world"));
> TermQuery idQuery = new TermQuery(new Term("id","1"));
> query.add(textQuery, Occur.MUST);
> query.add(iddQuery, Occur.MUST);
>

.. but just as with the above query #3 I get nothing back. passing this
Query's toString() output to System.out also gives me the same as for #3:
5) *title:"hello world" AND id:"1"* -> Query.toString() -> *+title:"hello
world" +id:"1"*

Can anyone please tell me what I'm doing wrong? I just want to and queries
#1 and #2 which both match my document when executed alone..


Thank you very much,
Geir Pettersen

--001636eef00b0c2863048c6436a0--

From java-user-return-46824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 20:35:05 2010
Return-Path: <java-user-return-46824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56750 invoked from network); 27 Jul 2010 20:35:05 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 20:35:05 -0000
Received: (qmail 19606 invoked by uid 500); 27 Jul 2010 20:35:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19551 invoked by uid 500); 27 Jul 2010 20:35:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19543 invoked by uid 99); 27 Jul 2010 20:35:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 20:35:02 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of geirgp@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 20:34:55 +0000
Received: by fxm11 with SMTP id 11so1050776fxm.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 13:34:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=VCy+IAiKFF9RcC5dlutJBYrL8khhA8EuGX19sVoUaCg=;
        b=otm8DVq8tkRUdHroa+nuoXe3ykj9J8ihhBb2d3BFQ7DicND4Y8lMrIzjb1Gv3pW85A
         sTld0iluoti62CLs6yHVXBqYNQrQJ62GhBtXqTLEbezZCwuU78s3TvidNvPUestwH/mm
         YZrF71QkQ2f7o16MdxRvFbl2GK8OqlyJ4QG3c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=kBEeCPLjL4Ttg3r6mw1gmpGE+/acQkxZlZgkNY/Tb/J4PC5frmKdPFo+PpCEuvjd7D
         H8ejkLBZMdUSK9TNLG2iXFXwDi30Lo2PtsDlAgCamxcLL4qRQ1EnoT1XVSrRnvNRzmvr
         y9G5Oya3p7v58eE9KFXAuEWtK01GG3fSlmfpo=
Received: by 10.223.115.194 with SMTP id j2mr8716180faq.47.1280262861139; Tue, 
	27 Jul 2010 13:34:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.123.11 with HTTP; Tue, 27 Jul 2010 13:34:01 -0700 (PDT)
In-Reply-To: <AANLkTi=zsDRMTxKTUus=5yVJZvb15_=3s-dshH_eDJe0@mail.gmail.com>
References: <AANLkTilQg3ARa8V70eujT1Qk0DbJJJoCFElf_0tCWT5u@mail.gmail.com> 
	<AANLkTi=zsDRMTxKTUus=5yVJZvb15_=3s-dshH_eDJe0@mail.gmail.com>
From: Geir Gullestad Pettersen <geirgp@gmail.com>
Date: Tue, 27 Jul 2010 22:34:01 +0200
Message-ID: <AANLkTim4iUeAi0HKRpCQpXTztDYRYTi27n6g1yT1uPbF@mail.gmail.com>
Subject: Re: Using lucene for substring matching
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636d34e220eaf0d048c646dc2

--001636d34e220eaf0d048c646dc2
Content-Type: text/plain; charset=UTF-8

Thanks for your feedback, Ian.

I have written a first implementation of this service that works well. You
mentioned something about technologies for speeding up lucene, something I
am interested in knowing more about. Would you, or anyone, please mind
elaborating a bit, or giving me some pointers?

For the record I am using the in memory RAMDirectory instead of file based
index. I don't know if is relevant in terms of speeding things up, but
thought I'd mention it just to be safe.

Thank you,

Geir

2010/7/23 Ian Lea <ian.lea@gmail.com>

> So, if I've understood this correctly, you've got some text and wan't
> to loop through a list of words and/or phrases, and see which of those
> match the text.
>
> e.g.
>
> text "some random article about something or other of some random length"
>
> words
>
> some - matches
> many - no match
> article - matches
> word - no match
>
> You can certainly do that with lucene.  Load the text into a document
> and loop round the words or phrases searching for each.  You are
> likely to need to look into analyzers depending on your requirements
> around stop words, punctuation, case, etc.  And phrase/span queries
> for phrases.
> There are also probably some lucene techniques for speeding this up,
> but as ever, start simple - lucene is usually plenty fast enough.
>
>
> --
> Ian.
>
>
> On Thu, Jul 22, 2010 at 11:30 PM, Geir Gullestad Pettersen
> <geirgp@gmail.com> wrote:
> > Hi,
> >
> > I'm about to write an application that does very simple text analysis,
> > namely dictionary based entity entraction. The alternative is to do in
> > memory matching with substring:
> >
> > String text; // could be any size, but normally "news paper length"
> > List matches;
> > for( String wordOrPhrase : dictionary) {
> >   if ( text.substring( wordOrPhrase ) >= 0 ) {
> >      matches.add( wordOrPhrase );
> >   }
> > }
> >
> > I am concerned the above code will be quite cpu intensitive, it will also
> be
> > case sensitive and lot leave any room for fuzzy matching.
> >
> > I thought this task could also be solved by indexing every bit of text
> that
> > is to be analyzed, and then executing a query per dicionary entry:
> >
> > (pseudo)
> >
> > lucene.index(text)
> > List matches
> > for( String wordOrPhrase : dictionary {
> >   if( lucene.search( wordOrPharse, text_id) gives hit ) {
> >      matches.add(wordOrPhrase)
> >   }
> > }
> >
> > I have not used lucene very much, so I don't know if it is a good idea or
> > not to use lucene for this task at all. Could anyone please share their
> > thoughs on this?
> >
> > Thanks,
> > Geir
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001636d34e220eaf0d048c646dc2--

From java-user-return-46825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 21:10:40 2010
Return-Path: <java-user-return-46825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71157 invoked from network); 27 Jul 2010 21:10:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 21:10:40 -0000
Received: (qmail 75234 invoked by uid 500); 27 Jul 2010 21:10:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75143 invoked by uid 500); 27 Jul 2010 21:10:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75135 invoked by uid 99); 27 Jul 2010 21:10:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 21:10:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of geirgp@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 21:10:31 +0000
Received: by fxm11 with SMTP id 11so1070500fxm.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 14:10:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=nPcu7ElXLM3GP6T0F06Y4gVQA0rbvZB3yN+HiPquomI=;
        b=dT1ULA4AXfrK+AVx/sH+/0ruazWBFJTYJNDbaGz8AkIn2Ueg3JRPBW2J6qwMokeNLP
         INd5wE+bz2wCxaAd22s0qYsqyZexWPcGZAqLYebReXBLZmLIre8zytntDAstXQ7pEjZU
         KLYKd0Y6dikZ6v6Lh+YSTKWzBej2BWA3QmHGU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=AT558cBwa+90mDqTBzMAKjUb9I/GOOiOqAM6Uu6qhb04ZvQHyf2hkEQqBMQk3keNsi
         9rAqiPMlB24yQGRjtp0Qf7QKY95loyfoGE6EMuX4sl8aladqWNY4guudj69IJXHK1dUe
         6ktgVQeuC6MiOT1g/OtyD/Mcq02YzHkbCntzo=
Received: by 10.223.123.79 with SMTP id o15mr8053008far.12.1280265009678; Tue, 
	27 Jul 2010 14:10:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.123.11 with HTTP; Tue, 27 Jul 2010 14:09:49 -0700 (PDT)
In-Reply-To: <AANLkTin2-_0_KzmfCfk5nNiv-oZ29iTsw_KJAHFYKURq@mail.gmail.com>
References: <AANLkTin2-_0_KzmfCfk5nNiv-oZ29iTsw_KJAHFYKURq@mail.gmail.com>
From: Geir Gullestad Pettersen <geirgp@gmail.com>
Date: Tue, 27 Jul 2010 23:09:49 +0200
Message-ID: <AANLkTinkq0pa3Zo9TAmeH1mZYcoGPsb5BRaxdA2V_wUu@mail.gmail.com>
Subject: Re: No hits when querying multiple fields
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502d6e81ec94a048c64ed59

--00504502d6e81ec94a048c64ed59
Content-Type: text/plain; charset=UTF-8

Just to clarify some things that could be misunderstood.

First, I meant that I added two fields to a document which was then indexed,
not two separate documents.

Second, I noticed in the lucene mail archive that some additional charactes,
especially "*", had sneaked into my query examples. This was simply ignorant
me who tried to highlight these queries using bold text, not knowing that
bold text would be "unbold" and pre/post-fixed with "*". So, sorry about
this, and please ignore any * in the query examples.

Geir

2010/7/27 Geir Gullestad Pettersen <geirgp@gmail.com>

> Consider the following two documents which I have added to my index:
>
> doc.add( new Field("text", "hello world", Field.Store.YES,
>> Field.Index.ANALYZED));
>> doc.add( new Field("id", "1", Field.Store.YES, Field.Index.ANALYZED));
>>
>
>
> Using the StandardQueryParser I can retrieve my document with either of
> these two queries:
>
> 1) title:"hello world"
>>
> and
>
>> 2) id:"1"
>>
>
> however, if I try AND'ing the above two, I get 0 results:
>
>> 3) title:"hello world" AND id:"1"
>>
>
> If I remove the AND  and modify the first term to something that i know is
> not in my document, I also find my document:
>
>> 4) title:"no match" id:"1"
>>
> ..so i guess leaving out the keywork AND turns it into an OR query, not
> what I want.
>
>
> In the debugging process I have tried passing the toString() of the Query
> object returned from the StandardQueryParser to System.out, and it shows the
> following for the above queries:
> 1) *title:"hello world"* ->Query.toString()->* title:"hello world"*
> 2) *id:"1" ->* Query.toString ->* id:1*
> 3) *title:"hello world" AND id:"1"* -> Query.toString() -> *+title:"hello
> world" +id:1*
> 4) *title:"hello world" id:"1"* -> Query.toString() -> *title:"hello
> world" id:1
>
> *The only things noticable is quotations being removed from the "id"-term,
> and  #3 where the AND is removed and a + is prefixed the field names.
> Iunderstand that the + sign in front of the field name means that the term
> has to exist in that field, so essentially my queries seem to have been
> parsed as expected
>
> Queries 1,2 and 4 all return results as expected, but can anyone tell me
> why number #3 - the AND query - does not return my document? it is
> essentially an AND between query #1 and #2 which both match the document.
>
> I have also tried construction a query manually:
>
> BooleanQuery query = new BooleanQuery();
>> TermQuery textQuery = new TermQuery(new Term("text","hello world"));
>> TermQuery idQuery = new TermQuery(new Term("id","1"));
>> query.add(textQuery, Occur.MUST);
>> query.add(iddQuery, Occur.MUST);
>>
>
> .. but just as with the above query #3 I get nothing back. passing this
> Query's toString() output to System.out also gives me the same as for #3:
> 5) *title:"hello world" AND id:"1"* -> Query.toString() -> *+title:"hello
> world" +id:"1"*
>
> Can anyone please tell me what I'm doing wrong? I just want to and queries
> #1 and #2 which both match my document when executed alone..
>
>
> Thank you very much,
> Geir Pettersen
>
>
>
>

--00504502d6e81ec94a048c64ed59--

From java-user-return-46826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 21:10:54 2010
Return-Path: <java-user-return-46826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71298 invoked from network); 27 Jul 2010 21:10:54 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 21:10:54 -0000
Received: (qmail 77107 invoked by uid 500); 27 Jul 2010 21:10:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77032 invoked by uid 500); 27 Jul 2010 21:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77024 invoked by uid 99); 27 Jul 2010 21:10:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 21:10:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 21:10:43 +0000
Received: by qyk9 with SMTP id 9so4015346qyk.14
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 14:10:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=MQRzQkiUlEUnMzrxQAnWAHefFzisA0wJ1mZSeCXigNQ=;
        b=PH4tTTffPJuGGhg1utkT23CN4UlQIZPIYEtQy9fu/eX/JMTkxSjka4G5EIKTaZkLNO
         nb35fjZEVjgWKrkWJc9EHNj7jbJDyPV9T/yIXheTsadwxKUILWJXIiHUMoiYGkvKrUHN
         grNBHB4jLPmj2RzxjyfvUEJKz8W/rldGvevP4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=icQjWpHmVGcivto9sUdQ+zkjHRWyZ4InT/SYyNKmxcoU6+BWRlXC4Nh4sqp17l8Tfm
         4e36020XXrlS8OodhwZ2VD9ab9j9hlZ1iAHju3ci2f/jq9rSAFcVMSKsqfCaIfEiU8I7
         /cp45XioqF2IzFtJCVXLuv5bk5JvzJHJM8KSU=
MIME-Version: 1.0
Received: by 10.224.73.209 with SMTP id r17mr1262186qaj.2.1280265022506; Tue, 
	27 Jul 2010 14:10:22 -0700 (PDT)
Received: by 10.220.177.70 with HTTP; Tue, 27 Jul 2010 14:10:22 -0700 (PDT)
In-Reply-To: <AANLkTin2-_0_KzmfCfk5nNiv-oZ29iTsw_KJAHFYKURq@mail.gmail.com>
References: <AANLkTin2-_0_KzmfCfk5nNiv-oZ29iTsw_KJAHFYKURq@mail.gmail.com>
Date: Tue, 27 Jul 2010 17:10:22 -0400
Message-ID: <AANLkTi=Y5RV-sU474WW8zYVBY3JRW=44XWcoRtUBCjSS@mail.gmail.com>
Subject: Re: No hits when querying multiple fields
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015175cba8ae28ac3048c64ede7
X-Virus-Checked: Checked by ClamAV on apache.org

--0015175cba8ae28ac3048c64ede7
Content-Type: text/plain; charset=ISO-8859-1

Hmmmm, what analyzers are you using at index and query time? Are they
identical?

But I think your basic problem is phrases. Parsing text:"hello world"
expects
the words "hello" and "world" to appear sequentially in the text field. Try
something like title:(+hello +world). But depending upon how you indexed
things, phrases may not be your problem here.

Your Boolean construction suffers from something similar. You asking to find
a single term that is exactly "hello world". If you analyzed your input at
index time
there would be terms "hello" and "world", but no *single *term "hello
world".

You might get some insights by getting a copy of Luke and examining your
index to see if what's in there is what you expect....

Query 4 is probably succeeding because the default operator is OR. So it's
only matching on the id:"1" part.

Which is all very nice, but I have no good explanation why you can get your
document with either of your sub-queries but not the AND of the two. My *
guess*
is that you somehow don't have what you *think* you do in your index. Luke
will
help a lot here. Is it possible that you've indexed two different documents
that
match the two different parts of your query and that both don't actually
exist
in your index in the same document? Perhaps you could re-run your test and
print
out the document ID along with the match.....

And if all that fails, try making a small, self-contained test case that
demonstrates this. I'd bet that you won't be able to and that in the course
of creating the test you'll have a forehead-slapping moment <G>..


Best
Erick

On Tue, Jul 27, 2010 at 4:18 PM, Geir Gullestad Pettersen
<geirgp@gmail.com>wrote:

> Consider the following two documents which I have added to my index:
>
> doc.add( new Field("text", "hello world", Field.Store.YES,
> > Field.Index.ANALYZED));
> > doc.add( new Field("id", "1", Field.Store.YES, Field.Index.ANALYZED));
> >
>
>
> Using the StandardQueryParser I can retrieve my document with either of
> these two queries:
>
> 1) title:"hello world"
> >
> and
>
> > 2) id:"1"
> >
>
> however, if I try AND'ing the above two, I get 0 results:
>
> > 3) title:"hello world" AND id:"1"
> >
>
> If I remove the AND  and modify the first term to something that i know is
> not in my document, I also find my document:
>
> > 4) title:"no match" id:"1"
> >
> ..so i guess leaving out the keywork AND turns it into an OR query, not
> what
> I want.
>
>
> In the debugging process I have tried passing the toString() of the Query
> object returned from the StandardQueryParser to System.out, and it shows
> the
> following for the above queries:
> 1) *title:"hello world"* ->Query.toString()->* title:"hello world"*
> 2) *id:"1" ->* Query.toString ->* id:1*
> 3) *title:"hello world" AND id:"1"* -> Query.toString() -> *+title:"hello
> world" +id:1*
> 4) *title:"hello world" id:"1"* -> Query.toString() -> *title:"hello world"
> id:1
>
> *The only things noticable is quotations being removed from the "id"-term,
> and  #3 where the AND is removed and a + is prefixed the field names.
> Iunderstand that the + sign in front of the field name means that the term
> has to exist in that field, so essentially my queries seem to have been
> parsed as expected
>
> Queries 1,2 and 4 all return results as expected, but can anyone tell me
> why
> number #3 - the AND query - does not return my document? it is essentially
> an AND between query #1 and #2 which both match the document.
>
> I have also tried construction a query manually:
>
> BooleanQuery query = new BooleanQuery();
> > TermQuery textQuery = new TermQuery(new Term("text","hello world"));
> > TermQuery idQuery = new TermQuery(new Term("id","1"));
> > query.add(textQuery, Occur.MUST);
> > query.add(iddQuery, Occur.MUST);
> >
>
> .. but just as with the above query #3 I get nothing back. passing this
> Query's toString() output to System.out also gives me the same as for #3:
> 5) *title:"hello world" AND id:"1"* -> Query.toString() -> *+title:"hello
> world" +id:"1"*
>
> Can anyone please tell me what I'm doing wrong? I just want to and queries
> #1 and #2 which both match my document when executed alone..
>
>
> Thank you very much,
> Geir Pettersen
>

--0015175cba8ae28ac3048c64ede7--

From java-user-return-46827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 27 22:01:51 2010
Return-Path: <java-user-return-46827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86625 invoked from network); 27 Jul 2010 22:01:50 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 27 Jul 2010 22:01:50 -0000
Received: (qmail 38296 invoked by uid 500); 27 Jul 2010 22:01:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38232 invoked by uid 500); 27 Jul 2010 22:01:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38224 invoked by uid 99); 27 Jul 2010 22:01:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 22:01:47 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Jul 2010 22:01:41 +0000
Received: by ewy10 with SMTP id 10so2180330ewy.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 15:01:19 -0700 (PDT)
Received: by 10.213.22.201 with SMTP id o9mr7920836ebb.71.1280268079348; Tue, 
	27 Jul 2010 15:01:19 -0700 (PDT)
References: <AANLkTilQg3ARa8V70eujT1Qk0DbJJJoCFElf_0tCWT5u@mail.gmail.com>  
	<AANLkTi=zsDRMTxKTUus=5yVJZvb15_=3s-dshH_eDJe0@mail.gmail.com> 
	<AANLkTim4iUeAi0HKRpCQpXTztDYRYTi27n6g1yT1uPbF@mail.gmail.com>
From: William Newport <billy@billynewport.com>
In-Reply-To: <AANLkTim4iUeAi0HKRpCQpXTztDYRYTi27n6g1yT1uPbF@mail.gmail.com>
Mime-Version: 1.0 (iPad Mail 7B405)
Date: Tue, 27 Jul 2010 17:01:17 -0500
Message-ID: <3061283840931020004@unknownmsgid>
Subject: Re: Using lucene for substring matching
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

Ramdirectorys seem useful but as the index gets larger, java heap
sizes can become a problem in terms of garbage collection pauses. Some
customers are looking to use data grid products such as IBM websphere
extreme scale or oracle coherence to act as the directory for the
index. This stores the index in memory in a set of remote jvms. This
avoids expensive disk io and considerably reduces the memory needed
for each jvm running the lucene engine. It's not as fast as the ram
directory and in our tests is similar to a fast disk type setup.

Once the index is copied from disk to the grid directory when lucene
jvms can be cycled and reconnected to that remote grid thus avoiding
the need to copy to ram every jvm start.

I work for IBM and am the chief architect for ibms data grid product,
websphere extreme scale.

Sent from my iPad

On Jul 27, 2010, at 3:34 PM, Geir Gullestad Pettersen <geirgp@gmail.com> wrote:

> Thanks for your feedback, Ian.
>
> I have written a first implementation of this service that works well. You
> mentioned something about technologies for speeding up lucene, something I
> am interested in knowing more about. Would you, or anyone, please mind
> elaborating a bit, or giving me some pointers?
>
> For the record I am using the in memory RAMDirectory instead of file based
> index. I don't know if is relevant in terms of speeding things up, but
> thought I'd mention it just to be safe.
>
> Thank you,
>
> Geir
>
> 2010/7/23 Ian Lea <ian.lea@gmail.com>
>
>> So, if I've understood this correctly, you've got some text and wan't
>> to loop through a list of words and/or phrases, and see which of those
>> match the text.
>>
>> e.g.
>>
>> text "some random article about something or other of some random length"
>>
>> words
>>
>> some - matches
>> many - no match
>> article - matches
>> word - no match
>>
>> You can certainly do that with lucene.  Load the text into a document
>> and loop round the words or phrases searching for each.  You are
>> likely to need to look into analyzers depending on your requirements
>> around stop words, punctuation, case, etc.  And phrase/span queries
>> for phrases.
>> There are also probably some lucene techniques for speeding this up,
>> but as ever, start simple - lucene is usually plenty fast enough.
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Jul 22, 2010 at 11:30 PM, Geir Gullestad Pettersen
>> <geirgp@gmail.com> wrote:
>>> Hi,
>>>
>>> I'm about to write an application that does very simple text analysis,
>>> namely dictionary based entity entraction. The alternative is to do in
>>> memory matching with substring:
>>>
>>> String text; // could be any size, but normally "news paper length"
>>> List matches;
>>> for( String wordOrPhrase : dictionary) {
>>>  if ( text.substring( wordOrPhrase ) >= 0 ) {
>>>     matches.add( wordOrPhrase );
>>>  }
>>> }
>>>
>>> I am concerned the above code will be quite cpu intensitive, it will also
>> be
>>> case sensitive and lot leave any room for fuzzy matching.
>>>
>>> I thought this task could also be solved by indexing every bit of text
>> that
>>> is to be analyzed, and then executing a query per dicionary entry:
>>>
>>> (pseudo)
>>>
>>> lucene.index(text)
>>> List matches
>>> for( String wordOrPhrase : dictionary {
>>>  if( lucene.search( wordOrPharse, text_id) gives hit ) {
>>>     matches.add(wordOrPhrase)
>>>  }
>>> }
>>>
>>> I have not used lucene very much, so I don't know if it is a good idea or
>>> not to use lucene for this task at all. Could anyone please share their
>>> thoughs on this?
>>>
>>> Thanks,
>>> Geir
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 28 04:06:57 2010
Return-Path: <java-user-return-46828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96444 invoked from network); 28 Jul 2010 04:06:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Jul 2010 04:06:57 -0000
Received: (qmail 29135 invoked by uid 500); 28 Jul 2010 04:06:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28762 invoked by uid 500); 28 Jul 2010 04:06:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28754 invoked by uid 99); 28 Jul 2010 04:06:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 04:06:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 04:06:44 +0000
Received: by iwn37 with SMTP id 37so2209666iwn.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 21:06:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.14.200 with SMTP id h8mr10583307iba.188.1280289983230; 
	Tue, 27 Jul 2010 21:06:23 -0700 (PDT)
Received: by 10.231.183.13 with HTTP; Tue, 27 Jul 2010 21:06:23 -0700 (PDT)
Date: Wed, 28 Jul 2010 11:06:23 +0700
Message-ID: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
Subject: understanding lucene
From: Yakob <jacobian@opensuse-id.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

hello everyone,
I am starting to understand lucene in java and I am having a hard time
in implementing it.
I am trying to develop a java application that can do indexing,
searching and whatnot. and using lucene framework is one of the best
solution for me. only the problem was I am a bit new in this field

so I was hoping that maybe you can give me an appropiate link to which
I can taught myself of how to deploy lucene in java application.

I already found a simple lucene program below

http://planetsourcecode.com/vb/scripts/ShowCode.asp?txtCodeId=6481&lngWId=2

but I am having a hard time in compiling it eventhough I had tried
every possible way to make it run. maybe you can supply me with an
appropiate program that uses lucene in indexing so that I can know how
lucene works exactly.

 thanks for the attention then. :-)

-- 
http://jacobian.web.id

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 28 04:08:35 2010
Return-Path: <java-user-return-46829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96633 invoked from network); 28 Jul 2010 04:08:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Jul 2010 04:08:35 -0000
Received: (qmail 30961 invoked by uid 500); 28 Jul 2010 04:08:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30726 invoked by uid 500); 28 Jul 2010 04:08:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30718 invoked by uid 99); 28 Jul 2010 04:08:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 04:08:29 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fancyerii@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 04:08:24 +0000
Received: by pzk36 with SMTP id 36so3425915pzk.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 21:08:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=Tbzwm5NLdswQ+Z1vOjI+0FeH+WLG/mdwQYZMljRRgyo=;
        b=bitRR8L5Tg/ym2Yy8TfGAVV9Rq1d7soGM5RWmWRirdfitv0Ip1AfwfbDdfIShh2VlD
         NHK9lryZB0t5lx6q3cJm/wFdxZsuaKRKlk3bdJovdfgDYYzotWk0nI91dph+Cj1h2QqU
         39exayfjXpyQMzrFXYRacNuFZQchuEUgAzuD8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=CV9i0fTUwB+nxk2+WfT3XH+WyDlkhamOsP54eo8HYXlJBZD6vjswzrMAmkHqmnSXTy
         vbCqXfaocf1qu1wcNVe8B/prrxELCYpmvuxa6Luyhkl26IIinQuGTfIMhNiIjqU3giJN
         7lf5df/X1Aptl4lBPlMAvKbaIZp8ufFTapSEc=
MIME-Version: 1.0
Received: by 10.142.127.9 with SMTP id z9mr11261423wfc.33.1280290084312; Tue, 
	27 Jul 2010 21:08:04 -0700 (PDT)
Received: by 10.142.158.10 with HTTP; Tue, 27 Jul 2010 21:08:04 -0700 (PDT)
In-Reply-To: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
Date: Wed, 28 Jul 2010 12:08:04 +0800
Message-ID: <AANLkTinwx+CmqTkQ7pKeqP1hLajK9NzZ5S4QvUU2dLvf@mail.gmail.com>
Subject: Re: understanding lucene
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

lucene in action 2nd ed. is a good book

2010/7/28 Yakob <jacobian@opensuse-id.org>:
> hello everyone,
> I am starting to understand lucene in java and I am having a hard time
> in implementing it.
> I am trying to develop a java application that can do indexing,
> searching and whatnot. and using lucene framework is one of the best
> solution for me. only the problem was I am a bit new in this field
>
> so I was hoping that maybe you can give me an appropiate link to which
> I can taught myself of how to deploy lucene in java application.
>
> I already found a simple lucene program below
>
> http://planetsourcecode.com/vb/scripts/ShowCode.asp?txtCodeId=3D6481&lngW=
Id=3D2
>
> but I am having a hard time in compiling it eventhough I had tried
> every possible way to make it run. maybe you can supply me with an
> appropiate program that uses lucene in indexing so that I can know how
> lucene works exactly.
>
> =A0thanks for the attention then. :-)
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 28 04:10:51 2010
Return-Path: <java-user-return-46830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97201 invoked from network); 28 Jul 2010 04:10:51 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Jul 2010 04:10:51 -0000
Received: (qmail 32975 invoked by uid 500); 28 Jul 2010 04:10:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32743 invoked by uid 500); 28 Jul 2010 04:10:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32733 invoked by uid 99); 28 Jul 2010 04:10:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 04:10:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 04:10:39 +0000
Received: by fxm11 with SMTP id 11so1180831fxm.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 21:10:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:sender:received
         :in-reply-to:references:from:date:x-google-sender-auth:message-id
         :subject:to:content-type:content-transfer-encoding;
        bh=0Qb/uR8DTEDfktb3mhL6XydFJN/4ORxo9JHg4XKWPYw=;
        b=qnnHF2e5ILcQx1vBs6vJDPGPy8o9hYzzGJy1L5WvPSwjjJMLs15WKOzZiCWkiFGpKT
         Xrar5jKPYzcH0ZqKpBkAlfeSI4WrD/1GtSr7+837tuBkLBTkwqlWHyJLmaBxLTYD+Hp+
         ECjOh4Ezf1Pjhv7c2UlRfU8zWdqy7LpGasAv8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type
         :content-transfer-encoding;
        b=Kp2tcY57E9G0CAz2H0ctm9JT3c2YYmK8Hg4qB4f1YaSyv47E3RDX7CN7e0o+ZvRkb3
         Vgz2/SRdKqp52gwJss5icstu25ozacuyOg3+kAjXroWCK6MGX7zjHNonsxhTAkFkd1Y4
         46DUGVOvGQOKSwiHJCWpliyqP5ZAyxYIiDOAY=
Received: by 10.223.119.133 with SMTP id z5mr9077992faq.62.1280290219266; Tue, 
	27 Jul 2010 21:10:19 -0700 (PDT)
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.223.120.146 with HTTP; Tue, 27 Jul 2010 21:09:59 -0700 (PDT)
In-Reply-To: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
From: skant@sloan.mit.edu
Date: Wed, 28 Jul 2010 00:09:59 -0400
X-Google-Sender-Auth: f4gi58QUi5qkcI9zemyPBJcWu-s
Message-ID: <AANLkTi=zyOsO3y=Po0ev=1BjCCew-v4z=5-dPnyb8FR+@mail.gmail.com>
Subject: Re: understanding lucene
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Get "Lucene In Action."
http://www.manning.com/hatcher2/



On Wed, Jul 28, 2010 at 12:06 AM, Yakob <jacobian@opensuse-id.org> wrote:
> hello everyone,
> I am starting to understand lucene in java and I am having a hard time
> in implementing it.
> I am trying to develop a java application that can do indexing,
> searching and whatnot. and using lucene framework is one of the best
> solution for me. only the problem was I am a bit new in this field
>
> so I was hoping that maybe you can give me an appropiate link to which
> I can taught myself of how to deploy lucene in java application.
>
> I already found a simple lucene program below
>
> http://planetsourcecode.com/vb/scripts/ShowCode.asp?txtCodeId=3D6481&lngW=
Id=3D2
>
> but I am having a hard time in compiling it eventhough I had tried
> every possible way to make it run. maybe you can supply me with an
> appropiate program that uses lucene in indexing so that I can know how
> lucene works exactly.
>
> =A0thanks for the attention then. :-)
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 28 05:05:11 2010
Return-Path: <java-user-return-46831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9260 invoked from network); 28 Jul 2010 05:05:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Jul 2010 05:05:11 -0000
Received: (qmail 54324 invoked by uid 500); 28 Jul 2010 05:05:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54069 invoked by uid 500); 28 Jul 2010 05:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54055 invoked by uid 99); 28 Jul 2010 05:05:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 05:05:04 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 05:04:57 +0000
Received: by ywe9 with SMTP id 9so1172780ywe.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 22:04:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.171.13 with SMTP id t13mr3822155ybe.71.1280293476371; Tue, 
	27 Jul 2010 22:04:36 -0700 (PDT)
Received: by 10.231.30.69 with HTTP; Tue, 27 Jul 2010 22:04:36 -0700 (PDT)
In-Reply-To: <AANLkTi=GW7hzeoC8XB6LFPFsejcsF=8P8yA=RbDah+ok@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
	<AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
	<AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
	<AANLkTimjVa36XoFgxY-iCgnQFtAoDwtHP4RJR6C1Hv13@mail.gmail.com>
	<AANLkTinJ8F+HBt2JbiuQKDVaOzwQAK78cSNPEnfMTsx0@mail.gmail.com>
	<AANLkTikgF_kKA6a+AD3-nah0UX3v5UU7UbkiPR1DzUj5@mail.gmail.com>
	<AANLkTinNrh44cNfKDyHWUAArh5RKKyD+EpJaKJbz39AE@mail.gmail.com>
	<AANLkTi=GW7hzeoC8XB6LFPFsejcsF=8P8yA=RbDah+ok@mail.gmail.com>
Date: Wed, 28 Jul 2010 15:04:36 +1000
Message-ID: <AANLkTik9Y7i+Ux-sOsBAhit3tEXHGLYDVY9Xkv0zRQ3q@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: David Sitsky <sits@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

Definitely no OOME (or other critical errors), and if there were, we
would have terminated the program straight away.

Cheers,
David

On 28 July 2010 01:44, Michael McCandless <lucene@mikemccandless.com> wrote=
:
> Were there any exceptions during indexing, before the
> TerminateProcess() call? =C2=A0EG OOME?
>
> Mike
>
> On Tue, Jul 27, 2010 at 8:43 AM, Michael McCandless
> <lucene@mikemccandless.com> wrote:
>> On Mon, Jul 26, 2010 at 7:10 PM, David Sitsky <sits@nuix.com> wrote:
>>> During processing.. there might be a number of reasons why we need to
>>> shutdown the indexing process, but perhaps what is unusual is we call
>>> the win32 API TerminateProcess() call rather than System.exit(), for
>>> slightly obscure reasons. =C2=A0When calling exit(), this still calls a
>>> large body of code (for example dll shutdown hooks) which in some
>>> situations, we found could "hang" the exiting process, which was a
>>> problem for us.
>>>
>>> In a sense, this should be no different to killing the process under
>>> Windows using the task manager, or kill -9 on unix systems.
>>
>> OK. =C2=A0Lucene should be fine after a kill -9 or a TerminateProcess,
>> assuming Windows really does act like Unix and any "committed" IO
>> operations done by the process prior to the kill are in fact committed
>> to the filesystem.
>>
>>> At no time did the machine itself crash, and the disk involved (I'm
>>> told) was a local RAID filesystem. =C2=A0I am guessing the disk has wri=
te
>>> caching enabled, but given the machine didn't crash, this shouldn't
>>> matter.
>>
>> Right, the write caching shouldn't matter since the machine didn't go do=
wn.
>>
>>> Something else that is slightly unusual is we explicitly call commit()
>>> at certain times to flush indexing work to disk.
>>
>> OK that's fine.
>>
>>> Its interesting in both instances, CheckIndex said there was 1 broken
>>> segment containing 1 document.
>>
>> Yeah that is curious.... I'll try to mull.
>>
>> Any chance you could run with an infoStream set on IndexWriter? =C2=A0Th=
en
>> if this happens again I can pour over that...
>>
>> Mike
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Cheers,
David

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2 92=
80 0699
Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 28 05:08:56 2010
Return-Path: <java-user-return-46832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11551 invoked from network); 28 Jul 2010 05:08:56 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Jul 2010 05:08:56 -0000
Received: (qmail 59642 invoked by uid 500); 28 Jul 2010 05:08:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59442 invoked by uid 500); 28 Jul 2010 05:08:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59434 invoked by uid 99); 28 Jul 2010 05:08:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 05:08:50 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 05:08:44 +0000
Received: by iwn37 with SMTP id 37so2277700iwn.35
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 22:08:23 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.36.134 with SMTP id t6mr11029251ibd.128.1280293702544; 
	Tue, 27 Jul 2010 22:08:22 -0700 (PDT)
Received: by 10.231.30.69 with HTTP; Tue, 27 Jul 2010 22:08:22 -0700 (PDT)
In-Reply-To: <AANLkTik9Y7i+Ux-sOsBAhit3tEXHGLYDVY9Xkv0zRQ3q@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
	<AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
	<AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
	<AANLkTimjVa36XoFgxY-iCgnQFtAoDwtHP4RJR6C1Hv13@mail.gmail.com>
	<AANLkTinJ8F+HBt2JbiuQKDVaOzwQAK78cSNPEnfMTsx0@mail.gmail.com>
	<AANLkTikgF_kKA6a+AD3-nah0UX3v5UU7UbkiPR1DzUj5@mail.gmail.com>
	<AANLkTinNrh44cNfKDyHWUAArh5RKKyD+EpJaKJbz39AE@mail.gmail.com>
	<AANLkTi=GW7hzeoC8XB6LFPFsejcsF=8P8yA=RbDah+ok@mail.gmail.com>
	<AANLkTik9Y7i+Ux-sOsBAhit3tEXHGLYDVY9Xkv0zRQ3q@mail.gmail.com>
Date: Wed, 28 Jul 2010 15:08:22 +1000
Message-ID: <AANLkTinWvedkNJ6Q62OoPHVt2uCE7UgJzLfSHK3dmb_+@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: David Sitsky <sits@nuix.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Incidentally.. this is what TerminateProcess does say from MSDN:

TerminateProcess initiates termination and returns immediately. This
stops execution of all threads within the process and requests
cancellation of all pending I/O. The terminated process cannot exit
until all pending I/O has been completed or canceled.

So I am not sure if this is a problem or not.. if a background merge
is happening while TerminateProcess() is called, then potentially, the
Lucene libraries may have written some data, but I wonder if the O/S
can "cancel" it before it is committed?  You would hope if fsync()
equivalent is called, that the pending I/O operations can't be
cancelled, but I do wonder?

On 28 July 2010 15:04, David Sitsky <sits@nuix.com> wrote:
> Hi Mike,
>
> Definitely no OOME (or other critical errors), and if there were, we
> would have terminated the program straight away.
>
> Cheers,
> David
>
> On 28 July 2010 01:44, Michael McCandless <lucene@mikemccandless.com> wro=
te:
>> Were there any exceptions during indexing, before the
>> TerminateProcess() call? =C2=A0EG OOME?
>>
>> Mike
>>
>> On Tue, Jul 27, 2010 at 8:43 AM, Michael McCandless
>> <lucene@mikemccandless.com> wrote:
>>> On Mon, Jul 26, 2010 at 7:10 PM, David Sitsky <sits@nuix.com> wrote:
>>>> During processing.. there might be a number of reasons why we need to
>>>> shutdown the indexing process, but perhaps what is unusual is we call
>>>> the win32 API TerminateProcess() call rather than System.exit(), for
>>>> slightly obscure reasons. =C2=A0When calling exit(), this still calls =
a
>>>> large body of code (for example dll shutdown hooks) which in some
>>>> situations, we found could "hang" the exiting process, which was a
>>>> problem for us.
>>>>
>>>> In a sense, this should be no different to killing the process under
>>>> Windows using the task manager, or kill -9 on unix systems.
>>>
>>> OK. =C2=A0Lucene should be fine after a kill -9 or a TerminateProcess,
>>> assuming Windows really does act like Unix and any "committed" IO
>>> operations done by the process prior to the kill are in fact committed
>>> to the filesystem.
>>>
>>>> At no time did the machine itself crash, and the disk involved (I'm
>>>> told) was a local RAID filesystem. =C2=A0I am guessing the disk has wr=
ite
>>>> caching enabled, but given the machine didn't crash, this shouldn't
>>>> matter.
>>>
>>> Right, the write caching shouldn't matter since the machine didn't go d=
own.
>>>
>>>> Something else that is slightly unusual is we explicitly call commit()
>>>> at certain times to flush indexing work to disk.
>>>
>>> OK that's fine.
>>>
>>>> Its interesting in both instances, CheckIndex said there was 1 broken
>>>> segment containing 1 document.
>>>
>>> Yeah that is curious.... I'll try to mull.
>>>
>>> Any chance you could run with an infoStream set on IndexWriter? =C2=A0T=
hen
>>> if this happens again I can pour over that...
>>>
>>> Mike
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> --
> Cheers,
> David
>
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2 =
9280 0699
> Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902
>



--=20
Cheers,
David

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia=C2=A0 =C2=A0 Ph: +61 2 92=
80 0699
Web: http://www.nuix.com=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =
=C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 Fax: +61 2 9212 6902

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 28 06:43:48 2010
Return-Path: <java-user-return-46833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55732 invoked from network); 28 Jul 2010 06:43:47 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Jul 2010 06:43:47 -0000
Received: (qmail 9175 invoked by uid 500); 28 Jul 2010 06:43:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8757 invoked by uid 500); 28 Jul 2010 06:43:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8749 invoked by uid 99); 28 Jul 2010 06:43:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 06:43:41 +0000
X-ASF-Spam-Status: No, hits=4.4 required=10.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of manjula53@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 06:43:34 +0000
Received: by qyk9 with SMTP id 9so4451117qyk.14
        for <java-user@lucene.apache.org>; Tue, 27 Jul 2010 23:43:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=flkbZvhTTuu0M3m8FS3ZAk3StCdvqpqu0BvnXWYheTI=;
        b=gokMT3vGC4MTusdW2eLW4kYT2Ar9gjtAjIwO6ukoQzdNdgjVXfXspmirEK5rdtmR8i
         6uCsCF0Biz1rcORdGbKu8MUmHLLDlTD+qOLcCdzcalWB3OqULn97mwIc4r2j2fbVh2//
         YcaH+mrDGnVvYVkPjGWdE/YS7n0qi+cJSPCm0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=aBB2TVka5VFsxNO1X+l9yTKgi4Xolrbo0L761wDE6JhPHtiXzfuwU4JXYfcPw+btb1
         65Ea+5/U6FF4RZEHTEv1WItPzU8UdFM3gaBD5K2kylJeRwsRjaPk+q/9aRmjQ7y/2B82
         iKw9TqZ4iXVnKhdMujNGnHM40dPo1QEe6xw50=
MIME-Version: 1.0
Received: by 10.224.31.138 with SMTP id y10mr8223319qac.289.1280299393145; 
	Tue, 27 Jul 2010 23:43:13 -0700 (PDT)
Received: by 10.220.187.5 with HTTP; Tue, 27 Jul 2010 23:43:12 -0700 (PDT)
In-Reply-To: <AANLkTilrMJ3BWgwrpTk4LE4tOnkCmZ5WA-_fR70Mzl5r@mail.gmail.com>
References: <AANLkTimGXPfXIZneSrPnBXqgKHmX3gjNWAy06L3c5rjB@mail.gmail.com>
	<AANLkTilrMJ3BWgwrpTk4LE4tOnkCmZ5WA-_fR70Mzl5r@mail.gmail.com>
Date: Wed, 28 Jul 2010 12:13:12 +0530
Message-ID: <AANLkTi=ab24M+kJVuC740S4g=B3sjvZ5jF7AY0oxov3H@mail.gmail.com>
Subject: Re: Databases
From: manjula wijewickrema <manjula53@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000feaf9578d88dd3f048c6cee50
X-Virus-Checked: Checked by ClamAV on apache.org

--000feaf9578d88dd3f048c6cee50
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Thanks a lot for your information.

Regards,
Manjula.

On Fri, Jul 23, 2010 at 12:48 PM, tarun sapra <t.sapra97@gmail.com> wrote:

> You can use HibernateSearch to maintain the synchronization between Lucene
> index and Mysql  RDBMS.
>
> On Fri, Jul 23, 2010 at 11:16 AM, manjula wijewickrema
> <manjula53@gmail.com>wrote:
>
> > Hi,
> >
> > Normally, when I am building my index directory for indexed documents, I
> > used to keep my indexed files simply in a directory called
> 'filesToIndex'.
> > So in this case, I do not use any standar database management system such
> > as mySql or any other.
> >
> > 1) Will it be possible to use mySql or any other for the purpose of
> manage
> > indexed documents in Lucene?
> >
> > 2) Is it necessary to follow such kind of methodology with Lucene?
> >
> > 3) If we do not use such type of database management system, will there
> be
> > any disadvantages with large number of indexed files?
> >
> > Appreciate any reply from you.
> > Thanks,
> > Manjula.
> >
>
>
>
> --
> Thanks & Regards
> Tarun Sapra
>

--000feaf9578d88dd3f048c6cee50--

From java-user-return-46834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 28 08:54:57 2010
Return-Path: <java-user-return-46834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97173 invoked from network); 28 Jul 2010 08:54:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Jul 2010 08:54:57 -0000
Received: (qmail 47297 invoked by uid 500); 28 Jul 2010 08:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46879 invoked by uid 500); 28 Jul 2010 08:54:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46871 invoked by uid 99); 28 Jul 2010 08:54:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 08:54:50 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 08:54:42 +0000
Received: by bwz2 with SMTP id 2so5757692bwz.35
        for <java-user@lucene.apache.org>; Wed, 28 Jul 2010 01:54:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=nlFMxMr5vKC+QL5IvLGEhStmVILZINFccM4liBO00tM=;
        b=uK8eWuodcTOEoMJpxLLx58de3U2pktkMjNch0d/Ugbk0vmGIpzt6B7D/SloazeGYSh
         yO/d4+fl/oTeKxhF3CpGL4b5Omu4ntVT/z/KV3w/Kz53MsBJC4lPN+iOzlciEJ/JBvlO
         Phl4ABCjEwOdto9UjXM4Zd6Eu1cb3uHV/74gI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=KnysnTSgvL1gKkSGFIFonC2qRCTzemLU3LnfwHLO58yJtZiRF/is9TSqokAiTB0pz4
         019T26wD1ZPk94k+9n8yUYyPlkJ+UrhcyZ4RN8q0D0gMfqT0OifDEbifeGcr2XleN2aB
         VSDYfWWzd4Tq+VaPY+V16tLrCl0QaVRvlO1yM=
Received: by 10.204.6.28 with SMTP id 28mr7705234bkx.60.1280307262204; Wed, 28 
	Jul 2010 01:54:22 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Wed, 28 Jul 2010 01:54:02 -0700 (PDT)
In-Reply-To: <AANLkTim4iUeAi0HKRpCQpXTztDYRYTi27n6g1yT1uPbF@mail.gmail.com>
References: <AANLkTilQg3ARa8V70eujT1Qk0DbJJJoCFElf_0tCWT5u@mail.gmail.com> 
	<AANLkTi=zsDRMTxKTUus=5yVJZvb15_=3s-dshH_eDJe0@mail.gmail.com> 
	<AANLkTim4iUeAi0HKRpCQpXTztDYRYTi27n6g1yT1uPbF@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 28 Jul 2010 09:54:02 +0100
Message-ID: <AANLkTi=MZg0VVbUKX6-wp=xz3x-wNTAeyidyBJjUTx_a@mail.gmail.com>
Subject: Re: Using lucene for substring matching
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

You could also look at MemoryIndex or InstantiatedIndex, both in
lucene's contrib area.  I think that I was also wondering if you might
gain from using TermDocs or TermVectors or something directly.


--
Ian.



On Tue, Jul 27, 2010 at 9:34 PM, Geir Gullestad Pettersen
<geirgp@gmail.com> wrote:
> Thanks for your feedback, Ian.
>
> I have written a first implementation of this service that works well. Yo=
u
> mentioned something about technologies for speeding up lucene, something =
I
> am interested in knowing more about. Would you, or anyone, please mind
> elaborating a bit, or giving me some pointers?
>
> For the record I am using the in memory RAMDirectory instead of file base=
d
> index. I don't know if is relevant in terms of speeding things up, but
> thought I'd mention it just to be safe.
>
> Thank you,
>
> Geir
>
> 2010/7/23 Ian Lea <ian.lea@gmail.com>
>
>> So, if I've understood this correctly, you've got some text and wan't
>> to loop through a list of words and/or phrases, and see which of those
>> match the text.
>>
>> e.g.
>>
>> text "some random article about something or other of some random length=
"
>>
>> words
>>
>> some - matches
>> many - no match
>> article - matches
>> word - no match
>>
>> You can certainly do that with lucene. =A0Load the text into a document
>> and loop round the words or phrases searching for each. =A0You are
>> likely to need to look into analyzers depending on your requirements
>> around stop words, punctuation, case, etc. =A0And phrase/span queries
>> for phrases.
>> There are also probably some lucene techniques for speeding this up,
>> but as ever, start simple - lucene is usually plenty fast enough.
>>
>>
>> --
>> Ian.
>>
>>
>> On Thu, Jul 22, 2010 at 11:30 PM, Geir Gullestad Pettersen
>> <geirgp@gmail.com> wrote:
>> > Hi,
>> >
>> > I'm about to write an application that does very simple text analysis,
>> > namely dictionary based entity entraction. The alternative is to do in
>> > memory matching with substring:
>> >
>> > String text; // could be any size, but normally "news paper length"
>> > List matches;
>> > for( String wordOrPhrase : dictionary) {
>> > =A0 if ( text.substring( wordOrPhrase ) >=3D 0 ) {
>> > =A0 =A0 =A0matches.add( wordOrPhrase );
>> > =A0 }
>> > }
>> >
>> > I am concerned the above code will be quite cpu intensitive, it will a=
lso
>> be
>> > case sensitive and lot leave any room for fuzzy matching.
>> >
>> > I thought this task could also be solved by indexing every bit of text
>> that
>> > is to be analyzed, and then executing a query per dicionary entry:
>> >
>> > (pseudo)
>> >
>> > lucene.index(text)
>> > List matches
>> > for( String wordOrPhrase : dictionary {
>> > =A0 if( lucene.search( wordOrPharse, text_id) gives hit ) {
>> > =A0 =A0 =A0matches.add(wordOrPhrase)
>> > =A0 }
>> > }
>> >
>> > I have not used lucene very much, so I don't know if it is a good idea=
 or
>> > not to use lucene for this task at all. Could anyone please share thei=
r
>> > thoughs on this?
>> >
>> > Thanks,
>> > Geir
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 28 13:16:37 2010
Return-Path: <java-user-return-46835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99669 invoked from network); 28 Jul 2010 13:16:37 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Jul 2010 13:16:37 -0000
Received: (qmail 57691 invoked by uid 500); 28 Jul 2010 13:16:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57449 invoked by uid 500); 28 Jul 2010 13:16:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57439 invoked by uid 99); 28 Jul 2010 13:16:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 13:16:31 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mailer.thomas@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 13:16:22 +0000
Received: by bwz2 with SMTP id 2so5945375bwz.35
        for <java-user@lucene.apache.org>; Wed, 28 Jul 2010 06:16:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:references:in-reply-to
         :content-type:content-transfer-encoding;
        bh=Gzr/oikAwFS+WQG15GHbH1O+owVvgmEnzMUYeo14FlA=;
        b=UhZSpYCy8TTWJTewfdKDDXFnO+FZ/hMlRIR5c8gU76HxsOAb8wy1yJjBsBfZ1T/O2A
         5udH4fRnUkAyKN3i7rLIpcZ3sM9NuiyMmk1FH9eFxfAjhqm94eC+skcxQafOrs6NGsO+
         FCpOKkP2/libupp0dAG8/QzeQqp2dlXFZ2Zjs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=DfB+znUfAVDCqZE6/bmMIzMQU3X33riKzNA6n/KVoOyaLfQwI7VQtmAnopJtglcXlW
         wluGuJ9XlJga1T+ROsJBpGTfp0pVVL4nuCkTMq+qS1XIpcJ4JOc6qc++aPcYFNXYl1yC
         OgYeTYAg0+cvqAYVRfyWnuu48dauZMsUvW9OM=
Received: by 10.204.143.138 with SMTP id v10mr5670351bku.133.1280322960852;
        Wed, 28 Jul 2010 06:16:00 -0700 (PDT)
Received: from [192.168.24.135] (funny.informatik.hu-berlin.de [141.20.24.156])
        by mx.google.com with ESMTPS id s34sm4779537bkk.1.2010.07.28.06.15.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 28 Jul 2010 06:15:59 -0700 (PDT)
Message-ID: <4C502D8E.2060408@gmail.com>
Date: Wed, 28 Jul 2010 15:15:58 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.11) Gecko/20100713 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Get all terms of a specific field
References: <4C4ED613.7070201@gmail.com> <2DD6F926-4CB2-4523-9073-4A36F6112F07@apache.org>
In-Reply-To: <2DD6F926-4CB2-4523-9073-4A36F6112F07@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Grant,

thanks for the ideas. I implemented a personal Collector, which returns 
all docID's. In the next step I collect all terms using a customised 
FieldSelector. This implementation is about 2 to 3 times faster than my 
previous implementation using only a customised FieldSelector.

However, I did not fully understood your first idea. During indexing I 
can store the TermVectors on disk. What do I have to do during 
retrieval? I mean, does lucene automatically profit from the 
TermVectors? Or do I have to use something different instead of getValues().

Regards,
     Philippe

Am 27.07.2010 17:17, schrieb Grant Ingersoll:
>
> On Jul 27, 2010, at 8:50 AM, Philippe wrote:
>
>    
>> Hi,
>>
>> what would be the fastest way to get all terms for all documents matching a specific query?
>>
>> Sofar I:
>>
>> 1.) Query the index
>> 2.) Retrieve all scoreDocs
>> 3.) Iterate the scoreDocs and retrieve all terms using the getValues method and a customised "FieldSelector"
>>
>> However, retrieving and iterating the scoredocs is quite costly.  So is there a better/faster way to perform this?
>>      
>
> If you can afford to store TermVectors (disk is cheap, right?) then it will give you back the terms post analysis and you won't have to split again, which you would have to do if you use the getValues() approach.  You might also hook into the Collector (HitCollector) and build it as you go, assuming you don't need the score docs structure.
>
> -Grant
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>    


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 28 18:40:21 2010
Return-Path: <java-user-return-46836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27242 invoked from network); 28 Jul 2010 18:40:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Jul 2010 18:40:21 -0000
Received: (qmail 78724 invoked by uid 500); 28 Jul 2010 18:40:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78616 invoked by uid 500); 28 Jul 2010 18:40:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78608 invoked by uid 99); 28 Jul 2010 18:40:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 18:40:18 +0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.32.146.52] (HELO thomsonlearning.com) (69.32.146.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 18:40:09 +0000
Received: from ([10.160.3.174])
	by ohciniron01.thomsonlearning.com with ESMTP with TLS id 5502565.47730828;
	Wed, 28 Jul 2010 14:39:45 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinht02.corp.local
 ([10.160.3.174]) with mapi; Wed, 28 Jul 2010 14:39:45 -0400
From: "Nader, John P" <john.nader@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 28 Jul 2010 14:39:44 -0400
Subject: Term browsing much slower in Lucene 3.x.x 
Thread-Topic: Term browsing much slower in Lucene 3.x.x 
Thread-Index: AcsuhD8ssWx1zUgXR2iee5I9SnG3KA==
Message-ID: <70EA5691BD59734784FF872CD1B9747A15D56588ED@OHCINMBX01.corp.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_70EA5691BD59734784FF872CD1B9747A15D56588EDOHCINMBX01cor_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_70EA5691BD59734784FF872CD1B9747A15D56588EDOHCINMBX01cor_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We recently upgraded from lucene 2.4.0 to lucene 3.0.2.  Our load testing r=
evealed a serious performance drop specific to traversing the list of terms=
 and their associated documents for a given indexed field.  Our code looks =
something like this:

for(Term term : terms) {
TermDocs termDocs =3D indexReader.termDocs(term);
while(termDocs.next()) {   //  much slower here
    int doc =3D termDocs.doc();
    ...do something with each doc...
}


The slowness is all on the first call to TermDocs.next() for each term.  Fu=
rther investigation comparing 2.4.0 and 3.0.2 revealed that there is some n=
ew synchronization on the SegmentTermDocs constructor and the SegmentReader=
.getTermsReader().  The first call to next() hits this synchronization, cau=
sing a 4x slowdown on an 8 CPU machine.

My first question is should we be using a different approach to process eac=
h term's doc list that would be more efficient?  The synchronization appear=
s to be on aspects of these classes that the next() operation is not concer=
ned with.

My other question is whether there are planned performance enhancements to =
address this loss of performance?

Thanks.

John



--_000_70EA5691BD59734784FF872CD1B9747A15D56588EDOHCINMBX01cor_--

From java-user-return-46837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 28 23:38:12 2010
Return-Path: <java-user-return-46837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25730 invoked from network); 28 Jul 2010 23:38:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 28 Jul 2010 23:38:12 -0000
Received: (qmail 40440 invoked by uid 500); 28 Jul 2010 23:38:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40365 invoked by uid 500); 28 Jul 2010 23:38:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40357 invoked by uid 99); 28 Jul 2010 23:38:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 23:38:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Jul 2010 23:38:02 +0000
Received: by gwj19 with SMTP id 19so1854590gwj.35
        for <java-user@lucene.apache.org>; Wed, 28 Jul 2010 16:37:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=9K564JeG2rjkvqFRV4sRmjDk4WeV9QcbLlTf+307Dic=;
        b=VutIAcQ/pthG9LDfVbf0p+05zUPD7WnrKRuLr4VA9MPjJK90up0E0Mk1yXu50yL89T
         6OCbXkAi9iZaADDk0Acx6E/vNr8jYiufB644jp3qJIdYxC2XJcQI9fOyG1STG4xVq47T
         3GhuxPv1EWZ3fwW3Wf58c2PZGGstNKs/JV+JM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=npDM0/PWwB/lam8+ty3F4utrbvem1dzkSzJuuoAoIUl3HygKHfFSBQJ1SHkwgD+XYY
         fw2Gsh+BU0xPxTsSwRmu3RRvmqZGFicGYy9njX1R4TNl5IXUOqUfDBhMrQuBYAE1UKiz
         aJ/ATURgwlbj421GSs/A6QKmXQrgj7HduWVhA=
MIME-Version: 1.0
Received: by 10.90.73.10 with SMTP id v10mr32646aga.95.1280360240336; Wed, 28 
	Jul 2010 16:37:20 -0700 (PDT)
Received: by 10.229.226.4 with HTTP; Wed, 28 Jul 2010 16:37:20 -0700 (PDT)
In-Reply-To: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
References: <AANLkTi=6DWiryDozqHUWqsVgDtsZHHSpQ6O=AcezsJL8@mail.gmail.com>
Date: Wed, 28 Jul 2010 19:37:20 -0400
Message-ID: <AANLkTinYxW4r=mnW-nvRzgu7X7kE2jmEoYqrVAJdGXSk@mail.gmail.com>
Subject: Re: understanding lucene
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630ef894f5321048c7b19b0
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630ef894f5321048c7b19b0
Content-Type: text/plain; charset=ISO-8859-1

that code has waaaaay too much stuff in it for your first application.
Hibernate
is in there and it looks, from the description, like it tries to search your
database.
I'd *strongly* recommend that you don't go there.

Try looking at
http://wiki.apache.org/lucene-java/LuceneFAQ#How_do_I_start_using_Lucene.3F
and this is a good place to start too.

http://wiki.apache.org/lucene-java/LuceneFAQ

Best
Erick

On Wed, Jul 28, 2010 at 12:06 AM, Yakob <jacobian@opensuse-id.org> wrote:

> hello everyone,
> I am starting to understand lucene in java and I am having a hard time
> in implementing it.
> I am trying to develop a java application that can do indexing,
> searching and whatnot. and using lucene framework is one of the best
> solution for me. only the problem was I am a bit new in this field
>
> so I was hoping that maybe you can give me an appropiate link to which
> I can taught myself of how to deploy lucene in java application.
>
> I already found a simple lucene program below
>
> http://planetsourcecode.com/vb/scripts/ShowCode.asp?txtCodeId=6481&lngWId=2
>
> but I am having a hard time in compiling it eventhough I had tried
> every possible way to make it run. maybe you can supply me with an
> appropiate program that uses lucene in indexing so that I can know how
> lucene works exactly.
>
>  thanks for the attention then. :-)
>
> --
> http://jacobian.web.id
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163630ef894f5321048c7b19b0--

From java-user-return-46838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 29 01:32:20 2010
Return-Path: <java-user-return-46838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86696 invoked from network); 29 Jul 2010 01:32:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Jul 2010 01:32:18 -0000
Received: (qmail 26783 invoked by uid 500); 29 Jul 2010 01:32:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26725 invoked by uid 500); 29 Jul 2010 01:32:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26712 invoked by uid 99); 29 Jul 2010 01:32:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 01:32:15 +0000
X-ASF-Spam-Status: No, hits=2.9 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 01:32:07 +0000
Received: by iwn37 with SMTP id 37so22350iwn.35
        for <java-user@lucene.apache.org>; Wed, 28 Jul 2010 18:31:45 -0700 (PDT)
Received: by 10.231.173.3 with SMTP id n3mr12935421ibz.56.1280367104990; Wed, 
	28 Jul 2010 18:31:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.38.7 with HTTP; Wed, 28 Jul 2010 18:31:27 -0700 (PDT)
From: Hans Merkl <hm@hmerkl.com>
Date: Wed, 28 Jul 2010 21:31:27 -0400
Message-ID: <AANLkTim1Xxz12s4P_STmou1e5UJEkepMTAb-sNY-2tfF@mail.gmail.com>
Subject: Index strategy for tagged documents where tags can change often
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636284d1c799f16048c7cb2b6
X-Virus-Checked: Checked by ClamAV on apache.org

--001636284d1c799f16048c7cb2b6
Content-Type: text/plain; charset=ISO-8859-1

Hi,

In addition to text content my documents have tags which can be searched
too. The problem now is that the tags change quite often and every time a
tag gets added or removed I have to call UpdateDocument which is quite slow
when done for hundreds of documents.

Are there any well performing strategies for storing tags that change often
and need to be searched with Lucene? I have been thinking about keeping the
tags in separate documents to keep them smaller but I can't figure out how
to quickly search for tags AND content.

I hope this makes sense.

Hans

--001636284d1c799f16048c7cb2b6--

From java-user-return-46839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 29 09:24:17 2010
Return-Path: <java-user-return-46839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53925 invoked from network); 29 Jul 2010 09:24:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Jul 2010 09:24:16 -0000
Received: (qmail 70851 invoked by uid 500); 29 Jul 2010 09:24:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70409 invoked by uid 500); 29 Jul 2010 09:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70401 invoked by uid 99); 29 Jul 2010 09:24:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 09:24:09 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cooldwind@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 09:24:03 +0000
Received: by wwb18 with SMTP id 18so102790wwb.5
        for <java-user@lucene.apache.org>; Thu, 29 Jul 2010 02:23:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:from:date
         :message-id:subject:to:content-type;
        bh=iJN8176HGWAjpX5A1U9e14TQL76EpSs2pnfrMX5z670=;
        b=Z5KZdRBzAWZaF/ZP3MIl3nWjXggj3OlsKyFKTinllDaDHnFPWtAYUeZ1Qg7dls09HO
         1qKqQTququXAyCBwgc058EpkxPxDpNNgisFvsV03jUgpSSZO/7y3eXQwlau/yGowcex/
         tZN0UcOa/+3cOCXZRsIcPmm0N47mlwB1ZOm48=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=PTvyE5jToDIGdAw2HDDsetAAuDa8UpBoIfyUB4qACvOqM+hxUOcvqJK/7BKifk9wLX
         3l+PxzHZPXYeRejBtGbq3zsetRKrArROSn9h4Kvv6P6w5cEJ27SCvJ0OSsR5AlvNDTac
         ZigDw+PrbxPOZ5/xiiiUuGiBxV5XEZFXlFmHA=
Received: by 10.216.45.15 with SMTP id o15mr865950web.111.1280395422229; Thu, 
	29 Jul 2010 02:23:42 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.187.212 with HTTP; Thu, 29 Jul 2010 02:23:22 -0700 (PDT)
From: "Santiago M. Mola" <cooldwind@gmail.com>
Date: Thu, 29 Jul 2010 11:23:22 +0200
Message-ID: <AANLkTi=Ao=Ve_uzmA2VPmG7q8kse82m10cxecRJvmrEv@mail.gmail.com>
Subject: Possible inconsistency in NearSpansOrdered and NearSpansUnordered
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Hi,

I'm trying to implement a query for phrases without strict ordered and
with missing words. At the moment, I'm trying the Spans infrastructure
and this problem just arised.

NearSpansOrdered's constructor will throw an IllegalArgumentException
if less than 2 clauses are given, while NearSpansOrdered won't. Is
this done on purpose or it's an unwanted inconsistency?

Best regards,
-- 
Santiago M. Mola
Jabber ID: cooldwind@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 29 09:55:31 2010
Return-Path: <java-user-return-46840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60055 invoked from network); 29 Jul 2010 09:55:31 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Jul 2010 09:55:31 -0000
Received: (qmail 11428 invoked by uid 500); 29 Jul 2010 09:55:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11060 invoked by uid 500); 29 Jul 2010 09:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11031 invoked by uid 99); 29 Jul 2010 09:55:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 09:55:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 09:55:18 +0000
Received: by wwf26 with SMTP id 26so6400330wwf.5
        for <java-user@lucene.apache.org>; Thu, 29 Jul 2010 02:54:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.144.4 with SMTP id x4mr11976496wbu.59.1280397297590; Thu, 
	29 Jul 2010 02:54:57 -0700 (PDT)
Received: by 10.216.52.84 with HTTP; Thu, 29 Jul 2010 02:54:57 -0700 (PDT)
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A15D56588ED@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A15D56588ED@OHCINMBX01.corp.local>
Date: Thu, 29 Jul 2010 05:54:57 -0400
Message-ID: <AANLkTi=DSGhFJ1tUVX2nLUAZ5WdSdtHpUdQnUu2ZyHmj@mail.gmail.com>
Subject: Re: Term browsing much slower in Lucene 3.x.x
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 28, 2010 at 2:39 PM, Nader, John P <john.nader@cengage.com> wro=
te:
> We recently upgraded from lucene 2.4.0 to lucene 3.0.2. =A0Our load testi=
ng revealed a serious performance drop specific to traversing the list of t=
erms and their associated documents for a given indexed field. =A0Our code =
looks something like this:
>
> for(Term term : terms) {
> TermDocs termDocs =3D indexReader.termDocs(term);
> while(termDocs.next()) { =A0 // =A0much slower here
> =A0 =A0int doc =3D termDocs.doc();
> =A0 =A0...do something with each doc...
> }

Is that IndexReader reading multiple segments or single segment?

> The slowness is all on the first call to TermDocs.next() for each term. =
=A0Further investigation comparing 2.4.0 and 3.0.2 revealed that there is s=
ome new synchronization on the SegmentTermDocs constructor and the SegmentR=
eader.getTermsReader(). =A0The first call to next() hits this synchronizati=
on, causing a 4x slowdown on an 8 CPU machine.

There was some added sync, however, the code within those sync blocks
is minuscule (looking up a field).  It's weird that you're seeing a 4X
hit because of this.  We could conceivably optimize this code to avoid
the sync blocks if the reader is readOnly.

> My first question is should we be using a different approach to process e=
ach term's doc list that would be more efficient? =A0The synchronization ap=
pears to be on aspects of these classes that the next() operation is not co=
ncerned with.

Are you sorting your terms in index-sort order (UTF16, ie
String.compareTo)?  This can be an important gain especially if you
have many terms.

Also, if you are working with your top reader, you should see some
perf gain by instead working w/ the sub readers directly, ie:

  for(IndexReader subReader : indexReader.getSequentialSubReaders()) {
     ...
  }

Also, instead of getting a new TermDocs every time, you should get a
single TermDocs up front (IndexReader.termDocs()), and then seek it to
your term (termDocs.seek(term)), validate the term in seek'd to in
fact matches what you asked for, then iterate its docs.

> My other question is whether there are planned performance enhancements t=
o address this loss of performance?

These APIs are very different in the next major release (4.0) of
Lucene, so except for problems spotted by users like you, there's not
much more dev happening against them.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 29 10:33:22 2010
Return-Path: <java-user-return-46841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77799 invoked from network); 29 Jul 2010 10:33:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Jul 2010 10:33:22 -0000
Received: (qmail 53680 invoked by uid 500); 29 Jul 2010 10:33:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53394 invoked by uid 500); 29 Jul 2010 10:33:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52824 invoked by uid 99); 29 Jul 2010 10:33:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 10:33:15 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 10:33:09 +0000
Received: by wyf23 with SMTP id 23so180235wyf.35
        for <java-user@lucene.apache.org>; Thu, 29 Jul 2010 03:32:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.135.211 with SMTP id o19mr12033143wbt.73.1280399556571; 
	Thu, 29 Jul 2010 03:32:36 -0700 (PDT)
Received: by 10.216.52.84 with HTTP; Thu, 29 Jul 2010 03:32:36 -0700 (PDT)
In-Reply-To: <AANLkTinWvedkNJ6Q62OoPHVt2uCE7UgJzLfSHK3dmb_+@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
	<AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
	<AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
	<AANLkTimjVa36XoFgxY-iCgnQFtAoDwtHP4RJR6C1Hv13@mail.gmail.com>
	<AANLkTinJ8F+HBt2JbiuQKDVaOzwQAK78cSNPEnfMTsx0@mail.gmail.com>
	<AANLkTikgF_kKA6a+AD3-nah0UX3v5UU7UbkiPR1DzUj5@mail.gmail.com>
	<AANLkTinNrh44cNfKDyHWUAArh5RKKyD+EpJaKJbz39AE@mail.gmail.com>
	<AANLkTi=GW7hzeoC8XB6LFPFsejcsF=8P8yA=RbDah+ok@mail.gmail.com>
	<AANLkTik9Y7i+Ux-sOsBAhit3tEXHGLYDVY9Xkv0zRQ3q@mail.gmail.com>
	<AANLkTinWvedkNJ6Q62OoPHVt2uCE7UgJzLfSHK3dmb_+@mail.gmail.com>
Date: Thu, 29 Jul 2010 06:32:36 -0400
Message-ID: <AANLkTimE1=aobhVdVD51uaxUQma3so97bpDyrY=LOTjO@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, Jul 28, 2010 at 1:08 AM, David Sitsky <sits@nuix.com> wrote:
> Incidentally.. this is what TerminateProcess does say from MSDN:
>
> TerminateProcess initiates termination and returns immediately. This
> stops execution of all threads within the process and requests
> cancellation of all pending I/O. The terminated process cannot exit
> until all pending I/O has been completed or canceled.

Hmm that language is rather spooky -- the cancellation of all "pending
I/O" sounds dangerous.  So the question is what Windows API the JRE
uses for fsync, and whether Windows considers that "pending I/O".

It seems unlikely that an fsync, once returned, can be cancelled by
the OS, since the OS must forward the request to the IO system, wait
for it to move the bytes to stable storage (write cache in your case),
before returning.

> So I am not sure if this is a problem or not.. if a background merge
> is happening while TerminateProcess() is called, then potentially, the
> Lucene libraries may have written some data, but I wonder if the O/S
> can "cancel" it before it is committed? =A0You would hope if fsync()
> equivalent is called, that the pending I/O operations can't be
> cancelled, but I do wonder?

I do wonder as well :)  But I can't imagine Windows can cancel already
completed fsync's on TerminateProcess.

Any bytes written by Lucene but not fsync'd are perfectly fair game to
"lose" -- that won't affect the index because we do not remove the old
commit point until all files referenced by the new commit point have
been fsync'd.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 29 10:33:42 2010
Return-Path: <java-user-return-46842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77948 invoked from network); 29 Jul 2010 10:33:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Jul 2010 10:33:42 -0000
Received: (qmail 55993 invoked by uid 500); 29 Jul 2010 10:33:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55918 invoked by uid 500); 29 Jul 2010 10:33:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55910 invoked by uid 99); 29 Jul 2010 10:33:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 10:33:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 10:33:31 +0000
Received: by wyf23 with SMTP id 23so180634wyf.35
        for <java-user@lucene.apache.org>; Thu, 29 Jul 2010 03:33:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.156.202 with SMTP id y10mr12064356wbw.48.1280399589613; 
	Thu, 29 Jul 2010 03:33:09 -0700 (PDT)
Received: by 10.216.52.84 with HTTP; Thu, 29 Jul 2010 03:33:09 -0700 (PDT)
In-Reply-To: <AANLkTimE1=aobhVdVD51uaxUQma3so97bpDyrY=LOTjO@mail.gmail.com>
References: <AANLkTimML_-Nv702S8EvCVuotbPPxK-OyHWpokTrrxhN@mail.gmail.com>
	<AANLkTimSmRVLK9BBzULD8peYohQk+sKXo4rZCCwCDdic@mail.gmail.com>
	<AANLkTi=S-XACrmzKgOB5yQT_ar0uTHPB89CnTbA4BS2z@mail.gmail.com>
	<AANLkTimjVa36XoFgxY-iCgnQFtAoDwtHP4RJR6C1Hv13@mail.gmail.com>
	<AANLkTinJ8F+HBt2JbiuQKDVaOzwQAK78cSNPEnfMTsx0@mail.gmail.com>
	<AANLkTikgF_kKA6a+AD3-nah0UX3v5UU7UbkiPR1DzUj5@mail.gmail.com>
	<AANLkTinNrh44cNfKDyHWUAArh5RKKyD+EpJaKJbz39AE@mail.gmail.com>
	<AANLkTi=GW7hzeoC8XB6LFPFsejcsF=8P8yA=RbDah+ok@mail.gmail.com>
	<AANLkTik9Y7i+Ux-sOsBAhit3tEXHGLYDVY9Xkv0zRQ3q@mail.gmail.com>
	<AANLkTinWvedkNJ6Q62OoPHVt2uCE7UgJzLfSHK3dmb_+@mail.gmail.com>
	<AANLkTimE1=aobhVdVD51uaxUQma3so97bpDyrY=LOTjO@mail.gmail.com>
Date: Thu, 29 Jul 2010 06:33:09 -0400
Message-ID: <AANLkTinSg5QN-3JX7iZ5hfhfExw3O=r3iYFf6zYcoV6n@mail.gmail.com>
Subject: Re: java.io.IOException: background merge hit exception: Caused by: 
	java.io.FileNotFoundException: _1vw.fdt
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

BTW if you have the CheckIndex output when you ran it on the two
failed indices, can you forward that?

Mike

On Thu, Jul 29, 2010 at 6:32 AM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> On Wed, Jul 28, 2010 at 1:08 AM, David Sitsky <sits@nuix.com> wrote:
>> Incidentally.. this is what TerminateProcess does say from MSDN:
>>
>> TerminateProcess initiates termination and returns immediately. This
>> stops execution of all threads within the process and requests
>> cancellation of all pending I/O. The terminated process cannot exit
>> until all pending I/O has been completed or canceled.
>
> Hmm that language is rather spooky -- the cancellation of all "pending
> I/O" sounds dangerous. =A0So the question is what Windows API the JRE
> uses for fsync, and whether Windows considers that "pending I/O".
>
> It seems unlikely that an fsync, once returned, can be cancelled by
> the OS, since the OS must forward the request to the IO system, wait
> for it to move the bytes to stable storage (write cache in your case),
> before returning.
>
>> So I am not sure if this is a problem or not.. if a background merge
>> is happening while TerminateProcess() is called, then potentially, the
>> Lucene libraries may have written some data, but I wonder if the O/S
>> can "cancel" it before it is committed? =A0You would hope if fsync()
>> equivalent is called, that the pending I/O operations can't be
>> cancelled, but I do wonder?
>
> I do wonder as well :) =A0But I can't imagine Windows can cancel already
> completed fsync's on TerminateProcess.
>
> Any bytes written by Lucene but not fsync'd are perfectly fair game to
> "lose" -- that won't affect the index because we do not remove the old
> commit point until all files referenced by the new commit point have
> been fsync'd.
>
> Mike
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 29 10:49:16 2010
Return-Path: <java-user-return-46843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80686 invoked from network); 29 Jul 2010 10:49:16 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Jul 2010 10:49:16 -0000
Received: (qmail 71213 invoked by uid 500); 29 Jul 2010 10:49:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70971 invoked by uid 500); 29 Jul 2010 10:49:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70963 invoked by uid 99); 29 Jul 2010 10:49:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 10:49:09 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 10:49:01 +0000
Received: by wwb18 with SMTP id 18so160207wwb.5
        for <java-user@lucene.apache.org>; Thu, 29 Jul 2010 03:48:40 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.201.85 with SMTP id ez21mr11959529wbb.151.1280400520660; 
	Thu, 29 Jul 2010 03:48:40 -0700 (PDT)
Received: by 10.216.52.84 with HTTP; Thu, 29 Jul 2010 03:48:40 -0700 (PDT)
In-Reply-To: <AANLkTi=Ao=Ve_uzmA2VPmG7q8kse82m10cxecRJvmrEv@mail.gmail.com>
References: <AANLkTi=Ao=Ve_uzmA2VPmG7q8kse82m10cxecRJvmrEv@mail.gmail.com>
Date: Thu, 29 Jul 2010 06:48:40 -0400
Message-ID: <AANLkTikmNNyD_K5TETun8Hpwz1kLH0SYFiiErO+h6gJ1@mail.gmail.com>
Subject: Re: Possible inconsistency in NearSpansOrdered and NearSpansUnordered
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Sounds like an unwanted inconsistency to me!  Can you open an issue,
post a patch? Thanks,

Mike

On Thu, Jul 29, 2010 at 5:23 AM, Santiago M. Mola <cooldwind@gmail.com> wrote:
> Hi,
>
> I'm trying to implement a query for phrases without strict ordered and
> with missing words. At the moment, I'm trying the Spans infrastructure
> and this problem just arised.
>
> NearSpansOrdered's constructor will throw an IllegalArgumentException
> if less than 2 clauses are given, while NearSpansOrdered won't. Is
> this done on purpose or it's an unwanted inconsistency?
>
> Best regards,
> --
> Santiago M. Mola
> Jabber ID: cooldwind@gmail.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 29 21:49:07 2010
Return-Path: <java-user-return-46844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55335 invoked from network); 29 Jul 2010 21:49:06 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Jul 2010 21:49:06 -0000
Received: (qmail 45302 invoked by uid 500); 29 Jul 2010 21:49:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45195 invoked by uid 500); 29 Jul 2010 21:49:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45187 invoked by uid 99); 29 Jul 2010 21:49:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 21:49:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.52] (HELO thomsonlearning.com) (69.32.146.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 21:48:58 +0000
Received: from ([10.160.3.176])
	by ohciniron01.thomsonlearning.com with ESMTP with TLS id 5502565.47800049;
	Thu, 29 Jul 2010 17:48:34 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinht04.corp.local
 ([10.160.3.176]) with mapi; Thu, 29 Jul 2010 17:48:33 -0400
From: "Nader, John P" <john.nader@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 29 Jul 2010 17:48:32 -0400
Subject: RE: Term browsing much slower in Lucene 3.x.x
Thread-Topic: Term browsing much slower in Lucene 3.x.x
Thread-Index: AcsvBC+pyJEXy5i/TZyYmVuu+v+QeAAYsg3w
Message-ID: <70EA5691BD59734784FF872CD1B9747A15D56BDB14@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A15D56588ED@OHCINMBX01.corp.local>
 <AANLkTi=DSGhFJ1tUVX2nLUAZ5WdSdtHpUdQnUu2ZyHmj@mail.gmail.com>
In-Reply-To: <AANLkTi=DSGhFJ1tUVX2nLUAZ5WdSdtHpUdQnUu2ZyHmj@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Thanks much for your response.  Yes, our terms are sorted in index-sort ord=
er.  I think you have a good suggestion, which is to get the term docs once=
 and then seek to each term.  I will try that approach and report back to t=
he forum on the results.

Like you I am surprised by the overhead of the added synchronization.  I do=
n't think is waiting on locks, but rather the memory flush and loading that=
 goes on.

-John

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Thursday, July 29, 2010 5:55 AM
To: java-user@lucene.apache.org
Subject: Re: Term browsing much slower in Lucene 3.x.x

On Wed, Jul 28, 2010 at 2:39 PM, Nader, John P <john.nader@cengage.com> wro=
te:
> We recently upgraded from lucene 2.4.0 to lucene 3.0.2. =A0Our load testi=
ng revealed a serious performance drop specific to traversing the list of t=
erms and their associated documents for a given indexed field. =A0Our code =
looks something like this:
>
> for(Term term : terms) {
> TermDocs termDocs =3D indexReader.termDocs(term);
> while(termDocs.next()) { =A0 // =A0much slower here
> =A0 =A0int doc =3D termDocs.doc();
> =A0 =A0...do something with each doc...
> }

Is that IndexReader reading multiple segments or single segment?

> The slowness is all on the first call to TermDocs.next() for each term. =
=A0Further investigation comparing 2.4.0 and 3.0.2 revealed that there is s=
ome new synchronization on the SegmentTermDocs constructor and the SegmentR=
eader.getTermsReader(). =A0The first call to next() hits this synchronizati=
on, causing a 4x slowdown on an 8 CPU machine.

There was some added sync, however, the code within those sync blocks
is minuscule (looking up a field).  It's weird that you're seeing a 4X
hit because of this.  We could conceivably optimize this code to avoid
the sync blocks if the reader is readOnly.

> My first question is should we be using a different approach to process e=
ach term's doc list that would be more efficient? =A0The synchronization ap=
pears to be on aspects of these classes that the next() operation is not co=
ncerned with.

Are you sorting your terms in index-sort order (UTF16, ie
String.compareTo)?  This can be an important gain especially if you
have many terms.

Also, if you are working with your top reader, you should see some
perf gain by instead working w/ the sub readers directly, ie:

  for(IndexReader subReader : indexReader.getSequentialSubReaders()) {
     ...
  }

Also, instead of getting a new TermDocs every time, you should get a
single TermDocs up front (IndexReader.termDocs()), and then seek it to
your term (termDocs.seek(term)), validate the term in seek'd to in
fact matches what you asked for, then iterate its docs.

> My other question is whether there are planned performance enhancements t=
o address this loss of performance?

These APIs are very different in the next major release (4.0) of
Lucene, so except for problems spotted by users like you, there's not
much more dev happening against them.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 29 22:23:07 2010
Return-Path: <java-user-return-46845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67460 invoked from network); 29 Jul 2010 22:23:07 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 29 Jul 2010 22:23:07 -0000
Received: (qmail 81516 invoked by uid 500); 29 Jul 2010 22:23:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81449 invoked by uid 500); 29 Jul 2010 22:23:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81441 invoked by uid 99); 29 Jul 2010 22:23:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 22:23:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Jul 2010 22:22:57 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 6D90E71C921; Thu, 29 Jul 2010 15:22:37 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 4123B71C91E
	for <java-user@lucene.apache.org>; Thu, 29 Jul 2010 15:22:37 -0700 (PDT)
Date: Thu, 29 Jul 2010 15:22:37 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: RE: Term browsing much slower in Lucene 3.x.x
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A15D56BDB14@OHCINMBX01.corp.local>
Message-ID: <alpine.DEB.1.10.1007291520100.16532@radix.cryptio.net>
References: <70EA5691BD59734784FF872CD1B9747A15D56588ED@OHCINMBX01.corp.local> <AANLkTi=DSGhFJ1tUVX2nLUAZ5WdSdtHpUdQnUu2ZyHmj@mail.gmail.com> <70EA5691BD59734784FF872CD1B9747A15D56BDB14@OHCINMBX01.corp.local>
User-Agent: Alpine 1.10 (DEB 962 2008-03-14)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII


: > My other question is whether there are planned performance 
: > enhancements to address this loss of performance?
: 
: These APIs are very different in the next major release (4.0) of
: Lucene, so except for problems spotted by users like you, there's not
: much more dev happening against them.

To be clear: the 3.x branch is still under active development, so if you 
spot performance improvements that can be made (while maintaining API back 
compat) then those suggestions would absolutely be welcome -- but many 
developers working on Lucene internals are more focused on potential 
performance enhancements to the 4.x branch of development (trunk)


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 08:16:46 2010
Return-Path: <java-user-return-46846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70361 invoked from network); 30 Jul 2010 08:16:45 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 08:16:45 -0000
Received: (qmail 44239 invoked by uid 500); 30 Jul 2010 08:16:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43405 invoked by uid 500); 30 Jul 2010 08:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43396 invoked by uid 99); 30 Jul 2010 08:16:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 08:16:38 +0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.143] (HELO eu1sys200aog117.obsmtp.com) (207.126.144.143)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jul 2010 08:16:28 +0000
Received: from source ([193.36.230.103]) by eu1sys200aob117.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTFKKSH5axfDixP9JVO8jLKwajO2cDQN1@postini.com; Fri, 30 Jul 2010 08:16:08 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 30 Jul 2010 09:16:06 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 30 Jul 2010 09:16:07 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CB2FBF.75F17758"
Subject: Closing and reopening readers
Date: Fri, 30 Jul 2010 09:16:06 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Closing and reopening readers
Thread-Index: Acsvv3WDJ/CCSeuFQN+4nPA84fcyVQ==
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 30 Jul 2010 08:16:07.0753 (UTC) FILETIME=[76242390:01CB2FBF]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CB2FBF.75F17758
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm having trouble with the IndexReader class as per below: (using
lucene 2.9.1)

RAMDirectory dir =3D new RAMDirectory();
createIndex(dir);
IndexReader reader =3D IndexReader.open(dir);
IndexReader reader2 =3D reader.reopen();
reader.close();
reader2.terms(); // AlreadyClosedException - this IndexReader is closed

Can anyone see where I'm going wrong?

Thanks

Greg


This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D
------_=_NextPart_001_01CB2FBF.75F17758--

From java-user-return-46847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 08:23:33 2010
Return-Path: <java-user-return-46847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73370 invoked from network); 30 Jul 2010 08:23:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 08:23:33 -0000
Received: (qmail 52496 invoked by uid 500); 30 Jul 2010 08:23:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52194 invoked by uid 500); 30 Jul 2010 08:23:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52186 invoked by uid 99); 30 Jul 2010 08:23:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 08:23:26 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 08:23:21 +0000
Received: by bwz2 with SMTP id 2so858641bwz.35
        for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 01:23:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=zur9U95oh7ct4AxltjzMzn5I9gLGNVlOO7GABWKhIRE=;
        b=tb0GIOWWrF4jznlHkhhmfAySYzlmFEXZb+gxUGGG/of2lzVI/O6alHa5pv8zKQaZXw
         2iWOqfOUfVTQpY3HX02Mj80P0NXHMH/0usw5khwI9CUwVXXyvmE3rXeuvrxqaGoWZIlV
         aBnSVy64RCOO8+Mrb1Xx0BXOasXkSSd6hDRDU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=KIhqxvlJSvYe63bC7Y+bywAZgdGF1PCRpv7/ZslGiLogCC1L1lsfcf0ijV3ML5mMTi
         HwY/7p1tP28unR6kRHnO9xw2APH+gVJr/zBd3lBI4pbbodhBANy5nkuy8aGN7mRBj1Pc
         mn4IG4pxnRN4cE9tfh4tkN88m841Obd5ixgRw=
Received: by 10.204.19.83 with SMTP id z19mr964601bka.43.1280478180199; Fri, 
	30 Jul 2010 01:23:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Fri, 30 Jul 2010 01:22:40 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 30 Jul 2010 09:22:40 +0100
Message-ID: <AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com>
Subject: Re: Closing and reopening readers
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

http://lucene.apache.org/java/2_9_1/api/core/org/apache/lucene/index/IndexR=
eader.html#reopen%28%29

...
If the index has not changed since this instance was (re)opened, then
this call is a NOOP and returns this instance


--
Ian.

On Fri, Jul 30, 2010 at 9:16 AM, Gregory Tarr <Gregory.tarr@detica.com> wro=
te:
> I'm having trouble with the IndexReader class as per below: (using
> lucene 2.9.1)
>
> RAMDirectory dir =3D new RAMDirectory();
> createIndex(dir);
> IndexReader reader =3D IndexReader.open(dir);
> IndexReader reader2 =3D reader.reopen();
> reader.close();
> reader2.terms(); // AlreadyClosedException - this IndexReader is closed
>
> Can anyone see where I'm going wrong?
>
> Thanks
>
> Greg
>
>
> This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory. =A0The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 12:00:03 2010
Return-Path: <java-user-return-46848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60563 invoked from network); 30 Jul 2010 12:00:01 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 12:00:01 -0000
Received: (qmail 47875 invoked by uid 500); 30 Jul 2010 11:59:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47409 invoked by uid 500); 30 Jul 2010 11:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47400 invoked by uid 99); 30 Jul 2010 11:59:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 11:59:54 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pablomendes@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 11:59:46 +0000
Received: by iwn37 with SMTP id 37so1854799iwn.35
        for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 04:59:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=yLwSzBFumITqUQAsCI8AZF5In404l5QsxDZKd9KuBdo=;
        b=ga2lGPr0rj1RAY2rCbC7nN70ZGwuk4kOJbZwu7oKAtRgPIHKhw/ktY3aBqacWfeW2Y
         12uMkRn0tnbdbMTZ8oBol+vPe+w8eU2QYEd47cFYg+5/iO7FHHnPkvWUJIe45cLrxQNn
         emVH0h5SwqLXprsf/FhRre3tURDTaCyxSqNnY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=DmZ2/11aTkpEXpRrw72wa7ntjqG1t5Lg7pM6Nux88o1pfnoT6QqDnaQ6l7nfb+tjQw
         ivPRUreu8HhfDqbMhoseTMHXk9PZ7h7wikin+vJhJ7WYMEdEzk/Qo5kuK3MgybCWRp5n
         Fcwc4oxKWiBppxXJBB76vCgUBreXmZ+/0tXU4=
MIME-Version: 1.0
Received: by 10.231.178.103 with SMTP id bl39mr1530762ibb.138.1280491164076; 
	Fri, 30 Jul 2010 04:59:24 -0700 (PDT)
Received: by 10.231.169.84 with HTTP; Fri, 30 Jul 2010 04:59:24 -0700 (PDT)
Date: Fri, 30 Jul 2010 13:59:24 +0200
Message-ID: <AANLkTinCgbc5b3XPqXHAd=XWvQ-g5B6uHwDQ79tLwbM8@mail.gmail.com>
Subject: Modifying idf()?
From: Pablo Mendes <pablomendes@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary=0016e68de470f90ab5048c9994e7
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e68de470f90ab5048c9994e7
Content-Type: text/plain; charset=ISO-8859-1

Hi all,
I'd like to do a very simple change to the idf computation, but I can't seem
to wrap my head around it.

There are very useful hints in the javadocs for "Changing Similarity" for
new tf() and lengthNorm() behavior, but it was a little bit blurrier for
idf()
http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/search/package-summary.html#changingSimilarity

I'd like to use something beyond the global numDocs.
I'd like to have a modified idf() that gives me the inverse frequency in a
*subset* of the index (e.g. for a specific type of document). I have the
type stored in a field, and I'd need to count how many documents contain
that type for a given term. Since IDF takes the numDocs as a parameter, I
could just change the class that calls idf() and pass the number I need? Who
class calls idf()? TermQuery? So should I make the changes there? Or in
TermScorer?

Anybody has some light to shed on this issue?

Thanks in advance,
Pablo

[1]
http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/search/DefaultSimilarity.html#idf%28int,%20int%29

--0016e68de470f90ab5048c9994e7--

From java-user-return-46849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 13:30:26 2010
Return-Path: <java-user-return-46849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4585 invoked from network); 30 Jul 2010 13:30:25 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 13:30:25 -0000
Received: (qmail 8211 invoked by uid 500); 30 Jul 2010 13:30:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7822 invoked by uid 500); 30 Jul 2010 13:30:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7814 invoked by uid 99); 30 Jul 2010 13:30:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 13:30:19 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of m.roth@stoeu.com designates 217.111.120.9 as permitted sender)
Received: from [217.111.120.9] (HELO mailout01.rmx.de) (217.111.120.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 13:30:13 +0000
Received: from [172.19.17.49] (HELO kdin02.retarus.de)
  by mailout01.rmx.de (CommuniGate Pro SMTP 5.2.13 _community_)
  with ESMTP id 112255098 for java-user@lucene.apache.org; Fri, 30 Jul 2010 15:29:51 +0200
Received: from www.stoeu.com ([212.184.115.16])
	by kdin02.retarus.de (8.14.2/8.14.2/retarus.custom) with ESMTP id o6UDTnGg025282
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 15:29:49 +0200
Subject: Highlighter wildcard problems: NoClassDefFoundError in Linux/CentOS 5.4, works
 in Windows XP
X-KeepSent: 2398266F:A34BEF0D-C1257770:00478804;
 type=4; name=$KeepSent
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 8.5.1 FP2 March 18, 2010
From: Markus Roth <m.roth@stoeu.com>
Message-ID: <OF2398266F.A34BEF0D-ONC1257770.00478804-C1257770.004A228D@stoeu.com>
Date: Fri, 30 Jul 2010 15:30:28 +0200
X-MIMETrack: Serialize by Router on DEWELNK7/STOEUEXT(Release 8.5.1FP2|March 17, 2010) at
 07/30/2010 15:29:49
MIME-Version: 1.0
Content-type: multipart/related; 
	Boundary="0__=4EBBFDE3DFD40E948f9e8a93df938690918c4EBBFDE3DFD40E94"
X-RMX-ID: 20100730-152949-o6UDTnGg025282-0@kdin02
X-RMX-TRACE: 2010-07-30 15:29:50 RmxMSO@kdin02/mailcc05 [0.4s] 20100730-152949-o6UDTnGg025282-0@kdin02 0:00:01
X-RMX-TRACE: 2010-07-30 15:29:49 KdIn@kdin02/mailcc08 [0.2s] 20100730-152949-o6UDTnGg025282-0@kdin02 0:00:00

--0__=4EBBFDE3DFD40E948f9e8a93df938690918c4EBBFDE3DFD40E94
Content-type: multipart/alternative; 
	Boundary="1__=4EBBFDE3DFD40E948f9e8a93df938690918c4EBBFDE3DFD40E94"

--1__=4EBBFDE3DFD40E948f9e8a93df938690918c4EBBFDE3DFD40E94
Content-type: text/plain; charset=US-ASCII






Hello everyone,

I'm using lucene for obvious purposes and I'm trying to highlight
search-term results.

libraries I use:
	lucene-core version: 3.0.2
	lucene-highlighter version: 3.0.2

Dev-System:
	WinXP Pro 32Bit, jdk1.6.0_20,
	java version "1.6.0_20"
	Java(TM) SE Runtime Environment (build 1.6.0_20-b02)
	Java HotSpot(TM) Client VM (build 16.3-b01, mixed mode, sharing)

Server-System:
	Centos 5.4 Final x64 (in a VM),
	java version "1.6.0"
	OpenJDK  Runtime Environment (build 1.6.0-b09)
	OpenJDK 64-Bit Server VM (build 1.6.0-b09, mixed mode)

I created a small Httpserver(in Java) that responds to POST/GET. A small
form will POST search terms which are then passed
to the IndexSearcher. After that the highlighter is supposed to highlight
search-term hits. (everything is set to use UTF-8)

When I use * as a wildcard in a search-term while the application is
running in Windows, everything is fine and the results are
returned as expected. However, same is not true for CentOS. The following
Exception is thrown for the same build with the same
query:

Exception in thread "pool-4-thread-4" java.lang.NoClassDefFoundError:
org/apache/lucene/index/memory/MemoryIndex
        at org.apache.lucene.search.highlight.WeightedSpanTermExtractor
$FakeReader.<clinit>(WeightedSpanTermExtractor.java:560)
        at
org.apache.lucene.search.highlight.WeightedSpanTermExtractor.extract
(WeightedSpanTermExtractor.java:153)
        at
org.apache.lucene.search.highlight.WeightedSpanTermExtractor.extract
(WeightedSpanTermExtractor.java:97)
        at
org.apache.lucene.search.highlight.WeightedSpanTermExtractor.getWeightedSpanTerms
(WeightedSpanTermExtractor.java:383)
        at org.apache.lucene.search.highlight.QueryScorer.initExtractor
(QueryScorer.java:216)
        at org.apache.lucene.search.highlight.QueryScorer.init
(QueryScorer.java:184)
        at
org.apache.lucene.search.highlight.Highlighter.getBestTextFragments
(Highlighter.java:200)
        at com.stoeu.parsing.stoQueryParser.query(stoQueryParser.java:129)
        at com.stoeu.parsing.stoQueryParser.query(stoQueryParser.java:336)
        at com.stoeu.query.MyHttpHandler.handle(MyHttpHandler.java:127)
        at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:83)
        at sun.net.httpserver.AuthFilter.doFilter(AuthFilter.java:83)
        at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:86)
        at sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle
(ServerImpl.java:589)
        at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:83)
        at sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:561)
        at java.util.concurrent.ThreadPoolExecutor.runWorker
(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run
(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:636)
Caused by: java.lang.ClassNotFoundException:
org.apache.lucene.index.memory.MemoryIndex
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:323)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:268)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:336)
        ... 19 more


Anyone got an idea what's wrong?

Greetings,
Markus
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sto AG, Ehrenbachstr.1, D-79780 Stuehlingen

Vorstand/Board: Jochen Stotmeister (Vorsitzender/Chairman),
Gerd Stotmeister, Hans-Dieter Schumacher
Aufsichtsratsvorsitzender/Chairman Supervisory Board:
Dr. Max-Burkhard Zwosta

Sitz der Gesellschaft/Head Office: D-79780 Stuehlingen
Handelsregister/Registration: Amtsgericht Freiburg HRB 620675
USt-ID/Tax ID: DE142834082
=============================================================

--1__=4EBBFDE3DFD40E948f9e8a93df938690918c4EBBFDE3DFD40E94
Content-type: text/html; charset=US-ASCII
Content-Disposition: inline

<html><body>
<p><img src="cid:1__=4EBBFDE3DFD40E948f9e8a93df9386@stoeu.com" width="580" height="70"><br>
<br>
<br>
Hello everyone,<br>
<br>
I'm using lucene for obvious purposes and I'm trying to highlight search-term results.<br>
<br>
libraries I use:<br>
	lucene-core version: 3.0.2<br>
	lucene-highlighter version: 3.0.2<br>
<br>
Dev-System: <br>
	WinXP Pro 32Bit, jdk1.6.0_20,<br>
	java version &quot;1.6.0_20&quot;<br>
	Java(TM) SE Runtime Environment (build 1.6.0_20-b02)<br>
	Java HotSpot(TM) Client VM (build 16.3-b01, mixed mode, sharing)<br>
<br>
Server-System: <br>
	Centos 5.4 Final x64 (in a VM), <br>
	java version &quot;1.6.0&quot;<br>
	OpenJDK  Runtime Environment (build 1.6.0-b09)<br>
	OpenJDK 64-Bit Server VM (build 1.6.0-b09, mixed mode)<br>
<br>
I created a small Httpserver(in Java) that responds to POST/GET. A small form will POST search terms which are then passed<br>
to the IndexSearcher. After that the highlighter is supposed to highlight search-term hits. (everything is set to use UTF-8)<br>
<br>
When I use * as a wildcard in a search-term while the application is running in Windows, everything is fine and the results are<br>
returned as expected. However, same is not true for CentOS. The following Exception is thrown for the same build with the same<br>
query:<br>
<br>
Exception in thread &quot;pool-4-thread-4&quot; java.lang.NoClassDefFoundError: org/apache/lucene/index/memory/MemoryIndex<br>
        at org.apache.lucene.search.highlight.WeightedSpanTermExtractor$FakeReader.&lt;clinit&gt;(WeightedSpanTermExtractor.java:560)<br>
        at org.apache.lucene.search.highlight.WeightedSpanTermExtractor.extract(WeightedSpanTermExtractor.java:153)<br>
        at org.apache.lucene.search.highlight.WeightedSpanTermExtractor.extract(WeightedSpanTermExtractor.java:97)<br>
        at org.apache.lucene.search.highlight.WeightedSpanTermExtractor.getWeightedSpanTerms(WeightedSpanTermExtractor.java:383)<br>
        at org.apache.lucene.search.highlight.QueryScorer.initExtractor(QueryScorer.java:216)<br>
        at org.apache.lucene.search.highlight.QueryScorer.init(QueryScorer.java:184)<br>
        at org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(Highlighter.java:200)<br>
        at com.stoeu.parsing.stoQueryParser.query(stoQueryParser.java:129)<br>
        at com.stoeu.parsing.stoQueryParser.query(stoQueryParser.java:336)<br>
        at com.stoeu.query.MyHttpHandler.handle(MyHttpHandler.java:127)<br>
        at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:83)<br>
        at sun.net.httpserver.AuthFilter.doFilter(AuthFilter.java:83)<br>
        at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:86)<br>
        at sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle(ServerImpl.java:589)<br>
        at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:83)<br>
        at sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:561)<br>
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)<br>
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)<br>
        at java.lang.Thread.run(Thread.java:636)<br>
Caused by: java.lang.ClassNotFoundException: org.apache.lucene.index.memory.MemoryIndex<br>
        at java.net.URLClassLoader$1.run(URLClassLoader.java:217)<br>
        at java.security.AccessController.doPrivileged(Native Method)<br>
        at java.net.URLClassLoader.findClass(URLClassLoader.java:205)<br>
        at java.lang.ClassLoader.loadClass(ClassLoader.java:323)<br>
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)<br>
        at java.lang.ClassLoader.loadClass(ClassLoader.java:268)<br>
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:336)<br>
        ... 19 more<br>
<br>
<br>
Anyone got an idea what's wrong?<br>
<br>
Greetings,<br>
Markus<br>
<font size="2" face="Arial">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br>
Sto AG, Ehrenbachstr.1, D-79780 Stuehlingen<br>
 <br>
Vorstand/Board: Jochen Stotmeister (Vorsitzender/Chairman), <br>
Gerd Stotmeister, Hans-Dieter Schumacher<br>
Aufsichtsratsvorsitzender/Chairman Supervisory Board:<br>
Dr. Max-Burkhard Zwosta<br>
 <br>
Sitz der Gesellschaft/Head Office: D-79780 Stuehlingen<br>
Handelsregister/Registration: Amtsgericht Freiburg HRB 620675<br>
USt-ID/Tax ID: DE142834082<br>
=============================================================<br>
    </font></body></html>

--1__=4EBBFDE3DFD40E948f9e8a93df938690918c4EBBFDE3DFD40E94--


--0__=4EBBFDE3DFD40E948f9e8a93df938690918c4EBBFDE3DFD40E94--


From java-user-return-46850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 13:40:22 2010
Return-Path: <java-user-return-46850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7612 invoked from network); 30 Jul 2010 13:40:21 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 13:40:21 -0000
Received: (qmail 19147 invoked by uid 500); 30 Jul 2010 13:40:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18831 invoked by uid 500); 30 Jul 2010 13:40:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18823 invoked by uid 99); 30 Jul 2010 13:40:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 13:40:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 13:40:10 +0000
Received: by bwz2 with SMTP id 2so1042596bwz.35
        for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 06:39:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=kehCaKhOdgTnbdrvoAgjF18PlgZe1ERUK6qM9lGrn58=;
        b=Rucw8fd0Hn2pFVgxnDVW+ZJ1NXFLBuBEbzRIoPU5dSsZQGUIG3yMFbnHnBTycLUP6V
         JnnzPwafUyjCf1kW2r1SWGuiWb5yQjVe8yVHpus0T1mTAwDSP2WNUXtqVZ8MqTQtaazs
         6dlPR1oOS6EFYHb8gIGNVHkoCRJdqWbDE1TwU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=oZZ5xUbYtIraESdxbjl5HqmB5O/8d2JD5pSLBeQ10aorv0x1UlmmAAtc+txnVZzV9f
         Ov9Coqof8ZjSPO0dclSfXjIpv/ICsID9IYLgjsPK1M8dLKIgQKes7ZI37QVERaSMrd5v
         7frIonT9htDJOnbYVd/v9O5R26bbcUQcFZWQ8=
Received: by 10.204.161.205 with SMTP id s13mr1137583bkx.148.1280497189187; 
	Fri, 30 Jul 2010 06:39:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Fri, 30 Jul 2010 06:39:29 -0700 (PDT)
In-Reply-To: <OF2398266F.A34BEF0D-ONC1257770.00478804-C1257770.004A228D@stoeu.com>
References: <OF2398266F.A34BEF0D-ONC1257770.00478804-C1257770.004A228D@stoeu.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 30 Jul 2010 14:39:29 +0100
Message-ID: <AANLkTik2jhTWr7tNaQkN-uMssVrRgMRQjZz8u4C3VFQZ@mail.gmail.com>
Subject: Re: Highlighter wildcard problems: NoClassDefFoundError in 
	Linux/CentOS 5.4, works in Windows XP
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0003255554c218efd7048c9afca9

--0003255554c218efd7048c9afca9
Content-Type: text/plain; charset=ISO-8859-1

Your linux set up is evidently missing a jar file - the one that contains
org/apache/lucene/index/memory/MemoryIndex.   Or it is there but not in the
CLASSPATH, or something else along those lines.


--
Ian.


On Fri, Jul 30, 2010 at 2:30 PM, Markus Roth <m.roth@stoeu.com> wrote:

>
>
> Hello everyone,
>
> I'm using lucene for obvious purposes and I'm trying to highlight
> search-term results.
>
> libraries I use:
> lucene-core version: 3.0.2
> lucene-highlighter version: 3.0.2
>
> Dev-System:
> WinXP Pro 32Bit, jdk1.6.0_20,
> java version "1.6.0_20"
> Java(TM) SE Runtime Environment (build 1.6.0_20-b02)
> Java HotSpot(TM) Client VM (build 16.3-b01, mixed mode, sharing)
>
> Server-System:
> Centos 5.4 Final x64 (in a VM),
> java version "1.6.0"
> OpenJDK Runtime Environment (build 1.6.0-b09)
> OpenJDK 64-Bit Server VM (build 1.6.0-b09, mixed mode)
>
> I created a small Httpserver(in Java) that responds to POST/GET. A small
> form will POST search terms which are then passed
> to the IndexSearcher. After that the highlighter is supposed to highlight
> search-term hits. (everything is set to use UTF-8)
>
> When I use * as a wildcard in a search-term while the application is
> running in Windows, everything is fine and the results are
> returned as expected. However, same is not true for CentOS. The following
> Exception is thrown for the same build with the same
> query:
>
> Exception in thread "pool-4-thread-4" java.lang.NoClassDefFoundError:
> org/apache/lucene/index/memory/MemoryIndex
> at
> org.apache.lucene.search.highlight.WeightedSpanTermExtractor$FakeReader.<clinit>(WeightedSpanTermExtractor.java:560)
> at
> org.apache.lucene.search.highlight.WeightedSpanTermExtractor.extract(WeightedSpanTermExtractor.java:153)
> at
> org.apache.lucene.search.highlight.WeightedSpanTermExtractor.extract(WeightedSpanTermExtractor.java:97)
> at
> org.apache.lucene.search.highlight.WeightedSpanTermExtractor.getWeightedSpanTerms(WeightedSpanTermExtractor.java:383)
> at
> org.apache.lucene.search.highlight.QueryScorer.initExtractor(QueryScorer.java:216)
> at
> org.apache.lucene.search.highlight.QueryScorer.init(QueryScorer.java:184)
> at
> org.apache.lucene.search.highlight.Highlighter.getBestTextFragments(Highlighter.java:200)
> at com.stoeu.parsing.stoQueryParser.query(stoQueryParser.java:129)
> at com.stoeu.parsing.stoQueryParser.query(stoQueryParser.java:336)
> at com.stoeu.query.MyHttpHandler.handle(MyHttpHandler.java:127)
> at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:83)
> at sun.net.httpserver.AuthFilter.doFilter(AuthFilter.java:83)
> at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:86)
> at
> sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle(ServerImpl.java:589)
> at com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:83)
> at sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:561)
> at
> java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
> at
> java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
> at java.lang.Thread.run(Thread.java:636)
> Caused by: java.lang.ClassNotFoundException:
> org.apache.lucene.index.memory.MemoryIndex
> at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
> at java.security.AccessController.doPrivileged(Native Method)
> at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
> at java.lang.ClassLoader.loadClass(ClassLoader.java:323)
> at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
> at java.lang.ClassLoader.loadClass(ClassLoader.java:268)
> at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:336)
> ... 19 more
>
>
> Anyone got an idea what's wrong?
>
> Greetings,
> Markus
> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
> Sto AG, Ehrenbachstr.1, D-79780 Stuehlingen
>
> Vorstand/Board: Jochen Stotmeister (Vorsitzender/Chairman),
> Gerd Stotmeister, Hans-Dieter Schumacher
> Aufsichtsratsvorsitzender/Chairman Supervisory Board:
> Dr. Max-Burkhard Zwosta
>
> Sitz der Gesellschaft/Head Office: D-79780 Stuehlingen
> Handelsregister/Registration: Amtsgericht Freiburg HRB 620675
> USt-ID/Tax ID: DE142834082
> =============================================================
>

--0003255554c218efd7048c9afca9--

From java-user-return-46851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 13:46:56 2010
Return-Path: <java-user-return-46851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9917 invoked from network); 30 Jul 2010 13:46:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 13:46:55 -0000
Received: (qmail 23549 invoked by uid 500); 30 Jul 2010 13:46:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23214 invoked by uid 500); 30 Jul 2010 13:46:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23206 invoked by uid 99); 30 Jul 2010 13:46:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 13:46:49 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS,TVD_FW_GRAPHIC_NAME_MID
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of m.roth@stoeu.com designates 217.111.120.9 as permitted sender)
Received: from [217.111.120.9] (HELO mailout01.rmx.de) (217.111.120.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 13:46:40 +0000
Received: from [172.19.17.49] (HELO kdin02.retarus.de)
  by mailout01.rmx.de (CommuniGate Pro SMTP 5.2.13 _community_)
  with ESMTP id 112260835 for java-user@lucene.apache.org; Fri, 30 Jul 2010 15:46:20 +0200
Received: from www.stoeu.com ([212.184.115.16])
	by kdin02.retarus.de (8.14.2/8.14.2/retarus.custom) with ESMTP id o6UDkIoK013484
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 15:46:18 +0200
In-Reply-To: <AANLkTik2jhTWr7tNaQkN-uMssVrRgMRQjZz8u4C3VFQZ@mail.gmail.com>
References: <OF2398266F.A34BEF0D-ONC1257770.00478804-C1257770.004A228D@stoeu.com> <AANLkTik2jhTWr7tNaQkN-uMssVrRgMRQjZz8u4C3VFQZ@mail.gmail.com>
Subject: Antwort: Re: Highlighter wildcard problems: NoClassDefFoundError in 	Linux/CentOS
 5.4, works in Windows XP
X-KeepSent: 3C109B63:DFD40EF6-C1257770:004BA25D;
 type=4; name=$KeepSent
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 8.5.1 FP2 March 18, 2010
From: Markus Roth <m.roth@stoeu.com>
Message-ID: <OF3C109B63.DFD40EF6-ONC1257770.004BA25D-C1257770.004BA4EF@stoeu.com>
Date: Fri, 30 Jul 2010 15:46:57 +0200
X-MIMETrack: Serialize by Router on DEWELNK7/STOEUEXT(Release 8.5.1FP2|March 17, 2010) at
 07/30/2010 15:46:17
MIME-Version: 1.0
Content-type: multipart/related; 
	Boundary="0__=4EBBFDE3DFD824CD8f9e8a93df938690918c4EBBFDE3DFD824CD"
X-RMX-ID: 20100730-154618-o6UDkIoK013484-0@kdin02
X-RMX-TRACE: 2010-07-30 15:46:19 RmxMSO@kdin02/mailcc07 [0.4s] 20100730-154618-o6UDkIoK013484-0@kdin02 0:00:01
X-RMX-TRACE: 2010-07-30 15:46:18 KdIn@kdin02/mailcc11 [0.3s] 20100730-154618-o6UDkIoK013484-0@kdin02 0:00:00
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=4EBBFDE3DFD824CD8f9e8a93df938690918c4EBBFDE3DFD824CD
Content-type: multipart/alternative; 
	Boundary="1__=4EBBFDE3DFD824CD8f9e8a93df938690918c4EBBFDE3DFD824CD"

--1__=4EBBFDE3DFD824CD8f9e8a93df938690918c4EBBFDE3DFD824CD
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable






First of all, thanks for your response.
But how can that be true if a search-term without a wildcard (and the
highlighting of the results) works fine?

Greetings,
Markus



                                                                       =
    
             Ian Lea                                                   =
    
             <ian.lea@gmail                                            =
    
             .com>                                                     =
 An 
                                     java-user@lucene.apache.org       =
    
             30.07.2010                                              Ko=
pie 
             15:39                                                     =
    
                                                                     Th=
ema 
                                     Re: Highlighter wildcard problems:=
    
                 Bitte               NoClassDefFoundError in           =
 
              antworten an           Linux/CentOS 5.4, works in Windows=
 XP 
             java-user@luce                                            =
    
             ne.apache.org                                             =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    




Your linux set up is evidently missing a jar file - the one that contai=
ns
org/apache/lucene/index/memory/MemoryIndex.   Or it is there but not in=
 the
CLASSPATH, or something else along those lines.


--
Ian.

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sto AG, Ehrenbachstr.1, D-79780 Stuehlingen

Vorstand/Board: Jochen Stotmeister (Vorsitzender/Chairman),
Gerd Stotmeister, Hans-Dieter Schumacher
Aufsichtsratsvorsitzender/Chairman Supervisory Board:
Dr. Max-Burkhard Zwosta

Sitz der Gesellschaft/Head Office: D-79780 Stuehlingen
Handelsregister/Registration: Amtsgericht Freiburg HRB 620675
USt-ID/Tax ID: DE142834082
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
=

--1__=4EBBFDE3DFD824CD8f9e8a93df938690918c4EBBFDE3DFD824CD
Content-type: text/html; charset=US-ASCII
Content-Disposition: inline
Content-transfer-encoding: quoted-printable

<html><body>
<p><img src=3D"cid:1__=3D4EBBFDE3DFD824CD8f9e8a93df9386@stoeu.com" widt=
h=3D"580" height=3D"70"><br>
<br>
<br>
First of all, thanks for your response.<br>
But how can that be true if a search-term without a wildcard (and the h=
ighlighting of the results) works fine?<br>
<br>
Greetings, <br>
Markus<br>
<br>
<br>
<img width=3D"16" height=3D"16" src=3D"cid:2__=3D4EBBFDE3DFD824CD8f9e8a=
93df9386@stoeu.com" border=3D"0" alt=3D"Inactive hide details for Ian L=
ea ---30.07.2010 15:42:05---Your linux set up is evidently missing a ja=
r file - the one that con"><font color=3D"#424282">Ian Lea ---30.07.201=
0 15:42:05---Your linux set up is evidently missing a jar file - the on=
e that contains</font><br>
<br>

<table width=3D"100%" border=3D"0" cellspacing=3D"0" cellpadding=3D"0">=

<tr valign=3D"top"><td style=3D"background-image:url(cid:3__=3D4EBBFDE3=
DFD824CD8f9e8a93df9386@stoeu.com); background-repeat: no-repeat; " widt=
h=3D"37%">
<ul>
<ul>
<ul>
<ul><b><font size=3D"2">Ian Lea &lt;ian.lea@gmail.com&gt;</font></b><fo=
nt size=3D"2"> </font>
<p><font size=3D"2">30.07.2010 15:39</font>
<table border=3D"1">
<tr valign=3D"top"><td width=3D"168" bgcolor=3D"#FFFFFF"><div align=3D"=
center"><font size=3D"2">Bitte antworten an<br>
java-user@lucene.apache.org</font></div></td></tr>
</table>
</ul>
</ul>
</ul>
</ul>
</td><td width=3D"63%">
<table width=3D"100%" border=3D"0" cellspacing=3D"0" cellpadding=3D"0">=

<tr valign=3D"top"><td width=3D"1%"><img width=3D"63" height=3D"1" src=3D=
"cid:4__=3D4EBBFDE3DFD824CD8f9e8a93df9386@stoeu.com" border=3D"0" alt=3D=
""><br>
<div align=3D"right"><font size=3D"2">An</font></div></td><td width=3D"=
100%"><img width=3D"1" height=3D"1" src=3D"cid:4__=3D4EBBFDE3DFD824CD8f=
9e8a93df9386@stoeu.com" border=3D"0" alt=3D""><br>
<font size=3D"2">java-user@lucene.apache.org</font></td></tr>

<tr valign=3D"top"><td width=3D"1%"><img width=3D"63" height=3D"1" src=3D=
"cid:4__=3D4EBBFDE3DFD824CD8f9e8a93df9386@stoeu.com" border=3D"0" alt=3D=
""><br>
<div align=3D"right"><font size=3D"2">Kopie</font></div></td><td width=3D=
"100%"><img width=3D"1" height=3D"1" src=3D"cid:4__=3D4EBBFDE3DFD824CD8=
f9e8a93df9386@stoeu.com" border=3D"0" alt=3D""><br>
</td></tr>

<tr valign=3D"top"><td width=3D"1%"><img width=3D"63" height=3D"1" src=3D=
"cid:4__=3D4EBBFDE3DFD824CD8f9e8a93df9386@stoeu.com" border=3D"0" alt=3D=
""><br>
<div align=3D"right"><font size=3D"2">Thema</font></div></td><td width=3D=
"100%"><img width=3D"1" height=3D"1" src=3D"cid:4__=3D4EBBFDE3DFD824CD8=
f9e8a93df9386@stoeu.com" border=3D"0" alt=3D""><br>
<font size=3D"2">Re: Highlighter wildcard problems: NoClassDefFoundErro=
r in 	Linux/CentOS 5.4, works in Windows XP</font></td></tr>
</table>

<table border=3D"0" cellspacing=3D"0" cellpadding=3D"0">
<tr valign=3D"top"><td width=3D"58"><img width=3D"1" height=3D"1" src=3D=
"cid:4__=3D4EBBFDE3DFD824CD8f9e8a93df9386@stoeu.com" border=3D"0" alt=3D=
""></td><td width=3D"336"><img width=3D"1" height=3D"1" src=3D"cid:4__=3D=
4EBBFDE3DFD824CD8f9e8a93df9386@stoeu.com" border=3D"0" alt=3D""></td></=
tr>
</table>
</td></tr>
</table>
<br>
<tt>Your linux set up is evidently missing a jar file - the one that co=
ntains<br>
org/apache/lucene/index/memory/MemoryIndex. &nbsp; Or it is there but n=
ot in the<br>
CLASSPATH, or something else along those lines.<br>
<br>
<br>
--<br>
Ian.</tt><br>
<br>
<font size=3D"2" face=3D"Arial">+++++++++++++++++++++++++++++++++++++++=
++++++++++++++++++++++<br>
Sto AG, Ehrenbachstr.1, D-79780 Stuehlingen<br>
 <br>
Vorstand/Board: Jochen Stotmeister (Vorsitzender/Chairman), <br>
Gerd Stotmeister, Hans-Dieter Schumacher<br>
Aufsichtsratsvorsitzender/Chairman Supervisory Board:<br>
Dr. Max-Burkhard Zwosta<br>
 <br>
Sitz der Gesellschaft/Head Office: D-79780 Stuehlingen<br>
Handelsregister/Registration: Amtsgericht Freiburg HRB 620675<br>
USt-ID/Tax ID: DE142834082<br>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<br>
    </font></body></html>=


--1__=4EBBFDE3DFD824CD8f9e8a93df938690918c4EBBFDE3DFD824CD--


--0__=4EBBFDE3DFD824CD8f9e8a93df938690918c4EBBFDE3DFD824CD--


From java-user-return-46852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 13:52:34 2010
Return-Path: <java-user-return-46852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11483 invoked from network); 30 Jul 2010 13:52:33 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 13:52:33 -0000
Received: (qmail 29392 invoked by uid 500); 30 Jul 2010 13:52:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29140 invoked by uid 500); 30 Jul 2010 13:52:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29132 invoked by uid 99); 30 Jul 2010 13:52:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 13:52:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 13:52:21 +0000
Received: by bwz2 with SMTP id 2so1050835bwz.35
        for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 06:52:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=LH4GP9e11ks7urIzlHC4TxFqDUBbFpBZbbFnrgNN/MM=;
        b=jgUuJRs3Hj0egPWRQcth+YWtFUWrXd0sZRIxvoM2X0b/FBvooSKRQv8hajf1b5HfMW
         4VC10oew3QfkEvlrEw/bp7+ML52fTaQMFHcAu6h+TT0tWghONJn7Bm9FtfX6UIVb0voa
         qtxjaIdoICf4Yno5wIwS+ufSOUe87p2ZcpwPA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=o9kzV51bHMGpgmtPF2rqwMOiH+QkPKWbDSdq+vO92IZNgSKp6DAglycQxo6YGllXyH
         ccFQZw61f9o8UBLclB7KxSieL3uRQmA6C1ml8o7vq1kOZmIvnQtNJPj58YFqysal5k5L
         TlBYy127ukk/kN6Ttd9QiQ5NZBn+2er+xKQCo=
Received: by 10.204.176.144 with SMTP id be16mr1224289bkb.53.1280497921105; 
	Fri, 30 Jul 2010 06:52:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Fri, 30 Jul 2010 06:51:41 -0700 (PDT)
In-Reply-To: <OF3C109B63.DFD40EF6-ONC1257770.004BA25D-C1257770.004BA4EF@stoeu.com>
References: <OF2398266F.A34BEF0D-ONC1257770.00478804-C1257770.004A228D@stoeu.com> 
	<AANLkTik2jhTWr7tNaQkN-uMssVrRgMRQjZz8u4C3VFQZ@mail.gmail.com> 
	<OF3C109B63.DFD40EF6-ONC1257770.004BA25D-C1257770.004BA4EF@stoeu.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 30 Jul 2010 14:51:41 +0100
Message-ID: <AANLkTim-woq3EF6Hzq+FfZ-eW2EU_6LVYacfwsiVo4Y6@mail.gmail.com>
Subject: Re: Re: Highlighter wildcard problems: NoClassDefFoundError in 
	Linux/CentOS 5.4, works in Windows XP
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636c5a252b92143048c9b27d2
X-Virus-Checked: Checked by ClamAV on apache.org

--001636c5a252b92143048c9b27d2
Content-Type: text/plain; charset=ISO-8859-1

Because the highlighter only uses MemoryIndex if wildcards are involved?  I
don't use the highlighter package so have no idea if that is correct or not,
but the message

 java.lang.NoClassDefFoundError: org/apache/lucene/index/memory/MemoryIndex

is clear.  The jvm can't find that class.


--
Ian.


On Fri, Jul 30, 2010 at 2:46 PM, Markus Roth <m.roth@stoeu.com> wrote:

>
>
>
> First of all, thanks for your response.
> But how can that be true if a search-term without a wildcard (and the
> highlighting of the results) works fine?
>
> Greetings,
> Markus
>
>
> [image: Inactive hide details for Ian Lea ---30.07.2010 15:42:05---Your
> linux set up is evidently missing a jar file - the one that con]Ian Lea
> ---30.07.2010 15:42:05---Your linux set up is evidently missing a jar file -
> the one that contains
>
>
>     *Ian Lea <ian.lea@gmail.com>*
>
>             30.07.2010 15:39
>             Bitte antworten an
>             java-user@lucene.apache.org
>
>
> An
>
> java-user@lucene.apache.org
> Kopie
>
>
> Thema
>
> Re: Highlighter wildcard problems: NoClassDefFoundError in Linux/CentOS
> 5.4, works in Windows XP
>
> Your linux set up is evidently missing a jar file - the one that contains
> org/apache/lucene/index/memory/MemoryIndex.   Or it is there but not in the
> CLASSPATH, or something else along those lines.
>
>
> --
> Ian.
>
> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
> Sto AG, Ehrenbachstr.1, D-79780 Stuehlingen
>
> Vorstand/Board: Jochen Stotmeister (Vorsitzender/Chairman),
> Gerd Stotmeister, Hans-Dieter Schumacher
> Aufsichtsratsvorsitzender/Chairman Supervisory Board:
> Dr. Max-Burkhard Zwosta
>
> Sitz der Gesellschaft/Head Office: D-79780 Stuehlingen
> Handelsregister/Registration: Amtsgericht Freiburg HRB 620675
> USt-ID/Tax ID: DE142834082
> =============================================================
>

--001636c5a252b92143048c9b27d2--

From java-user-return-46853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 14:02:40 2010
Return-Path: <java-user-return-46853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12804 invoked from network); 30 Jul 2010 14:02:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 14:02:40 -0000
Received: (qmail 39396 invoked by uid 500); 30 Jul 2010 14:02:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39059 invoked by uid 500); 30 Jul 2010 14:02:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39050 invoked by uid 99); 30 Jul 2010 14:02:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 14:02:34 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS,TVD_FW_GRAPHIC_NAME_MID
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of m.roth@stoeu.com designates 217.111.120.10 as permitted sender)
Received: from [217.111.120.10] (HELO mailout02.rmx.de) (217.111.120.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 14:02:27 +0000
Received: from [172.19.17.48] (HELO kdin01.retarus.de)
  by mailout02.rmx.de (CommuniGate Pro SMTP 5.2.13 _community_)
  with ESMTP id 112282369 for java-user@lucene.apache.org; Fri, 30 Jul 2010 16:02:05 +0200
Received: from www.stoeu.com ([212.184.115.16])
	by kdin01.retarus.de (8.14.2/8.14.2/retarus.custom) with ESMTP id o6UE238V005070
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 16:02:03 +0200
In-Reply-To: <AANLkTim-woq3EF6Hzq+FfZ-eW2EU_6LVYacfwsiVo4Y6@mail.gmail.com>
References: <OF2398266F.A34BEF0D-ONC1257770.00478804-C1257770.004A228D@stoeu.com> 	<AANLkTik2jhTWr7tNaQkN-uMssVrRgMRQjZz8u4C3VFQZ@mail.gmail.com> 
	<OF3C109B63.DFD40EF6-ONC1257770.004BA25D-C1257770.004BA4EF@stoeu.com> <AANLkTim-woq3EF6Hzq+FfZ-eW2EU_6LVYacfwsiVo4Y6@mail.gmail.com>
Subject: Antwort: Re: Re: Highlighter wildcard problems: NoClassDefFoundError in
 	Linux/CentOS 5.4, works in Windows XP
X-KeepSent: 8F3CEFAB:BAFC74B2-C1257770:004CD685;
 type=4; name=$KeepSent
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 8.5.1 FP2 March 18, 2010
From: Markus Roth <m.roth@stoeu.com>
Message-ID: <OF8F3CEFAB.BAFC74B2-ONC1257770.004CD685-C1257770.004D16E3@stoeu.com>
Date: Fri, 30 Jul 2010 16:02:44 +0200
X-MIMETrack: Serialize by Router on DEWELNK7/STOEUEXT(Release 8.5.1FP2|March 17, 2010) at
 07/30/2010 16:02:03
MIME-Version: 1.0
Content-type: multipart/related; 
	Boundary="0__=4EBBFDE3DFDF50158f9e8a93df938690918c4EBBFDE3DFDF5015"
X-RMX-ID: 20100730-160203-o6UE238V005070-0@kdin01
X-RMX-TRACE: 2010-07-30 16:02:04 RmxMSO@kdin01/mailcc05 [0.4s] 20100730-160203-o6UE238V005070-0@kdin01 0:00:01
X-RMX-TRACE: 2010-07-30 16:02:03 KdIn@kdin01/mailcc11 [0.3s] 20100730-160203-o6UE238V005070-0@kdin01 0:00:00

--0__=4EBBFDE3DFDF50158f9e8a93df938690918c4EBBFDE3DFDF5015
Content-type: multipart/alternative; 
	Boundary="1__=4EBBFDE3DFDF50158f9e8a93df938690918c4EBBFDE3DFDF5015"

--1__=4EBBFDE3DFDF50158f9e8a93df938690918c4EBBFDE3DFDF5015
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable






Well it turns out that your suggestion was true. I added
lucene-memory-3.0.2.jar from the contrib/memory folder to the CLASSPATH=
 and
it works.
The odd thing is that I most definitely have not added the jar to the C=
P in
Windows - and there wildcards work (with just core and highlight).

Thanks and greetings,
Markus


                                                                       =
    
             Ian Lea                                                   =
    
             <ian.lea@gmail                                            =
    
             .com>                                                     =
 An 
                                     java-user@lucene.apache.org       =
    
             30.07.2010                                              Ko=
pie 
             15:51                                                     =
    
                                                                     Th=
ema 
                                     Re: Re: Highlighter wildcard      =
    
                 Bitte               problems: NoClassDefFoundError in =
    
              antworten an           Linux/CentOS 5.4, works in Windows=
 XP 
             java-user@luce                                            =
    
             ne.apache.org                                             =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    




Because the highlighter only uses MemoryIndex if wildcards are involved=
?  I
don't use the highlighter package so have no idea if that is correct or=

not,
but the message

 java.lang.NoClassDefFoundError: org/apache/lucene/index/memory/MemoryI=
ndex

is clear.  The jvm can't find that class.


--
Ian.


On Fri, Jul 30, 2010 at 2:46 PM, Markus Roth <m.roth@stoeu.com> wrote:

>
>
>
> First of all, thanks for your response.
> But how can that be true if a search-term without a wildcard (and the=

> highlighting of the results) works fine?
>
> Greetings,
> Markus
>
>
> [image: Inactive hide details for Ian Lea ---30.07.2010 15:42:05---Yo=
ur
> linux set up is evidently missing a jar file - the one that con]Ian L=
ea
> ---30.07.2010 15:42:05---Your linux set up is evidently missing a jar=

file -
> the one that contains
>
>
>     *Ian Lea <ian.lea@gmail.com>*
>
>             30.07.2010 15:39
>             Bitte antworten an
>             java-user@lucene.apache.org
>
>
> An
>
> java-user@lucene.apache.org
> Kopie
>
>
> Thema
>
> Re: Highlighter wildcard problems: NoClassDefFoundError in Linux/Cent=
OS
> 5.4, works in Windows XP
>
> Your linux set up is evidently missing a jar file - the one that cont=
ains
> org/apache/lucene/index/memory/MemoryIndex.   Or it is there but not =
in
the
> CLASSPATH, or something else along those lines.
>
>
> --
> Ian.
>
> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
> Sto AG, Ehrenbachstr.1, D-79780 Stuehlingen
>
> Vorstand/Board: Jochen Stotmeister (Vorsitzender/Chairman),
> Gerd Stotmeister, Hans-Dieter Schumacher
> Aufsichtsratsvorsitzender/Chairman Supervisory Board:
> Dr. Max-Burkhard Zwosta
>
> Sitz der Gesellschaft/Head Office: D-79780 Stuehlingen
> Handelsregister/Registration: Amtsgericht Freiburg HRB 620675
> USt-ID/Tax ID: DE142834082
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>


+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Sto AG, Ehrenbachstr.1, D-79780 Stuehlingen

Vorstand/Board: Jochen Stotmeister (Vorsitzender/Chairman),
Gerd Stotmeister, Hans-Dieter Schumacher
Aufsichtsratsvorsitzender/Chairman Supervisory Board:
Dr. Max-Burkhard Zwosta

Sitz der Gesellschaft/Head Office: D-79780 Stuehlingen
Handelsregister/Registration: Amtsgericht Freiburg HRB 620675
USt-ID/Tax ID: DE142834082
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
=

--1__=4EBBFDE3DFDF50158f9e8a93df938690918c4EBBFDE3DFDF5015
Content-type: text/html; charset=US-ASCII
Content-Disposition: inline
Content-transfer-encoding: quoted-printable

<html><body>
<p><img src=3D"cid:1__=3D4EBBFDE3DFDF50158f9e8a93df9386@stoeu.com" widt=
h=3D"580" height=3D"70"><br>
<br>
<br>
Well it turns out that your suggestion was true. I added lucene-memory-=
3.0.2.jar from the contrib/memory folder to the CLASSPATH and it works.=
<br>
The odd thing is that I most definitely have not added the jar to the C=
P in Windows - and there wildcards work (with just core and highlight).=
<br>
<br>
Thanks and greetings,<br>
Markus<br>
<br>
<img width=3D"16" height=3D"16" src=3D"cid:2__=3D4EBBFDE3DFDF50158f9e8a=
93df9386@stoeu.com" border=3D"0" alt=3D"Inactive hide details for Ian L=
ea ---30.07.2010 15:53:24---Because the highlighter only uses MemoryInd=
ex if wildcards are invol"><font color=3D"#424282">Ian Lea ---30.07.201=
0 15:53:24---Because the highlighter only uses MemoryIndex if wildcards=
 are involved? I</font><br>
<br>

<table width=3D"100%" border=3D"0" cellspacing=3D"0" cellpadding=3D"0">=

<tr valign=3D"top"><td style=3D"background-image:url(cid:3__=3D4EBBFDE3=
DFDF50158f9e8a93df9386@stoeu.com); background-repeat: no-repeat; " widt=
h=3D"37%">
<ul>
<ul>
<ul>
<ul><b><font size=3D"2">Ian Lea &lt;ian.lea@gmail.com&gt;</font></b><fo=
nt size=3D"2"> </font>
<p><font size=3D"2">30.07.2010 15:51</font>
<table border=3D"1">
<tr valign=3D"top"><td width=3D"168" bgcolor=3D"#FFFFFF"><div align=3D"=
center"><font size=3D"2">Bitte antworten an<br>
java-user@lucene.apache.org</font></div></td></tr>
</table>
</ul>
</ul>
</ul>
</ul>
</td><td width=3D"63%">
<table width=3D"100%" border=3D"0" cellspacing=3D"0" cellpadding=3D"0">=

<tr valign=3D"top"><td width=3D"1%"><img width=3D"63" height=3D"1" src=3D=
"cid:4__=3D4EBBFDE3DFDF50158f9e8a93df9386@stoeu.com" border=3D"0" alt=3D=
""><br>
<div align=3D"right"><font size=3D"2">An</font></div></td><td width=3D"=
100%"><img width=3D"1" height=3D"1" src=3D"cid:4__=3D4EBBFDE3DFDF50158f=
9e8a93df9386@stoeu.com" border=3D"0" alt=3D""><br>
<font size=3D"2">java-user@lucene.apache.org</font></td></tr>

<tr valign=3D"top"><td width=3D"1%"><img width=3D"63" height=3D"1" src=3D=
"cid:4__=3D4EBBFDE3DFDF50158f9e8a93df9386@stoeu.com" border=3D"0" alt=3D=
""><br>
<div align=3D"right"><font size=3D"2">Kopie</font></div></td><td width=3D=
"100%"><img width=3D"1" height=3D"1" src=3D"cid:4__=3D4EBBFDE3DFDF50158=
f9e8a93df9386@stoeu.com" border=3D"0" alt=3D""><br>
</td></tr>

<tr valign=3D"top"><td width=3D"1%"><img width=3D"63" height=3D"1" src=3D=
"cid:4__=3D4EBBFDE3DFDF50158f9e8a93df9386@stoeu.com" border=3D"0" alt=3D=
""><br>
<div align=3D"right"><font size=3D"2">Thema</font></div></td><td width=3D=
"100%"><img width=3D"1" height=3D"1" src=3D"cid:4__=3D4EBBFDE3DFDF50158=
f9e8a93df9386@stoeu.com" border=3D"0" alt=3D""><br>
<font size=3D"2">Re: Re: Highlighter wildcard problems: NoClassDefFound=
Error in 	Linux/CentOS 5.4, works in Windows XP</font></td></tr>
</table>

<table border=3D"0" cellspacing=3D"0" cellpadding=3D"0">
<tr valign=3D"top"><td width=3D"58"><img width=3D"1" height=3D"1" src=3D=
"cid:4__=3D4EBBFDE3DFDF50158f9e8a93df9386@stoeu.com" border=3D"0" alt=3D=
""></td><td width=3D"336"><img width=3D"1" height=3D"1" src=3D"cid:4__=3D=
4EBBFDE3DFDF50158f9e8a93df9386@stoeu.com" border=3D"0" alt=3D""></td></=
tr>
</table>
</td></tr>
</table>
<br>
<tt>Because the highlighter only uses MemoryIndex if wildcards are invo=
lved? &nbsp;I<br>
don't use the highlighter package so have no idea if that is correct or=
 not,<br>
but the message<br>
<br>
 java.lang.NoClassDefFoundError: org/apache/lucene/index/memory/MemoryI=
ndex<br>
<br>
is clear. &nbsp;The jvm can't find that class.<br>
<br>
<br>
--<br>
Ian.<br>
<br>
<br>
On Fri, Jul 30, 2010 at 2:46 PM, Markus Roth &lt;m.roth@stoeu.com&gt; w=
rote:<br>
<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt; First of all, thanks for your response.<br>
&gt; But how can that be true if a search-term without a wildcard (and =
the<br>
&gt; highlighting of the results) works fine?<br>
&gt;<br>
&gt; Greetings,<br>
&gt; Markus<br>
&gt;<br>
&gt;<br>
&gt; [image: Inactive hide details for Ian Lea ---30.07.2010 15:42:05--=
-Your<br>
&gt; linux set up is evidently missing a jar file - the one that con]Ia=
n Lea<br>
&gt; ---30.07.2010 15:42:05---Your linux set up is evidently missing a =
jar file -<br>
&gt; the one that contains<br>
&gt;<br>
&gt;<br>
&gt; &nbsp; &nbsp; *Ian Lea &lt;ian.lea@gmail.com&gt;*<br>
&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 30.07.2010 15:39<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Bitte antworten an<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; java-user@lucene.apache.=
org<br>
&gt;<br>
&gt;<br>
&gt; An<br>
&gt;<br>
&gt; java-user@lucene.apache.org<br>
&gt; Kopie<br>
&gt;<br>
&gt;<br>
&gt; Thema<br>
&gt;<br>
&gt; Re: Highlighter wildcard problems: NoClassDefFoundError in Linux/C=
entOS<br>
&gt; 5.4, works in Windows XP<br>
&gt;<br>
&gt; Your linux set up is evidently missing a jar file - the one that c=
ontains<br>
&gt; org/apache/lucene/index/memory/MemoryIndex. &nbsp; Or it is there =
but not in the<br>
&gt; CLASSPATH, or something else along those lines.<br>
&gt;<br>
&gt;<br>
&gt; --<br>
&gt; Ian.<br>
&gt;<br>
&gt; +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++<br>
&gt; Sto AG, Ehrenbachstr.1, D-79780 Stuehlingen<br>
&gt;<br>
&gt; Vorstand/Board: Jochen Stotmeister (Vorsitzender/Chairman),<br>
&gt; Gerd Stotmeister, Hans-Dieter Schumacher<br>
&gt; Aufsichtsratsvorsitzender/Chairman Supervisory Board:<br>
&gt; Dr. Max-Burkhard Zwosta<br>
&gt;<br>
&gt; Sitz der Gesellschaft/Head Office: D-79780 Stuehlingen<br>
&gt; Handelsregister/Registration: Amtsgericht Freiburg HRB 620675<br>
&gt; USt-ID/Tax ID: DE142834082<br>
&gt; =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<br>
&gt;<br>
</tt><br>
<br>
<font size=3D"2" face=3D"Arial">+++++++++++++++++++++++++++++++++++++++=
++++++++++++++++++++++<br>
Sto AG, Ehrenbachstr.1, D-79780 Stuehlingen<br>
 <br>
Vorstand/Board: Jochen Stotmeister (Vorsitzender/Chairman), <br>
Gerd Stotmeister, Hans-Dieter Schumacher<br>
Aufsichtsratsvorsitzender/Chairman Supervisory Board:<br>
Dr. Max-Burkhard Zwosta<br>
 <br>
Sitz der Gesellschaft/Head Office: D-79780 Stuehlingen<br>
Handelsregister/Registration: Amtsgericht Freiburg HRB 620675<br>
USt-ID/Tax ID: DE142834082<br>
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D<br>
    </font></body></html>=


--1__=4EBBFDE3DFDF50158f9e8a93df938690918c4EBBFDE3DFDF5015--


--0__=4EBBFDE3DFDF50158f9e8a93df938690918c4EBBFDE3DFDF5015--


From java-user-return-46854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 14:30:10 2010
Return-Path: <java-user-return-46854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23788 invoked from network); 30 Jul 2010 14:30:10 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 14:30:10 -0000
Received: (qmail 67775 invoked by uid 500); 30 Jul 2010 14:30:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67488 invoked by uid 500); 30 Jul 2010 14:30:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67480 invoked by uid 99); 30 Jul 2010 14:30:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 14:30:05 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.78] (HELO web32901.mail.mud.yahoo.com) (209.191.69.78)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jul 2010 14:29:57 +0000
Received: (qmail 89273 invoked by uid 60001); 30 Jul 2010 14:29:36 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1280500176; bh=r0Mph7gum3A7Au0V4xzZDCnAeR8jMMs0s4X6Mkw7Jns=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=E8UKnZ+TcubEQ3c9fS2EtbS1BnMtRrZtuCK9W1B50/44OtjZ599Q8/x5sfuoL24IOAThnuK9TORvM9kWJ8CymaPBx73GXcgCGiqEX7toGjUUwis4XlNjg+if+wJ7ntc2j04udL0BL8G70FJ+2hWiUXcjIr7tzu7HxrXljnI1I4M=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=XzCQYUGu81FamfhTBdLgRQvz3O3FbPAEiitmtX2KS1DrAXEflQrmq5Q3fLbetHt6Rf0LyYRVgeb8F3Hhd6SQa0qR4JKB7MDaRWJnDz2G4FVRY+a2i0O8cgwJeiaHWfbta9v/yAgZinXo9qKcqEntsePqFWU4XSuTMJwZ/+t9Zvw=;
Message-ID: <182367.89000.qm@web32901.mail.mud.yahoo.com>
X-YMail-OSG: WIuwhNEVM1mD97tOtFGD36jHmd8dHECwTXseFz79nDru4Ij
 bZP7sb.CZe2k5f1mKEOm6E5H8q_cuC5JcoLGAbXEktfTnEtPbKe2ctuj6z5S
 BKpb5EXfF2t77ZlqDe7sJ0E_JRTbGCsEfwyHySSPEKe_LCpZLdO4ShzhAN8C
 vRv1AO2Px8tDkxUPAuQlavj6DBZ8424vp1byJ4q3zp1KCN.dQ2cphdh2cKkh
 5AZUr77TcDhX67dLhQFNQc4zqOti6_YpJKNCXgGVuwMvdRK1pJleilYo6.ZC
 MR1Xd8xGBiM4.IUD9doM0HI_XwTnmy1dN8wU38ncrVl54_BpHTxxEX0E-
Received: from [99.4.164.92] by web32901.mail.mud.yahoo.com via HTTP; Fri, 30 Jul 2010 07:29:36 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.105.279950
Date: Fri, 30 Jul 2010 07:29:36 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: InverseWildcardQuery
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Any hints on making something like an InverseWildcardQuery?

We're trying to find all documents that have at least one field that doesn't 
match the wildcard query.

Or is there a way to inverse any particular query?


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 14:39:17 2010
Return-Path: <java-user-return-46855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27233 invoked from network); 30 Jul 2010 14:39:17 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 14:39:17 -0000
Received: (qmail 81126 invoked by uid 500); 30 Jul 2010 14:39:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80856 invoked by uid 500); 30 Jul 2010 14:39:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80848 invoked by uid 99); 30 Jul 2010 14:39:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 14:39:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 14:39:08 +0000
Received: by bwz2 with SMTP id 2so1098398bwz.35
        for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 07:38:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=IvBBA3DkZlP1gRfNHVY+S9lHxiBfrGU5OsLxG1m5qe8=;
        b=IBUHIkVpZBuNp8YEcYB4HINu0ylYyPZGu5W6cyxUaSXzNh3sirtAfxiTn8rRE6chB3
         sAaX4iDkdeHWp+7EK4A25Gl5EUZc0nxhQ2fS3GMcG7nKba7YyrIOiVOKcAqEeeJfugqh
         povPCD7+L70IxS6TjK6XmbC5wsKefVjwHg9O4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=dGnc8+LzOHaGR45XZwGTxPyu3x6OxhOhN4erTYANyD+CXNBjNdJ49wArSsMXU7ykPN
         z8EBJpMWD38/LJHL2kxIElE01GMw2O231YWyVy1yjlhJHJrk2E4if7rGsIlsqYTotSv9
         Tz1g+dmdgVCspSp3CBgKcEg+jX9jq+G+8AUUQ=
Received: by 10.204.82.206 with SMTP id c14mr1201285bkl.145.1280500726214; 
	Fri, 30 Jul 2010 07:38:46 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Fri, 30 Jul 2010 07:38:26 -0700 (PDT)
In-Reply-To: <182367.89000.qm@web32901.mail.mud.yahoo.com>
References: <182367.89000.qm@web32901.mail.mud.yahoo.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 30 Jul 2010 15:38:26 +0100
Message-ID: <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>
Subject: Re: InverseWildcardQuery
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

I can't get my head round exactly what you want, but a standard lucene
technique is a BooleanQuery holding a MatchAllDocsQuery and a second
query, can be anything, having Occur.MUST_NOT.  I guess that is a way
of inverting the second query.


--
Ian.


On Fri, Jul 30, 2010 at 3:29 PM, Justin <crynax@yahoo.com> wrote:
> Any hints on making something like an InverseWildcardQuery?
>
> We're trying to find all documents that have at least one field that doesn't
> match the wildcard query.
>
> Or is there a way to inverse any particular query?
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 15:16:24 2010
Return-Path: <java-user-return-46856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39656 invoked from network); 30 Jul 2010 15:16:24 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 15:16:24 -0000
Received: (qmail 20580 invoked by uid 500); 30 Jul 2010 15:16:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20534 invoked by uid 500); 30 Jul 2010 15:16:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20525 invoked by uid 99); 30 Jul 2010 15:16:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 15:16:20 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [171.67.219.81] (HELO smtp.stanford.edu) (171.67.219.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 15:16:13 +0000
Received: from smtp.stanford.edu (localhost.localdomain [127.0.0.1])
	by localhost (Postfix) with SMTP id 41DDB1790AC
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 08:15:52 -0700 (PDT)
Received: from fafner.Stanford.EDU (fafner.Stanford.EDU [171.65.77.2])
	(using TLSv1 with cipher DHE-RSA-AES256-SHA (256/256 bits))
	(No client certificate requested)
	by smtp.stanford.edu (Postfix) with ESMTPS id 06D361790A4
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 08:15:50 -0700 (PDT)
Received: from fafner.Stanford.EDU (localhost [127.0.0.1])
	by fafner.Stanford.EDU (8.14.4/8.12.7) with ESMTP id o6UFFori014781
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 08:15:50 -0700 (PDT)
Received: from localhost (shuai@localhost)
	by fafner.Stanford.EDU (8.14.4/8.12.7/Submit) with ESMTP id o6UFFo0S014777
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 08:15:50 -0700 (PDT)
Date: Fri, 30 Jul 2010 08:15:50 -0700 (PDT)
From: Shuai Weng <shuai@genome.stanford.edu>
To: java-user@lucene.apache.org
Subject: lucene/solr full text search
In-Reply-To: <AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com>
Message-ID: <Pine.GSO.4.64.1007300807370.13898@fafner.Stanford.EDU>
References: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com>
 <AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Spam: Probability=8%, Report='
 BODYTEXTP_SIZE_3000_LESS 0, BODY_SIZE_1000_LESS 0, BODY_SIZE_100_199 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, SMALL_BODY 0, __CT 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0'


Hey,

I was wondering if we can search info from a subset of papers
instead of from the whole index pool.

Thanks,
Shuai



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 15:19:58 2010
Return-Path: <java-user-return-46857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40663 invoked from network); 30 Jul 2010 15:19:58 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 15:19:58 -0000
Received: (qmail 26172 invoked by uid 500); 30 Jul 2010 15:19:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26102 invoked by uid 500); 30 Jul 2010 15:19:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26094 invoked by uid 99); 30 Jul 2010 15:19:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 15:19:55 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.81] (HELO web32904.mail.mud.yahoo.com) (209.191.69.81)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jul 2010 15:19:46 +0000
Received: (qmail 15952 invoked by uid 60001); 30 Jul 2010 15:19:24 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1280503164; bh=M0BRECpMUNUeXbo23jIDAtSIO23hfBF7ZtHOqZiDh/Q=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=gMio+O30Io1SXfxZgaYmnVSsyGp0wrzTRZsVnWiDA1duPFty3p2q8J2zSKNVW4jPcNN/TxZVUbgCO1iQtqo2X8n97623yJOTruDuBtaA04FFCnlF7eKarygToAWM+d4z7Kn0QVH4oRAR/5y2pEpKKaoLRfhEPUNBMH72E8eofK0=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=u3tjG981UbgAKIcj+GLJBb8L31HoxZNSDdVuBj2L5dIbQhxWKjZyCqqqtZyXwpwRAKXRGCvgaIrlV990Y8RZqSar06X3h3L+4T1tUEHiw1qQuz2DJ+t3FGIDrUUNJthTjl1Zc+11HfRymLRdg1lF9j5ZNciFDVUrSH9uZFDN84k=;
Message-ID: <101578.94509.qm@web32904.mail.mud.yahoo.com>
X-YMail-OSG: PzBTZcwVM1lBbQ0jWslIjC7Vssl6BGU9Vk5c7up5QoIu7B9
 VYjbWyH8pN2S79bcrm8WkmePavycGJENivgtQlj.uME90CZId3BdIARtxhtQ
 q5RP0xplq89SQwnUD4vrcF5wT6gBEE65.gf9LImfHEztAiCRlwUrfVCm_6gp
 Ka.w74ueOwUYDv31ondBQQlNklMQq9yYpJuKU7TWB_UyMjhw6d0m2XxRLw.w
 UG6Ui_7KuqBon88yWD69foeAiQZO9lD8PPtFT7FbuN5_B__zIM6Xn1UkOx_7
 nemacrdX05SLyhlT0b4Xr1zBaOzbM6mO1TyNRchE9nWvzcwgQo5865QpIez9
 VTQ9qh3hriayJrmk-
Received: from [72.36.94.20] by web32904.mail.mud.yahoo.com via HTTP; Fri, 30 Jul 2010 08:19:24 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.105.279950
References: <182367.89000.qm@web32901.mail.mud.yahoo.com> <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>
Date: Fri, 30 Jul 2010 08:19:24 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Re: InverseWildcardQuery
To: java-user@lucene.apache.org
In-Reply-To: <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

I think you're suggesting, for example, "*:* AND -myfield:foo*".

If my document contains "myfield:foobar" and "myfield:dog", the document would 
be thrown out because of the first field. I want to keep the document because 
the second field does not match.

Related, is there a way to use wildcards to match the beginning of the field?

org.apache.lucene.queryParser.ParseException: Cannot parse '*:* AND 
-myfield:*foo*': '*' or '?' not allowed as first character in WildcardQuery




----- Original Message ----
From: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Sent: Fri, July 30, 2010 9:38:26 AM
Subject: Re: InverseWildcardQuery

I can't get my head round exactly what you want, but a standard lucene
technique is a BooleanQuery holding a MatchAllDocsQuery and a second
query, can be anything, having Occur.MUST_NOT.  I guess that is a way
of inverting the second query.


--
Ian.


On Fri, Jul 30, 2010 at 3:29 PM, Justin <crynax@yahoo.com> wrote:
> Any hints on making something like an InverseWildcardQuery?
>
> We're trying to find all documents that have at least one field that doesn't
> match the wildcard query.
>
> Or is there a way to inverse any particular query?
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 15:21:11 2010
Return-Path: <java-user-return-46858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41086 invoked from network); 30 Jul 2010 15:21:11 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 15:21:11 -0000
Received: (qmail 31227 invoked by uid 500); 30 Jul 2010 15:21:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31177 invoked by uid 500); 30 Jul 2010 15:21:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31168 invoked by uid 99); 30 Jul 2010 15:21:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 15:21:08 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jayendra.patil@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 15:21:02 +0000
Received: by qyk34 with SMTP id 34so456504qyk.14
        for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 08:20:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type;
        bh=ZPf+sVk+h4l7KRI6WPneG0V5jv9bygiOJKbs9kcQFow=;
        b=mlE/z8nkQFaCo51gHmMpaep52sinVOXcEnrUcPcdlAqe1fQnGsa/d5hxSbC5wJ9uG+
         nYCsERedVJk5Dvp8ziDCdUOdcAkuV9fHPguJlSBVXBZRj74I0WokHbhSIeKWO9fhY7+0
         SCsit5+OSkm8Ts8UCkEm/qxj0HYtabSph8nyg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=rOzhPlmVJ7mi49eZwg0HtIPp8f7tfO1MbKAxyCoUBgmHPgcmQc2eegJj7H/3RNFOP/
         rMn5IQl2Pkj+eJt+H7wCew8HnUI+p52isVawKlPQm7FcKXKt1LvTlnxEH8sAWfPO0PeJ
         It5oh+nbSg7z98BK9sg8o0vugSYbHZbGL6ywE=
MIME-Version: 1.0
Received: by 10.220.98.140 with SMTP id q12mr1192956vcn.128.1280503240895; 
	Fri, 30 Jul 2010 08:20:40 -0700 (PDT)
Received: by 10.220.20.81 with HTTP; Fri, 30 Jul 2010 08:20:40 -0700 (PDT)
In-Reply-To: <AANLkTimVBu3wjOGvnRjXBTjjw_8qLy69Yt3hiHwp_6e1@mail.gmail.com>
References: <AANLkTimVBu3wjOGvnRjXBTjjw_8qLy69Yt3hiHwp_6e1@mail.gmail.com>
Date: Fri, 30 Jul 2010 11:20:40 -0400
Message-ID: <AANLkTi=QqA6OFtS937Yx1BTA9Km=iZfmgLKgnmH04WYi@mail.gmail.com>
Subject: MultiPhraseQuery throws ArrayIndexOutOfBounds Exception
From: jayendra patil <jayendra.patil@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64607c2ceaeb5048c9c643d

--0016e64607c2ceaeb5048c9c643d
Content-Type: text/plain; charset=ISO-8859-1

Working on the nightly build of solr and lucene -

MultiPhraseQuery throws ArrayIndexOutOfBounds Exception for the words
defined as synonyms

SEVERE: java.lang.ArrayIndexOutOfBoundsException: 5
    at
org.apache.lucene.search.MultiPhraseQuery$MultiPhraseWeight.scorer(MultiPhraseQuery.java:191)

        if (terms.length > 1) {
          postingsEnum = new UnionDocsAndPositionsEnum(reader, terms);

          // coarse -- this overcounts since a given doc can
          // have more than one terms:
          docFreq = 0;
          for(int j=0;j<terms.length;j++) {
            // Should be j
            docFreq += reader.docFreq(terms[*i*]);
          }
        } else {

The for loop seems to iterate on terms length with variable j, but refers to
i within the loop which is iterating on the search terms count.

Regards,
Jayendra

--0016e64607c2ceaeb5048c9c643d--

From java-user-return-46859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 15:33:58 2010
Return-Path: <java-user-return-46859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46669 invoked from network); 30 Jul 2010 15:33:57 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 15:33:57 -0000
Received: (qmail 44501 invoked by uid 500); 30 Jul 2010 15:33:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44328 invoked by uid 500); 30 Jul 2010 15:33:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44320 invoked by uid 99); 30 Jul 2010 15:33:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 15:33:54 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 15:33:48 +0000
Received: by bwz2 with SMTP id 2so1169621bwz.35
        for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 08:33:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=d8vajUpMZ9CM4uWEH6QKPqW7Ey52b2bebgq0/nIHCUI=;
        b=kZlSHfSNAn1xuYROqqJVfP0+kHbJtWBjZj0Yu5vM36zgoPLFQ2DziBNoVEH6uEfXju
         Gv4wI5XEzhJwbqV3Ix86X64yiuGa9U7/nqM7/W4NRbwoCN2xcEv/Ghp3/8LpZ0Utqq68
         +0tLZgbzut3N1/w0gIGfyAympnPeAz4ZTLCkc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=qDhLpb+9nUGClbtvaP22TlNS0217g/CSTgA3J5BL3mDnJZs2qQO2ETXqP+qTrTRAjz
         7VS1PIhE6YDsMTPoY2yr/eL0bVXEQzX26+hiQJbj4MlALSt7tUmaPL/nsWq7N91212he
         MylBtk90HLV6j+hvdM20tF/HNz79j3XusyMZo=
Received: by 10.204.25.151 with SMTP id z23mr1322796bkb.46.1280504007234; Fri, 
	30 Jul 2010 08:33:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Fri, 30 Jul 2010 08:33:07 -0700 (PDT)
In-Reply-To: <101578.94509.qm@web32904.mail.mud.yahoo.com>
References: <182367.89000.qm@web32901.mail.mud.yahoo.com> <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com> 
	<101578.94509.qm@web32904.mail.mud.yahoo.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 30 Jul 2010 16:33:07 +0100
Message-ID: <AANLkTi=TNJx7WOPRoZOA6YFi95_qbBqaE+5mQm0tNon+@mail.gmail.com>
Subject: Re: InverseWildcardQuery
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

> I think you're suggesting, for example, "*:* AND -myfield:foo*".

Yes, I think that is equivalent.

> If my document contains "myfield:foobar" and "myfield:dog", the document would
> be thrown out because of the first field. I want to keep the document because
> the second field does not match.

OK, too hard for me ...

> Related, is there a way to use wildcards to match the beginning of the field?
>
> org.apache.lucene.queryParser.ParseException: Cannot parse '*:* AND
> -myfield:*foo*': '*' or '?' not allowed as first character in WildcardQuery

Yes.  QueryParser.setAllowLeadingWildcard().


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 15:41:03 2010
Return-Path: <java-user-return-46860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48274 invoked from network); 30 Jul 2010 15:41:03 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 15:41:03 -0000
Received: (qmail 54278 invoked by uid 500); 30 Jul 2010 15:41:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54233 invoked by uid 500); 30 Jul 2010 15:41:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54225 invoked by uid 99); 30 Jul 2010 15:41:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 15:41:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 15:40:54 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 90239D36007
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 17:40:30 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id F3t4rc53OwnX for <java-user@lucene.apache.org>;
	Fri, 30 Jul 2010 17:40:18 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B81FED36005
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 17:40:17 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <182367.89000.qm@web32901.mail.mud.yahoo.com> <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com> 	<101578.94509.qm@web32904.mail.mud.yahoo.com> <AANLkTi=TNJx7WOPRoZOA6YFi95_qbBqaE+5mQm0tNon+@mail.gmail.com>
In-Reply-To: <AANLkTi=TNJx7WOPRoZOA6YFi95_qbBqaE+5mQm0tNon+@mail.gmail.com>
Subject: RE: InverseWildcardQuery
Date: Fri, 30 Jul 2010 17:41:13 +0200
Message-ID: <004d01cb2ffd$a44863b0$ecd92b10$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQJJ39VxQPzoIQYosPsRWfnoF47ubgKeSN4kAdt8E34CqA9di5GTLEEQ
Content-Language: de

With all these requirements you slow down your queries immense. You should
think about indexing your terms different:

- if you need leading wildcards, think about indexing your terms in reverse!
Wildcards starting with * needs to iterate all terms, so it's very slow (and
because of this defaults to be disabled)
- wildcards and regexes should always be used sparingly, as it can happen
that the whole term dictionary needs to be checked. Maybe you should use
another analyzer, so you don't need wildcards.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Friday, July 30, 2010 5:33 PM
> To: java-user@lucene.apache.org
> Subject: Re: InverseWildcardQuery
> 
> > I think you're suggesting, for example, "*:* AND -myfield:foo*".
> 
> Yes, I think that is equivalent.
> 
> > If my document contains "myfield:foobar" and "myfield:dog", the
> > document would be thrown out because of the first field. I want to
> > keep the document because the second field does not match.
> 
> OK, too hard for me ...
> 
> > Related, is there a way to use wildcards to match the beginning of the
> field?
> >
> > org.apache.lucene.queryParser.ParseException: Cannot parse '*:* AND
> > -myfield:*foo*': '*' or '?' not allowed as first character in
> > WildcardQuery
> 
> Yes.  QueryParser.setAllowLeadingWildcard().
> 
> 
> --
> Ian.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 15:54:36 2010
Return-Path: <java-user-return-46861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51034 invoked from network); 30 Jul 2010 15:54:35 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 15:54:35 -0000
Received: (qmail 63073 invoked by uid 500); 30 Jul 2010 15:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62984 invoked by uid 500); 30 Jul 2010 15:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62976 invoked by uid 99); 30 Jul 2010 15:54:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 15:54:32 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.82] (HELO web32905.mail.mud.yahoo.com) (209.191.69.82)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jul 2010 15:54:26 +0000
Received: (qmail 83374 invoked by uid 60001); 30 Jul 2010 15:54:05 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1280505245; bh=6ZrZF9tn26lDFnT47x1otFc55txRLdwvKCGX/TYFZHQ=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=MnuCDXmn0YDBRlMBbmYymEQ1ILzXRefQneKsO0nmNNzxo3qdhY5hcNiPsBQTJvF2lAC3Kfzvp8xNuhCPRV0sOZ5EtD9EB6aqNN7ajp3enH9TLOziSjYqEwMqq1QYziAN0rfW694wzUUEuVYJ7V/i4kTGgAhNDhz931IH0AH5MZg=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=eGMVNCp2bW6gep203vQOnhPGcXlzhd6HHOCESnnk5Fl3F52aaWk6NWLocIYeO4AVToae2SzbCJpgsueJcCybceHhrUjgsR9n/5uUSx/EHPRSbvx/DA246vo0IQUwqc9cyzueE9+Vroi90ezbCd2JHpLdiuPmAifVdeKgkbK3egs=;
Message-ID: <3523.83134.qm@web32905.mail.mud.yahoo.com>
X-YMail-OSG: pGh7WwAVM1nQRdNPRA14pq2YtiGjlmIX4XF.0G82KPJ6tvs
 u566Ud3aklpnyXuOmmjEKueTEPrwqbQXy3cTGaXbPKsJrK2sozFAp_j7X3_.
 ko4v92LZebW2jQ7RKcUQ4MTSD.Rfu5h_pHQ85S9A35xibcVYEz1gobsFJ6vs
 JaYr2DzR1bJ431e19G72Y4LU3lztYsteUgp4Unmzju1.vr5a5w3f2SXuYu_D
 1Dnh1DsRM2hwB.h_JiWiVR130P_un3erpQhu_tp81Z3sTi5n3enIKToCYLFb
 RzPuPx1.FucPUJ9ux0Mh__cONgzo1P8ARoTjA9nrZJaDr00JXGXA5NbuS4qe
 qHZ7kZ1Ax1yOjBvsppt.9STnv99N4Lvh_Uw--
Received: from [72.36.94.20] by web32905.mail.mud.yahoo.com via HTTP; Fri, 30 Jul 2010 08:54:04 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.105.279950
References: <182367.89000.qm@web32901.mail.mud.yahoo.com> <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>  <101578.94509.qm@web32904.mail.mud.yahoo.com> <AANLkTi=TNJx7WOPRoZOA6YFi95_qbBqaE+5mQm0tNon+@mail.gmail.com> <004d01cb2ffd$a44863b0$ecd92b10$@thetaphi.de>
Date: Fri, 30 Jul 2010 08:54:04 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Re: InverseWildcardQuery
To: java-user@lucene.apache.org
In-Reply-To: <004d01cb2ffd$a44863b0$ecd92b10$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> indexing your terms in reverse

Unfortunately the suffix requires a wildcard as well in our case. There are a 
limited number of prefixes though (10ish), so perhaps we could combine them all 
into one query. We'd still need some sort of InverseWildcardQuery 
implementation.

> use another analyzer so you don't need wildcards

I know analyzers can be used with IndexWriter and with QueryParser. Is there 
somewhere an analyzer could be used to alter the field to match the query at 
search time instead of altering the query to match the field?

Our current path to solving our problem requires additional fields which need 
rewritten causing a much larger performance degredation. One of the two paths 
above would be much more desirable.




----- Original Message ----
From: Uwe Schindler <uwe@thetaphi.de>
To: java-user@lucene.apache.org
Sent: Fri, July 30, 2010 10:41:13 AM
Subject: RE: InverseWildcardQuery

With all these requirements you slow down your queries immense. You should
think about indexing your terms different:

- if you need leading wildcards, think about indexing your terms in reverse!
Wildcards starting with * needs to iterate all terms, so it's very slow (and
because of this defaults to be disabled)
- wildcards and regexes should always be used sparingly, as it can happen
that the whole term dictionary needs to be checked. Maybe you should use
another analyzer, so you don't need wildcards.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Ian Lea [mailto:ian.lea@gmail.com]
> Sent: Friday, July 30, 2010 5:33 PM
> To: java-user@lucene.apache.org
> Subject: Re: InverseWildcardQuery
> 
> > I think you're suggesting, for example, "*:* AND -myfield:foo*".
> 
> Yes, I think that is equivalent.
> 
> > If my document contains "myfield:foobar" and "myfield:dog", the
> > document would be thrown out because of the first field. I want to
> > keep the document because the second field does not match.
> 
> OK, too hard for me ...
> 
> > Related, is there a way to use wildcards to match the beginning of the
> field?
> >
> > org.apache.lucene.queryParser.ParseException: Cannot parse '*:* AND
> > -myfield:*foo*': '*' or '?' not allowed as first character in
> > WildcardQuery
> 
> Yes.  QueryParser.setAllowLeadingWildcard().
> 
> 
> --
> Ian.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 16:14:55 2010
Return-Path: <java-user-return-46862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59564 invoked from network); 30 Jul 2010 16:14:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 16:14:55 -0000
Received: (qmail 78931 invoked by uid 500); 30 Jul 2010 16:14:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78866 invoked by uid 500); 30 Jul 2010 16:14:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78858 invoked by uid 99); 30 Jul 2010 16:14:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 16:14:52 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 16:14:43 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o6UGE9G3016894
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 12:14:22 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Fri, 30 Jul 2010
 12:14:18 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 30 Jul 2010 12:14:17 -0400
Subject: RE: InverseWildcardQuery
Thread-Topic: InverseWildcardQuery
Thread-Index: Acsv+q9ZbHL/OH+VQ1iwstkO+PTuMAAAe1hw
Message-ID: <2D127F11DC79714E9B6A43AC9458147F79678597@suex07-mbx-03.ad.syr.edu>
References: <182367.89000.qm@web32901.mail.mud.yahoo.com>
 <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>
 <101578.94509.qm@web32904.mail.mud.yahoo.com>
In-Reply-To: <101578.94509.qm@web32904.mail.mud.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.0.10011,1.0.148,0.0.0000
 definitions=2010-07-30_04:2010-07-30,2010-07-30,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgSnVzdGluLA0KDQo+IFsuLi5dICIqOiogQU5EIC1teWZpZWxkOmZvbyoiLg0KPiANCj4gSWYg
bXkgZG9jdW1lbnQgY29udGFpbnMgIm15ZmllbGQ6Zm9vYmFyIiBhbmQgIm15ZmllbGQ6ZG9nIiwg
dGhlIGRvY3VtZW50DQo+IHdvdWxkIGJlIHRocm93biBvdXQgYmVjYXVzZSBvZiB0aGUgZmlyc3Qg
ZmllbGQuIEkgd2FudCB0byBrZWVwIHRoZQ0KPiBkb2N1bWVudCBiZWNhdXNlIHRoZSBzZWNvbmQg
ZmllbGQgZG9lcyBub3QgbWF0Y2guDQoNCkknbSBhc3N1bWluZyB0aGF0IHlvdSBtaXN0YWtlbmx5
IHVzZWQgdGhlIHNhbWUgZmllbGQgbmFtZSBhYm92ZSBpbiAoIm15ZmllbGQ6Zm9vYmFyIiBhbmQg
Im15ZmllbGQ6ZG9nIiksIGFuZCB0aGF0IHlvdSBpbnN0ZWFkIG1lYW50Og0KDQogICAgIm15Zmll
bGQxOmZvb2JhciIgYW5kICJteWZpZWxkMjpkb2ciLg0KDQpJIHRoaW5rIHlvdSBjYW4gZ2V0IHdo
YXQgeW91IHdhbnQgYnkgc3BlY2lmeWluZyBldmVyeSBmaWVsZCBpbiB0aGUgcXVlcnkgLSBlLmcu
LCBpZiBlYWNoIGRvY3VtZW50IGhhcyB0aGUgc2FtZSBzZXQgb2YgdHdvIGZpZWxkcyBGMSBhbmQg
RjI6DQoNCiAgICAoKjoqIEFORCAtRjE6Zm9vKikgT1IgKCo6KiBBTkQgLUYyOmZvbyopDQoNClRy
dXRoIHRhYmxlIGZvciBmb3VyIGRvY3VtZW50czoNCg0KCURvYzE6IEYxOmZvb2JhciAobm8tbWF0
Y2gpLCBGMjpkb2cgICAgICAobWF0Y2gpICAgID0+IG1hdGNoDQoJRG9jMjogRjE6Y2F0ICAgICht
YXRjaCksICAgIEYyOmRvZyAgICAgIChtYXRjaCkgICAgPT4gbWF0Y2gNCglEb2MzOiBGMTpjYXQg
ICAgKG1hdGNoKSwgICAgRjI6Zm9vc2JhbGwgKG5vLW1hdGNoKSA9PiBtYXRjaA0KCURvYzQ6IEYx
OmZvb2JhciAobm8tbWF0Y2gpLCBGMjpmb29zYmFsbCAobm8tbWF0Y2gpID0+IG5vLW1hdGNoDQoN
Ckdvb2QgbHVjaywNClN0ZXZlDQoNCg==


From java-user-return-46863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 16:32:45 2010
Return-Path: <java-user-return-46863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65821 invoked from network); 30 Jul 2010 16:32:44 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 16:32:44 -0000
Received: (qmail 5518 invoked by uid 500); 30 Jul 2010 16:32:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5439 invoked by uid 500); 30 Jul 2010 16:32:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5429 invoked by uid 99); 30 Jul 2010 16:32:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 16:32:42 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.78] (HELO web32901.mail.mud.yahoo.com) (209.191.69.78)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jul 2010 16:32:35 +0000
Received: (qmail 68731 invoked by uid 60001); 30 Jul 2010 16:32:14 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1280507534; bh=Ad0prwHOxtzM4NC+bL4qSqPGG/g7F8Ot+khkI7JRsaY=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=bt/vfotmd0ew0sXMvZoi9usWcPvsDdvFLfDBr4qVkkyLETFycHY/pLWhuEQWy/yrjw/seWXcRWYUjqLiBXfz0x7MF2LltNQILo/P+48x1t8FuAP1Wj095a79m7VUtBMVtBl3Rq3ZofTskWP3hjgpNLLebDRPhMX7LGU18HWgUBE=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=A3qLoBllp59PaGC5pCaDFzzR/TlEOP4TiJ96/hl/0TdIe27XthCNcIl3Nn4i5ysgm0bmmsVDVO2a1im6ZNNE1jxJae8OetxvnHBHLpyobuJZJxZJXFuUu3nM5kxDkZLg7FelwYpUxw9ZCfZdEdUEk6gfVDYFbrbiK14UtqrUdCU=;
Message-ID: <145491.68216.qm@web32901.mail.mud.yahoo.com>
X-YMail-OSG: DzH4oV8VM1mZ_2nRQe5qwp.oIY7sukmK7WMawLVczuV3WZX
 EYRkWzhGapdB4DYEZ8K6bZbcWrlMZqoN6_dgfpoNNyLVmJ6xAdTlDK8vp2f.
 EW1HYe9XBVFUJ39jHikqvN9wc7CnhYaPuTUM8jY5D3OM2DesBqunxSIfFQ0z
 FlMytVW2cK6k8v2A_aVRkye3og4HKQouNU255xkOvcvsW5PoLyCocUxSLq_E
 WgZNn_C4.6eWXQfS36A6eVJR1LyH_4XhbJSHcL4VN2IqS7w1nSyRkxQ9hOmm
 Gx7.0EjHnn_1CyleLaAVeCC..APX5OXQEcvDJB5iyhIe3DkBVUtUHy2bTTjC
 Sn6J18Ler..69czXXkzEWNKbNpnkRSW5w0Q--
Received: from [72.36.94.20] by web32901.mail.mud.yahoo.com via HTTP; Fri, 30 Jul 2010 09:32:13 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.105.279950
References: <182367.89000.qm@web32901.mail.mud.yahoo.com> <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com> <101578.94509.qm@web32904.mail.mud.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F79678597@suex07-mbx-03.ad.syr.edu>
Date: Fri, 30 Jul 2010 09:32:13 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Re: InverseWildcardQuery
To: java-user@lucene.apache.org
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F79678597@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> assuming that you mistakenly used the same field name

Nope, wasn't a mistake. We'd have to dynamically iterate through an unknown 
number of fields if we didn't use the same one.




----- Original Message ----
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Sent: Fri, July 30, 2010 11:14:17 AM
Subject: RE: InverseWildcardQuery

Hi Justin,

> [...] "*:* AND -myfield:foo*".
> 
> If my document contains "myfield:foobar" and "myfield:dog", the document
> would be thrown out because of the first field. I want to keep the
> document because the second field does not match.

I'm assuming that you mistakenly used the same field name above in 
("myfield:foobar" and "myfield:dog"), and that you instead meant:

    "myfield1:foobar" and "myfield2:dog".

I think you can get what you want by specifying every field in the query - e.g., 
if each document has the same set of two fields F1 and F2:

    (*:* AND -F1:foo*) OR (*:* AND -F2:foo*)

Truth table for four documents:

    Doc1: F1:foobar (no-match), F2:dog      (match)    => match
    Doc2: F1:cat    (match),    F2:dog      (match)    => match
    Doc3: F1:cat    (match),    F2:foosball (no-match) => match
    Doc4: F1:foobar (no-match), F2:foosball (no-match) => no-match

Good luck,
Steve


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 16:57:03 2010
Return-Path: <java-user-return-46864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70654 invoked from network); 30 Jul 2010 16:57:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 16:57:02 -0000
Received: (qmail 38925 invoked by uid 500); 30 Jul 2010 16:57:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38871 invoked by uid 500); 30 Jul 2010 16:57:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38863 invoked by uid 99); 30 Jul 2010 16:56:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 16:56:59 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 16:56:53 +0000
Received: by bwz2 with SMTP id 2so1247320bwz.35
        for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 09:56:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type;
        bh=jOw6dSraRstvHzxuquzcEMvGNJhi0TuyNp7FCgkz+x8=;
        b=kiAG5vY3+qKJLUlczKluc2eAGL3MNeSRfQKjkb8PptpOXSpASKZ25lQh4d/jgcHrSG
         AR39z4C740pVzsyVM7nYAEKxbtLi9V4HVoq6z8u7EPmY2b9f5rO7QlTRfLNtn6kHGLQo
         aQeqU2YuH4D0f1KsUgLGBbld9CaiJM2b6yhPs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=DC+jA/+KAy7N2L2d8nygJpZEAYyvSL4mhe35K/5/Hn64Yyb1kX6hGup6VqKOjdRtbg
         mvw2DFPSzWpFxdi7K92k2XxfotHWob23Lv/JB1DrzV3KlNksYJ2q4hYQcZK6O0E8T1le
         vjoBh5DWmvOqZMejrvETWhjyddJUvC1jtcLEc=
Received: by 10.204.19.83 with SMTP id z19mr1400188bka.43.1280508993210; Fri, 
	30 Jul 2010 09:56:33 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Fri, 30 Jul 2010 09:56:13 -0700 (PDT)
In-Reply-To: <Pine.GSO.4.64.1007300807370.13898@fafner.Stanford.EDU>
References: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com> 
	<AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com> 
	<Pine.GSO.4.64.1007300807370.13898@fafner.Stanford.EDU>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 30 Jul 2010 17:56:13 +0100
Message-ID: <AANLkTinEx9ChmQrs_F4Krwgwma_Wq5KzhjKiK_2qUqZ2@mail.gmail.com>
Subject: Re: lucene/solr full text search
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Depending on what exactly you mean by "subset" and "index pool", then yes.

If you've got one lucene index containing docs

docno: 1
category: computers
text: some words about computers

docno: 2
category: computers
text: some more words about computers

docno: 3
category: finance
text: some words about finance

then a search for "text:words" will match all 3 whereas a search for
"category:computers text:words" will only match 2.


If this isn't what you are asking about I suggest you provide more detail.


--
Ian.

On Fri, Jul 30, 2010 at 4:15 PM, Shuai Weng <shuai@genome.stanford.edu> wrote:
>
> Hey,
>
> I was wondering if we can search info from a subset of papers
> instead of from the whole index pool.
>
> Thanks,
> Shuai

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 17:05:32 2010
Return-Path: <java-user-return-46865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77153 invoked from network); 30 Jul 2010 17:05:32 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 17:05:32 -0000
Received: (qmail 54282 invoked by uid 500); 30 Jul 2010 17:05:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54235 invoked by uid 500); 30 Jul 2010 17:05:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54227 invoked by uid 99); 30 Jul 2010 17:05:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 17:05:29 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 17:05:20 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id o6UH4xFS003042
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 13:04:59 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Fri, 30 Jul 2010
 13:04:59 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 30 Jul 2010 13:04:58 -0400
Subject: RE: InverseWildcardQuery
Thread-Topic: InverseWildcardQuery
Thread-Index: Acsv/4XXKMh5AhGWRJuyWAEsd7hLwAAClqJA
Message-ID: <2D127F11DC79714E9B6A43AC9458147F7967859D@suex07-mbx-03.ad.syr.edu>
References: <182367.89000.qm@web32901.mail.mud.yahoo.com>
 <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>
  <101578.94509.qm@web32904.mail.mud.yahoo.com>
 <AANLkTi=TNJx7WOPRoZOA6YFi95_qbBqaE+5mQm0tNon+@mail.gmail.com>
 <004d01cb2ffd$a44863b0$ecd92b10$@thetaphi.de>
 <3523.83134.qm@web32905.mail.mud.yahoo.com>
In-Reply-To: <3523.83134.qm@web32905.mail.mud.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.0.10011,1.0.148,0.0.0000
 definitions=2010-07-30_04:2010-07-30,2010-07-30,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgSnVzdGluLA0KDQo+IFVuZm9ydHVuYXRlbHkgdGhlIHN1ZmZpeCByZXF1aXJlcyBhIHdpbGRj
YXJkIGFzIHdlbGwgaW4gb3VyIGNhc2UuIFRoZXJlDQo+IGFyZSBhIGxpbWl0ZWQgbnVtYmVyIG9m
IHByZWZpeGVzIHRob3VnaCAoMTBpc2gpLCBzbyBwZXJoYXBzIHdlIGNvdWxkDQo+IGNvbWJpbmUg
dGhlbSBhbGwgaW50byBvbmUgcXVlcnkuIFdlJ2Qgc3RpbGwgbmVlZCBzb21lIHNvcnQgb2YNCj4g
SW52ZXJzZVdpbGRjYXJkUXVlcnkgaW1wbGVtZW50YXRpb24uDQo+IA0KPiA+IHVzZSBhbm90aGVy
IGFuYWx5emVyIHNvIHlvdSBkb24ndCBuZWVkIHdpbGRjYXJkcw0KPiANCj4gSSBrbm93IGFuYWx5
emVycyBjYW4gYmUgdXNlZCB3aXRoIEluZGV4V3JpdGVyIGFuZCB3aXRoIFF1ZXJ5UGFyc2VyLiBJ
cw0KPiB0aGVyZSBzb21ld2hlcmUgYW4gYW5hbHl6ZXIgY291bGQgYmUgdXNlZCB0byBhbHRlciB0
aGUgZmllbGQgdG8gbWF0Y2ggdGhlDQo+IHF1ZXJ5IGF0IHNlYXJjaCB0aW1lIGluc3RlYWQgb2Yg
YWx0ZXJpbmcgdGhlIHF1ZXJ5IHRvIG1hdGNoIHRoZSBmaWVsZD8NCg0KQ2FuIHlvdSBnaXZlIGFu
IGV4YW1wbGUgb2Ygd2hhdCB5b3UgbWVhbj8NCg0KPiBPdXIgY3VycmVudCBwYXRoIHRvIHNvbHZp
bmcgb3VyIHByb2JsZW0gcmVxdWlyZXMgYWRkaXRpb25hbCBmaWVsZHMgd2hpY2gNCj4gbmVlZCBy
ZXdyaXR0ZW4gY2F1c2luZyBhIG11Y2ggbGFyZ2VyIHBlcmZvcm1hbmNlIGRlZ3JlZGF0aW9uLiBP
bmUgb2YgdGhlDQo+IHR3byBwYXRocyBhYm92ZSB3b3VsZCBiZSBtdWNoIG1vcmUgZGVzaXJhYmxl
Lg0KDQpBbiBpbnZlcnNlIHF1ZXJ5IHdvdWxkIHJlcXVpcmUgcmV3cml0aW5nLCB0b28sIEkgdGhp
bmsuDQoNCllvdSBzYXkgeW91IGhhdmUgMTAtaXNoIHByZWZpeGVzLiAgQ2FuIHlvdSB0dXJuIHRo
b3NlIHByZWZpeGVzIGludG8gZmllbGQgbmFtZXMsIGFuZCBpbmRleCBhIHRva2VuIGxpa2UgRU1Q
VFkgd2hlbiB0aGVyZSBhcmUgbm8gdmFsdWVzIGZvciBhIHBhcnRpY3VsYXIgcHJlZml4PyAgVGhl
biB5b3VyIHF1ZXJ5IHdvdWxkIGJlIChGMTpFTVBUWSBPUiBGMjpFTVBUWSAuLi4gT1IgRjEwOkVN
UFRZKS4NCg0KU3RldmUNCg==


From java-user-return-46866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 17:20:22 2010
Return-Path: <java-user-return-46866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81916 invoked from network); 30 Jul 2010 17:20:22 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 17:20:22 -0000
Received: (qmail 64727 invoked by uid 500); 30 Jul 2010 17:20:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64679 invoked by uid 500); 30 Jul 2010 17:20:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64671 invoked by uid 99); 30 Jul 2010 17:20:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 17:20:19 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [171.67.219.81] (HELO smtp.stanford.edu) (171.67.219.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 17:20:11 +0000
Received: from smtp.stanford.edu (localhost.localdomain [127.0.0.1])
	by localhost (Postfix) with SMTP id 4219C17947F
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 10:19:49 -0700 (PDT)
Received: from gogo.stanford.edu (gogo.Stanford.EDU [171.65.75.146])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	(Authenticated sender: sweng)
	by smtp.stanford.edu (Postfix) with ESMTPSA id 8EFCF17947E
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 10:19:48 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: lucene/solr full text search
From: Shuai Weng <shuai@genome.stanford.edu>
In-Reply-To: <AANLkTinEx9ChmQrs_F4Krwgwma_Wq5KzhjKiK_2qUqZ2@mail.gmail.com>
Date: Fri, 30 Jul 2010 10:19:48 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <764293C8-86EA-4D0E-BFD2-A914B806D3AD@genome.stanford.edu>
References: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com>  <AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com>  <Pine.GSO.4.64.1007300807370.13898@fafner.Stanford.EDU> <AANLkTinEx9ChmQrs_F4Krwgwma_Wq5KzhjKiK_2qUqZ2@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Spam: Probability=8%, Report='
 BODYTEXTP_SIZE_3000_LESS 0, BODY_SIZE_1600_1699 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, DATE_TZ_NA 0, __BOUNCE_CHALLENGE_SUBJ 0, __BOUNCE_NDR_SUBJ_EXEMPT 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __HAS_X_MAILER 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MIME_VERSION_APPLEMAIL 0, __MSGID_APPLEMAIL 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __URI_NO_PATH 0, __URI_NO_WWW 0, __USER_AGENT_APPLEMAIL 0, __X_MAILER_APPLEMAIL 0'
X-Virus-Checked: Checked by ClamAV on apache.org


Sorry for the confusion..=20

Currently, we have total 7000 fulltext papers (with the pubmed IDs =
stored as the unique IDs)=20
in the lucene index.  We were wondering if we can search for a given =
term in a subset of these papers
(eg, 30 papers; by providing a list of the pubmed IDs) instead of =
searching the term in these 7000
papers. In another word, we only care about the hits in the 30 given =
papers. How can we easily filter out
the other papers?

Thanks,
Shuai


On Jul 30, 2010, at 9:56 AM, Ian Lea wrote:

> Depending on what exactly you mean by "subset" and "index pool", then =
yes.
>=20
> If you've got one lucene index containing docs
>=20
> docno: 1
> category: computers
> text: some words about computers
>=20
> docno: 2
> category: computers
> text: some more words about computers
>=20
> docno: 3
> category: finance
> text: some words about finance
>=20
> then a search for "text:words" will match all 3 whereas a search for
> "category:computers text:words" will only match 2.
>=20
>=20
> If this isn't what you are asking about I suggest you provide more =
detail.
>=20
>=20
> --
> Ian.
>=20
> On Fri, Jul 30, 2010 at 4:15 PM, Shuai Weng =
<shuai@genome.stanford.edu> wrote:
>>=20
>> Hey,
>>=20
>> I was wondering if we can search info from a subset of papers
>> instead of from the whole index pool.
>>=20
>> Thanks,
>> Shuai
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 18:06:28 2010
Return-Path: <java-user-return-46867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96910 invoked from network); 30 Jul 2010 18:06:28 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 18:06:28 -0000
Received: (qmail 16109 invoked by uid 500); 30 Jul 2010 18:06:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16041 invoked by uid 500); 30 Jul 2010 18:06:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16029 invoked by uid 99); 30 Jul 2010 18:06:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 18:06:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [209.191.69.84] (HELO web32907.mail.mud.yahoo.com) (209.191.69.84)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jul 2010 18:06:17 +0000
Received: (qmail 37240 invoked by uid 60001); 30 Jul 2010 18:05:55 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1280513155; bh=Y92q2cS2X4S58iUzqB3R66j5GAp4OKbE25Qz8A8Pfak=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=y1U3yFzctCjx1PXGcZgsDdOR8plTx0/QKNeCGJqpZK/BKp2TvIkPEGF8v9fiEmhQG/5WZjr258+QqL2usF6ooT9PiWyCtpeXh+QdJ6XRwmy1aVivH9GMQygxcQdjTjStGhQHK+a5YNE3jrhLRvbxRMQUwe8s3ScvaZMoDHt60ZA=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=vaCtOQskI6A1TewBrRmMKGpeh+sa8cFkvoZSpwvuA3XHIxWDKEqYaXSycGIq3k2ukVtwpxU3ZLg4P8N7jDcwL0bhR4HudPEUqK9EJNCIpx5FpO9RPQp2OWAIKeVU4RntXZrzW6lhGO4MXIZ/n/SH/o5Q12pTXzANmHytBirbAI8=;
Message-ID: <452781.35685.qm@web32907.mail.mud.yahoo.com>
X-YMail-OSG: DkuPttMVM1lF6LYa6KD6C1MW2lrIouR3EhcFtuogPBEZahV
 m9aMGGouizIAmMkDOK2r91EDBEjXpLIAzINzaTTOQFqS9M.7R_Yvlv_CLUPK
 LQ65OqTSZXSM0hLS1EPu5UjiDtYBwDV_1CTBe5BCRKOKDh1nMswgV7rxsQ5c
 vaw1t9gjKJQ248PIsHu8bvrm7jbu1NUIu_ksewxGMMg.G7B3.Qa117EqHVQL
 0IlHRcreu6h6lpAYro0rOry_DMaaeKAVaXJk4YIsh9OY0RyyAboQAzyOdbxp
 jjHv2DkDI410CUKnzLYjVTGIiBiZIl8o5RK5gCpWGlpwDRPhvhAIg_dIPTvU
 W0JU1WeKKbBRsqA--
Received: from [72.36.94.20] by web32907.mail.mud.yahoo.com via HTTP; Fri, 30 Jul 2010 11:05:55 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.105.279950
References: <182367.89000.qm@web32901.mail.mud.yahoo.com> <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>  <101578.94509.qm@web32904.mail.mud.yahoo.com> <AANLkTi=TNJx7WOPRoZOA6YFi95_qbBqaE+5mQm0tNon+@mail.gmail.com> <004d01cb2ffd$a44863b0$ecd92b10$@thetaphi.de> <3523.83134.qm@web32905.mail.mud.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F7967859D@suex07-mbx-03.ad.syr.edu>
Date: Fri, 30 Jul 2010 11:05:55 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Re: InverseWildcardQuery
To: java-user@lucene.apache.org
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F7967859D@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

> an example

PerFieldAnalyzerWrapper analyzers =
    new PerFieldAnalyzerWrapper(new KeywordAnalyzer());
// myfield defaults to KeywordAnalyzer
analyzers.addAnalyzer("content", new SnowballAnalyzer(luceneVersion, 
"English"));
// analyzers affects the indexed field value
IndexWriter writer = new IndexWriter(dir, analyzers, true, mfl);
// analyzers affects the parsed query string
QueryParser parser = new QueryParser(luceneVersion, "myfield", analyzers);
parser.setAllowLeadingWildcard(true);
Query query = parser.parse("*:* AND -myfield:\"*foo*\"");
// What about an Analyzer to match field value to the query at search time?
ScoreDoc[] docs = searcher.search(query, null, 1000).scoreDocs;

> An inverse query would require rewriting, too, I think.

Why would implementing a new Query class requires document changes in the index.

> Can you turn those prefixes into field names

No, the prefixes are not discrete. Multiple field values could start with the 
same prefix.

Writing something like InverseWildcardQuery seems like the most appropriate 
solution. My thought to have another Analyzer used on the field value at search 
time may be crazy, I don't know.




----- Original Message ----
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Sent: Fri, July 30, 2010 12:04:58 PM
Subject: RE: InverseWildcardQuery

Hi Justin,

> Unfortunately the suffix requires a wildcard as well in our case. There
> are a limited number of prefixes though (10ish), so perhaps we could
> combine them all into one query. We'd still need some sort of
> InverseWildcardQuery implementation.
> 
> > use another analyzer so you don't need wildcards
> 
> I know analyzers can be used with IndexWriter and with QueryParser. Is
> there somewhere an analyzer could be used to alter the field to match the
> query at search time instead of altering the query to match the field?

Can you give an example of what you mean?

> Our current path to solving our problem requires additional fields which
> need rewritten causing a much larger performance degredation. One of the
> two paths above would be much more desirable.

An inverse query would require rewriting, too, I think.

You say you have 10-ish prefixes.  Can you turn those prefixes into field names, 
and index a token like EMPTY when there are no values for a particular prefix?  
Then your query would be (F1:EMPTY OR F2:EMPTY ... OR F10:EMPTY).

Steve



      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 18:11:43 2010
Return-Path: <java-user-return-46868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98096 invoked from network); 30 Jul 2010 18:11:42 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 18:11:42 -0000
Received: (qmail 20575 invoked by uid 500); 30 Jul 2010 18:11:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20520 invoked by uid 500); 30 Jul 2010 18:11:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20512 invoked by uid 99); 30 Jul 2010 18:11:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 18:11:40 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 18:11:32 +0000
Received: by wwf26 with SMTP id 26so8200719wwf.5
        for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 11:11:05 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.187.16 with SMTP id x16mr1992166wem.104.1280513465003; 
	Fri, 30 Jul 2010 11:11:05 -0700 (PDT)
Received: by 10.216.52.84 with HTTP; Fri, 30 Jul 2010 11:11:04 -0700 (PDT)
In-Reply-To: <AANLkTi=QqA6OFtS937Yx1BTA9Km=iZfmgLKgnmH04WYi@mail.gmail.com>
References: <AANLkTimVBu3wjOGvnRjXBTjjw_8qLy69Yt3hiHwp_6e1@mail.gmail.com>
	<AANLkTi=QqA6OFtS937Yx1BTA9Km=iZfmgLKgnmH04WYi@mail.gmail.com>
Date: Fri, 30 Jul 2010 14:11:04 -0400
Message-ID: <AANLkTik29py1MAtg_pBY9f3t8FZe8KAeC1xBACA4HxMw@mail.gmail.com>
Subject: Re: MultiPhraseQuery throws ArrayIndexOutOfBounds Exception
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Nice catch -- thanks!  I will fix.

Mike

On Fri, Jul 30, 2010 at 11:20 AM, jayendra patil
<jayendra.patil@gmail.com> wrote:
> Working on the nightly build of solr and lucene -
>
> MultiPhraseQuery throws ArrayIndexOutOfBounds Exception for the words
> defined as synonyms
>
> SEVERE: java.lang.ArrayIndexOutOfBoundsException: 5
> =A0 =A0at
> org.apache.lucene.search.MultiPhraseQuery$MultiPhraseWeight.scorer(MultiP=
hraseQuery.java:191)
>
> =A0 =A0 =A0 =A0if (terms.length > 1) {
> =A0 =A0 =A0 =A0 =A0postingsEnum =3D new UnionDocsAndPositionsEnum(reader,=
 terms);
>
> =A0 =A0 =A0 =A0 =A0// coarse -- this overcounts since a given doc can
> =A0 =A0 =A0 =A0 =A0// have more than one terms:
> =A0 =A0 =A0 =A0 =A0docFreq =3D 0;
> =A0 =A0 =A0 =A0 =A0for(int j=3D0;j<terms.length;j++) {
> =A0 =A0 =A0 =A0 =A0 =A0// Should be j
> =A0 =A0 =A0 =A0 =A0 =A0docFreq +=3D reader.docFreq(terms[*i*]);
> =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0} else {
>
> The for loop seems to iterate on terms length with variable j, but refers=
 to
> i within the loop which is iterating on the search terms count.
>
> Regards,
> Jayendra
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 18:26:40 2010
Return-Path: <java-user-return-46869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9780 invoked from network); 30 Jul 2010 18:26:39 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 18:26:39 -0000
Received: (qmail 38582 invoked by uid 500); 30 Jul 2010 18:26:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38471 invoked by uid 500); 30 Jul 2010 18:26:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38463 invoked by uid 99); 30 Jul 2010 18:26:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 18:26:37 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 18:26:28 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o6UIQ7Fc005503
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 14:26:07 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Fri, 30 Jul 2010
 14:26:07 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 30 Jul 2010 14:26:07 -0400
Subject: RE: InverseWildcardQuery
Thread-Topic: InverseWildcardQuery
Thread-Index: AcswEfJfA0TirYryRmqCr5g+6oqLCQAAjBaQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147F796785A2@suex07-mbx-03.ad.syr.edu>
References: <182367.89000.qm@web32901.mail.mud.yahoo.com>
 <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>
  <101578.94509.qm@web32904.mail.mud.yahoo.com>
 <AANLkTi=TNJx7WOPRoZOA6YFi95_qbBqaE+5mQm0tNon+@mail.gmail.com>
 <004d01cb2ffd$a44863b0$ecd92b10$@thetaphi.de>
 <3523.83134.qm@web32905.mail.mud.yahoo.com>
 <2D127F11DC79714E9B6A43AC9458147F7967859D@suex07-mbx-03.ad.syr.edu>
 <452781.35685.qm@web32907.mail.mud.yahoo.com>
In-Reply-To: <452781.35685.qm@web32907.mail.mud.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.0.10011,1.0.148,0.0.0000
 definitions=2010-07-30_04:2010-07-30,2010-07-30,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgSnVzdGluLA0KDQo+ID4gYW4gZXhhbXBsZQ0KPiANCj4gUGVyRmllbGRBbmFseXplcldyYXBw
ZXIgYW5hbHl6ZXJzID0NCj4gICAgIG5ldyBQZXJGaWVsZEFuYWx5emVyV3JhcHBlcihuZXcgS2V5
d29yZEFuYWx5emVyKCkpOw0KPiAvLyBteWZpZWxkIGRlZmF1bHRzIHRvIEtleXdvcmRBbmFseXpl
cg0KPiBhbmFseXplcnMuYWRkQW5hbHl6ZXIoImNvbnRlbnQiLCBuZXcgU25vd2JhbGxBbmFseXpl
cihsdWNlbmVWZXJzaW9uLCAiRW5nbGlzaCIpKTsNCj4gLy8gYW5hbHl6ZXJzIGFmZmVjdHMgdGhl
IGluZGV4ZWQgZmllbGQgdmFsdWUNCj4gSW5kZXhXcml0ZXIgd3JpdGVyID0gbmV3IEluZGV4V3Jp
dGVyKGRpciwgYW5hbHl6ZXJzLCB0cnVlLCBtZmwpOw0KPiAvLyBhbmFseXplcnMgYWZmZWN0cyB0
aGUgcGFyc2VkIHF1ZXJ5IHN0cmluZw0KPiBRdWVyeVBhcnNlciBwYXJzZXIgPSBuZXcgUXVlcnlQ
YXJzZXIobHVjZW5lVmVyc2lvbiwgIm15ZmllbGQiLCBhbmFseXplcnMpOw0KPiBwYXJzZXIuc2V0
QWxsb3dMZWFkaW5nV2lsZGNhcmQodHJ1ZSk7DQo+IFF1ZXJ5IHF1ZXJ5ID0gcGFyc2VyLnBhcnNl
KCIqOiogQU5EIC1teWZpZWxkOlwiKmZvbypcIiIpOw0KPiAvLyBXaGF0IGFib3V0IGFuIEFuYWx5
emVyIHRvIG1hdGNoIGZpZWxkIHZhbHVlIHRvIHRoZSBxdWVyeSBhdCBzZWFyY2ggdGltZT8NCj4g
U2NvcmVEb2NbXSBkb2NzID0gc2VhcmNoZXIuc2VhcmNoKHF1ZXJ5LCBudWxsLCAxMDAwKS5zY29y
ZURvY3M7DQoNCkknbSBhZnJhaWQgdGhhdCB0aGlzICJleGFtcGxlIiBkb2Vzbid0IGhlbHAgbWUg
LSBteSByZWFkaW5nIG9mICJXaGF0IGFib3V0IGFuIEFuYWx5emVyIHRvIG1hdGNoIGZpZWxkIHZh
bHVlIHRvIHRoZSBxdWVyeSBhdCBzZWFyY2ggdGltZT8iIGlzIHRoYXQgeW91IHdhbnQgd2hhdCBM
dWNlbmUgYWxyZWFkeSBkb2VzLCBidXQgdGhhdCdzIGNsZWFybHkgbm90IHRydWUuIA0KDQo+ID4g
QW4gaW52ZXJzZSBxdWVyeSB3b3VsZCByZXF1aXJlIHJld3JpdGluZywgdG9vLCBJIHRoaW5rLg0K
PiANCj4gV2h5IHdvdWxkIGltcGxlbWVudGluZyBhIG5ldyBRdWVyeSBjbGFzcyByZXF1aXJlcyBk
b2N1bWVudCBjaGFuZ2VzIGluIHRoZQ0KPiBpbmRleC4NCg0KUXVlcnkgcmV3cml0aW5nIGlzIHdo
YXQgSSBtZWFudCAoYW5kIHdoYXQgSSB0aG91Z2h0IHlvdSBtZWFudCkuICBXaGF0IGRvIHlvdSBt
ZWFuIHdoZW4geW91IHNheSAicmV3cml0aW5nIiAtIGhvdyB3b3VsZCBpdCBhZmZlY3QgaW5kZXhl
ZCBkb2N1bWVudHM/DQoNCj4gPiBDYW4geW91IHR1cm4gdGhvc2UgcHJlZml4ZXMgaW50byBmaWVs
ZCBuYW1lcw0KPiANCj4gTm8sIHRoZSBwcmVmaXhlcyBhcmUgbm90IGRpc2NyZXRlLiBNdWx0aXBs
ZSBmaWVsZCB2YWx1ZXMgY291bGQgc3RhcnQgd2l0aA0KPiB0aGUgc2FtZSBwcmVmaXguDQoNCkht
bSwgYWdhaW4gd2l0aCB0aGUgbWlzdW5kZXJzdGFuZGluZyBvbiBteSBwYXJ0IC0gaG93IGlzIGl0
IHRoYXQgInByZWZpeGVzIGFyZSBub3QgZGlzY3JldGUiIGFuZCBhbHNvICJ0aGVyZSBhcmUgYSBs
aW1pdGVkIG51bWJlciBvZiBwcmVmaXhlcyAuLi4gKDEwaXNoKSI/ICBBbmQgd2h5IGlzIGl0IGlt
cG9ydGFudCB0aGF0IG11bHRpcGxlIGZpZWxkIHZhbHVlcyBjb3VsZCBzdGFydCB3aXRoIHRoZSBz
YW1lIHByZWZpeD8gIFdoeSBjb3VsZG4ndCB5b3UganVzdCBzdG9yZSBhbGwgb2YgdGhvc2UgdGhh
dCBzaGFyZSB0aGUgc2FtZSBwcmVmaXggaW4gdGhlIGZpZWxkIGNvcnJlc3BvbmRpbmcgdG8gdGhl
IHByZWZpeD8NCg0KU3RldmUNCg0K


From java-user-return-46870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 19:16:08 2010
Return-Path: <java-user-return-46870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30234 invoked from network); 30 Jul 2010 19:16:08 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 19:16:08 -0000
Received: (qmail 2089 invoked by uid 500); 30 Jul 2010 19:16:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2010 invoked by uid 500); 30 Jul 2010 19:16:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2002 invoked by uid 99); 30 Jul 2010 19:16:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 19:16:05 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [171.67.219.83] (HELO smtp.stanford.edu) (171.67.219.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 19:15:57 +0000
Received: from smtp.stanford.edu (localhost.localdomain [127.0.0.1])
	by localhost (Postfix) with SMTP id CC4EC1A06AC
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 12:15:35 -0700 (PDT)
Received: from gogo.stanford.edu (gogo.Stanford.EDU [171.65.75.146])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	(Authenticated sender: sweng)
	by smtp.stanford.edu (Postfix) with ESMTPSA id 75A9A1A06AA
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 12:15:35 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: lucene/solr full text search
From: Shuai Weng <shuai@genome.stanford.edu>
In-Reply-To: <AANLkTinEx9ChmQrs_F4Krwgwma_Wq5KzhjKiK_2qUqZ2@mail.gmail.com>
Date: Fri, 30 Jul 2010 12:15:35 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <1987DDAA-7EE1-4342-8A08-23117DF377C0@genome.stanford.edu>
References: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com>  <AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com>  <Pine.GSO.4.64.1007300807370.13898@fafner.Stanford.EDU> <AANLkTinEx9ChmQrs_F4Krwgwma_Wq5KzhjKiK_2qUqZ2@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Spam: Probability=8%, Report='
 BODYTEXTP_SIZE_3000_LESS 0, BODY_SIZE_1200_1299 0, BODY_SIZE_2000_LESS 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, DATE_TZ_NA 0, __BOUNCE_CHALLENGE_SUBJ 0, __BOUNCE_NDR_SUBJ_EXEMPT 0, __CANPHARM_UNSUB_LINK 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __HAS_X_MAILER 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MIME_VERSION_APPLEMAIL 0, __MSGID_APPLEMAIL 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __URI_NO_PATH 0, __URI_NO_WWW 0, __USER_AGENT_APPLEMAIL 0, __X_MAILER_APPLEMAIL 0'
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Ian,

In your example below, how do we set the parameters so we can search for =
"category:computers" AND "text:words"?

Thanks,
Shuai

On Jul 30, 2010, at 9:56 AM, Ian Lea wrote:

> Depending on what exactly you mean by "subset" and "index pool", then =
yes.
>=20
> If you've got one lucene index containing docs
>=20
> docno: 1
> category: computers
> text: some words about computers
>=20
> docno: 2
> category: computers
> text: some more words about computers
>=20
> docno: 3
> category: finance
> text: some words about finance
>=20
> then a search for "text:words" will match all 3 whereas a search for
> "category:computers text:words" will only match 2.
>=20
>=20
> If this isn't what you are asking about I suggest you provide more =
detail.
>=20
>=20
> --
> Ian.
>=20
> On Fri, Jul 30, 2010 at 4:15 PM, Shuai Weng =
<shuai@genome.stanford.edu> wrote:
>>=20
>> Hey,
>>=20
>> I was wondering if we can search info from a subset of papers
>> instead of from the whole index pool.
>>=20
>> Thanks,
>> Shuai
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 19:17:56 2010
Return-Path: <java-user-return-46871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30668 invoked from network); 30 Jul 2010 19:17:55 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 19:17:55 -0000
Received: (qmail 5356 invoked by uid 500); 30 Jul 2010 19:17:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5311 invoked by uid 500); 30 Jul 2010 19:17:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5303 invoked by uid 99); 30 Jul 2010 19:17:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 19:17:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.53] (HELO thomsonlearning.com) (69.32.146.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 19:17:48 +0000
Received: from ([10.160.3.175])
	by ohciniron02.thomsonlearning.com with ESMTP with TLS id 5502562.71252033;
	Fri, 30 Jul 2010 15:17:24 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinht03.corp.local
 ([10.160.3.175]) with mapi; Fri, 30 Jul 2010 15:17:24 -0400
From: "Nader, John P" <john.nader@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 30 Jul 2010 15:17:23 -0400
Subject: RE: Term browsing much slower in Lucene 3.x.x
Thread-Topic: Term browsing much slower in Lucene 3.x.x
Thread-Index: AcsvBC+pyJEXy5i/TZyYmVuu+v+QeAAYsg3wACy6Z2A=
Message-ID: <70EA5691BD59734784FF872CD1B9747A15D56BDF74@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A15D56588ED@OHCINMBX01.corp.local>
 <AANLkTi=DSGhFJ1tUVX2nLUAZ5WdSdtHpUdQnUu2ZyHmj@mail.gmail.com>
 <70EA5691BD59734784FF872CD1B9747A15D56BDB14@OHCINMBX01.corp.local>
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A15D56BDB14@OHCINMBX01.corp.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Mike,

We took your suggestion and refactored like this:

 TermEnum termEnum =3D indexReader.terms(new Term(field, "0"));
 TermDocs allTermDocs =3D indexReader.termDocs();

 while(termEnum.next() && termEnum.term().field().equals(field) {
   allTermsDocs.seek(termEnum);
   while(allTermDocs.next()) {
	...doo something to each doc...
   }
 }

The results were much better than creating a new TermDocs for each term.  W=
e were about 6x faster than the old algorithm in Lucene 3.0.2, and 3x faste=
r than the old algorithm in Lucene 2.4.0.

Thanks much for your help.

With respect to a 3.0.2 enhancement that would yield the same performance w=
ithout using different APIs, I'm not sure what the impact would be.  We def=
initely have proven the synchronization had a dramatic impact in our enviro=
nment.  But the synchronization in the constructor looks like it is necessa=
ry in other API calls.

BTW, that environment is Java 1.6.0_12 on 64-bit SUSE Linux with 32G of RAM=
 and using MMapDirectory.

Thanks.

-John


-----Original Message-----
From: Nader, John P [mailto:john.nader@cengage.com]=20
Sent: Thursday, July 29, 2010 5:49 PM
To: java-user@lucene.apache.org
Subject: RE: Term browsing much slower in Lucene 3.x.x

Thanks much for your response.  Yes, our terms are sorted in index-sort ord=
er.  I think you have a good suggestion, which is to get the term docs once=
 and then seek to each term.  I will try that approach and report back to t=
he forum on the results.

Like you I am surprised by the overhead of the added synchronization.  I do=
n't think is waiting on locks, but rather the memory flush and loading that=
 goes on.

-John

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Thursday, July 29, 2010 5:55 AM
To: java-user@lucene.apache.org
Subject: Re: Term browsing much slower in Lucene 3.x.x

On Wed, Jul 28, 2010 at 2:39 PM, Nader, John P <john.nader@cengage.com> wro=
te:
> We recently upgraded from lucene 2.4.0 to lucene 3.0.2. =A0Our load testi=
ng revealed a serious performance drop specific to traversing the list of t=
erms and their associated documents for a given indexed field. =A0Our code =
looks something like this:
>
> for(Term term : terms) {
> TermDocs termDocs =3D indexReader.termDocs(term);
> while(termDocs.next()) { =A0 // =A0much slower here
> =A0 =A0int doc =3D termDocs.doc();
> =A0 =A0...do something with each doc...
> }

Is that IndexReader reading multiple segments or single segment?

> The slowness is all on the first call to TermDocs.next() for each term. =
=A0Further investigation comparing 2.4.0 and 3.0.2 revealed that there is s=
ome new synchronization on the SegmentTermDocs constructor and the SegmentR=
eader.getTermsReader(). =A0The first call to next() hits this synchronizati=
on, causing a 4x slowdown on an 8 CPU machine.

There was some added sync, however, the code within those sync blocks
is minuscule (looking up a field).  It's weird that you're seeing a 4X
hit because of this.  We could conceivably optimize this code to avoid
the sync blocks if the reader is readOnly.

> My first question is should we be using a different approach to process e=
ach term's doc list that would be more efficient? =A0The synchronization ap=
pears to be on aspects of these classes that the next() operation is not co=
ncerned with.

Are you sorting your terms in index-sort order (UTF16, ie
String.compareTo)?  This can be an important gain especially if you
have many terms.

Also, if you are working with your top reader, you should see some
perf gain by instead working w/ the sub readers directly, ie:

  for(IndexReader subReader : indexReader.getSequentialSubReaders()) {
     ...
  }

Also, instead of getting a new TermDocs every time, you should get a
single TermDocs up front (IndexReader.termDocs()), and then seek it to
your term (termDocs.seek(term)), validate the term in seek'd to in
fact matches what you asked for, then iterate its docs.

> My other question is whether there are planned performance enhancements t=
o address this loss of performance?

These APIs are very different in the next major release (4.0) of
Lucene, so except for problems spotted by users like you, there's not
much more dev happening against them.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 19:20:20 2010
Return-Path: <java-user-return-46872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31375 invoked from network); 30 Jul 2010 19:20:20 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 19:20:20 -0000
Received: (qmail 13491 invoked by uid 500); 30 Jul 2010 19:20:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13460 invoked by uid 500); 30 Jul 2010 19:20:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13452 invoked by uid 99); 30 Jul 2010 19:20:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 19:20:17 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.83] (HELO web32906.mail.mud.yahoo.com) (209.191.69.83)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jul 2010 19:20:11 +0000
Received: (qmail 35469 invoked by uid 60001); 30 Jul 2010 19:19:50 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1280517590; bh=AENzVrDCM17/rqNmb4yIuxgEboJETaNhv1zGv49iRKc=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=HtuqcmKhuZaqrKLzRyuyIFKzzsMQBDRVu+1vdrKlv1gZ/rpOVzmf7whhDs0ZH7K63mMtpQE/DyulM7LuujAcddV9xJfgTFoeMubY3zAe+B6k5ShrDxjoYpojhHyP4KlXlLeHmOeVOk2468FmwBj2j132alI+kO6RXALxqc/n0AU=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=H963LNQ3d9+bv796rlbyZgODmlDbpG7H2YY+qNDKlGQBs6ZUmE5+qw3t3Jy9EHhih1RHaPPjp3+SuV4MPdwrvyBBpqzs1W9NinjgphjDzfUU2j0JCf1ByfRTEjkLaHMDtInmcBjBC8/KgQol14DdB9BN1R892DmffUb9uO3n3Is=;
Message-ID: <89606.35251.qm@web32906.mail.mud.yahoo.com>
X-YMail-OSG: _thfc4MVM1nOwYWoaUmlvY9f7FzXViQR17VqEVw1XRN.9X8
 sYAMPKMqSsluyELwhqpTXRs7NA1yAExcuFeP4UrVPDCgmTJ4Iby88nrytrGb
 YKikVhvhCACwrFT7sWxavCsqBBNk3ziQayG_W19SzEAuWJ7O9Iht57WMX6TA
 gppEtfCrM8EVJ3NE6h0GOdN18V5z4qFxQB0nB8gj5eQQsTz.EPvxvoD2MM_1
 nilvTNAIu0.9NYoxQoEvA2aPB3BrTgNWK7hQ5iwLV4VXpmJ2ev5w0NsXnT4u
 J6nZ3uqr1yeHswHm3PU7U_ClKST9.9Ju2xOR66oD.Gzu6Ejk-
Received: from [72.36.94.20] by web32906.mail.mud.yahoo.com via HTTP; Fri, 30 Jul 2010 12:19:49 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.105.279950
References: <182367.89000.qm@web32901.mail.mud.yahoo.com> <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>  <101578.94509.qm@web32904.mail.mud.yahoo.com> <AANLkTi=TNJx7WOPRoZOA6YFi95_qbBqaE+5mQm0tNon+@mail.gmail.com> <004d01cb2ffd$a44863b0$ecd92b10$@thetaphi.de> <3523.83134.qm@web32905.mail.mud.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F7967859D@suex07-mbx-03.ad.syr.edu> <452781.35685.qm@web32907.mail.mud.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F796785A2@suex07-mbx-03.ad.syr.edu>
Date: Fri, 30 Jul 2010 12:19:49 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Re: InverseWildcardQuery
To: java-user@lucene.apache.org
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F796785A2@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> you want what Lucene already does, but that's clearly not true

Hmmm, let's pretend that "contents" field in my example wasn't analyzed at index 
time. The unstemmed form of terms will be indexed. But if I query with a stemmed 
form or use QueryParser with the SnowballAnalyzer, I'm not going to get a match. 
I could fix this situation by analyzing the indexed field at search time to 
match the query. I don't know that Lucene provides this opportunity and, as I 
said, maybe that's crazy.

> What do you mean when you say "rewriting"

"Our current path to solving our problem requires additional fields which  need 
rewritten". I meant actually altering the document in the index. My desire has 
been to write a new Query class implementation whereas you mentioned query 
rewriting (isn't that accomplished as in my example by passing an Analyzer to 
QueryParser?)

> not discrete...  limited number of prefixes

So my document may have "myfield:A*foo*", "myfield:B*foo*", "myfield:A*dog*", 
and "myfield:D*cat*".

Or, to phrase differently, "myfield:[PREFIX][PATTERN]" may appear any number of 
times where PREFIX comes from the set { A, B, C, D, E, ... }.

This complexity is really a tangent of my question in order to avoid poor 
performance from WildcardQuery.





----- Original Message ----
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Sent: Fri, July 30, 2010 1:26:07 PM
Subject: RE: InverseWildcardQuery

Hi Justin,

> > an example
> 
> PerFieldAnalyzerWrapper analyzers =
>     new PerFieldAnalyzerWrapper(new KeywordAnalyzer());
> // myfield defaults to KeywordAnalyzer
> analyzers.addAnalyzer("content", new SnowballAnalyzer(luceneVersion, 
>"English"));
> // analyzers affects the indexed field value
> IndexWriter writer = new IndexWriter(dir, analyzers, true, mfl);
> // analyzers affects the parsed query string
> QueryParser parser = new QueryParser(luceneVersion, "myfield", analyzers);
> parser.setAllowLeadingWildcard(true);
> Query query = parser.parse("*:* AND -myfield:\"*foo*\"");
> // What about an Analyzer to match field value to the query at search time?
> ScoreDoc[] docs = searcher.search(query, null, 1000).scoreDocs;

I'm afraid that this "example" doesn't help me - my reading of "What about an 
Analyzer to match field value to the query at search time?" is that you want 
what Lucene already does, but that's clearly not true. 


> > An inverse query would require rewriting, too, I think.
> 
> Why would implementing a new Query class requires document changes in the
> index.

Query rewriting is what I meant (and what I thought you meant).  What do you 
mean when you say "rewriting" - how would it affect indexed documents?

> > Can you turn those prefixes into field names
> 
> No, the prefixes are not discrete. Multiple field values could start with
> the same prefix.

Hmm, again with the misunderstanding on my part - how is it that "prefixes are 
not discrete" and also "there are a limited number of prefixes ... (10ish)"?  
And why is it important that multiple field values could start with the same 
prefix?  Why couldn't you just store all of those that share the same prefix in 
the field corresponding to the prefix?

Steve


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 20:01:48 2010
Return-Path: <java-user-return-46873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42447 invoked from network); 30 Jul 2010 20:01:48 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 20:01:48 -0000
Received: (qmail 55204 invoked by uid 500); 30 Jul 2010 20:01:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55092 invoked by uid 500); 30 Jul 2010 20:01:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55084 invoked by uid 99); 30 Jul 2010 20:01:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 20:01:45 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 20:01:35 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id o6UK1Eqd027690
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 16:01:14 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Fri, 30 Jul 2010
 16:01:14 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 30 Jul 2010 16:01:14 -0400
Subject: RE: InverseWildcardQuery
Thread-Topic: InverseWildcardQuery
Thread-Index: AcswHEPHPIzaR1ZyQMeZnEe0pQo5pQAAWFEg
Message-ID: <2D127F11DC79714E9B6A43AC9458147F796785A7@suex07-mbx-03.ad.syr.edu>
References: <182367.89000.qm@web32901.mail.mud.yahoo.com>
 <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>
  <101578.94509.qm@web32904.mail.mud.yahoo.com>
 <AANLkTi=TNJx7WOPRoZOA6YFi95_qbBqaE+5mQm0tNon+@mail.gmail.com>
 <004d01cb2ffd$a44863b0$ecd92b10$@thetaphi.de>
 <3523.83134.qm@web32905.mail.mud.yahoo.com>
 <2D127F11DC79714E9B6A43AC9458147F7967859D@suex07-mbx-03.ad.syr.edu>
 <452781.35685.qm@web32907.mail.mud.yahoo.com>
 <2D127F11DC79714E9B6A43AC9458147F796785A2@suex07-mbx-03.ad.syr.edu>
 <89606.35251.qm@web32906.mail.mud.yahoo.com>
In-Reply-To: <89606.35251.qm@web32906.mail.mud.yahoo.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.0.10011,1.0.148,0.0.0000
 definitions=2010-07-30_05:2010-07-30,2010-07-30,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

PiA+IHlvdSB3YW50IHdoYXQgTHVjZW5lIGFscmVhZHkgZG9lcywgYnV0IHRoYXQncyBjbGVhcmx5
IG5vdCB0cnVlDQo+IA0KPiBIbW1tLCBsZXQncyBwcmV0ZW5kIHRoYXQgImNvbnRlbnRzIiBmaWVs
ZCBpbiBteSBleGFtcGxlIHdhc24ndCBhbmFseXplZCBhdCBpbmRleA0KPiB0aW1lLiBUaGUgdW5z
dGVtbWVkIGZvcm0gb2YgdGVybXMgd2lsbCBiZSBpbmRleGVkLiBCdXQgaWYgSSBxdWVyeSB3aXRo
IGEgc3RlbW1lZA0KPiBmb3JtIG9yIHVzZSBRdWVyeVBhcnNlciB3aXRoIHRoZSBTbm93YmFsbEFu
YWx5emVyLCBJJ20gbm90IGdvaW5nIHRvIGdldCBhIG1hdGNoLg0KPiBJIGNvdWxkIGZpeCB0aGlz
IHNpdHVhdGlvbiBieSBhbmFseXppbmcgdGhlIGluZGV4ZWQgZmllbGQgYXQgc2VhcmNoIHRpbWUg
dG8NCj4gbWF0Y2ggdGhlIHF1ZXJ5LiBJIGRvbid0IGtub3cgdGhhdCBMdWNlbmUgcHJvdmlkZXMg
dGhpcyBvcHBvcnR1bml0eSBhbmQsIGFzIEkNCj4gc2FpZCwgbWF5YmUgdGhhdCdzIGNyYXp5Lg0K
DQpJIGRvbid0IGtub3cgb2YgYW55IGZhY2lsaXR5IGluIEx1Y2VuZSB0byByZS1hbmFseXplIGlu
ZGV4ZWQgY29udGVudCBhdCBzZWFyY2ggdGltZS4gIFRoaXMgaXMgYW4gSVIgYW50aS1wYXR0ZXJu
IC0gaXQgZGVmZWF0cyB0aGUgcHVycG9zZSBvZiBjb25zdHJ1Y3RpbmcgdGhlIGludmVydGVkIGlu
ZGV4Lg0KDQpQZW9wbGUgZ2VuZXJhbGx5IGRlY2lkZSBwcmlvciB0byBpbmRleGluZyB3aGF0IGtp
bmQgb2YgcXVlcmllcyB0aGV5IG5lZWQgdG8gc3VwcG9ydCwgYW5kIHRoZW4gcGVyZm9ybSBhbGwg
cmVxdWlyZWQgZG9jdW1lbnQgYW5hbHlzaXMgYXQgaW5kZXggdGltZS4gIFRvIHVzZSB5b3VyIHN0
ZW1taW5nIGV4YW1wbGUsIGlmIHlvdSBuZWVkIHRvIGJlIGFibGUgdG8gbWF0Y2ggYWdhaW5zdCBi
b3RoIHN0ZW1tZWQgYW5kIHVuc3RlbW1lZCBmb3JtcywgeW91IHdvdWxkIG1ha2UgYm90aCBhIHN0
ZW1tZWQgZmllbGQgYW5kIGFuIHVuc3RlbW1lZCBmaWVsZCwgYW5kIHRoZW4gY29uc3RydWN0IGNv
cnJlc3BvbmRpbmcgc3ViLXF1ZXJpZXMgYWdhaW5zdCBlYWNoIGFzIHJlcXVpcmVkLg0KDQo+ID4g
V2hhdCBkbyB5b3UgbWVhbiB3aGVuIHlvdSBzYXkgInJld3JpdGluZyINCj4gDQo+ICJPdXIgY3Vy
cmVudCBwYXRoIHRvIHNvbHZpbmcgb3VyIHByb2JsZW0gcmVxdWlyZXMgYWRkaXRpb25hbCBmaWVs
ZHMgd2hpY2ggbmVlZA0KPiByZXdyaXR0ZW4iLiBJIG1lYW50IGFjdHVhbGx5IGFsdGVyaW5nIHRo
ZSBkb2N1bWVudCBpbiB0aGUgaW5kZXguIE15IGRlc2lyZSBoYXMNCj4gYmVlbiB0byB3cml0ZSBh
IG5ldyBRdWVyeSBjbGFzcyBpbXBsZW1lbnRhdGlvbiB3aGVyZWFzIHlvdSBtZW50aW9uZWQgcXVl
cnkNCj4gcmV3cml0aW5nIChpc24ndCB0aGF0IGFjY29tcGxpc2hlZCBhcyBpbiBteSBleGFtcGxl
IGJ5IHBhc3NpbmcgYW4gQW5hbHl6ZXIgdG8NCj4gUXVlcnlQYXJzZXI/KQ0KDQpDaGFuZ2luZyB0
aGUgaW5kZXggYXQgcXVlcnkgdGltZSwgdW5sZXNzIHlvdSBoYXZlIGEgdGlueSBzZXQgb2YgZG9j
dW1lbnRzLCBzb3VuZHMgbGlrZSBhIGJpZyBtaXN0YWtlIHRvIG1lLiAgQWdhaW4sIGV4dHJlbWVs
eSBleHBlbnNpdmUuDQoNClF1ZXJ5IHJld3JpdGluZzogPGh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9y
Zy9qYXZhLzNfMF8yL2FwaS9hbGwvb3JnL2FwYWNoZS9sdWNlbmUvc2VhcmNoL1F1ZXJ5Lmh0bWwj
cmV3cml0ZSUyOG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkluZGV4UmVhZGVyJTI5Pg0KDQo+ID4g
bm90IGRpc2NyZXRlLi4uICBsaW1pdGVkIG51bWJlciBvZiBwcmVmaXhlcw0KPiANCj4gU28gbXkg
ZG9jdW1lbnQgbWF5IGhhdmUgIm15ZmllbGQ6QSpmb28qIiwgIm15ZmllbGQ6Qipmb28qIiwNCj4g
Im15ZmllbGQ6QSpkb2cqIiwgYW5kICJteWZpZWxkOkQqY2F0KiIuDQo+IA0KPiBPciwgdG8gcGhy
YXNlIGRpZmZlcmVudGx5LCAibXlmaWVsZDpbUFJFRklYXVtQQVRURVJOXSIgbWF5IGFwcGVhciBh
bnkNCj4gbnVtYmVyIG9mIHRpbWVzIHdoZXJlIFBSRUZJWCBjb21lcyBmcm9tIHRoZSBzZXQgeyBB
LCBCLCBDLCBELCBFLCAuLi4gfS4NCj4gDQo+IFRoaXMgY29tcGxleGl0eSBpcyByZWFsbHkgYSB0
YW5nZW50IG9mIG15IHF1ZXN0aW9uIGluIG9yZGVyIHRvIGF2b2lkIHBvb3INCj4gcGVyZm9ybWFu
Y2UgZnJvbSBXaWxkY2FyZFF1ZXJ5Lg0KDQpJIHN0aWxsIHRoaW5rIHlvdSBjb3VsZCBtYWtlIG9u
ZSBmaWVsZCBmb3IgZWFjaCBQUkVGSVgsIGFuZCB0aGVuIGRvIHdoYXRldmVyIHF1ZXJ5IHlvdSB3
YW50IG9uIGVhY2ggb2YgdGhvc2UgZmllbGRzLg0KDQpJZiB5b3UgbmVlZCB0byBzdXBwb3J0ICJj
b250YWlucyIgZnVuY3Rpb25hbGl0eSAoZS5nLiAiQToqZm9vKiIpLCB5b3UgbWlnaHQgd2FudCB0
byBsb29rIGludG8gbmdyYW0gYW5hbHlzaXMgYXQgaW5kZXhpbmcgdGltZSAoYW5kIG1heWJlIGFs
c28gYXQgcXVlcnkgdGltZSwgZGVwZW5kaW5nIG9uIHRoZSBzb3VyY2Ugb2YgeW91ciBxdWVyaWVz
KToNCg0KPGh0dHA6Ly9sdWNlbmUuYXBhY2hlLm9yZy9qYXZhLzNfMF8yL2FwaS9hbGwvb3JnL2Fw
YWNoZS9sdWNlbmUvYW5hbHlzaXMvbmdyYW0vTkdyYW1Ub2tlbkZpbHRlci5odG1sPg0KDQpZb3Ug
d291bGQgaGF2ZSB0byBrbm93IHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIGxlbmd0aCBvZiB0aGUg
Y29udGFpbmVkIHN0cmluZyB5b3Ugd291bGQgd2FudCB0byBxdWVyeSBmb3IuDQoNClN0ZXZlDQoN
Cg==


From java-user-return-46874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 20:31:53 2010
Return-Path: <java-user-return-46874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56082 invoked from network); 30 Jul 2010 20:31:53 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 20:31:53 -0000
Received: (qmail 82923 invoked by uid 500); 30 Jul 2010 20:31:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82856 invoked by uid 500); 30 Jul 2010 20:31:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82848 invoked by uid 99); 30 Jul 2010 20:31:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 20:31:50 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [209.191.69.83] (HELO web32906.mail.mud.yahoo.com) (209.191.69.83)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 30 Jul 2010 20:31:44 +0000
Received: (qmail 81007 invoked by uid 60001); 30 Jul 2010 20:31:22 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1280521882; bh=xW/1YN3sRJBw6hNFbQf3d/OVWcah7UNQdomAWTNdvoo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=Kbp2foWCUIp+DDC+34KuFOSMfZABskvnycOAsPfv2MC+6Do46C/vQCD1F48W8lB6hy7tXplEJ1SSwWvpYXZCug4MbO77lm1yJGm7ssBlQ1Oww1GOyg/wv+Wn/MxinQ6Q4URVayH30ci0UUstSfUbbt5h4hF66QTeworV0g7wG7U=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=hzx1O5Z5Rfa2QK+xLRr7CD0yFG5xtvdNwnfscGjuUAoafot8wkVF33kW6ZZUxVkG8fSuOSIhwJyOKAqGdfaX1B9m3MujEG+dG83wYJeJWFAaTK9xLrJrwS+Iy4vPFw5VqqgLq+6WOvNAIJIN2qC4poWQPj+S8rIgtWlc1QTCVkM=;
Message-ID: <684699.56797.qm@web32906.mail.mud.yahoo.com>
X-YMail-OSG: osismyUVM1kLLlQHK3_khw_pgYQ7Xm9l0svCsh0lw1pVmpl
 XjyWHFbuVW2AYptCT49FUgZMP8HL3Kf0UMNj50CzAAbH.Nml0r6ZoxjsJ271
 boUxwhbNv9FbfgQNSfDxcOlE8DOyyIt7GCuxpLkK9trbXVI7QorfQPwU1e4C
 Yco7tsiKM5BjABaBuRWSWgfHsnHgYpnNI7Brt0YOA75Zhg.q84hlVjpMAGEh
 VmEohaCmzR5huISp3vzWDswINr._omsPrD.3ZZsUJpfGpKye1i1iJd1YeRyR
 Itrz.8Le7I3pA3Qhn69VKAkOEB9afJY1g4ZKKKizrs0tcchghHKbzmvtw_7e
 mglV5oW5mFzX0zJ4-
Received: from [72.36.94.20] by web32906.mail.mud.yahoo.com via HTTP; Fri, 30 Jul 2010 13:31:22 PDT
X-Mailer: YahooMailRC/420.4 YahooMailWebService/0.8.105.279950
References: <182367.89000.qm@web32901.mail.mud.yahoo.com> <AANLkTimx_6b9XR9=+X24pcPkJVTHe7JGGdqchLceWP+f@mail.gmail.com>  <101578.94509.qm@web32904.mail.mud.yahoo.com> <AANLkTi=TNJx7WOPRoZOA6YFi95_qbBqaE+5mQm0tNon+@mail.gmail.com> <004d01cb2ffd$a44863b0$ecd92b10$@thetaphi.de> <3523.83134.qm@web32905.mail.mud.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F7967859D@suex07-mbx-03.ad.syr.edu> <452781.35685.qm@web32907.mail.mud.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F796785A2@suex07-mbx-03.ad.syr.edu> <89606.35251.qm@web32906.mail.mud.yahoo.com> <2D127F11DC79714E9B6A43AC9458147F796785A7@suex07-mbx-03.ad.syr.edu>
Date: Fri, 30 Jul 2010 13:31:22 -0700 (PDT)
From: Justin <crynax@yahoo.com>
Subject: Re: InverseWildcardQuery
To: java-user@lucene.apache.org
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147F796785A7@suex07-mbx-03.ad.syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> make both a stemmed field and an unstemmed field

While this approach is easy and would work, it means increasing the size of the 
index and reindexing every document. However, the information is already 
available in the existing field and runtime analysis is certainly faster than 
more disk I/O.

> Changing the index at query time

No... I'm sure I left out enough details to be confusing. The additional fields 
in our current workaround need to be managed periodically over the course of a 
document's lifetime, not at query time. To be honest, I'm not involved on the 
workaround. I'm just trying to avoid going down the wrong path.

> Query.html#rewrite

So it sounds like I should attempt to write my own InverseWildcardQuery class 
which overrides this method. Perhaps I can use WildcardQuery as an example? 
WildcardQuery has changed parent classes over recent versions and and we're 
unfortunately using the older at the moment.

I guess I had hoped others have handled this type of query before. Again, we're 
just trying to find all documents that have at least one field that  doesn't 
match the wildcard query.





----- Original Message ----
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Sent: Fri, July 30, 2010 3:01:14 PM
Subject: RE: InverseWildcardQuery

> > you want what Lucene already does, but that's clearly not true
> 
> Hmmm, let's pretend that "contents" field in my example wasn't analyzed at 
>index
> time. The unstemmed form of terms will be indexed. But if I query with a 
>stemmed
> form or use QueryParser with the SnowballAnalyzer, I'm not going to get a 
>match.
> I could fix this situation by analyzing the indexed field at search time to
> match the query. I don't know that Lucene provides this opportunity and, as I
> said, maybe that's crazy.

I don't know of any facility in Lucene to re-analyze indexed content at search 
time.  This is an IR anti-pattern - it defeats the purpose of constructing the 
inverted index.

People generally decide prior to indexing what kind of queries they need to 
support, and then perform all required document analysis at index time.  To use 
your stemming example, if you need to be able to match against both stemmed and 
unstemmed forms, you would make both a stemmed field and an unstemmed field, and 
then construct corresponding sub-queries against each as required.

> > What do you mean when you say "rewriting"
> 
> "Our current path to solving our problem requires additional fields which need
> rewritten". I meant actually altering the document in the index. My desire has
> been to write a new Query class implementation whereas you mentioned query
> rewriting (isn't that accomplished as in my example by passing an Analyzer to
> QueryParser?)

Changing the index at query time, unless you have a tiny set of documents, 
sounds like a big mistake to me.  Again, extremely expensive.

Query rewriting: 
<http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/search/Query.html#rewrite%28org.apache.lucene.index.IndexReader%29>


> > not discrete...  limited number of prefixes
> 
> So my document may have "myfield:A*foo*", "myfield:B*foo*",
> "myfield:A*dog*", and "myfield:D*cat*".
> 
> Or, to phrase differently, "myfield:[PREFIX][PATTERN]" may appear any
> number of times where PREFIX comes from the set { A, B, C, D, E, ... }.
> 
> This complexity is really a tangent of my question in order to avoid poor
> performance from WildcardQuery.

I still think you could make one field for each PREFIX, and then do whatever 
query you want on each of those fields.

If you need to support "contains" functionality (e.g. "A:*foo*"), you might want 
to look into ngram analysis at indexing time (and maybe also at query time, 
depending on the source of your queries):

<http://lucene.apache.org/java/3_0_2/api/all/org/apache/lucene/analysis/ngram/NGramTokenFilter.html>


You would have to know the minimum and maximum length of the contained string 
you would want to query for.

Steve


      

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 20:36:13 2010
Return-Path: <java-user-return-46875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58149 invoked from network); 30 Jul 2010 20:36:12 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 20:36:12 -0000
Received: (qmail 88982 invoked by uid 500); 30 Jul 2010 20:36:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88896 invoked by uid 500); 30 Jul 2010 20:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88886 invoked by uid 99); 30 Jul 2010 20:36:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 20:36:10 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 20:36:02 +0000
Received: by bwz2 with SMTP id 2so1382575bwz.35
        for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 13:35:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:mime-version:received:in-reply-to
         :references:from:date:message-id:subject:to:content-type
         :content-transfer-encoding;
        bh=TlW6s62P4NjiPfssrA/LjkFQ2ffyzUgwO1D2mDzIHrI=;
        b=bDD6KquujH7kNaxNbhFXjB5HPIVpUJjvZgoHvApkRql55KUjCWrnDLQeBpzbqz5g5Y
         0+yqtgd9SRpEzwFxzPvhIzoATfFK/91ulZJzZ6SJJyts/hQ7G5OtTeylHu3ofCTiLPSf
         lEVUgacCsiRoO1TzZb1gE1PEgBVEBwuwokROQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=gope/oj+dn9uLCaXoIJ/UNCaHl6WFpjl9lB8g7Pwk5s60P9KzQ+NXB+kOJ1Rg0USQI
         7h2C9yaHdihBefNIbYyerC+vTPt3iiCAc3327zQIcVlegJJe9vSui3AyC6tRBaPhNBdR
         SdrVH9R8yTFOjI0PoCJ3gJEeWg9UjWGKYY7ps=
Received: by 10.204.161.205 with SMTP id s13mr1485113bkx.148.1280522142198; 
	Fri, 30 Jul 2010 13:35:42 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.153.215 with HTTP; Fri, 30 Jul 2010 13:35:22 -0700 (PDT)
In-Reply-To: <764293C8-86EA-4D0E-BFD2-A914B806D3AD@genome.stanford.edu>
References: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com> 
	<AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com> 
	<Pine.GSO.4.64.1007300807370.13898@fafner.Stanford.EDU> <AANLkTinEx9ChmQrs_F4Krwgwma_Wq5KzhjKiK_2qUqZ2@mail.gmail.com> 
	<764293C8-86EA-4D0E-BFD2-A914B806D3AD@genome.stanford.edu>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 30 Jul 2010 21:35:22 +0100
Message-ID: <AANLkTinTCnH9voLn0q=79CRHm7E_z3QhqqfvR79BO7Cm@mail.gmail.com>
Subject: Re: lucene/solr full text search
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, you can do that.  Make a Query for the 30 papers and use that
with your main query in a BooleanQuery if doing it programatically.
Or with so few documents and papers to match, just in a long string
via QueryParser.  See
http://lucene.apache.org/java/3_0_2/queryparsersyntax.html for details
on query parser syntax - that is also the answer to your other
question.

If performance is a concern and you will be reusing the same set of
pubmed ids you should look at filters, specifically QueryWrapperFilter
and CachingWrapperFilter.


--
Ian.


On Fri, Jul 30, 2010 at 6:19 PM, Shuai Weng <shuai@genome.stanford.edu> wro=
te:
>
> Sorry for the confusion..
>
> Currently, we have total 7000 fulltext papers (with the pubmed IDs stored=
 as the unique IDs)
> in the lucene index. =A0We were wondering if we can search for a given te=
rm in a subset of these papers
> (eg, 30 papers; by providing a list of the pubmed IDs) instead of searchi=
ng the term in these 7000
> papers. In another word, we only care about the hits in the 30 given pape=
rs. How can we easily filter out
> the other papers?
>
> Thanks,
> Shuai
>
>
> On Jul 30, 2010, at 9:56 AM, Ian Lea wrote:
>
>> Depending on what exactly you mean by "subset" and "index pool", then ye=
s.
>>
>> If you've got one lucene index containing docs
>>
>> docno: 1
>> category: computers
>> text: some words about computers
>>
>> docno: 2
>> category: computers
>> text: some more words about computers
>>
>> docno: 3
>> category: finance
>> text: some words about finance
>>
>> then a search for "text:words" will match all 3 whereas a search for
>> "category:computers text:words" will only match 2.
>>
>>
>> If this isn't what you are asking about I suggest you provide more detai=
l.
>>
>>
>> --
>> Ian.
>>
>> On Fri, Jul 30, 2010 at 4:15 PM, Shuai Weng <shuai@genome.stanford.edu> =
wrote:
>>>
>>> Hey,
>>>
>>> I was wondering if we can search info from a subset of papers
>>> instead of from the whole index pool.
>>>
>>> Thanks,
>>> Shuai
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 30 20:40:18 2010
Return-Path: <java-user-return-46876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58657 invoked from network); 30 Jul 2010 20:40:18 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 30 Jul 2010 20:40:18 -0000
Received: (qmail 95362 invoked by uid 500); 30 Jul 2010 20:40:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95281 invoked by uid 500); 30 Jul 2010 20:40:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95273 invoked by uid 99); 30 Jul 2010 20:40:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 20:40:15 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [171.67.219.83] (HELO smtp.stanford.edu) (171.67.219.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Jul 2010 20:40:07 +0000
Received: from smtp.stanford.edu (localhost.localdomain [127.0.0.1])
	by localhost (Postfix) with SMTP id C72101A06A9
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 13:39:45 -0700 (PDT)
Received: from gogo.stanford.edu (gogo.Stanford.EDU [171.65.75.146])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	(Authenticated sender: sweng)
	by smtp.stanford.edu (Postfix) with ESMTPSA id 7103F1A068B
	for <java-user@lucene.apache.org>; Fri, 30 Jul 2010 13:39:45 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1077)
Subject: Re: lucene/solr full text search
From: Shuai Weng <shuai@genome.stanford.edu>
In-Reply-To: <AANLkTinTCnH9voLn0q=79CRHm7E_z3QhqqfvR79BO7Cm@mail.gmail.com>
Date: Fri, 30 Jul 2010 13:39:45 -0700
Content-Transfer-Encoding: quoted-printable
Message-Id: <9E2FAB2C-A96B-4279-AF54-EFED5FA8BCFE@genome.stanford.edu>
References: <614C529D389A5944B351F7DFB7594F24C86AF2@uksrpblkexb01.detica.com>  <AANLkTi=DZAV7C3S3Fb_FRUkvzntcNZx6knkGVB0djw4o@mail.gmail.com>  <Pine.GSO.4.64.1007300807370.13898@fafner.Stanford.EDU> <AANLkTinEx9ChmQrs_F4Krwgwma_Wq5KzhjKiK_2qUqZ2@mail.gmail.com>  <764293C8-86EA-4D0E-BFD2-A914B806D3AD@genome.stanford.edu> <AANLkTinTCnH9voLn0q=79CRHm7E_z3QhqqfvR79BO7Cm@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1077)
X-Spam: Probability=8%, Report='
 BODY_SIZE_3000_3999 0, BODY_SIZE_5000_LESS 0, BODY_SIZE_7000_LESS 0, DATE_TZ_NA 0, __BOUNCE_CHALLENGE_SUBJ 0, __BOUNCE_NDR_SUBJ_EXEMPT 0, __CANPHARM_UNSUB_LINK 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __HAS_X_MAILER 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __MIME_VERSION_APPLEMAIL 0, __MSGID_APPLEMAIL 0, __SANE_MSGID 0, __TO_MALFORMED_2 0, __TO_NO_NAME 0, __URI_NO_WWW 0, __USER_AGENT_APPLEMAIL 0, __X_MAILER_APPLEMAIL 0'
X-Virus-Checked: Checked by ClamAV on apache.org


I just tried the long query string as you suggested and it works great.

Thanks,
Shuai

On Jul 30, 2010, at 1:35 PM, Ian Lea wrote:

> Yes, you can do that.  Make a Query for the 30 papers and use that
> with your main query in a BooleanQuery if doing it programatically.
> Or with so few documents and papers to match, just in a long string
> via QueryParser.  See
> http://lucene.apache.org/java/3_0_2/queryparsersyntax.html for details
> on query parser syntax - that is also the answer to your other
> question.
>=20
> If performance is a concern and you will be reusing the same set of
> pubmed ids you should look at filters, specifically QueryWrapperFilter
> and CachingWrapperFilter.
>=20
>=20
> --
> Ian.
>=20
>=20
> On Fri, Jul 30, 2010 at 6:19 PM, Shuai Weng =
<shuai@genome.stanford.edu> wrote:
>>=20
>> Sorry for the confusion..
>>=20
>> Currently, we have total 7000 fulltext papers (with the pubmed IDs =
stored as the unique IDs)
>> in the lucene index.  We were wondering if we can search for a given =
term in a subset of these papers
>> (eg, 30 papers; by providing a list of the pubmed IDs) instead of =
searching the term in these 7000
>> papers. In another word, we only care about the hits in the 30 given =
papers. How can we easily filter out
>> the other papers?
>>=20
>> Thanks,
>> Shuai
>>=20
>>=20
>> On Jul 30, 2010, at 9:56 AM, Ian Lea wrote:
>>=20
>>> Depending on what exactly you mean by "subset" and "index pool", =
then yes.
>>>=20
>>> If you've got one lucene index containing docs
>>>=20
>>> docno: 1
>>> category: computers
>>> text: some words about computers
>>>=20
>>> docno: 2
>>> category: computers
>>> text: some more words about computers
>>>=20
>>> docno: 3
>>> category: finance
>>> text: some words about finance
>>>=20
>>> then a search for "text:words" will match all 3 whereas a search for
>>> "category:computers text:words" will only match 2.
>>>=20
>>>=20
>>> If this isn't what you are asking about I suggest you provide more =
detail.
>>>=20
>>>=20
>>> --
>>> Ian.
>>>=20
>>> On Fri, Jul 30, 2010 at 4:15 PM, Shuai Weng =
<shuai@genome.stanford.edu> wrote:
>>>>=20
>>>> Hey,
>>>>=20
>>>> I was wondering if we can search info from a subset of papers
>>>> instead of from the whole index pool.
>>>>=20
>>>> Thanks,
>>>> Shuai
>>>=20
>>> =
---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 31 08:05:04 2010
Return-Path: <java-user-return-46877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70645 invoked from network); 31 Jul 2010 08:05:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Jul 2010 08:05:04 -0000
Received: (qmail 88819 invoked by uid 500); 31 Jul 2010 08:05:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88485 invoked by uid 500); 31 Jul 2010 08:05:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88477 invoked by uid 99); 31 Jul 2010 08:04:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 08:04:58 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mailer.thomas@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 08:04:50 +0000
Received: by ewy10 with SMTP id 10so1307935ewy.35
        for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 01:04:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from
         :user-agent:mime-version:to:subject:content-type
         :content-transfer-encoding;
        bh=BSQ0dAjoVDboTPROG6dJ5Nkj1p9747+iJgKD+iim7AU=;
        b=cvnnLiA84/XJ5+mXWwYkY/+sH6EyBy2/fFSspZONohqlxuCWQAaovOc0FaOsh+7e4D
         jANAzdWULXizr2iIvHH+LrNqeYthYHPNobrF1h4KeXWDZlz/Gmlr6TVvtzOhAFE/z4b3
         omMb7vUbnJtVIkMhomRvh5UJEqaTOVxUIvKpc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=MqAhlmV0jpIBePHWPTR0sb+xHh9pntue446RFfXfwtNyMyA+pEtK490H+5YvsDBBUV
         lrI+FZCfw2wdGsiteYb0v8TKux4164wvFseKzRr1l9FtOAX6ntC7Lwy+jezSL7e2bmp1
         kf2OnuQwwEpq+96UvIa2yw0sCJDxYoUzmQ1dI=
Received: by 10.14.127.196 with SMTP id d44mr1376714eei.86.1280563469149;
        Sat, 31 Jul 2010 01:04:29 -0700 (PDT)
Received: from [192.168.2.102] (dslb-188-103-162-235.pools.arcor-ip.net [188.103.162.235])
        by mx.google.com with ESMTPS id v8sm4697851eeh.2.2010.07.31.01.04.28
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 31 Jul 2010 01:04:28 -0700 (PDT)
Message-ID: <4C53D90B.9080700@gmail.com>
Date: Sat, 31 Jul 2010 10:04:27 +0200
From: Philippe <mailer.thomas@gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.11) Gecko/20100713 Thunderbird/3.0.6
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Rank results only on some fields
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I want to rank my results only on parts of my query.  E.g my query is 
"TITLE:Lucene AND AUTHOR:Manning". After this query standard lucene 
ranking for both fields take place.

However, is it possible to query the index using the full query and rank 
results only according to the "TITLE"-Field?

Regards,
     Philippe

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 31 08:19:02 2010
Return-Path: <java-user-return-46878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77009 invoked from network); 31 Jul 2010 08:19:02 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Jul 2010 08:19:02 -0000
Received: (qmail 93327 invoked by uid 500); 31 Jul 2010 08:19:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92924 invoked by uid 500); 31 Jul 2010 08:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92916 invoked by uid 99); 31 Jul 2010 08:18:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 08:18:55 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 08:18:47 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 03A5AD36007
	for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 10:18:27 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OCwEDTgeAWbf for <java-user@lucene.apache.org>;
	Sat, 31 Jul 2010 10:18:14 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 5A531D36005
	for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 10:18:14 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4C53D90B.9080700@gmail.com>
In-Reply-To: <4C53D90B.9080700@gmail.com>
Subject: RE: Rank results only on some fields
Date: Sat, 31 Jul 2010 10:19:10 +0200
Message-ID: <006701cb3089$0e128a60$2a379f20$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQEKSliYVV9aISpEEyz5FaWPOr4ZEpRMfOeA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

You can construct the query using a customized query parser that wraps all
queries not with the suggested field name using a "new
ConstantScoreQuery(new QueryWrapperFilter(originalCreatedQuery))". Override
newFieldQuery() to do that and pass the super call to this ctor chain.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Philippe [mailto:mailer.thomas@gmail.com]
> Sent: Saturday, July 31, 2010 10:04 AM
> To: java-user@lucene.apache.org
> Subject: Rank results only on some fields
> 
> Hi,
> 
> I want to rank my results only on parts of my query.  E.g my query is
> "TITLE:Lucene AND AUTHOR:Manning". After this query standard lucene
> ranking for both fields take place.
> 
> However, is it possible to query the index using the full query and rank
> results only according to the "TITLE"-Field?
> 
> Regards,
>      Philippe
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 31 08:59:40 2010
Return-Path: <java-user-return-46879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82821 invoked from network); 31 Jul 2010 08:59:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Jul 2010 08:59:40 -0000
Received: (qmail 10860 invoked by uid 500); 31 Jul 2010 08:59:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10371 invoked by uid 500); 31 Jul 2010 08:59:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10362 invoked by uid 99); 31 Jul 2010 08:59:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 08:59:34 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 08:59:27 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 69211D36007
	for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 10:59:05 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Qfw+-VwmibSV for <java-user@lucene.apache.org>;
	Sat, 31 Jul 2010 10:58:54 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id A217DD36005
	for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 10:58:53 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4C53D90B.9080700@gmail.com> <006701cb3089$0e128a60$2a379f20$@thetaphi.de>
In-Reply-To: <006701cb3089$0e128a60$2a379f20$@thetaphi.de>
Subject: RE: Rank results only on some fields
Date: Sat, 31 Jul 2010 10:59:50 +0200
Message-ID: <007401cb308e$bc0737b0$3415a710$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQEKSliYVV9aISpEEyz5FaWPOr4ZEgLgWfKJlDWDtUA=
Content-Language: de

Here some example code, the method is getFieldQuery() (Lucene 2.9 or 3.0 or
following, don't use that approach before, because QueryWrapperFilter is not
effective before 2.9 for that):

@Override
protected Query getFieldQuery(String field, String queryText)  throws
ParseException {
	Query q = super.getFieldQuery(field,queryText);
	if (!"TITLE".equals(field))
		q = new ConstantScoreQuery(new QueryWrapperFilter(q));
	return q;
}

I hope that explains itself. You may look at other Query type factories in
QP that produce scoring queries and wrap them similar. But e.g. WildCard and
RangeQueries are constant score. Phrases are also handled by this method.
Only the slop setting may not work correctly after this (look at the
instanceof checks in getFieldQuery(..., slop)).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> Sent: Saturday, July 31, 2010 10:19 AM
> To: java-user@lucene.apache.org
> Subject: RE: Rank results only on some fields
> 
> You can construct the query using a customized query parser that wraps all
> queries not with the suggested field name using a "new
> ConstantScoreQuery(new QueryWrapperFilter(originalCreatedQuery))".
> Override
> newFieldQuery() to do that and pass the super call to this ctor chain.
> 
> Uwe
> 
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
> 
> 
> > -----Original Message-----
> > From: Philippe [mailto:mailer.thomas@gmail.com]
> > Sent: Saturday, July 31, 2010 10:04 AM
> > To: java-user@lucene.apache.org
> > Subject: Rank results only on some fields
> >
> > Hi,
> >
> > I want to rank my results only on parts of my query.  E.g my query is
> > "TITLE:Lucene AND AUTHOR:Manning". After this query standard lucene
> > ranking for both fields take place.
> >
> > However, is it possible to query the index using the full query and
> > rank results only according to the "TITLE"-Field?
> >
> > Regards,
> >      Philippe
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 31 13:42:23 2010
Return-Path: <java-user-return-46880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62244 invoked from network); 31 Jul 2010 13:42:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Jul 2010 13:42:23 -0000
Received: (qmail 1533 invoked by uid 500); 31 Jul 2010 13:42:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1029 invoked by uid 500); 31 Jul 2010 13:42:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1019 invoked by uid 99); 31 Jul 2010 13:42:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 13:42:16 +0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anujshahwork@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 13:42:09 +0000
Received: by wyf23 with SMTP id 23so2796260wyf.35
        for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 06:41:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:date:message-id
         :subject:from:to:content-type;
        bh=rREqvl+17Br83Cidu0uxH//Pvd4Cok9Sn+7BdU1BWvE=;
        b=KoYh+NuwMZzooRXgqppvaFTGAA7DYZ49b/n0QYliPe+EcMmS6pOF0LP9MiB74EfoF9
         5rmET+kO4TqLL2o+K22EJzJ6ecucQ8RentL9tsOyvOvu3FiGElXP09FPTu/SItesC0ua
         GprU+ld9rDDWURdDqSRHAaWowkYiSzFbgFo3g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Wq5NAWSzBT1m0cxEKWvD7rIgOpDkbOWwptTXB+fgzmYhKB7cXS0oRljzm9+O9B95wt
         u6AToZnWS4LiAPU1YlLT9FCLGvK/EHQvg3zJwH9Tmi8DYCkw6qYq3Mb3PVbcg7LLYSU/
         pRu66kvi9IXdZXYUzqRGjhH6zdecLTTVewGxQ=
MIME-Version: 1.0
Received: by 10.227.138.141 with SMTP id a13mr2900199wbu.208.1280583708427; 
	Sat, 31 Jul 2010 06:41:48 -0700 (PDT)
Received: by 10.227.137.212 with HTTP; Sat, 31 Jul 2010 06:41:48 -0700 (PDT)
Date: Sat, 31 Jul 2010 14:41:48 +0100
Message-ID: <AANLkTimeF7QYLuS0K7ca6+tj=_2DSmhdzJQEr7iCAwyF@mail.gmail.com>
Subject: Get fields from a Query object
From: Anuj Shah <anujshahwork@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163646bb320bc72b048caf2124

--00163646bb320bc72b048caf2124
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Is there a way to get all the fields involved in a query?

Thanks

Anuj

--00163646bb320bc72b048caf2124--

From java-user-return-46881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 31 20:50:23 2010
Return-Path: <java-user-return-46881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75780 invoked from network); 31 Jul 2010 20:50:23 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Jul 2010 20:50:23 -0000
Received: (qmail 67097 invoked by uid 500); 31 Jul 2010 20:50:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66951 invoked by uid 500); 31 Jul 2010 20:50:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66943 invoked by uid 99); 31 Jul 2010 20:50:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 20:50:19 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of goksron@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 20:50:13 +0000
Received: by pwj2 with SMTP id 2so1724160pwj.35
        for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 13:49:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=xbIkNtE8nY8YksQa9eWhqnRiOTQVbT5QkkVlvmNG8gI=;
        b=CvZf9pte4L07nemcnXGspRSqWzPPmBObnmnsXQPFka1H1uKE/+78YYFqXEFgN2yIow
         TpCZNVQFRkBafWJx7zhxreVwlhtVpeZO0XamPsdXAUDrt7MntIVLtK/AaG0TmqQQiqFT
         YvEP52Yp89o+pgDfF+30l5cAsmmzSuJeWiyp8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=LCFKYfiWjFndZ3qVPOjpvVPsNs6xJ9KXjxxf1bOE1PWqCi+wPEyeTCu6c3hxr6NYRL
         ZrJia+qS9t/Bade7hh055d37QziiKkxD2fEnTNa6n4P+A9DyIW2xEeBvWMVTSsqZsM4O
         NUt/Aj7Dthr4EPX0gnjZcijSowV0u0Gz2FN4s=
MIME-Version: 1.0
Received: by 10.142.13.15 with SMTP id 15mr3330570wfm.300.1280609391196; Sat, 
	31 Jul 2010 13:49:51 -0700 (PDT)
Received: by 10.142.139.11 with HTTP; Sat, 31 Jul 2010 13:49:51 -0700 (PDT)
In-Reply-To: <007401cb308e$bc0737b0$3415a710$@thetaphi.de>
References: <4C53D90B.9080700@gmail.com>
	<006701cb3089$0e128a60$2a379f20$@thetaphi.de>
	<007401cb308e$bc0737b0$3415a710$@thetaphi.de>
Date: Sat, 31 Jul 2010 13:49:51 -0700
Message-ID: <AANLkTinetz_NGvtJbGT4gQd4QdYAu7afEy2B4zkpQ7hr@mail.gmail.com>
Subject: Re: Rank results only on some fields
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Can't this use case be done with a function query?

On Sat, Jul 31, 2010 at 1:59 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Here some example code, the method is getFieldQuery() (Lucene 2.9 or 3.0 =
or
> following, don't use that approach before, because QueryWrapperFilter is =
not
> effective before 2.9 for that):
>
> @Override
> protected Query getFieldQuery(String field, String queryText) =C2=A0throw=
s
> ParseException {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0Query q =3D super.getFieldQuery(field,queryTex=
t);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0if (!"TITLE".equals(field))
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0q =3D new Constant=
ScoreQuery(new QueryWrapperFilter(q));
> =C2=A0 =C2=A0 =C2=A0 =C2=A0return q;
> }
>
> I hope that explains itself. You may look at other Query type factories i=
n
> QP that produce scoring queries and wrap them similar. But e.g. WildCard =
and
> RangeQueries are constant score. Phrases are also handled by this method.
> Only the slop setting may not work correctly after this (look at the
> instanceof checks in getFieldQuery(..., slop)).
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Uwe Schindler [mailto:uwe@thetaphi.de]
>> Sent: Saturday, July 31, 2010 10:19 AM
>> To: java-user@lucene.apache.org
>> Subject: RE: Rank results only on some fields
>>
>> You can construct the query using a customized query parser that wraps a=
ll
>> queries not with the suggested field name using a "new
>> ConstantScoreQuery(new QueryWrapperFilter(originalCreatedQuery))".
>> Override
>> newFieldQuery() to do that and pass the super call to this ctor chain.
>>
>> Uwe
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>>
>>
>> > -----Original Message-----
>> > From: Philippe [mailto:mailer.thomas@gmail.com]
>> > Sent: Saturday, July 31, 2010 10:04 AM
>> > To: java-user@lucene.apache.org
>> > Subject: Rank results only on some fields
>> >
>> > Hi,
>> >
>> > I want to rank my results only on parts of my query. =C2=A0E.g my quer=
y is
>> > "TITLE:Lucene AND AUTHOR:Manning". After this query standard lucene
>> > ranking for both fields take place.
>> >
>> > However, is it possible to query the index using the full query and
>> > rank results only according to the "TITLE"-Field?
>> >
>> > Regards,
>> > =C2=A0 =C2=A0 =C2=A0Philippe
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 31 20:56:40 2010
Return-Path: <java-user-return-46882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76048 invoked from network); 31 Jul 2010 20:56:40 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Jul 2010 20:56:40 -0000
Received: (qmail 69119 invoked by uid 500); 31 Jul 2010 20:56:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69056 invoked by uid 500); 31 Jul 2010 20:56:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69048 invoked by uid 99); 31 Jul 2010 20:56:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 20:56:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 20:56:29 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id B50CCD36008
	for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 22:56:09 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id WgOXwhEzSFhY for <java-user@lucene.apache.org>;
	Sat, 31 Jul 2010 22:55:58 +0200 (CEST)
Received: from VEGA (port-83-236-62-54.dynamic.qsc.de [83.236.62.54])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 576E1D36007
	for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 22:55:57 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4C53D90B.9080700@gmail.com>	<006701cb3089$0e128a60$2a379f20$@thetaphi.de>	<007401cb308e$bc0737b0$3415a710$@thetaphi.de> <AANLkTinetz_NGvtJbGT4gQd4QdYAu7afEy2B4zkpQ7hr@mail.gmail.com>
In-Reply-To: <AANLkTinetz_NGvtJbGT4gQd4QdYAu7afEy2B4zkpQ7hr@mail.gmail.com>
Subject: RE: Rank results only on some fields
Date: Sat, 31 Jul 2010 22:56:53 +0200
Message-ID: <000001cb30f2$e83f42f0$b8bdc8d0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQEKSliYVV9aISpEEyz5FaWPOr4ZEgLgWfKJAWN9etMBlJcbVZQejJ1A
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

We don't want to modify the ranking using functions, we want to switch =
some queries to constant score mode. The QueryParser subclassing is just =
to make it convenient.

In general to strip off scores from queries, you use "new =
ConstantScoreQuery(new QueryWrapperFilter(query))", this is used inside =
Lucene, too (MultiTermQuery,...). The trick is to normalize the Scorer =
to return a constant value (boost of CSQ). This can be done by first =
wrapping the scorer of the original query in a filter and then add a =
scorer to the filter again, that returns a constant.

With function queries you can do something similar by returning a =
constant in the CustomScoreProvider. The QWF/CSQ trick is more =
convenient and used quite often inside Lucene, too.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Lance Norskog [mailto:goksron@gmail.com]
> Sent: Saturday, July 31, 2010 10:50 PM
> To: java-user@lucene.apache.org
> Subject: Re: Rank results only on some fields
>=20
> Can't this use case be done with a function query?
>=20
> On Sat, Jul 31, 2010 at 1:59 AM, Uwe Schindler <uwe@thetaphi.de> =
wrote:
> > Here some example code, the method is getFieldQuery() (Lucene 2.9 or
> > 3.0 or following, don't use that approach before, because
> > QueryWrapperFilter is not effective before 2.9 for that):
> >
> > @Override
> > protected Query getFieldQuery(String field, String queryText)  =
throws
> > ParseException {
> >        Query q =3D super.getFieldQuery(field,queryText);
> >        if (!"TITLE".equals(field))
> >                q =3D new ConstantScoreQuery(new =
QueryWrapperFilter(q));
> >        return q;
> > }
> >
> > I hope that explains itself. You may look at other Query type
> > factories in QP that produce scoring queries and wrap them similar.
> > But e.g. WildCard and RangeQueries are constant score. Phrases are =
also
> handled by this method.
> > Only the slop setting may not work correctly after this (look at the
> > instanceof checks in getFieldQuery(..., slop)).
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> >
> >> -----Original Message-----
> >> From: Uwe Schindler [mailto:uwe@thetaphi.de]
> >> Sent: Saturday, July 31, 2010 10:19 AM
> >> To: java-user@lucene.apache.org
> >> Subject: RE: Rank results only on some fields
> >>
> >> You can construct the query using a customized query parser that
> >> wraps all queries not with the suggested field name using a "new
> >> ConstantScoreQuery(new QueryWrapperFilter(originalCreatedQuery))".
> >> Override
> >> newFieldQuery() to do that and pass the super call to this ctor =
chain.
> >>
> >> Uwe
> >>
> >> -----
> >> Uwe Schindler
> >> H.-H.-Meier-Allee 63, D-28213 Bremen
> >> http://www.thetaphi.de
> >> eMail: uwe@thetaphi.de
> >>
> >>
> >> > -----Original Message-----
> >> > From: Philippe [mailto:mailer.thomas@gmail.com]
> >> > Sent: Saturday, July 31, 2010 10:04 AM
> >> > To: java-user@lucene.apache.org
> >> > Subject: Rank results only on some fields
> >> >
> >> > Hi,
> >> >
> >> > I want to rank my results only on parts of my query.  E.g my =
query
> >> > is "TITLE:Lucene AND AUTHOR:Manning". After this query standard
> >> > lucene ranking for both fields take place.
> >> >
> >> > However, is it possible to query the index using the full query =
and
> >> > rank results only according to the "TITLE"-Field?
> >> >
> >> > Regards,
> >> >      Philippe
> >> >
> >> > =
-------------------------------------------------------------------
> >> > -- To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
>=20
> --
> Lance Norskog
> goksron@gmail.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-46883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 31 21:36:04 2010
Return-Path: <java-user-return-46883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88635 invoked from network); 31 Jul 2010 21:36:04 -0000
Received: from unknown (HELO mail.apache.org) (140.211.11.3)
  by 140.211.11.9 with SMTP; 31 Jul 2010 21:36:04 -0000
Received: (qmail 79695 invoked by uid 500); 31 Jul 2010 21:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79642 invoked by uid 500); 31 Jul 2010 21:36:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79634 invoked by uid 99); 31 Jul 2010 21:36:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 21:36:01 +0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goksron@gmail.com designates 209.85.212.176 as permitted sender)
Received: from [209.85.212.176] (HELO mail-px0-f176.google.com) (209.85.212.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Jul 2010 21:35:56 +0000
Received: by pxi11 with SMTP id 11so1738422pxi.35
        for <java-user@lucene.apache.org>; Sat, 31 Jul 2010 14:35:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:received:received:in-reply-to
         :references:date:message-id:subject:from:to:content-type
         :content-transfer-encoding;
        bh=5jWI/bsJfXzvKxwyxe6vW470Vg7+dQlPC4s7W9O1ba8=;
        b=Z+1nnY/hnHpLI3TJ2apASeNvhDtyjc9U60UrgjJJX/RIE34j9l1975bZCzkZr2vrSt
         2s9HfzLuGzvCbF78PZSG2JI70P0p8ukxM/4c2zNWH4bb3D1whJKHWUSesUOoxR67IfVw
         F6CgJBD16jAJnbPoBjBUulh6gUL024QE1ibv0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=vF6jUoyMcyReovT6Qfguv7vnrSyrFqHn10CTpSgH+i2dfXFJZPqTyi7qg4CZDyP6/R
         czZKyKisNwXLEECc6daMyPSD1k/jYfyu4G2aM0caGFZt3w8VntqtgrT9r6bV8jrbp6ZT
         2c03Gtt0ZQfjHN/C+oeVf2Ufr3n319gCkPazg=
MIME-Version: 1.0
Received: by 10.142.241.7 with SMTP id o7mr2713664wfh.72.1280612135862; Sat, 
	31 Jul 2010 14:35:35 -0700 (PDT)
Received: by 10.142.139.11 with HTTP; Sat, 31 Jul 2010 14:35:35 -0700 (PDT)
In-Reply-To: <000001cb30f2$e83f42f0$b8bdc8d0$@thetaphi.de>
References: <4C53D90B.9080700@gmail.com>
	<006701cb3089$0e128a60$2a379f20$@thetaphi.de>
	<007401cb308e$bc0737b0$3415a710$@thetaphi.de>
	<AANLkTinetz_NGvtJbGT4gQd4QdYAu7afEy2B4zkpQ7hr@mail.gmail.com>
	<000001cb30f2$e83f42f0$b8bdc8d0$@thetaphi.de>
Date: Sat, 31 Jul 2010 14:35:35 -0700
Message-ID: <AANLkTi=B0Gfp+fQ_Uo5UC7Thgafx=AsgnzD=VvT5PzD=@mail.gmail.com>
Subject: Re: Rank results only on some fields
From: Lance Norskog <goksron@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Oops, didn't notice that this was java-user. I had a Solr 'why write
more code' reaction ?)

On Sat, Jul 31, 2010 at 1:56 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> We don't want to modify the ranking using functions, we want to switch so=
me queries to constant score mode. The QueryParser subclassing is just to m=
ake it convenient.
>
> In general to strip off scores from queries, you use "new ConstantScoreQu=
ery(new QueryWrapperFilter(query))", this is used inside Lucene, too (Multi=
TermQuery,...). The trick is to normalize the Scorer to return a constant v=
alue (boost of CSQ). This can be done by first wrapping the scorer of the o=
riginal query in a filter and then add a scorer to the filter again, that r=
eturns a constant.
>
> With function queries you can do something similar by returning a constan=
t in the CustomScoreProvider. The QWF/CSQ trick is more convenient and used=
 quite often inside Lucene, too.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Lance Norskog [mailto:goksron@gmail.com]
>> Sent: Saturday, July 31, 2010 10:50 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Rank results only on some fields
>>
>> Can't this use case be done with a function query?
>>
>> On Sat, Jul 31, 2010 at 1:59 AM, Uwe Schindler <uwe@thetaphi.de> wrote:
>> > Here some example code, the method is getFieldQuery() (Lucene 2.9 or
>> > 3.0 or following, don't use that approach before, because
>> > QueryWrapperFilter is not effective before 2.9 for that):
>> >
>> > @Override
>> > protected Query getFieldQuery(String field, String queryText) =C2=A0th=
rows
>> > ParseException {
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0Query q =3D super.getFieldQuery(field,query=
Text);
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0if (!"TITLE".equals(field))
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0q =3D new Const=
antScoreQuery(new QueryWrapperFilter(q));
>> > =C2=A0 =C2=A0 =C2=A0 =C2=A0return q;
>> > }
>> >
>> > I hope that explains itself. You may look at other Query type
>> > factories in QP that produce scoring queries and wrap them similar.
>> > But e.g. WildCard and RangeQueries are constant score. Phrases are als=
o
>> handled by this method.
>> > Only the slop setting may not work correctly after this (look at the
>> > instanceof checks in getFieldQuery(..., slop)).
>> >
>> > Uwe
>> >
>> > -----
>> > Uwe Schindler
>> > H.-H.-Meier-Allee 63, D-28213 Bremen
>> > http://www.thetaphi.de
>> > eMail: uwe@thetaphi.de
>> >
>> >
>> >> -----Original Message-----
>> >> From: Uwe Schindler [mailto:uwe@thetaphi.de]
>> >> Sent: Saturday, July 31, 2010 10:19 AM
>> >> To: java-user@lucene.apache.org
>> >> Subject: RE: Rank results only on some fields
>> >>
>> >> You can construct the query using a customized query parser that
>> >> wraps all queries not with the suggested field name using a "new
>> >> ConstantScoreQuery(new QueryWrapperFilter(originalCreatedQuery))".
>> >> Override
>> >> newFieldQuery() to do that and pass the super call to this ctor chain=
.
>> >>
>> >> Uwe
>> >>
>> >> -----
>> >> Uwe Schindler
>> >> H.-H.-Meier-Allee 63, D-28213 Bremen
>> >> http://www.thetaphi.de
>> >> eMail: uwe@thetaphi.de
>> >>
>> >>
>> >> > -----Original Message-----
>> >> > From: Philippe [mailto:mailer.thomas@gmail.com]
>> >> > Sent: Saturday, July 31, 2010 10:04 AM
>> >> > To: java-user@lucene.apache.org
>> >> > Subject: Rank results only on some fields
>> >> >
>> >> > Hi,
>> >> >
>> >> > I want to rank my results only on parts of my query. =C2=A0E.g my q=
uery
>> >> > is "TITLE:Lucene AND AUTHOR:Manning". After this query standard
>> >> > lucene ranking for both fields take place.
>> >> >
>> >> > However, is it possible to query the index using the full query and
>> >> > rank results only according to the "TITLE"-Field?
>> >> >
>> >> > Regards,
>> >> > =C2=A0 =C2=A0 =C2=A0Philippe
>> >> >
>> >> > -------------------------------------------------------------------
>> >> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>>
>> --
>> Lance Norskog
>> goksron@gmail.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Lance Norskog
goksron@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


